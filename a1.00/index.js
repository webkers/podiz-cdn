var Sy=Object.defineProperty;var Ty=(t,e,i)=>e in t?Sy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var il=(t,e,i)=>(Ty(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(r){if(r.ep)return;r.ep=!0;const u=i(r);fetch(r.href,u)}})();function ve(){}const tu=t=>t;function Li(t,e){for(const i in e)t[i]=e[i];return t}function Ey(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function ym(t){return t()}function uf(){return Object.create(null)}function Be(t){t.forEach(ym)}function di(t){return typeof t=="function"}function Ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let fo;function $e(t,e){return t===e?!0:(fo||(fo=document.createElement("a")),fo.href=e,t===fo.href)}function Oy(t){return Object.keys(t).length===0}function iu(t,...e){if(t==null){for(const n of e)n(void 0);return ve}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function Ii(t){let e;return iu(t,i=>e=i)(),e}function Fe(t,e,i){t.$$.on_destroy.push(iu(e,i))}function $s(t,e,i,n){if(t){const r=bm(t,e,i,n);return t[0](r)}}function bm(t,e,i,n){return t[1]&&n?Li(i.ctx.slice(),t[1](n(e))):i.ctx}function Gs(t,e,i,n){if(t[2]&&n){const r=t[2](n(i));if(e.dirty===void 0)return r;if(typeof r=="object"){const u=[],d=Math.max(e.dirty.length,r.length);for(let a=0;a<d;a+=1)u[a]=e.dirty[a]|r[a];return u}return e.dirty|r}return e.dirty}function qs(t,e,i,n,r,u){if(r){const d=bm(e,i,n,u);t.p(d,r)}}function Ks(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let n=0;n<i;n++)e[n]=-1;return e}return-1}function ff(t){const e={};for(const i in t)i[0]!=="$"&&(e[i]=t[i]);return e}function ye(t,e,i){return t.set(i),e}function wm(t){return t&&di(t.destroy)?t.destroy:ve}function hf(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Cm=typeof window<"u";let Sm=Cm?()=>window.performance.now():()=>Date.now(),nu=Cm?t=>requestAnimationFrame(t):ve;const Sr=new Set;function Tm(t){Sr.forEach(e=>{e.c(t)||(Sr.delete(e),e.f())}),Sr.size!==0&&nu(Tm)}function Em(t){let e;return Sr.size===0&&nu(Tm),{promise:new Promise(i=>{Sr.add(e={c:t,f:i})}),abort(){Sr.delete(e)}}}function O(t,e){t.appendChild(e)}function Om(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ky(t){const e=x("style");return e.textContent="/* empty */",xy(Om(t),e),e.sheet}function xy(t,e){return O(t.head||t,e),e.sheet}function B(t,e,i){t.insertBefore(e,i||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Tt(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function x(t){return document.createElement(t)}function Dy(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function xe(t){return document.createTextNode(t)}function $(){return xe(" ")}function qe(){return xe("")}function oe(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function Hi(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ay(t){return function(e){e.target===this&&t.call(this,e)}}function S(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}const Py=["width","height"];function Zo(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:i[n]&&i[n].set&&Py.indexOf(n)===-1?t[n]=e[n]:S(t,n,e[n])}function df(t,e){for(const i in e)S(t,i,e[i])}function km(t){let e;return{p(...i){e=i,e.forEach(n=>t.push(n))},r(){e.forEach(i=>t.splice(t.indexOf(i),1))}}}function xm(t){return t===""?null:+t}function Iy(t){return Array.from(t.childNodes)}function Ke(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ye(t,e){t.value=e??""}function at(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function Mr(t,e,i){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function nl(t){const e=t.querySelector(":checked");return e&&e.__value}let ho;function Ry(){if(ho===void 0){ho=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ho=!0}}return ho}function My(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const n=x("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=Ry();let u;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",u=oe(window,"message",d=>{d.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{u=oe(n.contentWindow,"resize",e),e()}),O(t,n),()=>{(r||u&&n.contentWindow)&&u(),j(n)}}function Ni(t,e,i){t.classList.toggle(e,!!i)}function Dm(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}function zt(t,e){return new t(e)}const Qo=new Map;let ea=0;function Fy(t){let e=5381,i=t.length;for(;i--;)e=(e<<5)-e^t.charCodeAt(i);return e>>>0}function Ly(t,e){const i={stylesheet:ky(e),rules:{}};return Qo.set(t,i),i}function ec(t,e,i,n,r,u,d,a=0){const s=16.666/n;let c=`{
`;for(let g=0;g<=1;g+=s){const v=e+(i-e)*u(g);c+=g*100+`%{${d(v,1-v)}}
`}const f=c+`100% {${d(i,1-i)}}
}`,o=`__svelte_${Fy(f)}_${a}`,l=Om(t),{stylesheet:h,rules:p}=Qo.get(l)||Ly(l,t);p[o]||(p[o]=!0,h.insertRule(`@keyframes ${o} ${f}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${o} ${n}ms linear ${r}ms 1 both`,ea+=1,o}function Am(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?u=>u.indexOf(e)<0:u=>u.indexOf("__svelte")===-1),r=i.length-n.length;r&&(t.style.animation=n.join(", "),ea-=r,ea||Ny())}function Ny(){nu(()=>{ea||(Qo.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),Qo.clear())})}function jy(t,e,i,n){if(!e)return ve;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return ve;const{delay:u=0,duration:d=300,easing:a=tu,start:s=Sm()+u,end:c=s+d,tick:f=ve,css:o}=i(t,{from:e,to:r},n);let l=!0,h=!1,p;function m(){o&&(p=ec(t,0,1,d,u,a,o)),u||(h=!0)}function g(){o&&Am(t,p),l=!1}return Em(v=>{if(!h&&v>=s&&(h=!0),h&&v>=c&&(f(1,0),g()),!l)return!1;if(h){const _=v-s,b=0+1*a(_/d);f(b,1-b)}return!0}),m(),f(0,1),g}function By(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:i,height:n}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=i,t.style.height=n,Uy(t,r)}}function Uy(t,e){const i=t.getBoundingClientRect();if(e.left!==i.left||e.top!==i.top){const n=getComputedStyle(t),r=n.transform==="none"?"":n.transform;t.style.transform=`${r} translate(${e.left-i.left}px, ${e.top-i.top}px)`}}let Is;function Vi(t){Is=t}function Js(){if(!Is)throw new Error("Function called outside component initialization");return Is}function _n(t){Js().$$.on_mount.push(t)}function Ji(t){Js().$$.on_destroy.push(t)}function wt(){const t=Js();return(e,i,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const u=Dm(e,i,{cancelable:n});return r.slice().forEach(d=>{d.call(t,u)}),!u.defaultPrevented}return!0}}function zy(t,e){return Js().$$.context.set(t,e),e}function ta(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const fr=[],Xe=[];let Tr=[];const tc=[],Pm=Promise.resolve();let ic=!1;function Im(){ic||(ic=!0,Pm.then(ru))}function Wy(){return Im(),Pm}function Yt(t){Tr.push(t)}function bt(t){tc.push(t)}const rl=new Set;let er=0;function ru(){if(er!==0)return;const t=Is;do{try{for(;er<fr.length;){const e=fr[er];er++,Vi(e),Hy(e.$$)}}catch(e){throw fr.length=0,er=0,e}for(Vi(null),fr.length=0,er=0;Xe.length;)Xe.pop()();for(let e=0;e<Tr.length;e+=1){const i=Tr[e];rl.has(i)||(rl.add(i),i())}Tr.length=0}while(fr.length);for(;tc.length;)tc.pop()();ic=!1,rl.clear(),Vi(t)}function Hy(t){if(t.fragment!==null){t.update(),Be(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Yt)}}function Vy(t){const e=[],i=[];Tr.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Tr=e}let os;function Xy(){return os||(os=Promise.resolve(),os.then(()=>{os=null})),os}function sl(t,e,i){t.dispatchEvent(Dm(`${e?"intro":"outro"}${i}`))}const Lo=new Set;let Xi;function Te(){Xi={r:0,c:[],p:Xi}}function Ee(){Xi.r||Be(Xi.c),Xi=Xi.p}function L(t,e){t&&t.i&&(Lo.delete(t),t.i(e))}function W(t,e,i,n){if(t&&t.o){if(Lo.has(t))return;Lo.add(t),Xi.c.push(()=>{Lo.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const Yy={duration:0};function Qt(t,e,i,n){let u=e(t,i,{direction:"both"}),d=n?0:1,a=null,s=null,c=null,f;function o(){c&&Am(t,c)}function l(p,m){const g=p.b-d;return m*=Math.abs(g),{a:d,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function h(p){const{delay:m=0,duration:g=300,easing:v=tu,tick:_=ve,css:b}=u||Yy,y={start:Sm()+m,b:p};p||(y.group=Xi,Xi.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=y:(b&&(o(),c=ec(t,d,p,g,m,v,b)),p&&_(0,1),a=l(y,g),Yt(()=>sl(t,p,"start")),Em(w=>{if(s&&w>s.start&&(a=l(s,g),s=null,sl(t,a.b,"start"),b&&(o(),c=ec(t,d,a.b,a.duration,0,v,u.css))),a){if(w>=a.end)_(d=a.b,1-d),sl(t,a.b,"end"),s||(a.b?o():--a.group.r||Be(a.group.c)),a=null;else if(w>=a.start){const C=w-a.start;d=a.a+a.d*v(C/a.duration),_(d,1-d)}}return!!(a||s)}))}return{run(p){di(u)?Xy().then(()=>{u=u({direction:p?"in":"out"}),h(p)}):h(p)},end(){o(),a=s=null}}}function Rs(t,e){const i=e.token={};function n(r,u,d,a){if(e.token!==i)return;e.resolved=a;let s=e.ctx;d!==void 0&&(s=s.slice(),s[d]=a);const c=r&&(e.current=r)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((o,l)=>{l!==u&&o&&(Te(),W(o,1,1,()=>{e.blocks[l]===o&&(e.blocks[l]=null)}),Ee())}):e.block.d(1),c.c(),L(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[u]=c),f&&ru()}if(Ey(t)){const r=Js();if(t.then(u=>{Vi(r),n(e.then,1,e.value,u),Vi(null)},u=>{if(Vi(r),n(e.catch,2,e.error,u),Vi(null),!e.hasCatch)throw u}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function su(t,e,i){const n=e.slice(),{resolved:r}=t;t.current===t.then&&(n[t.value]=r),t.current===t.catch&&(n[t.error]=r),t.block.p(n,i)}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Rm(t,e){W(t,1,1,()=>{e.delete(t.key)})}function $y(t,e){t.f(),Rm(t,e)}function Mm(t,e,i,n,r,u,d,a,s,c,f,o){let l=t.length,h=u.length,p=l;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map,b=[];for(p=h;p--;){const T=o(r,u,p),E=i(T);let A=d.get(E);A?n&&b.push(()=>A.p(T,e)):(A=c(E,T),A.c()),v.set(E,g[p]=A),E in m&&_.set(E,Math.abs(p-m[E]))}const y=new Set,w=new Set;function C(T){L(T,1),T.m(a,f),d.set(T.key,T),f=T.first,h--}for(;l&&h;){const T=g[h-1],E=t[l-1],A=T.key,F=E.key;T===E?(f=T.first,l--,h--):v.has(F)?!d.has(A)||y.has(A)?C(T):w.has(F)?l--:_.get(A)>_.get(F)?(w.add(A),C(T)):(y.add(F),l--):(s(E,d),l--)}for(;l--;){const T=t[l];v.has(T.key)||s(T,d)}for(;h;)C(g[h-1]);return Be(b),g}function Hn(t,e){const i={},n={},r={$$scope:1};let u=t.length;for(;u--;){const d=t[u],a=e[u];if(a){for(const s in d)s in a||(n[s]=1);for(const s in a)r[s]||(i[s]=a[s],r[s]=1);t[u]=a}else for(const s in d)r[s]=1}for(const d in n)d in i||(i[d]=void 0);return i}function ia(t){return typeof t=="object"&&t!==null?t:{}}function ct(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function de(t){t&&t.c()}function fe(t,e,i){const{fragment:n,after_update:r}=t.$$;n&&n.m(e,i),Yt(()=>{const u=t.$$.on_mount.map(ym).filter(di);t.$$.on_destroy?t.$$.on_destroy.push(...u):Be(u),t.$$.on_mount=[]}),r.forEach(Yt)}function he(t,e){const i=t.$$;i.fragment!==null&&(Vy(i.after_update),Be(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Gy(t,e){t.$$.dirty[0]===-1&&(fr.push(t),Im(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function He(t,e,i,n,r,u,d=null,a=[-1]){const s=Is;Vi(t);const c=t.$$={fragment:null,ctx:[],props:u,update:ve,not_equal:r,bound:uf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:uf(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};d&&d(c.root);let f=!1;if(c.ctx=i?i(t,e.props||{},(o,l,...h)=>{const p=h.length?h[0]:l;return c.ctx&&r(c.ctx[o],c.ctx[o]=p)&&(!c.skip_bound&&c.bound[o]&&c.bound[o](p),f&&Gy(t,o)),l}):[],c.update(),f=!0,Be(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const o=Iy(e.target);c.fragment&&c.fragment.l(o),o.forEach(j)}else c.fragment&&c.fragment.c();e.intro&&L(t.$$.fragment),fe(t,e.target,e.anchor),ru()}Vi(s)}class Ve{constructor(){il(this,"$$");il(this,"$$set")}$destroy(){he(this,1),this.$destroy=ve}$on(e,i){if(!di(i))return ve;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Oy(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qy="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qy);var Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var et={};const Jy={},Zy=Object.freeze(Object.defineProperty({__proto__:null,default:Jy},Symbol.toStringTag,{value:"Module"})),Mn=Fm(Zy);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var i=Mn,n=new i.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=n.document,e.jsdomImplForWrapper=Mn.implForWrapper,e.nodeCanvas=Mn.Canvas,e.window=n,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(h,p){if(this.__eventListeners[h]){var m=this.__eventListeners[h];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function s(h,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in h)this.on(m,h[m]);else this.__eventListeners[h]||(this.__eventListeners[h]=[]),this.__eventListeners[h].push(p);return this}function c(h,p){var m=(function(){p.apply(this,arguments),this.off(h,m)}).bind(this);this.on(h,m)}function f(h,p){if(arguments.length===1)for(var m in h)c.call(this,m,h[m]);else c.call(this,h,p);return this}function o(h,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(h in this.__eventListeners)a.call(this,h);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in h)a.call(this,m,h[m]);else a.call(this,h,p);return this}function l(h,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[h];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[h]=m.filter(function(_){return _!==!1}),this}e.Observable={fire:l,on:s,once:f,off:o}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,c){var f=this._objects;return c?f[s]=a:f.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,c=!1,f=0,o=arguments.length;f<o;f++)s=a.indexOf(arguments[f]),s!==-1&&(c=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var c=this.getObjects(),f=0,o=c.length;f<o;f++)a.call(s,c[f],f,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(s,new e.Gradient(a))},_initPattern:function(a,s,c){a&&a.source&&!(a instanceof e.Pattern)?this.set(s,new e.Pattern(a,c)):c&&c()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,c=Math.atan2,f=Math.pow,o=Math.PI/180,l=Math.PI/2;e.util={cos:function(h){if(h===0)return 1;h<0&&(h=-h);var p=h/l;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(h)},sin:function(h){if(h===0)return 0;var p=h/l,m=1;switch(h<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(h)},removeFromArray:function(h,p){var m=h.indexOf(p);return m!==-1&&h.splice(m,1),h},getRandomInt:function(h,p){return Math.floor(Math.random()*(p-h+1))+h},degreesToRadians:function(h){return h*o},radiansToDegrees:function(h){return h/o},rotatePoint:function(h,p,m){var g=new e.Point(h.x-p.x,h.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(h,p){var m=e.util.sin(p),g=e.util.cos(p),v=h.x*g-h.y*m,_=h.x*m+h.y*g;return{x:v,y:_}},createVector:function(h,p){return new e.Point(p.x-h.x,p.y-h.y)},calcAngleBetweenVectors:function(h,p){return Math.acos((h.x*p.x+h.y*p.y)/(Math.hypot(h.x,h.y)*Math.hypot(p.x,p.y)))},getHatVector:function(h){return new e.Point(h.x,h.y).multiply(1/Math.hypot(h.x,h.y))},getBisector:function(h,p,m){var g=e.util.createVector(h,p),v=e.util.createVector(h,m),_=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,_),v),y=_*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,y)),angle:_}},projectStrokeOnPoints:function(h,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(y){var w=v/Math.hypot(y.x,y.y);return new e.Point(y.x*w*_.x,y.y*w*_.y)};return h.length<=1||h.forEach(function(y,w){var C=new e.Point(y.x,y.y),T,E;w===0?(E=h[w+1],T=m?b(e.util.createVector(E,C)).addEquals(C):h[h.length-1]):w===h.length-1?(T=h[w-1],E=m?b(e.util.createVector(T,C)).addEquals(C):h[0]):(T=h[w-1],E=h[w+1]);var A=e.util.getBisector(C,T,E),F=A.vector,G=A.angle,Y,Q;if(p.strokeLineJoin==="miter"&&(Y=-v/Math.sin(G/2),Q=new e.Point(F.x*Y*_.x,F.y*Y*_.y),Math.hypot(Q.x,Q.y)/v<=p.strokeMiterLimit)){g.push(C.add(Q)),g.push(C.subtract(Q));return}Y=-v*Math.SQRT2,Q=new e.Point(F.x*Y*_.x,F.y*Y*_.y),g.push(C.add(Q)),g.push(C.subtract(Q))}),g},transformPoint:function(h,p,m){return m?new e.Point(p[0]*h.x+p[2]*h.y,p[1]*h.x+p[3]*h.y):new e.Point(p[0]*h.x+p[2]*h.y+p[4],p[1]*h.x+p[3]*h.y+p[5])},makeBoundingBoxFromPoints:function(h,p){if(p)for(var m=0;m<h.length;m++)h[m]=e.util.transformPoint(h[m],p);var g=[h[0].x,h[1].x,h[2].x,h[3].x],v=e.util.array.min(g),_=e.util.array.max(g),b=_-v,y=[h[0].y,h[1].y,h[2].y,h[3].y],w=e.util.array.min(y),C=e.util.array.max(y),T=C-w;return{left:v,top:w,width:b,height:T}},invertTransform:function(h){var p=1/(h[0]*h[3]-h[1]*h[2]),m=[p*h[3],-p*h[1],-p*h[2],p*h[0]],g=e.util.transformPoint({x:h[4],y:h[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(h,p){return parseFloat(Number(h).toFixed(p))},parseUnit:function(h,p){var m=/\D{0,2}$/.exec(h),g=parseFloat(h);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(h,p){return h=e.util.string.camelize(h.charAt(0).toUpperCase()+h.slice(1)),e.util.resolveNamespace(p)[h]},getSvgAttributes:function(h){var p=["instantiated_by_use","style","id","class"];switch(h){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(h){if(!h)return e;var p=h.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(h,p,m,g){if(!h){p&&p.call(m,h);return}var v=e.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},h.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),h.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,_)),v.src=h},loadImageInDom:function(h,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(h),e.document.querySelector("body").appendChild(m),h.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(h,p,m,g){h=h||[];var v=[],_=0,b=h.length;function y(){++_===b&&p&&p(v.filter(function(w){return w}))}if(!b){p&&p(v);return}h.forEach(function(w,C){if(!w||!w.type){y();return}var T=e.util.getKlass(w.type,m);T.fromObject(w,function(E,A){A||(v[C]=E),g&&g(w,E,A),y()})})},enlivenObjectEnlivables:function(h,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!h[v]});e.util.enlivenObjects(g.map(function(v){return h[v]}),function(v){var _={};g.forEach(function(b,y){_[b]=v[y],p&&(p[b]=v[y])}),m&&m(_)})},enlivenPatterns:function(h,p){h=h||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=h.length;if(!_){p&&p(g);return}h.forEach(function(b,y){b&&b.source?new e.Pattern(b,function(w){g[y]=w,m()}):(g[y]=b,m())})},groupSVGElements:function(h,p,m){var g;return h&&h.length===1?(typeof m<"u"&&(h[0].sourcePath=m),h[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(h,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(h,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in h&&(p[m[g]]=h[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(h){var p=e.util.createCanvasElement();return p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0),p},toDataURL:function(h,p,m){return h.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(h,p,m){return[h[0]*p[0]+h[2]*p[1],h[1]*p[0]+h[3]*p[1],h[0]*p[2]+h[2]*p[3],h[1]*p[2]+h[3]*p[3],m?0:h[0]*p[4]+h[2]*p[5]+h[4],m?0:h[1]*p[4]+h[3]*p[5]+h[5]]},qrDecompose:function(h){var p=c(h[1],h[0]),m=f(h[0],2)+f(h[1],2),g=s(m),v=(h[0]*h[3]-h[2]*h[1])/g,_=c(h[0]*h[2]+h[1]*h[3],m);return{angle:p/o,scaleX:g,scaleY:v,skewX:_/o,skewY:0,translateX:h[4],translateY:h[5]}},calcRotateMatrix:function(h){if(!h.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(h.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(h){var p=typeof h.scaleX>"u"?1:h.scaleX,m=typeof h.scaleY>"u"?1:h.scaleY,g=[h.flipX?-p:p,0,0,h.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,_=e.util.degreesToRadians;return h.skewX&&(g=v(g,[1,0,Math.tan(_(h.skewX)),1],!0)),h.skewY&&(g=v(g,[1,Math.tan(_(h.skewY)),0,1],!0)),g},composeMatrix:function(h){var p=[1,0,0,1,h.translateX||0,h.translateY||0],m=e.util.multiplyTransformMatrices;return h.angle&&(p=m(p,e.util.calcRotateMatrix(h))),(h.scaleX!==1||h.scaleY!==1||h.skewX||h.skewY||h.flipX||h.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(h))),p},resetObjectTransform:function(h){h.scaleX=1,h.scaleY=1,h.skewX=0,h.skewY=0,h.flipX=!1,h.flipY=!1,h.rotate(0)},saveObjectTransform:function(h){return{scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,angle:h.angle,left:h.left,flipX:h.flipX,flipY:h.flipY,top:h.top}},isTransparent:function(h,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,b,y=h.getImageData(p,m,g*2||1,g*2||1),w=y.data.length;for(_=3;_<w&&(b=y.data[_],v=b<=0,v!==!1);_+=4);return y=null,v},parsePreserveAspectRatioAttribute:function(h){var p="meet",m="Mid",g="Mid",v=h.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(h){h=(h||"").toLowerCase(),h?e.charWidthsCache[h]&&delete e.charWidthsCache[h]:e.charWidthsCache={}},limitDimsByArea:function(h,p){var m=Math.sqrt(p*h),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(h,p,m){return Math.max(h,Math.min(p,m))},findScaleToFit:function(h,p){return Math.min(p.width/h.width,p.height/h.height)},findScaleToCover:function(h,p){return Math.max(p.width/h.width,p.height/h.height)},matrixToSVG:function(h){return"matrix("+h.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(h,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,h.calcOwnMatrix());e.util.applyTransformToObject(h,g)},addTransformToObject:function(h,p){e.util.applyTransformToObject(h,e.util.multiplyTransformMatrices(p,h.calcOwnMatrix()))},applyTransformToObject:function(h,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);h.flipX=!1,h.flipY=!1,h.set("scaleX",m.scaleX),h.set("scaleY",m.scaleY),h.skewX=m.skewX,h.skewY=m.skewY,h.angle=m.angle,h.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(h,p,m){var g=h/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),y=e.util.makeBoundingBoxFromPoints(_,b);return{x:y.width,y:y.height}},mergeClipPaths:function(h,p){var m=h,g=p;m.inverted&&!g.inverted&&(m=p,g=h),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(h,p,m){return m=m||!1,h.fill!==p.fill||h.stroke!==p.stroke||h.strokeWidth!==p.strokeWidth||h.fontSize!==p.fontSize||h.fontFamily!==p.fontFamily||h.fontWeight!==p.fontWeight||h.fontStyle!==p.fontStyle||h.textBackgroundColor!==p.textBackgroundColor||h.deltaY!==p.deltaY||m&&(h.overline!==p.overline||h.underline!==p.underline||h.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},b=[],y=0;y<g.length;y++){if(!m[y]){v+=g[y].length;continue}for(var w=0;w<g[y].length;w++){v++;var C=m[y][w];if(C&&Object.keys(C).length>0){var T=e.util.hasStyleChanged(_,C,!0);T?b.push({start:v,end:v+1,style:C}):b[b.length-1].end++}_=C||{}}}return b},stylesFromArray:function(h,p){if(!Array.isArray(h))return h;for(var m=p.split(`
`),g=-1,v=0,_={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)g++,h[v]&&h[v].start<=g&&g<h[v].end&&(_[b]=_[b]||{},_[b][y]=Object.assign({},h[v].style),g===h[v].end-1&&v++);return _}}}(t),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function f(k,P,R,M,K,I,D,z,J,ne,Z){var H=e.util.cos(k),se=e.util.sin(k),pe=e.util.cos(P),U=e.util.sin(P),X=R*K*pe-M*I*U+D,ae=M*K*pe+R*I*U+z,le=ne+J*(-R*K*se-M*I*H),re=Z+J*(-M*K*se+R*I*H),ue=X+J*(R*K*U+M*I*pe),_e=ae+J*(M*K*U-R*I*pe);return["C",le,re,ue,_e,X,ae]}function o(k,P,R,M,K,I,D){var z=Math.PI,J=D*z/180,ne=e.util.sin(J),Z=e.util.cos(J),H=0,se=0;R=Math.abs(R),M=Math.abs(M);var pe=-Z*k*.5-ne*P*.5,U=-Z*P*.5+ne*k*.5,X=R*R,ae=M*M,le=U*U,re=pe*pe,ue=X*ae-X*le-ae*re,_e=0;if(ue<0){var ke=Math.sqrt(1-ue/(X*ae));R*=ke,M*=ke}else _e=(K===I?-1:1)*Math.sqrt(ue/(X*le+ae*re));var we=_e*R*U/M,ce=-_e*M*pe/R,ie=Z*we-ne*ce+k*.5,ge=ne*we+Z*ce+P*.5,be=l(1,0,(pe-we)/R,(U-ce)/M),De=l((pe-we)/R,(U-ce)/M,(-pe-we)/R,(-U-ce)/M);I===0&&De>0?De-=2*z:I===1&&De<0&&(De+=2*z);for(var Pe=Math.ceil(Math.abs(De/z*2)),Oe=[],Ae=De/Pe,Nt=8/3*Math.sin(Ae/4)*Math.sin(Ae/4)/Math.sin(Ae/2),pt=be+Ae,ft=0;ft<Pe;ft++)Oe[ft]=f(be,pt,Z,ne,R,M,ie,ge,Nt,H,se),H=Oe[ft][5],se=Oe[ft][6],be=pt,pt+=Ae;return Oe}function l(k,P,R,M){var K=Math.atan2(P,k),I=Math.atan2(M,R);return I>=K?I-K:2*Math.PI-(K-I)}function h(k,P,R,M,K,I,D,z){var J;if(e.cachesBoundsOfCurve&&(J=a.call(arguments),e.boundsOfCurveCache[J]))return e.boundsOfCurveCache[J];var ne=Math.sqrt,Z=Math.min,H=Math.max,se=Math.abs,pe=[],U=[[],[]],X,ae,le,re,ue,_e,ke,we;ae=6*k-12*R+6*K,X=-3*k+9*R-9*K+3*D,le=3*R-3*k;for(var ce=0;ce<2;++ce){if(ce>0&&(ae=6*P-12*M+6*I,X=-3*P+9*M-9*I+3*z,le=3*M-3*P),se(X)<1e-12){if(se(ae)<1e-12)continue;re=-le/ae,0<re&&re<1&&pe.push(re);continue}ke=ae*ae-4*le*X,!(ke<0)&&(we=ne(ke),ue=(-ae+we)/(2*X),0<ue&&ue<1&&pe.push(ue),_e=(-ae-we)/(2*X),0<_e&&_e<1&&pe.push(_e))}for(var ie,ge,be=pe.length,De=be,Pe;be--;)re=pe[be],Pe=1-re,ie=Pe*Pe*Pe*k+3*Pe*Pe*re*R+3*Pe*re*re*K+re*re*re*D,U[0][be]=ie,ge=Pe*Pe*Pe*P+3*Pe*Pe*re*M+3*Pe*re*re*I+re*re*re*z,U[1][be]=ge;U[0][De]=k,U[1][De]=P,U[0][De+1]=D,U[1][De+1]=z;var Oe=[{x:Z.apply(null,U[0]),y:Z.apply(null,U[1])},{x:H.apply(null,U[0]),y:H.apply(null,U[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[J]=Oe),Oe}function p(k,P,R){for(var M=R[1],K=R[2],I=R[3],D=R[4],z=R[5],J=R[6],ne=R[7],Z=o(J-k,ne-P,M,K,D,z,I),H=0,se=Z.length;H<se;H++)Z[H][1]+=k,Z[H][2]+=P,Z[H][3]+=k,Z[H][4]+=P,Z[H][5]+=k,Z[H][6]+=P;return Z}function m(k){var P=0,R=0,M=k.length,K=0,I=0,D,z,J,ne=[],Z,H,se;for(z=0;z<M;++z){switch(J=!1,D=k[z].slice(0),D[0]){case"l":D[0]="L",D[1]+=P,D[2]+=R;case"L":P=D[1],R=D[2];break;case"h":D[1]+=P;case"H":D[0]="L",D[2]=R,P=D[1];break;case"v":D[1]+=R;case"V":D[0]="L",R=D[1],D[1]=P,D[2]=R;break;case"m":D[0]="M",D[1]+=P,D[2]+=R;case"M":P=D[1],R=D[2],K=D[1],I=D[2];break;case"c":D[0]="C",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R,D[5]+=P,D[6]+=R;case"C":H=D[3],se=D[4],P=D[5],R=D[6];break;case"s":D[0]="S",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R;case"S":Z==="C"?(H=2*P-H,se=2*R-se):(H=P,se=R),P=D[3],R=D[4],D[0]="C",D[5]=D[3],D[6]=D[4],D[3]=D[1],D[4]=D[2],D[1]=H,D[2]=se,H=D[3],se=D[4];break;case"q":D[0]="Q",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R;case"Q":H=D[1],se=D[2],P=D[3],R=D[4];break;case"t":D[0]="T",D[1]+=P,D[2]+=R;case"T":Z==="Q"?(H=2*P-H,se=2*R-se):(H=P,se=R),D[0]="Q",P=D[1],R=D[2],D[1]=H,D[2]=se,D[3]=P,D[4]=R;break;case"a":D[0]="A",D[6]+=P,D[7]+=R;case"A":J=!0,ne=ne.concat(p(P,R,D)),P=D[6],R=D[7];break;case"z":case"Z":P=K,R=I;break}J||ne.push(D),Z=D[0]}return ne}function g(k,P,R,M){return Math.sqrt((R-k)*(R-k)+(M-P)*(M-P))}function v(k){return k*k*k}function _(k){return 3*k*k*(1-k)}function b(k){return 3*k*(1-k)*(1-k)}function y(k){return(1-k)*(1-k)*(1-k)}function w(k,P,R,M,K,I,D,z){return function(J){var ne=v(J),Z=_(J),H=b(J),se=y(J);return{x:D*ne+K*Z+R*H+k*se,y:z*ne+I*Z+M*H+P*se}}}function C(k,P,R,M,K,I,D,z){return function(J){var ne=1-J,Z=3*ne*ne*(R-k)+6*ne*J*(K-R)+3*J*J*(D-K),H=3*ne*ne*(M-P)+6*ne*J*(I-M)+3*J*J*(z-I);return Math.atan2(H,Z)}}function T(k){return k*k}function E(k){return 2*k*(1-k)}function A(k){return(1-k)*(1-k)}function F(k,P,R,M,K,I){return function(D){var z=T(D),J=E(D),ne=A(D);return{x:K*z+R*J+k*ne,y:I*z+M*J+P*ne}}}function G(k,P,R,M,K,I){return function(D){var z=1-D,J=2*z*(R-k)+2*D*(K-R),ne=2*z*(M-P)+2*D*(I-M);return Math.atan2(ne,J)}}function Y(k,P,R){var M={x:P,y:R},K,I=0,D;for(D=1;D<=100;D+=1)K=k(D/100),I+=g(M.x,M.y,K.x,K.y),M=K;return I}function Q(k,P){for(var R=0,M=0,K=k.iterator,I={x:k.x,y:k.y},D,z,J=.01,ne=k.angleFinder,Z;M<P&&J>1e-4;)D=K(R),Z=R,z=g(I.x,I.y,D.x,D.y),z+M>P?(R-=J,J/=2):(I=D,R+=J,M+=z);return D.angle=ne(Z),D}function q(k){for(var P=0,R=k.length,M,K=0,I=0,D=0,z=0,J=[],ne,Z,H,se=0;se<R;se++){switch(M=k[se],Z={x:K,y:I,command:M[0]},M[0]){case"M":Z.length=0,D=K=M[1],z=I=M[2];break;case"L":Z.length=g(K,I,M[1],M[2]),K=M[1],I=M[2];break;case"C":ne=w(K,I,M[1],M[2],M[3],M[4],M[5],M[6]),H=C(K,I,M[1],M[2],M[3],M[4],M[5],M[6]),Z.iterator=ne,Z.angleFinder=H,Z.length=Y(ne,K,I),K=M[5],I=M[6];break;case"Q":ne=F(K,I,M[1],M[2],M[3],M[4]),H=G(K,I,M[1],M[2],M[3],M[4]),Z.iterator=ne,Z.angleFinder=H,Z.length=Y(ne,K,I),K=M[3],I=M[4];break;case"Z":case"z":Z.destX=D,Z.destY=z,Z.length=g(K,I,D,z),K=D,I=z;break}P+=Z.length,J.push(Z)}return J.push({length:P,x:K,y:I}),J}function N(k,P,R){R||(R=q(k));for(var M=0;P-R[M].length>0&&M<R.length-2;)P-=R[M].length,M++;var K=R[M],I=P/K.length,D=K.command,z=k[M],J;switch(D){case"M":return{x:K.x,y:K.y,angle:0};case"Z":case"z":return J=new e.Point(K.x,K.y).lerp(new e.Point(K.destX,K.destY),I),J.angle=Math.atan2(K.destY-K.y,K.destX-K.x),J;case"L":return J=new e.Point(K.x,K.y).lerp(new e.Point(z[1],z[2]),I),J.angle=Math.atan2(z[2]-K.y,z[1]-K.x),J;case"C":return Q(K,P);case"Q":return Q(K,P)}}function V(k){var P=[],R=[],M,K,I=e.rePathCommand,D="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+D+")"+e.commaWsp,J="([01])"+e.commaWsp+"?",ne=z+"?"+z+"?"+z+J+J+z+"?("+D+")",Z=new RegExp(ne,"g"),H,se,pe;if(!k||!k.match)return P;pe=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var U=0,X,ae=pe.length;U<ae;U++){M=pe[U],se=M.slice(1).trim(),R.length=0;var le=M.charAt(0);if(X=[le],le.toLowerCase()==="a")for(var re;re=Z.exec(se);)for(var ue=1;ue<re.length;ue++)R.push(re[ue]);else for(;H=I.exec(se);)R.push(H[0]);for(var ue=0,_e=R.length;ue<_e;ue++)K=parseFloat(R[ue]),isNaN(K)||X.push(K);var ke=s[le.toLowerCase()],we=c[le]||le;if(X.length-1>ke)for(var ce=1,ie=X.length;ce<ie;ce+=ke)P.push([le].concat(X.slice(ce,ce+ke))),le=we;else P.push(X)}return P}function ee(k,P){var R=[],M,K=new e.Point(k[0].x,k[0].y),I=new e.Point(k[1].x,k[1].y),D=k.length,z=1,J=0,ne=D>2;for(P=P||0,ne&&(z=k[2].x<I.x?-1:k[2].x===I.x?0:1,J=k[2].y<I.y?-1:k[2].y===I.y?0:1),R.push(["M",K.x-z*P,K.y-J*P]),M=1;M<D;M++){if(!K.eq(I)){var Z=K.midPointFrom(I);R.push(["Q",K.x,K.y,Z.x,Z.y])}K=k[M],M+1<k.length&&(I=k[M+1])}return ne&&(z=K.x>k[M-2].x?1:K.x===k[M-2].x?0:-1,J=K.y>k[M-2].y?1:K.y===k[M-2].y?0:-1),R.push(["L",K.x+z*P,K.y+J*P]),R}function te(k,P,R){return R&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-R.x,-R.y])),k.map(function(M){for(var K=M.slice(0),I={},D=1;D<M.length-1;D+=2)I.x=M[D],I.y=M[D+1],I=e.util.transformPoint(I,P),K[D]=I.x,K[D+1]=I.y;return K})}e.util.joinPath=function(k){return k.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=V,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=ee,e.util.getPathSegmentsInfo=q,e.util.getBoundsOfCurve=h,e.util.getPointOnPath=N,e.util.transformPath=te}(),function(){var a=Array.prototype.slice;function s(h,p){for(var m=a.call(arguments,2),g=[],v=0,_=h.length;v<_;v++)g[v]=m.length?h[v][p].apply(h[v],m):h[v][p].call(h[v]);return g}function c(h,p){return l(h,p,function(m,g){return m>=g})}function f(h,p){return l(h,p,function(m,g){return m<g})}function o(h,p){for(var m=h.length;m--;)h[m]=p;return h}function l(h,p,m){if(!(!h||h.length===0)){var g=h.length-1,v=p?h[g][p]:h[g];if(p)for(;g--;)m(h[g][p],v)&&(v=h[g][p]);else for(;g--;)m(h[g],v)&&(v=h[g]);return v}}e.util.array={fill:o,invoke:s,min:f,max:c}}(),function(){function a(c,f,o){if(o)if(!e.isLikelyNode&&f instanceof Element)c=f;else if(f instanceof Array){c=[];for(var l=0,h=f.length;l<h;l++)c[l]=a({},f[l],o)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?c[p]=null:f.hasOwnProperty(p)&&(c[p]=a({},f[p],o));else c=f;else for(var p in f)c[p]=f[p];return c}function s(c,f){return a({},c,f)}e.util.object={extend:a,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function a(l){return l.replace(/-+(.)?/g,function(h,p){return p?p.toUpperCase():""})}function s(l,h){return l.charAt(0).toUpperCase()+(h?l.slice(1):l.slice(1).toLowerCase())}function c(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(l){var h=0,p,m=[];for(h=0,p;h<l.length;h++)(p=o(l,h))!==!1&&m.push(p);return m}function o(l,h){var p=l.charCodeAt(h);if(isNaN(p))return"";if(p<55296||p>57343)return l.charAt(h);if(55296<=p&&p<=56319){if(l.length<=h+1)throw"High surrogate without following low surrogate";var m=l.charCodeAt(h+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return l.charAt(h)+l.charAt(h+1)}if(h===0)throw"Low surrogate without preceding high surrogate";var g=l.charCodeAt(h-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:s,escapeXml:c,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,s=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var y=m[_].apply(this,arguments);if(this.constructor.superclass=b,_!=="initialize")return y}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function o(){}function l(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function h(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(o.prototype=p.prototype,g.prototype=new o,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=l,g}e.util.createClass=h}(),function(){var a=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,o,l,h){f&&f.addEventListener(o,l,a?!1:h)},e.util.removeListener=function(f,o,l,h){f&&f.removeEventListener(o,l,a?!1:h)};function c(f){var o=f.changedTouches;return o&&o[0]?o[0]:f}e.util.getPointer=function(f){var o=f.target,l=e.util.getScrollLeftTop(o),h=c(f);return{x:h.clientX+l.left,y:h.clientY+l.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(h,p){var m=h.style;if(!m)return h;if(typeof p=="string")return h.style.cssText+=";"+p,p.indexOf("opacity")>-1?l(h,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):h;for(var g in p)if(g==="opacity")l(h,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return h}var s=e.document.createElement("div"),c=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(h){return h};c?l=function(h,p){return h.style.opacity=p,h}:f&&(l=function(h,p){var m=h.style;return h.currentStyle&&!h.currentStyle.hasLayout&&(m.zoom=1),o.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(o,p)):m.filter+=" alpha(opacity="+p*100+")",h}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(y){return typeof y=="string"?e.document.getElementById(y):y}var c,f=function(y){return a.call(y,0)};try{c=f(e.document.childNodes)instanceof Array}catch{}c||(f=function(y){for(var w=new Array(y.length),C=y.length;C--;)w[C]=y[C];return w});function o(y,w){var C=e.document.createElement(y);for(var T in w)T==="class"?C.className=w[T]:T==="for"?C.htmlFor=w[T]:C.setAttribute(T,w[T]);return C}function l(y,w){y&&(" "+y.className+" ").indexOf(" "+w+" ")===-1&&(y.className+=(y.className?" ":"")+w)}function h(y,w,C){return typeof w=="string"&&(w=o(w,C)),y.parentNode&&y.parentNode.replaceChild(w,y),w.appendChild(y),w}function p(y){for(var w=0,C=0,T=e.document.documentElement,E=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(w=E.scrollLeft||T.scrollLeft||0,C=E.scrollTop||T.scrollTop||0):(w+=y.scrollLeft||0,C+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:w,top:C}}function m(y){var w,C=y&&y.ownerDocument,T={left:0,top:0},E={left:0,top:0},A,F={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return E;for(var G in F)E[F[G]]+=parseInt(g(y,G),10)||0;return w=C.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),A=p(y),{left:T.left+A.left-(w.clientLeft||0)+E.left,top:T.top+A.top-(w.clientTop||0)+E.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(y,w){var C=e.document.defaultView.getComputedStyle(y,null);return C?C[w]:void 0}:g=function(y,w){var C=y.style[w];return!C&&y.currentStyle&&(C=y.currentStyle[w]),C},function(){var y=e.document.documentElement.style,w="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function C(E){return typeof E.onselectstart<"u"&&(E.onselectstart=e.util.falseFunction),w?E.style[w]="none":typeof E.unselectable=="string"&&(E.unselectable="on"),E}function T(E){return typeof E.onselectstart<"u"&&(E.onselectstart=null),w?E.style[w]="":typeof E.unselectable=="string"&&(E.unselectable=""),E}e.util.makeElementUnselectable=C,e.util.makeElementSelectable=T}();function v(y){var w=e.jsdomImplForWrapper(y);return w._canvas||w._image}function _(y){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(y);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function b(y,w){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=w}e.util.setImageSmoothing=b,e.util.getById=s,e.util.toArray=f,e.util.addClass=l,e.util.makeElement=o,e.util.wrapElement=h,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=_}(),function(){function a(f,o){return f+(/\?/.test(f)?"&":"?")+o}function s(){}function c(f,o){o||(o={});var l=o.method?o.method.toUpperCase():"GET",h=o.onComplete||function(){},p=new e.window.XMLHttpRequest,m=o.body||o.parameters;return p.onreadystatechange=function(){p.readyState===4&&(h(p),p.onreadystatechange=s)},l==="GET"&&(m=null,typeof o.parameters=="string"&&(f=a(f,o.parameters))),p.open(l,f,!0),(l==="POST"||l==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,s=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return _.forEach(function(b){b.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(b){b.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function f(){return!1}function o(v,_,b,y){return-b*Math.cos(v/y*(Math.PI/2))+b+_}function l(v){v||(v={});var _=!1,b,y=function(){var w=e.runningAnimations.indexOf(b);return w>-1&&e.runningAnimations.splice(w,1)[0]};return b=a(s(v),{cancel:function(){return _=!0,y()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(w){var C=w||+new Date,T=v.duration||500,E=C+T,A,F=v.onChange||f,G=v.abort||f,Y=v.onComplete||f,Q=v.easing||o,q="startValue"in v?v.startValue.length>0:!1,N="startValue"in v?v.startValue:0,V="endValue"in v?v.endValue:100,ee=v.byValue||(q?N.map(function(te,k){return V[k]-N[k]}):V-N);v.onStart&&v.onStart(),function te(k){A=k||+new Date;var P=A>E?T:A-C,R=P/T,M=q?N.map(function(I,D){return Q(P,N[D],ee[D],T)}):Q(P,N,ee,T),K=Math.abs(q?(M[0]-N[0])/ee[0]:(M-N)/ee);if(b.currentValue=q?M.slice():M,b.completionRate=K,b.durationRate=R,!_){if(G(M,K,R)){y();return}if(A>E){b.currentValue=q?V.slice():V,b.completionRate=1,b.durationRate=1,F(q?V.slice():V,1,1),Y(V,1,1),y();return}else F(M,K,R),m(te)}}(C)}),b.cancel}var h=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return h.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=c}(),function(){function a(c,f,o){var l="rgba("+parseInt(c[0]+o*(f[0]-c[0]),10)+","+parseInt(c[1]+o*(f[1]-c[1]),10)+","+parseInt(c[2]+o*(f[2]-c[2]),10);return l+=","+(c&&f?parseFloat(c[3]+o*(f[3]-c[3])):1),l+=")",l}function s(c,f,o,l){var h=new e.Color(c).getSource(),p=new e.Color(f).getSource(),m=l.onComplete,g=l.onChange;return l=l||{},e.util.animate(e.util.object.extend(l,{duration:o||500,startValue:h,endValue:p,byValue:p,easing:function(v,_,b,y){var w=l.colorEasing?l.colorEasing(v,y):1-Math.cos(v/y*(Math.PI/2));return a(_,b,w)},onComplete:function(v,_,b){if(m)return m(a(p,p,0),_,b)},onChange:function(v,_,b){if(g){if(Array.isArray(v))return g(a(v,v,0),_,b);g(v,_,b)}}}))}e.util.animateColor=s}(),function(){function a(k,P,R,M){return k<Math.abs(P)?(k=P,M=R/4):P===0&&k===0?M=R/(2*Math.PI)*Math.asin(1):M=R/(2*Math.PI)*Math.asin(P/k),{a:k,c:P,p:R,s:M}}function s(k,P,R){return k.a*Math.pow(2,10*(P-=1))*Math.sin((P*R-k.s)*(2*Math.PI)/k.p)}function c(k,P,R,M){return R*((k=k/M-1)*k*k+1)+P}function f(k,P,R,M){return k/=M/2,k<1?R/2*k*k*k+P:R/2*((k-=2)*k*k+2)+P}function o(k,P,R,M){return R*(k/=M)*k*k*k+P}function l(k,P,R,M){return-R*((k=k/M-1)*k*k*k-1)+P}function h(k,P,R,M){return k/=M/2,k<1?R/2*k*k*k*k+P:-R/2*((k-=2)*k*k*k-2)+P}function p(k,P,R,M){return R*(k/=M)*k*k*k*k+P}function m(k,P,R,M){return R*((k=k/M-1)*k*k*k*k+1)+P}function g(k,P,R,M){return k/=M/2,k<1?R/2*k*k*k*k*k+P:R/2*((k-=2)*k*k*k*k+2)+P}function v(k,P,R,M){return-R*Math.cos(k/M*(Math.PI/2))+R+P}function _(k,P,R,M){return R*Math.sin(k/M*(Math.PI/2))+P}function b(k,P,R,M){return-R/2*(Math.cos(Math.PI*k/M)-1)+P}function y(k,P,R,M){return k===0?P:R*Math.pow(2,10*(k/M-1))+P}function w(k,P,R,M){return k===M?P+R:R*(-Math.pow(2,-10*k/M)+1)+P}function C(k,P,R,M){return k===0?P:k===M?P+R:(k/=M/2,k<1?R/2*Math.pow(2,10*(k-1))+P:R/2*(-Math.pow(2,-10*--k)+2)+P)}function T(k,P,R,M){return-R*(Math.sqrt(1-(k/=M)*k)-1)+P}function E(k,P,R,M){return R*Math.sqrt(1-(k=k/M-1)*k)+P}function A(k,P,R,M){return k/=M/2,k<1?-R/2*(Math.sqrt(1-k*k)-1)+P:R/2*(Math.sqrt(1-(k-=2)*k)+1)+P}function F(k,P,R,M){var K=1.70158,I=0,D=R;if(k===0)return P;if(k/=M,k===1)return P+R;I||(I=M*.3);var z=a(D,R,I,K);return-s(z,k,M)+P}function G(k,P,R,M){var K=1.70158,I=0,D=R;if(k===0)return P;if(k/=M,k===1)return P+R;I||(I=M*.3);var z=a(D,R,I,K);return z.a*Math.pow(2,-10*k)*Math.sin((k*M-z.s)*(2*Math.PI)/z.p)+z.c+P}function Y(k,P,R,M){var K=1.70158,I=0,D=R;if(k===0)return P;if(k/=M/2,k===2)return P+R;I||(I=M*(.3*1.5));var z=a(D,R,I,K);return k<1?-.5*s(z,k,M)+P:z.a*Math.pow(2,-10*(k-=1))*Math.sin((k*M-z.s)*(2*Math.PI)/z.p)*.5+z.c+P}function Q(k,P,R,M,K){return K===void 0&&(K=1.70158),R*(k/=M)*k*((K+1)*k-K)+P}function q(k,P,R,M,K){return K===void 0&&(K=1.70158),R*((k=k/M-1)*k*((K+1)*k+K)+1)+P}function N(k,P,R,M,K){return K===void 0&&(K=1.70158),k/=M/2,k<1?R/2*(k*k*(((K*=1.525)+1)*k-K))+P:R/2*((k-=2)*k*(((K*=1.525)+1)*k+K)+2)+P}function V(k,P,R,M){return R-ee(M-k,0,R,M)+P}function ee(k,P,R,M){return(k/=M)<1/2.75?R*(7.5625*k*k)+P:k<2/2.75?R*(7.5625*(k-=1.5/2.75)*k+.75)+P:k<2.5/2.75?R*(7.5625*(k-=2.25/2.75)*k+.9375)+P:R*(7.5625*(k-=2.625/2.75)*k+.984375)+P}function te(k,P,R,M){return k<M/2?V(k*2,0,R,M)*.5+P:ee(k*2-M,0,R,M)*.5+R*.5+P}e.util.ease={easeInQuad:function(k,P,R,M){return R*(k/=M)*k+P},easeOutQuad:function(k,P,R,M){return-R*(k/=M)*(k-2)+P},easeInOutQuad:function(k,P,R,M){return k/=M/2,k<1?R/2*k*k+P:-R/2*(--k*(k-2)-1)+P},easeInCubic:function(k,P,R,M){return R*(k/=M)*k*k+P},easeOutCubic:c,easeInOutCubic:f,easeInQuart:o,easeOutQuart:l,easeInOutQuart:h,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:b,easeInExpo:y,easeOutExpo:w,easeInOutExpo:C,easeInCirc:T,easeOutCirc:E,easeInOutCirc:A,easeInElastic:F,easeOutElastic:G,easeInOutElastic:Y,easeInBack:Q,easeOutBack:q,easeInOutBack:N,easeInBounce:V,easeOutBounce:ee,easeInOutBounce:te}}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,o=s.util.toFixed,l=s.util.parseUnit,h=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",w="clip-path";s.svgValidTagNamesRegEx=E(p),s.svgViewBoxElementsRegEx=E(m),s.svgInvalidAncestorsRegEx=E(g),s.svgValidParentsRegEx=E(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function C(I){return I in _?_[I]:I}function T(I,D,z,J){var ne=Array.isArray(D),Z;if((I==="fill"||I==="stroke")&&D==="none")D="";else{if(I==="strokeUniform")return D==="non-scaling-stroke";if(I==="strokeDashArray")D==="none"?D=null:D=D.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(I==="transformMatrix")z&&z.transformMatrix?D=h(z.transformMatrix,s.parseTransformAttribute(D)):D=s.parseTransformAttribute(D);else if(I==="visible")D=D!=="none"&&D!=="hidden",z&&z.visible===!1&&(D=!1);else if(I==="opacity")D=parseFloat(D),z&&typeof z.opacity<"u"&&(D*=z.opacity);else if(I==="textAnchor")D=D==="start"?"left":D==="end"?"right":"center";else if(I==="charSpacing")Z=l(D,J)/J*1e3;else if(I==="paintFirst"){var H=D.indexOf("fill"),se=D.indexOf("stroke"),D="fill";(H>-1&&se>-1&&se<H||H===-1&&se>-1)&&(D="stroke")}else{if(I==="href"||I==="xlink:href"||I==="font")return D;if(I==="imageSmoothing")return D==="optimizeQuality";Z=ne?D.map(l):l(D,J)}}return!ne&&isNaN(Z)?D:Z}function E(I){return new RegExp("^("+I.join("|")+")\\b","i")}function A(I){for(var D in b)if(!(typeof I[b[D]]>"u"||I[D]==="")){if(typeof I[D]>"u"){if(!s.Object.prototype[D])continue;I[D]=s.Object.prototype[D]}if(I[D].indexOf("url(")!==0){var z=new s.Color(I[D]);I[D]=z.setAlpha(o(z.getAlpha()*I[b[D]],2)).toRgba()}}return I}function F(I,D){var z,J=[],ne,Z,H;for(Z=0,H=D.length;Z<H;Z++)z=D[Z],ne=I.getElementsByTagName(z),J=J.concat(Array.prototype.slice.call(ne));return J}s.parseTransformAttribute=function(){function I(ce,ie){var ge=s.util.cos(ie[0]),be=s.util.sin(ie[0]),De=0,Pe=0;ie.length===3&&(De=ie[1],Pe=ie[2]),ce[0]=ge,ce[1]=be,ce[2]=-be,ce[3]=ge,ce[4]=De-(ge*De-be*Pe),ce[5]=Pe-(be*De+ge*Pe)}function D(ce,ie){var ge=ie[0],be=ie.length===2?ie[1]:ie[0];ce[0]=ge,ce[3]=be}function z(ce,ie,ge){ce[ge]=Math.tan(s.util.degreesToRadians(ie[0]))}function J(ce,ie){ce[4]=ie[0],ie.length===2&&(ce[5]=ie[1])}var ne=s.iMatrix,Z=s.reNum,H=s.commaWsp,se="(?:(skewX)\\s*\\(\\s*("+Z+")\\s*\\))",pe="(?:(skewY)\\s*\\(\\s*("+Z+")\\s*\\))",U="(?:(rotate)\\s*\\(\\s*("+Z+")(?:"+H+"("+Z+")"+H+"("+Z+"))?\\s*\\))",X="(?:(scale)\\s*\\(\\s*("+Z+")(?:"+H+"("+Z+"))?\\s*\\))",ae="(?:(translate)\\s*\\(\\s*("+Z+")(?:"+H+"("+Z+"))?\\s*\\))",le="(?:(matrix)\\s*\\(\\s*("+Z+")"+H+"("+Z+")"+H+"("+Z+")"+H+"("+Z+")"+H+"("+Z+")"+H+"("+Z+")\\s*\\))",re="(?:"+le+"|"+ae+"|"+X+"|"+U+"|"+se+"|"+pe+")",ue="(?:"+re+"(?:"+H+"*"+re+")*)",_e="^\\s*(?:"+ue+"?)\\s*$",ke=new RegExp(_e),we=new RegExp(re,"g");return function(ce){var ie=ne.concat(),ge=[];if(!ce||ce&&!ke.test(ce))return ie;ce.replace(we,function(De){var Pe=new RegExp(re).exec(De).filter(function(Nt){return!!Nt}),Oe=Pe[1],Ae=Pe.slice(2).map(parseFloat);switch(Oe){case"translate":J(ie,Ae);break;case"rotate":Ae[0]=s.util.degreesToRadians(Ae[0]),I(ie,Ae);break;case"scale":D(ie,Ae);break;case"skewX":z(ie,Ae,2);break;case"skewY":z(ie,Ae,1);break;case"matrix":ie=Ae;break}ge.push(ie.concat()),ie=ne.concat()});for(var be=ge[0];ge.length>1;)ge.shift(),be=s.util.multiplyTransformMatrices(be,ge[0]);return be}}();function G(I,D){var z,J;I.replace(/;\s*$/,"").split(";").forEach(function(ne){var Z=ne.split(":");z=Z[0].trim().toLowerCase(),J=Z[1].trim(),D[z]=J})}function Y(I,D){var z,J;for(var ne in I)typeof I[ne]>"u"||(z=ne.toLowerCase(),J=I[ne],D[z]=J)}function Q(I,D){var z={};for(var J in s.cssRules[D])if(q(I,J.split(" ")))for(var ne in s.cssRules[D][J])z[ne]=s.cssRules[D][J][ne];return z}function q(I,D){var z,J=!0;return z=V(I,D.pop()),z&&D.length&&(J=N(I,D)),z&&J&&D.length===0}function N(I,D){for(var z,J=!0;I.parentNode&&I.parentNode.nodeType===1&&D.length;)J&&(z=D.pop()),I=I.parentNode,J=V(I,z);return D.length===0}function V(I,D){var z=I.nodeName,J=I.getAttribute("class"),ne=I.getAttribute("id"),Z,H;if(Z=new RegExp("^"+z,"i"),D=D.replace(Z,""),ne&&D.length&&(Z=new RegExp("#"+ne+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Z,"")),J&&D.length)for(J=J.split(" "),H=J.length;H--;)Z=new RegExp("\\."+J[H]+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Z,"");return D.length===0}function ee(I,D){var z;if(I.getElementById&&(z=I.getElementById(D)),z)return z;var J,ne,Z,H=I.getElementsByTagName("*");for(ne=0,Z=H.length;ne<Z;ne++)if(J=H[ne],D===J.getAttribute("id"))return J}function te(I){for(var D=F(I,["use","svg:use"]),z=0;D.length&&z<D.length;){var J=D[z],ne=J.getAttribute("xlink:href")||J.getAttribute("href");if(ne===null)return;var Z=ne.slice(1),H=J.getAttribute("x")||0,se=J.getAttribute("y")||0,pe=ee(I,Z).cloneNode(!0),U=(pe.getAttribute("transform")||"")+" translate("+H+", "+se+")",X,ae=D.length,le,re,ue,_e,ke=s.svgNS;if(P(pe),/^svg$/i.test(pe.nodeName)){var we=pe.ownerDocument.createElementNS(ke,"g");for(re=0,ue=pe.attributes,_e=ue.length;re<_e;re++)le=ue.item(re),we.setAttributeNS(ke,le.nodeName,le.nodeValue);for(;pe.firstChild;)we.appendChild(pe.firstChild);pe=we}for(re=0,ue=J.attributes,_e=ue.length;re<_e;re++)le=ue.item(re),!(le.nodeName==="x"||le.nodeName==="y"||le.nodeName==="xlink:href"||le.nodeName==="href")&&(le.nodeName==="transform"?U=le.nodeValue+" "+U:pe.setAttribute(le.nodeName,le.nodeValue));pe.setAttribute("transform",U),pe.setAttribute("instantiated_by_use","1"),pe.removeAttribute("id"),X=J.parentNode,X.replaceChild(pe,J),D.length===ae&&z++}}var k=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(I){if(!s.svgViewBoxElementsRegEx.test(I.nodeName))return{};var D=I.getAttribute("viewBox"),z=1,J=1,ne=0,Z=0,H,se,pe,U,X=I.getAttribute("width"),ae=I.getAttribute("height"),le=I.getAttribute("x")||0,re=I.getAttribute("y")||0,ue=I.getAttribute("preserveAspectRatio")||"",_e=!D||!(D=D.match(k)),ke=!X||!ae||X==="100%"||ae==="100%",we=_e&&ke,ce={},ie="",ge=0,be=0;if(ce.width=0,ce.height=0,ce.toBeParsed=we,_e&&(le||re)&&I.parentNode&&I.parentNode.nodeName!=="#document"&&(ie=" translate("+l(le)+" "+l(re)+") ",pe=(I.getAttribute("transform")||"")+ie,I.setAttribute("transform",pe),I.removeAttribute("x"),I.removeAttribute("y")),we)return ce;if(_e)return ce.width=l(X),ce.height=l(ae),ce;if(ne=-parseFloat(D[1]),Z=-parseFloat(D[2]),H=parseFloat(D[3]),se=parseFloat(D[4]),ce.minX=ne,ce.minY=Z,ce.viewBoxWidth=H,ce.viewBoxHeight=se,ke?(ce.width=H,ce.height=se):(ce.width=l(X),ce.height=l(ae),z=ce.width/H,J=ce.height/se),ue=s.util.parsePreserveAspectRatioAttribute(ue),ue.alignX!=="none"&&(ue.meetOrSlice==="meet"&&(J=z=z>J?J:z),ue.meetOrSlice==="slice"&&(J=z=z>J?z:J),ge=ce.width-H*z,be=ce.height-se*z,ue.alignX==="Mid"&&(ge/=2),ue.alignY==="Mid"&&(be/=2),ue.alignX==="Min"&&(ge=0),ue.alignY==="Min"&&(be=0)),z===1&&J===1&&ne===0&&Z===0&&le===0&&re===0)return ce;if((le||re)&&I.parentNode.nodeName!=="#document"&&(ie=" translate("+l(le)+" "+l(re)+") "),pe=ie+" matrix("+z+" 0 0 "+J+" "+(ne*z+ge)+" "+(Z*J+be)+") ",I.nodeName==="svg"){for(U=I.ownerDocument.createElementNS(s.svgNS,"g");I.firstChild;)U.appendChild(I.firstChild);I.appendChild(U)}else U=I,U.removeAttribute("x"),U.removeAttribute("y"),pe=U.getAttribute("transform")+pe;return U.setAttribute("transform",pe),ce}function R(I,D){for(;I&&(I=I.parentNode);)if(I.nodeName&&D.test(I.nodeName.replace("svg:",""))&&!I.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(I,D,z,J){if(I){te(I);var ne=s.Object.__uid++,Z,H,se=P(I),pe=s.util.toArray(I.getElementsByTagName("*"));if(se.crossOrigin=J&&J.crossOrigin,se.svgUid=ne,pe.length===0&&s.isLikelyNode){pe=I.selectNodes('//*[name(.)!="svg"]');var U=[];for(Z=0,H=pe.length;Z<H;Z++)U[Z]=pe[Z];pe=U}var X=pe.filter(function(le){return P(le),s.svgValidTagNamesRegEx.test(le.nodeName.replace("svg:",""))&&!R(le,s.svgInvalidAncestorsRegEx)});if(!X||X&&!X.length){D&&D([],{});return}var ae={};pe.filter(function(le){return le.nodeName.replace("svg:","")==="clipPath"}).forEach(function(le){var re=le.getAttribute("id");ae[re]=s.util.toArray(le.getElementsByTagName("*")).filter(function(ue){return s.svgValidTagNamesRegEx.test(ue.nodeName.replace("svg:",""))})}),s.gradientDefs[ne]=s.getGradientDefs(I),s.cssRules[ne]=s.getCSSRules(I),s.clipPaths[ne]=ae,s.parseElements(X,function(le,re){D&&(D(le,se,re,pe),delete s.gradientDefs[ne],delete s.cssRules[ne],delete s.clipPaths[ne])},f(se),z,J)}};function M(I,D){var z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],J="xlink:href",ne=D.getAttribute(J).slice(1),Z=ee(I,ne);if(Z&&Z.getAttribute(J)&&M(I,Z),z.forEach(function(se){Z&&!D.hasAttribute(se)&&Z.hasAttribute(se)&&D.setAttribute(se,Z.getAttribute(se))}),!D.children.length)for(var H=Z.cloneNode(!0);H.firstChild;)D.appendChild(H.firstChild);D.removeAttribute(J)}var K=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");c(s,{parseFontDeclaration:function(I,D){var z=I.match(K);if(z){var J=z[1],ne=z[3],Z=z[4],H=z[5],se=z[6];J&&(D.fontStyle=J),ne&&(D.fontWeight=isNaN(parseFloat(ne))?ne:parseFloat(ne)),Z&&(D.fontSize=l(Z)),se&&(D.fontFamily=se),H&&(D.lineHeight=H==="normal"?1:H)}},getGradientDefs:function(I){var D=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],z=F(I,D),J,ne=0,Z={};for(ne=z.length;ne--;)J=z[ne],J.getAttribute("xlink:href")&&M(I,J),Z[J.getAttribute("id")]=J;return Z},parseAttributes:function(I,D,z){if(I){var J,ne={},Z,H;typeof z>"u"&&(z=I.getAttribute("svgUid")),I.parentNode&&s.svgValidParentsRegEx.test(I.parentNode.nodeName)&&(ne=s.parseAttributes(I.parentNode,D,z));var se=D.reduce(function(ue,_e){return J=I.getAttribute(_e),J&&(ue[_e]=J),ue},{}),pe=c(Q(I,z),s.parseStyleAttribute(I));se=c(se,pe),pe[w]&&I.setAttribute(w,pe[w]),Z=H=ne.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,se[y]&&(se[y]=Z=l(se[y],H));var U,X,ae={};for(var le in se)U=C(le),X=T(U,se[le],ne,Z),ae[U]=X;ae&&ae.font&&s.parseFontDeclaration(ae.font,ae);var re=c(ne,ae);return s.svgValidParentsRegEx.test(I.nodeName)?re:A(re)}},parseElements:function(I,D,z,J,ne){new s.ElementsParser(I,D,z,J,ne).parse()},parseStyleAttribute:function(I){var D={},z=I.getAttribute("style");return z&&(typeof z=="string"?G(z,D):Y(z,D)),D},parsePointsAttribute:function(I){if(!I)return null;I=I.replace(/,/g," ").trim(),I=I.split(/\s+/);var D=[],z,J;for(z=0,J=I.length;z<J;z+=2)D.push({x:parseFloat(I[z]),y:parseFloat(I[z+1])});return D},getCSSRules:function(I){var D=I.getElementsByTagName("style"),z,J,ne={},Z;for(z=0,J=D.length;z<J;z++){var H=D[z].textContent;H=H.replace(/\/\*[\s\S]*?\*\//g,""),H.trim()!==""&&(Z=H.split("}"),Z=Z.filter(function(se){return se.trim()}),Z.forEach(function(se){var pe=se.split("{"),U={},X=pe[1].trim(),ae=X.split(";").filter(function(_e){return _e.trim()});for(z=0,J=ae.length;z<J;z++){var le=ae[z].split(":"),re=le[0].trim(),ue=le[1].trim();U[re]=ue}se=pe[0].trim(),se.split(",").forEach(function(_e){_e=_e.replace(/^svg/i,"").trim(),_e!==""&&(ne[_e]?s.util.object.extend(ne[_e],U):ne[_e]=s.util.object.clone(U))})}))}return ne},loadSVGFromURL:function(I,D,z,J){I=I.replace(/^\n\s*/,"").trim(),new s.util.request(I,{method:"get",onComplete:ne});function ne(Z){var H=Z.responseXML;if(!H||!H.documentElement)return D&&D(null),!1;s.parseSVGDocument(H.documentElement,function(se,pe,U,X){D&&D(se,pe,U,X)},z,J)}},loadSVGFromString:function(I,D,z,J){var ne=new s.window.DOMParser,Z=ne.parseFromString(I.trim(),"text/xml");s.parseSVGDocument(Z.documentElement,function(H,se,pe,U){D(H,se,pe,U)},z,J)}})}(t),e.ElementsParser=function(a,s,c,f,o,l){this.elements=a,this.callback=s,this.options=c,this.reviver=f,this.svgUid=c&&c.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(c,f){c.setAttribute("svgUid",s.svgUid),s.createObject(c,f)})},a.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,c){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(c,s),this.options)}catch(o){e.log(o)}else this.checkIfDone()},a.createCallback=function(s,c){var f=this;return function(o){var l;f.resolveGradient(o,c,"fill"),f.resolveGradient(o,c,"stroke"),o instanceof e.Image&&o._originalElement&&(l=o.parsePreserveAspectRatioAttribute(c)),o._removeTransformMatrix(l),f.resolveClipPath(o,c),f.reviver&&f.reviver(c,o),f.instances[s]=o,f.checkIfDone()}},a.extractPropertyDefinition=function(s,c,f){var o=s[c],l=this.regexUrl;if(l.test(o)){l.lastIndex=0;var h=l.exec(o)[1];return l.lastIndex=0,e[f][this.svgUid][h]}},a.resolveGradient=function(s,c,f){var o=this.extractPropertyDefinition(s,f,"gradientDefs");if(o){var l=c.getAttribute(f+"-opacity"),h=e.Gradient.fromElement(o,s,l,this.options);s.set(f,h)}},a.createClipPathCallback=function(s,c){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,c.push(f)}},a.resolveClipPath=function(s,c){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),o,l,h,p,m,g;if(f){p=[],h=e.util.invertTransform(s.calcTransformMatrix());for(var v=f[0].parentNode,_=c;_.parentNode&&_.getAttribute("clip-path")!==s.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var b=0;b<f.length;b++)o=f[b],l=this.findTag(o),l.fromElement(o,this.createClipPathCallback(s,p),this.options);p.length===1?f=p[0]:f=new e.Group(p),m=e.util.multiplyTransformMatrices(h,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,_);var g=e.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=c;function c(f,o){this.x=f,this.y=o}c.prototype={type:"point",constructor:c,add:function(f){return new c(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new c(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new c(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new c(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new c(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new c(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,o){return typeof o>"u"&&(o=.5),o=Math.max(Math.min(1,o),0),new c(this.x+(f.x-this.x)*o,this.y+(f.y-this.y)*o)},distanceFrom:function(f){var o=this.x-f.x,l=this.y-f.y;return Math.sqrt(o*o+l*l)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new c(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new c(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,o){return this.x=f,this.y=o,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var o=this.x,l=this.y;this.x=f.x,this.y=f.y,f.x=o,f.y=l},clone:function(){return new c(this.x,this.y)}}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function c(f){this.status=f,this.points=[]}s.Intersection=c,s.Intersection.prototype={constructor:c,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,o,l,h){var p,m=(h.x-l.x)*(f.y-l.y)-(h.y-l.y)*(f.x-l.x),g=(o.x-f.x)*(f.y-l.y)-(o.y-f.y)*(f.x-l.x),v=(h.y-l.y)*(o.x-f.x)-(h.x-l.x)*(o.y-f.y);if(v!==0){var _=m/v,b=g/v;0<=_&&_<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new s.Point(f.x+_*(o.x-f.x),f.y+_*(o.y-f.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},s.Intersection.intersectLinePolygon=function(f,o,l){var h=new c,p=l.length,m,g,v,_;for(_=0;_<p;_++)m=l[_],g=l[(_+1)%p],v=c.intersectLineLine(f,o,m,g),h.appendPoints(v.points);return h.points.length>0&&(h.status="Intersection"),h},s.Intersection.intersectPolygonPolygon=function(f,o){var l=new c,h=f.length,p;for(p=0;p<h;p++){var m=f[p],g=f[(p+1)%h],v=c.intersectLinePolygon(m,g,o);l.appendPoints(v.points)}return l.points.length>0&&(l.status="Intersection"),l},s.Intersection.intersectPolygonRectangle=function(f,o,l){var h=o.min(l),p=o.max(l),m=new s.Point(p.x,h.y),g=new s.Point(h.x,p.y),v=c.intersectLinePolygon(h,m,f),_=c.intersectLinePolygon(m,p,f),b=c.intersectLinePolygon(p,g,f),y=c.intersectLinePolygon(g,h,f),w=new c;return w.appendPoints(v.points),w.appendPoints(_.points),w.appendPoints(b.points),w.appendPoints(y.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function c(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}s.Color=c,s.Color.prototype={_tryParsingColor:function(o){var l;o in c.colorNameMap&&(o=c.colorNameMap[o]),o==="transparent"&&(l=[255,255,255,0]),l||(l=c.sourceFromHex(o)),l||(l=c.sourceFromRgb(o)),l||(l=c.sourceFromHsl(o)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(o,l,h){o/=255,l/=255,h/=255;var p,m,g,v=s.util.array.max([o,l,h]),_=s.util.array.min([o,l,h]);if(g=(v+_)/2,v===_)p=m=0;else{var b=v-_;switch(m=g>.5?b/(2-v-_):b/(v+_),v){case o:p=(l-h)/b+(l<h?6:0);break;case l:p=(h-o)/b+2;break;case h:p=(o-l)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+o[3]+")"},toHex:function(){var o=this.getSource(),l,h,p;return l=o[0].toString(16),l=l.length===1?"0"+l:l,h=o[1].toString(16),h=h.length===1?"0"+h:h,p=o[2].toString(16),p=p.length===1?"0"+p:p,l.toUpperCase()+h.toUpperCase()+p.toUpperCase()},toHexa:function(){var o=this.getSource(),l;return l=Math.round(o[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var l=this.getSource();return l[3]=o,this.setSource(l),this},toGrayscale:function(){var o=this.getSource(),l=parseInt((o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),10),h=o[3];return this.setSource([l,l,l,h]),this},toBlackWhite:function(o){var l=this.getSource(),h=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),p=l[3];return o=o||127,h=Number(h)<Number(o)?0:255,this.setSource([h,h,h,p]),this},overlayWith:function(o){o instanceof c||(o=new c(o));var l=[],h=this.getAlpha(),p=.5,m=this.getSource(),g=o.getSource(),v;for(v=0;v<3;v++)l.push(Math.round(m[v]*(1-p)+g[v]*p));return l[3]=h,this.setSource(l),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(o,l,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?o+(l-o)*6*h:h<1/2?l:h<2/3?o+(l-o)*(2/3-h)*6:o}s.Color.fromRgb=function(o){return c.fromSource(c.sourceFromRgb(o))},s.Color.sourceFromRgb=function(o){var l=o.match(c.reRGBa);if(l){var h=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),p=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),m=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(h,10),parseInt(p,10),parseInt(m,10),l[4]?parseFloat(l[4]):1]}},s.Color.fromRgba=c.fromRgb,s.Color.fromHsl=function(o){return c.fromSource(c.sourceFromHsl(o))},s.Color.sourceFromHsl=function(o){var l=o.match(c.reHSLa);if(l){var h=(parseFloat(l[1])%360+360)%360/360,p=parseFloat(l[2])/(/%$/.test(l[2])?100:1),m=parseFloat(l[3])/(/%$/.test(l[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var b=m<=.5?m*(p+1):m+p-m*p,y=m*2-b;g=f(y,b,h+1/3),v=f(y,b,h),_=f(y,b,h-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),l[4]?parseFloat(l[4]):1]}},s.Color.fromHsla=c.fromHsl,s.Color.fromHex=function(o){return c.fromSource(c.sourceFromHex(o))},s.Color.sourceFromHex=function(o){if(o.match(c.reHex)){var l=o.slice(o.indexOf("#")+1),h=l.length===3||l.length===4,p=l.length===8||l.length===4,m=h?l.charAt(0)+l.charAt(0):l.substring(0,2),g=h?l.charAt(1)+l.charAt(1):l.substring(2,4),v=h?l.charAt(2)+l.charAt(2):l.substring(4,6),_=p?h?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(o){var l=new c;return l.setSource(o),l}}(t),function(a){var s=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],o={},l="left",h="top",p="right",m="bottom",g="center",v={top:m,bottom:h,left:p,right:l,center:g},_=s.util.radiansToDegrees,b=Math.sign||function(U){return(U>0)-(U<0)||+U};function y(U,X){var ae=U.angle+_(Math.atan2(X.y,X.x))+360;return Math.round(ae%360/45)}function w(U,X){var ae=X.transform.target,le=ae.canvas,re=s.util.object.clone(X);re.target=ae,le&&le.fire("object:"+U,re),ae.fire(U,X)}function C(U,X){var ae=X.canvas,le=ae.uniScaleKey,re=U[le];return ae.uniformScaling&&!re||!ae.uniformScaling&&re}function T(U){return U.originX===g&&U.originY===g}function E(U,X,ae){var le=U.lockScalingX,re=U.lockScalingY;return!!(le&&re||!X&&(le||re)&&ae||le&&X==="x"||re&&X==="y")}function A(U,X,ae){var le="not-allowed",re=C(U,ae),ue="";if(X.x!==0&&X.y===0?ue="x":X.x===0&&X.y!==0&&(ue="y"),E(ae,ue,re))return le;var _e=y(ae,X);return c[_e]+"-resize"}function F(U,X,ae){var le="not-allowed";if(X.x!==0&&ae.lockSkewingY||X.y!==0&&ae.lockSkewingX)return le;var re=y(ae,X)%4;return f[re]+"-resize"}function G(U,X,ae){return U[ae.canvas.altActionKey]?o.skewCursorStyleHandler(U,X,ae):o.scaleCursorStyleHandler(U,X,ae)}function Y(U,X,ae){var le=U[ae.canvas.altActionKey];if(X.x===0)return le?"skewX":"scaleY";if(X.y===0)return le?"skewY":"scaleX"}function Q(U,X,ae){return ae.lockRotation?"not-allowed":X.cursorStyle}function q(U,X,ae,le){return{e:U,transform:X,pointer:{x:ae,y:le}}}function N(U){return function(X,ae,le,re){var ue=ae.target,_e=ue.getCenterPoint(),ke=ue.translateToOriginPoint(_e,ae.originX,ae.originY),we=U(X,ae,le,re);return ue.setPositionByOrigin(ke,ae.originX,ae.originY),we}}function V(U,X){return function(ae,le,re,ue){var _e=X(ae,le,re,ue);return _e&&w(U,q(ae,le,re,ue)),_e}}function ee(U,X,ae,le,re){var ue=U.target,_e=ue.controls[U.corner],ke=ue.canvas.getZoom(),we=ue.padding/ke,ce=ue.toLocalPoint(new s.Point(le,re),X,ae);return ce.x>=we&&(ce.x-=we),ce.x<=-we&&(ce.x+=we),ce.y>=we&&(ce.y-=we),ce.y<=we&&(ce.y+=we),ce.x-=_e.offsetX,ce.y-=_e.offsetY,ce}function te(U){return U.flipX!==U.flipY}function k(U,X,ae,le,re){if(U[X]!==0){var ue=U._getTransformedDimensions()[le],_e=re/ue*U[ae];U.set(ae,_e)}}function P(U,X,ae,le){var re=X.target,ue=re._getTransformedDimensions(0,re.skewY),_e=ee(X,X.originX,X.originY,ae,le),ke=Math.abs(_e.x*2)-ue.x,we=re.skewX,ce;ke<2?ce=0:(ce=_(Math.atan2(ke/re.scaleX,ue.y/re.scaleY)),X.originX===l&&X.originY===m&&(ce=-ce),X.originX===p&&X.originY===h&&(ce=-ce),te(re)&&(ce=-ce));var ie=we!==ce;if(ie){var ge=re._getTransformedDimensions().y;re.set("skewX",ce),k(re,"skewY","scaleY","y",ge)}return ie}function R(U,X,ae,le){var re=X.target,ue=re._getTransformedDimensions(re.skewX,0),_e=ee(X,X.originX,X.originY,ae,le),ke=Math.abs(_e.y*2)-ue.y,we=re.skewY,ce;ke<2?ce=0:(ce=_(Math.atan2(ke/re.scaleY,ue.x/re.scaleX)),X.originX===l&&X.originY===m&&(ce=-ce),X.originX===p&&X.originY===h&&(ce=-ce),te(re)&&(ce=-ce));var ie=we!==ce;if(ie){var ge=re._getTransformedDimensions().x;re.set("skewY",ce),k(re,"skewX","scaleX","x",ge)}return ie}function M(U,X,ae,le){var re=X.target,ue=re.skewX,_e,ke=X.originY;if(re.lockSkewingX)return!1;if(ue===0){var we=ee(X,g,g,ae,le);we.x>0?_e=l:_e=p}else ue>0&&(_e=ke===h?l:p),ue<0&&(_e=ke===h?p:l),te(re)&&(_e=_e===l?p:l);X.originX=_e;var ce=V("skewing",N(P));return ce(U,X,ae,le)}function K(U,X,ae,le){var re=X.target,ue=re.skewY,_e,ke=X.originX;if(re.lockSkewingY)return!1;if(ue===0){var we=ee(X,g,g,ae,le);we.y>0?_e=h:_e=m}else ue>0&&(_e=ke===l?h:m),ue<0&&(_e=ke===l?m:h),te(re)&&(_e=_e===h?m:h);X.originY=_e;var ce=V("skewing",N(R));return ce(U,X,ae,le)}function I(U,X,ae,le){var re=X,ue=re.target,_e=ue.translateToOriginPoint(ue.getCenterPoint(),re.originX,re.originY);if(ue.lockRotation)return!1;var ke=Math.atan2(re.ey-_e.y,re.ex-_e.x),we=Math.atan2(le-_e.y,ae-_e.x),ce=_(we-ke+re.theta),ie=!0;if(ue.snapAngle>0){var ge=ue.snapAngle,be=ue.snapThreshold||ge,De=Math.ceil(ce/ge)*ge,Pe=Math.floor(ce/ge)*ge;Math.abs(ce-Pe)<be?ce=Pe:Math.abs(ce-De)<be&&(ce=De)}return ce<0&&(ce=360+ce),ce%=360,ie=ue.angle!==ce,ue.angle=ce,ie}function D(U,X,ae,le,re){re=re||{};var ue=X.target,_e=ue.lockScalingX,ke=ue.lockScalingY,we=re.by,ce,ie,ge,be,De=C(U,ue),Pe=E(ue,we,De),Oe,Ae,Nt=X.gestureScale;if(Pe)return!1;if(Nt)ie=X.scaleX*Nt,ge=X.scaleY*Nt;else{if(ce=ee(X,X.originX,X.originY,ae,le),Oe=we!=="y"?b(ce.x):1,Ae=we!=="x"?b(ce.y):1,X.signX||(X.signX=Oe),X.signY||(X.signY=Ae),ue.lockScalingFlip&&(X.signX!==Oe||X.signY!==Ae))return!1;if(be=ue._getTransformedDimensions(),De&&!we){var pt=Math.abs(ce.x)+Math.abs(ce.y),ft=X.original,tl=Math.abs(be.x*ft.scaleX/ue.scaleX)+Math.abs(be.y*ft.scaleY/ue.scaleY),ss=pt/tl;ie=ft.scaleX*ss,ge=ft.scaleY*ss}else ie=Math.abs(ce.x*ue.scaleX/be.x),ge=Math.abs(ce.y*ue.scaleY/be.y);T(X)&&(ie*=2,ge*=2),X.signX!==Oe&&we!=="y"&&(X.originX=v[X.originX],ie*=-1,X.signX=Oe),X.signY!==Ae&&we!=="x"&&(X.originY=v[X.originY],ge*=-1,X.signY=Ae)}var uo=ue.scaleX,zi=ue.scaleY;return we?(we==="x"&&ue.set("scaleX",ie),we==="y"&&ue.set("scaleY",ge)):(!_e&&ue.set("scaleX",ie),!ke&&ue.set("scaleY",ge)),uo!==ue.scaleX||zi!==ue.scaleY}function z(U,X,ae,le){return D(U,X,ae,le)}function J(U,X,ae,le){return D(U,X,ae,le,{by:"x"})}function ne(U,X,ae,le){return D(U,X,ae,le,{by:"y"})}function Z(U,X,ae,le){return U[X.target.canvas.altActionKey]?o.skewHandlerX(U,X,ae,le):o.scalingY(U,X,ae,le)}function H(U,X,ae,le){return U[X.target.canvas.altActionKey]?o.skewHandlerY(U,X,ae,le):o.scalingX(U,X,ae,le)}function se(U,X,ae,le){var re=X.target,ue=ee(X,X.originX,X.originY,ae,le),_e=re.strokeWidth/(re.strokeUniform?re.scaleX:1),ke=T(X)?2:1,we=re.width,ce=Math.abs(ue.x*ke/re.scaleX)-_e;return re.set("width",Math.max(ce,0)),we!==ce}function pe(U,X,ae,le){var re=X.target,ue=ae-X.offsetX,_e=le-X.offsetY,ke=!re.get("lockMovementX")&&re.left!==ue,we=!re.get("lockMovementY")&&re.top!==_e;return ke&&re.set("left",ue),we&&re.set("top",_e),(ke||we)&&w("moving",q(U,X,ae,le)),ke||we}o.scaleCursorStyleHandler=A,o.skewCursorStyleHandler=F,o.scaleSkewCursorStyleHandler=G,o.rotationWithSnapping=V("rotating",N(I)),o.scalingEqually=V("scaling",N(z)),o.scalingX=V("scaling",N(J)),o.scalingY=V("scaling",N(ne)),o.scalingYOrSkewingX=Z,o.scalingXOrSkewingY=H,o.changeWidth=V("resizing",N(se)),o.skewHandlerX=M,o.skewHandlerY=K,o.dragHandler=pe,o.scaleOrSkewActionName=Y,o.rotationStyleHandler=Q,o.fireEvent=w,o.wrapWithFixedAnchor=N,o.wrapWithFireEvent=V,o.getLocalPoint=ee,s.controlsUtils=o}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians,f=s.controlsUtils;function o(h,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=p,E=m,A;h.save(),h.fillStyle=g.cornerColor||v.cornerColor,h.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>b?(A=_,h.scale(1,b/_),E=m*_/b):b>_?(A=b,h.scale(_/b,1),T=p*b/_):A=_,h.lineWidth=1,h.beginPath(),h.arc(T,E,A/2,0,2*Math.PI,!1),h[w](),C&&h.stroke(),h.restore()}function l(h,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=_/2,E=b/2;h.save(),h.fillStyle=g.cornerColor||v.cornerColor,h.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,h.lineWidth=1,h.translate(p,m),h.rotate(c(v.angle)),h[w+"Rect"](-T,-E,_,b),C&&h.strokeRect(-T,-E,_,b),h.restore()}f.renderCircleControl=o,f.renderSquareControl=l}(t),function(a){var s=a.fabric||(a.fabric={});function c(f){for(var o in f)this[o]=f[o]}s.Control=c,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,o){return o.cursorStyle},getActionName:function(f,o){return o.actionName},getVisibility:function(f,o){var l=f._controlsVisibility;return l&&typeof l[o]<"u"?l[o]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,o){var l=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},o);return l},calcCornerCoords:function(f,o,l,h,p){var m,g,v,_,b=p?this.touchSizeX:this.sizeX,y=p?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var w=Math.atan2(y,b),C=Math.sqrt(b*b+y*y)/2,T=w-s.util.degreesToRadians(f),E=Math.PI/2-w-s.util.degreesToRadians(f);m=C*s.util.cos(T),g=C*s.util.sin(T),v=C*s.util.cos(E),_=C*s.util.sin(E)}else{var A=b&&y?b:o;C=A*.7071067812;var T=s.util.degreesToRadians(45-f);m=v=C*s.util.cos(T),g=_=C*s.util.sin(T)}return{tl:{x:l-_,y:h-v},tr:{x:l+m,y:h-g},bl:{x:l-m,y:h+g},br:{x:l+_,y:h+v}}},render:function(f,o,l,h,p){switch(h=h||{},h.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,o,l,h,p);break;default:s.controlsUtils.renderSquareControl.call(this,f,o,l,h,p)}}}}(t),function(){function a(l,h){var p=l.getAttribute("style"),m=l.getAttribute("offset")||0,g,v,_,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var y=p.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var w=y[b].split(/\s*:\s*/),C=w[0].trim(),T=w[1].trim();C==="stop-color"?g=T:C==="stop-opacity"&&(_=T)}}return g||(g=l.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=l.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*h,{offset:m,color:g.toRgb(),opacity:_}}function s(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function c(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var h,p=this;Object.keys(l).forEach(function(m){p[m]=l[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,h={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(h.r1=l.coords.r1||0,h.r2=l.coords.r2||0),this.coords=h,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var h in l){var p=new e.Color(l[h]);this.colorStops.push({offset:parseFloat(h),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(l){var h={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,h,l),h},toSVG:function(l,v){var p=f(this.coords,!0),m,g,v=v||{},_,b,y=f(this.colorStops,!0),w=p.r1>p.r2,C=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,E=-this.offsetY,A=!!v.additionalTransform,F=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(N,V){return N.offset-V.offset}),F==="objectBoundingBox"?(T/=l.width,E/=l.height):(T+=l.width/2,E+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(T-=l.pathOffset.x,E-=l.pathOffset.y),C[4]-=T,C[5]-=E,b='id="SVGID_'+this.id+'" gradientUnits="'+F+'"',b+=' gradientTransform="'+(A?v.additionalTransform+" ":"")+e.util.matrixToSVG(C)+'" ',this.type==="linear"?_=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",b,' cx="',w?p.x1:p.x2,'" cy="',w?p.y1:p.y2,'" r="',w?p.r1:p.r2,'" fx="',w?p.x2:p.x1,'" fy="',w?p.y2:p.y1,`">
`]),this.type==="radial"){if(w)for(y=y.concat(),y.reverse(),m=0,g=y.length;m<g;m++)y[m].offset=1-y[m].offset;var G=Math.min(p.r1,p.r2);if(G>0){var Y=Math.max(p.r1,p.r2),Q=G/Y;for(m=0,g=y.length;m<g;m++)y[m].offset+=Q*(1-y[m].offset)}}for(m=0,g=y.length;m<g;m++){var q=y[m];_.push("<stop ",'offset="',q.offset*100+"%",'" style="stop-color:',q.color,typeof q.opacity<"u"?";stop-opacity: "+q.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(l){var h,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?h=l.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(h=l.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof _<"u"&&(v=new e.Color(v).setAlpha(_).toRgba()),h.addColorStop(b,v)}return h}}}),e.util.object.extend(e.Gradient,{fromElement:function(l,h,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=l.getElementsByTagName("stop"),_,b=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=l.getAttribute("gradientTransform")||"",w=[],C,T,E=0,A=0,F;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(_="linear",C=s(l)):(_="radial",C=c(l)),T=v.length;T--;)w.push(a(v[T],g));F=e.parseTransformAttribute(y),o(h,C,m,b),b==="pixels"&&(E=-h.left,A=-h.top);var G=new e.Gradient({id:l.getAttribute("id"),type:_,coords:C,colorStops:w,gradientUnits:b,gradientTransform:F,offsetX:E,offsetY:A});return G}});function o(l,h,p,m){var g,v;Object.keys(h).forEach(function(_){g=h[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(h[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),h[_]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,c){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){c&&c(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(o,l){f.source=o,c&&c(f,l)},null,this.crossOrigin)}},toObject:function(s){var c=e.Object.NUM_FRACTION_DIGITS,f,o;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),o={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,o,s),o},toSVG:function(s){var c=typeof this.source=="function"?this.source():this.source,f=c.width/s.width,o=c.height/s.height,l=this.offsetX/s.width,h=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(o=1,h&&(o+=Math.abs(h))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,l&&(f+=Math.abs(l))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+h+'" width="'+f+'" height="'+o+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var c in s)this[c]=s[c]},toLive:function(s){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":s.createPattern(c,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var o in f)this[o]=f[o];this.id=s.Object.__uid++},_parseShadow:function(f){var o=f.trim(),l=s.Shadow.reOffsetsAndBlur.exec(o)||[],h=o.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:h.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var o=40,l=40,h=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),m=20,g=new s.Color(this.color);return f.width&&f.height&&(o=c((Math.abs(p.x)+this.blur)/f.width,h)*100+m,l=c((Math.abs(p.y)+this.blur)/f.height,h)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,h)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,h)+'" dy="'+c(p.y,h)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},o=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==o[l]&&(f[l]=this[l])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,s=e.util.getElementOffset,c=e.util.removeFromArray,f=e.util.toFixed,o=e.util.transformPoint,l=e.util.invertTransform,h=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,b){return typeof v=="string"?e.util.loadImage(v,function(y,w){if(y){var C=new e.Image(y,b);this[g]=C,C.canvas=this}_&&_(y,w)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var b in g)_=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,b=this.overlayImage,y,w,C;for(this.viewportTransform=g,w=0,C=this._objects.length;w<C;w++)y=this._objects[w],y.group||y.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,b=this.viewportTransform.slice(0);g=o(g,l(this.viewportTransform)),b[0]=v,b[3]=v;var y=o(g,b);return b[4]+=_.x-y.x,b[5]+=_.y-y.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,b=l(this.viewportTransform);return g.tl=o({x:0,y:0},b),g.br=o({x:v,y:_},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,b;for(_=0,b=v.length;_<b;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],b=this[v+"Image"],y=this.viewportTransform,w=this[v+"Vpt"];if(!(!_&&!b)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var C=_.gradientTransform||_.patternTransform;C&&g.transform(C[0],C[1],C[2],C[3],C[4],C[5]),g.fill(),g.restore()}b&&(g.save(),w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=l(this.viewportTransform);return o(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var y=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=b),y},__serializeBgOverlay:function(g,v){var _={},b=this.backgroundImage,y=this.overlayImage,w=this.backgroundColor,C=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(_.background=w.toObject(v)):w&&(_.background=w),C&&C.toObject?C.excludeFromExport||(_.overlay=C.toObject(v)):C&&(_.overlay=C),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,g,v)),y&&!y.excludeFromExport&&(_.overlayImage=this._toObject(y,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,b=v.height||this.height,y,w='viewBox="0 0 '+this.width+" "+this.height+'" ',C=e.Object.NUM_FRACTION_DIGITS;v.viewBox?w='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,w='viewBox="'+f(-y[4]/y[0],C)+" "+f(-y[5]/y[3],C)+" "+f(this.width/y[0],C)+" "+f(this.height/y[3],C)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',b,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var b=g[_+"Color"];if(b&&b.toLive){var y=g[_+"Vpt"],w=g.viewportTransform,C={width:g.width/(y?w[0]:1),height:g.height/(y?w[3]:1)};return b.toSVG(C,{additionalTransform:y?e.util.matrixToSVG(w):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,b,y,w,C,T,E,A,F,G=e.fontPaths,Y=[];for(this._objects.forEach(function q(N){Y.push(N),N._objects&&N._objects.forEach(q)}),A=0,F=Y.length;A<F;A++)if(_=Y[A],b=_.fontFamily,!(_.type.indexOf("text")===-1||v[b]||!G[b])&&(v[b]=!0,!!_.styles)){y=_.styles;for(C in y){w=y[C];for(E in w)T=w[E],b=T.fontFamily,!v[b]&&G[b]&&(v[b]=!0)}}for(var Q in v)g+=[`		@font-face {
`,"			font-family: '",Q,`';
`,"			src: url('",G[Q],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,b,y,w=this._objects;for(b=0,y=w.length;b<y;b++)_=w[b],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],b=this.viewportTransform,y=this.width,w=this.height;if(_)if(_.toLive){var C=_.repeat,T=e.util.invertTransform(b),E=this[v+"Vpt"],A=E?e.util.matrixToSVG(T):"";g.push('<rect transform="'+A+" translate(",y/2,",",w/2,')"',' x="',_.offsetX-y/2,'" y="',_.offsetY-w/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?_.source.width:y,'" height="',C==="repeat-x"||C==="no-repeat"?_.source.height:w,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=y.length;_--;)b=y[_],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=0;_<y.length;_++)b=y[_],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,E=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=0;b<T.length;b++)y=T[b],w=this._objects.indexOf(y),w>0+E&&(C=w-1,c(this._objects,y),this._objects.splice(C,0,y)),E++;else w=this._objects.indexOf(g),w!==0&&(C=this._findNewLowerIndex(g,w,v),c(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var b,y;if(_)for(b=v,y=v-1;y>=0;--y){var w=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(w){b=y;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,E=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=T.length;b--;)y=T[b],w=this._objects.indexOf(y),w<this._objects.length-1-E&&(C=w+1,c(this._objects,y),this._objects.splice(C,0,y)),E++;else w=this._objects.indexOf(g),w!==this._objects.length-1&&(C=this._findNewUpperIndex(g,w,v),c(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var b,y,w;if(_)for(b=v,y=v+1,w=this._objects.length;y<w;++y){var C=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(C){b=y;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=h(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=h(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,c=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=e.devicePixelRatio),c.shadowColor=s.color,c.shadowBlur=s.blur*f,c.shadowOffsetX=s.offsetX*f,c.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,c){var f=s.midPointFrom(c);return a.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,f=c.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,c[f-2],c[f-1],!0),o.stroke(),o.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new e.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new e.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,c,f=this._points[0],o=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===o.x&&f.y===o.y){var l=this.width/1e3;f=new e.Point(f.x,f.y),o=new e.Point(o.x,o.y),f.x-=l,o.x+=l}for(a.moveTo(f.x,f.y),s=1,c=this._points.length;s<c;s++)this._drawSegment(a,f,o),f=this._points[s],o=this._points[s+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=e.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var c=this.canvas.getZoom(),f=Math.pow(s/c,2),o,l=a.length-1,h=a[0],p=[h],m;for(o=1;o<l-1;o++)m=Math.pow(h.x-a[o].x,2)+Math.pow(h.y-a[o].y,2),m>=f&&(h=a[o],p.push(h));return p.push(a[l]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var c=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,s),c.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,c,f=this.points;for(this._saveAndTransform(a),s=0,c=f.length;s<c;s++)this.dot(a,f[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,c;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,c=this.points.length;s<c;s++){var o=this.points[s],l=new e.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(l.shadow=new e.Shadow(this.shadow)),f.push(l)}var h=new e.Group(f);h.canvas=this.canvas,this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new e.Point(a.x,a.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=c,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],c=0,f=this.sprayChunks.length;c<f;c++)for(var o=this.sprayChunks[c],l=0,h=o.length;l<h;l++){var p=new e.Rect({width:o[l].width,height:o[l].width,left:o[l].x+1,top:o[l].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new e.Group(s);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},c,f,o;for(f=0,o=a.length;f<o;f++)c=a[f].left+""+a[f].top,s[c]||(s[c]=a[f]);var l=[];for(c in s)l.push(s[c]);return l},render:function(a){var s=this.canvas.contextTop,c,f;for(s.fillStyle=this.color,this._saveAndTransform(s),c=0,f=a.length;c<f;c++){var o=a[c];typeof o.opacity<"u"&&(s.globalAlpha=o.opacity),s.fillRect(o.x,o.y,o.width,o.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,c;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,c=this.sprayChunks.length;s<c;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,c,f,o=this.width/2,l;for(l=0;l<this.density;l++){s=e.util.getRandomInt(a.x-o,a.x+o),c=e.util.getRandomInt(a.y-o,a.y+o),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var h=new e.Point(s,c);h.width=f,this.randomOpacity&&(h.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(h)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,s=5,c=e.util.createCanvasElement(),f=c.getContext("2d");return c.width=c.height=a+s,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),c=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),s}}),function(){var a=e.util.getPointer,s=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(o,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o=this.getActiveObjects(),l,h,p;if(o.length>0&&!this.preserveObjectStacking){h=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)l=this._objects[m],o.indexOf(l)===-1?h.push(l):p.push(l);o.length>1&&(this._activeObject._objects=p),h.push.apply(h,p)}else h=this._objects;return h},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,l){var h=o.calcTransformMatrix(),p=e.util.invertTransform(h),m=this.restorePointerVpt(l);return e.util.transformPoint(m,p)},isTargetTransparent:function(o,l,h){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var p=this._normalizePointer(o,{x:l,y:h}),m=Math.max(o.cacheTranslationX+p.x*o.zoomX,0),g=Math.max(o.cacheTranslationY+p.y*o.zoomY,0),y=e.util.isTransparent(o._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return y}var v=this.contextCache,_=o.selectionBackgroundColor,b=this.viewportTransform;o.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),o.render(v),v.restore(),o.selectionBackgroundColor=_;var y=e.util.isTransparent(v,l,h,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(o){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(h){return o[h]===!0}):l=o[this.selectionKey],l},_shouldClearSelection:function(o,l){var h=this.getActiveObjects(),p=this._activeObject;return!l||l&&p&&h.length>1&&h.indexOf(l)===-1&&p!==l&&!this._isSelectionKeyPressed(o)||l&&!l.evented||l&&!l.selectable&&p&&p!==l},_shouldCenterTransform:function(o,l,h){if(o){var p;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?p=this.centeredScaling||o.centeredScaling:l==="rotate"&&(p=this.centeredRotation||o.centeredRotation),p?!h:h}},_getOriginFromCorner:function(o,l){var h={x:o.originX,y:o.originY};return l==="ml"||l==="tl"||l==="bl"?h.x="right":(l==="mr"||l==="tr"||l==="br")&&(h.x="left"),l==="tl"||l==="mt"||l==="tr"?h.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(h.y="top"),h},_getActionFromCorner:function(o,l,h,p){if(!l||!o)return"drag";var m=p.controls[l];return m.getActionName(h,m,p)},_setupCurrentTransform:function(o,l,h){if(l){var p=this.getPointer(o),m=l.__corner,g=l.controls[m],v=h&&m?g.getActionHandler(o,l,g):e.controlsUtils.dragHandler,_=this._getActionFromCorner(h,m,o,l),b=this._getOriginFromCorner(l,m),y=o[this.centeredKey],w={target:l,action:_,actionHandler:v,corner:m,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:p.x-l.left,offsetY:p.y-l.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(l.angle),width:l.width*l.scaleX,shiftKey:o.shiftKey,altKey:y,original:e.util.saveObjectTransform(l)};this._shouldCenterTransform(l,_,y)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var l=this._groupSelector,h=new e.Point(l.ex,l.ey),p=e.util.transformPoint(h,this.viewportTransform),m=new e.Point(l.ex+l.left,l.ey+l.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),b=Math.max(p.x,g.x),y=Math.max(p.y,g.y),w=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(v,_,b-v,y-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,v+=w,_+=w,b-=w,y-=w,e.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(v,_,b-v,y-_))},findTarget:function(o,l){if(!this.skipTargetFind){var h=!0,p=this.getPointer(o,h),m=this._activeObject,g=this.getActiveObjects(),v,_,b=c(o),y=g.length>1&&!l||g.length===1;if(this.targets=[],y&&m._findTargetCorner(p,b)||g.length>1&&!l&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var w=this._searchPossibleTargets(this._objects,p);return o[this.altSelectionKey]&&w&&v&&w!==v&&(w=v,this.targets=_),w}},_checkTarget:function(o,l,h){if(l&&l.visible&&l.evented&&l.containsPoint(o))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var p=this.isTargetTransparent(l,h.x,h.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(o,l){for(var h,p=o.length,m;p--;){var g=o[p],v=g.group?this._normalizePointer(g.group,l):l;if(this._checkTarget(v,g,l)){h=o[p],h.subTargetCheck&&h instanceof e.Group&&(m=this._searchPossibleTargets(h._objects,l),m&&this.targets.push(m));break}}return h},restorePointerVpt:function(o){return e.util.transformPoint(o,e.util.invertTransform(this.viewportTransform))},getPointer:function(o,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var h=a(o),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),h.x=h.x-this._offset.left,h.y=h.y-this._offset.top,l||(h=this.restorePointerVpt(h));var b=this.getRetinaScaling();return b!==1&&(h.x/=b,h.y/=b),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:h.x*_.width,y:h.y*_.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,h=this.upperCanvasEl;h?h.className="":(h=this._createCanvasElement(),this.upperCanvasEl=h),e.util.addClass(h,"upper-canvas "+o),this.wrapperEl.appendChild(h),this._copyCanvasStyle(l,h),this._applyCanvasStyle(h),this.contextTop=h.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var l=this.width||o.width,h=this.height||o.height;e.util.setStyle(o,{position:"absolute",width:l+"px",height:h+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=l,o.height=h,e.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,l){l.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,l){var h=!1,p=this.getActiveObjects(),m=[],g=[];o.forEach(function(v){p.indexOf(v)===-1&&(h=!0,v.fire("deselected",{e:l,target:v}),g.push(v))}),p.forEach(function(v){o.indexOf(v)===-1&&(h=!0,v.fire("selected",{e:l,target:v}),m.push(v))}),o.length>0&&p.length>0?h&&this.fire("selection:updated",{e:l,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:l,selected:m}):o.length>0&&this.fire("selection:cleared",{e:l,deselected:g})},setActiveObject:function(o,l){var h=this.getActiveObjects();return this._setActiveObject(o,l),this._fireSelectionEvents(h,l),this},_setActiveObject:function(o,l){return this._activeObject===o||!this._discardActiveObject(l,o)||o.onSelect({e:l})?!1:(this._activeObject=o,!0)},_discardActiveObject:function(o,l){var h=this._activeObject;if(h){if(h.onDeselect({e:o,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var l=this.getActiveObjects(),h=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:h,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(l,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var l=this._activeObject;l&&l._renderControls(o)},_toObject:function(o,l,h){var p=this._realizeGroupTransformOnObject(o),m=this.callSuper("_toObject",o,l,h);return this._unwindGroupTransformOnObject(o,p),m},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],h={};return l.forEach(function(p){h[p]=o[p]}),e.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),h}else return null},_unwindGroupTransformOnObject:function(o,l){l&&o.set(l)},_setSVGObject:function(o,l,h){var p=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",o,l,h),this._unwindGroupTransformOnObject(l,p)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,o)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var a=e.util.addListener,s=e.util.removeListener,c=3,f=2,o=1,l={passive:!1};function h(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,l),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(e.document,p+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,l),s(e.document,p+"move",this._onMouseMove,l),s(e.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,l),a(e.document,"touchmove",this._onMouseMove,l),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,l),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,l)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,l),s(e.document,"touchmove",this._onMouseMove,l);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,l),a(m,g+"move",this._onMouseMove,l))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),h(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(h(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!y&&m===this._activeObject)}var w,C;if(m){if(w=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var T=m.controls[w],E=T&&T.getMouseUpHandler(p,m,T);E&&(C=this.getPointer(p),E(p,g,C.x,C.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==w)){var A=g.target&&g.target.controls[g.corner],F=A&&A.getMouseUpHandler(p,m,T);C=C||this.getPointer(p),F&&F(p,g,C.x,C.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",o,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,b=this.targets||[],y={e:p,target:_,subTargets:b,button:g||o,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(p),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),_&&_.fire("mouse"+m,y);for(var w=0;w<b.length;w++)b[w].fire("mouse"+m,y)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(h(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(h(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var y=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=y,m===this._activeObject&&(y||!_)){this._setupCurrentTransform(p,m,b);var w=m.controls[y],g=this.getPointer(p),C=w&&w.getMouseDownHandler(p,m,w);C&&C(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,b=g.oldTarget,y,w,C=b!==p,T=g.canvasEvtIn,E=g.canvasEvtOut;C&&(v={e:m,target:p,previousTarget:b},_={e:m,target:b,nextTarget:p}),w=p&&C,y=b&&C,y&&(E&&this.fire(E,_),b.fire(g.evtOut,_)),w&&(T&&this.fire(T,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,b=m.action,y=!1,w=m.actionHandler;w&&(y=w(p,m,v,_)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,f){var o=this._activeObject;return o&&this._isSelectionKeyPressed(c)&&f&&f.selectable&&this.selection&&(o!==f||o.type==="activeSelection")&&!f.onSelect({e:c})},_handleGrouping:function(c,f){var o=this._activeObject;o.__corner||f===o&&(f=this.findTarget(c,!0),!f||!f.selectable)||(o&&o.type==="activeSelection"?this._updateActiveSelection(f,c):this._createActiveSelection(f,c))},_updateActiveSelection:function(c,f){var o=this._activeObject,l=o._objects.slice(0);o.contains(c)?(o.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),o.size()===1&&this._setActiveObject(o.item(0),f)):(o.addWithUpdate(c),this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,f)},_createActiveSelection:function(c,f){var o=this.getActiveObjects(),l=this._createGroup(c);this._hoveredTarget=l,this._setActiveObject(l,f),this._fireSelectionEvents(o,f)},_createGroup:function(c){var f=this._objects,o=f.indexOf(this._activeObject)<f.indexOf(c),l=o?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(c){var f=this._collectObjects(c),o;f.length===1?this.setActiveObject(f[0],c):f.length>1&&(o=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(o,c))},_collectObjects:function(c){for(var f=[],o,l=this._groupSelector.ex,h=this._groupSelector.ey,p=l+this._groupSelector.left,m=h+this._groupSelector.top,g=new e.Point(a(l,p),a(h,m)),v=new e.Point(s(l,p),s(h,m)),_=!this.selectionFullyContained,b=l===p&&h===m,y=this._objects.length;y--&&(o=this._objects[y],!(!(!o||!o.selectable||!o.visible)&&(_&&o.intersectsWithRect(g,v,!0)||o.isContainedWithinRect(g,v,!0)||_&&o.containsPoint(g,null,!0)||_&&o.containsPoint(v,null,!0))&&(f.push(o),b))););return f.length>1&&(f=f.filter(function(w){return!w.onSelect({e:c})})),f},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",c=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(f,a);return e.util.toDataURL(o,s,c)},toCanvasElement:function(a,s){a=a||1,s=s||{};var c=(s.width||this.width)*a,f=(s.height||this.height)*a,o=this.getZoom(),l=this.width,h=this.height,p=o*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,_=this.interactive,b=[p,0,0,p,g,v],y=this.enableRetinaScaling,w=e.util.createCanvasElement(),C=this.contextTop;return w.width=c,w.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=m,this.width=l,this.height=h,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=y,this.contextTop=C,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,s,c){if(a){var f=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),o=this,l=f.clipPath,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){o.clear(),o._setBgOverlay(f,function(){l?o._enlivenObjects([l],function(m){o.clipPath=m[0],o.__setupCanvas.call(o,f,p,h,s)}):o.__setupCanvas.call(o,f,p,h,s)})},c),this}},__setupCanvas:function(a,s,c,f){var o=this;s.forEach(function(l,h){o.insertAt(l,h)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,s){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var f=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,f),this.__setBgOverlay("overlayImage",a.overlayImage,c,f),this.__setBgOverlay("backgroundColor",a.background,c,f),this.__setBgOverlay("overlayColor",a.overlay,c,f)},__setBgOverlay:function(a,s,c,f){var o=this;if(!s){c[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([s],function(l){o[a]=l[0],c[a]=!0,f&&f()}):this["set"+e.util.string.capitalize(a,!0)](s,function(){c[a]=!0,f&&f()})},_enlivenObjects:function(a,s,c){if(!a||a.length===0){s&&s([]);return}e.util.enlivenObjects(a,function(f){s&&s(f)},null,c)},_toDataURL:function(a,s){this.clone(function(c){s(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,c){this.clone(function(f){c(f.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var c=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(c,function(){a&&a(f)})})},cloneWithoutData:function(a){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var c=new e.Canvas(s);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,o=s.util.toFixed,l=s.util.string.capitalize,h=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,_=g.width,b=g.height,y=s.maxCacheSideLimit,w=s.minCacheSideLimit;if(_<=y&&b<=y&&_*b<=v)return _<w&&(g.width=w),b<w&&(g.height=w),g;var C=_/b,T=s.util.limitDimsByArea(C,v),E=s.util.capValue,A=E(w,T.x,y),F=E(w,T.y,y);return _>A&&(g.zoomX/=_/A,g.width=A,g.capped=!0),b>F&&(g.zoomY/=b/F,g.height=F,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:_+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),w=s.minCacheSideLimit,C=y.width,T=y.height,E,A,F=y.zoomX,G=y.zoomY,Y=C!==this.cacheWidth||T!==this.cacheHeight,Q=this.zoomX!==F||this.zoomY!==G,q=Y||Q,N=0,V=0,ee=!1;if(Y){var te=this._cacheCanvas.width,k=this._cacheCanvas.height,P=C>te||T>k,R=(C<te*.9||T<k*.9)&&te>w&&k>w;ee=P||R,P&&!y.capped&&(C>w||T>w)&&(N=C*.1,V=T*.1)}return this instanceof s.Text&&this.path&&(q=!0,ee=!0,N+=this.getHeightOfLine(0)*this.zoomX,V+=this.getHeightOfLine(0)*this.zoomY),q?(ee?(b.width=Math.ceil(C+N),b.height=Math.ceil(T+V)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),E=y.x/2,A=y.y/2,this.cacheTranslationX=Math.round(b.width/2-E)+E,this.cacheTranslationY=Math.round(b.height/2-A)+A,this.cacheWidth=C,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,G),this.zoomX=F,this.zoomY=G,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:o(this.left,v),top:o(this.top,v),width:o(this.width,v),height:o(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,v),scaleX:o(this.scaleX,v),scaleY:o(this.scaleY,v),angle:o(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,v),skewY:o(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();v*=b*y,_*=b*y}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",b=this[g]!==v,y=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=s.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),b=this.calcTransformMatrix(),y,w,C;v=v||{},w=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,C=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(_,b),y=s.util.qrDecompose(b),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(h(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?w&&this.drawBordersInGroup(g,y,v):w&&this.drawBorders(g,v),C&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,b,y=_&&_.viewportTransform[0]||1,w=_&&_.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),_&&_._isRetinaScaling()&&(y*=s.devicePixelRatio,w*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(y+w)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*y*b.scaleX,g.shadowOffsetY=v.offsetY*w*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,y=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,y):g.transform(1,0,0,1,b,y),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),y,w=this.canvas.getRetinaScaling(),C=_.x/this.scaleX/w,T=_.y/this.scaleY/w;b.width=C,b.height=T,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(C,0),y.lineTo(C,T),y.lineTo(0,T),y.closePath(),y.translate(C/2,T/2),y.scale(_.zoomX/this.scaleX/w,_.zoomY/this.scaleY/w),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(w*this.scaleX/_.zoomX,w*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):s.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new s.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=s.util,_=v.saveObjectTransform(this),b=this.group,y=this.shadow,w=Math.abs,C=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var T=s.util.createCanvasElement(),E=this.getBoundingRect(!0,!0),A=this.shadow,F,G={x:0,y:0},Y,Q,q;A&&(Y=A.blur,A.nonScaling?F={scaleX:1,scaleY:1}:F=this.getObjectScaling(),G.x=2*Math.round(w(A.offsetX)+Y)*w(F.scaleX),G.y=2*Math.round(w(A.offsetY)+Y)*w(F.scaleY)),Q=E.width+G.x,q=E.height+G.y,T.width=Math.ceil(Q),T.height=Math.ceil(q);var N=new s.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(N.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(N.width/2,N.height/2),"center","center");var V=this.canvas;N.add(this);var ee=N.toCanvasElement(C||1,g);return this.shadow=y,this.set("canvas",V),b&&(this.group=b),this.set(_).setCoords(),N._objects=[],N.dispose(),N=null,ee},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(_=s.util.rotatePoint(_,b,h(-this.angle))),{x:_.x-b.x,y:_.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),c(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,_,b){var y=s[g];v=f(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(w){typeof w[0]<"u"&&(v.fill=w[0]),typeof w[1]<"u"&&(v.stroke=w[1]),s.util.enlivenObjectEnlivables(v,v,function(){var C=b?new y(v[b],v):new y(v);_&&_(C)})})},s.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,o,l,h,p){var m=f.x,g=f.y,v,_,b;return typeof o=="string"?o=s[o]:o-=.5,typeof h=="string"?h=s[h]:h-=.5,v=h-o,typeof l=="string"?l=c[l]:l-=.5,typeof p=="string"?p=c[p]:p-=.5,_=p-l,(v||_)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+_*b.y),new e.Point(m,g)},translateToCenterPoint:function(f,o,l){var h=this.translateToGivenOrigin(f,o,l,"center","center");return this.angle?e.util.rotatePoint(h,f,a(this.angle)):h},translateToOriginPoint:function(f,o,l){var h=this.translateToGivenOrigin(f,"center","center",o,l);return this.angle?e.util.rotatePoint(h,f,a(this.angle)):h},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,o){var l=this.getCenterPoint();return this.translateToOriginPoint(l,f,o)},toLocalPoint:function(f,o,l){var h=this.getCenterPoint(),p,m;return typeof o<"u"&&typeof l<"u"?p=this.translateToGivenOrigin(h,"center","center",o,l):p=new e.Point(this.left,this.top),m=new e.Point(f.x,f.y),this.angle&&(m=e.util.rotatePoint(m,h,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,o,l){var h=this.translateToCenterPoint(f,o,l),p=this.translateToOriginPoint(h,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var o=a(this.angle),l=this.getScaledWidth(),h=e.util.cos(o)*l,p=e.util.sin(o)*l,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof f=="string"?g=s[f]:g=f-.5,this.left+=h*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(l){return[new e.Point(l.tl.x,l.tl.y),new e.Point(l.tr.x,l.tr.y),new e.Point(l.br.x,l.br.y),new e.Point(l.bl.x,l.bl.y)]}var s=e.util,c=s.degreesToRadians,f=s.multiplyTransformMatrices,o=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,h){return h?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,h){return a(this._getCoords(l,h))},intersectsWithRect:function(l,h,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,l,h);return v.status==="Intersection"},intersectsWithObject:function(l,h,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(h,p),l.getCoords(h,p));return m.status==="Intersection"||l.isContainedWithinObject(this,h,p)||this.isContainedWithinObject(l,h,p)},isContainedWithinObject:function(l,h,p){for(var m=this.getCoords(h,p),g=h?l.aCoords:l.lineCoords,v=0,_=l._getImageLines(g);v<4;v++)if(!l.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(l,h,p,m){var g=this.getBoundingRect(p,m);return g.left>=l.x&&g.left+g.width<=h.x&&g.top>=l.y&&g.top+g.height<=h.y},containsPoint:function(l,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(l,v);return _!==0&&_%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var h=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,l);return m.some(function(g){return g.x<=p.x&&g.x>=h.x&&g.y<=p.y&&g.y>=h.y})||this.intersectsWithRect(h,p,!0,l)?!0:this._containsCenterOfCanvas(h,p,l)},_containsCenterOfCanvas:function(l,h,p){var m={x:(l.x+h.x)/2,y:(l.y+h.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var h=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(h,p,!0,l))return!0;var m=this.getCoords(!0,l).every(function(g){return(g.x>=p.x||g.x<=h.x)&&(g.y>=p.y||g.y<=h.y)});return m&&this._containsCenterOfCanvas(h,p,l)},_getImageLines:function(l){var h={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return h},_findCrossPoints:function(l,h){var p,m,g,v,_,b=0,y;for(var w in h)if(y=h[w],!(y.o.y<l.y&&y.d.y<l.y)&&!(y.o.y>=l.y&&y.d.y>=l.y)&&(y.o.x===y.d.x&&y.o.x>=l.x?_=y.o.x:(p=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),g=l.y-p*l.x,v=y.o.y-m*y.o.x,_=-(g-v)/(p-m)),_>=l.x&&(b+=1),b===2))break;return b},getBoundingRect:function(l,h){var p=this.getCoords(l,h);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,h){var p=this.getBoundingRect(h).width/this.getScaledWidth();return this.scale(l/this.width/p)},scaleToHeight:function(l,h){var p=this.getBoundingRect(h).height/this.getScaledHeight();return this.scale(l/this.height/p)},calcLineCoords:function(){var l=this.getViewportTransform(),h=this.padding,p=c(this.angle),m=s.cos(p),g=s.sin(p),v=m*h,_=g*h,b=v+_,y=v-_,w=this.calcACoords(),C={tl:o(w.tl,l),tr:o(w.tr,l),bl:o(w.bl,l),br:o(w.br,l)};return h&&(C.tl.x-=y,C.tl.y-=b,C.tr.x+=b,C.tr.y-=y,C.bl.x-=b,C.bl.y+=y,C.br.x+=y,C.br.y+=b),C},calcOCoords:function(){var l=this._calcRotateMatrix(),h=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,h),g=f(m,l),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(b,y,w){_[y]=b.positionHandler(v,g,w)}),_},calcACoords:function(){var l=this._calcRotateMatrix(),h=this._calcTranslateMatrix(),p=f(h,l),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:o({x:-g,y:-v},p),tr:o({x:g,y:-v},p),bl:o({x:-g,y:v},p),br:o({x:g,y:v},p)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var h="_",p="";return!l&&this.group&&(p=this.group.transformMatrixKey(l)+h),p+this.top+h+this.left+h+this.scaleX+h+this.scaleY+h+this.skewX+h+this.skewY+h+this.angle+h+this.originX+h+this.originY+h+this.width+h+this.height+h+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var h=this.calcOwnMatrix();if(l||!this.group)return h;var p=this.transformMatrixKey(l),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(h=f(this.group.calcTransformMatrix(!1),h)),m.key=p,m.value=h,h)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),h=this.ownMatrixCache||(this.ownMatrixCache={});if(h.key===l)return h.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return h.key=l,h.value=s.composeMatrix(m),h.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,h=this.width+l,p=this.height+l;return{x:h,y:p}},_getTransformedDimensions:function(l,h){typeof l>"u"&&(l=this.skewX),typeof h>"u"&&(h=this.skewY);var p,m,g,v=l===0&&h===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:h});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(l,h){return this.strokeUniform?{x:l+this.strokeWidth,y:h+this.strokeWidth}:{x:l,y:h}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),h=this._getTransformedDimensions(),p=o(h,l,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,f){if(f){if(f.toLive)return c+": url(#SVGID_"+f.id+"); ";var o=new e.Color(f),l=c+": "+o.toRgb()+"; ",h=o.getAlpha();return h!==1&&(l+=c+"-opacity: "+h.toString()+"; "),l}else return c+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var f=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",h=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),y=a("fill",this.fill),w=a("stroke",this.stroke);return[w,"stroke-width: ",o,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",h,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",y,"fill-rule: ",f,"; ","opacity: ",v,";",b,_].join("")},getSvgSpanStyles:function(c,f){var o="; ",h=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+o:"",l=c.strokeWidth?"stroke-width: "+c.strokeWidth+o:"",h=h,p=c.fontSize?"font-size: "+c.fontSize+"px"+o:"",m=c.fontStyle?"font-style: "+c.fontStyle+o:"",g=c.fontWeight?"font-weight: "+c.fontWeight+o:"",v=c.fill?a("fill",c.fill):"",_=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+o),[_,l,h,p,m,g,b,v,y,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(f){return c[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,f){var o=c?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+e.util.matrixToSVG(o);return l+(f||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,f){f=f||{};var o=f.reviver,l=f.additionalTransform||"",h=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=h,o?o(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,f){f=f||{};var o=f.noStyle,l=f.reviver,h=o?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,b=this.fill,y=this.shadow,w,C=[],T,E=c.indexOf("COMMON_PARTS"),A=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(l)+`</clipPath>
`),v&&C.push("<g ",p,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),w=[h,g,o?"":this.addPaintOrder()," ",A?'transform="'+A+'" ':""].join(""),c[E]=w,b&&b.toLive&&C.push(b.toSVG(this)),_&&_.toLive&&C.push(_.toSVG(this)),y&&C.push(y.toSVG(this)),m&&C.push(T),C.push(c.join("")),C.push(`</g>
`),v&&C.push(`</g>
`),l?l(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,s="stateProperties";function c(o,l,h){var p={},m=!0;h.forEach(function(g){p[g]=o[g]}),a(o[l],p,m)}function f(o,l,h){if(o===l)return!0;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var p=0,m=o.length;p<m;p++)if(!f(o[p],l[p]))return!1;return!0}else if(o&&typeof o=="object"){var g=Object.keys(o),v;if(!l||typeof l!="object"||!h&&g.length!==Object.keys(l).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(o[v],l[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(o){o=o||s;var l="_"+o;return Object.keys(this[l]).length<this[o].length?!0:!f(this[l],this,!0)},saveState:function(o){var l=o&&o.propertySet||s,h="_"+l;return this[h]?(c(this,h,this[l]),o&&o.stateProperties&&c(this,h,o.stateProperties),this):this.setupState(o)},setupState:function(o){o=o||{};var l=o.propertySet||s;return o.propertySet=l,this["_"+l]={},this.saveState(o),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,o=s.y,l,h,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(h=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),l=this._findCrossPoints({x:f,y:o},h),l!==0&&l%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var c in this.controls)s(this.controls[c],c,this)},_setCornerCoords:function(){var s=this.oCoords;for(var c in s){var f=this.controls[c];s[c].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[c].x,s[c].y,!1),s[c].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[c].x,s[c].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var c=this.getCenterPoint(),f=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return s.translate(c.x,c.y),s.scale(1/o[0],1/o[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,c){c=c||{};var f=this._calculateCurrentDimensions(),o=this.borderScaleFactor,l=f.x+o,h=f.y+o,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(s,c.borderDashArray||this.borderDashArray),s.strokeRect(-l/2,-h/2,l,h),p&&(s.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,s.moveTo(g.x*l,g.y*h),s.lineTo(g.x*l+g.offsetX,g.y*h+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,c,f){f=f||{};var o=e.util.sizeAfterTransform(this.width,this.height,c),l=this.strokeWidth,h=this.strokeUniform,p=this.borderScaleFactor,m=o.x+l*(h?this.canvas.getZoom():c.scaleX)+p,g=o.y+l*(h?this.canvas.getZoom():c.scaleY)+p;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,c){c=c||{},s.save();var f=this.canvas.getRetinaScaling(),o,l;return s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(o=this.group.calcTransformMatrix()),this.forEachControl(function(h,p,m){l=m.oCoords[p],h.getVisibility(m,p)&&(o&&(l=e.util.transformPoint(l,o)),h.render(s,l.x,l.y,c,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=c,this},setControlsVisibility:function(s){s||(s={});for(var c in s)this.setControlVisible(c,s[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,o=s.onChange||c,l=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(h){a.set("left",h),l.requestRenderAll(),o()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,o=s.onChange||c,l=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(h){a.set("top",h),l.requestRenderAll(),o()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,o=s.onChange||c,l=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(h){a.set("opacity",h),l.requestRenderAll(),o()},onComplete:function(){l.remove(a),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,c,f=[];for(s in arguments[0])a.push(s);for(var o=0,l=a.length;o<l;o++)s=a[o],c=o!==l-1,f.push(this._animate(s,arguments[0][s],arguments[1],c));return f}else return this._animate.apply(this,arguments)},_animate:function(a,s,c,f){var o=this,l;s=s.toString(),c?c=e.util.object.clone(c):c={},~a.indexOf(".")&&(l=a.split("."));var h=o.colorProperties.indexOf(a)>-1||l&&o.colorProperties.indexOf(l[1])>-1,p=l?this.get(l[0])[l[1]]:this.get(a);"from"in c||(c.from=p),h||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:c.from,endValue:s,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,_){return c.abort.call(o,g,v,_)},onChange:function(g,v,_){l?o[l[0]][l[1]]=g:o.set(a,g),!f&&c.onChange&&c.onChange(g,v,_)},onComplete:function(g,v,_){f||(o.setCoords(),c.onComplete&&c.onComplete(g,v,_))}};return h?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(h,p){h||(h=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",h[0]),this.set("y1",h[1]),this.set("x2",h[2]),this.set("y2",h[3]),this._setWidthHeight(p)},_setWidthHeight:function(h){h||(h={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in h?h.left:this._getLeftToOriginX(),this.top="top"in h?h.top:this._getTopToOriginY()},_set:function(h,p){return this.callSuper("_set",h,p),typeof o[h]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(h){h.beginPath();var p=this.calcLinePoints();h.moveTo(p.x1,p.y1),h.lineTo(p.x2,p.y2),h.lineWidth=this.strokeWidth;var m=h.strokeStyle;h.strokeStyle=this.stroke||h.fillStyle,this.stroke&&this._renderStroke(h),h.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(h){return c(this.callSuper("toObject",h),this.calcLinePoints())},_getNonTransformedDimensions:function(){var h=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(h.y-=this.strokeWidth),this.height===0&&(h.x-=this.strokeWidth)),h},calcLinePoints:function(){var h=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=h*this.width*.5,g=p*this.height*.5,v=h*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var h=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(h,p,m){m=m||{};var g=s.parseAttributes(h,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,c(g,m)))},s.Line.fromObject=function(h,p){function m(v){delete v.points,p&&p(v)}var g=f(h,!0);g.points=[h.x1,h.y1,h.x2,h.y2],s.Object._fromObject("Line",g,m,"points")};function l(h,p){var m=h.origin,g=h.axis1,v=h.axis2,_=h.dimension,b=p.nearest,y=p.center,w=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case y:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case w:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(o,l){return this.callSuper("_set",o,l),o==="radius"&&this.setRadius(l),this},toObject:function(o){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(o))},_toSVG:function(){var o,l=0,h=0,p=(this.endAngle-this.startAngle)%360;if(p===0)o=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+h+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,_=s.util.cos(m)*v,b=s.util.sin(m)*v,y=s.util.cos(g)*v,w=s.util.sin(g)*v,C=p>180?"1":"0";o=['<path d="M '+_+" "+b," A "+v+" "+v," 0 ",+C+" 1"," "+y+" "+w,'" ',"COMMON_PARTS",` />
`]}return o},_render:function(o){o.beginPath(),o.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(o)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(o){return this.radius=o,this.set("width",o*2).set("height",o*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(o,l){var h=s.parseAttributes(o,s.Circle.ATTRIBUTE_NAMES);if(!f(h))throw new Error("value of `r` attribute is required and can not be negative");h.left=(h.left||0)-h.radius,h.top=(h.top||0)-h.radius,l(new s.Circle(h))};function f(o){return"radius"in o&&o.radius>=0}s.Circle.fromObject=function(o,l){s.Object._fromObject("Circle",o,l)}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(c){var f=this.width/2,o=this.height/2;c.beginPath(),c.moveTo(-f,o),c.lineTo(0,-o),c.lineTo(f,o),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,f=this.height/2,o=[-c+" "+f,"0 "+-f,c+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',o,'" />']}}),s.Triangle.fromObject=function(c,f){return s.Object._fromObject("Triangle",c,f)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,o){switch(this.callSuper("_set",f,o),f){case"rx":this.rx=o,this.set("width",o*2);break;case"ry":this.ry=o,this.set("height",o*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,c,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,o){var l=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,o(new s.Ellipse(l))},s.Ellipse.fromObject=function(f,o){s.Object._fromObject("Ellipse",f,o)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var o=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,h=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=o!==0||l!==0,_=1-.5522847498;f.beginPath(),f.moveTo(m+o,g),f.lineTo(m+h-o,g),v&&f.bezierCurveTo(m+h-_*o,g,m+h,g+_*l,m+h,g+l),f.lineTo(m+h,g+p-l),v&&f.bezierCurveTo(m+h,g+p-_*l,m+h-_*o,g+p,m+h-o,g+p),f.lineTo(m+o,g+p),v&&f.bezierCurveTo(m+_*o,g+p,m,g+p-_*l,m,g+p-l),f.lineTo(m,g+l),v&&f.bezierCurveTo(m,g+_*l,m+_*o,g,m+o,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,o=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',o,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,o,l){if(!f)return o(null);l=l||{};var h=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);h.left=h.left||0,h.top=h.top||0,h.height=h.height||0,h.width=h.width||0;var p=new s.Rect(c(l?s.util.object.clone(l):{},h));p.visible=p.visible&&p.width>0&&p.height>0,o(p)},s.Rect.fromObject=function(f,o){return s.Object._fromObject("Rect",f,o)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.array.min,o=s.util.array.max,l=s.util.toFixed,h=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return h(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=o(p,"x")||0,_=o(p,"y")||0,b=v-m,y=_-g;return{left:m,top:g,width:b,height:y}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)p.push(l(this.points[_].x-m,v),",",l(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](_,c(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,o){s.Object._fromObject("Polygon",f,o,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max,o=s.util.object.extend,l=s.util.object.clone,h=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=l(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,b=0,y=0,w=0,C=-this.pathOffset.x,T=-this.pathOffset.y;p.beginPath();for(var E=0,A=this.path.length;E<A;++E)switch(m=this.path[E],m[0]){case"L":_=m[1],b=m[2],p.lineTo(_+C,b+T);break;case"M":_=m[1],b=m[2],g=_,v=b,p.moveTo(_+C,b+T);break;case"C":_=m[5],b=m[6],y=m[3],w=m[4],p.bezierCurveTo(m[1]+C,m[2]+T,y+C,w+T,_+C,b+T);break;case"Q":p.quadraticCurveTo(m[1]+C,m[2]+T,m[3]+C,m[4]+T),_=m[3],b=m[4],y=m[1],w=m[2];break;case"z":case"Z":_=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return o(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+h(-this.pathOffset.x,p)+", "+h(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,b=0,y=0,w,C=0,T=this.path.length;C<T;++C){switch(g=this.path[C],g[0]){case"L":b=g[1],y=g[2],w=[];break;case"M":b=g[1],y=g[2],v=b,_=y,w=[];break;case"C":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],y=g[6];break;case"Q":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],y=g[4];break;case"z":case"Z":b=v,y=_;break}w.forEach(function(q){p.push(q.x),m.push(q.y)}),p.push(b),m.push(y)}var E=c(p)||0,A=c(m)||0,F=f(p)||0,G=f(m)||0,Y=F-E,Q=G-A;return{left:E,top:A,width:Y,height:Q}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){_.clipPath=b[0],m&&m(_)}):m&&m(_)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,o(v,g)))}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,l,h){l=l||{},this._objects=[],h&&this.callSuper("initialize",l),this._objects=o||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(h)this._updateObjectsACoords();else{var m=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var o=!0,l=this._objects.length;l--;)this._objects[l].setCoords(o)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),h=this._objects.length;h--;)this._updateObjectCoords(this._objects[h],l)},_updateObjectCoords:function(o,l){var h=o.left,p=o.top,m=!0;o.set({left:h-l.x,top:p-l.y}),o.group=this,o.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var l=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),o&&(l&&s.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,l){var h=this._objects.length;if(this.useSetOnGroup)for(;h--;)this._objects[h].setOnGroup(o,l);if(o==="canvas")for(;h--;)this._objects[h]._set(o,l);s.Object.prototype._set.call(this,o,l)},toObject:function(o){var l=this.includeDefaultValues,h=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=l;var v=m.toObject(o);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,o);return p.objects=h,p},toDatalessObject:function(o){var l,h=this.sourcePath;if(h)l=h;else{var p=this.includeDefaultValues;l=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(o);return g.includeDefaultValues=v,_})}var m=s.Object.prototype.toDatalessObject.call(this,o);return m.objects=l,m},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=s.Object.prototype.shouldCache.call(this);if(o){for(var l=0,h=this._objects.length;l<h;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,l=this._objects.length;o<l;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var l=0,h=this._objects.length;l<h;l++)this._objects[l].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var l=0,h=this._objects.length;l<h;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(l){s.util.addTransformToObject(l,o),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,l=this.canvas;this._objects=[];var h=this.toObject();delete h.objects;var p=new s.ActiveSelection([]);return p.set(h),p.type="activeSelection",l.remove(this),o.forEach(function(m){m.group=p,m.dirty=!0,l.add(m)}),p.canvas=l,p._objects=o,l._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var o=!0;return this.forEachObject(function(l){l.setCoords(o)}),this},_calcBounds:function(o){for(var l=[],h=[],p,m,g,v=["tr","br","bl","tl"],_=0,b=this._objects.length,y,w=v.length;_<b;++_){for(p=this._objects[_],g=p.calcACoords(),y=0;y<w;y++)m=v[y],l.push(g[m].x),h.push(g[m].y);p.aCoords=g}this._getBounds(l,h,o)},_getBounds:function(o,l,h){var p=new s.Point(c(o),c(l)),m=new s.Point(f(o),f(l)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,b=m.y-p.y||0;this.width=_,this.height=b,h||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(o){for(var l=["<g ","COMMON_PARTS",` >
`],h=0,p=this._objects.length;h<p;h++)l.push("		",this._objects[h].toSVG(o));return l.push(`</g>
`),l},getSvgStyles:function(){var o=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),l].join("")},toClipPathSVG:function(o){for(var l=[],h=0,p=this._objects.length;h<p;h++)l.push("	",this._objects[h].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(l,{reviver:o})}}),s.Group.fromObject=function(o,l){var h=o.objects,p=s.util.object.clone(o,!0);if(delete p.objects,typeof h=="string"){s.loadSVGFromURL(h,function(m){var g=s.util.groupSVGElements(m,o,h),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(_){g.clipPath=_[0],l&&l(g)}):l&&l(g)});return}s.util.enlivenObjects(h,function(m){s.util.enlivenObjectEnlivables(o,p,function(){l&&l(new s.Group(m,p,!0))})})})}(t),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(c,f){f=f||{},this._objects=c||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),o=new s.Group([]);if(delete f.type,o.set(f),c.forEach(function(h){h.canvas.remove(h),h.group=o}),o._objects=c,!this.canvas)return o;var l=this.canvas;return l.add(o),l._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,f,o){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,f),o=o||{},typeof o.hasControls>"u"&&(o.hasControls=!1),o.forActiveSelection=!0;for(var l=0,h=this._objects.length;l<h;l++)this._objects[l]._renderControls(c,o);c.restore()}}),s.ActiveSelection.fromObject=function(c,f){s.util.enlivenObjects(c.objects,function(o){delete c.objects,f&&f(new s.ActiveSelection(o,c,!0))})})}(t),function(a){var s=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(c,f)},getElement:function(){return this._element||{}},setElement:function(c,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,o=this.height/2;c.beginPath(),c.moveTo(-f,-o),c.lineTo(f,-o),c.lineTo(f,o),c.lineTo(-f,o),c.lineTo(-f,-o),c.closePath()}},toObject:function(c){var f=[];this.filters.forEach(function(l){l&&f.push(l.toObject())});var o=s(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],f=[],o,l=this._element,h=-this.width/2,p=-this.height/2,m="",g="";if(!l)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+h+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',h-this.cropX,'" y="',p-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,o=["	<rect ",'x="',h,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?c=c.concat(o,f):c=c.concat(f,o),c},getSrc:function(c){var f=c?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(c,f,o){return e.util.loadImage(c,function(l,h){this.setElement(l,o),this._setWidthHeight(),f&&f(this,h)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,f=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),l=o.scaleX,h=o.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||l>f&&h>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=h;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=c.scaleX=l,this._lastScaleY=c.scaleY=h,e.filterBackend.applyFilters([c],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,o=f.naturalWidth||f.width,l=f.naturalHeight||f.height;if(this._element===this._originalElement){var h=e.util.createCanvasElement();h.width=o,h.height=l,this._element=h,this._filteredEl=h}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,l),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,o,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var f=this._element;if(f){var o=this._filterScalingX,l=this._filterScalingY,h=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),b=f.naturalWidth||f.width,y=f.naturalHeight||f.height,w=v*o,C=_*l,T=m(h*o,b-w),E=m(p*l,y-C),A=-h/2,F=-p/2,G=m(h,b/o-v),Y=m(p,y/l-_);f&&c.drawImage(f,w,C,T,E,A,F,G,Y)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,f){this.setElement(e.util.getById(c),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,f){c&&c.length?e.util.enlivenObjects(c,function(o){f&&f(o)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(c){c||(c={});var f=this.getElement();this.width=c.width||f.naturalWidth||f.width||0,this.height=c.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,o=this._element.height,l=1,h=1,p=0,m=0,g=0,v=0,_,b=this.width,y=this.height,w={width:b,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(l=h=e.util.findScaleToFit(this._element,w),_=(b-f*l)/2,c.alignX==="Min"&&(p=-_),c.alignX==="Max"&&(p=_),_=(y-o*h)/2,c.alignY==="Min"&&(m=-_),c.alignY==="Max"&&(m=_)),c.meetOrSlice==="slice"&&(l=h=e.util.findScaleToCover(this._element,w),_=f-b/l,c.alignX==="Mid"&&(g=_/2),c.alignX==="Max"&&(g=_),_=o-y/h,c.alignY==="Mid"&&(v=_/2),c.alignY==="Max"&&(v=_),f=b/l,o=y/h)):(l=b/f,h=y/o),{width:f,height:o,scaleX:l,scaleY:h,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,f){var o=e.util.object.clone(c);e.util.loadImage(o.src,function(l,h){if(h){f&&f(null,!0);return}e.Image.prototype._initFilters.call(o,o.filters,function(p){o.filters=p||[],e.Image.prototype._initFilters.call(o,[o.resizeFilter],function(m){o.resizeFilter=m[0],e.util.enlivenObjectEnlivables(o,o,function(){var g=new e.Image(l,o);f(g,!1)})})})},null,o.crossOrigin)},e.Image.fromURL=function(c,f,o){e.util.loadImage(c,function(l,h){f&&f(new e.Image(l,o),h)},null,o&&o.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,f,o){var l=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(l["xlink:href"],f,s(o?e.util.object.clone(o):{},l))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},c=a.onComplete||s,f=a.onChange||s,o=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){o.rotate(l),f()},onComplete:function(){o.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,f){var o="precision "+f+` float;
void main(){}`,l=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(l,o),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),o=f.getContext("webgl")||f.getContext("experimental-webgl"),l=!1;if(o){e.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),l=e.maxTextureSize>=c;for(var h=["highp","mediump","lowp"],p=0;p<3;p++)if(a(o,h[p])){e.webGlPrecision=h[p];break}}return this.isSupported=l,l},e.WebglFilterBackend=s;function s(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(c,f){this.dispose(),this.createWebGLCanvas(c,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,f)},chooseFastestCopyGLTo2DMethod:function(c,f){var o=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var h=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(o&&l&&h&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(c*f*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=d;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:f,targetCanvas:m},_,b,y;m.width=c,m.height=f,_=window.performance.now(),u.call(v,this.gl,v),b=window.performance.now()-_,_=window.performance.now(),d.call(v,this.gl,v),y=window.performance.now()-_,b>y?(this.imageBuffer=g,this.copyGLTo2D=d):this.copyGLTo2D=u}},createWebGLCanvas:function(c,f){var o=e.util.createCanvasElement();o.width=c,o.height=f;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},h=o.getContext("webgl",l);h||(h=o.getContext("experimental-webgl",l)),h&&(h.clearColor(0,0,0,0),this.canvas=o,this.gl=h)},applyFilters:function(c,f,o,l,h,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:o,sourceHeight:l,destinationWidth:o,destinationHeight:l,context:m,sourceTexture:this.createTexture(m,o,l,!g&&f),targetTexture:this.createTexture(m,o,l),originalTexture:g||this.createTexture(m,o,l,!g&&f),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:h},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),c.forEach(function(b){b&&b.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),h.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,f,o,l,h){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,h||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,h||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),l?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,o,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,f){if(this.textureCache[c])return this.textureCache[c];var o=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[c]=o,o},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,f={renderer:"",vendor:""};if(!c)return f;var o=c.getExtension("WEBGL_debug_renderer_info");if(o){var l=c.getParameter(o.UNMASKED_RENDERER_WEBGL),h=c.getParameter(o.UNMASKED_VENDOR_WEBGL);l&&(f.renderer=l.toLowerCase()),h&&(f.vendor=h.toLowerCase())}return this.gpuInfo=f,f}}}();function r(a){var s=a.targetCanvas,c=s.width,f=s.height,o=a.destinationWidth,l=a.destinationHeight;(c!==o||f!==l)&&(s.width=o,s.height=l)}function u(a,s){var c=a.canvas,f=s.targetCanvas,o=f.getContext("2d");o.translate(0,f.height),o.scale(1,-1);var l=c.height-f.height;o.drawImage(c,0,l,f.width,f.height,0,0,f.width,f.height)}function d(a,s){var c=s.targetCanvas,f=c.getContext("2d"),o=s.destinationWidth,l=s.destinationHeight,h=o*l*4,p=new Uint8Array(this.imageBuffer,0,h),m=new Uint8ClampedArray(this.imageBuffer,0,h);a.readPixels(0,0,o,l,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,o,l);f.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,f,o,l,h){var p=h.getContext("2d");p.drawImage(f,0,0,o,l);var m=p.getImageData(0,0,o,l),g=p.getImageData(0,0,o,l),v={sourceWidth:o,sourceHeight:l,imageData:m,originalEl:f,originalImageData:g,canvasEl:h,ctx:p,filterBackend:this};return c.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==o||v.imageData.height!==l)&&(h.width=v.imageData.width,h.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,c){s=s||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,c),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var o=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(o,s),a.compileShader(o),!a.getShaderParameter(o,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(o));var l=a.createProgram();if(a.attachShader(l,f),a.attachShader(l,o),a.linkProgram(l),!a.getProgramParameter(l,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(l));var h=this.getAttributeLocations(a,l),p=this.getUniformLocations(a,l)||{};return p.uStepW=a.getUniformLocation(l,"uStepW"),p.uStepH=a.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:h,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,c){var f=s.aPosition,o=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,o),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,c,f;a.passes>1?(c=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==f)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,c,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var c=s[a].length;c--;)if(this[a][c]!==s[a][c])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(c.program),this.sendAttributeData(s,c.attributeLocations,a.aPosition),s.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,c.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,s){var c=new e.Image.filters[a.type](a);return s&&s(c),c},function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.ColorMatrix=f(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var l=o.imageData,h=l.data,p=h.length,m=this.matrix,g,v,_,b,y,w=this.colorsOnly;for(y=0;y<p;y+=4)g=h[y],v=h[y+1],_=h[y+2],w?(h[y]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,h[y+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,h[y+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(b=h[y+3],h[y]=g*m[0]+v*m[1]+_*m[2]+b*m[3]+m[4]*255,h[y+1]=g*m[5]+v*m[6]+_*m[7]+b*m[8]+m[9]*255,h[y+2]=g*m[10]+v*m[11]+_*m[12]+b*m[13]+m[14]*255,h[y+3]=g*m[15]+v*m[16]+_*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(o,l){return{uColorMatrix:o.getUniformLocation(l,"uColorMatrix"),uConstants:o.getUniformLocation(l,"uConstants")}},sendUniformData:function(o,l){var h=this.matrix,p=[h[0],h[1],h[2],h[3],h[5],h[6],h[7],h[8],h[10],h[11],h[12],h[13],h[15],h[16],h[17],h[18]],m=[h[4],h[9],h[14],h[19]];o.uniformMatrix4fv(l.uColorMatrix,!1,p),o.uniform4fv(l.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Brightness=f(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var l=o.imageData,h=l.data,p,m=h.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)h[p]=h[p]+g,h[p+1]=h[p+1]+g,h[p+2]=h[p+2]+g}},getUniformLocations:function(o,l){return{uBrightness:o.getUniformLocation(l,"uBrightness")}},sendUniformData:function(o,l){o.uniform1f(l.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,o=s.util.createClass;f.Convolute=o(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var h=Math.sqrt(this.matrix.length),p=this.type+"_"+h+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return l.programCache.hasOwnProperty(p)||(l.programCache[p]=this.createProgram(l.context,m)),l.programCache[p]},applyTo2d:function(l){var h=l.imageData,p=h.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=h.width,b=h.height,y=l.ctx.createImageData(_,b),w=y.data,C=this.opaque?1:0,T,E,A,F,G,Y,Q,q,N,V,ee,te,k;for(ee=0;ee<b;ee++)for(V=0;V<_;V++){for(G=(ee*_+V)*4,T=0,E=0,A=0,F=0,k=0;k<g;k++)for(te=0;te<g;te++)Q=ee+k-v,Y=V+te-v,!(Q<0||Q>=b||Y<0||Y>=_)&&(q=(Q*_+Y)*4,N=m[k*g+te],T+=p[q]*N,E+=p[q+1]*N,A+=p[q+2]*N,C||(F+=p[q+3]*N));w[G]=T,w[G+1]=E,w[G+2]=A,C?w[G+3]=p[G+3]:w[G+3]=F}l.imageData=y},getUniformLocations:function(l,h){return{uMatrix:l.getUniformLocation(h,"uMatrix"),uOpaque:l.getUniformLocation(h,"uOpaque"),uHalfSize:l.getUniformLocation(h,"uHalfSize"),uSize:l.getUniformLocation(h,"uSize")}},sendUniformData:function(l,h){l.uniform1fv(h.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Grayscale=f(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var l=o.imageData,h=l.data,p,m=h.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(h[p]+h[p+1]+h[p+2])/3:v==="lightness"?g=(Math.min(h[p],h[p+1],h[p+2])+Math.max(h[p],h[p+1],h[p+2]))/2:v==="luminosity"&&(g=.21*h[p]+.72*h[p+1]+.07*h[p+2]),h[p]=g,h[p+1]=g,h[p+2]=g},retrieveShader:function(o){var l=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(l)){var h=this.fragmentSource[this.mode];o.programCache[l]=this.createProgram(o.context,h)}return o.programCache[l]},getUniformLocations:function(o,l){return{uMode:o.getUniformLocation(l,"uMode")}},sendUniformData:function(o,l){var h=1;o.uniform1i(l.uMode,h)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Invert=f(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var l=o.imageData,h=l.data,p,m=h.length;for(p=0;p<m;p+=4)h[p]=255-h[p],h[p+1]=255-h[p+1],h[p+2]=255-h[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,l){return{uInvert:o.getUniformLocation(l,"uInvert")}},sendUniformData:function(o,l){o.uniform1i(l.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,o=s.util.createClass;f.Noise=o(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var h=l.imageData,p=h.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(l,h){return{uNoise:l.getUniformLocation(h,"uNoise"),uSeed:l.getUniformLocation(h,"uSeed")}},sendUniformData:function(l,h){l.uniform1f(h.uNoise,this.noise/255),l.uniform1f(h.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Pixelate=f(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var l=o.imageData,h=l.data,p=l.height,m=l.width,g,v,_,b,y,w,C,T,E,A,F;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,b=h[g],y=h[g+1],w=h[g+2],C=h[g+3],A=Math.min(v+this.blocksize,p),F=Math.min(_+this.blocksize,m),T=v;T<A;T++)for(E=_;E<F;E++)g=T*4*m+E*4,h[g]=b,h[g+1]=y,h[g+2]=w,h[g+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,l){return{uBlocksize:o.getUniformLocation(l,"uBlocksize"),uStepW:o.getUniformLocation(l,"uStepW"),uStepH:o.getUniformLocation(l,"uStepH")}},sendUniformData:function(o,l){o.uniform1f(l.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,o=s.util.createClass;f.RemoveColor=o(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var h=l.imageData,p=h.data,m,g=this.distance*255,v,_,b,y=new s.Color(this.color).getSource(),w=[y[0]-g,y[1]-g,y[2]-g],C=[y[0]+g,y[1]+g,y[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],b=p[m+2],v>w[0]&&_>w[1]&&b>w[2]&&v<C[0]&&_<C[1]&&b<C[2]&&(p[m+3]=0)},getUniformLocations:function(l,h){return{uLow:l.getUniformLocation(h,"uLow"),uHigh:l.getUniformLocation(h,"uHigh")}},sendUniformData:function(l,h){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];l.uniform4fv(h.uLow,g),l.uniform4fv(h.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in o)c[l]=f(c.ColorMatrix,{type:l,matrix:o[l],mainParameter:!1,colorsOnly:!0}),s.Image.filters[l].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendColor=f(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var l=this.type+"_"+this.mode,h;return o.programCache.hasOwnProperty(l)||(h=this.buildSource(this.mode),o.programCache[l]=this.createProgram(o.context,h)),o.programCache[l]},applyTo2d:function(o){var l=o.imageData,h=l.data,p=h.length,m,g,v,_,b,y,w,C=1-this.alpha;w=new s.Color(this.color).getSource(),m=w[0]*this.alpha,g=w[1]*this.alpha,v=w[2]*this.alpha;for(var T=0;T<p;T+=4)switch(_=h[T],b=h[T+1],y=h[T+2],this.mode){case"multiply":h[T]=_*m/255,h[T+1]=b*g/255,h[T+2]=y*v/255;break;case"screen":h[T]=255-(255-_)*(255-m)/255,h[T+1]=255-(255-b)*(255-g)/255,h[T+2]=255-(255-y)*(255-v)/255;break;case"add":h[T]=_+m,h[T+1]=b+g,h[T+2]=y+v;break;case"diff":case"difference":h[T]=Math.abs(_-m),h[T+1]=Math.abs(b-g),h[T+2]=Math.abs(y-v);break;case"subtract":h[T]=_-m,h[T+1]=b-g,h[T+2]=y-v;break;case"darken":h[T]=Math.min(_,m),h[T+1]=Math.min(b,g),h[T+2]=Math.min(y,v);break;case"lighten":h[T]=Math.max(_,m),h[T+1]=Math.max(b,g),h[T+2]=Math.max(y,v);break;case"overlay":h[T]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,h[T+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,h[T+2]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255;break;case"exclusion":h[T]=m+_-2*m*_/255,h[T+1]=g+b-2*g*b/255,h[T+2]=v+y-2*v*y/255;break;case"tint":h[T]=m+_*C,h[T+1]=g+b*C,h[T+2]=v+y*C}},getUniformLocations:function(o,l){return{uColor:o.getUniformLocation(l,"uColor")}},sendUniformData:function(o,l){var h=new s.Color(this.color).getSource();h[0]=this.alpha*h[0]/255,h[1]=this.alpha*h[1]/255,h[2]=this.alpha*h[2]/255,h[3]=this.alpha,o.uniform4fv(l.uColor,h)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendImage=f(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var l=this.type+"_"+this.mode,h=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(l)||(o.programCache[l]=this.createProgram(o.context,h)),o.programCache[l]},applyToWebGL:function(o){var l=o.context,h=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(l,h,l.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(o,l){return o.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var o=this.image,l=o._element.width,h=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/l,-o.top/h,1]},applyTo2d:function(o){var l=o.imageData,h=o.filterBackend.resources,p=l.data,m=p.length,g=l.width,v=l.height,_,b,y,w,C,T,E,A,F,G,Y=this.image,Q;h.blendImage||(h.blendImage=s.util.createCanvasElement()),F=h.blendImage,G=F.getContext("2d"),F.width!==g||F.height!==v?(F.width=g,F.height=v):G.clearRect(0,0,g,v),G.setTransform(Y.scaleX,0,0,Y.scaleY,Y.left,Y.top),G.drawImage(Y._element,0,0,g,v),Q=G.getImageData(0,0,g,v).data;for(var q=0;q<m;q+=4)switch(C=p[q],T=p[q+1],E=p[q+2],A=p[q+3],_=Q[q],b=Q[q+1],y=Q[q+2],w=Q[q+3],this.mode){case"multiply":p[q]=C*_/255,p[q+1]=T*b/255,p[q+2]=E*y/255,p[q+3]=A*w/255;break;case"mask":p[q+3]=w;break}},getUniformLocations:function(o,l){return{uTransformMatrix:o.getUniformLocation(l,"uTransformMatrix"),uImage:o.getUniformLocation(l,"uImage")}},sendUniformData:function(o,l){var h=this.calculateMatrix();o.uniform1i(l.uImage,1),o.uniformMatrix3fv(l.uTransformMatrix,!1,h)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(o,l){s.Image.fromObject(o.image,function(h){var p=s.util.object.clone(o);p.image=h,l(new s.Image.filters.BlendImage(p))})}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.pow,f=Math.floor,o=Math.sqrt,l=Math.abs,h=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!_.programCache.hasOwnProperty(y)){var w=this.generateShader(b);_.programCache[y]=this.createProgram(_.context,w)}return _.programCache[y]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),w=new Array(y),C=1;C<=y;C++)w[C-1]=_(C*b);return w},generateShader:function(w){for(var b=new Array(w),y=this.fragmentSourceTOP,w,C=1;C<=w;C++)b[C-1]=C+".0 * uDelta";return y+="uniform float uTaps["+w+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(T,E){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+E+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+E+`];
`,y+="  sum += 2.0 * uTaps["+E+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(b){if(b>=_||b<=-_)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/_;return p(b)/b*p(y)/y}},applyTo2d:function(_){var b=_.imageData,y=this.scaleX,w=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/w;var C=b.width,T=b.height,E=h(C*y),A=h(T*w),F;this.resizeType==="sliceHack"?F=this.sliceByTwo(_,C,T,E,A):this.resizeType==="hermite"?F=this.hermiteFastResize(_,C,T,E,A):this.resizeType==="bilinear"?F=this.bilinearFiltering(_,C,T,E,A):this.resizeType==="lanczos"&&(F=this.lanczosResize(_,C,T,E,A)),_.imageData=F},sliceByTwo:function(_,b,y,w,C){var T=_.imageData,E=.5,A=!1,F=!1,G=b*E,Y=y*E,Q=s.filterBackend.resources,q,N,V=0,ee=0,te=b,k=0;for(Q.sliceByTwo||(Q.sliceByTwo=document.createElement("canvas")),q=Q.sliceByTwo,(q.width<b*1.5||q.height<y)&&(q.width=b*1.5,q.height=y),N=q.getContext("2d"),N.clearRect(0,0,b*1.5,y),N.putImageData(T,0,0),w=f(w),C=f(C);!A||!F;)b=G,y=Y,w<f(G*E)?G=f(G*E):(G=w,A=!0),C<f(Y*E)?Y=f(Y*E):(Y=C,F=!0),N.drawImage(q,V,ee,b,y,te,k,G,Y),V=te,ee=k,k+=Y;return N.getImageData(V,ee,w,C)},lanczosResize:function(_,b,y,w,C){function T(R){var M,K,I,D,z,J,ne,Z,H,se,pe;for(k.x=(R+.5)*Y,P.x=f(k.x),M=0;M<C;M++){for(k.y=(M+.5)*Q,P.y=f(k.y),z=0,J=0,ne=0,Z=0,H=0,K=P.x-V;K<=P.x+V;K++)if(!(K<0||K>=b)){se=f(1e3*l(K-k.x)),te[se]||(te[se]={});for(var U=P.y-ee;U<=P.y+ee;U++)U<0||U>=y||(pe=f(1e3*l(U-k.y)),te[se][pe]||(te[se][pe]=G(o(c(se*q,2)+c(pe*N,2))/1e3)),I=te[se][pe],I>0&&(D=(U*b+K)*4,z+=I,J+=I*E[D],ne+=I*E[D+1],Z+=I*E[D+2],H+=I*E[D+3]))}D=(M*w+R)*4,F[D]=J/z,F[D+1]=ne/z,F[D+2]=Z/z,F[D+3]=H/z}return++R<w?T(R):A}var E=_.imageData.data,A=_.ctx.createImageData(w,C),F=A.data,G=this.lanczosCreate(this.lanczosLobes),Y=this.rcpScaleX,Q=this.rcpScaleY,q=2/this.rcpScaleX,N=2/this.rcpScaleY,V=m(Y*this.lanczosLobes/2),ee=m(Q*this.lanczosLobes/2),te={},k={},P={};return T(0)},bilinearFiltering:function(_,b,y,w,C){var T,E,A,F,G,Y,Q,q,N,V,ee,te,k=0,P,R=this.rcpScaleX,M=this.rcpScaleY,K=4*(b-1),I=_.imageData,D=I.data,z=_.ctx.createImageData(w,C),J=z.data;for(Q=0;Q<C;Q++)for(q=0;q<w;q++)for(G=f(R*q),Y=f(M*Q),N=R*q-G,V=M*Q-Y,P=4*(Y*b+G),ee=0;ee<4;ee++)T=D[P+ee],E=D[P+4+ee],A=D[P+K+ee],F=D[P+K+4+ee],te=T*(1-N)*(1-V)+E*N*(1-V)+A*V*(1-N)+F*N*V,J[k++]=te;return z},hermiteFastResize:function(_,b,y,w,C){for(var T=this.rcpScaleX,E=this.rcpScaleY,A=m(T/2),F=m(E/2),G=_.imageData,Y=G.data,Q=_.ctx.createImageData(w,C),q=Q.data,N=0;N<C;N++)for(var V=0;V<w;V++){for(var ee=(V+N*w)*4,te=0,k=0,P=0,R=0,M=0,K=0,I=0,D=(N+.5)*E,z=f(N*E);z<(N+1)*E;z++)for(var J=l(D-(z+.5))/F,ne=(V+.5)*T,Z=J*J,H=f(V*T);H<(V+1)*T;H++){var se=l(ne-(H+.5))/A,pe=o(Z+se*se);pe>1&&pe<-1||(te=2*pe*pe*pe-3*pe*pe+1,te>0&&(se=4*(H+z*b),I+=te*Y[se+3],P+=te,Y[se+3]<255&&(te=te*Y[se+3]/250),R+=te*Y[se],M+=te*Y[se+1],K+=te*Y[se+2],k+=te))}q[ee]=R/k,q[ee+1]=M/k,q[ee+2]=K/k,q[ee+3]=I/P}return Q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Contrast=f(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var l=o.imageData,h,m,p=l.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(h=0;h<m;h+=4)p[h]=v*(p[h]-128)+128,p[h+1]=v*(p[h+1]-128)+128,p[h+2]=v*(p[h+2]-128)+128}},getUniformLocations:function(o,l){return{uContrast:o.getUniformLocation(l,"uContrast")}},sendUniformData:function(o,l){o.uniform1f(l.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Saturation=f(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var l=o.imageData,h=l.data,p=h.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(h[g],h[g+1],h[g+2]),h[g]+=v!==h[g]?(v-h[g])*m:0,h[g+1]+=v!==h[g+1]?(v-h[g+1])*m:0,h[g+2]+=v!==h[g+2]?(v-h[g+2])*m:0}},getUniformLocations:function(o,l){return{uSaturation:o.getUniformLocation(l,"uSaturation")}},sendUniformData:function(o,l){o.uniform1f(l.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Vibrance=f(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var l=o.imageData,h=l.data,p=h.length,m=-this.vibrance,g,v,_,b;for(g=0;g<p;g+=4)v=Math.max(h[g],h[g+1],h[g+2]),_=(h[g]+h[g+1]+h[g+2])/3,b=Math.abs(v-_)*2/255*m,h[g]+=v!==h[g]?(v-h[g])*b:0,h[g+1]+=v!==h[g+1]?(v-h[g+1])*b:0,h[g+2]+=v!==h[g+2]?(v-h[g+2])*b:0}},getUniformLocations:function(o,l){return{uVibrance:o.getUniformLocation(l,"uVibrance")}},sendUniformData:function(o,l){o.uniform1f(l.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Blur=f(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var l=o.filterBackend.resources,h,p,m=o.imageData.width,g=o.imageData.height;l.blurLayer1||(l.blurLayer1=s.util.createCanvasElement(),l.blurLayer2=s.util.createCanvasElement()),h=l.blurLayer1,p=l.blurLayer2,(h.width!==m||h.height!==g)&&(p.width=h.width=m,p.height=h.height=g);var v=h.getContext("2d"),_=p.getContext("2d"),b=15,y,w,C,T,E=this.blur*.06*.5;for(v.putImageData(o.imageData,0,0),_.clearRect(0,0,m,g),T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=E*w*m+y,_.globalAlpha=1-Math.abs(w),_.drawImage(h,C,y),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=E*w*g+y,_.globalAlpha=1-Math.abs(w),_.drawImage(h,y,C),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);o.ctx.drawImage(h,0,0);var A=o.ctx.getImageData(0,0,h.width,h.height);return v.globalAlpha=1,v.clearRect(0,0,h.width,h.height),A},getUniformLocations:function(o,l){return{delta:o.getUniformLocation(l,"uDelta")}},sendUniformData:function(o,l){var h=this.chooseRightDelta();o.uniform2fv(l.delta,h)},chooseRightDelta:function(){var o=1,l=[0,0],h;return this.horizontal?this.aspectRatio>1&&(o=1/this.aspectRatio):this.aspectRatio<1&&(o=this.aspectRatio),h=o*this.blur*.12,this.horizontal?l[0]=h:l[1]=h,l}}),c.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Gamma=f(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var l=o.imageData,h=l.data,p=this.gamma,m=h.length,g=1/p[0],v=1/p[1],_=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,_)*255;for(b=0,m=h.length;b<m;b+=4)h[b]=this.rVals[h[b]],h[b+1]=this.gVals[h[b+1]],h[b+2]=this.bVals[h[b+2]]},getUniformLocations:function(o,l){return{uGamma:o.getUniformLocation(l,"uGamma")}},sendUniformData:function(o,l){o.uniform3fv(l.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Composed=f(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(o)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(o,l){var h=o.subFilters||[],p=h.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return l&&l(m),m}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.HueRotation=f(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,l=s.util.cos(o),h=s.util.sin(o),p=1/3,m=Math.sqrt(p)*h,g=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=l+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=l+p*g},isNeutralState:function(o){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,o)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,l){this.styles=l?l.styles||{}:{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=s.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var o,l,h,p,m,g,v,_=0,b=this._textLines.length;_<b;_++)if(!(this.textAlign!=="justify"&&(_===b-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],l=this.getLineWidth(_),l<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){h=v.length,o=(this.width-l)/h;for(var y=0,w=m.length;y<=w;y++)g=this.__charBounds[_][y],this._reSpaceAndTab.test(m[y])?(g.width+=o,g.kernedWidth+=o,g.left+=p,p+=o):g.left+=p}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return o.width+=l*o.zoomX,o.height+=l*o.zoomY,o},_render:function(o){var l=this.path;l&&!l.isNotVisible()&&l._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,l,h){if(o.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom";break}o.font=this._getFontDeclaration(l,h)},calcTextWidth:function(){for(var o=this.getLineWidth(0),l=1,h=this._textLines.length;l<h;l++){var p=this.getLineWidth(l);p>o&&(o=p)}return o},_renderTextLine:function(o,l,h,p,m,g){this._renderChars(o,l,h,p,m,g)},_renderTextLinesBackground:function(o){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,h,p=o.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),b=0,y=0,w,C,T=this.path,E,A=0,F=this._textLines.length;A<F;A++){if(l=this.getHeightOfLine(A),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",A)){_+=l;continue}m=this._textLines[A],h=this._getLineLeftOffset(A),y=0,b=0,g=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var G=0,Y=m.length;G<Y;G++)w=this.__charBounds[A][G],C=this.getValueOfPropertyAt(A,G,"textBackgroundColor"),T?(o.save(),o.translate(w.renderLeft,w.renderTop),o.rotate(w.angle),o.fillStyle=C,C&&o.fillRect(-w.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),w.width,l/this.lineHeight),o.restore()):C!==g?(E=v+h+b,this.direction==="rtl"&&(E=this.width-E-y),o.fillStyle=g,g&&o.fillRect(E,_,y,l/this.lineHeight),b=w.left,y=w.width,g=C):y+=w.kernedWidth;C&&!T&&(E=v+h+b,this.direction==="rtl"&&(E=this.width-E-y),o.fillStyle=C,o.fillRect(E,_,y,l/this.lineHeight)),_+=l}o.fillStyle=p,this._removeShadow(o)}},getFontCache:function(o){var l=o.fontFamily.toLowerCase();s.charWidthsCache[l]||(s.charWidthsCache[l]={});var h=s.charWidthsCache[l],p=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return h[p]||(h[p]={}),h[p]},_measureChar:function(o,l,h,p){var m=this.getFontCache(l),g=this._getFontDeclaration(l),v=this._getFontDeclaration(p),_=h+o,b=g===v,y,w,C,T=l.fontSize/this.CACHE_FONT_SIZE,E;if(h&&m[h]!==void 0&&(C=m[h]),m[o]!==void 0&&(E=y=m[o]),b&&m[_]!==void 0&&(w=m[_],E=w-C),y===void 0||C===void 0||w===void 0){var A=this.getMeasuringContext();this._setTextStyles(A,l,!0)}return y===void 0&&(E=y=A.measureText(o).width,m[o]=y),C===void 0&&b&&h&&(C=A.measureText(h).width,m[h]=C),b&&w===void 0&&(w=A.measureText(_).width,m[_]=w,E=w-C),{width:y*T,kernedWidth:E*T}},getHeightOfChar:function(o,l){return this.getValueOfPropertyAt(o,l,"fontSize")},measureLine:function(o){var l=this._measureLine(o);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(o){var l=0,h,p,m=this._textLines[o],g,v,_=0,b=new Array(m.length),y=0,w,C,T=this.path,E=this.pathSide==="right";for(this.__charBounds[o]=b,h=0;h<m.length;h++)p=m[h],v=this._getGraphemeBox(p,o,h,g),b[h]=v,l+=v.kernedWidth,g=p;if(b[h]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(C=T.segmentsInfo[T.segmentsInfo.length-1].length,w=s.util.getPointOnPath(T.path,0,T.segmentsInfo),w.x+=T.pathOffset.x,w.y+=T.pathOffset.y,this.textAlign){case"left":y=E?C-l:0;break;case"center":y=(C-l)/2;break;case"right":y=E?0:C-l;break}for(y+=this.pathStartOffset*(E?-1:1),h=E?m.length-1:0;E?h>=0:h<m.length;E?h--:h++)v=b[h],y>C?y%=C:y<0&&(y+=C),this._setGraphemeOnPath(y,v,w),y+=v.kernedWidth}return{width:l,numOfSpaces:_}},_setGraphemeOnPath:function(o,l,h){var p=o+l.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);l.renderLeft=g.x-h.x,l.renderTop=g.y-h.y,l.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,l,h,p,m){var g=this.getCompleteStyleDeclaration(l,h),v=p?this.getCompleteStyleDeclaration(l,h-1):{},_=this._measureChar(o,g,p,v),b=_.kernedWidth,y=_.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),y+=w,b+=w);var C={width:y,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(h>0&&!m){var T=this.__charBounds[l][h-1];C.left=T.left+T.width+_.kernedWidth-_.width}return C},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var l=this._textLines[o],h=this.getHeightOfChar(o,0),p=1,m=l.length;p<m;p++)h=Math.max(this.getHeightOfChar(o,p),h);return this.__lineHeights[o]=h*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,l=0,h=0,p=this._textLines.length;h<p;h++)o=this.getHeightOfLine(h),l+=h===p-1?o/this.lineHeight:o;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,l){o.save();for(var h=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),b=_/this.lineHeight,y=this._getLineLeftOffset(g);this._renderTextLine(l,o,this._textLines[g],p+y,m+h+b,g),h+=_}o.restore()},_renderTextFill:function(o){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,l,h,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,b,y,w="",C,T=0,E,A=this.path,F=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!A,G=this.direction==="ltr",Y=this.direction==="ltr"?1:-1,Q,q=l.canvas.getAttribute("dir");if(l.save(),q!==this.direction&&(l.canvas.setAttribute("dir",G?"ltr":"rtl"),l.direction=G?"ltr":"rtl",l.textAlign=G?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,F){this._renderChar(o,l,g,0,h.join(""),p,m,v),l.restore();return}for(var N=0,V=h.length-1;N<=V;N++)E=N===V||this.charSpacing||A,w+=h[N],C=this.__charBounds[g][N],T===0?(p+=Y*(C.kernedWidth-C.width),T+=C.width):T+=C.kernedWidth,_&&!E&&this._reSpaceAndTab.test(h[N])&&(E=!0),E||(b=b||this.getCompleteStyleDeclaration(g,N),y=this.getCompleteStyleDeclaration(g,N+1),E=s.util.hasStyleChanged(b,y,!1)),E&&(A?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),this._renderChar(o,l,g,N,w,-T/2,0,v),l.restore()):(Q=p,this._renderChar(o,l,g,N,w,Q,m,v)),w="",b=y,p+=Y*T,T=0);l.restore()},_applyPatternGradientTransformText:function(o){var l=s.util.createCanvasElement(),h,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return l.width=p,l.height=m,h=l.getContext("2d"),h.beginPath(),h.moveTo(0,0),h.lineTo(p,0),h.lineTo(p,m),h.lineTo(0,m),h.closePath(),h.translate(p/2,m/2),h.fillStyle=o.toLive(h),this._applyPatternGradientTransform(h,o),h.fill(),h.createPattern(l,"no-repeat")},handleFiller:function(o,l,h){var p,m;return h.toLive?h.gradientUnits==="percentage"||h.gradientTransform||h.patternTransform?(p=-this.width/2,m=-this.height/2,o.translate(p,m),o[l]=this._applyPatternGradientTransformText(h),{offsetX:p,offsetY:m}):(o[l]=h.toLive(o,this),this._applyPatternGradientTransform(o,h)):(o[l]=h,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,l){return o.lineWidth=l.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",l.stroke)},_setFillStyles:function(o,l){return this.handleFiller(o,"fillStyle",l.fill)},_renderChar:function(o,l,h,p,m,g,v){var _=this._getStyleDeclaration(h,p),b=this.getCompleteStyleDeclaration(h,p),y=o==="fillText"&&b.fill,w=o==="strokeText"&&b.stroke&&b.strokeWidth,C,T;!w&&!y||(l.save(),y&&(C=this._setFillStyles(l,b)),w&&(T=this._setStrokeStyles(l,b)),l.font=this._getFontDeclaration(b),_&&_.textBackgroundColor&&this._removeShadow(l),_&&_.deltaY&&(v+=_.deltaY),y&&l.fillText(m,g-C.offsetX,v-C.offsetY),w&&l.strokeText(m,g-T.offsetX,v-T.offsetY),l.restore())},setSuperscript:function(o,l){return this._setScript(o,l,this.superscript)},setSubscript:function(o,l){return this._setScript(o,l,this.subscript)},_setScript:function(o,l,h){var p=this.get2DCursorLocation(o,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*h.size,deltaY:g+m*h.baseline};return this.setSelectionStyles(v,o,l),this},_getLineLeftOffset:function(o){var l=this.getLineWidth(o),h=this.width-l,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(o);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=h/2),p==="right"&&(g=h),p==="justify-center"&&(g=h/2),p==="justify-right"&&(g=h),m==="rtl"&&(g-=h),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var l=this.measureLine(o),h=l.width;return this.__lineWidths[o]=h,h},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,l,h){var p=this._getStyleDeclaration(o,l);return p&&typeof p[h]<"u"?p[h]:this[h]},_renderTextDecoration:function(o,l){if(!(!this[l]&&!this.styleHas(l))){for(var h,p,m,g,v,_,b,y,w=this._getLeftOffset(),C=this._getTopOffset(),T,E,A,F,G,Y,Q,q,N=this.path,V=this._getWidthOfCharSpacing(),ee=this.offsets[l],te=0,k=this._textLines.length;te<k;te++){if(h=this.getHeightOfLine(te),!this[l]&&!this.styleHas(l,te)){C+=h;continue}b=this._textLines[te],Y=h/this.lineHeight,g=this._getLineLeftOffset(te),E=0,A=0,y=this.getValueOfPropertyAt(te,0,l),q=this.getValueOfPropertyAt(te,0,"fill"),T=C+Y*(1-this._fontSizeFraction),p=this.getHeightOfChar(te,0),v=this.getValueOfPropertyAt(te,0,"deltaY");for(var P=0,R=b.length;P<R;P++)if(F=this.__charBounds[te][P],G=this.getValueOfPropertyAt(te,P,l),Q=this.getValueOfPropertyAt(te,P,"fill"),m=this.getHeightOfChar(te,P),_=this.getValueOfPropertyAt(te,P,"deltaY"),N&&G&&Q)o.save(),o.fillStyle=q,o.translate(F.renderLeft,F.renderTop),o.rotate(F.angle),o.fillRect(-F.kernedWidth/2,ee*m+_,F.kernedWidth,this.fontSize/15),o.restore();else if((G!==y||Q!==q||m!==p||_!==v)&&A>0){var M=w+g+E;this.direction==="rtl"&&(M=this.width-M-A),y&&q&&(o.fillStyle=q,o.fillRect(M,T+ee*p+v,A,this.fontSize/15)),E=F.left,A=F.width,y=G,q=Q,p=m,v=_}else A+=F.kernedWidth;var M=w+g+E;this.direction==="rtl"&&(M=this.width-M-A),o.fillStyle=Q,G&&Q&&o.fillRect(M,T+ee*p+v,A-V,this.fontSize/15),C+=h}this._removeShadow(o)}},_getFontDeclaration:function(o,l){var h=o||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?h.fontFamily:'"'+h.fontFamily+'"';return[s.isLikelyNode?h.fontWeight:h.fontStyle,s.isLikelyNode?h.fontStyle:h.fontWeight,l?this.CACHE_FONT_SIZE+"px":h.fontSize+"px",g].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var l=o.split(this._reNewline),h=new Array(l.length),p=[`
`],m=[],g=0;g<l.length;g++)h[g]=s.util.string.graphemeSplit(l[g]),m=m.concat(h[g],p);return m.pop(),{_unwrappedLines:h,lines:l,graphemeText:m,graphemeLines:h}},toObject:function(o){var l=f.concat(o),h=this.callSuper("toObject",l);return h.styles=s.util.stylesToArray(this.styles,this.text),h.path&&(h.path=this.path.toObject()),h},set:function(o,l){this.callSuper("set",o,l);var h=!1,p=!1;if(typeof o=="object")for(var m in o)m==="path"&&this.setPathInfo(),h=h||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else h=this._dimensionAffectingProps.indexOf(o)!==-1,p=o==="path";return p&&this.setPathInfo(),h&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(o,l,h){if(!o)return l(null);var p=s.parseAttributes(o,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(h=s.util.object.extend(h?c(h):{},p),h.top=h.top||0,h.left=h.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(h.underline=!0),g.indexOf("overline")!==-1&&(h.overline=!0),g.indexOf("line-through")!==-1&&(h.linethrough=!0),delete h.textDecoration}"dx"in p&&(h.left+=p.dx),"dy"in p&&(h.top+=p.dy),"fontSize"in h||(h.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in o?v=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(v=o.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=h.strokeWidth;h.strokeWidth=0;var b=new s.Text(v,h),y=b.getScaledHeight()/b.height,w=(b.height+b.strokeWidth)*b.lineHeight-b.height,C=w*y,T=b.getScaledHeight()+C,E=0;m==="center"&&(E=b.getScaledWidth()/2),m==="right"&&(E=b.getScaledWidth()),b.set({left:b.left-E,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof _<"u"?_:1}),l(b)},s.Text.fromObject=function(o,l){var h=c(o),p=o.path;return delete h.path,s.Object._fromObject("Text",h,function(m){m.styles=s.util.stylesFromArray(o.styles,o.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),l(m)},"path"):l(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in s)for(var f in s[c])for(var o in s[c][f])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var c=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in c)for(var o in c[f])if(typeof c[f][o][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,c=0,f,o,l=!0,h=0,p;for(var m in s){f=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);c++,v?(o?p[a]!==o&&(l=!1):o=p[a],p[a]===this[a]&&delete p[a]):l=!1,Object.keys(p).length!==0?f++:delete s[m][g]}f===0&&delete s[m]}for(var _=0;_<this._textLines.length;_++)h+=this._textLines[_].length;l&&c===h&&(this[a]=o,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,c,f,o;for(f in s){c=s[f];for(o in c)delete c[o][a],Object.keys(c[o]).length===0&&delete c[o];Object.keys(c).length===0&&delete s[f]}}},_extendStyles:function(a,s){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var c=s?this._unwrappedTextLines:this._textLines,f=c.length,o=0;o<f;o++){if(a<=c[o].length)return{lineIndex:o,charIndex:a};a-=c[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:c[o-1].length<a?c[o-1].length:a}},getSelectionStyles:function(a,s,c){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var f=[],o=a;o<s;o++)f.push(this.getStyleAtPosition(o,c));return f},getStyleAtPosition:function(a,s){var c=this.get2DCursorLocation(a),f=s?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return f||{}},setSelectionStyles:function(a,s,c){typeof s>"u"&&(s=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||s);for(var f=s;f<c;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var c=this.styles&&this.styles[a];return c?c[s]:null},getCompleteStyleDeclaration:function(a,s){for(var c=this._getStyleDeclaration(a,s)||{},f={},o,l=0;l<this._styleProperties.length;l++)o=this._styleProperties[l],f[o]=typeof c[o]>"u"?this[o]:c[o];return f},_setStyleDeclaration:function(a,s,c){this.styles[a][s]=c},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,c){this.callSuper("initialize",s,c),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,c){this[s]!==c&&(this._fireSelectionChanged(),this[s]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,f=this.canvas.viewportTransform;c.save(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(c),this._clearTextArea(c),s||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,c):this.renderSelection(s,c),c.restore()}},_clearTextArea:function(s){var c=this.width+4,f=this.height+4;s.clearRect(-c/2,-f/2,c,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var c=this._getLeftOffset(),f=this._getTopOffset(),o=this._getCursorBoundariesOffsets(s);return{left:c,top:f,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,f,o,l=0,h=0,p,m=this.get2DCursorLocation(s);o=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)l+=this.getHeightOfLine(g);c=this._getLineLeftOffset(f);var v=this.__charBounds[f][o];return v&&(h=v.left),this.charSpacing!==0&&o===this._textLines[f].length&&(h-=this._getWidthOfCharSpacing()),p={top:l,left:c+(h>0?h:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,c){var f=this.get2DCursorLocation(),o=f.lineIndex,l=f.charIndex>0?f.charIndex-1:0,h=this.getValueOfPropertyAt(o,l,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(o,l,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-h*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,h)},renderSelection:function(s,c){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,h=this.get2DCursorLocation(f),p=this.get2DCursorLocation(o),m=h.lineIndex,g=p.lineIndex,v=h.charIndex<0?0:h.charIndex,_=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var y=this._getLineLeftOffset(b)||0,w=this.getHeightOfLine(b),C=0,T=0,E=0;if(b===m&&(T=this.__charBounds[m][v].left),b>=m&&b<g)E=l&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(_===0)E=this.__charBounds[g][_].left;else{var A=this._getWidthOfCharSpacing();E=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-A}C=w,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(w/=this.lineHeight);var F=s.left+y+T,G=E-T,Y=w,Q=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",Y=1,Q=w):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(F=this.width-F-G),c.fillRect(F,s.top+s.topOffset+Q,G,Y),s.topOffset+=C}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),c=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c}}}),e.IText.fromObject=function(s,c){var f=e.util.stylesFromArray(s.styles,s.text),o=Object.assign({},s,{styles:f});if(a(o),o.styles)for(var l in o.styles)for(var h in o.styles[l])a(o.styles[l][h]);e.Object._fromObject("IText",o,c,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var c=s.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,s._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var c=s.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,s),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,s._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,c,f,o){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",c,{duration:f,onComplete:function(){l.isAborted||s[o]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var c=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var c=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f--;for(;/\S/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findWordBoundaryRight:function(s){var c=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},findLineBoundaryLeft:function(s){for(var c=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findLineBoundaryRight:function(s){for(var c=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},searchWordBoundary:function(s,c){for(var f=this._text,o=this._reSpace.test(f[s])?s-1:s,l=f[o],h=e.reNonWord;!h.test(l)&&o>0&&o<f.length;)o+=c,l=f[o];return h.test(l)&&(o+=c===1?0:1),o},selectWord:function(s){s=s||this.selectionStart;var c=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var c=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,o=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||f===o)&&(f===c||o===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,c,f){var o=f.slice(0,s),l=e.util.string.graphemeSplit(o).length;if(s===c)return{selectionStart:l,selectionEnd:l};var h=f.slice(s,c),p=e.util.string.graphemeSplit(h).length;return{selectionStart:l,selectionEnd:l+p}},fromGraphemeToStringSelection:function(s,c,f){var o=f.slice(0,s),l=o.join("").length;if(s===c)return{selectionStart:l,selectionEnd:l};var h=f.slice(s,c),p=h.join("").length;return{selectionStart:l,selectionEnd:l+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),o=f.lineIndex,l=f.charIndex,h=this.getValueOfPropertyAt(o,l,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+h},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/v,y=_.height/v,w=b-h,C=y-h,T=_.clientWidth/b,E=_.clientHeight/y;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=T,g.y*=E,g.x<0&&(g.x=0),g.x>w&&(g.x=w),g.y<0&&(g.y=0),g.y>C&&(g.y=C),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:h+"px",charHeight:h}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,c){var f=this.get2DCursorLocation(s,!0),o=this.get2DCursorLocation(c,!0),l=f.lineIndex,h=f.charIndex,p=o.lineIndex,m=o.charIndex,g,v;if(l!==p){if(this.styles[l])for(g=h;g<this._unwrappedTextLines[l].length;g++)delete this.styles[l][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[l]||(this.styles[l]={}),this.styles[l][h+g-m]=v);for(g=l+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,l-p)}else if(this.styles[l]){v=this.styles[l];var _=m-h,b,y;for(g=h;g<m;g++)delete v[g];for(y in this.styles[l])b=parseInt(y,10),b>=m&&(v[b-_]=v[y],delete v[y])}},shiftLineStyles:function(s,c){var f=a(this.styles);for(var o in this.styles){var l=parseInt(o,10);l>s&&(this.styles[l+c]=f[l],f[l-c]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,c,f,o){var l,h={},p=!1,m=this._unwrappedTextLines[s].length===c;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(l=this.styles[s][c===0?c:c-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=c&&(p=!0,h[v-c]=this.styles[s][g],m&&c===0||delete this.styles[s][g])}var _=!1;for(p&&!m&&(this.styles[s+f]=h,_=!0),_&&f--;f>0;)o&&o[f-1]?this.styles[s+f]={0:a(o[f-1])}:l?this.styles[s+f]={0:a(l)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,c,f,o){this.styles||(this.styles={});var l=this.styles[s],h=l?a(l):{};f||(f=1);for(var p in h){var m=parseInt(p,10);m>=c&&(l[m+f]=h[m],h[m-f]||delete l[m])}if(this._forceClearCache=!0,o){for(;f--;)Object.keys(o[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][c+f]=a(o[f]));return}if(l)for(var g=l[c?c-1:1];g&&f--;)this.styles[s][c+f]=a(g)},insertNewStyleBlock:function(s,c,f){for(var o=this.get2DCursorLocation(c,!0),l=[0],h=0,p=0;p<s.length;p++)s[p]===`
`?(h++,l[h]=0):l[h]++;l[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,l[0],f),f=f&&f.slice(l[0]+1)),h&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+l[0],h);for(var p=1;p<h;p++)l[p]>0?this.insertCharStyleObject(o.lineIndex+p,0,l[p],f):f&&this.styles[o.lineIndex+p]&&f[0]&&(this.styles[o.lineIndex+p][0]=f[0]),f=f&&f.slice(l[p]+1);l[p]>0&&this.insertCharStyleObject(o.lineIndex+p,0,l[p],f)},setSelectionStartEndWithShift:function(s,c,f){f<=s?(c===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<c?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(c===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),c=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),c=0,f=0,o=0,l=0,h=0,p,m,g=0,v=this._textLines.length;g<v&&o<=s.y;g++)o+=this.getHeightOfLine(g)*this.scaleY,h=g,g>0&&(l+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(h),f=p*this.scaleX,m=this._textLines[h],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var _=0,b=m.length;_<b&&(c=f,f+=this.__charBounds[h][_].kernedWidth*this.scaleX,f<=s.x);_++)l++;return this._getNewSelectionStartFromOffset(s,c,f,l,b)},_getNewSelectionStartFromOffset:function(a,s,c,f,o){var l=a.x-s,h=c-a.x,p=h>l||h<0?0:1,m=f+p;return this.flipX&&(m=o-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,o=c.length,l,h,p=o-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=m>w.selectionStart;v?(l=this._text.slice(m,g),p+=g-m):o<f&&(C?l=this._text.slice(g+p,g):l=this._text.slice(m,m-p)),h=c.slice(w.selectionEnd-p,w.selectionEnd),l&&l.length&&(h.length&&(_=this.getSelectionStyles(m,m+1,!1),_=h.map(function(){return _[0]})),v?(b=m,y=g):C?(b=g-l.length,y=g):(b=g,y=g+l.length),this.removeStyleFromTo(b,y)),h.length&&(s&&h.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(_=e.copiedTextStyle),this.insertNewStyleBlock(h,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,s){var c=this._getLineLeftOffset(a),f;return s>0&&(f=this.__charBounds[a][s-1],c+=f.left+f.width),c},getDownCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),o=f.lineIndex;if(o===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var l=f.charIndex,h=this._getWidthBeforeCursor(o,l),p=this._getIndexOnLine(o+1,h),m=this._textLines[o].slice(l);return m.length+p+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),o=f.lineIndex;if(o===0||a.metaKey||a.keyCode===33)return-c;var l=f.charIndex,h=this._getWidthBeforeCursor(o,l),p=this._getIndexOnLine(o-1,h),m=this._textLines[o].slice(0,l),g=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var c=this._textLines[a],f=this._getLineLeftOffset(a),o=f,l=0,h,p,m=0,g=c.length;m<g;m++)if(h=this.__charBounds[a][m].width,o+=h,o>s){p=!0;var v=o-h,_=o,b=Math.abs(v-s),y=Math.abs(_-s);l=y<b?m:m-1;break}return p||(l=c.length-1),l},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var c="get"+a+"CursorOffset",f=this[c](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,c){var f;if(a.altKey)f=this["findWordBoundary"+c](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+c](this[s]);else return this[s]+=c==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?c+="Shift":c+="outShift",this[c](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,c,f){typeof f>"u"&&(f=c),f>c&&this.removeStyleFromTo(c,f);var o=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(o,c,s),this._text=[].concat(this._text.slice(0,c),o,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var f=!0,o=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",o?'text-decoration="'+o+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,f){var o=[],l=[],h=c,p;this._setSVGBg(l);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(l,m,f+p,h),this._setSVGTextLineText(o,m,f+p,h),h+=this.getHeightOfLine(m);return{textSpans:o,textBgRects:l}},_createTextCharSpan:function(c,f,o,l){var h=c!==c.trim()||c.match(s),p=this.getSvgSpanStyles(f,h),m=p?'style="'+p+'"':"",g=f.deltaY,v="",_=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(o,_),'" y="',a(l,_),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,f,o,l){var h=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,b,y=0,w=this._textLines[f],C;l+=h*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,E=w.length-1;T<=E;T++)C=T===E||this.charSpacing,v+=w[T],_=this.__charBounds[f][T],y===0?(o+=_.kernedWidth-_.width,y+=_.width):y+=_.kernedWidth,p&&!C&&this._reSpaceAndTab.test(w[T])&&(C=!0),C||(m=m||this.getCompleteStyleDeclaration(f,T),g=this.getCompleteStyleDeclaration(f,T+1),C=e.util.hasStyleChanged(m,g,!0)),C&&(b=this._getStyleDeclaration(f,T)||{},c.push(this._createTextCharSpan(v,b,o,l)),v="",m=g,o+=y,y=0)},_pushTextBgRect:function(c,f,o,l,h,p){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(f),' x="',a(o,m),'" y="',a(l,m),'" width="',a(h,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,f,o,l){for(var h=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,_,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),y=0,w=h.length;y<w;y++)v=this.__charBounds[f][y],_=this.getValueOfPropertyAt(f,y,"textBackgroundColor"),_!==b?(b&&this._pushTextBgRect(c,b,o+g,l,m,p),g=v.left,m=v.width,b=_):m+=v.kernedWidth;_&&this._pushTextBgRect(c,_,o+g,l,m,p)},_getFillAttributes:function(c){var f=c&&typeof c=="string"?new e.Color(c):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+c+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var f=0,o=0,l=0;l<c;l++)f+=this.getHeightOfLine(l);return o=this.getHeightOfLine(l),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*o/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var f=e.Object.prototype.getSvgStyles.call(this,c);return f+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var f=0,o=0,l=0,h={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[l]===`
`&&p>0?(o=0,l++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[l])&&p>0&&(o++,l++),h[p]={line:f,offset:o},l+=c.graphemeLines[p].length,o+=c.graphemeLines[p].length;return h},styleHas:function(c,f){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[f];o&&(f=o.line)}return s.Text.prototype.styleHas.call(this,c,f)},isEmptyStyles:function(c){if(!this.styles)return!0;var f=0,o=c+1,l,h,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,f=m.offset),g&&(o=g.line,p=o===c,l=g.offset),h=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in h)for(var _ in h[v])if(_>=f&&(!p||_<l))for(var b in h[v][_])return!1;return!0},_getStyleDeclaration:function(c,f){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[c];if(!o)return null;c=o.line,f=o.offset+f}return this.callSuper("_getStyleDeclaration",c,f)},_setStyleDeclaration:function(c,f,o){var l=this._styleMap[c];c=l.line,f=l.offset+f,this.styles[c][f]=o},_deleteStyleDeclaration:function(c,f){var o=this._styleMap[c];c=o.line,f=o.offset+f,delete this.styles[c][f]},_getLineStyle:function(c){var f=this._styleMap[c];return!!this.styles[f.line]},_setLineStyle:function(c){var f=this._styleMap[c];this.styles[f.line]={}},_wrapText:function(c,f){var o=[],l;for(this.isWrapping=!0,l=0;l<c.length;l++)o=o.concat(this._wrapLine(c[l],l,f));return this.isWrapping=!1,o},_measureWord:function(c,f,o){var l=0,h,p=!0;o=o||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],f,m+o,h,p);l+=v.kernedWidth,h=c[m]}return l},_wrapLine:function(c,f,o,F){var h=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(c):c.split(this._wordJoiners),_="",b=0,y=p?"":" ",w=0,C=0,T=0,E=!0,A=this._getWidthOfCharSpacing(),F=F||0;v.length===0&&v.push([]),o-=F;for(var G=0;G<v.length;G++)_=p?v[G]:s.util.string.graphemeSplit(v[G]),w=this._measureWord(_,f,b),b+=_.length,h+=C+w-A,h>o&&!E?(m.push(g),g=[],h=w,E=!0):h+=A,!E&&!p&&g.push(y),g=g.concat(_),C=p?0:this._measureWord([y],f,b),b++,E=!1,w>T&&(T=w);return G&&m.push(g),T+F>this.dynamicMinWidth&&(this.dynamicMinWidth=T-A+F),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var f=s.Text.prototype._splitTextIntoLines.call(this,c),o=this._wrapText(f.lines,this.width),l=new Array(o.length),h=0;h<o.length;h++)l[h]=o[h].join("");return f.lines=l,f.graphemeLines=o,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var f in this._styleMap)this._textLines[f]&&(c[this._styleMap[f].line]=1);for(var f in this.styles)c[f]||delete this.styles[f]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),s.Textbox.fromObject=function(c,f){var o=s.util.stylesFromArray(c.styles,c.text),l=Object.assign({},c,{styles:o});return s.Object._fromObject("Textbox",l,f,"text")}}(t),function(){var a=e.controlsUtils,s=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,f=a.scalingEqually,o=a.scalingYOrSkewingX,l=a.scalingXOrSkewingY,h=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:h}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:h}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:o,getActionName:h}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:o,getActionName:h}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(et);const tr=[];function Er(t,e){return{subscribe:dt(t,e).subscribe}}function dt(t,e=ve){let i;const n=new Set;function r(a){if(Ue(t,a)&&(t=a,i)){const s=!tr.length;for(const c of n)c[1](),tr.push(c,t);if(s){for(let c=0;c<tr.length;c+=2)tr[c][0](tr[c+1]);tr.length=0}}}function u(a){r(a(t))}function d(a,s=ve){const c=[a,s];return n.add(c),n.size===1&&(i=e(r,u)||ve),a(t),()=>{n.delete(c),n.size===0&&i&&(i(),i=null)}}return{set:r,update:u,subscribe:d}}function Qy(t,e,i){const n=!Array.isArray(t),r=n?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=e.length<2;return Er(i,(d,a)=>{let s=!1;const c=[];let f=0,o=ve;const l=()=>{if(f)return;o();const p=e(n?c[0]:c,d,a);u?d(p):o=di(p)?p:ve},h=r.map((p,m)=>iu(p,g=>{c[m]=g,f&=~(1<<m),s&&l()},()=>{f|=1<<m}));return s=!0,l(),function(){Be(h),o(),s=!1}})}let No,jo,In=dt(null),eb=dt({left:0,top:0});const pf=10;let me,nc,Lm,ys,bs,rc=!1,En=null,Yi=!1,ou=null;const tb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/><path d="M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',hr=["objType","successPosition","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","compositeId","imageIndex","printWidth","printHeight","extension","charSpacing","convert","thumbnail","uuid","localFamily","url","printIgnore","printIndex","targetFrame","vector","userEvent","evented","patternSourceCanvas","pattern","patternPadding","patternOffset","patternWidth"],ib=["print","guide","snapW","snapH","frame","guideText"];let Nm=dt([]);function nb(t,e,i,n){En=n,nc=document.getElementById(t).parentElement,No=e,jo=i,me=new et.fabric.Canvas(t,{width:e,height:i,selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0,isDrawingMode:Yi,preserveObjectStacking:!0}),et.fabric.Object.prototype._renderControl=function(d,a,s,c,f){d.actionName==="rotate"?bb(a,c,f,tb):d.render(a,c,f)},et.fabric.Object.prototype.cornerStyle="circle",et.fabric.Object.prototype.cornerColor="#2EF2E8",et.fabric.Object.prototype.borderColor="#0075ff",et.fabric.Object.prototype.cornerStrokeColor="#0075ff";const r={mtr:!0,ml:!1,mr:!1,mb:!1,mt:!1,tl:!0,tr:!0,bl:!0,br:!0},u={mtr:!0,ml:!0,mr:!0,mb:!0,mt:!0,tl:!0,tr:!0,bl:!0,br:!0};et.fabric.Image.prototype.setControlsVisibility(r),et.fabric.Path.prototype.setControlsVisibility(r),et.fabric.Text.prototype.setControlsVisibility(r),et.fabric.Rect.prototype.setControlsVisibility(u),et.fabric.Ellipse.prototype.setControlsVisibility(u),et.fabric.Triangle.prototype.setControlsVisibility(u),et.fabric.Object.prototype.cornerSize=20,et.fabric.Object.prototype.transparentCorners=!1,me.on("object:modified",d=>{na(),En(me.toJSON(hr)),d.target.type==="pen"||d.target.type}),me.on("object:added",()=>{na(),rc||En(me.toJSON(hr))}),me.on("selection:created",d=>{In.set(d.selected),En(me.toJSON(hr))}),me.on("selection:updated",async d=>{In.set(null),await setTimeout(()=>{En(me.toJSON(hr))},0),In.set(d.selected)}),me.on("selection:cleared",()=>{In.set(null),En(me.toJSON(hr))}),me.on("mouse:down",d=>{Yi&&wb(d.e.clientX,d.e.clientY),gf()}),me.on("mouse:move",d=>{Yi&&Cb(d.e.clientX,d.e.clientY),gf()}),me.on("mouse:up",()=>{Yi&&Sb()}),me.on("object:moving",function(d){const a=d.target,s=me.getZoom(),c=a.left,f=a.top;if(typeof ys<"u"&&typeof bs<"u"){let o=a.left,l=a.top;Math.abs(c-ys)<pf/s&&(o=ys),Math.abs(f-bs)<pf/s&&(l=bs),a.set({left:o,top:l})}me.renderAll()}),me.on("after:render",xb),_f(),window.addEventListener("resize",_f,!1)}function gf(){const t=me.getZoom(),e=me.getActiveObject();if(!e)return;const i=me.getElement().getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top,u=e.oCoords.mb;if(u){const d=(n+u.x)*t;eb.set({left:n+d,top:r})}else console.warn("Bottom-center controller not found")}function na(){Nm.update(t=>{const e=me.getObjects().map((i,n)=>{const r=i;return r.id=`layer_${n}`,r});return console.log({layerObjects:e}),e.filter(i=>!ib.includes(i.objType))})}function rb(t){t.forEach(e=>{const i=me.getObjects().find(n=>n.id===e.id);i&&i.bringToFront()}),na(),me.renderAll()}function sb(t){rc=!0,me.loadFromJSON(t,()=>{rc=!1,me.renderAll.bind(me),En(me.toJSON(hr))},(e,i)=>{const n={selectable:!1,evented:!1};i.objType==="snapW"&&(ys=i.left,i.set(n),i.printIgnore=!0),i.objType==="snapH"&&(bs=i.top,i.set(n),i.printIgnore=!0),i.objType==="print"&&(et.fabric.util.enlivenObjects([e],function(r){r[0].set({absolutePositioned:!0,stroke:"#FFFFFF",strokeWidth:0}),r[0].fill,Lm=r[0]}),i.set(n)),i.objType,i.objType==="guide"&&i.set(n),i.objType==="pattern"&&changePattern(i),me.discardActiveObject().renderAll()})}function mf(t,e={}){const{extension:i}=e.origin?e.origin:e.convert;if(i==="svg"){ob(t,e);return}et.fabric.Image.fromURL(t,n=>{const r=me.getWidth(),u=me.getHeight(),d=me.getZoom(),a=n.width,s=n.height;let c=1;(a>r||s>u)&&(c=Math.min(r/a,u/s));const f={left:r/d/2,top:u/d/2,originX:"center",originY:"center",scaleX:c,scaleY:c,...e};n.set({...f}),jm(n),me.add(n),me.setActiveObject(n),me.renderAll()},{crossOrigin:"anonymous"})}function ob(t,e={}){et.fabric.loadSVGFromURL(t,(i,n)=>{const r=et.fabric.util.groupSVGElements(i,n),u=me.getWidth(),d=me.getHeight(),a=me.getZoom(),s=i.length>1?"colors":"color",c={left:u/a/2,top:d/a/2,originX:"center",originY:"center",colorType:s,vector:!0,...e};r.set({...c}),jm(r),me.add(r),me.setActiveObject(r),me.renderAll()})}function jm(t){t.clipPath=Lm}function ab(t,e={}){const i=me.getWidth(),n=me.getHeight(),r=me.getZoom(),u=new et.fabric.Text(t,{left:i/r/2,top:n/r/2,fontSize:50/r,originX:"center",originY:"center",strokeUniform:!0,centeredScaling:!0,perPixelTargetFind:!0,paintFirst:"stroke",...e});me.add(u),me.setActiveObject(u),me.renderAll()}function lb(t){me.setActiveObject(t),me.renderAll()}function cb(t){me.remove(t),na(),me.renderAll()}function ub(){_b(["print","guide","snapH","snapW"]);const t=me.toDataURL({format:"png",quality:.6,multiplier:1});return yb(["print","guide","snapH","snapW"]),t}function fb(t){me.getActiveObject().rotate(t),me.renderAll()}function hb(t,e){t.set("text",e),me.renderAll()}function db(t,e){t.set("fontFamily",e),me.renderAll()}function pb(t,e){t.set("textAlign",e),me.renderAll()}function gb(t,e){t.set("fontStyle",e),me.renderAll()}function mb(t,e){const{underline:i,linethrough:n,overline:r}=e;i?t.set("underline",i):t.set("underline",!1),n?t.set("linethrough",n):t.set("linethrough",!1),r?t.set("overline",r):t.set("overline",!1),me.renderAll()}function vb(t,e){const{stroke:i,strokeWidth:n}=e;i?t.set("stroke",i):t.set("stroke",null),n?t.set("strokeWidth",n):t.set("strokeWidth",0),me.renderAll()}function vf(){me.renderAll()}function _b(t){const e=me.getObjects();for(const i of e)t.includes(i.objType)&&(i.objType==="print"?(i.set({stroke:"transparent",oriStroke:i.stroke}),i.type==="image"&&i.set({opacity:0})):i.set({opacity:0}))}function yb(t){me.getObjects().forEach(i=>{t.includes(i.objType)&&(i.objType==="print"?(i.set({stroke:i.oriStroke}),i.type==="image"&&i.set({opacity:1})):i.set({opacity:1}))})}function _f(){const t=nc.clientWidth,e=nc.clientHeight,i=t/e,n=No/jo;let r;i>n?r=e/jo:r=t/No,me.setZoom(r),me.setWidth(No*r),me.setHeight(jo*r),me.renderAll()}function bb(t,e,i,n,r){const u=new et.fabric.Svg(n,null,{strokeWidth:1,stroke:"rgba(0,0,0,0.5)",strokeUniform:!0,scaleX:.5,scaleY:.5});u.set({left:e,top:i}).setCoords(),u.render(t)}function wb(t,e){ou={type:"path",points:[[t,e]]},Yi=!0}function Cb(t,e){Yi&&ou.points.push([t,e])}function Sb(){Yi=!1;const t=new et.fabric.Path(ou);t.objType="drawing",me.add(t),me.isDrawingMode=Yi,me.renderAll()}function Tb(t){const e=me.getWidth(),i=me.getHeight(),n=e*.5,r=me.getZoom(),u=new et.fabric.Rect({type:"rectangle",left:e/r/2,top:i/r/2,originX:"center",originY:"center",objType:"shape",width:n,height:n,fill:t});me.add(u),me.renderAll()}function Eb(t){const e=me.getWidth(),i=me.getHeight(),n=me.getZoom(),r=e*.5,u=new et.fabric.Ellipse({type:"ellipse",x:r/2,y:r/2,left:e/n/2,top:i/n/2,originX:"center",originY:"center",objType:"shape",rx:r/2,ry:r/2,fill:t});me.add(u),me.renderAll()}function Ob(t){const e=me.getWidth(),i=me.getHeight(),n=me.getZoom(),r=e*.5,u=new et.fabric.Triangle({type:"triangle",x:r/2,y:r/2,left:e/n/2,top:i/n/2,originX:"center",originY:"center",width:r,height:r,objType:"shape",fill:t});me.add(u),me.renderAll()}function kb(t){Yi=t,me.isDrawingMode=t,me.renderAll()}function xb(){const t=me.getObjects().find(i=>i.objType==="snapW"),e=me.getObjects().find(i=>i.objType==="snapH");t&&(ys=t.left),e&&(bs=e.top)}function au(t){const e=t-1;return e*e*e+1}function gn(t){return--t*t*t*t*t+1}function yf(t,{delay:e=0,duration:i=400,easing:n=tu}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:n,css:u=>`opacity: ${u*r}`}}function ra(t,{delay:e=0,duration:i=400,easing:n=au,x:r=0,y:u=0,opacity:d=0}={}){const a=getComputedStyle(t),s=+a.opacity,c=a.transform==="none"?"":a.transform,f=s*(1-d),[o,l]=hf(r),[h,p]=hf(u);return{delay:e,duration:i,easing:n,css:(m,g)=>`
			transform: ${c} translate(${(1-m)*o}${l}, ${(1-m)*h}${p});
			opacity: ${s-f*g}`}}function mn(t,{delay:e=0,duration:i=400,easing:n=au,axis:r="y"}={}){const u=getComputedStyle(t),d=+u.opacity,a=r==="y"?"height":"width",s=parseFloat(u[a]),c=r==="y"?["top","bottom"]:["left","right"],f=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),o=parseFloat(u[`padding${f[0]}`]),l=parseFloat(u[`padding${f[1]}`]),h=parseFloat(u[`margin${f[0]}`]),p=parseFloat(u[`margin${f[1]}`]),m=parseFloat(u[`border${f[0]}Width`]),g=parseFloat(u[`border${f[1]}Width`]);return{delay:e,duration:i,easing:n,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*d};${a}: ${v*s}px;padding-${c[0]}: ${v*o}px;padding-${c[1]}: ${v*l}px;margin-${c[0]}: ${v*h}px;margin-${c[1]}: ${v*p}px;border-${c[0]}-width: ${v*m}px;border-${c[1]}-width: ${v*g}px;`}}const Fn=dt(!1),Ln=dt(null),Nn=dt([]),Bm=dt(null);function Db(t=1){var n,r;const e=Ii(Nn).length,i=Ii(Nn)[e-1];return Ii(Ln)||(n=i==null?void 0:i.callbacks)!=null&&n.onBeforeClose&&((r=i==null?void 0:i.callbacks)==null?void 0:r.onBeforeClose())===!1?!1:(Ii(Fn)&&e>0&&Ln.set(!0),Fn.set(!1),Bm.set("pop"),Ab(t),!0)}function Fr(){return Db(1)}function bf(t,e,i){Ii(Ln)||(Bm.set("push"),Ii(Fn)&&Ii(Nn).length&&Ln.set(!0),Fn.set(!1),i!=null&&i.replace?Nn.update(n=>[...n.slice(0,n.length-1),{component:t,props:e}]):Nn.update(n=>[...n,{component:t,props:e}]))}function Ab(t=1){Nn.update(e=>e.slice(0,Math.max(0,e.length-t)))}function wf(t,e,i){const n=t.slice();return n[9]=e[i],n[11]=i,n}const Pb=t=>({}),Cf=t=>({}),Ib=t=>({}),Sf=t=>({});function Tf(t){let e;const i=t[4].backdrop,n=$s(i,t,t[3],Sf);return{c(){n&&n.c()},m(r,u){n&&n.m(r,u),e=!0},p(r,u){n&&n.p&&(!e||u&8)&&qs(n,i,r,r[3],e?Gs(i,r[3],u,Ib):Ks(r[3]),Sf)},i(r){e||(L(n,r),e=!0)},o(r){W(n,r),e=!1},d(r){n&&n.d(r)}}}function Rb(t){let e,i,n;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var u=t[9].component;function d(a,s){let c={};for(let f=0;f<r.length;f+=1)c=Li(c,r[f]);return s!==void 0&&s&3&&(c=Li(c,Hn(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&ia(a[9].props)]))),{props:c}}return u&&(e=zt(u,d(t)),e.$on("introstart",t[7]),e.$on("outroend",t[8])),{c(){e&&de(e.$$.fragment),i=qe()},m(a,s){e&&fe(e,a,s),B(a,i,s),n=!0},p(a,s){if(s&1&&u!==(u=a[9].component)){if(e){Te();const c=e;W(c.$$.fragment,1,0,()=>{he(c,1)}),Ee()}u?(e=zt(u,d(a,s)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,i.parentNode,i)):e=null}else if(u){const c=s&3?Hn(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&ia(a[9].props)]):{};e.$set(c)}},i(a){n||(e&&L(e.$$.fragment,a),n=!0)},o(a){e&&W(e.$$.fragment,a),n=!1},d(a){a&&j(i),e&&he(e,a)}}}function Mb(t){let e,i,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:Nb,then:Lb,catch:Fb,value:12,blocks:[,,,]};return Rs(i=Of(t[9].component),r),{c(){e=qe(),r.block.c()},m(u,d){B(u,e,d),r.block.m(u,r.anchor=d),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(u,d){t=u,r.ctx=t,d&1&&i!==(i=Of(t[9].component))&&Rs(i,r)||su(r,t,d)},i(u){n||(L(r.block),n=!0)},o(u){for(let d=0;d<3;d+=1){const a=r.blocks[d];W(a)}n=!1},d(u){u&&j(e),r.block.d(u),r.token=null,r=null}}}function Fb(t){return{c:ve,m:ve,p:ve,i:ve,o:ve,d:ve}}function Lb(t){let e,i,n;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var u=t[12];function d(a,s){let c={};for(let f=0;f<r.length;f+=1)c=Li(c,r[f]);return s!==void 0&&s&3&&(c=Li(c,Hn(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&ia(a[9].props)]))),{props:c}}return u&&(e=zt(u,d(t)),e.$on("introstart",t[5]),e.$on("outroend",t[6])),{c(){e&&de(e.$$.fragment),i=$()},m(a,s){e&&fe(e,a,s),B(a,i,s),n=!0},p(a,s){if(s&1&&u!==(u=a[12])){if(e){Te();const c=e;W(c.$$.fragment,1,0,()=>{he(c,1)}),Ee()}u?(e=zt(u,d(a,s)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,i.parentNode,i)):e=null}else if(u){const c=s&3?Hn(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&ia(a[9].props)]):{};e.$set(c)}},i(a){n||(e&&L(e.$$.fragment,a),n=!0)},o(a){e&&W(e.$$.fragment,a),n=!1},d(a){a&&j(i),e&&he(e,a)}}}function Nb(t){let e,i;const n=t[4].loading,r=$s(n,t,t[3],Cf);return{c(){r&&r.c(),e=$()},m(u,d){r&&r.m(u,d),B(u,e,d),i=!0},p(u,d){r&&r.p&&(!i||d&8)&&qs(r,n,u,u[3],i?Gs(n,u[3],d,Pb):Ks(u[3]),Cf)},i(u){i||(L(r,u),i=!0)},o(u){W(r,u),i=!1},d(u){u&&j(e),r&&r.d(u)}}}function Ef(t,e){let i,n,r,u,d,a;const s=[Mb,Rb],c=[];function f(o,l){return l&1&&(n=null),n==null&&(n=!!Ub(o[9].component)),n?0:1}return r=f(e,-1),u=c[r]=s[r](e),{key:t,first:null,c(){i=qe(),u.c(),d=qe(),this.first=i},m(o,l){B(o,i,l),c[r].m(o,l),B(o,d,l),a=!0},p(o,l){e=o;let h=r;r=f(e,l),r===h?c[r].p(e,l):(Te(),W(c[h],1,1,()=>{c[h]=null}),Ee(),u=c[r],u?u.p(e,l):(u=c[r]=s[r](e),u.c()),L(u,1),u.m(d.parentNode,d))},i(o){a||(L(u),a=!0)},o(o){W(u),a=!1},d(o){o&&(j(i),j(d)),c[r].d(o)}}}function jb(t){let e=[],i=new Map,n,r,u=Ne(t[0]);const d=a=>a[11];for(let a=0;a<u.length;a+=1){let s=wf(t,u,a),c=d(s);i.set(c,e[a]=Ef(c,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=qe()},m(a,s){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,s);B(a,n,s),r=!0},p(a,s){s&15&&(u=Ne(a[0]),Te(),e=Mm(e,s,d,1,a,u,i,n.parentNode,Rm,Ef,n,wf),Ee())},i(a){if(!r){for(let s=0;s<u.length;s+=1)L(e[s]);r=!0}},o(a){for(let s=0;s<e.length;s+=1)W(e[s]);r=!1},d(a){a&&j(n);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function Bb(t){let e,i,n=t[0].length>0&&Tf(t);const r=t[4].default,u=$s(r,t,t[3],null),d=u||jb(t);return{c(){n&&n.c(),e=$(),d&&d.c()},m(a,s){n&&n.m(a,s),B(a,e,s),d&&d.m(a,s),i=!0},p(a,[s]){a[0].length>0?n?(n.p(a,s),s&1&&L(n,1)):(n=Tf(a),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),W(n,1,1,()=>{n=null}),Ee()),u?u.p&&(!i||s&8)&&qs(u,r,a,a[3],i?Gs(r,a[3],s,null):Ks(a[3]),null):d&&d.p&&(!i||s&15)&&d.p(a,i?s:-1)},i(a){i||(L(n),L(d,a),i=!0)},o(a){W(n),W(d,a),i=!1},d(a){a&&j(e),n&&n.d(a),d&&d.d(a)}}}function Ub(t){return typeof t.prototype>"u"}async function Of(t){return t().then(e=>e.default)}function zb(t,e,i){let n,r,u;Fe(t,Nn,l=>i(0,n=l)),Fe(t,Ln,l=>i(1,r=l)),Fe(t,Fn,l=>i(2,u=l));let{$$slots:d={},$$scope:a}=e;const s=()=>{ye(Fn,u=!0,u)},c=()=>{ye(Ln,r=!1,r)},f=()=>{ye(Fn,u=!0,u)},o=()=>{ye(Ln,r=!1,r)};return t.$$set=l=>{"$$scope"in l&&i(3,a=l.$$scope)},[n,r,u,a,d,s,c,f,o]}class Wb extends Ve{constructor(e){super(),He(this,e,zb,Bb,Ue,{})}}var Hb=Error,Vb=EvalError,Xb=RangeError,Yb=ReferenceError,Um=SyntaxError,Zs=TypeError,$b=URIError,Gb=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[i]=r;for(i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==i||!Object.prototype.propertyIsEnumerable.call(e,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,i);if(d.value!==r||d.enumerable!==!0)return!1}return!0},kf=typeof Symbol<"u"&&Symbol,qb=Gb,Kb=function(){return typeof kf!="function"||typeof Symbol!="function"||typeof kf("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qb()},ol={__proto__:null,foo:{}},Jb=Object,Zb=function(){return{__proto__:ol}.foo===ol.foo&&!(ol instanceof Jb)},Qb="Function.prototype.bind called on incompatible ",e0=Object.prototype.toString,t0=Math.max,i0="[object Function]",xf=function(e,i){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var u=0;u<i.length;u+=1)n[u+e.length]=i[u];return n},n0=function(e,i){for(var n=[],r=i||0,u=0;r<e.length;r+=1,u+=1)n[u]=e[r];return n},r0=function(t,e){for(var i="",n=0;n<t.length;n+=1)i+=t[n],n+1<t.length&&(i+=e);return i},s0=function(e){var i=this;if(typeof i!="function"||e0.apply(i)!==i0)throw new TypeError(Qb+i);for(var n=n0(arguments,1),r,u=function(){if(this instanceof r){var f=i.apply(this,xf(n,arguments));return Object(f)===f?f:this}return i.apply(e,xf(n,arguments))},d=t0(0,i.length-n.length),a=[],s=0;s<d;s++)a[s]="$"+s;if(r=Function("binder","return function ("+r0(a,",")+"){ return binder.apply(this,arguments); }")(u),i.prototype){var c=function(){};c.prototype=i.prototype,r.prototype=new c,c.prototype=null}return r},o0=s0,lu=Function.prototype.bind||o0,a0=Function.prototype.call,l0=Object.prototype.hasOwnProperty,c0=lu,u0=c0.call(a0,l0),ze,f0=Hb,h0=Vb,d0=Xb,p0=Yb,Lr=Um,Or=Zs,g0=$b,zm=Function,al=function(t){try{return zm('"use strict"; return ('+t+").constructor;")()}catch{}},jn=Object.getOwnPropertyDescriptor;if(jn)try{jn({},"")}catch{jn=null}var ll=function(){throw new Or},m0=jn?function(){try{return arguments.callee,ll}catch{try{return jn(arguments,"callee").get}catch{return ll}}}():ll,ir=Kb(),v0=Zb(),Ot=Object.getPrototypeOf||(v0?function(t){return t.__proto__}:null),dr={},_0=typeof Uint8Array>"u"||!Ot?ze:Ot(Uint8Array),Bn={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ze:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ze:ArrayBuffer,"%ArrayIteratorPrototype%":ir&&Ot?Ot([][Symbol.iterator]()):ze,"%AsyncFromSyncIteratorPrototype%":ze,"%AsyncFunction%":dr,"%AsyncGenerator%":dr,"%AsyncGeneratorFunction%":dr,"%AsyncIteratorPrototype%":dr,"%Atomics%":typeof Atomics>"u"?ze:Atomics,"%BigInt%":typeof BigInt>"u"?ze:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ze:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ze:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ze:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":f0,"%eval%":eval,"%EvalError%":h0,"%Float32Array%":typeof Float32Array>"u"?ze:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ze:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ze:FinalizationRegistry,"%Function%":zm,"%GeneratorFunction%":dr,"%Int8Array%":typeof Int8Array>"u"?ze:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ze:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ze:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ir&&Ot?Ot(Ot([][Symbol.iterator]())):ze,"%JSON%":typeof JSON=="object"?JSON:ze,"%Map%":typeof Map>"u"?ze:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ir||!Ot?ze:Ot(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ze:Promise,"%Proxy%":typeof Proxy>"u"?ze:Proxy,"%RangeError%":d0,"%ReferenceError%":p0,"%Reflect%":typeof Reflect>"u"?ze:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ze:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ir||!Ot?ze:Ot(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ze:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ir&&Ot?Ot(""[Symbol.iterator]()):ze,"%Symbol%":ir?Symbol:ze,"%SyntaxError%":Lr,"%ThrowTypeError%":m0,"%TypedArray%":_0,"%TypeError%":Or,"%Uint8Array%":typeof Uint8Array>"u"?ze:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ze:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ze:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ze:Uint32Array,"%URIError%":g0,"%WeakMap%":typeof WeakMap>"u"?ze:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ze:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ze:WeakSet};if(Ot)try{null.error}catch(t){var y0=Ot(Ot(t));Bn["%Error.prototype%"]=y0}var b0=function t(e){var i;if(e==="%AsyncFunction%")i=al("async function () {}");else if(e==="%GeneratorFunction%")i=al("function* () {}");else if(e==="%AsyncGeneratorFunction%")i=al("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&Ot&&(i=Ot(r.prototype))}return Bn[e]=i,i},Df={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Qs=lu,sa=u0,w0=Qs.call(Function.call,Array.prototype.concat),C0=Qs.call(Function.apply,Array.prototype.splice),Af=Qs.call(Function.call,String.prototype.replace),oa=Qs.call(Function.call,String.prototype.slice),S0=Qs.call(Function.call,RegExp.prototype.exec),T0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E0=/\\(\\)?/g,O0=function(e){var i=oa(e,0,1),n=oa(e,-1);if(i==="%"&&n!=="%")throw new Lr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&i!=="%")throw new Lr("invalid intrinsic syntax, expected opening `%`");var r=[];return Af(e,T0,function(u,d,a,s){r[r.length]=a?Af(s,E0,"$1"):d||u}),r},k0=function(e,i){var n=e,r;if(sa(Df,n)&&(r=Df[n],n="%"+r[0]+"%"),sa(Bn,n)){var u=Bn[n];if(u===dr&&(u=b0(n)),typeof u>"u"&&!i)throw new Or("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:u}}throw new Lr("intrinsic "+e+" does not exist!")},Jr=function(e,i){if(typeof e!="string"||e.length===0)throw new Or("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new Or('"allowMissing" argument must be a boolean');if(S0(/^%?[^%]*%?$/,e)===null)throw new Lr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=O0(e),r=n.length>0?n[0]:"",u=k0("%"+r+"%",i),d=u.name,a=u.value,s=!1,c=u.alias;c&&(r=c[0],C0(n,w0([0,1],c)));for(var f=1,o=!0;f<n.length;f+=1){var l=n[f],h=oa(l,0,1),p=oa(l,-1);if((h==='"'||h==="'"||h==="`"||p==='"'||p==="'"||p==="`")&&h!==p)throw new Lr("property names with quotes must have matching quotes");if((l==="constructor"||!o)&&(s=!0),r+="."+l,d="%"+r+"%",sa(Bn,d))a=Bn[d];else if(a!=null){if(!(l in a)){if(!i)throw new Or("base intrinsic for "+e+" exists, but the property is not available.");return}if(jn&&f+1>=n.length){var m=jn(a,l);o=!!m,o&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[l]}else o=sa(a,l),a=a[l];o&&!s&&(Bn[d]=a)}}return a},Wm={exports:{}},cl,Pf;function cu(){if(Pf)return cl;Pf=1;var t=Jr,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return cl=e,cl}var x0=Jr,Bo=x0("%Object.getOwnPropertyDescriptor%",!0);if(Bo)try{Bo([],"length")}catch{Bo=null}var Hm=Bo,If=cu(),D0=Um,nr=Zs,Rf=Hm,A0=function(e,i,n){if(!e||typeof e!="object"&&typeof e!="function")throw new nr("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new nr("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new nr("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new nr("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new nr("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new nr("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!Rf&&Rf(e,i);if(If)If(e,i,{configurable:d===null&&s?s.configurable:!d,enumerable:r===null&&s?s.enumerable:!r,value:n,writable:u===null&&s?s.writable:!u});else if(a||!r&&!u&&!d)e[i]=n;else throw new D0("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},sc=cu(),Vm=function(){return!!sc};Vm.hasArrayLengthDefineBug=function(){if(!sc)return null;try{return sc([],"length",{value:1}).length!==1}catch{return!0}};var P0=Vm,I0=Jr,Mf=A0,R0=P0(),Ff=Hm,Lf=Zs,M0=I0("%Math.floor%"),F0=function(e,i){if(typeof e!="function")throw new Lf("`fn` is not a function");if(typeof i!="number"||i<0||i>4294967295||M0(i)!==i)throw new Lf("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in e&&Ff){var d=Ff(e,"length");d&&!d.configurable&&(r=!1),d&&!d.writable&&(u=!1)}return(r||u||!n)&&(R0?Mf(e,"length",i,!0,!0):Mf(e,"length",i)),e};(function(t){var e=lu,i=Jr,n=F0,r=Zs,u=i("%Function.prototype.apply%"),d=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||e.call(d,u),s=cu(),c=i("%Math.max%");t.exports=function(l){if(typeof l!="function")throw new r("a function is required");var h=a(e,d,arguments);return n(h,1+c(0,l.length-(arguments.length-1)),!0)};var f=function(){return a(e,u,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(Wm);var L0=Wm.exports,Xm=Jr,Ym=L0,N0=Ym(Xm("String.prototype.indexOf")),j0=function(e,i){var n=Xm(e,!!i);return typeof n=="function"&&N0(e,".prototype.")>-1?Ym(n):n},uu=typeof Map=="function"&&Map.prototype,ul=Object.getOwnPropertyDescriptor&&uu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,aa=uu&&ul&&typeof ul.get=="function"?ul.get:null,Nf=uu&&Map.prototype.forEach,fu=typeof Set=="function"&&Set.prototype,fl=Object.getOwnPropertyDescriptor&&fu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,la=fu&&fl&&typeof fl.get=="function"?fl.get:null,jf=fu&&Set.prototype.forEach,B0=typeof WeakMap=="function"&&WeakMap.prototype,ws=B0?WeakMap.prototype.has:null,U0=typeof WeakSet=="function"&&WeakSet.prototype,Cs=U0?WeakSet.prototype.has:null,z0=typeof WeakRef=="function"&&WeakRef.prototype,Bf=z0?WeakRef.prototype.deref:null,W0=Boolean.prototype.valueOf,H0=Object.prototype.toString,V0=Function.prototype.toString,X0=String.prototype.match,hu=String.prototype.slice,an=String.prototype.replace,Y0=String.prototype.toUpperCase,Uf=String.prototype.toLowerCase,$m=RegExp.prototype.test,zf=Array.prototype.concat,Di=Array.prototype.join,$0=Array.prototype.slice,Wf=Math.floor,oc=typeof BigInt=="function"?BigInt.prototype.valueOf:null,hl=Object.getOwnPropertySymbols,ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Wt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Nr||!0)?Symbol.toStringTag:null,Gm=Object.prototype.propertyIsEnumerable,Hf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Vf(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$m.call(/e/,e))return e;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Wf(-t):Wf(t);if(n!==t){var r=String(n),u=hu.call(e,r.length+1);return an.call(r,i,"$&_")+"."+an.call(an.call(u,/([0-9]{3})/g,"$&_"),/_$/,"")}}return an.call(e,i,"$&_")}var lc=Mn,Xf=lc.custom,Yf=Km(Xf)?Xf:null,G0=function t(e,i,n,r){var u=i||{};if(tn(u,"quoteStyle")&&u.quoteStyle!=="single"&&u.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(tn(u,"maxStringLength")&&(typeof u.maxStringLength=="number"?u.maxStringLength<0&&u.maxStringLength!==1/0:u.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=tn(u,"customInspect")?u.customInspect:!0;if(typeof d!="boolean"&&d!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(tn(u,"indent")&&u.indent!==null&&u.indent!=="	"&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(tn(u,"numericSeparator")&&typeof u.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=u.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Zm(e,u);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return a?Vf(e,s):s}if(typeof e=="bigint"){var c=String(e)+"n";return a?Vf(e,c):c}var f=typeof u.depth>"u"?5:u.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return cc(e)?"[Array]":"[Object]";var o=hw(u,n);if(typeof r>"u")r=[];else if(Jm(r,e)>=0)return"[Circular]";function l(Q,q,N){if(q&&(r=$0.call(r),r.push(q)),N){var V={depth:u.depth};return tn(u,"quoteStyle")&&(V.quoteStyle=u.quoteStyle),t(Q,V,n+1,r)}return t(Q,u,n+1,r)}if(typeof e=="function"&&!$f(e)){var h=nw(e),p=po(e,l);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(p.length>0?" { "+Di.call(p,", ")+" }":"")}if(Km(e)){var m=Nr?an.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ac.call(e);return typeof e=="object"&&!Nr?as(m):m}if(cw(e)){for(var g="<"+Uf.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+qm(q0(v[_].value),"double",u);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+Uf.call(String(e.nodeName))+">",g}if(cc(e)){if(e.length===0)return"[]";var b=po(e,l);return o&&!fw(b)?"["+uc(b,o)+"]":"[ "+Di.call(b,", ")+" ]"}if(J0(e)){var y=po(e,l);return!("cause"in Error.prototype)&&"cause"in e&&!Gm.call(e,"cause")?"{ ["+String(e)+"] "+Di.call(zf.call("[cause]: "+l(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Di.call(y,", ")+" }"}if(typeof e=="object"&&d){if(Yf&&typeof e[Yf]=="function"&&lc)return lc(e,{depth:f-n});if(d!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(rw(e)){var w=[];return Nf&&Nf.call(e,function(Q,q){w.push(l(q,e,!0)+" => "+l(Q,e))}),Gf("Map",aa.call(e),w,o)}if(aw(e)){var C=[];return jf&&jf.call(e,function(Q){C.push(l(Q,e))}),Gf("Set",la.call(e),C,o)}if(sw(e))return dl("WeakMap");if(lw(e))return dl("WeakSet");if(ow(e))return dl("WeakRef");if(Q0(e))return as(l(Number(e)));if(tw(e))return as(l(oc.call(e)));if(ew(e))return as(W0.call(e));if(Z0(e))return as(l(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Ie)return"{ [object globalThis] }";if(!K0(e)&&!$f(e)){var T=po(e,l),E=Hf?Hf(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",F=!E&&Wt&&Object(e)===e&&Wt in e?hu.call(yn(e),8,-1):A?"Object":"",G=E||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Y=G+(F||A?"["+Di.call(zf.call([],F||[],A||[]),": ")+"] ":"");return T.length===0?Y+"{}":o?Y+"{"+uc(T,o)+"}":Y+"{ "+Di.call(T,", ")+" }"}return String(e)};function qm(t,e,i){var n=(i.quoteStyle||e)==="double"?'"':"'";return n+t+n}function q0(t){return an.call(String(t),/"/g,"&quot;")}function cc(t){return yn(t)==="[object Array]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function K0(t){return yn(t)==="[object Date]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function $f(t){return yn(t)==="[object RegExp]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function J0(t){return yn(t)==="[object Error]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function Z0(t){return yn(t)==="[object String]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function Q0(t){return yn(t)==="[object Number]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function ew(t){return yn(t)==="[object Boolean]"&&(!Wt||!(typeof t=="object"&&Wt in t))}function Km(t){if(Nr)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ac)return!1;try{return ac.call(t),!0}catch{}return!1}function tw(t){if(!t||typeof t!="object"||!oc)return!1;try{return oc.call(t),!0}catch{}return!1}var iw=Object.prototype.hasOwnProperty||function(t){return t in this};function tn(t,e){return iw.call(t,e)}function yn(t){return H0.call(t)}function nw(t){if(t.name)return t.name;var e=X0.call(V0.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Jm(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function rw(t){if(!aa||!t||typeof t!="object")return!1;try{aa.call(t);try{la.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function sw(t){if(!ws||!t||typeof t!="object")return!1;try{ws.call(t,ws);try{Cs.call(t,Cs)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ow(t){if(!Bf||!t||typeof t!="object")return!1;try{return Bf.call(t),!0}catch{}return!1}function aw(t){if(!la||!t||typeof t!="object")return!1;try{la.call(t);try{aa.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function lw(t){if(!Cs||!t||typeof t!="object")return!1;try{Cs.call(t,Cs);try{ws.call(t,ws)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function cw(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Zm(t,e){if(t.length>e.maxStringLength){var i=t.length-e.maxStringLength,n="... "+i+" more character"+(i>1?"s":"");return Zm(hu.call(t,0,e.maxStringLength),e)+n}var r=an.call(an.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,uw);return qm(r,"single",e)}function uw(t){var e=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+Y0.call(e.toString(16))}function as(t){return"Object("+t+")"}function dl(t){return t+" { ? }"}function Gf(t,e,i,n){var r=n?uc(i,n):Di.call(i,", ");return t+" ("+e+") {"+r+"}"}function fw(t){for(var e=0;e<t.length;e++)if(Jm(t[e],`
`)>=0)return!1;return!0}function hw(t,e){var i;if(t.indent==="	")i="	";else if(typeof t.indent=="number"&&t.indent>0)i=Di.call(Array(t.indent+1)," ");else return null;return{base:i,prev:Di.call(Array(e+1),i)}}function uc(t,e){if(t.length===0)return"";var i=`
`+e.prev+e.base;return i+Di.call(t,","+i)+`
`+e.prev}function po(t,e){var i=cc(t),n=[];if(i){n.length=t.length;for(var r=0;r<t.length;r++)n[r]=tn(t,r)?e(t[r],t):""}var u=typeof hl=="function"?hl(t):[],d;if(Nr){d={};for(var a=0;a<u.length;a++)d["$"+u[a]]=u[a]}for(var s in t)tn(t,s)&&(i&&String(Number(s))===s&&s<t.length||Nr&&d["$"+s]instanceof Symbol||($m.call(/[^\w$]/,s)?n.push(e(s,t)+": "+e(t[s],t)):n.push(s+": "+e(t[s],t))));if(typeof hl=="function")for(var c=0;c<u.length;c++)Gm.call(t,u[c])&&n.push("["+e(u[c])+"]: "+e(t[u[c]],t));return n}var Qm=Jr,Zr=j0,dw=G0,pw=Zs,go=Qm("%WeakMap%",!0),mo=Qm("%Map%",!0),gw=Zr("WeakMap.prototype.get",!0),mw=Zr("WeakMap.prototype.set",!0),vw=Zr("WeakMap.prototype.has",!0),_w=Zr("Map.prototype.get",!0),yw=Zr("Map.prototype.set",!0),bw=Zr("Map.prototype.has",!0),du=function(t,e){for(var i=t,n;(n=i.next)!==null;i=n)if(n.key===e)return i.next=n.next,n.next=t.next,t.next=n,n},ww=function(t,e){var i=du(t,e);return i&&i.value},Cw=function(t,e,i){var n=du(t,e);n?n.value=i:t.next={key:e,next:t.next,value:i}},Sw=function(t,e){return!!du(t,e)},Tw=function(){var e,i,n,r={assert:function(u){if(!r.has(u))throw new pw("Side channel does not contain "+dw(u))},get:function(u){if(go&&u&&(typeof u=="object"||typeof u=="function")){if(e)return gw(e,u)}else if(mo){if(i)return _w(i,u)}else if(n)return ww(n,u)},has:function(u){if(go&&u&&(typeof u=="object"||typeof u=="function")){if(e)return vw(e,u)}else if(mo){if(i)return bw(i,u)}else if(n)return Sw(n,u);return!1},set:function(u,d){go&&u&&(typeof u=="object"||typeof u=="function")?(e||(e=new go),mw(e,u,d)):mo?(i||(i=new mo),yw(i,u,d)):(n||(n={key:{},next:null}),Cw(n,u,d))}};return r},Ew=String.prototype.replace,Ow=/%20/g,pl={RFC1738:"RFC1738",RFC3986:"RFC3986"},pu={default:pl.RFC3986,formatters:{RFC1738:function(t){return Ew.call(t,Ow,"+")},RFC3986:function(t){return String(t)}},RFC1738:pl.RFC1738,RFC3986:pl.RFC3986},kw=pu,gl=Object.prototype.hasOwnProperty,Dn=Array.isArray,Oi=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),xw=function(e){for(;e.length>1;){var i=e.pop(),n=i.obj[i.prop];if(Dn(n)){for(var r=[],u=0;u<n.length;++u)typeof n[u]<"u"&&r.push(n[u]);i.obj[i.prop]=r}}},ev=function(e,i){for(var n=i&&i.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},Dw=function t(e,i,n){if(!i)return e;if(typeof i!="object"){if(Dn(e))e.push(i);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!gl.call(Object.prototype,i))&&(e[i]=!0);else return[e,i];return e}if(!e||typeof e!="object")return[e].concat(i);var r=e;return Dn(e)&&!Dn(i)&&(r=ev(e,n)),Dn(e)&&Dn(i)?(i.forEach(function(u,d){if(gl.call(e,d)){var a=e[d];a&&typeof a=="object"&&u&&typeof u=="object"?e[d]=t(a,u,n):e.push(u)}else e[d]=u}),e):Object.keys(i).reduce(function(u,d){var a=i[d];return gl.call(u,d)?u[d]=t(u[d],a,n):u[d]=a,u},r)},Aw=function(e,i){return Object.keys(i).reduce(function(n,r){return n[r]=i[r],n},e)},Pw=function(t,e,i){var n=t.replace(/\+/g," ");if(i==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Iw=function(e,i,n,r,u){if(e.length===0)return e;var d=e;if(typeof e=="symbol"?d=Symbol.prototype.toString.call(e):typeof e!="string"&&(d=String(e)),n==="iso-8859-1")return escape(d).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",s=0;s<d.length;++s){var c=d.charCodeAt(s);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||u===kw.RFC1738&&(c===40||c===41)){a+=d.charAt(s);continue}if(c<128){a=a+Oi[c];continue}if(c<2048){a=a+(Oi[192|c>>6]+Oi[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Oi[224|c>>12]+Oi[128|c>>6&63]+Oi[128|c&63]);continue}s+=1,c=65536+((c&1023)<<10|d.charCodeAt(s)&1023),a+=Oi[240|c>>18]+Oi[128|c>>12&63]+Oi[128|c>>6&63]+Oi[128|c&63]}return a},Rw=function(e){for(var i=[{obj:{o:e},prop:"o"}],n=[],r=0;r<i.length;++r)for(var u=i[r],d=u.obj[u.prop],a=Object.keys(d),s=0;s<a.length;++s){var c=a[s],f=d[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(i.push({obj:d,prop:c}),n.push(f))}return xw(i),e},Mw=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Fw=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Lw=function(e,i){return[].concat(e,i)},Nw=function(e,i){if(Dn(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(i(e[r]));return n}return i(e)},tv={arrayToObject:ev,assign:Aw,combine:Lw,compact:Rw,decode:Pw,encode:Iw,isBuffer:Fw,isRegExp:Mw,maybeMap:Nw,merge:Dw},iv=Tw,Uo=tv,Ss=pu,jw=Object.prototype.hasOwnProperty,nv={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,i){return e+"["+i+"]"},repeat:function(e){return e}},xi=Array.isArray,Bw=Array.prototype.push,rv=function(t,e){Bw.apply(t,xi(e)?e:[e])},Uw=Date.prototype.toISOString,qf=Ss.default,St={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Uo.encode,encodeValuesOnly:!1,format:qf,formatter:Ss.formatters[qf],indices:!1,serializeDate:function(e){return Uw.call(e)},skipNulls:!1,strictNullHandling:!1},zw=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ml={},Ww=function t(e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_){for(var b=e,y=_,w=0,C=!1;(y=y.get(ml))!==void 0&&!C;){var T=y.get(e);if(w+=1,typeof T<"u"){if(T===w)throw new RangeError("Cyclic object value");C=!0}typeof y.get(ml)>"u"&&(w=0)}if(typeof f=="function"?b=f(i,b):b instanceof Date?b=h(b):n==="comma"&&xi(b)&&(b=Uo.maybeMap(b,function(P){return P instanceof Date?h(P):P})),b===null){if(d)return c&&!g?c(i,St.encoder,v,"key",p):i;b=""}if(zw(b)||Uo.isBuffer(b)){if(c){var E=g?i:c(i,St.encoder,v,"key",p);return[m(E)+"="+m(c(b,St.encoder,v,"value",p))]}return[m(i)+"="+m(String(b))]}var A=[];if(typeof b>"u")return A;var F;if(n==="comma"&&xi(b))g&&c&&(b=Uo.maybeMap(b,c)),F=[{value:b.length>0?b.join(",")||null:void 0}];else if(xi(f))F=f;else{var G=Object.keys(b);F=o?G.sort(o):G}var Y=s?i.replace(/\./g,"%2E"):i,Q=r&&xi(b)&&b.length===1?Y+"[]":Y;if(u&&xi(b)&&b.length===0)return Q+"[]";for(var q=0;q<F.length;++q){var N=F[q],V=typeof N=="object"&&typeof N.value<"u"?N.value:b[N];if(!(a&&V===null)){var ee=l&&s?N.replace(/\./g,"%2E"):N,te=xi(b)?typeof n=="function"?n(Q,ee):Q:Q+(l?"."+ee:"["+ee+"]");_.set(e,w);var k=iv();k.set(ml,_),rv(A,t(V,te,n,r,u,d,a,s,n==="comma"&&g&&xi(b)?null:c,f,o,l,h,p,m,g,v,k))}}return A},Hw=function(e){if(!e)return St;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=e.charset||St.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ss.default;if(typeof e.format<"u"){if(!jw.call(Ss.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=Ss.formatters[n],u=St.filter;(typeof e.filter=="function"||xi(e.filter))&&(u=e.filter);var d;if(e.arrayFormat in nv?d=e.arrayFormat:"indices"in e?d=e.indices?"indices":"repeat":d=St.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:St.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:St.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:St.allowEmptyArrays,arrayFormat:d,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:St.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?St.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:St.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:St.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:St.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:St.encodeValuesOnly,filter:u,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:St.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:St.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:St.strictNullHandling}},Vw=function(t,e){var i=t,n=Hw(e),r,u;typeof n.filter=="function"?(u=n.filter,i=u("",i)):xi(n.filter)&&(u=n.filter,r=u);var d=[];if(typeof i!="object"||i===null)return"";var a=nv[n.arrayFormat],s=a==="comma"&&n.commaRoundTrip;r||(r=Object.keys(i)),n.sort&&r.sort(n.sort);for(var c=iv(),f=0;f<r.length;++f){var o=r[f];n.skipNulls&&i[o]===null||rv(d,Ww(i[o],o,a,s,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var l=d.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),l.length>0?h+l:""},jr=tv,fc=Object.prototype.hasOwnProperty,Xw=Array.isArray,gt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:jr.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Yw=function(t){return t.replace(/&#(\d+);/g,function(e,i){return String.fromCharCode(parseInt(i,10))})},sv=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},$w="utf8=%26%2310003%3B",Gw="utf8=%E2%9C%93",qw=function(e,i){var n={__proto__:null},r=i.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=i.parameterLimit===1/0?void 0:i.parameterLimit,d=r.split(i.delimiter,u),a=-1,s,c=i.charset;if(i.charsetSentinel)for(s=0;s<d.length;++s)d[s].indexOf("utf8=")===0&&(d[s]===Gw?c="utf-8":d[s]===$w&&(c="iso-8859-1"),a=s,s=d.length);for(s=0;s<d.length;++s)if(s!==a){var f=d[s],o=f.indexOf("]="),l=o===-1?f.indexOf("="):o+1,h,p;l===-1?(h=i.decoder(f,gt.decoder,c,"key"),p=i.strictNullHandling?null:""):(h=i.decoder(f.slice(0,l),gt.decoder,c,"key"),p=jr.maybeMap(sv(f.slice(l+1),i),function(g){return i.decoder(g,gt.decoder,c,"value")})),p&&i.interpretNumericEntities&&c==="iso-8859-1"&&(p=Yw(p)),f.indexOf("[]=")>-1&&(p=Xw(p)?[p]:p);var m=fc.call(n,h);m&&i.duplicates==="combine"?n[h]=jr.combine(n[h],p):(!m||i.duplicates==="last")&&(n[h]=p)}return n},Kw=function(t,e,i,n){for(var r=n?e:sv(e,i),u=t.length-1;u>=0;--u){var d,a=t[u];if(a==="[]"&&i.parseArrays)d=i.allowEmptyArrays&&r===""?[]:[].concat(r);else{d=i.plainObjects?Object.create(null):{};var s=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=i.decodeDotInKeys?s.replace(/%2E/g,"."):s,f=parseInt(c,10);!i.parseArrays&&c===""?d={0:r}:!isNaN(f)&&a!==c&&String(f)===c&&f>=0&&i.parseArrays&&f<=i.arrayLimit?(d=[],d[f]=r):c!=="__proto__"&&(d[c]=r)}r=d}return r},Jw=function(e,i,n,r){if(e){var u=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,d=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=n.depth>0&&d.exec(u),c=s?u.slice(0,s.index):u,f=[];if(c){if(!n.plainObjects&&fc.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var o=0;n.depth>0&&(s=a.exec(u))!==null&&o<n.depth;){if(o+=1,!n.plainObjects&&fc.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+u.slice(s.index)+"]"),Kw(f,i,n,r)}},Zw=function(e){if(!e)return gt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=typeof e.charset>"u"?gt.charset:e.charset,n=typeof e.duplicates>"u"?gt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:gt.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:gt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:gt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:gt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:gt.arrayLimit,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:gt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:gt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:gt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:gt.decoder,delimiter:typeof e.delimiter=="string"||jr.isRegExp(e.delimiter)?e.delimiter:gt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:gt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:gt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:gt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:gt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:gt.strictNullHandling}},Qw=function(t,e){var i=Zw(e);if(t===""||t===null||typeof t>"u")return i.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?qw(t,i):t,r=i.plainObjects?Object.create(null):{},u=Object.keys(n),d=0;d<u.length;++d){var a=u[d],s=Jw(a,n[a],i,typeof t=="string");r=jr.merge(r,s,i)}return i.allowSparse===!0?r:jr.compact(r)},e1=Vw,t1=Qw,i1=pu,n1={formats:i1,parse:t1,stringify:e1};const gu=Ky(n1);let ei="https://podiz-strapi-uieqvbv3ya-du.a.run.app";async function r1(t){try{return{data:await(await fetch(`${ei}/publishes/${t}`)).json()}}catch(e){return{error:e}}}async function s1(t){try{return{data:await(await fetch(`${ei}/shops/${t}`)).json()}}catch(e){return{error:e}}}async function o1(t,e={perPage:24,current:0,keyword:"",categories:[]}){try{const i=[];if(e.keyword&&i.push({_or:[{name_contains:e.keyword},{tag_contains:e.keyword}]}),i.push({shop:t}),e.categories.length){const s=[];e.categories.forEach(c=>{s.push({categories_contains:c})}),i.push({_or:{...s}})}const n=gu.stringify({_where:{...i},_start:e.perPage*e.current,_sort:"created_at:DESC",_limit:e.perPage}),r=await fetch(`${ei}/cliparts?${n}`),u=await fetch(`${ei}/cliparts/count?${n}`),d=await r.json(),a=await u.json();return{data:d,count:a}}catch(i){return{error:i}}}const a1=async t=>{try{return{data:await(await fetch(`${ei}/fonts?shop=${t}`)).json()}}catch(e){return{error:e}}},l1=async t=>{try{const i=await(await fetch(`${ei}/shop-default-fonts?shop=${t}`)).json();return i.length||i.push({shop:t,defaultFonts:[]}),{data:i[0]}}catch(e){return{error:`기본폰트 조회가 실패하였습니다. ${e}`}}},ov=async t=>{try{return{data:await(await fetch(`${ei}/editor-data/${t}`)).json()}}catch(e){return{error:e}}},c1=async t=>{try{const e=t.id?"PUT":"POST",i=t.id?`/${t.id}`:"";return{data:await(await fetch(`${ei}/editor-data${i}`,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}}catch{return{error:"데이터 입력 실패."}}},u1=async(t,e=null)=>{try{return{data:await(e?await fetch(`${ei}/colors?shop=${t}&colorGroup=${e}`):await fetch(`${ei}/colors?shop=${t}`)).json()}}catch(i){return{error:i}}},f1=async t=>{try{return{data:await(await fetch(`${ei}/composites?print=${t}`)).json(),error:null}}catch(e){return{error:e}}},h1=async({provider:t,productno:e,shopid:i})=>{try{const n=[];console.log({provider:t}),console.log({productno:e}),console.log({shopid:i}),t?n.push({selectApi:t}):n.push({selectApi_null:!0}),e?n.push({productNo:e}):n.push({productNo_null:!0}),i&&n.push({shop:i}),console.log({where:n});const r=gu.stringify({_where:{...n},_sort:"created_at:DESC"});return{data:await(await fetch(`${ei}/editor-product-links?${r}`)).json(),error:null}}catch(n){return{error:n}}};async function d1(t,e,i={perPage:24,current:0,keyword:""}){try{let n=[];n.push({cafe24MallId:t}),n.push({cafe24MemberId:e});const r=gu.stringify({_where:{...n},_start:i.perPage*i.current,_sort:"created_at:DESC",_limit:i.perPage}),u=await fetch(`${ei}/editor-data?${r}`),d=await fetch(`${ei}/editor-data/count?${r}`),a=await u.json(),s=await d.json();return{data:a,count:s}}catch(n){return console.log({error:n}),{error:n}}}const eo=dt(null),Ts=dt([]),vl=dt([]),Le=dt({}),Es=dt([]),Ai=dt([]),zo=dt(0),Ms=dt(0),ls=dt({options:null}),At=dt(null),ca=dt(null);async function p1(t){const{data:e,error:i}=await s1(t);if(i){console.error(i);return}eo.set(e)}const Os=/^[a-z0-9]+(-[a-z0-9]+)*$/,ka=(t,e,i,n="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;n=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),s=r.pop(),c={provider:r.length>0?r[0]:n,prefix:s,name:a};return e&&!Wo(c)?null:c}const u=r[0],d=u.split("-");if(d.length>1){const a={provider:n,prefix:d.shift(),name:d.join("-")};return e&&!Wo(a)?null:a}if(i&&n===""){const a={provider:n,prefix:"",name:u};return e&&!Wo(a,i)?null:a}return null},Wo=(t,e)=>t?!!((t.provider===""||t.provider.match(Os))&&(e&&t.prefix===""||t.prefix.match(Os))&&t.name.match(Os)):!1,av=Object.freeze({left:0,top:0,width:16,height:16}),ua=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),xa=Object.freeze({...av,...ua}),hc=Object.freeze({...xa,body:"",hidden:!1});function g1(t,e){const i={};!t.hFlip!=!e.hFlip&&(i.hFlip=!0),!t.vFlip!=!e.vFlip&&(i.vFlip=!0);const n=((t.rotate||0)+(e.rotate||0))%4;return n&&(i.rotate=n),i}function Kf(t,e){const i=g1(t,e);for(const n in hc)n in ua?n in t&&!(n in i)&&(i[n]=ua[n]):n in e?i[n]=e[n]:n in t&&(i[n]=t[n]);return i}function m1(t,e){const i=t.icons,n=t.aliases||Object.create(null),r=Object.create(null);function u(d){if(i[d])return r[d]=[];if(!(d in r)){r[d]=null;const a=n[d]&&n[d].parent,s=a&&u(a);s&&(r[d]=[a].concat(s))}return r[d]}return(e||Object.keys(i).concat(Object.keys(n))).forEach(u),r}function v1(t,e,i){const n=t.icons,r=t.aliases||Object.create(null);let u={};function d(a){u=Kf(n[a]||r[a],u)}return d(e),i.forEach(d),Kf(t,u)}function lv(t,e){const i=[];if(typeof t!="object"||typeof t.icons!="object")return i;t.not_found instanceof Array&&t.not_found.forEach(r=>{e(r,null),i.push(r)});const n=m1(t);for(const r in n){const u=n[r];u&&(e(r,v1(t,r,u)),i.push(r))}return i}const _1={provider:"",aliases:{},not_found:{},...av};function _l(t,e){for(const i in e)if(i in t&&typeof t[i]!=typeof e[i])return!1;return!0}function cv(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!_l(t,_1))return null;const i=e.icons;for(const r in i){const u=i[r];if(!r.match(Os)||typeof u.body!="string"||!_l(u,hc))return null}const n=e.aliases||Object.create(null);for(const r in n){const u=n[r],d=u.parent;if(!r.match(Os)||typeof d!="string"||!i[d]&&!n[d]||!_l(u,hc))return null}return e}const Jf=Object.create(null);function y1(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Vn(t,e){const i=Jf[t]||(Jf[t]=Object.create(null));return i[e]||(i[e]=y1(t,e))}function mu(t,e){return cv(e)?lv(e,(i,n)=>{n?t.icons[i]=n:t.missing.add(i)}):[]}function b1(t,e,i){try{if(typeof i.body=="string")return t.icons[e]={...i},!0}catch{}return!1}let Fs=!1;function uv(t){return typeof t=="boolean"&&(Fs=t),Fs}function w1(t){const e=typeof t=="string"?ka(t,!0,Fs):t;if(e){const i=Vn(e.provider,e.prefix),n=e.name;return i.icons[n]||(i.missing.has(n)?null:void 0)}}function C1(t,e){const i=ka(t,!0,Fs);if(!i)return!1;const n=Vn(i.provider,i.prefix);return b1(n,i.name,e)}function S1(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Fs&&!e&&!t.prefix){let r=!1;return cv(t)&&(t.prefix="",lv(t,(u,d)=>{d&&C1(u,d)&&(r=!0)})),r}const i=t.prefix;if(!Wo({provider:e,prefix:i,name:"a"}))return!1;const n=Vn(e,i);return!!mu(n,t)}const fv=Object.freeze({width:null,height:null}),hv=Object.freeze({...fv,...ua}),T1=/(-?[0-9.]*[0-9]+[0-9.]*)/g,E1=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Zf(t,e,i){if(e===1)return t;if(i=i||100,typeof t=="number")return Math.ceil(t*e*i)/i;if(typeof t!="string")return t;const n=t.split(T1);if(n===null||!n.length)return t;const r=[];let u=n.shift(),d=E1.test(u);for(;;){if(d){const a=parseFloat(u);isNaN(a)?r.push(u):r.push(Math.ceil(a*e*i)/i)}else r.push(u);if(u=n.shift(),u===void 0)return r.join("");d=!d}}function O1(t,e="defs"){let i="";const n=t.indexOf("<"+e);for(;n>=0;){const r=t.indexOf(">",n),u=t.indexOf("</"+e);if(r===-1||u===-1)break;const d=t.indexOf(">",u);if(d===-1)break;i+=t.slice(r+1,u).trim(),t=t.slice(0,n).trim()+t.slice(d+1)}return{defs:i,content:t}}function k1(t,e){return t?"<defs>"+t+"</defs>"+e:e}function x1(t,e,i){const n=O1(t);return k1(n.defs,e+n.content+i)}const D1=t=>t==="unset"||t==="undefined"||t==="none";function A1(t,e){const i={...xa,...t},n={...hv,...e},r={left:i.left,top:i.top,width:i.width,height:i.height};let u=i.body;[i,n].forEach(m=>{const g=[],v=m.hFlip,_=m.vFlip;let b=m.rotate;v?_?b+=2:(g.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),g.push("scale(-1 1)"),r.top=r.left=0):_&&(g.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),g.push("scale(1 -1)"),r.top=r.left=0);let y;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:y=r.height/2+r.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:y=r.width/2+r.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}b%2===1&&(r.left!==r.top&&(y=r.left,r.left=r.top,r.top=y),r.width!==r.height&&(y=r.width,r.width=r.height,r.height=y)),g.length&&(u=x1(u,'<g transform="'+g.join(" ")+'">',"</g>"))});const d=n.width,a=n.height,s=r.width,c=r.height;let f,o;d===null?(o=a===null?"1em":a==="auto"?c:a,f=Zf(o,s/c)):(f=d==="auto"?s:d,o=a===null?Zf(f,c/s):a==="auto"?c:a);const l={},h=(m,g)=>{D1(g)||(l[m]=g.toString())};h("width",f),h("height",o);const p=[r.left,r.top,s,c];return l.viewBox=p.join(" "),{attributes:l,viewBox:p,body:u}}const P1=/\sid="(\S+)"/g,I1="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let R1=0;function M1(t,e=I1){const i=[];let n;for(;n=P1.exec(t);)i.push(n[1]);if(!i.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(u=>{const d=typeof e=="function"?e(u):e+(R1++).toString(),a=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+d+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const dc=Object.create(null);function F1(t,e){dc[t]=e}function pc(t){return dc[t]||dc[""]}function vu(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const _u=Object.create(null),cs=["https://api.simplesvg.com","https://api.unisvg.com"],Ho=[];for(;cs.length>0;)cs.length===1||Math.random()>.5?Ho.push(cs.shift()):Ho.push(cs.pop());_u[""]=vu({resources:["https://api.iconify.design"].concat(Ho)});function L1(t,e){const i=vu(e);return i===null?!1:(_u[t]=i,!0)}function yu(t){return _u[t]}const N1=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Qf=N1();function j1(t,e){const i=yu(t);if(!i)return 0;let n;if(!i.maxURL)n=0;else{let r=0;i.resources.forEach(d=>{r=Math.max(r,d.length)});const u=e+".json?icons=";n=i.maxURL-r-i.path.length-u.length}return n}function B1(t){return t===404}const U1=(t,e,i)=>{const n=[],r=j1(t,e),u="icons";let d={type:u,provider:t,prefix:e,icons:[]},a=0;return i.forEach((s,c)=>{a+=s.length+1,a>=r&&c>0&&(n.push(d),d={type:u,provider:t,prefix:e,icons:[]},a=s.length),d.icons.push(s)}),n.push(d),n};function z1(t){if(typeof t=="string"){const e=yu(t);if(e)return e.path}return"/"}const W1=(t,e,i)=>{if(!Qf){i("abort",424);return}let n=z1(e.provider);switch(e.type){case"icons":{const u=e.prefix,a=e.icons.join(","),s=new URLSearchParams({icons:a});n+=u+".json?"+s.toString();break}case"custom":{const u=e.uri;n+=u.slice(0,1)==="/"?u.slice(1):u;break}default:i("abort",400);return}let r=503;Qf(t+n).then(u=>{const d=u.status;if(d!==200){setTimeout(()=>{i(B1(d)?"abort":"next",d)});return}return r=501,u.json()}).then(u=>{if(typeof u!="object"||u===null){setTimeout(()=>{u===404?i("abort",u):i("next",r)});return}setTimeout(()=>{i("success",u)})}).catch(()=>{i("next",r)})},H1={prepare:U1,send:W1};function V1(t){const e={loaded:[],missing:[],pending:[]},i=Object.create(null);t.sort((r,u)=>r.provider!==u.provider?r.provider.localeCompare(u.provider):r.prefix!==u.prefix?r.prefix.localeCompare(u.prefix):r.name.localeCompare(u.name));let n={provider:"",prefix:"",name:""};return t.forEach(r=>{if(n.name===r.name&&n.prefix===r.prefix&&n.provider===r.provider)return;n=r;const u=r.provider,d=r.prefix,a=r.name,s=i[u]||(i[u]=Object.create(null)),c=s[d]||(s[d]=Vn(u,d));let f;a in c.icons?f=e.loaded:d===""||c.missing.has(a)?f=e.missing:f=e.pending;const o={provider:u,prefix:d,name:a};f.push(o)}),e}function dv(t,e){t.forEach(i=>{const n=i.loaderCallbacks;n&&(i.loaderCallbacks=n.filter(r=>r.id!==e))})}function X1(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let i=!1;const n=t.provider,r=t.prefix;e.forEach(u=>{const d=u.icons,a=d.pending.length;d.pending=d.pending.filter(s=>{if(s.prefix!==r)return!0;const c=s.name;if(t.icons[c])d.loaded.push({provider:n,prefix:r,name:c});else if(t.missing.has(c))d.missing.push({provider:n,prefix:r,name:c});else return i=!0,!0;return!1}),d.pending.length!==a&&(i||dv([t],u.id),u.callback(d.loaded.slice(0),d.missing.slice(0),d.pending.slice(0),u.abort))})}))}let Y1=0;function $1(t,e,i){const n=Y1++,r=dv.bind(null,i,n);if(!e.pending.length)return r;const u={id:n,icons:e,callback:t,abort:r};return i.forEach(d=>{(d.loaderCallbacks||(d.loaderCallbacks=[])).push(u)}),r}function G1(t,e=!0,i=!1){const n=[];return t.forEach(r=>{const u=typeof r=="string"?ka(r,e,i):r;u&&n.push(u)}),n}var q1={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function K1(t,e,i,n){const r=t.resources.length,u=t.random?Math.floor(Math.random()*r):t.index;let d;if(t.random){let C=t.resources.slice(0);for(d=[];C.length>1;){const T=Math.floor(Math.random()*C.length);d.push(C[T]),C=C.slice(0,T).concat(C.slice(T+1))}d=d.concat(C)}else d=t.resources.slice(u).concat(t.resources.slice(0,u));const a=Date.now();let s="pending",c=0,f,o=null,l=[],h=[];typeof n=="function"&&h.push(n);function p(){o&&(clearTimeout(o),o=null)}function m(){s==="pending"&&(s="aborted"),p(),l.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),l=[]}function g(C,T){T&&(h=[]),typeof C=="function"&&h.push(C)}function v(){return{startTime:a,payload:e,status:s,queriesSent:c,queriesPending:l.length,subscribe:g,abort:m}}function _(){s="failed",h.forEach(C=>{C(void 0,f)})}function b(){l.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),l=[]}function y(C,T,E){const A=T!=="success";switch(l=l.filter(F=>F!==C),s){case"pending":break;case"failed":if(A||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){f=E,_();return}if(A){f=E,l.length||(d.length?w():_());return}if(p(),b(),!t.random){const F=t.resources.indexOf(C.resource);F!==-1&&F!==t.index&&(t.index=F)}s="completed",h.forEach(F=>{F(E)})}function w(){if(s!=="pending")return;p();const C=d.shift();if(C===void 0){if(l.length){o=setTimeout(()=>{p(),s==="pending"&&(b(),_())},t.timeout);return}_();return}const T={status:"pending",resource:C,callback:(E,A)=>{y(T,E,A)}};l.push(T),c++,o=setTimeout(w,t.rotate),i(C,e,T.callback)}return setTimeout(w),v}function pv(t){const e={...q1,...t};let i=[];function n(){i=i.filter(a=>a().status==="pending")}function r(a,s,c){const f=K1(e,a,s,(o,l)=>{n(),c&&c(o,l)});return i.push(f),f}function u(a){return i.find(s=>a(s))||null}return{query:r,find:u,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:n}}function eh(){}const yl=Object.create(null);function J1(t){if(!yl[t]){const e=yu(t);if(!e)return;const i=pv(e),n={config:e,redundancy:i};yl[t]=n}return yl[t]}function Z1(t,e,i){let n,r;if(typeof t=="string"){const u=pc(t);if(!u)return i(void 0,424),eh;r=u.send;const d=J1(t);d&&(n=d.redundancy)}else{const u=vu(t);if(u){n=pv(u);const d=t.resources?t.resources[0]:"",a=pc(d);a&&(r=a.send)}}return!n||!r?(i(void 0,424),eh):n.query(e,r,i)().abort}const th="iconify2",Ls="iconify",gv=Ls+"-count",ih=Ls+"-version",mv=36e5,Q1=168,eC=50;function gc(t,e){try{return t.getItem(e)}catch{}}function bu(t,e,i){try{return t.setItem(e,i),!0}catch{}}function nh(t,e){try{t.removeItem(e)}catch{}}function mc(t,e){return bu(t,gv,e.toString())}function vc(t){return parseInt(gc(t,gv))||0}const Da={local:!0,session:!0},vv={local:new Set,session:new Set};let wu=!1;function tC(t){wu=t}let vo=typeof window>"u"?{}:window;function _v(t){const e=t+"Storage";try{if(vo&&vo[e]&&typeof vo[e].length=="number")return vo[e]}catch{}Da[t]=!1}function yv(t,e){const i=_v(t);if(!i)return;const n=gc(i,ih);if(n!==th){if(n){const a=vc(i);for(let s=0;s<a;s++)nh(i,Ls+s.toString())}bu(i,ih,th),mc(i,0);return}const r=Math.floor(Date.now()/mv)-Q1,u=a=>{const s=Ls+a.toString(),c=gc(i,s);if(typeof c=="string"){try{const f=JSON.parse(c);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>r&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,a))return!0}catch{}nh(i,s)}};let d=vc(i);for(let a=d-1;a>=0;a--)u(a)||(a===d-1?(d--,mc(i,d)):vv[t].add(a))}function bv(){if(!wu){tC(!0);for(const t in Da)yv(t,e=>{const i=e.data,n=e.provider,r=i.prefix,u=Vn(n,r);if(!mu(u,i).length)return!1;const d=i.lastModified||-1;return u.lastModifiedCached=u.lastModifiedCached?Math.min(u.lastModifiedCached,d):d,!0})}}function iC(t,e){const i=t.lastModifiedCached;if(i&&i>=e)return i===e;if(t.lastModifiedCached=e,i)for(const n in Da)yv(n,r=>{const u=r.data;return r.provider!==t.provider||u.prefix!==t.prefix||u.lastModified===e});return!0}function nC(t,e){wu||bv();function i(n){let r;if(!Da[n]||!(r=_v(n)))return;const u=vv[n];let d;if(u.size)u.delete(d=Array.from(u).shift());else if(d=vc(r),d>=eC||!mc(r,d+1))return;const a={cached:Math.floor(Date.now()/mv),provider:t.provider,data:e};return bu(r,Ls+d.toString(),JSON.stringify(a))}e.lastModified&&!iC(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),i("local")||i("session"))}function rh(){}function rC(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,X1(t)}))}function sC(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:i,prefix:n}=t,r=t.iconsToLoad;delete t.iconsToLoad;let u;if(!r||!(u=pc(i)))return;u.prepare(i,n,r).forEach(a=>{Z1(i,a,s=>{if(typeof s!="object")a.icons.forEach(c=>{t.missing.add(c)});else try{const c=mu(t,s);if(!c.length)return;const f=t.pendingIcons;f&&c.forEach(o=>{f.delete(o)}),nC(t,s)}catch(c){console.error(c)}rC(t)})})}))}const oC=(t,e)=>{const i=G1(t,!0,uv()),n=V1(i);if(!n.pending.length){let s=!0;return e&&setTimeout(()=>{s&&e(n.loaded,n.missing,n.pending,rh)}),()=>{s=!1}}const r=Object.create(null),u=[];let d,a;return n.pending.forEach(s=>{const{provider:c,prefix:f}=s;if(f===a&&c===d)return;d=c,a=f,u.push(Vn(c,f));const o=r[c]||(r[c]=Object.create(null));o[f]||(o[f]=[])}),n.pending.forEach(s=>{const{provider:c,prefix:f,name:o}=s,l=Vn(c,f),h=l.pendingIcons||(l.pendingIcons=new Set);h.has(o)||(h.add(o),r[c][f].push(o))}),u.forEach(s=>{const{provider:c,prefix:f}=s;r[c][f].length&&sC(s,r[c][f])}),e?$1(e,n,u):rh};function aC(t,e){const i={...t};for(const n in e){const r=e[n],u=typeof r;n in fv?(r===null||r&&(u==="string"||u==="number"))&&(i[n]=r):u===typeof i[n]&&(i[n]=n==="rotate"?r%4:r)}return i}const lC=/[\s,]+/;function cC(t,e){e.split(lC).forEach(i=>{switch(i.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function uC(t,e=0){const i=t.replace(/^-?[0-9.]*/,"");function n(r){for(;r<0;)r+=4;return r%4}if(i===""){const r=parseInt(t);return isNaN(r)?0:n(r)}else if(i!==t){let r=0;switch(i){case"%":r=25;break;case"deg":r=90}if(r){let u=parseFloat(t.slice(0,t.length-i.length));return isNaN(u)?0:(u=u/r,u%1===0?n(u):0)}}return e}function fC(t,e){let i=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)i+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+t+"</svg>"}function hC(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function dC(t){return"data:image/svg+xml,"+hC(t)}function pC(t){return'url("'+dC(t)+'")'}const sh={...hv,inline:!1},gC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},mC={display:"inline-block"},_c={"background-color":"currentColor"},wv={"background-color":"transparent"},oh={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ah={"-webkit-mask":_c,mask:_c,background:wv};for(const t in ah){const e=ah[t];for(const i in oh)e[t+"-"+i]=oh[i]}function vC(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function _C(t,e){const i=aC(sh,e),n=e.mode||"svg",r=n==="svg"?{...gC}:{};t.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let u=typeof e.style=="string"?e.style:"";for(let v in e){const _=e[v];if(_!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":i[v]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&cC(i,_);break;case"color":u=u+(u.length>0&&u.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?i[v]=uC(_):typeof _=="number"&&(i[v]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete r["aria-hidden"];break;default:if(v.slice(0,3)==="on:")break;sh[v]===void 0&&(r[v]=_)}}const d=A1(t,i),a=d.attributes;if(i.inline&&(u="vertical-align: -0.125em; "+u),n==="svg"){Object.assign(r,a),u!==""&&(r.style=u);let v=0,_=e.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:r,body:M1(d.body,_?()=>_+"ID"+v++:"iconifySvelte")}}const{body:s,width:c,height:f}=t,o=n==="mask"||(n==="bg"?!1:s.indexOf("currentColor")!==-1),l=fC(s,{...a,width:c+"",height:f+""}),p={"--svg":pC(l)},m=v=>{const _=a[v];_&&(p[v]=vC(_))};m("width"),m("height"),Object.assign(p,mC,o?_c:wv);let g="";for(const v in p)g+=v+": "+p[v]+";";return r.style=g+u,{svg:!1,attributes:r}}uv(!0);F1("",H1);if(typeof document<"u"&&typeof window<"u"){bv();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!S1(n))&&console.error(i)}catch{console.error(i)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let i in e){const n="IconifyProviders["+i+"] is invalid.";try{const r=e[i];if(typeof r!="object"||!r||r.resources===void 0)continue;L1(i,r)||console.error(n)}catch{console.error(n)}}}}function yC(t,e,i,n,r){function u(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",u(),{data:{...xa,...t}};let d;if(typeof t!="string"||(d=ka(t,!1,!0))===null)return u(),null;const a=w1(d);if(!a)return i&&(!e.loading||e.loading.name!==t)&&(u(),e.name="",e.loading={name:t,abort:oC([d],n)}),null;u(),e.name!==t&&(e.name=t,r&&!e.destroyed&&r(t));const s=["iconify"];return d.prefix!==""&&s.push("iconify--"+d.prefix),d.provider!==""&&s.push("iconify--"+d.provider),{data:a,classes:s}}function bC(t,e){return t?_C({...xa,...t},e):null}function lh(t){let e;function i(u,d){return u[0].svg?CC:wC}let n=i(t),r=n(t);return{c(){r.c(),e=qe()},m(u,d){r.m(u,d),B(u,e,d)},p(u,d){n===(n=i(u))&&r?r.p(u,d):(r.d(1),r=n(u),r&&(r.c(),r.m(e.parentNode,e)))},d(u){u&&j(e),r.d(u)}}}function wC(t){let e,i=[t[0].attributes],n={};for(let r=0;r<i.length;r+=1)n=Li(n,i[r]);return{c(){e=x("span"),Zo(e,n)},m(r,u){B(r,e,u)},p(r,u){Zo(e,n=Hn(i,[u&1&&r[0].attributes]))},d(r){r&&j(e)}}}function CC(t){let e,i=t[0].body+"",n=[t[0].attributes],r={};for(let u=0;u<n.length;u+=1)r=Li(r,n[u]);return{c(){e=Dy("svg"),df(e,r)},m(u,d){B(u,e,d),e.innerHTML=i},p(u,d){d&1&&i!==(i=u[0].body+"")&&(e.innerHTML=i),df(e,r=Hn(n,[d&1&&u[0].attributes]))},d(u){u&&j(e)}}}function SC(t){let e,i=t[0]&&lh(t);return{c(){i&&i.c(),e=qe()},m(n,r){i&&i.m(n,r),B(n,e,r)},p(n,[r]){n[0]?i?i.p(n,r):(i=lh(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ve,o:ve,d(n){n&&j(e),i&&i.d(n)}}}function TC(t,e,i){const n={name:"",loading:null,destroyed:!1};let r=!1,u=0,d;const a=c=>{typeof e.onLoad=="function"&&e.onLoad(c),wt()("load",{icon:c})};function s(){i(3,u++,u)}return _n(()=>{i(2,r=!0)}),Ji(()=>{i(1,n.destroyed=!0,n),n.loading&&(n.loading.abort(),i(1,n.loading=null,n))}),t.$$set=c=>{i(6,e=Li(Li({},e),ff(c)))},t.$$.update=()=>{{const c=yC(e.icon,n,r,s,a);i(0,d=c?bC(c.data,e):null),d&&c.classes&&i(0,d.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),d)}},e=ff(e),[d,n,r,u]}class Se extends Ve{constructor(e){super(),He(this,e,TC,SC,Ue,{})}}function EC(t){let e,i,n,r,u,d,a,s,c,f,o,l,h;return f=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("input"),u=$(),d=x("div"),a=x("input"),s=$(),c=x("button"),de(f.$$.fragment),S(r,"id","minmax-range"),S(r,"type","range"),S(r,"min","0"),S(r,"max","360"),S(r,"step","1"),S(r,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(n,"class","w-full mt-3"),S(a,"type","text"),S(a,"class","input w-full text-center"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){B(p,e,m),O(e,i),O(i,n),O(n,r),Ye(r,t[1]),O(i,u),O(i,d),O(d,a),Ye(a,t[1]),O(i,s),O(i,c),fe(f,c,null),o=!0,l||(h=[oe(r,"change",t[3]),oe(r,"input",t[3]),oe(r,"input",t[4]),oe(a,"input",t[5]),oe(a,"input",t[6]),oe(c,"click",t[7])],l=!0)},p(p,[m]){m&2&&Ye(r,p[1]),m&2&&a.value!==p[1]&&Ye(a,p[1])},i(p){o||(L(f.$$.fragment,p),o=!0)},o(p){W(f.$$.fragment,p),o=!1},d(p){p&&j(e),he(f),l=!1,Be(h)}}}function OC(t,e,i){let{selectProperty:n=null}=e,{sliderValue:r=0}=e;const u=wt();function d(){u("onChangeRotate",{value:r})}Ji(()=>{i(0,n=null)});function a(){r=xm(this.value),i(1,r)}const s=()=>d();function c(){r=this.value,i(1,r)}const f=()=>d(),o=()=>i(0,n=null);return t.$$set=l=>{"selectProperty"in l&&i(0,n=l.selectProperty),"sliderValue"in l&&i(1,r=l.sliderValue)},[n,r,d,a,s,c,f,o]}class kC extends Ve{constructor(e){super(),He(this,e,OC,EC,Ue,{selectProperty:0,sliderValue:1})}}var xC={grad:.9,turn:360,rad:360/(2*Math.PI)},Wi=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Dt=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},pi=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),t>i?i:t>e?t:e},Cv=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},ch=function(t){return{r:pi(t.r,0,255),g:pi(t.g,0,255),b:pi(t.b,0,255),a:pi(t.a)}},bl=function(t){return{r:Dt(t.r),g:Dt(t.g),b:Dt(t.b),a:Dt(t.a,3)}},DC=/^#([0-9a-f]{3,8})$/i,_o=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Sv=function(t){var e=t.r,i=t.g,n=t.b,r=t.a,u=Math.max(e,i,n),d=u-Math.min(e,i,n),a=d?u===e?(i-n)/d:u===i?2+(n-e)/d:4+(e-i)/d:0;return{h:60*(a<0?a+6:a),s:u?d/u*100:0,v:u/255*100,a:r}},Tv=function(t){var e=t.h,i=t.s,n=t.v,r=t.a;e=e/360*6,i/=100,n/=100;var u=Math.floor(e),d=n*(1-i),a=n*(1-(e-u)*i),s=n*(1-(1-e+u)*i),c=u%6;return{r:255*[n,a,d,d,s,n][c],g:255*[s,n,n,a,d,d][c],b:255*[d,d,s,n,n,a][c],a:r}},uh=function(t){return{h:Cv(t.h),s:pi(t.s,0,100),l:pi(t.l,0,100),a:pi(t.a)}},fh=function(t){return{h:Dt(t.h),s:Dt(t.s),l:Dt(t.l),a:Dt(t.a,3)}},hh=function(t){return Tv((i=(e=t).s,{h:e.h,s:(i*=((n=e.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:e.a}));var e,i,n},ks=function(t){return{h:(e=Sv(t)).h,s:(r=(200-(i=e.s))*(n=e.v)/100)>0&&r<200?i*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,i,n,r},AC=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,PC=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,IC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,RC=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dh={string:[[function(t){var e=DC.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Dt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Dt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=IC.exec(t)||RC.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:ch({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=AC.exec(t)||PC.exec(t);if(!e)return null;var i,n,r=uh({h:(i=e[1],n=e[2],n===void 0&&(n="deg"),Number(i)*(xC[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return hh(r)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,n=t.b,r=t.a,u=r===void 0?1:r;return Wi(e)&&Wi(i)&&Wi(n)?ch({r:Number(e),g:Number(i),b:Number(n),a:Number(u)}):null},"rgb"],[function(t){var e=t.h,i=t.s,n=t.l,r=t.a,u=r===void 0?1:r;if(!Wi(e)||!Wi(i)||!Wi(n))return null;var d=uh({h:Number(e),s:Number(i),l:Number(n),a:Number(u)});return hh(d)},"hsl"],[function(t){var e=t.h,i=t.s,n=t.v,r=t.a,u=r===void 0?1:r;if(!Wi(e)||!Wi(i)||!Wi(n))return null;var d=function(a){return{h:Cv(a.h),s:pi(a.s,0,100),v:pi(a.v,0,100),a:pi(a.a)}}({h:Number(e),s:Number(i),v:Number(n),a:Number(u)});return Tv(d)},"hsv"]]},ph=function(t,e){for(var i=0;i<e.length;i++){var n=e[i][0](t);if(n)return[n,e[i][1]]}return[null,void 0]},MC=function(t){return typeof t=="string"?ph(t.trim(),dh.string):typeof t=="object"&&t!==null?ph(t,dh.object):[null,void 0]},wl=function(t,e){var i=ks(t);return{h:i.h,s:pi(i.s+100*e,0,100),l:i.l,a:i.a}},Cl=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},gh=function(t,e){var i=ks(t);return{h:i.h,s:i.s,l:pi(i.l+100*e,0,100),a:i.a}},mh=function(){function t(e){this.parsed=MC(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Dt(Cl(this.rgba),2)},t.prototype.isDark=function(){return Cl(this.rgba)<.5},t.prototype.isLight=function(){return Cl(this.rgba)>=.5},t.prototype.toHex=function(){return e=bl(this.rgba),i=e.r,n=e.g,r=e.b,d=(u=e.a)<1?_o(Dt(255*u)):"","#"+_o(i)+_o(n)+_o(r)+d;var e,i,n,r,u,d},t.prototype.toRgb=function(){return bl(this.rgba)},t.prototype.toRgbString=function(){return e=bl(this.rgba),i=e.r,n=e.g,r=e.b,(u=e.a)<1?"rgba("+i+", "+n+", "+r+", "+u+")":"rgb("+i+", "+n+", "+r+")";var e,i,n,r,u},t.prototype.toHsl=function(){return fh(ks(this.rgba))},t.prototype.toHslString=function(){return e=fh(ks(this.rgba)),i=e.h,n=e.s,r=e.l,(u=e.a)<1?"hsla("+i+", "+n+"%, "+r+"%, "+u+")":"hsl("+i+", "+n+"%, "+r+"%)";var e,i,n,r,u},t.prototype.toHsv=function(){return e=Sv(this.rgba),{h:Dt(e.h),s:Dt(e.s),v:Dt(e.v),a:Dt(e.a,3)};var e},t.prototype.invert=function(){return ni({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ni(wl(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ni(wl(this.rgba,-e))},t.prototype.grayscale=function(){return ni(wl(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ni(gh(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ni(gh(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ni({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):Dt(this.rgba.a,3);var i},t.prototype.hue=function(e){var i=ks(this.rgba);return typeof e=="number"?ni({h:e,s:i.s,l:i.l,a:i.a}):Dt(i.h)},t.prototype.isEqual=function(e){return this.toHex()===ni(e).toHex()},t}(),ni=function(t){return t instanceof mh?t:new mh(t)};function vh(t){let e;return{c(){e=x("input"),S(e,"type","hidden"),S(e,"name",t[3]),e.value=t[0]},m(i,n){B(i,e,n)},p(i,n){n&8&&S(e,"name",i[3]),n&1&&(e.value=i[0])},d(i){i&&j(e)}}}function FC(t){let e,i,n,r,u,d,a,s,c,f=t[3]&&vh(t);return{c(){e=x("div"),i=x("div"),n=$(),r=x("div"),d=$(),f&&f.c(),a=qe(),S(i,"class","track svelte-x7oaj0"),S(r,"class","thumb svelte-x7oaj0"),S(e,"class","slider svelte-x7oaj0"),S(e,"role","slider"),S(e,"aria-orientation",t[4]),S(e,"aria-valuemax",t[11]),S(e,"aria-valuemin",t[10]),S(e,"aria-valuenow",t[0]),S(e,"aria-valuetext",u=t[2](t[0])),S(e,"aria-label",t[7]),S(e,"aria-labelledby",t[8]),S(e,"aria-controls",t[9]),S(e,"tabindex","0"),Ni(e,"reverse",t[5]),at(e,"--position",t[12])},m(o,l){B(o,e,l),O(e,i),O(e,n),O(e,r),t[22](e),B(o,d,l),f&&f.m(o,l),B(o,a,l),s||(c=[oe(window,"mousemove",t[15]),oe(window,"mouseup",t[16]),oe(e,"keydown",t[13]),oe(e,"mousedown",Ay(function(){di(t[6]?void 0:t[14])&&(t[6]?void 0:t[14]).apply(this,arguments)})),oe(e,"touchstart",Hi(function(){di(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),oe(e,"touchmove",Hi(function(){di(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),oe(e,"touchend",Hi(function(){di(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1})],s=!0)},p(o,[l]){t=o,l&16&&S(e,"aria-orientation",t[4]),l&2048&&S(e,"aria-valuemax",t[11]),l&1024&&S(e,"aria-valuemin",t[10]),l&1&&S(e,"aria-valuenow",t[0]),l&5&&u!==(u=t[2](t[0]))&&S(e,"aria-valuetext",u),l&128&&S(e,"aria-label",t[7]),l&256&&S(e,"aria-labelledby",t[8]),l&512&&S(e,"aria-controls",t[9]),l&32&&Ni(e,"reverse",t[5]),l&4096&&at(e,"--position",t[12]),t[3]?f?f.p(t,l):(f=vh(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:ve,o:ve,d(o){o&&(j(e),j(d),j(a)),t[22](null),f&&f.d(o),s=!1,Be(c)}}}function LC(t,e,i){let n,r,u,d,{min:a=0}=e,{max:s=100}=e,{step:c=1}=e,{value:f=50}=e,{ariaValueText:o=N=>N.toString()}=e,{name:l=void 0}=e,{direction:h="horizontal"}=e,{reverse:p=!1}=e,{keyboardOnly:m=!1}=e,{slider:g=void 0}=e,{ariaLabel:v=void 0}=e,{ariaLabelledBy:_=void 0}=e,{ariaControls:b=void 0}=e,{isDragging:y=!1}=e;const w=wt();function C(N){const V=1/u,ee=Math.round(N*V)/V;return Math.max(n,Math.min(r,ee))}function T(N){const V=N.shiftKey?u*10:u;N.key==="ArrowUp"||N.key==="ArrowRight"?(i(0,f+=V),N.preventDefault()):N.key==="ArrowDown"||N.key==="ArrowLeft"?(i(0,f-=V),N.preventDefault()):N.key==="Home"?(i(0,f=n),N.preventDefault()):N.key==="End"?(i(0,f=r),N.preventDefault()):N.key==="PageUp"?(i(0,f+=u*10),N.preventDefault()):N.key==="PageDown"&&(i(0,f-=u*10),N.preventDefault()),i(0,f=C(f)),w("input",f)}const E={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function A(N){const V=(g==null?void 0:g[E[h].clientSize])||120,ee=(g==null?void 0:g.getBoundingClientRect()[E[h].offset])||0;let te=N[E[h].client]-ee;h==="vertical"&&(te=-1*te+V),p?i(0,f=r-te/V*(r-n)):i(0,f=te/V*(r-n)+n),i(0,f=C(f)),w("input",f)}function F(N){A(N),i(18,y=!0)}function G(N){y&&A(N)}function Y(){i(18,y=!1)}function Q(N){A({clientX:N.changedTouches[0].clientX,clientY:N.changedTouches[0].clientY})}function q(N){Xe[N?"unshift":"push"](()=>{g=N,i(1,g)})}return t.$$set=N=>{"min"in N&&i(19,a=N.min),"max"in N&&i(20,s=N.max),"step"in N&&i(21,c=N.step),"value"in N&&i(0,f=N.value),"ariaValueText"in N&&i(2,o=N.ariaValueText),"name"in N&&i(3,l=N.name),"direction"in N&&i(4,h=N.direction),"reverse"in N&&i(5,p=N.reverse),"keyboardOnly"in N&&i(6,m=N.keyboardOnly),"slider"in N&&i(1,g=N.slider),"ariaLabel"in N&&i(7,v=N.ariaLabel),"ariaLabelledBy"in N&&i(8,_=N.ariaLabelledBy),"ariaControls"in N&&i(9,b=N.ariaControls),"isDragging"in N&&i(18,y=N.isDragging)},t.$$.update=()=>{t.$$.dirty&524288&&i(10,n=typeof a=="string"?parseFloat(a):a),t.$$.dirty&1048576&&i(11,r=typeof s=="string"?parseFloat(s):s),t.$$.dirty&2097152&&(u=typeof c=="string"?parseFloat(c):c),t.$$.dirty&3073&&i(12,d=((f-n)/(r-n)*1).toFixed(4))},[f,g,o,l,h,p,m,v,_,b,n,r,d,T,F,G,Y,Q,y,a,s,c,q]}class fa extends Ve{constructor(e){super(),He(this,e,LC,FC,Ue,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function NC(t){let e,i,n,r,u,d,a,s,c,f,o,l,h;var p=t[2].pickerIndicator;function m(y,w){return{props:{pos:y[6],isDark:y[3]}}}p&&(i=zt(p,m(t)));function g(y){t[13](y)}let v={keyboardOnly:!0,ariaValueText:jC,ariaLabel:"saturation color"};t[0]!==void 0&&(v.value=t[0]),u=new fa({props:v}),Xe.push(()=>ct(u,"value",g));function _(y){t[14](y)}let b={keyboardOnly:!0,ariaValueText:BC,direction:"vertical",ariaLabel:"brightness color"};return t[1]!==void 0&&(b.value=t[1]),c=new fa({props:b}),Xe.push(()=>ct(c,"value",_)),{c(){e=x("div"),i&&de(i.$$.fragment),n=$(),r=x("div"),de(u.$$.fragment),a=$(),s=x("div"),de(c.$$.fragment),S(r,"class","s svelte-amfbfx"),at(r,"--pos-y",t[6].y),S(s,"class","v svelte-amfbfx"),at(s,"--pos-x",t[6].x),S(e,"class","picker svelte-amfbfx"),at(e,"--picker-color-bg",t[5])},m(y,w){B(y,e,w),i&&fe(i,e,null),O(e,n),O(e,r),fe(u,r,null),O(e,a),O(e,s),fe(c,s,null),t[15](e),o=!0,l||(h=[oe(window,"mouseup",t[8]),oe(window,"mousedown",t[10]),oe(window,"mousemove",t[9]),oe(e,"mousedown",Hi(t[7])),oe(e,"touchstart",t[11],{passive:!1}),oe(e,"touchmove",Hi(t[11]),{passive:!1}),oe(e,"touchend",t[11],{passive:!1})],l=!0)},p(y,[w]){if(w&4&&p!==(p=y[2].pickerIndicator)){if(i){Te();const E=i;W(E.$$.fragment,1,0,()=>{he(E,1)}),Ee()}p?(i=zt(p,m(y)),de(i.$$.fragment),L(i.$$.fragment,1),fe(i,e,n)):i=null}else if(p){const E={};w&64&&(E.pos=y[6]),w&8&&(E.isDark=y[3]),i.$set(E)}const C={};!d&&w&1&&(d=!0,C.value=y[0],bt(()=>d=!1)),u.$set(C),w&64&&at(r,"--pos-y",y[6].y);const T={};!f&&w&2&&(f=!0,T.value=y[1],bt(()=>f=!1)),c.$set(T),w&64&&at(s,"--pos-x",y[6].x),w&32&&at(e,"--picker-color-bg",y[5])},i(y){o||(i&&L(i.$$.fragment,y),L(u.$$.fragment,y),L(c.$$.fragment,y),o=!0)},o(y){i&&W(i.$$.fragment,y),W(u.$$.fragment,y),W(c.$$.fragment,y),o=!1},d(y){y&&j(e),i&&he(i),he(u),he(c),t[15](null),l=!1,Be(h)}}}function yo(t,e,i){return Math.min(Math.max(e,t),i)}const jC=t=>`${t}%`,BC=t=>`${t}%`;function UC(t,e,i){const n=wt();let{components:r}=e,{h:u}=e,{s:d}=e,{v:a}=e,{isDark:s}=e,c,f=!1,o,l={x:100,y:0};function h(C){const{width:T,left:E,height:A,top:F}=c.getBoundingClientRect(),G={x:yo(C.clientX-E,0,T),y:yo(C.clientY-F,0,A)};i(0,d=yo(G.x/T,0,1)*100),i(1,a=yo((A-G.y)/A,0,1)*100)}function p(C){C.button===0&&(f=!0,h(C))}function m(){f=!1}function g(C){f&&h(C)}function v(C){C.target.isSameNode(c)}function _(C){C.preventDefault(),h(C.changedTouches[0])}function b(C){d=C,i(0,d)}function y(C){a=C,i(1,a)}function w(C){Xe[C?"unshift":"push"](()=>{c=C,i(4,c)})}return t.$$set=C=>{"components"in C&&i(2,r=C.components),"h"in C&&i(12,u=C.h),"s"in C&&i(0,d=C.s),"v"in C&&i(1,a=C.v),"isDark"in C&&i(3,s=C.isDark)},t.$$.update=()=>{t.$$.dirty&4096&&typeof u=="number"&&i(5,o=ni({h:u,s:100,v:100,a:1}).toHex()),t.$$.dirty&19&&typeof d=="number"&&typeof a=="number"&&c&&i(6,l={x:d,y:100-a}),t.$$.dirty&3&&n("input",{s:d,v:a})},[d,a,r,s,c,o,l,p,m,g,v,_,u,b,y,w]}class zC extends Ve{constructor(e){super(),He(this,e,UC,NC,Ue,{components:2,h:12,s:0,v:1,isDark:3})}}function WC(t){let e;return{c(){e=x("div"),S(e,"class","picker-indicator svelte-i5mg2p"),Ni(e,"is-dark",t[1]),at(e,"--pos-x",t[0].x),at(e,"--pos-y",t[0].y)},m(i,n){B(i,e,n)},p(i,[n]){n&2&&Ni(e,"is-dark",i[1]),n&1&&at(e,"--pos-x",i[0].x),n&1&&at(e,"--pos-y",i[0].y)},i:ve,o:ve,d(i){i&&j(e)}}}function HC(t,e,i){let{pos:n}=e,{isDark:r}=e;return t.$$set=u=>{"pos"in u&&i(0,n=u.pos),"isDark"in u&&i(1,r=u.isDark)},[n,r]}class VC extends Ve{constructor(e){super(),He(this,e,HC,WC,Ue,{pos:0,isDark:1})}}function XC(t){let e,i,n,r,u,d,a,s,c,f;return{c(){e=x("input"),n=$(),r=x("input"),d=$(),a=x("input"),S(e,"aria-label",i=t[4].label.h),e.value=t[9],S(e,"type","number"),S(e,"min","0"),S(e,"max","360"),S(e,"class","svelte-qtukzs"),S(r,"aria-label",u=t[4].label.s),r.value=t[8],S(r,"type","number"),S(r,"min","0"),S(r,"max","100"),S(r,"class","svelte-qtukzs"),S(a,"aria-label",s=t[4].label.v),a.value=t[7],S(a,"type","number"),S(a,"min","0"),S(a,"max","100"),S(a,"class","svelte-qtukzs")},m(o,l){B(o,e,l),B(o,n,l),B(o,r,l),B(o,d,l),B(o,a,l),c||(f=[oe(e,"input",t[13]("h")),oe(r,"input",t[13]("s")),oe(a,"input",t[13]("v"))],c=!0)},p(o,l){l&16&&i!==(i=o[4].label.h)&&S(e,"aria-label",i),l&512&&e.value!==o[9]&&(e.value=o[9]),l&16&&u!==(u=o[4].label.s)&&S(r,"aria-label",u),l&256&&r.value!==o[8]&&(r.value=o[8]),l&16&&s!==(s=o[4].label.v)&&S(a,"aria-label",s),l&128&&a.value!==o[7]&&(a.value=o[7])},d(o){o&&(j(e),j(n),j(r),j(d),j(a)),c=!1,Be(f)}}}function YC(t){let e,i,n,r,u,d,a,s,c,f,o,l,h;return{c(){e=x("input"),r=$(),u=x("input"),s=$(),c=x("input"),S(e,"aria-label",i=t[4].label.r),e.value=n=t[0].r,S(e,"type","number"),S(e,"min","0"),S(e,"max","255"),S(e,"class","svelte-qtukzs"),S(u,"aria-label",d=t[4].label.g),u.value=a=t[0].g,S(u,"type","number"),S(u,"min","0"),S(u,"max","255"),S(u,"class","svelte-qtukzs"),S(c,"aria-label",f=t[4].label.b),c.value=o=t[0].b,S(c,"type","number"),S(c,"min","0"),S(c,"max","255"),S(c,"class","svelte-qtukzs")},m(p,m){B(p,e,m),B(p,r,m),B(p,u,m),B(p,s,m),B(p,c,m),l||(h=[oe(e,"input",t[12]("r")),oe(u,"input",t[12]("g")),oe(c,"input",t[12]("b"))],l=!0)},p(p,m){m&16&&i!==(i=p[4].label.r)&&S(e,"aria-label",i),m&1&&n!==(n=p[0].r)&&e.value!==n&&(e.value=n),m&16&&d!==(d=p[4].label.g)&&S(u,"aria-label",d),m&1&&a!==(a=p[0].g)&&u.value!==a&&(u.value=a),m&16&&f!==(f=p[4].label.b)&&S(c,"aria-label",f),m&1&&o!==(o=p[0].b)&&c.value!==o&&(c.value=o)},d(p){p&&(j(e),j(r),j(u),j(s),j(c)),l=!1,Be(h)}}}function $C(t){let e,i,n,r;return{c(){e=x("input"),S(e,"aria-label",i=t[4].label.hex),e.value=t[1],S(e,"class","svelte-qtukzs"),at(e,"flex",3)},m(u,d){B(u,e,d),n||(r=oe(e,"input",t[11]),n=!0)},p(u,d){d&16&&i!==(i=u[4].label.hex)&&S(e,"aria-label",i),d&2&&e.value!==u[1]&&(e.value=u[1])},d(u){u&&j(e),n=!1,r()}}}function _h(t){let e,i,n,r;return{c(){e=x("input"),S(e,"aria-label",i=t[4].label.a),e.value=t[6],S(e,"type","number"),S(e,"min","0"),S(e,"max","1"),S(e,"step","0.01"),S(e,"class","svelte-qtukzs")},m(u,d){B(u,e,d),n||(r=oe(e,"input",function(){di(t[5]==="hsv"?t[13]("a"):t[12]("a"))&&(t[5]==="hsv"?t[13]("a"):t[12]("a")).apply(this,arguments)}),n=!0)},p(u,d){t=u,d&16&&i!==(i=t[4].label.a)&&S(e,"aria-label",i),d&64&&e.value!==t[6]&&(e.value=t[6])},d(u){u&&j(e),n=!1,r()}}}function GC(t){let e,i=t[4].color[t[5]]+"",n;return{c(){e=x("div"),n=xe(i),S(e,"class","button-like svelte-qtukzs")},m(r,u){B(r,e,u),O(e,n)},p(r,u){u&48&&i!==(i=r[4].color[r[5]]+"")&&Ke(n,i)},d(r){r&&j(e)}}}function qC(t){let e,i,n=t[4].color[t[5]]+"",r,u,d,a=t[4].changeTo+"",s,c,f,o,l;return{c(){e=x("button"),i=x("span"),r=xe(n),u=$(),d=x("span"),s=xe(a),c=$(),f=xe(t[10]),S(i,"class","disappear svelte-qtukzs"),S(i,"aria-hidden","true"),S(d,"class","appear svelte-qtukzs"),S(e,"type","button"),S(e,"class","svelte-qtukzs")},m(h,p){B(h,e,p),O(e,i),O(i,r),O(e,u),O(e,d),O(d,s),O(d,c),O(d,f),o||(l=oe(e,"click",t[15]),o=!0)},p(h,p){p&48&&n!==(n=h[4].color[h[5]]+"")&&Ke(r,n),p&16&&a!==(a=h[4].changeTo+"")&&Ke(s,a),p&1024&&Ke(f,h[10])},d(h){h&&j(e),o=!1,l()}}}function KC(t){let e,i,n,r;function u(l,h){return l[5]==="hex"?$C:l[5]==="rgb"?YC:XC}let d=u(t),a=d(t),s=t[2]&&_h(t);function c(l,h){return l[3].length>1?qC:GC}let f=c(t),o=f(t);return{c(){e=x("div"),i=x("div"),a.c(),n=$(),s&&s.c(),r=$(),o.c(),S(i,"class","input-container svelte-qtukzs"),S(e,"class","text-input svelte-qtukzs")},m(l,h){B(l,e,h),O(e,i),a.m(i,null),O(i,n),s&&s.m(i,null),O(e,r),o.m(e,null)},p(l,[h]){d===(d=u(l))&&a?a.p(l,h):(a.d(1),a=d(l),a&&(a.c(),a.m(i,n))),l[2]?s?s.p(l,h):(s=_h(l),s.c(),s.m(i,null)):s&&(s.d(1),s=null),f===(f=c(l))&&o?o.p(l,h):(o.d(1),o=f(l),o&&(o.c(),o.m(e,null)))},i:ve,o:ve,d(l){l&&j(e),a.d(),s&&s.d(),o.d()}}}const JC=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function ZC(t,e,i){let n,r,u,d,a;const s=wt();let{isAlpha:c}=e,{rgb:f}=e,{hsv:o}=e,{hex:l}=e,{textInputModes:h}=e,{texts:p}=e,m=h[0]||"hex";function g(y){const w=y.target;JC.test(w.value)&&(i(1,l=w.value),s("input",{hex:l}))}function v(y){return function(w){i(0,f={...f,[y]:parseFloat(w.target.value)}),s("input",{rgb:f})}}function _(y){return function(w){i(14,o={...o,[y]:parseFloat(w.target.value)}),s("input",{hsv:o})}}const b=()=>i(5,m=n);return t.$$set=y=>{"isAlpha"in y&&i(2,c=y.isAlpha),"rgb"in y&&i(0,f=y.rgb),"hsv"in y&&i(14,o=y.hsv),"hex"in y&&i(1,l=y.hex),"textInputModes"in y&&i(3,h=y.textInputModes),"texts"in y&&i(4,p=y.texts)},t.$$.update=()=>{t.$$.dirty&40&&i(10,n=h[(h.indexOf(m)+1)%h.length]),t.$$.dirty&16384&&i(9,r=Math.round(o.h)),t.$$.dirty&16384&&i(8,u=Math.round(o.s)),t.$$.dirty&16384&&i(7,d=Math.round(o.v)),t.$$.dirty&16384&&i(6,a=o.a===void 0?1:Math.round(o.a*100)/100)},[f,l,c,h,p,m,a,d,u,r,n,g,v,_,o,b]}class QC extends Ve{constructor(e){super(),He(this,e,ZC,KC,Ue,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function eS(t){let e,i,n,r,u,d,a,s,c,f,o;return{c(){e=x("label"),i=x("div"),n=x("input"),r=$(),u=x("div"),d=$(),a=x("div"),s=$(),c=xe(t[2]),S(n,"type","color"),S(n,"name",t[3]),n.value=t[1],S(n,"aria-haspopup","dialog"),S(n,"class","svelte-r4tbal"),S(u,"class","alpha svelte-r4tbal"),S(a,"class","color svelte-r4tbal"),at(a,"background",t[1]),S(i,"class","container svelte-r4tbal"),S(e,"class","svelte-r4tbal")},m(l,h){B(l,e,h),O(e,i),O(i,n),O(i,r),O(i,u),O(i,d),O(i,a),O(e,s),O(e,c),t[5](e),f||(o=[oe(n,"click",Hi(bo)),oe(n,"mousedown",Hi(bo)),oe(e,"click",Hi(bo)),oe(e,"mousedown",Hi(bo))],f=!0)},p(l,[h]){h&8&&S(n,"name",l[3]),h&2&&(n.value=l[1]),h&2&&at(a,"background",l[1]),h&4&&Ke(c,l[2])},i:ve,o:ve,d(l){l&&j(e),t[5](null),f=!1,Be(o)}}}function bo(){}function tS(t,e,i){let{labelElement:n}=e,{hex:r}=e,{label:u}=e,{name:d=void 0}=e,{isOpen:a}=e;function s(c){Xe[c?"unshift":"push"](()=>{n=c,i(0,n)})}return t.$$set=c=>{"labelElement"in c&&i(0,n=c.labelElement),"hex"in c&&i(1,r=c.hex),"label"in c&&i(2,u=c.label),"name"in c&&i(3,d=c.name),"isOpen"in c&&i(4,a=c.isOpen)},[n,r,u,d,a,s]}class iS extends Ve{constructor(e){super(),He(this,e,tS,eS,Ue,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function nS(t){let e,i,n;const r=t[4].default,u=$s(r,t,t[3],null);return{c(){e=x("div"),u&&u.c(),S(e,"class","wrapper svelte-1h4o41o"),S(e,"role",i=t[2]?"dialog":void 0),S(e,"aria-label","color picker"),Ni(e,"is-open",t[1])},m(d,a){B(d,e,a),u&&u.m(e,null),t[5](e),n=!0},p(d,[a]){u&&u.p&&(!n||a&8)&&qs(u,r,d,d[3],n?Gs(r,d[3],a,null):Ks(d[3]),null),(!n||a&4&&i!==(i=d[2]?"dialog":void 0))&&S(e,"role",i),(!n||a&2)&&Ni(e,"is-open",d[1])},i(d){n||(L(u,d),n=!0)},o(d){W(u,d),n=!1},d(d){d&&j(e),u&&u.d(d),t[5](null)}}}function rS(t,e,i){let{$$slots:n={},$$scope:r}=e,{wrapper:u}=e,{isOpen:d}=e,{isDialog:a}=e;function s(c){Xe[c?"unshift":"push"](()=>{u=c,i(0,u)})}return t.$$set=c=>{"wrapper"in c&&i(0,u=c.wrapper),"isOpen"in c&&i(1,d=c.isOpen),"isDialog"in c&&i(2,a=c.isDialog),"$$scope"in c&&i(3,r=c.$$scope)},[u,d,a,r,n,s]}class sS extends Ve{constructor(e){super(),He(this,e,rS,nS,Ue,{wrapper:0,isOpen:1,isDialog:2})}}const Sl={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},Ev="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function oS(t){return function(e){if(e.target===window)return;const i=e.target;if(!t.contains(i))return;const n=t.querySelectorAll(Ev),r=n[0],u=n[n.length-1];function d(s){return s.code==="Tab"&&!s.shiftKey}function a(s){return s.code==="Tab"&&s.shiftKey}d(e)&&e.target===u?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),u.focus())}}const aS=t=>{const e=t.querySelector(Ev);e&&e.focus();const i=oS(t);return document.addEventListener("keydown",i),{destroy(){document.removeEventListener("keydown",i)}}};function lS(t){let e,i,n,r,u,d,a=t[1].label.withoutColor+"",s,c,f;return{c(){e=x("label"),i=x("div"),n=x("input"),r=$(),u=x("span"),d=$(),s=xe(a),S(n,"type","checkbox"),S(n,"class","svelte-pt866j"),S(u,"class","svelte-pt866j"),S(i,"class","svelte-pt866j"),S(e,"class","nullability-checkbox svelte-pt866j")},m(o,l){B(o,e,l),O(e,i),O(i,n),n.checked=t[0],O(i,r),O(i,u),O(e,d),O(e,s),c||(f=oe(n,"change",t[2]),c=!0)},p(o,[l]){l&1&&(n.checked=o[0]),l&2&&a!==(a=o[1].label.withoutColor+"")&&Ke(s,a)},i:ve,o:ve,d(o){o&&j(e),c=!1,f()}}}function cS(t,e,i){let{isUndefined:n}=e,{texts:r}=e;function u(){n=this.checked,i(0,n)}return t.$$set=d=>{"isUndefined"in d&&i(0,n=d.isUndefined),"texts"in d&&i(1,r=d.texts)},[n,r,u]}class uS extends Ve{constructor(e){super(),He(this,e,cS,lS,Ue,{isUndefined:0,texts:1})}}function fS(t){let e;return{c(){e=x("input"),S(e,"type","hidden"),e.value=t[2],S(e,"name",t[6])},m(i,n){B(i,e,n)},p(i,n){n[0]&4&&(e.value=i[2]),n[0]&64&&S(e,"name",i[6])},i:ve,o:ve,d(i){i&&j(e)}}}function hS(t){let e,i,n,r;function u(s){t[33](s)}var d=t[23]().input;function a(s,c){let f={isOpen:!0,hex:s[2],label:s[5],name:s[6]};return s[21]!==void 0&&(f.labelElement=s[21]),{props:f}}return d&&(e=zt(d,a(t)),Xe.push(()=>ct(e,"labelElement",u))),{c(){e&&de(e.$$.fragment),n=qe()},m(s,c){e&&fe(e,s,c),B(s,n,c),r=!0},p(s,c){if(d!==(d=s[23]().input)){if(e){Te();const f=e;W(f.$$.fragment,1,0,()=>{he(f,1)}),Ee()}d?(e=zt(d,a(s)),Xe.push(()=>ct(e,"labelElement",u)),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,n.parentNode,n)):e=null}else if(d){const f={};c[0]&4&&(f.hex=s[2]),c[0]&32&&(f.label=s[5]),c[0]&64&&(f.name=s[6]),!i&&c[0]&2097152&&(i=!0,f.labelElement=s[21],bt(()=>i=!1)),e.$set(f)}},i(s){r||(e&&L(e.$$.fragment,s),r=!0)},o(s){e&&W(e.$$.fragment,s),r=!1},d(s){s&&j(n),e&&he(e,s)}}}function yh(t){let e,i,n,r;function u(s){t[34](s)}var d=t[23]().nullabilityCheckbox;function a(s,c){let f={texts:s[24]()};return s[16]!==void 0&&(f.isUndefined=s[16]),{props:f}}return d&&(e=zt(d,a(t)),Xe.push(()=>ct(e,"isUndefined",u))),{c(){e&&de(e.$$.fragment),n=qe()},m(s,c){e&&fe(e,s,c),B(s,n,c),r=!0},p(s,c){if(d!==(d=s[23]().nullabilityCheckbox)){if(e){Te();const f=e;W(f.$$.fragment,1,0,()=>{he(f,1)}),Ee()}d?(e=zt(d,a(s)),Xe.push(()=>ct(e,"isUndefined",u)),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,n.parentNode,n)):e=null}else if(d){const f={};!i&&c[0]&65536&&(i=!0,f.isUndefined=s[16],bt(()=>i=!1)),e.$set(f)}},i(s){r||(e&&L(e.$$.fragment,s),r=!0)},o(s){e&&W(e.$$.fragment,s),r=!1},d(s){s&&j(n),e&&he(e,s)}}}function bh(t){var r;let e,i,n;return i=new fa({props:{min:0,max:1,step:.01,value:((r=t[1])==null?void 0:r.a)??t[18].a,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.a}}),i.$on("input",t[27]("a")),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","a svelte-tsvobk"),at(e,"--alphaless-color",(t[2]?t[2]:t[19]).substring(0,7))},m(u,d){B(u,e,d),fe(i,e,null),n=!0},p(u,d){var s;const a={};d[0]&262146&&(a.value=((s=u[1])==null?void 0:s.a)??u[18].a),d[0]&4096&&(a.direction=u[12]),d[0]&4096&&(a.reverse=u[12]==="vertical"),i.$set(a),d[0]&524292&&at(e,"--alphaless-color",(u[2]?u[2]:u[19]).substring(0,7))},i(u){n||(L(i.$$.fragment,u),n=!0)},o(u){W(i.$$.fragment,u),n=!1},d(u){u&&j(e),he(i)}}}function wh(t){let e,i,n;var r=t[23]().textInput;function u(d,a){return{props:{hex:d[2]??d[19],rgb:d[0]??d[17],hsv:d[1]??d[18],isAlpha:d[8],textInputModes:d[11],texts:d[24]()}}}return r&&(e=zt(r,u(t)),e.$on("input",t[35])),{c(){e&&de(e.$$.fragment),i=qe()},m(d,a){e&&fe(e,d,a),B(d,i,a),n=!0},p(d,a){if(r!==(r=d[23]().textInput)){if(e){Te();const s=e;W(s.$$.fragment,1,0,()=>{he(s,1)}),Ee()}r?(e=zt(r,u(d)),e.$on("input",d[35]),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,i.parentNode,i)):e=null}else if(r){const s={};a[0]&524292&&(s.hex=d[2]??d[19]),a[0]&131073&&(s.rgb=d[0]??d[17]),a[0]&262146&&(s.hsv=d[1]??d[18]),a[0]&256&&(s.isAlpha=d[8]),a[0]&2048&&(s.textInputModes=d[11]),e.$set(s)}},i(d){n||(e&&L(e.$$.fragment,d),n=!0)},o(d){e&&W(e.$$.fragment,d),n=!1},d(d){d&&j(i),e&&he(e,d)}}}function dS(t){let e,i,n;var r=t[23]().a11yNotice;function u(d,a){return{props:{components:d[23](),a11yColors:d[13],hex:d[2]||"#00000000",a11yTexts:d[15],a11yLevel:d[14]}}}return r&&(e=zt(r,u(t))),{c(){e&&de(e.$$.fragment),i=qe()},m(d,a){e&&fe(e,d,a),B(d,i,a),n=!0},p(d,a){if(r!==(r=d[23]().a11yNotice)){if(e){Te();const s=e;W(s.$$.fragment,1,0,()=>{he(s,1)}),Ee()}r?(e=zt(r,u(d)),de(e.$$.fragment),L(e.$$.fragment,1),fe(e,i.parentNode,i)):e=null}else if(r){const s={};a[0]&8192&&(s.a11yColors=d[13]),a[0]&4&&(s.hex=d[2]||"#00000000"),a[0]&32768&&(s.a11yTexts=d[15]),a[0]&16384&&(s.a11yLevel=d[14]),e.$set(s)}},i(d){n||(e&&L(e.$$.fragment,d),n=!0)},o(d){e&&W(e.$$.fragment,d),n=!1},d(d){d&&j(i),e&&he(e,d)}}}function pS(t){var g,v,_,b;let e,i,n,r,u,d,a,s,c=t[23]().a11yNotice,f,o,l=t[7]&&yh(t);i=new zC({props:{components:t[23](),h:((g=t[1])==null?void 0:g.h)??t[18].h,s:((v=t[1])==null?void 0:v.s)??t[18].s,v:((_=t[1])==null?void 0:_.v)??t[18].v,isDark:t[3]}}),i.$on("input",t[28](["s","v"])),u=new fa({props:{min:0,max:360,step:1,value:((b=t[1])==null?void 0:b.h)??t[18].h,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.h}}),u.$on("input",t[27]("h"));let h=t[8]&&bh(t),p=t[10]&&wh(t),m=c&&dS(t);return{c(){l&&l.c(),e=$(),de(i.$$.fragment),n=$(),r=x("div"),de(u.$$.fragment),d=$(),h&&h.c(),a=$(),p&&p.c(),s=$(),m&&m.c(),f=qe(),S(r,"class","h svelte-tsvobk")},m(y,w){l&&l.m(y,w),B(y,e,w),fe(i,y,w),B(y,n,w),B(y,r,w),fe(u,r,null),B(y,d,w),h&&h.m(y,w),B(y,a,w),p&&p.m(y,w),B(y,s,w),m&&m.m(y,w),B(y,f,w),o=!0},p(y,w){var E,A,F,G;y[7]?l?(l.p(y,w),w[0]&128&&L(l,1)):(l=yh(y),l.c(),L(l,1),l.m(e.parentNode,e)):l&&(Te(),W(l,1,1,()=>{l=null}),Ee());const C={};w[0]&262146&&(C.h=((E=y[1])==null?void 0:E.h)??y[18].h),w[0]&262146&&(C.s=((A=y[1])==null?void 0:A.s)??y[18].s),w[0]&262146&&(C.v=((F=y[1])==null?void 0:F.v)??y[18].v),w[0]&8&&(C.isDark=y[3]),i.$set(C);const T={};w[0]&262146&&(T.value=((G=y[1])==null?void 0:G.h)??y[18].h),w[0]&4096&&(T.direction=y[12]),w[0]&4096&&(T.reverse=y[12]==="vertical"),u.$set(T),y[8]?h?(h.p(y,w),w[0]&256&&L(h,1)):(h=bh(y),h.c(),L(h,1),h.m(a.parentNode,a)):h&&(Te(),W(h,1,1,()=>{h=null}),Ee()),y[10]?p?(p.p(y,w),w[0]&1024&&L(p,1)):(p=wh(y),p.c(),L(p,1),p.m(s.parentNode,s)):p&&(Te(),W(p,1,1,()=>{p=null}),Ee()),c&&m.p(y,w)},i(y){o||(L(l),L(i.$$.fragment,y),L(u.$$.fragment,y),L(h),L(p),L(m),o=!0)},o(y){W(l),W(i.$$.fragment,y),W(u.$$.fragment,y),W(h),W(p),W(m),o=!1},d(y){y&&(j(e),j(n),j(r),j(d),j(a),j(s),j(f)),l&&l.d(y),he(i,y),he(u),h&&h.d(y),p&&p.d(y),m&&m.d(y)}}}function gS(t){let e,i,n,r,u,d,a,s,c,f;const o=[hS,fS],l=[];function h(v,_){return v[9]?0:v[6]?1:-1}~(i=h(t))&&(n=l[i]=o[i](t));function p(v){t[36](v)}var m=t[23]().wrapper;function g(v,_){let b={isOpen:v[4],isDialog:v[9],$$slots:{default:[pS]},$$scope:{ctx:v}};return v[22]!==void 0&&(b.wrapper=v[22]),{props:b}}return m&&(u=zt(m,g(t)),Xe.push(()=>ct(u,"wrapper",p))),{c(){e=x("span"),n&&n.c(),r=$(),u&&de(u.$$.fragment),S(e,"class",a="color-picker "+t[12]+" svelte-tsvobk")},m(v,_){B(v,e,_),~i&&l[i].m(e,null),O(e,r),u&&fe(u,e,null),t[37](e),s=!0,c||(f=[oe(window,"mousedown",t[25]),oe(window,"keyup",t[26])],c=!0)},p(v,_){let b=i;if(i=h(v),i===b?~i&&l[i].p(v,_):(n&&(Te(),W(l[b],1,1,()=>{l[b]=null}),Ee()),~i?(n=l[i],n?n.p(v,_):(n=l[i]=o[i](v),n.c()),L(n,1),n.m(e,r)):n=null),m!==(m=v[23]().wrapper)){if(u){Te();const y=u;W(y.$$.fragment,1,0,()=>{he(y,1)}),Ee()}m?(u=zt(m,g(v)),Xe.push(()=>ct(u,"wrapper",p)),de(u.$$.fragment),L(u.$$.fragment,1),fe(u,e,null)):u=null}else if(m){const y={};_[0]&16&&(y.isOpen=v[4]),_[0]&512&&(y.isDialog=v[9]),_[0]&1047951|_[1]&4096&&(y.$$scope={dirty:_,ctx:v}),!d&&_[0]&4194304&&(d=!0,y.wrapper=v[22],bt(()=>d=!1)),u.$set(y)}(!s||_[0]&4096&&a!==(a="color-picker "+v[12]+" svelte-tsvobk"))&&S(e,"class",a)},i(v){s||(L(n),u&&L(u.$$.fragment,v),s=!0)},o(v){W(n),u&&W(u.$$.fragment,v),s=!1},d(v){v&&j(e),~i&&l[i].d(),u&&he(u),t[37](null),c=!1,Be(f)}}}function mS(t,e,i){const n=wt();let{components:r={}}=e,{label:u="Choose a color"}=e,{name:d=void 0}=e,{nullable:a=!1}=e,{rgb:s=a?void 0:{r:255,g:0,b:0,a:1}}=e,{hsv:c=a?void 0:{h:0,s:100,v:100,a:1}}=e,{hex:f=a?void 0:"#ff0000"}=e,{color:o=void 0}=e,{isDark:l=!1}=e,{isAlpha:h=!0}=e,{isDialog:p=!0}=e,{isOpen:m=!p}=e,{isTextInput:g=!0}=e,{textInputModes:v=["hex","rgb","hsv"]}=e,{sliderDirection:_="vertical"}=e,{disableCloseClickOutside:b=!1}=e,{a11yColors:y=[{bgHex:"#ffffff"}]}=e,{a11yLevel:w="AA"}=e,{texts:C=void 0}=e,{a11yTexts:T=void 0}=e,E={r:255,g:0,b:0,a:1},A={h:0,s:100,v:100,a:1},F="#ff0000",G=!1,Y=G,Q,q,N,V;const ee={pickerIndicator:VC,textInput:QC,input:iS,nullabilityCheckbox:uS,wrapper:sS};function te(){return{...ee,...r}}function k(){return{label:{...Sl.label,...C==null?void 0:C.label},color:{...Sl.color,...C==null?void 0:C.color},changeTo:(C==null?void 0:C.changeTo)??Sl.changeTo}}function P({target:H}){p&&(q.contains(H)||q.isSameNode(H)?i(4,m=!m):m&&!N.contains(H)&&!b&&i(4,m=!1))}function R({key:H,target:se}){if(p)H==="Enter"&&q.contains(se)?(i(4,m=!m),setTimeout(()=>{V=aS(N)})):H==="Escape"&&m&&(i(4,m=!1),Q.contains(se)&&(q==null||q.focus(),V==null||V.destroy()));else return}function M(){if(G&&!Y){Y=!0,i(1,c=i(0,s=i(2,f=void 0))),n("input",{color:o,hsv:c,rgb:s,hex:f});return}else if(Y&&!G){Y=!1,i(1,c=A),i(0,s=E),i(2,f=F),n("input",{color:o,hsv:c,rgb:s,hex:f});return}if(!c&&!s&&!f){i(16,G=!0),Y=!0,n("input",{color:void 0,hsv:c,rgb:s,hex:f});return}c&&s&&c.h===A.h&&c.s===A.s&&c.v===A.v&&c.a===A.a&&s.r===E.r&&s.g===E.g&&s.b===E.b&&s.a===E.a&&f===F||(i(16,G=!1),c&&c.a===void 0&&i(1,c.a=1,c),A.a===void 0&&i(18,A.a=1,A),s&&s.a===void 0&&i(0,s.a=1,s),E.a===void 0&&i(17,E.a=1,E),(f==null?void 0:f.substring(7))==="ff"&&i(2,f=f.substring(0,7)),(f==null?void 0:f.substring(7))==="ff"&&i(2,f=f.substring(0,7)),c&&(c.h!==A.h||c.s!==A.s||c.v!==A.v||c.a!==A.a)?(i(29,o=ni(c)),i(0,s=o.toRgb()),i(2,f=o.toHex())):s&&(s.r!==E.r||s.g!==E.g||s.b!==E.b||s.a!==E.a)?(i(29,o=ni(s)),i(2,f=o.toHex()),i(1,c=o.toHsv())):f&&f!==F&&(i(29,o=ni(f)),i(0,s=o.toRgb()),i(1,c=o.toHsv())),o&&i(3,l=o.isDark()),f&&(i(18,A=Object.assign({},c)),i(17,E=Object.assign({},s)),i(19,F=f),Y=G,n("input",{color:o,hsv:c,rgb:s,hex:f})))}function K(H){return se=>{c||i(1,c={...A}),i(1,c[H]=se.detail,c)}}function I(H){return se=>{c||i(1,c={...A}),H.forEach(pe=>{c&&i(1,c[pe]=se.detail[pe],c)})}}function D(H){q=H,i(21,q)}function z(H){G=H,i(16,G)}const J=({detail:H})=>{H.hsv?i(1,c=H.hsv):H.rgb?i(0,s=H.rgb):H.hex&&i(2,f=H.hex)};function ne(H){N=H,i(22,N)}function Z(H){Xe[H?"unshift":"push"](()=>{Q=H,i(20,Q)})}return t.$$set=H=>{"components"in H&&i(30,r=H.components),"label"in H&&i(5,u=H.label),"name"in H&&i(6,d=H.name),"nullable"in H&&i(7,a=H.nullable),"rgb"in H&&i(0,s=H.rgb),"hsv"in H&&i(1,c=H.hsv),"hex"in H&&i(2,f=H.hex),"color"in H&&i(29,o=H.color),"isDark"in H&&i(3,l=H.isDark),"isAlpha"in H&&i(8,h=H.isAlpha),"isDialog"in H&&i(9,p=H.isDialog),"isOpen"in H&&i(4,m=H.isOpen),"isTextInput"in H&&i(10,g=H.isTextInput),"textInputModes"in H&&i(11,v=H.textInputModes),"sliderDirection"in H&&i(12,_=H.sliderDirection),"disableCloseClickOutside"in H&&i(31,b=H.disableCloseClickOutside),"a11yColors"in H&&i(13,y=H.a11yColors),"a11yLevel"in H&&i(14,w=H.a11yLevel),"texts"in H&&i(32,C=H.texts),"a11yTexts"in H&&i(15,T=H.a11yTexts)},t.$$.update=()=>{t.$$.dirty[0]&7&&(c||s||f)&&M(),t.$$.dirty[0]&65536&&M()},[s,c,f,l,m,u,d,a,h,p,g,v,_,y,w,T,G,E,A,F,Q,q,N,te,k,P,R,K,I,o,r,b,C,D,z,J,ne,Z]}class Cu extends Ve{constructor(e){super(),He(this,e,mS,gS,Ue,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function vS(t){let e,i,n,r,u,d,a,s,c,f,o;function l(p){t[4](p)}let h={isAlpha:!1,label:""};return t[2]!==void 0&&(h.hex=t[2]),r=new Cu({props:h}),Xe.push(()=>ct(r,"hex",l)),r.$on("input",t[5]),s=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div"),de(r.$$.fragment),d=$(),a=x("button"),de(s.$$.fragment),S(n,"class","grow flex justify-center color-picker-wrapper"),S(a,"type","button"),S(a,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){B(p,e,m),O(e,i),O(i,n),fe(r,n,null),O(i,d),O(i,a),fe(s,a,null),c=!0,f||(o=oe(a,"click",t[6]),f=!0)},p(p,[m]){const g={};!u&&m&4&&(u=!0,g.hex=p[2],bt(()=>u=!1)),r.$set(g)},i(p){c||(L(r.$$.fragment,p),L(s.$$.fragment,p),c=!0)},o(p){W(r.$$.fragment,p),W(s.$$.fragment,p),c=!1},d(p){p&&j(e),he(r),he(s),f=!1,o()}}}function _S(t){if(typeof t=="object"&&t!==null)return"#000000";const e=typeof t=="string"?t:String(t),n=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e);if(n){const[,u,d,a]=n.map(Number),s=u.toString(16).padStart(2,"0"),c=d.toString(16).padStart(2,"0"),f=a.toString(16).padStart(2,"0");return`#${s}${c}${f}`}return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?e:"#000000"}function yS(t,e,i){let{selectProperty:n=null}=e,{object:r=null}=e,u="#000000";u=_S(r.fill);const d=wt();Ji(()=>{i(0,n=null)});function a(f){u=f,i(2,u)}const s=()=>{r.set("fill",u),d("onChangeColor")},c=()=>i(0,n=null);return t.$$set=f=>{"selectProperty"in f&&i(0,n=f.selectProperty),"object"in f&&i(1,r=f.object)},[n,r,u,d,a,s,c]}class bS extends Ve{constructor(e){super(),He(this,e,yS,vS,Ue,{selectProperty:0,object:1})}}function Ch(t,e,i){const n=t.slice();return n[7]=e[i],n}function Sh(t){let e,i,n,r,u,d,a,s;function c(){return t[5](t[7])}return{c(){e=x("li"),i=x("button"),n=x("img"),d=$(),$e(n.src,r=t[7].thumbnail)||S(n,"src",r),S(n,"alt",u=t[7].fontName),S(n,"class","object-contain border rounded"),S(i,"type","button")},m(f,o){B(f,e,o),O(e,i),O(i,n),O(e,d),a||(s=oe(i,"click",c),a=!0)},p(f,o){t=f,o&4&&!$e(n.src,r=t[7].thumbnail)&&S(n,"src",r),o&4&&u!==(u=t[7].fontName)&&S(n,"alt",u)},d(f){f&&j(e),a=!1,s()}}}function wS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p=Ne(t[2]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Sh(Ch(t,p,g));return f=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("textarea"),u=$(),d=x("div"),a=x("ul");for(let g=0;g<m.length;g+=1)m[g].c();s=$(),c=x("button"),de(f.$$.fragment),S(r,"class","textarea"),S(n,"class","w-full flex justify-center"),S(a,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 h-52 overflow-y-auto"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(g,v){B(g,e,v),O(e,i),O(i,n),O(n,r),Ye(r,t[0]),O(i,u),O(i,d),O(d,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(a,null);O(i,s),O(i,c),fe(f,c,null),o=!0,l||(h=[oe(r,"input",t[4]),oe(c,"click",t[6])],l=!0)},p(g,[v]){if(v&1&&Ye(r,g[0]),v&12){p=Ne(g[2]);let _;for(_=0;_<p.length;_+=1){const b=Ch(g,p,_);m[_]?m[_].p(b,v):(m[_]=Sh(b),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i(g){o||(L(f.$$.fragment,g),o=!0)},o(g){W(f.$$.fragment,g),o=!1},d(g){g&&j(e),Tt(m,g),he(f),l=!1,Be(h)}}}function CS(t,e,i){let n;Fe(t,Ts,f=>i(2,n=f));let{selectProperty:r=null}=e,{text:u=""}=e;const d=wt();Ji(()=>{i(1,r=null)});function a(){u=this.value,i(0,u)}const s=f=>d("onChangeFontFamily",{fontFamily:f.fontFamily}),c=()=>i(1,r=null);return t.$$set=f=>{"selectProperty"in f&&i(1,r=f.selectProperty),"text"in f&&i(0,u=f.text)},t.$$.update=()=>{t.$$.dirty&1&&u&&d("onChangeText",{text:u})},[u,r,n,d,a,s,c]}let SS=class extends Ve{constructor(e){super(),He(this,e,CS,wS,Ue,{selectProperty:1,text:0})}};function TS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w,C,T,E;return a=new Se({props:{icon:"mingcute:align-left-line",height:"20"}}),l=new Se({props:{icon:"mingcute:align-center-line",height:"20"}}),v=new Se({props:{icon:"iconoir:align-right",height:"20"}}),y=new Se({props:{icon:"ion:close"}}),C=km(t[3][0]),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("input"),u=$(),d=x("label"),de(a.$$.fragment),s=$(),c=x("input"),f=$(),o=x("label"),de(l.$$.fragment),h=$(),p=x("input"),m=$(),g=x("label"),de(v.$$.fragment),_=$(),b=x("button"),de(y.$$.fragment),S(r,"id","align-left"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="left",Ye(r,r.__value),S(d,"for","align-left"),S(d,"class","radio-label"),S(c,"id","align-center"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="center",Ye(c,c.__value),S(o,"for","align-center"),S(o,"class","radio-label"),S(p,"id","align-right"),S(p,"class","hidden radio-input"),S(p,"type","radio"),p.__value="right",Ye(p,p.__value),S(g,"for","align-right"),S(g,"class","radio-label"),S(n,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),C.p(r,c,p)},m(A,F){B(A,e,F),O(e,i),O(i,n),O(n,r),r.checked=r.__value===t[0],O(n,u),O(n,d),fe(a,d,null),O(n,s),O(n,c),c.checked=c.__value===t[0],O(n,f),O(n,o),fe(l,o,null),O(n,h),O(n,p),p.checked=p.__value===t[0],O(n,m),O(n,g),fe(v,g,null),O(i,_),O(i,b),fe(y,b,null),w=!0,T||(E=[oe(r,"change",t[2]),oe(c,"change",t[4]),oe(p,"change",t[5]),oe(b,"click",t[6])],T=!0)},p(A,[F]){F&1&&(r.checked=r.__value===A[0]),F&1&&(c.checked=c.__value===A[0]),F&1&&(p.checked=p.__value===A[0])},i(A){w||(L(a.$$.fragment,A),L(l.$$.fragment,A),L(v.$$.fragment,A),L(y.$$.fragment,A),w=!0)},o(A){W(a.$$.fragment,A),W(l.$$.fragment,A),W(v.$$.fragment,A),W(y.$$.fragment,A),w=!1},d(A){A&&j(e),he(a),he(l),he(v),he(y),C.r(),T=!1,Be(E)}}}function ES(t,e,i){let{selectProperty:n=null}=e,{align:r="left"}=e;const u=wt();Ji(()=>{i(1,n=null)});const d=[[]];function a(){r=this.__value,i(0,r)}function s(){r=this.__value,i(0,r)}function c(){r=this.__value,i(0,r)}const f=()=>i(1,n=null);return t.$$set=o=>{"selectProperty"in o&&i(1,n=o.selectProperty),"align"in o&&i(0,r=o.align)},t.$$.update=()=>{t.$$.dirty&1&&r&&u("onChangeAlign",{align:r})},[r,n,a,d,s,c,f]}class OS extends Ve{constructor(e){super(),He(this,e,ES,TS,Ue,{selectProperty:1,align:0})}}function kS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b;return a=new Se({props:{icon:"ci:text",height:"20"}}),l=new Se({props:{icon:"clarity:italic-line",height:"20"}}),m=new Se({props:{icon:"ion:close"}}),v=km(t[3][0]),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("input"),u=$(),d=x("label"),de(a.$$.fragment),s=$(),c=x("input"),f=$(),o=x("label"),de(l.$$.fragment),h=$(),p=x("button"),de(m.$$.fragment),S(r,"id","align-normal"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="normal",Ye(r,r.__value),S(d,"for","align-normal"),S(d,"class","radio-label"),S(c,"id","align-italic"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="italic",Ye(c,c.__value),S(o,"for","align-italic"),S(o,"class","radio-label"),S(n,"class","grow flex justify-center"),S(p,"type","button"),S(p,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),v.p(r,c)},m(y,w){B(y,e,w),O(e,i),O(i,n),O(n,r),r.checked=r.__value===t[0],O(n,u),O(n,d),fe(a,d,null),O(n,s),O(n,c),c.checked=c.__value===t[0],O(n,f),O(n,o),fe(l,o,null),O(i,h),O(i,p),fe(m,p,null),g=!0,_||(b=[oe(r,"change",t[2]),oe(c,"change",t[4]),oe(p,"click",t[5])],_=!0)},p(y,[w]){w&1&&(r.checked=r.__value===y[0]),w&1&&(c.checked=c.__value===y[0])},i(y){g||(L(a.$$.fragment,y),L(l.$$.fragment,y),L(m.$$.fragment,y),g=!0)},o(y){W(a.$$.fragment,y),W(l.$$.fragment,y),W(m.$$.fragment,y),g=!1},d(y){y&&j(e),he(a),he(l),he(m),v.r(),_=!1,Be(b)}}}function xS(t,e,i){let{selectProperty:n=null}=e,{style:r="normal"}=e;console.log({style:r});const u=wt();Ji(()=>{i(1,n=null)});const d=[[]];function a(){r=this.__value,i(0,r)}function s(){r=this.__value,i(0,r)}const c=()=>i(1,n=null);return t.$$set=f=>{"selectProperty"in f&&i(1,n=f.selectProperty),"style"in f&&i(0,r=f.style)},t.$$.update=()=>{t.$$.dirty&1&&r&&u("onChangeStyle",{style:r})},[r,n,a,d,s,c]}class DS extends Ve{constructor(e){super(),He(this,e,xS,kS,Ue,{selectProperty:1,style:0})}}function AS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w,C,T;return a=new Se({props:{icon:"radix-icons:underline",height:"20"}}),l=new Se({props:{icon:"radix-icons:overline",height:"20"}}),v=new Se({props:{icon:"radix-icons:strikethrough",height:"20"}}),y=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("input"),u=$(),d=x("label"),de(a.$$.fragment),s=$(),c=x("input"),f=$(),o=x("label"),de(l.$$.fragment),h=$(),p=x("input"),m=$(),g=x("label"),de(v.$$.fragment),_=$(),b=x("button"),de(y.$$.fragment),S(r,"id","decoration-underline"),S(r,"class","hidden radio-input"),S(r,"type","checkbox"),S(d,"for","decoration-underline"),S(d,"class","radio-label"),S(c,"id","decoration-overline"),S(c,"class","hidden radio-input"),S(c,"type","checkbox"),S(o,"for","decoration-overline"),S(o,"class","radio-label"),S(p,"id","decoration-through"),S(p,"class","hidden radio-input"),S(p,"type","checkbox"),S(g,"for","decoration-through"),S(g,"class","radio-label"),S(n,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(E,A){B(E,e,A),O(e,i),O(i,n),O(n,r),r.checked=t[1].underline,O(n,u),O(n,d),fe(a,d,null),O(n,s),O(n,c),c.checked=t[1].overline,O(n,f),O(n,o),fe(l,o,null),O(n,h),O(n,p),p.checked=t[1].linethrough,O(n,m),O(n,g),fe(v,g,null),O(i,_),O(i,b),fe(y,b,null),w=!0,C||(T=[oe(r,"change",t[3]),oe(c,"change",t[4]),oe(p,"change",t[5]),oe(b,"click",t[6])],C=!0)},p(E,[A]){A&2&&(r.checked=E[1].underline),A&2&&(c.checked=E[1].overline),A&2&&(p.checked=E[1].linethrough)},i(E){w||(L(a.$$.fragment,E),L(l.$$.fragment,E),L(v.$$.fragment,E),L(y.$$.fragment,E),w=!0)},o(E){W(a.$$.fragment,E),W(l.$$.fragment,E),W(v.$$.fragment,E),W(y.$$.fragment,E),w=!1},d(E){E&&j(e),he(a),he(l),he(v),he(y),C=!1,Be(T)}}}function PS(t,e,i){let{selectProperty:n=null}=e,{object:r=""}=e,u={underline:r.underline,overline:r.overline,linethrough:r.linethrough};const d=wt();Ji(()=>{i(0,n=null)});function a(){u.underline=this.checked,i(1,u)}function s(){u.overline=this.checked,i(1,u)}function c(){u.linethrough=this.checked,i(1,u)}const f=()=>i(0,n=null);return t.$$set=o=>{"selectProperty"in o&&i(0,n=o.selectProperty),"object"in o&&i(2,r=o.object)},t.$$.update=()=>{t.$$.dirty&2&&u&&d("onChangeDecoration",{decoration:u})},[n,u,r,a,s,c,f]}class IS extends Ve{constructor(e){super(),He(this,e,PS,AS,Ue,{selectProperty:0,object:2})}}function RS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v;function _(y){t[3](y)}let b={isAlpha:!1,label:""};return t[1].stroke!==void 0&&(b.hex=t[1].stroke),r=new Cu({props:b}),Xe.push(()=>ct(r,"hex",_)),p=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div"),de(r.$$.fragment),d=$(),a=x("div"),s=x("input"),c=$(),f=x("div"),o=x("input"),l=$(),h=x("button"),de(p.$$.fragment),S(n,"class","grow flex justify-center"),S(s,"id","minmax-range"),S(s,"type","range"),S(s,"min","0"),S(s,"step","0.5"),S(s,"max","20"),S(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(a,"class","grow w-full"),S(o,"type","text"),S(o,"class","input w-full"),S(h,"type","button"),S(h,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(y,w){B(y,e,w),O(e,i),O(i,n),fe(r,n,null),O(i,d),O(i,a),O(a,s),Ye(s,t[1].strokeWidth),O(i,c),O(i,f),O(f,o),Ye(o,t[1].strokeWidth),O(i,l),O(i,h),fe(p,h,null),m=!0,g||(v=[oe(s,"change",t[4]),oe(s,"input",t[4]),oe(o,"input",t[5]),oe(h,"click",t[6])],g=!0)},p(y,[w]){const C={};!u&&w&2&&(u=!0,C.hex=y[1].stroke,bt(()=>u=!1)),r.$set(C),w&2&&Ye(s,y[1].strokeWidth),w&2&&o.value!==y[1].strokeWidth&&Ye(o,y[1].strokeWidth)},i(y){m||(L(r.$$.fragment,y),L(p.$$.fragment,y),m=!0)},o(y){W(r.$$.fragment,y),W(p.$$.fragment,y),m=!1},d(y){y&&j(e),he(r),he(p),g=!1,Be(v)}}}function MS(t,e,i){let{selectProperty:n=null}=e,{object:r={}}=e,u={strokeWidth:r.strokeWidth?r.strokeWidth:0,stroke:r.stroke?r.stroke:"#000000"};const d=wt();Ji(()=>{i(0,n=null)});function a(o){t.$$.not_equal(u.stroke,o)&&(u.stroke=o,i(1,u))}function s(){u.strokeWidth=xm(this.value),i(1,u)}function c(){u.strokeWidth=this.value,i(1,u)}const f=()=>i(0,n=null);return t.$$set=o=>{"selectProperty"in o&&i(0,n=o.selectProperty),"object"in o&&i(2,r=o.object)},t.$$.update=()=>{t.$$.dirty&2&&u&&d("onChangeStroke",{stroke:u})},[n,u,r,a,s,c,f]}class FS extends Ve{constructor(e){super(),He(this,e,MS,RS,Ue,{selectProperty:0,object:2})}}function Th(t,e,i){const n=t.slice();return n[6]=e[i],n[7]=e,n[8]=i,n}function Eh(t){let e,i,n;function r(a){t[3](a,t[6])}function u(){return t[4](t[6])}let d={isAlpha:!1,label:""};return t[6].fill!==void 0&&(d.hex=t[6].fill),e=new Cu({props:d}),Xe.push(()=>ct(e,"hex",r)),e.$on("input",u),{c(){de(e.$$.fragment)},m(a,s){fe(e,a,s),n=!0},p(a,s){t=a;const c={};!i&&s&2&&(i=!0,c.hex=t[6].fill,bt(()=>i=!1)),e.$set(c)},i(a){n||(L(e.$$.fragment,a),n=!0)},o(a){W(e.$$.fragment,a),n=!1},d(a){he(e,a)}}}function LS(t){let e,i,n,r,u,d,a,s,c,f=Ne(t[1]._objects),o=[];for(let h=0;h<f.length;h+=1)o[h]=Eh(Th(t,f,h));const l=h=>W(o[h],1,1,()=>{o[h]=null});return d=new Se({props:{icon:"ion:close"}}),{c(){e=x("div"),i=x("div"),n=x("div");for(let h=0;h<o.length;h+=1)o[h].c();r=$(),u=x("button"),de(d.$$.fragment),S(n,"class","grow flex justify-center w-full color-picker-wrapper"),S(u,"type","button"),S(u,"class","btn white-btn absolute -top-2 -right-2"),S(i,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(h,p){B(h,e,p),O(e,i),O(i,n);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(n,null);O(i,r),O(i,u),fe(d,u,null),a=!0,s||(c=oe(u,"click",t[5]),s=!0)},p(h,[p]){if(p&6){f=Ne(h[1]._objects);let m;for(m=0;m<f.length;m+=1){const g=Th(h,f,m);o[m]?(o[m].p(g,p),L(o[m],1)):(o[m]=Eh(g),o[m].c(),L(o[m],1),o[m].m(n,null))}for(Te(),m=f.length;m<o.length;m+=1)l(m);Ee()}},i(h){if(!a){for(let p=0;p<f.length;p+=1)L(o[p]);L(d.$$.fragment,h),a=!0}},o(h){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)W(o[p]);W(d.$$.fragment,h),a=!1},d(h){h&&j(e),Tt(o,h),he(d),s=!1,c()}}}function NS(t,e,i){let{selectProperty:n=null}=e,{object:r=null}=e;const u=wt();Ji(()=>{i(0,n=null)});function d(c,f){t.$$.not_equal(f.fill,c)&&(f.fill=c,i(1,r))}const a=c=>{c.set("fill",c.fill),u("onChangeColors")},s=()=>i(0,n=null);return t.$$set=c=>{"selectProperty"in c&&i(0,n=c.selectProperty),"object"in c&&i(1,r=c.object)},[n,r,u,d,a,s]}class jS extends Ve{constructor(e){super(),He(this,e,NS,LS,Ue,{selectProperty:0,object:1})}}function Oh(t,e,i){const n=t.slice();return n[16]=e[i],n}function kh(t){let e,i,n,r,u,d,a;function s(){return t[9](t[16])}return{c(){e=x("button"),i=x("img"),u=$(),$e(i.src,n=t[16].file.url)||S(i,"src",n),S(i,"alt",r=t[16].name),S(i,"class","max-w-full"),S(e,"class","masonry-item flex flex-col justify-center")},m(c,f){B(c,e,f),O(e,i),O(e,u),d||(a=oe(e,"click",s),d=!0)},p(c,f){t=c,f&2&&!$e(i.src,n=t[16].file.url)&&S(i,"src",n),f&2&&r!==(r=t[16].name)&&S(i,"alt",r)},d(c){c&&j(e),d=!1,a()}}}function BS(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v;d=new Se({props:{icon:"mingcute:left-line",height:"30"}});let _=Ne(t[1]),b=[];for(let y=0;y<_.length;y+=1)b[y]=kh(Oh(t,_,y));return{c(){e=x("div"),i=x("h2"),n=x("span"),n.textContent="클립아트",r=$(),u=x("button"),de(d.$$.fragment),a=$(),s=x("div"),c=x("div"),f=x("input"),o=$(),l=x("button"),l.textContent="검색",h=$(),p=x("div");for(let y=0;y<b.length;y+=1)b[y].c();S(u,"type","button"),S(u,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"type","search"),S(f,"class","border p-2 rounded join-left text-sm grow"),S(f,"placeholder","키워드 검색"),f.required=!0,S(l,"type","submit"),S(l,"class","btn btn-sm primary-btn join-right text-sm"),S(c,"class","flex w-full"),S(s,"class","w-full mt-3"),S(p,"class","grow mt-3 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(y,w){B(y,e,w),O(e,i),O(i,n),O(i,r),O(i,u),fe(d,u,null),O(e,a),O(e,s),O(s,c),O(c,f),Ye(f,t[3].keyword),O(c,o),O(c,l),O(e,h),O(e,p);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(p,null);t[10](p),m=!0,g||(v=[oe(u,"click",t[6]),oe(f,"input",t[7]),oe(l,"click",t[8])],g=!0)},p(y,[w]){if(w&8&&f.value!==y[3].keyword&&Ye(f,y[3].keyword),w&3){_=Ne(y[1]);let C;for(C=0;C<_.length;C+=1){const T=Oh(y,_,C);b[C]?b[C].p(T,w):(b[C]=kh(T),b[C].c(),b[C].m(p,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=_.length}},i(y){m||(L(d.$$.fragment,y),m=!0)},o(y){W(d.$$.fragment,y),m=!1},d(y){y&&j(e),he(d),Tt(b,y),t[10](null),g=!1,Be(v)}}}function US(t,e,i){let n,r;Fe(t,eo,_=>i(13,n=_)),Fe(t,At,_=>i(4,r=_));let{handleAddClipArt:u}=e;wt();let d=[],a,s=!1,c=!0,f={perPage:24,current:0,keyword:"",categories:[]};async function o(_=!1){_&&(i(3,f.current=0,f),i(1,d=[])),s=!0;const b=await o1(n.id,f);i(1,d=[...d,...b.data]),c=b.data.length===f.perPage,s=!1}function l(){const _=a.scrollHeight,b=a.scrollTop,y=a.clientHeight;b+y>=_-100&&!s&&c&&(i(3,f.current++,f),o())}_n(()=>{o(),a.addEventListener("scroll",l)});const h=()=>ye(At,r=null,r);function p(){f.keyword=this.value,i(3,f)}const m=()=>o(!0),g=_=>u(_);function v(_){Xe[_?"unshift":"push"](()=>{a=_,i(2,a)})}return t.$$set=_=>{"handleAddClipArt"in _&&i(0,u=_.handleAddClipArt)},[u,d,a,f,r,o,h,p,m,g,v]}class zS extends Ve{constructor(e){super(),He(this,e,US,BS,Ue,{handleAddClipArt:0})}}function WS(t){let e;return{c(){e=x("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(i,n){B(i,e,n)},d(i){i&&j(e)}}}function HS(t){let e;return{c(){e=x("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(i,n){B(i,e,n)},d(i){i&&j(e)}}}function VS(t){let e,i,n,r,u;function d(c,f){return c[0]?HS:WS}let a=d(t),s=a(t);return{c(){e=x("div"),s.c(),i=$(),n=x("input"),S(n,"type","file"),n.multiple=!0,S(e,"class","dropzone svelte-19ndfup"),S(e,"role","dropzone"),Ni(e,"active",t[0])},m(c,f){B(c,e,f),s.m(e,null),O(e,i),O(e,n),r||(u=[oe(n,"change",t[4]),oe(e,"dragover",t[1]),oe(e,"dragleave",t[2]),oe(e,"drop",t[3])],r=!0)},p(c,[f]){a!==(a=d(c))&&(s.d(1),s=a(c),s&&(s.c(),s.m(e,i))),f&1&&Ni(e,"active",c[0])},i:ve,o:ve,d(c){c&&j(e),s.d(),r=!1,Be(u)}}}function XS(t,e,i){const n=wt();let r=!1;function u(c){c.preventDefault(),i(0,r=!0)}function d(){i(0,r=!1)}function a(c){c.preventDefault(),i(0,r=!1);const f=c.dataTransfer.files;n("drop",f)}function s(c){const f=c.target.files;n("drop",f)}return[r,u,d,a,s]}class YS extends Ve{constructor(e){super(),He(this,e,XS,VS,Ue,{})}}/*!
* Cropper.js v1.6.1
* https://fengyuanchen.github.io/cropperjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:44:19.860Z
*/function xh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Ov(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?xh(Object(i),!0).forEach(function(n){qS(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xh(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(t)}function $S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xv(n.key),n)}}function GS(t,e,i){return e&&Dh(t.prototype,e),i&&Dh(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function qS(t,e,i){return e=xv(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function kv(t){return KS(t)||JS(t)||ZS(t)||QS()}function KS(t){if(Array.isArray(t))return bc(t)}function JS(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZS(t,e){if(t){if(typeof t=="string")return bc(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bc(t,e)}}function bc(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function QS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eT(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xv(t){var e=eT(t,"string");return typeof e=="symbol"?e:String(e)}var Aa=typeof window<"u"&&typeof window.document<"u",ji=Aa?window:{},Su=Aa&&ji.document.documentElement?"ontouchstart"in ji.document.documentElement:!1,Tu=Aa?"PointerEvent"in ji:!1,nt="cropper",Eu="all",Dv="crop",Av="move",Pv="zoom",bn="e",wn="w",rr="s",Zi="n",us="ne",fs="nw",hs="se",ds="sw",wc="".concat(nt,"-crop"),Ah="".concat(nt,"-disabled"),Kt="".concat(nt,"-hidden"),Ph="".concat(nt,"-hide"),tT="".concat(nt,"-invisible"),ha="".concat(nt,"-modal"),Cc="".concat(nt,"-move"),Ns="".concat(nt,"Action"),wo="".concat(nt,"Preview"),Ou="crop",Iv="move",Rv="none",Sc="crop",Tc="cropend",Ec="cropmove",Oc="cropstart",Ih="dblclick",iT=Su?"touchstart":"mousedown",nT=Su?"touchmove":"mousemove",rT=Su?"touchend touchcancel":"mouseup",Rh=Tu?"pointerdown":iT,Mh=Tu?"pointermove":nT,Fh=Tu?"pointerup pointercancel":rT,Lh="ready",Nh="resize",jh="wheel",kc="zoom",Bh="image/jpeg",sT=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,oT=/^data:/,aT=/^data:image\/jpeg;base64,/,lT=/^img|canvas$/i,Mv=200,Fv=100,Uh={viewMode:0,dragMode:Ou,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Mv,minContainerHeight:Fv,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},cT='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',uT=Number.isNaN||ji.isNaN;function We(t){return typeof t=="number"&&!uT(t)}var zh=function(e){return e>0&&e<1/0};function Tl(t){return typeof t>"u"}function Xn(t){return yc(t)==="object"&&t!==null}var fT=Object.prototype.hasOwnProperty;function vr(t){if(!Xn(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&fT.call(i,"isPrototypeOf")}catch{return!1}}function Gt(t){return typeof t=="function"}var hT=Array.prototype.slice;function Lv(t){return Array.from?Array.from(t):hT.call(t)}function yt(t,e){return t&&Gt(e)&&(Array.isArray(t)||We(t.length)?Lv(t).forEach(function(i,n){e.call(t,i,n,t)}):Xn(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var rt=Object.assign||function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Xn(e)&&n.length>0&&n.forEach(function(u){Xn(u)&&Object.keys(u).forEach(function(d){e[d]=u[d]})}),e},dT=/\.\d*(?:0|9){12}\d*$/;function kr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return dT.test(t)?Math.round(t*e)/e:t}var pT=/^width|height|left|top|marginLeft|marginTop$/;function ln(t,e){var i=t.style;yt(e,function(n,r){pT.test(r)&&We(n)&&(n="".concat(n,"px")),i[r]=n})}function gT(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function xt(t,e){if(e){if(We(t.length)){yt(t,function(n){xt(n,e)});return}if(t.classList){t.classList.add(e);return}var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Mi(t,e){if(e){if(We(t.length)){yt(t,function(i){Mi(i,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function _r(t,e,i){if(e){if(We(t.length)){yt(t,function(n){_r(n,e,i)});return}i?xt(t,e):Mi(t,e)}}var mT=/([a-z\d])([A-Z])/g;function ku(t){return t.replace(mT,"$1-$2").toLowerCase()}function xc(t,e){return Xn(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(ku(e)))}function js(t,e,i){Xn(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(ku(e)),i)}function vT(t,e){if(Xn(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(ku(e)))}var Nv=/\s\s*/,jv=function(){var t=!1;if(Aa){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(u){e=u}});ji.addEventListener("test",i,n),ji.removeEventListener("test",i,n)}return t}();function vi(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(Nv).forEach(function(u){if(!jv){var d=t.listeners;d&&d[u]&&d[u][i]&&(r=d[u][i],delete d[u][i],Object.keys(d[u]).length===0&&delete d[u],Object.keys(d).length===0&&delete t.listeners)}t.removeEventListener(u,r,n)})}function ui(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(Nv).forEach(function(u){if(n.once&&!jv){var d=t.listeners,a=d===void 0?{}:d;r=function(){delete a[u][i],t.removeEventListener(u,r,n);for(var c=arguments.length,f=new Array(c),o=0;o<c;o++)f[o]=arguments[o];i.apply(t,f)},a[u]||(a[u]={}),a[u][i]&&t.removeEventListener(u,a[u][i],n),a[u][i]=r,t.listeners=a}t.addEventListener(u,r,n)})}function xr(t,e,i){var n;return Gt(Event)&&Gt(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(n)}function Bv(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var El=ji.location,_T=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Wh(t){var e=t.match(_T);return e!==null&&(e[1]!==El.protocol||e[2]!==El.hostname||e[3]!==El.port)}function Hh(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function xs(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,r=t.translateX,u=t.translateY,d=[];We(r)&&r!==0&&d.push("translateX(".concat(r,"px)")),We(u)&&u!==0&&d.push("translateY(".concat(u,"px)")),We(e)&&e!==0&&d.push("rotate(".concat(e,"deg)")),We(i)&&i!==1&&d.push("scaleX(".concat(i,")")),We(n)&&n!==1&&d.push("scaleY(".concat(n,")"));var a=d.length?d.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function yT(t){var e=Ov({},t),i=0;return yt(t,function(n,r){delete e[r],yt(e,function(u){var d=Math.abs(n.startX-u.startX),a=Math.abs(n.startY-u.startY),s=Math.abs(n.endX-u.endX),c=Math.abs(n.endY-u.endY),f=Math.sqrt(d*d+a*a),o=Math.sqrt(s*s+c*c),l=(o-f)/f;Math.abs(l)>Math.abs(i)&&(i=l)})}),i}function Co(t,e){var i=t.pageX,n=t.pageY,r={endX:i,endY:n};return e?r:Ov({startX:i,startY:n},r)}function bT(t){var e=0,i=0,n=0;return yt(t,function(r){var u=r.startX,d=r.startY;e+=u,i+=d,n+=1}),e/=n,i/=n,{pageX:e,pageY:i}}function cn(t){var e=t.aspectRatio,i=t.height,n=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",u=zh(n),d=zh(i);if(u&&d){var a=i*e;r==="contain"&&a>n||r==="cover"&&a<n?i=n/e:n=i*e}else u?i=n/e:d&&(n=i*e);return{width:n,height:i}}function wT(t){var e=t.width,i=t.height,n=t.degree;if(n=Math.abs(n)%180,n===90)return{width:i,height:e};var r=n%90*Math.PI/180,u=Math.sin(r),d=Math.cos(r),a=e*d+i*u,s=e*u+i*d;return n>90?{width:s,height:a}:{width:a,height:s}}function CT(t,e,i,n){var r=e.aspectRatio,u=e.naturalWidth,d=e.naturalHeight,a=e.rotate,s=a===void 0?0:a,c=e.scaleX,f=c===void 0?1:c,o=e.scaleY,l=o===void 0?1:o,h=i.aspectRatio,p=i.naturalWidth,m=i.naturalHeight,g=n.fillColor,v=g===void 0?"transparent":g,_=n.imageSmoothingEnabled,b=_===void 0?!0:_,y=n.imageSmoothingQuality,w=y===void 0?"low":y,C=n.maxWidth,T=C===void 0?1/0:C,E=n.maxHeight,A=E===void 0?1/0:E,F=n.minWidth,G=F===void 0?0:F,Y=n.minHeight,Q=Y===void 0?0:Y,q=document.createElement("canvas"),N=q.getContext("2d"),V=cn({aspectRatio:h,width:T,height:A}),ee=cn({aspectRatio:h,width:G,height:Q},"cover"),te=Math.min(V.width,Math.max(ee.width,p)),k=Math.min(V.height,Math.max(ee.height,m)),P=cn({aspectRatio:r,width:T,height:A}),R=cn({aspectRatio:r,width:G,height:Q},"cover"),M=Math.min(P.width,Math.max(R.width,u)),K=Math.min(P.height,Math.max(R.height,d)),I=[-M/2,-K/2,M,K];return q.width=kr(te),q.height=kr(k),N.fillStyle=v,N.fillRect(0,0,te,k),N.save(),N.translate(te/2,k/2),N.rotate(s*Math.PI/180),N.scale(f,l),N.imageSmoothingEnabled=b,N.imageSmoothingQuality=w,N.drawImage.apply(N,[t].concat(kv(I.map(function(D){return Math.floor(kr(D))})))),N.restore(),q}var Uv=String.fromCharCode;function ST(t,e,i){var n="";i+=e;for(var r=e;r<i;r+=1)n+=Uv(t.getUint8(r));return n}var TT=/^data:.*,/;function ET(t){var e=t.replace(TT,""),i=atob(e),n=new ArrayBuffer(i.length),r=new Uint8Array(n);return yt(r,function(u,d){r[d]=i.charCodeAt(d)}),n}function OT(t,e){for(var i=[],n=8192,r=new Uint8Array(t);r.length>0;)i.push(Uv.apply(null,Lv(r.subarray(0,n)))),r=r.subarray(n);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function kT(t){var e=new DataView(t),i;try{var n,r,u;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var d=e.byteLength,a=2;a+1<d;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var s=r+4,c=r+10;if(ST(e,s,4)==="Exif"){var f=e.getUint16(c);if(n=f===18761,(n||f===19789)&&e.getUint16(c+2,n)===42){var o=e.getUint32(c+4,n);o>=8&&(u=c+o)}}}if(u){var l=e.getUint16(u,n),h,p;for(p=0;p<l;p+=1)if(h=u+p*12+2,e.getUint16(h,n)===274){h+=8,i=e.getUint16(h,n),e.setUint16(h,1,n);break}}}catch{i=1}return i}function xT(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:i,scaleY:n}}var DT={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,i=this.options,n=this.container,r=this.cropper,u=Number(i.minContainerWidth),d=Number(i.minContainerHeight);xt(r,Kt),Mi(e,Kt);var a={width:Math.max(n.offsetWidth,u>=0?u:Mv),height:Math.max(n.offsetHeight,d>=0?d:Fv)};this.containerData=a,ln(r,{width:a.width,height:a.height}),xt(e,Kt),Mi(r,Kt)},initCanvas:function(){var e=this.containerData,i=this.imageData,n=this.options.viewMode,r=Math.abs(i.rotate)%180===90,u=r?i.naturalHeight:i.naturalWidth,d=r?i.naturalWidth:i.naturalHeight,a=u/d,s=e.width,c=e.height;e.height*a>e.width?n===3?s=e.height*a:c=e.width/a:n===3?c=e.width/a:s=e.height*a;var f={aspectRatio:a,naturalWidth:u,naturalHeight:d,width:s,height:c};this.canvasData=f,this.limited=n===1||n===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=rt({},f)},limitCanvas:function(e,i){var n=this.options,r=this.containerData,u=this.canvasData,d=this.cropBoxData,a=n.viewMode,s=u.aspectRatio,c=this.cropped&&d;if(e){var f=Number(n.minCanvasWidth)||0,o=Number(n.minCanvasHeight)||0;a>1?(f=Math.max(f,r.width),o=Math.max(o,r.height),a===3&&(o*s>f?f=o*s:o=f/s)):a>0&&(f?f=Math.max(f,c?d.width:0):o?o=Math.max(o,c?d.height:0):c&&(f=d.width,o=d.height,o*s>f?f=o*s:o=f/s));var l=cn({aspectRatio:s,width:f,height:o});f=l.width,o=l.height,u.minWidth=f,u.minHeight=o,u.maxWidth=1/0,u.maxHeight=1/0}if(i)if(a>(c?0:1)){var h=r.width-u.width,p=r.height-u.height;u.minLeft=Math.min(0,h),u.minTop=Math.min(0,p),u.maxLeft=Math.max(0,h),u.maxTop=Math.max(0,p),c&&this.limited&&(u.minLeft=Math.min(d.left,d.left+(d.width-u.width)),u.minTop=Math.min(d.top,d.top+(d.height-u.height)),u.maxLeft=d.left,u.maxTop=d.top,a===2&&(u.width>=r.width&&(u.minLeft=Math.min(0,h),u.maxLeft=Math.max(0,h)),u.height>=r.height&&(u.minTop=Math.min(0,p),u.maxTop=Math.max(0,p))))}else u.minLeft=-u.width,u.minTop=-u.height,u.maxLeft=r.width,u.maxTop=r.height},renderCanvas:function(e,i){var n=this.canvasData,r=this.imageData;if(i){var u=wT({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),d=u.width,a=u.height,s=n.width*(d/n.naturalWidth),c=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(c-n.height)/2,n.width=s,n.height=c,n.aspectRatio=d/a,n.naturalWidth=d,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,ln(this.canvas,rt({width:n.width,height:n.height},xs({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var i=this.canvasData,n=this.imageData,r=n.naturalWidth*(i.width/i.naturalWidth),u=n.naturalHeight*(i.height/i.naturalHeight);rt(n,{width:r,height:u,left:(i.width-r)/2,top:(i.height-u)/2}),ln(this.image,rt({width:n.width,height:n.height},xs(rt({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,u={width:i.width,height:i.height};n&&(i.height*n>i.width?u.height=u.width/n:u.width=u.height*n),this.cropBoxData=u,this.limitCropBox(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.width=Math.max(u.minWidth,u.width*r),u.height=Math.max(u.minHeight,u.height*r),u.left=i.left+(i.width-u.width)/2,u.top=i.top+(i.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCropBoxData=rt({},u)},limitCropBox:function(e,i){var n=this.options,r=this.containerData,u=this.canvasData,d=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(e){var c=Number(n.minCropBoxWidth)||0,f=Number(n.minCropBoxHeight)||0,o=a?Math.min(r.width,u.width,u.width+u.left,r.width-u.left):r.width,l=a?Math.min(r.height,u.height,u.height+u.top,r.height-u.top):r.height;c=Math.min(c,r.width),f=Math.min(f,r.height),s&&(c&&f?f*s>c?f=c/s:c=f*s:c?f=c/s:f&&(c=f*s),l*s>o?l=o/s:o=l*s),d.minWidth=Math.min(c,o),d.minHeight=Math.min(f,l),d.maxWidth=o,d.maxHeight=l}i&&(a?(d.minLeft=Math.max(0,u.left),d.minTop=Math.max(0,u.top),d.maxLeft=Math.min(r.width,u.left+u.width)-d.width,d.maxTop=Math.min(r.height,u.top+u.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=r.width-d.width,d.maxTop=r.height-d.height))},renderCropBox:function(){var e=this.options,i=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&js(this.face,Ns,n.width>=i.width&&n.height>=i.height?Av:Eu),ln(this.cropBox,rt({width:n.width,height:n.height},xs({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),xr(this.element,Sc,this.getData())}},AT={initPreview:function(){var e=this.element,i=this.crossOrigin,n=this.options.preview,r=i?this.crossOriginUrl:this.url,u=e.alt||"The image to preview",d=document.createElement("img");if(i&&(d.crossOrigin=i),d.src=r,d.alt=u,this.viewBox.appendChild(d),this.viewBoxImage=d,!!n){var a=n;typeof n=="string"?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,yt(a,function(s){var c=document.createElement("img");js(s,wo,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),i&&(c.crossOrigin=i),c.src=r,c.alt=u,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(c)})}},resetPreview:function(){yt(this.previews,function(e){var i=xc(e,wo);ln(e,{width:i.width,height:i.height}),e.innerHTML=i.html,vT(e,wo)})},preview:function(){var e=this.imageData,i=this.canvasData,n=this.cropBoxData,r=n.width,u=n.height,d=e.width,a=e.height,s=n.left-i.left-e.left,c=n.top-i.top-e.top;!this.cropped||this.disabled||(ln(this.viewBoxImage,rt({width:d,height:a},xs(rt({translateX:-s,translateY:-c},e)))),yt(this.previews,function(f){var o=xc(f,wo),l=o.width,h=o.height,p=l,m=h,g=1;r&&(g=l/r,m=u*g),u&&m>h&&(g=h/u,p=r*g,m=h),ln(f,{width:p,height:m}),ln(f.getElementsByTagName("img")[0],rt({width:d*g,height:a*g},xs(rt({translateX:-s*g,translateY:-c*g},e))))}))}},PT={bind:function(){var e=this.element,i=this.options,n=this.cropper;Gt(i.cropstart)&&ui(e,Oc,i.cropstart),Gt(i.cropmove)&&ui(e,Ec,i.cropmove),Gt(i.cropend)&&ui(e,Tc,i.cropend),Gt(i.crop)&&ui(e,Sc,i.crop),Gt(i.zoom)&&ui(e,kc,i.zoom),ui(n,Rh,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&ui(n,jh,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&ui(n,Ih,this.onDblclick=this.dblclick.bind(this)),ui(e.ownerDocument,Mh,this.onCropMove=this.cropMove.bind(this)),ui(e.ownerDocument,Fh,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&ui(window,Nh,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,i=this.options,n=this.cropper;Gt(i.cropstart)&&vi(e,Oc,i.cropstart),Gt(i.cropmove)&&vi(e,Ec,i.cropmove),Gt(i.cropend)&&vi(e,Tc,i.cropend),Gt(i.crop)&&vi(e,Sc,i.crop),Gt(i.zoom)&&vi(e,kc,i.zoom),vi(n,Rh,this.onCropStart),i.zoomable&&i.zoomOnWheel&&vi(n,jh,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&vi(n,Ih,this.onDblclick),vi(e.ownerDocument,Mh,this.onCropMove),vi(e.ownerDocument,Fh,this.onCropEnd),i.responsive&&vi(window,Nh,this.onResize)}},IT={resize:function(){if(!this.disabled){var e=this.options,i=this.container,n=this.containerData,r=i.offsetWidth/n.width,u=i.offsetHeight/n.height,d=Math.abs(r-1)>Math.abs(u-1)?r:u;if(d!==1){var a,s;e.restore&&(a=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(yt(a,function(c,f){a[f]=c*d})),this.setCropBoxData(yt(s,function(c,f){s[f]=c*d})))}}},dblclick:function(){this.disabled||this.options.dragMode===Rv||this.setDragMode(gT(this.dragBox,wc)?Iv:Ou)},wheel:function(e){var i=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var i=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(We(i)&&i!==1||We(n)&&n!==0||e.ctrlKey))){var r=this.options,u=this.pointers,d;e.changedTouches?yt(e.changedTouches,function(a){u[a.identifier]=Co(a)}):u[e.pointerId||0]=Co(e),Object.keys(u).length>1&&r.zoomable&&r.zoomOnTouch?d=Pv:d=xc(e.target,Ns),sT.test(d)&&xr(this.element,Oc,{originalEvent:e,action:d})!==!1&&(e.preventDefault(),this.action=d,this.cropping=!1,d===Dv&&(this.cropping=!0,xt(this.dragBox,ha)))}},cropMove:function(e){var i=this.action;if(!(this.disabled||!i)){var n=this.pointers;e.preventDefault(),xr(this.element,Ec,{originalEvent:e,action:i})!==!1&&(e.changedTouches?yt(e.changedTouches,function(r){rt(n[r.identifier]||{},Co(r,!0))}):rt(n[e.pointerId||0]||{},Co(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var i=this.action,n=this.pointers;e.changedTouches?yt(e.changedTouches,function(r){delete n[r.identifier]}):delete n[e.pointerId||0],i&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,_r(this.dragBox,ha,this.cropped&&this.options.modal)),xr(this.element,Tc,{originalEvent:e,action:i}))}}},RT={change:function(e){var i=this.options,n=this.canvasData,r=this.containerData,u=this.cropBoxData,d=this.pointers,a=this.action,s=i.aspectRatio,c=u.left,f=u.top,o=u.width,l=u.height,h=c+o,p=f+l,m=0,g=0,v=r.width,_=r.height,b=!0,y;!s&&e.shiftKey&&(s=o&&l?o/l:1),this.limited&&(m=u.minLeft,g=u.minTop,v=m+Math.min(r.width,n.width,n.left+n.width),_=g+Math.min(r.height,n.height,n.top+n.height));var w=d[Object.keys(d)[0]],C={x:w.endX-w.startX,y:w.endY-w.startY},T=function(A){switch(A){case bn:h+C.x>v&&(C.x=v-h);break;case wn:c+C.x<m&&(C.x=m-c);break;case Zi:f+C.y<g&&(C.y=g-f);break;case rr:p+C.y>_&&(C.y=_-p);break}};switch(a){case Eu:c+=C.x,f+=C.y;break;case bn:if(C.x>=0&&(h>=v||s&&(f<=g||p>=_))){b=!1;break}T(bn),o+=C.x,o<0&&(a=wn,o=-o,c-=o),s&&(l=o/s,f+=(u.height-l)/2);break;case Zi:if(C.y<=0&&(f<=g||s&&(c<=m||h>=v))){b=!1;break}T(Zi),l-=C.y,f+=C.y,l<0&&(a=rr,l=-l,f-=l),s&&(o=l*s,c+=(u.width-o)/2);break;case wn:if(C.x<=0&&(c<=m||s&&(f<=g||p>=_))){b=!1;break}T(wn),o-=C.x,c+=C.x,o<0&&(a=bn,o=-o,c-=o),s&&(l=o/s,f+=(u.height-l)/2);break;case rr:if(C.y>=0&&(p>=_||s&&(c<=m||h>=v))){b=!1;break}T(rr),l+=C.y,l<0&&(a=Zi,l=-l,f-=l),s&&(o=l*s,c+=(u.width-o)/2);break;case us:if(s){if(C.y<=0&&(f<=g||h>=v)){b=!1;break}T(Zi),l-=C.y,f+=C.y,o=l*s}else T(Zi),T(bn),C.x>=0?h<v?o+=C.x:C.y<=0&&f<=g&&(b=!1):o+=C.x,C.y<=0?f>g&&(l-=C.y,f+=C.y):(l-=C.y,f+=C.y);o<0&&l<0?(a=ds,l=-l,o=-o,f-=l,c-=o):o<0?(a=fs,o=-o,c-=o):l<0&&(a=hs,l=-l,f-=l);break;case fs:if(s){if(C.y<=0&&(f<=g||c<=m)){b=!1;break}T(Zi),l-=C.y,f+=C.y,o=l*s,c+=u.width-o}else T(Zi),T(wn),C.x<=0?c>m?(o-=C.x,c+=C.x):C.y<=0&&f<=g&&(b=!1):(o-=C.x,c+=C.x),C.y<=0?f>g&&(l-=C.y,f+=C.y):(l-=C.y,f+=C.y);o<0&&l<0?(a=hs,l=-l,o=-o,f-=l,c-=o):o<0?(a=us,o=-o,c-=o):l<0&&(a=ds,l=-l,f-=l);break;case ds:if(s){if(C.x<=0&&(c<=m||p>=_)){b=!1;break}T(wn),o-=C.x,c+=C.x,l=o/s}else T(rr),T(wn),C.x<=0?c>m?(o-=C.x,c+=C.x):C.y>=0&&p>=_&&(b=!1):(o-=C.x,c+=C.x),C.y>=0?p<_&&(l+=C.y):l+=C.y;o<0&&l<0?(a=us,l=-l,o=-o,f-=l,c-=o):o<0?(a=hs,o=-o,c-=o):l<0&&(a=fs,l=-l,f-=l);break;case hs:if(s){if(C.x>=0&&(h>=v||p>=_)){b=!1;break}T(bn),o+=C.x,l=o/s}else T(rr),T(bn),C.x>=0?h<v?o+=C.x:C.y>=0&&p>=_&&(b=!1):o+=C.x,C.y>=0?p<_&&(l+=C.y):l+=C.y;o<0&&l<0?(a=fs,l=-l,o=-o,f-=l,c-=o):o<0?(a=ds,o=-o,c-=o):l<0&&(a=us,l=-l,f-=l);break;case Av:this.move(C.x,C.y),b=!1;break;case Pv:this.zoom(yT(d),e),b=!1;break;case Dv:if(!C.x||!C.y){b=!1;break}y=Bv(this.cropper),c=w.startX-y.left,f=w.startY-y.top,o=u.minWidth,l=u.minHeight,C.x>0?a=C.y>0?hs:us:C.x<0&&(c-=o,a=C.y>0?ds:fs),C.y<0&&(f-=l),this.cropped||(Mi(this.cropBox,Kt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(u.width=o,u.height=l,u.left=c,u.top=f,this.action=a,this.renderCropBox()),yt(d,function(E){E.startX=E.endX,E.startY=E.endY})}},MT={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&xt(this.dragBox,ha),Mi(this.cropBox,Kt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=rt({},this.initialImageData),this.canvasData=rt({},this.initialCanvasData),this.cropBoxData=rt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(rt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Mi(this.dragBox,ha),xt(this.cropBox,Kt)),this},replace:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),i?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,yt(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Mi(this.cropper,Ah)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,xt(this.cropper,Ah)),this},destroy:function(){var e=this.element;return e[nt]?(e[nt]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,r=n.left,u=n.top;return this.moveTo(Tl(e)?e:r+Number(e),Tl(i)?i:u+Number(i))},moveTo:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(We(e)&&(n.left=e,r=!0),We(i)&&(n.top=i,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,i){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,i)},zoomTo:function(e,i,n){var r=this.options,u=this.canvasData,d=u.width,a=u.height,s=u.naturalWidth,c=u.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var f=s*e,o=c*e;if(xr(this.element,kc,{ratio:e,oldRatio:d/s,originalEvent:n})===!1)return this;if(n){var l=this.pointers,h=Bv(this.cropper),p=l&&Object.keys(l).length?bT(l):{pageX:n.pageX,pageY:n.pageY};u.left-=(f-d)*((p.pageX-h.left-u.left)/d),u.top-=(o-a)*((p.pageY-h.top-u.top)/a)}else vr(i)&&We(i.x)&&We(i.y)?(u.left-=(f-d)*((i.x-u.left)/d),u.top-=(o-a)*((i.y-u.top)/a)):(u.left-=(f-d)/2,u.top-=(o-a)/2);u.width=f,u.height=o,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),We(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var i=this.imageData.scaleY;return this.scale(e,We(i)?i:1)},scaleY:function(e){var i=this.imageData.scaleX;return this.scale(We(i)?i:1,e)},scale:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(We(e)&&(n.scaleX=e,r=!0),We(i)&&(n.scaleY=i,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,n=this.imageData,r=this.canvasData,u=this.cropBoxData,d;if(this.ready&&this.cropped){d={x:u.left-r.left,y:u.top-r.top,width:u.width,height:u.height};var a=n.width/n.naturalWidth;if(yt(d,function(f,o){d[o]=f/a}),e){var s=Math.round(d.y+d.height),c=Math.round(d.x+d.width);d.x=Math.round(d.x),d.y=Math.round(d.y),d.width=c-d.x,d.height=s-d.y}}else d={x:0,y:0,width:0,height:0};return i.rotatable&&(d.rotate=n.rotate||0),i.scalable&&(d.scaleX=n.scaleX||1,d.scaleY=n.scaleY||1),d},setData:function(e){var i=this.options,n=this.imageData,r=this.canvasData,u={};if(this.ready&&!this.disabled&&vr(e)){var d=!1;i.rotatable&&We(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,d=!0),i.scalable&&(We(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,d=!0),We(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,d=!0)),d&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;We(e.x)&&(u.left=e.x*a+r.left),We(e.y)&&(u.top=e.y*a+r.top),We(e.width)&&(u.width=e.width*a),We(e.height)&&(u.height=e.height*a),this.setCropBoxData(u)}return this},getContainerData:function(){return this.ready?rt({},this.containerData):{}},getImageData:function(){return this.sized?rt({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,i={};return this.ready&&yt(["left","top","width","height","naturalWidth","naturalHeight"],function(n){i[n]=e[n]}),i},setCanvasData:function(e){var i=this.canvasData,n=i.aspectRatio;return this.ready&&!this.disabled&&vr(e)&&(We(e.left)&&(i.left=e.left),We(e.top)&&(i.top=e.top),We(e.width)?(i.width=e.width,i.height=e.width/n):We(e.height)&&(i.height=e.height,i.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:e.left,top:e.top,width:e.width,height:e.height}),i||{}},setCropBoxData:function(e){var i=this.cropBoxData,n=this.options.aspectRatio,r,u;return this.ready&&this.cropped&&!this.disabled&&vr(e)&&(We(e.left)&&(i.left=e.left),We(e.top)&&(i.top=e.top),We(e.width)&&e.width!==i.width&&(r=!0,i.width=e.width),We(e.height)&&e.height!==i.height&&(u=!0,i.height=e.height),n&&(r?i.height=i.width/n:u&&(i.width=i.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,n=CT(this.image,this.imageData,i,e);if(!this.cropped)return n;var r=this.getData(e.rounded),u=r.x,d=r.y,a=r.width,s=r.height,c=n.width/Math.floor(i.naturalWidth);c!==1&&(u*=c,d*=c,a*=c,s*=c);var f=a/s,o=cn({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),l=cn({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),h=cn({aspectRatio:f,width:e.width||(c!==1?n.width:a),height:e.height||(c!==1?n.height:s)}),p=h.width,m=h.height;p=Math.min(o.width,Math.max(l.width,p)),m=Math.min(o.height,Math.max(l.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=kr(p),g.height=kr(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,p,m);var _=e.imageSmoothingEnabled,b=_===void 0?!0:_,y=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var w=n.width,C=n.height,T=u,E=d,A,F,G,Y,Q,q;T<=-a||T>w?(T=0,A=0,G=0,Q=0):T<=0?(G=-T,T=0,A=Math.min(w,a+T),Q=A):T<=w&&(G=0,A=Math.min(a,w-T),Q=A),A<=0||E<=-s||E>C?(E=0,F=0,Y=0,q=0):E<=0?(Y=-E,E=0,F=Math.min(C,s+E),q=F):E<=C&&(Y=0,F=Math.min(s,C-E),q=F);var N=[T,E,A,F];if(Q>0&&q>0){var V=p/a;N.push(G*V,Y*V,Q*V,q*V)}return v.drawImage.apply(v,[n].concat(kv(N.map(function(ee){return Math.floor(kr(ee))})))),g},setAspectRatio:function(e){var i=this.options;return!this.disabled&&!Tl(e)&&(i.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var i=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var u=e===Ou,d=i.movable&&e===Iv;e=u||d?e:Rv,i.dragMode=e,js(n,Ns,e),_r(n,wc,u),_r(n,Cc,d),i.cropBoxMovable||(js(r,Ns,e),_r(r,wc,u),_r(r,Cc,d))}return this}},FT=ji.Cropper,zv=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($S(this,t),!e||!lT.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=rt({},Uh,vr(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return GS(t,[{key:"init",value:function(){var i=this.element,n=i.tagName.toLowerCase(),r;if(!i[nt]){if(i[nt]=this,n==="img"){if(this.isImg=!0,r=i.getAttribute("src")||"",this.originalUrl=r,!r)return;r=i.src}else n==="canvas"&&window.HTMLCanvasElement&&(r=i.toDataURL());this.load(r)}}},{key:"load",value:function(i){var n=this;if(i){this.url=i,this.imageData={};var r=this.element,u=this.options;if(!u.rotatable&&!u.scalable&&(u.checkOrientation=!1),!u.checkOrientation||!window.ArrayBuffer){this.clone();return}if(oT.test(i)){aT.test(i)?this.read(ET(i)):this.clone();return}var d=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=d,d.onabort=a,d.onerror=a,d.ontimeout=a,d.onprogress=function(){d.getResponseHeader("content-type")!==Bh&&d.abort()},d.onload=function(){n.read(d.response)},d.onloadend=function(){n.reloading=!1,n.xhr=null},u.checkCrossOrigin&&Wh(i)&&r.crossOrigin&&(i=Hh(i)),d.open("GET",i,!0),d.responseType="arraybuffer",d.withCredentials=r.crossOrigin==="use-credentials",d.send()}}},{key:"read",value:function(i){var n=this.options,r=this.imageData,u=kT(i),d=0,a=1,s=1;if(u>1){this.url=OT(i,Bh);var c=xT(u);d=c.rotate,a=c.scaleX,s=c.scaleY}n.rotatable&&(r.rotate=d),n.scalable&&(r.scaleX=a,r.scaleY=s),this.clone()}},{key:"clone",value:function(){var i=this.element,n=this.url,r=i.crossOrigin,u=n;this.options.checkCrossOrigin&&Wh(n)&&(r||(r="anonymous"),u=Hh(n)),this.crossOrigin=r,this.crossOriginUrl=u;var d=document.createElement("img");r&&(d.crossOrigin=r),d.src=u||n,d.alt=i.alt||"The image to crop",this.image=d,d.onload=this.start.bind(this),d.onerror=this.stop.bind(this),xt(d,Ph),i.parentNode.insertBefore(d,i.nextSibling)}},{key:"start",value:function(){var i=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var r=ji.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ji.navigator.userAgent),u=function(c,f){rt(i.imageData,{naturalWidth:c,naturalHeight:f,aspectRatio:c/f}),i.initialImageData=rt({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(n.naturalWidth&&!r){u(n.naturalWidth,n.naturalHeight);return}var d=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=d,d.onload=function(){u(d.width,d.height),r||a.removeChild(d)},d.src=n.src,r||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(d))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,n=this.options,r=this.image,u=i.parentNode,d=document.createElement("div");d.innerHTML=cT;var a=d.querySelector(".".concat(nt,"-container")),s=a.querySelector(".".concat(nt,"-canvas")),c=a.querySelector(".".concat(nt,"-drag-box")),f=a.querySelector(".".concat(nt,"-crop-box")),o=f.querySelector(".".concat(nt,"-face"));this.container=u,this.cropper=a,this.canvas=s,this.dragBox=c,this.cropBox=f,this.viewBox=a.querySelector(".".concat(nt,"-view-box")),this.face=o,s.appendChild(r),xt(i,Kt),u.insertBefore(a,i.nextSibling),Mi(r,Ph),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,xt(f,Kt),n.guides||xt(f.getElementsByClassName("".concat(nt,"-dashed")),Kt),n.center||xt(f.getElementsByClassName("".concat(nt,"-center")),Kt),n.background&&xt(a,"".concat(nt,"-bg")),n.highlight||xt(o,tT),n.cropBoxMovable&&(xt(o,Cc),js(o,Ns,Eu)),n.cropBoxResizable||(xt(f.getElementsByClassName("".concat(nt,"-line")),Kt),xt(f.getElementsByClassName("".concat(nt,"-point")),Kt)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),Gt(n.ready)&&ui(i,Lh,n.ready,{once:!0}),xr(i,Lh)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),Mi(this.element,Kt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=FT,t}},{key:"setDefaults",value:function(i){rt(Uh,vr(i)&&i)}}]),t}();rt(zv.prototype,DT,AT,PT,IT,RT,MT);let xu="https://podiz-convert-uieqvbv3ya-du.a.run.app";const LT=async(t,e,i="#FFFFFF")=>{try{const n={colorCode:i,composites:t.composites,printIndex:e,prints:t.prints,scenes:t.scenes};return await(await fetch(`${xu}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(n){console.log({error:n})}},NT=async(t,e)=>{try{const i={data:e,shopid:t};return await(await fetch(`${xu}/background_remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}catch(i){return JSON.stringify(i)}},Vh=async t=>{try{return await(await fetch(`${xu}/thumbnail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}};function jT(t){return Object.keys(t).reduce((e,i)=>t[i]===void 0?e:e+`${i}:${t[i]};`,"")}jT({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Wv(t,...e){const i={};for(const n of Object.keys(t))e.includes(n)||(i[n]=t[n]);return i}function So(t){const e={};for(const i in t){const n=t[i];n!==void 0&&(e[i]=n)}return e}function Xh(t){function e(i){return i(t),()=>{}}return{subscribe:e}}const To=t=>new Proxy(t,{get(e,i,n){return Reflect.get(e,i,n)},ownKeys(e){return Reflect.ownKeys(e).filter(i=>i!=="action")}}),Yh=t=>typeof t=="function";Hv("empty");function Hv(t,e){const{stores:i,action:n,returned:r}=e??{},u=(()=>{if(i&&r)return Qy(i,a=>{const s=r(a);if(Yh(s)){const c=(...f)=>To(So({...s(...f),[`data-melt-${t}`]:"",action:n??sr}));return c.action=n??sr,c}return To(So({...s,[`data-melt-${t}`]:"",action:n??sr}))});{const a=r,s=a==null?void 0:a();if(Yh(s)){const c=(...f)=>To(So({...s(...f),[`data-melt-${t}`]:"",action:n??sr}));return c.action=n??sr,Xh(c)}return Xh(To(So({...s,[`data-melt-${t}`]:"",action:n??sr})))}})(),d=n??(()=>{});return d.subscribe=u.subscribe,d}function BT(t){const e=u=>u?`${t}-${u}`:t,i=u=>`data-melt-${t}${u?`-${u}`:""}`,n=u=>`[data-melt-${t}${u?`-${u}`:""}]`;return{name:e,attribute:i,selector:n,getEl:u=>document.querySelector(n(u))}}function sr(){}function Vv(t,e,i,n){const r=Array.isArray(e)?e:[e];return r.forEach(u=>t.addEventListener(u,i,n)),()=>{r.forEach(u=>t.removeEventListener(u,i,n))}}function Pa(t){return{...t,get:()=>Ii(t)}}Pa.writable=function(t){const e=dt(t);let i=t;return{subscribe:e.subscribe,set(n){e.set(n),i=n},update(n){const r=n(i);e.set(r),i=r},get(){return i}}};Pa.derived=function(t,e){const i=new Map,n=()=>{const u=Array.isArray(t)?t.map(d=>d.get()):t.get();return e(u)};return{get:n,subscribe:u=>{const d=[];return(Array.isArray(t)?t:[t]).forEach(s=>{d.push(s.subscribe(()=>{u(n())}))}),u(n()),i.set(u,d),()=>{const s=i.get(u);if(s)for(const c of s)c();i.delete(u)}}}};const UT=(t,e)=>{const i=Pa(t),n=(u,d)=>{i.update(a=>{const s=u(a);let c=s;return e&&(c=e({curr:a,next:s})),d==null||d(c),c})};return{...i,update:n,set:u=>{n(()=>u)}}},zT={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function WT(t){const e={};return Object.keys(t).forEach(i=>{const n=i,r=t[n];e[n]=Pa(dt(r))}),e}Er(void 0,t=>{function e(n){t(n),t(void 0)}return Vv(document,"pointerup",e,{passive:!1,capture:!0})});Er(void 0,t=>{function e(n){n&&n.key===zT.ESCAPE&&t(n),t(void 0)}return Vv(document,"keydown",e,{passive:!1})});Er(!1),Er(!1),Er(void 0);const HT={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Wv(HT,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const VT={defaultValue:0,max:100},{name:XT}=BT("progress"),YT=t=>{const e={...VT,...t},i=WT(Wv(e,"value")),{max:n}=i,r=e.value??dt(e.defaultValue),u=UT(r,e==null?void 0:e.onValueChange);return{elements:{root:Hv(XT(),{stores:[u,n],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:u},options:i}};function $h(t){let e,i,n,r,u,d=[t[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}],a={};for(let s=0;s<d.length;s+=1)a=Li(a,d[s]);return{c(){e=x("div"),i=x("div"),S(i,"class","h-full w-full bg-black transition-transform duration-[660ms] ease-[cubic-bezier(0.65,0,0.35,1)]"),S(i,"style",n=`transform: translateX(-${100-100*(t[1]??0)/(t[3]??1)}%)`),Zo(e,a),Ni(e,"svelte-1p3ocr8",!0)},m(s,c){B(s,e,c),O(e,i),r||(u=wm(t[2].action(e)),r=!0)},p(s,c){c&10&&n!==(n=`transform: translateX(-${100-100*(s[1]??0)/(s[3]??1)}%)`)&&S(i,"style",n),Zo(e,a=Hn(d,[c&4&&s[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}])),Ni(e,"svelte-1p3ocr8",!0)},d(s){s&&j(e),r=!1,u()}}}function $T(t){let e,i,n,r,u,d;const a=t[7].default,s=$s(a,t,t[6],null);let c=t[0]&&t[1]&&$h(t);return{c(){e=x("div"),i=x("div"),i.innerHTML='<div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div>',n=$(),r=x("div"),s&&s.c(),u=$(),c&&c.c(),S(i,"class","loader svelte-1p3ocr8"),S(r,"class","loader-text svelte-1p3ocr8"),S(e,"class","loader-container svelte-1p3ocr8")},m(f,o){B(f,e,o),O(e,i),O(e,n),O(e,r),s&&s.m(r,null),O(e,u),c&&c.m(e,null),d=!0},p(f,[o]){s&&s.p&&(!d||o&64)&&qs(s,a,f,f[6],d?Gs(a,f[6],o,null):Ks(f[6]),null),f[0]&&f[1]?c?c.p(f,o):(c=$h(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){d||(L(s,f),d=!0)},o(f){W(s,f),d=!1},d(f){f&&j(e),s&&s.d(f),c&&c.d()}}}function GT(t,e,i){let n,r,{$$slots:u={},$$scope:d}=e,{isProgress:a=!1}=e,{progress:s=0}=e;const{elements:{root:c},options:{max:f}}=YT({max:100});return Fe(t,c,o=>i(2,n=o)),Fe(t,f,o=>i(3,r=o)),t.$$set=o=>{"isProgress"in o&&i(0,a=o.isProgress),"progress"in o&&i(1,s=o.progress),"$$scope"in o&&i(6,d=o.$$scope)},[a,s,n,r,c,f,d,u]}class Xv extends Ve{constructor(e){super(),He(this,e,GT,$T,Ue,{isProgress:0,progress:1})}}function qT(){const t={};return document.getElementById("podiz-publish-uuid")&&(t.uuid=document.getElementById("podiz-publish-uuid").value),document.getElementById("podiz-shop-id")&&(t.shopid=document.getElementById("podiz-shop-id").value),document.getElementById("podiz-provider")&&(t.provider=document.getElementById("podiz-provider").value),document.getElementById("podiz-productno")&&(t.productno=document.getElementById("podiz-productno").value),document.getElementById("podiz-preview-class")&&(t.previewclass=document.getElementById("podiz-preview-class").value),document.getElementById("podiz-preview-item-class")&&(t.previewitem=document.getElementById("podiz-preview-item-class").value),t}function KT(t){const e=t.name,i=e.lastIndexOf(".");return i===-1?"":e.slice(i+1).toLowerCase()}async function JT(t){try{return new Promise(function(e,i){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/variants`,function(n,r){return n&&(console.log(n),i(n)),e(r)})})}catch(e){reject(e)}}async function ZT(t){try{return new Promise(function(e,i){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/options`,function(n,r){return n&&(console.log(n),i(n)),e(r)})})}catch(e){reject(e)}}async function QT(t){try{return new Promise(function(e,i){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}`,function(n,r){return n&&(console.log(n),i(n)),e(r)})})}catch(e){reject(e)}}async function Gh(t,e){return(await JT(e)).variants.find(n=>{const r=t.productOptions.map(d=>d.value),u=n.options.map(d=>d.value);return r.join(",")===u.join(",")})}async function eE(){const t="item_option_add",e="podiz";try{const i=Ii(Ai),n=Ii(ca),r=await Promise.all(i.map(async u=>{const d=[],a=n.linkOptions.find(f=>{var o,l,h;return((o=f.editorOptions)==null?void 0:o.optionValue1)===u.currentOption.optionValue1&&((l=f.editorOptions)==null?void 0:l.optionValue2)===u.currentOption.optionValue2&&((h=f.editorOptions)==null?void 0:h.optionValue3)===u.currentOption.optionValue3}),s=await Gh(a,a.productNo);d.push({product_no:a.productNo,variants_code:s.variant_code,quantity:u.count,additional_option_values:[{key:t,type:"text",title:e,value:u.uuid}]});const c=await Promise.all(u.prints.filter(f=>f.imageDataURL).map(async f=>{const o=n.linkOptions.find(h=>h.print===f.id);if(!o)return null;const l=await Gh(o,o.productNo);return{product_no:o.productNo,quantity:u.count,variants_code:l.variant_code,additional_option_values:[{key:t,type:"text",title:e,value:u.uuid}]}}));return[...d,...c.filter(Boolean)]}));if(CAFE24API){const u=await Promise.all(r.map(a=>new Promise((s,c)=>{CAFE24API.addCart("A0000","P",a,(f,o)=>{s(f?{error:f,product:a}:o)})})));console.log({results:u});const d=u.filter(a=>a.error);d.length>0?(console.error("장바구니 추가 중 다음 오류가 발생했습니다:"),d.forEach(({error:a,product:s})=>{console.error(`상품 번호 ${s.product_no}:`,a.message||"알 수 없는 오류")})):window.location.href="/order/basket.html#none"}}catch(i){throw console.error("Error in addCafe24Cart:",i),i}}function tE(t,e=null){const i=document.getElementsByClassName(t),n=new Set,r=[],u=/\s*\[\s*podiz\s*:\s*([a-f0-9-]{36})\s*\]\s*/g,d=[];function a(s,c){for(;s&&s.nodeType===Node.TEXT_NODE;)s=s.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE;){if(s.classList.contains(c))return s;s=s.parentNode}return null}for(let s of i){const c=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let f;for(;f=c.nextNode();){let o;for(;(o=u.exec(f.textContent))!==null;){n.add(o[1]);let l;e?l=a(f,e):l=f.parentElement,l&&!r.includes(l)&&r.push(l),d.push({uuid:o[1],element:l})}}}return{uids:Array.from(n),elements:r,items:d}}async function iE(){try{return new Promise(function(t,e){if(CAFE24API){const i={cafe24MallId:null,cafe24ShopNo:null,cafe24UserType:null,cafe24MemberId:null};i.cafe24MallId=CAFE24API.MALL_ID,i.cafe24ShopNo=CAFE24API.SHOP_NO,CAFE24API.getCustomerIDInfo(function(n,r){if(n)throw n;r.id.member_id?(i.cafe24UserType="member",i.cafe24MemberId=r.id.member_id):(i.cafe24UserType="guest",i.cafe24MemberId=r.id.guest_id)}),t(i)}})}catch(t){reject(t)}}const nE=()=>new Promise(function(t,e){CAFE24API&&CAFE24API.getCartItemList(async function(i,n){if(i)console.log({err:i});else return t(n)})});function rE(t){return parseFloat(t).toLocaleString("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0})}var qh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[i++]=r:r<2048?(e[i++]=r>>6|192,e[i++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[i++]=r>>18|240,e[i++]=r>>12&63|128,e[i++]=r>>6&63|128,e[i++]=r&63|128):(e[i++]=r>>12|224,e[i++]=r>>6&63|128,e[i++]=r&63|128)}return e},sE=function(t){const e=[];let i=0,n=0;for(;i<t.length;){const r=t[i++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const u=t[i++];e[n++]=String.fromCharCode((r&31)<<6|u&63)}else if(r>239&&r<365){const u=t[i++],d=t[i++],a=t[i++],s=((r&7)<<18|(u&63)<<12|(d&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(s&1023))}else{const u=t[i++],d=t[i++];e[n++]=String.fromCharCode((r&15)<<12|(u&63)<<6|d&63)}}return e.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const u=t[r],d=r+1<t.length,a=d?t[r+1]:0,s=r+2<t.length,c=s?t[r+2]:0,f=u>>2,o=(u&3)<<4|a>>4;let l=(a&15)<<2|c>>6,h=c&63;s||(h=64,d||(l=64)),n.push(i[f],i[o],i[l],i[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const u=i[t.charAt(r++)],a=r<t.length?i[t.charAt(r)]:0;++r;const c=r<t.length?i[t.charAt(r)]:64;++r;const o=r<t.length?i[t.charAt(r)]:64;if(++r,u==null||a==null||c==null||o==null)throw new oE;const l=u<<2|a>>4;if(n.push(l),c!==64){const h=a<<4&240|c>>2;if(n.push(h),o!==64){const p=c<<6&192|o;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aE=function(t){const e=Yv(t);return $v.encodeByteArray(e,!0)},da=function(t){return aE(t).replace(/\./g,"")},lE=function(t){try{return $v.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=()=>cE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof qh>"u")return;const t=qh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lE(t[1]);return e&&JSON.parse(e)},Gv=()=>{try{return uE()||fE()||hE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dE=t=>{var e,i;return(i=(e=Gv())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[t]},pE=t=>{const e=dE(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),n]:[e.substring(0,i),n]},qv=()=>{var t;return(t=Gv())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t);return[da(JSON.stringify(i)),da(JSON.stringify(d)),""].join(".")}function vE(){try{return typeof indexedDB=="object"}catch{return!1}}function _E(){return new Promise((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{i=!1},r.onerror=()=>{var u;e(((u=r.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="FirebaseError";class Qr extends Error{constructor(e,i,n){super(i),this.code=e,this.customData=n,this.name=yE,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kv.prototype.create)}}class Kv{constructor(e,i,n){this.service=e,this.serviceName=i,this.errors=n}create(e,...i){const n=i[0]||{},r=`${this.service}/${e}`,u=this.errors[e],d=u?bE(u,n):"Error",a=`${this.serviceName}: ${d} (${r}).`;return new Qr(r,a,n)}}function bE(t,e){return t.replace(wE,(i,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const wE=/\{\$([^}]+)}/g;function Dc(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const r of i){if(!n.includes(r))return!1;const u=t[r],d=e[r];if(Kh(u)&&Kh(d)){if(!Dc(u,d))return!1}else if(u!==d)return!1}for(const r of n)if(!i.includes(r))return!1;return!0}function Kh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){return t&&t._delegate?t._delegate:t}class Bs{constructor(e,i,n){this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const n=new gE;if(this.instancesDeferred.set(i,n),this.isInitialized(i)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:i});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(r)return null;throw u}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TE(e))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[i,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:r});n.resolve(u)}catch{}}}}clearInstance(e=On){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=On){return this.instances.has(e)}getOptions(e=On){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:i});for(const[u,d]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(u);n===a&&d.resolve(r)}return r}onInit(e,i){var n;const r=this.normalizeInstanceIdentifier(i),u=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;u.add(e),this.onInitCallbacks.set(r,u);const d=this.instances.get(r);return d&&e(d,r),()=>{u.delete(e)}}invokeOnInitCallbacks(e,i){const n=this.onInitCallbacks.get(i);if(n)for(const r of n)try{r(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:SE(e),options:i}),this.instances.set(e,n),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=On){return this.component?this.component.multipleInstances?e:On:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SE(t){return t===On?void 0:t}function TE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new CE(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const OE={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},kE=tt.INFO,xE={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},DE=(t,e,...i)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=xE[e];if(r)console[r](`[${n}]  ${t.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AE{constructor(e){this.name=e,this._logLevel=kE,this._logHandler=DE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const PE=(t,e)=>e.some(i=>t instanceof i);let Jh,Zh;function IE(){return Jh||(Jh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RE(){return Zh||(Zh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jv=new WeakMap,Ac=new WeakMap,Zv=new WeakMap,Ol=new WeakMap,Du=new WeakMap;function ME(t){const e=new Promise((i,n)=>{const r=()=>{t.removeEventListener("success",u),t.removeEventListener("error",d)},u=()=>{i(hn(t.result)),r()},d=()=>{n(t.error),r()};t.addEventListener("success",u),t.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&Jv.set(i,t)}).catch(()=>{}),Du.set(e,t),e}function FE(t){if(Ac.has(t))return;const e=new Promise((i,n)=>{const r=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",d),t.removeEventListener("abort",d)},u=()=>{i(),r()},d=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",u),t.addEventListener("error",d),t.addEventListener("abort",d)});Ac.set(t,e)}let Pc={get(t,e,i){if(t instanceof IDBTransaction){if(e==="done")return Ac.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zv.get(t);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return hn(t[e])},set(t,e,i){return t[e]=i,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LE(t){Pc=t(Pc)}function NE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const n=t.call(kl(this),e,...i);return Zv.set(n,e.sort?e.sort():[e]),hn(n)}:RE().includes(t)?function(...e){return t.apply(kl(this),e),hn(Jv.get(this))}:function(...e){return hn(t.apply(kl(this),e))}}function jE(t){return typeof t=="function"?NE(t):(t instanceof IDBTransaction&&FE(t),PE(t,IE())?new Proxy(t,Pc):t)}function hn(t){if(t instanceof IDBRequest)return ME(t);if(Ol.has(t))return Ol.get(t);const e=jE(t);return e!==t&&(Ol.set(t,e),Du.set(e,t)),e}const kl=t=>Du.get(t);function BE(t,e,{blocked:i,upgrade:n,blocking:r,terminated:u}={}){const d=indexedDB.open(t,e),a=hn(d);return n&&d.addEventListener("upgradeneeded",s=>{n(hn(d.result),s.oldVersion,s.newVersion,hn(d.transaction),s)}),i&&d.addEventListener("blocked",s=>i(s.oldVersion,s.newVersion,s)),a.then(s=>{u&&s.addEventListener("close",()=>u()),r&&s.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UE=["get","getKey","getAll","getAllKeys","count"],zE=["put","add","delete","clear"],xl=new Map;function Qh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xl.get(e))return xl.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,r=zE.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(r||UE.includes(i)))return;const u=async function(d,...a){const s=this.transaction(d,r?"readwrite":"readonly");let c=s.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[i](...a),r&&s.done]))[0]};return xl.set(e,u),u}LE(t=>({...t,get:(e,i,n)=>Qh(e,i)||t.get(e,i,n),has:(e,i)=>!!Qh(e,i)||t.has(e,i)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(HE(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function HE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ic="@firebase/app",ed="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new AE("@firebase/app"),VE="@firebase/app-compat",XE="@firebase/analytics-compat",YE="@firebase/analytics",$E="@firebase/app-check-compat",GE="@firebase/app-check",qE="@firebase/auth",KE="@firebase/auth-compat",JE="@firebase/database",ZE="@firebase/database-compat",QE="@firebase/functions",eO="@firebase/functions-compat",tO="@firebase/installations",iO="@firebase/installations-compat",nO="@firebase/messaging",rO="@firebase/messaging-compat",sO="@firebase/performance",oO="@firebase/performance-compat",aO="@firebase/remote-config",lO="@firebase/remote-config-compat",cO="@firebase/storage",uO="@firebase/storage-compat",fO="@firebase/firestore",hO="@firebase/firestore-compat",dO="firebase",pO="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="[DEFAULT]",gO={[Ic]:"fire-core",[VE]:"fire-core-compat",[YE]:"fire-analytics",[XE]:"fire-analytics-compat",[GE]:"fire-app-check",[$E]:"fire-app-check-compat",[qE]:"fire-auth",[KE]:"fire-auth-compat",[JE]:"fire-rtdb",[ZE]:"fire-rtdb-compat",[QE]:"fire-fn",[eO]:"fire-fn-compat",[tO]:"fire-iid",[iO]:"fire-iid-compat",[nO]:"fire-fcm",[rO]:"fire-fcm-compat",[sO]:"fire-perf",[oO]:"fire-perf-compat",[aO]:"fire-rc",[lO]:"fire-rc-compat",[cO]:"fire-gcs",[uO]:"fire-gcs-compat",[fO]:"fire-fst",[hO]:"fire-fst-compat","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Map,mO=new Map,Mc=new Map;function td(t,e){try{t.container.addComponent(e)}catch(i){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function ga(t){const e=t.name;if(Mc.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Mc.set(e,t);for(const i of pa.values())td(i,t);for(const i of mO.values())td(i,t);return!0}function vO(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dn=new Kv("app","Firebase",_O);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,i,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=pO;function Qv(t,e={}){let i=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Rc,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw dn.create("bad-app-name",{appName:String(r)});if(i||(i=qv()),!i)throw dn.create("no-options");const u=pa.get(r);if(u){if(Dc(i,u.options)&&Dc(n,u.config))return u;throw dn.create("duplicate-app",{appName:r})}const d=new EE(r);for(const s of Mc.values())d.addComponent(s);const a=new yO(i,n,d);return pa.set(r,a),a}function wO(t=Rc){const e=pa.get(t);if(!e&&t===Rc&&qv())return Qv();if(!e)throw dn.create("no-app",{appName:t});return e}function Dr(t,e,i){var n;let r=(n=gO[t])!==null&&n!==void 0?n:t;i&&(r+=`-${i}`);const u=r.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const a=[`Unable to register library "${r}" with version "${e}":`];u&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),u&&d&&a.push("and"),d&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}ga(new Bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="firebase-heartbeat-database",SO=1,Us="firebase-heartbeat-store";let Dl=null;function e_(){return Dl||(Dl=BE(CO,SO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Us)}catch(i){console.warn(i)}}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),Dl}async function TO(t){try{const i=(await e_()).transaction(Us),n=await i.objectStore(Us).get(t_(t));return await i.done,n}catch(e){if(e instanceof Qr)Yn.warn(e.message);else{const i=dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(i.message)}}}async function id(t,e){try{const n=(await e_()).transaction(Us,"readwrite");await n.objectStore(Us).put(e,t_(t)),await n.done}catch(i){if(i instanceof Qr)Yn.warn(i.message);else{const n=dn.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Yn.warn(n.message)}}}function t_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=1024,OO=30*24*60*60*1e3;class kO{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new DO(i),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,i;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=nd();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)))return this._heartbeatsCache.heartbeats.push({date:u,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const a=new Date(d.date).valueOf();return Date.now()-a<=OO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=nd(),{heartbeatsToSend:n,unsentEntries:r}=xO(this._heartbeatsCache.heartbeats),u=da(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=i,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}}function nd(){return new Date().toISOString().substring(0,10)}function xO(t,e=EO){const i=[];let n=t.slice();for(const r of t){const u=i.find(d=>d.agent===r.agent);if(u){if(u.dates.push(r.date),rd(i)>e){u.dates.pop();break}}else if(i.push({agent:r.agent,dates:[r.date]}),rd(i)>e){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}class DO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vE()?_E().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await TO(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return id(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return id(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rd(t){return da(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){ga(new Bs("platform-logger",e=>new WE(e),"PRIVATE")),ga(new Bs("heartbeat",e=>new kO(e),"PRIVATE")),Dr(Ic,ed,t),Dr(Ic,ed,"esm2017"),Dr("fire-js","")}AO("");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const i_="firebasestorage.googleapis.com",n_="storageBucket",PO=2*60*1e3,IO=10*60*1e3,RO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends Qr{constructor(e,i,n=0){super(Al(e),`Firebase Storage: ${i} (${Al(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Al(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function Al(t){return"storage/"+t}function Au(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(it.UNKNOWN,t)}function MO(t){return new ut(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function FO(t){return new ut(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(it.UNAUTHENTICATED,t)}function NO(){return new ut(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jO(t){return new ut(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function r_(){return new ut(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s_(){return new ut(it.CANCELED,"User canceled the upload/download.")}function BO(t){return new ut(it.INVALID_URL,"Invalid URL '"+t+"'.")}function UO(t){return new ut(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zO(){return new ut(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+n_+"' property when initializing the app?")}function o_(){return new ut(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WO(){return new ut(it.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function HO(){return new ut(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VO(t){return new ut(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fc(t){return new ut(it.INVALID_ARGUMENT,t)}function a_(){return new ut(it.APP_DELETED,"The Firebase app was deleted.")}function XO(t){return new ut(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ds(t,e){return new ut(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ps(t){throw new ut(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let n;try{n=si.makeFromUrl(e,i)}catch{return new si(e,"")}if(n.path==="")return n;throw UO(e)}static makeFromUrl(e,i){let n=null;const r="([A-Za-z0-9.\\-_]+)";function u(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const d="(/(.*))?$",a=new RegExp("^gs://"+r+d,"i"),s={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const f="v[A-Za-z0-9_]+",o=i.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",h=new RegExp(`^https?://${o}/${f}/b/${r}/o${l}`,"i"),p={bucket:1,path:3},m=i===i_?"(?:storage.googleapis.com|storage.cloud.google.com)":i,g="([^?#]*)",v=new RegExp(`^https?://${m}/${r}/${g}`,"i"),b=[{regex:a,indices:s,postModify:u},{regex:h,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<b.length;y++){const w=b[y],C=w.regex.exec(e);if(C){const T=C[w.indices.bucket];let E=C[w.indices.path];E||(E=""),n=new si(T,E),w.postModify(n);break}}if(n==null)throw BO(e);return n}}class YO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e,i){let n=1,r=null,u=null,d=!1,a=0;function s(){return a===2}let c=!1;function f(...g){c||(c=!0,e.apply(null,g))}function o(g){r=setTimeout(()=>{r=null,t(h,s())},g)}function l(){u&&clearTimeout(u)}function h(g,...v){if(c){l();return}if(g){l(),f.call(null,g,...v);return}if(s()||d){l(),f.call(null,g,...v);return}n<64&&(n*=2);let b;a===1?(a=2,b=0):b=(n+Math.random())*1e3,o(b)}let p=!1;function m(g){p||(p=!0,l(),!c&&(r!==null?(g||(a=2),clearTimeout(r),o(0)):g||(a=1)))}return o(0),u=setTimeout(()=>{d=!0,m(!0)},i),m}function GO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){return t!==void 0}function KO(t){return typeof t=="function"}function JO(t){return typeof t=="object"&&!Array.isArray(t)}function Ra(t){return typeof t=="string"||t instanceof String}function sd(t){return Pu()&&t instanceof Blob}function Pu(){return typeof Blob<"u"}function od(t,e,i,n){if(n<e)throw Fc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>i)throw Fc(`Invalid value for '${t}'. Expected ${i} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e,i){let n=e;return i==null&&(n=`https://${e}`),`${i}://${n}/v0${t}`}function l_(t){const e=encodeURIComponent;let i="?";for(const n in t)if(t.hasOwnProperty(n)){const r=e(n)+"="+e(t[n]);i=i+r+"&"}return i=i.slice(0,-1),i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Un||(Un={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){const i=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,u=e.indexOf(t)!==-1;return i||r||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,i,n,r,u,d,a,s,c,f,o,l=!0){this.url_=e,this.method_=i,this.headers_=n,this.body_=r,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=a,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=o,this.retry=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new Eo(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=a=>{const s=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(s,c)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const a=u.getErrorCode()===Un.NO_ERROR,s=u.getStatus();if(!a||c_(s,this.additionalRetryCodes_)&&this.retry){const f=u.getErrorCode()===Un.ABORT;n(!1,new Eo(!1,null,f));return}const c=this.successCodes_.indexOf(s)!==-1;n(!0,new Eo(c,u))})},i=(n,r)=>{const u=this.resolve_,d=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const s=this.callback_(a,a.getResponse());qO(s)?u(s):u()}catch(s){d(s)}else if(a!==null){const s=Au();s.serverResponse=a.getErrorText(),this.errorCallback_?d(this.errorCallback_(a,s)):d(s)}else if(r.canceled){const s=this.appDelete_?a_():s_();d(s)}else{const s=r_();d(s)}};this.canceled_?i(!1,new Eo(!1,null,!0)):this.backoffId_=$O(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Eo{constructor(e,i,n){this.wasSuccessCode=e,this.connection=i,this.canceled=!!n}}function QO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ek(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ik(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nk(t,e,i,n,r,u,d=!0){const a=l_(t.urlParams),s=t.url+a,c=Object.assign({},t.headers);return tk(c,e),QO(c,i),ek(c,u),ik(c,n),new ZO(s,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sk(...t){const e=rk();if(e!==void 0){const i=new e;for(let n=0;n<t.length;n++)i.append(t[n]);return i.getBlob()}else{if(Pu())return new Blob(t);throw new ut(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ok(t,e,i){return t.webkitSlice?t.webkitSlice(e,i):t.mozSlice?t.mozSlice(e,i):t.slice?t.slice(e,i):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){if(typeof atob>"u")throw VO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pl{constructor(e,i){this.data=e,this.contentType=i||null}}function lk(t,e){switch(t){case Ri.RAW:return new Pl(u_(e));case Ri.BASE64:case Ri.BASE64URL:return new Pl(f_(t,e));case Ri.DATA_URL:return new Pl(uk(e),fk(e))}throw Au()}function u_(t){const e=[];for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(i<t.length-1&&(t.charCodeAt(i+1)&64512)===56320))e.push(239,191,189);else{const u=n,d=t.charCodeAt(++i);n=65536|(u&1023)<<10|d&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function ck(t){let e;try{e=decodeURIComponent(t)}catch{throw Ds(Ri.DATA_URL,"Malformed data URL.")}return u_(e)}function f_(t,e){switch(t){case Ri.BASE64:{const r=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(r||u)throw Ds(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const r=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(r||u)throw Ds(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=ak(e)}catch(r){throw r.message.includes("polyfill")?r:Ds(t,"Invalid character found")}const n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}class h_{constructor(e){this.base64=!1,this.contentType=null;const i=e.match(/^data:([^,]+)?,/);if(i===null)throw Ds(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=i[1]||null;n!=null&&(this.base64=hk(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function uk(t){const e=new h_(t);return e.base64?f_(Ri.BASE64,e.rest):ck(e.rest)}function fk(t){return new h_(t).contentType}function hk(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,i){let n=0,r="";sd(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(i?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(i?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,i){if(sd(this.data_)){const n=this.data_,r=ok(n,e,i);return r===null?null:new sn(r)}else{const n=new Uint8Array(this.data_.buffer,e,i-e);return new sn(n,!0)}}static getBlob(...e){if(Pu()){const i=e.map(n=>n instanceof sn?n.data_:n);return new sn(sk.apply(null,i))}else{const i=e.map(d=>Ra(d)?lk(Ri.RAW,d).data:d.data_);let n=0;i.forEach(d=>{n+=d.byteLength});const r=new Uint8Array(n);let u=0;return i.forEach(d=>{for(let a=0;a<d.length;a++)r[u++]=d[a]}),new sn(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){let e;try{e=JSON.parse(t)}catch{return null}return JO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pk(t,e){const i=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?i:t+"/"+i}function p_(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t,e){return e}class Ht{constructor(e,i,n,r){this.server=e,this.local=i||e,this.writable=!!n,this.xform=r||gk}}let Oo=null;function mk(t){return!Ra(t)||t.length<2?t:p_(t)}function g_(){if(Oo)return Oo;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(u,d){return mk(d)}const i=new Ht("name");i.xform=e,t.push(i);function n(u,d){return d!==void 0?Number(d):d}const r=new Ht("size");return r.xform=n,t.push(r),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),Oo=t,Oo}function vk(t,e){function i(){const n=t.bucket,r=t.fullPath,u=new si(n,r);return e._makeStorageReference(u)}Object.defineProperty(t,"ref",{get:i})}function _k(t,e,i){const n={};n.type="file";const r=i.length;for(let u=0;u<r;u++){const d=i[u];n[d.local]=d.xform(n,e[d.server])}return vk(n,t),n}function m_(t,e,i){const n=d_(e);return n===null?null:_k(t,n,i)}function yk(t,e,i,n){const r=d_(e);if(r===null||!Ra(r.downloadTokens))return null;const u=r.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(c=>{const f=t.bucket,o=t.fullPath,l="/b/"+d(f)+"/o/"+d(o),h=to(l,i,n),p=l_({alt:"media",token:c});return h+p})[0]}function v_(t,e){const i={},n=e.length;for(let r=0;r<n;r++){const u=e[r];u.writable&&(i[u.server]=t[u.local])}return JSON.stringify(i)}class es{constructor(e,i,n,r){this.url=e,this.method=i,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){if(!t)throw Au()}function Iu(t,e){function i(n,r){const u=m_(t,r,e);return $i(u!==null),u}return i}function bk(t,e){function i(n,r){const u=m_(t,r,e);return $i(u!==null),yk(u,r,t.host,t._protocol)}return i}function io(t){function e(i,n){let r;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?r=NO():r=LO():i.getStatus()===402?r=FO(t.bucket):i.getStatus()===403?r=jO(t.path):r=n,r.status=i.getStatus(),r.serverResponse=n.serverResponse,r}return e}function __(t){const e=io(t);function i(n,r){let u=e(n,r);return n.getStatus()===404&&(u=MO(t.path)),u.serverResponse=r.serverResponse,u}return i}function wk(t,e,i){const n=e.fullServerUrl(),r=to(n,t.host,t._protocol),u="GET",d=t.maxOperationRetryTime,a=new es(r,u,Iu(t,i),d);return a.errorHandler=__(e),a}function Ck(t,e,i){const n=e.fullServerUrl(),r=to(n,t.host,t._protocol),u="GET",d=t.maxOperationRetryTime,a=new es(r,u,bk(t,i),d);return a.errorHandler=__(e),a}function Sk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function y_(t,e,i){const n=Object.assign({},i);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Sk(null,e)),n}function Tk(t,e,i,n,r){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const s=a();d["Content-Type"]="multipart/related; boundary="+s;const c=y_(e,n,r),f=v_(c,i),o="--"+s+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+s+`\r
Content-Type: `+c.contentType+`\r
\r
`,l=`\r
--`+s+"--",h=sn.getBlob(o,n,l);if(h===null)throw o_();const p={name:c.fullPath},m=to(u,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,_=new es(m,g,Iu(t,i),v);return _.urlParams=p,_.headers=d,_.body=h.uploadData(),_.errorHandler=io(e),_}class ma{constructor(e,i,n,r){this.current=e,this.total=i,this.finalized=!!n,this.metadata=r||null}}function Ru(t,e){let i=null;try{i=t.getResponseHeader("X-Goog-Upload-Status")}catch{$i(!1)}return $i(!!i&&(e||["active"]).indexOf(i)!==-1),i}function Ek(t,e,i,n,r){const u=e.bucketOnlyServerUrl(),d=y_(e,n,r),a={name:d.fullPath},s=to(u,t.host,t._protocol),c="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},o=v_(d,i),l=t.maxUploadRetryTime;function h(m){Ru(m);let g;try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{$i(!1)}return $i(Ra(g)),g}const p=new es(s,c,h,l);return p.urlParams=a,p.headers=f,p.body=o,p.errorHandler=io(e),p}function Ok(t,e,i,n){const r={"X-Goog-Upload-Command":"query"};function u(c){const f=Ru(c,["active","final"]);let o=null;try{o=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$i(!1)}o||$i(!1);const l=Number(o);return $i(!isNaN(l)),new ma(l,n.size(),f==="final")}const d="POST",a=t.maxUploadRetryTime,s=new es(i,d,u,a);return s.headers=r,s.errorHandler=io(e),s}const ad=256*1024;function kk(t,e,i,n,r,u,d,a){const s=new ma(0,0);if(d?(s.current=d.current,s.total=d.total):(s.current=0,s.total=n.size()),n.size()!==s.total)throw WO();const c=s.total-s.current;let f=c;r>0&&(f=Math.min(f,r));const o=s.current,l=o+f;let h="";f===0?h="finalize":c===f?h="upload, finalize":h="upload";const p={"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":`${s.current}`},m=n.slice(o,l);if(m===null)throw o_();function g(y,w){const C=Ru(y,["active","final"]),T=s.current+f,E=n.size();let A;return C==="final"?A=Iu(e,u)(y,w):A=null,new ma(T,E,C==="final",A)}const v="POST",_=e.maxUploadRetryTime,b=new es(i,v,g,_);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=io(t),b}const qt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Il(t){switch(t){case"running":case"pausing":case"canceling":return qt.RUNNING;case"paused":return qt.PAUSED;case"success":return qt.SUCCESS;case"canceled":return qt.CANCELED;case"error":return qt.ERROR;default:return qt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,i,n){if(KO(e)||i!=null||n!=null)this.next=e,this.error=i??void 0,this.complete=n??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Dk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Un.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Un.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Un.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,i,n,r){if(this.sent_)throw ps("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(i,e,!0),r!==void 0)for(const u in r)r.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,r[u].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ps("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ps("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ps("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ps("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Ak extends Dk{initXhr(){this.xhr_.responseType="text"}}function pr(){return new Ak}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,i,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=i,this._metadata=n,this._mappings=g_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(it.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(c_(r.status,[]))if(u)r=r_();else{this.sleepTime=Math.max(this.sleepTime*2,RO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(it.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,u)=>{this._resolve=r,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return i=>this._updateProgress(e+i)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([i,n])=>{switch(this._state){case"running":e(i,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,i)=>{const n=Ek(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,pr,e,i);this._request=r,r.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((i,n)=>{const r=Ok(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(r,pr,i,n);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ad*this._chunkMultiplier,i=new ma(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,u)=>{let d;try{d=kk(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,i,this._makeProgressCallback())}catch(s){this._error=s,this._transition("error");return}const a=this._ref.storage._makeRequest(d,pr,r,u,!1);this._request=a,a.getPromise().then(s=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(s.current),s.finalized?(this._metadata=s.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ad*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,i)=>{const n=wk(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,pr,e,i);this._request=r,r.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,i)=>{const n=Tk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,pr,e,i);this._request=r,r.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const i=this._transferred;this._transferred=e,this._transferred!==i&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const i=this._state==="paused";this._state=e,i&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=s_(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Il(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,i,n,r){const u=new xk(i||void 0,n||void 0,r||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,i){return this._promise.then(e,i)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const i=this._observers.indexOf(e);i!==-1&&this._observers.splice(i,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(i=>{this._notifyObserver(i)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Il(this._state)){case qt.SUCCESS:or(this._resolve.bind(null,this.snapshot))();break;case qt.CANCELED:case qt.ERROR:const i=this._reject;or(i.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Il(this._state)){case qt.RUNNING:case qt.PAUSED:e.next&&or(e.next.bind(e,this.snapshot))();break;case qt.SUCCESS:e.complete&&or(e.complete.bind(e))();break;case qt.CANCELED:case qt.ERROR:e.error&&or(e.error.bind(e,this._error))();break;default:e.error&&or(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,i){this._service=e,i instanceof si?this._location=i:this._location=si.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new $n(e,i)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p_(this._location.path)}get storage(){return this._service}get parent(){const e=dk(this._location.path);if(e===null)return null;const i=new si(this._location.bucket,e);return new $n(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw XO(e)}}function Ik(t,e,i){return t._throwIfRoot("uploadBytesResumable"),new Pk(t,new sn(e),i)}function Rk(t){t._throwIfRoot("getDownloadURL");const e=Ck(t.storage,t._location,g_());return t.storage.makeRequestWithTokens(e,pr).then(i=>{if(i===null)throw HO();return i})}function Mk(t,e){const i=pk(t._location.path,e),n=new si(t._location.bucket,i);return new $n(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){return/^[A-Za-z]+:\/\//.test(t)}function Lk(t,e){return new $n(t,e)}function b_(t,e){if(t instanceof Mu){const i=t;if(i._bucket==null)throw zO();const n=new $n(i,i._bucket);return e!=null?b_(n,e):n}else return e!==void 0?Mk(t,e):t}function Nk(t,e){if(e&&Fk(e)){if(t instanceof Mu)return Lk(t,e);throw Fc("To use ref(service, url), the first argument must be a Storage instance.")}else return b_(t,e)}function ld(t,e){const i=e==null?void 0:e[n_];return i==null?null:si.makeFromBucketSpec(i,t)}function jk(t,e,i,n={}){t.host=`${e}:${i}`,t._protocol="http";const{mockUserToken:r}=n;r&&(t._overrideAuthToken=typeof r=="string"?r:mE(r,t.app.options.projectId))}class Mu{constructor(e,i,n,r,u){this.app=e,this._authProvider=i,this._appCheckProvider=n,this._url=r,this._firebaseVersion=u,this._bucket=null,this._host=i_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PO,this._maxUploadRetryTime=IO,this._requests=new Set,r!=null?this._bucket=si.makeFromBucketSpec(r,this._host):this._bucket=ld(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=si.makeFromBucketSpec(this._url,e):this._bucket=ld(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){od("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){od("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $n(this,e)}_makeRequest(e,i,n,r,u=!0){if(this._deleted)return new YO(a_());{const d=nk(e,this._appId,n,r,i,this._firebaseVersion,u);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,i){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,n,r).getPromise()}}const cd="@firebase/storage",ud="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="storage";function Bk(t,e,i){return t=Ia(t),Ik(t,e,i)}function Uk(t){return t=Ia(t),Rk(t)}function zk(t,e){return t=Ia(t),Nk(t,e)}function Wk(t=wO(),e){t=Ia(t);const n=vO(t,w_).getImmediate({identifier:e}),r=pE("storage");return r&&Hk(n,...r),n}function Hk(t,e,i,n={}){jk(t,e,i,n)}function Vk(t,{instanceIdentifier:e}){const i=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Mu(i,n,r,e,bO)}function Xk(){ga(new Bs(w_,Vk,"PUBLIC").setMultipleInstances(!0)),Dr(cd,ud,""),Dr(cd,ud,"esm2017")}Xk();var Yk="firebase",$k="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(Yk,$k,"app");const Gk={apiKey:"AIzaSyANQCJa2A3rxVz0g-iKS2DnZjDEEc4zcPQ",authDomain:"podiz-22471.firebaseapp.com",databaseURL:"podiz-22471.firebaseio.com",storageBucket:"podiz-22471.appspot.com"},qk=Qv(Gk),Kk=Wk(qk);var C_={},Fu={exports:{}},S_=function(e,i){return function(){for(var r=new Array(arguments.length),u=0;u<r.length;u++)r[u]=arguments[u];return e.apply(i,r)}},Jk=S_,Lu=Object.prototype.toString,Nu=function(t){return function(e){var i=Lu.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function Kn(t){return t=t.toLowerCase(),function(i){return Nu(i)===t}}function ju(t){return Array.isArray(t)}function va(t){return typeof t>"u"}function Zk(t){return t!==null&&!va(t)&&t.constructor!==null&&!va(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var T_=Kn("ArrayBuffer");function Qk(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&T_(t.buffer),e}function ex(t){return typeof t=="string"}function tx(t){return typeof t=="number"}function E_(t){return t!==null&&typeof t=="object"}function Vo(t){if(Nu(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var ix=Kn("Date"),nx=Kn("File"),rx=Kn("Blob"),sx=Kn("FileList");function Bu(t){return Lu.call(t)==="[object Function]"}function ox(t){return E_(t)&&Bu(t.pipe)}function ax(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Lu.call(t)===e||Bu(t.toString)&&t.toString()===e)}var lx=Kn("URLSearchParams");function cx(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function ux(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Uu(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ju(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Lc(){var t={};function e(r,u){Vo(t[u])&&Vo(r)?t[u]=Lc(t[u],r):Vo(r)?t[u]=Lc({},r):ju(r)?t[u]=r.slice():t[u]=r}for(var i=0,n=arguments.length;i<n;i++)Uu(arguments[i],e);return t}function fx(t,e,i){return Uu(e,function(r,u){i&&typeof r=="function"?t[u]=Jk(r,i):t[u]=r}),t}function hx(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function dx(t,e,i,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,i&&Object.assign(t.prototype,i)}function px(t,e,i){var n,r,u,d={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),r=n.length;r-- >0;)u=n[r],d[u]||(e[u]=t[u],d[u]=!0);t=Object.getPrototypeOf(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e}function gx(t,e,i){t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;var n=t.indexOf(e,i);return n!==-1&&n===i}function mx(t){if(!t)return null;var e=t.length;if(va(e))return null;for(var i=new Array(e);e-- >0;)i[e]=t[e];return i}var vx=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Lt={isArray:ju,isArrayBuffer:T_,isBuffer:Zk,isFormData:ax,isArrayBufferView:Qk,isString:ex,isNumber:tx,isObject:E_,isPlainObject:Vo,isUndefined:va,isDate:ix,isFile:nx,isBlob:rx,isFunction:Bu,isStream:ox,isURLSearchParams:lx,isStandardBrowserEnv:ux,forEach:Uu,merge:Lc,extend:fx,trim:cx,stripBOM:hx,inherits:dx,toFlatObject:px,kindOf:Nu,kindOfTest:Kn,endsWith:gx,toArray:mx,isTypedArray:vx,isFileList:sx},ar=Lt;function fd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var O_=function(e,i,n){if(!i)return e;var r;if(n)r=n(i);else if(ar.isURLSearchParams(i))r=i.toString();else{var u=[];ar.forEach(i,function(s,c){s===null||typeof s>"u"||(ar.isArray(s)?c=c+"[]":s=[s],ar.forEach(s,function(o){ar.isDate(o)?o=o.toISOString():ar.isObject(o)&&(o=JSON.stringify(o)),u.push(fd(c)+"="+fd(o))}))}),r=u.join("&")}if(r){var d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},_x=Lt;function Ma(){this.handlers=[]}Ma.prototype.use=function(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ma.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Ma.prototype.forEach=function(e){_x.forEach(this.handlers,function(n){n!==null&&e(n)})};var yx=Ma,bx=Lt,wx=function(e,i){bx.forEach(e,function(r,u){u!==i&&u.toUpperCase()===i.toUpperCase()&&(e[i]=r,delete e[u])})},k_=Lt;function Br(t,e,i,n,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}k_.inherits(Br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var x_=Br.prototype,D_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){D_[t]={value:t}});Object.defineProperties(Br,D_);Object.defineProperty(x_,"isAxiosError",{value:!0});Br.from=function(t,e,i,n,r,u){var d=Object.create(x_);return k_.toFlatObject(t,d,function(s){return s!==Error.prototype}),Br.call(d,t.message,e,i,n,r),d.name=t.name,u&&Object.assign(d,u),d};var ts=Br,A_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_i=Lt;function Cx(t,e){e=e||new FormData;var i=[];function n(u){return u===null?"":_i.isDate(u)?u.toISOString():_i.isArrayBuffer(u)||_i.isTypedArray(u)?typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function r(u,d){if(_i.isPlainObject(u)||_i.isArray(u)){if(i.indexOf(u)!==-1)throw Error("Circular reference detected in "+d);i.push(u),_i.forEach(u,function(s,c){if(!_i.isUndefined(s)){var f=d?d+"."+c:c,o;if(s&&!d&&typeof s=="object"){if(_i.endsWith(c,"{}"))s=JSON.stringify(s);else if(_i.endsWith(c,"[]")&&(o=_i.toArray(s))){o.forEach(function(l){!_i.isUndefined(l)&&e.append(f,n(l))});return}}r(s,f)}}),i.pop()}else e.append(d,n(u))}return r(t),e}var P_=Cx,Rl,hd;function Sx(){if(hd)return Rl;hd=1;var t=ts;return Rl=function(i,n,r){var u=r.config.validateStatus;!r.status||!u||u(r.status)?i(r):n(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},Rl}var Ml,dd;function Tx(){if(dd)return Ml;dd=1;var t=Lt;return Ml=t.isStandardBrowserEnv()?function(){return{write:function(n,r,u,d,a,s){var c=[];c.push(n+"="+encodeURIComponent(r)),t.isNumber(u)&&c.push("expires="+new Date(u).toGMTString()),t.isString(d)&&c.push("path="+d),t.isString(a)&&c.push("domain="+a),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ml}var Ex=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Ox=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e},kx=Ex,xx=Ox,I_=function(e,i){return e&&!kx(i)?xx(e,i):i},Fl,pd;function Dx(){if(pd)return Fl;pd=1;var t=Lt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Fl=function(n){var r={},u,d,a;return n&&t.forEach(n.split(`
`),function(c){if(a=c.indexOf(":"),u=t.trim(c.substr(0,a)).toLowerCase(),d=t.trim(c.substr(a+1)),u){if(r[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?r[u]=(r[u]?r[u]:[]).concat([d]):r[u]=r[u]?r[u]+", "+d:d}}),r},Fl}var Ll,gd;function Ax(){if(gd)return Ll;gd=1;var t=Lt;return Ll=t.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function u(d){var a=d;return i&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=u(window.location.href),function(a){var s=t.isString(a)?u(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),Ll}var Nl,md;function Fa(){if(md)return Nl;md=1;var t=ts,e=Lt;function i(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(i,t,{__CANCEL__:!0}),Nl=i,Nl}var jl,vd;function Px(){return vd||(vd=1,jl=function(e){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}),jl}var Bl,_d;function yd(){if(_d)return Bl;_d=1;var t=Lt,e=Sx(),i=Tx(),n=O_,r=I_,u=Dx(),d=Ax(),a=A_,s=ts,c=Fa(),f=Px();return Bl=function(l){return new Promise(function(p,m){var g=l.data,v=l.headers,_=l.responseType,b;function y(){l.cancelToken&&l.cancelToken.unsubscribe(b),l.signal&&l.signal.removeEventListener("abort",b)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var w=new XMLHttpRequest;if(l.auth){var C=l.auth.username||"",T=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";v.Authorization="Basic "+btoa(C+":"+T)}var E=r(l.baseURL,l.url);w.open(l.method.toUpperCase(),n(E,l.params,l.paramsSerializer),!0),w.timeout=l.timeout;function A(){if(w){var Y="getAllResponseHeaders"in w?u(w.getAllResponseHeaders()):null,Q=!_||_==="text"||_==="json"?w.responseText:w.response,q={data:Q,status:w.status,statusText:w.statusText,headers:Y,config:l,request:w};e(function(V){p(V),y()},function(V){m(V),y()},q),w=null}}if("onloadend"in w?w.onloadend=A:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(A)},w.onabort=function(){w&&(m(new s("Request aborted",s.ECONNABORTED,l,w)),w=null)},w.onerror=function(){m(new s("Network Error",s.ERR_NETWORK,l,w,w)),w=null},w.ontimeout=function(){var Q=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",q=l.transitional||a;l.timeoutErrorMessage&&(Q=l.timeoutErrorMessage),m(new s(Q,q.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,l,w)),w=null},t.isStandardBrowserEnv()){var F=(l.withCredentials||d(E))&&l.xsrfCookieName?i.read(l.xsrfCookieName):void 0;F&&(v[l.xsrfHeaderName]=F)}"setRequestHeader"in w&&t.forEach(v,function(Q,q){typeof g>"u"&&q.toLowerCase()==="content-type"?delete v[q]:w.setRequestHeader(q,Q)}),t.isUndefined(l.withCredentials)||(w.withCredentials=!!l.withCredentials),_&&_!=="json"&&(w.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&w.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(b=function(Y){w&&(m(!Y||Y&&Y.type?new c:Y),w.abort(),w=null)},l.cancelToken&&l.cancelToken.subscribe(b),l.signal&&(l.signal.aborted?b():l.signal.addEventListener("abort",b))),g||(g=null);var G=f(E);if(G&&["http","https","file"].indexOf(G)===-1){m(new s("Unsupported protocol "+G+":",s.ERR_BAD_REQUEST,l));return}w.send(g)})},Bl}var Ul,bd;function Ix(){return bd||(bd=1,Ul=null),Ul}var kt=Lt,wd=wx,Cd=ts,Rx=A_,Mx=P_,Fx={"Content-Type":"application/x-www-form-urlencoded"};function Sd(t,e){!kt.isUndefined(t)&&kt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Lx(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=yd()),t}function Nx(t,e,i){if(kt.isString(t))try{return(e||JSON.parse)(t),kt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}var La={transitional:Rx,adapter:Lx(),transformRequest:[function(e,i){if(wd(i,"Accept"),wd(i,"Content-Type"),kt.isFormData(e)||kt.isArrayBuffer(e)||kt.isBuffer(e)||kt.isStream(e)||kt.isFile(e)||kt.isBlob(e))return e;if(kt.isArrayBufferView(e))return e.buffer;if(kt.isURLSearchParams(e))return Sd(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=kt.isObject(e),r=i&&i["Content-Type"],u;if((u=kt.isFileList(e))||n&&r==="multipart/form-data"){var d=this.env&&this.env.FormData;return Mx(u?{"files[]":e}:e,d&&new d)}else if(n||r==="application/json")return Sd(i,"application/json"),Nx(e);return e}],transformResponse:[function(e){var i=this.transitional||La.transitional,n=i&&i.silentJSONParsing,r=i&&i.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||r&&kt.isString(e)&&e.length)try{return JSON.parse(e)}catch(d){if(u)throw d.name==="SyntaxError"?Cd.from(d,Cd.ERR_BAD_RESPONSE,this,null,this.response):d}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ix()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kt.forEach(["delete","get","head"],function(e){La.headers[e]={}});kt.forEach(["post","put","patch"],function(e){La.headers[e]=kt.merge(Fx)});var zu=La,jx=Lt,Bx=zu,Ux=function(e,i,n){var r=this||Bx;return jx.forEach(n,function(d){e=d.call(r,e,i)}),e},zl,Td;function R_(){return Td||(Td=1,zl=function(e){return!!(e&&e.__CANCEL__)}),zl}var Ed=Lt,Wl=Ux,zx=R_(),Wx=zu,Hx=Fa();function Hl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hx}var Vx=function(e){Hl(e),e.headers=e.headers||{},e.data=Wl.call(e,e.data,e.headers,e.transformRequest),e.headers=Ed.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ed.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var i=e.adapter||Wx.adapter;return i(e).then(function(r){return Hl(e),r.data=Wl.call(e,r.data,r.headers,e.transformResponse),r},function(r){return zx(r)||(Hl(e),r&&r.response&&(r.response.data=Wl.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},ii=Lt,M_=function(e,i){i=i||{};var n={};function r(f,o){return ii.isPlainObject(f)&&ii.isPlainObject(o)?ii.merge(f,o):ii.isPlainObject(o)?ii.merge({},o):ii.isArray(o)?o.slice():o}function u(f){if(ii.isUndefined(i[f])){if(!ii.isUndefined(e[f]))return r(void 0,e[f])}else return r(e[f],i[f])}function d(f){if(!ii.isUndefined(i[f]))return r(void 0,i[f])}function a(f){if(ii.isUndefined(i[f])){if(!ii.isUndefined(e[f]))return r(void 0,e[f])}else return r(void 0,i[f])}function s(f){if(f in i)return r(e[f],i[f]);if(f in e)return r(void 0,e[f])}var c={url:d,method:d,data:d,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return ii.forEach(Object.keys(e).concat(Object.keys(i)),function(o){var l=c[o]||u,h=l(o);ii.isUndefined(h)&&l!==s||(n[o]=h)}),n},Vl,Od;function F_(){return Od||(Od=1,Vl={version:"0.27.2"}),Vl}var Xx=F_().version,nn=ts,Wu={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Wu[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var kd={};Wu.transitional=function(e,i,n){function r(u,d){return"[Axios v"+Xx+"] Transitional option '"+u+"'"+d+(n?". "+n:"")}return function(u,d,a){if(e===!1)throw new nn(r(d," has been removed"+(i?" in "+i:"")),nn.ERR_DEPRECATED);return i&&!kd[d]&&(kd[d]=!0,console.warn(r(d," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(u,d,a):!0}};function Yx(t,e,i){if(typeof t!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),r=n.length;r-- >0;){var u=n[r],d=e[u];if(d){var a=t[u],s=a===void 0||d(a,u,t);if(s!==!0)throw new nn("option "+u+" must be "+s,nn.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new nn("Unknown option "+u,nn.ERR_BAD_OPTION)}}var $x={assertOptions:Yx,validators:Wu},L_=Lt,Gx=O_,xd=yx,Dd=Vx,Na=M_,qx=I_,N_=$x,lr=N_.validators;function Ur(t){this.defaults=t,this.interceptors={request:new xd,response:new xd}}Ur.prototype.request=function(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Na(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var n=i.transitional;n!==void 0&&N_.assertOptions(n,{silentJSONParsing:lr.transitional(lr.boolean),forcedJSONParsing:lr.transitional(lr.boolean),clarifyTimeoutError:lr.transitional(lr.boolean)},!1);var r=[],u=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(i)===!1||(u=u&&h.synchronous,r.unshift(h.fulfilled,h.rejected))});var d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});var a;if(!u){var s=[Dd,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(d),a=Promise.resolve(i);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=i;r.length;){var f=r.shift(),o=r.shift();try{c=f(c)}catch(l){o(l);break}}try{a=Dd(c)}catch(l){return Promise.reject(l)}for(;d.length;)a=a.then(d.shift(),d.shift());return a};Ur.prototype.getUri=function(e){e=Na(this.defaults,e);var i=qx(e.baseURL,e.url);return Gx(i,e.params,e.paramsSerializer)};L_.forEach(["delete","get","head","options"],function(e){Ur.prototype[e]=function(i,n){return this.request(Na(n||{},{method:e,url:i,data:(n||{}).data}))}});L_.forEach(["post","put","patch"],function(e){function i(n){return function(u,d,a){return this.request(Na(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Ur.prototype[e]=i(),Ur.prototype[e+"Form"]=i(!0)});var Kx=Ur,Xl,Ad;function Jx(){if(Ad)return Xl;Ad=1;var t=Fa();function e(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(d){n=d});var r=this;this.promise.then(function(u){if(r._listeners){var d,a=r._listeners.length;for(d=0;d<a;d++)r._listeners[d](u);r._listeners=null}}),this.promise.then=function(u){var d,a=new Promise(function(s){r.subscribe(s),d=s}).then(u);return a.cancel=function(){r.unsubscribe(d)},a},i(function(d){r.reason||(r.reason=new t(d),n(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var n,r=new e(function(d){n=d});return{token:r,cancel:n}},Xl=e,Xl}var Yl,Pd;function Zx(){return Pd||(Pd=1,Yl=function(e){return function(n){return e.apply(null,n)}}),Yl}var $l,Id;function Qx(){if(Id)return $l;Id=1;var t=Lt;return $l=function(i){return t.isObject(i)&&i.isAxiosError===!0},$l}var Rd=Lt,e2=S_,Xo=Kx,t2=M_,i2=zu;function j_(t){var e=new Xo(t),i=e2(Xo.prototype.request,e);return Rd.extend(i,Xo.prototype,e),Rd.extend(i,e),i.create=function(r){return j_(t2(t,r))},i}var ti=j_(i2);ti.Axios=Xo;ti.CanceledError=Fa();ti.CancelToken=Jx();ti.isCancel=R_();ti.VERSION=F_().version;ti.toFormData=P_;ti.AxiosError=ts;ti.Cancel=ti.CanceledError;ti.all=function(e){return Promise.all(e)};ti.spread=Zx();ti.isAxiosError=Qx();Fu.exports=ti;Fu.exports.default=ti;var n2=Fu.exports,B_=n2,Nc={exports:{}},ja={},Hu={},Ba={},no={},zr={},qi={},is={},Wr={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ERROR_PACKET=Fi.PACKET_TYPES_REVERSE=Fi.PACKET_TYPES=void 0;const Bi=Object.create(null);Fi.PACKET_TYPES=Bi;Bi.open="0";Bi.close="1";Bi.ping="2";Bi.pong="3";Bi.message="4";Bi.upgrade="5";Bi.noop="6";const U_=Object.create(null);Fi.PACKET_TYPES_REVERSE=U_;Object.keys(Bi).forEach(t=>{U_[Bi[t]]=t});const r2={type:"error",data:"parser error"};Fi.ERROR_PACKET=r2;Object.defineProperty(Wr,"__esModule",{value:!0});Wr.encodePacket=Wr.encodePacketToBinary=void 0;const s2=Fi,z_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",W_=typeof ArrayBuffer=="function",H_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,V_=({type:t,data:e},i,n)=>z_&&e instanceof Blob?i?n(e):Md(e,n):W_&&(e instanceof ArrayBuffer||H_(e))?i?n(e):Md(new Blob([e]),n):n(s2.PACKET_TYPES[t]+(e||""));Wr.encodePacket=V_;const Md=(t,e)=>{const i=new FileReader;return i.onload=function(){const n=i.result.split(",")[1];e("b"+(n||""))},i.readAsDataURL(t)};function Fd(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Gl;function o2(t,e){if(z_&&t.data instanceof Blob)return t.data.arrayBuffer().then(Fd).then(e);if(W_&&(t.data instanceof ArrayBuffer||H_(t.data)))return e(Fd(t.data));V_(t,!1,i=>{Gl||(Gl=new TextEncoder),e(Gl.encode(i))})}Wr.encodePacketToBinary=o2;var Ua={},Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.decode=Hr.encode=void 0;const yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<yr.length;t++)vs[yr.charCodeAt(t)]=t;const a2=t=>{let e=new Uint8Array(t),i,n=e.length,r="";for(i=0;i<n;i+=3)r+=yr[e[i]>>2],r+=yr[(e[i]&3)<<4|e[i+1]>>4],r+=yr[(e[i+1]&15)<<2|e[i+2]>>6],r+=yr[e[i+2]&63];return n%3===2?r=r.substring(0,r.length-1)+"=":n%3===1&&(r=r.substring(0,r.length-2)+"=="),r};Hr.encode=a2;const l2=t=>{let e=t.length*.75,i=t.length,n,r=0,u,d,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),f=new Uint8Array(c);for(n=0;n<i;n+=4)u=vs[t.charCodeAt(n)],d=vs[t.charCodeAt(n+1)],a=vs[t.charCodeAt(n+2)],s=vs[t.charCodeAt(n+3)],f[r++]=u<<2|d>>4,f[r++]=(d&15)<<4|a>>2,f[r++]=(a&3)<<6|s&63;return c};Hr.decode=l2;Object.defineProperty(Ua,"__esModule",{value:!0});Ua.decodePacket=void 0;const ko=Fi,c2=Hr,u2=typeof ArrayBuffer=="function",f2=(t,e)=>{if(typeof t!="string")return{type:"message",data:X_(t,e)};const i=t.charAt(0);return i==="b"?{type:"message",data:h2(t.substring(1),e)}:ko.PACKET_TYPES_REVERSE[i]?t.length>1?{type:ko.PACKET_TYPES_REVERSE[i],data:t.substring(1)}:{type:ko.PACKET_TYPES_REVERSE[i]}:ko.ERROR_PACKET};Ua.decodePacket=f2;const h2=(t,e)=>{if(u2){const i=(0,c2.decode)(t);return X_(i,e)}else return{base64:!0,data:t}},X_=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;const e=Wr;Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const i=Ua;Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return i.decodePacket}});const n=Fi,r="",u=(l,h)=>{const p=l.length,m=new Array(p);let g=0;l.forEach((v,_)=>{(0,e.encodePacket)(v,!1,b=>{m[_]=b,++g===p&&h(m.join(r))})})};t.encodePayload=u;const d=(l,h)=>{const p=l.split(r),m=[];for(let g=0;g<p.length;g++){const v=(0,i.decodePacket)(p[g],h);if(m.push(v),v.type==="error")break}return m};t.decodePayload=d;function a(){return new TransformStream({transform(l,h){(0,e.encodePacketToBinary)(l,p=>{const m=p.length;let g;if(m<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,m);else if(m<65536){g=new Uint8Array(3);const v=new DataView(g.buffer);v.setUint8(0,126),v.setUint16(1,m)}else{g=new Uint8Array(9);const v=new DataView(g.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(m))}l.data&&typeof l.data!="string"&&(g[0]|=128),h.enqueue(g),h.enqueue(p)})}})}t.createPacketEncoderStream=a;let s;function c(l){return l.reduce((h,p)=>h+p.length,0)}function f(l,h){if(l[0].length===h)return l.shift();const p=new Uint8Array(h);let m=0;for(let g=0;g<h;g++)p[g]=l[0][m++],m===l[0].length&&(l.shift(),m=0);return l.length&&m<l[0].length&&(l[0]=l[0].slice(m)),p}function o(l,h){s||(s=new TextDecoder);const p=[];let m=0,g=-1,v=!1;return new TransformStream({transform(_,b){for(p.push(_);;){if(m===0){if(c(p)<1)break;const y=f(p,1);v=(y[0]&128)===128,g=y[0]&127,g<126?m=3:g===126?m=1:m=2}else if(m===1){if(c(p)<2)break;const y=f(p,2);g=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),m=3}else if(m===2){if(c(p)<8)break;const y=f(p,8),w=new DataView(y.buffer,y.byteOffset,y.length),C=w.getUint32(0);if(C>Math.pow(2,21)-1){b.enqueue(n.ERROR_PACKET);break}g=C*Math.pow(2,32)+w.getUint32(4),m=3}else{if(c(p)<g)break;const y=f(p,g);b.enqueue((0,i.decodePacket)(v?y:s.decode(y),h)),m=0}if(g===0||g>l){b.enqueue(n.ERROR_PACKET);break}}}})}t.createPacketDecoderStream=o,t.protocol=4})(is);function Vt(t){if(t)return d2(t)}function d2(t){for(var e in Vt.prototype)t[e]=Vt.prototype[e];return t}Vt.prototype.on=Vt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Vt.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this};Vt.prototype.off=Vt.prototype.removeListener=Vt.prototype.removeAllListeners=Vt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===e||n.fn===e){i.splice(r,1);break}return i.length===0&&delete this._callbacks["$"+t],this};Vt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,e)}return this};Vt.prototype.emitReserved=Vt.prototype.emit;Vt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Vt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const p2=Object.freeze(Object.defineProperty({__proto__:null,Emitter:Vt},Symbol.toStringTag,{value:"Module"})),ns=Fm(p2);var mi={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.globalThisShim=void 0;Jn.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty(mi,"__esModule",{value:!0});mi.byteLength=mi.installTimerFunctions=mi.pick=void 0;const rn=Jn;function g2(t,...e){return e.reduce((i,n)=>(t.hasOwnProperty(n)&&(i[n]=t[n]),i),{})}mi.pick=g2;const m2=rn.globalThisShim.setTimeout,v2=rn.globalThisShim.clearTimeout;function _2(t,e){e.useNativeTimers?(t.setTimeoutFn=m2.bind(rn.globalThisShim),t.clearTimeoutFn=v2.bind(rn.globalThisShim)):(t.setTimeoutFn=rn.globalThisShim.setTimeout.bind(rn.globalThisShim),t.clearTimeoutFn=rn.globalThisShim.clearTimeout.bind(rn.globalThisShim))}mi.installTimerFunctions=_2;const y2=1.33;function b2(t){return typeof t=="string"?w2(t):Math.ceil((t.byteLength||t.size)*y2)}mi.byteLength=b2;function w2(t){let e=0,i=0;for(let n=0,r=t.length;n<r;n++)e=t.charCodeAt(n),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}var jc={exports:{}},ql,Ld;function C2(){if(Ld)return ql;Ld=1;var t=1e3,e=t*60,i=e*60,n=i*24,r=n*7,u=n*365.25;ql=function(f,o){o=o||{};var l=typeof f;if(l==="string"&&f.length>0)return d(f);if(l==="number"&&isFinite(f))return o.long?s(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function d(f){if(f=String(f),!(f.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(o){var l=parseFloat(o[1]),h=(o[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return l*u;case"weeks":case"week":case"w":return l*r;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function a(f){var o=Math.abs(f);return o>=n?Math.round(f/n)+"d":o>=i?Math.round(f/i)+"h":o>=e?Math.round(f/e)+"m":o>=t?Math.round(f/t)+"s":f+"ms"}function s(f){var o=Math.abs(f);return o>=n?c(f,o,n,"day"):o>=i?c(f,o,i,"hour"):o>=e?c(f,o,e,"minute"):o>=t?c(f,o,t,"second"):f+" ms"}function c(f,o,l,h){var p=o>=l*1.5;return Math.round(f/l)+" "+h+(p?"s":"")}return ql}function S2(t){i.debug=i,i.default=i,i.coerce=s,i.disable=u,i.enable=r,i.enabled=d,i.humanize=C2(),i.destroy=c,Object.keys(t).forEach(f=>{i[f]=t[f]}),i.names=[],i.skips=[],i.formatters={};function e(f){let o=0;for(let l=0;l<f.length;l++)o=(o<<5)-o+f.charCodeAt(l),o|=0;return i.colors[Math.abs(o)%i.colors.length]}i.selectColor=e;function i(f){let o,l=null,h,p;function m(...g){if(!m.enabled)return;const v=m,_=Number(new Date),b=_-(o||_);v.diff=b,v.prev=o,v.curr=_,o=_,g[0]=i.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";y++;const E=i.formatters[T];if(typeof E=="function"){const A=g[y];C=E.call(v,A),g.splice(y,1),y--}return C}),i.formatArgs.call(v,g),(v.log||i.log).apply(v,g)}return m.namespace=f,m.useColors=i.useColors(),m.color=i.selectColor(f),m.extend=n,m.destroy=i.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(h!==i.namespaces&&(h=i.namespaces,p=i.enabled(f)),p),set:g=>{l=g}}),typeof i.init=="function"&&i.init(m),m}function n(f,o){const l=i(this.namespace+(typeof o>"u"?":":o)+f);return l.log=this.log,l}function r(f){i.save(f),i.namespaces=f,i.names=[],i.skips=[];let o;const l=(typeof f=="string"?f:"").split(/[\s,]+/),h=l.length;for(o=0;o<h;o++)l[o]&&(f=l[o].replace(/\*/g,".*?"),f[0]==="-"?i.skips.push(new RegExp("^"+f.slice(1)+"$")):i.names.push(new RegExp("^"+f+"$")))}function u(){const f=[...i.names.map(a),...i.skips.map(a).map(o=>"-"+o)].join(",");return i.enable(""),f}function d(f){if(f[f.length-1]==="*")return!0;let o,l;for(o=0,l=i.skips.length;o<l;o++)if(i.skips[o].test(f))return!1;for(o=0,l=i.names.length;o<l;o++)if(i.names[o].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function s(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var T2=S2;(function(t,e){var i={};e.formatArgs=r,e.save=u,e.load=d,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let o=0,l=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(o++,h==="%c"&&(l=o))}),c.splice(l,0,f)}e.log=console.debug||console.log||(()=>{});function u(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function d(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=i.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=T2(e);const{formatters:s}=t.exports;s.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(jc,jc.exports);var Ui=jc.exports,Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.decode=Gn.encode=void 0;function E2(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}Gn.encode=E2;function O2(t){let e={},i=t.split("&");for(let n=0,r=i.length;n<r;n++){let u=i[n].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}Gn.decode=O2;var k2=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qi,"__esModule",{value:!0});qi.Transport=qi.TransportError=void 0;const x2=is,D2=ns,A2=mi,P2=k2(Ui),I2=Gn,R2=(0,P2.default)("engine.io-client:transport");class Y_ extends Error{constructor(e,i,n){super(e),this.description=i,this.context=n,this.type="TransportError"}}qi.TransportError=Y_;class M2 extends D2.Emitter{constructor(e){super(),this.writable=!1,(0,A2.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,i,n){return super.emitReserved("error",new Y_(e,i,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):R2("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=(0,x2.decodePacket)(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,i={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const i=(0,I2.encode)(e);return i.length?"?"+i:""}}qi.Transport=M2;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.yeast=Gi.decode=Gi.encode=void 0;const $_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),_a=64,G_={};let Nd=0,un=0,jd;function Bc(t){let e="";do e=$_[t%_a]+e,t=Math.floor(t/_a);while(t>0);return e}Gi.encode=Bc;function F2(t){let e=0;for(un=0;un<t.length;un++)e=e*_a+G_[t.charAt(un)];return e}Gi.decode=F2;function L2(){const t=Bc(+new Date);return t!==jd?(Nd=0,jd=t):t+"."+Bc(Nd++)}Gi.yeast=L2;for(;un<_a;un++)G_[$_[un]]=un;var Vr={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.hasCORS=void 0;let q_=!1;try{q_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}za.hasCORS=q_;Object.defineProperty(Vr,"__esModule",{value:!0});Vr.createCookieJar=Vr.XHR=void 0;const N2=za,j2=Jn;function B2(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||N2.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new j2.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}Vr.XHR=B2;function U2(){}Vr.createCookieJar=U2;var z2=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zr,"__esModule",{value:!0});zr.Request=zr.Polling=void 0;const W2=qi,H2=z2(Ui),V2=Gi,Bd=is,Vu=Vr,X2=ns,Ud=mi,Y2=Jn,$t=(0,H2.default)("engine.io-client:polling");function $2(){}const G2=function(){return new Vu.XHR({xdomain:!1}).responseType!=null}();class q2 extends W2.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const i=e&&e.forceBase64;this.supportsBinary=G2&&!i,this.opts.withCredentials&&(this.cookieJar=(0,Vu.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const i=()=>{$t("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&($t("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){$t("pre-pause polling complete"),--n||i()})),this.writable||($t("we are currently writing - waiting to pause"),n++,this.once("drain",function(){$t("pre-pause writing complete"),--n||i()}))}else i()}poll(){$t("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){$t("polling got data %s",e);const i=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};(0,Bd.decodePayload)(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():$t('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{$t("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?($t("transport open - closing"),e()):($t("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,Bd.encodePayload)(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=(0,V2.yeast)()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(e,i)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ti(this.uri(),e)}doWrite(e,i){const n=this.request({method:"POST",data:e});n.on("success",i),n.on("error",(r,u)=>{this.onError("xhr post error",r,u)})}doPoll(){$t("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,n)=>{this.onError("xhr poll error",i,n)}),this.pollXhr=e}}zr.Polling=q2;class Ti extends X2.Emitter{constructor(e,i){super(),(0,Ud.installTimerFunctions)(this,i),this.opts=i,this.method=i.method||"GET",this.uri=e,this.data=i.data!==void 0?i.data:null,this.create()}create(){var e;const i=(0,Ud.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this.opts.xd;const n=this.xhr=new Vu.XHR(i);try{$t("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},$t("xhr data %s",this.data),n.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Ti.requestsCount++,Ti.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=$2,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Ti.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}zr.Request=Ti;Ti.requestsCount=0;Ti.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zd);else if(typeof addEventListener=="function"){const t="onpagehide"in Y2.globalThisShim?"pagehide":"unload";addEventListener(t,zd,!1)}}function zd(){for(let t in Ti.requests)Ti.requests.hasOwnProperty(t)&&Ti.requests[t].abort()}var Wa={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.defaultBinaryType=oi.usingBrowserWebSocket=oi.WebSocket=oi.nextTick=void 0;const Wd=Jn;oi.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0);oi.WebSocket=Wd.globalThisShim.WebSocket||Wd.globalThisShim.MozWebSocket;oi.usingBrowserWebSocket=!0;oi.defaultBinaryType="arraybuffer";var K2=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.WS=void 0;const J2=qi,Z2=Gi,Q2=mi,Qi=oi,eD=K2(Ui),tD=is,iD=(0,eD.default)("engine.io-client:websocket"),Hd=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nD extends J2.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),i=this.opts.protocols,n=Hd?{}:(0,Q2.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Qi.usingBrowserWebSocket&&!Hd?i?new Qi.WebSocket(e,i):new Qi.WebSocket(e):new Qi.WebSocket(e,i,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const n=e[i],r=i===e.length-1;(0,tD.encodePacket)(n,this.supportsBinary,u=>{const d={};Qi.usingBrowserWebSocket||(n.options&&(d.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof u=="string"?Buffer.byteLength(u):u.length)<this.opts.perMessageDeflate.threshold&&(d.compress=!1));try{Qi.usingBrowserWebSocket?this.ws.send(u):this.ws.send(u,d)}catch{iD("websocket closed before onclose event")}r&&(0,Qi.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=(0,Z2.yeast)()),this.supportsBinary||(i.b64=1),this.createUri(e,i)}check(){return!!Qi.WebSocket}}Wa.WS=nD;var Ha={},rD=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.WT=void 0;const sD=qi,oD=oi,Vd=is,aD=rD(Ui),gs=(0,aD.default)("engine.io-client:webtransport");class lD extends sD.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{gs("transport closed gracefully"),this.onClose()}).catch(e=>{gs("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const i=(0,Vd.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(i).getReader(),r=(0,Vd.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const u=()=>{n.read().then(({done:a,value:s})=>{if(a){gs("session is closed");return}gs("received chunk: %o",s),this.onPacket(s),u()}).catch(a=>{gs("an error occurred while reading: %s",a)})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this.writer.write(d).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const n=e[i],r=i===e.length-1;this.writer.write(n).then(()=>{r&&(0,oD.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}Ha.WT=lD;Object.defineProperty(no,"__esModule",{value:!0});no.transports=void 0;const cD=zr,uD=Wa,fD=Ha;no.transports={websocket:uD.WS,webtransport:fD.WT,polling:cD.Polling};var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.parse=void 0;const hD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pD(t){if(t.length>2e3)throw"URI too long";const e=t,i=t.indexOf("["),n=t.indexOf("]");i!=-1&&n!=-1&&(t=t.substring(0,i)+t.substring(i,n).replace(/:/g,";")+t.substring(n,t.length));let r=hD.exec(t||""),u={},d=14;for(;d--;)u[dD[d]]=r[d]||"";return i!=-1&&n!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=gD(u,u.path),u.queryKey=mD(u,u.query),u}ro.parse=pD;function gD(t,e){const i=/\/{2,9}/g,n=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function mD(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,u){r&&(i[r]=u)}),i}var vD=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.Socket=void 0;const _D=no,Xd=mi,yD=Gn,Yd=ro,bD=vD(Ui),wD=ns,K_=is,CD=oi,st=(0,bD.default)("engine.io-client:socket");let J_=class gr extends wD.Emitter{constructor(e,i={}){super(),this.binaryType=CD.defaultBinaryType,this.writeBuffer=[],e&&typeof e=="object"&&(i=e,e=null),e?(e=(0,Yd.parse)(e),i.hostname=e.host,i.secure=e.protocol==="https"||e.protocol==="wss",i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=(0,Yd.parse)(i.host).host),(0,Xd.installTimerFunctions)(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,yD.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){st('creating transport "%s"',e);const i=Object.assign({},this.opts.query);i.EIO=K_.protocol,i.transport=e,this.id&&(i.sid=this.id);const n=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return st("options: %j",n),new _D.transports[e](n)}open(){let e;if(this.opts.rememberUpgrade&&gr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(i){st("error while creating transport: %s",i),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){st("setting transport %s",e.name),this.transport&&(st("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(e){st('probing transport "%s"',e);let i=this.createTransport(e),n=!1;gr.priorWebsocketSuccess=!1;const r=()=>{n||(st('probe transport "%s" opened',e),i.send([{type:"ping",data:"probe"}]),i.once("packet",o=>{if(!n)if(o.type==="pong"&&o.data==="probe"){if(st('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;gr.priorWebsocketSuccess=i.name==="websocket",st('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||this.readyState!=="closed"&&(st("changing transport and sending upgrade packet"),f(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{st('probe transport "%s" failed',e);const l=new Error("probe error");l.transport=i.name,this.emitReserved("upgradeError",l)}}))};function u(){n||(n=!0,f(),i.close(),i=null)}const d=o=>{const l=new Error("probe error: "+o);l.transport=i.name,u(),st('probe transport "%s" failed because of error: %s',e,o),this.emitReserved("upgradeError",l)};function a(){d("transport closed")}function s(){d("socket closed")}function c(o){i&&o.name!==i.name&&(st('"%s" works - aborting "%s"',o.name,i.name),u())}const f=()=>{i.removeListener("open",r),i.removeListener("error",d),i.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};i.once("open",r),i.once("error",d),i.once("close",a),this.once("close",s),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||i.open()},200):i.open()}onOpen(){if(st("socket open"),this.readyState="open",gr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){st("starting upgrade probes");let e=0;const i=this.upgrades.length;for(;e<i;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(st('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=e.data,this.onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else st('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();st("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(i+=(0,Xd.byteLength)(r)),n>0&&i>this.maxPayload)return st("only send %d out of %d packets",n,this.writeBuffer.length),this.writeBuffer.slice(0,n);i+=2}return st("payload size is %d (max: %d)",i,this.maxPayload),this.writeBuffer}write(e,i,n){return this.sendPacket("message",e,i,n),this}send(e,i,n){return this.sendPacket("message",e,i,n),this}sendPacket(e,i,n,r){if(typeof i=="function"&&(r=i,i=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const u={type:e,data:i,options:n};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),st("socket closing - telling transport to close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},n=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){st("socket error %j",e),gr.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(st('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const i=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&i.push(e[n]);return i}};Ba.Socket=J_;J_.protocol=K_.protocol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.Socket=void 0;const e=Ba;Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return e.Socket}}),t.protocol=e.Socket.protocol;var i=qi;Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return i.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return i.TransportError}});var n=no;Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return n.transports}});var r=mi;Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return r.installTimerFunctions}});var u=ro;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.parse}});var d=oi;Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return d.nextTick}})})(Hu);var SD=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ja,"__esModule",{value:!0});ja.url=void 0;const TD=Hu,ED=SD(Ui),$d=ED.default("socket.io-client:url");function OD(t,e="",i){let n=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||($d("protocol-less url %s",t),typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),$d("parse %s",t),n=TD.parse(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const u=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+u+":"+n.port+e,n.href=n.protocol+"://"+u+(i&&i.port===n.port?"":":"+n.port),n}ja.url=OD;var Va={},so={},Xa={},Xr={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.hasBinary=qn.isBinary=void 0;const kD=typeof ArrayBuffer=="function",xD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Z_=Object.prototype.toString,DD=typeof Blob=="function"||typeof Blob<"u"&&Z_.call(Blob)==="[object BlobConstructor]",AD=typeof File=="function"||typeof File<"u"&&Z_.call(File)==="[object FileConstructor]";function Q_(t){return kD&&(t instanceof ArrayBuffer||xD(t))||DD&&t instanceof Blob||AD&&t instanceof File}qn.isBinary=Q_;function Yo(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,n=t.length;i<n;i++)if(Yo(t[i]))return!0;return!1}if(Q_(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Yo(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Yo(t[i]))return!0;return!1}qn.hasBinary=Yo;Object.defineProperty(Xr,"__esModule",{value:!0});Xr.reconstructPacket=Xr.deconstructPacket=void 0;const PD=qn;function ID(t){const e=[],i=t.data,n=t;return n.data=Uc(i,e),n.attachments=e.length,{packet:n,buffers:e}}Xr.deconstructPacket=ID;function Uc(t,e){if(!t)return t;if((0,PD.isBinary)(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let n=0;n<t.length;n++)i[n]=Uc(t[n],e);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=Uc(t[n],e));return i}return t}function RD(t,e){return t.data=zc(t.data,e),delete t.attachments,t}Xr.reconstructPacket=RD;function zc(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=zc(t[i],e);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=zc(t[i],e));return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const e=ns,i=Xr,n=qn,u=(0,Ui.default)("socket.io-parser"),d=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];t.protocol=5;var a;(function(l){l[l.CONNECT=0]="CONNECT",l[l.DISCONNECT=1]="DISCONNECT",l[l.EVENT=2]="EVENT",l[l.ACK=3]="ACK",l[l.CONNECT_ERROR=4]="CONNECT_ERROR",l[l.BINARY_EVENT=5]="BINARY_EVENT",l[l.BINARY_ACK=6]="BINARY_ACK"})(a=t.PacketType||(t.PacketType={}));class s{constructor(h){this.replacer=h}encode(h){return u("encoding packet %j",h),(h.type===a.EVENT||h.type===a.ACK)&&(0,n.hasBinary)(h)?this.encodeAsBinary({type:h.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:h.nsp,data:h.data,id:h.id}):[this.encodeAsString(h)]}encodeAsString(h){let p=""+h.type;return(h.type===a.BINARY_EVENT||h.type===a.BINARY_ACK)&&(p+=h.attachments+"-"),h.nsp&&h.nsp!=="/"&&(p+=h.nsp+","),h.id!=null&&(p+=h.id),h.data!=null&&(p+=JSON.stringify(h.data,this.replacer)),u("encoded %j as %s",h,p),p}encodeAsBinary(h){const p=(0,i.deconstructPacket)(h),m=this.encodeAsString(p.packet),g=p.buffers;return g.unshift(m),g}}t.Encoder=s;function c(l){return Object.prototype.toString.call(l)==="[object Object]"}class f extends e.Emitter{constructor(h){super(),this.reviver=h}add(h){let p;if(typeof h=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(h);const m=p.type===a.BINARY_EVENT;m||p.type===a.BINARY_ACK?(p.type=m?a.EVENT:a.ACK,this.reconstructor=new o(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,n.isBinary)(h)||h.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(h),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+h)}decodeString(h){let p=0;const m={type:Number(h.charAt(0))};if(a[m.type]===void 0)throw new Error("unknown packet type "+m.type);if(m.type===a.BINARY_EVENT||m.type===a.BINARY_ACK){const v=p+1;for(;h.charAt(++p)!=="-"&&p!=h.length;);const _=h.substring(v,p);if(_!=Number(_)||h.charAt(p)!=="-")throw new Error("Illegal attachments");m.attachments=Number(_)}if(h.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(h.charAt(p)===","||p===h.length););m.nsp=h.substring(v,p)}else m.nsp="/";const g=h.charAt(p+1);if(g!==""&&Number(g)==g){const v=p+1;for(;++p;){const _=h.charAt(p);if(_==null||Number(_)!=_){--p;break}if(p===h.length)break}m.id=Number(h.substring(v,p+1))}if(h.charAt(++p)){const v=this.tryParse(h.substr(p));if(f.isPayloadValid(m.type,v))m.data=v;else throw new Error("invalid payload")}return u("decoded %s as %j",h,m),m}tryParse(h){try{return JSON.parse(h,this.reviver)}catch{return!1}}static isPayloadValid(h,p){switch(h){case a.CONNECT:return c(p);case a.DISCONNECT:return p===void 0;case a.CONNECT_ERROR:return typeof p=="string"||c(p);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&d.indexOf(p[0])===-1);case a.ACK:case a.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=f;class o{constructor(h){this.packet=h,this.buffers=[],this.reconPack=h}takeBinaryData(h){if(this.buffers.push(h),this.buffers.length===this.reconPack.attachments){const p=(0,i.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(Xa);var oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.on=void 0;function MD(t,e,i){return t.on(e,i),function(){t.off(e,i)}}oo.on=MD;var FD=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(so,"__esModule",{value:!0});so.Socket=void 0;const yi=Xa,xo=oo,LD=ns,ND=FD(Ui),Ct=ND.default("socket.io-client:socket"),jD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class BD extends LD.Emitter{constructor(e,i,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[xo.on(e,"open",this.onopen.bind(this)),xo.on(e,"packet",this.onpacket.bind(this)),xo.on(e,"error",this.onerror.bind(this)),xo.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){if(jD.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const n={type:yi.PacketType.EVENT,data:i};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const d=this.ids++;Ct("emitting packet with ack id %d",d);const a=i.pop();this._registerAckCallback(d,a),n.id=d}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?Ct("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n),this.flags={},this}_registerAckCallback(e,i){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=i;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&(Ct("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));Ct("event with ack id %d has timed out after %d ms",e,r),i.call(this,new Error("operation has timed out"))},r),d=(...a)=>{this.io.clearTimeoutFn(u),i.apply(this,a)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...i){return new Promise((n,r)=>{const u=(d,a)=>d?r(d):n(a);u.withError=!0,i.push(u),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...u)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(Ct("packet [%d] is discarded after %d tries",n.id,n.tryCount),this._queue.shift(),i&&i(r)):(Ct("packet [%d] was successfully sent",n.id),this._queue.shift(),i&&i(null,...u)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(Ct("draining queue"),!this.connected||this._queue.length===0)return;const i=this._queue[0];if(i.pending&&!e){Ct("packet [%d] has already been sent and is waiting for an ack",i.id);return}i.pending=!0,i.tryCount++,Ct("sending packet [%d] (try n°%d)",i.id,i.tryCount),this.flags=i.flags,this.emit.apply(this,i.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Ct("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:yi.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){Ct("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case yi.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case yi.PacketType.EVENT:case yi.PacketType.BINARY_EVENT:this.onevent(e);break;case yi.PacketType.ACK:case yi.PacketType.BINARY_ACK:this.onack(e);break;case yi.PacketType.DISCONNECT:this.ondisconnect();break;case yi.PacketType.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const i=e.data||[];Ct("emitting event %j",i),e.id!=null&&(Ct("attaching ack callback to event"),i.push(this.ack(e.id))),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const n of i)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let n=!1;return function(...r){n||(n=!0,Ct("sending ack %j",r),i.packet({type:yi.PacketType.ACK,id:e,data:r}))}}onack(e){const i=this.acks[e.id];if(typeof i!="function"){Ct("bad ack %s",e.id);return}delete this.acks[e.id],Ct("calling ack %s with %j",e.id,e.data),i.withError&&e.data.unshift(null),i.apply(this,e.data)}onconnect(e,i){Ct("socket connected with id %s",e),this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){Ct("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Ct("performing disconnect (%s)",this.nsp),this.packet({type:yi.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let n=0;n<i.length;n++)if(e===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let n=0;n<i.length;n++)if(e===i[n])return i.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const n of i)n.apply(this,e.data)}}}so.Socket=BD;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Backoff=void 0;function rs(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ya.Backoff=rs;rs.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+i:t-i}return Math.min(t,this.max)|0};rs.prototype.reset=function(){this.attempts=0};rs.prototype.setMin=function(t){this.ms=t};rs.prototype.setMax=function(t){this.max=t};rs.prototype.setJitter=function(t){this.jitter=t};var UD=Ie&&Ie.__createBinding||(Object.create?function(t,e,i,n){n===void 0&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){n===void 0&&(n=i),t[n]=e[i]}),zD=Ie&&Ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),WD=Ie&&Ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&UD(e,t,i);return zD(e,t),e},HD=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Va,"__esModule",{value:!0});Va.Manager=void 0;const Kl=Hu,VD=so,XD=WD(Xa),Cn=oo,YD=Ya,$D=ns,GD=HD(Ui),It=GD.default("socket.io-client:manager");class qD extends $D.Emitter{constructor(e,i){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Kl.installTimerFunctions(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((n=i.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new YD.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const r=i.parser||XD;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(It("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;It("opening %s",this.uri),this.engine=new Kl.Socket(this.uri,this.opts);const i=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Cn.on(i,"open",function(){n.onopen(),e&&e()}),u=a=>{It("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},d=Cn.on(i,"error",u);if(this._timeout!==!1){const a=this._timeout;It("connect attempt will timeout after %d",a);const s=this.setTimeoutFn(()=>{It("connect attempt timed out after %d",a),r(),u(new Error("timeout")),i.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){It("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Cn.on(e,"ping",this.onping.bind(this)),Cn.on(e,"data",this.ondata.bind(this)),Cn.on(e,"error",this.onerror.bind(this)),Cn.on(e,"close",this.onclose.bind(this)),Cn.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){Kl.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){It("error",e),this.emitReserved("error",e)}socket(e,i){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new VD.Socket(this,e,i),this.nsps[e]=n),n}_destroy(e){const i=Object.keys(this.nsps);for(const n of i)if(this.nsps[n].active){It("socket %s is still active, skipping close",n);return}this._close()}_packet(e){It("writing packet %j",e);const i=this.encoder.encode(e);for(let n=0;n<i.length;n++)this.engine.write(i[n],e.options)}cleanup(){It("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){It("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,i){It("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)It("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();It("will wait %dms before reconnect attempt",i),this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(It("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(It("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(It("reconnect success"),e.onreconnect())}))},i);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}Va.Manager=qD;(function(t,e){var i=Ie&&Ie.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const n=ja,r=Va;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});const u=so;Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return u.Socket}});const a=i(Ui).default("socket.io-client"),s={};function c(o,l){typeof o=="object"&&(l=o,o=void 0),l=l||{};const h=n.url(o,l.path||"/socket.io"),p=h.source,m=h.id,g=h.path,v=s[m]&&g in s[m].nsps,_=l.forceNew||l["force new connection"]||l.multiplex===!1||v;let b;return _?(a("ignoring socket cache for %s",p),b=new r.Manager(p,l)):(s[m]||(a("new io instance for %s",p),s[m]=new r.Manager(p,l)),b=s[m]),h.query&&!l.query&&(l.query=h.queryKey),b.socket(h.path,l)}e.io=c,e.connect=c,e.default=c,Object.assign(c,{Manager:r.Manager,Socket:u.Socket,io:c,connect:c});var f=Xa;Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return f.protocol}}),t.exports=c})(Nc,Nc.exports);var KD=Nc.exports,Xu={},Sn=Ie&&Ie.__awaiter||function(t,e,i,n){function r(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function a(f){try{c(n.next(f))}catch(o){d(o)}}function s(f){try{c(n.throw(f))}catch(o){d(o)}}function c(f){f.done?u(f.value):r(f.value).then(a,s)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Xu,"__esModule",{value:!0});class JD{constructor(e){this.cloudConvert=e}get(e,i=null){return Sn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{params:i||{}})).data.data})}wait(e){return Sn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}all(e=null){return Sn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Sn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e,{maxBodyLength:1/0})).data.data})}delete(e){return Sn(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`jobs/${e}`)})}subscribeEvent(e,i,n){return Sn(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}`,`job.${i}`,n)})}subscribeTaskEvent(e,i,n){return Sn(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}.tasks`,`task.${i}`,n)})}getExportUrls(e){return e.tasks.filter(i=>i.operation==="export/url"&&i.status==="finished").flatMap(i=>{var n,r;return(r=(n=i.result)===null||n===void 0?void 0:n.files)!==null&&r!==void 0?r:[]})}}Xu.default=JD;var Yu={},ZD=typeof self=="object"?self.FormData:window.FormData,en=Ie&&Ie.__awaiter||function(t,e,i,n){function r(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function a(f){try{c(n.next(f))}catch(o){d(o)}}function s(f){try{c(n.throw(f))}catch(o){d(o)}}function c(f){f.done?u(f.value):r(f.value).then(a,s)}c((n=n.apply(t,e||[])).next())})},ey=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yu,"__esModule",{value:!0});const QD=ey(ZD),eA=ey(B_),Gd=Mn;class tA{constructor(e){this.cloudConvert=e}get(e,i=null){return en(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{params:i||{}})).data.data})}wait(e){return en(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}cancel(e){return en(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(`tasks/${e}/cancel`)).data.data})}all(e=null){return en(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,i=null){return en(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,i)).data.data})}delete(e){return en(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`tasks/${e}`)})}upload(e,i,n=null,r=null){return en(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const u=new QD.default;for(const a in e.result.form.parameters)u.append(a,e.result.form.parameters[a]);const d={};return n&&(d.filename=n),r?d.knownLength=r:i instanceof Gd.ReadStream&&(d.knownLength=(0,Gd.statSync)(i.path).size),u.append("file",i,d),yield eA.default.post(e.result.form.url,u,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign(Object.assign({},u.hasKnownLength()?{"Content-Length":u.getLengthSync()}:{}),u.getHeaders())})})}subscribeEvent(e,i,n){return en(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-task.${e}`,`task.${i}`,n)})}}Yu.default=tA;var $u={},Jl=Ie&&Ie.__awaiter||function(t,e,i,n){function r(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function a(f){try{c(n.next(f))}catch(o){d(o)}}function s(f){try{c(n.throw(f))}catch(o){d(o)}}function c(f){f.done?u(f.value):r(f.value).then(a,s)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty($u,"__esModule",{value:!0});class iA{constructor(e){this.cloudConvert=e}me(){return Jl(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,i,n){return Jl(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.jobs`,`job.${i}`,n)})}subscribeTaskEvent(e,i,n){return Jl(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.tasks`,`task.${i}`,n)})}}$u.default=iA;var Gu={},nA=Ie&&Ie.__createBinding||(Object.create?function(t,e,i,n){n===void 0&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){n===void 0&&(n=i),t[n]=e[i]}),rA=Ie&&Ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sA=Ie&&Ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&nA(e,t,i);return rA(e,t),e};Object.defineProperty(Gu,"__esModule",{value:!0});const oA=sA(Mn);class aA{verify(e,i,n){const u=oA.createHmac("sha256",n).update(Buffer.from(e,"utf-8")).digest("hex");return i===u}}Gu.default=aA;const lA="cloudconvert",cA="2.3.6",uA="MIT",fA="Official Node.js SDK for the CloudConvert API",hA="https://github.com/cloudconvert/cloudconvert-node",dA="Josias Montag <josias@montag.info>",pA="built/lib/index.js",gA="built/lib/index.d.ts",mA="built/lib/CloudConvert.js",vA={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},_A={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},yA={axios:"^0.27.2","form-data":"^4.0.0","socket.io-client":"^4.6.1"},bA={"@types/node":"^18.14.0","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.53.0",chai:"^4.3.7",eslint:"^8.34.0","eslint-config-prettier":"^8.6.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^4.2.1",esm:"^3.2.25",mocha:"^8.4.0",nock:"^13.3.0",prettier:"^2.8.4",typescript:"^4.9.5"},wA={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."},CA={name:lA,version:cA,license:uA,description:fA,homepage:hA,author:dA,main:pA,types:gA,module:mA,repository:vA,bugs:_A,dependencies:yA,devDependencies:bA,scripts:wA};var qu={},SA=Ie&&Ie.__createBinding||(Object.create?function(t,e,i,n){n===void 0&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){n===void 0&&(n=i),t[n]=e[i]}),TA=Ie&&Ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EA=Ie&&Ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&SA(e,t,i);return TA(e,t),e};Object.defineProperty(qu,"__esModule",{value:!0});const OA=EA(Mn);class kA{sign(e,i,n,r){const u=JSON.stringify(n),a=Buffer.from(u||"").toString("base64").replace("+","-").replace("/","_").replace(/=+$/,"");let s=`${e}?job=${a}`;r&&(s+=`&cache_key=${r}`);const f=OA.createHmac("sha256",i).update(Buffer.from(s,"utf-8")).digest("hex");return s+=`&s=${f}`,s}}qu.default=kA;var Zn=Ie&&Ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(C_,"__esModule",{value:!0});const xA=Zn(B_),DA=Zn(KD),AA=Zn(Xu),PA=Zn(Yu),IA=Zn($u),RA=Zn(Gu),MA=CA,FA=Zn(qu);class LA{constructor(e,i=!1,n=null){this.apiKey=e,this.useSandbox=i,this.region=n,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=xA.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":`https://${this.region?this.region+".":""}api.cloudconvert.com/v2/`,headers:{Authorization:`Bearer ${this.apiKey}`,"User-Agent":`cloudconvert-node/v${MA.version} (https://github.com/cloudconvert/cloudconvert-node)`}})}createResources(){this.tasks=new PA.default(this),this.jobs=new AA.default(this),this.users=new IA.default(this),this.webhooks=new RA.default,this.signedUrls=new FA.default}subscribe(e,i,n){var r,u;this.socket||(this.socket=DA.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),!((r=this.subscribedChannels)===null||r===void 0)&&r.get(e)||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:`Bearer ${this.apiKey}`}}}),(u=this.subscribedChannels)===null||u===void 0||u.set(e,!0)),this.socket.on(i,function(d,a){e===d&&n(a)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var NA=C_.default=LA;const Rn=async(t,e,i,n)=>{const u=await(await fetch(t)).blob();return ty(u,e,i,n)},ty=(t,e,i,n,r="")=>new Promise((u,d)=>{const a=zk(Kk,e),s=Bk(a,t,n);s.on("state_changed",c=>{const f=c.bytesTransferred/c.totalBytes*100;i({progress:f,uploadMsg:r})},c=>{i({error:c,uploadMsg:r})},()=>{Uk(s.snapshot.ref).then(c=>{const f={url:c,metadata:s.snapshot.metadata,fileName:s.snapshot.metadata.fullPath,extension:n.extension,size:s.snapshot.totalBytes};i({success:!0,uploadMsg:r}),u(f)})})});function jA(t,e,i){return new Promise(async(n,r)=>{try{const u=new NA("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMWIzNWRhYTc3MmZkZTI0ZDI1ODBiMTNiNDkyMWMyNDkzMmE5ZDJhYzk1OTQzNGIzMTQwYWM0NDEyNGI4ZDRjMDFkNDQwYmJkMDJlYzZmNzEiLCJpYXQiOjE2NDY2MjM0MTEuMDAxMjg5LCJuYmYiOjE2NDY2MjM0MTEuMDAxMjkyLCJleHAiOjQ4MDIyOTcwMTAuOTk3ODMzLCJzdWIiOiI0MzczODU0NiIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiXX0.TLmy-ePeLIxA8VE7TkWuQU1jCUSQ6smRW-tKQjGcU0Z7cwR2fE7p5Jd-7QYVI-f6zM6IUKH6JTFRgE9N_4W9ldwLe6Rx-XyOl8v3Rh1Cp4MUIb5kThF-c2uj5hsMIHj1pmFflmNpHB3jL4Mb7To6CCwpw_5Q7BUVpYOG_eHAXboWCGnfb62hFjjbHTLzm0rfSLH-8eiCikzKovjD1W2xK05Rc4ZTjCKikivHqkKpcQjxuH8bEu2mnoHP-flqknIz8kn3yzp3hc55jd5l-QFG8AZ8fcjsVx8MpoRHW4k1lcDjvgIlatYFfHXnmjXnFm9aUwDiPP0XNbRfUjYUoi0jzt7l004sdnyh8_ZOboz1dB0EoGBg0L9NK4V6BZx_Ne59czgh5LdmbBaByVCc26LGZkA6DnZg_PTz7UYQ924xGtjWwFFYffCjRNH9r7AfmE4656KNNaeVwORygRwzL4QbAnjWYKtQUpOOtSiD3xUSENIF4uYLQRthaqvkdxi92LrF2r9MaeDAWqxPV7nLYPSeOUS_Qc75n1F0Ke3VCuE5Z2n_lYkklhGVPSS4jXJJJ7mAJolwp-zlKMYLHINRmZ08AgjV39tCtA--EJVikinVX7Wg7RLL-nRkWRFfI_UgM7OVirqb4O1OJb8MfqRAwfLhj6lDCNTxA4ycI8s0f6x9lR8");let d=await u.jobs.create({tasks:{"import-1":{operation:"import/url",url:`${t.url}`},"task-1":{operation:"convert",input:["import-1"],output_format:"svg"},"export-1":{operation:"export/url",input:["task-1"],inline:!0,archive_multiple_files:!1}},tag:"jobbuilder"});u.jobs.subscribeTaskEvent(d.id,"finished",async a=>{if(a.task.name==="import-1"&&i({uploadMsg:"원본파일을 분석중 입니다.",progress:30}),a.task.name==="export-1"){const s=await Rn(a.task.result.files[0].url,e,i,{extension:"svg"});n(s)}})}catch(u){r(u)}})}let Do;const BA=new Uint8Array(16);function UA(){if(!Do&&(Do=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Do))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Do(BA)}const Rt=[];for(let t=0;t<256;++t)Rt.push((t+256).toString(16).slice(1));function zA(t,e=0){return Rt[t[e+0]]+Rt[t[e+1]]+Rt[t[e+2]]+Rt[t[e+3]]+"-"+Rt[t[e+4]]+Rt[t[e+5]]+"-"+Rt[t[e+6]]+Rt[t[e+7]]+"-"+Rt[t[e+8]]+Rt[t[e+9]]+"-"+Rt[t[e+10]]+Rt[t[e+11]]+Rt[t[e+12]]+Rt[t[e+13]]+Rt[t[e+14]]+Rt[t[e+15]]}const WA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qd={randomUUID:WA};function kn(t,e,i){if(qd.randomUUID&&!e&&!t)return qd.randomUUID();t=t||{};const n=t.random||(t.rng||UA)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=n[r];return e}return zA(n)}function Kd(t,e,i){const n=t.slice();return n[8]=e[i],n}function HA(t){let e,i,n,r,u,d,a;i=new YS({}),i.$on("drop",t[9]);let s=Ne(t[5]),c=[];for(let f=0;f<s.length;f+=1)c[f]=Jd(Kd(t,s,f));return{c(){e=x("div"),de(i.$$.fragment),n=$(),r=x("div"),r.innerHTML='<h1 class="font-semibold text-lg">이미지 보관함</h1> <span class="text-xs">사용하실 이미지를 선택해 주세요.</span>',u=$(),d=x("div");for(let f=0;f<c.length;f+=1)c[f].c();S(e,"class","mt-3 overflow-y-auto gap-4"),S(r,"class","flex gap-3 items-center mt-3"),S(d,"class","grid gap-3 grid-cols-2 md:grid-cols-4 mt-5")},m(f,o){B(f,e,o),fe(i,e,null),B(f,n,o),B(f,r,o),B(f,u,o),B(f,d,o);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(d,null);a=!0},p(f,o){if(o[0]&65568){s=Ne(f[5]);let l;for(l=0;l<s.length;l+=1){const h=Kd(f,s,l);c[l]?c[l].p(h,o):(c[l]=Jd(h),c[l].c(),c[l].m(d,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=s.length}},i(f){a||(L(i.$$.fragment,f),a=!0)},o(f){W(i.$$.fragment,f),a=!1},d(f){f&&(j(e),j(n),j(r),j(u),j(d)),he(i),Tt(c,f)}}}function VA(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b=t[1]&&Zd(t);c=new Se({props:{icon:"fe:crop",height:25}});let y=t[6].usePicWish&&Qd(t);return{c(){e=x("div"),i=x("img"),u=$(),b&&b.c(),d=$(),a=x("div"),s=x("button"),de(c.$$.fragment),f=$(),o=x("span"),o.textContent="자르기",l=$(),y&&y.c(),h=$(),p=x("div"),m=x("button"),m.textContent="이미지 등록",S(i,"id","upload-image-ori"),$e(i.src,n=t[8].url)||S(i,"src",n),S(i,"alt",r=t[8].name),S(o,"class","text-2xs"),S(s,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(s,"type","button"),S(a,"class","absolute left-0 top-10 flex flex-col gap-2"),S(e,"class","p-1 relative image-container overflow-y-auto svelte-1cs98qz"),S(m,"class","btn primary-btn"),S(p,"class","actions mt-3 flex justify-center gap-2")},m(w,C){B(w,e,C),O(e,i),t[19](i),O(e,u),b&&b.m(e,null),O(e,d),O(e,a),O(a,s),fe(c,s,null),O(s,f),O(s,o),O(a,l),y&&y.m(a,null),B(w,h,C),B(w,p,C),O(p,m),g=!0,v||(_=[oe(s,"click",t[22]),oe(m,"click",t[25])],v=!0)},p(w,C){(!g||C[0]&256&&!$e(i.src,n=w[8].url))&&S(i,"src",n),(!g||C[0]&256&&r!==(r=w[8].name))&&S(i,"alt",r),w[1]?b?(b.p(w,C),C[0]&2&&L(b,1)):(b=Zd(w),b.c(),L(b,1),b.m(e,d)):b&&(Te(),W(b,1,1,()=>{b=null}),Ee()),w[6].usePicWish?y?(y.p(w,C),C[0]&64&&L(y,1)):(y=Qd(w),y.c(),L(y,1),y.m(a,null)):y&&(Te(),W(y,1,1,()=>{y=null}),Ee())},i(w){g||(L(b),L(c.$$.fragment,w),L(y),g=!0)},o(w){W(b),W(c.$$.fragment,w),W(y),g=!1},d(w){w&&(j(e),j(h),j(p)),t[19](null),b&&b.d(),he(c),y&&y.d(),v=!1,Be(_)}}}function Jd(t){let e,i,n,r,u,d,a;function s(){return t[26](t[8])}return{c(){e=x("button"),i=x("img"),u=$(),$e(i.src,n=t[8].thumbnail.url)||S(i,"src",n),S(i,"alt",r=t[8].thumbnail.fileName),S(i,"class","object-contain"),S(e,"class","image-container flex border rounded svelte-1cs98qz")},m(c,f){B(c,e,f),O(e,i),O(e,u),d||(a=oe(e,"click",s),d=!0)},p(c,f){t=c,f[0]&32&&!$e(i.src,n=t[8].thumbnail.url)&&S(i,"src",n),f[0]&32&&r!==(r=t[8].thumbnail.fileName)&&S(i,"alt",r)},d(c){c&&j(e),d=!1,a()}}}function Zd(t){let e,i,n,r,u,d,a,s,c,f,o;return n=new Se({props:{icon:"mdi:success-bold"}}),a=new Se({props:{icon:"mdi:success-bold"}}),{c(){e=x("div"),i=x("button"),de(n.$$.fragment),r=xe(" 자르기"),u=$(),d=x("button"),de(a.$$.fragment),s=xe(" 취소"),S(i,"type","button"),S(i,"class","btn primary-btn"),S(d,"type","button"),S(d,"class","btn primary-btn"),S(e,"class","sticky bottom-0 flex w-full p-3")},m(l,h){B(l,e,h),O(e,i),fe(n,i,null),O(i,r),O(e,u),O(e,d),fe(a,d,null),O(d,s),c=!0,f||(o=[oe(i,"click",t[20]),oe(d,"click",t[21])],f=!0)},p:ve,i(l){c||(L(n.$$.fragment,l),L(a.$$.fragment,l),c=!0)},o(l){W(n.$$.fragment,l),W(a.$$.fragment,l),c=!1},d(l){l&&j(e),he(n),he(a),f=!1,Be(o)}}}function Qd(t){let e,i,n,r;const u=[YA,XA],d=[];function a(s,c){return s[0]?0:1}return e=a(t),i=d[e]=u[e](t),{c(){i.c(),n=qe()},m(s,c){d[e].m(s,c),B(s,n,c),r=!0},p(s,c){let f=e;e=a(s),e===f?d[e].p(s,c):(Te(),W(d[f],1,1,()=>{d[f]=null}),Ee(),i=d[e],i?i.p(s,c):(i=d[e]=u[e](s),i.c()),L(i,1),i.m(n.parentNode,n))},i(s){r||(L(i),r=!0)},o(s){W(i),r=!1},d(s){s&&j(n),d[e].d(s)}}}function XA(t){let e,i,n,r,u,d,a;return i=new Se({props:{icon:"material-symbols-light:background-replace-rounded",height:25}}),{c(){e=x("button"),de(i.$$.fragment),n=$(),r=x("span"),r.textContent="배경지우기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){B(s,e,c),fe(i,e,null),O(e,n),O(e,r),u=!0,d||(a=oe(e,"click",t[24]),d=!0)},p:ve,i(s){u||(L(i.$$.fragment,s),u=!0)},o(s){W(i.$$.fragment,s),u=!1},d(s){s&&j(e),he(i),d=!1,a()}}}function YA(t){let e,i,n,r,u,d,a;return i=new Se({props:{icon:"iconoir:redo",height:25}}),{c(){e=x("button"),de(i.$$.fragment),n=$(),r=x("span"),r.textContent="되돌리기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){B(s,e,c),fe(i,e,null),O(e,n),O(e,r),u=!0,d||(a=oe(e,"click",t[23]),d=!0)},p:ve,i(s){u||(L(i.$$.fragment,s),u=!0)},o(s){W(i.$$.fragment,s),u=!1},d(s){s&&j(e),he(i),d=!1,a()}}}function ep(t){let e,i;return e=new Xv({props:{$$slots:{default:[$A]},$$scope:{ctx:t}}}),{c(){de(e.$$.fragment)},m(n,r){fe(e,n,r),i=!0},p(n,r){const u={};r[0]&16|r[1]&8&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){he(e,n)}}}function $A(t){let e;return{c(){e=xe(t[4])},m(i,n){B(i,e,n)},p(i,n){n[0]&16&&Ke(e,i[4])},d(i){i&&j(e)}}}function GA(t){let e,i,n,r,u,d,a,s,c,f,o,l,h;u=new Se({props:{icon:"mingcute:left-line",height:"30"}});const p=[VA,HA],m=[];function g(_,b){return _[8]?0:1}a=g(t),s=m[a]=p[a](t);let v=t[3]&&ep(t);return{c(){e=x("div"),i=x("h2"),n=xe(`이미지 업로드\r
        `),r=x("button"),de(u.$$.fragment),d=$(),s.c(),c=$(),v&&v.c(),f=qe(),S(r,"type","button"),S(r,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(_,b){B(_,e,b),O(e,i),O(i,n),O(i,r),fe(u,r,null),O(e,d),m[a].m(e,null),B(_,c,b),v&&v.m(_,b),B(_,f,b),o=!0,l||(h=oe(r,"click",t[18]),l=!0)},p(_,b){let y=a;a=g(_),a===y?m[a].p(_,b):(Te(),W(m[y],1,1,()=>{m[y]=null}),Ee(),s=m[a],s?s.p(_,b):(s=m[a]=p[a](_),s.c()),L(s,1),s.m(e,null)),_[3]?v?(v.p(_,b),b[0]&8&&L(v,1)):(v=ep(_),v.c(),L(v,1),v.m(f.parentNode,f)):v&&(Te(),W(v,1,1,()=>{v=null}),Ee())},i(_){o||(L(u.$$.fragment,_),L(s),L(v),o=!0)},o(_){W(u.$$.fragment,_),W(s),W(v),o=!1},d(_){_&&(j(e),j(c),j(f)),he(u),m[a].d(),v&&v.d(_),l=!1,h()}}}function cr(t){console.log({e:t})}function qA(t,e,i){let n,r,u,d,a;Fe(t,Es,te=>i(5,n=te)),Fe(t,Le,te=>i(29,r=te)),Fe(t,Ms,te=>i(30,u=te)),Fe(t,eo,te=>i(6,d=te)),Fe(t,At,te=>i(7,a=te));let{handleAddUpload:s}=e;wt();let c=null,f=null,o=null,l={},h=null,p=null,m=!1,g="";async function v(te){i(3,m=!0);try{const k=te.detail;if(k.length>0){const P=k[0],R=new FileReader,M=KT(P);if(M==="psd"||M==="svg"||M==="ai"||M==="eps"||M==="pdf"){i(4,g="이미지를 업로드중 입니다.");const K={},I=`editorData/${r.uuid}/`,D={extension:M},z=await ty(P,`${I}${kn()}.${M}`,cr,D);switch(console.log({uploadFile:z}),K.origin=z,M){case"svg":K.thumbnail=z;break;case"ai":case"eps":case"pdf":i(4,g="파일을 이미지로 변환중입니다.");const J=await jA(z,`${I}${kn()}.svg`,cr);K.thumbnail=J,console.log({covertSVG:J});break;case"psd":i(4,g="썸네일을 생성중 입니다.");const ne=await Vh({fileName:z.fileName,extension:M,width:r.prints[u].canvasWidth,height:r.prints[u].height/r.prints[u].width*r.prints[u].canvasWidth});if(ne.original){const H=await Rn(ne.original,`${I}${kn()}.png`,cr,D);K.convert=H}i(4,g="썸네일을 업로드중 입니다.");const Z=await Rn(ne.thumbnail,`${I}${kn()}.png`,cr,D);K.thumbnail=Z;break;default:break}console.log({uploaded:K}),ye(Le,r.uploads=[...r.uploads,K],r),ye(Es,n=[...n,K],n),i(3,m=!1);return}if(M!=="png"&&M!=="jpg"&&M!=="jpeg"&&M!=="gif"&&M!=="webp"){alert("지원하지 않는 파일 형식입니다."),i(3,m=!1);return}R.onload=function(K){const I=K.target.result,D=new Image;D.src=I,D.onload=function(){const z=D.width,J=D.height;i(8,c={url:I,width:z,height:J,extension:M})},i(3,m=!1)},R.readAsDataURL(P)}}catch(k){console.log({error:k}),i(3,m=!1)}}function _(){i(1,h=new zv(p,{crop(te){l=te.detail}}))}function b(){i(8,c={url:f}),i(0,f=null)}async function y(){if(o){i(0,f=c.url),i(8,c={url:o});return}try{i(3,m=!0),i(4,g="AI 배경제거를 진행중 입니다."),i(8,c.url=c.url.replace(/^data:image\/png;base64,/,""),c),i(8,c.url=c.url.replace(/^data:image\/jpeg;base64,/,""),c),i(8,c.url=c.url.replace(/^data:image\/gif;base64,/,""),c);const te=await NT(d.id,c.url);if(te.status===200)i(0,f=`data:image/png;base64, ${c.url}`),o=`data:image/png;base64, ${te.data.image}`,i(8,c={url:o});else throw new Error("배경제거에 실패했습니다.")}catch(te){console.log({error:te})}finally{i(4,g=""),i(3,m=!1)}}function w(){h&&(h.destroy(),i(1,h=null))}async function C(){try{i(3,m=!0),i(4,g="이미지를 업로드중 입니다.");const te={},k=`editorData/${r.uuid}/`,P={width:c.width,height:c.height,extension:c.extension},R=await Rn(c.url,`${k}${kn()}.${c.extension}`,cr,P);te.origin=R,te.convert=R,console.log({uploadFile:R}),i(4,g="썸네일을 생성중 입니다.");const M=await Vh({fileName:R.fileName,width:r.prints[u].canvasWidth,height:r.prints[u].height/r.prints[u].width*r.prints[u].canvasWidth});i(4,g="썸네일을 업로드중 입니다.");const K=await Rn(M.thumbnail,`${k}${kn()}.png`,cr,P);te.thumbnail=K,ye(Le,r.uploads=[...r.uploads,te],r),ye(Es,n=[...n,te],n),i(8,c=null)}catch(te){console.log({error:te})}finally{i(4,g=""),i(3,m=!1)}}function T(){const te=document.createElement("canvas"),k=te.getContext("2d"),{x:P,y:R,width:M,height:K}=l;te.width=M,te.height=K,k.drawImage(p,-P,-R),i(8,c={url:te.toDataURL("image/png"),width:M,height:K,extension:"png"}),w()}function E(te){s(te)}const A=()=>ye(At,a=null,a);function F(te){Xe[te?"unshift":"push"](()=>{p=te,i(2,p)})}const G=()=>T(),Y=()=>w(),Q=()=>_(),q=()=>b(),N=()=>y(),V=()=>C(),ee=te=>E(te);return t.$$set=te=>{"handleAddUpload"in te&&i(17,s=te.handleAddUpload)},[f,h,p,m,g,n,d,a,c,v,_,b,y,w,C,T,E,s,A,F,G,Y,Q,q,N,V,ee]}class KA extends Ve{constructor(e){super(),He(this,e,qA,GA,Ue,{handleAddUpload:17},null,[-1,-1])}}function JA(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b;d=new Se({props:{icon:"mingcute:left-line",height:"30"}});let y=ZA;return{c(){e=x("div"),i=x("h2"),n=x("span"),n.textContent="텍스트",r=$(),u=x("button"),de(d.$$.fragment),a=$(),s=x("div"),c=x("div"),f=x("div"),o=x("textarea"),l=$(),h=x("div"),p=x("button"),p.textContent="입력하기",m=$(),g=qe(),S(u,"type","button"),S(u,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(o,"class","textarea"),S(o,"rows","5"),S(o,"placeholder","텍스트를 입력해주세요."),S(f,"class","my-3"),S(p,"type","button"),S(p,"class","btn btn-sm md:p-3 md:text-base primary-btn w-full"),S(h,"class","p-3 flex justify-center"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(w,C){B(w,e,C),O(e,i),O(i,n),O(i,r),O(i,u),fe(d,u,null),O(e,a),O(e,s),O(s,c),O(c,f),O(f,o),Ye(o,t[1]),O(c,l),O(c,h),O(h,p),B(w,m,C),B(w,g,C),v=!0,_||(b=[oe(u,"click",t[3]),oe(o,"input",t[4]),oe(p,"click",t[5])],_=!0)},p(w,[C]){C&2&&Ye(o,w[1])},i(w){v||(L(d.$$.fragment,w),L(y),v=!0)},o(w){W(d.$$.fragment,w),W(y),v=!1},d(w){w&&(j(e),j(m),j(g)),he(d),_=!1,Be(b)}}}let ZA=!1;function QA(t,e,i){let n;Fe(t,At,c=>i(2,n=c));let{handleAddText:r}=e,u="";const d=()=>ye(At,n=null,n);function a(){u=this.value,i(1,u)}const s=()=>r(u);return t.$$set=c=>{"handleAddText"in c&&i(0,r=c.handleAddText)},[r,u,n,d,a,s]}class eP extends Ve{constructor(e){super(),He(this,e,QA,JA,Ue,{handleAddText:0})}}function tP(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w,C,T,E,A,F;d=new Se({props:{icon:"mingcute:left-line",height:"30"}}),l=new Se({props:{icon:"ic:outline-rectangle",width:16}}),m=new Se({props:{icon:"ic:outline-circle",width:16}}),_=new Se({props:{icon:"uil:triangle",width:16}}),w=new Se({props:{icon:"material-symbols-light:draw",width:16}});let G=iP;return{c(){e=x("div"),i=x("h2"),n=x("span"),n.textContent="도형/그리기",r=$(),u=x("button"),de(d.$$.fragment),a=$(),s=x("div"),c=x("div"),f=x("div"),o=x("button"),de(l.$$.fragment),h=$(),p=x("button"),de(m.$$.fragment),g=$(),v=x("button"),de(_.$$.fragment),b=$(),y=x("button"),de(w.$$.fragment),C=$(),T=qe(),S(u,"type","button"),S(u,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(o,"type","button"),S(o,"class","btn white-btn"),S(p,"type","button"),S(p,"class","btn white-btn"),S(v,"type","button"),S(v,"class","btn white-btn"),S(y,"type","button"),S(y,"class","btn white-btn"),S(f,"class","my-3 flex gap-1"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(Y,Q){B(Y,e,Q),O(e,i),O(i,n),O(i,r),O(i,u),fe(d,u,null),O(e,a),O(e,s),O(s,c),O(c,f),O(f,o),fe(l,o,null),O(f,h),O(f,p),fe(m,p,null),O(f,g),O(f,v),fe(_,v,null),O(f,b),O(f,y),fe(w,y,null),B(Y,C,Q),B(Y,T,Q),E=!0,A||(F=[oe(u,"click",t[2]),oe(o,"click",t[3]),oe(p,"click",t[4]),oe(v,"click",t[5]),oe(y,"click",t[6])],A=!0)},p(Y,[Q]){},i(Y){E||(L(d.$$.fragment,Y),L(l.$$.fragment,Y),L(m.$$.fragment,Y),L(_.$$.fragment,Y),L(w.$$.fragment,Y),L(G),E=!0)},o(Y){W(d.$$.fragment,Y),W(l.$$.fragment,Y),W(m.$$.fragment,Y),W(_.$$.fragment,Y),W(w.$$.fragment,Y),W(G),E=!1},d(Y){Y&&(j(e),j(C),j(T)),he(d),he(l),he(m),he(_),he(w),A=!1,Be(F)}}}let iP=!1;function nP(t,e,i){let n;Fe(t,At,f=>i(1,n=f));let{handleAddShape:r}=e;const u=()=>ye(At,n=null,n),d=()=>r("rect"),a=()=>r("circle"),s=()=>r("triangle"),c=()=>r("draw");return t.$$set=f=>{"handleAddShape"in f&&i(0,r=f.handleAddShape)},[r,n,u,d,a,s,c]}class rP extends Ve{constructor(e){super(),He(this,e,nP,tP,Ue,{handleAddShape:0})}}function sP(t){let e;return{c(){e=x("canvas"),e.innerHTML="",S(e,"id","print"),S(e,"class","svelte-d96o53")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function oP(t){let e,i,n,r,u;return{c(){var d,a,s;e=x("div"),i=x("div"),n=x("canvas"),n.innerHTML="",S(n,"id","print"),S(n,"class","svelte-d96o53"),S(i,"class","print-container absolute"),S(i,"style",`left:${t[6].background.canvasLeft}%; top:${t[6].background.canvasTop}%; width:${t[6].background.canvasPer}%; height:${t[6].background.canvasPer*t[8]}%;`),S(e,"style",r=`max-width: ${t[7]}px; max-height: ${t[9]}px; width: 100%; height: ${t[2]}px; background-image:url(${(a=(d=t[6].background)==null?void 0:d.image)==null?void 0:a.url}); background-color:${(s=t[5].currentOption)!=null&&s.colorCode?t[5].currentOption.colorCode:"#ffffff"}`),S(e,"class","flex flex-col justify-center background-container svelte-d96o53"),Yt(()=>t[21].call(e))},m(d,a){B(d,e,a),O(e,i),O(i,n),u=My(e,t[21].bind(e))},p(d,a){var s,c,f;a[0]&36&&r!==(r=`max-width: ${d[7]}px; max-height: ${d[9]}px; width: 100%; height: ${d[2]}px; background-image:url(${(c=(s=d[6].background)==null?void 0:s.image)==null?void 0:c.url}); background-color:${(f=d[5].currentOption)!=null&&f.colorCode?d[5].currentOption.colorCode:"#ffffff"}`)&&S(e,"style",r)},d(d){d&&j(e),u()}}}function tp(t){let e,i,n,r;return i=new zS({props:{handleAddClipArt:t[10]}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(u,d){B(u,e,d),fe(i,e,null),r=!0},p:ve,i(u){r||(L(i.$$.fragment,u),u&&Yt(()=>{r&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!0)),n.run(1))}),r=!0)},o(u){W(i.$$.fragment,u),u&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!1)),n.run(0)),r=!1},d(u){u&&j(e),he(i),u&&n&&n.end()}}}function ip(t){let e,i,n,r;return i=new KA({props:{handleAddUpload:t[11]}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","absolute top-0 left-0 w-full max-w-2xl h-full z-50")},m(u,d){B(u,e,d),fe(i,e,null),r=!0},p:ve,i(u){r||(L(i.$$.fragment,u),u&&Yt(()=>{r&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!0)),n.run(1))}),r=!0)},o(u){W(i.$$.fragment,u),u&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!1)),n.run(0)),r=!1},d(u){u&&j(e),he(i),u&&n&&n.end()}}}function np(t){let e,i,n,r;return i=new eP({props:{handleAddText:t[12]}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(u,d){B(u,e,d),fe(i,e,null),r=!0},p:ve,i(u){r||(L(i.$$.fragment,u),u&&Yt(()=>{r&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!0)),n.run(1))}),r=!0)},o(u){W(i.$$.fragment,u),u&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!1)),n.run(0)),r=!1},d(u){u&&j(e),he(i),u&&n&&n.end()}}}function rp(t){let e,i,n,r;return i=new rP({props:{handleAddShape:t[13]}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(u,d){B(u,e,d),fe(i,e,null),r=!0},p:ve,i(u){r||(L(i.$$.fragment,u),u&&Yt(()=>{r&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!0)),n.run(1))}),r=!0)},o(u){W(i.$$.fragment,u),u&&(n||(n=Qt(e,mn,{delay:10,duration:200,axis:"x",opacity:.5,easing:gn},!1)),n.run(0)),r=!1},d(u){u&&j(e),he(i),u&&n&&n.end()}}}function sp(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b;n=new Se({props:{icon:"ph:angle",height:"18"}});let y=(t[3][0].colorType==="color"||t[3][0].objType==="text"||t[3][0].objType==="shape"||t[3][0].type==="path")&&op(t),w=t[3][0].colorType==="colors"&&ap(t),C=t[3][0].objType==="text"&&lp(t),T=(t[3][0].type==="path"||t[3][0].objType==="text"||t[3][0].objType==="shape")&&cp(t),E=t[1]==="rotate"&&up(t),A=t[1]==="color"&&fp(t),F=t[1]==="text"&&hp(t),G=t[1]==="align"&&dp(t),Y=t[1]==="style"&&pp(t),Q=t[1]==="decoration"&&gp(t),q=t[1]==="stroke"&&mp(t),N=t[1]==="colors"&&vp(t);return{c(){e=x("div"),i=x("button"),de(n.$$.fragment),r=$(),y&&y.c(),u=$(),w&&w.c(),d=$(),C&&C.c(),a=$(),T&&T.c(),s=$(),E&&E.c(),c=$(),A&&A.c(),f=$(),F&&F.c(),o=$(),G&&G.c(),l=$(),Y&&Y.c(),h=$(),Q&&Q.c(),p=$(),q&&q.c(),m=$(),N&&N.c(),g=qe(),S(i,"class","btn white-btn circle-btn"),S(e,"class","absolute flex justify-center gap-0.5 z-40 top-10")},m(V,ee){B(V,e,ee),O(e,i),fe(n,i,null),O(e,r),y&&y.m(e,null),O(e,u),w&&w.m(e,null),O(e,d),C&&C.m(e,null),O(e,a),T&&T.m(e,null),B(V,s,ee),E&&E.m(V,ee),B(V,c,ee),A&&A.m(V,ee),B(V,f,ee),F&&F.m(V,ee),B(V,o,ee),G&&G.m(V,ee),B(V,l,ee),Y&&Y.m(V,ee),B(V,h,ee),Q&&Q.m(V,ee),B(V,p,ee),q&&q.m(V,ee),B(V,m,ee),N&&N.m(V,ee),B(V,g,ee),v=!0,_||(b=oe(i,"click",t[22]),_=!0)},p(V,ee){V[3][0].colorType==="color"||V[3][0].objType==="text"||V[3][0].objType==="shape"||V[3][0].type==="path"?y?(y.p(V,ee),ee[0]&8&&L(y,1)):(y=op(V),y.c(),L(y,1),y.m(e,u)):y&&(Te(),W(y,1,1,()=>{y=null}),Ee()),V[3][0].colorType==="colors"?w?(w.p(V,ee),ee[0]&8&&L(w,1)):(w=ap(V),w.c(),L(w,1),w.m(e,d)):w&&(Te(),W(w,1,1,()=>{w=null}),Ee()),V[3][0].objType==="text"?C?(C.p(V,ee),ee[0]&8&&L(C,1)):(C=lp(V),C.c(),L(C,1),C.m(e,a)):C&&(Te(),W(C,1,1,()=>{C=null}),Ee()),V[3][0].type==="path"||V[3][0].objType==="text"||V[3][0].objType==="shape"?T?(T.p(V,ee),ee[0]&8&&L(T,1)):(T=cp(V),T.c(),L(T,1),T.m(e,null)):T&&(Te(),W(T,1,1,()=>{T=null}),Ee()),V[1]==="rotate"?E?(E.p(V,ee),ee[0]&2&&L(E,1)):(E=up(V),E.c(),L(E,1),E.m(c.parentNode,c)):E&&(Te(),W(E,1,1,()=>{E=null}),Ee()),V[1]==="color"?A?(A.p(V,ee),ee[0]&2&&L(A,1)):(A=fp(V),A.c(),L(A,1),A.m(f.parentNode,f)):A&&(Te(),W(A,1,1,()=>{A=null}),Ee()),V[1]==="text"?F?(F.p(V,ee),ee[0]&2&&L(F,1)):(F=hp(V),F.c(),L(F,1),F.m(o.parentNode,o)):F&&(Te(),W(F,1,1,()=>{F=null}),Ee()),V[1]==="align"?G?(G.p(V,ee),ee[0]&2&&L(G,1)):(G=dp(V),G.c(),L(G,1),G.m(l.parentNode,l)):G&&(Te(),W(G,1,1,()=>{G=null}),Ee()),V[1]==="style"?Y?(Y.p(V,ee),ee[0]&2&&L(Y,1)):(Y=pp(V),Y.c(),L(Y,1),Y.m(h.parentNode,h)):Y&&(Te(),W(Y,1,1,()=>{Y=null}),Ee()),V[1]==="decoration"?Q?(Q.p(V,ee),ee[0]&2&&L(Q,1)):(Q=gp(V),Q.c(),L(Q,1),Q.m(p.parentNode,p)):Q&&(Te(),W(Q,1,1,()=>{Q=null}),Ee()),V[1]==="stroke"?q?(q.p(V,ee),ee[0]&2&&L(q,1)):(q=mp(V),q.c(),L(q,1),q.m(m.parentNode,m)):q&&(Te(),W(q,1,1,()=>{q=null}),Ee()),V[1]==="colors"?N?(N.p(V,ee),ee[0]&2&&L(N,1)):(N=vp(V),N.c(),L(N,1),N.m(g.parentNode,g)):N&&(Te(),W(N,1,1,()=>{N=null}),Ee())},i(V){v||(L(n.$$.fragment,V),L(y),L(w),L(C),L(T),L(E),L(A),L(F),L(G),L(Y),L(Q),L(q),L(N),v=!0)},o(V){W(n.$$.fragment,V),W(y),W(w),W(C),W(T),W(E),W(A),W(F),W(G),W(Y),W(Q),W(q),W(N),v=!1},d(V){V&&(j(e),j(s),j(c),j(f),j(o),j(l),j(h),j(p),j(m),j(g)),he(n),y&&y.d(),w&&w.d(),C&&C.d(),T&&T.d(),E&&E.d(V),A&&A.d(V),F&&F.d(V),G&&G.d(V),Y&&Y.d(V),Q&&Q.d(V),q&&q.d(V),N&&N.d(V),_=!1,b()}}}function op(t){let e,i,n,r,u;return i=new Se({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=x("button"),de(i.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(d,a){B(d,e,a),fe(i,e,null),n=!0,r||(u=oe(e,"click",t[23]),r=!0)},p:ve,i(d){n||(L(i.$$.fragment,d),n=!0)},o(d){W(i.$$.fragment,d),n=!1},d(d){d&&j(e),he(i),r=!1,u()}}}function ap(t){let e,i,n,r,u;return i=new Se({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=x("button"),de(i.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(d,a){B(d,e,a),fe(i,e,null),n=!0,r||(u=oe(e,"click",t[24]),r=!0)},p:ve,i(d){n||(L(i.$$.fragment,d),n=!0)},o(d){W(i.$$.fragment,d),n=!1},d(d){d&&j(e),he(i),r=!1,u()}}}function lp(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p;return i=new Se({props:{icon:"cil:text",height:"18"}}),u=new Se({props:{icon:"uim:align-left",height:"18"}}),s=new Se({props:{icon:"pajamas:italic",height:"18"}}),o=new Se({props:{icon:"fluent:text-underline-24-filled",height:"18"}}),{c(){e=x("button"),de(i.$$.fragment),n=$(),r=x("button"),de(u.$$.fragment),d=$(),a=x("button"),de(s.$$.fragment),c=$(),f=x("button"),de(o.$$.fragment),S(e,"class","btn white-btn circle-btn"),S(r,"class","btn white-btn circle-btn"),S(a,"class","btn white-btn circle-btn"),S(f,"class","btn white-btn circle-btn")},m(m,g){B(m,e,g),fe(i,e,null),B(m,n,g),B(m,r,g),fe(u,r,null),B(m,d,g),B(m,a,g),fe(s,a,null),B(m,c,g),B(m,f,g),fe(o,f,null),l=!0,h||(p=[oe(e,"click",t[25]),oe(r,"click",t[26]),oe(a,"click",t[27]),oe(f,"click",t[28])],h=!0)},p:ve,i(m){l||(L(i.$$.fragment,m),L(u.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),l=!0)},o(m){W(i.$$.fragment,m),W(u.$$.fragment,m),W(s.$$.fragment,m),W(o.$$.fragment,m),l=!1},d(m){m&&(j(e),j(n),j(r),j(d),j(a),j(c),j(f)),he(i),he(u),he(s),he(o),h=!1,Be(p)}}}function cp(t){let e,i,n,r,u;return i=new Se({props:{icon:"maki:square-stroked",height:"18"}}),{c(){e=x("button"),de(i.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(d,a){B(d,e,a),fe(i,e,null),n=!0,r||(u=oe(e,"click",t[29]),r=!0)},p:ve,i(d){n||(L(i.$$.fragment,d),n=!0)},o(d){W(i.$$.fragment,d),n=!1},d(d){d&&j(e),he(i),r=!1,u()}}}function up(t){let e,i,n;function r(d){t[30](d)}let u={sliderValue:t[3][0].angle};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new kC({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeRotate",t[14]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.sliderValue=d[3][0].angle),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function fp(t){let e,i,n;function r(d){t[31](d)}let u={object:t[3][0]};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new bS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeColor",t[32]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.object=d[3][0]),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function hp(t){let e,i,n;function r(d){t[33](d)}let u={text:t[3][0].text};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new SS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeText",t[15]),e.$on("onChangeFontFamily",t[16]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.text=d[3][0].text),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function dp(t){let e,i,n;function r(d){t[34](d)}let u={align:t[3][0].textAlign};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new OS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeAlign",t[17]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.align=d[3][0].textAlign),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function pp(t){let e,i,n;function r(d){t[35](d)}let u={style:t[3][0].fontStyle};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new DS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeStyle",t[18]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.style=d[3][0].fontStyle),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function gp(t){let e,i,n;function r(d){t[36](d)}let u={object:t[3][0]};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new IS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeDecoration",t[19]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.object=d[3][0]),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function mp(t){let e,i,n;function r(d){t[37](d)}let u={object:t[3][0]};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new FS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeStroke",t[20]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.object=d[3][0]),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function vp(t){let e,i,n;function r(d){t[38](d)}let u={object:t[3][0]};return t[1]!==void 0&&(u.selectProperty=t[1]),e=new jS({props:u}),Xe.push(()=>ct(e,"selectProperty",r)),e.$on("onChangeColors",t[39]),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};a[0]&8&&(s.object=d[3][0]),!i&&a[0]&2&&(i=!0,s.selectProperty=d[1],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function aP(t){let e,i,n,r,u,d,a;function s(g,v){return g[6].background?oP:sP}let f=s(t)(t),o=t[4]==="clipart"&&tp(t),l=t[4]==="upload"&&ip(t),h=t[4]==="text"&&np(t),p=t[4]==="draw"&&rp(t),m=t[3]&&sp(t);return{c(){e=x("div"),f.c(),i=$(),o&&o.c(),n=$(),l&&l.c(),r=$(),h&&h.c(),u=$(),p&&p.c(),d=$(),m&&m.c(),S(e,"class","flex justify-center items-center h-full w-full relative flex-col")},m(g,v){B(g,e,v),f.m(e,null),O(e,i),o&&o.m(e,null),O(e,n),l&&l.m(e,null),O(e,r),h&&h.m(e,null),O(e,u),p&&p.m(e,null),O(e,d),m&&m.m(e,null),a=!0},p(g,v){f.p(g,v),g[4]==="clipart"?o?(o.p(g,v),v[0]&16&&L(o,1)):(o=tp(g),o.c(),L(o,1),o.m(e,n)):o&&(Te(),W(o,1,1,()=>{o=null}),Ee()),g[4]==="upload"?l?(l.p(g,v),v[0]&16&&L(l,1)):(l=ip(g),l.c(),L(l,1),l.m(e,r)):l&&(Te(),W(l,1,1,()=>{l=null}),Ee()),g[4]==="text"?h?(h.p(g,v),v[0]&16&&L(h,1)):(h=np(g),h.c(),L(h,1),h.m(e,u)):h&&(Te(),W(h,1,1,()=>{h=null}),Ee()),g[4]==="draw"?p?(p.p(g,v),v[0]&16&&L(p,1)):(p=rp(g),p.c(),L(p,1),p.m(e,d)):p&&(Te(),W(p,1,1,()=>{p=null}),Ee()),g[3]?m?(m.p(g,v),v[0]&8&&L(m,1)):(m=sp(g),m.c(),L(m,1),m.m(e,null)):m&&(Te(),W(m,1,1,()=>{m=null}),Ee())},i(g){a||(L(o),L(l),L(h),L(p),L(m),a=!0)},o(g){W(o),W(l),W(h),W(p),W(m),a=!1},d(g){g&&j(e),f.d(),o&&o.d(),l&&l.d(),h&&h.d(),p&&p.d(),m&&m.d()}}}function lP(t,e,i){let n,r,u,d,a,s,c,f;Fe(t,In,U=>i(3,r=U)),Fe(t,At,U=>i(4,u=U)),Fe(t,vl,U=>i(40,d=U)),Fe(t,Ts,U=>i(41,a=U)),Fe(t,eo,U=>i(42,s=U)),Fe(t,Ms,U=>i(43,c=U)),Fe(t,Le,U=>i(5,f=U));let o=f.prints[c],l,h=o.canvasWidth,p=o.height/o.width,m=h*p,g=o.canvasJSON,v=null;wt();function _(U){ye(Le,f.prints[c].isChange=!0,f),ye(Le,f.prints[c].canvasJSON=U,f),ye(Le,f.prints[c].imageDataURL=ub(),f)}_n(async()=>{var U,X;if(ye(In,r=null,r),nb("print",h,m,_),g&&sb(g),((U=o.colorGroup)==null?void 0:U.value)!=="palette"){const ae=await u1(s.id);ae.error?console.log("컬러 데이터 로드 실패"):((X=o.colorGroup)==null?void 0:X.value)==="shopColor"?ye(vl,d=ae.data,d):ye(vl,d=ae.data.filter(le=>le.colorGroup===o.colorGroup.value),d)}});function b(U){mf(U.file.url,{convert:U.file.convert,objType:"clipart"}),ye(At,u=null,u)}function y(U){mf(U.thumbnail.url,{convert:U.convert,origin:U.origin,thumbnail:U.thumbnail,objType:"upload"}),ye(At,u=null,u)}function w(U){const X=d!=null&&d.length?d[0].hex:"#000000";ab(U,{objType:"text",fontFamily:a[0].fontFamily,fill:X}),ye(At,u=null,u)}function C(U){const X=d[0]?d[0].hex:"#000000";switch(U){case"rect":Tb(X);break;case"triangle":Ob(X);break;case"circle":Eb(X);break;case"draw":kb(!0);break}ye(At,u=null,u)}function T({detail:U}){fb(U.value)}function E({detail:U}){hb(r[0],U.text)}function A({detail:U}){db(r[0],U.fontFamily)}function F({detail:U}){pb(r[0],U.align)}function G({detail:U}){gb(r[0],U.style)}function Y({detail:U}){mb(r[0],U.decoration)}function Q({detail:U}){vb(r[0],U.stroke)}function q(){l=this.clientWidth,i(0,l)}const N=()=>i(1,v="rotate"),V=()=>i(1,v="color"),ee=()=>i(1,v="colors"),te=()=>i(1,v="text"),k=()=>i(1,v="align"),P=()=>i(1,v="style"),R=()=>i(1,v="decoration"),M=()=>i(1,v="stroke");function K(U){v=U,i(1,v)}function I(U){v=U,i(1,v)}const D=()=>vf();function z(U){v=U,i(1,v)}function J(U){v=U,i(1,v)}function ne(U){v=U,i(1,v)}function Z(U){v=U,i(1,v)}function H(U){v=U,i(1,v)}function se(U){v=U,i(1,v)}const pe=()=>vf();return t.$$.update=()=>{var U;t.$$.dirty[0]&1&&i(2,n=l*((U=o.background)!=null&&U.ratio?o.background.ratio:1))},[l,v,n,r,u,f,o,h,p,m,b,y,w,C,T,E,A,F,G,Y,Q,q,N,V,ee,te,k,P,R,M,K,I,D,z,J,ne,Z,H,se,pe]}class cP extends Ve{constructor(e){super(),He(this,e,lP,aP,Ue,{},null,[-1,-1])}}function _p(t,e,i){const n=t.slice();return n[6]=e[i],n[8]=i,n}function yp(t){let e,i,n;return{c(){var r;e=x("img"),$e(e.src,i=(r=t[6].background.image)==null?void 0:r.url)||S(e,"src",i),S(e,"alt",n=t[6].title),S(e,"class","max-h-full")},m(r,u){B(r,e,u)},p(r,u){var d;u&1&&!$e(e.src,i=(d=r[6].background.image)==null?void 0:d.url)&&S(e,"src",i),u&1&&n!==(n=r[6].title)&&S(e,"alt",n)},d(r){r&&j(e)}}}function bp(t){let e,i,n,r,u;return{c(){var d,a,s,c,f;e=x("img"),$e(e.src,i=t[6].imageDataURL)||S(e,"src",i),S(e,"alt",n=t[6].title),S(e,"class",r=(a=(d=t[6].background)==null?void 0:d.image)!=null&&a.url?"absolute":""),S(e,"style",u=`left:${(s=t[6].background)!=null&&s.canvasLeft?t[6].background.canvasLeft:0}%; top:${(c=t[6].background)!=null&&c.canvasTop?t[6].background.canvasTop:0}%; width:${(f=t[6].background)!=null&&f.canvasPer?t[6].background.canvasPer:100}%; height:auto;`)},m(d,a){B(d,e,a)},p(d,a){var s,c,f,o,l;a&1&&!$e(e.src,i=d[6].imageDataURL)&&S(e,"src",i),a&1&&n!==(n=d[6].title)&&S(e,"alt",n),a&1&&r!==(r=(c=(s=d[6].background)==null?void 0:s.image)!=null&&c.url?"absolute":"")&&S(e,"class",r),a&1&&u!==(u=`left:${(f=d[6].background)!=null&&f.canvasLeft?d[6].background.canvasLeft:0}%; top:${(o=d[6].background)!=null&&o.canvasTop?d[6].background.canvasTop:0}%; width:${(l=d[6].background)!=null&&l.canvasPer?d[6].background.canvasPer:100}%; height:auto;`)&&S(e,"style",u)},d(d){d&&j(e)}}}function wp(t){var p,m;let e,i,n,r,u,d=t[6].title+"",a,s,c,f,o=((m=(p=t[6].background)==null?void 0:p.image)==null?void 0:m.url)&&yp(t),l=t[6].imageDataURL&&bp(t);function h(){return t[3](t[8])}return{c(){var g;e=x("div"),i=x("button"),o&&o.c(),n=$(),l&&l.c(),r=$(),u=x("span"),a=xe(d),s=$(),S(i,"class","max-w-24 max-h-24 min-w-14 min-h-14 relative bg-no-repeat border rounded-lg overflow-hidden"),at(i,"background-color",(g=t[0].currentOption)!=null&&g.colorCode?t[0].currentOption.colorCode:"#ffffff"),S(u,"class","w-full flex justify-center text-xs py-0.5"),S(e,"class","p-1 bg-white rounded-lg flex flex-col")},m(g,v){B(g,e,v),O(e,i),o&&o.m(i,null),O(i,n),l&&l.m(i,null),O(e,r),O(e,u),O(u,a),O(e,s),c||(f=oe(i,"click",h),c=!0)},p(g,v){var _,b,y;t=g,(b=(_=t[6].background)==null?void 0:_.image)!=null&&b.url?o?o.p(t,v):(o=yp(t),o.c(),o.m(i,n)):o&&(o.d(1),o=null),t[6].imageDataURL?l?l.p(t,v):(l=bp(t),l.c(),l.m(i,null)):l&&(l.d(1),l=null),v&1&&at(i,"background-color",(y=t[0].currentOption)!=null&&y.colorCode?t[0].currentOption.colorCode:"#ffffff"),v&1&&d!==(d=t[6].title+"")&&Ke(a,d)},d(g){g&&j(e),o&&o.d(),l&&l.d(),c=!1,f()}}}function uP(t){let e,i,n=Ne(t[0].prints),r=[];for(let u=0;u<n.length;u+=1)r[u]=wp(_p(t,n,u));return{c(){e=x("div"),i=x("div");for(let u=0;u<r.length;u+=1)r[u].c();S(i,"class","flex flex-row max-w-full space-x-4 overflow-x-auto overflow-y-hidden p-5"),S(e,"class","absolute bottom-2")},m(u,d){B(u,e,d),O(e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(u,[d]){if(d&3){n=Ne(u[0].prints);let a;for(a=0;a<n.length;a+=1){const s=_p(u,n,a);r[a]?r[a].p(s,d):(r[a]=wp(s),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:ve,o:ve,d(u){u&&j(e),Tt(r,u)}}}function fP(t,e,i){let n,r;Fe(t,Ms,s=>i(4,n=s)),Fe(t,Le,s=>i(0,r=s));let{printKey:u}=e;wt();function d(s){ye(Ms,n=s,n),i(2,u++,u)}const a=s=>d(s);return t.$$set=s=>{"printKey"in s&&i(2,u=s.printKey)},[r,d,u,a]}class hP extends Ve{constructor(e){super(),He(this,e,fP,uP,Ue,{printKey:2})}}/*!
* Viewer.js v1.11.6
* https://fengyuanchen.github.io/viewerjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:16:38.052Z
*/function Cp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Ku(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Cp(Object(i),!0).forEach(function(n){gP(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Cp(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function dP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iy(n.key),n)}}function pP(t,e,i){return e&&Sp(t.prototype,e),i&&Sp(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function gP(t,e,i){return e=iy(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function mP(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iy(t){var e=mP(t,"string");return typeof e=="symbol"?e:String(e)}var Tp={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},vP='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',$a=typeof window<"u"&&typeof window.document<"u",Ki=$a?window:{},Ar=$a&&Ki.document.documentElement?"ontouchstart"in Ki.document.documentElement:!1,Ju=$a?"PointerEvent"in Ki:!1,je="viewer",$o="move",ny="switch",_s="zoom",Ao="".concat(je,"-active"),_P="".concat(je,"-close"),Go="".concat(je,"-fade"),Hc="".concat(je,"-fixed"),yP="".concat(je,"-fullscreen"),Ep="".concat(je,"-fullscreen-exit"),An="".concat(je,"-hide"),bP="".concat(je,"-hide-md-down"),wP="".concat(je,"-hide-sm-down"),CP="".concat(je,"-hide-xs-down"),ci="".concat(je,"-in"),As="".concat(je,"-invisible"),Pr="".concat(je,"-loading"),SP="".concat(je,"-move"),Op="".concat(je,"-open"),ur="".concat(je,"-show"),ht="".concat(je,"-transition"),Yr="click",Vc="dblclick",kp="dragstart",xp="focusin",Dp="keydown",hi="load",zn="error",TP=Ar?"touchend touchcancel":"mouseup",EP=Ar?"touchmove":"mousemove",OP=Ar?"touchstart":"mousedown",Ap=Ju?"pointerdown":OP,Pp=Ju?"pointermove":EP,Ip=Ju?"pointerup pointercancel":TP,Rp="resize",bi="transitionend",Mp="wheel",Fp="ready",Lp="show",Np="shown",jp="hide",Bp="hidden",Up="view",zs="viewed",zp="move",Wp="moved",Hp="rotate",Vp="rotated",Xp="scale",Yp="scaled",$p="zoom",Gp="zoomed",qp="play",Kp="stop",ya="".concat(je,"Action"),Zu=/\s\s*/,Po=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function Ws(t){return typeof t=="string"}var kP=Number.isNaN||Ki.isNaN;function ot(t){return typeof t=="number"&&!kP(t)}function br(t){return typeof t>"u"}function $r(t){return Wc(t)==="object"&&t!==null}var xP=Object.prototype.hasOwnProperty;function wr(t){if(!$r(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&xP.call(i,"isPrototypeOf")}catch{return!1}}function Je(t){return typeof t=="function"}function Qe(t,e){if(t&&Je(e))if(Array.isArray(t)||ot(t.length)){var i=t.length,n;for(n=0;n<i&&e.call(t,t[n],n,t)!==!1;n+=1);}else $r(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)});return t}var ai=Object.assign||function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return $r(e)&&n.length>0&&n.forEach(function(u){$r(u)&&Object.keys(u).forEach(function(d){e[d]=u[d]})}),e},DP=/^(?:width|height|left|top|marginLeft|marginTop)$/;function Ci(t,e){var i=t.style;Qe(e,function(n,r){DP.test(r)&&ot(n)&&(n+="px"),i[r]=n})}function AP(t){return Ws(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function mr(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Re(t,e){if(!(!t||!e)){if(ot(t.length)){Qe(t,function(n){Re(n,e)});return}if(t.classList){t.classList.add(e);return}var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Ge(t,e){if(!(!t||!e)){if(ot(t.length)){Qe(t,function(i){Ge(i,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Hs(t,e,i){if(e){if(ot(t.length)){Qe(t,function(n){Hs(n,e,i)});return}i?Re(t,e):Ge(t,e)}}var PP=/([a-z\d])([A-Z])/g;function Qu(t){return t.replace(PP,"$1-$2").toLowerCase()}function Cr(t,e){return $r(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Qu(e)))}function Xc(t,e,i){$r(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Qu(e)),i)}var ry=function(){var t=!1;if($a){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(u){e=u}});Ki.addEventListener("test",i,n),Ki.removeEventListener("test",i,n)}return t}();function Ze(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(Zu).forEach(function(u){if(!ry){var d=t.listeners;d&&d[u]&&d[u][i]&&(r=d[u][i],delete d[u][i],Object.keys(d[u]).length===0&&delete d[u],Object.keys(d).length===0&&delete t.listeners)}t.removeEventListener(u,r,n)})}function Me(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(Zu).forEach(function(u){if(n.once&&!ry){var d=t.listeners,a=d===void 0?{}:d;r=function(){delete a[u][i],t.removeEventListener(u,r,n);for(var c=arguments.length,f=new Array(c),o=0;o<c;o++)f[o]=arguments[o];i.apply(t,f)},a[u]||(a[u]={}),a[u][i]&&t.removeEventListener(u,a[u][i],n),a[u][i]=r,t.listeners=a}t.addEventListener(u,r,n)})}function mt(t,e,i,n){var r;return Je(Event)&&Je(CustomEvent)?r=new CustomEvent(e,Ku({bubbles:!0,cancelable:!0,detail:i},n)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(r)}function IP(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function qo(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,r=t.translateX,u=t.translateY,d=[];ot(r)&&r!==0&&d.push("translateX(".concat(r,"px)")),ot(u)&&u!==0&&d.push("translateY(".concat(u,"px)")),ot(e)&&e!==0&&d.push("rotate(".concat(e,"deg)")),ot(i)&&i!==1&&d.push("scaleX(".concat(i,")")),ot(n)&&n!==1&&d.push("scaleY(".concat(n,")"));var a=d.length?d.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function RP(t){return Ws(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var Zl=Ki.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Ki.navigator.userAgent);function sy(t,e,i){var n=document.createElement("img");if(t.naturalWidth&&!Zl)return i(t.naturalWidth,t.naturalHeight),n;var r=document.body||document.documentElement;return n.onload=function(){i(n.width,n.height),Zl||r.removeChild(n)},Qe(e.inheritedAttributes,function(u){var d=t.getAttribute(u);d!==null&&n.setAttribute(u,d)}),n.src=t.src,Zl||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(n)),n}function Io(t){switch(t){case 2:return CP;case 3:return wP;case 4:return bP;default:return""}}function MP(t){var e=Ku({},t),i=[];return Qe(t,function(n,r){delete e[r],Qe(e,function(u){var d=Math.abs(n.startX-u.startX),a=Math.abs(n.startY-u.startY),s=Math.abs(n.endX-u.endX),c=Math.abs(n.endY-u.endY),f=Math.sqrt(d*d+a*a),o=Math.sqrt(s*s+c*c),l=(o-f)/f;i.push(l)})}),i.sort(function(n,r){return Math.abs(n)<Math.abs(r)}),i[0]}function Ro(t,e){var i=t.pageX,n=t.pageY,r={endX:i,endY:n};return e?r:Ku({timeStamp:Date.now(),startX:i,startY:n},r)}function FP(t){var e=0,i=0,n=0;return Qe(t,function(r){var u=r.startX,d=r.startY;e+=u,i+=d,n+=1}),e/=n,i/=n,{pageX:e,pageY:i}}var LP={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,i=e.body||e.documentElement;this.body=i,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=i.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(i).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,i=this.parent,n;e.inline&&(n={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=n),(this.fulled||!n)&&(n=this.containerData),this.viewerData=ai({},n)},renderViewer:function(){this.options.inline&&!this.fulled&&Ci(this.viewer,this.viewerData)},initList:function(){var e=this,i=this.element,n=this.options,r=this.list,u=[];r.innerHTML="",Qe(this.images,function(d,a){var s=d.src,c=d.alt||RP(s),f=e.getImageURL(d);if(s||f){var o=document.createElement("li"),l=document.createElement("img");Qe(n.inheritedAttributes,function(h){var p=d.getAttribute(h);p!==null&&l.setAttribute(h,p)}),n.navbar&&(l.src=s||f),l.alt=c,l.setAttribute("data-original-url",f||s),o.setAttribute("data-index",a),o.setAttribute("data-viewer-action","view"),o.setAttribute("role","button"),n.keyboard&&o.setAttribute("tabindex",0),o.appendChild(l),r.appendChild(o),u.push(o)}}),this.items=u,Qe(u,function(d){var a=d.firstElementChild,s,c;Xc(a,"filled",!0),n.loading&&Re(d,Pr),Me(a,hi,s=function(o){Ze(a,zn,c),n.loading&&Ge(d,Pr),e.loadImage(o)},{once:!0}),Me(a,zn,c=function(){Ze(a,hi,s),n.loading&&Ge(d,Pr)},{once:!0})}),n.transition&&Me(i,zs,function(){Re(r,ht)},{once:!0})},renderList:function(){var e=this.index,i=this.items[e];if(i){var n=i.nextElementSibling,r=parseInt(window.getComputedStyle(n||i).marginLeft,10),u=i.offsetWidth,d=u+r;Ci(this.list,ai({width:d*this.length-r},qo({translateX:(this.viewerData.width-u)/2-d*e})))}},resetList:function(){var e=this.list;e.innerHTML="",Ge(e,ht),Ci(e,qo({translateX:0}))},initImage:function(e){var i=this,n=this.options,r=this.image,u=this.viewerData,d=this.footer.offsetHeight,a=u.width,s=Math.max(u.height-d,d),c=this.imageData||{},f;this.imageInitializing={abort:function(){f.onload=null}},f=sy(r,n,function(o,l){var h=o/l,p=Math.max(0,Math.min(1,n.initialCoverage)),m=a,g=s;i.imageInitializing=!1,s*h>a?g=a/h:m=s*h,p=ot(p)?p:.9,m=Math.min(m*p,o),g=Math.min(g*p,l);var v=(a-m)/2,_=(s-g)/2,b={left:v,top:_,x:v,y:_,width:m,height:g,oldRatio:1,ratio:m/o,aspectRatio:h,naturalWidth:o,naturalHeight:l},y=ai({},b);n.rotatable&&(b.rotate=c.rotate||0,y.rotate=0),n.scalable&&(b.scaleX=c.scaleX||1,b.scaleY=c.scaleY||1,y.scaleX=1,y.scaleY=1),i.imageData=b,i.initialImageData=y,e&&e()})},renderImage:function(e){var i=this,n=this.image,r=this.imageData;if(Ci(n,ai({width:r.width,height:r.height,marginLeft:r.x,marginTop:r.y},qo(r))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&mr(n,ht)){var u=function(){i.imageRendering=!1,e()};this.imageRendering={abort:function(){Ze(n,bi,u)}},Me(n,bi,u,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},NP={bind:function(){var e=this.options,i=this.viewer,n=this.canvas,r=this.element.ownerDocument;Me(i,Yr,this.onClick=this.click.bind(this)),Me(i,kp,this.onDragStart=this.dragstart.bind(this)),Me(n,Ap,this.onPointerDown=this.pointerdown.bind(this)),Me(r,Pp,this.onPointerMove=this.pointermove.bind(this)),Me(r,Ip,this.onPointerUp=this.pointerup.bind(this)),Me(r,Dp,this.onKeyDown=this.keydown.bind(this)),Me(window,Rp,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&Me(i,Mp,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&Me(n,Vc,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,i=this.viewer,n=this.canvas,r=this.element.ownerDocument;Ze(i,Yr,this.onClick),Ze(i,kp,this.onDragStart),Ze(n,Ap,this.onPointerDown),Ze(r,Pp,this.onPointerMove),Ze(r,Ip,this.onPointerUp),Ze(r,Dp,this.onKeyDown),Ze(window,Rp,this.onResize),e.zoomable&&e.zoomOnWheel&&Ze(i,Mp,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&Ze(n,Vc,this.onDblclick)}},jP={click:function(e){var i=this.options,n=this.imageData,r=e.target,u=Cr(r,ya);switch(!u&&r.localName==="img"&&r.parentElement.localName==="li"&&(r=r.parentElement,u=Cr(r,ya)),Ar&&e.isTrusted&&r===this.canvas&&clearTimeout(this.clickCanvasTimeout),u){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(Cr(r,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-n.scaleX||-1);break;case"flip-vertical":this.scaleY(-n.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Ar&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var i=this.element,n=this.options,r=this.image,u=this.index,d=this.viewerData;Ge(r,As),n.loading&&Ge(this.canvas,Pr),r.style.cssText="height:0;"+"margin-left:".concat(d.width/2,"px;")+"margin-top:".concat(d.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){Hs(r,SP,n.movable),Hs(r,ht,n.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,Je(n.viewed)&&Me(i,zs,n.viewed,{once:!0}),mt(i,zs,{originalImage:e.images[u],index:u,image:r},{cancelable:!1})})})},loadImage:function(e){var i=e.target,n=i.parentNode,r=n.offsetWidth||30,u=n.offsetHeight||50,d=!!Cr(i,"filled");sy(i,this.options,function(a,s){var c=a/s,f=r,o=u;u*c>r?d?f=u*c:o=r/c:d?o=r/c:f=u*c,Ci(i,ai({width:f,height:o},qo({translateX:(r-f)/2,translateY:(u-o)/2})))})},keydown:function(e){var i=this.options;if(i.keyboard){var n=e.keyCode||e.which||e.charCode;switch(n){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(n){case 27:this.played?this.stop():i.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(i.loop);break;case 38:e.preventDefault(),this.zoom(i.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(i.loop);break;case 40:e.preventDefault(),this.zoom(-i.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var i=this.options,n=this.pointers,r=e.buttons,u=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(ot(r)&&r!==1||ot(u)&&u!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?Qe(e.changedTouches,function(a){n[a.identifier]=Ro(a)}):n[e.pointerId||0]=Ro(e);var d=i.movable?$o:!1;i.zoomOnTouch&&i.zoomable&&Object.keys(n).length>1?d=_s:i.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(d=ny),i.transition&&(d===$o||d===_s)&&Ge(this.image,ht),this.action=d}},pointermove:function(e){var i=this.pointers,n=this.action;!this.viewed||!n||(e.preventDefault(),e.changedTouches?Qe(e.changedTouches,function(r){ai(i[r.identifier]||{},Ro(r,!0))}):ai(i[e.pointerId||0]||{},Ro(e,!0)),this.change(e))},pointerup:function(e){var i=this,n=this.options,r=this.action,u=this.pointers,d;e.changedTouches?Qe(e.changedTouches,function(a){d=u[a.identifier],delete u[a.identifier]}):(d=u[e.pointerId||0],delete u[e.pointerId||0]),r&&(e.preventDefault(),n.transition&&(r===$o||r===_s)&&Re(this.image,ht),this.action=!1,Ar&&r!==_s&&d&&Date.now()-d.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){mt(i.image,Vc,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,n.backdrop&&n.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){mt(i.canvas,Yr,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}Qe(this.player.getElementsByTagName("img"),function(i){Me(i,hi,e.loadImage.bind(e),{once:!0}),mt(i,hi)})}},wheel:function(e){var i=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50);var n=Number(this.options.zoomRatio)||.1,r=1;e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,!0,null,e)}}},BP={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,n=this.options;if(n.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(Je(n.show)&&Me(i,Lp,n.show,{once:!0}),mt(i,Lp)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var r=this.viewer;if(Ge(r,An),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("aria-hidden"),n.transition&&!e){var u=this.shown.bind(this);this.transitioning={abort:function(){Ze(r,bi,u),Ge(r,ci)}},Re(r,ht),r.initialOffsetWidth=r.offsetWidth,Me(r,bi,u,{once:!0}),Re(r,ci)}else Re(r,ci),this.shown();return this},hide:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,r=this.options;if(r.inline||this.hiding||!(this.isShown||this.showing))return this;if(Je(r.hide)&&Me(n,jp,r.hide,{once:!0}),mt(n,jp)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var u=this.viewer,d=this.image,a=function(){Ge(u,ci),e.hidden()};if(r.transition&&!i){var s=function f(o){o&&o.target===u&&(Ze(u,bi,f),e.hidden())},c=function(){mr(u,ht)?(Me(u,bi,s),Ge(u,ci)):a()};this.transitioning={abort:function(){e.viewed&&mr(d,ht)?Ze(d,bi,c):mr(u,ht)&&Ze(u,bi,s)}},this.viewed&&mr(d,ht)?(Me(d,bi,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else a();return this},view:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(i=Number(i)||0,this.hiding||this.played||i<0||i>=this.length||this.viewed&&i===this.index)return this;if(!this.isShown)return this.index=i,this.show();this.viewing&&this.viewing.abort();var n=this.element,r=this.options,u=this.title,d=this.canvas,a=this.items[i],s=a.querySelector("img"),c=Cr(s,"originalUrl"),f=s.getAttribute("alt"),o=document.createElement("img");if(Qe(r.inheritedAttributes,function(g){var v=s.getAttribute(g);v!==null&&o.setAttribute(g,v)}),o.src=c,o.alt=f,Je(r.view)&&Me(n,Up,r.view,{once:!0}),mt(n,Up,{originalImage:this.images[i],index:i,image:o})===!1||!this.isShown||this.hiding||this.played)return this;var l=this.items[this.index];l&&(Ge(l,Ao),l.removeAttribute("aria-selected")),Re(a,Ao),a.setAttribute("aria-selected",!0),r.focus&&a.focus(),this.image=o,this.viewed=!1,this.index=i,this.imageData={},Re(o,As),r.loading&&Re(d,Pr),d.innerHTML="",d.appendChild(o),this.renderList(),u.innerHTML="";var h=function(){var v=e.imageData,_=Array.isArray(r.title)?r.title[1]:r.title;u.innerHTML=AP(Je(_)?_.call(e,o,v):"".concat(f," (").concat(v.naturalWidth," × ").concat(v.naturalHeight,")"))},p,m;return Me(n,zs,h,{once:!0}),this.viewing={abort:function(){Ze(n,zs,h),o.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(o.src="",Ze(o,hi,p),e.timeout&&clearTimeout(e.timeout))}},o.complete?this.load():(Me(o,hi,p=function(){Ze(o,zn,m),e.load()},{once:!0}),Me(o,zn,m=function(){Ze(o,hi,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),Ge(o,As),r.loading&&Ge(e.canvas,Pr)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){Ge(o,As),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.index-1;return i<0&&(i=e?this.length-1:0),this.view(i),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.length-1,n=this.index+1;return n>i&&(n=e?0:i),this.view(n),this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData;return this.moveTo(br(e)?e:n.x+Number(e),br(i)?i:n.y+Number(i)),this},moveTo:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=this.element,d=this.options,a=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&d.movable){var s=a.x,c=a.y,f=!1;if(ot(e)?f=!0:e=s,ot(n)?f=!0:n=c,f){if(Je(d.move)&&Me(u,zp,d.move,{once:!0}),mt(u,zp,{x:e,y:n,oldX:s,oldY:c,originalEvent:r})===!1)return this;a.x=e,a.y=n,a.left=e,a.top=n,this.moving=!0,this.renderImage(function(){i.moving=!1,Je(d.moved)&&Me(u,Wp,d.moved,{once:!0}),mt(u,Wp,{x:e,y:n,oldX:s,oldY:c,originalEvent:r},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var i=this,n=this.element,r=this.options,u=this.imageData;if(e=Number(e),ot(e)&&this.viewed&&!this.played&&r.rotatable){var d=u.rotate;if(Je(r.rotate)&&Me(n,Hp,r.rotate,{once:!0}),mt(n,Hp,{degree:e,oldDegree:d})===!1)return this;u.rotate=e,this.rotating=!0,this.renderImage(function(){i.rotating=!1,Je(r.rotated)&&Me(n,Vp,r.rotated,{once:!0}),mt(n,Vp,{degree:e,oldDegree:d},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.element,u=this.options,d=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&u.scalable){var a=d.scaleX,s=d.scaleY,c=!1;if(ot(e)?c=!0:e=a,ot(n)?c=!0:n=s,c){if(Je(u.scale)&&Me(r,Xp,u.scale,{once:!0}),mt(r,Xp,{scaleX:e,scaleY:n,oldScaleX:a,oldScaleY:s})===!1)return this;d.scaleX=e,d.scaleY=n,this.scaling=!0,this.renderImage(function(){i.scaling=!1,Je(u.scaled)&&Me(r,Yp,u.scaled,{once:!0}),mt(r,Yp,{scaleX:e,scaleY:n,oldScaleX:a,oldScaleY:s},{cancelable:!1})})}}return this},zoom:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(u.width*e/u.naturalWidth,i,n,r),this},zoomTo:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,s=this.options,c=this.pointers,f=this.imageData,o=f.x,l=f.y,h=f.width,p=f.height,m=f.naturalWidth,g=f.naturalHeight;if(e=Math.max(0,e),ot(e)&&this.viewed&&!this.played&&(d||s.zoomable)){if(!d){var v=Math.max(.01,s.minZoomRatio),_=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),_)}if(u)switch(u.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var b=m*e,y=g*e,w=b-h,C=y-p,T=f.ratio;if(Je(s.zoom)&&Me(a,$p,s.zoom,{once:!0}),mt(a,$p,{ratio:e,oldRatio:T,originalEvent:u})===!1)return this;if(this.zooming=!0,u){var E=IP(this.viewer),A=c&&Object.keys(c).length>0?FP(c):{pageX:u.pageX,pageY:u.pageY};f.x-=w*((A.pageX-E.left-o)/h),f.y-=C*((A.pageY-E.top-l)/p)}else wr(r)&&ot(r.x)&&ot(r.y)?(f.x-=w*((r.x-o)/h),f.y-=C*((r.y-l)/p)):(f.x-=w/2,f.y-=C/2);f.left=f.x,f.top=f.y,f.width=b,f.height=y,f.oldRatio=T,f.ratio=e,this.renderImage(function(){i.zooming=!1,Je(s.zoomed)&&Me(a,Gp,s.zoomed,{once:!0}),mt(a,Gp,{ratio:e,oldRatio:T,originalEvent:u},{cancelable:!1})}),n&&this.tooltip()}return this},play:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var n=this.element,r=this.options;if(Je(r.play)&&Me(n,qp,r.play,{once:!0}),mt(n,qp)===!1)return this;var u=this.player,d=this.loadImage.bind(this),a=[],s=0,c=0;if(this.played=!0,this.onLoadWhenPlay=d,i&&this.requestFullscreen(i),Re(u,ur),Qe(this.items,function(l,h){var p=l.querySelector("img"),m=document.createElement("img");m.src=Cr(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,s+=1,Re(m,Go),Hs(m,ht,r.transition),mr(l,Ao)&&(Re(m,ci),c=h),a.push(m),Me(m,hi,d,{once:!0}),u.appendChild(m)}),ot(r.interval)&&r.interval>0){var f=function l(){clearTimeout(e.playing.timeout),Ge(a[c],ci),c-=1,c=c>=0?c:s-1,Re(a[c],ci),e.playing.timeout=setTimeout(l,r.interval)},o=function l(){clearTimeout(e.playing.timeout),Ge(a[c],ci),c+=1,c=c<s?c:0,Re(a[c],ci),e.playing.timeout=setTimeout(l,r.interval)};s>1&&(this.playing={prev:f,next:o,timeout:setTimeout(o,r.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var i=this.element,n=this.options;if(Je(n.stop)&&Me(i,Kp,n.stop,{once:!0}),mt(i,Kp)===!1)return this;var r=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,Qe(r.getElementsByTagName("img"),function(u){Ze(u,hi,e.onLoadWhenPlay)}),Ge(r,ur),r.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,i=this.options,n=this.viewer,r=this.image,u=this.list;return!this.isShown||this.played||this.fulled||!i.inline?this:(this.fulled=!0,this.open(),Re(this.button,Ep),i.transition&&(Ge(u,ht),this.viewed&&Ge(r,ht)),Re(n,Hc),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("style"),Ci(n,{zIndex:i.zIndex}),i.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=ai({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){Re(r,ht),Re(u,ht)},0)})}),this)},exit:function(){var e=this,i=this.options,n=this.viewer,r=this.image,u=this.list;return!this.isShown||this.played||!this.fulled||!i.inline?this:(this.fulled=!1,this.close(),Ge(this.button,Ep),i.transition&&(Ge(u,ht),this.viewed&&Ge(r,ht)),i.focus&&this.clearEnforceFocus(),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),Ge(n,Hc),Ci(n,{zIndex:i.zIndexInline}),this.viewerData=ai({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){Re(r,ht),Re(u,ht)},0)})}),this)},tooltip:function(){var e=this,i=this.options,n=this.tooltipBox,r=this.imageData;return!this.viewed||this.played||!i.tooltip?this:(n.textContent="".concat(Math.round(r.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&mt(n,bi),Re(n,ur),Re(n,Go),Re(n,ht),n.removeAttribute("aria-hidden"),n.initialOffsetWidth=n.offsetWidth,Re(n,ci)):(Re(n,ur),n.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){i.transition?(Me(n,bi,function(){Ge(n,ur),Ge(n,Go),Ge(n,ht),n.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),Ge(n,ci),e.fading=!0):(Ge(n,ur),n.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=ai({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,i=this.element,n=this.options,r=this.isImg;if(r&&!i.parentNode)return this.destroy();var u=[];if(Qe(r?[i]:i.querySelectorAll("img"),function(c){Je(n.filter)?n.filter.call(e,c)&&u.push(c):e.getImageURL(c)&&u.push(c)}),!u.length)return this;if(this.images=u,this.length=u.length,this.ready){var d=[];if(Qe(this.items,function(c,f){var o=c.querySelector("img"),l=u[f];l&&o?(l.src!==o.src||l.alt!==o.alt)&&d.push(f):d.push(f)}),Ci(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=d.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var s=this.items[this.index];Re(s,Ao),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,i=this.options;return e[je]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),i.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):i.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),i.inline||Ze(e,Yr,this.onStart),e[je]=void 0,this):this}},UP={getImageURL:function(e){var i=this.options.url;return Ws(i)?i=e.getAttribute(i):Je(i)?i=i.call(this,e):i="",i},enforceFocus:function(){var e=this;this.clearEnforceFocus(),Me(document,xp,this.onFocusin=function(i){var n=e.viewer,r=i.target;if(!(r===document||r===n||n.contains(r))){for(;r;){if(r.getAttribute("tabindex")!==null||r.getAttribute("aria-modal")==="true")return;r=r.parentElement}n.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(Ze(document,xp,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;Re(e,Op),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;Ge(e,Op),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,i=this.options,n=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,i.focus&&(n.focus(),this.enforceFocus()),Je(i.shown)&&Me(e,Np,i.shown,{once:!0}),mt(e,Np)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,i=this.options,n=this.viewer;i.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),Re(n,An),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),n.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(Je(i.hidden)&&Me(e,Bp,i.hidden,{once:!0}),mt(e,Bp,null,{cancelable:!1}))},requestFullscreen:function(e){var i=this.element.ownerDocument;if(this.fulled&&!(i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement)){var n=i.documentElement;n.requestFullscreen?wr(e)?n.requestFullscreen(e):n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var i=this.options,n=this.pointers,r=n[Object.keys(n)[0]];if(r){var u=r.endX-r.startX,d=r.endY-r.startY;switch(this.action){case $o:(u!==0||d!==0)&&(this.pointerMoved=!0,this.move(u,d,e));break;case _s:this.zoom(MP(n),!1,null,e);break;case ny:{this.action="switched";var a=Math.abs(u);a>1&&a>Math.abs(d)&&(this.pointers={},u>1?this.prev(i.loop):u<-1&&this.next(i.loop));break}}Qe(n,function(s){s.startX=s.endX,s.startY=s.endY})}},isSwitchable:function(){var e=this.imageData,i=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=i.width&&e.height<=i.height}},zP=Ki.Viewer,WP=function(t){return function(){return t+=1,t}}(-1),oy=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dP(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=ai({},Tp,wr(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=WP(),this.init()}return pP(t,[{key:"init",value:function(){var i=this,n=this.element,r=this.options;if(!n[je]){n[je]=this,r.focus&&!r.keyboard&&(r.focus=!1);var u=n.localName==="img",d=[];if(Qe(u?[n]:n.querySelectorAll("img"),function(c){Je(r.filter)?r.filter.call(i,c)&&d.push(c):i.getImageURL(c)&&d.push(c)}),this.isImg=u,this.length=d.length,this.images=d,this.initBody(),br(document.createElement(je).style.transition)&&(r.transition=!1),r.inline){var a=0,s=function(){if(a+=1,a===i.length){var f;i.initializing=!1,i.delaying={abort:function(){clearTimeout(f)}},f=setTimeout(function(){i.delaying=!1,i.build()},0)}};this.initializing={abort:function(){Qe(d,function(f){f.complete||(Ze(f,hi,s),Ze(f,zn,s))})}},Qe(d,function(c){if(c.complete)s();else{var f,o;Me(c,hi,f=function(){Ze(c,zn,o),s()},{once:!0}),Me(c,zn,o=function(){Ze(c,hi,f),s()},{once:!0})}})}else Me(n,Yr,this.onStart=function(c){var f=c.target;f.localName==="img"&&(!Je(r.filter)||r.filter.call(i,f))&&i.view(i.images.indexOf(f))})}}},{key:"build",value:function(){if(!this.ready){var i=this.element,n=this.options,r=i.parentNode,u=document.createElement("div");u.innerHTML=vP;var d=u.querySelector(".".concat(je,"-container")),a=d.querySelector(".".concat(je,"-title")),s=d.querySelector(".".concat(je,"-toolbar")),c=d.querySelector(".".concat(je,"-navbar")),f=d.querySelector(".".concat(je,"-button")),o=d.querySelector(".".concat(je,"-canvas"));if(this.parent=r,this.viewer=d,this.title=a,this.toolbar=s,this.navbar=c,this.button=f,this.canvas=o,this.footer=d.querySelector(".".concat(je,"-footer")),this.tooltipBox=d.querySelector(".".concat(je,"-tooltip")),this.player=d.querySelector(".".concat(je,"-player")),this.list=d.querySelector(".".concat(je,"-list")),d.id="".concat(je).concat(this.id),a.id="".concat(je,"Title").concat(this.id),Re(a,n.title?Io(Array.isArray(n.title)?n.title[0]:n.title):An),Re(c,n.navbar?Io(n.navbar):An),Hs(f,An,!n.button),n.keyboard&&f.setAttribute("tabindex",0),n.backdrop&&(Re(d,"".concat(je,"-backdrop")),!n.inline&&n.backdrop!=="static"&&Xc(o,ya,"hide")),Ws(n.className)&&n.className&&n.className.split(Zu).forEach(function(b){Re(d,b)}),n.toolbar){var l=document.createElement("ul"),h=wr(n.toolbar),p=Po.slice(0,3),m=Po.slice(7,9),g=Po.slice(9);h||Re(s,Io(n.toolbar)),Qe(h?n.toolbar:Po,function(b,y){var w=h&&wr(b),C=h?Qu(y):b,T=w&&!br(b.show)?b.show:b;if(!(!T||!n.zoomable&&p.indexOf(C)!==-1||!n.rotatable&&m.indexOf(C)!==-1||!n.scalable&&g.indexOf(C)!==-1)){var E=w&&!br(b.size)?b.size:b,A=w&&!br(b.click)?b.click:b,F=document.createElement("li");n.keyboard&&F.setAttribute("tabindex",0),F.setAttribute("role","button"),Re(F,"".concat(je,"-").concat(C)),Je(A)||Xc(F,ya,C),ot(T)&&Re(F,Io(T)),["small","large"].indexOf(E)!==-1?Re(F,"".concat(je,"-").concat(E)):C==="play"&&Re(F,"".concat(je,"-large")),Je(A)&&Me(F,Yr,A),l.appendChild(F)}}),s.appendChild(l)}else Re(s,An);if(!n.rotatable){var v=s.querySelectorAll('li[class*="rotate"]');Re(v,As),Qe(v,function(b){s.appendChild(b)})}if(n.inline)Re(f,yP),Ci(d,{zIndex:n.zIndexInline}),window.getComputedStyle(r).position==="static"&&Ci(r,{position:"relative"}),r.insertBefore(d,i.nextSibling);else{Re(f,_P),Re(d,Hc),Re(d,Go),Re(d,An),Ci(d,{zIndex:n.zIndex});var _=n.container;Ws(_)&&(_=i.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(d)}if(n.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,Je(n.ready)&&Me(i,Fp,n.ready,{once:!0}),mt(i,Fp)===!1){this.ready=!1;return}this.ready&&n.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=zP,t}},{key:"setDefaults",value:function(i){ai(Tp,wr(i)&&i)}}]),t}();ai(oy.prototype,LP,NP,jP,BP,UP);function Jp(t,e,i){const n=t.slice();return n[8]=e[i],n}function Zp(t){var T;let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w;a=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let C=((T=t[2].thumbnails)==null?void 0:T.length)&&Qp(t);return{c(){e=x("div"),i=x("div"),n=x("h2"),r=x("span"),r.textContent="미리보기",u=$(),d=x("button"),de(a.$$.fragment),s=$(),c=x("div"),f=x("div"),o=x("div"),l=x("img"),p=$(),C&&C.c(),m=$(),g=x("div"),v=x("button"),v.textContent="닫기",S(r,"class","font-semibold"),S(d,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),$e(l.src,h=t[1])||S(l,"src",h),S(l,"alt",""),S(l,"class","object-contain max-h-full max-w-full"),S(o,"class","h-[50vh] flex justify-center items-center"),S(f,"class","flex-grow overflow-y-auto"),S(c,"class","flex flex-col flex-grow overflow-hidden"),S(v,"class","btn secondary-btn"),S(g,"class","mt-3 flex justify-center"),S(i,"class","flex flex-col h-full max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(E,A){B(E,e,A),O(e,i),O(i,n),O(n,r),O(n,u),O(n,d),fe(a,d,null),O(i,s),O(i,c),O(c,f),O(f,o),O(o,l),O(f,p),C&&C.m(f,null),O(i,m),O(i,g),O(g,v),b=!0,y||(w=[oe(d,"click",Fr),oe(v,"click",Fr),oe(e,"introstart",t[3]),oe(e,"outroend",t[4])],y=!0)},p(E,A){var F;(!b||A&2&&!$e(l.src,h=E[1]))&&S(l,"src",h),(F=E[2].thumbnails)!=null&&F.length?C?C.p(E,A):(C=Qp(E),C.c(),C.m(f,null)):C&&(C.d(1),C=null)},i(E){b||(L(a.$$.fragment,E),E&&Yt(()=>{b&&(_||(_=Qt(e,ra,{y:50},!0)),_.run(1))}),b=!0)},o(E){W(a.$$.fragment,E),E&&(_||(_=Qt(e,ra,{y:50},!1)),_.run(0)),b=!1},d(E){E&&j(e),he(a),C&&C.d(),E&&_&&_.end(),y=!1,Be(w)}}}function Qp(t){let e,i,n=Ne(t[2].thumbnails),r=[];for(let u=0;u<n.length;u+=1)r[u]=eg(Jp(t,n,u));return{c(){e=x("div"),i=x("div");for(let u=0;u<r.length;u+=1)r[u].c();S(i,"class","grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 w-full"),S(e,"class","mt-3")},m(u,d){B(u,e,d),O(e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(u,d){if(d&6){n=Ne(u[2].thumbnails);let a;for(a=0;a<n.length;a+=1){const s=Jp(u,n,a);r[a]?r[a].p(s,d):(r[a]=eg(s),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(u){u&&j(e),Tt(r,u)}}}function eg(t){let e,i,n,r,u,d;function a(){return t[5](t[8])}return{c(){e=x("button"),i=x("img"),r=$(),$e(i.src,n=t[8].url)||S(i,"src",n),S(i,"alt","미리보기"),S(i,"class","rounded-lg object-contain h-full"),S(e,"type","button")},m(s,c){B(s,e,c),O(e,i),O(e,r),u||(d=oe(e,"click",a),u=!0)},p(s,c){t=s,c&4&&!$e(i.src,n=t[8].url)&&S(i,"src",n)},d(s){s&&j(e),u=!1,d()}}}function HP(t){let e,i,n=t[0]&&Zp(t);return{c(){n&&n.c(),e=qe()},m(r,u){n&&n.m(r,u),B(r,e,u),i=!0},p(r,[u]){r[0]?n?(n.p(r,u),u&1&&L(n,1)):(n=Zp(r),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),W(n,1,1,()=>{n=null}),Ee())},i(r){i||(L(n),i=!0)},o(r){W(n),i=!1},d(r){r&&j(e),n&&n.d(r)}}}function VP(t,e,i){let n;Fe(t,Le,c=>i(2,n=c));let{isOpen:r}=e,u=n.thumbnails[0].url;wt(),_n(async()=>{});function d(c){ta.call(this,t,c)}function a(c){ta.call(this,t,c)}const s=c=>i(1,u=c.url);return t.$$set=c=>{"isOpen"in c&&i(0,r=c.isOpen)},[r,u,n,d,a,s]}class XP extends Ve{constructor(e){super(),He(this,e,VP,HP,Ue,{isOpen:0})}}function tg(t,e,i){const n=t.slice();return n[20]=e[i],n}function ig(t,e,i){const n=t.slice();return n[20]=e[i],n}function ng(t,e,i){const n=t.slice();return n[20]=e[i],n}function rg(t){let e,i=t[3].product.optionNames[0]+"",n;return{c(){e=x("label"),n=xe(i),S(e,"for","color"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,u){B(r,e,u),O(e,n)},p(r,u){u&8&&i!==(i=r[3].product.optionNames[0]+"")&&Ke(n,i)},d(r){r&&j(e)}}}function sg(t){let e,i=t[20]+"",n,r;return{c(){e=x("option"),n=xe(i),e.__value=r=t[20],Ye(e,e.__value)},m(u,d){B(u,e,d),O(e,n)},p(u,d){d&4&&i!==(i=u[20]+"")&&Ke(n,i),d&4&&r!==(r=u[20])&&(e.__value=r,Ye(e,e.__value))},d(u){u&&j(e)}}}function og(t){let e,i,n,r,u,d,a=t[3].product.optionNames[1]&&ag(t),s=Ne(t[2].optionValue2),c=[];for(let f=0;f<s.length;f+=1)c[f]=lg(ig(t,s,f));return{c(){e=x("div"),a&&a.c(),i=$(),n=x("select"),r=x("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Ye(r,r.__value),S(n,"id","size"),S(n,"class","mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),t[1].optionValue2===void 0&&Yt(()=>t[12].call(n))},m(f,o){B(f,e,o),a&&a.m(e,null),O(e,i),O(e,n),O(n,r);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(n,null);Mr(n,t[1].optionValue2,!0),u||(d=[oe(n,"change",t[12]),oe(n,"change",t[13])],u=!0)},p(f,o){if(f[3].product.optionNames[1]?a?a.p(f,o):(a=ag(f),a.c(),a.m(e,i)):a&&(a.d(1),a=null),o&4){s=Ne(f[2].optionValue2);let l;for(l=0;l<s.length;l+=1){const h=ig(f,s,l);c[l]?c[l].p(h,o):(c[l]=lg(h),c[l].c(),c[l].m(n,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=s.length}o&6&&Mr(n,f[1].optionValue2)},d(f){f&&j(e),a&&a.d(),Tt(c,f),u=!1,Be(d)}}}function ag(t){let e,i=t[3].product.optionNames[1]+"",n;return{c(){e=x("label"),n=xe(i),S(e,"for","size"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,u){B(r,e,u),O(e,n)},p(r,u){u&8&&i!==(i=r[3].product.optionNames[1]+"")&&Ke(n,i)},d(r){r&&j(e)}}}function lg(t){let e,i=t[20]+"",n,r;return{c(){e=x("option"),n=xe(i),e.__value=r=t[20],Ye(e,e.__value)},m(u,d){B(u,e,d),O(e,n)},p(u,d){d&4&&i!==(i=u[20]+"")&&Ke(n,i),d&4&&r!==(r=u[20])&&(e.__value=r,Ye(e,e.__value))},d(u){u&&j(e)}}}function cg(t){let e,i,n,r,u,d,a=t[3].product.optionNames[2]&&ug(t),s=Ne(t[2].optionValue3),c=[];for(let f=0;f<s.length;f+=1)c[f]=fg(tg(t,s,f));return{c(){e=x("div"),a&&a.c(),i=$(),n=x("select"),r=x("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Ye(r,r.__value),S(n,"id","option3"),S(n,"class","mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),t[1].optionValue3===void 0&&Yt(()=>t[14].call(n))},m(f,o){B(f,e,o),a&&a.m(e,null),O(e,i),O(e,n),O(n,r);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(n,null);Mr(n,t[1].optionValue3,!0),u||(d=[oe(n,"change",t[14]),oe(n,"change",t[15])],u=!0)},p(f,o){if(f[3].product.optionNames[2]?a?a.p(f,o):(a=ug(f),a.c(),a.m(e,i)):a&&(a.d(1),a=null),o&4){s=Ne(f[2].optionValue3);let l;for(l=0;l<s.length;l+=1){const h=tg(f,s,l);c[l]?c[l].p(h,o):(c[l]=fg(h),c[l].c(),c[l].m(n,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=s.length}o&6&&Mr(n,f[1].optionValue3)},d(f){f&&j(e),a&&a.d(),Tt(c,f),u=!1,Be(d)}}}function ug(t){let e,i=t[3].product.optionNames[2]+"",n;return{c(){e=x("label"),n=xe(i),S(e,"for","option3"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,u){B(r,e,u),O(e,n)},p(r,u){u&8&&i!==(i=r[3].product.optionNames[2]+"")&&Ke(n,i)},d(r){r&&j(e)}}}function fg(t){let e,i=t[20]+"",n,r;return{c(){e=x("option"),n=xe(i),e.__value=r=t[20],Ye(e,e.__value)},m(u,d){B(u,e,d),O(e,n)},p(u,d){d&4&&i!==(i=u[20]+"")&&Ke(n,i),d&4&&r!==(r=u[20])&&(e.__value=r,Ye(e,e.__value))},d(u){u&&j(e)}}}function hg(t){let e,i,n,r;return{c(){e=x("div"),i=x("button"),i.textContent="취소",S(i,"type","button"),S(i,"class","btn w-full")},m(u,d){B(u,e,d),O(e,i),n||(r=oe(i,"click",t[17]),n=!0)},p:ve,d(u){u&&j(e),n=!1,r()}}}function YP(t){var w;let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m=t[3].product.optionNames[0]&&rg(t),g=Ne(t[2].optionValue1),v=[];for(let C=0;C<g.length;C+=1)v[C]=sg(ng(t,g,C));let _=t[1].optionValue1&&og(t),b=t[1].optionValue2&&t[2].optionValue3.length>0&&cg(t),y=!((w=t[4])!=null&&w.length)&&hg(t);return{c(){e=x("div"),i=x("div"),n=x("div"),m&&m.c(),r=$(),u=x("select"),d=x("option"),d.textContent="선택하세요";for(let C=0;C<v.length;C+=1)v[C].c();a=$(),_&&_.c(),s=$(),b&&b.c(),c=$(),f=x("div"),o=x("button"),o.textContent="선택완료",l=$(),y&&y.c(),d.__value="",Ye(d,d.__value),S(u,"id","color"),S(u,"class","mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),t[1].optionValue1===void 0&&Yt(()=>t[10].call(u)),S(o,"type","button"),S(o,"class","btn primary-btn w-full"),S(i,"class","flex flex-col absolute top-1/2 left-1/2 transform -translate-xy-50 bg-white border w-full max-h-[400px] max-w-[400px] drop-shadow-lg h-full rounded-lg p-5 gap-3"),S(e,"class","flex absolute h-full w-full max-h-[100%] max-w-[100%] grow flex-col bg-white rounded bg-opacity-95 z-50 border")},m(C,T){B(C,e,T),O(e,i),O(i,n),m&&m.m(n,null),O(n,r),O(n,u),O(u,d);for(let E=0;E<v.length;E+=1)v[E]&&v[E].m(u,null);Mr(u,t[1].optionValue1,!0),O(i,a),_&&_.m(i,null),O(i,s),b&&b.m(i,null),O(i,c),O(i,f),O(f,o),O(i,l),y&&y.m(i,null),h||(p=[oe(u,"change",t[10]),oe(u,"change",t[11]),oe(o,"click",t[16])],h=!0)},p(C,[T]){var E;if(C[3].product.optionNames[0]?m?m.p(C,T):(m=rg(C),m.c(),m.m(n,r)):m&&(m.d(1),m=null),T&4){g=Ne(C[2].optionValue1);let A;for(A=0;A<g.length;A+=1){const F=ng(C,g,A);v[A]?v[A].p(F,T):(v[A]=sg(F),v[A].c(),v[A].m(u,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=g.length}T&6&&Mr(u,C[1].optionValue1),C[1].optionValue1?_?_.p(C,T):(_=og(C),_.c(),_.m(i,s)):_&&(_.d(1),_=null),C[1].optionValue2&&C[2].optionValue3.length>0?b?b.p(C,T):(b=cg(C),b.c(),b.m(i,c)):b&&(b.d(1),b=null),(E=C[4])!=null&&E.length?y&&(y.d(1),y=null):y?y.p(C,T):(y=hg(C),y.c(),y.m(i,null))},i:ve,o:ve,d(C){C&&j(e),m&&m.d(),Tt(v,C),_&&_.d(),b&&b.d(),y&&y.d(),h=!1,Be(p)}}}function $P(t,e,i){let n,r,u,d;Fe(t,Le,T=>i(3,r=T)),Fe(t,ca,T=>i(18,u=T)),Fe(t,Ai,T=>i(4,d=T));let{publishId:a}=e,{loadPublish:s}=e,{runEditor:c}=e;const f=u.linkOptions.reduce((T,E,A)=>{if(E.editorOptions){const F={...E.editorOptions,productNo:E.productNo,productOption:E.productOptions,publish:E.publish};T=[...T,F]}return T},[]);let o={optionValue1:[],optionValue2:[],optionValue3:[]},l={optionValue1:"",optionValue2:"",optionValue3:""};function h(T,E){const A=E.target.value;if(i(1,l[T]=A,l),T!=="optionValue3")for(let F=parseInt(T.slice(-1))+1;F<=3;F++)i(1,l[`optionValue${F}`]="",l);i(1,l={...l})}async function p(){i(7,a=n.publish),await s(),ye(Le,r.currentOption=n,r)}function m(){l.optionValue1=nl(this),i(1,l),i(2,o),i(1,l)}const g=T=>h("optionValue1",T);function v(){l.optionValue2=nl(this),i(1,l),i(2,o),i(1,l)}const _=T=>h("optionValue2",T);function b(){l.optionValue3=nl(this),i(1,l),i(2,o),i(1,l)}const y=T=>h("optionValue3",T),w=()=>p(),C=()=>i(0,c=!1);return t.$$set=T=>{"publishId"in T&&i(7,a=T.publishId),"loadPublish"in T&&i(8,s=T.loadPublish),"runEditor"in T&&i(0,c=T.runEditor)},t.$$.update=()=>{t.$$.dirty&2&&(l.optionValue1?i(2,o.optionValue2=[...new Set(f.filter(T=>T.optionValue1===l.optionValue1).map(T=>T.optionValue2))],o):i(2,o.optionValue2=[],o)),t.$$.dirty&2&&(l.optionValue1&&l.optionValue2?i(2,o.optionValue3=[...new Set(f.filter(T=>T.optionValue1===l.optionValue1&&T.optionValue2===l.optionValue2).map(T=>T.optionValue3).filter(Boolean))],o):i(2,o.optionValue3=[],o)),t.$$.dirty&2&&i(9,n=f.find(T=>T.optionValue1===l.optionValue1&&T.optionValue2===l.optionValue2&&(T.optionValue3===l.optionValue3||!T.optionValue3))),t.$$.dirty&512&&console.log("Selected Item:",n)},i(2,o.optionValue1=[...new Set(f.map(T=>T.optionValue1))],o),[c,l,o,r,d,h,p,a,s,n,m,g,v,_,b,y,w,C]}class GP extends Ve{constructor(e){super(),He(this,e,$P,YP,Ue,{publishId:7,loadPublish:8,runEditor:0})}}function qP(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w,C;return i=new Se({props:{icon:"file-icons:arttext4",height:"20"}}),a=new Se({props:{icon:"ph:upload-bold",height:"20"}}),l=new Se({props:{icon:"mingcute:text-2-fill",height:"20"}}),v=new Se({props:{icon:"ic:outline-draw",height:"20"}}),{c(){e=x("button"),de(i.$$.fragment),n=$(),r=x("span"),r.textContent="클립아트",u=$(),d=x("button"),de(a.$$.fragment),s=$(),c=x("span"),c.textContent="업로드",f=$(),o=x("button"),de(l.$$.fragment),h=$(),p=x("span"),p.textContent="텍스트",m=$(),g=x("button"),de(v.$$.fragment),_=$(),b=x("span"),b.textContent="도형/그리기",S(r,"class","whitespace-nowrap text-2xs hidden md:block"),S(e,"type","button"),S(e,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(c,"class","whitespace-nowrap text-2xs hidden md:block"),S(d,"type","button"),S(d,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(p,"class","whitespace-nowrap text-2xs hidden md:block"),S(o,"type","button"),S(o,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(b,"class","whitespace-nowrap text-2xs hidden md:block"),S(g,"type","button"),S(g,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded")},m(T,E){B(T,e,E),fe(i,e,null),O(e,n),O(e,r),B(T,u,E),B(T,d,E),fe(a,d,null),O(d,s),O(d,c),B(T,f,E),B(T,o,E),fe(l,o,null),O(o,h),O(o,p),B(T,m,E),B(T,g,E),fe(v,g,null),O(g,_),O(g,b),y=!0,w||(C=[oe(e,"click",t[1]),oe(d,"click",t[2]),oe(o,"click",t[3]),oe(g,"click",t[4])],w=!0)},p:ve,i(T){y||(L(i.$$.fragment,T),L(a.$$.fragment,T),L(l.$$.fragment,T),L(v.$$.fragment,T),y=!0)},o(T){W(i.$$.fragment,T),W(a.$$.fragment,T),W(l.$$.fragment,T),W(v.$$.fragment,T),y=!1},d(T){T&&(j(e),j(u),j(d),j(f),j(o),j(m),j(g)),he(i),he(a),he(l),he(v),w=!1,Be(C)}}}function KP(t,e,i){let n;return Fe(t,At,s=>i(0,n=s)),[n,()=>ye(At,n="clipart",n),()=>ye(At,n="upload",n),()=>ye(At,n="text",n),()=>ye(At,n="draw",n)]}class JP extends Ve{constructor(e){super(),He(this,e,KP,qP,Ue,{})}}function dg(t){let e,i,n,r,u,d,a,s,c,f=t[0].product.productName+"",o,l,h,p,m,g,v,_,b,y,w,C=t[0].currentOption&&pg(t);return{c(){e=x("div"),i=x("h2"),i.textContent="선택상품",n=$(),r=x("div"),u=x("img"),a=$(),s=x("div"),c=x("p"),o=xe(f),l=$(),C&&C.c(),h=$(),p=x("div"),m=x("button"),m.textContent="-",g=$(),v=x("input"),_=$(),b=x("button"),b.textContent="+",S(i,"class","text-xs border-b p-3"),$e(u.src,d=t[0].product.images[0].url)||S(u,"src",d),S(u,"alt","thumbnail"),S(u,"class","max-h-12 max-w-12 object-contain"),S(c,"class","text-xs grow"),S(s,"class","flex flex-col"),S(m,"type","button"),S(m,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(v,"type","text"),S(v,"class","border w-12 input-sm rounded-none"),S(b,"type","button"),S(b,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(p,"class","flex"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(T,E){B(T,e,E),O(e,i),O(e,n),O(e,r),O(r,u),O(r,a),O(r,s),O(s,c),O(c,o),O(s,l),C&&C.m(s,null),O(r,h),O(r,p),O(p,m),O(p,g),O(p,v),Ye(v,t[0].count),O(p,_),O(p,b),y||(w=[oe(m,"click",t[3]),oe(v,"input",t[4]),oe(b,"click",t[5])],y=!0)},p(T,E){E&1&&!$e(u.src,d=T[0].product.images[0].url)&&S(u,"src",d),E&1&&f!==(f=T[0].product.productName+"")&&Ke(o,f),T[0].currentOption?C?C.p(T,E):(C=pg(T),C.c(),C.m(s,null)):C&&(C.d(1),C=null),E&1&&v.value!==T[0].count&&Ye(v,T[0].count)},d(T){T&&j(e),C&&C.d(),y=!1,Be(w)}}}function pg(t){let e,i,n,r=t[0].currentOption.optionValue1&&gg(t),u=t[0].currentOption.optionValue2&&mg(t),d=t[0].currentOption.optionValue3&&vg(t);return{c(){e=x("p"),r&&r.c(),i=$(),u&&u.c(),n=$(),d&&d.c(),S(e,"class","text-xs grow mt-1 text-gray-500")},m(a,s){B(a,e,s),r&&r.m(e,null),O(e,i),u&&u.m(e,null),O(e,n),d&&d.m(e,null)},p(a,s){a[0].currentOption.optionValue1?r?r.p(a,s):(r=gg(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),a[0].currentOption.optionValue2?u?u.p(a,s):(u=mg(a),u.c(),u.m(e,n)):u&&(u.d(1),u=null),a[0].currentOption.optionValue3?d?d.p(a,s):(d=vg(a),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(a){a&&j(e),r&&r.d(),u&&u.d(),d&&d.d()}}}function gg(t){let e=t[0].currentOption.optionValue1+"",i;return{c(){i=xe(e)},m(n,r){B(n,i,r)},p(n,r){r&1&&e!==(e=n[0].currentOption.optionValue1+"")&&Ke(i,e)},d(n){n&&j(i)}}}function mg(t){let e,i=t[0].currentOption.optionValue2+"",n;return{c(){e=xe("/ "),n=xe(i)},m(r,u){B(r,e,u),B(r,n,u)},p(r,u){u&1&&i!==(i=r[0].currentOption.optionValue2+"")&&Ke(n,i)},d(r){r&&(j(e),j(n))}}}function vg(t){let e,i=t[0].currentOption.optionValue3+"",n;return{c(){e=xe("/ "),n=xe(i)},m(r,u){B(r,e,u),B(r,n,u)},p(r,u){u&1&&i!==(i=r[0].currentOption.optionValue3+"")&&Ke(n,i)},d(r){r&&(j(e),j(n))}}}function ZP(t){let e,i=t[0].product&&dg(t);return{c(){i&&i.c(),e=qe()},m(n,r){i&&i.m(n,r),B(n,e,r)},p(n,[r]){n[0].product?i?i.p(n,r):(i=dg(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ve,o:ve,d(n){n&&j(e),i&&i.d(n)}}}function QP(t,e,i){let n;Fe(t,Le,c=>i(0,n=c)),console.log(n);function r(){ye(Le,n.count++,n)}function u(){n.count>1&&ye(Le,n.count--,n)}const d=()=>u();function a(){n.count=this.value,Le.set(n)}return[n,r,u,d,a,()=>r()]}class eI extends Ve{constructor(e){super(),He(this,e,QP,ZP,Ue,{})}}function tI(t,{from:e,to:i},n={}){const r=getComputedStyle(t),u=r.transform==="none"?"":r.transform,[d,a]=r.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*d/i.width-(i.left+d),c=e.top+e.height*a/i.height-(i.top+a),{delay:f=0,duration:o=h=>Math.sqrt(h)*120,easing:l=au}=n;return{delay:f,duration:di(o)?o(Math.sqrt(s*s+c*c)):o,easing:l,css:(h,p)=>{const m=p*s,g=p*c,v=h+p*e.width/i.width,_=h+p*e.height/i.height;return`transform: ${u} translate(${m}px, ${g}px) scale(${v}, ${_});`}}}function _g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function ba(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?_g(Object(i),!0).forEach(function(n){Gr(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_g(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function Ps(t){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(t)}function Gr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function iI(t,e){if(t==null)return{};var i={},n=Object.keys(t),r,u;for(u=0;u<n.length;u++)r=n[u],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}function nI(t,e){if(t==null)return{};var i=iI(t,e),n,r;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(r=0;r<u.length;r++)n=u[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rI(t,e){return oI(t)||lI(t,e)||ef(t,e)||uI()}function gi(t){return sI(t)||aI(t)||ef(t)||cI()}function sI(t){if(Array.isArray(t))return Yc(t)}function oI(t){if(Array.isArray(t))return t}function aI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lI(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n=[],r=!0,u=!1,d,a;try{for(i=i.call(t);!(r=(d=i.next()).done)&&(n.push(d.value),!(e&&n.length===e));r=!0);}catch(s){u=!0,a=s}finally{try{!r&&i.return!=null&&i.return()}finally{if(u)throw a}}return n}}function ef(t,e){if(t){if(typeof t=="string")return Yc(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yc(t,e)}}function Yc(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function cI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ao(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=ef(t))||e&&t&&typeof t.length=="number"){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,d=!1,a;return{s:function(){i=i.call(t)},n:function(){var s=i.next();return u=s.done,s},e:function(s){d=!0,a=s},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(d)throw a}}}}var fI="finalize",hI="consider";function qr(t,e,i){t.dispatchEvent(new CustomEvent(fI,{detail:{items:e,info:i}}))}function vn(t,e,i){t.dispatchEvent(new CustomEvent(hI,{detail:{items:e,info:i}}))}var Ga="draggedEntered",lo="draggedLeft",qa="draggedOverIndex",tf="draggedLeftDocument",wa={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dI(t,e,i){t.dispatchEvent(new CustomEvent(Ga,{detail:{indexObj:e,draggedEl:i}}))}function pI(t,e,i){t.dispatchEvent(new CustomEvent(lo,{detail:{draggedEl:e,type:wa.LEFT_FOR_ANOTHER,theOtherDz:i}}))}function gI(t,e){t.dispatchEvent(new CustomEvent(lo,{detail:{draggedEl:e,type:wa.OUTSIDE_OF_ANY}}))}function mI(t,e,i){t.dispatchEvent(new CustomEvent(qa,{detail:{indexObj:e,draggedEl:i}}))}function vI(t){window.dispatchEvent(new CustomEvent(tf,{detail:{draggedEl:t}}))}var Xt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ga,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:qa,DRAGGED_LEFT:lo,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Zt={POINTER:"pointer",KEYBOARD:"keyboard"},Ka="isDndShadowItem",nf="data-is-dnd-shadow-item-internal",_I="data-is-dnd-shadow-item-hint",yI="id:dnd-shadow-placeholder-0000",bI="dnd-action-dragged-el",Pt="id",$c=0;function ay(){$c++}function ly(){if($c===0)throw new Error("Bug! trying to decrement when there are no dropzones");$c--}var rf=typeof window>"u";function Gc(t){var e,i=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){var u,d,a,s;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),u=+e[0],d=+e[5],a=+e[12],s=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),u=+e[0],d=+e[3],a=+e[4],s=+e[5];else return i;var c=n.transformOrigin,f=i.x-a-(1-u)*parseFloat(c),o=i.y-s-(1-d)*parseFloat(c.slice(c.indexOf(" ")+1)),l=u?i.width/u:t.offsetWidth,h=d?i.height/d:t.offsetHeight;return{x:f,y:o,width:l,height:h,top:o,right:f+l,bottom:o+h,left:f}}else return i}function cy(t){var e=Gc(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function uy(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function fy(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function wI(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ja(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Vs(t){return fy(uy(t))}function yg(t,e){var i=Vs(t),n=cy(e);return Ja(i,n)}function CI(t,e){var i=Vs(t),n=Vs(e);return wI(i,n)}function SI(t){var e=uy(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var Ir;function sf(){Ir=new Map}sf();function TI(t){var e=Array.from(t.children).findIndex(function(i){return i.getAttribute(nf)});if(e>=0)return Ir.has(t)||Ir.set(t,new Map),Ir.get(t).set(e,cy(t.children[e])),e}function EI(t,e){if(!yg(t,e))return null;var i=e.children;if(i.length===0)return{index:0,isProximityBased:!0};for(var n=TI(e),r=0;r<i.length;r++)if(yg(t,i[r])){var u=Ir.has(e)&&Ir.get(e).get(r);return u&&!Ja(Vs(t),u)?{index:n,isProximityBased:!1}:{index:r,isProximityBased:!1}}for(var d=Number.MAX_VALUE,a=void 0,s=0;s<i.length;s++){var c=CI(t,i[s]);c<d&&(d=c,a=s)}return{index:a,isProximityBased:!0}}function Mo(t){return JSON.stringify(t,null,2)}function Ca(t){if(!t)throw new Error("cannot get depth of a falsy node");return hy(t,0)}function hy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.parentElement?hy(t.parentElement,e+1):e-1}function OI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!{}.hasOwnProperty.call(e,i)||e[i]!==t[i])return!1;return!0}function kI(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var xI=200,bg=10,qc;function DI(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xI,n=arguments.length>3?arguments[3]:void 0,r,u,d=!1,a,s=Array.from(e).sort(function(f,o){return Ca(o)-Ca(f)});function c(){var f=Vs(t),o=n.multiScrollIfNeeded();if(!o&&a&&Math.abs(a.x-f.x)<bg&&Math.abs(a.y-f.y)<bg){qc=window.setTimeout(c,i);return}if(SI(t)){vI(t);return}a=f;var l=!1,h=ao(s),p;try{for(h.s();!(p=h.n()).done;){var m=p.value;o&&sf();var g=EI(t,m);if(g!==null){var v=g.index;l=!0,m!==r?(r&&pI(r,t,m),dI(m,g,t),r=m):v!==u&&(mI(m,g,t),u=v);break}}}catch(_){h.e(_)}finally{h.f()}!l&&d&&r?(gI(r,t),r=void 0,u=void 0,d=!1):d=!0,qc=window.setTimeout(c,i)}c()}function AI(){clearTimeout(qc),sf()}var ms=30;function PI(){var t;function e(){t={directionObj:void 0,stepPx:0}}e();function i(u){var d=t,a=d.directionObj,s=d.stepPx;a&&(u.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(function(){return i(u)}))}function n(u){return ms-u}function r(u,d){if(!d)return!1;var a=II(u,d);if(a===null)return e(),!1;var s=!!t.directionObj,c=!1,f=!1;return d.scrollHeight>d.clientHeight&&(a.bottom<ms?(c=!0,t.directionObj={x:0,y:1},t.stepPx=n(a.bottom)):a.top<ms&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=n(a.top)),!s&&c)||d.scrollWidth>d.clientWidth&&(a.right<ms?(f=!0,t.directionObj={x:1,y:0},t.stepPx=n(a.right)):a.left<ms&&(f=!0,t.directionObj={x:-1,y:0},t.stepPx=n(a.left)),!s&&f)?(i(d),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function II(t,e){var i=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Ja(t,i)?{top:t.y-i.top,bottom:i.bottom-t.y,left:t.x-i.left,right:i.right-t.x}:null}function RI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=FI(t),n=Array.from(i).sort(function(a,s){return Ca(s)-Ca(a)}),r=PI(),u=r.scrollIfNeeded;function d(){var a=e();if(!a||!n)return!1;for(var s=n.filter(function(o){return Ja(a,o.getBoundingClientRect())||o===document.scrollingElement}),c=0;c<s.length;c++){var f=u(a,s[c]);if(f)return!0}return!1}return{multiScrollIfNeeded:i.size>0?d:function(){return!1}}}function MI(t){if(!t)return[];for(var e=[],i=t;i;){var n=window.getComputedStyle(i),r=n.overflow;r.split(" ").some(function(u){return u.includes("auto")||u.includes("scroll")})&&e.push(i),i=i.parentElement}return e}function FI(t){var e=new Set,i=ao(t),n;try{for(i.s();!(n=i.n()).done;){var r=n.value;MI(r).forEach(function(u){return e.add(u)})}}catch(u){i.e(u)}finally{i.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function LI(t){var e=t.cloneNode(!0),i=[],n=t.tagName==="SELECT",r=n?[t]:gi(t.querySelectorAll("select")),u=ao(r),d;try{for(u.s();!(d=u.n()).done;){var a=d.value;i.push(a.value)}}catch(b){u.e(b)}finally{u.f()}if(r.length>0)for(var s=n?[e]:gi(e.querySelectorAll("select")),c=0;c<s.length;c++){var f=s[c],o=i[c],l=f.querySelector('option[value="'.concat(o,'"'));l&&l.setAttribute("selected",!0)}var h=t.tagName==="CANVAS",p=h?[t]:gi(t.querySelectorAll("canvas"));if(p.length>0)for(var m=h?[e]:gi(e.querySelectorAll("canvas")),g=0;g<m.length;g++){var v=p[g],_=m[g];_.width=v.width,_.height=v.height,_.getContext("2d").drawImage(v,0,0)}return e}var Xs=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),NI=Gr({},Xs.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function dy(t){if(!Xs[t])throw new Error("Can't get non existing feature flag ".concat(t,"! Supported flags: ").concat(Object.keys(Xs)));return NI[t]}var jI=.2;function Tn(t){return"".concat(t," ").concat(jI,"s ease")}function BI(t,e){var i=t.getBoundingClientRect(),n=LI(t);py(t,n),n.id=bI,n.style.position="fixed";var r=i.top,u=i.left;if(n.style.top="".concat(r,"px"),n.style.left="".concat(u,"px"),e){var d=fy(i);r-=d.y-e.y,u-=d.x-e.x,window.setTimeout(function(){n.style.top="".concat(r,"px"),n.style.left="".concat(u,"px")},0)}return n.style.margin="0",n.style.boxSizing="border-box",n.style.height="".concat(i.height,"px"),n.style.width="".concat(i.width,"px"),n.style.transition="".concat(Tn("top"),", ").concat(Tn("left"),", ").concat(Tn("background-color"),", ").concat(Tn("opacity"),", ").concat(Tn("color")," "),window.setTimeout(function(){return n.style.transition+=", ".concat(Tn("width"),", ").concat(Tn("height"))},0),n.style.zIndex="9999",n.style.cursor="grabbing",n}function UI(t){t.style.cursor="grab"}function zI(t,e,i,n){py(e,t);var r=e.getBoundingClientRect(),u=t.getBoundingClientRect(),d=r.width-u.width,a=r.height-u.height;if(d||a){var s={left:(i-u.left)/u.width,top:(n-u.top)/u.height};dy(Xs.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height="".concat(r.height,"px"),t.style.width="".concat(r.width,"px")),t.style.left="".concat(parseFloat(t.style.left)-s.left*d,"px"),t.style.top="".concat(parseFloat(t.style.top)-s.top*a,"px")}}function py(t,e){var i=window.getComputedStyle(t);Array.from(i).filter(function(n){return n.startsWith("background")||n.startsWith("padding")||n.startsWith("font")||n.startsWith("text")||n.startsWith("align")||n.startsWith("justify")||n.startsWith("display")||n.startsWith("flex")||n.startsWith("border")||n==="opacity"||n==="color"||n==="list-style-type"||dy(Xs.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(n==="width"||n==="height")}).forEach(function(n){return e.style.setProperty(n,i.getPropertyValue(n),i.getPropertyPriority(n))})}function WI(t,e){t.draggable=!1,t.ondragstart=function(){return!1},e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function gy(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function HI(t){t.style.visibility="hidden",t.setAttribute(nf,"true")}function VI(t){t.style.visibility="",t.removeAttribute(nf)}function Ko(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(n){var r=e(n);Object.keys(r).forEach(function(u){n.style[u]=r[u]}),i(n).forEach(function(u){return n.classList.add(u)})})}function Sa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(n){var r=e(n);Object.keys(r).forEach(function(u){n.style[u]=""}),i(n).forEach(function(u){return n.classList.contains(u)&&n.classList.remove(u)})})}function XI(t){var e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");var i=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=i}}var YI="--any--",$I=100,GI=20,wg=3,Cg={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Sg="data-is-dnd-original-dragged-item",ki,Ft,Jt,Za,lt,Qa,pn,Bt,on,ri,Pn=!1,of=!1,af,co=!1,Jo=[],Si=new Map,_t=new Map,Ql=new WeakMap;function qI(t,e){Si.has(e)||Si.set(e,new Set),Si.get(e).has(t)||(Si.get(e).add(t),ay())}function Tg(t,e){Si.get(e).delete(t),ly(),Si.get(e).size===0&&Si.delete(e)}function KI(){var t=Si.get(Za),e=ao(t),i;try{for(e.s();!(i=e.n()).done;){var n=i.value;n.addEventListener(Ga,my),n.addEventListener(lo,vy),n.addEventListener(qa,_y)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(tf,Kr);var r=Math.max.apply(Math,gi(Array.from(t.keys()).map(function(a){return _t.get(a).dropAnimationDurationMs}))),u=r===0?GI:Math.max(r,$I),d=RI(t,function(){return ri});DI(Ft,t,u*1.07,d)}function JI(){var t=Si.get(Za),e=ao(t),i;try{for(e.s();!(i=e.n()).done;){var n=i.value;n.removeEventListener(Ga,my),n.removeEventListener(lo,vy),n.removeEventListener(qa,_y)}}catch(r){e.e(r)}finally{e.f()}window.removeEventListener(tf,Kr),AI()}function el(t){return t.findIndex(function(e){return!!e[Ka]})}function ZI(t){var e;return ba(ba({},t),{},(e={},Gr(e,Ka,!0),Gr(e,Pt,yI),e))}function my(t){var e=_t.get(t.currentTarget),i=e.items,n=e.dropFromOthersDisabled;if(!(n&&t.currentTarget!==lt)){if(co=!1,i=i.filter(function(f){return f[Pt]!==pn[Pt]}),lt!==t.currentTarget){var r=_t.get(lt).items,u=r.filter(function(f){return!f[Ka]});vn(lt,u,{trigger:Xt.DRAGGED_ENTERED_ANOTHER,id:Jt[Pt],source:Zt.POINTER})}var d=t.detail.indexObj,a=d.index,s=d.isProximityBased,c=s&&a===t.currentTarget.children.length-1?a+1:a;Bt=t.currentTarget,i.splice(c,0,pn),vn(t.currentTarget,i,{trigger:Xt.DRAGGED_ENTERED,id:Jt[Pt],source:Zt.POINTER})}}function vy(t){if(Pn){var e=_t.get(t.currentTarget),i=e.items,n=e.dropFromOthersDisabled;if(!(n&&t.currentTarget!==lt&&t.currentTarget!==Bt)){var r=gi(i),u=el(r);u!==-1&&r.splice(u,1);var d=Bt;Bt=void 0;var a=t.detail,s=a.type,c=a.theOtherDz;if(s===wa.OUTSIDE_OF_ANY||s===wa.LEFT_FOR_ANOTHER&&c!==lt&&_t.get(c).dropFromOthersDisabled){co=!0,Bt=lt;var f=d===lt?r:gi(_t.get(lt).items);f.splice(Qa,0,pn),vn(lt,f,{trigger:Xt.DRAGGED_LEFT_ALL,id:Jt[Pt],source:Zt.POINTER})}vn(t.currentTarget,r,{trigger:Xt.DRAGGED_LEFT,id:Jt[Pt],source:Zt.POINTER})}}}function _y(t){var e=_t.get(t.currentTarget),i=e.items,n=e.dropFromOthersDisabled;if(!(n&&t.currentTarget!==lt)){var r=gi(i);co=!1;var u=t.detail.indexObj.index,d=el(r);d!==-1&&r.splice(d,1),r.splice(u,0,pn),vn(t.currentTarget,r,{trigger:Xt.DRAGGED_OVER_INDEX,id:Jt[Pt],source:Zt.POINTER})}}function Ta(t){t.preventDefault();var e=t.touches?t.touches[0]:t;ri={x:e.clientX,y:e.clientY},Ft.style.transform="translate3d(".concat(ri.x-on.x,"px, ").concat(ri.y-on.y,"px, 0)")}function Kr(){of=!0,window.removeEventListener("mousemove",Ta),window.removeEventListener("touchmove",Ta),window.removeEventListener("mouseup",Kr),window.removeEventListener("touchend",Kr),JI(),UI(Ft),Bt||(Bt=lt);var t=_t.get(Bt),e=t.items,i=t.type;Sa(Si.get(i),function(u){return _t.get(u).dropTargetStyle},function(u){return _t.get(u).dropTargetClasses});var n=el(e);n===-1&&Bt===lt&&(n=Qa),e=e.map(function(u){return u[Ka]?Jt:u});function r(){af(),qr(Bt,e,{trigger:co?Xt.DROPPED_OUTSIDE_OF_ANY:Xt.DROPPED_INTO_ZONE,id:Jt[Pt],source:Zt.POINTER}),Bt!==lt&&qr(lt,_t.get(lt).items,{trigger:Xt.DROPPED_INTO_ANOTHER,id:Jt[Pt],source:Zt.POINTER}),n!==-1&&VI(Bt.children[n]),tR()}QI(n,r)}function QI(t,e){var i=t>-1?Gc(Bt.children[t]):Gc(Bt),n={x:i.left-parseFloat(Ft.style.left),y:i.top-parseFloat(Ft.style.top)},r=_t.get(Bt),u=r.dropAnimationDurationMs,d="transform ".concat(u,"ms ease");Ft.style.transition=Ft.style.transition?Ft.style.transition+","+d:d,Ft.style.transform="translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)"),window.setTimeout(e,u)}function eR(t,e){Jo.push({dz:t,destroy:e}),window.requestAnimationFrame(function(){gy(t),document.body.appendChild(t)})}function tR(){Ft.remove(),ki.remove(),Jo.length&&(Jo.forEach(function(t){var e=t.dz,i=t.destroy;i(),e.remove()}),Jo=[]),Ft=void 0,ki=void 0,Jt=void 0,Za=void 0,lt=void 0,Qa=void 0,pn=void 0,Bt=void 0,on=void 0,ri=void 0,Pn=!1,of=!1,af=void 0,co=!1}function iR(t,e){var i=!1,n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Cg,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},r=new Map;function u(){window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function d(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){d(),ki=void 0,on=void 0,ri=void 0}function s(l){l.preventDefault();var h=l.touches?l.touches[0]:l;ri={x:h.clientX,y:h.clientY},(Math.abs(ri.x-on.x)>=wg||Math.abs(ri.y-on.y)>=wg)&&(d(),f())}function c(l){if(!(l.target!==l.currentTarget&&(l.target.value!==void 0||l.target.isContentEditable))&&!l.button&&!Pn){l.stopPropagation();var h=l.touches?l.touches[0]:l;on={x:h.clientX,y:h.clientY},ri=ba({},on),ki=l.currentTarget,u()}}function f(){Pn=!0;var l=r.get(ki);Qa=l,lt=ki.parentElement;var h=lt.closest("dialog")||lt.getRootNode(),p=h.body||h,m=n.items,g=n.type,v=n.centreDraggedOnCursor,_=gi(m);Jt=_[l],Za=g,pn=ZI(Jt),Ft=BI(ki,v&&ri),ki.setAttribute(Sg,!0);function b(){Ft.parentElement?window.requestAnimationFrame(b):(p.appendChild(Ft),Ft.focus(),KI(),gy(ki),p.appendChild(ki),pn[Pt]=Jt[Pt])}window.requestAnimationFrame(b),Ko(Array.from(Si.get(n.type)).filter(function(y){return y===lt||!_t.get(y).dropFromOthersDisabled}),function(y){return _t.get(y).dropTargetStyle},function(y){return _t.get(y).dropTargetClasses}),_.splice(l,1,pn),af=XI(lt),vn(lt,_,{trigger:Xt.DRAG_STARTED,id:Jt[Pt],source:Zt.POINTER}),window.addEventListener("mousemove",Ta,{passive:!1}),window.addEventListener("touchmove",Ta,{passive:!1,capture:!1}),window.addEventListener("mouseup",Kr,{passive:!1}),window.addEventListener("touchend",Kr,{passive:!1})}function o(l){var h=l.items,p=h===void 0?void 0:h,m=l.flipDurationMs,g=m===void 0?0:m,v=l.type,_=v===void 0?YI:v,b=l.dragDisabled,y=b===void 0?!1:b,w=l.morphDisabled,C=w===void 0?!1:w,T=l.dropFromOthersDisabled,E=T===void 0?!1:T,A=l.dropTargetStyle,F=A===void 0?Cg:A,G=l.dropTargetClasses,Y=G===void 0?[]:G,Q=l.transformDraggedElement,q=Q===void 0?function(){}:Q,N=l.centreDraggedOnCursor,V=N===void 0?!1:N;n.dropAnimationDurationMs=g,n.type&&_!==n.type&&Tg(t,n.type),n.type=_,n.items=gi(p),n.dragDisabled=y,n.morphDisabled=C,n.transformDraggedElement=q,n.centreDraggedOnCursor=V,i&&Pn&&!of&&(!OI(F,n.dropTargetStyle)||!kI(Y,n.dropTargetClasses))&&(Sa([t],function(){return n.dropTargetStyle},function(){return Y}),Ko([t],function(){return F},function(){return Y})),n.dropTargetStyle=F,n.dropTargetClasses=gi(Y);function ee(R,M){return _t.get(R)?_t.get(R)[M]:n[M]}i&&Pn&&n.dropFromOthersDisabled!==E&&(E?Sa([t],function(R){return ee(R,"dropTargetStyle")},function(R){return ee(R,"dropTargetClasses")}):Ko([t],function(R){return ee(R,"dropTargetStyle")},function(R){return ee(R,"dropTargetClasses")})),n.dropFromOthersDisabled=E,_t.set(t,n),qI(t,_);for(var te=el(n.items),k=0;k<t.children.length;k++){var P=t.children[k];if(WI(P,y),k===te){n.transformDraggedElement(Ft,Jt,k),C||zI(Ft,P,ri.x,ri.y),HI(P);continue}P.removeEventListener("mousedown",Ql.get(P)),P.removeEventListener("touchstart",Ql.get(P)),y||(P.addEventListener("mousedown",c),P.addEventListener("touchstart",c),Ql.set(P,c)),r.set(P,k),i||(i=!0)}}return o(e),{update:function(h){o(h)},destroy:function(){function h(){Tg(t,_t.get(t).type),_t.delete(t)}Pn&&!t.closest("[".concat(Sg,"]"))?eR(t,h):h()}}}var Fo,Kc={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},yy=(Fo={},Gr(Fo,Kc.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Gr(Fo,Kc.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Fo),nR="dnd-action-aria-alert",vt;function Jc(){vt||(vt=document.createElement("div"),function(){vt.id=nR,vt.style.position="fixed",vt.style.bottom="0",vt.style.left="0",vt.style.zIndex="-5",vt.style.opacity="0",vt.style.height="0",vt.style.width="0",vt.setAttribute("role","alert")}(),document.body.prepend(vt),Object.entries(yy).forEach(function(t){var e=rI(t,2),i=e[0],n=e[1];return document.body.prepend(oR(i,n))}))}function rR(){return rf?null:(document.readyState==="complete"?Jc():window.addEventListener("DOMContentLoaded",Jc),ba({},Kc))}function sR(){rf||!vt||(Object.keys(yy).forEach(function(t){var e;return(e=document.getElementById(t))===null||e===void 0?void 0:e.remove()}),vt.remove(),vt=void 0)}function oR(t,e){var i=document.createElement("div");return i.id=t,i.innerHTML="<p>".concat(e,"</p>"),i.style.display="none",i.style.position="fixed",i.style.zIndex="-5",i}function Rr(t){if(!rf){vt||Jc(),vt.innerHTML="";var e=document.createTextNode(t);vt.appendChild(e),vt.style.display="none",vt.style.display="inline"}}var aR="--any--",Eg={outline:"rgba(255, 255, 102, 0.7) solid 2px"},fi=!1,Zc,Ut,Wn="",xn,Pi,fn="",Ea=new WeakSet,Og=new WeakMap,kg=new WeakMap,Qc=new Map,Mt=new Map,wi=new Map,Oa;function lR(t,e){wi.size===0&&(Oa=rR(),window.addEventListener("keydown",by),window.addEventListener("click",wy)),wi.has(e)||wi.set(e,new Set),wi.get(e).has(t)||(wi.get(e).add(t),ay())}function xg(t,e){Ut===t&&Ys(),wi.get(e).delete(t),ly(),wi.get(e).size===0&&wi.delete(e),wi.size===0&&(window.removeEventListener("keydown",by),window.removeEventListener("click",wy),Oa=void 0,sR())}function by(t){if(fi)switch(t.key){case"Escape":{Ys();break}}}function wy(){fi&&(Ea.has(document.activeElement)||Ys())}function cR(t){if(fi){var e=t.currentTarget;if(e!==Ut){Wn=e.getAttribute("aria-label")||"";var i=Mt.get(Ut),n=i.items,r=n.find(function(o){return o[Pt]===Pi}),u=n.indexOf(r),d=n.splice(u,1)[0],a=Mt.get(e),s=a.items,c=a.autoAriaDisabled;e.getBoundingClientRect().top<Ut.getBoundingClientRect().top||e.getBoundingClientRect().left<Ut.getBoundingClientRect().left?(s.push(d),c||Rr("Moved item ".concat(fn," to the end of the list ").concat(Wn))):(s.unshift(d),c||Rr("Moved item ".concat(fn," to the beginning of the list ").concat(Wn)));var f=Ut;qr(f,n,{trigger:Xt.DROPPED_INTO_ANOTHER,id:Pi,source:Zt.KEYBOARD}),qr(e,s,{trigger:Xt.DROPPED_INTO_ZONE,id:Pi,source:Zt.KEYBOARD}),Ut=e}}}function Cy(){Qc.forEach(function(t,e){var i=t.update;return i(Mt.get(e))})}function Ys(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Mt.get(Ut).autoAriaDisabled||Rr("Stopped dragging item ".concat(fn)),Ea.has(document.activeElement)&&document.activeElement.blur(),t&&vn(Ut,Mt.get(Ut).items,{trigger:Xt.DRAG_STOPPED,id:Pi,source:Zt.KEYBOARD}),Sa(wi.get(Zc),function(e){return Mt.get(e).dropTargetStyle},function(e){return Mt.get(e).dropTargetClasses}),xn=null,Pi=null,fn="",Zc=null,Ut=null,Wn="",fi=!1,Cy()}function uR(t,e){var i={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Eg,dropTargetClasses:[],autoAriaDisabled:!1};function n(f,o,l){f.length<=1||f.splice(l,1,f.splice(o,1,f[l])[0])}function r(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!Ea.has(f.target))return;f.preventDefault(),f.stopPropagation(),fi?Ys():u(f);break}case"ArrowDown":case"ArrowRight":{if(!fi)return;f.preventDefault(),f.stopPropagation();var o=Mt.get(t),l=o.items,h=Array.from(t.children),p=h.indexOf(f.currentTarget);p<h.length-1&&(i.autoAriaDisabled||Rr("Moved item ".concat(fn," to position ").concat(p+2," in the list ").concat(Wn)),n(l,p,p+1),qr(t,l,{trigger:Xt.DROPPED_INTO_ZONE,id:Pi,source:Zt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!fi)return;f.preventDefault(),f.stopPropagation();var m=Mt.get(t),g=m.items,v=Array.from(t.children),_=v.indexOf(f.currentTarget);_>0&&(i.autoAriaDisabled||Rr("Moved item ".concat(fn," to position ").concat(_," in the list ").concat(Wn)),n(g,_,_-1),qr(t,g,{trigger:Xt.DROPPED_INTO_ZONE,id:Pi,source:Zt.KEYBOARD}));break}}}function u(f){a(f.currentTarget),Ut=t,Zc=i.type,fi=!0;var o=Array.from(wi.get(i.type)).filter(function(h){return h===Ut||!Mt.get(h).dropFromOthersDisabled});if(Ko(o,function(h){return Mt.get(h).dropTargetStyle},function(h){return Mt.get(h).dropTargetClasses}),!i.autoAriaDisabled){var l="Started dragging item ".concat(fn,". Use the arrow keys to move it within its list ").concat(Wn);o.length>1&&(l+=", or tab to another list in order to move the item into it"),Rr(l)}vn(t,Mt.get(t).items,{trigger:Xt.DRAG_STARTED,id:Pi,source:Zt.KEYBOARD}),Cy()}function d(f){fi&&f.currentTarget!==xn&&(f.stopPropagation(),Ys(!1),u(f))}function a(f){var o=Mt.get(t),l=o.items,h=Array.from(t.children),p=h.indexOf(f);xn=f,xn.tabIndex=i.zoneItemTabIndex,Pi=l[p][Pt],fn=h[p].getAttribute("aria-label")||""}function s(f){var o=f.items,l=o===void 0?[]:o,h=f.type,p=h===void 0?aR:h,m=f.dragDisabled,g=m===void 0?!1:m,v=f.zoneTabIndex,_=v===void 0?0:v,b=f.zoneItemTabIndex,y=b===void 0?0:b,w=f.dropFromOthersDisabled,C=w===void 0?!1:w,T=f.dropTargetStyle,E=T===void 0?Eg:T,A=f.dropTargetClasses,F=A===void 0?[]:A,G=f.autoAriaDisabled,Y=G===void 0?!1:G;i.items=gi(l),i.dragDisabled=g,i.dropFromOthersDisabled=C,i.zoneTabIndex=_,i.zoneItemTabIndex=y,i.dropTargetStyle=E,i.dropTargetClasses=F,i.autoAriaDisabled=Y,i.type&&p!==i.type&&xg(t,i.type),i.type=p,lR(t,p),Y||(t.setAttribute("aria-disabled",g),t.setAttribute("role","list"),t.setAttribute("aria-describedby",g?Oa.DND_ZONE_DRAG_DISABLED:Oa.DND_ZONE_ACTIVE)),Mt.set(t,i),fi?t.tabIndex=t===Ut||xn.contains(t)||i.dropFromOthersDisabled||Ut&&i.type!==Mt.get(Ut).type?-1:0:t.tabIndex=i.zoneTabIndex,t.addEventListener("focus",cR);for(var Q=function(V){var ee=t.children[V];Ea.add(ee),ee.tabIndex=fi?-1:i.zoneItemTabIndex,Y||ee.setAttribute("role","listitem"),ee.removeEventListener("keydown",Og.get(ee)),ee.removeEventListener("click",kg.get(ee)),g||(ee.addEventListener("keydown",r),Og.set(ee,r),ee.addEventListener("click",d),kg.set(ee,d)),fi&&i.items[V][Pt]===Pi&&(xn=ee,xn.tabIndex=i.zoneItemTabIndex,ee.focus())},q=0;q<t.children.length;q++)Q(q)}s(e);var c={update:function(o){s(o)},destroy:function(){xg(t,i.type),Mt.delete(t),Qc.delete(t)}};return Qc.set(t,c),c}var fR=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function hR(t,e){if(dR(t))return{update:function(){},destroy:function(){}};Dg(e);var i=iR(t,e),n=uR(t,e);return{update:function(u){Dg(u),i.update(u),n.update(u)},destroy:function(){i.destroy(),n.destroy()}}}function dR(t){return!!t.closest("[".concat(_I,'="true"]'))}function Dg(t){var e=t.items;t.flipDurationMs,t.type,t.dragDisabled,t.morphDisabled,t.dropFromOthersDisabled;var i=t.zoneTabIndex,n=t.zoneItemTabIndex;t.dropTargetStyle;var r=t.dropTargetClasses;t.transformDraggedElement,t.autoAriaDisabled,t.centreDraggedOnCursor;var u=nI(t,fR);if(Object.keys(u).length>0&&console.warn("dndzone will ignore unknown options",u),!e)throw new Error("no 'items' key provided to dndzone");var d=e.find(function(a){return!{}.hasOwnProperty.call(a,Pt)});if(d)throw new Error("missing '".concat(Pt,"' property for item ").concat(Mo(d)));if(r&&!Array.isArray(r))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Ps(r),", ").concat(Mo(r)));if(i&&!Ag(i))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Ps(i),", ").concat(Mo(i)));if(n&&!Ag(n))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Ps(n),", ").concat(Mo(n)))}function Ag(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function pR(t){function e(i){var n=i.target;if(n.matches(t)){var r;switch(i.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;case"touchcancel":r="mouseup";break;default:return}var u=i.changedTouches[0],d=u.clientX,a=u.pageX,s=window.pageXOffset,c=u.clientY,f=u.pageY,o=window.pageYOffset;a===0&&Math.floor(d)>Math.floor(a)||f===0&&Math.floor(c)>Math.floor(f)?(d-=s,c-=o):(d<a-s||c<f-o)&&(d=a-s,c=f-o);var l=new MouseEvent(r,{bubbles:!0,cancelable:!0,screenX:u.screenX,screenY:u.screenY,clientX:d,clientY:c,pageX:a,pageY:f,buttons:1,button:0,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:i.metaKey});u.target.dispatchEvent(l)}}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}function Pg(t,e,i){const n=t.slice();return n[10]=e[i],n}function Ig(t){let e,i,n,r,u,d=[],a=new Map,s,c,f,o,l=Ne(t[1]);const h=p=>p[10].id;for(let p=0;p<l.length;p+=1){let m=Pg(t,l,p),g=h(m);a.set(g,d[p]=Ng(g,m))}return{c(){e=x("div"),i=x("h2"),i.textContent="레이어",n=$(),r=x("div"),u=x("div");for(let p=0;p<d.length;p+=1)d[p].c();S(i,"class","text-xs border-b p-3"),S(u,"class","sortable space-y-2 w-full svelte-tzic9t"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(p,m){B(p,e,m),O(e,i),O(e,n),O(e,r),O(r,u);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(u,null);c=!0,f||(o=[wm(s=hR.call(null,u,{items:t[1],flipDurationMs:eu})),oe(u,"consider",t[2]),oe(u,"finalize",t[3])],f=!0)},p(p,m){if(m&51){l=Ne(p[1]),Te();for(let g=0;g<d.length;g+=1)d[g].r();d=Mm(d,m,h,1,p,l,a,u,$y,Ng,null,Pg);for(let g=0;g<d.length;g+=1)d[g].a();Ee()}s&&di(s.update)&&m&2&&s.update.call(null,{items:p[1],flipDurationMs:eu})},i(p){if(!c){for(let m=0;m<l.length;m+=1)L(d[m]);c=!0}},o(p){for(let m=0;m<d.length;m+=1)W(d[m]);c=!1},d(p){p&&j(e);for(let m=0;m<d.length;m+=1)d[m].d();f=!1,Be(o)}}}function gR(t){let e,i,n,r,u=t[10].type==="ellipse"&&Rg(),d=t[10].type==="triangle"&&Mg(),a=t[10].type==="rectangle"&&Fg();return{c(){u&&u.c(),e=$(),d&&d.c(),i=$(),a&&a.c(),n=qe()},m(s,c){u&&u.m(s,c),B(s,e,c),d&&d.m(s,c),B(s,i,c),a&&a.m(s,c),B(s,n,c),r=!0},p(s,c){s[10].type==="ellipse"?u?c&2&&L(u,1):(u=Rg(),u.c(),L(u,1),u.m(e.parentNode,e)):u&&(Te(),W(u,1,1,()=>{u=null}),Ee()),s[10].type==="triangle"?d?c&2&&L(d,1):(d=Mg(),d.c(),L(d,1),d.m(i.parentNode,i)):d&&(Te(),W(d,1,1,()=>{d=null}),Ee()),s[10].type==="rectangle"?a?c&2&&L(a,1):(a=Fg(),a.c(),L(a,1),a.m(n.parentNode,n)):a&&(Te(),W(a,1,1,()=>{a=null}),Ee())},i(s){r||(L(u),L(d),L(a),r=!0)},o(s){W(u),W(d),W(a),r=!1},d(s){s&&(j(e),j(i),j(n)),u&&u.d(s),d&&d.d(s),a&&a.d(s)}}}function mR(t){let e,i,n;return i=new Se({props:{icon:"streamline:hand-held-tablet-drawing"}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,u){B(r,e,u),fe(i,e,null),n=!0},p:ve,i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){W(i.$$.fragment,r),n=!1},d(r){r&&j(e),he(i)}}}function vR(t){let e,i=t[10].thumbnail&&Lg(t);return{c(){e=x("div"),i&&i.c(),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(n,r){B(n,e,r),i&&i.m(e,null)},p(n,r){n[10].thumbnail?i?i.p(n,r):(i=Lg(n),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:ve,o:ve,d(n){n&&j(e),i&&i.d()}}}function _R(t){let e,i=t[10].text+"",n;return{c(){e=x("div"),n=xe(i),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center truncate ")},m(r,u){B(r,e,u),O(e,n)},p(r,u){u&2&&i!==(i=r[10].text+"")&&Ke(n,i)},i:ve,o:ve,d(r){r&&j(e)}}}function yR(t){let e,i,n;return{c(){e=x("div"),i=x("img"),$e(i.src,n=t[10].convert.url)||S(i,"src",n),S(i,"class","object-contain"),S(i,"alt",""),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,u){B(r,e,u),O(e,i)},p(r,u){u&2&&!$e(i.src,n=r[10].convert.url)&&S(i,"src",n)},i:ve,o:ve,d(r){r&&j(e)}}}function Rg(t){let e,i,n;return i=new Se({props:{icon:"material-symbols:circle-outline"}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,u){B(r,e,u),fe(i,e,null),n=!0},i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){W(i.$$.fragment,r),n=!1},d(r){r&&j(e),he(i)}}}function Mg(t){let e,i,n;return i=new Se({props:{icon:"uil:triangle"}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,u){B(r,e,u),fe(i,e,null),n=!0},i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){W(i.$$.fragment,r),n=!1},d(r){r&&j(e),he(i)}}}function Fg(t){let e,i,n;return i=new Se({props:{icon:"material-symbols:rectangle-outline"}}),{c(){e=x("div"),de(i.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,u){B(r,e,u),fe(i,e,null),n=!0},i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){W(i.$$.fragment,r),n=!1},d(r){r&&j(e),he(i)}}}function Lg(t){let e,i;return{c(){e=x("img"),$e(e.src,i=t[10].thumbnail.url)||S(e,"src",i),S(e,"class","object-contain"),S(e,"alt","")},m(n,r){B(n,e,r)},p(n,r){r&2&&!$e(e.src,i=n[10].thumbnail.url)&&S(e,"src",i)},d(n){n&&j(e)}}}function Ng(t,e){let i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v=ve,_,b,y;const w=[yR,_R,vR,mR,gR],C=[];function T(F,G){return F[10].objType==="clipart"?0:F[10].objType==="text"?1:F[10].objType==="upload"?2:F[10].type==="path"?3:F[10].objType==="shape"?4:-1}~(n=T(e))&&(r=C[n]=w[n](e)),a=new Se({props:{icon:"fluent:select-object-20-filled",class:"pointer-events-none",height:"30"}});function E(){return e[8](e[10])}f=new Se({props:{icon:"mi:select",class:"pointer-events-none",height:"30"}}),h=new Se({props:{icon:"mi:delete",class:"pointer-events-none",height:"30"}});function A(){return e[9](e[10])}return{key:t,first:null,c(){i=x("div"),r&&r.c(),u=$(),d=x("button"),de(a.$$.fragment),s=$(),c=x("div"),de(f.$$.fragment),o=$(),l=x("button"),de(h.$$.fragment),p=$(),S(d,"class","select-button"),S(c,"class","move-button"),S(l,"class","delete-button"),S(i,"class",m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"),this.first=i},m(F,G){B(F,i,G),~n&&C[n].m(i,null),O(i,u),O(i,d),fe(a,d,null),O(i,s),O(i,c),fe(f,c,null),O(i,o),O(i,l),fe(h,l,null),O(i,p),_=!0,b||(y=[oe(d,"click",E),oe(l,"click",A)],b=!0)},p(F,G){e=F;let Y=n;n=T(e),n===Y?~n&&C[n].p(e,G):(r&&(Te(),W(C[Y],1,1,()=>{C[Y]=null}),Ee()),~n?(r=C[n],r?r.p(e,G):(r=C[n]=w[n](e),r.c()),L(r,1),r.m(i,u)):r=null),(!_||G&3&&m!==(m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"))&&S(i,"class",m)},r(){g=i.getBoundingClientRect()},f(){By(i),v()},a(){v(),v=jy(i,g,tI,{duration:eu})},i(F){_||(L(r),L(a.$$.fragment,F),L(f.$$.fragment,F),L(h.$$.fragment,F),_=!0)},o(F){W(r),W(a.$$.fragment,F),W(f.$$.fragment,F),W(h.$$.fragment,F),_=!1},d(F){F&&j(i),~n&&C[n].d(),he(a),he(f),he(h),b=!1,Be(y)}}}function bR(t){var r;let e,i,n=((r=t[1])==null?void 0:r.length)&&Ig(t);return{c(){n&&n.c(),e=qe()},m(u,d){n&&n.m(u,d),B(u,e,d),i=!0},p(u,[d]){var a;(a=u[1])!=null&&a.length?n?(n.p(u,d),d&2&&L(n,1)):(n=Ig(u),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),W(n,1,1,()=>{n=null}),Ee())},i(u){i||(L(n),i=!0)},o(u){W(n),i=!1},d(u){u&&j(e),n&&n.d(u)}}}const eu=300;function wR(t,e,i){let n,r,u;Fe(t,Nm,h=>i(6,r=h)),Fe(t,In,h=>i(7,u=h));let d="";function a(h){i(1,n=h.detail.items)}function s(h){rb(h.detail.items.reverse())}function c(h){lb(h)}function f(h){cb(h)}_n(()=>{pR(".move-button")});const o=h=>c(h),l=h=>f(h);return t.$$.update=()=>{t.$$.dirty&128&&(u?i(0,d=u[0].id):i(0,d="")),t.$$.dirty&64&&i(1,n=r.reverse())},[d,n,a,s,c,f,r,u,o,l]}class CR extends Ve{constructor(e){super(),He(this,e,wR,bR,Ue,{})}}function jg(t,e,i){const n=t.slice();return n[18]=e[i],n[19]=e,n[20]=i,n}function Bg(t,e,i){const n=t.slice();return n[21]=e[i],n}function Ug(t,e,i){const n=t.slice();return n[24]=e[i],n}function zg(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v;d=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let _=Ne(t[2]),b=[];for(let w=0;w<_.length;w+=1)b[w]=Gg(jg(t,_,w));const y=w=>W(b[w],1,1,()=>{b[w]=null});return{c(){e=x("div"),i=x("div"),n=x("h2"),r=xe(`주문하기\r
        `),u=x("button"),de(d.$$.fragment),a=$(),s=x("div");for(let w=0;w<b.length;w+=1)b[w].c();c=$(),f=x("div"),o=x("button"),o.textContent="주문하기",l=$(),h=x("button"),h.textContent="닫기",S(u,"class","absolute right-2"),S(u,"type","button"),S(n,"class","primary-bg rounded font-semibold p-3 text-center relative items-center flex w-full border-b"),S(o,"type","button"),S(o,"class","btn md:btn-lg primary-btn"),S(h,"type","button"),S(h,"class","btn md:btn-lg secondary-btn"),S(f,"class","p-3 flex justify-center gap-2"),S(s,"class","grow overflow-y-hidden h-full flex flex-col mt-3 gap-3"),S(i,"class","max-h-full w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-4668qx")},m(w,C){B(w,e,C),O(e,i),O(i,n),O(n,r),O(n,u),fe(d,u,null),O(i,a),O(i,s);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(s,null);O(s,c),O(s,f),O(f,o),O(f,l),O(f,h),m=!0,g||(v=[oe(u,"click",Fr),oe(o,"click",t[16]),oe(h,"click",Fr),oe(e,"introstart",t[9]),oe(e,"outroend",t[10])],g=!0)},p(w,C){if(C&252){_=Ne(w[2]);let T;for(T=0;T<_.length;T+=1){const E=jg(w,_,T);b[T]?(b[T].p(E,C),L(b[T],1)):(b[T]=Gg(E),b[T].c(),L(b[T],1),b[T].m(s,c))}for(Te(),T=_.length;T<b.length;T+=1)y(T);Ee()}},i(w){if(!m){L(d.$$.fragment,w);for(let C=0;C<_.length;C+=1)L(b[C]);w&&Yt(()=>{m&&(p||(p=Qt(e,ra,{y:50},!0)),p.run(1))}),m=!0}},o(w){W(d.$$.fragment,w),b=b.filter(Boolean);for(let C=0;C<b.length;C+=1)W(b[C]);w&&(p||(p=Qt(e,ra,{y:50},!1)),p.run(0)),m=!1},d(w){w&&j(e),he(d),Tt(b,w),w&&p&&p.end(),g=!1,Be(v)}}}function Wg(t){let e,i,n;return{c(){e=x("img"),$e(e.src,i=t[24].url)||S(e,"src",i),S(e,"alt",n=t[18].product.productName),S(e,"class","max-w-16 md:max-w-24 max-h-16 md:max-h-24 object-contain border rounded")},m(r,u){B(r,e,u)},p(r,u){u&4&&!$e(e.src,i=r[24].url)&&S(e,"src",i),u&4&&n!==(n=r[18].product.productName)&&S(e,"alt",n)},d(r){r&&j(e)}}}function Hg(t){let e=t[18].currentOption.optionValue1+"",i;return{c(){i=xe(e)},m(n,r){B(n,i,r)},p(n,r){r&4&&e!==(e=n[18].currentOption.optionValue1+"")&&Ke(i,e)},d(n){n&&j(i)}}}function Vg(t){let e,i=t[18].currentOption.optionValue2+"",n;return{c(){e=xe("/ "),n=xe(i)},m(r,u){B(r,e,u),B(r,n,u)},p(r,u){u&4&&i!==(i=r[18].currentOption.optionValue2+"")&&Ke(n,i)},d(r){r&&(j(e),j(n))}}}function Xg(t){let e,i=t[18].currentOption.optionValue3+"",n;return{c(){e=xe("/ "),n=xe(i)},m(r,u){B(r,e,u),B(r,n,u)},p(r,u){u&4&&i!==(i=r[18].currentOption.optionValue3+"")&&Ke(n,i)},d(r){r&&(j(e),j(n))}}}function SR(t){let e,i,n;function r(){return t[11](t[20])}return{c(){e=x("button"),e.textContent="편집하기",S(e,"type","button"),S(e,"class","btn primary-btn")},m(u,d){B(u,e,d),i||(n=oe(e,"click",r),i=!0)},p(u,d){t=u},d(u){u&&j(e),i=!1,n()}}}function TR(t){let e;return{c(){e=x("button"),e.textContent="편집중",S(e,"type","button"),S(e,"class","btn secondary-btn")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function Yg(t){let e,i=Ne(t[18].thumbnails),n=[];for(let r=0;r<i.length;r+=1)n[r]=$g(Bg(t,i,r));return{c(){e=x("div");for(let r=0;r<n.length;r+=1)n[r].c();S(e,"class","flex items-center gap-2 max-w-full overflow-x-auto")},m(r,u){B(r,e,u);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(r,u){if(u&4){i=Ne(r[18].thumbnails);let d;for(d=0;d<i.length;d+=1){const a=Bg(r,i,d);n[d]?n[d].p(a,u):(n[d]=$g(a),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function $g(t){let e,i;return{c(){e=x("img"),$e(e.src,i=t[21].url)||S(e,"src",i),S(e,"alt",""),S(e,"class","object-contain max-w-16 max-h-16 md:max-w-24 md:max-h-24 rounded border")},m(n,r){B(n,e,r)},p(n,r){r&4&&!$e(e.src,i=n[21].url)&&S(e,"src",i)},d(n){n&&j(e)}}}function Gg(t){var H;let e,i,n,r,u,d,a,s=t[18].product.productName+"",c,f,o,l,h,p,m,g,v,_,b,y,w,C,T,E,A,F,G,Y,Q,q,N,V,ee=Ne(t[18].product.images),te=[];for(let se=0;se<ee.length;se+=1)te[se]=Wg(Ug(t,ee,se));let k=t[18].currentOption.optionValue1&&Hg(t),P=t[18].currentOption.optionValue2&&Vg(t),R=t[18].currentOption.optionValue3&&Xg(t);function M(se,pe){return se[20]===se[3]?TR:SR}let K=M(t),I=K(t);function D(){return t[12](t[20])}function z(){t[13].call(C,t[19],t[20])}function J(){return t[14](t[20])}Y=new Se({props:{icon:"mi:delete",height:15}});function ne(){return t[15](t[20])}let Z=((H=t[18].thumbnails)==null?void 0:H.length)&&Yg(t);return{c(){e=x("div"),i=x("div"),n=x("div"),r=x("div");for(let se=0;se<te.length;se+=1)te[se].c();u=$(),d=x("div"),a=x("h1"),c=xe(s),f=$(),o=x("h3"),k&&k.c(),l=$(),P&&P.c(),h=$(),R&&R.c(),p=$(),m=x("div"),g=x("div"),I.c(),v=$(),_=x("div"),b=x("div"),y=x("button"),y.textContent="-",w=$(),C=x("input"),T=$(),E=x("button"),E.textContent="+",A=$(),F=x("div"),G=x("button"),de(Y.$$.fragment),Q=$(),Z&&Z.c(),S(r,"class","flex"),S(a,"class","text-sm"),S(o,"class","text-xs"),S(d,"class","flex flex-col justify-center grow gap-1"),S(y,"type","button"),S(y,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(C,"type","text"),S(C,"class","border w-12 input-sm rounded-none"),S(E,"type","button"),S(E,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(b,"class","flex"),S(G,"type","button"),S(G,"class","btn secondary-btn"),S(m,"class","flex gap-2 items-center"),S(n,"class","flex gap-3 flex-col sm:flex-row"),S(i,"class","grow flex flex-col gap-3 justify-center w-full"),S(e,"class","flex justify-between items-center border-b p-2")},m(se,pe){B(se,e,pe),O(e,i),O(i,n),O(n,r);for(let U=0;U<te.length;U+=1)te[U]&&te[U].m(r,null);O(n,u),O(n,d),O(d,a),O(a,c),O(d,f),O(d,o),k&&k.m(o,null),O(o,l),P&&P.m(o,null),O(o,h),R&&R.m(o,null),O(n,p),O(n,m),O(m,g),I.m(g,null),O(m,v),O(m,_),O(_,b),O(b,y),O(b,w),O(b,C),Ye(C,t[18].count),O(b,T),O(b,E),O(m,A),O(m,F),O(F,G),fe(Y,G,null),O(i,Q),Z&&Z.m(i,null),q=!0,N||(V=[oe(y,"click",D),oe(C,"input",z),oe(E,"click",J),oe(G,"click",ne)],N=!0)},p(se,pe){var U;if(t=se,pe&4){ee=Ne(t[18].product.images);let X;for(X=0;X<ee.length;X+=1){const ae=Ug(t,ee,X);te[X]?te[X].p(ae,pe):(te[X]=Wg(ae),te[X].c(),te[X].m(r,null))}for(;X<te.length;X+=1)te[X].d(1);te.length=ee.length}(!q||pe&4)&&s!==(s=t[18].product.productName+"")&&Ke(c,s),t[18].currentOption.optionValue1?k?k.p(t,pe):(k=Hg(t),k.c(),k.m(o,l)):k&&(k.d(1),k=null),t[18].currentOption.optionValue2?P?P.p(t,pe):(P=Vg(t),P.c(),P.m(o,h)):P&&(P.d(1),P=null),t[18].currentOption.optionValue3?R?R.p(t,pe):(R=Xg(t),R.c(),R.m(o,null)):R&&(R.d(1),R=null),K===(K=M(t))&&I?I.p(t,pe):(I.d(1),I=K(t),I&&(I.c(),I.m(g,null))),pe&4&&C.value!==t[18].count&&Ye(C,t[18].count),(U=t[18].thumbnails)!=null&&U.length?Z?Z.p(t,pe):(Z=Yg(t),Z.c(),Z.m(i,null)):Z&&(Z.d(1),Z=null)},i(se){q||(L(Y.$$.fragment,se),q=!0)},o(se){W(Y.$$.fragment,se),q=!1},d(se){se&&j(e),Tt(te,se),k&&k.d(),P&&P.d(),R&&R.d(),I.d(),he(Y),Z&&Z.d(),N=!1,Be(V)}}}function ER(t){let e,i,n=t[0]&&zg(t);return{c(){n&&n.c(),e=qe()},m(r,u){n&&n.m(r,u),B(r,e,u),i=!0},p(r,[u]){r[0]?n?(n.p(r,u),u&1&&L(n,1)):(n=zg(r),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),W(n,1,1,()=>{n=null}),Ee())},i(r){i||(L(n),i=!0)},o(r){W(n),i=!1},d(r){r&&j(e),n&&n.d(r)}}}function OR(t,e,i){let n,r;Fe(t,Ai,y=>i(2,n=y)),Fe(t,zo,y=>i(3,r=y));let{isOpen:u}=e,{changeEditorDataIndex:d}=e,{sendOrder:a}=e;wt(),console.log("editorDatas",n),console.log({sendOrder:a}),_n(async()=>{});function s(y){n[y].count>1&&ye(Ai,n[y].count--,n)}function c(y){ye(Ai,n[y].count++,n)}function f(y){ye(Ai,n=n.filter((w,C)=>y!=C),n)}function o(y){d(y),Fr()}function l(y){ta.call(this,t,y)}function h(y){ta.call(this,t,y)}const p=y=>o(y),m=y=>s(y);function g(y,w){y[w].count=this.value,Ai.set(n)}const v=y=>c(y),_=y=>f(y),b=()=>a();return t.$$set=y=>{"isOpen"in y&&i(0,u=y.isOpen),"changeEditorDataIndex"in y&&i(8,d=y.changeEditorDataIndex),"sendOrder"in y&&i(1,a=y.sendOrder)},[u,a,n,r,s,c,f,o,d,l,h,p,m,g,v,_,b]}class kR extends Ve{constructor(e){super(),He(this,e,OR,ER,Ue,{isOpen:0,changeEditorDataIndex:8,sendOrder:1})}}function qg(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function Kg(t,e,i){const n=t.slice();return n[12]=e[i],n}function Jg(t,e,i){const n=t.slice();return n[12]=e[i],n}function Zg(t,e,i){const n=t.slice();return n[18]=e[i],n}function Qg(t){let e,i,n;function r(...u){return t[5](t[9],...u)}return{c(){e=x("input"),S(e,"type","checkbox"),S(e,"class","podiz-checkbox")},m(u,d){B(u,e,d),i||(n=oe(e,"change",r),i=!0)},p(u,d){t=u},d(u){u&&j(e),i=!1,n()}}}function xR(t){return{c:ve,m:ve,p:ve,d:ve}}function DR(t){var d;let e,i=t[11],n=((d=t[17].data)==null?void 0:d.thumbnails.length)&&em(t);const r=()=>t[6](e,i),u=()=>t[6](null,i);return{c(){e=x("div"),n&&n.c(),S(e,"class","flex gap-2 overflow-x-auto")},m(a,s){B(a,e,s),n&&n.m(e,null),r()},p(a,s){var c;t=a,(c=t[17].data)!=null&&c.thumbnails.length?n?n.p(t,s):(n=em(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),i!==t[11]&&(u(),i=t[11],r())},d(a){a&&j(e),n&&n.d(),u()}}}function em(t){let e,i=Ne(t[17].data.thumbnails),n=[];for(let r=0;r<i.length;r+=1)n[r]=tm(Zg(t,i,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=qe()},m(r,u){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,u);B(r,e,u)},p(r,u){if(u&4){i=Ne(r[17].data.thumbnails);let d;for(d=0;d<i.length;d+=1){const a=Zg(r,i,d);n[d]?n[d].p(a,u):(n[d]=tm(a),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function tm(t){let e,i,n;return{c(){e=x("img"),$e(e.src,i=t[18].url)||S(e,"src",i),S(e,"alt",n=t[18].alt),S(e,"class","max-h-20 max-w-xs border rounded cursor-pointer")},m(r,u){B(r,e,u)},p(r,u){u&4&&!$e(e.src,i=r[18].url)&&S(e,"src",i),u&4&&n!==(n=r[18].alt)&&S(e,"alt",n)},d(r){r&&j(e)}}}function AR(t){let e;return{c(){e=x("div"),e.innerHTML='<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>',S(e,"class","flex items justify-center")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function PR(t){let e,i=Ne(t[9].items),n=[];for(let r=0;r<i.length;r+=1)n[r]=im(Kg(t,i,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=qe()},m(r,u){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,u);B(r,e,u)},p(r,u){if(u&4){i=Ne(r[9].items);let d;for(d=0;d<i.length;d+=1){const a=Kg(r,i,d);n[d]?n[d].p(a,u):(n[d]=im(a),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function IR(t){let e,i=Ne(t[9].items),n=[];for(let r=0;r<i.length;r+=1)n[r]=nm(Jg(t,i,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=qe()},m(r,u){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,u);B(r,e,u)},p(r,u){if(u&4){i=Ne(r[9].items);let d;for(d=0;d<i.length;d+=1){const a=Jg(r,i,d);n[d]?n[d].p(a,u):(n[d]=nm(a),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function im(t){let e=t[12].option_value+"",i,n,r=t[12].price.toLocaleString("ko-KR")+"",u,d;return{c(){i=xe(e),n=xe(" ("),u=xe(r),d=xe("원)  ")},m(a,s){B(a,i,s),B(a,n,s),B(a,u,s),B(a,d,s)},p(a,s){s&4&&e!==(e=a[12].option_value+"")&&Ke(i,e),s&4&&r!==(r=a[12].price.toLocaleString("ko-KR")+"")&&Ke(u,r)},d(a){a&&(j(i),j(n),j(u),j(d))}}}function nm(t){let e,i=t[12].price.toLocaleString("ko-KR")+"",n,r;return{c(){e=xe("("),n=xe(i),r=xe("원)  ")},m(u,d){B(u,e,d),B(u,n,d),B(u,r,d)},p(u,d){d&4&&i!==(i=u[12].price.toLocaleString("ko-KR")+"")&&Ke(n,i)},d(u){u&&(j(e),j(n),j(r))}}}function rm(t){let e,i,n,r,u,d,a,s=t[9].product_name+"",c,f,o,l,h,p,m,g,v,_=t[9].quantity+"",b,y,w,C,T,E,A=t[9].price.toLocaleString("ko-KR")+"",F,G,Y,Q,q=t[0]==="cart"&&Qg(t),N={ctx:t,current:null,token:null,hasCatch:!1,pending:AR,then:DR,catch:xR,value:17};Rs(r=t[9].editorData,N);function V(k,P){return k[0]==="orderend"?IR:PR}let ee=V(t),te=ee(t);return{c(){e=x("div"),i=x("div"),q&&q.c(),n=$(),N.block.c(),u=$(),d=x("div"),a=x("h1"),c=xe(s),o=$(),l=x("div"),h=x("p"),te.c(),p=$(),m=x("p"),g=xe("수량: "),v=x("span"),b=xe(_),y=xe("개"),w=$(),C=x("p"),T=xe("금액: "),E=x("span"),F=xe(A),G=xe("원"),Q=$(),S(i,"class","flex w-full gap-2 items-center overflow-x-hidden"),S(a,"class","font-semibold"),S(d,"class",f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":"")),S(v,"class","font-semibold"),S(E,"class","font-semibold"),S(l,"class",Y="flex gap-5 "+(t[0]==="cart"?"pl-8":"")),S(e,"class","p-5")},m(k,P){B(k,e,P),O(e,i),q&&q.m(i,null),O(i,n),N.block.m(i,N.anchor=null),N.mount=()=>i,N.anchor=null,O(e,u),O(e,d),O(d,a),O(a,c),O(e,o),O(e,l),O(l,h),te.m(h,null),O(l,p),O(l,m),O(m,g),O(m,v),O(v,b),O(m,y),O(l,w),O(l,C),O(C,T),O(C,E),O(E,F),O(C,G),O(e,Q)},p(k,P){t=k,t[0]==="cart"?q?q.p(t,P):(q=Qg(t),q.c(),q.m(i,n)):q&&(q.d(1),q=null),N.ctx=t,P&4&&r!==(r=t[9].editorData)&&Rs(r,N)||su(N,t,P),P&4&&s!==(s=t[9].product_name+"")&&Ke(c,s),P&1&&f!==(f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":""))&&S(d,"class",f),ee===(ee=V(t))&&te?te.p(t,P):(te.d(1),te=ee(t),te&&(te.c(),te.m(h,null))),P&4&&_!==(_=t[9].quantity+"")&&Ke(b,_),P&4&&A!==(A=t[9].price.toLocaleString("ko-KR")+"")&&Ke(F,A),P&1&&Y!==(Y="flex gap-5 "+(t[0]==="cart"?"pl-8":""))&&S(l,"class",Y)},d(k){k&&j(e),q&&q.d(),N.block.d(),N.token=null,N=null,te.d()}}}function RR(t){let e,i,n,r,u=Ne(t[2]),d=[];for(let a=0;a<u.length;a+=1)d[a]=rm(qg(t,u,a));return{c(){e=x("div"),i=x("div"),n=x("h1"),n.innerHTML='제작상품 <span class="text-xs font-normal">(해당상품은 옵션별 수량으로 주문상품 수에 추가됩니다.)</span>',r=$();for(let a=0;a<d.length;a+=1)d[a].c();S(n,"class","p-5 bg-gray-50 font-semibold text-lg"),S(i,"class","border rounded relative flex flex-col divide-y"),S(e,"class","flex flex-col gap-3 my-2 bg-white")},m(a,s){B(a,e,s),O(e,i),O(i,n),O(i,r);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(i,null)},p(a,[s]){if(s&15){u=Ne(a[2]);let c;for(c=0;c<u.length;c+=1){const f=qg(a,u,c);d[c]?d[c].p(f,s):(d[c]=rm(f),d[c].c(),d[c].m(i,null))}for(;c<d.length;c+=1)d[c].d(1);d.length=u.length}},i:ve,o:ve,d(a){a&&j(e),Tt(d,a)}}}function MR(t,e,i){let{previews:n}=e,{mode:r="cart"}=e,u=[],d=[];console.log({previews:n});function a(l,h){n.items.forEach(p=>{p.uuid===h&&(p.element.querySelector("input[type=checkbox]").checked=l)})}const s=l=>{var h;return(h=l.additional_option_values)!=null&&h.length?l.additional_option_values.map(({custom_option:p,quantity:m})=>{const g=p.find(({key:_})=>_==="item_option_add").value,v=l.option_value[0];return{uuid:g,option_value:v,quantity:m,price:l.discount_price}}):[]},c=l=>{const h={};return l.forEach(p=>{s(p).forEach(g=>{const{uuid:v}=g;if(!h[v]){const _=ov(v);h[v]={uuid:v,editorData:_,items:[]}}h[v].items.push({option_value:g.option_value.replace(/\[|\]|\([+-]?\d{1,3}(,\d{3})*\)/g,""),quantity:g.quantity,price:g.price}),h[v].quantity=g.quantity,h[v].price=h[v].items.reduce((_,b)=>_+b.quantity*b.price,0),h[v].product_name=p.product_name})}),Object.values(h)};_n(async()=>{var h;(h=n.elements)!=null&&h.length&&n.elements.forEach(p=>{p.style.display="none"});const l=await nE();console.log({cafe24CartItems:l}),i(2,u=c(l.items)),console.log({cartItems:u}),document.getElementById("product_select_all")&&document.getElementById("product_select_all").addEventListener("click",function(){document.querySelectorAll(".podiz-checkbox").forEach(function(p){p.checked=!p.checked})})});const f=(l,h)=>a(h.target.checked,l.uuid);function o(l,h){Xe[l?"unshift":"push"](()=>{d[h]=l,i(1,d)})}return t.$$set=l=>{"previews"in l&&i(4,n=l.previews),"mode"in l&&i(0,r=l.mode)},t.$$.update=()=>{t.$$.dirty&2&&(d==null?void 0:d.length)>0&&(console.log({gallerys:d}),d.forEach(l=>{new oy(l,{toolbar:!1,title:!1,navbar:2})}))},[r,d,u,a,n,f,o]}class FR extends Ve{constructor(e){super(),He(this,e,MR,RR,Ue,{previews:4,mode:0})}}function sm(t,e,i){const n=t.slice();return n[5]=e[i],n}function om(t,e,i){const n=t.slice();return n[8]=e[i],n}function LR(t){let e;return{c(){e=x("div"),e.innerHTML='<h2 class="flex p-5 justify-center">로그인후 이용가능합니다.</h2> <a href="/member/login.html" class="btn primary-btn btn-lg max-w-lg w-full">로그인 페이지로</a>',S(e,"class","flex flex-col justify-center items-center")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function NR(t){let e,i={ctx:t,current:null,token:null,hasCatch:!1,pending:XR,then:BR,catch:jR,value:4};return Rs(t[2],i),{c(){e=qe(),i.block.c()},m(n,r){B(n,e,r),i.block.m(n,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e},p(n,r){t=n,su(i,t,r)},d(n){n&&j(e),i.block.d(n),i.token=null,i=null}}}function jR(t){return{c:ve,m:ve,p:ve,d:ve}}function BR(t){let e;function i(u,d){return u[4].error?WR:u[4].count?zR:UR}let r=i(t)(t);return{c(){e=x("div"),r.c()},m(u,d){B(u,e,d),r.m(e,null)},p(u,d){r.p(u,d)},d(u){u&&j(e),r.d()}}}function UR(t){let e;return{c(){e=x("div"),e.textContent="저장된 디자인이 없습니다.",S(e,"class","text-center py-8 text-gray-500")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function zR(t){let e,i=Ne(t[4].data),n=[];for(let r=0;r<i.length;r+=1)n[r]=lm(sm(t,i,r));return{c(){e=x("ul");for(let r=0;r<n.length;r+=1)n[r].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,u){B(r,e,u);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(r,u){if(u&6){i=Ne(r[4].data);let d;for(d=0;d<i.length;d+=1){const a=sm(r,i,d);n[d]?n[d].p(a,u):(n[d]=lm(a),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function WR(t){let e;return{c(){e=x("div"),e.textContent=`${t[4].error}`,S(e,"class","text-red-500 p-4")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function HR(t){var b;let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g;function v(){return t[3](t[5])}let _=((b=t[5].thumbnails)==null?void 0:b.length)&&VR(t);return{c(){e=x("li"),i=x("div"),n=x("div"),r=x("img"),d=$(),a=x("div"),s=x("h2"),s.textContent=`${t[5].cafe24Product.product.product_name}`,c=$(),f=x("div"),f.textContent=`${rE(t[5].cafe24Product.product.price)}`,o=$(),l=x("button"),l.textContent="디자인 재주문",h=$(),_&&_.c(),p=$(),$e(r.src,u=t[5].cafe24Product.product.small_image)||S(r,"src",u),S(r,"class","w-24 h-24 object-cover rounded-md"),S(r,"alt",t[5].cafe24Product.product.product_name),S(s,"class","text-lg font-semibold mb-2 line-clamp-2"),S(f,"class","text-blue-600 font-bold mb-2"),S(l,"type","button"),S(l,"class","btn primary-btn w-full"),S(a,"class","flex-1"),S(n,"class","flex items-center gap-4 mb-4"),S(i,"class","p-4"),S(e,"class","bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105")},m(y,w){B(y,e,w),O(e,i),O(i,n),O(n,r),O(n,d),O(n,a),O(a,s),O(a,c),O(a,f),O(a,o),O(a,l),O(i,h),_&&_.m(i,null),O(e,p),m||(g=oe(l,"click",v),m=!0)},p(y,w){var C;t=y,(C=t[5].thumbnails)!=null&&C.length&&_.p(t,w)},d(y){y&&j(e),_&&_.d(),m=!1,g()}}}function VR(t){let e,i=Ne(t[5].thumbnails),n=[];for(let r=0;r<i.length;r+=1)n[r]=am(om(t,i,r));return{c(){e=x("div");for(let r=0;r<n.length;r+=1)n[r].c();S(e,"class","flex overflow-x-auto space-x-2 pb-2")},m(r,u){B(r,e,u);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(r,u){if(u&4){i=Ne(r[5].thumbnails);let d;for(d=0;d<i.length;d+=1){const a=om(r,i,d);n[d]?n[d].p(a,u):(n[d]=am(a),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=i.length}},d(r){r&&j(e),Tt(n,r)}}}function am(t){let e,i;return{c(){e=x("img"),$e(e.src,i=t[8].url)||S(e,"src",i),S(e,"alt",""),S(e,"class","w-20 h-20 object-cover rounded-md flex-shrink-0")},m(n,r){B(n,e,r)},p:ve,d(n){n&&j(e)}}}function lm(t){var n;let e,i=((n=t[5].cafe24Product)==null?void 0:n.product)&&HR(t);return{c(){i&&i.c(),e=qe()},m(r,u){i&&i.m(r,u),B(r,e,u)},p(r,u){var d;(d=r[5].cafe24Product)!=null&&d.product&&i.p(r,u)},d(r){r&&j(e),i&&i.d(r)}}}function XR(t){let e;return{c(){e=x("div"),e.textContent="로딩 중...",S(e,"class","text-center py-4")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function YR(t){let e;function i(u,d){return u[0].cafe24UserType==="member"?NR:LR}let n=i(t),r=n(t);return{c(){r.c(),e=qe()},m(u,d){r.m(u,d),B(u,e,d)},p(u,[d]){n===(n=i(u))&&r?r.p(u,d):(r.d(1),r=n(u),r&&(r.c(),r.m(e.parentNode,e)))},i:ve,o:ve,d(u){u&&j(e),r.d(u)}}}function $R(t,e,i){let{user:n}=e,{handleClick:r}=e;console.log({user:n});const u=d1(n.cafe24MallId,n.cafe24MemberId);console.log({loadCafe24MemberDesign:u});const d=a=>r(a.uuid);return t.$$set=a=>{"user"in a&&i(0,n=a.user),"handleClick"in a&&i(1,r=a.handleClick)},[n,r,u,d]}class GR extends Ve{constructor(e){super(),He(this,e,$R,YR,Ue,{user:0,handleClick:1})}}function cm(t,e,i){const n=t.slice();return n[57]=e[i],n}function um(t){let e,i,n,r,u,d,a,s,c,f,o,l,h,p,m,g,v,_,b,y,w=t[10].length+"",C,T,E,A,F,G,Y,Q,q,N,V,ee,te,k,P,R=t[0],M,K,I,D,z,J,ne,Z,H,se,pe,U,X,ae,le,re,ue,_e,ke,we,ce,ie,ge,be,De,Pe=Ne(t[11]),Oe=[];for(let Ce=0;Ce<Pe.length;Ce+=1)Oe[Ce]=fm(cm(t,Pe,Ce));function Ae(Ce,jt){var Ei,Qn;return(Qn=(Ei=Ce[13])==null?void 0:Ei.image)!=null&&Qn.url?KR:qR}let Nt=Ae(t),pt=Nt(t);p=new Se({props:{icon:"icon-park-outline:preview-open",height:"18"}}),_=new Se({props:{icon:"uil:cart",height:"18"}}),Q=new JP({}),V=new Se({props:{icon:"gg:log-off",height:"20"}});let ft=dm(t);function tl(Ce){t[25](Ce)}let ss={};t[0]!==void 0&&(ss.printKey=t[0]),K=new hP({props:ss}),Xe.push(()=>ct(K,"printKey",tl));const uo=[ZR,JR],zi=[];function lf(Ce,jt){return Ce[5]?0:1}Z=lf(t),H=zi[Z]=uo[Z](t),U=new eI({}),re=new Se({props:{icon:"fa6-solid:plus"}}),we=new CR({});let Et=t[12].options&&!t[9].currentOption&&pm(t);return{c(){e=x("div");for(let Ce=0;Ce<Oe.length;Ce+=1)Oe[Ce].c();i=$(),n=x("div"),r=x("div"),u=x("div"),d=x("div"),pt.c(),a=$(),s=x("div"),c=$(),f=x("div"),o=x("button"),o.textContent="디자인저장",l=$(),h=x("button"),de(p.$$.fragment),m=xe(`
                미리보기`),g=$(),v=x("button"),de(_.$$.fragment),b=$(),y=x("div"),C=xe(w),T=$(),E=x("span"),E.textContent="주문하기",A=$(),F=x("div"),G=x("div"),Y=x("div"),de(Q.$$.fragment),q=$(),N=x("button"),de(V.$$.fragment),ee=$(),te=x("span"),te.textContent="나가기",k=$(),P=x("div"),ft.c(),M=$(),de(K.$$.fragment),D=$(),z=x("div"),J=x("div"),ne=x("button"),H.c(),se=$(),pe=x("div"),de(U.$$.fragment),X=$(),ae=x("div"),le=x("button"),de(re.$$.fragment),ue=xe(`
                      옵션/디자인 추가`),_e=$(),ke=x("div"),de(we.$$.fragment),ie=$(),Et&&Et.c(),at(e,"font-size","0.1px"),at(e,"height","0px"),at(e,"color","#FFFFFF "),at(e,"overflow","hidden"),S(s,"class","md:hidden"),S(o,"type","button"),S(o,"class","btn btn-sm md:btn-md primary-btn"),S(h,"type","button"),S(h,"class","btn btn-sm md:btn-md white-btn"),S(y,"class","rounded-full border bg-white px-1 absolute left-8"),S(E,"class","ml-3"),S(v,"type","button"),S(v,"class","btn btn-sm secondary-btn relative gap-0"),S(f,"class","flex items-center gap-3"),S(d,"class","flex justify-between items-center p-4 bg-white h-16 border-b border-b-gray-300"),S(Y,"class","flex flex-col"),S(te,"class","whitespace-nowrap text-2xs hidden md:block"),S(N,"type","button"),S(N,"class","flex bg-white flex-col items-center border-t py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(G,"class","w-[50px] md:w-[80px] flex flex-col px-1 z-40 h-full justify-between"),S(P,"class","flex-1 bg-gray-200 flex items-center justify-center h-full w-full rounded border relative"),S(ne,"type","button"),S(ne,"class","border border-r-0 bg-white py-5 px-1 rounded-lg rounded-r-none"),S(J,"class","absolute -left-[22px] py-3 top-1/2 transform -translate-y-50 md:hidden"),S(le,"type","button"),S(le,"class","btn primary-btn w-full"),S(ae,"class","mt-3"),S(ke,"class","mt-3"),S(z,"class",ce="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(t[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"),S(F,"class","flex-1 flex mt-2 relative"),S(u,"class","flex-1 flex flex-col"),S(r,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(n,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(Ce,jt){B(Ce,e,jt);for(let Ei=0;Ei<Oe.length;Ei+=1)Oe[Ei]&&Oe[Ei].m(e,null);B(Ce,i,jt),B(Ce,n,jt),O(n,r),O(r,u),O(u,d),pt.m(d,null),O(d,a),O(d,s),O(d,c),O(d,f),O(f,o),O(f,l),O(f,h),fe(p,h,null),O(h,m),O(f,g),O(f,v),fe(_,v,null),O(v,b),O(v,y),O(y,C),O(v,T),O(v,E),O(u,A),O(u,F),O(F,G),O(G,Y),fe(Q,Y,null),O(G,q),O(G,N),fe(V,N,null),O(N,ee),O(N,te),O(F,k),O(F,P),ft.m(P,null),O(P,M),fe(K,P,null),O(F,D),O(F,z),O(z,J),O(J,ne),zi[Z].m(ne,null),O(z,se),O(z,pe),fe(U,pe,null),O(z,X),O(z,ae),O(ae,le),fe(re,le,null),O(le,ue),O(z,_e),O(z,ke),fe(we,ke,null),O(r,ie),Et&&Et.m(r,null),ge=!0,be||(De=[oe(o,"click",t[21]),oe(h,"click",t[22]),oe(v,"click",t[23]),oe(N,"click",t[24]),oe(ne,"click",t[26]),oe(le,"click",t[27])],be=!0)},p(Ce,jt){if(jt[0]&2048){Pe=Ne(Ce[11]);let li;for(li=0;li<Pe.length;li+=1){const cf=cm(Ce,Pe,li);Oe[li]?Oe[li].p(cf,jt):(Oe[li]=fm(cf),Oe[li].c(),Oe[li].m(e,null))}for(;li<Oe.length;li+=1)Oe[li].d(1);Oe.length=Pe.length}Nt===(Nt=Ae(Ce))&&pt?pt.p(Ce,jt):(pt.d(1),pt=Nt(Ce),pt&&(pt.c(),pt.m(d,a))),(!ge||jt[0]&1024)&&w!==(w=Ce[10].length+"")&&Ke(C,w),jt[0]&1&&Ue(R,R=Ce[0])?(Te(),W(ft,1,1,ve),Ee(),ft=dm(Ce),ft.c(),L(ft,1),ft.m(P,M)):ft.p(Ce,jt);const Ei={};!I&&jt[0]&1&&(I=!0,Ei.printKey=Ce[0],bt(()=>I=!1)),K.$set(Ei);let Qn=Z;Z=lf(Ce),Z!==Qn&&(Te(),W(zi[Qn],1,1,()=>{zi[Qn]=null}),Ee(),H=zi[Z],H||(H=zi[Z]=uo[Z](Ce),H.c()),L(H,1),H.m(ne,null)),(!ge||jt[0]&32&&ce!==(ce="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(Ce[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"))&&S(z,"class",ce),Ce[12].options&&!Ce[9].currentOption?Et?(Et.p(Ce,jt),jt[0]&4608&&L(Et,1)):(Et=pm(Ce),Et.c(),L(Et,1),Et.m(r,null)):Et&&(Te(),W(Et,1,1,()=>{Et=null}),Ee())},i(Ce){ge||(L(p.$$.fragment,Ce),L(_.$$.fragment,Ce),L(Q.$$.fragment,Ce),L(V.$$.fragment,Ce),L(ft),L(K.$$.fragment,Ce),L(H),L(U.$$.fragment,Ce),L(re.$$.fragment,Ce),L(we.$$.fragment,Ce),L(Et),ge=!0)},o(Ce){W(p.$$.fragment,Ce),W(_.$$.fragment,Ce),W(Q.$$.fragment,Ce),W(V.$$.fragment,Ce),W(ft),W(K.$$.fragment,Ce),W(H),W(U.$$.fragment,Ce),W(re.$$.fragment,Ce),W(we.$$.fragment,Ce),W(Et),ge=!1},d(Ce){Ce&&(j(e),j(i),j(n)),Tt(Oe,Ce),pt.d(),he(p),he(_),he(Q),he(V),ft.d(Ce),he(K),zi[Z].d(),he(U),he(re),he(we),Et&&Et.d(),be=!1,Be(De)}}}function fm(t){let e,i,n;return{c(){e=x("div"),i=xe("podiz"),S(e,"style",n=`font-family:${t[57].fontFamily}`)},m(r,u){B(r,e,u),O(e,i)},p(r,u){u[0]&2048&&n!==(n=`font-family:${r[57].fontFamily}`)&&S(e,"style",n)},d(r){r&&j(e)}}}function qR(t){let e;return{c(){e=x("div"),e.textContent="[LOGO]",S(e,"class","hidden md:block")},m(i,n){B(i,e,n)},p:ve,d(i){i&&j(e)}}}function KR(t){let e,i,n,r;return{c(){e=x("div"),i=x("img"),$e(i.src,n=t[13].image.url)||S(i,"src",n),S(i,"alt",r=t[13].shopName),S(i,"class","max-h-12 object-contain"),S(e,"class","hidden md:block")},m(u,d){B(u,e,d),O(e,i)},p(u,d){d[0]&8192&&!$e(i.src,n=u[13].image.url)&&S(i,"src",n),d[0]&8192&&r!==(r=u[13].shopName)&&S(i,"alt",r)},d(u){u&&j(e)}}}function hm(t){let e,i;return e=new cP({}),{c(){de(e.$$.fragment)},m(n,r){fe(e,n,r),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){he(e,n)}}}function dm(t){let e,i,n=t[9].prints[t[14]]&&hm();return{c(){n&&n.c(),e=qe()},m(r,u){n&&n.m(r,u),B(r,e,u),i=!0},p(r,u){r[9].prints[r[14]]?n?u[0]&16896&&L(n,1):(n=hm(),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),W(n,1,1,()=>{n=null}),Ee())},i(r){i||(L(n),i=!0)},o(r){W(n),i=!1},d(r){r&&j(e),n&&n.d(r)}}}function JR(t){let e,i;return e=new Se({props:{icon:"mingcute:right-fill"}}),{c(){de(e.$$.fragment)},m(n,r){fe(e,n,r),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){he(e,n)}}}function ZR(t){let e,i;return e=new Se({props:{icon:"mingcute:left-fill"}}),{c(){de(e.$$.fragment)},m(n,r){fe(e,n,r),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){he(e,n)}}}function pm(t){let e,i,n,r;function u(s){t[28](s)}function d(s){t[29](s)}let a={loadPublish:t[16]};return t[6]!==void 0&&(a.publishId=t[6]),t[3]!==void 0&&(a.runEditor=t[3]),e=new GP({props:a}),Xe.push(()=>ct(e,"publishId",u)),Xe.push(()=>ct(e,"runEditor",d)),{c(){de(e.$$.fragment)},m(s,c){fe(e,s,c),r=!0},p(s,c){const f={};!i&&c[0]&64&&(i=!0,f.publishId=s[6],bt(()=>i=!1)),!n&&c[0]&8&&(n=!0,f.runEditor=s[3],bt(()=>n=!1)),e.$set(f)},i(s){r||(L(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){he(e,s)}}}function gm(t){let e,i;return e=new FR({props:{previews:t[7]}}),{c(){de(e.$$.fragment)},m(n,r){fe(e,n,r),i=!0},p(n,r){const u={};r[0]&128&&(u.previews=n[7]),e.$set(u)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){W(e.$$.fragment,n),i=!1},d(n){he(e,n)}}}function mm(t){let e,i,n,r,u,d,a,s,c,f,o,l,h;return s=new Se({props:{icon:"lets-icons:close-round",height:"30"}}),f=new GR({props:{user:t[8],handleClick:t[15]}}),{c(){e=x("div"),i=x("div"),n=x("div"),r=x("h1"),u=x("span"),u.textContent="디자인보관함",d=$(),a=x("button"),de(s.$$.fragment),c=$(),de(f.$$.fragment),S(a,"type","button"),S(a,"class","btn white-btn"),S(r,"class","font-semibold text-lg border-b py-3 flex justify-between"),S(n,"class","flex-1 flex flex-col p-5"),S(i,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(e,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(p,m){B(p,e,m),O(e,i),O(i,n),O(n,r),O(r,u),O(r,d),O(r,a),fe(s,a,null),O(n,c),fe(f,n,null),o=!0,l||(h=oe(a,"click",t[30]),l=!0)},p(p,m){const g={};m[0]&256&&(g.user=p[8]),f.$set(g)},i(p){o||(L(s.$$.fragment,p),L(f.$$.fragment,p),o=!0)},o(p){W(s.$$.fragment,p),W(f.$$.fragment,p),o=!1},d(p){p&&j(e),he(s),he(f),l=!1,h()}}}function QR(t){let e,i,n,r,u;return{c(){e=x("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-ezfnmf")},m(d,a){B(d,e,a),n=!0,r||(u=oe(e,"click",Fr),r=!0)},p:ve,i(d){n||(d&&Yt(()=>{n&&(i||(i=Qt(e,yf,{},!0)),i.run(1))}),n=!0)},o(d){d&&(i||(i=Qt(e,yf,{},!1)),i.run(0)),n=!1},d(d){d&&j(e),d&&i&&i.end(),r=!1,u()}}}function vm(t){let e,i,n;function r(d){t[31](d)}let u={isProgress:!0};return t[2]!==void 0&&(u.progress=t[2]),e=new Xv({props:u}),Xe.push(()=>ct(e,"progress",r)),{c(){de(e.$$.fragment)},m(d,a){fe(e,d,a),n=!0},p(d,a){const s={};!i&&a[0]&4&&(i=!0,s.progress=d[2],bt(()=>i=!1)),e.$set(s)},i(d){n||(L(e.$$.fragment,d),n=!0)},o(d){W(e.$$.fragment,d),n=!1},d(d){he(e,d)}}}function eM(t){let e,i,n,r,u,d,a,s=t[3]&&um(t),c=t[7]&&gm(t),f=t[4]&&mm(t);r=new Wb({props:{$$slots:{backdrop:[QR]},$$scope:{ctx:t}}});let o=t[1]&&vm(t);return{c(){s&&s.c(),e=$(),c&&c.c(),i=$(),f&&f.c(),n=$(),de(r.$$.fragment),u=$(),o&&o.c(),d=qe()},m(l,h){s&&s.m(l,h),B(l,e,h),c&&c.m(l,h),B(l,i,h),f&&f.m(l,h),B(l,n,h),fe(r,l,h),B(l,u,h),o&&o.m(l,h),B(l,d,h),a=!0},p(l,h){l[3]?s?(s.p(l,h),h[0]&8&&L(s,1)):(s=um(l),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(Te(),W(s,1,1,()=>{s=null}),Ee()),l[7]?c?(c.p(l,h),h[0]&128&&L(c,1)):(c=gm(l),c.c(),L(c,1),c.m(i.parentNode,i)):c&&(Te(),W(c,1,1,()=>{c=null}),Ee()),l[4]?f?(f.p(l,h),h[0]&16&&L(f,1)):(f=mm(l),f.c(),L(f,1),f.m(n.parentNode,n)):f&&(Te(),W(f,1,1,()=>{f=null}),Ee());const p={};h[1]&536870912&&(p.$$scope={dirty:h,ctx:l}),r.$set(p),l[1]?o?(o.p(l,h),h[0]&2&&L(o,1)):(o=vm(l),o.c(),L(o,1),o.m(d.parentNode,d)):o&&(Te(),W(o,1,1,()=>{o=null}),Ee())},i(l){a||(L(s),L(c),L(f),L(r.$$.fragment,l),L(o),a=!0)},o(l){W(s),W(c),W(f),W(r.$$.fragment,l),W(o),a=!1},d(l){l&&(j(e),j(i),j(n),j(u),j(d)),s&&s.d(l),c&&c.d(l),f&&f.d(l),he(r,l),o&&o.d(l)}}}function _m(t){console.log({e:t})}function tM(t,e,i){let n,r,u,d,a,s,c,f,o;Fe(t,Le,ie=>i(9,n=ie)),Fe(t,Ai,ie=>i(10,r=ie)),Fe(t,zo,ie=>i(36,u=ie)),Fe(t,Ts,ie=>i(11,d=ie)),Fe(t,ca,ie=>i(37,a=ie)),Fe(t,Es,ie=>i(38,s=ie)),Fe(t,ls,ie=>i(12,c=ie)),Fe(t,eo,ie=>i(13,f=ie)),Fe(t,Ms,ie=>i(14,o=ie)),ye(Le,n.prints=[],n);let l=1,h=!1,p=0,m=!1,g=!1,v=!1,_=null,b=null,y=null,w=null,C=null,{uuid:T,shopid:E,provider:A,productno:F,previewclass:G,previewitem:Y}=qT();A&&zy("provider",A),_n(async()=>{if(i(8,y=await iE()),console.log({user:y}),G){i(7,b=tE(G,Y));return}const ie=document.createElement("button");ie.textContent="상품만들기",ie.addEventListener("click",()=>Q());const ge=document.getElementById("podiz-button");ge&&(ie.classList.add("podiz-run-btn"),ge.appendChild(ie));const be=document.getElementById("podiz-data-uuid");be&&(w=be.value);const De=document.getElementById("podiz-member-design");return De&&De.addEventListener("click",se),()=>{De&&De.removeEventListener("click",se)}});async function Q(ie=null){if(i(1,h=!0),i(4,g=!1),ie&&(w=ie),w){console.log({dataUUID:w});const{data:ge,error:be}=await ov(w);if(be){console.log(be);return}ge&&(F=ge.cafe24Product.productno,C=ge),console.log({data:ge})}if(await N(),await q(),E&&await p1(E),A==="cafe24"){ye(ls,c.options={},c),ye(ls,c.productno=F,c);{const ge=await ZT(F),be=await QT(F);ye(ls,c.options=ge.options,c),ye(ls,c.product=be.product,c)}}i(1,h=!1),i(3,m=!0)}async function q(){var be;const{data:ie,error:ge}=await r1(_);if(ge){console.error(ge);return}if(ye(Le,n.id=null,n),ye(Le,n.scenes=ie.editor.scenes,n),ye(Le,n.product=ie.editor.product,n),ye(Le,n.currentOption=C?C.currentOption:null,n),ye(Le,n.count=n.product.minCnt?n.product.minCnt:1,n),ye(Le,n.uuid=kn(),n),ye(Le,n.uploads=ie.uploads?ie.uploads:[],n),ye(Le,n.publish=ie.id,n),ye(Le,n.cafe24MallId=y.cafe24MallId,n),ye(Le,n.cafe24MemberId=y.cafe24MemberId,n),ye(Le,n.cafe24ShopNo=y.cafe24ShopNo,n),ye(Le,n.cafe24UserType=y.cafe24UserType,n),ye(Le,n.cafe24Product=c,n),await ee(n.product.shop),await Wy(),ye(Le,n.prints=ie.editor.prints,n),C){C.uploads&&(ye(Le,n.uploads=C.uploads,n),ye(Es,s=C.uploads,s));for(const[De,Pe]of n.prints.entries())if(Pe.id===C.prints[De].id)for(const[Oe,Ae]of C.prints[De].canvasJSON.objects.entries())(Ae.objType==="clipart"||Ae.objType==="text"||Ae.objType==="shape"||Ae.objType==="draw"||Ae.objType==="upload")&&ye(Le,n.prints[De].canvasJSON.objects[Oe]=Ae,n)}(be=n.scenes)!=null&&be.length&&V(),i(0,l++,l)}async function N(){const{data:ie,error:ge}=await h1({provider:A,productno:F,shopid:E});if(!ie.length||ge){alert("잘못된 연결이거나 연결에 오류가있습니다."),i(3,m=!1);return}ye(ca,a=ie[0],a);const be=a.linkOptions;be.length&&(n!=null&&n.currentOption||(i(6,_=be[0].publish),be[0])),console.log("$productLinks",a)}async function V(){ye(Le,n.composites=[],n);for(const ie of n.prints)if(ie.id){const ge=await f1(ie.id);ge.data&&ye(Le,n.composites=[...n.composites,ge.data],n)}}async function ee(ie){try{const ge=await l1(ie);ge.data&&ye(Ts,d=ge.data.defaultFonts,d);const be=await a1(ie);be.data&&ye(Ts,d=[...d,...be.data],d);const De=d.map(Ae=>Ae.css).join(`
`),Pe=document.createElement("style");Pe.textContent=De,document.head.appendChild(Pe),await document.fonts.ready;const Oe=d.map(Ae=>Ae.fontFamily&&Ae.url?new FontFace(Ae.fontFamily,`url(${Ae.url})`).load().catch(Nt=>(console.warn(`Failed to load font: ${Ae.fontFamily}`,Nt),null)):Promise.resolve());await Promise.all(Oe),document.dispatchEvent(new Event("fontsLoaded"))}catch(ge){console.error("Error loading fonts:",ge)}}async function te(){var ie;try{i(1,h=!0),i(2,p=1);const ge=n.prints;for(const[be,De]of ge.entries())if(i(2,p=100/ge.length*(be+1)),De.id&&De.imageDataURL&&De.isChange){const Pe=await LT(n,be,n.currentOption.colorCode);M(Pe.scenes),(ie=Pe.scenes)!=null&&ie.length&&ye(Le,n.thumbnails=Pe.scenes.map(Oe=>Oe.compositeThumbnail).filter(Oe=>Oe),n),De.isChange=!1}}catch(ge){console.log({error:ge})}finally{i(1,h=!1)}}async function k(){await te(),bf(XP,{isOpen:!0,message:"미리보기"})}function P(){bf(kR,{isOpen:!0,message:"주문하기",changeEditorDataIndex:ne,sendOrder:Z})}async function R(){await J(),P()}function M(ie){for(const[ge,be]of ie.entries())ye(Le,n.scenes[ge].composites=be.composites,n),be.compositeThumbnail&&ye(Le,n.scenes[ge].compositeThumbnail=be.compositeThumbnail,n)}async function K(ie=!0){await te(),await H();const ge=JSON.stringify(n);u!==void 0&&u>=0&&u<r.length?ye(Ai,r[u]=JSON.parse(ge),r):ye(Ai,r=[...r,JSON.parse(ge)],r),ie&&P()}async function I(){for(const ie of r){const{id:ge}=await D(ie);ie.id=ge}}async function D(ie){ie.id&&ie.id,ie.uuid,ie.prints,ie.uploads,ie.scenes,ie.thumbnails,ie.printImages,ie.Option,ie.count,ie.publish,ie.cafe24MallId,ie.cafe24ShopNo,ie.cafe24UserType,ie.cafe24MemberId,ie.cafe24Product;const{data:ge,error:be}=await c1(ie);if(be){console.log(be);return}return console.log({data:ge}),ge}async function z(){await J(),ye(zo,u++,u),ye(Le,n.currentOption=null,n),n.prints.forEach(ie=>{ie.isChange!==void 0&&ie.isChange===!1&&(ie.isChange=!0)})}async function J(){n.prints.filter(ge=>ge.isChange).length>=1&&(confirm("변경사항이 있습니다. 디자인 저장을 하지않으면 해당 옵션의 편집내용은 저장되지 않습니다. 저장하시겠습니까?")?await K(!1):console.log("사용자가 변경을 취소했습니다."))}function ne(ie){ye(zo,u=ie,u);const ge=JSON.stringify(r[ie]);ye(Le,n=JSON.parse(ge),n),i(0,l++,l)}async function Z(){console.log("sendOrder"),i(1,h=!0),await I(),await eE(),i(1,h=!1)}async function H(){var Pe;i(1,h=!0);const ie=n.prints.length+n.scenes.length;let ge=0;i(2,p=0);const be=`editorData/${n.uuid}`,De=n;ye(Le,n.printImages=[],n);for(let Oe=0;Oe<De.prints.length;Oe++){const Ae=De.prints[Oe];if(Ae.imageDataURL?Ae.imageDataURL.startsWith("data:image"):null){const pt=await Rn(Ae.imageDataURL,`${be}/print_${Oe}.png`,_m,{extension:"png"});Ae.imageDataURL=pt.url,n.printImages.push(pt)}else n.printImages.push({url:Ae.imageDataURL});ge++,i(2,p=ge/ie*100),console.log(`Print ${Oe} 업로드 완료. 진행률: ${p.toFixed(2)}%`)}for(let Oe=0;Oe<De.scenes.length;Oe++){const Ae=De.scenes[Oe];if((Pe=Ae.compositeThumbnail)!=null&&Pe.url?Ae.compositeThumbnail.url.startsWith("data:image"):null){const pt=await Rn(Ae.compositeThumbnail.url,`${be}/scene_${Oe}.jpg`,_m,{extension:"jpg"});Ae.compositeThumbnail.url=pt.url}ge++,i(2,p=ge/ie*100),console.log(`Scene ${Oe} 업로드 완료. 진행률: ${p.toFixed(2)}%`)}return ye(Le,n.thumbnails=De.scenes.map(Oe=>Oe.compositeThumbnail).filter(Oe=>Oe),n),console.log("모든 이미지 업로드 완료!",n),i(1,h=!1),n}function se(){i(4,g=!0)}const pe=()=>K(),U=()=>k(),X=()=>R(),ae=()=>i(3,m=!1);function le(ie){l=ie,i(0,l)}const re=()=>i(5,v=!v),ue=()=>z();function _e(ie){_=ie,i(6,_)}function ke(ie){m=ie,i(3,m)}const we=()=>i(4,g=!1);function ce(ie){p=ie,i(2,p)}return[l,h,p,m,g,v,_,b,y,n,r,d,c,f,o,Q,q,k,R,K,z,pe,U,X,ae,le,re,ue,_e,ke,we,ce]}class iM extends Ve{constructor(e){super(),He(this,e,tM,eM,Ue,{},null,[-1,-1])}}let nM=document.getElementById("podiz-app");new iM({target:nM});
