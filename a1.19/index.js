var v1=Object.defineProperty;var _1=(t,e,n)=>e in t?v1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var y1=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Jc=(t,e,n)=>(_1(t,typeof e!="symbol"?e+"":e,n),n);var A5=y1((I5,Ml)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ge(){}const ch=t=>t;function bi(t,e){for(const n in e)t[n]=e[n];return t}function b1(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Cy(t){return t()}function Bd(){return Object.create(null)}function Ue(t){t.forEach(Cy)}function Hn(t){return typeof t=="function"}function Ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Wa;function Ye(t,e){return t===e?!0:(Wa||(Wa=document.createElement("a")),Wa.href=e,t===Wa.href)}function w1(t){return Object.keys(t).length===0}function uh(t,...e){if(t==null){for(const i of e)i(void 0);return ge}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mi(t){let e;return uh(t,n=>e=n)(),e}function Me(t,e,n){t.$$.on_destroy.push(uh(e,n))}function wa(t,e,n,i){if(t){const r=Sy(t,e,n,i);return t[0](r)}}function Sy(t,e,n,i){return t[1]&&i?bi(n.ctx.slice(),t[1](i(e))):n.ctx}function Ca(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],h=Math.max(e.dirty.length,r.length);for(let a=0;a<h;a+=1)o[a]=e.dirty[a]|r[a];return o}return e.dirty|r}return e.dirty}function Sa(t,e,n,i,r,o){if(r){const h=Sy(e,n,i,o);t.p(h,r)}}function Ta(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Ud(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ye(t,e,n){return t.set(n),e}function Ty(t){return t&&Hn(t.destroy)?t.destroy:ge}function Yd(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const ky=typeof window<"u";let Oy=ky?()=>window.performance.now():()=>Date.now(),fh=ky?t=>requestAnimationFrame(t):ge;const Rs=new Set;function Ey(t){Rs.forEach(e=>{e.c(t)||(Rs.delete(e),e.f())}),Rs.size!==0&&fh(Ey)}function xy(t){let e;return Rs.size===0&&fh(Ey),{promise:new Promise(n=>{Rs.add(e={c:t,f:n})}),abort(){Rs.delete(e)}}}function k(t,e){t.appendChild(e)}function Dy(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function C1(t){const e=x("style");return e.textContent="/* empty */",S1(Dy(t),e),e.sheet}function S1(t,e){return k(t.head||t,e),e.sheet}function B(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function Pt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function T1(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function be(t){return document.createTextNode(t)}function V(){return be(" ")}function Je(){return be("")}function Q(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ni(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k1(t){return function(e){e.target===this&&t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const O1=["width","height"];function Il(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&O1.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function Wd(t,e){for(const n in e)S(t,n,e[n])}function Ay(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Py(t){return t===""?null:+t}function E1(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.data!==e&&(t.data=e)}function Re(t,e){t.value=e??""}function mt(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function wi(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yo(t){const e=t.querySelector(":checked");return e&&e.__value}let za;function x1(){if(za===void 0){za=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{za=!0}}return za}function D1(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=x("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=x1();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Q(window,"message",h=>{h.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=Q(i.contentWindow,"resize",e),e()}),k(t,i),()=>{(r||o&&i.contentWindow)&&o(),N(i)}}function Ci(t,e,n){t.classList.toggle(e,!!n)}function My(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function hn(t,e){return new t(e)}const Rl=new Map;let Fl=0;function A1(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function P1(t,e){const n={stylesheet:C1(e),rules:{}};return Rl.set(t,n),n}function Qu(t,e,n,i,r,o,h,a=0){const s=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=s){const v=e+(n-e)*o(g);c+=g*100+`%{${h(v,1-v)}}
`}const f=c+`100% {${h(n,1-n)}}
}`,l=`__svelte_${A1(f)}_${a}`,u=Dy(t),{stylesheet:d,rules:p}=Rl.get(u)||P1(u,t);p[l]||(p[l]=!0,d.insertRule(`@keyframes ${l} ${f}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${l} ${i}ms linear ${r}ms 1 both`,Fl+=1,l}function Iy(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Fl-=r,Fl||M1())}function M1(){fh(()=>{Fl||(Rl.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&N(e)}),Rl.clear())})}function I1(t,e,n,i){if(!e)return ge;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return ge;const{delay:o=0,duration:h=300,easing:a=ch,start:s=Oy()+o,end:c=s+h,tick:f=ge,css:l}=n(t,{from:e,to:r},i);let u=!0,d=!1,p;function m(){l&&(p=Qu(t,0,1,h,o,a,l)),o||(d=!0)}function g(){l&&Iy(t,p),u=!1}return xy(v=>{if(!d&&v>=s&&(d=!0),d&&v>=c&&(f(1,0),g()),!u)return!1;if(d){const _=v-s,b=0+1*a(_/h);f(b,1-b)}return!0}),m(),f(0,1),g}function R1(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,F1(t,r)}}function F1(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r=i.transform==="none"?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let na;function ji(t){na=t}function ka(){if(!na)throw new Error("Function called outside component initialization");return na}function xi(t){ka().$$.on_mount.push(t)}function Di(t){ka().$$.on_destroy.push(t)}function Xt(){const t=ka();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=My(e,n,{cancelable:i});return r.slice().forEach(h=>{h.call(t,o)}),!o.defaultPrevented}return!0}}function L1(t,e){return ka().$$.context.set(t,e),e}function Si(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ws=[],tt=[];let Fs=[];const ef=[],Ry=Promise.resolve();let tf=!1;function Fy(){tf||(tf=!0,Ry.then(hh))}function N1(){return Fy(),Ry}function zt(t){Fs.push(t)}function Ht(t){ef.push(t)}const Zc=new Set;let cs=0;function hh(){if(cs!==0)return;const t=na;do{try{for(;cs<ws.length;){const e=ws[cs];cs++,ji(e),j1(e.$$)}}catch(e){throw ws.length=0,cs=0,e}for(ji(null),ws.length=0,cs=0;tt.length;)tt.pop()();for(let e=0;e<Fs.length;e+=1){const n=Fs[e];Zc.has(n)||(Zc.add(n),n())}Fs.length=0}while(ws.length);for(;ef.length;)ef.pop()();tf=!1,Zc.clear(),ji(t)}function j1(t){if(t.fragment!==null){t.update(),Ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zt)}}function B1(t){const e=[],n=[];Fs.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Fs=e}let ko;function U1(){return ko||(ko=Promise.resolve(),ko.then(()=>{ko=null})),ko}function Qc(t,e,n){t.dispatchEvent(My(`${e?"intro":"outro"}${n}`))}const pl=new Set;let Bi;function Se(){Bi={r:0,c:[],p:Bi}}function Te(){Bi.r||Ue(Bi.c),Bi=Bi.p}function M(t,e){t&&t.i&&(pl.delete(t),t.i(e))}function U(t,e,n,i){if(t&&t.o){if(pl.has(t))return;pl.add(t),Bi.c.push(()=>{pl.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Y1={duration:0};function Vt(t,e,n,i){let o=e(t,n,{direction:"both"}),h=i?0:1,a=null,s=null,c=null,f;function l(){c&&Iy(t,c)}function u(p,m){const g=p.b-h;return m*=Math.abs(g),{a:h,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function d(p){const{delay:m=0,duration:g=300,easing:v=ch,tick:_=ge,css:b}=o||Y1,y={start:Oy()+m,b:p};p||(y.group=Bi,Bi.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=y:(b&&(l(),c=Qu(t,h,p,g,m,v,b)),p&&_(0,1),a=u(y,g),zt(()=>Qc(t,p,"start")),xy(w=>{if(s&&w>s.start&&(a=u(s,g),s=null,Qc(t,a.b,"start"),b&&(l(),c=Qu(t,h,a.b,a.duration,0,v,o.css))),a){if(w>=a.end)_(h=a.b,1-h),Qc(t,a.b,"end"),s||(a.b?l():--a.group.r||Ue(a.group.c)),a=null;else if(w>=a.start){const C=w-a.start;h=a.a+a.d*v(C/a.duration),_(h,1-h)}}return!!(a||s)}))}return{run(p){Hn(o)?U1().then(()=>{o=o({direction:p?"in":"out"}),d(p)}):d(p)},end(){l(),a=s=null}}}function qs(t,e){const n=e.token={};function i(r,o,h,a){if(e.token!==n)return;e.resolved=a;let s=e.ctx;h!==void 0&&(s=s.slice(),s[h]=a);const c=r&&(e.current=r)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((l,u)=>{u!==o&&l&&(Se(),U(l,1,1,()=>{e.blocks[u]===l&&(e.blocks[u]=null)}),Te())}):e.block.d(1),c.c(),M(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[o]=c),f&&hh()}if(b1(t)){const r=ka();if(t.then(o=>{ji(r),i(e.then,1,e.value,o),ji(null)},o=>{if(ji(r),i(e.catch,2,e.error,o),ji(null),!e.hasCatch)throw o}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function dh(t,e,n){const i=e.slice(),{resolved:r}=t;t.current===t.then&&(i[t.value]=r),t.current===t.catch&&(i[t.error]=r),t.block.p(i,n)}function Fe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ly(t,e){U(t,1,1,()=>{e.delete(t.key)})}function W1(t,e){t.f(),Ly(t,e)}function Ny(t,e,n,i,r,o,h,a,s,c,f,l){let u=t.length,d=o.length,p=u;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map,b=[];for(p=d;p--;){const T=l(r,o,p),O=n(T);let D=h.get(O);D?i&&b.push(()=>D.p(T,e)):(D=c(O,T),D.c()),v.set(O,g[p]=D),O in m&&_.set(O,Math.abs(p-m[O]))}const y=new Set,w=new Set;function C(T){M(T,1),T.m(a,f),h.set(T.key,T),f=T.first,d--}for(;u&&d;){const T=g[d-1],O=t[u-1],D=T.key,I=O.key;T===O?(f=T.first,u--,d--):v.has(I)?!h.has(D)||y.has(D)?C(T):w.has(I)?u--:_.get(D)>_.get(I)?(w.add(D),C(T)):(y.add(I),u--):(s(O,h),u--)}for(;u--;){const T=t[u];v.has(T.key)||s(T,h)}for(;d;)C(g[d-1]);return Ue(b),g}function Kr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const h=t[o],a=e[o];if(a){for(const s in h)s in a||(i[s]=1);for(const s in a)r[s]||(n[s]=a[s],r[s]=1);t[o]=a}else for(const s in h)r[s]=1}for(const h in i)h in n||(n[h]=void 0);return n}function Ll(t){return typeof t=="object"&&t!==null?t:{}}function At(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function he(t){t&&t.c()}function ue(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),zt(()=>{const o=t.$$.on_mount.map(Cy).filter(Hn);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ue(o),t.$$.on_mount=[]}),r.forEach(zt)}function fe(t,e){const n=t.$$;n.fragment!==null&&(B1(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z1(t,e){t.$$.dirty[0]===-1&&(ws.push(t),Fy(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ge(t,e,n,i,r,o,h=null,a=[-1]){const s=na;ji(t);const c=t.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:r,bound:Bd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Bd(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};h&&h(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(l,u,...d)=>{const p=d.length?d[0]:u;return c.ctx&&r(c.ctx[l],c.ctx[l]=p)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](p),f&&z1(t,l)),u}):[],c.update(),f=!0,Ue(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const l=E1(e.target);c.fragment&&c.fragment.l(l),l.forEach(N)}else c.fragment&&c.fragment.c();e.intro&&M(t.$$.fragment),ue(t,e.target,e.anchor),hh()}ji(s)}class qe{constructor(){Jc(this,"$$");Jc(this,"$$set")}$destroy(){fe(this,1),this.$destroy=ge}$on(e,n){if(!Hn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!w1(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const H1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(H1);var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var ot={};const X1={},$1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"})),Ur=jy($1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Ur,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Ur.implForWrapper,e.nodeCanvas=Ur.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function s(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function c(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function f(d,p){if(arguments.length===1)for(var m in d)c.call(this,m,d[m]);else c.call(this,d,p);return this}function l(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)a.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)a.call(this,m,d[m]);else a.call(this,d,p);return this}function u(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(_){return _!==!1}),this}e.Observable={fire:u,on:s,once:f,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,c){var f=this._objects;return c?f[s]=a:f.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,c=!1,f=0,l=arguments.length;f<l;f++)s=a.indexOf(arguments[f]),s!==-1&&(c=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var c=this.getObjects(),f=0,l=c.length;f<l;f++)a.call(s,c[f],f,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(s,new e.Gradient(a))},_initPattern:function(a,s,c){a&&a.source&&!(a instanceof e.Pattern)?this.set(s,new e.Pattern(a,c)):c&&c()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,c=Math.atan2,f=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/u;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/u,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*l},radiansToDegrees:function(d){return d/l},rotatePoint:function(d,p,m){var g=new e.Point(d.x-p.x,d.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var m=e.util.sin(p),g=e.util.cos(p),v=d.x*g-d.y*m,_=d.x*m+d.y*g;return{x:v,y:_}},createVector:function(d,p){return new e.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new e.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,m){var g=e.util.createVector(d,p),v=e.util.createVector(d,m),_=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,_),v),y=_*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,y)),angle:_}},projectStrokeOnPoints:function(d,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(y){var w=v/Math.hypot(y.x,y.y);return new e.Point(y.x*w*_.x,y.y*w*_.y)};return d.length<=1||d.forEach(function(y,w){var C=new e.Point(y.x,y.y),T,O;w===0?(O=d[w+1],T=m?b(e.util.createVector(O,C)).addEquals(C):d[d.length-1]):w===d.length-1?(T=d[w-1],O=m?b(e.util.createVector(T,C)).addEquals(C):d[0]):(T=d[w-1],O=d[w+1]);var D=e.util.getBisector(C,T,O),I=D.vector,Y=D.angle,z,q;if(p.strokeLineJoin==="miter"&&(z=-v/Math.sin(Y/2),q=new e.Point(I.x*z*_.x,I.y*z*_.y),Math.hypot(q.x,q.y)/v<=p.strokeMiterLimit)){g.push(C.add(q)),g.push(C.subtract(q));return}z=-v*Math.SQRT2,q=new e.Point(I.x*z*_.x,I.y*z*_.y),g.push(C.add(q)),g.push(C.subtract(q))}),g},transformPoint:function(d,p,m){return m?new e.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new e.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=e.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],v=e.util.array.min(g),_=e.util.array.max(g),b=_-v,y=[d[0].y,d[1].y,d[2].y,d[3].y],w=e.util.array.min(y),C=e.util.array.max(y),T=C-w;return{left:v,top:w,width:b,height:T}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=e.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=e.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),e.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return e;var p=d.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var v=e.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,_)),v.src=d},loadImageInDom:function(d,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),e.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var v=[],_=0,b=d.length;function y(){++_===b&&p&&p(v.filter(function(w){return w}))}if(!b){p&&p(v);return}d.forEach(function(w,C){if(!w||!w.type){y();return}var T=e.util.getKlass(w.type,m);T.fromObject(w,function(O,D){D||(v[C]=O),g&&g(w,O,D),y()})})},enlivenObjectEnlivables:function(d,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});e.util.enlivenObjects(g.map(function(v){return d[v]}),function(v){var _={};g.forEach(function(b,y){_[b]=v[y],p&&(p[b]=v[y])}),m&&m(_)})},enlivenPatterns:function(d,p){d=d||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=d.length;if(!_){p&&p(g);return}d.forEach(function(b,y){b&&b.source?new e.Pattern(b,function(w){g[y]=w,m()}):(g[y]=b,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?(typeof m<"u"&&(d[0].sourcePath=m),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in d&&(p[m[g]]=d[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(d){var p=e.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=c(d[1],d[0]),m=f(d[0],2)+f(d[1],2),g=s(m),v=(d[0]*d[3]-d[2]*d[1])/g,_=c(d[0]*d[2]+d[1]*d[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:_/l,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(d.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,_=e.util.degreesToRadians;return d.skewX&&(g=v(g,[1,0,Math.tan(_(d.skewX)),1],!0)),d.skewY&&(g=v(g,[1,Math.tan(_(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=e.util.multiplyTransformMatrices;return d.angle&&(p=m(p,e.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,b,y=d.getImageData(p,m,g*2||1,g*2||1),w=y.data.length;for(_=3;_<w&&(b=y.data[_],v=b<=0,v!==!1);_+=4);return y=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",v=d.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?e.charWidthsCache[d]&&delete e.charWidthsCache[d]:e.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,d.calcOwnMatrix());e.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){e.util.applyTransformToObject(d,e.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),y=e.util.makeBoundingBoxFromPoints(_,b);return{x:y.width,y:y.height}},mergeClipPaths:function(d,p){var m=d,g=p;m.inverted&&!g.inverted&&(m=p,g=d),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(d,p,m){return m=m||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||m&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},b=[],y=0;y<g.length;y++){if(!m[y]){v+=g[y].length;continue}for(var w=0;w<g[y].length;w++){v++;var C=m[y][w];if(C&&Object.keys(C).length>0){var T=e.util.hasStyleChanged(_,C,!0);T?b.push({start:v,end:v+1,style:C}):b[b.length-1].end++}_=C||{}}}return b},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var m=p.split(`
`),g=-1,v=0,_={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)g++,d[v]&&d[v].start<=g&&g<d[v].end&&(_[b]=_[b]||{},_[b][y]=Object.assign({},d[v].style),g===d[v].end-1&&v++);return _}}}(t),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function f(E,P,F,L,Z,R,A,X,J,ie,ne){var $=e.util.cos(E),le=e.util.sin(E),me=e.util.cos(P),ee=e.util.sin(P),K=F*Z*me-L*R*ee+A,oe=L*Z*me+F*R*ee+X,re=ie+J*(-F*Z*le-L*R*$),H=ne+J*(-L*Z*le+F*R*$),ae=K+J*(F*Z*ee+L*R*me),_e=oe+J*(L*Z*ee-F*R*me);return["C",re,H,ae,_e,K,oe]}function l(E,P,F,L,Z,R,A){var X=Math.PI,J=A*X/180,ie=e.util.sin(J),ne=e.util.cos(J),$=0,le=0;F=Math.abs(F),L=Math.abs(L);var me=-ne*E*.5-ie*P*.5,ee=-ne*P*.5+ie*E*.5,K=F*F,oe=L*L,re=ee*ee,H=me*me,ae=K*oe-K*re-oe*H,_e=0;if(ae<0){var Pe=Math.sqrt(1-ae/(K*oe));F*=Pe,L*=Pe}else _e=(Z===R?-1:1)*Math.sqrt(ae/(K*re+oe*H));var ke=_e*F*ee/L,ce=-_e*L*me/F,xe=ne*ke-ie*ce+E*.5,Ie=ie*ke+ne*ce+P*.5,We=u(1,0,(me-ke)/F,(ee-ce)/L),at=u((me-ke)/F,(ee-ce)/L,(-me-ke)/F,(-ee-ce)/L);R===0&&at>0?at-=2*X:R===1&&at<0&&(at+=2*X);for(var Ke=Math.ceil(Math.abs(at/X*2)),Rt=[],pt=at/Ke,ln=8/3*Math.sin(pt/4)*Math.sin(pt/4)/Math.sin(pt/2),Tt=We+pt,gn=0;gn<Ke;gn++)Rt[gn]=f(We,Tt,ne,ie,F,L,xe,Ie,ln,$,le),$=Rt[gn][5],le=Rt[gn][6],We=Tt,Tt+=pt;return Rt}function u(E,P,F,L){var Z=Math.atan2(P,E),R=Math.atan2(L,F);return R>=Z?R-Z:2*Math.PI-(Z-R)}function d(E,P,F,L,Z,R,A,X){var J;if(e.cachesBoundsOfCurve&&(J=a.call(arguments),e.boundsOfCurveCache[J]))return e.boundsOfCurveCache[J];var ie=Math.sqrt,ne=Math.min,$=Math.max,le=Math.abs,me=[],ee=[[],[]],K,oe,re,H,ae,_e,Pe,ke;oe=6*E-12*F+6*Z,K=-3*E+9*F-9*Z+3*A,re=3*F-3*E;for(var ce=0;ce<2;++ce){if(ce>0&&(oe=6*P-12*L+6*R,K=-3*P+9*L-9*R+3*X,re=3*L-3*P),le(K)<1e-12){if(le(oe)<1e-12)continue;H=-re/oe,0<H&&H<1&&me.push(H);continue}Pe=oe*oe-4*re*K,!(Pe<0)&&(ke=ie(Pe),ae=(-oe+ke)/(2*K),0<ae&&ae<1&&me.push(ae),_e=(-oe-ke)/(2*K),0<_e&&_e<1&&me.push(_e))}for(var xe,Ie,We=me.length,at=We,Ke;We--;)H=me[We],Ke=1-H,xe=Ke*Ke*Ke*E+3*Ke*Ke*H*F+3*Ke*H*H*Z+H*H*H*A,ee[0][We]=xe,Ie=Ke*Ke*Ke*P+3*Ke*Ke*H*L+3*Ke*H*H*R+H*H*H*X,ee[1][We]=Ie;ee[0][at]=E,ee[1][at]=P,ee[0][at+1]=A,ee[1][at+1]=X;var Rt=[{x:ne.apply(null,ee[0]),y:ne.apply(null,ee[1])},{x:$.apply(null,ee[0]),y:$.apply(null,ee[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[J]=Rt),Rt}function p(E,P,F){for(var L=F[1],Z=F[2],R=F[3],A=F[4],X=F[5],J=F[6],ie=F[7],ne=l(J-E,ie-P,L,Z,A,X,R),$=0,le=ne.length;$<le;$++)ne[$][1]+=E,ne[$][2]+=P,ne[$][3]+=E,ne[$][4]+=P,ne[$][5]+=E,ne[$][6]+=P;return ne}function m(E){var P=0,F=0,L=E.length,Z=0,R=0,A,X,J,ie=[],ne,$,le;for(X=0;X<L;++X){switch(J=!1,A=E[X].slice(0),A[0]){case"l":A[0]="L",A[1]+=P,A[2]+=F;case"L":P=A[1],F=A[2];break;case"h":A[1]+=P;case"H":A[0]="L",A[2]=F,P=A[1];break;case"v":A[1]+=F;case"V":A[0]="L",F=A[1],A[1]=P,A[2]=F;break;case"m":A[0]="M",A[1]+=P,A[2]+=F;case"M":P=A[1],F=A[2],Z=A[1],R=A[2];break;case"c":A[0]="C",A[1]+=P,A[2]+=F,A[3]+=P,A[4]+=F,A[5]+=P,A[6]+=F;case"C":$=A[3],le=A[4],P=A[5],F=A[6];break;case"s":A[0]="S",A[1]+=P,A[2]+=F,A[3]+=P,A[4]+=F;case"S":ne==="C"?($=2*P-$,le=2*F-le):($=P,le=F),P=A[3],F=A[4],A[0]="C",A[5]=A[3],A[6]=A[4],A[3]=A[1],A[4]=A[2],A[1]=$,A[2]=le,$=A[3],le=A[4];break;case"q":A[0]="Q",A[1]+=P,A[2]+=F,A[3]+=P,A[4]+=F;case"Q":$=A[1],le=A[2],P=A[3],F=A[4];break;case"t":A[0]="T",A[1]+=P,A[2]+=F;case"T":ne==="Q"?($=2*P-$,le=2*F-le):($=P,le=F),A[0]="Q",P=A[1],F=A[2],A[1]=$,A[2]=le,A[3]=P,A[4]=F;break;case"a":A[0]="A",A[6]+=P,A[7]+=F;case"A":J=!0,ie=ie.concat(p(P,F,A)),P=A[6],F=A[7];break;case"z":case"Z":P=Z,F=R;break}J||ie.push(A),ne=A[0]}return ie}function g(E,P,F,L){return Math.sqrt((F-E)*(F-E)+(L-P)*(L-P))}function v(E){return E*E*E}function _(E){return 3*E*E*(1-E)}function b(E){return 3*E*(1-E)*(1-E)}function y(E){return(1-E)*(1-E)*(1-E)}function w(E,P,F,L,Z,R,A,X){return function(J){var ie=v(J),ne=_(J),$=b(J),le=y(J);return{x:A*ie+Z*ne+F*$+E*le,y:X*ie+R*ne+L*$+P*le}}}function C(E,P,F,L,Z,R,A,X){return function(J){var ie=1-J,ne=3*ie*ie*(F-E)+6*ie*J*(Z-F)+3*J*J*(A-Z),$=3*ie*ie*(L-P)+6*ie*J*(R-L)+3*J*J*(X-R);return Math.atan2($,ne)}}function T(E){return E*E}function O(E){return 2*E*(1-E)}function D(E){return(1-E)*(1-E)}function I(E,P,F,L,Z,R){return function(A){var X=T(A),J=O(A),ie=D(A);return{x:Z*X+F*J+E*ie,y:R*X+L*J+P*ie}}}function Y(E,P,F,L,Z,R){return function(A){var X=1-A,J=2*X*(F-E)+2*A*(Z-F),ie=2*X*(L-P)+2*A*(R-L);return Math.atan2(ie,J)}}function z(E,P,F){var L={x:P,y:F},Z,R=0,A;for(A=1;A<=100;A+=1)Z=E(A/100),R+=g(L.x,L.y,Z.x,Z.y),L=Z;return R}function q(E,P){for(var F=0,L=0,Z=E.iterator,R={x:E.x,y:E.y},A,X,J=.01,ie=E.angleFinder,ne;L<P&&J>1e-4;)A=Z(F),ne=F,X=g(R.x,R.y,A.x,A.y),X+L>P?(F-=J,J/=2):(R=A,F+=J,L+=X);return A.angle=ie(ne),A}function G(E){for(var P=0,F=E.length,L,Z=0,R=0,A=0,X=0,J=[],ie,ne,$,le=0;le<F;le++){switch(L=E[le],ne={x:Z,y:R,command:L[0]},L[0]){case"M":ne.length=0,A=Z=L[1],X=R=L[2];break;case"L":ne.length=g(Z,R,L[1],L[2]),Z=L[1],R=L[2];break;case"C":ie=w(Z,R,L[1],L[2],L[3],L[4],L[5],L[6]),$=C(Z,R,L[1],L[2],L[3],L[4],L[5],L[6]),ne.iterator=ie,ne.angleFinder=$,ne.length=z(ie,Z,R),Z=L[5],R=L[6];break;case"Q":ie=I(Z,R,L[1],L[2],L[3],L[4]),$=Y(Z,R,L[1],L[2],L[3],L[4]),ne.iterator=ie,ne.angleFinder=$,ne.length=z(ie,Z,R),Z=L[3],R=L[4];break;case"Z":case"z":ne.destX=A,ne.destY=X,ne.length=g(Z,R,A,X),Z=A,R=X;break}P+=ne.length,J.push(ne)}return J.push({length:P,x:Z,y:R}),J}function j(E,P,F){F||(F=G(E));for(var L=0;P-F[L].length>0&&L<F.length-2;)P-=F[L].length,L++;var Z=F[L],R=P/Z.length,A=Z.command,X=E[L],J;switch(A){case"M":return{x:Z.x,y:Z.y,angle:0};case"Z":case"z":return J=new e.Point(Z.x,Z.y).lerp(new e.Point(Z.destX,Z.destY),R),J.angle=Math.atan2(Z.destY-Z.y,Z.destX-Z.x),J;case"L":return J=new e.Point(Z.x,Z.y).lerp(new e.Point(X[1],X[2]),R),J.angle=Math.atan2(X[2]-Z.y,X[1]-Z.x),J;case"C":return q(Z,P);case"Q":return q(Z,P)}}function W(E){var P=[],F=[],L,Z,R=e.rePathCommand,A="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",X="("+A+")"+e.commaWsp,J="([01])"+e.commaWsp+"?",ie=X+"?"+X+"?"+X+J+J+X+"?("+A+")",ne=new RegExp(ie,"g"),$,le,me;if(!E||!E.match)return P;me=E.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ee=0,K,oe=me.length;ee<oe;ee++){L=me[ee],le=L.slice(1).trim(),F.length=0;var re=L.charAt(0);if(K=[re],re.toLowerCase()==="a")for(var H;H=ne.exec(le);)for(var ae=1;ae<H.length;ae++)F.push(H[ae]);else for(;$=R.exec(le);)F.push($[0]);for(var ae=0,_e=F.length;ae<_e;ae++)Z=parseFloat(F[ae]),isNaN(Z)||K.push(Z);var Pe=s[re.toLowerCase()],ke=c[re]||re;if(K.length-1>Pe)for(var ce=1,xe=K.length;ce<xe;ce+=Pe)P.push([re].concat(K.slice(ce,ce+Pe))),re=ke;else P.push(K)}return P}function te(E,P){var F=[],L,Z=new e.Point(E[0].x,E[0].y),R=new e.Point(E[1].x,E[1].y),A=E.length,X=1,J=0,ie=A>2;for(P=P||0,ie&&(X=E[2].x<R.x?-1:E[2].x===R.x?0:1,J=E[2].y<R.y?-1:E[2].y===R.y?0:1),F.push(["M",Z.x-X*P,Z.y-J*P]),L=1;L<A;L++){if(!Z.eq(R)){var ne=Z.midPointFrom(R);F.push(["Q",Z.x,Z.y,ne.x,ne.y])}Z=E[L],L+1<E.length&&(R=E[L+1])}return ie&&(X=Z.x>E[L-2].x?1:Z.x===E[L-2].x?0:-1,J=Z.y>E[L-2].y?1:Z.y===E[L-2].y?0:-1),F.push(["L",Z.x+X*P,Z.y+J*P]),F}function se(E,P,F){return F&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-F.x,-F.y])),E.map(function(L){for(var Z=L.slice(0),R={},A=1;A<L.length-1;A+=2)R.x=L[A],R.y=L[A+1],R=e.util.transformPoint(R,P),Z[A]=R.x,Z[A+1]=R.y;return Z})}e.util.joinPath=function(E){return E.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=W,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=te,e.util.getPathSegmentsInfo=G,e.util.getBoundsOfCurve=d,e.util.getPointOnPath=j,e.util.transformPath=se}(),function(){var a=Array.prototype.slice;function s(d,p){for(var m=a.call(arguments,2),g=[],v=0,_=d.length;v<_;v++)g[v]=m.length?d[v][p].apply(d[v],m):d[v][p].call(d[v]);return g}function c(d,p){return u(d,p,function(m,g){return m>=g})}function f(d,p){return u(d,p,function(m,g){return m<g})}function l(d,p){for(var m=d.length;m--;)d[m]=p;return d}function u(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,v=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],v)&&(v=d[g][p]);else for(;g--;)m(d[g],v)&&(v=d[g]);return v}}e.util.array={fill:l,invoke:s,min:f,max:c}}(),function(){function a(c,f,l){if(l)if(!e.isLikelyNode&&f instanceof Element)c=f;else if(f instanceof Array){c=[];for(var u=0,d=f.length;u<d;u++)c[u]=a({},f[u],l)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?c[p]=null:f.hasOwnProperty(p)&&(c[p]=a({},f[p],l));else c=f;else for(var p in f)c[p]=f[p];return c}function s(c,f){return a({},c,f)}e.util.object={extend:a,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function a(u){return u.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function s(u,d){return u.charAt(0).toUpperCase()+(d?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(u){var d=0,p,m=[];for(d=0,p;d<u.length;d++)(p=l(u,d))!==!1&&m.push(p);return m}function l(u,d){var p=u.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return u.charAt(d);if(55296<=p&&p<=56319){if(u.length<=d+1)throw"High surrogate without following low surrogate";var m=u.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return u.charAt(d)+u.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=u.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:s,escapeXml:c,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,s=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var y=m[_].apply(this,arguments);if(this.constructor.superclass=b,_!=="initialize")return y}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function u(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=u,g}e.util.createClass=d}(),function(){var a=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,l,u,d){f&&f.addEventListener(l,u,a?!1:d)},e.util.removeListener=function(f,l,u,d){f&&f.removeEventListener(l,u,a?!1:d)};function c(f){var l=f.changedTouches;return l&&l[0]?l[0]:f}e.util.getPointer=function(f){var l=f.target,u=e.util.getScrollLeftTop(l),d=c(f);return{x:d.clientX+u.left,y:d.clientY+u.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?u(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")u(d,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return d}var s=e.document.createElement("div"),c=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(d){return d};c?u=function(d,p){return d.style.opacity=p,d}:f&&(u=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",d}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(y){return typeof y=="string"?e.document.getElementById(y):y}var c,f=function(y){return a.call(y,0)};try{c=f(e.document.childNodes)instanceof Array}catch{}c||(f=function(y){for(var w=new Array(y.length),C=y.length;C--;)w[C]=y[C];return w});function l(y,w){var C=e.document.createElement(y);for(var T in w)T==="class"?C.className=w[T]:T==="for"?C.htmlFor=w[T]:C.setAttribute(T,w[T]);return C}function u(y,w){y&&(" "+y.className+" ").indexOf(" "+w+" ")===-1&&(y.className+=(y.className?" ":"")+w)}function d(y,w,C){return typeof w=="string"&&(w=l(w,C)),y.parentNode&&y.parentNode.replaceChild(w,y),w.appendChild(y),w}function p(y){for(var w=0,C=0,T=e.document.documentElement,O=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(w=O.scrollLeft||T.scrollLeft||0,C=O.scrollTop||T.scrollTop||0):(w+=y.scrollLeft||0,C+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:w,top:C}}function m(y){var w,C=y&&y.ownerDocument,T={left:0,top:0},O={left:0,top:0},D,I={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return O;for(var Y in I)O[I[Y]]+=parseInt(g(y,Y),10)||0;return w=C.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),D=p(y),{left:T.left+D.left-(w.clientLeft||0)+O.left,top:T.top+D.top-(w.clientTop||0)+O.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(y,w){var C=e.document.defaultView.getComputedStyle(y,null);return C?C[w]:void 0}:g=function(y,w){var C=y.style[w];return!C&&y.currentStyle&&(C=y.currentStyle[w]),C},function(){var y=e.document.documentElement.style,w="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function C(O){return typeof O.onselectstart<"u"&&(O.onselectstart=e.util.falseFunction),w?O.style[w]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function T(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),w?O.style[w]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}e.util.makeElementUnselectable=C,e.util.makeElementSelectable=T}();function v(y){var w=e.jsdomImplForWrapper(y);return w._canvas||w._image}function _(y){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(y);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function b(y,w){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=w}e.util.setImageSmoothing=b,e.util.getById=s,e.util.toArray=f,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=d,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=_}(),function(){function a(f,l){return f+(/\?/.test(f)?"&":"?")+l}function s(){}function c(f,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",d=l.onComplete||function(){},p=new e.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=s)},u==="GET"&&(m=null,typeof l.parameters=="string"&&(f=a(f,l.parameters))),p.open(u,f,!0),(u==="POST"||u==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,s=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return _.forEach(function(b){b.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(b){b.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function f(){return!1}function l(v,_,b,y){return-b*Math.cos(v/y*(Math.PI/2))+b+_}function u(v){v||(v={});var _=!1,b,y=function(){var w=e.runningAnimations.indexOf(b);return w>-1&&e.runningAnimations.splice(w,1)[0]};return b=a(s(v),{cancel:function(){return _=!0,y()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(w){var C=w||+new Date,T=v.duration||500,O=C+T,D,I=v.onChange||f,Y=v.abort||f,z=v.onComplete||f,q=v.easing||l,G="startValue"in v?v.startValue.length>0:!1,j="startValue"in v?v.startValue:0,W="endValue"in v?v.endValue:100,te=v.byValue||(G?j.map(function(se,E){return W[E]-j[E]}):W-j);v.onStart&&v.onStart(),function se(E){D=E||+new Date;var P=D>O?T:D-C,F=P/T,L=G?j.map(function(R,A){return q(P,j[A],te[A],T)}):q(P,j,te,T),Z=Math.abs(G?(L[0]-j[0])/te[0]:(L-j)/te);if(b.currentValue=G?L.slice():L,b.completionRate=Z,b.durationRate=F,!_){if(Y(L,Z,F)){y();return}if(D>O){b.currentValue=G?W.slice():W,b.completionRate=1,b.durationRate=1,I(G?W.slice():W,1,1),z(W,1,1),y();return}else I(L,Z,F),m(se)}}(C)}),b.cancel}var d=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return d.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=c}(),function(){function a(c,f,l){var u="rgba("+parseInt(c[0]+l*(f[0]-c[0]),10)+","+parseInt(c[1]+l*(f[1]-c[1]),10)+","+parseInt(c[2]+l*(f[2]-c[2]),10);return u+=","+(c&&f?parseFloat(c[3]+l*(f[3]-c[3])):1),u+=")",u}function s(c,f,l,u){var d=new e.Color(c).getSource(),p=new e.Color(f).getSource(),m=u.onComplete,g=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:d,endValue:p,byValue:p,easing:function(v,_,b,y){var w=u.colorEasing?u.colorEasing(v,y):1-Math.cos(v/y*(Math.PI/2));return a(_,b,w)},onComplete:function(v,_,b){if(m)return m(a(p,p,0),_,b)},onChange:function(v,_,b){if(g){if(Array.isArray(v))return g(a(v,v,0),_,b);g(v,_,b)}}}))}e.util.animateColor=s}(),function(){function a(E,P,F,L){return E<Math.abs(P)?(E=P,L=F/4):P===0&&E===0?L=F/(2*Math.PI)*Math.asin(1):L=F/(2*Math.PI)*Math.asin(P/E),{a:E,c:P,p:F,s:L}}function s(E,P,F){return E.a*Math.pow(2,10*(P-=1))*Math.sin((P*F-E.s)*(2*Math.PI)/E.p)}function c(E,P,F,L){return F*((E=E/L-1)*E*E+1)+P}function f(E,P,F,L){return E/=L/2,E<1?F/2*E*E*E+P:F/2*((E-=2)*E*E+2)+P}function l(E,P,F,L){return F*(E/=L)*E*E*E+P}function u(E,P,F,L){return-F*((E=E/L-1)*E*E*E-1)+P}function d(E,P,F,L){return E/=L/2,E<1?F/2*E*E*E*E+P:-F/2*((E-=2)*E*E*E-2)+P}function p(E,P,F,L){return F*(E/=L)*E*E*E*E+P}function m(E,P,F,L){return F*((E=E/L-1)*E*E*E*E+1)+P}function g(E,P,F,L){return E/=L/2,E<1?F/2*E*E*E*E*E+P:F/2*((E-=2)*E*E*E*E+2)+P}function v(E,P,F,L){return-F*Math.cos(E/L*(Math.PI/2))+F+P}function _(E,P,F,L){return F*Math.sin(E/L*(Math.PI/2))+P}function b(E,P,F,L){return-F/2*(Math.cos(Math.PI*E/L)-1)+P}function y(E,P,F,L){return E===0?P:F*Math.pow(2,10*(E/L-1))+P}function w(E,P,F,L){return E===L?P+F:F*(-Math.pow(2,-10*E/L)+1)+P}function C(E,P,F,L){return E===0?P:E===L?P+F:(E/=L/2,E<1?F/2*Math.pow(2,10*(E-1))+P:F/2*(-Math.pow(2,-10*--E)+2)+P)}function T(E,P,F,L){return-F*(Math.sqrt(1-(E/=L)*E)-1)+P}function O(E,P,F,L){return F*Math.sqrt(1-(E=E/L-1)*E)+P}function D(E,P,F,L){return E/=L/2,E<1?-F/2*(Math.sqrt(1-E*E)-1)+P:F/2*(Math.sqrt(1-(E-=2)*E)+1)+P}function I(E,P,F,L){var Z=1.70158,R=0,A=F;if(E===0)return P;if(E/=L,E===1)return P+F;R||(R=L*.3);var X=a(A,F,R,Z);return-s(X,E,L)+P}function Y(E,P,F,L){var Z=1.70158,R=0,A=F;if(E===0)return P;if(E/=L,E===1)return P+F;R||(R=L*.3);var X=a(A,F,R,Z);return X.a*Math.pow(2,-10*E)*Math.sin((E*L-X.s)*(2*Math.PI)/X.p)+X.c+P}function z(E,P,F,L){var Z=1.70158,R=0,A=F;if(E===0)return P;if(E/=L/2,E===2)return P+F;R||(R=L*(.3*1.5));var X=a(A,F,R,Z);return E<1?-.5*s(X,E,L)+P:X.a*Math.pow(2,-10*(E-=1))*Math.sin((E*L-X.s)*(2*Math.PI)/X.p)*.5+X.c+P}function q(E,P,F,L,Z){return Z===void 0&&(Z=1.70158),F*(E/=L)*E*((Z+1)*E-Z)+P}function G(E,P,F,L,Z){return Z===void 0&&(Z=1.70158),F*((E=E/L-1)*E*((Z+1)*E+Z)+1)+P}function j(E,P,F,L,Z){return Z===void 0&&(Z=1.70158),E/=L/2,E<1?F/2*(E*E*(((Z*=1.525)+1)*E-Z))+P:F/2*((E-=2)*E*(((Z*=1.525)+1)*E+Z)+2)+P}function W(E,P,F,L){return F-te(L-E,0,F,L)+P}function te(E,P,F,L){return(E/=L)<1/2.75?F*(7.5625*E*E)+P:E<2/2.75?F*(7.5625*(E-=1.5/2.75)*E+.75)+P:E<2.5/2.75?F*(7.5625*(E-=2.25/2.75)*E+.9375)+P:F*(7.5625*(E-=2.625/2.75)*E+.984375)+P}function se(E,P,F,L){return E<L/2?W(E*2,0,F,L)*.5+P:te(E*2-L,0,F,L)*.5+F*.5+P}e.util.ease={easeInQuad:function(E,P,F,L){return F*(E/=L)*E+P},easeOutQuad:function(E,P,F,L){return-F*(E/=L)*(E-2)+P},easeInOutQuad:function(E,P,F,L){return E/=L/2,E<1?F/2*E*E+P:-F/2*(--E*(E-2)-1)+P},easeInCubic:function(E,P,F,L){return F*(E/=L)*E*E+P},easeOutCubic:c,easeInOutCubic:f,easeInQuart:l,easeOutQuart:u,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:b,easeInExpo:y,easeOutExpo:w,easeInOutExpo:C,easeInCirc:T,easeOutCirc:O,easeInOutCirc:D,easeInElastic:I,easeOutElastic:Y,easeInOutElastic:z,easeInBack:q,easeOutBack:G,easeInOutBack:j,easeInBounce:W,easeOutBounce:te,easeInOutBounce:se}}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.parseUnit,d=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",w="clip-path";s.svgValidTagNamesRegEx=O(p),s.svgViewBoxElementsRegEx=O(m),s.svgInvalidAncestorsRegEx=O(g),s.svgValidParentsRegEx=O(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function C(R){return R in _?_[R]:R}function T(R,A,X,J){var ie=Array.isArray(A),ne;if((R==="fill"||R==="stroke")&&A==="none")A="";else{if(R==="strokeUniform")return A==="non-scaling-stroke";if(R==="strokeDashArray")A==="none"?A=null:A=A.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(R==="transformMatrix")X&&X.transformMatrix?A=d(X.transformMatrix,s.parseTransformAttribute(A)):A=s.parseTransformAttribute(A);else if(R==="visible")A=A!=="none"&&A!=="hidden",X&&X.visible===!1&&(A=!1);else if(R==="opacity")A=parseFloat(A),X&&typeof X.opacity<"u"&&(A*=X.opacity);else if(R==="textAnchor")A=A==="start"?"left":A==="end"?"right":"center";else if(R==="charSpacing")ne=u(A,J)/J*1e3;else if(R==="paintFirst"){var $=A.indexOf("fill"),le=A.indexOf("stroke"),A="fill";($>-1&&le>-1&&le<$||$===-1&&le>-1)&&(A="stroke")}else{if(R==="href"||R==="xlink:href"||R==="font")return A;if(R==="imageSmoothing")return A==="optimizeQuality";ne=ie?A.map(u):u(A,J)}}return!ie&&isNaN(ne)?A:ne}function O(R){return new RegExp("^("+R.join("|")+")\\b","i")}function D(R){for(var A in b)if(!(typeof R[b[A]]>"u"||R[A]==="")){if(typeof R[A]>"u"){if(!s.Object.prototype[A])continue;R[A]=s.Object.prototype[A]}if(R[A].indexOf("url(")!==0){var X=new s.Color(R[A]);R[A]=X.setAlpha(l(X.getAlpha()*R[b[A]],2)).toRgba()}}return R}function I(R,A){var X,J=[],ie,ne,$;for(ne=0,$=A.length;ne<$;ne++)X=A[ne],ie=R.getElementsByTagName(X),J=J.concat(Array.prototype.slice.call(ie));return J}s.parseTransformAttribute=function(){function R(ce,xe){var Ie=s.util.cos(xe[0]),We=s.util.sin(xe[0]),at=0,Ke=0;xe.length===3&&(at=xe[1],Ke=xe[2]),ce[0]=Ie,ce[1]=We,ce[2]=-We,ce[3]=Ie,ce[4]=at-(Ie*at-We*Ke),ce[5]=Ke-(We*at+Ie*Ke)}function A(ce,xe){var Ie=xe[0],We=xe.length===2?xe[1]:xe[0];ce[0]=Ie,ce[3]=We}function X(ce,xe,Ie){ce[Ie]=Math.tan(s.util.degreesToRadians(xe[0]))}function J(ce,xe){ce[4]=xe[0],xe.length===2&&(ce[5]=xe[1])}var ie=s.iMatrix,ne=s.reNum,$=s.commaWsp,le="(?:(skewX)\\s*\\(\\s*("+ne+")\\s*\\))",me="(?:(skewY)\\s*\\(\\s*("+ne+")\\s*\\))",ee="(?:(rotate)\\s*\\(\\s*("+ne+")(?:"+$+"("+ne+")"+$+"("+ne+"))?\\s*\\))",K="(?:(scale)\\s*\\(\\s*("+ne+")(?:"+$+"("+ne+"))?\\s*\\))",oe="(?:(translate)\\s*\\(\\s*("+ne+")(?:"+$+"("+ne+"))?\\s*\\))",re="(?:(matrix)\\s*\\(\\s*("+ne+")"+$+"("+ne+")"+$+"("+ne+")"+$+"("+ne+")"+$+"("+ne+")"+$+"("+ne+")\\s*\\))",H="(?:"+re+"|"+oe+"|"+K+"|"+ee+"|"+le+"|"+me+")",ae="(?:"+H+"(?:"+$+"*"+H+")*)",_e="^\\s*(?:"+ae+"?)\\s*$",Pe=new RegExp(_e),ke=new RegExp(H,"g");return function(ce){var xe=ie.concat(),Ie=[];if(!ce||ce&&!Pe.test(ce))return xe;ce.replace(ke,function(at){var Ke=new RegExp(H).exec(at).filter(function(ln){return!!ln}),Rt=Ke[1],pt=Ke.slice(2).map(parseFloat);switch(Rt){case"translate":J(xe,pt);break;case"rotate":pt[0]=s.util.degreesToRadians(pt[0]),R(xe,pt);break;case"scale":A(xe,pt);break;case"skewX":X(xe,pt,2);break;case"skewY":X(xe,pt,1);break;case"matrix":xe=pt;break}Ie.push(xe.concat()),xe=ie.concat()});for(var We=Ie[0];Ie.length>1;)Ie.shift(),We=s.util.multiplyTransformMatrices(We,Ie[0]);return We}}();function Y(R,A){var X,J;R.replace(/;\s*$/,"").split(";").forEach(function(ie){var ne=ie.split(":");X=ne[0].trim().toLowerCase(),J=ne[1].trim(),A[X]=J})}function z(R,A){var X,J;for(var ie in R)typeof R[ie]>"u"||(X=ie.toLowerCase(),J=R[ie],A[X]=J)}function q(R,A){var X={};for(var J in s.cssRules[A])if(G(R,J.split(" ")))for(var ie in s.cssRules[A][J])X[ie]=s.cssRules[A][J][ie];return X}function G(R,A){var X,J=!0;return X=W(R,A.pop()),X&&A.length&&(J=j(R,A)),X&&J&&A.length===0}function j(R,A){for(var X,J=!0;R.parentNode&&R.parentNode.nodeType===1&&A.length;)J&&(X=A.pop()),R=R.parentNode,J=W(R,X);return A.length===0}function W(R,A){var X=R.nodeName,J=R.getAttribute("class"),ie=R.getAttribute("id"),ne,$;if(ne=new RegExp("^"+X,"i"),A=A.replace(ne,""),ie&&A.length&&(ne=new RegExp("#"+ie+"(?![a-zA-Z\\-]+)","i"),A=A.replace(ne,"")),J&&A.length)for(J=J.split(" "),$=J.length;$--;)ne=new RegExp("\\."+J[$]+"(?![a-zA-Z\\-]+)","i"),A=A.replace(ne,"");return A.length===0}function te(R,A){var X;if(R.getElementById&&(X=R.getElementById(A)),X)return X;var J,ie,ne,$=R.getElementsByTagName("*");for(ie=0,ne=$.length;ie<ne;ie++)if(J=$[ie],A===J.getAttribute("id"))return J}function se(R){for(var A=I(R,["use","svg:use"]),X=0;A.length&&X<A.length;){var J=A[X],ie=J.getAttribute("xlink:href")||J.getAttribute("href");if(ie===null)return;var ne=ie.slice(1),$=J.getAttribute("x")||0,le=J.getAttribute("y")||0,me=te(R,ne).cloneNode(!0),ee=(me.getAttribute("transform")||"")+" translate("+$+", "+le+")",K,oe=A.length,re,H,ae,_e,Pe=s.svgNS;if(P(me),/^svg$/i.test(me.nodeName)){var ke=me.ownerDocument.createElementNS(Pe,"g");for(H=0,ae=me.attributes,_e=ae.length;H<_e;H++)re=ae.item(H),ke.setAttributeNS(Pe,re.nodeName,re.nodeValue);for(;me.firstChild;)ke.appendChild(me.firstChild);me=ke}for(H=0,ae=J.attributes,_e=ae.length;H<_e;H++)re=ae.item(H),!(re.nodeName==="x"||re.nodeName==="y"||re.nodeName==="xlink:href"||re.nodeName==="href")&&(re.nodeName==="transform"?ee=re.nodeValue+" "+ee:me.setAttribute(re.nodeName,re.nodeValue));me.setAttribute("transform",ee),me.setAttribute("instantiated_by_use","1"),me.removeAttribute("id"),K=J.parentNode,K.replaceChild(me,J),A.length===oe&&X++}}var E=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(R){if(!s.svgViewBoxElementsRegEx.test(R.nodeName))return{};var A=R.getAttribute("viewBox"),X=1,J=1,ie=0,ne=0,$,le,me,ee,K=R.getAttribute("width"),oe=R.getAttribute("height"),re=R.getAttribute("x")||0,H=R.getAttribute("y")||0,ae=R.getAttribute("preserveAspectRatio")||"",_e=!A||!(A=A.match(E)),Pe=!K||!oe||K==="100%"||oe==="100%",ke=_e&&Pe,ce={},xe="",Ie=0,We=0;if(ce.width=0,ce.height=0,ce.toBeParsed=ke,_e&&(re||H)&&R.parentNode&&R.parentNode.nodeName!=="#document"&&(xe=" translate("+u(re)+" "+u(H)+") ",me=(R.getAttribute("transform")||"")+xe,R.setAttribute("transform",me),R.removeAttribute("x"),R.removeAttribute("y")),ke)return ce;if(_e)return ce.width=u(K),ce.height=u(oe),ce;if(ie=-parseFloat(A[1]),ne=-parseFloat(A[2]),$=parseFloat(A[3]),le=parseFloat(A[4]),ce.minX=ie,ce.minY=ne,ce.viewBoxWidth=$,ce.viewBoxHeight=le,Pe?(ce.width=$,ce.height=le):(ce.width=u(K),ce.height=u(oe),X=ce.width/$,J=ce.height/le),ae=s.util.parsePreserveAspectRatioAttribute(ae),ae.alignX!=="none"&&(ae.meetOrSlice==="meet"&&(J=X=X>J?J:X),ae.meetOrSlice==="slice"&&(J=X=X>J?X:J),Ie=ce.width-$*X,We=ce.height-le*X,ae.alignX==="Mid"&&(Ie/=2),ae.alignY==="Mid"&&(We/=2),ae.alignX==="Min"&&(Ie=0),ae.alignY==="Min"&&(We=0)),X===1&&J===1&&ie===0&&ne===0&&re===0&&H===0)return ce;if((re||H)&&R.parentNode.nodeName!=="#document"&&(xe=" translate("+u(re)+" "+u(H)+") "),me=xe+" matrix("+X+" 0 0 "+J+" "+(ie*X+Ie)+" "+(ne*J+We)+") ",R.nodeName==="svg"){for(ee=R.ownerDocument.createElementNS(s.svgNS,"g");R.firstChild;)ee.appendChild(R.firstChild);R.appendChild(ee)}else ee=R,ee.removeAttribute("x"),ee.removeAttribute("y"),me=ee.getAttribute("transform")+me;return ee.setAttribute("transform",me),ce}function F(R,A){for(;R&&(R=R.parentNode);)if(R.nodeName&&A.test(R.nodeName.replace("svg:",""))&&!R.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(R,A,X,J){if(R){se(R);var ie=s.Object.__uid++,ne,$,le=P(R),me=s.util.toArray(R.getElementsByTagName("*"));if(le.crossOrigin=J&&J.crossOrigin,le.svgUid=ie,me.length===0&&s.isLikelyNode){me=R.selectNodes('//*[name(.)!="svg"]');var ee=[];for(ne=0,$=me.length;ne<$;ne++)ee[ne]=me[ne];me=ee}var K=me.filter(function(re){return P(re),s.svgValidTagNamesRegEx.test(re.nodeName.replace("svg:",""))&&!F(re,s.svgInvalidAncestorsRegEx)});if(!K||K&&!K.length){A&&A([],{});return}var oe={};me.filter(function(re){return re.nodeName.replace("svg:","")==="clipPath"}).forEach(function(re){var H=re.getAttribute("id");oe[H]=s.util.toArray(re.getElementsByTagName("*")).filter(function(ae){return s.svgValidTagNamesRegEx.test(ae.nodeName.replace("svg:",""))})}),s.gradientDefs[ie]=s.getGradientDefs(R),s.cssRules[ie]=s.getCSSRules(R),s.clipPaths[ie]=oe,s.parseElements(K,function(re,H){A&&(A(re,le,H,me),delete s.gradientDefs[ie],delete s.cssRules[ie],delete s.clipPaths[ie])},f(le),X,J)}};function L(R,A){var X=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],J="xlink:href",ie=A.getAttribute(J).slice(1),ne=te(R,ie);if(ne&&ne.getAttribute(J)&&L(R,ne),X.forEach(function(le){ne&&!A.hasAttribute(le)&&ne.hasAttribute(le)&&A.setAttribute(le,ne.getAttribute(le))}),!A.children.length)for(var $=ne.cloneNode(!0);$.firstChild;)A.appendChild($.firstChild);A.removeAttribute(J)}var Z=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");c(s,{parseFontDeclaration:function(R,A){var X=R.match(Z);if(X){var J=X[1],ie=X[3],ne=X[4],$=X[5],le=X[6];J&&(A.fontStyle=J),ie&&(A.fontWeight=isNaN(parseFloat(ie))?ie:parseFloat(ie)),ne&&(A.fontSize=u(ne)),le&&(A.fontFamily=le),$&&(A.lineHeight=$==="normal"?1:$)}},getGradientDefs:function(R){var A=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],X=I(R,A),J,ie=0,ne={};for(ie=X.length;ie--;)J=X[ie],J.getAttribute("xlink:href")&&L(R,J),ne[J.getAttribute("id")]=J;return ne},parseAttributes:function(R,A,X){if(R){var J,ie={},ne,$;typeof X>"u"&&(X=R.getAttribute("svgUid")),R.parentNode&&s.svgValidParentsRegEx.test(R.parentNode.nodeName)&&(ie=s.parseAttributes(R.parentNode,A,X));var le=A.reduce(function(ae,_e){return J=R.getAttribute(_e),J&&(ae[_e]=J),ae},{}),me=c(q(R,X),s.parseStyleAttribute(R));le=c(le,me),me[w]&&R.setAttribute(w,me[w]),ne=$=ie.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,le[y]&&(le[y]=ne=u(le[y],$));var ee,K,oe={};for(var re in le)ee=C(re),K=T(ee,le[re],ie,ne),oe[ee]=K;oe&&oe.font&&s.parseFontDeclaration(oe.font,oe);var H=c(ie,oe);return s.svgValidParentsRegEx.test(R.nodeName)?H:D(H)}},parseElements:function(R,A,X,J,ie){new s.ElementsParser(R,A,X,J,ie).parse()},parseStyleAttribute:function(R){var A={},X=R.getAttribute("style");return X&&(typeof X=="string"?Y(X,A):z(X,A)),A},parsePointsAttribute:function(R){if(!R)return null;R=R.replace(/,/g," ").trim(),R=R.split(/\s+/);var A=[],X,J;for(X=0,J=R.length;X<J;X+=2)A.push({x:parseFloat(R[X]),y:parseFloat(R[X+1])});return A},getCSSRules:function(R){var A=R.getElementsByTagName("style"),X,J,ie={},ne;for(X=0,J=A.length;X<J;X++){var $=A[X].textContent;$=$.replace(/\/\*[\s\S]*?\*\//g,""),$.trim()!==""&&(ne=$.split("}"),ne=ne.filter(function(le){return le.trim()}),ne.forEach(function(le){var me=le.split("{"),ee={},K=me[1].trim(),oe=K.split(";").filter(function(_e){return _e.trim()});for(X=0,J=oe.length;X<J;X++){var re=oe[X].split(":"),H=re[0].trim(),ae=re[1].trim();ee[H]=ae}le=me[0].trim(),le.split(",").forEach(function(_e){_e=_e.replace(/^svg/i,"").trim(),_e!==""&&(ie[_e]?s.util.object.extend(ie[_e],ee):ie[_e]=s.util.object.clone(ee))})}))}return ie},loadSVGFromURL:function(R,A,X,J){R=R.replace(/^\n\s*/,"").trim(),new s.util.request(R,{method:"get",onComplete:ie});function ie(ne){var $=ne.responseXML;if(!$||!$.documentElement)return A&&A(null),!1;s.parseSVGDocument($.documentElement,function(le,me,ee,K){A&&A(le,me,ee,K)},X,J)}},loadSVGFromString:function(R,A,X,J){var ie=new s.window.DOMParser,ne=ie.parseFromString(R.trim(),"text/xml");s.parseSVGDocument(ne.documentElement,function($,le,me,ee){A($,le,me,ee)},X,J)}})}(t),e.ElementsParser=function(a,s,c,f,l,u){this.elements=a,this.callback=s,this.options=c,this.reviver=f,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(c,f){c.setAttribute("svgUid",s.svgUid),s.createObject(c,f)})},a.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,c){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(c,s),this.options)}catch(l){e.log(l)}else this.checkIfDone()},a.createCallback=function(s,c){var f=this;return function(l){var u;f.resolveGradient(l,c,"fill"),f.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),f.resolveClipPath(l,c),f.reviver&&f.reviver(c,l),f.instances[s]=l,f.checkIfDone()}},a.extractPropertyDefinition=function(s,c,f){var l=s[c],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var d=u.exec(l)[1];return u.lastIndex=0,e[f][this.svgUid][d]}},a.resolveGradient=function(s,c,f){var l=this.extractPropertyDefinition(s,f,"gradientDefs");if(l){var u=c.getAttribute(f+"-opacity"),d=e.Gradient.fromElement(l,s,u,this.options);s.set(f,d)}},a.createClipPathCallback=function(s,c){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,c.push(f)}},a.resolveClipPath=function(s,c){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),l,u,d,p,m,g;if(f){p=[],d=e.util.invertTransform(s.calcTransformMatrix());for(var v=f[0].parentNode,_=c;_.parentNode&&_.getAttribute("clip-path")!==s.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var b=0;b<f.length;b++)l=f[b],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(s,p),this.options);p.length===1?f=p[0]:f=new e.Group(p),m=e.util.multiplyTransformMatrices(d,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,_);var g=e.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=c;function c(f,l){this.x=f,this.y=l}c.prototype={type:"point",constructor:c,add:function(f){return new c(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new c(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new c(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new c(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new c(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new c(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(f.x-this.x)*l,this.y+(f.y-this.y)*l)},distanceFrom:function(f){var l=this.x-f.x,u=this.y-f.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new c(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new c(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,l){return this.x=f,this.y=l,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var l=this.x,u=this.y;this.x=f.x,this.y=f.y,f.x=l,f.y=u},clone:function(){return new c(this.x,this.y)}}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function c(f){this.status=f,this.points=[]}s.Intersection=c,s.Intersection.prototype={constructor:c,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,l,u,d){var p,m=(d.x-u.x)*(f.y-u.y)-(d.y-u.y)*(f.x-u.x),g=(l.x-f.x)*(f.y-u.y)-(l.y-f.y)*(f.x-u.x),v=(d.y-u.y)*(l.x-f.x)-(d.x-u.x)*(l.y-f.y);if(v!==0){var _=m/v,b=g/v;0<=_&&_<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new s.Point(f.x+_*(l.x-f.x),f.y+_*(l.y-f.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},s.Intersection.intersectLinePolygon=function(f,l,u){var d=new c,p=u.length,m,g,v,_;for(_=0;_<p;_++)m=u[_],g=u[(_+1)%p],v=c.intersectLineLine(f,l,m,g),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},s.Intersection.intersectPolygonPolygon=function(f,l){var u=new c,d=f.length,p;for(p=0;p<d;p++){var m=f[p],g=f[(p+1)%d],v=c.intersectLinePolygon(m,g,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},s.Intersection.intersectPolygonRectangle=function(f,l,u){var d=l.min(u),p=l.max(u),m=new s.Point(p.x,d.y),g=new s.Point(d.x,p.y),v=c.intersectLinePolygon(d,m,f),_=c.intersectLinePolygon(m,p,f),b=c.intersectLinePolygon(p,g,f),y=c.intersectLinePolygon(g,d,f),w=new c;return w.appendPoints(v.points),w.appendPoints(_.points),w.appendPoints(b.points),w.appendPoints(y.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}s.Color=c,s.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,d){l/=255,u/=255,d/=255;var p,m,g,v=s.util.array.max([l,u,d]),_=s.util.array.min([l,u,d]);if(g=(v+_)/2,v===_)p=m=0;else{var b=v-_;switch(m=g>.5?b/(2-v-_):b/(v+_),v){case l:p=(u-d)/b+(u<d?6:0);break;case u:p=(d-l)/b+2;break;case d:p=(l-u)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,d,p;return u=l[0].toString(16),u=u.length===1?"0"+u:u,d=l[1].toString(16),d=d.length===1?"0"+d:d,p=l[2].toString(16),p=p.length===1?"0"+p:p,u.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),d=l[3];return this.setSource([u,u,u,d]),this},toBlackWhite:function(l){var u=this.getSource(),d=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),p=u[3];return l=l||127,d=Number(d)<Number(l)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(m[v]*(1-p)+g[v]*p));return u[3]=d,this.setSource(u),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(l,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(u-l)*6*d:d<1/2?u:d<2/3?l+(u-l)*(2/3-d)*6:l}s.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},s.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var d=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),p=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),m=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),u[4]?parseFloat(u[4]):1]}},s.Color.fromRgba=c.fromRgb,s.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},s.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(u){var d=(parseFloat(u[1])%360+360)%360/360,p=parseFloat(u[2])/(/%$/.test(u[2])?100:1),m=parseFloat(u[3])/(/%$/.test(u[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var b=m<=.5?m*(p+1):m+p-m*p,y=m*2-b;g=f(y,b,d+1/3),v=f(y,b,d),_=f(y,b,d-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),u[4]?parseFloat(u[4]):1]}},s.Color.fromHsla=c.fromHsl,s.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},s.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),d=u.length===3||u.length===4,p=u.length===8||u.length===4,m=d?u.charAt(0)+u.charAt(0):u.substring(0,2),g=d?u.charAt(1)+u.charAt(1):u.substring(2,4),v=d?u.charAt(2)+u.charAt(2):u.substring(4,6),_=p?d?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(t),function(a){var s=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],l={},u="left",d="top",p="right",m="bottom",g="center",v={top:m,bottom:d,left:p,right:u,center:g},_=s.util.radiansToDegrees,b=Math.sign||function(ee){return(ee>0)-(ee<0)||+ee};function y(ee,K){var oe=ee.angle+_(Math.atan2(K.y,K.x))+360;return Math.round(oe%360/45)}function w(ee,K){var oe=K.transform.target,re=oe.canvas,H=s.util.object.clone(K);H.target=oe,re&&re.fire("object:"+ee,H),oe.fire(ee,K)}function C(ee,K){var oe=K.canvas,re=oe.uniScaleKey,H=ee[re];return oe.uniformScaling&&!H||!oe.uniformScaling&&H}function T(ee){return ee.originX===g&&ee.originY===g}function O(ee,K,oe){var re=ee.lockScalingX,H=ee.lockScalingY;return!!(re&&H||!K&&(re||H)&&oe||re&&K==="x"||H&&K==="y")}function D(ee,K,oe){var re="not-allowed",H=C(ee,oe),ae="";if(K.x!==0&&K.y===0?ae="x":K.x===0&&K.y!==0&&(ae="y"),O(oe,ae,H))return re;var _e=y(oe,K);return c[_e]+"-resize"}function I(ee,K,oe){var re="not-allowed";if(K.x!==0&&oe.lockSkewingY||K.y!==0&&oe.lockSkewingX)return re;var H=y(oe,K)%4;return f[H]+"-resize"}function Y(ee,K,oe){return ee[oe.canvas.altActionKey]?l.skewCursorStyleHandler(ee,K,oe):l.scaleCursorStyleHandler(ee,K,oe)}function z(ee,K,oe){var re=ee[oe.canvas.altActionKey];if(K.x===0)return re?"skewX":"scaleY";if(K.y===0)return re?"skewY":"scaleX"}function q(ee,K,oe){return oe.lockRotation?"not-allowed":K.cursorStyle}function G(ee,K,oe,re){return{e:ee,transform:K,pointer:{x:oe,y:re}}}function j(ee){return function(K,oe,re,H){var ae=oe.target,_e=ae.getCenterPoint(),Pe=ae.translateToOriginPoint(_e,oe.originX,oe.originY),ke=ee(K,oe,re,H);return ae.setPositionByOrigin(Pe,oe.originX,oe.originY),ke}}function W(ee,K){return function(oe,re,H,ae){var _e=K(oe,re,H,ae);return _e&&w(ee,G(oe,re,H,ae)),_e}}function te(ee,K,oe,re,H){var ae=ee.target,_e=ae.controls[ee.corner],Pe=ae.canvas.getZoom(),ke=ae.padding/Pe,ce=ae.toLocalPoint(new s.Point(re,H),K,oe);return ce.x>=ke&&(ce.x-=ke),ce.x<=-ke&&(ce.x+=ke),ce.y>=ke&&(ce.y-=ke),ce.y<=ke&&(ce.y+=ke),ce.x-=_e.offsetX,ce.y-=_e.offsetY,ce}function se(ee){return ee.flipX!==ee.flipY}function E(ee,K,oe,re,H){if(ee[K]!==0){var ae=ee._getTransformedDimensions()[re],_e=H/ae*ee[oe];ee.set(oe,_e)}}function P(ee,K,oe,re){var H=K.target,ae=H._getTransformedDimensions(0,H.skewY),_e=te(K,K.originX,K.originY,oe,re),Pe=Math.abs(_e.x*2)-ae.x,ke=H.skewX,ce;Pe<2?ce=0:(ce=_(Math.atan2(Pe/H.scaleX,ae.y/H.scaleY)),K.originX===u&&K.originY===m&&(ce=-ce),K.originX===p&&K.originY===d&&(ce=-ce),se(H)&&(ce=-ce));var xe=ke!==ce;if(xe){var Ie=H._getTransformedDimensions().y;H.set("skewX",ce),E(H,"skewY","scaleY","y",Ie)}return xe}function F(ee,K,oe,re){var H=K.target,ae=H._getTransformedDimensions(H.skewX,0),_e=te(K,K.originX,K.originY,oe,re),Pe=Math.abs(_e.y*2)-ae.y,ke=H.skewY,ce;Pe<2?ce=0:(ce=_(Math.atan2(Pe/H.scaleY,ae.x/H.scaleX)),K.originX===u&&K.originY===m&&(ce=-ce),K.originX===p&&K.originY===d&&(ce=-ce),se(H)&&(ce=-ce));var xe=ke!==ce;if(xe){var Ie=H._getTransformedDimensions().x;H.set("skewY",ce),E(H,"skewX","scaleX","x",Ie)}return xe}function L(ee,K,oe,re){var H=K.target,ae=H.skewX,_e,Pe=K.originY;if(H.lockSkewingX)return!1;if(ae===0){var ke=te(K,g,g,oe,re);ke.x>0?_e=u:_e=p}else ae>0&&(_e=Pe===d?u:p),ae<0&&(_e=Pe===d?p:u),se(H)&&(_e=_e===u?p:u);K.originX=_e;var ce=W("skewing",j(P));return ce(ee,K,oe,re)}function Z(ee,K,oe,re){var H=K.target,ae=H.skewY,_e,Pe=K.originX;if(H.lockSkewingY)return!1;if(ae===0){var ke=te(K,g,g,oe,re);ke.y>0?_e=d:_e=m}else ae>0&&(_e=Pe===u?d:m),ae<0&&(_e=Pe===u?m:d),se(H)&&(_e=_e===d?m:d);K.originY=_e;var ce=W("skewing",j(F));return ce(ee,K,oe,re)}function R(ee,K,oe,re){var H=K,ae=H.target,_e=ae.translateToOriginPoint(ae.getCenterPoint(),H.originX,H.originY);if(ae.lockRotation)return!1;var Pe=Math.atan2(H.ey-_e.y,H.ex-_e.x),ke=Math.atan2(re-_e.y,oe-_e.x),ce=_(ke-Pe+H.theta),xe=!0;if(ae.snapAngle>0){var Ie=ae.snapAngle,We=ae.snapThreshold||Ie,at=Math.ceil(ce/Ie)*Ie,Ke=Math.floor(ce/Ie)*Ie;Math.abs(ce-Ke)<We?ce=Ke:Math.abs(ce-at)<We&&(ce=at)}return ce<0&&(ce=360+ce),ce%=360,xe=ae.angle!==ce,ae.angle=ce,xe}function A(ee,K,oe,re,H){H=H||{};var ae=K.target,_e=ae.lockScalingX,Pe=ae.lockScalingY,ke=H.by,ce,xe,Ie,We,at=C(ee,ae),Ke=O(ae,ke,at),Rt,pt,ln=K.gestureScale;if(Ke)return!1;if(ln)xe=K.scaleX*ln,Ie=K.scaleY*ln;else{if(ce=te(K,K.originX,K.originY,oe,re),Rt=ke!=="y"?b(ce.x):1,pt=ke!=="x"?b(ce.y):1,K.signX||(K.signX=Rt),K.signY||(K.signY=pt),ae.lockScalingFlip&&(K.signX!==Rt||K.signY!==pt))return!1;if(We=ae._getTransformedDimensions(),at&&!ke){var Tt=Math.abs(ce.x)+Math.abs(ce.y),gn=K.original,Zi=Math.abs(We.x*gn.scaleX/ae.scaleX)+Math.abs(We.y*gn.scaleY/ae.scaleY),mn=Tt/Zi;xe=gn.scaleX*mn,Ie=gn.scaleY*mn}else xe=Math.abs(ce.x*ae.scaleX/We.x),Ie=Math.abs(ce.y*ae.scaleY/We.y);T(K)&&(xe*=2,Ie*=2),K.signX!==Rt&&ke!=="y"&&(K.originX=v[K.originX],xe*=-1,K.signX=Rt),K.signY!==pt&&ke!=="x"&&(K.originY=v[K.originY],Ie*=-1,K.signY=pt)}var To=ae.scaleX,Ya=ae.scaleY;return ke?(ke==="x"&&ae.set("scaleX",xe),ke==="y"&&ae.set("scaleY",Ie)):(!_e&&ae.set("scaleX",xe),!Pe&&ae.set("scaleY",Ie)),To!==ae.scaleX||Ya!==ae.scaleY}function X(ee,K,oe,re){return A(ee,K,oe,re)}function J(ee,K,oe,re){return A(ee,K,oe,re,{by:"x"})}function ie(ee,K,oe,re){return A(ee,K,oe,re,{by:"y"})}function ne(ee,K,oe,re){return ee[K.target.canvas.altActionKey]?l.skewHandlerX(ee,K,oe,re):l.scalingY(ee,K,oe,re)}function $(ee,K,oe,re){return ee[K.target.canvas.altActionKey]?l.skewHandlerY(ee,K,oe,re):l.scalingX(ee,K,oe,re)}function le(ee,K,oe,re){var H=K.target,ae=te(K,K.originX,K.originY,oe,re),_e=H.strokeWidth/(H.strokeUniform?H.scaleX:1),Pe=T(K)?2:1,ke=H.width,ce=Math.abs(ae.x*Pe/H.scaleX)-_e;return H.set("width",Math.max(ce,0)),ke!==ce}function me(ee,K,oe,re){var H=K.target,ae=oe-K.offsetX,_e=re-K.offsetY,Pe=!H.get("lockMovementX")&&H.left!==ae,ke=!H.get("lockMovementY")&&H.top!==_e;return Pe&&H.set("left",ae),ke&&H.set("top",_e),(Pe||ke)&&w("moving",G(ee,K,oe,re)),Pe||ke}l.scaleCursorStyleHandler=D,l.skewCursorStyleHandler=I,l.scaleSkewCursorStyleHandler=Y,l.rotationWithSnapping=W("rotating",j(R)),l.scalingEqually=W("scaling",j(X)),l.scalingX=W("scaling",j(J)),l.scalingY=W("scaling",j(ie)),l.scalingYOrSkewingX=ne,l.scalingXOrSkewingY=$,l.changeWidth=W("resizing",j(le)),l.skewHandlerX=L,l.skewHandlerY=Z,l.dragHandler=me,l.scaleOrSkewActionName=z,l.rotationStyleHandler=q,l.fireEvent=w,l.wrapWithFixedAnchor=j,l.wrapWithFireEvent=W,l.getLocalPoint=te,s.controlsUtils=l}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians,f=s.controlsUtils;function l(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=p,O=m,D;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>b?(D=_,d.scale(1,b/_),O=m*_/b):b>_?(D=b,d.scale(_/b,1),T=p*b/_):D=_,d.lineWidth=1,d.beginPath(),d.arc(T,O,D/2,0,2*Math.PI,!1),d[w](),C&&d.stroke(),d.restore()}function u(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=_/2,O=b/2;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(c(v.angle)),d[w+"Rect"](-T,-O,_,b),C&&d.strokeRect(-T,-O,_,b),d.restore()}f.renderCircleControl=l,f.renderSquareControl=u}(t),function(a){var s=a.fabric||(a.fabric={});function c(f){for(var l in f)this[l]=f[l]}s.Control=c,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,l){return l.cursorStyle},getActionName:function(f,l){return l.actionName},getVisibility:function(f,l){var u=f._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,l){var u=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},l);return u},calcCornerCoords:function(f,l,u,d,p){var m,g,v,_,b=p?this.touchSizeX:this.sizeX,y=p?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var w=Math.atan2(y,b),C=Math.sqrt(b*b+y*y)/2,T=w-s.util.degreesToRadians(f),O=Math.PI/2-w-s.util.degreesToRadians(f);m=C*s.util.cos(T),g=C*s.util.sin(T),v=C*s.util.cos(O),_=C*s.util.sin(O)}else{var D=b&&y?b:l;C=D*.7071067812;var T=s.util.degreesToRadians(45-f);m=v=C*s.util.cos(T),g=_=C*s.util.sin(T)}return{tl:{x:u-_,y:d-v},tr:{x:u+m,y:d-g},bl:{x:u-m,y:d+g},br:{x:u+_,y:d+v}}},render:function(f,l,u,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,l,u,d,p);break;default:s.controlsUtils.renderSquareControl.call(this,f,l,u,d,p)}}}}(t),function(){function a(u,d){var p=u.getAttribute("style"),m=u.getAttribute("offset")||0,g,v,_,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var y=p.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var w=y[b].split(/\s*:\s*/),C=w[0].trim(),T=w[1].trim();C==="stop-color"?g=T:C==="stop-opacity"&&(_=T)}}return g||(g=u.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=u.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*d,{offset:m,color:g.toRgb(),opacity:_}}function s(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var d,p=this;Object.keys(u).forEach(function(m){p[m]=u[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,d={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(d.r1=u.coords.r1||0,d.r2=u.coords.r2||0),this.coords=d,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var d in u){var p=new e.Color(u[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(u){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,d,u),d},toSVG:function(u,v){var p=f(this.coords,!0),m,g,v=v||{},_,b,y=f(this.colorStops,!0),w=p.r1>p.r2,C=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,O=-this.offsetY,D=!!v.additionalTransform,I=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(j,W){return j.offset-W.offset}),I==="objectBoundingBox"?(T/=u.width,O/=u.height):(T+=u.width/2,O+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(T-=u.pathOffset.x,O-=u.pathOffset.y),C[4]-=T,C[5]-=O,b='id="SVGID_'+this.id+'" gradientUnits="'+I+'"',b+=' gradientTransform="'+(D?v.additionalTransform+" ":"")+e.util.matrixToSVG(C)+'" ',this.type==="linear"?_=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",b,' cx="',w?p.x1:p.x2,'" cy="',w?p.y1:p.y2,'" r="',w?p.r1:p.r2,'" fx="',w?p.x2:p.x1,'" fy="',w?p.y2:p.y1,`">
`]),this.type==="radial"){if(w)for(y=y.concat(),y.reverse(),m=0,g=y.length;m<g;m++)y[m].offset=1-y[m].offset;var Y=Math.min(p.r1,p.r2);if(Y>0){var z=Math.max(p.r1,p.r2),q=Y/z;for(m=0,g=y.length;m<g;m++)y[m].offset+=q*(1-y[m].offset)}}for(m=0,g=y.length;m<g;m++){var G=y[m];_.push("<stop ",'offset="',G.offset*100+"%",'" style="stop-color:',G.color,typeof G.opacity<"u"?";stop-opacity: "+G.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(u){var d,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=u.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=u.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof _<"u"&&(v=new e.Color(v).setAlpha(_).toRgba()),d.addColorStop(b,v)}return d}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=u.getElementsByTagName("stop"),_,b=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=u.getAttribute("gradientTransform")||"",w=[],C,T,O=0,D=0,I;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(_="linear",C=s(u)):(_="radial",C=c(u)),T=v.length;T--;)w.push(a(v[T],g));I=e.parseTransformAttribute(y),l(d,C,m,b),b==="pixels"&&(O=-d.left,D=-d.top);var Y=new e.Gradient({id:u.getAttribute("id"),type:_,coords:C,colorStops:w,gradientUnits:b,gradientTransform:I,offsetX:O,offsetY:D});return Y}});function l(u,d,p,m){var g,v;Object.keys(d).forEach(function(_){g=d[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(d[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[_]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,c){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){c&&c(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(l,u){f.source=l,c&&c(f,u)},null,this.crossOrigin)}},toObject:function(s){var c=e.Object.NUM_FRACTION_DIGITS,f,l;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),l={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,s),l},toSVG:function(s){var c=typeof this.source=="function"?this.source():this.source,f=c.width/s.width,l=c.height/s.height,u=this.offsetX/s.width,d=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,d&&(l+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,u&&(f+=Math.abs(u))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+d+'" width="'+f+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var c in s)this[c]=s[c]},toLive:function(s){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":s.createPattern(c,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var l in f)this[l]=f[l];this.id=s.Object.__uid++},_parseShadow:function(f){var l=f.trim(),u=s.Shadow.reOffsetsAndBlur.exec(l)||[],d=l.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var l=40,u=40,d=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),m=20,g=new s.Color(this.color);return f.width&&f.height&&(l=c((Math.abs(p.x)+this.blur)/f.width,d)*100+m,u=c((Math.abs(p.y)+this.blur)/f.height,d)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,d)+'" dy="'+c(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},l=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(f[u]=this[u])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,s=e.util.getElementOffset,c=e.util.removeFromArray,f=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,d=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,b){return typeof v=="string"?e.util.loadImage(v,function(y,w){if(y){var C=new e.Image(y,b);this[g]=C,C.canvas=this}_&&_(y,w)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var b in g)_=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,b=this.overlayImage,y,w,C;for(this.viewportTransform=g,w=0,C=this._objects.length;w<C;w++)y=this._objects[w],y.group||y.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,b=this.viewportTransform.slice(0);g=l(g,u(this.viewportTransform)),b[0]=v,b[3]=v;var y=l(g,b);return b[4]+=_.x-y.x,b[5]+=_.y-y.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,b=u(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y:_},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,b;for(_=0,b=v.length;_<b;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],b=this[v+"Image"],y=this.viewportTransform,w=this[v+"Vpt"];if(!(!_&&!b)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var C=_.gradientTransform||_.patternTransform;C&&g.transform(C[0],C[1],C[2],C[3],C[4],C[5]),g.fill(),g.restore()}b&&(g.save(),w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=u(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var y=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=b),y},__serializeBgOverlay:function(g,v){var _={},b=this.backgroundImage,y=this.overlayImage,w=this.backgroundColor,C=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(_.background=w.toObject(v)):w&&(_.background=w),C&&C.toObject?C.excludeFromExport||(_.overlay=C.toObject(v)):C&&(_.overlay=C),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,g,v)),y&&!y.excludeFromExport&&(_.overlayImage=this._toObject(y,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,b=v.height||this.height,y,w='viewBox="0 0 '+this.width+" "+this.height+'" ',C=e.Object.NUM_FRACTION_DIGITS;v.viewBox?w='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,w='viewBox="'+f(-y[4]/y[0],C)+" "+f(-y[5]/y[3],C)+" "+f(this.width/y[0],C)+" "+f(this.height/y[3],C)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',b,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var b=g[_+"Color"];if(b&&b.toLive){var y=g[_+"Vpt"],w=g.viewportTransform,C={width:g.width/(y?w[0]:1),height:g.height/(y?w[3]:1)};return b.toSVG(C,{additionalTransform:y?e.util.matrixToSVG(w):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,b,y,w,C,T,O,D,I,Y=e.fontPaths,z=[];for(this._objects.forEach(function G(j){z.push(j),j._objects&&j._objects.forEach(G)}),D=0,I=z.length;D<I;D++)if(_=z[D],b=_.fontFamily,!(_.type.indexOf("text")===-1||v[b]||!Y[b])&&(v[b]=!0,!!_.styles)){y=_.styles;for(C in y){w=y[C];for(O in w)T=w[O],b=T.fontFamily,!v[b]&&Y[b]&&(v[b]=!0)}}for(var q in v)g+=[`		@font-face {
`,"			font-family: '",q,`';
`,"			src: url('",Y[q],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,b,y,w=this._objects;for(b=0,y=w.length;b<y;b++)_=w[b],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],b=this.viewportTransform,y=this.width,w=this.height;if(_)if(_.toLive){var C=_.repeat,T=e.util.invertTransform(b),O=this[v+"Vpt"],D=O?e.util.matrixToSVG(T):"";g.push('<rect transform="'+D+" translate(",y/2,",",w/2,')"',' x="',_.offsetX-y/2,'" y="',_.offsetY-w/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?_.source.width:y,'" height="',C==="repeat-x"||C==="no-repeat"?_.source.height:w,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=y.length;_--;)b=y[_],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=0;_<y.length;_++)b=y[_],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=0;b<T.length;b++)y=T[b],w=this._objects.indexOf(y),w>0+O&&(C=w-1,c(this._objects,y),this._objects.splice(C,0,y)),O++;else w=this._objects.indexOf(g),w!==0&&(C=this._findNewLowerIndex(g,w,v),c(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var b,y;if(_)for(b=v,y=v-1;y>=0;--y){var w=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(w){b=y;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=T.length;b--;)y=T[b],w=this._objects.indexOf(y),w<this._objects.length-1-O&&(C=w+1,c(this._objects,y),this._objects.splice(C,0,y)),O++;else w=this._objects.indexOf(g),w!==this._objects.length-1&&(C=this._findNewUpperIndex(g,w,v),c(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var b,y,w;if(_)for(b=v,y=v+1,w=this._objects.length;y<w;++y){var C=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(C){b=y;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,c=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=e.devicePixelRatio),c.shadowColor=s.color,c.shadowBlur=s.blur*f,c.shadowOffsetX=s.offsetX*f,c.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,c){var f=s.midPointFrom(c);return a.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,f=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[f-2],c[f-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new e.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new e.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,c,f=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===l.x&&f.y===l.y){var u=this.width/1e3;f=new e.Point(f.x,f.y),l=new e.Point(l.x,l.y),f.x-=u,l.x+=u}for(a.moveTo(f.x,f.y),s=1,c=this._points.length;s<c;s++)this._drawSegment(a,f,l),f=this._points[s],l=this._points[s+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=e.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var c=this.canvas.getZoom(),f=Math.pow(s/c,2),l,u=a.length-1,d=a[0],p=[d],m;for(l=1;l<u-1;l++)m=Math.pow(d.x-a[l].x,2)+Math.pow(d.y-a[l].y,2),m>=f&&(d=a[l],p.push(d));return p.push(a[u]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var c=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,s),c.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,c,f=this.points;for(this._saveAndTransform(a),s=0,c=f.length;s<c;s++)this.dot(a,f[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,c;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,c=this.points.length;s<c;s++){var l=this.points[s],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),f.push(u)}var d=new e.Group(f);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new e.Point(a.x,a.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=c,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],c=0,f=this.sprayChunks.length;c<f;c++)for(var l=this.sprayChunks[c],u=0,d=l.length;u<d;u++){var p=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new e.Group(s);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},c,f,l;for(f=0,l=a.length;f<l;f++)c=a[f].left+""+a[f].top,s[c]||(s[c]=a[f]);var u=[];for(c in s)u.push(s[c]);return u},render:function(a){var s=this.canvas.contextTop,c,f;for(s.fillStyle=this.color,this._saveAndTransform(s),c=0,f=a.length;c<f;c++){var l=a[c];typeof l.opacity<"u"&&(s.globalAlpha=l.opacity),s.fillRect(l.x,l.y,l.width,l.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,c;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,c=this.sprayChunks.length;s<c;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,c,f,l=this.width/2,u;for(u=0;u<this.density;u++){s=e.util.getRandomInt(a.x-l,a.x+l),c=e.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var d=new e.Point(s,c);d.width=f,this.randomOpacity&&(d.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,s=5,c=e.util.createCanvasElement(),f=c.getContext("2d");return c.width=c.height=a+s,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),c=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),s}}),function(){var a=e.util.getPointer,s=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,d,p;if(l.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)u=this._objects[m],l.indexOf(u)===-1?d.push(u):p.push(u);l.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var d=l.calcTransformMatrix(),p=e.util.invertTransform(d),m=this.restorePointerVpt(u);return e.util.transformPoint(m,p)},isTargetTransparent:function(l,u,d){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:u,y:d}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),y=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return y}var v=this.contextCache,_=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=_;var y=e.util.isTransparent(v,u,d,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(d){return l[d]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var d=this.getActiveObjects(),p=this._activeObject;return!u||u&&p&&d.length>1&&d.indexOf(u)===-1&&p!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&p&&p!==u},_shouldCenterTransform:function(l,u,d){if(l){var p;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?p=this.centeredScaling||l.centeredScaling:u==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!d:d}},_getOriginFromCorner:function(l,u){var d={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?d.x="right":(u==="mr"||u==="tr"||u==="br")&&(d.x="left"),u==="tl"||u==="mt"||u==="tr"?d.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(d.y="top"),d},_getActionFromCorner:function(l,u,d,p){if(!u||!l)return"drag";var m=p.controls[u];return m.getActionName(d,m,p)},_setupCurrentTransform:function(l,u,d){if(u){var p=this.getPointer(l),m=u.__corner,g=u.controls[m],v=d&&m?g.getActionHandler(l,u,g):e.controlsUtils.dragHandler,_=this._getActionFromCorner(d,m,l,u),b=this._getOriginFromCorner(u,m),y=l[this.centeredKey],w={target:u,action:_,actionHandler:v,corner:m,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:p.x-u.left,offsetY:p.y-u.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:y,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,_,y)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,d=new e.Point(u.ex,u.ey),p=e.util.transformPoint(d,this.viewportTransform),m=new e.Point(u.ex+u.left,u.ey+u.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),b=Math.max(p.x,g.x),y=Math.max(p.y,g.y),w=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,_,b-v,y-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=w,_+=w,b-=w,y-=w,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,_,b-v,y-_))},findTarget:function(l,u){if(!this.skipTargetFind){var d=!0,p=this.getPointer(l,d),m=this._activeObject,g=this.getActiveObjects(),v,_,b=c(l),y=g.length>1&&!u||g.length===1;if(this.targets=[],y&&m._findTargetCorner(p,b)||g.length>1&&!u&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var w=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&w&&v&&w!==v&&(w=v,this.targets=_),w}},_checkTarget:function(l,u,d){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var p=this.isTargetTransparent(u,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var d,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,u):u;if(this._checkTarget(v,g,u)){d=l[p],d.subTargetCheck&&d instanceof e.Group&&(m=this._searchPossibleTargets(d._objects,u),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var d=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,u||(d=this.restorePointerVpt(d));var b=this.getRetinaScaling();return b!==1&&(d.x/=b,d.y/=b),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:d.x*_.width,y:d.y*_.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),e.util.addClass(d,"upper-canvas "+l),this.wrapperEl.appendChild(d),this._copyCanvasStyle(u,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,d=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=d,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var d=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:u,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:u,target:v}),m.push(v))}),l.length>0&&p.length>0?d&&this.fire("selection:updated",{e:u,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:u,selected:m}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:g})},setActiveObject:function(l,u){var d=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(d,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var d=this._activeObject;if(d){if(d.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),d=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:d,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,u,d);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return u.forEach(function(p){d[p]=l[p]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,d),this._unwindGroupTransformOnObject(u,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var a=e.util.addListener,s=e.util.removeListener,c=3,f=2,l=1,u={passive:!1};function d(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,u),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(e.document,p+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,u),s(e.document,p+"move",this._onMouseMove,u),s(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,u),a(e.document,"touchmove",this._onMouseMove,u),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,u),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,u)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,u),s(e.document,"touchmove",this._onMouseMove,u);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,u),a(m,g+"move",this._onMouseMove,u))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!y&&m===this._activeObject)}var w,C;if(m){if(w=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var T=m.controls[w],O=T&&T.getMouseUpHandler(p,m,T);O&&(C=this.getPointer(p),O(p,g,C.x,C.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==w)){var D=g.target&&g.target.controls[g.corner],I=D&&D.getMouseUpHandler(p,m,T);C=C||this.getPointer(p),I&&I(p,g,C.x,C.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,b=this.targets||[],y={e:p,target:_,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(p),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),_&&_.fire("mouse"+m,y);for(var w=0;w<b.length;w++)b[w].fire("mouse"+m,y)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var y=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=y,m===this._activeObject&&(y||!_)){this._setupCurrentTransform(p,m,b);var w=m.controls[y],g=this.getPointer(p),C=w&&w.getMouseDownHandler(p,m,w);C&&C(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,b=g.oldTarget,y,w,C=b!==p,T=g.canvasEvtIn,O=g.canvasEvtOut;C&&(v={e:m,target:p,previousTarget:b},_={e:m,target:b,nextTarget:p}),w=p&&C,y=b&&C,y&&(O&&this.fire(O,_),b.fire(g.evtOut,_)),w&&(T&&this.fire(T,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,b=m.action,y=!1,w=m.actionHandler;w&&(y=w(p,m,v,_)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,f){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&f&&f.selectable&&this.selection&&(l!==f||l.type==="activeSelection")&&!f.onSelect({e:c})},_handleGrouping:function(c,f){var l=this._activeObject;l.__corner||f===l&&(f=this.findTarget(c,!0),!f||!f.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(f,c):this._createActiveSelection(f,c))},_updateActiveSelection:function(c,f){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),f)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,f)},_createActiveSelection:function(c,f){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,f),this._fireSelectionEvents(l,f)},_createGroup:function(c){var f=this._objects,l=f.indexOf(this._activeObject)<f.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var f=this._collectObjects(c),l;f.length===1?this.setActiveObject(f[0],c):f.length>1&&(l=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var f=[],l,u=this._groupSelector.ex,d=this._groupSelector.ey,p=u+this._groupSelector.left,m=d+this._groupSelector.top,g=new e.Point(a(u,p),a(d,m)),v=new e.Point(s(u,p),s(d,m)),_=!this.selectionFullyContained,b=u===p&&d===m,y=this._objects.length;y--&&(l=this._objects[y],!(!(!l||!l.selectable||!l.visible)&&(_&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||_&&l.containsPoint(g,null,!0)||_&&l.containsPoint(v,null,!0))&&(f.push(l),b))););return f.length>1&&(f=f.filter(function(w){return!w.onSelect({e:c})})),f},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",c=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(f,a);return e.util.toDataURL(l,s,c)},toCanvasElement:function(a,s){a=a||1,s=s||{};var c=(s.width||this.width)*a,f=(s.height||this.height)*a,l=this.getZoom(),u=this.width,d=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,_=this.interactive,b=[p,0,0,p,g,v],y=this.enableRetinaScaling,w=e.util.createCanvasElement(),C=this.contextTop;return w.width=c,w.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=m,this.width=u,this.height=d,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=y,this.contextTop=C,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,s,c){if(a){var f=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),l=this,u=f.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){l.clear(),l._setBgOverlay(f,function(){u?l._enlivenObjects([u],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,f,p,d,s)}):l.__setupCanvas.call(l,f,p,d,s)})},c),this}},__setupCanvas:function(a,s,c,f){var l=this;s.forEach(function(u,d){l.insertAt(u,d)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,s){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var f=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,f),this.__setBgOverlay("overlayImage",a.overlayImage,c,f),this.__setBgOverlay("backgroundColor",a.background,c,f),this.__setBgOverlay("overlayColor",a.overlay,c,f)},__setBgOverlay:function(a,s,c,f){var l=this;if(!s){c[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([s],function(u){l[a]=u[0],c[a]=!0,f&&f()}):this["set"+e.util.string.capitalize(a,!0)](s,function(){c[a]=!0,f&&f()})},_enlivenObjects:function(a,s,c){if(!a||a.length===0){s&&s([]);return}e.util.enlivenObjects(a,function(f){s&&s(f)},null,c)},_toDataURL:function(a,s){this.clone(function(c){s(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,c){this.clone(function(f){c(f.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var c=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(c,function(){a&&a(f)})})},cloneWithoutData:function(a){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var c=new e.Canvas(s);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.string.capitalize,d=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,_=g.width,b=g.height,y=s.maxCacheSideLimit,w=s.minCacheSideLimit;if(_<=y&&b<=y&&_*b<=v)return _<w&&(g.width=w),b<w&&(g.height=w),g;var C=_/b,T=s.util.limitDimsByArea(C,v),O=s.util.capValue,D=O(w,T.x,y),I=O(w,T.y,y);return _>D&&(g.zoomX/=_/D,g.width=D,g.capped=!0),b>I&&(g.zoomY/=b/I,g.height=I,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:_+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),w=s.minCacheSideLimit,C=y.width,T=y.height,O,D,I=y.zoomX,Y=y.zoomY,z=C!==this.cacheWidth||T!==this.cacheHeight,q=this.zoomX!==I||this.zoomY!==Y,G=z||q,j=0,W=0,te=!1;if(z){var se=this._cacheCanvas.width,E=this._cacheCanvas.height,P=C>se||T>E,F=(C<se*.9||T<E*.9)&&se>w&&E>w;te=P||F,P&&!y.capped&&(C>w||T>w)&&(j=C*.1,W=T*.1)}return this instanceof s.Text&&this.path&&(G=!0,te=!0,j+=this.getHeightOfLine(0)*this.zoomX,W+=this.getHeightOfLine(0)*this.zoomY),G?(te?(b.width=Math.ceil(C+j),b.height=Math.ceil(T+W)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),O=y.x/2,D=y.y/2,this.cacheTranslationX=Math.round(b.width/2-O)+O,this.cacheTranslationY=Math.round(b.height/2-D)+D,this.cacheWidth=C,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(I,Y),this.zoomX=I,this.zoomY=Y,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();v*=b*y,_*=b*y}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",b=this[g]!==v,y=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=s.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),b=this.calcTransformMatrix(),y,w,C;v=v||{},w=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,C=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(_,b),y=s.util.qrDecompose(b),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(d(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?w&&this.drawBordersInGroup(g,y,v):w&&this.drawBorders(g,v),C&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,b,y=_&&_.viewportTransform[0]||1,w=_&&_.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),_&&_._isRetinaScaling()&&(y*=s.devicePixelRatio,w*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(y+w)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*y*b.scaleX,g.shadowOffsetY=v.offsetY*w*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,y=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,y):g.transform(1,0,0,1,b,y),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),y,w=this.canvas.getRetinaScaling(),C=_.x/this.scaleX/w,T=_.y/this.scaleY/w;b.width=C,b.height=T,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(C,0),y.lineTo(C,T),y.lineTo(0,T),y.closePath(),y.translate(C/2,T/2),y.scale(_.zoomX/this.scaleX/w,_.zoomY/this.scaleY/w),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(w*this.scaleX/_.zoomX,w*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):s.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new s.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=s.util,_=v.saveObjectTransform(this),b=this.group,y=this.shadow,w=Math.abs,C=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var T=s.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),D=this.shadow,I,Y={x:0,y:0},z,q,G;D&&(z=D.blur,D.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),Y.x=2*Math.round(w(D.offsetX)+z)*w(I.scaleX),Y.y=2*Math.round(w(D.offsetY)+z)*w(I.scaleY)),q=O.width+Y.x,G=O.height+Y.y,T.width=Math.ceil(q),T.height=Math.ceil(G);var j=new s.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(j.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(j.width/2,j.height/2),"center","center");var W=this.canvas;j.add(this);var te=j.toCanvasElement(C||1,g);return this.shadow=y,this.set("canvas",W),b&&(this.group=b),this.set(_).setCoords(),j._objects=[],j.dispose(),j=null,te},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(_=s.util.rotatePoint(_,b,d(-this.angle))),{x:_.x-b.x,y:_.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),c(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,_,b){var y=s[g];v=f(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(w){typeof w[0]<"u"&&(v.fill=w[0]),typeof w[1]<"u"&&(v.stroke=w[1]),s.util.enlivenObjectEnlivables(v,v,function(){var C=b?new y(v[b],v):new y(v);_&&_(C)})})},s.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,l,u,d,p){var m=f.x,g=f.y,v,_,b;return typeof l=="string"?l=s[l]:l-=.5,typeof d=="string"?d=s[d]:d-=.5,v=d-l,typeof u=="string"?u=c[u]:u-=.5,typeof p=="string"?p=c[p]:p-=.5,_=p-u,(v||_)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+_*b.y),new e.Point(m,g)},translateToCenterPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,l,u,"center","center");return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},translateToOriginPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,"center","center",l,u);return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,f,l)},toLocalPoint:function(f,l,u){var d=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof u<"u"?p=this.translateToGivenOrigin(d,"center","center",l,u):p=new e.Point(this.left,this.top),m=new e.Point(f.x,f.y),this.angle&&(m=e.util.rotatePoint(m,d,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,l,u){var d=this.translateToCenterPoint(f,l,u),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var l=a(this.angle),u=this.getScaledWidth(),d=e.util.cos(l)*u,p=e.util.sin(l)*u,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof f=="string"?g=s[f]:g=f-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var s=e.util,c=s.degreesToRadians,f=s.multiplyTransformMatrices,l=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,d){return d?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,d){return a(this._getCoords(u,d))},intersectsWithRect:function(u,d,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,u,d);return v.status==="Intersection"},intersectsWithObject:function(u,d,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(d,p),u.getCoords(d,p));return m.status==="Intersection"||u.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(u,d,p)},isContainedWithinObject:function(u,d,p){for(var m=this.getCoords(d,p),g=d?u.aCoords:u.lineCoords,v=0,_=u._getImageLines(g);v<4;v++)if(!u.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(u,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=u.x&&g.left+g.width<=d.x&&g.top>=u.y&&g.top+g.height<=d.y},containsPoint:function(u,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(u,v);return _!==0&&_%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,u);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,u)?!0:this._containsCenterOfCanvas(d,p,u)},_containsCenterOfCanvas:function(u,d,p){var m={x:(u.x+d.x)/2,y:(u.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,u))return!0;var m=this.getCoords(!0,u).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,u)},_getImageLines:function(u){var d={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return d},_findCrossPoints:function(u,d){var p,m,g,v,_,b=0,y;for(var w in d)if(y=d[w],!(y.o.y<u.y&&y.d.y<u.y)&&!(y.o.y>=u.y&&y.d.y>=u.y)&&(y.o.x===y.d.x&&y.o.x>=u.x?_=y.o.x:(p=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),g=u.y-p*u.x,v=y.o.y-m*y.o.x,_=-(g-v)/(p-m)),_>=u.x&&(b+=1),b===2))break;return b},getBoundingRect:function(u,d){var p=this.getCoords(u,d);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(u/this.width/p)},scaleToHeight:function(u,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(u/this.height/p)},calcLineCoords:function(){var u=this.getViewportTransform(),d=this.padding,p=c(this.angle),m=s.cos(p),g=s.sin(p),v=m*d,_=g*d,b=v+_,y=v-_,w=this.calcACoords(),C={tl:l(w.tl,u),tr:l(w.tr,u),bl:l(w.bl,u),br:l(w.br,u)};return d&&(C.tl.x-=y,C.tl.y-=b,C.tr.x+=b,C.tr.y-=y,C.bl.x-=b,C.bl.y+=y,C.br.x+=y,C.br.y+=b),C},calcOCoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,d),g=f(m,u),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(b,y,w){_[y]=b.positionHandler(v,g,w)}),_},calcACoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=f(d,u),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var d="_",p="";return!u&&this.group&&(p=this.group.transformMatrixKey(u)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var d=this.calcOwnMatrix();if(u||!this.group)return d;var p=this.transformMatrixKey(u),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=f(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===u)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=u,d.value=s.composeMatrix(m),d.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,d=this.width+u,p=this.height+u;return{x:d,y:p}},_getTransformedDimensions:function(u,d){typeof u>"u"&&(u=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,v=u===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:d});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(u,d){return this.strokeUniform?{x:u+this.strokeWidth,y:d+this.strokeWidth}:{x:u,y:d}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),d=this._getTransformedDimensions(),p=l(d,u,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,f){if(f){if(f.toLive)return c+": url(#SVGID_"+f.id+"); ";var l=new e.Color(f),u=c+": "+l.toRgb()+"; ",d=l.getAlpha();return d!==1&&(u+=c+"-opacity: "+d.toString()+"; "),u}else return c+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var f=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),y=a("fill",this.fill),w=a("stroke",this.stroke);return[w,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",y,"fill-rule: ",f,"; ","opacity: ",v,";",b,_].join("")},getSvgSpanStyles:function(c,f){var l="; ",d=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",d=d,p=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",g=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?a("fill",c.fill):"",_=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[_,u,d,p,m,g,b,v,y,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(f){return c[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,f){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(f||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,f){f=f||{};var l=f.reviver,u=f.additionalTransform||"",d=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=d,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,f){f=f||{};var l=f.noStyle,u=f.reviver,d=l?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,b=this.fill,y=this.shadow,w,C=[],T,O=c.indexOf("COMMON_PARTS"),D=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(u)+`</clipPath>
`),v&&C.push("<g ",p,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),w=[d,g,l?"":this.addPaintOrder()," ",D?'transform="'+D+'" ':""].join(""),c[O]=w,b&&b.toLive&&C.push(b.toSVG(this)),_&&_.toLive&&C.push(_.toSVG(this)),y&&C.push(y.toSVG(this)),m&&C.push(T),C.push(c.join("")),C.push(`</g>
`),v&&C.push(`</g>
`),u?u(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,s="stateProperties";function c(l,u,d){var p={},m=!0;d.forEach(function(g){p[g]=l[g]}),a(l[u],p,m)}function f(l,u,d){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!f(l[p],u[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!u||typeof u!="object"||!d&&g.length!==Object.keys(u).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||s;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!f(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||s,d="_"+u;return this[d]?(c(this,d,this[u]),l&&l.stateProperties&&c(this,d,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||s;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,l=s.y,u,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),u=this._findCrossPoints({x:f,y:l},d),u!==0&&u%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var c in this.controls)s(this.controls[c],c,this)},_setCornerCoords:function(){var s=this.oCoords;for(var c in s){var f=this.controls[c];s[c].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[c].x,s[c].y,!1),s[c].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[c].x,s[c].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var c=this.getCenterPoint(),f=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return s.translate(c.x,c.y),s.scale(1/l[0],1/l[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,c){c=c||{};var f=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=f.x+l,d=f.y+l,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(s,c.borderDashArray||this.borderDashArray),s.strokeRect(-u/2,-d/2,u,d),p&&(s.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,s.moveTo(g.x*u,g.y*d),s.lineTo(g.x*u+g.offsetX,g.y*d+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,c,f){f=f||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=l.x+u*(d?this.canvas.getZoom():c.scaleX)+p,g=l.y+u*(d?this.canvas.getZoom():c.scaleY)+p;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,c){c=c||{},s.save();var f=this.canvas.getRetinaScaling(),l,u;return s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){u=m.oCoords[p],d.getVisibility(m,p)&&(l&&(u=e.util.transformPoint(u,l)),d.render(s,u.x,u.y,c,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=c,this},setControlsVisibility:function(s){s||(s={});for(var c in s)this.setControlVisible(c,s[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){a.set("left",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){a.set("top",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){a.set("opacity",d),u.requestRenderAll(),l()},onComplete:function(){u.remove(a),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,c,f=[];for(s in arguments[0])a.push(s);for(var l=0,u=a.length;l<u;l++)s=a[l],c=l!==u-1,f.push(this._animate(s,arguments[0][s],arguments[1],c));return f}else return this._animate.apply(this,arguments)},_animate:function(a,s,c,f){var l=this,u;s=s.toString(),c?c=e.util.object.clone(c):c={},~a.indexOf(".")&&(u=a.split("."));var d=l.colorProperties.indexOf(a)>-1||u&&l.colorProperties.indexOf(u[1])>-1,p=u?this.get(u[0])[u[1]]:this.get(a);"from"in c||(c.from=p),d||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:c.from,endValue:s,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,_){return c.abort.call(l,g,v,_)},onChange:function(g,v,_){u?l[u[0]][u[1]]=g:l.set(a,g),!f&&c.onChange&&c.onChange(g,v,_)},onComplete:function(g,v,_){f||(l.setCoords(),c.onComplete&&c.onComplete(g,v,_))}};return d?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof l[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return c(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,v=d*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(d,p,m){m=m||{};var g=s.parseAttributes(d,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,c(g,m)))},s.Line.fromObject=function(d,p){function m(v){delete v.points,p&&p(v)}var g=f(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],s.Object._fromObject("Line",g,m,"points")};function u(d,p){var m=d.origin,g=d.axis1,v=d.axis2,_=d.dimension,b=p.nearest,y=p.center,w=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case y:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case w:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,_=s.util.cos(m)*v,b=s.util.sin(m)*v,y=s.util.cos(g)*v,w=s.util.sin(g)*v,C=p>180?"1":"0";l=['<path d="M '+_+" "+b," A "+v+" "+v," 0 ",+C+" 1"," "+y+" "+w,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(l,u){var d=s.parseAttributes(l,s.Circle.ATTRIBUTE_NAMES);if(!f(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,u(new s.Circle(d))};function f(l){return"radius"in l&&l.radius>=0}s.Circle.fromObject=function(l,u){s.Object._fromObject("Circle",l,u)}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(c){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,l),c.lineTo(0,-l),c.lineTo(f,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,f=this.height/2,l=[-c+" "+f,"0 "+-f,c+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),s.Triangle.fromObject=function(c,f){return s.Object._fromObject("Triangle",c,f)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,l){switch(this.callSuper("_set",f,l),f){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,c,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,l){var u=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new s.Ellipse(u))},s.Ellipse.fromObject=function(f,l){s.Object._fromObject("Ellipse",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||u!==0,_=1-.5522847498;f.beginPath(),f.moveTo(m+l,g),f.lineTo(m+d-l,g),v&&f.bezierCurveTo(m+d-_*l,g,m+d,g+_*u,m+d,g+u),f.lineTo(m+d,g+p-u),v&&f.bezierCurveTo(m+d,g+p-_*u,m+d-_*l,g+p,m+d-l,g+p),f.lineTo(m+l,g+p),v&&f.bezierCurveTo(m+_*l,g+p,m,g+p-_*u,m,g+p-u),f.lineTo(m,g+u),v&&f.bezierCurveTo(m,g+_*u,m+_*l,g,m+l,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,l,u){if(!f)return l(null);u=u||{};var d=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new s.Rect(c(u?s.util.object.clone(u):{},d));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},s.Rect.fromObject=function(f,l){return s.Object._fromObject("Rect",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.array.min,l=s.util.array.max,u=s.util.toFixed,d=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=l(p,"x")||0,_=l(p,"y")||0,b=v-m,y=_-g;return{left:m,top:g,width:b,height:y}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)p.push(u(this.points[_].x-m,v),",",u(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](_,c(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,l){s.Object._fromObject("Polygon",f,l,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max,l=s.util.object.extend,u=s.util.object.clone,d=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=u(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,b=0,y=0,w=0,C=-this.pathOffset.x,T=-this.pathOffset.y;p.beginPath();for(var O=0,D=this.path.length;O<D;++O)switch(m=this.path[O],m[0]){case"L":_=m[1],b=m[2],p.lineTo(_+C,b+T);break;case"M":_=m[1],b=m[2],g=_,v=b,p.moveTo(_+C,b+T);break;case"C":_=m[5],b=m[6],y=m[3],w=m[4],p.bezierCurveTo(m[1]+C,m[2]+T,y+C,w+T,_+C,b+T);break;case"Q":p.quadraticCurveTo(m[1]+C,m[2]+T,m[3]+C,m[4]+T),_=m[3],b=m[4],y=m[1],w=m[2];break;case"z":case"Z":_=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,b=0,y=0,w,C=0,T=this.path.length;C<T;++C){switch(g=this.path[C],g[0]){case"L":b=g[1],y=g[2],w=[];break;case"M":b=g[1],y=g[2],v=b,_=y,w=[];break;case"C":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],y=g[6];break;case"Q":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],y=g[4];break;case"z":case"Z":b=v,y=_;break}w.forEach(function(G){p.push(G.x),m.push(G.y)}),p.push(b),m.push(y)}var O=c(p)||0,D=c(m)||0,I=f(p)||0,Y=f(m)||0,z=I-O,q=Y-D;return{left:O,top:D,width:z,height:q}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){_.clipPath=b[0],m&&m(_)}):m&&m(_)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,l(v,g)))}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,d){u=u||{},this._objects=[],d&&this.callSuper("initialize",u),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],u)},_updateObjectCoords:function(l,u){var d=l.left,p=l.top,m=!0;l.set({left:d-u.x,top:p-u.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),l&&(u&&s.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(l,u);if(l==="canvas")for(;d--;)this._objects[d]._set(l,u);s.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=u;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,l);return p.objects=d,p},toDatalessObject:function(l){var u,d=this.sourcePath;if(d)u=d;else{var p=this.includeDefaultValues;u=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(l);return g.includeDefaultValues=v,_})}var m=s.Object.prototype.toDatalessObject.call(this,l);return m.objects=u,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=s.Object.prototype.shouldCache.call(this);if(l){for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,d=this._objects.length;u<d;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){s.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new s.ActiveSelection([]);return p.set(d),p.type="activeSelection",u.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,u.add(m)}),p.canvas=u,p._objects=l,u._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],d=[],p,m,g,v=["tr","br","bl","tl"],_=0,b=this._objects.length,y,w=v.length;_<b;++_){for(p=this._objects[_],g=p.calcACoords(),y=0;y<w;y++)m=v[y],u.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(u,d,l)},_getBounds:function(l,u,d){var p=new s.Point(c(l),c(u)),m=new s.Point(f(l),f(u)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,b=m.y-p.y||0;this.width=_,this.height=b,d||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)u.push("		",this._objects[d].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],d=0,p=this._objects.length;d<p;d++)u.push("	",this._objects[d].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),s.Group.fromObject=function(l,u){var d=l.objects,p=s.util.object.clone(l,!0);if(delete p.objects,typeof d=="string"){s.loadSVGFromURL(d,function(m){var g=s.util.groupSVGElements(m,l,d),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(_){g.clipPath=_[0],u&&u(g)}):u&&u(g)});return}s.util.enlivenObjects(d,function(m){s.util.enlivenObjectEnlivables(l,p,function(){u&&u(new s.Group(m,p,!0))})})})}(t),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(c,f){f=f||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),l=new s.Group([]);if(delete f.type,l.set(f),c.forEach(function(d){d.canvas.remove(d),d.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,f,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,f),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,d=this._objects.length;u<d;u++)this._objects[u]._renderControls(c,l);c.restore()}}),s.ActiveSelection.fromObject=function(c,f){s.util.enlivenObjects(c.objects,function(l){delete c.objects,f&&f(new s.ActiveSelection(l,c,!0))})})}(t),function(a){var s=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(c,f)},getElement:function(){return this._element||{}},setElement:function(c,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,-l),c.lineTo(f,-l),c.lineTo(f,l),c.lineTo(-f,l),c.lineTo(-f,-l),c.closePath()}},toObject:function(c){var f=[];this.filters.forEach(function(u){u&&f.push(u.toObject())});var l=s(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],f=[],l,u=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,l=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?c=c.concat(l,f):c=c.concat(f,l),c},getSrc:function(c){var f=c?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(c,f,l){return e.util.loadImage(c,function(u,d){this.setElement(u,l),this._setWidthHeight(),f&&f(this,d)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,f=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,d=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>f&&d>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=d;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=d,e.filterBackend.applyFilters([c],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,l=f.naturalWidth||f.width,u=f.naturalHeight||f.height;if(this._element===this._originalElement){var d=e.util.createCanvasElement();d.width=l,d.height=u,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var f=this._element;if(f){var l=this._filterScalingX,u=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),b=f.naturalWidth||f.width,y=f.naturalHeight||f.height,w=v*l,C=_*u,T=m(d*l,b-w),O=m(p*u,y-C),D=-d/2,I=-p/2,Y=m(d,b/l-v),z=m(p,y/u-_);f&&c.drawImage(f,w,C,T,O,D,I,Y,z)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,f){this.setElement(e.util.getById(c),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,f){c&&c.length?e.util.enlivenObjects(c,function(l){f&&f(l)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(c){c||(c={});var f=this.getElement();this.width=c.width||f.naturalWidth||f.width||0,this.height=c.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,l=this._element.height,u=1,d=1,p=0,m=0,g=0,v=0,_,b=this.width,y=this.height,w={width:b,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=d=e.util.findScaleToFit(this._element,w),_=(b-f*u)/2,c.alignX==="Min"&&(p=-_),c.alignX==="Max"&&(p=_),_=(y-l*d)/2,c.alignY==="Min"&&(m=-_),c.alignY==="Max"&&(m=_)),c.meetOrSlice==="slice"&&(u=d=e.util.findScaleToCover(this._element,w),_=f-b/u,c.alignX==="Mid"&&(g=_/2),c.alignX==="Max"&&(g=_),_=l-y/d,c.alignY==="Mid"&&(v=_/2),c.alignY==="Max"&&(v=_),f=b/u,l=y/d)):(u=b/f,d=y/l),{width:f,height:l,scaleX:u,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,f){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,d){if(d){f&&f(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var g=new e.Image(u,l);f(g,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,f,l){e.util.loadImage(c,function(u,d){f&&f(new e.Image(u,l),d)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,f,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],f,s(l?e.util.object.clone(l):{},u))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},c=a.onComplete||s,f=a.onChange||s,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),f()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,f){var l="precision "+f+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),l=f.getContext("webgl")||f.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,d[p])){e.webGlPrecision=d[p];break}}return this.isSupported=u,u},e.WebglFilterBackend=s;function s(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(c,f){this.dispose(),this.createWebGLCanvas(c,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,f)},chooseFastestCopyGLTo2DMethod:function(c,f){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&u&&d&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(c*f*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=h;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:f,targetCanvas:m},_,b,y;m.width=c,m.height=f,_=window.performance.now(),o.call(v,this.gl,v),b=window.performance.now()-_,_=window.performance.now(),h.call(v,this.gl,v),y=window.performance.now()-_,b>y?(this.imageBuffer=g,this.copyGLTo2D=h):this.copyGLTo2D=o}},createWebGLCanvas:function(c,f){var l=e.util.createCanvasElement();l.width=c,l.height=f;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=l.getContext("webgl",u);d||(d=l.getContext("experimental-webgl",u)),d&&(d.clearColor(0,0,0,0),this.canvas=l,this.gl=d)},applyFilters:function(c,f,l,u,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:m,sourceTexture:this.createTexture(m,l,u,!g&&f),targetTexture:this.createTexture(m,l,u),originalTexture:g||this.createTexture(m,l,u,!g&&f),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),c.forEach(function(b){b&&b.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,f,l,u,d){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,l,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,f){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,f={renderer:"",vendor:""};if(!c)return f;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),d=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(f.renderer=u.toLowerCase()),d&&(f.vendor=d.toLowerCase())}return this.gpuInfo=f,f}}}();function r(a){var s=a.targetCanvas,c=s.width,f=s.height,l=a.destinationWidth,u=a.destinationHeight;(c!==l||f!==u)&&(s.width=l,s.height=u)}function o(a,s){var c=a.canvas,f=s.targetCanvas,l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1);var u=c.height-f.height;l.drawImage(c,0,u,f.width,f.height,0,0,f.width,f.height)}function h(a,s){var c=s.targetCanvas,f=c.getContext("2d"),l=s.destinationWidth,u=s.destinationHeight,d=l*u*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);a.readPixels(0,0,l,u,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,u);f.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,f,l,u,d){var p=d.getContext("2d");p.drawImage(f,0,0,l,u);var m=p.getImageData(0,0,l,u),g=p.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:m,originalEl:f,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return c.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,c){s=s||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,c),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,s),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var u=a.createProgram();if(a.attachShader(u,f),a.attachShader(u,l),a.linkProgram(u),!a.getProgramParameter(u,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(u));var d=this.getAttributeLocations(a,u),p=this.getUniformLocations(a,u)||{};return p.uStepW=a.getUniformLocation(u,"uStepW"),p.uStepH=a.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,c){var f=s.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,c,f;a.passes>1?(c=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==f)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,c,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var c=s[a].length;c--;)if(this[a][c]!==s[a][c])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(c.program),this.sendAttributeData(s,c.attributeLocations,a.aPosition),s.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,c.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,s){var c=new e.Image.filters[a.type](a);return s&&s(c),c},function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.ColorMatrix=f(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m=this.matrix,g,v,_,b,y,w=this.colorsOnly;for(y=0;y<p;y+=4)g=d[y],v=d[y+1],_=d[y+2],w?(d[y]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(b=d[y+3],d[y]=g*m[0]+v*m[1]+_*m[2]+b*m[3]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+b*m[8]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+b*m[13]+m[14]*255,d[y+3]=g*m[15]+v*m[16]+_*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,p),l.uniform4fv(u.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Brightness=f(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,d=u.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Convolute=l(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return u.programCache.hasOwnProperty(p)||(u.programCache[p]=this.createProgram(u.context,m)),u.programCache[p]},applyTo2d:function(u){var d=u.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=d.width,b=d.height,y=u.ctx.createImageData(_,b),w=y.data,C=this.opaque?1:0,T,O,D,I,Y,z,q,G,j,W,te,se,E;for(te=0;te<b;te++)for(W=0;W<_;W++){for(Y=(te*_+W)*4,T=0,O=0,D=0,I=0,E=0;E<g;E++)for(se=0;se<g;se++)q=te+E-v,z=W+se-v,!(q<0||q>=b||z<0||z>=_)&&(G=(q*_+z)*4,j=m[E*g+se],T+=p[G]*j,O+=p[G+1]*j,D+=p[G+2]*j,C||(I+=p[G+3]*j));w[Y]=T,w[Y+1]=O,w[Y+2]=D,C?w[Y+3]=p[Y+3]:w[Y+3]=I}u.imageData=y},getUniformLocations:function(u,d){return{uMatrix:u.getUniformLocation(d,"uMatrix"),uOpaque:u.getUniformLocation(d,"uOpaque"),uHalfSize:u.getUniformLocation(d,"uHalfSize"),uSize:u.getUniformLocation(d,"uSize")}},sendUniformData:function(u,d){u.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Grayscale=f(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var d=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,d)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var d=1;l.uniform1i(u.uMode,d)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Invert=f(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Noise=l(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var d=u.imageData,p=d.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(u,d){return{uNoise:u.getUniformLocation(d,"uNoise"),uSeed:u.getUniformLocation(d,"uSeed")}},sendUniformData:function(u,d){u.uniform1f(d.uNoise,this.noise/255),u.uniform1f(d.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Pixelate=f(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,d=u.data,p=u.height,m=u.width,g,v,_,b,y,w,C,T,O,D,I;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,b=d[g],y=d[g+1],w=d[g+2],C=d[g+3],D=Math.min(v+this.blocksize,p),I=Math.min(_+this.blocksize,m),T=v;T<D;T++)for(O=_;O<I;O++)g=T*4*m+O*4,d[g]=b,d[g+1]=y,d[g+2]=w,d[g+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.RemoveColor=l(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var d=u.imageData,p=d.data,m,g=this.distance*255,v,_,b,y=new s.Color(this.color).getSource(),w=[y[0]-g,y[1]-g,y[2]-g],C=[y[0]+g,y[1]+g,y[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],b=p[m+2],v>w[0]&&_>w[1]&&b>w[2]&&v<C[0]&&_<C[1]&&b<C[2]&&(p[m+3]=0)},getUniformLocations:function(u,d){return{uLow:u.getUniformLocation(d,"uLow"),uHigh:u.getUniformLocation(d,"uHigh")}},sendUniformData:function(u,d){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];u.uniform4fv(d.uLow,g),u.uniform4fv(d.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=f(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),s.Image.filters[u].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendColor=f(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d;return l.programCache.hasOwnProperty(u)||(d=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m,g,v,_,b,y,w,C=1-this.alpha;w=new s.Color(this.color).getSource(),m=w[0]*this.alpha,g=w[1]*this.alpha,v=w[2]*this.alpha;for(var T=0;T<p;T+=4)switch(_=d[T],b=d[T+1],y=d[T+2],this.mode){case"multiply":d[T]=_*m/255,d[T+1]=b*g/255,d[T+2]=y*v/255;break;case"screen":d[T]=255-(255-_)*(255-m)/255,d[T+1]=255-(255-b)*(255-g)/255,d[T+2]=255-(255-y)*(255-v)/255;break;case"add":d[T]=_+m,d[T+1]=b+g,d[T+2]=y+v;break;case"diff":case"difference":d[T]=Math.abs(_-m),d[T+1]=Math.abs(b-g),d[T+2]=Math.abs(y-v);break;case"subtract":d[T]=_-m,d[T+1]=b-g,d[T+2]=y-v;break;case"darken":d[T]=Math.min(_,m),d[T+1]=Math.min(b,g),d[T+2]=Math.min(y,v);break;case"lighten":d[T]=Math.max(_,m),d[T+1]=Math.max(b,g),d[T+2]=Math.max(y,v);break;case"overlay":d[T]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,d[T+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,d[T+2]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255;break;case"exclusion":d[T]=m+_-2*m*_/255,d[T+1]=g+b-2*g*b/255,d[T+2]=v+y-2*v*y/255;break;case"tint":d[T]=m+_*C,d[T+1]=g+b*C,d[T+2]=v+y*C}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var d=new s.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,l.uniform4fv(u.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendImage=f(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,d=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,d,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,d=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/d,1]},applyTo2d:function(l){var u=l.imageData,d=l.filterBackend.resources,p=u.data,m=p.length,g=u.width,v=u.height,_,b,y,w,C,T,O,D,I,Y,z=this.image,q;d.blendImage||(d.blendImage=s.util.createCanvasElement()),I=d.blendImage,Y=I.getContext("2d"),I.width!==g||I.height!==v?(I.width=g,I.height=v):Y.clearRect(0,0,g,v),Y.setTransform(z.scaleX,0,0,z.scaleY,z.left,z.top),Y.drawImage(z._element,0,0,g,v),q=Y.getImageData(0,0,g,v).data;for(var G=0;G<m;G+=4)switch(C=p[G],T=p[G+1],O=p[G+2],D=p[G+3],_=q[G],b=q[G+1],y=q[G+2],w=q[G+3],this.mode){case"multiply":p[G]=C*_/255,p[G+1]=T*b/255,p[G+2]=O*y/255,p[G+3]=D*w/255;break;case"mask":p[G+3]=w;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var d=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(l,u){s.Image.fromObject(l.image,function(d){var p=s.util.object.clone(l);p.image=d,u(new s.Image.filters.BlendImage(p))})}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.pow,f=Math.floor,l=Math.sqrt,u=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!_.programCache.hasOwnProperty(y)){var w=this.generateShader(b);_.programCache[y]=this.createProgram(_.context,w)}return _.programCache[y]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),w=new Array(y),C=1;C<=y;C++)w[C-1]=_(C*b);return w},generateShader:function(w){for(var b=new Array(w),y=this.fragmentSourceTOP,w,C=1;C<=w;C++)b[C-1]=C+".0 * uDelta";return y+="uniform float uTaps["+w+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(T,O){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+O+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+O+`];
`,y+="  sum += 2.0 * uTaps["+O+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(b){if(b>=_||b<=-_)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/_;return p(b)/b*p(y)/y}},applyTo2d:function(_){var b=_.imageData,y=this.scaleX,w=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/w;var C=b.width,T=b.height,O=d(C*y),D=d(T*w),I;this.resizeType==="sliceHack"?I=this.sliceByTwo(_,C,T,O,D):this.resizeType==="hermite"?I=this.hermiteFastResize(_,C,T,O,D):this.resizeType==="bilinear"?I=this.bilinearFiltering(_,C,T,O,D):this.resizeType==="lanczos"&&(I=this.lanczosResize(_,C,T,O,D)),_.imageData=I},sliceByTwo:function(_,b,y,w,C){var T=_.imageData,O=.5,D=!1,I=!1,Y=b*O,z=y*O,q=s.filterBackend.resources,G,j,W=0,te=0,se=b,E=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),G=q.sliceByTwo,(G.width<b*1.5||G.height<y)&&(G.width=b*1.5,G.height=y),j=G.getContext("2d"),j.clearRect(0,0,b*1.5,y),j.putImageData(T,0,0),w=f(w),C=f(C);!D||!I;)b=Y,y=z,w<f(Y*O)?Y=f(Y*O):(Y=w,D=!0),C<f(z*O)?z=f(z*O):(z=C,I=!0),j.drawImage(G,W,te,b,y,se,E,Y,z),W=se,te=E,E+=z;return j.getImageData(W,te,w,C)},lanczosResize:function(_,b,y,w,C){function T(F){var L,Z,R,A,X,J,ie,ne,$,le,me;for(E.x=(F+.5)*z,P.x=f(E.x),L=0;L<C;L++){for(E.y=(L+.5)*q,P.y=f(E.y),X=0,J=0,ie=0,ne=0,$=0,Z=P.x-W;Z<=P.x+W;Z++)if(!(Z<0||Z>=b)){le=f(1e3*u(Z-E.x)),se[le]||(se[le]={});for(var ee=P.y-te;ee<=P.y+te;ee++)ee<0||ee>=y||(me=f(1e3*u(ee-E.y)),se[le][me]||(se[le][me]=Y(l(c(le*G,2)+c(me*j,2))/1e3)),R=se[le][me],R>0&&(A=(ee*b+Z)*4,X+=R,J+=R*O[A],ie+=R*O[A+1],ne+=R*O[A+2],$+=R*O[A+3]))}A=(L*w+F)*4,I[A]=J/X,I[A+1]=ie/X,I[A+2]=ne/X,I[A+3]=$/X}return++F<w?T(F):D}var O=_.imageData.data,D=_.ctx.createImageData(w,C),I=D.data,Y=this.lanczosCreate(this.lanczosLobes),z=this.rcpScaleX,q=this.rcpScaleY,G=2/this.rcpScaleX,j=2/this.rcpScaleY,W=m(z*this.lanczosLobes/2),te=m(q*this.lanczosLobes/2),se={},E={},P={};return T(0)},bilinearFiltering:function(_,b,y,w,C){var T,O,D,I,Y,z,q,G,j,W,te,se,E=0,P,F=this.rcpScaleX,L=this.rcpScaleY,Z=4*(b-1),R=_.imageData,A=R.data,X=_.ctx.createImageData(w,C),J=X.data;for(q=0;q<C;q++)for(G=0;G<w;G++)for(Y=f(F*G),z=f(L*q),j=F*G-Y,W=L*q-z,P=4*(z*b+Y),te=0;te<4;te++)T=A[P+te],O=A[P+4+te],D=A[P+Z+te],I=A[P+Z+4+te],se=T*(1-j)*(1-W)+O*j*(1-W)+D*W*(1-j)+I*j*W,J[E++]=se;return X},hermiteFastResize:function(_,b,y,w,C){for(var T=this.rcpScaleX,O=this.rcpScaleY,D=m(T/2),I=m(O/2),Y=_.imageData,z=Y.data,q=_.ctx.createImageData(w,C),G=q.data,j=0;j<C;j++)for(var W=0;W<w;W++){for(var te=(W+j*w)*4,se=0,E=0,P=0,F=0,L=0,Z=0,R=0,A=(j+.5)*O,X=f(j*O);X<(j+1)*O;X++)for(var J=u(A-(X+.5))/I,ie=(W+.5)*T,ne=J*J,$=f(W*T);$<(W+1)*T;$++){var le=u(ie-($+.5))/D,me=l(ne+le*le);me>1&&me<-1||(se=2*me*me*me-3*me*me+1,se>0&&(le=4*($+X*b),R+=se*z[le+3],P+=se,z[le+3]<255&&(se=se*z[le+3]/250),F+=se*z[le],L+=se*z[le+1],Z+=se*z[le+2],E+=se))}G[te]=F/E,G[te+1]=L/E,G[te+2]=Z/E,G[te+3]=R/P}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Contrast=f(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,d,m,p=u.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Saturation=f(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),d[g]+=v!==d[g]?(v-d[g])*m:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*m:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*m:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Vibrance=f(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.vibrance,g,v,_,b;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),_=(d[g]+d[g+1]+d[g+2])/3,b=Math.abs(v-_)*2/255*m,d[g]+=v!==d[g]?(v-d[g])*b:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*b:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*b:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Blur=f(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,d,p,m=l.imageData.width,g=l.imageData.height;u.blurLayer1||(u.blurLayer1=s.util.createCanvasElement(),u.blurLayer2=s.util.createCanvasElement()),d=u.blurLayer1,p=u.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var v=d.getContext("2d"),_=p.getContext("2d"),b=15,y,w,C,T,O=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),_.clearRect(0,0,m,g),T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=O*w*m+y,_.globalAlpha=1-Math.abs(w),_.drawImage(d,C,y),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=O*w*g+y,_.globalAlpha=1-Math.abs(w),_.drawImage(d,y,C),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);l.ctx.drawImage(d,0,0);var D=l.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),D},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var d=this.chooseRightDelta();l.uniform2fv(u.delta,d)},chooseRightDelta:function(){var l=1,u=[0,0],d;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),d=l*this.blur*.12,this.horizontal?u[0]=d:u[1]=d,u}}),c.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Gamma=f(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=this.gamma,m=d.length,g=1/p[0],v=1/p[1],_=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,_)*255;for(b=0,m=d.length;b<m;b+=4)d[b]=this.rVals[d[b]],d[b+1]=this.gVals[d[b+1]],d[b+2]=this.bVals[d[b+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Composed=f(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(l,u){var d=l.subFilters||[],p=d.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return u&&u(m),m}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.HueRotation=f(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=s.util.cos(l),d=s.util.sin(l),p=1/3,m=Math.sqrt(p)*d,g=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=u+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=u+p*g},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=s.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,d,p,m,g,v,_=0,b=this._textLines.length;_<b;_++)if(!(this.textAlign!=="justify"&&(_===b-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],u=this.getLineWidth(_),u<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){d=v.length,l=(this.width-u)/d;for(var y=0,w=m.length;y<=w;y++)g=this.__charBounds[_][y],this._reSpaceAndTab.test(m[y])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,d){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,d)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,d=this._textLines.length;u<d;u++){var p=this.getLineWidth(u);p>l&&(l=p)}return l},_renderTextLine:function(l,u,d,p,m,g){this._renderChars(l,u,d,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,d,p=l.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),b=0,y=0,w,C,T=this.path,O,D=0,I=this._textLines.length;D<I;D++){if(u=this.getHeightOfLine(D),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",D)){_+=u;continue}m=this._textLines[D],d=this._getLineLeftOffset(D),y=0,b=0,g=this.getValueOfPropertyAt(D,0,"textBackgroundColor");for(var Y=0,z=m.length;Y<z;Y++)w=this.__charBounds[D][Y],C=this.getValueOfPropertyAt(D,Y,"textBackgroundColor"),T?(l.save(),l.translate(w.renderLeft,w.renderTop),l.rotate(w.angle),l.fillStyle=C,C&&l.fillRect(-w.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),w.width,u/this.lineHeight),l.restore()):C!==g?(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=g,g&&l.fillRect(O,_,y,u/this.lineHeight),b=w.left,y=w.width,g=C):y+=w.kernedWidth;C&&!T&&(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=C,l.fillRect(O,_,y,u/this.lineHeight)),_+=u}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();s.charWidthsCache[u]||(s.charWidthsCache[u]={});var d=s.charWidthsCache[u],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(l,u,d,p){var m=this.getFontCache(u),g=this._getFontDeclaration(u),v=this._getFontDeclaration(p),_=d+l,b=g===v,y,w,C,T=u.fontSize/this.CACHE_FONT_SIZE,O;if(d&&m[d]!==void 0&&(C=m[d]),m[l]!==void 0&&(O=y=m[l]),b&&m[_]!==void 0&&(w=m[_],O=w-C),y===void 0||C===void 0||w===void 0){var D=this.getMeasuringContext();this._setTextStyles(D,u,!0)}return y===void 0&&(O=y=D.measureText(l).width,m[l]=y),C===void 0&&b&&d&&(C=D.measureText(d).width,m[d]=C),b&&w===void 0&&(w=D.measureText(_).width,m[_]=w,O=w-C),{width:y*T,kernedWidth:O*T}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,d,p,m=this._textLines[l],g,v,_=0,b=new Array(m.length),y=0,w,C,T=this.path,O=this.pathSide==="right";for(this.__charBounds[l]=b,d=0;d<m.length;d++)p=m[d],v=this._getGraphemeBox(p,l,d,g),b[d]=v,u+=v.kernedWidth,g=p;if(b[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(C=T.segmentsInfo[T.segmentsInfo.length-1].length,w=s.util.getPointOnPath(T.path,0,T.segmentsInfo),w.x+=T.pathOffset.x,w.y+=T.pathOffset.y,this.textAlign){case"left":y=O?C-u:0;break;case"center":y=(C-u)/2;break;case"right":y=O?0:C-u;break}for(y+=this.pathStartOffset*(O?-1:1),d=O?m.length-1:0;O?d>=0:d<m.length;O?d--:d++)v=b[d],y>C?y%=C:y<0&&(y+=C),this._setGraphemeOnPath(y,v,w),y+=v.kernedWidth}return{width:u,numOfSpaces:_}},_setGraphemeOnPath:function(l,u,d){var p=l+u.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);u.renderLeft=g.x-d.x,u.renderTop=g.y-d.y,u.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,d,p,m){var g=this.getCompleteStyleDeclaration(u,d),v=p?this.getCompleteStyleDeclaration(u,d-1):{},_=this._measureChar(l,g,p,v),b=_.kernedWidth,y=_.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),y+=w,b+=w);var C={width:y,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(d>0&&!m){var T=this.__charBounds[u][d-1];C.left=T.left+T.width+_.kernedWidth-_.width}return C},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],d=this.getHeightOfChar(l,0),p=1,m=u.length;p<m;p++)d=Math.max(this.getHeightOfChar(l,p),d);return this.__lineHeights[l]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,d=0,p=this._textLines.length;d<p;d++)l=this.getHeightOfLine(d),u+=d===p-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),b=_/this.lineHeight,y=this._getLineLeftOffset(g);this._renderTextLine(u,l,this._textLines[g],p+y,m+d+b,g),d+=_}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,d,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,b,y,w="",C,T=0,O,D=this.path,I=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!D,Y=this.direction==="ltr",z=this.direction==="ltr"?1:-1,q,G=u.canvas.getAttribute("dir");if(u.save(),G!==this.direction&&(u.canvas.setAttribute("dir",Y?"ltr":"rtl"),u.direction=Y?"ltr":"rtl",u.textAlign=Y?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,I){this._renderChar(l,u,g,0,d.join(""),p,m,v),u.restore();return}for(var j=0,W=d.length-1;j<=W;j++)O=j===W||this.charSpacing||D,w+=d[j],C=this.__charBounds[g][j],T===0?(p+=z*(C.kernedWidth-C.width),T+=C.width):T+=C.kernedWidth,_&&!O&&this._reSpaceAndTab.test(d[j])&&(O=!0),O||(b=b||this.getCompleteStyleDeclaration(g,j),y=this.getCompleteStyleDeclaration(g,j+1),O=s.util.hasStyleChanged(b,y,!1)),O&&(D?(u.save(),u.translate(C.renderLeft,C.renderTop),u.rotate(C.angle),this._renderChar(l,u,g,j,w,-T/2,0,v),u.restore()):(q=p,this._renderChar(l,u,g,j,w,q,m,v)),w="",b=y,p+=z*T,T=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=s.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return u.width=p,u.height=m,d=u.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=l.toLive(d),this._applyPatternGradientTransform(d,l),d.fill(),d.createPattern(u,"no-repeat")},handleFiller:function(l,u,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[u]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(l[u]=d.toLive(l,this),this._applyPatternGradientTransform(l,d)):(l[u]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,d,p,m,g,v){var _=this._getStyleDeclaration(d,p),b=this.getCompleteStyleDeclaration(d,p),y=l==="fillText"&&b.fill,w=l==="strokeText"&&b.stroke&&b.strokeWidth,C,T;!w&&!y||(u.save(),y&&(C=this._setFillStyles(u,b)),w&&(T=this._setStrokeStyles(u,b)),u.font=this._getFontDeclaration(b),_&&_.textBackgroundColor&&this._removeShadow(u),_&&_.deltaY&&(v+=_.deltaY),y&&u.fillText(m,g-C.offsetX,v-C.offsetY),w&&u.strokeText(m,g-T.offsetX,v-T.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,d){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),d=this.width-u,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),d=u.width;return this.__lineWidths[l]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,d){var p=this._getStyleDeclaration(l,u);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var d,p,m,g,v,_,b,y,w=this._getLeftOffset(),C=this._getTopOffset(),T,O,D,I,Y,z,q,G,j=this.path,W=this._getWidthOfCharSpacing(),te=this.offsets[u],se=0,E=this._textLines.length;se<E;se++){if(d=this.getHeightOfLine(se),!this[u]&&!this.styleHas(u,se)){C+=d;continue}b=this._textLines[se],z=d/this.lineHeight,g=this._getLineLeftOffset(se),O=0,D=0,y=this.getValueOfPropertyAt(se,0,u),G=this.getValueOfPropertyAt(se,0,"fill"),T=C+z*(1-this._fontSizeFraction),p=this.getHeightOfChar(se,0),v=this.getValueOfPropertyAt(se,0,"deltaY");for(var P=0,F=b.length;P<F;P++)if(I=this.__charBounds[se][P],Y=this.getValueOfPropertyAt(se,P,u),q=this.getValueOfPropertyAt(se,P,"fill"),m=this.getHeightOfChar(se,P),_=this.getValueOfPropertyAt(se,P,"deltaY"),j&&Y&&q)l.save(),l.fillStyle=G,l.translate(I.renderLeft,I.renderTop),l.rotate(I.angle),l.fillRect(-I.kernedWidth/2,te*m+_,I.kernedWidth,this.fontSize/15),l.restore();else if((Y!==y||q!==G||m!==p||_!==v)&&D>0){var L=w+g+O;this.direction==="rtl"&&(L=this.width-L-D),y&&G&&(l.fillStyle=G,l.fillRect(L,T+te*p+v,D,this.fontSize/15)),O=I.left,D=I.width,y=Y,G=q,p=m,v=_}else D+=I.kernedWidth;var L=w+g+O;this.direction==="rtl"&&(L=this.width-L-D),l.fillStyle=q,Y&&q&&l.fillRect(L,T+te*p+v,D-W,this.fontSize/15),C+=d}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var d=l||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[s.isLikelyNode?d.fontWeight:d.fontStyle,s.isLikelyNode?d.fontStyle:d.fontWeight,u?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),d=new Array(u.length),p=[`
`],m=[],g=0;g<u.length;g++)d[g]=s.util.string.graphemeSplit(u[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:u,graphemeText:m,graphemeLines:d}},toObject:function(l){var u=f.concat(l),d=this.callSuper("toObject",u);return d.styles=s.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(l,u){this.callSuper("set",l,u);var d=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(l,u,d){if(!l)return u(null);var p=s.parseAttributes(l,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=s.util.object.extend(d?c(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=d.strokeWidth;d.strokeWidth=0;var b=new s.Text(v,d),y=b.getScaledHeight()/b.height,w=(b.height+b.strokeWidth)*b.lineHeight-b.height,C=w*y,T=b.getScaledHeight()+C,O=0;m==="center"&&(O=b.getScaledWidth()/2),m==="right"&&(O=b.getScaledWidth()),b.set({left:b.left-O,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof _<"u"?_:1}),u(b)},s.Text.fromObject=function(l,u){var d=c(l),p=l.path;return delete d.path,s.Object._fromObject("Text",d,function(m){m.styles=s.util.stylesFromArray(l.styles,l.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),u(m)},"path"):u(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in s)for(var f in s[c])for(var l in s[c][f])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var c=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in c)for(var l in c[f])if(typeof c[f][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,c=0,f,l,u=!0,d=0,p;for(var m in s){f=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);c++,v?(l?p[a]!==l&&(u=!1):l=p[a],p[a]===this[a]&&delete p[a]):u=!1,Object.keys(p).length!==0?f++:delete s[m][g]}f===0&&delete s[m]}for(var _=0;_<this._textLines.length;_++)d+=this._textLines[_].length;u&&c===d&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,c,f,l;for(f in s){c=s[f];for(l in c)delete c[l][a],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete s[f]}}},_extendStyles:function(a,s){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var c=s?this._unwrappedTextLines:this._textLines,f=c.length,l=0;l<f;l++){if(a<=c[l].length)return{lineIndex:l,charIndex:a};a-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<a?c[l-1].length:a}},getSelectionStyles:function(a,s,c){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var f=[],l=a;l<s;l++)f.push(this.getStyleAtPosition(l,c));return f},getStyleAtPosition:function(a,s){var c=this.get2DCursorLocation(a),f=s?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return f||{}},setSelectionStyles:function(a,s,c){typeof s>"u"&&(s=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||s);for(var f=s;f<c;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var c=this.styles&&this.styles[a];return c?c[s]:null},getCompleteStyleDeclaration:function(a,s){for(var c=this._getStyleDeclaration(a,s)||{},f={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],f[l]=typeof c[l]>"u"?this[l]:c[l];return f},_setStyleDeclaration:function(a,s,c){this.styles[a][s]=c},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,c){this.callSuper("initialize",s,c),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,c){this[s]!==c&&(this._fireSelectionChanged(),this[s]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,f=this.canvas.viewportTransform;c.save(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(c),this._clearTextArea(c),s||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,c):this.renderSelection(s,c),c.restore()}},_clearTextArea:function(s){var c=this.width+4,f=this.height+4;s.clearRect(-c/2,-f/2,c,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var c=this._getLeftOffset(),f=this._getTopOffset(),l=this._getCursorBoundariesOffsets(s);return{left:c,top:f,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,f,l,u=0,d=0,p,m=this.get2DCursorLocation(s);l=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)u+=this.getHeightOfLine(g);c=this._getLineLeftOffset(f);var v=this.__charBounds[f][l];return v&&(d=v.left),this.charSpacing!==0&&l===this._textLines[f].length&&(d-=this._getWidthOfCharSpacing()),p={top:u,left:c+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,c){var f=this.get2DCursorLocation(),l=f.lineIndex,u=f.charIndex>0?f.charIndex-1:0,d=this.getValueOfPropertyAt(l,u,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,d)},renderSelection:function(s,c){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(f),p=this.get2DCursorLocation(l),m=d.lineIndex,g=p.lineIndex,v=d.charIndex<0?0:d.charIndex,_=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var y=this._getLineLeftOffset(b)||0,w=this.getHeightOfLine(b),C=0,T=0,O=0;if(b===m&&(T=this.__charBounds[m][v].left),b>=m&&b<g)O=u&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(_===0)O=this.__charBounds[g][_].left;else{var D=this._getWidthOfCharSpacing();O=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-D}C=w,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(w/=this.lineHeight);var I=s.left+y+T,Y=O-T,z=w,q=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",z=1,q=w):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(I=this.width-I-Y),c.fillRect(I,s.top+s.topOffset+q,Y,z),s.topOffset+=C}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),c=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c}}}),e.IText.fromObject=function(s,c){var f=e.util.stylesFromArray(s.styles,s.text),l=Object.assign({},s,{styles:f});if(a(l),l.styles)for(var u in l.styles)for(var d in l.styles[u])a(l.styles[u][d]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var c=s.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,s._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var c=s.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,s),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,s._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,c,f,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",c,{duration:f,onComplete:function(){u.isAborted||s[l]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var c=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var c=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f--;for(;/\S/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findWordBoundaryRight:function(s){var c=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},findLineBoundaryLeft:function(s){for(var c=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findLineBoundaryRight:function(s){for(var c=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},searchWordBoundary:function(s,c){for(var f=this._text,l=this._reSpace.test(f[s])?s-1:s,u=f[l],d=e.reNonWord;!d.test(u)&&l>0&&l<f.length;)l+=c,u=f[l];return d.test(u)&&(l+=c===1?0:1),l},selectWord:function(s){s=s||this.selectionStart;var c=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var c=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||f===l)&&(f===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,c,f){var l=f.slice(0,s),u=e.util.string.graphemeSplit(l).length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=e.util.string.graphemeSplit(d).length;return{selectionStart:u,selectionEnd:u+p}},fromGraphemeToStringSelection:function(s,c,f){var l=f.slice(0,s),u=l.join("").length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=d.join("").length;return{selectionStart:u,selectionEnd:u+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),l=f.lineIndex,u=f.charIndex,d=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+d},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/v,y=_.height/v,w=b-d,C=y-d,T=_.clientWidth/b,O=_.clientHeight/y;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=T,g.y*=O,g.x<0&&(g.x=0),g.x>w&&(g.x=w),g.y<0&&(g.y=0),g.y>C&&(g.y=C),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,c){var f=this.get2DCursorLocation(s,!0),l=this.get2DCursorLocation(c,!0),u=f.lineIndex,d=f.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(u!==p){if(this.styles[u])for(g=d;g<this._unwrappedTextLines[u].length;g++)delete this.styles[u][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][d+g-m]=v);for(g=u+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,u-p)}else if(this.styles[u]){v=this.styles[u];var _=m-d,b,y;for(g=d;g<m;g++)delete v[g];for(y in this.styles[u])b=parseInt(y,10),b>=m&&(v[b-_]=v[y],delete v[y])}},shiftLineStyles:function(s,c){var f=a(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>s&&(this.styles[u+c]=f[u],f[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,c,f,l){var u,d={},p=!1,m=this._unwrappedTextLines[s].length===c;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(u=this.styles[s][c===0?c:c-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=c&&(p=!0,d[v-c]=this.styles[s][g],m&&c===0||delete this.styles[s][g])}var _=!1;for(p&&!m&&(this.styles[s+f]=d,_=!0),_&&f--;f>0;)l&&l[f-1]?this.styles[s+f]={0:a(l[f-1])}:u?this.styles[s+f]={0:a(u)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,c,f,l){this.styles||(this.styles={});var u=this.styles[s],d=u?a(u):{};f||(f=1);for(var p in d){var m=parseInt(p,10);m>=c&&(u[m+f]=d[m],d[m-f]||delete u[m])}if(this._forceClearCache=!0,l){for(;f--;)Object.keys(l[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][c+f]=a(l[f]));return}if(u)for(var g=u[c?c-1:1];g&&f--;)this.styles[s][c+f]=a(g)},insertNewStyleBlock:function(s,c,f){for(var l=this.get2DCursorLocation(c,!0),u=[0],d=0,p=0;p<s.length;p++)s[p]===`
`?(d++,u[d]=0):u[d]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],f),f=f&&f.slice(u[0]+1)),d&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],d);for(var p=1;p<d;p++)u[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,u[p],f):f&&this.styles[l.lineIndex+p]&&f[0]&&(this.styles[l.lineIndex+p][0]=f[0]),f=f&&f.slice(u[p]+1);u[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,u[p],f)},setSelectionStartEndWithShift:function(s,c,f){f<=s?(c===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<c?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(c===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),c=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),c=0,f=0,l=0,u=0,d=0,p,m,g=0,v=this._textLines.length;g<v&&l<=s.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(u+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),f=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var _=0,b=m.length;_<b&&(c=f,f+=this.__charBounds[d][_].kernedWidth*this.scaleX,f<=s.x);_++)u++;return this._getNewSelectionStartFromOffset(s,c,f,u,b)},_getNewSelectionStartFromOffset:function(a,s,c,f,l){var u=a.x-s,d=c-a.x,p=d>u||d<0?0:1,m=f+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,l=c.length,u,d,p=l-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=m>w.selectionStart;v?(u=this._text.slice(m,g),p+=g-m):l<f&&(C?u=this._text.slice(g+p,g):u=this._text.slice(m,m-p)),d=c.slice(w.selectionEnd-p,w.selectionEnd),u&&u.length&&(d.length&&(_=this.getSelectionStyles(m,m+1,!1),_=d.map(function(){return _[0]})),v?(b=m,y=g):C?(b=g-u.length,y=g):(b=g,y=g+u.length),this.removeStyleFromTo(b,y)),d.length&&(s&&d.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(_=e.copiedTextStyle),this.insertNewStyleBlock(d,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,s){var c=this._getLineLeftOffset(a),f;return s>0&&(f=this.__charBounds[a][s-1],c+=f.left+f.width),c},getDownCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l+1,d),m=this._textLines[l].slice(u);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l-1,d),m=this._textLines[l].slice(0,u),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var c=this._textLines[a],f=this._getLineLeftOffset(a),l=f,u=0,d,p,m=0,g=c.length;m<g;m++)if(d=this.__charBounds[a][m].width,l+=d,l>s){p=!0;var v=l-d,_=l,b=Math.abs(v-s),y=Math.abs(_-s);u=y<b?m:m-1;break}return p||(u=c.length-1),u},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var c="get"+a+"CursorOffset",f=this[c](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,c){var f;if(a.altKey)f=this["findWordBoundary"+c](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+c](this[s]);else return this[s]+=c==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?c+="Shift":c+="outShift",this[c](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,c,f){typeof f>"u"&&(f=c),f>c&&this.removeStyleFromTo(c,f);var l=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,c,s),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var f=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,f){var l=[],u=[],d=c,p;this._setSVGBg(u);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(u,m,f+p,d),this._setSVGTextLineText(l,m,f+p,d),d+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,f,l,u){var d=c!==c.trim()||c.match(s),p=this.getSvgSpanStyles(f,d),m=p?'style="'+p+'"':"",g=f.deltaY,v="",_=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(l,_),'" y="',a(u,_),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,f,l,u){var d=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,b,y=0,w=this._textLines[f],C;u+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,O=w.length-1;T<=O;T++)C=T===O||this.charSpacing,v+=w[T],_=this.__charBounds[f][T],y===0?(l+=_.kernedWidth-_.width,y+=_.width):y+=_.kernedWidth,p&&!C&&this._reSpaceAndTab.test(w[T])&&(C=!0),C||(m=m||this.getCompleteStyleDeclaration(f,T),g=this.getCompleteStyleDeclaration(f,T+1),C=e.util.hasStyleChanged(m,g,!0)),C&&(b=this._getStyleDeclaration(f,T)||{},c.push(this._createTextCharSpan(v,b,l,u)),v="",m=g,l+=y,y=0)},_pushTextBgRect:function(c,f,l,u,d,p){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(f),' x="',a(l,m),'" y="',a(u,m),'" width="',a(d,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,f,l,u){for(var d=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,_,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),y=0,w=d.length;y<w;y++)v=this.__charBounds[f][y],_=this.getValueOfPropertyAt(f,y,"textBackgroundColor"),_!==b?(b&&this._pushTextBgRect(c,b,l+g,u,m,p),g=v.left,m=v.width,b=_):m+=v.kernedWidth;_&&this._pushTextBgRect(c,_,l+g,u,m,p)},_getFillAttributes:function(c){var f=c&&typeof c=="string"?new e.Color(c):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+c+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var f=0,l=0,u=0;u<c;u++)f+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var f=e.Object.prototype.getSvgStyles.call(this,c);return f+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var f=0,l=0,u=0,d={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[u]===`
`&&p>0?(l=0,u++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&p>0&&(l++,u++),d[p]={line:f,offset:l},u+=c.graphemeLines[p].length,l+=c.graphemeLines[p].length;return d},styleHas:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[f];l&&(f=l.line)}return s.Text.prototype.styleHas.call(this,c,f)},isEmptyStyles:function(c){if(!this.styles)return!0;var f=0,l=c+1,u,d,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,f=m.offset),g&&(l=g.line,p=l===c,u=g.offset),d=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in d)for(var _ in d[v])if(_>=f&&(!p||_<u))for(var b in d[v][_])return!1;return!0},_getStyleDeclaration:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,f=l.offset+f}return this.callSuper("_getStyleDeclaration",c,f)},_setStyleDeclaration:function(c,f,l){var u=this._styleMap[c];c=u.line,f=u.offset+f,this.styles[c][f]=l},_deleteStyleDeclaration:function(c,f){var l=this._styleMap[c];c=l.line,f=l.offset+f,delete this.styles[c][f]},_getLineStyle:function(c){var f=this._styleMap[c];return!!this.styles[f.line]},_setLineStyle:function(c){var f=this._styleMap[c];this.styles[f.line]={}},_wrapText:function(c,f){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,f));return this.isWrapping=!1,l},_measureWord:function(c,f,l){var u=0,d,p=!0;l=l||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],f,m+l,d,p);u+=v.kernedWidth,d=c[m]}return u},_wrapLine:function(c,f,l,I){var d=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(c):c.split(this._wordJoiners),_="",b=0,y=p?"":" ",w=0,C=0,T=0,O=!0,D=this._getWidthOfCharSpacing(),I=I||0;v.length===0&&v.push([]),l-=I;for(var Y=0;Y<v.length;Y++)_=p?v[Y]:s.util.string.graphemeSplit(v[Y]),w=this._measureWord(_,f,b),b+=_.length,d+=C+w-D,d>l&&!O?(m.push(g),g=[],d=w,O=!0):d+=D,!O&&!p&&g.push(y),g=g.concat(_),C=p?0:this._measureWord([y],f,b),b++,O=!1,w>T&&(T=w);return Y&&m.push(g),T+I>this.dynamicMinWidth&&(this.dynamicMinWidth=T-D+I),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var f=s.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(f.lines,this.width),u=new Array(l.length),d=0;d<l.length;d++)u[d]=l[d].join("");return f.lines=u,f.graphemeLines=l,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var f in this._styleMap)this._textLines[f]&&(c[this._styleMap[f].line]=1);for(var f in this.styles)c[f]||delete this.styles[f]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),s.Textbox.fromObject=function(c,f){var l=s.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return s.Object._fromObject("Textbox",u,f,"text")}}(t),function(){var a=e.controlsUtils,s=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,f=a.scalingEqually,l=a.scalingYOrSkewingX,u=a.scalingXOrSkewingY,d=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(ot);const us=[];function Ls(t,e){return{subscribe:yt(t,e).subscribe}}function yt(t,e=ge){let n;const i=new Set;function r(a){if(Ve(t,a)&&(t=a,n)){const s=!us.length;for(const c of i)c[1](),us.push(c,t);if(s){for(let c=0;c<us.length;c+=2)us[c][0](us[c+1]);us.length=0}}}function o(a){r(a(t))}function h(a,s=ge){const c=[a,s];return i.add(c),i.size===1&&(n=e(r,o)||ge),a(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:h}}function G1(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ls(n,(h,a)=>{let s=!1;const c=[];let f=0,l=ge;const u=()=>{if(f)return;l();const p=e(i?c[0]:c,h,a);o?h(p):l=Hn(p)?p:ge},d=r.map((p,m)=>uh(p,g=>{c[m]=g,f&=~(1<<m),s&&u()},()=>{f|=1<<m}));return s=!0,u(),function(){Ue(d),l(),s=!1}})}let gl,ml,Ui=yt(null),q1=yt({left:0,top:0});const zd=10;let pe,nf,By,Wo,zo,ia=!1,nr=null,lr=!1;const K1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/><path d="M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',Ir=["selectable","objType","clipartInfo","successPosition","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","compositeId","imageIndex","printWidth","printHeight","extension","charSpacing","convert","thumbnail","uuid","localFamily","url","printIgnore","printIndex","targetFrame","vector","userEvent","evented","patternSourceCanvas","pattern","patternPadding","patternOffset","patternWidth"],rf=["print","guide","snapW","snapH","frame","guideText"];let Uy=yt([]);function J1(t,e,n,i){nr=i,nf=document.getElementById(t).parentElement,gl=e,ml=n,pe=new ot.fabric.Canvas(t,{width:e,height:n,selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0,isDrawingMode:lr,preserveObjectStacking:!0}),ot.fabric.Object.prototype._renderControl=function(h,a,s,c,f){h.actionName==="rotate"?vC(a,c,f,K1):h.render(a,c,f)},ot.fabric.Object.prototype.cornerStyle="circle",ot.fabric.Object.prototype.cornerColor="#2EF2E8",ot.fabric.Object.prototype.borderColor="#0075ff",ot.fabric.Object.prototype.cornerStrokeColor="#0075ff";const r={mtr:!0,ml:!1,mr:!1,mb:!1,mt:!1,tl:!0,tr:!0,bl:!0,br:!0},o={mtr:!0,ml:!0,mr:!0,mb:!0,mt:!0,tl:!0,tr:!0,bl:!0,br:!0};ot.fabric.Image.prototype.setControlsVisibility(r),ot.fabric.Path.prototype.setControlsVisibility(r),ot.fabric.Text.prototype.setControlsVisibility(r),ot.fabric.Rect.prototype.setControlsVisibility(o),ot.fabric.Ellipse.prototype.setControlsVisibility(o),ot.fabric.Triangle.prototype.setControlsVisibility(o),ot.fabric.Object.prototype.cornerSize=20,ot.fabric.Object.prototype.transparentCorners=!1,pe.on("object:modified",h=>{Nl(),nr(pe.toJSON(Ir),Rr()),h.target.type==="pen"||h.target.type}),pe.on("object:added",()=>{Nl(),ia||nr(pe.toJSON(Ir),Rr())}),pe.on("selection:created",h=>{Ui.set(h.selected),nr(pe.toJSON(Ir),Rr())}),pe.on("selection:updated",async h=>{Ui.set(null),await setTimeout(()=>{nr(pe.toJSON(Ir),Rr())},0),Ui.set(h.selected)}),pe.on("selection:cleared",()=>{Ui.set(null),nr(pe.toJSON(Ir),Rr())}),pe.on("mouse:down",h=>{lr&&_C(h.e.clientX,h.e.clientY),Hd()}),pe.on("mouse:move",h=>{lr&&(h.e.clientX,h.e.clientY,void 0),Hd()}),pe.on("mouse:up",()=>{lr&&yC()}),pe.on("object:moving",function(h){const a=h.target,s=pe.getZoom(),c=a.left,f=a.top;if(typeof Wo<"u"&&typeof zo<"u"){let l=a.left,u=a.top;Math.abs(c-Wo)<zd/s&&(l=Wo),Math.abs(f-zo)<zd/s&&(u=zo),a.set({left:l,top:u})}pe.renderAll()}),pe.on("after:render",TC),Xd(),window.addEventListener("resize",Xd,!1)}function Hd(){const t=pe.getZoom(),e=pe.getActiveObject();if(!e)return;const n=pe.getElement().getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top,o=e.oCoords.mb;if(o){const h=(i+o.x)*t;q1.set({left:i+h,top:r})}else console.warn("Bottom-center controller not found")}function Nl(){Uy.update(t=>pe.getObjects().map((n,i)=>{const r=n;return r.id=`layer_${i}`,r}).filter(n=>!rf.includes(n.objType)))}function Z1(t){t.forEach(e=>{const n=pe.getObjects().find(i=>i.id===e.id);n&&n.bringToFront()}),Nl(),pe.renderAll()}function Q1(t){ia=!0,pe.loadFromJSON(t,()=>{ia=!1,pe.renderAll.bind(pe),nr(pe.toJSON(Ir),Rr())},(e,n)=>{const i={selectable:!1,evented:!1};n.objType==="snapW"&&(Wo=n.left,n.set(i),n.printIgnore=!0),n.objType==="snapH"&&(zo=n.top,n.set(i),n.printIgnore=!0),n.objType==="print"&&(ot.fabric.util.enlivenObjects([e],function(r){r[0].set({absolutePositioned:!0,stroke:"#FFFFFF",strokeWidth:0}),r[0].fill,By=r[0]}),n.set(i)),n.objType,n.objType==="guide"&&n.set(i),n.objType==="pattern"&&changePattern(n),(n.objType==="clipart"||n.objType==="text"||n.objType==="shape"||n.objType==="draw"||n.objType==="upload")&&is(n),pe.discardActiveObject().renderAll()})}function Vd(t,e={}){const{extension:n}=e.origin?e.origin:e.convert;if(n==="svg"){tC(t,e);return}ot.fabric.Image.fromURL(t,i=>{const r=pe.getWidth(),o=pe.getHeight(),h=pe.getZoom(),a=i.width,s=i.height;let c=1;(a>r||s>o)&&(c=Math.min(r/a,o/s));const f={left:r/h/2,top:o/h/2,originX:"center",originY:"center",scaleX:c,scaleY:c,...e};i.set({...f}),is(i),pe.add(i),pe.setActiveObject(i),pe.renderAll()},{crossOrigin:"anonymous"})}function eC(t,e,n={}){if(!t||!e){console.error("객체와 URL이 필요합니다");return}const{extension:i}=n.origin?n.origin:n.convert;if(i==="svg"){nC(t,e,n);return}const r=pe.getObjects().indexOf(t);ot.fabric.Image.fromURL(e,o=>{const{left:h,top:a,scaleX:s,scaleY:c,angle:f,flipX:l,flipY:u}=t;o.set({left:h,top:a,scaleX:s,scaleY:c,angle:f,flipX:l,flipY:u,originX:t.originX||"center",originY:t.originY||"center",...n}),is(o),pe.remove(t),pe.insertAt(o,r),pe.setActiveObject(o),pe.renderAll()},{crossOrigin:"anonymous"})}function tC(t,e={}){ot.fabric.loadSVGFromURL(t,(n,i)=>{const r=ot.fabric.util.groupSVGElements(n,i),o=pe.getWidth(),h=pe.getHeight(),a=pe.getZoom(),s=n.length>1?"colors":"color",c={left:o/a/2,top:h/a/2,originX:"center",originY:"center",colorType:s,vector:!0,...e};r.set({...c}),is(r),pe.add(r),pe.setActiveObject(r),pe.renderAll()})}function nC(t,e,n={}){ot.fabric.loadSVGFromURL(e,(i,r)=>{const o=ot.fabric.util.groupSVGElements(i,r),{left:h,top:a,scaleX:s,scaleY:c,angle:f,flipX:l,flipY:u}=t;o.set({left:h,top:a,scaleX:s,scaleY:c,angle:f,flipX:l,flipY:u,originX:t.originX||"center",originY:t.originY||"center",...n}),is(o),pe.remove(t),pe.add(o),pe.setActiveObject(o),pe.renderAll()})}function is(t){t.clipPath=By}function iC(t,e={}){const n=pe.getWidth(),i=pe.getHeight(),r=pe.getZoom(),o=new ot.fabric.Text(t,{left:n/r/2,top:i/r/2,fontSize:50/r,originX:"center",originY:"center",strokeUniform:!0,centeredScaling:!0,perPixelTargetFind:!0,paintFirst:"stroke",...e});pe.add(o),pe.setActiveObject(o),pe.renderAll()}function rC(t){pe.setActiveObject(t),pe.renderAll()}function sC(t){pe.remove(t),Nl(),pe.renderAll()}function oC(t,e){t.set("selectable",e),t.set("evented",e),pe.renderAll()}function aC(){gC(["print","guide","snapH","snapW"]);const t=pe.toDataURL({format:"png",quality:.6,multiplier:1});return mC(["print","guide","snapH","snapW"]),t}function lC(t){pe.getActiveObject().rotate(t),pe.renderAll()}function cC(t,e){t.set("text",e),pe.renderAll()}function uC(t,e,n=""){t.set("fontFamily",e),t.set("localFamily",n),pe.renderAll()}function fC(t,e){t.set("textAlign",e),pe.renderAll()}function hC(t,e){t.set("fontStyle",e),pe.renderAll()}function dC(t,e){const{underline:n,linethrough:i,overline:r}=e;n?t.set("underline",n):t.set("underline",!1),i?t.set("linethrough",i):t.set("linethrough",!1),r?t.set("overline",r):t.set("overline",!1),pe.renderAll()}function pC(t,e){const{stroke:n,strokeWidth:i}=e;n?t.set("stroke",n):t.set("stroke",null),i?t.set("strokeWidth",i):t.set("strokeWidth",0),pe.renderAll()}function eu(){pe.renderAll()}function gC(t){const e=pe.getObjects();for(const n of e)t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:"transparent",oriStroke:n.stroke}),n.type==="image"&&n.set({opacity:0})):n.set({opacity:0}))}function mC(t){pe.getObjects().forEach(n=>{t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:n.oriStroke}),n.type==="image"&&n.set({opacity:1})):n.set({opacity:1}))})}function Xd(){const t=nf.clientWidth,e=nf.clientHeight,n=t/e,i=gl/ml;let r;n>i?r=e/ml:r=t/gl,pe.setZoom(r),pe.setWidth(gl*r),pe.setHeight(ml*r),pe.renderAll()}function vC(t,e,n,i,r){const o=new ot.fabric.Svg(i,null,{strokeWidth:1,stroke:"rgba(0,0,0,0.5)",strokeUniform:!0,scaleX:.5,scaleY:.5});o.set({left:e,top:n}).setCoords(),o.render(t)}function _C(t,e){lr=!0}function yC(){lr=!1;const t=pe.getObjects().pop();t&&(t.set("objType","draw"),is(t)),pe.isDrawingMode=lr,pe.renderAll()}function bC(t){const e=pe.getWidth(),n=pe.getHeight(),i=e*.5,r=pe.getZoom(),o=new ot.fabric.Rect({type:"rectangle",left:e/r/2,top:n/r/2,originX:"center",originY:"center",objType:"shape",width:i,height:i,fill:t});pe.add(o),pe.renderAll()}function wC(t){const e=pe.getWidth(),n=pe.getHeight(),i=pe.getZoom(),r=e*.5,o=new ot.fabric.Ellipse({type:"ellipse",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",objType:"shape",rx:r/2,ry:r/2,fill:t});pe.add(o),pe.renderAll()}function CC(t){const e=pe.getWidth(),n=pe.getHeight(),i=pe.getZoom(),r=e*.5,o=new ot.fabric.Triangle({type:"triangle",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",width:r,height:r,objType:"shape",fill:t});pe.add(o),pe.renderAll()}function SC(t){lr=t,pe.isDrawingMode=t,pe.renderAll()}function Yy(){pe.discardActiveObject(),pe.renderAll(),Ui.set(null)}function TC(){const t=pe.getObjects().find(n=>n.objType==="snapW"),e=pe.getObjects().find(n=>n.objType==="snapH");t&&(Wo=t.left),e&&(zo=e.top)}const Rr=()=>{const e=pe.getObjects().filter(r=>!r.printIgnore),n=new ot.fabric.Canvas(null,{width:pe.width,height:pe.height});e.forEach(r=>{n.add(ot.fabric.util.object.clone(r))});const i=n.toSVG();return n.dispose(),i};function kC(t){const e=typeof t=="string"?JSON.parse(t):t,i=pe.getObjects().filter(o=>rf.includes(o.objType)),r=e.objects.filter(o=>!rf.includes(o.objType));pe.clear(),i.forEach(o=>{pe.add(o)}),ia=!0,ot.fabric.util.enlivenObjects(r,o=>{o.forEach(h=>{h.objType==="pattern"&&changePattern(h),["clipart","text","shape","draw","upload"].includes(h.objType)&&is(h),pe.add(h)}),ia=!1,pe.renderAll(),nr(pe.toJSON(Ir),Rr())})}function ph(t){const e=t-1;return e*e*e+1}function br(t){return--t*t*t*t*t+1}function $d(t,{delay:e=0,duration:n=400,easing:i=ch}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function Ti(t,{delay:e=0,duration:n=400,easing:i=ph,x:r=0,y:o=0,opacity:h=0}={}){const a=getComputedStyle(t),s=+a.opacity,c=a.transform==="none"?"":a.transform,f=s*(1-h),[l,u]=Yd(r),[d,p]=Yd(o);return{delay:e,duration:n,easing:i,css:(m,g)=>`
			transform: ${c} translate(${(1-m)*l}${u}, ${(1-m)*d}${p});
			opacity: ${s-f*g}`}}function wr(t,{delay:e=0,duration:n=400,easing:i=ph,axis:r="y"}={}){const o=getComputedStyle(t),h=+o.opacity,a=r==="y"?"height":"width",s=parseFloat(o[a]),c=r==="y"?["top","bottom"]:["left","right"],f=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),l=parseFloat(o[`padding${f[0]}`]),u=parseFloat(o[`padding${f[1]}`]),d=parseFloat(o[`margin${f[0]}`]),p=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),g=parseFloat(o[`border${f[1]}Width`]);return{delay:e,duration:n,easing:i,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*h};${a}: ${v*s}px;padding-${c[0]}: ${v*l}px;padding-${c[1]}: ${v*u}px;margin-${c[0]}: ${v*d}px;margin-${c[1]}: ${v*p}px;border-${c[0]}-width: ${v*m}px;border-${c[1]}-width: ${v*g}px;`}}const Yr=yt(!1),Wr=yt(null),zr=yt([]),Wy=yt(null);function OC(t=1){var i,r;const e=mi(zr).length,n=mi(zr)[e-1];return mi(Wr)||(i=n==null?void 0:n.callbacks)!=null&&i.onBeforeClose&&((r=n==null?void 0:n.callbacks)==null?void 0:r.onBeforeClose())===!1?!1:(mi(Yr)&&e>0&&Wr.set(!0),Yr.set(!1),Wy.set("pop"),EC(t),!0)}function dn(){return OC(1)}function Oo(t,e,n){mi(Wr)||(Wy.set("push"),mi(Yr)&&mi(zr).length&&Wr.set(!0),Yr.set(!1),n!=null&&n.replace?zr.update(i=>[...i.slice(0,i.length-1),{component:t,props:e}]):zr.update(i=>[...i,{component:t,props:e}]))}function EC(t=1){zr.update(e=>e.slice(0,Math.max(0,e.length-t)))}function Gd(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}const xC=t=>({}),qd=t=>({}),DC=t=>({}),Kd=t=>({});function Jd(t){let e;const n=t[4].backdrop,i=wa(n,t,t[3],Kd);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&Sa(i,n,r,r[3],e?Ca(n,r[3],o,DC):Ta(r[3]),Kd)},i(r){e||(M(i,r),e=!0)},o(r){U(i,r),e=!1},d(r){i&&i.d(r)}}}function AC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[9].component;function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=bi(c,r[f]);return s!==void 0&&s&3&&(c=bi(c,Kr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Ll(a[9].props)]))),{props:c}}return o&&(e=hn(o,h(t)),e.$on("introstart",t[7]),e.$on("outroend",t[8])),{c(){e&&he(e.$$.fragment),n=Je()},m(a,s){e&&ue(e,a,s),B(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[9].component)){if(e){Se();const c=e;U(c.$$.fragment,1,0,()=>{fe(c,1)}),Te()}o?(e=hn(o,h(a,s)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Kr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Ll(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&M(e.$$.fragment,a),i=!0)},o(a){e&&U(e.$$.fragment,a),i=!1},d(a){a&&N(n),e&&fe(e,a)}}}function PC(t){let e,n,i,r={ctx:t,current:null,token:null,hasCatch:!1,pending:RC,then:IC,catch:MC,value:12,blocks:[,,,]};return qs(n=Qd(t[9].component),r),{c(){e=Je(),r.block.c()},m(o,h){B(o,e,h),r.block.m(o,r.anchor=h),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(o,h){t=o,r.ctx=t,h&1&&n!==(n=Qd(t[9].component))&&qs(n,r)||dh(r,t,h)},i(o){i||(M(r.block),i=!0)},o(o){for(let h=0;h<3;h+=1){const a=r.blocks[h];U(a)}i=!1},d(o){o&&N(e),r.block.d(o),r.token=null,r=null}}}function MC(t){return{c:ge,m:ge,p:ge,i:ge,o:ge,d:ge}}function IC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[12];function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=bi(c,r[f]);return s!==void 0&&s&3&&(c=bi(c,Kr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Ll(a[9].props)]))),{props:c}}return o&&(e=hn(o,h(t)),e.$on("introstart",t[5]),e.$on("outroend",t[6])),{c(){e&&he(e.$$.fragment),n=V()},m(a,s){e&&ue(e,a,s),B(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[12])){if(e){Se();const c=e;U(c.$$.fragment,1,0,()=>{fe(c,1)}),Te()}o?(e=hn(o,h(a,s)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Kr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Ll(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&M(e.$$.fragment,a),i=!0)},o(a){e&&U(e.$$.fragment,a),i=!1},d(a){a&&N(n),e&&fe(e,a)}}}function RC(t){let e,n;const i=t[4].loading,r=wa(i,t,t[3],qd);return{c(){r&&r.c(),e=V()},m(o,h){r&&r.m(o,h),B(o,e,h),n=!0},p(o,h){r&&r.p&&(!n||h&8)&&Sa(r,i,o,o[3],n?Ca(i,o[3],h,xC):Ta(o[3]),qd)},i(o){n||(M(r,o),n=!0)},o(o){U(r,o),n=!1},d(o){o&&N(e),r&&r.d(o)}}}function Zd(t,e){let n,i,r,o,h,a;const s=[PC,AC],c=[];function f(l,u){return u&1&&(i=null),i==null&&(i=!!NC(l[9].component)),i?0:1}return r=f(e,-1),o=c[r]=s[r](e),{key:t,first:null,c(){n=Je(),o.c(),h=Je(),this.first=n},m(l,u){B(l,n,u),c[r].m(l,u),B(l,h,u),a=!0},p(l,u){e=l;let d=r;r=f(e,u),r===d?c[r].p(e,u):(Se(),U(c[d],1,1,()=>{c[d]=null}),Te(),o=c[r],o?o.p(e,u):(o=c[r]=s[r](e),o.c()),M(o,1),o.m(h.parentNode,h))},i(l){a||(M(o),a=!0)},o(l){U(o),a=!1},d(l){l&&(N(n),N(h)),c[r].d(l)}}}function FC(t){let e=[],n=new Map,i,r,o=Fe(t[0]);const h=a=>a[11];for(let a=0;a<o.length;a+=1){let s=Gd(t,o,a),c=h(s);n.set(c,e[a]=Zd(c,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=Je()},m(a,s){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,s);B(a,i,s),r=!0},p(a,s){s&15&&(o=Fe(a[0]),Se(),e=Ny(e,s,h,1,a,o,n,i.parentNode,Ly,Zd,i,Gd),Te())},i(a){if(!r){for(let s=0;s<o.length;s+=1)M(e[s]);r=!0}},o(a){for(let s=0;s<e.length;s+=1)U(e[s]);r=!1},d(a){a&&N(i);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function LC(t){let e,n,i=t[0].length>0&&Jd(t);const r=t[4].default,o=wa(r,t,t[3],null),h=o||FC(t);return{c(){i&&i.c(),e=V(),h&&h.c()},m(a,s){i&&i.m(a,s),B(a,e,s),h&&h.m(a,s),n=!0},p(a,[s]){a[0].length>0?i?(i.p(a,s),s&1&&M(i,1)):(i=Jd(a),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te()),o?o.p&&(!n||s&8)&&Sa(o,r,a,a[3],n?Ca(r,a[3],s,null):Ta(a[3]),null):h&&h.p&&(!n||s&15)&&h.p(a,n?s:-1)},i(a){n||(M(i),M(h,a),n=!0)},o(a){U(i),U(h,a),n=!1},d(a){a&&N(e),i&&i.d(a),h&&h.d(a)}}}function NC(t){return typeof t.prototype>"u"}async function Qd(t){return t().then(e=>e.default)}function jC(t,e,n){let i,r,o;Me(t,zr,u=>n(0,i=u)),Me(t,Wr,u=>n(1,r=u)),Me(t,Yr,u=>n(2,o=u));let{$$slots:h={},$$scope:a}=e;const s=()=>{ye(Yr,o=!0,o)},c=()=>{ye(Wr,r=!1,r)},f=()=>{ye(Yr,o=!0,o)},l=()=>{ye(Wr,r=!1,r)};return t.$$set=u=>{"$$scope"in u&&n(3,a=u.$$scope)},[i,r,o,a,h,s,c,f,l]}class BC extends qe{constructor(e){super(),Ge(this,e,jC,LC,Ve,{})}}var UC=Error,YC=EvalError,WC=RangeError,zC=ReferenceError,zy=SyntaxError,Oa=TypeError,HC=URIError,VC=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[n]=r;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,n);if(h.value!==r||h.enumerable!==!0)return!1}return!0},ep=typeof Symbol<"u"&&Symbol,XC=VC,$C=function(){return typeof ep!="function"||typeof Symbol!="function"||typeof ep("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:XC()},tu={__proto__:null,foo:{}},GC=Object,qC=function(){return{__proto__:tu}.foo===tu.foo&&!(tu instanceof GC)},KC="Function.prototype.bind called on incompatible ",JC=Object.prototype.toString,ZC=Math.max,QC="[object Function]",tp=function(e,n){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var o=0;o<n.length;o+=1)i[o+e.length]=n[o];return i},eS=function(e,n){for(var i=[],r=n||0,o=0;r<e.length;r+=1,o+=1)i[o]=e[r];return i},tS=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},nS=function(e){var n=this;if(typeof n!="function"||JC.apply(n)!==QC)throw new TypeError(KC+n);for(var i=eS(arguments,1),r,o=function(){if(this instanceof r){var f=n.apply(this,tp(i,arguments));return Object(f)===f?f:this}return n.apply(e,tp(i,arguments))},h=ZC(0,n.length-i.length),a=[],s=0;s<h;s++)a[s]="$"+s;if(r=Function("binder","return function ("+tS(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var c=function(){};c.prototype=n.prototype,r.prototype=new c,c.prototype=null}return r},iS=nS,gh=Function.prototype.bind||iS,rS=Function.prototype.call,sS=Object.prototype.hasOwnProperty,oS=gh,aS=oS.call(rS,sS),Ze,lS=UC,cS=YC,uS=WC,fS=zC,Ks=zy,Ns=Oa,hS=HC,Hy=Function,nu=function(t){try{return Hy('"use strict"; return ('+t+").constructor;")()}catch{}},Hr=Object.getOwnPropertyDescriptor;if(Hr)try{Hr({},"")}catch{Hr=null}var iu=function(){throw new Ns},dS=Hr?function(){try{return arguments.callee,iu}catch{try{return Hr(arguments,"callee").get}catch{return iu}}}():iu,fs=$C(),pS=qC(),Jt=Object.getPrototypeOf||(pS?function(t){return t.__proto__}:null),Cs={},gS=typeof Uint8Array>"u"||!Jt?Ze:Jt(Uint8Array),Vr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ze:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ze:ArrayBuffer,"%ArrayIteratorPrototype%":fs&&Jt?Jt([][Symbol.iterator]()):Ze,"%AsyncFromSyncIteratorPrototype%":Ze,"%AsyncFunction%":Cs,"%AsyncGenerator%":Cs,"%AsyncGeneratorFunction%":Cs,"%AsyncIteratorPrototype%":Cs,"%Atomics%":typeof Atomics>"u"?Ze:Atomics,"%BigInt%":typeof BigInt>"u"?Ze:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ze:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ze:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ze:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":lS,"%eval%":eval,"%EvalError%":cS,"%Float32Array%":typeof Float32Array>"u"?Ze:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ze:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ze:FinalizationRegistry,"%Function%":Hy,"%GeneratorFunction%":Cs,"%Int8Array%":typeof Int8Array>"u"?Ze:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ze:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ze:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":fs&&Jt?Jt(Jt([][Symbol.iterator]())):Ze,"%JSON%":typeof JSON=="object"?JSON:Ze,"%Map%":typeof Map>"u"?Ze:Map,"%MapIteratorPrototype%":typeof Map>"u"||!fs||!Jt?Ze:Jt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ze:Promise,"%Proxy%":typeof Proxy>"u"?Ze:Proxy,"%RangeError%":uS,"%ReferenceError%":fS,"%Reflect%":typeof Reflect>"u"?Ze:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ze:Set,"%SetIteratorPrototype%":typeof Set>"u"||!fs||!Jt?Ze:Jt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ze:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":fs&&Jt?Jt(""[Symbol.iterator]()):Ze,"%Symbol%":fs?Symbol:Ze,"%SyntaxError%":Ks,"%ThrowTypeError%":dS,"%TypedArray%":gS,"%TypeError%":Ns,"%Uint8Array%":typeof Uint8Array>"u"?Ze:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ze:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ze:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ze:Uint32Array,"%URIError%":hS,"%WeakMap%":typeof WeakMap>"u"?Ze:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ze:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ze:WeakSet};if(Jt)try{null.error}catch(t){var mS=Jt(Jt(t));Vr["%Error.prototype%"]=mS}var vS=function t(e){var n;if(e==="%AsyncFunction%")n=nu("async function () {}");else if(e==="%GeneratorFunction%")n=nu("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=nu("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&Jt&&(n=Jt(r.prototype))}return Vr[e]=n,n},np={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ea=gh,jl=aS,_S=Ea.call(Function.call,Array.prototype.concat),yS=Ea.call(Function.apply,Array.prototype.splice),ip=Ea.call(Function.call,String.prototype.replace),Bl=Ea.call(Function.call,String.prototype.slice),bS=Ea.call(Function.call,RegExp.prototype.exec),wS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,CS=/\\(\\)?/g,SS=function(e){var n=Bl(e,0,1),i=Bl(e,-1);if(n==="%"&&i!=="%")throw new Ks("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Ks("invalid intrinsic syntax, expected opening `%`");var r=[];return ip(e,wS,function(o,h,a,s){r[r.length]=a?ip(s,CS,"$1"):h||o}),r},TS=function(e,n){var i=e,r;if(jl(np,i)&&(r=np[i],i="%"+r[0]+"%"),jl(Vr,i)){var o=Vr[i];if(o===Cs&&(o=vS(i)),typeof o>"u"&&!n)throw new Ns("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new Ks("intrinsic "+e+" does not exist!")},fo=function(e,n){if(typeof e!="string"||e.length===0)throw new Ns("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Ns('"allowMissing" argument must be a boolean');if(bS(/^%?[^%]*%?$/,e)===null)throw new Ks("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=SS(e),r=i.length>0?i[0]:"",o=TS("%"+r+"%",n),h=o.name,a=o.value,s=!1,c=o.alias;c&&(r=c[0],yS(i,_S([0,1],c)));for(var f=1,l=!0;f<i.length;f+=1){var u=i[f],d=Bl(u,0,1),p=Bl(u,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Ks("property names with quotes must have matching quotes");if((u==="constructor"||!l)&&(s=!0),r+="."+u,h="%"+r+"%",jl(Vr,h))a=Vr[h];else if(a!=null){if(!(u in a)){if(!n)throw new Ns("base intrinsic for "+e+" exists, but the property is not available.");return}if(Hr&&f+1>=i.length){var m=Hr(a,u);l=!!m,l&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[u]}else l=jl(a,u),a=a[u];l&&!s&&(Vr[h]=a)}}return a},Vy={exports:{}},ru,rp;function mh(){if(rp)return ru;rp=1;var t=fo,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ru=e,ru}var kS=fo,vl=kS("%Object.getOwnPropertyDescriptor%",!0);if(vl)try{vl([],"length")}catch{vl=null}var Xy=vl,sp=mh(),OS=zy,hs=Oa,op=Xy,ES=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new hs("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new hs("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new hs("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new hs("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new hs("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new hs("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!op&&op(e,n);if(sp)sp(e,n,{configurable:h===null&&s?s.configurable:!h,enumerable:r===null&&s?s.enumerable:!r,value:i,writable:o===null&&s?s.writable:!o});else if(a||!r&&!o&&!h)e[n]=i;else throw new OS("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},sf=mh(),$y=function(){return!!sf};$y.hasArrayLengthDefineBug=function(){if(!sf)return null;try{return sf([],"length",{value:1}).length!==1}catch{return!0}};var xS=$y,DS=fo,ap=ES,AS=xS(),lp=Xy,cp=Oa,PS=DS("%Math.floor%"),MS=function(e,n){if(typeof e!="function")throw new cp("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||PS(n)!==n)throw new cp("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,o=!0;if("length"in e&&lp){var h=lp(e,"length");h&&!h.configurable&&(r=!1),h&&!h.writable&&(o=!1)}return(r||o||!i)&&(AS?ap(e,"length",n,!0,!0):ap(e,"length",n)),e};(function(t){var e=gh,n=fo,i=MS,r=Oa,o=n("%Function.prototype.apply%"),h=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(h,o),s=mh(),c=n("%Math.max%");t.exports=function(u){if(typeof u!="function")throw new r("a function is required");var d=a(e,h,arguments);return i(d,1+c(0,u.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(Vy);var IS=Vy.exports,Gy=fo,qy=IS,RS=qy(Gy("String.prototype.indexOf")),FS=function(e,n){var i=Gy(e,!!n);return typeof i=="function"&&RS(e,".prototype.")>-1?qy(i):i},vh=typeof Map=="function"&&Map.prototype,su=Object.getOwnPropertyDescriptor&&vh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ul=vh&&su&&typeof su.get=="function"?su.get:null,up=vh&&Map.prototype.forEach,_h=typeof Set=="function"&&Set.prototype,ou=Object.getOwnPropertyDescriptor&&_h?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Yl=_h&&ou&&typeof ou.get=="function"?ou.get:null,fp=_h&&Set.prototype.forEach,LS=typeof WeakMap=="function"&&WeakMap.prototype,Ho=LS?WeakMap.prototype.has:null,NS=typeof WeakSet=="function"&&WeakSet.prototype,Vo=NS?WeakSet.prototype.has:null,jS=typeof WeakRef=="function"&&WeakRef.prototype,hp=jS?WeakRef.prototype.deref:null,BS=Boolean.prototype.valueOf,US=Object.prototype.toString,YS=Function.prototype.toString,WS=String.prototype.match,yh=String.prototype.slice,cr=String.prototype.replace,zS=String.prototype.toUpperCase,dp=String.prototype.toLowerCase,Ky=RegExp.prototype.test,pp=Array.prototype.concat,hi=Array.prototype.join,HS=Array.prototype.slice,gp=Math.floor,of=typeof BigInt=="function"?BigInt.prototype.valueOf:null,au=Object.getOwnPropertySymbols,af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Js=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Js||!0)?Symbol.toStringTag:null,Jy=Object.prototype.propertyIsEnumerable,mp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function vp(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ky.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-gp(-t):gp(t);if(i!==t){var r=String(i),o=yh.call(e,r.length+1);return cr.call(r,n,"$&_")+"."+cr.call(cr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return cr.call(e,n,"$&_")}var lf=Ur,_p=lf.custom,yp=Qy(_p)?_p:null,VS=function t(e,n,i,r){var o=n||{};if(ir(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ir(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var h=ir(o,"customInspect")?o.customInspect:!0;if(typeof h!="boolean"&&h!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ir(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ir(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return tb(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return a?vp(e,s):s}if(typeof e=="bigint"){var c=String(e)+"n";return a?vp(e,c):c}var f=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return cf(e)?"[Array]":"[Object]";var l=cT(o,i);if(typeof r>"u")r=[];else if(eb(r,e)>=0)return"[Circular]";function u(q,G,j){if(G&&(r=HS.call(r),r.push(G)),j){var W={depth:o.depth};return ir(o,"quoteStyle")&&(W.quoteStyle=o.quoteStyle),t(q,W,i+1,r)}return t(q,o,i+1,r)}if(typeof e=="function"&&!bp(e)){var d=eT(e),p=Ha(e,u);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+hi.call(p,", ")+" }":"")}if(Qy(e)){var m=Js?cr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):af.call(e);return typeof e=="object"&&!Js?Eo(m):m}if(oT(e)){for(var g="<"+dp.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+Zy(XS(v[_].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+dp.call(String(e.nodeName))+">",g}if(cf(e)){if(e.length===0)return"[]";var b=Ha(e,u);return l&&!lT(b)?"["+uf(b,l)+"]":"[ "+hi.call(b,", ")+" ]"}if(GS(e)){var y=Ha(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!Jy.call(e,"cause")?"{ ["+String(e)+"] "+hi.call(pp.call("[cause]: "+u(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+hi.call(y,", ")+" }"}if(typeof e=="object"&&h){if(yp&&typeof e[yp]=="function"&&lf)return lf(e,{depth:f-i});if(h!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(tT(e)){var w=[];return up&&up.call(e,function(q,G){w.push(u(G,e,!0)+" => "+u(q,e))}),wp("Map",Ul.call(e),w,l)}if(rT(e)){var C=[];return fp&&fp.call(e,function(q){C.push(u(q,e))}),wp("Set",Yl.call(e),C,l)}if(nT(e))return lu("WeakMap");if(sT(e))return lu("WeakSet");if(iT(e))return lu("WeakRef");if(KS(e))return Eo(u(Number(e)));if(ZS(e))return Eo(u(of.call(e)));if(JS(e))return Eo(BS.call(e));if(qS(e))return Eo(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Ne)return"{ [object globalThis] }";if(!$S(e)&&!bp(e)){var T=Ha(e,u),O=mp?mp(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",I=!O&&pn&&Object(e)===e&&pn in e?yh.call(Sr(e),8,-1):D?"Object":"",Y=O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",z=Y+(I||D?"["+hi.call(pp.call([],I||[],D||[]),": ")+"] ":"");return T.length===0?z+"{}":l?z+"{"+uf(T,l)+"}":z+"{ "+hi.call(T,", ")+" }"}return String(e)};function Zy(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function XS(t){return cr.call(String(t),/"/g,"&quot;")}function cf(t){return Sr(t)==="[object Array]"&&(!pn||!(typeof t=="object"&&pn in t))}function $S(t){return Sr(t)==="[object Date]"&&(!pn||!(typeof t=="object"&&pn in t))}function bp(t){return Sr(t)==="[object RegExp]"&&(!pn||!(typeof t=="object"&&pn in t))}function GS(t){return Sr(t)==="[object Error]"&&(!pn||!(typeof t=="object"&&pn in t))}function qS(t){return Sr(t)==="[object String]"&&(!pn||!(typeof t=="object"&&pn in t))}function KS(t){return Sr(t)==="[object Number]"&&(!pn||!(typeof t=="object"&&pn in t))}function JS(t){return Sr(t)==="[object Boolean]"&&(!pn||!(typeof t=="object"&&pn in t))}function Qy(t){if(Js)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!af)return!1;try{return af.call(t),!0}catch{}return!1}function ZS(t){if(!t||typeof t!="object"||!of)return!1;try{return of.call(t),!0}catch{}return!1}var QS=Object.prototype.hasOwnProperty||function(t){return t in this};function ir(t,e){return QS.call(t,e)}function Sr(t){return US.call(t)}function eT(t){if(t.name)return t.name;var e=WS.call(YS.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function eb(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function tT(t){if(!Ul||!t||typeof t!="object")return!1;try{Ul.call(t);try{Yl.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function nT(t){if(!Ho||!t||typeof t!="object")return!1;try{Ho.call(t,Ho);try{Vo.call(t,Vo)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function iT(t){if(!hp||!t||typeof t!="object")return!1;try{return hp.call(t),!0}catch{}return!1}function rT(t){if(!Yl||!t||typeof t!="object")return!1;try{Yl.call(t);try{Ul.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function sT(t){if(!Vo||!t||typeof t!="object")return!1;try{Vo.call(t,Vo);try{Ho.call(t,Ho)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function oT(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function tb(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return tb(yh.call(t,0,e.maxStringLength),e)+i}var r=cr.call(cr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,aT);return Zy(r,"single",e)}function aT(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+zS.call(e.toString(16))}function Eo(t){return"Object("+t+")"}function lu(t){return t+" { ? }"}function wp(t,e,n,i){var r=i?uf(n,i):hi.call(n,", ");return t+" ("+e+") {"+r+"}"}function lT(t){for(var e=0;e<t.length;e++)if(eb(t[e],`
`)>=0)return!1;return!0}function cT(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=hi.call(Array(t.indent+1)," ");else return null;return{base:n,prev:hi.call(Array(e+1),n)}}function uf(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+hi.call(t,","+n)+`
`+e.prev}function Ha(t,e){var n=cf(t),i=[];if(n){i.length=t.length;for(var r=0;r<t.length;r++)i[r]=ir(t,r)?e(t[r],t):""}var o=typeof au=="function"?au(t):[],h;if(Js){h={};for(var a=0;a<o.length;a++)h["$"+o[a]]=o[a]}for(var s in t)ir(t,s)&&(n&&String(Number(s))===s&&s<t.length||Js&&h["$"+s]instanceof Symbol||(Ky.call(/[^\w$]/,s)?i.push(e(s,t)+": "+e(t[s],t)):i.push(s+": "+e(t[s],t))));if(typeof au=="function")for(var c=0;c<o.length;c++)Jy.call(t,o[c])&&i.push("["+e(o[c])+"]: "+e(t[o[c]],t));return i}var nb=fo,ho=FS,uT=VS,fT=Oa,Va=nb("%WeakMap%",!0),Xa=nb("%Map%",!0),hT=ho("WeakMap.prototype.get",!0),dT=ho("WeakMap.prototype.set",!0),pT=ho("WeakMap.prototype.has",!0),gT=ho("Map.prototype.get",!0),mT=ho("Map.prototype.set",!0),vT=ho("Map.prototype.has",!0),bh=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},_T=function(t,e){var n=bh(t,e);return n&&n.value},yT=function(t,e,n){var i=bh(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},bT=function(t,e){return!!bh(t,e)},wT=function(){var e,n,i,r={assert:function(o){if(!r.has(o))throw new fT("Side channel does not contain "+uT(o))},get:function(o){if(Va&&o&&(typeof o=="object"||typeof o=="function")){if(e)return hT(e,o)}else if(Xa){if(n)return gT(n,o)}else if(i)return _T(i,o)},has:function(o){if(Va&&o&&(typeof o=="object"||typeof o=="function")){if(e)return pT(e,o)}else if(Xa){if(n)return vT(n,o)}else if(i)return bT(i,o);return!1},set:function(o,h){Va&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Va),dT(e,o,h)):Xa?(n||(n=new Xa),mT(n,o,h)):(i||(i={key:{},next:null}),yT(i,o,h))}};return r},CT=String.prototype.replace,ST=/%20/g,cu={RFC1738:"RFC1738",RFC3986:"RFC3986"},wh={default:cu.RFC3986,formatters:{RFC1738:function(t){return CT.call(t,ST,"+")},RFC3986:function(t){return String(t)}},RFC1738:cu.RFC1738,RFC3986:cu.RFC3986},TT=wh,uu=Object.prototype.hasOwnProperty,Fr=Array.isArray,ci=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),kT=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Fr(i)){for(var r=[],o=0;o<i.length;++o)typeof i[o]<"u"&&r.push(i[o]);n.obj[n.prop]=r}}},ib=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},OT=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Fr(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!uu.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var r=e;return Fr(e)&&!Fr(n)&&(r=ib(e,i)),Fr(e)&&Fr(n)?(n.forEach(function(o,h){if(uu.call(e,h)){var a=e[h];a&&typeof a=="object"&&o&&typeof o=="object"?e[h]=t(a,o,i):e.push(o)}else e[h]=o}),e):Object.keys(n).reduce(function(o,h){var a=n[h];return uu.call(o,h)?o[h]=t(o[h],a,i):o[h]=a,o},r)},ET=function(e,n){return Object.keys(n).reduce(function(i,r){return i[r]=n[r],i},e)},xT=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},DT=function(e,n,i,r,o){if(e.length===0)return e;var h=e;if(typeof e=="symbol"?h=Symbol.prototype.toString.call(e):typeof e!="string"&&(h=String(e)),i==="iso-8859-1")return escape(h).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",s=0;s<h.length;++s){var c=h.charCodeAt(s);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===TT.RFC1738&&(c===40||c===41)){a+=h.charAt(s);continue}if(c<128){a=a+ci[c];continue}if(c<2048){a=a+(ci[192|c>>6]+ci[128|c&63]);continue}if(c<55296||c>=57344){a=a+(ci[224|c>>12]+ci[128|c>>6&63]+ci[128|c&63]);continue}s+=1,c=65536+((c&1023)<<10|h.charCodeAt(s)&1023),a+=ci[240|c>>18]+ci[128|c>>12&63]+ci[128|c>>6&63]+ci[128|c&63]}return a},AT=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],r=0;r<n.length;++r)for(var o=n[r],h=o.obj[o.prop],a=Object.keys(h),s=0;s<a.length;++s){var c=a[s],f=h[c];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(n.push({obj:h,prop:c}),i.push(f))}return kT(n),e},PT=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},MT=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},IT=function(e,n){return[].concat(e,n)},RT=function(e,n){if(Fr(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(n(e[r]));return i}return n(e)},rb={arrayToObject:ib,assign:ET,combine:IT,compact:AT,decode:xT,encode:DT,isBuffer:MT,isRegExp:PT,maybeMap:RT,merge:OT},sb=wT,_l=rb,Xo=wh,FT=Object.prototype.hasOwnProperty,ob={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},fi=Array.isArray,LT=Array.prototype.push,ab=function(t,e){LT.apply(t,fi(e)?e:[e])},NT=Date.prototype.toISOString,Cp=Xo.default,Gt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_l.encode,encodeValuesOnly:!1,format:Cp,formatter:Xo.formatters[Cp],indices:!1,serializeDate:function(e){return NT.call(e)},skipNulls:!1,strictNullHandling:!1},jT=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},fu={},BT=function t(e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_){for(var b=e,y=_,w=0,C=!1;(y=y.get(fu))!==void 0&&!C;){var T=y.get(e);if(w+=1,typeof T<"u"){if(T===w)throw new RangeError("Cyclic object value");C=!0}typeof y.get(fu)>"u"&&(w=0)}if(typeof f=="function"?b=f(n,b):b instanceof Date?b=d(b):i==="comma"&&fi(b)&&(b=_l.maybeMap(b,function(P){return P instanceof Date?d(P):P})),b===null){if(h)return c&&!g?c(n,Gt.encoder,v,"key",p):n;b=""}if(jT(b)||_l.isBuffer(b)){if(c){var O=g?n:c(n,Gt.encoder,v,"key",p);return[m(O)+"="+m(c(b,Gt.encoder,v,"value",p))]}return[m(n)+"="+m(String(b))]}var D=[];if(typeof b>"u")return D;var I;if(i==="comma"&&fi(b))g&&c&&(b=_l.maybeMap(b,c)),I=[{value:b.length>0?b.join(",")||null:void 0}];else if(fi(f))I=f;else{var Y=Object.keys(b);I=l?Y.sort(l):Y}var z=s?n.replace(/\./g,"%2E"):n,q=r&&fi(b)&&b.length===1?z+"[]":z;if(o&&fi(b)&&b.length===0)return q+"[]";for(var G=0;G<I.length;++G){var j=I[G],W=typeof j=="object"&&typeof j.value<"u"?j.value:b[j];if(!(a&&W===null)){var te=u&&s?j.replace(/\./g,"%2E"):j,se=fi(b)?typeof i=="function"?i(q,te):q:q+(u?"."+te:"["+te+"]");_.set(e,w);var E=sb();E.set(fu,_),ab(D,t(W,se,i,r,o,h,a,s,i==="comma"&&g&&fi(b)?null:c,f,l,u,d,p,m,g,v,E))}}return D},UT=function(e){if(!e)return Gt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Gt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Xo.default;if(typeof e.format<"u"){if(!FT.call(Xo.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Xo.formatters[i],o=Gt.filter;(typeof e.filter=="function"||fi(e.filter))&&(o=e.filter);var h;if(e.arrayFormat in ob?h=e.arrayFormat:"indices"in e?h=e.indices?"indices":"repeat":h=Gt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Gt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Gt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Gt.allowEmptyArrays,arrayFormat:h,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Gt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Gt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Gt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Gt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Gt.encodeValuesOnly,filter:o,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Gt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Gt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gt.strictNullHandling}},YT=function(t,e){var n=t,i=UT(e),r,o;typeof i.filter=="function"?(o=i.filter,n=o("",n)):fi(i.filter)&&(o=i.filter,r=o);var h=[];if(typeof n!="object"||n===null)return"";var a=ob[i.arrayFormat],s=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var c=sb(),f=0;f<r.length;++f){var l=r[f];i.skipNulls&&n[l]===null||ab(h,BT(n[l],l,a,s,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var u=h.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""},Zs=rb,ff=Object.prototype.hasOwnProperty,WT=Array.isArray,Ft={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Zs.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},zT=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},lb=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},HT="utf8=%26%2310003%3B",VT="utf8=%E2%9C%93",XT=function(e,n){var i={__proto__:null},r=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=n.parameterLimit===1/0?void 0:n.parameterLimit,h=r.split(n.delimiter,o),a=-1,s,c=n.charset;if(n.charsetSentinel)for(s=0;s<h.length;++s)h[s].indexOf("utf8=")===0&&(h[s]===VT?c="utf-8":h[s]===HT&&(c="iso-8859-1"),a=s,s=h.length);for(s=0;s<h.length;++s)if(s!==a){var f=h[s],l=f.indexOf("]="),u=l===-1?f.indexOf("="):l+1,d,p;u===-1?(d=n.decoder(f,Ft.decoder,c,"key"),p=n.strictNullHandling?null:""):(d=n.decoder(f.slice(0,u),Ft.decoder,c,"key"),p=Zs.maybeMap(lb(f.slice(u+1),n),function(g){return n.decoder(g,Ft.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=zT(p)),f.indexOf("[]=")>-1&&(p=WT(p)?[p]:p);var m=ff.call(i,d);m&&n.duplicates==="combine"?i[d]=Zs.combine(i[d],p):(!m||n.duplicates==="last")&&(i[d]=p)}return i},$T=function(t,e,n,i){for(var r=i?e:lb(e,n),o=t.length-1;o>=0;--o){var h,a=t[o];if(a==="[]"&&n.parseArrays)h=n.allowEmptyArrays&&r===""?[]:[].concat(r);else{h=n.plainObjects?Object.create(null):{};var s=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=n.decodeDotInKeys?s.replace(/%2E/g,"."):s,f=parseInt(c,10);!n.parseArrays&&c===""?h={0:r}:!isNaN(f)&&a!==c&&String(f)===c&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(h=[],h[f]=r):c!=="__proto__"&&(h[c]=r)}r=h}return r},GT=function(e,n,i,r){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,h=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=i.depth>0&&h.exec(o),c=s?o.slice(0,s.index):o,f=[];if(c){if(!i.plainObjects&&ff.call(Object.prototype,c)&&!i.allowPrototypes)return;f.push(c)}for(var l=0;i.depth>0&&(s=a.exec(o))!==null&&l<i.depth;){if(l+=1,!i.plainObjects&&ff.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+o.slice(s.index)+"]"),$T(f,n,i,r)}},qT=function(e){if(!e)return Ft;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Ft.charset:e.charset,i=typeof e.duplicates>"u"?Ft.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ft.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ft.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ft.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ft.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ft.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ft.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ft.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ft.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ft.decoder,delimiter:typeof e.delimiter=="string"||Zs.isRegExp(e.delimiter)?e.delimiter:Ft.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ft.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ft.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ft.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ft.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ft.strictNullHandling}},KT=function(t,e){var n=qT(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?XT(t,n):t,r=n.plainObjects?Object.create(null):{},o=Object.keys(i),h=0;h<o.length;++h){var a=o[h],s=GT(a,i[a],n,typeof t=="string");r=Zs.merge(r,s,n)}return n.allowSparse===!0?r:Zs.compact(r)},JT=YT,ZT=KT,QT=wh,ek={formats:QT,parse:ZT,stringify:JT};const Ch=V1(ek);let wn="https://podiz-strapi-uieqvbv3ya-du.a.run.app";async function tk(t){try{return{data:await(await fetch(`${wn}/publishes/${t}`)).json()}}catch(e){return{error:e}}}async function nk(t){try{return{data:await(await fetch(`${wn}/shops/${t}`)).json()}}catch(e){return{error:e}}}async function ik(t,e={perPage:24,current:0,keyword:"",categories:[]}){try{const n=[];if(e.keyword&&n.push({_or:[{name_contains:e.keyword},{tag_contains:e.keyword}]}),n.push({shop:t}),e.categories.length){const s=[];e.categories.forEach(c=>{s.push({categories_contains:c})}),n.push({_or:{...s}})}const i=Ch.stringify({_where:{...n},_start:e.perPage*e.current,_sort:"created_at:DESC",_limit:e.perPage}),r=await fetch(`${wn}/cliparts?${i}`),o=await fetch(`${wn}/cliparts/count?${i}`),h=await r.json(),a=await o.json();return{data:h,count:a}}catch(n){return{error:n}}}const rk=async t=>{try{return{data:await(await fetch(`${wn}/fonts?shop=${t}`)).json()}}catch(e){return{error:e}}},sk=async t=>{try{const n=await(await fetch(`${wn}/shop-default-fonts?shop=${t}`)).json();return n.length||n.push({shop:t,defaultFonts:[]}),{data:n[0]}}catch(e){return{error:`기본폰트 조회가 실패하였습니다. ${e}`}}},cb=async t=>{try{return{data:await(await fetch(`${wn}/editor-data/${t}`)).json()}}catch(e){return{error:e}}},ok=async t=>{try{const e=t.id?"PUT":"POST",n=t.id?`/${t.id}`:"";return{data:await(await fetch(`${wn}/editor-data${n}`,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}}catch{return{error:"데이터 입력 실패."}}},ak=async(t,e=null)=>{try{return{data:await(e?await fetch(`${wn}/colors?shop=${t}&colorGroup=${e}`):await fetch(`${wn}/colors?shop=${t}`)).json()}}catch(n){return{error:n}}},lk=async t=>{try{return{data:await(await fetch(`${wn}/composites?print=${t}`)).json(),error:null}}catch(e){return{error:e}}},ck=async({provider:t,productno:e,shopid:n})=>{try{const i=[];t?i.push({selectApi:t}):i.push({selectApi_null:!0}),e?i.push({productNo:e}):i.push({productNo_null:!0}),n&&i.push({shop:n});const r=Ch.stringify({_where:{...i},_sort:"created_at:DESC"});return{data:await(await fetch(`${wn}/editor-product-links?${r}`)).json(),error:null}}catch(i){return{error:i}}};async function uk(t,e,n=null,i={perPage:24,current:0,keyword:""}){try{let r=[{cafe24MallId:t},{cafe24MemberId:e}];if(console.log({selectedPeriod:n}),n){const f=new Date,l=24*60*60*1e3,u=new Date(f.getTime()-n*30*l);r.push({created_at_gte:u.toISOString()})}console.log({where:r});const o=Ch.stringify({_where:r,_start:i.perPage*i.current,_sort:"created_at:DESC",_limit:i.perPage}),h=await fetch(`${wn}/editor-data?${o}`),a=await fetch(`${wn}/editor-data/count?${o}`),s=await h.json(),c=await a.json();return{data:s,count:c}}catch(r){return console.log({error:r}),{error:r}}}async function fk(t){try{return{data:await(await fetch(`${wn}/editor-product-links/templates/${t}`)).json(),error:null}}catch(e){return{error:e}}}const po=yt(null),$o=yt([]),hu=yt([]),Le=yt({}),Go=yt([]),di=yt([]),jo=yt(0),ra=yt(0),Ii=yt({options:null,product:null}),Yt=yt(null),Wl=yt(null),Sp=yt(null),js=yt(null),Tp=yt(null);async function hk(t){const{data:e,error:n}=await nk(t);if(n){console.error(n);return}po.set(e)}const qo=/^[a-z0-9]+(-[a-z0-9]+)*$/,hc=(t,e,n,i="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),s=r.pop(),c={provider:r.length>0?r[0]:i,prefix:s,name:a};return e&&!yl(c)?null:c}const o=r[0],h=o.split("-");if(h.length>1){const a={provider:i,prefix:h.shift(),name:h.join("-")};return e&&!yl(a)?null:a}if(n&&i===""){const a={provider:i,prefix:"",name:o};return e&&!yl(a,n)?null:a}return null},yl=(t,e)=>t?!!((t.provider===""||t.provider.match(qo))&&(e&&t.prefix===""||t.prefix.match(qo))&&t.name.match(qo)):!1,ub=Object.freeze({left:0,top:0,width:16,height:16}),zl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),dc=Object.freeze({...ub,...zl}),hf=Object.freeze({...dc,body:"",hidden:!1});function dk(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(n.rotate=i),n}function kp(t,e){const n=dk(t,e);for(const i in hf)i in zl?i in t&&!(i in n)&&(n[i]=zl[i]):i in e?n[i]=e[i]:i in t&&(n[i]=t[i]);return n}function pk(t,e){const n=t.icons,i=t.aliases||Object.create(null),r=Object.create(null);function o(h){if(n[h])return r[h]=[];if(!(h in r)){r[h]=null;const a=i[h]&&i[h].parent,s=a&&o(a);s&&(r[h]=[a].concat(s))}return r[h]}return(e||Object.keys(n).concat(Object.keys(i))).forEach(o),r}function gk(t,e,n){const i=t.icons,r=t.aliases||Object.create(null);let o={};function h(a){o=kp(i[a]||r[a],o)}return h(e),n.forEach(h),kp(t,o)}function fb(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(r=>{e(r,null),n.push(r)});const i=pk(t);for(const r in i){const o=i[r];o&&(e(r,gk(t,r,o)),n.push(r))}return n}const mk={provider:"",aliases:{},not_found:{},...ub};function du(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function hb(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!du(t,mk))return null;const n=e.icons;for(const r in n){const o=n[r];if(!r.match(qo)||typeof o.body!="string"||!du(o,hf))return null}const i=e.aliases||Object.create(null);for(const r in i){const o=i[r],h=o.parent;if(!r.match(qo)||typeof h!="string"||!n[h]&&!i[h]||!du(o,hf))return null}return e}const Op=Object.create(null);function vk(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Jr(t,e){const n=Op[t]||(Op[t]=Object.create(null));return n[e]||(n[e]=vk(t,e))}function Sh(t,e){return hb(e)?fb(e,(n,i)=>{i?t.icons[n]=i:t.missing.add(n)}):[]}function _k(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let sa=!1;function db(t){return typeof t=="boolean"&&(sa=t),sa}function yk(t){const e=typeof t=="string"?hc(t,!0,sa):t;if(e){const n=Jr(e.provider,e.prefix),i=e.name;return n.icons[i]||(n.missing.has(i)?null:void 0)}}function bk(t,e){const n=hc(t,!0,sa);if(!n)return!1;const i=Jr(n.provider,n.prefix);return _k(i,n.name,e)}function wk(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),sa&&!e&&!t.prefix){let r=!1;return hb(t)&&(t.prefix="",fb(t,(o,h)=>{h&&bk(o,h)&&(r=!0)})),r}const n=t.prefix;if(!yl({provider:e,prefix:n,name:"a"}))return!1;const i=Jr(e,n);return!!Sh(i,t)}const pb=Object.freeze({width:null,height:null}),gb=Object.freeze({...pb,...zl}),Ck=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Sk=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ep(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const i=t.split(Ck);if(i===null||!i.length)return t;const r=[];let o=i.shift(),h=Sk.test(o);for(;;){if(h){const a=parseFloat(o);isNaN(a)?r.push(o):r.push(Math.ceil(a*e*n)/n)}else r.push(o);if(o=i.shift(),o===void 0)return r.join("");h=!h}}function Tk(t,e="defs"){let n="";const i=t.indexOf("<"+e);for(;i>=0;){const r=t.indexOf(">",i),o=t.indexOf("</"+e);if(r===-1||o===-1)break;const h=t.indexOf(">",o);if(h===-1)break;n+=t.slice(r+1,o).trim(),t=t.slice(0,i).trim()+t.slice(h+1)}return{defs:n,content:t}}function kk(t,e){return t?"<defs>"+t+"</defs>"+e:e}function Ok(t,e,n){const i=Tk(t);return kk(i.defs,e+i.content+n)}const Ek=t=>t==="unset"||t==="undefined"||t==="none";function xk(t,e){const n={...dc,...t},i={...gb,...e},r={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,i].forEach(m=>{const g=[],v=m.hFlip,_=m.vFlip;let b=m.rotate;v?_?b+=2:(g.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),g.push("scale(-1 1)"),r.top=r.left=0):_&&(g.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),g.push("scale(1 -1)"),r.top=r.left=0);let y;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:y=r.height/2+r.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:y=r.width/2+r.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}b%2===1&&(r.left!==r.top&&(y=r.left,r.left=r.top,r.top=y),r.width!==r.height&&(y=r.width,r.width=r.height,r.height=y)),g.length&&(o=Ok(o,'<g transform="'+g.join(" ")+'">',"</g>"))});const h=i.width,a=i.height,s=r.width,c=r.height;let f,l;h===null?(l=a===null?"1em":a==="auto"?c:a,f=Ep(l,s/c)):(f=h==="auto"?s:h,l=a===null?Ep(f,c/s):a==="auto"?c:a);const u={},d=(m,g)=>{Ek(g)||(u[m]=g.toString())};d("width",f),d("height",l);const p=[r.left,r.top,s,c];return u.viewBox=p.join(" "),{attributes:u,viewBox:p,body:o}}const Dk=/\sid="(\S+)"/g,Ak="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Pk=0;function Mk(t,e=Ak){const n=[];let i;for(;i=Dk.exec(t);)n.push(i[1]);if(!n.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const h=typeof e=="function"?e(o):e+(Pk++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+h+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const df=Object.create(null);function Ik(t,e){df[t]=e}function pf(t){return df[t]||df[""]}function Th(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const kh=Object.create(null),xo=["https://api.simplesvg.com","https://api.unisvg.com"],bl=[];for(;xo.length>0;)xo.length===1||Math.random()>.5?bl.push(xo.shift()):bl.push(xo.pop());kh[""]=Th({resources:["https://api.iconify.design"].concat(bl)});function Rk(t,e){const n=Th(e);return n===null?!1:(kh[t]=n,!0)}function Oh(t){return kh[t]}const Fk=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let xp=Fk();function Lk(t,e){const n=Oh(t);if(!n)return 0;let i;if(!n.maxURL)i=0;else{let r=0;n.resources.forEach(h=>{r=Math.max(r,h.length)});const o=e+".json?icons=";i=n.maxURL-r-n.path.length-o.length}return i}function Nk(t){return t===404}const jk=(t,e,n)=>{const i=[],r=Lk(t,e),o="icons";let h={type:o,provider:t,prefix:e,icons:[]},a=0;return n.forEach((s,c)=>{a+=s.length+1,a>=r&&c>0&&(i.push(h),h={type:o,provider:t,prefix:e,icons:[]},a=s.length),h.icons.push(s)}),i.push(h),i};function Bk(t){if(typeof t=="string"){const e=Oh(t);if(e)return e.path}return"/"}const Uk=(t,e,n)=>{if(!xp){n("abort",424);return}let i=Bk(e.provider);switch(e.type){case"icons":{const o=e.prefix,a=e.icons.join(","),s=new URLSearchParams({icons:a});i+=o+".json?"+s.toString();break}case"custom":{const o=e.uri;i+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let r=503;xp(t+i).then(o=>{const h=o.status;if(h!==200){setTimeout(()=>{n(Nk(h)?"abort":"next",h)});return}return r=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",r)});return}setTimeout(()=>{n("success",o)})}).catch(()=>{n("next",r)})},Yk={prepare:jk,send:Uk};function Wk(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((r,o)=>r.provider!==o.provider?r.provider.localeCompare(o.provider):r.prefix!==o.prefix?r.prefix.localeCompare(o.prefix):r.name.localeCompare(o.name));let i={provider:"",prefix:"",name:""};return t.forEach(r=>{if(i.name===r.name&&i.prefix===r.prefix&&i.provider===r.provider)return;i=r;const o=r.provider,h=r.prefix,a=r.name,s=n[o]||(n[o]=Object.create(null)),c=s[h]||(s[h]=Jr(o,h));let f;a in c.icons?f=e.loaded:h===""||c.missing.has(a)?f=e.missing:f=e.pending;const l={provider:o,prefix:h,name:a};f.push(l)}),e}function mb(t,e){t.forEach(n=>{const i=n.loaderCallbacks;i&&(n.loaderCallbacks=i.filter(r=>r.id!==e))})}function zk(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const i=t.provider,r=t.prefix;e.forEach(o=>{const h=o.icons,a=h.pending.length;h.pending=h.pending.filter(s=>{if(s.prefix!==r)return!0;const c=s.name;if(t.icons[c])h.loaded.push({provider:i,prefix:r,name:c});else if(t.missing.has(c))h.missing.push({provider:i,prefix:r,name:c});else return n=!0,!0;return!1}),h.pending.length!==a&&(n||mb([t],o.id),o.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),o.abort))})}))}let Hk=0;function Vk(t,e,n){const i=Hk++,r=mb.bind(null,n,i);if(!e.pending.length)return r;const o={id:i,icons:e,callback:t,abort:r};return n.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(o)}),r}function Xk(t,e=!0,n=!1){const i=[];return t.forEach(r=>{const o=typeof r=="string"?hc(r,e,n):r;o&&i.push(o)}),i}var $k={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Gk(t,e,n,i){const r=t.resources.length,o=t.random?Math.floor(Math.random()*r):t.index;let h;if(t.random){let C=t.resources.slice(0);for(h=[];C.length>1;){const T=Math.floor(Math.random()*C.length);h.push(C[T]),C=C.slice(0,T).concat(C.slice(T+1))}h=h.concat(C)}else h=t.resources.slice(o).concat(t.resources.slice(0,o));const a=Date.now();let s="pending",c=0,f,l=null,u=[],d=[];typeof i=="function"&&d.push(i);function p(){l&&(clearTimeout(l),l=null)}function m(){s==="pending"&&(s="aborted"),p(),u.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),u=[]}function g(C,T){T&&(d=[]),typeof C=="function"&&d.push(C)}function v(){return{startTime:a,payload:e,status:s,queriesSent:c,queriesPending:u.length,subscribe:g,abort:m}}function _(){s="failed",d.forEach(C=>{C(void 0,f)})}function b(){u.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),u=[]}function y(C,T,O){const D=T!=="success";switch(u=u.filter(I=>I!==C),s){case"pending":break;case"failed":if(D||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){f=O,_();return}if(D){f=O,u.length||(h.length?w():_());return}if(p(),b(),!t.random){const I=t.resources.indexOf(C.resource);I!==-1&&I!==t.index&&(t.index=I)}s="completed",d.forEach(I=>{I(O)})}function w(){if(s!=="pending")return;p();const C=h.shift();if(C===void 0){if(u.length){l=setTimeout(()=>{p(),s==="pending"&&(b(),_())},t.timeout);return}_();return}const T={status:"pending",resource:C,callback:(O,D)=>{y(T,O,D)}};u.push(T),c++,l=setTimeout(w,t.rotate),n(C,e,T.callback)}return setTimeout(w),v}function vb(t){const e={...$k,...t};let n=[];function i(){n=n.filter(a=>a().status==="pending")}function r(a,s,c){const f=Gk(e,a,s,(l,u)=>{i(),c&&c(l,u)});return n.push(f),f}function o(a){return n.find(s=>a(s))||null}return{query:r,find:o,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:i}}function Dp(){}const pu=Object.create(null);function qk(t){if(!pu[t]){const e=Oh(t);if(!e)return;const n=vb(e),i={config:e,redundancy:n};pu[t]=i}return pu[t]}function Kk(t,e,n){let i,r;if(typeof t=="string"){const o=pf(t);if(!o)return n(void 0,424),Dp;r=o.send;const h=qk(t);h&&(i=h.redundancy)}else{const o=Th(t);if(o){i=vb(o);const h=t.resources?t.resources[0]:"",a=pf(h);a&&(r=a.send)}}return!i||!r?(n(void 0,424),Dp):i.query(e,r,n)().abort}const Ap="iconify2",oa="iconify",_b=oa+"-count",Pp=oa+"-version",yb=36e5,Jk=168,Zk=50;function gf(t,e){try{return t.getItem(e)}catch{}}function Eh(t,e,n){try{return t.setItem(e,n),!0}catch{}}function Mp(t,e){try{t.removeItem(e)}catch{}}function mf(t,e){return Eh(t,_b,e.toString())}function vf(t){return parseInt(gf(t,_b))||0}const pc={local:!0,session:!0},bb={local:new Set,session:new Set};let xh=!1;function Qk(t){xh=t}let $a=typeof window>"u"?{}:window;function wb(t){const e=t+"Storage";try{if($a&&$a[e]&&typeof $a[e].length=="number")return $a[e]}catch{}pc[t]=!1}function Cb(t,e){const n=wb(t);if(!n)return;const i=gf(n,Pp);if(i!==Ap){if(i){const a=vf(n);for(let s=0;s<a;s++)Mp(n,oa+s.toString())}Eh(n,Pp,Ap),mf(n,0);return}const r=Math.floor(Date.now()/yb)-Jk,o=a=>{const s=oa+a.toString(),c=gf(n,s);if(typeof c=="string"){try{const f=JSON.parse(c);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>r&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,a))return!0}catch{}Mp(n,s)}};let h=vf(n);for(let a=h-1;a>=0;a--)o(a)||(a===h-1?(h--,mf(n,h)):bb[t].add(a))}function Sb(){if(!xh){Qk(!0);for(const t in pc)Cb(t,e=>{const n=e.data,i=e.provider,r=n.prefix,o=Jr(i,r);if(!Sh(o,n).length)return!1;const h=n.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,h):h,!0})}}function eO(t,e){const n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(const i in pc)Cb(i,r=>{const o=r.data;return r.provider!==t.provider||o.prefix!==t.prefix||o.lastModified===e});return!0}function tO(t,e){xh||Sb();function n(i){let r;if(!pc[i]||!(r=wb(i)))return;const o=bb[i];let h;if(o.size)o.delete(h=Array.from(o).shift());else if(h=vf(r),h>=Zk||!mf(r,h+1))return;const a={cached:Math.floor(Date.now()/yb),provider:t.provider,data:e};return Eh(r,oa+h.toString(),JSON.stringify(a))}e.lastModified&&!eO(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),n("local")||n("session"))}function Ip(){}function nO(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,zk(t)}))}function iO(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:i}=t,r=t.iconsToLoad;delete t.iconsToLoad;let o;if(!r||!(o=pf(n)))return;o.prepare(n,i,r).forEach(a=>{Kk(n,a,s=>{if(typeof s!="object")a.icons.forEach(c=>{t.missing.add(c)});else try{const c=Sh(t,s);if(!c.length)return;const f=t.pendingIcons;f&&c.forEach(l=>{f.delete(l)}),tO(t,s)}catch(c){console.error(c)}nO(t)})})}))}const rO=(t,e)=>{const n=Xk(t,!0,db()),i=Wk(n);if(!i.pending.length){let s=!0;return e&&setTimeout(()=>{s&&e(i.loaded,i.missing,i.pending,Ip)}),()=>{s=!1}}const r=Object.create(null),o=[];let h,a;return i.pending.forEach(s=>{const{provider:c,prefix:f}=s;if(f===a&&c===h)return;h=c,a=f,o.push(Jr(c,f));const l=r[c]||(r[c]=Object.create(null));l[f]||(l[f]=[])}),i.pending.forEach(s=>{const{provider:c,prefix:f,name:l}=s,u=Jr(c,f),d=u.pendingIcons||(u.pendingIcons=new Set);d.has(l)||(d.add(l),r[c][f].push(l))}),o.forEach(s=>{const{provider:c,prefix:f}=s;r[c][f].length&&iO(s,r[c][f])}),e?Vk(e,i,o):Ip};function sO(t,e){const n={...t};for(const i in e){const r=e[i],o=typeof r;i in pb?(r===null||r&&(o==="string"||o==="number"))&&(n[i]=r):o===typeof n[i]&&(n[i]=i==="rotate"?r%4:r)}return n}const oO=/[\s,]+/;function aO(t,e){e.split(oO).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function lO(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function i(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(t);return isNaN(r)?0:i(r)}else if(n!==t){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let o=parseFloat(t.slice(0,t.length-n.length));return isNaN(o)?0:(o=o/r,o%1===0?i(o):0)}}return e}function cO(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)n+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function uO(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function fO(t){return"data:image/svg+xml,"+uO(t)}function hO(t){return'url("'+fO(t)+'")'}const Rp={...gb,inline:!1},dO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},pO={display:"inline-block"},_f={"background-color":"currentColor"},Tb={"background-color":"transparent"},Fp={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Lp={"-webkit-mask":_f,mask:_f,background:Tb};for(const t in Lp){const e=Lp[t];for(const n in Fp)e[t+"-"+n]=Fp[n]}function gO(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function mO(t,e){const n=sO(Rp,e),i=e.mode||"svg",r=i==="svg"?{...dO}:{};t.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let o=typeof e.style=="string"?e.style:"";for(let v in e){const _=e[v];if(_!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[v]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&aO(n,_);break;case"color":o=o+(o.length>0&&o.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?n[v]=lO(_):typeof _=="number"&&(n[v]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete r["aria-hidden"];break;default:if(v.slice(0,3)==="on:")break;Rp[v]===void 0&&(r[v]=_)}}const h=xk(t,n),a=h.attributes;if(n.inline&&(o="vertical-align: -0.125em; "+o),i==="svg"){Object.assign(r,a),o!==""&&(r.style=o);let v=0,_=e.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:r,body:Mk(h.body,_?()=>_+"ID"+v++:"iconifySvelte")}}const{body:s,width:c,height:f}=t,l=i==="mask"||(i==="bg"?!1:s.indexOf("currentColor")!==-1),u=cO(s,{...a,width:c+"",height:f+""}),p={"--svg":hO(u)},m=v=>{const _=a[v];_&&(p[v]=gO(_))};m("width"),m("height"),Object.assign(p,pO,l?_f:Tb);let g="";for(const v in p)g+=v+": "+p[v]+";";return r.style=g+o,{svg:!1,attributes:r}}db(!0);Ik("",Yk);if(typeof document<"u"&&typeof window<"u"){Sb();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!wk(i))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const i="IconifyProviders["+n+"] is invalid.";try{const r=e[n];if(typeof r!="object"||!r||r.resources===void 0)continue;Rk(n,r)||console.error(i)}catch{console.error(i)}}}}function vO(t,e,n,i,r){function o(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",o(),{data:{...dc,...t}};let h;if(typeof t!="string"||(h=hc(t,!1,!0))===null)return o(),null;const a=yk(h);if(!a)return n&&(!e.loading||e.loading.name!==t)&&(o(),e.name="",e.loading={name:t,abort:rO([h],i)}),null;o(),e.name!==t&&(e.name=t,r&&!e.destroyed&&r(t));const s=["iconify"];return h.prefix!==""&&s.push("iconify--"+h.prefix),h.provider!==""&&s.push("iconify--"+h.provider),{data:a,classes:s}}function _O(t,e){return t?mO({...dc,...t},e):null}function Np(t){let e;function n(o,h){return o[0].svg?bO:yO}let i=n(t),r=i(t);return{c(){r.c(),e=Je()},m(o,h){r.m(o,h),B(o,e,h)},p(o,h){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&N(e),r.d(o)}}}function yO(t){let e,n=[t[0].attributes],i={};for(let r=0;r<n.length;r+=1)i=bi(i,n[r]);return{c(){e=x("span"),Il(e,i)},m(r,o){B(r,e,o)},p(r,o){Il(e,i=Kr(n,[o&1&&r[0].attributes]))},d(r){r&&N(e)}}}function bO(t){let e,n=t[0].body+"",i=[t[0].attributes],r={};for(let o=0;o<i.length;o+=1)r=bi(r,i[o]);return{c(){e=T1("svg"),Wd(e,r)},m(o,h){B(o,e,h),e.innerHTML=n},p(o,h){h&1&&n!==(n=o[0].body+"")&&(e.innerHTML=n),Wd(e,r=Kr(i,[h&1&&o[0].attributes]))},d(o){o&&N(e)}}}function wO(t){let e,n=t[0]&&Np(t);return{c(){n&&n.c(),e=Je()},m(i,r){n&&n.m(i,r),B(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=Np(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d(i)}}}function CO(t,e,n){const i={name:"",loading:null,destroyed:!1};let r=!1,o=0,h;const a=c=>{typeof e.onLoad=="function"&&e.onLoad(c),Xt()("load",{icon:c})};function s(){n(3,o++,o)}return xi(()=>{n(2,r=!0)}),Di(()=>{n(1,i.destroyed=!0,i),i.loading&&(i.loading.abort(),n(1,i.loading=null,i))}),t.$$set=c=>{n(6,e=bi(bi({},e),Ud(c)))},t.$$.update=()=>{{const c=vO(e.icon,i,r,s,a);n(0,h=c?_O(c.data,e):null),h&&c.classes&&n(0,h.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),h)}},e=Ud(e),[h,i,r,o]}class Ce extends qe{constructor(e){super(),Ge(this,e,CO,wO,Ve,{})}}function SO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return f=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("input"),o=V(),h=x("div"),a=x("input"),s=V(),c=x("button"),he(f.$$.fragment),S(r,"id","minmax-range"),S(r,"type","range"),S(r,"min","0"),S(r,"max","360"),S(r,"step","1"),S(r,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(i,"class","w-full mt-3"),S(a,"type","text"),S(a,"class","input w-full text-center"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){B(p,e,m),k(e,n),k(n,i),k(i,r),Re(r,t[1]),k(n,o),k(n,h),k(h,a),Re(a,t[1]),k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[Q(r,"change",t[3]),Q(r,"input",t[3]),Q(r,"input",t[4]),Q(a,"input",t[5]),Q(a,"input",t[6]),Q(c,"click",t[7])],u=!0)},p(p,[m]){m&2&&Re(r,p[1]),m&2&&a.value!==p[1]&&Re(a,p[1])},i(p){l||(M(f.$$.fragment,p),l=!0)},o(p){U(f.$$.fragment,p),l=!1},d(p){p&&N(e),fe(f),u=!1,Ue(d)}}}function TO(t,e,n){let{selectProperty:i=null}=e,{sliderValue:r=0}=e;const o=Xt();function h(){o("onChangeRotate",{value:r})}Di(()=>{n(0,i=null)});function a(){r=Py(this.value),n(1,r)}const s=()=>h();function c(){r=this.value,n(1,r)}const f=()=>h(),l=()=>n(0,i=null);return t.$$set=u=>{"selectProperty"in u&&n(0,i=u.selectProperty),"sliderValue"in u&&n(1,r=u.sliderValue)},[i,r,h,a,s,c,f,l]}class kO extends qe{constructor(e){super(),Ge(this,e,TO,SO,Ve,{selectProperty:0,sliderValue:1})}}var OO={grad:.9,turn:360,rad:360/(2*Math.PI)},Ri=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},en=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Vn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},kb=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},jp=function(t){return{r:Vn(t.r,0,255),g:Vn(t.g,0,255),b:Vn(t.b,0,255),a:Vn(t.a)}},gu=function(t){return{r:en(t.r),g:en(t.g),b:en(t.b),a:en(t.a,3)}},EO=/^#([0-9a-f]{3,8})$/i,Ga=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Ob=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),h=o-Math.min(e,n,i),a=h?o===e?(n-i)/h:o===n?2+(i-e)/h:4+(e-n)/h:0;return{h:60*(a<0?a+6:a),s:o?h/o*100:0,v:o/255*100,a:r}},Eb=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),h=i*(1-n),a=i*(1-(e-o)*n),s=i*(1-(1-e+o)*n),c=o%6;return{r:255*[i,a,h,h,s,i][c],g:255*[s,i,i,a,h,h][c],b:255*[h,h,s,i,i,a][c],a:r}},Bp=function(t){return{h:kb(t.h),s:Vn(t.s,0,100),l:Vn(t.l,0,100),a:Vn(t.a)}},Up=function(t){return{h:en(t.h),s:en(t.s),l:en(t.l),a:en(t.a,3)}},Yp=function(t){return Eb((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},Ko=function(t){return{h:(e=Ob(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},xO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,PO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wp={string:[[function(t){var e=EO.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?en(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?en(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=AO.exec(t)||PO.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:jp({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=xO.exec(t)||DO.exec(t);if(!e)return null;var n,i,r=Bp({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(OO[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Yp(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=r===void 0?1:r;return Ri(e)&&Ri(n)&&Ri(i)?jp({r:Number(e),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,o=r===void 0?1:r;if(!Ri(e)||!Ri(n)||!Ri(i))return null;var h=Bp({h:Number(e),s:Number(n),l:Number(i),a:Number(o)});return Yp(h)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=r===void 0?1:r;if(!Ri(e)||!Ri(n)||!Ri(i))return null;var h=function(a){return{h:kb(a.h),s:Vn(a.s,0,100),v:Vn(a.v,0,100),a:Vn(a.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(o)});return Eb(h)},"hsv"]]},zp=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},MO=function(t){return typeof t=="string"?zp(t.trim(),Wp.string):typeof t=="object"&&t!==null?zp(t,Wp.object):[null,void 0]},mu=function(t,e){var n=Ko(t);return{h:n.h,s:Vn(n.s+100*e,0,100),l:n.l,a:n.a}},vu=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Hp=function(t,e){var n=Ko(t);return{h:n.h,s:n.s,l:Vn(n.l+100*e,0,100),a:n.a}},Vp=function(){function t(e){this.parsed=MO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return en(vu(this.rgba),2)},t.prototype.isDark=function(){return vu(this.rgba)<.5},t.prototype.isLight=function(){return vu(this.rgba)>=.5},t.prototype.toHex=function(){return e=gu(this.rgba),n=e.r,i=e.g,r=e.b,h=(o=e.a)<1?Ga(en(255*o)):"","#"+Ga(n)+Ga(i)+Ga(r)+h;var e,n,i,r,o,h},t.prototype.toRgb=function(){return gu(this.rgba)},t.prototype.toRgbString=function(){return e=gu(this.rgba),n=e.r,i=e.g,r=e.b,(o=e.a)<1?"rgba("+n+", "+i+", "+r+", "+o+")":"rgb("+n+", "+i+", "+r+")";var e,n,i,r,o},t.prototype.toHsl=function(){return Up(Ko(this.rgba))},t.prototype.toHslString=function(){return e=Up(Ko(this.rgba)),n=e.h,i=e.s,r=e.l,(o=e.a)<1?"hsla("+n+", "+i+"%, "+r+"%, "+o+")":"hsl("+n+", "+i+"%, "+r+"%)";var e,n,i,r,o},t.prototype.toHsv=function(){return e=Ob(this.rgba),{h:en(e.h),s:en(e.s),v:en(e.v),a:en(e.a,3)};var e},t.prototype.invert=function(){return Mn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Mn(mu(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mn(mu(this.rgba,-e))},t.prototype.grayscale=function(){return Mn(mu(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Mn(Hp(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Mn(Hp(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Mn({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):en(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Ko(this.rgba);return typeof e=="number"?Mn({h:e,s:n.s,l:n.l,a:n.a}):en(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Mn(e).toHex()},t}(),Mn=function(t){return t instanceof Vp?t:new Vp(t)};function Xp(t){let e;return{c(){e=x("input"),S(e,"type","hidden"),S(e,"name",t[3]),e.value=t[0]},m(n,i){B(n,e,i)},p(n,i){i&8&&S(e,"name",n[3]),i&1&&(e.value=n[0])},d(n){n&&N(e)}}}function IO(t){let e,n,i,r,o,h,a,s,c,f=t[3]&&Xp(t);return{c(){e=x("div"),n=x("div"),i=V(),r=x("div"),h=V(),f&&f.c(),a=Je(),S(n,"class","track svelte-x7oaj0"),S(r,"class","thumb svelte-x7oaj0"),S(e,"class","slider svelte-x7oaj0"),S(e,"role","slider"),S(e,"aria-orientation",t[4]),S(e,"aria-valuemax",t[11]),S(e,"aria-valuemin",t[10]),S(e,"aria-valuenow",t[0]),S(e,"aria-valuetext",o=t[2](t[0])),S(e,"aria-label",t[7]),S(e,"aria-labelledby",t[8]),S(e,"aria-controls",t[9]),S(e,"tabindex","0"),Ci(e,"reverse",t[5]),mt(e,"--position",t[12])},m(l,u){B(l,e,u),k(e,n),k(e,i),k(e,r),t[22](e),B(l,h,u),f&&f.m(l,u),B(l,a,u),s||(c=[Q(window,"mousemove",t[15]),Q(window,"mouseup",t[16]),Q(e,"keydown",t[13]),Q(e,"mousedown",k1(function(){Hn(t[6]?void 0:t[14])&&(t[6]?void 0:t[14]).apply(this,arguments)})),Q(e,"touchstart",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Q(e,"touchmove",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Q(e,"touchend",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1})],s=!0)},p(l,[u]){t=l,u&16&&S(e,"aria-orientation",t[4]),u&2048&&S(e,"aria-valuemax",t[11]),u&1024&&S(e,"aria-valuemin",t[10]),u&1&&S(e,"aria-valuenow",t[0]),u&5&&o!==(o=t[2](t[0]))&&S(e,"aria-valuetext",o),u&128&&S(e,"aria-label",t[7]),u&256&&S(e,"aria-labelledby",t[8]),u&512&&S(e,"aria-controls",t[9]),u&32&&Ci(e,"reverse",t[5]),u&4096&&mt(e,"--position",t[12]),t[3]?f?f.p(t,u):(f=Xp(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:ge,o:ge,d(l){l&&(N(e),N(h),N(a)),t[22](null),f&&f.d(l),s=!1,Ue(c)}}}function RO(t,e,n){let i,r,o,h,{min:a=0}=e,{max:s=100}=e,{step:c=1}=e,{value:f=50}=e,{ariaValueText:l=j=>j.toString()}=e,{name:u=void 0}=e,{direction:d="horizontal"}=e,{reverse:p=!1}=e,{keyboardOnly:m=!1}=e,{slider:g=void 0}=e,{ariaLabel:v=void 0}=e,{ariaLabelledBy:_=void 0}=e,{ariaControls:b=void 0}=e,{isDragging:y=!1}=e;const w=Xt();function C(j){const W=1/o,te=Math.round(j*W)/W;return Math.max(i,Math.min(r,te))}function T(j){const W=j.shiftKey?o*10:o;j.key==="ArrowUp"||j.key==="ArrowRight"?(n(0,f+=W),j.preventDefault()):j.key==="ArrowDown"||j.key==="ArrowLeft"?(n(0,f-=W),j.preventDefault()):j.key==="Home"?(n(0,f=i),j.preventDefault()):j.key==="End"?(n(0,f=r),j.preventDefault()):j.key==="PageUp"?(n(0,f+=o*10),j.preventDefault()):j.key==="PageDown"&&(n(0,f-=o*10),j.preventDefault()),n(0,f=C(f)),w("input",f)}const O={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function D(j){const W=(g==null?void 0:g[O[d].clientSize])||120,te=(g==null?void 0:g.getBoundingClientRect()[O[d].offset])||0;let se=j[O[d].client]-te;d==="vertical"&&(se=-1*se+W),p?n(0,f=r-se/W*(r-i)):n(0,f=se/W*(r-i)+i),n(0,f=C(f)),w("input",f)}function I(j){D(j),n(18,y=!0)}function Y(j){y&&D(j)}function z(){n(18,y=!1)}function q(j){D({clientX:j.changedTouches[0].clientX,clientY:j.changedTouches[0].clientY})}function G(j){tt[j?"unshift":"push"](()=>{g=j,n(1,g)})}return t.$$set=j=>{"min"in j&&n(19,a=j.min),"max"in j&&n(20,s=j.max),"step"in j&&n(21,c=j.step),"value"in j&&n(0,f=j.value),"ariaValueText"in j&&n(2,l=j.ariaValueText),"name"in j&&n(3,u=j.name),"direction"in j&&n(4,d=j.direction),"reverse"in j&&n(5,p=j.reverse),"keyboardOnly"in j&&n(6,m=j.keyboardOnly),"slider"in j&&n(1,g=j.slider),"ariaLabel"in j&&n(7,v=j.ariaLabel),"ariaLabelledBy"in j&&n(8,_=j.ariaLabelledBy),"ariaControls"in j&&n(9,b=j.ariaControls),"isDragging"in j&&n(18,y=j.isDragging)},t.$$.update=()=>{t.$$.dirty&524288&&n(10,i=typeof a=="string"?parseFloat(a):a),t.$$.dirty&1048576&&n(11,r=typeof s=="string"?parseFloat(s):s),t.$$.dirty&2097152&&(o=typeof c=="string"?parseFloat(c):c),t.$$.dirty&3073&&n(12,h=((f-i)/(r-i)*1).toFixed(4))},[f,g,l,u,d,p,m,v,_,b,i,r,h,T,I,Y,z,q,y,a,s,c,G]}class Hl extends qe{constructor(e){super(),Ge(this,e,RO,IO,Ve,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function FO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;var p=t[2].pickerIndicator;function m(y,w){return{props:{pos:y[6],isDark:y[3]}}}p&&(n=hn(p,m(t)));function g(y){t[13](y)}let v={keyboardOnly:!0,ariaValueText:LO,ariaLabel:"saturation color"};t[0]!==void 0&&(v.value=t[0]),o=new Hl({props:v}),tt.push(()=>At(o,"value",g));function _(y){t[14](y)}let b={keyboardOnly:!0,ariaValueText:NO,direction:"vertical",ariaLabel:"brightness color"};return t[1]!==void 0&&(b.value=t[1]),c=new Hl({props:b}),tt.push(()=>At(c,"value",_)),{c(){e=x("div"),n&&he(n.$$.fragment),i=V(),r=x("div"),he(o.$$.fragment),a=V(),s=x("div"),he(c.$$.fragment),S(r,"class","s svelte-amfbfx"),mt(r,"--pos-y",t[6].y),S(s,"class","v svelte-amfbfx"),mt(s,"--pos-x",t[6].x),S(e,"class","picker svelte-amfbfx"),mt(e,"--picker-color-bg",t[5])},m(y,w){B(y,e,w),n&&ue(n,e,null),k(e,i),k(e,r),ue(o,r,null),k(e,a),k(e,s),ue(c,s,null),t[15](e),l=!0,u||(d=[Q(window,"mouseup",t[8]),Q(window,"mousedown",t[10]),Q(window,"mousemove",t[9]),Q(e,"mousedown",Ni(t[7])),Q(e,"touchstart",t[11],{passive:!1}),Q(e,"touchmove",Ni(t[11]),{passive:!1}),Q(e,"touchend",t[11],{passive:!1})],u=!0)},p(y,[w]){if(w&4&&p!==(p=y[2].pickerIndicator)){if(n){Se();const O=n;U(O.$$.fragment,1,0,()=>{fe(O,1)}),Te()}p?(n=hn(p,m(y)),he(n.$$.fragment),M(n.$$.fragment,1),ue(n,e,i)):n=null}else if(p){const O={};w&64&&(O.pos=y[6]),w&8&&(O.isDark=y[3]),n.$set(O)}const C={};!h&&w&1&&(h=!0,C.value=y[0],Ht(()=>h=!1)),o.$set(C),w&64&&mt(r,"--pos-y",y[6].y);const T={};!f&&w&2&&(f=!0,T.value=y[1],Ht(()=>f=!1)),c.$set(T),w&64&&mt(s,"--pos-x",y[6].x),w&32&&mt(e,"--picker-color-bg",y[5])},i(y){l||(n&&M(n.$$.fragment,y),M(o.$$.fragment,y),M(c.$$.fragment,y),l=!0)},o(y){n&&U(n.$$.fragment,y),U(o.$$.fragment,y),U(c.$$.fragment,y),l=!1},d(y){y&&N(e),n&&fe(n),fe(o),fe(c),t[15](null),u=!1,Ue(d)}}}function qa(t,e,n){return Math.min(Math.max(e,t),n)}const LO=t=>`${t}%`,NO=t=>`${t}%`;function jO(t,e,n){const i=Xt();let{components:r}=e,{h:o}=e,{s:h}=e,{v:a}=e,{isDark:s}=e,c,f=!1,l,u={x:100,y:0};function d(C){const{width:T,left:O,height:D,top:I}=c.getBoundingClientRect(),Y={x:qa(C.clientX-O,0,T),y:qa(C.clientY-I,0,D)};n(0,h=qa(Y.x/T,0,1)*100),n(1,a=qa((D-Y.y)/D,0,1)*100)}function p(C){C.button===0&&(f=!0,d(C))}function m(){f=!1}function g(C){f&&d(C)}function v(C){C.target.isSameNode(c)}function _(C){C.preventDefault(),d(C.changedTouches[0])}function b(C){h=C,n(0,h)}function y(C){a=C,n(1,a)}function w(C){tt[C?"unshift":"push"](()=>{c=C,n(4,c)})}return t.$$set=C=>{"components"in C&&n(2,r=C.components),"h"in C&&n(12,o=C.h),"s"in C&&n(0,h=C.s),"v"in C&&n(1,a=C.v),"isDark"in C&&n(3,s=C.isDark)},t.$$.update=()=>{t.$$.dirty&4096&&typeof o=="number"&&n(5,l=Mn({h:o,s:100,v:100,a:1}).toHex()),t.$$.dirty&19&&typeof h=="number"&&typeof a=="number"&&c&&n(6,u={x:h,y:100-a}),t.$$.dirty&3&&i("input",{s:h,v:a})},[h,a,r,s,c,l,u,p,m,g,v,_,o,b,y,w]}class BO extends qe{constructor(e){super(),Ge(this,e,jO,FO,Ve,{components:2,h:12,s:0,v:1,isDark:3})}}function UO(t){let e;return{c(){e=x("div"),S(e,"class","picker-indicator svelte-i5mg2p"),Ci(e,"is-dark",t[1]),mt(e,"--pos-x",t[0].x),mt(e,"--pos-y",t[0].y)},m(n,i){B(n,e,i)},p(n,[i]){i&2&&Ci(e,"is-dark",n[1]),i&1&&mt(e,"--pos-x",n[0].x),i&1&&mt(e,"--pos-y",n[0].y)},i:ge,o:ge,d(n){n&&N(e)}}}function YO(t,e,n){let{pos:i}=e,{isDark:r}=e;return t.$$set=o=>{"pos"in o&&n(0,i=o.pos),"isDark"in o&&n(1,r=o.isDark)},[i,r]}class WO extends qe{constructor(e){super(),Ge(this,e,YO,UO,Ve,{pos:0,isDark:1})}}function zO(t){let e,n,i,r,o,h,a,s,c,f;return{c(){e=x("input"),i=V(),r=x("input"),h=V(),a=x("input"),S(e,"aria-label",n=t[4].label.h),e.value=t[9],S(e,"type","number"),S(e,"min","0"),S(e,"max","360"),S(e,"class","svelte-qtukzs"),S(r,"aria-label",o=t[4].label.s),r.value=t[8],S(r,"type","number"),S(r,"min","0"),S(r,"max","100"),S(r,"class","svelte-qtukzs"),S(a,"aria-label",s=t[4].label.v),a.value=t[7],S(a,"type","number"),S(a,"min","0"),S(a,"max","100"),S(a,"class","svelte-qtukzs")},m(l,u){B(l,e,u),B(l,i,u),B(l,r,u),B(l,h,u),B(l,a,u),c||(f=[Q(e,"input",t[13]("h")),Q(r,"input",t[13]("s")),Q(a,"input",t[13]("v"))],c=!0)},p(l,u){u&16&&n!==(n=l[4].label.h)&&S(e,"aria-label",n),u&512&&e.value!==l[9]&&(e.value=l[9]),u&16&&o!==(o=l[4].label.s)&&S(r,"aria-label",o),u&256&&r.value!==l[8]&&(r.value=l[8]),u&16&&s!==(s=l[4].label.v)&&S(a,"aria-label",s),u&128&&a.value!==l[7]&&(a.value=l[7])},d(l){l&&(N(e),N(i),N(r),N(h),N(a)),c=!1,Ue(f)}}}function HO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return{c(){e=x("input"),r=V(),o=x("input"),s=V(),c=x("input"),S(e,"aria-label",n=t[4].label.r),e.value=i=t[0].r,S(e,"type","number"),S(e,"min","0"),S(e,"max","255"),S(e,"class","svelte-qtukzs"),S(o,"aria-label",h=t[4].label.g),o.value=a=t[0].g,S(o,"type","number"),S(o,"min","0"),S(o,"max","255"),S(o,"class","svelte-qtukzs"),S(c,"aria-label",f=t[4].label.b),c.value=l=t[0].b,S(c,"type","number"),S(c,"min","0"),S(c,"max","255"),S(c,"class","svelte-qtukzs")},m(p,m){B(p,e,m),B(p,r,m),B(p,o,m),B(p,s,m),B(p,c,m),u||(d=[Q(e,"input",t[12]("r")),Q(o,"input",t[12]("g")),Q(c,"input",t[12]("b"))],u=!0)},p(p,m){m&16&&n!==(n=p[4].label.r)&&S(e,"aria-label",n),m&1&&i!==(i=p[0].r)&&e.value!==i&&(e.value=i),m&16&&h!==(h=p[4].label.g)&&S(o,"aria-label",h),m&1&&a!==(a=p[0].g)&&o.value!==a&&(o.value=a),m&16&&f!==(f=p[4].label.b)&&S(c,"aria-label",f),m&1&&l!==(l=p[0].b)&&c.value!==l&&(c.value=l)},d(p){p&&(N(e),N(r),N(o),N(s),N(c)),u=!1,Ue(d)}}}function VO(t){let e,n,i,r;return{c(){e=x("input"),S(e,"aria-label",n=t[4].label.hex),e.value=t[1],S(e,"class","svelte-qtukzs"),mt(e,"flex",3)},m(o,h){B(o,e,h),i||(r=Q(e,"input",t[11]),i=!0)},p(o,h){h&16&&n!==(n=o[4].label.hex)&&S(e,"aria-label",n),h&2&&e.value!==o[1]&&(e.value=o[1])},d(o){o&&N(e),i=!1,r()}}}function $p(t){let e,n,i,r;return{c(){e=x("input"),S(e,"aria-label",n=t[4].label.a),e.value=t[6],S(e,"type","number"),S(e,"min","0"),S(e,"max","1"),S(e,"step","0.01"),S(e,"class","svelte-qtukzs")},m(o,h){B(o,e,h),i||(r=Q(e,"input",function(){Hn(t[5]==="hsv"?t[13]("a"):t[12]("a"))&&(t[5]==="hsv"?t[13]("a"):t[12]("a")).apply(this,arguments)}),i=!0)},p(o,h){t=o,h&16&&n!==(n=t[4].label.a)&&S(e,"aria-label",n),h&64&&e.value!==t[6]&&(e.value=t[6])},d(o){o&&N(e),i=!1,r()}}}function XO(t){let e,n=t[4].color[t[5]]+"",i;return{c(){e=x("div"),i=be(n),S(e,"class","button-like svelte-qtukzs")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&48&&n!==(n=r[4].color[r[5]]+"")&&He(i,n)},d(r){r&&N(e)}}}function $O(t){let e,n,i=t[4].color[t[5]]+"",r,o,h,a=t[4].changeTo+"",s,c,f,l,u;return{c(){e=x("button"),n=x("span"),r=be(i),o=V(),h=x("span"),s=be(a),c=V(),f=be(t[10]),S(n,"class","disappear svelte-qtukzs"),S(n,"aria-hidden","true"),S(h,"class","appear svelte-qtukzs"),S(e,"type","button"),S(e,"class","svelte-qtukzs")},m(d,p){B(d,e,p),k(e,n),k(n,r),k(e,o),k(e,h),k(h,s),k(h,c),k(h,f),l||(u=Q(e,"click",t[15]),l=!0)},p(d,p){p&48&&i!==(i=d[4].color[d[5]]+"")&&He(r,i),p&16&&a!==(a=d[4].changeTo+"")&&He(s,a),p&1024&&He(f,d[10])},d(d){d&&N(e),l=!1,u()}}}function GO(t){let e,n,i,r;function o(u,d){return u[5]==="hex"?VO:u[5]==="rgb"?HO:zO}let h=o(t),a=h(t),s=t[2]&&$p(t);function c(u,d){return u[3].length>1?$O:XO}let f=c(t),l=f(t);return{c(){e=x("div"),n=x("div"),a.c(),i=V(),s&&s.c(),r=V(),l.c(),S(n,"class","input-container svelte-qtukzs"),S(e,"class","text-input svelte-qtukzs")},m(u,d){B(u,e,d),k(e,n),a.m(n,null),k(n,i),s&&s.m(n,null),k(e,r),l.m(e,null)},p(u,[d]){h===(h=o(u))&&a?a.p(u,d):(a.d(1),a=h(u),a&&(a.c(),a.m(n,i))),u[2]?s?s.p(u,d):(s=$p(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null),f===(f=c(u))&&l?l.p(u,d):(l.d(1),l=f(u),l&&(l.c(),l.m(e,null)))},i:ge,o:ge,d(u){u&&N(e),a.d(),s&&s.d(),l.d()}}}const qO=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function KO(t,e,n){let i,r,o,h,a;const s=Xt();let{isAlpha:c}=e,{rgb:f}=e,{hsv:l}=e,{hex:u}=e,{textInputModes:d}=e,{texts:p}=e,m=d[0]||"hex";function g(y){const w=y.target;qO.test(w.value)&&(n(1,u=w.value),s("input",{hex:u}))}function v(y){return function(w){n(0,f={...f,[y]:parseFloat(w.target.value)}),s("input",{rgb:f})}}function _(y){return function(w){n(14,l={...l,[y]:parseFloat(w.target.value)}),s("input",{hsv:l})}}const b=()=>n(5,m=i);return t.$$set=y=>{"isAlpha"in y&&n(2,c=y.isAlpha),"rgb"in y&&n(0,f=y.rgb),"hsv"in y&&n(14,l=y.hsv),"hex"in y&&n(1,u=y.hex),"textInputModes"in y&&n(3,d=y.textInputModes),"texts"in y&&n(4,p=y.texts)},t.$$.update=()=>{t.$$.dirty&40&&n(10,i=d[(d.indexOf(m)+1)%d.length]),t.$$.dirty&16384&&n(9,r=Math.round(l.h)),t.$$.dirty&16384&&n(8,o=Math.round(l.s)),t.$$.dirty&16384&&n(7,h=Math.round(l.v)),t.$$.dirty&16384&&n(6,a=l.a===void 0?1:Math.round(l.a*100)/100)},[f,u,c,d,p,m,a,h,o,r,i,g,v,_,l,b]}class JO extends qe{constructor(e){super(),Ge(this,e,KO,GO,Ve,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function ZO(t){let e,n,i,r,o,h,a,s,c,f,l;return{c(){e=x("label"),n=x("div"),i=x("input"),r=V(),o=x("div"),h=V(),a=x("div"),s=V(),c=be(t[2]),S(i,"type","color"),S(i,"name",t[3]),i.value=t[1],S(i,"aria-haspopup","dialog"),S(i,"class","svelte-r4tbal"),S(o,"class","alpha svelte-r4tbal"),S(a,"class","color svelte-r4tbal"),mt(a,"background",t[1]),S(n,"class","container svelte-r4tbal"),S(e,"class","svelte-r4tbal")},m(u,d){B(u,e,d),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(e,s),k(e,c),t[5](e),f||(l=[Q(i,"click",Ni(Ka)),Q(i,"mousedown",Ni(Ka)),Q(e,"click",Ni(Ka)),Q(e,"mousedown",Ni(Ka))],f=!0)},p(u,[d]){d&8&&S(i,"name",u[3]),d&2&&(i.value=u[1]),d&2&&mt(a,"background",u[1]),d&4&&He(c,u[2])},i:ge,o:ge,d(u){u&&N(e),t[5](null),f=!1,Ue(l)}}}function Ka(){}function QO(t,e,n){let{labelElement:i}=e,{hex:r}=e,{label:o}=e,{name:h=void 0}=e,{isOpen:a}=e;function s(c){tt[c?"unshift":"push"](()=>{i=c,n(0,i)})}return t.$$set=c=>{"labelElement"in c&&n(0,i=c.labelElement),"hex"in c&&n(1,r=c.hex),"label"in c&&n(2,o=c.label),"name"in c&&n(3,h=c.name),"isOpen"in c&&n(4,a=c.isOpen)},[i,r,o,h,a,s]}class eE extends qe{constructor(e){super(),Ge(this,e,QO,ZO,Ve,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function tE(t){let e,n,i;const r=t[4].default,o=wa(r,t,t[3],null);return{c(){e=x("div"),o&&o.c(),S(e,"class","wrapper svelte-1h4o41o"),S(e,"role",n=t[2]?"dialog":void 0),S(e,"aria-label","color picker"),Ci(e,"is-open",t[1])},m(h,a){B(h,e,a),o&&o.m(e,null),t[5](e),i=!0},p(h,[a]){o&&o.p&&(!i||a&8)&&Sa(o,r,h,h[3],i?Ca(r,h[3],a,null):Ta(h[3]),null),(!i||a&4&&n!==(n=h[2]?"dialog":void 0))&&S(e,"role",n),(!i||a&2)&&Ci(e,"is-open",h[1])},i(h){i||(M(o,h),i=!0)},o(h){U(o,h),i=!1},d(h){h&&N(e),o&&o.d(h),t[5](null)}}}function nE(t,e,n){let{$$slots:i={},$$scope:r}=e,{wrapper:o}=e,{isOpen:h}=e,{isDialog:a}=e;function s(c){tt[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$set=c=>{"wrapper"in c&&n(0,o=c.wrapper),"isOpen"in c&&n(1,h=c.isOpen),"isDialog"in c&&n(2,a=c.isDialog),"$$scope"in c&&n(3,r=c.$$scope)},[o,h,a,r,i,s]}class iE extends qe{constructor(e){super(),Ge(this,e,nE,tE,Ve,{wrapper:0,isOpen:1,isDialog:2})}}const _u={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},xb="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function rE(t){return function(e){if(e.target===window)return;const n=e.target;if(!t.contains(n))return;const i=t.querySelectorAll(xb),r=i[0],o=i[i.length-1];function h(s){return s.code==="Tab"&&!s.shiftKey}function a(s){return s.code==="Tab"&&s.shiftKey}h(e)&&e.target===o?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),o.focus())}}const sE=t=>{const e=t.querySelector(xb);e&&e.focus();const n=rE(t);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};function oE(t){let e,n,i,r,o,h,a=t[1].label.withoutColor+"",s,c,f;return{c(){e=x("label"),n=x("div"),i=x("input"),r=V(),o=x("span"),h=V(),s=be(a),S(i,"type","checkbox"),S(i,"class","svelte-pt866j"),S(o,"class","svelte-pt866j"),S(n,"class","svelte-pt866j"),S(e,"class","nullability-checkbox svelte-pt866j")},m(l,u){B(l,e,u),k(e,n),k(n,i),i.checked=t[0],k(n,r),k(n,o),k(e,h),k(e,s),c||(f=Q(i,"change",t[2]),c=!0)},p(l,[u]){u&1&&(i.checked=l[0]),u&2&&a!==(a=l[1].label.withoutColor+"")&&He(s,a)},i:ge,o:ge,d(l){l&&N(e),c=!1,f()}}}function aE(t,e,n){let{isUndefined:i}=e,{texts:r}=e;function o(){i=this.checked,n(0,i)}return t.$$set=h=>{"isUndefined"in h&&n(0,i=h.isUndefined),"texts"in h&&n(1,r=h.texts)},[i,r,o]}class lE extends qe{constructor(e){super(),Ge(this,e,aE,oE,Ve,{isUndefined:0,texts:1})}}function cE(t){let e;return{c(){e=x("input"),S(e,"type","hidden"),e.value=t[2],S(e,"name",t[6])},m(n,i){B(n,e,i)},p(n,i){i[0]&4&&(e.value=n[2]),i[0]&64&&S(e,"name",n[6])},i:ge,o:ge,d(n){n&&N(e)}}}function uE(t){let e,n,i,r;function o(s){t[33](s)}var h=t[23]().input;function a(s,c){let f={isOpen:!0,hex:s[2],label:s[5],name:s[6]};return s[21]!==void 0&&(f.labelElement=s[21]),{props:f}}return h&&(e=hn(h,a(t)),tt.push(()=>At(e,"labelElement",o))),{c(){e&&he(e.$$.fragment),i=Je()},m(s,c){e&&ue(e,s,c),B(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().input)){if(e){Se();const f=e;U(f.$$.fragment,1,0,()=>{fe(f,1)}),Te()}h?(e=hn(h,a(s)),tt.push(()=>At(e,"labelElement",o)),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};c[0]&4&&(f.hex=s[2]),c[0]&32&&(f.label=s[5]),c[0]&64&&(f.name=s[6]),!n&&c[0]&2097152&&(n=!0,f.labelElement=s[21],Ht(()=>n=!1)),e.$set(f)}},i(s){r||(e&&M(e.$$.fragment,s),r=!0)},o(s){e&&U(e.$$.fragment,s),r=!1},d(s){s&&N(i),e&&fe(e,s)}}}function Gp(t){let e,n,i,r;function o(s){t[34](s)}var h=t[23]().nullabilityCheckbox;function a(s,c){let f={texts:s[24]()};return s[16]!==void 0&&(f.isUndefined=s[16]),{props:f}}return h&&(e=hn(h,a(t)),tt.push(()=>At(e,"isUndefined",o))),{c(){e&&he(e.$$.fragment),i=Je()},m(s,c){e&&ue(e,s,c),B(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().nullabilityCheckbox)){if(e){Se();const f=e;U(f.$$.fragment,1,0,()=>{fe(f,1)}),Te()}h?(e=hn(h,a(s)),tt.push(()=>At(e,"isUndefined",o)),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};!n&&c[0]&65536&&(n=!0,f.isUndefined=s[16],Ht(()=>n=!1)),e.$set(f)}},i(s){r||(e&&M(e.$$.fragment,s),r=!0)},o(s){e&&U(e.$$.fragment,s),r=!1},d(s){s&&N(i),e&&fe(e,s)}}}function qp(t){var r;let e,n,i;return n=new Hl({props:{min:0,max:1,step:.01,value:((r=t[1])==null?void 0:r.a)??t[18].a,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.a}}),n.$on("input",t[27]("a")),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","a svelte-tsvobk"),mt(e,"--alphaless-color",(t[2]?t[2]:t[19]).substring(0,7))},m(o,h){B(o,e,h),ue(n,e,null),i=!0},p(o,h){var s;const a={};h[0]&262146&&(a.value=((s=o[1])==null?void 0:s.a)??o[18].a),h[0]&4096&&(a.direction=o[12]),h[0]&4096&&(a.reverse=o[12]==="vertical"),n.$set(a),h[0]&524292&&mt(e,"--alphaless-color",(o[2]?o[2]:o[19]).substring(0,7))},i(o){i||(M(n.$$.fragment,o),i=!0)},o(o){U(n.$$.fragment,o),i=!1},d(o){o&&N(e),fe(n)}}}function Kp(t){let e,n,i;var r=t[23]().textInput;function o(h,a){return{props:{hex:h[2]??h[19],rgb:h[0]??h[17],hsv:h[1]??h[18],isAlpha:h[8],textInputModes:h[11],texts:h[24]()}}}return r&&(e=hn(r,o(t)),e.$on("input",t[35])),{c(){e&&he(e.$$.fragment),n=Je()},m(h,a){e&&ue(e,h,a),B(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().textInput)){if(e){Se();const s=e;U(s.$$.fragment,1,0,()=>{fe(s,1)}),Te()}r?(e=hn(r,o(h)),e.$on("input",h[35]),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&524292&&(s.hex=h[2]??h[19]),a[0]&131073&&(s.rgb=h[0]??h[17]),a[0]&262146&&(s.hsv=h[1]??h[18]),a[0]&256&&(s.isAlpha=h[8]),a[0]&2048&&(s.textInputModes=h[11]),e.$set(s)}},i(h){i||(e&&M(e.$$.fragment,h),i=!0)},o(h){e&&U(e.$$.fragment,h),i=!1},d(h){h&&N(n),e&&fe(e,h)}}}function fE(t){let e,n,i;var r=t[23]().a11yNotice;function o(h,a){return{props:{components:h[23](),a11yColors:h[13],hex:h[2]||"#00000000",a11yTexts:h[15],a11yLevel:h[14]}}}return r&&(e=hn(r,o(t))),{c(){e&&he(e.$$.fragment),n=Je()},m(h,a){e&&ue(e,h,a),B(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().a11yNotice)){if(e){Se();const s=e;U(s.$$.fragment,1,0,()=>{fe(s,1)}),Te()}r?(e=hn(r,o(h)),he(e.$$.fragment),M(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&8192&&(s.a11yColors=h[13]),a[0]&4&&(s.hex=h[2]||"#00000000"),a[0]&32768&&(s.a11yTexts=h[15]),a[0]&16384&&(s.a11yLevel=h[14]),e.$set(s)}},i(h){i||(e&&M(e.$$.fragment,h),i=!0)},o(h){e&&U(e.$$.fragment,h),i=!1},d(h){h&&N(n),e&&fe(e,h)}}}function hE(t){var g,v,_,b;let e,n,i,r,o,h,a,s,c=t[23]().a11yNotice,f,l,u=t[7]&&Gp(t);n=new BO({props:{components:t[23](),h:((g=t[1])==null?void 0:g.h)??t[18].h,s:((v=t[1])==null?void 0:v.s)??t[18].s,v:((_=t[1])==null?void 0:_.v)??t[18].v,isDark:t[3]}}),n.$on("input",t[28](["s","v"])),o=new Hl({props:{min:0,max:360,step:1,value:((b=t[1])==null?void 0:b.h)??t[18].h,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.h}}),o.$on("input",t[27]("h"));let d=t[8]&&qp(t),p=t[10]&&Kp(t),m=c&&fE(t);return{c(){u&&u.c(),e=V(),he(n.$$.fragment),i=V(),r=x("div"),he(o.$$.fragment),h=V(),d&&d.c(),a=V(),p&&p.c(),s=V(),m&&m.c(),f=Je(),S(r,"class","h svelte-tsvobk")},m(y,w){u&&u.m(y,w),B(y,e,w),ue(n,y,w),B(y,i,w),B(y,r,w),ue(o,r,null),B(y,h,w),d&&d.m(y,w),B(y,a,w),p&&p.m(y,w),B(y,s,w),m&&m.m(y,w),B(y,f,w),l=!0},p(y,w){var O,D,I,Y;y[7]?u?(u.p(y,w),w[0]&128&&M(u,1)):(u=Gp(y),u.c(),M(u,1),u.m(e.parentNode,e)):u&&(Se(),U(u,1,1,()=>{u=null}),Te());const C={};w[0]&262146&&(C.h=((O=y[1])==null?void 0:O.h)??y[18].h),w[0]&262146&&(C.s=((D=y[1])==null?void 0:D.s)??y[18].s),w[0]&262146&&(C.v=((I=y[1])==null?void 0:I.v)??y[18].v),w[0]&8&&(C.isDark=y[3]),n.$set(C);const T={};w[0]&262146&&(T.value=((Y=y[1])==null?void 0:Y.h)??y[18].h),w[0]&4096&&(T.direction=y[12]),w[0]&4096&&(T.reverse=y[12]==="vertical"),o.$set(T),y[8]?d?(d.p(y,w),w[0]&256&&M(d,1)):(d=qp(y),d.c(),M(d,1),d.m(a.parentNode,a)):d&&(Se(),U(d,1,1,()=>{d=null}),Te()),y[10]?p?(p.p(y,w),w[0]&1024&&M(p,1)):(p=Kp(y),p.c(),M(p,1),p.m(s.parentNode,s)):p&&(Se(),U(p,1,1,()=>{p=null}),Te()),c&&m.p(y,w)},i(y){l||(M(u),M(n.$$.fragment,y),M(o.$$.fragment,y),M(d),M(p),M(m),l=!0)},o(y){U(u),U(n.$$.fragment,y),U(o.$$.fragment,y),U(d),U(p),U(m),l=!1},d(y){y&&(N(e),N(i),N(r),N(h),N(a),N(s),N(f)),u&&u.d(y),fe(n,y),fe(o),d&&d.d(y),p&&p.d(y),m&&m.d(y)}}}function dE(t){let e,n,i,r,o,h,a,s,c,f;const l=[uE,cE],u=[];function d(v,_){return v[9]?0:v[6]?1:-1}~(n=d(t))&&(i=u[n]=l[n](t));function p(v){t[36](v)}var m=t[23]().wrapper;function g(v,_){let b={isOpen:v[4],isDialog:v[9],$$slots:{default:[hE]},$$scope:{ctx:v}};return v[22]!==void 0&&(b.wrapper=v[22]),{props:b}}return m&&(o=hn(m,g(t)),tt.push(()=>At(o,"wrapper",p))),{c(){e=x("span"),i&&i.c(),r=V(),o&&he(o.$$.fragment),S(e,"class",a="color-picker "+t[12]+" svelte-tsvobk")},m(v,_){B(v,e,_),~n&&u[n].m(e,null),k(e,r),o&&ue(o,e,null),t[37](e),s=!0,c||(f=[Q(window,"mousedown",t[25]),Q(window,"keyup",t[26])],c=!0)},p(v,_){let b=n;if(n=d(v),n===b?~n&&u[n].p(v,_):(i&&(Se(),U(u[b],1,1,()=>{u[b]=null}),Te()),~n?(i=u[n],i?i.p(v,_):(i=u[n]=l[n](v),i.c()),M(i,1),i.m(e,r)):i=null),m!==(m=v[23]().wrapper)){if(o){Se();const y=o;U(y.$$.fragment,1,0,()=>{fe(y,1)}),Te()}m?(o=hn(m,g(v)),tt.push(()=>At(o,"wrapper",p)),he(o.$$.fragment),M(o.$$.fragment,1),ue(o,e,null)):o=null}else if(m){const y={};_[0]&16&&(y.isOpen=v[4]),_[0]&512&&(y.isDialog=v[9]),_[0]&1047951|_[1]&4096&&(y.$$scope={dirty:_,ctx:v}),!h&&_[0]&4194304&&(h=!0,y.wrapper=v[22],Ht(()=>h=!1)),o.$set(y)}(!s||_[0]&4096&&a!==(a="color-picker "+v[12]+" svelte-tsvobk"))&&S(e,"class",a)},i(v){s||(M(i),o&&M(o.$$.fragment,v),s=!0)},o(v){U(i),o&&U(o.$$.fragment,v),s=!1},d(v){v&&N(e),~n&&u[n].d(),o&&fe(o),t[37](null),c=!1,Ue(f)}}}function pE(t,e,n){const i=Xt();let{components:r={}}=e,{label:o="Choose a color"}=e,{name:h=void 0}=e,{nullable:a=!1}=e,{rgb:s=a?void 0:{r:255,g:0,b:0,a:1}}=e,{hsv:c=a?void 0:{h:0,s:100,v:100,a:1}}=e,{hex:f=a?void 0:"#ff0000"}=e,{color:l=void 0}=e,{isDark:u=!1}=e,{isAlpha:d=!0}=e,{isDialog:p=!0}=e,{isOpen:m=!p}=e,{isTextInput:g=!0}=e,{textInputModes:v=["hex","rgb","hsv"]}=e,{sliderDirection:_="vertical"}=e,{disableCloseClickOutside:b=!1}=e,{a11yColors:y=[{bgHex:"#ffffff"}]}=e,{a11yLevel:w="AA"}=e,{texts:C=void 0}=e,{a11yTexts:T=void 0}=e,O={r:255,g:0,b:0,a:1},D={h:0,s:100,v:100,a:1},I="#ff0000",Y=!1,z=Y,q,G,j,W;const te={pickerIndicator:WO,textInput:JO,input:eE,nullabilityCheckbox:lE,wrapper:iE};function se(){return{...te,...r}}function E(){return{label:{..._u.label,...C==null?void 0:C.label},color:{..._u.color,...C==null?void 0:C.color},changeTo:(C==null?void 0:C.changeTo)??_u.changeTo}}function P({target:$}){p&&(G.contains($)||G.isSameNode($)?n(4,m=!m):m&&!j.contains($)&&!b&&n(4,m=!1))}function F({key:$,target:le}){if(p)$==="Enter"&&G.contains(le)?(n(4,m=!m),setTimeout(()=>{W=sE(j)})):$==="Escape"&&m&&(n(4,m=!1),q.contains(le)&&(G==null||G.focus(),W==null||W.destroy()));else return}function L(){if(Y&&!z){z=!0,n(1,c=n(0,s=n(2,f=void 0))),i("input",{color:l,hsv:c,rgb:s,hex:f});return}else if(z&&!Y){z=!1,n(1,c=D),n(0,s=O),n(2,f=I),i("input",{color:l,hsv:c,rgb:s,hex:f});return}if(!c&&!s&&!f){n(16,Y=!0),z=!0,i("input",{color:void 0,hsv:c,rgb:s,hex:f});return}c&&s&&c.h===D.h&&c.s===D.s&&c.v===D.v&&c.a===D.a&&s.r===O.r&&s.g===O.g&&s.b===O.b&&s.a===O.a&&f===I||(n(16,Y=!1),c&&c.a===void 0&&n(1,c.a=1,c),D.a===void 0&&n(18,D.a=1,D),s&&s.a===void 0&&n(0,s.a=1,s),O.a===void 0&&n(17,O.a=1,O),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),c&&(c.h!==D.h||c.s!==D.s||c.v!==D.v||c.a!==D.a)?(n(29,l=Mn(c)),n(0,s=l.toRgb()),n(2,f=l.toHex())):s&&(s.r!==O.r||s.g!==O.g||s.b!==O.b||s.a!==O.a)?(n(29,l=Mn(s)),n(2,f=l.toHex()),n(1,c=l.toHsv())):f&&f!==I&&(n(29,l=Mn(f)),n(0,s=l.toRgb()),n(1,c=l.toHsv())),l&&n(3,u=l.isDark()),f&&(n(18,D=Object.assign({},c)),n(17,O=Object.assign({},s)),n(19,I=f),z=Y,i("input",{color:l,hsv:c,rgb:s,hex:f})))}function Z($){return le=>{c||n(1,c={...D}),n(1,c[$]=le.detail,c)}}function R($){return le=>{c||n(1,c={...D}),$.forEach(me=>{c&&n(1,c[me]=le.detail[me],c)})}}function A($){G=$,n(21,G)}function X($){Y=$,n(16,Y)}const J=({detail:$})=>{$.hsv?n(1,c=$.hsv):$.rgb?n(0,s=$.rgb):$.hex&&n(2,f=$.hex)};function ie($){j=$,n(22,j)}function ne($){tt[$?"unshift":"push"](()=>{q=$,n(20,q)})}return t.$$set=$=>{"components"in $&&n(30,r=$.components),"label"in $&&n(5,o=$.label),"name"in $&&n(6,h=$.name),"nullable"in $&&n(7,a=$.nullable),"rgb"in $&&n(0,s=$.rgb),"hsv"in $&&n(1,c=$.hsv),"hex"in $&&n(2,f=$.hex),"color"in $&&n(29,l=$.color),"isDark"in $&&n(3,u=$.isDark),"isAlpha"in $&&n(8,d=$.isAlpha),"isDialog"in $&&n(9,p=$.isDialog),"isOpen"in $&&n(4,m=$.isOpen),"isTextInput"in $&&n(10,g=$.isTextInput),"textInputModes"in $&&n(11,v=$.textInputModes),"sliderDirection"in $&&n(12,_=$.sliderDirection),"disableCloseClickOutside"in $&&n(31,b=$.disableCloseClickOutside),"a11yColors"in $&&n(13,y=$.a11yColors),"a11yLevel"in $&&n(14,w=$.a11yLevel),"texts"in $&&n(32,C=$.texts),"a11yTexts"in $&&n(15,T=$.a11yTexts)},t.$$.update=()=>{t.$$.dirty[0]&7&&(c||s||f)&&L(),t.$$.dirty[0]&65536&&L()},[s,c,f,u,m,o,h,a,d,p,g,v,_,y,w,T,Y,O,D,I,q,G,j,se,E,P,F,Z,R,l,r,b,C,A,X,J,ie,ne]}class Dh extends qe{constructor(e){super(),Ge(this,e,pE,dE,Ve,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function gE(t){let e,n,i,r,o,h,a,s,c,f,l;function u(p){t[4](p)}let d={isAlpha:!1,label:""};return t[2]!==void 0&&(d.hex=t[2]),r=new Dh({props:d}),tt.push(()=>At(r,"hex",u)),r.$on("input",t[5]),s=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div"),he(r.$$.fragment),h=V(),a=x("button"),he(s.$$.fragment),S(i,"class","grow flex justify-center color-picker-wrapper"),S(a,"type","button"),S(a,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){B(p,e,m),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),ue(s,a,null),c=!0,f||(l=Q(a,"click",t[6]),f=!0)},p(p,[m]){const g={};!o&&m&4&&(o=!0,g.hex=p[2],Ht(()=>o=!1)),r.$set(g)},i(p){c||(M(r.$$.fragment,p),M(s.$$.fragment,p),c=!0)},o(p){U(r.$$.fragment,p),U(s.$$.fragment,p),c=!1},d(p){p&&N(e),fe(r),fe(s),f=!1,l()}}}function mE(t){if(typeof t=="object"&&t!==null)return"#000000";const e=typeof t=="string"?t:String(t),i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e);if(i){const[,o,h,a]=i.map(Number),s=o.toString(16).padStart(2,"0"),c=h.toString(16).padStart(2,"0"),f=a.toString(16).padStart(2,"0");return`#${s}${c}${f}`}return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?e:"#000000"}function vE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e,o="#000000";o=mE(r.fill);const h=Xt();Di(()=>{n(0,i=null)});function a(f){o=f,n(2,o)}const s=()=>{r.set("fill",o),h("onChangeColor")},c=()=>n(0,i=null);return t.$$set=f=>{"selectProperty"in f&&n(0,i=f.selectProperty),"object"in f&&n(1,r=f.object)},[i,r,o,h,a,s,c]}class _E extends qe{constructor(e){super(),Ge(this,e,vE,gE,Ve,{selectProperty:0,object:1})}}function Jp(t,e,n){const i=t.slice();return i[7]=e[n],i}function Zp(t){let e,n,i,r,o,h,a,s;function c(){return t[5](t[7])}return{c(){e=x("li"),n=x("button"),i=x("img"),h=V(),Ye(i.src,r=t[7].thumbnail)||S(i,"src",r),S(i,"alt",o=t[7].fontName),S(i,"class","object-contain border rounded"),S(n,"type","button")},m(f,l){B(f,e,l),k(e,n),k(n,i),k(e,h),a||(s=Q(n,"click",c),a=!0)},p(f,l){t=f,l&4&&!Ye(i.src,r=t[7].thumbnail)&&S(i,"src",r),l&4&&o!==(o=t[7].fontName)&&S(i,"alt",o)},d(f){f&&N(e),a=!1,s()}}}function yE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p=Fe(t[2]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Zp(Jp(t,p,g));return f=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("textarea"),o=V(),h=x("div"),a=x("ul");for(let g=0;g<m.length;g+=1)m[g].c();s=V(),c=x("button"),he(f.$$.fragment),S(r,"class","textarea"),S(i,"class","w-full flex justify-center"),S(a,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 h-52 overflow-y-auto"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(g,v){B(g,e,v),k(e,n),k(n,i),k(i,r),Re(r,t[0]),k(n,o),k(n,h),k(h,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(a,null);k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[Q(r,"input",t[4]),Q(c,"click",t[6])],u=!0)},p(g,[v]){if(v&1&&Re(r,g[0]),v&12){p=Fe(g[2]);let _;for(_=0;_<p.length;_+=1){const b=Jp(g,p,_);m[_]?m[_].p(b,v):(m[_]=Zp(b),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i(g){l||(M(f.$$.fragment,g),l=!0)},o(g){U(f.$$.fragment,g),l=!1},d(g){g&&N(e),Pt(m,g),fe(f),u=!1,Ue(d)}}}function bE(t,e,n){let i;Me(t,$o,f=>n(2,i=f));let{selectProperty:r=null}=e,{text:o=""}=e;const h=Xt();Di(()=>{n(1,r=null)});function a(){o=this.value,n(0,o)}const s=f=>h("onChangeFontFamily",{fontFamily:f.fontFamily,localFamily:f.localFamily}),c=()=>n(1,r=null);return t.$$set=f=>{"selectProperty"in f&&n(1,r=f.selectProperty),"text"in f&&n(0,o=f.text)},t.$$.update=()=>{t.$$.dirty&1&&o&&h("onChangeText",{text:o})},[o,r,i,h,a,s,c]}let wE=class extends qe{constructor(e){super(),Ge(this,e,bE,yE,Ve,{selectProperty:1,text:0})}};function CE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w,C,T,O;return a=new Ce({props:{icon:"mingcute:align-left-line",height:"20"}}),u=new Ce({props:{icon:"mingcute:align-center-line",height:"20"}}),v=new Ce({props:{icon:"iconoir:align-right",height:"20"}}),y=new Ce({props:{icon:"ion:close"}}),C=Ay(t[3][0]),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("input"),o=V(),h=x("label"),he(a.$$.fragment),s=V(),c=x("input"),f=V(),l=x("label"),he(u.$$.fragment),d=V(),p=x("input"),m=V(),g=x("label"),he(v.$$.fragment),_=V(),b=x("button"),he(y.$$.fragment),S(r,"id","align-left"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="left",Re(r,r.__value),S(h,"for","align-left"),S(h,"class","radio-label"),S(c,"id","align-center"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="center",Re(c,c.__value),S(l,"for","align-center"),S(l,"class","radio-label"),S(p,"id","align-right"),S(p,"class","hidden radio-input"),S(p,"type","radio"),p.__value="right",Re(p,p.__value),S(g,"for","align-right"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),C.p(r,c,p)},m(D,I){B(D,e,I),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=p.__value===t[0],k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),w=!0,T||(O=[Q(r,"change",t[2]),Q(c,"change",t[4]),Q(p,"change",t[5]),Q(b,"click",t[6])],T=!0)},p(D,[I]){I&1&&(r.checked=r.__value===D[0]),I&1&&(c.checked=c.__value===D[0]),I&1&&(p.checked=p.__value===D[0])},i(D){w||(M(a.$$.fragment,D),M(u.$$.fragment,D),M(v.$$.fragment,D),M(y.$$.fragment,D),w=!0)},o(D){U(a.$$.fragment,D),U(u.$$.fragment,D),U(v.$$.fragment,D),U(y.$$.fragment,D),w=!1},d(D){D&&N(e),fe(a),fe(u),fe(v),fe(y),C.r(),T=!1,Ue(O)}}}function SE(t,e,n){let{selectProperty:i=null}=e,{align:r="left"}=e;const o=Xt();Di(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}function c(){r=this.__value,n(0,r)}const f=()=>n(1,i=null);return t.$$set=l=>{"selectProperty"in l&&n(1,i=l.selectProperty),"align"in l&&n(0,r=l.align)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeAlign",{align:r})},[r,i,a,h,s,c,f]}class TE extends qe{constructor(e){super(),Ge(this,e,SE,CE,Ve,{selectProperty:1,align:0})}}function kE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;return a=new Ce({props:{icon:"ci:text",height:"20"}}),u=new Ce({props:{icon:"clarity:italic-line",height:"20"}}),m=new Ce({props:{icon:"ion:close"}}),v=Ay(t[3][0]),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("input"),o=V(),h=x("label"),he(a.$$.fragment),s=V(),c=x("input"),f=V(),l=x("label"),he(u.$$.fragment),d=V(),p=x("button"),he(m.$$.fragment),S(r,"id","align-normal"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="normal",Re(r,r.__value),S(h,"for","align-normal"),S(h,"class","radio-label"),S(c,"id","align-italic"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="italic",Re(c,c.__value),S(l,"for","align-italic"),S(l,"class","radio-label"),S(i,"class","grow flex justify-center"),S(p,"type","button"),S(p,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),v.p(r,c)},m(y,w){B(y,e,w),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(n,d),k(n,p),ue(m,p,null),g=!0,_||(b=[Q(r,"change",t[2]),Q(c,"change",t[4]),Q(p,"click",t[5])],_=!0)},p(y,[w]){w&1&&(r.checked=r.__value===y[0]),w&1&&(c.checked=c.__value===y[0])},i(y){g||(M(a.$$.fragment,y),M(u.$$.fragment,y),M(m.$$.fragment,y),g=!0)},o(y){U(a.$$.fragment,y),U(u.$$.fragment,y),U(m.$$.fragment,y),g=!1},d(y){y&&N(e),fe(a),fe(u),fe(m),v.r(),_=!1,Ue(b)}}}function OE(t,e,n){let{selectProperty:i=null}=e,{style:r="normal"}=e;console.log({style:r});const o=Xt();Di(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}const c=()=>n(1,i=null);return t.$$set=f=>{"selectProperty"in f&&n(1,i=f.selectProperty),"style"in f&&n(0,r=f.style)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeStyle",{style:r})},[r,i,a,h,s,c]}class EE extends qe{constructor(e){super(),Ge(this,e,OE,kE,Ve,{selectProperty:1,style:0})}}function xE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w,C,T;return a=new Ce({props:{icon:"radix-icons:underline",height:"20"}}),u=new Ce({props:{icon:"radix-icons:overline",height:"20"}}),v=new Ce({props:{icon:"radix-icons:strikethrough",height:"20"}}),y=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("input"),o=V(),h=x("label"),he(a.$$.fragment),s=V(),c=x("input"),f=V(),l=x("label"),he(u.$$.fragment),d=V(),p=x("input"),m=V(),g=x("label"),he(v.$$.fragment),_=V(),b=x("button"),he(y.$$.fragment),S(r,"id","decoration-underline"),S(r,"class","hidden radio-input"),S(r,"type","checkbox"),S(h,"for","decoration-underline"),S(h,"class","radio-label"),S(c,"id","decoration-overline"),S(c,"class","hidden radio-input"),S(c,"type","checkbox"),S(l,"for","decoration-overline"),S(l,"class","radio-label"),S(p,"id","decoration-through"),S(p,"class","hidden radio-input"),S(p,"type","checkbox"),S(g,"for","decoration-through"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(O,D){B(O,e,D),k(e,n),k(n,i),k(i,r),r.checked=t[1].underline,k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=t[1].overline,k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=t[1].linethrough,k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),w=!0,C||(T=[Q(r,"change",t[3]),Q(c,"change",t[4]),Q(p,"change",t[5]),Q(b,"click",t[6])],C=!0)},p(O,[D]){D&2&&(r.checked=O[1].underline),D&2&&(c.checked=O[1].overline),D&2&&(p.checked=O[1].linethrough)},i(O){w||(M(a.$$.fragment,O),M(u.$$.fragment,O),M(v.$$.fragment,O),M(y.$$.fragment,O),w=!0)},o(O){U(a.$$.fragment,O),U(u.$$.fragment,O),U(v.$$.fragment,O),U(y.$$.fragment,O),w=!1},d(O){O&&N(e),fe(a),fe(u),fe(v),fe(y),C=!1,Ue(T)}}}function DE(t,e,n){let{selectProperty:i=null}=e,{object:r=""}=e,o={underline:r.underline,overline:r.overline,linethrough:r.linethrough};const h=Xt();Di(()=>{n(0,i=null)});function a(){o.underline=this.checked,n(1,o)}function s(){o.overline=this.checked,n(1,o)}function c(){o.linethrough=this.checked,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeDecoration",{decoration:o})},[i,o,r,a,s,c,f]}class AE extends qe{constructor(e){super(),Ge(this,e,DE,xE,Ve,{selectProperty:0,object:2})}}function PE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;function _(y){t[3](y)}let b={isAlpha:!1,label:""};return t[1].stroke!==void 0&&(b.hex=t[1].stroke),r=new Dh({props:b}),tt.push(()=>At(r,"hex",_)),p=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div"),he(r.$$.fragment),h=V(),a=x("div"),s=x("input"),c=V(),f=x("div"),l=x("input"),u=V(),d=x("button"),he(p.$$.fragment),S(i,"class","grow flex justify-center"),S(s,"id","minmax-range"),S(s,"type","range"),S(s,"min","0"),S(s,"step","0.5"),S(s,"max","20"),S(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(a,"class","grow w-full"),S(l,"type","text"),S(l,"class","input w-full"),S(d,"type","button"),S(d,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(y,w){B(y,e,w),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),k(a,s),Re(s,t[1].strokeWidth),k(n,c),k(n,f),k(f,l),Re(l,t[1].strokeWidth),k(n,u),k(n,d),ue(p,d,null),m=!0,g||(v=[Q(s,"change",t[4]),Q(s,"input",t[4]),Q(l,"input",t[5]),Q(d,"click",t[6])],g=!0)},p(y,[w]){const C={};!o&&w&2&&(o=!0,C.hex=y[1].stroke,Ht(()=>o=!1)),r.$set(C),w&2&&Re(s,y[1].strokeWidth),w&2&&l.value!==y[1].strokeWidth&&Re(l,y[1].strokeWidth)},i(y){m||(M(r.$$.fragment,y),M(p.$$.fragment,y),m=!0)},o(y){U(r.$$.fragment,y),U(p.$$.fragment,y),m=!1},d(y){y&&N(e),fe(r),fe(p),g=!1,Ue(v)}}}function ME(t,e,n){let{selectProperty:i=null}=e,{object:r={}}=e,o={strokeWidth:r.strokeWidth?r.strokeWidth:0,stroke:r.stroke?r.stroke:"#000000"};const h=Xt();Di(()=>{n(0,i=null)});function a(l){t.$$.not_equal(o.stroke,l)&&(o.stroke=l,n(1,o))}function s(){o.strokeWidth=Py(this.value),n(1,o)}function c(){o.strokeWidth=this.value,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeStroke",{stroke:o})},[i,o,r,a,s,c,f]}class IE extends qe{constructor(e){super(),Ge(this,e,ME,PE,Ve,{selectProperty:0,object:2})}}function Qp(t,e,n){const i=t.slice();return i[6]=e[n],i[7]=e,i[8]=n,i}function eg(t){let e,n,i;function r(a){t[3](a,t[6])}function o(){return t[4](t[6])}let h={isAlpha:!1,label:""};return t[6].fill!==void 0&&(h.hex=t[6].fill),e=new Dh({props:h}),tt.push(()=>At(e,"hex",r)),e.$on("input",o),{c(){he(e.$$.fragment)},m(a,s){ue(e,a,s),i=!0},p(a,s){t=a;const c={};!n&&s&2&&(n=!0,c.hex=t[6].fill,Ht(()=>n=!1)),e.$set(c)},i(a){i||(M(e.$$.fragment,a),i=!0)},o(a){U(e.$$.fragment,a),i=!1},d(a){fe(e,a)}}}function RE(t){let e,n,i,r,o,h,a,s,c,f=Fe(t[1]._objects),l=[];for(let d=0;d<f.length;d+=1)l[d]=eg(Qp(t,f,d));const u=d=>U(l[d],1,1,()=>{l[d]=null});return h=new Ce({props:{icon:"ion:close"}}),{c(){e=x("div"),n=x("div"),i=x("div");for(let d=0;d<l.length;d+=1)l[d].c();r=V(),o=x("button"),he(h.$$.fragment),S(i,"class","grow flex justify-center w-full color-picker-wrapper"),S(o,"type","button"),S(o,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(d,p){B(d,e,p),k(e,n),k(n,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);k(n,r),k(n,o),ue(h,o,null),a=!0,s||(c=Q(o,"click",t[5]),s=!0)},p(d,[p]){if(p&6){f=Fe(d[1]._objects);let m;for(m=0;m<f.length;m+=1){const g=Qp(d,f,m);l[m]?(l[m].p(g,p),M(l[m],1)):(l[m]=eg(g),l[m].c(),M(l[m],1),l[m].m(i,null))}for(Se(),m=f.length;m<l.length;m+=1)u(m);Te()}},i(d){if(!a){for(let p=0;p<f.length;p+=1)M(l[p]);M(h.$$.fragment,d),a=!0}},o(d){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)U(l[p]);U(h.$$.fragment,d),a=!1},d(d){d&&N(e),Pt(l,d),fe(h),s=!1,c()}}}function FE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e;const o=Xt();Di(()=>{o("onChangeColorEnd"),n(0,i=null)});function h(c,f){t.$$.not_equal(f.fill,c)&&(f.fill=c,n(1,r))}const a=c=>{c.set("fill",c.fill),o("onChangeColors")},s=()=>n(0,i=null);return t.$$set=c=>{"selectProperty"in c&&n(0,i=c.selectProperty),"object"in c&&n(1,r=c.object)},[i,r,o,h,a,s]}class LE extends qe{constructor(e){super(),Ge(this,e,FE,RE,Ve,{selectProperty:0,object:1})}}function tg(t,e,n){const i=t.slice();return i[16]=e[n],i}function ng(t){let e,n,i,r,o,h,a;function s(){return t[9](t[16])}return{c(){e=x("button"),n=x("img"),o=V(),Ye(n.src,i=t[16].file.url)||S(n,"src",i),S(n,"alt",r=t[16].name),S(n,"class","max-w-full"),S(e,"class","masonry-item flex flex-col justify-center")},m(c,f){B(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f&2&&!Ye(n.src,i=t[16].file.url)&&S(n,"src",i),f&2&&r!==(r=t[16].name)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function NE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}});let _=Fe(t[1]),b=[];for(let y=0;y<_.length;y+=1)b[y]=ng(tg(t,_,y));return{c(){e=x("div"),n=x("h2"),i=x("span"),i.textContent="클립아트",r=V(),o=x("button"),he(h.$$.fragment),a=V(),s=x("div"),c=x("div"),f=x("input"),l=V(),u=x("button"),u.textContent="검색",d=V(),p=x("div");for(let y=0;y<b.length;y+=1)b[y].c();S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"type","search"),S(f,"class","border p-2 rounded join-left text-sm grow"),S(f,"placeholder","키워드 검색"),f.required=!0,S(u,"type","submit"),S(u,"class","btn btn-sm primary-btn join-right text-sm"),S(c,"class","flex w-full"),S(s,"class","w-full mt-3"),S(p,"class","grow mt-3 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(y,w){B(y,e,w),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),Re(f,t[3].keyword),k(c,l),k(c,u),k(e,d),k(e,p);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(p,null);t[10](p),m=!0,g||(v=[Q(o,"click",t[6]),Q(f,"input",t[7]),Q(u,"click",t[8])],g=!0)},p(y,[w]){if(w&8&&f.value!==y[3].keyword&&Re(f,y[3].keyword),w&3){_=Fe(y[1]);let C;for(C=0;C<_.length;C+=1){const T=tg(y,_,C);b[C]?b[C].p(T,w):(b[C]=ng(T),b[C].c(),b[C].m(p,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=_.length}},i(y){m||(M(h.$$.fragment,y),m=!0)},o(y){U(h.$$.fragment,y),m=!1},d(y){y&&N(e),fe(h),Pt(b,y),t[10](null),g=!1,Ue(v)}}}function jE(t,e,n){let i,r;Me(t,po,_=>n(13,i=_)),Me(t,Yt,_=>n(4,r=_));let{handleAddClipArt:o}=e;Xt();let h=[],a,s=!1,c=!0,f={perPage:24,current:0,keyword:"",categories:[]};async function l(_=!1){_&&(n(3,f.current=0,f),n(1,h=[])),s=!0;const b=await ik(i.id,f);n(1,h=[...h,...b.data]),c=b.data.length===f.perPage,s=!1}function u(){const _=a.scrollHeight,b=a.scrollTop,y=a.clientHeight;b+y>=_-100&&!s&&c&&(n(3,f.current++,f),l())}xi(()=>{l(),a.addEventListener("scroll",u)});const d=()=>ye(Yt,r=null,r);function p(){f.keyword=this.value,n(3,f)}const m=()=>l(!0),g=_=>o(_);function v(_){tt[_?"unshift":"push"](()=>{a=_,n(2,a)})}return t.$$set=_=>{"handleAddClipArt"in _&&n(0,o=_.handleAddClipArt)},[o,h,a,f,r,l,d,p,m,g,v]}class BE extends qe{constructor(e){super(),Ge(this,e,jE,NE,Ve,{handleAddClipArt:0})}}function UE(t){let e;return{c(){e=x("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function YE(t){let e;return{c(){e=x("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function WE(t){let e,n,i,r,o;function h(c,f){return c[0]?YE:UE}let a=h(t),s=a(t);return{c(){e=x("div"),s.c(),n=V(),i=x("input"),S(i,"type","file"),i.multiple=!0,S(e,"class","dropzone svelte-1xosmac"),S(e,"role","dropzone"),Ci(e,"active",t[0])},m(c,f){B(c,e,f),s.m(e,null),k(e,n),k(e,i),r||(o=[Q(i,"change",t[4]),Q(e,"dragover",t[1]),Q(e,"dragleave",t[2]),Q(e,"drop",t[3])],r=!0)},p(c,[f]){a!==(a=h(c))&&(s.d(1),s=a(c),s&&(s.c(),s.m(e,n))),f&1&&Ci(e,"active",c[0])},i:ge,o:ge,d(c){c&&N(e),s.d(),r=!1,Ue(o)}}}function zE(t,e,n){const i=Xt();let r=!1;function o(c){c.preventDefault(),n(0,r=!0)}function h(){n(0,r=!1)}function a(c){c.preventDefault(),n(0,r=!1);const f=c.dataTransfer.files;i("drop",f)}function s(c){const f=c.target.files;i("drop",f)}return[r,o,h,a,s]}class HE extends qe{constructor(e){super(),Ge(this,e,zE,WE,Ve,{})}}/*!
* Cropper.js v1.6.1
* https://fengyuanchen.github.io/cropperjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:44:19.860Z
*/function ig(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Db(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ig(Object(n),!0).forEach(function(i){$E(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function VE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rg(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Pb(i.key),i)}}function XE(t,e,n){return e&&rg(t.prototype,e),n&&rg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $E(t,e,n){return e=Pb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ab(t){return GE(t)||qE(t)||KE(t)||JE()}function GE(t){if(Array.isArray(t))return bf(t)}function qE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KE(t,e){if(t){if(typeof t=="string")return bf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bf(t,e)}}function bf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function JE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZE(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pb(t){var e=ZE(t,"string");return typeof e=="symbol"?e:String(e)}var gc=typeof window<"u"&&typeof window.document<"u",ki=gc?window:{},Ah=gc&&ki.document.documentElement?"ontouchstart"in ki.document.documentElement:!1,Ph=gc?"PointerEvent"in ki:!1,wt="cropper",Mh="all",Mb="crop",Ib="move",Rb="zoom",Tr="e",kr="w",ds="s",Qi="n",Do="ne",Ao="nw",Po="se",Mo="sw",wf="".concat(wt,"-crop"),sg="".concat(wt,"-disabled"),On="".concat(wt,"-hidden"),og="".concat(wt,"-hide"),QE="".concat(wt,"-invisible"),Vl="".concat(wt,"-modal"),Cf="".concat(wt,"-move"),aa="".concat(wt,"Action"),Ja="".concat(wt,"Preview"),Ih="crop",Fb="move",Lb="none",Sf="crop",Tf="cropend",kf="cropmove",Of="cropstart",ag="dblclick",e2=Ah?"touchstart":"mousedown",t2=Ah?"touchmove":"mousemove",n2=Ah?"touchend touchcancel":"mouseup",lg=Ph?"pointerdown":e2,cg=Ph?"pointermove":t2,ug=Ph?"pointerup pointercancel":n2,fg="ready",hg="resize",dg="wheel",Ef="zoom",pg="image/jpeg",i2=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,r2=/^data:/,s2=/^data:image\/jpeg;base64,/,o2=/^img|canvas$/i,Nb=200,jb=100,gg={viewMode:0,dragMode:Ih,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Nb,minContainerHeight:jb,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},a2='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',l2=Number.isNaN||ki.isNaN;function Qe(t){return typeof t=="number"&&!l2(t)}var mg=function(e){return e>0&&e<1/0};function yu(t){return typeof t>"u"}function Zr(t){return yf(t)==="object"&&t!==null}var c2=Object.prototype.hasOwnProperty;function Es(t){if(!Zr(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&c2.call(n,"isPrototypeOf")}catch{return!1}}function Tn(t){return typeof t=="function"}var u2=Array.prototype.slice;function Bb(t){return Array.from?Array.from(t):u2.call(t)}function Wt(t,e){return t&&Tn(e)&&(Array.isArray(t)||Qe(t.length)?Bb(t).forEach(function(n,i){e.call(t,n,i,t)}):Zr(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var St=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Zr(e)&&i.length>0&&i.forEach(function(o){Zr(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},f2=/\.\d*(?:0|9){12}\d*$/;function Bs(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return f2.test(t)?Math.round(t*e)/e:t}var h2=/^width|height|left|top|marginLeft|marginTop$/;function ur(t,e){var n=t.style;Wt(e,function(i,r){h2.test(r)&&Qe(i)&&(i="".concat(i,"px")),n[r]=i})}function d2(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Qt(t,e){if(e){if(Qe(t.length)){Wt(t,function(i){Qt(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function _i(t,e){if(e){if(Qe(t.length)){Wt(t,function(n){_i(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function xs(t,e,n){if(e){if(Qe(t.length)){Wt(t,function(i){xs(i,e,n)});return}n?Qt(t,e):_i(t,e)}}var p2=/([a-z\d])([A-Z])/g;function Rh(t){return t.replace(p2,"$1-$2").toLowerCase()}function xf(t,e){return Zr(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Rh(e)))}function la(t,e,n){Zr(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Rh(e)),n)}function g2(t,e){if(Zr(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Rh(e)))}var Ub=/\s\s*/,Yb=function(){var t=!1;if(gc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});ki.addEventListener("test",n,i),ki.removeEventListener("test",n,i)}return t}();function Kn(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Ub).forEach(function(o){if(!Yb){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Un(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Ub).forEach(function(o){if(i.once&&!Yb){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Us(t,e,n){var i;return Tn(Event)&&Tn(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(i)}function Wb(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var bu=ki.location,m2=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function vg(t){var e=t.match(m2);return e!==null&&(e[1]!==bu.protocol||e[2]!==bu.hostname||e[3]!==bu.port)}function _g(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Jo(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Qe(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Qe(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Qe(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Qe(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Qe(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function v2(t){var e=Db({},t),n=0;return Wt(t,function(i,r){delete e[r],Wt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;Math.abs(u)>Math.abs(n)&&(n=u)})}),n}function Za(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:Db({startX:n,startY:i},r)}function _2(t){var e=0,n=0,i=0;return Wt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}function fr(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=mg(i),h=mg(n);if(o&&h){var a=n*e;r==="contain"&&a>i||r==="cover"&&a<i?n=i/e:i=n*e}else o?n=i/e:h&&(i=n*e);return{width:i,height:n}}function y2(t){var e=t.width,n=t.height,i=t.degree;if(i=Math.abs(i)%180,i===90)return{width:n,height:e};var r=i%90*Math.PI/180,o=Math.sin(r),h=Math.cos(r),a=e*h+n*o,s=e*o+n*h;return i>90?{width:s,height:a}:{width:a,height:s}}function b2(t,e,n,i){var r=e.aspectRatio,o=e.naturalWidth,h=e.naturalHeight,a=e.rotate,s=a===void 0?0:a,c=e.scaleX,f=c===void 0?1:c,l=e.scaleY,u=l===void 0?1:l,d=n.aspectRatio,p=n.naturalWidth,m=n.naturalHeight,g=i.fillColor,v=g===void 0?"transparent":g,_=i.imageSmoothingEnabled,b=_===void 0?!0:_,y=i.imageSmoothingQuality,w=y===void 0?"low":y,C=i.maxWidth,T=C===void 0?1/0:C,O=i.maxHeight,D=O===void 0?1/0:O,I=i.minWidth,Y=I===void 0?0:I,z=i.minHeight,q=z===void 0?0:z,G=document.createElement("canvas"),j=G.getContext("2d"),W=fr({aspectRatio:d,width:T,height:D}),te=fr({aspectRatio:d,width:Y,height:q},"cover"),se=Math.min(W.width,Math.max(te.width,p)),E=Math.min(W.height,Math.max(te.height,m)),P=fr({aspectRatio:r,width:T,height:D}),F=fr({aspectRatio:r,width:Y,height:q},"cover"),L=Math.min(P.width,Math.max(F.width,o)),Z=Math.min(P.height,Math.max(F.height,h)),R=[-L/2,-Z/2,L,Z];return G.width=Bs(se),G.height=Bs(E),j.fillStyle=v,j.fillRect(0,0,se,E),j.save(),j.translate(se/2,E/2),j.rotate(s*Math.PI/180),j.scale(f,u),j.imageSmoothingEnabled=b,j.imageSmoothingQuality=w,j.drawImage.apply(j,[t].concat(Ab(R.map(function(A){return Math.floor(Bs(A))})))),j.restore(),G}var zb=String.fromCharCode;function w2(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=zb(t.getUint8(r));return i}var C2=/^data:.*,/;function S2(t){var e=t.replace(C2,""),n=atob(e),i=new ArrayBuffer(n.length),r=new Uint8Array(i);return Wt(r,function(o,h){r[h]=n.charCodeAt(h)}),i}function T2(t,e){for(var n=[],i=8192,r=new Uint8Array(t);r.length>0;)n.push(zb.apply(null,Bb(r.subarray(0,i)))),r=r.subarray(i);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function k2(t){var e=new DataView(t),n;try{var i,r,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,a=2;a+1<h;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var s=r+4,c=r+10;if(w2(e,s,4)==="Exif"){var f=e.getUint16(c);if(i=f===18761,(i||f===19789)&&e.getUint16(c+2,i)===42){var l=e.getUint32(c+4,i);l>=8&&(o=c+l)}}}if(o){var u=e.getUint16(o,i),d,p;for(p=0;p<u;p+=1)if(d=o+p*12+2,e.getUint16(d,i)===274){d+=8,n=e.getUint16(d,i),e.setUint16(d,1,i);break}}}catch{n=1}return n}function O2(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:i}}var E2={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,i=this.container,r=this.cropper,o=Number(n.minContainerWidth),h=Number(n.minContainerHeight);Qt(r,On),_i(e,On);var a={width:Math.max(i.offsetWidth,o>=0?o:Nb),height:Math.max(i.offsetHeight,h>=0?h:jb)};this.containerData=a,ur(r,{width:a.width,height:a.height}),Qt(e,On),_i(r,On)},initCanvas:function(){var e=this.containerData,n=this.imageData,i=this.options.viewMode,r=Math.abs(n.rotate)%180===90,o=r?n.naturalHeight:n.naturalWidth,h=r?n.naturalWidth:n.naturalHeight,a=o/h,s=e.width,c=e.height;e.height*a>e.width?i===3?s=e.height*a:c=e.width/a:i===3?c=e.width/a:s=e.height*a;var f={aspectRatio:a,naturalWidth:o,naturalHeight:h,width:s,height:c};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=St({},f)},limitCanvas:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=i.viewMode,s=o.aspectRatio,c=this.cropped&&h;if(e){var f=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;a>1?(f=Math.max(f,r.width),l=Math.max(l,r.height),a===3&&(l*s>f?f=l*s:l=f/s)):a>0&&(f?f=Math.max(f,c?h.width:0):l?l=Math.max(l,c?h.height:0):c&&(f=h.width,l=h.height,l*s>f?f=l*s:l=f/s));var u=fr({aspectRatio:s,width:f,height:l});f=u.width,l=u.height,o.minWidth=f,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(n)if(a>(c?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),c&&this.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,a===2&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,n){var i=this.canvasData,r=this.imageData;if(n){var o=y2({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),h=o.width,a=o.height,s=i.width*(h/i.naturalWidth),c=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(c-i.height)/2,i.width=s,i.height=c,i.aspectRatio=h/a,i.naturalWidth=h,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,ur(this.canvas,St({width:i.width,height:i.height},Jo({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,i=this.imageData,r=i.naturalWidth*(n.width/n.naturalWidth),o=i.naturalHeight*(n.height/n.naturalHeight);St(i,{width:r,height:o,left:(n.width-r)/2,top:(n.height-o)/2}),ur(this.image,St({width:i.width,height:i.height},Jo(St({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:n.width,height:n.height};i&&(n.height*i>n.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=n.left+(n.width-o.width)/2,o.top=n.top+(n.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=St({},o)},limitCropBox:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(e){var c=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,l=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,u=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;c=Math.min(c,r.width),f=Math.min(f,r.height),s&&(c&&f?f*s>c?f=c/s:c=f*s:c?f=c/s:f&&(c=f*s),u*s>l?u=l/s:l=u*s),h.minWidth=Math.min(c,l),h.minHeight=Math.min(f,u),h.maxWidth=l,h.maxHeight=u}n&&(a?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(r.width,o.left+o.width)-h.width,h.maxTop=Math.min(r.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=r.width-h.width,h.maxTop=r.height-h.height))},renderCropBox:function(){var e=this.options,n=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&la(this.face,aa,i.width>=n.width&&i.height>=n.height?Ib:Mh),ur(this.cropBox,St({width:i.width,height:i.height},Jo({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Us(this.element,Sf,this.getData())}},x2={initPreview:function(){var e=this.element,n=this.crossOrigin,i=this.options.preview,r=n?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",h=document.createElement("img");if(n&&(h.crossOrigin=n),h.src=r,h.alt=o,this.viewBox.appendChild(h),this.viewBoxImage=h,!!i){var a=i;typeof i=="string"?a=e.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,Wt(a,function(s){var c=document.createElement("img");la(s,Ja,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),n&&(c.crossOrigin=n),c.src=r,c.alt=o,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(c)})}},resetPreview:function(){Wt(this.previews,function(e){var n=xf(e,Ja);ur(e,{width:n.width,height:n.height}),e.innerHTML=n.html,g2(e,Ja)})},preview:function(){var e=this.imageData,n=this.canvasData,i=this.cropBoxData,r=i.width,o=i.height,h=e.width,a=e.height,s=i.left-n.left-e.left,c=i.top-n.top-e.top;!this.cropped||this.disabled||(ur(this.viewBoxImage,St({width:h,height:a},Jo(St({translateX:-s,translateY:-c},e)))),Wt(this.previews,function(f){var l=xf(f,Ja),u=l.width,d=l.height,p=u,m=d,g=1;r&&(g=u/r,m=o*g),o&&m>d&&(g=d/o,p=r*g,m=d),ur(f,{width:p,height:m}),ur(f.getElementsByTagName("img")[0],St({width:h*g,height:a*g},Jo(St({translateX:-s*g,translateY:-c*g},e))))}))}},D2={bind:function(){var e=this.element,n=this.options,i=this.cropper;Tn(n.cropstart)&&Un(e,Of,n.cropstart),Tn(n.cropmove)&&Un(e,kf,n.cropmove),Tn(n.cropend)&&Un(e,Tf,n.cropend),Tn(n.crop)&&Un(e,Sf,n.crop),Tn(n.zoom)&&Un(e,Ef,n.zoom),Un(i,lg,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Un(i,dg,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Un(i,ag,this.onDblclick=this.dblclick.bind(this)),Un(e.ownerDocument,cg,this.onCropMove=this.cropMove.bind(this)),Un(e.ownerDocument,ug,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Un(window,hg,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,i=this.cropper;Tn(n.cropstart)&&Kn(e,Of,n.cropstart),Tn(n.cropmove)&&Kn(e,kf,n.cropmove),Tn(n.cropend)&&Kn(e,Tf,n.cropend),Tn(n.crop)&&Kn(e,Sf,n.crop),Tn(n.zoom)&&Kn(e,Ef,n.zoom),Kn(i,lg,this.onCropStart),n.zoomable&&n.zoomOnWheel&&Kn(i,dg,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Kn(i,ag,this.onDblclick),Kn(e.ownerDocument,cg,this.onCropMove),Kn(e.ownerDocument,ug,this.onCropEnd),n.responsive&&Kn(window,hg,this.onResize)}},A2={resize:function(){if(!this.disabled){var e=this.options,n=this.container,i=this.containerData,r=n.offsetWidth/i.width,o=n.offsetHeight/i.height,h=Math.abs(r-1)>Math.abs(o-1)?r:o;if(h!==1){var a,s;e.restore&&(a=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Wt(a,function(c,f){a[f]=c*h})),this.setCropBoxData(Wt(s,function(c,f){s[f]=c*h})))}}},dblclick:function(){this.disabled||this.options.dragMode===Lb||this.setDragMode(d2(this.dragBox,wf)?Fb:Ih)},wheel:function(e){var n=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,e)))},cropStart:function(e){var n=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Qe(n)&&n!==1||Qe(i)&&i!==0||e.ctrlKey))){var r=this.options,o=this.pointers,h;e.changedTouches?Wt(e.changedTouches,function(a){o[a.identifier]=Za(a)}):o[e.pointerId||0]=Za(e),Object.keys(o).length>1&&r.zoomable&&r.zoomOnTouch?h=Rb:h=xf(e.target,aa),i2.test(h)&&Us(this.element,Of,{originalEvent:e,action:h})!==!1&&(e.preventDefault(),this.action=h,this.cropping=!1,h===Mb&&(this.cropping=!0,Qt(this.dragBox,Vl)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var i=this.pointers;e.preventDefault(),Us(this.element,kf,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Wt(e.changedTouches,function(r){St(i[r.identifier]||{},Za(r,!0))}):St(i[e.pointerId||0]||{},Za(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,i=this.pointers;e.changedTouches?Wt(e.changedTouches,function(r){delete i[r.identifier]}):delete i[e.pointerId||0],n&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,xs(this.dragBox,Vl,this.cropped&&this.options.modal)),Us(this.element,Tf,{originalEvent:e,action:n}))}}},P2={change:function(e){var n=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,h=this.pointers,a=this.action,s=n.aspectRatio,c=o.left,f=o.top,l=o.width,u=o.height,d=c+l,p=f+u,m=0,g=0,v=r.width,_=r.height,b=!0,y;!s&&e.shiftKey&&(s=l&&u?l/u:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(r.width,i.width,i.left+i.width),_=g+Math.min(r.height,i.height,i.top+i.height));var w=h[Object.keys(h)[0]],C={x:w.endX-w.startX,y:w.endY-w.startY},T=function(D){switch(D){case Tr:d+C.x>v&&(C.x=v-d);break;case kr:c+C.x<m&&(C.x=m-c);break;case Qi:f+C.y<g&&(C.y=g-f);break;case ds:p+C.y>_&&(C.y=_-p);break}};switch(a){case Mh:c+=C.x,f+=C.y;break;case Tr:if(C.x>=0&&(d>=v||s&&(f<=g||p>=_))){b=!1;break}T(Tr),l+=C.x,l<0&&(a=kr,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case Qi:if(C.y<=0&&(f<=g||s&&(c<=m||d>=v))){b=!1;break}T(Qi),u-=C.y,f+=C.y,u<0&&(a=ds,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case kr:if(C.x<=0&&(c<=m||s&&(f<=g||p>=_))){b=!1;break}T(kr),l-=C.x,c+=C.x,l<0&&(a=Tr,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case ds:if(C.y>=0&&(p>=_||s&&(c<=m||d>=v))){b=!1;break}T(ds),u+=C.y,u<0&&(a=Qi,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case Do:if(s){if(C.y<=0&&(f<=g||d>=v)){b=!1;break}T(Qi),u-=C.y,f+=C.y,l=u*s}else T(Qi),T(Tr),C.x>=0?d<v?l+=C.x:C.y<=0&&f<=g&&(b=!1):l+=C.x,C.y<=0?f>g&&(u-=C.y,f+=C.y):(u-=C.y,f+=C.y);l<0&&u<0?(a=Mo,u=-u,l=-l,f-=u,c-=l):l<0?(a=Ao,l=-l,c-=l):u<0&&(a=Po,u=-u,f-=u);break;case Ao:if(s){if(C.y<=0&&(f<=g||c<=m)){b=!1;break}T(Qi),u-=C.y,f+=C.y,l=u*s,c+=o.width-l}else T(Qi),T(kr),C.x<=0?c>m?(l-=C.x,c+=C.x):C.y<=0&&f<=g&&(b=!1):(l-=C.x,c+=C.x),C.y<=0?f>g&&(u-=C.y,f+=C.y):(u-=C.y,f+=C.y);l<0&&u<0?(a=Po,u=-u,l=-l,f-=u,c-=l):l<0?(a=Do,l=-l,c-=l):u<0&&(a=Mo,u=-u,f-=u);break;case Mo:if(s){if(C.x<=0&&(c<=m||p>=_)){b=!1;break}T(kr),l-=C.x,c+=C.x,u=l/s}else T(ds),T(kr),C.x<=0?c>m?(l-=C.x,c+=C.x):C.y>=0&&p>=_&&(b=!1):(l-=C.x,c+=C.x),C.y>=0?p<_&&(u+=C.y):u+=C.y;l<0&&u<0?(a=Do,u=-u,l=-l,f-=u,c-=l):l<0?(a=Po,l=-l,c-=l):u<0&&(a=Ao,u=-u,f-=u);break;case Po:if(s){if(C.x>=0&&(d>=v||p>=_)){b=!1;break}T(Tr),l+=C.x,u=l/s}else T(ds),T(Tr),C.x>=0?d<v?l+=C.x:C.y>=0&&p>=_&&(b=!1):l+=C.x,C.y>=0?p<_&&(u+=C.y):u+=C.y;l<0&&u<0?(a=Ao,u=-u,l=-l,f-=u,c-=l):l<0?(a=Mo,l=-l,c-=l):u<0&&(a=Do,u=-u,f-=u);break;case Ib:this.move(C.x,C.y),b=!1;break;case Rb:this.zoom(v2(h),e),b=!1;break;case Mb:if(!C.x||!C.y){b=!1;break}y=Wb(this.cropper),c=w.startX-y.left,f=w.startY-y.top,l=o.minWidth,u=o.minHeight,C.x>0?a=C.y>0?Po:Do:C.x<0&&(c-=l,a=C.y>0?Mo:Ao),C.y<0&&(f-=u),this.cropped||(_i(this.cropBox,On),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(o.width=l,o.height=u,o.left=c,o.top=f,this.action=a,this.renderCropBox()),Wt(h,function(O){O.startX=O.endX,O.startY=O.endY})}},M2={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Qt(this.dragBox,Vl),_i(this.cropBox,On),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=St({},this.initialImageData),this.canvasData=St({},this.initialCanvasData),this.cropBoxData=St({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(St(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),_i(this.dragBox,Vl),Qt(this.cropBox,On)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Wt(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,_i(this.cropper,sg)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Qt(this.cropper,sg)),this},destroy:function(){var e=this.element;return e[wt]?(e[wt]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=i.left,o=i.top;return this.moveTo(yu(e)?e:r+Number(e),yu(n)?n:o+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Qe(e)&&(i.left=e,r=!0),Qe(n)&&(i.top=n,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,n){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,n)},zoomTo:function(e,n,i){var r=this.options,o=this.canvasData,h=o.width,a=o.height,s=o.naturalWidth,c=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var f=s*e,l=c*e;if(Us(this.element,Ef,{ratio:e,oldRatio:h/s,originalEvent:i})===!1)return this;if(i){var u=this.pointers,d=Wb(this.cropper),p=u&&Object.keys(u).length?_2(u):{pageX:i.pageX,pageY:i.pageY};o.left-=(f-h)*((p.pageX-d.left-o.left)/h),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else Es(n)&&Qe(n.x)&&Qe(n.y)?(o.left-=(f-h)*((n.x-o.left)/h),o.top-=(l-a)*((n.y-o.top)/a)):(o.left-=(f-h)/2,o.top-=(l-a)/2);o.width=f,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Qe(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Qe(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Qe(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Qe(e)&&(i.scaleX=e,r=!0),Qe(n)&&(i.scaleY=n,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,i=this.imageData,r=this.canvasData,o=this.cropBoxData,h;if(this.ready&&this.cropped){h={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height};var a=i.width/i.naturalWidth;if(Wt(h,function(f,l){h[l]=f/a}),e){var s=Math.round(h.y+h.height),c=Math.round(h.x+h.width);h.x=Math.round(h.x),h.y=Math.round(h.y),h.width=c-h.x,h.height=s-h.y}}else h={x:0,y:0,width:0,height:0};return n.rotatable&&(h.rotate=i.rotate||0),n.scalable&&(h.scaleX=i.scaleX||1,h.scaleY=i.scaleY||1),h},setData:function(e){var n=this.options,i=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&Es(e)){var h=!1;n.rotatable&&Qe(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,h=!0),n.scalable&&(Qe(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,h=!0),Qe(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,h=!0)),h&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;Qe(e.x)&&(o.left=e.x*a+r.left),Qe(e.y)&&(o.top=e.y*a+r.top),Qe(e.width)&&(o.width=e.width*a),Qe(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?St({},this.containerData):{}},getImageData:function(){return this.sized?St({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Wt(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=e[i]}),n},setCanvasData:function(e){var n=this.canvasData,i=n.aspectRatio;return this.ready&&!this.disabled&&Es(e)&&(Qe(e.left)&&(n.left=e.left),Qe(e.top)&&(n.top=e.top),Qe(e.width)?(n.width=e.width,n.height=e.width/i):Qe(e.height)&&(n.height=e.height,n.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,i=this.options.aspectRatio,r,o;return this.ready&&this.cropped&&!this.disabled&&Es(e)&&(Qe(e.left)&&(n.left=e.left),Qe(e.top)&&(n.top=e.top),Qe(e.width)&&e.width!==n.width&&(r=!0,n.width=e.width),Qe(e.height)&&e.height!==n.height&&(o=!0,n.height=e.height),i&&(r?n.height=n.width/i:o&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,i=b2(this.image,this.imageData,n,e);if(!this.cropped)return i;var r=this.getData(e.rounded),o=r.x,h=r.y,a=r.width,s=r.height,c=i.width/Math.floor(n.naturalWidth);c!==1&&(o*=c,h*=c,a*=c,s*=c);var f=a/s,l=fr({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),u=fr({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),d=fr({aspectRatio:f,width:e.width||(c!==1?i.width:a),height:e.height||(c!==1?i.height:s)}),p=d.width,m=d.height;p=Math.min(l.width,Math.max(u.width,p)),m=Math.min(l.height,Math.max(u.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Bs(p),g.height=Bs(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,p,m);var _=e.imageSmoothingEnabled,b=_===void 0?!0:_,y=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var w=i.width,C=i.height,T=o,O=h,D,I,Y,z,q,G;T<=-a||T>w?(T=0,D=0,Y=0,q=0):T<=0?(Y=-T,T=0,D=Math.min(w,a+T),q=D):T<=w&&(Y=0,D=Math.min(a,w-T),q=D),D<=0||O<=-s||O>C?(O=0,I=0,z=0,G=0):O<=0?(z=-O,O=0,I=Math.min(C,s+O),G=I):O<=C&&(z=0,I=Math.min(s,C-O),G=I);var j=[T,O,D,I];if(q>0&&G>0){var W=p/a;j.push(Y*W,z*W,q*W,G*W)}return v.drawImage.apply(v,[i].concat(Ab(j.map(function(te){return Math.floor(Bs(te))})))),g},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!yu(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===Ih,h=n.movable&&e===Fb;e=o||h?e:Lb,n.dragMode=e,la(i,aa,e),xs(i,wf,o),xs(i,Cf,h),n.cropBoxMovable||(la(r,aa,e),xs(r,wf,o),xs(r,Cf,h))}return this}},I2=ki.Cropper,Hb=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(VE(this,t),!e||!o2.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=St({},gg,Es(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return XE(t,[{key:"init",value:function(){var n=this.element,i=n.tagName.toLowerCase(),r;if(!n[wt]){if(n[wt]=this,i==="img"){if(this.isImg=!0,r=n.getAttribute("src")||"",this.originalUrl=r,!r)return;r=n.src}else i==="canvas"&&window.HTMLCanvasElement&&(r=n.toDataURL());this.load(r)}}},{key:"load",value:function(n){var i=this;if(n){this.url=n,this.imageData={};var r=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(r2.test(n)){s2.test(n)?this.read(S2(n)):this.clone();return}var h=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=a,h.onerror=a,h.ontimeout=a,h.onprogress=function(){h.getResponseHeader("content-type")!==pg&&h.abort()},h.onload=function(){i.read(h.response)},h.onloadend=function(){i.reloading=!1,i.xhr=null},o.checkCrossOrigin&&vg(n)&&r.crossOrigin&&(n=_g(n)),h.open("GET",n,!0),h.responseType="arraybuffer",h.withCredentials=r.crossOrigin==="use-credentials",h.send()}}},{key:"read",value:function(n){var i=this.options,r=this.imageData,o=k2(n),h=0,a=1,s=1;if(o>1){this.url=T2(n,pg);var c=O2(o);h=c.rotate,a=c.scaleX,s=c.scaleY}i.rotatable&&(r.rotate=h),i.scalable&&(r.scaleX=a,r.scaleY=s),this.clone()}},{key:"clone",value:function(){var n=this.element,i=this.url,r=n.crossOrigin,o=i;this.options.checkCrossOrigin&&vg(i)&&(r||(r="anonymous"),o=_g(i)),this.crossOrigin=r,this.crossOriginUrl=o;var h=document.createElement("img");r&&(h.crossOrigin=r),h.src=o||i,h.alt=n.alt||"The image to crop",this.image=h,h.onload=this.start.bind(this),h.onerror=this.stop.bind(this),Qt(h,og),n.parentNode.insertBefore(h,n.nextSibling)}},{key:"start",value:function(){var n=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var r=ki.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ki.navigator.userAgent),o=function(c,f){St(n.imageData,{naturalWidth:c,naturalHeight:f,aspectRatio:c/f}),n.initialImageData=St({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(i.naturalWidth&&!r){o(i.naturalWidth,i.naturalHeight);return}var h=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=h,h.onload=function(){o(h.width,h.height),r||a.removeChild(h)},h.src=i.src,r||(h.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(h))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,i=this.options,r=this.image,o=n.parentNode,h=document.createElement("div");h.innerHTML=a2;var a=h.querySelector(".".concat(wt,"-container")),s=a.querySelector(".".concat(wt,"-canvas")),c=a.querySelector(".".concat(wt,"-drag-box")),f=a.querySelector(".".concat(wt,"-crop-box")),l=f.querySelector(".".concat(wt,"-face"));this.container=o,this.cropper=a,this.canvas=s,this.dragBox=c,this.cropBox=f,this.viewBox=a.querySelector(".".concat(wt,"-view-box")),this.face=l,s.appendChild(r),Qt(n,On),o.insertBefore(a,n.nextSibling),_i(r,og),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,Qt(f,On),i.guides||Qt(f.getElementsByClassName("".concat(wt,"-dashed")),On),i.center||Qt(f.getElementsByClassName("".concat(wt,"-center")),On),i.background&&Qt(a,"".concat(wt,"-bg")),i.highlight||Qt(l,QE),i.cropBoxMovable&&(Qt(l,Cf),la(l,aa,Mh)),i.cropBoxResizable||(Qt(f.getElementsByClassName("".concat(wt,"-line")),On),Qt(f.getElementsByClassName("".concat(wt,"-point")),On)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),Tn(i.ready)&&Un(n,fg,i.ready,{once:!0}),Us(n,fg)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),_i(this.element,On)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=I2,t}},{key:"setDefaults",value:function(n){St(gg,Es(n)&&n)}}]),t}();St(Hb.prototype,E2,x2,D2,A2,P2,M2);let Fh="https://podiz-convert-uieqvbv3ya-du.a.run.app";const R2=async(t,e,n="#FFFFFF")=>{try{const i={colorCode:n,composites:t.composites,printIndex:e,prints:t.prints,scenes:t.scenes};return await(await fetch(`${Fh}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}catch(i){console.log({error:i})}},F2=async(t,e)=>{try{const n={data:e,shopid:t};return await(await fetch(`${Fh}/background_remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(n){return JSON.stringify(n)}},yg=async t=>{try{return await(await fetch(`${Fh}/thumbnail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}};function L2(t){return Object.keys(t).reduce((e,n)=>t[n]===void 0?e:e+`${n}:${t[n]};`,"")}L2({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Vb(t,...e){const n={};for(const i of Object.keys(t))e.includes(i)||(n[i]=t[i]);return n}function Qa(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=i)}return e}function bg(t){function e(n){return n(t),()=>{}}return{subscribe:e}}const el=t=>new Proxy(t,{get(e,n,i){return Reflect.get(e,n,i)},ownKeys(e){return Reflect.ownKeys(e).filter(n=>n!=="action")}}),wg=t=>typeof t=="function";Xb("empty");function Xb(t,e){const{stores:n,action:i,returned:r}=e??{},o=(()=>{if(n&&r)return G1(n,a=>{const s=r(a);if(wg(s)){const c=(...f)=>el(Qa({...s(...f),[`data-melt-${t}`]:"",action:i??ps}));return c.action=i??ps,c}return el(Qa({...s,[`data-melt-${t}`]:"",action:i??ps}))});{const a=r,s=a==null?void 0:a();if(wg(s)){const c=(...f)=>el(Qa({...s(...f),[`data-melt-${t}`]:"",action:i??ps}));return c.action=i??ps,bg(c)}return bg(el(Qa({...s,[`data-melt-${t}`]:"",action:i??ps})))}})(),h=i??(()=>{});return h.subscribe=o.subscribe,h}function N2(t){const e=o=>o?`${t}-${o}`:t,n=o=>`data-melt-${t}${o?`-${o}`:""}`,i=o=>`[data-melt-${t}${o?`-${o}`:""}]`;return{name:e,attribute:n,selector:i,getEl:o=>document.querySelector(i(o))}}function ps(){}function $b(t,e,n,i){const r=Array.isArray(e)?e:[e];return r.forEach(o=>t.addEventListener(o,n,i)),()=>{r.forEach(o=>t.removeEventListener(o,n,i))}}function mc(t){return{...t,get:()=>mi(t)}}mc.writable=function(t){const e=yt(t);let n=t;return{subscribe:e.subscribe,set(i){e.set(i),n=i},update(i){const r=i(n);e.set(r),n=r},get(){return n}}};mc.derived=function(t,e){const n=new Map,i=()=>{const o=Array.isArray(t)?t.map(h=>h.get()):t.get();return e(o)};return{get:i,subscribe:o=>{const h=[];return(Array.isArray(t)?t:[t]).forEach(s=>{h.push(s.subscribe(()=>{o(i())}))}),o(i()),n.set(o,h),()=>{const s=n.get(o);if(s)for(const c of s)c();n.delete(o)}}}};const j2=(t,e)=>{const n=mc(t),i=(o,h)=>{n.update(a=>{const s=o(a);let c=s;return e&&(c=e({curr:a,next:s})),h==null||h(c),c})};return{...n,update:i,set:o=>{i(()=>o)}}},B2={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function U2(t){const e={};return Object.keys(t).forEach(n=>{const i=n,r=t[i];e[i]=mc(yt(r))}),e}Ls(void 0,t=>{function e(i){t(i),t(void 0)}return $b(document,"pointerup",e,{passive:!1,capture:!0})});Ls(void 0,t=>{function e(i){i&&i.key===B2.ESCAPE&&t(i),t(void 0)}return $b(document,"keydown",e,{passive:!1})});Ls(!1),Ls(!1),Ls(void 0);const Y2={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Vb(Y2,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const W2={defaultValue:0,max:100},{name:z2}=N2("progress"),H2=t=>{const e={...W2,...t},n=U2(Vb(e,"value")),{max:i}=n,r=e.value??yt(e.defaultValue),o=j2(r,e==null?void 0:e.onValueChange);return{elements:{root:Xb(z2(),{stores:[o,i],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:o},options:n}};function Cg(t){let e,n;return e=new Ce({props:{icon:"line-md:loading-twotone-loop",height:"50"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function Sg(t){let e,n,i,r,o,h=[t[3],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}],a={};for(let s=0;s<h.length;s+=1)a=bi(a,h[s]);return{c(){e=x("div"),n=x("div"),S(n,"class","h-full w-full bg-black transition-transform duration-[660ms] ease-[cubic-bezier(0.65,0,0.35,1)]"),S(n,"style",i=`transform: translateX(-${100-100*(t[2]??0)/(t[4]??1)}%)`),Il(e,a),Ci(e,"svelte-1xfyli4",!0)},m(s,c){B(s,e,c),k(e,n),r||(o=Ty(t[3].action(e)),r=!0)},p(s,c){c&20&&i!==(i=`transform: translateX(-${100-100*(s[2]??0)/(s[4]??1)}%)`)&&S(n,"style",i),Il(e,a=Kr(h,[c&8&&s[3],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}])),Ci(e,"svelte-1xfyli4",!0)},d(s){s&&N(e),r=!1,o()}}}function V2(t){let e,n,i,r,o,h,a,s=t[1]&&Cg();const c=t[8].default,f=wa(c,t,t[7],null);let l=t[0]&&t[2]&&Sg(t);return{c(){e=x("div"),n=x("div"),n.innerHTML='<div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div>',i=V(),s&&s.c(),r=V(),o=x("div"),f&&f.c(),h=V(),l&&l.c(),S(n,"class","loader svelte-1xfyli4"),S(o,"class","loader-text svelte-1xfyli4"),S(e,"class","loader-container svelte-1xfyli4")},m(u,d){B(u,e,d),k(e,n),k(e,i),s&&s.m(e,null),k(e,r),k(e,o),f&&f.m(o,null),k(e,h),l&&l.m(e,null),a=!0},p(u,[d]){u[1]?s?d&2&&M(s,1):(s=Cg(),s.c(),M(s,1),s.m(e,r)):s&&(Se(),U(s,1,1,()=>{s=null}),Te()),f&&f.p&&(!a||d&128)&&Sa(f,c,u,u[7],a?Ca(c,u[7],d,null):Ta(u[7]),null),u[0]&&u[2]?l?l.p(u,d):(l=Sg(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(u){a||(M(s),M(f,u),a=!0)},o(u){U(s),U(f,u),a=!1},d(u){u&&N(e),s&&s.d(),f&&f.d(u),l&&l.d()}}}function X2(t,e,n){let i,r,{$$slots:o={},$$scope:h}=e,{isProgress:a=!1}=e,{isSpinner:s=!1}=e,{progress:c=0}=e;const{elements:{root:f},options:{max:l}}=H2({max:100});return Me(t,f,u=>n(3,i=u)),Me(t,l,u=>n(4,r=u)),t.$$set=u=>{"isProgress"in u&&n(0,a=u.isProgress),"isSpinner"in u&&n(1,s=u.isSpinner),"progress"in u&&n(2,c=u.progress),"$$scope"in u&&n(7,h=u.$$scope)},[a,s,c,i,r,f,l,h,o]}class Gb extends qe{constructor(e){super(),Ge(this,e,X2,V2,Ve,{isProgress:0,isSpinner:1,progress:2})}}function $2(){const t={};return document.getElementById("podiz-publish-uuid")&&(t.uuid=document.getElementById("podiz-publish-uuid").value),document.getElementById("podiz-shop-id")&&(t.shopid=document.getElementById("podiz-shop-id").value),document.getElementById("podiz-provider")&&(t.provider=document.getElementById("podiz-provider").value),document.getElementById("podiz-productno")&&(t.productno=document.getElementById("podiz-productno").value),document.getElementById("podiz-preview-class")&&(t.previewclass=document.getElementById("podiz-preview-class").value),document.getElementById("podiz-preview-item-class")&&(t.previewitem=document.getElementById("podiz-preview-item-class").value),document.getElementById("podiz-mode")&&(t.mode=document.getElementById("podiz-mode").value),t}function G2(){const t=document.querySelectorAll('input[type="hidden"].podiz-hidden');t.forEach(n=>{const i=n.value;document.querySelectorAll(`.${i}`).forEach(o=>{o.style.display="none"})});const e=new MutationObserver(n=>{n.forEach(i=>{if(i.type==="attributes"&&i.attributeName==="value"){const o=i.target.value;document.querySelectorAll(`.${o}`).forEach(a=>{a.style.display="none"})}})});t.forEach(n=>{e.observe(n,{attributes:!0})})}function q2(t){const e=t.name,n=e.lastIndexOf(".");return n===-1?"":e.slice(n+1).toLowerCase()}async function K2(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/variants`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function Df(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/options`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function Tg(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function kg(t,e){return(await K2(e)).variants.find(i=>{const r=t.productOptions.map(h=>h.value),o=i.options.map(h=>h.value);return r.join(",")===o.join(",")})}async function J2(){var n;const t="item_option_add",e="podiz";try{const i=mi(di),r=mi(Wl),o=await Promise.all(i.map(async h=>{const a=[],s=r.linkOptions.find(l=>{var u,d,p;return((u=l.editorOptions)==null?void 0:u.optionValue1)===h.currentOption.optionValue1&&((d=l.editorOptions)==null?void 0:d.optionValue2)===h.currentOption.optionValue2&&((p=l.editorOptions)==null?void 0:p.optionValue3)===h.currentOption.optionValue3}),c=await kg(s,s.productNo);a.push({product_no:s.productNo,variants_code:c.variant_code,quantity:h.count,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]});const f=await Promise.all(h.prints.filter(l=>l.imageDataURL).map(async l=>{const u=r.linkOptions.find(p=>p.print===l.id);if(!u)return null;const d=await kg(u,u.productNo);return{product_no:u.productNo,quantity:h.count,variants_code:d.variant_code,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]}}));return[...a,...f.filter(Boolean)]}));if(CAFE24API){const h=await Promise.all(o.map(s=>new Promise((c,f)=>{CAFE24API.addCart("A0000","P",s,(l,u)=>{c(l?{error:l,product:s}:u)})})));console.log({results:h});let a=[];for(let s=0;s<h.length;s++)(n=h[s].errors)!=null&&n.length&&a.push(...h[s].errors);if(a.length>0){console.error("장바구니 추가 중 다음 오류가 발생했습니다:");for(let s=0;s<a.length;s++)throw a[s]}else{const s="/order/basket.html#none";window.location.pathname.includes("/order/basket.htm")?window.location.reload():window.location.href=s}}}catch(i){throw console.error("Error in addCafe24Cart:",i),i}}function Z2(t,e=null){const n=document.getElementsByClassName(t),i=new Set,r=[],o=/\s*\[\s*podiz\s*:\s*([a-f0-9-]{36})\s*\]\s*/g,h=[];function a(s,c){for(;s&&s.nodeType===Node.TEXT_NODE;)s=s.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE;){if(s.classList.contains(c))return s;s=s.parentNode}return null}for(let s of n){const c=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let f;for(;f=c.nextNode();){let l;for(;(l=o.exec(f.textContent))!==null;){i.add(l[1]);let u;e?u=a(f,e):u=f.parentElement,u&&!r.includes(u)&&r.push(u),h.push({uuid:l[1],element:u})}}}return{uids:Array.from(i),elements:r,items:h}}async function Q2(){try{return new Promise(function(t,e){if(CAFE24API){const n={cafe24MallId:null,cafe24ShopNo:null,cafe24UserType:null,cafe24MemberId:null};n.cafe24MallId=CAFE24API.MALL_ID,n.cafe24ShopNo=CAFE24API.SHOP_NO,CAFE24API.getCustomerIDInfo(function(i,r){if(i)throw i;r.id.member_id?(n.cafe24UserType="member",n.cafe24MemberId=r.id.member_id):(n.cafe24UserType="guest",n.cafe24MemberId=r.id.guest_id)}),t(n)}})}catch(t){reject(t)}}const ex=()=>new Promise(function(t,e){CAFE24API&&CAFE24API.getCartItemList(async function(n,i){if(n)console.log({err:n});else return t(i)})});function Xl(t){return parseFloat(t).toLocaleString("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0})}async function tx(){try{return new Promise((t,e)=>{CAFE24API?CAFE24API.get("/api/v2/categories",(n,i)=>{n?(console.error("Error fetching product categories:",n),e(n)):t(i.categories)}):e(new Error("CAFE24API is not available"))})}catch(t){throw console.error("Error in getCafe24ProductCategories:",t),t}}async function nx(t,e,n=10,i=1){try{return new Promise((r,o)=>{if(CAFE24API){let h="/api/v2/products";const a=[];t&&a.push(`category=${encodeURIComponent(t)}`),e&&a.push(`keyword=${encodeURIComponent(e)}`),a.push(`limit=${n}`),a.push(`page=${i}`),a.length>0&&(h+="?"+a.join("&")),CAFE24API.get(h,(s,c)=>{s?(console.error("Error searching products:",s),o(s)):r(c.products)})}else o(new Error("CAFE24API is not available"))})}catch(r){throw console.error("Error in searchProducts:",r),r}}var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ix=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],h=t[n++],a=t[n++],s=((r&7)<<18|(o&63)<<12|(h&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(s&1023))}else{const o=t[n++],h=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|h&63)}}return e.join("")},Kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],h=r+1<t.length,a=h?t[r+1]:0,s=r+2<t.length,c=s?t[r+2]:0,f=o>>2,l=(o&3)<<4|a>>4;let u=(a&15)<<2|c>>6,d=c&63;s||(d=64,h||(u=64)),i.push(n[f],n[l],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ix(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||a==null||c==null||l==null)throw new rx;const u=o<<2|a>>4;if(i.push(u),c!==64){const d=a<<4&240|c>>2;if(i.push(d),l!==64){const p=c<<6&192|l;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sx=function(t){const e=qb(t);return Kb.encodeByteArray(e,!0)},$l=function(t){return sx(t).replace(/\./g,"")},ox=function(t){try{return Kb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=()=>ax().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof Og>"u")return;const t=Og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ux=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ox(t[1]);return e&&JSON.parse(e)},Jb=()=>{try{return lx()||cx()||ux()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fx=t=>{var e,n;return(n=(e=Jb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hx=t=>{const e=fx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Zb=()=>{var t;return(t=Jb())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$l(JSON.stringify(n)),$l(JSON.stringify(h)),""].join(".")}function gx(){try{return typeof indexedDB=="object"}catch{return!1}}function mx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="FirebaseError";class go extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=vx,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qb.prototype.create)}}class Qb{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],h=o?_x(o,i):"Error",a=`${this.serviceName}: ${h} (${r}).`;return new go(r,a,i)}}function _x(t,e){return t.replace(yx,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const yx=/\{\$([^}]+)}/g;function Af(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],h=e[r];if(Eg(o)&&Eg(h)){if(!Af(o,h))return!1}else if(o!==h)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){return t&&t._delegate?t._delegate:t}class ca{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new dx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cx(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,h]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);i===a&&h.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wx(t){return t===Ar?void 0:t}function Cx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const Tx={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},kx=gt.INFO,Ox={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},Ex=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Ox[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xx{constructor(e){this.name=e,this._logLevel=kx,this._logHandler=Ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const Dx=(t,e)=>e.some(n=>t instanceof n);let xg,Dg;function Ax(){return xg||(xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Px(){return Dg||(Dg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e0=new WeakMap,Pf=new WeakMap,t0=new WeakMap,wu=new WeakMap,Lh=new WeakMap;function Mx(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",h)},o=()=>{n(mr(t.result)),r()},h=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&e0.set(n,t)}).catch(()=>{}),Lh.set(e,t),e}function Ix(t){if(Pf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",h),t.removeEventListener("abort",h)},o=()=>{n(),r()},h=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",h),t.addEventListener("abort",h)});Pf.set(t,e)}let Mf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rx(t){Mf=t(Mf)}function Fx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cu(this),e,...n);return t0.set(i,e.sort?e.sort():[e]),mr(i)}:Px().includes(t)?function(...e){return t.apply(Cu(this),e),mr(e0.get(this))}:function(...e){return mr(t.apply(Cu(this),e))}}function Lx(t){return typeof t=="function"?Fx(t):(t instanceof IDBTransaction&&Ix(t),Dx(t,Ax())?new Proxy(t,Mf):t)}function mr(t){if(t instanceof IDBRequest)return Mx(t);if(wu.has(t))return wu.get(t);const e=Lx(t);return e!==t&&(wu.set(t,e),Lh.set(e,t)),e}const Cu=t=>Lh.get(t);function Nx(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const h=indexedDB.open(t,e),a=mr(h);return i&&h.addEventListener("upgradeneeded",s=>{i(mr(h.result),s.oldVersion,s.newVersion,mr(h.transaction),s)}),n&&h.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),a.then(s=>{o&&s.addEventListener("close",()=>o()),r&&s.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jx=["get","getKey","getAll","getAllKeys","count"],Bx=["put","add","delete","clear"],Su=new Map;function Ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Su.get(e))return Su.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Bx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jx.includes(n)))return;const o=async function(h,...a){const s=this.transaction(h,r?"readwrite":"readonly");let c=s.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&s.done]))[0]};return Su.set(e,o),o}Rx(t=>({...t,get:(e,n,i)=>Ag(e,n)||t.get(e,n,i),has:(e,n)=>!!Ag(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Yx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const If="@firebase/app",Pg="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new xx("@firebase/app"),Wx="@firebase/app-compat",zx="@firebase/analytics-compat",Hx="@firebase/analytics",Vx="@firebase/app-check-compat",Xx="@firebase/app-check",$x="@firebase/auth",Gx="@firebase/auth-compat",qx="@firebase/database",Kx="@firebase/database-compat",Jx="@firebase/functions",Zx="@firebase/functions-compat",Qx="@firebase/installations",eD="@firebase/installations-compat",tD="@firebase/messaging",nD="@firebase/messaging-compat",iD="@firebase/performance",rD="@firebase/performance-compat",sD="@firebase/remote-config",oD="@firebase/remote-config-compat",aD="@firebase/storage",lD="@firebase/storage-compat",cD="@firebase/firestore",uD="@firebase/firestore-compat",fD="firebase",hD="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="[DEFAULT]",dD={[If]:"fire-core",[Wx]:"fire-core-compat",[Hx]:"fire-analytics",[zx]:"fire-analytics-compat",[Xx]:"fire-app-check",[Vx]:"fire-app-check-compat",[$x]:"fire-auth",[Gx]:"fire-auth-compat",[qx]:"fire-rtdb",[Kx]:"fire-rtdb-compat",[Jx]:"fire-fn",[Zx]:"fire-fn-compat",[Qx]:"fire-iid",[eD]:"fire-iid-compat",[tD]:"fire-fcm",[nD]:"fire-fcm-compat",[iD]:"fire-perf",[rD]:"fire-perf-compat",[sD]:"fire-rc",[oD]:"fire-rc-compat",[aD]:"fire-gcs",[lD]:"fire-gcs-compat",[cD]:"fire-fst",[uD]:"fire-fst-compat","fire-js":"fire-js",[fD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Map,pD=new Map,Ff=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ql(t){const e=t.name;if(Ff.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,t);for(const n of Gl.values())Mg(n,t);for(const n of pD.values())Mg(n,t);return!0}function gD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Qb("app","Firebase",mD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=hD;function n0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Rf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw vr.create("bad-app-name",{appName:String(r)});if(n||(n=Zb()),!n)throw vr.create("no-options");const o=Gl.get(r);if(o){if(Af(n,o.options)&&Af(i,o.config))return o;throw vr.create("duplicate-app",{appName:r})}const h=new Sx(r);for(const s of Ff.values())h.addComponent(s);const a=new vD(n,i,h);return Gl.set(r,a),a}function yD(t=Rf){const e=Gl.get(t);if(!e&&t===Rf&&Zb())return n0();if(!e)throw vr.create("no-app",{appName:t});return e}function Ys(t,e,n){var i;let r=(i=dD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const a=[`Unable to register library "${r}" with version "${e}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&a.push("and"),h&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}ql(new ca(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-heartbeat-database",wD=1,ua="firebase-heartbeat-store";let Tu=null;function i0(){return Tu||(Tu=Nx(bD,wD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Tu}async function CD(t){try{const n=(await i0()).transaction(ua),i=await n.objectStore(ua).get(r0(t));return await n.done,i}catch(e){if(e instanceof go)Qr.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function Ig(t,e){try{const i=(await i0()).transaction(ua,"readwrite");await i.objectStore(ua).put(e,r0(t)),await i.done}catch(n){if(n instanceof go)Qr.warn(n.message);else{const i=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(i.message)}}}function r0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=1024,TD=30*24*60*60*1e3;class kD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ED(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Rg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const a=new Date(h.date).valueOf();return Date.now()-a<=TD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rg(),{heartbeatsToSend:i,unsentEntries:r}=OD(this._heartbeatsCache.heartbeats),o=$l(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Rg(){return new Date().toISOString().substring(0,10)}function OD(t,e=SD){const n=[];let i=t.slice();for(const r of t){const o=n.find(h=>h.agent===r.agent);if(o){if(o.dates.push(r.date),Fg(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Fg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ED{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gx()?mx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Fg(t){return $l(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){ql(new ca("platform-logger",e=>new Ux(e),"PRIVATE")),ql(new ca("heartbeat",e=>new kD(e),"PRIVATE")),Ys(If,Pg,t),Ys(If,Pg,"esm2017"),Ys("fire-js","")}xD("");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s0="firebasestorage.googleapis.com",o0="storageBucket",DD=2*60*1e3,AD=10*60*1e3,PD=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends go{constructor(e,n,i=0){super(ku(e),`Firebase Storage: ${n} (${ku(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ku(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function ku(t){return"storage/"+t}function Nh(){const t="An unknown error occurred, please check the error payload for server response.";return new Mt(vt.UNKNOWN,t)}function MD(t){return new Mt(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ID(t){return new Mt(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt(vt.UNAUTHENTICATED,t)}function FD(){return new Mt(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LD(t){return new Mt(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function a0(){return new Mt(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l0(){return new Mt(vt.CANCELED,"User canceled the upload/download.")}function ND(t){return new Mt(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function jD(t){return new Mt(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function BD(){return new Mt(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o0+"' property when initializing the app?")}function c0(){return new Mt(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function UD(){return new Mt(vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function YD(){return new Mt(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WD(t){return new Mt(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lf(t){return new Mt(vt.INVALID_ARGUMENT,t)}function u0(){return new Mt(vt.APP_DELETED,"The Firebase app was deleted.")}function zD(t){return new Mt(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zo(t,e){return new Mt(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Io(t){throw new Mt(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(i.path==="")return i;throw jD(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const h="(/(.*))?$",a=new RegExp("^gs://"+r+h,"i"),s={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const f="v[A-Za-z0-9_]+",l=n.replace(/[.]/g,"\\."),u="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${f}/b/${r}/o${u}`,"i"),p={bucket:1,path:3},m=n===s0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${r}/${g}`,"i"),b=[{regex:a,indices:s,postModify:o},{regex:d,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<b.length;y++){const w=b[y],C=w.regex.exec(e);if(C){const T=C[w.indices.bucket];let O=C[w.indices.path];O||(O=""),i=new Rn(T,O),w.postModify(i);break}}if(i==null)throw ND(e);return i}}class HD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e,n){let i=1,r=null,o=null,h=!1,a=0;function s(){return a===2}let c=!1;function f(...g){c||(c=!0,e.apply(null,g))}function l(g){r=setTimeout(()=>{r=null,t(d,s())},g)}function u(){o&&clearTimeout(o)}function d(g,...v){if(c){u();return}if(g){u(),f.call(null,g,...v);return}if(s()||h){u(),f.call(null,g,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,l(b)}let p=!1;function m(g){p||(p=!0,u(),!c&&(r!==null?(g||(a=2),clearTimeout(r),l(0)):g||(a=1)))}return l(0),o=setTimeout(()=>{h=!0,m(!0)},n),m}function XD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){return t!==void 0}function GD(t){return typeof t=="function"}function qD(t){return typeof t=="object"&&!Array.isArray(t)}function _c(t){return typeof t=="string"||t instanceof String}function Lg(t){return jh()&&t instanceof Blob}function jh(){return typeof Blob<"u"}function Ng(t,e,n,i){if(i<e)throw Lf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Lf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function f0(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xr||(Xr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,i,r,o,h,a,s,c,f,l,u=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=h,this.callback_=a,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=l,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new tl(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const h=a=>{const s=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(s,c)};this.progressCallback_!==null&&o.addUploadProgressListener(h),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(h),this.pendingConnection_=null;const a=o.getErrorCode()===Xr.NO_ERROR,s=o.getStatus();if(!a||h0(s,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Xr.ABORT;i(!1,new tl(!1,null,f));return}const c=this.successCodes_.indexOf(s)!==-1;i(!0,new tl(c,o))})},n=(i,r)=>{const o=this.resolve_,h=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const s=this.callback_(a,a.getResponse());$D(s)?o(s):o()}catch(s){h(s)}else if(a!==null){const s=Nh();s.serverResponse=a.getErrorText(),this.errorCallback_?h(this.errorCallback_(a,s)):h(s)}else if(r.canceled){const s=this.appDelete_?u0():l0();h(s)}else{const s=a0();h(s)}};this.canceled_?n(!1,new tl(!1,null,!0)):this.backoffId_=VD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tl{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function JD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ZD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function eA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function tA(t,e,n,i,r,o,h=!0){const a=f0(t.urlParams),s=t.url+a,c=Object.assign({},t.headers);return QD(c,e),JD(c,n),ZD(c,o),eA(c,i),new KD(s,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iA(...t){const e=nA();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(jh())return new Blob(t);throw new Mt(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){if(typeof atob>"u")throw WD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ou{constructor(e,n){this.data=e,this.contentType=n||null}}function oA(t,e){switch(t){case vi.RAW:return new Ou(d0(e));case vi.BASE64:case vi.BASE64URL:return new Ou(p0(t,e));case vi.DATA_URL:return new Ou(lA(e),cA(e))}throw Nh()}function d0(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,h=t.charCodeAt(++n);i=65536|(o&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function aA(t){let e;try{e=decodeURIComponent(t)}catch{throw Zo(vi.DATA_URL,"Malformed data URL.")}return d0(e)}function p0(t,e){switch(t){case vi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Zo(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case vi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Zo(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=sA(e)}catch(r){throw r.message.includes("polyfill")?r:Zo(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class g0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zo(vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=uA(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function lA(t){const e=new g0(t);return e.base64?p0(vi.BASE64,e.rest):aA(e.rest)}function cA(t){return new g0(t).contentType}function uA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n){let i=0,r="";Lg(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Lg(this.data_)){const i=this.data_,r=rA(i,e,n);return r===null?null:new or(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new or(i,!0)}}static getBlob(...e){if(jh()){const n=e.map(i=>i instanceof or?i.data_:i);return new or(iA.apply(null,n))}else{const n=e.map(h=>_c(h)?oA(vi.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(h=>{for(let a=0;a<h.length;a++)r[o++]=h[a]}),new or(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){let e;try{e=JSON.parse(t)}catch{return null}return qD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hA(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function v0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){return e}class _n{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||dA}}let nl=null;function pA(t){return!_c(t)||t.length<2?t:v0(t)}function _0(){if(nl)return nl;const t=[];t.push(new _n("bucket")),t.push(new _n("generation")),t.push(new _n("metageneration")),t.push(new _n("name","fullPath",!0));function e(o,h){return pA(h)}const n=new _n("name");n.xform=e,t.push(n);function i(o,h){return h!==void 0?Number(h):h}const r=new _n("size");return r.xform=i,t.push(r),t.push(new _n("timeCreated")),t.push(new _n("updated")),t.push(new _n("md5Hash",null,!0)),t.push(new _n("cacheControl",null,!0)),t.push(new _n("contentDisposition",null,!0)),t.push(new _n("contentEncoding",null,!0)),t.push(new _n("contentLanguage",null,!0)),t.push(new _n("contentType",null,!0)),t.push(new _n("metadata","customMetadata",!0)),nl=t,nl}function gA(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Rn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function mA(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const h=n[o];i[h.local]=h.xform(i,e[h.server])}return gA(i,t),i}function y0(t,e,n){const i=m0(e);return i===null?null:mA(t,i,n)}function vA(t,e,n,i){const r=m0(e);if(r===null||!_c(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const h=encodeURIComponent;return o.split(",").map(c=>{const f=t.bucket,l=t.fullPath,u="/b/"+h(f)+"/o/"+h(l),d=xa(u,n,i),p=f0({alt:"media",token:c});return d+p})[0]}function b0(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class mo{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){if(!t)throw Nh()}function Bh(t,e){function n(i,r){const o=y0(t,r,e);return zi(o!==null),o}return n}function _A(t,e){function n(i,r){const o=y0(t,r,e);return zi(o!==null),vA(o,r,t.host,t._protocol)}return n}function Da(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=FD():r=RD():n.getStatus()===402?r=ID(t.bucket):n.getStatus()===403?r=LD(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function w0(t){const e=Da(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=MD(t.path)),o.serverResponse=r.serverResponse,o}return n}function yA(t,e,n){const i=e.fullServerUrl(),r=xa(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new mo(r,o,Bh(t,n),h);return a.errorHandler=w0(e),a}function bA(t,e,n){const i=e.fullServerUrl(),r=xa(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new mo(r,o,_A(t,n),h);return a.errorHandler=w0(e),a}function wA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C0(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=wA(null,e)),i}function CA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const s=a();h["Content-Type"]="multipart/related; boundary="+s;const c=C0(e,i,r),f=b0(c,n),l="--"+s+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+s+`\r
Content-Type: `+c.contentType+`\r
\r
`,u=`\r
--`+s+"--",d=or.getBlob(l,i,u);if(d===null)throw c0();const p={name:c.fullPath},m=xa(o,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,_=new mo(m,g,Bh(t,n),v);return _.urlParams=p,_.headers=h,_.body=d.uploadData(),_.errorHandler=Da(e),_}class Kl{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Uh(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{zi(!1)}return zi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function SA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h=C0(e,i,r),a={name:h.fullPath},s=xa(o,t.host,t._protocol),c="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},l=b0(h,n),u=t.maxUploadRetryTime;function d(m){Uh(m);let g;try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{zi(!1)}return zi(_c(g)),g}const p=new mo(s,c,d,u);return p.urlParams=a,p.headers=f,p.body=l,p.errorHandler=Da(e),p}function TA(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(c){const f=Uh(c,["active","final"]);let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{zi(!1)}l||zi(!1);const u=Number(l);return zi(!isNaN(u)),new Kl(u,i.size(),f==="final")}const h="POST",a=t.maxUploadRetryTime,s=new mo(n,h,o,a);return s.headers=r,s.errorHandler=Da(e),s}const jg=256*1024;function kA(t,e,n,i,r,o,h,a){const s=new Kl(0,0);if(h?(s.current=h.current,s.total=h.total):(s.current=0,s.total=i.size()),i.size()!==s.total)throw UD();const c=s.total-s.current;let f=c;r>0&&(f=Math.min(f,r));const l=s.current,u=l+f;let d="";f===0?d="finalize":c===f?d="upload, finalize":d="upload";const p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${s.current}`},m=i.slice(l,u);if(m===null)throw c0();function g(y,w){const C=Uh(y,["active","final"]),T=s.current+f,O=i.size();let D;return C==="final"?D=Bh(e,o)(y,w):D=null,new Kl(T,O,C==="final",D)}const v="POST",_=e.maxUploadRetryTime,b=new mo(n,v,g,_);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=Da(t),b}const kn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Eu(t){switch(t){case"running":case"pausing":case"canceling":return kn.RUNNING;case"paused":return kn.PAUSED;case"success":return kn.SUCCESS;case"canceled":return kn.CANCELED;case"error":return kn.ERROR;default:return kn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,i){if(GD(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class EA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Io("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Io("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Io("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Io("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Io("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xA extends EA{initXhr(){this.xhr_.responseType="text"}}function Ss(){return new xA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=_0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(h0(r.status,[]))if(o)r=a0();else{this.sleepTime=Math.max(this.sleepTime*2,PD),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(vt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=SA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ss,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=TA(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Ss,n,i);this._request=o,o.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=jg*this._chunkMultiplier,n=new Kl(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let h;try{h=kA(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(s){this._error=s,this._transition("error");return}const a=this._ref.storage._makeRequest(h,Ss,r,o,!1);this._request=a,a.getPromise().then(s=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(s.current),s.finalized?(this._metadata=s.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jg*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=yA(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Ss,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=CA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ss,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=l0(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Eu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new OA(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Eu(this._state)){case kn.SUCCESS:gs(this._resolve.bind(null,this.snapshot))();break;case kn.CANCELED:case kn.ERROR:const n=this._reject;gs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Eu(this._state)){case kn.RUNNING:case kn.PAUSED:e.next&&gs(e.next.bind(e,this.snapshot))();break;case kn.SUCCESS:e.complete&&gs(e.complete.bind(e))();break;case kn.CANCELED:case kn.ERROR:e.error&&gs(e.error.bind(e,this._error))();break;default:e.error&&gs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new es(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return v0(this._location.path)}get storage(){return this._service}get parent(){const e=fA(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new es(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zD(e)}}function AA(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new DA(t,new or(e),n)}function PA(t){t._throwIfRoot("getDownloadURL");const e=bA(t.storage,t._location,_0());return t.storage.makeRequestWithTokens(e,Ss).then(n=>{if(n===null)throw YD();return n})}function MA(t,e){const n=hA(t._location.path,e),i=new Rn(t._location.bucket,n);return new es(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){return/^[A-Za-z]+:\/\//.test(t)}function RA(t,e){return new es(t,e)}function S0(t,e){if(t instanceof Yh){const n=t;if(n._bucket==null)throw BD();const i=new es(n,n._bucket);return e!=null?S0(i,e):i}else return e!==void 0?MA(t,e):t}function FA(t,e){if(e&&IA(e)){if(t instanceof Yh)return RA(t,e);throw Lf("To use ref(service, url), the first argument must be a Storage instance.")}else return S0(t,e)}function Bg(t,e){const n=e==null?void 0:e[o0];return n==null?null:Rn.makeFromBucketSpec(n,t)}function LA(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:px(r,t.app.options.projectId))}class Yh{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=s0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DD,this._maxUploadRetryTime=AD,this._requests=new Set,r!=null?this._bucket=Rn.makeFromBucketSpec(r,this._host):this._bucket=Bg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=Bg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new es(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new HD(u0());{const h=tA(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Ug="@firebase/storage",Yg="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="storage";function NA(t,e,n){return t=vc(t),AA(t,e,n)}function jA(t){return t=vc(t),PA(t)}function BA(t,e){return t=vc(t),FA(t,e)}function UA(t=yD(),e){t=vc(t);const i=gD(t,T0).getImmediate({identifier:e}),r=hx("storage");return r&&YA(i,...r),i}function YA(t,e,n,i={}){LA(t,e,n,i)}function WA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Yh(n,i,r,e,_D)}function zA(){ql(new ca(T0,WA,"PUBLIC").setMultipleInstances(!0)),Ys(Ug,Yg,""),Ys(Ug,Yg,"esm2017")}zA();var HA="firebase",VA="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(HA,VA,"app");const XA={apiKey:"AIzaSyANQCJa2A3rxVz0g-iKS2DnZjDEEc4zcPQ",authDomain:"podiz-22471.firebaseapp.com",databaseURL:"podiz-22471.firebaseio.com",storageBucket:"podiz-22471.appspot.com"},$A=n0(XA),GA=UA($A);var k0={},Wh={exports:{}},O0=function(e,n){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(n,r)}},qA=O0,zh=Object.prototype.toString,Hh=function(t){return function(e){var n=zh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function rs(t){return t=t.toLowerCase(),function(n){return Hh(n)===t}}function Vh(t){return Array.isArray(t)}function Jl(t){return typeof t>"u"}function KA(t){return t!==null&&!Jl(t)&&t.constructor!==null&&!Jl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var E0=rs("ArrayBuffer");function JA(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&E0(t.buffer),e}function ZA(t){return typeof t=="string"}function QA(t){return typeof t=="number"}function x0(t){return t!==null&&typeof t=="object"}function wl(t){if(Hh(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var eP=rs("Date"),tP=rs("File"),nP=rs("Blob"),iP=rs("FileList");function Xh(t){return zh.call(t)==="[object Function]"}function rP(t){return x0(t)&&Xh(t.pipe)}function sP(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||zh.call(t)===e||Xh(t.toString)&&t.toString()===e)}var oP=rs("URLSearchParams");function aP(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function lP(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $h(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Vh(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Nf(){var t={};function e(r,o){wl(t[o])&&wl(r)?t[o]=Nf(t[o],r):wl(r)?t[o]=Nf({},r):Vh(r)?t[o]=r.slice():t[o]=r}for(var n=0,i=arguments.length;n<i;n++)$h(arguments[n],e);return t}function cP(t,e,n){return $h(e,function(r,o){n&&typeof r=="function"?t[o]=qA(r,n):t[o]=r}),t}function uP(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function fP(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function hP(t,e,n){var i,r,o,h={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],h[o]||(e[o]=t[o],h[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function dP(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function pP(t){if(!t)return null;var e=t.length;if(Jl(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var gP=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),an={isArray:Vh,isArrayBuffer:E0,isBuffer:KA,isFormData:sP,isArrayBufferView:JA,isString:ZA,isNumber:QA,isObject:x0,isPlainObject:wl,isUndefined:Jl,isDate:eP,isFile:tP,isBlob:nP,isFunction:Xh,isStream:rP,isURLSearchParams:oP,isStandardBrowserEnv:lP,forEach:$h,merge:Nf,extend:cP,trim:aP,stripBOM:uP,inherits:fP,toFlatObject:hP,kindOf:Hh,kindOfTest:rs,endsWith:dP,toArray:pP,isTypedArray:gP,isFileList:iP},ms=an;function Wg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var D0=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(ms.isURLSearchParams(n))r=n.toString();else{var o=[];ms.forEach(n,function(s,c){s===null||typeof s>"u"||(ms.isArray(s)?c=c+"[]":s=[s],ms.forEach(s,function(l){ms.isDate(l)?l=l.toISOString():ms.isObject(l)&&(l=JSON.stringify(l)),o.push(Wg(c)+"="+Wg(l))}))}),r=o.join("&")}if(r){var h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},mP=an;function yc(){this.handlers=[]}yc.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};yc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};yc.prototype.forEach=function(e){mP.forEach(this.handlers,function(i){i!==null&&e(i)})};var vP=yc,_P=an,yP=function(e,n){_P.forEach(e,function(r,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[o])})},A0=an;function Qs(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}A0.inherits(Qs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var P0=Qs.prototype,M0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){M0[t]={value:t}});Object.defineProperties(Qs,M0);Object.defineProperty(P0,"isAxiosError",{value:!0});Qs.from=function(t,e,n,i,r,o){var h=Object.create(P0);return A0.toFlatObject(t,h,function(s){return s!==Error.prototype}),Qs.call(h,t.message,e,n,i,r),h.name=t.name,o&&Object.assign(h,o),h};var vo=Qs,I0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jn=an;function bP(t,e){e=e||new FormData;var n=[];function i(o){return o===null?"":Jn.isDate(o)?o.toISOString():Jn.isArrayBuffer(o)||Jn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function r(o,h){if(Jn.isPlainObject(o)||Jn.isArray(o)){if(n.indexOf(o)!==-1)throw Error("Circular reference detected in "+h);n.push(o),Jn.forEach(o,function(s,c){if(!Jn.isUndefined(s)){var f=h?h+"."+c:c,l;if(s&&!h&&typeof s=="object"){if(Jn.endsWith(c,"{}"))s=JSON.stringify(s);else if(Jn.endsWith(c,"[]")&&(l=Jn.toArray(s))){l.forEach(function(u){!Jn.isUndefined(u)&&e.append(f,i(u))});return}}r(s,f)}}),n.pop()}else e.append(h,i(o))}return r(t),e}var R0=bP,xu,zg;function wP(){if(zg)return xu;zg=1;var t=vo;return xu=function(n,i,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},xu}var Du,Hg;function CP(){if(Hg)return Du;Hg=1;var t=an;return Du=t.isStandardBrowserEnv()?function(){return{write:function(i,r,o,h,a,s){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),t.isString(h)&&c.push("path="+h),t.isString(a)&&c.push("domain="+a),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Du}var SP=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},TP=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},kP=SP,OP=TP,F0=function(e,n){return e&&!kP(n)?OP(e,n):n},Au,Vg;function EP(){if(Vg)return Au;Vg=1;var t=an,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Au=function(i){var r={},o,h,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),o=t.trim(c.substr(0,a)).toLowerCase(),h=t.trim(c.substr(a+1)),o){if(r[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([h]):r[o]=r[o]?r[o]+", "+h:h}}),r},Au}var Pu,Xg;function xP(){if(Xg)return Pu;Xg=1;var t=an;return Pu=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function o(h){var a=h;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=o(window.location.href),function(a){var s=t.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),Pu}var Mu,$g;function bc(){if($g)return Mu;$g=1;var t=vo,e=an;function n(i){t.call(this,i??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Mu=n,Mu}var Iu,Gg;function DP(){return Gg||(Gg=1,Iu=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),Iu}var Ru,qg;function Kg(){if(qg)return Ru;qg=1;var t=an,e=wP(),n=CP(),i=D0,r=F0,o=EP(),h=xP(),a=I0,s=vo,c=bc(),f=DP();return Ru=function(u){return new Promise(function(p,m){var g=u.data,v=u.headers,_=u.responseType,b;function y(){u.cancelToken&&u.cancelToken.unsubscribe(b),u.signal&&u.signal.removeEventListener("abort",b)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var w=new XMLHttpRequest;if(u.auth){var C=u.auth.username||"",T=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";v.Authorization="Basic "+btoa(C+":"+T)}var O=r(u.baseURL,u.url);w.open(u.method.toUpperCase(),i(O,u.params,u.paramsSerializer),!0),w.timeout=u.timeout;function D(){if(w){var z="getAllResponseHeaders"in w?o(w.getAllResponseHeaders()):null,q=!_||_==="text"||_==="json"?w.responseText:w.response,G={data:q,status:w.status,statusText:w.statusText,headers:z,config:u,request:w};e(function(W){p(W),y()},function(W){m(W),y()},G),w=null}}if("onloadend"in w?w.onloadend=D:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(D)},w.onabort=function(){w&&(m(new s("Request aborted",s.ECONNABORTED,u,w)),w=null)},w.onerror=function(){m(new s("Network Error",s.ERR_NETWORK,u,w,w)),w=null},w.ontimeout=function(){var q=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",G=u.transitional||a;u.timeoutErrorMessage&&(q=u.timeoutErrorMessage),m(new s(q,G.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,u,w)),w=null},t.isStandardBrowserEnv()){var I=(u.withCredentials||h(O))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;I&&(v[u.xsrfHeaderName]=I)}"setRequestHeader"in w&&t.forEach(v,function(q,G){typeof g>"u"&&G.toLowerCase()==="content-type"?delete v[G]:w.setRequestHeader(G,q)}),t.isUndefined(u.withCredentials)||(w.withCredentials=!!u.withCredentials),_&&_!=="json"&&(w.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&w.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(b=function(z){w&&(m(!z||z&&z.type?new c:z),w.abort(),w=null)},u.cancelToken&&u.cancelToken.subscribe(b),u.signal&&(u.signal.aborted?b():u.signal.addEventListener("abort",b))),g||(g=null);var Y=f(O);if(Y&&["http","https","file"].indexOf(Y)===-1){m(new s("Unsupported protocol "+Y+":",s.ERR_BAD_REQUEST,u));return}w.send(g)})},Ru}var Fu,Jg;function AP(){return Jg||(Jg=1,Fu=null),Fu}var Zt=an,Zg=yP,Qg=vo,PP=I0,MP=R0,IP={"Content-Type":"application/x-www-form-urlencoded"};function em(t,e){!Zt.isUndefined(t)&&Zt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function RP(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Kg()),t}function FP(t,e,n){if(Zt.isString(t))try{return(e||JSON.parse)(t),Zt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var wc={transitional:PP,adapter:RP(),transformRequest:[function(e,n){if(Zg(n,"Accept"),Zg(n,"Content-Type"),Zt.isFormData(e)||Zt.isArrayBuffer(e)||Zt.isBuffer(e)||Zt.isStream(e)||Zt.isFile(e)||Zt.isBlob(e))return e;if(Zt.isArrayBufferView(e))return e.buffer;if(Zt.isURLSearchParams(e))return em(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Zt.isObject(e),r=n&&n["Content-Type"],o;if((o=Zt.isFileList(e))||i&&r==="multipart/form-data"){var h=this.env&&this.env.FormData;return MP(o?{"files[]":e}:e,h&&new h)}else if(i||r==="application/json")return em(n,"application/json"),FP(e);return e}],transformResponse:[function(e){var n=this.transitional||wc.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||r&&Zt.isString(e)&&e.length)try{return JSON.parse(e)}catch(h){if(o)throw h.name==="SyntaxError"?Qg.from(h,Qg.ERR_BAD_RESPONSE,this,null,this.response):h}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:AP()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zt.forEach(["delete","get","head"],function(e){wc.headers[e]={}});Zt.forEach(["post","put","patch"],function(e){wc.headers[e]=Zt.merge(IP)});var Gh=wc,LP=an,NP=Gh,jP=function(e,n,i){var r=this||NP;return LP.forEach(i,function(h){e=h.call(r,e,n)}),e},Lu,tm;function L0(){return tm||(tm=1,Lu=function(e){return!!(e&&e.__CANCEL__)}),Lu}var nm=an,Nu=jP,BP=L0(),UP=Gh,YP=bc();function ju(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new YP}var WP=function(e){ju(e),e.headers=e.headers||{},e.data=Nu.call(e,e.data,e.headers,e.transformRequest),e.headers=nm.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),nm.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||UP.adapter;return n(e).then(function(r){return ju(e),r.data=Nu.call(e,r.data,r.headers,e.transformResponse),r},function(r){return BP(r)||(ju(e),r&&r.response&&(r.response.data=Nu.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Pn=an,N0=function(e,n){n=n||{};var i={};function r(f,l){return Pn.isPlainObject(f)&&Pn.isPlainObject(l)?Pn.merge(f,l):Pn.isPlainObject(l)?Pn.merge({},l):Pn.isArray(l)?l.slice():l}function o(f){if(Pn.isUndefined(n[f])){if(!Pn.isUndefined(e[f]))return r(void 0,e[f])}else return r(e[f],n[f])}function h(f){if(!Pn.isUndefined(n[f]))return r(void 0,n[f])}function a(f){if(Pn.isUndefined(n[f])){if(!Pn.isUndefined(e[f]))return r(void 0,e[f])}else return r(void 0,n[f])}function s(f){if(f in n)return r(e[f],n[f]);if(f in e)return r(void 0,e[f])}var c={url:h,method:h,data:h,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return Pn.forEach(Object.keys(e).concat(Object.keys(n)),function(l){var u=c[l]||o,d=u(l);Pn.isUndefined(d)&&u!==s||(i[l]=d)}),i},Bu,im;function j0(){return im||(im=1,Bu={version:"0.27.2"}),Bu}var zP=j0().version,rr=vo,qh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){qh[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var rm={};qh.transitional=function(e,n,i){function r(o,h){return"[Axios v"+zP+"] Transitional option '"+o+"'"+h+(i?". "+i:"")}return function(o,h,a){if(e===!1)throw new rr(r(h," has been removed"+(n?" in "+n:"")),rr.ERR_DEPRECATED);return n&&!rm[h]&&(rm[h]=!0,console.warn(r(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,h,a):!0}};function HP(t,e,n){if(typeof t!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var o=i[r],h=e[o];if(h){var a=t[o],s=a===void 0||h(a,o,t);if(s!==!0)throw new rr("option "+o+" must be "+s,rr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new rr("Unknown option "+o,rr.ERR_BAD_OPTION)}}var VP={assertOptions:HP,validators:qh},B0=an,XP=D0,sm=vP,om=WP,Cc=N0,$P=F0,U0=VP,vs=U0.validators;function eo(t){this.defaults=t,this.interceptors={request:new sm,response:new sm}}eo.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Cc(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&U0.assertOptions(i,{silentJSONParsing:vs.transitional(vs.boolean),forcedJSONParsing:vs.transitional(vs.boolean),clarifyTimeoutError:vs.transitional(vs.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(o=o&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var h=[];this.interceptors.response.forEach(function(d){h.push(d.fulfilled,d.rejected)});var a;if(!o){var s=[om,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(h),a=Promise.resolve(n);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=n;r.length;){var f=r.shift(),l=r.shift();try{c=f(c)}catch(u){l(u);break}}try{a=om(c)}catch(u){return Promise.reject(u)}for(;h.length;)a=a.then(h.shift(),h.shift());return a};eo.prototype.getUri=function(e){e=Cc(this.defaults,e);var n=$P(e.baseURL,e.url);return XP(n,e.params,e.paramsSerializer)};B0.forEach(["delete","get","head","options"],function(e){eo.prototype[e]=function(n,i){return this.request(Cc(i||{},{method:e,url:n,data:(i||{}).data}))}});B0.forEach(["post","put","patch"],function(e){function n(i){return function(o,h,a){return this.request(Cc(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:h}))}}eo.prototype[e]=n(),eo.prototype[e+"Form"]=n(!0)});var GP=eo,Uu,am;function qP(){if(am)return Uu;am=1;var t=bc();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(h){i=h});var r=this;this.promise.then(function(o){if(r._listeners){var h,a=r._listeners.length;for(h=0;h<a;h++)r._listeners[h](o);r._listeners=null}}),this.promise.then=function(o){var h,a=new Promise(function(s){r.subscribe(s),h=s}).then(o);return a.cancel=function(){r.unsubscribe(h)},a},n(function(h){r.reason||(r.reason=new t(h),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(h){i=h});return{token:r,cancel:i}},Uu=e,Uu}var Yu,lm;function KP(){return lm||(lm=1,Yu=function(e){return function(i){return e.apply(null,i)}}),Yu}var Wu,cm;function JP(){if(cm)return Wu;cm=1;var t=an;return Wu=function(n){return t.isObject(n)&&n.isAxiosError===!0},Wu}var um=an,ZP=O0,Cl=GP,QP=N0,eM=Gh;function Y0(t){var e=new Cl(t),n=ZP(Cl.prototype.request,e);return um.extend(n,Cl.prototype,e),um.extend(n,e),n.create=function(r){return Y0(QP(t,r))},n}var Dn=Y0(eM);Dn.Axios=Cl;Dn.CanceledError=bc();Dn.CancelToken=qP();Dn.isCancel=L0();Dn.VERSION=j0().version;Dn.toFormData=R0;Dn.AxiosError=vo;Dn.Cancel=Dn.CanceledError;Dn.all=function(e){return Promise.all(e)};Dn.spread=KP();Dn.isAxiosError=JP();Wh.exports=Dn;Wh.exports.default=Dn;var tM=Wh.exports,W0=tM,jf={exports:{}},Sc={},Kh={},Tc={},Aa={},to={},$i={},_o={},no={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.ERROR_PACKET=yi.PACKET_TYPES_REVERSE=yi.PACKET_TYPES=void 0;const Oi=Object.create(null);yi.PACKET_TYPES=Oi;Oi.open="0";Oi.close="1";Oi.ping="2";Oi.pong="3";Oi.message="4";Oi.upgrade="5";Oi.noop="6";const z0=Object.create(null);yi.PACKET_TYPES_REVERSE=z0;Object.keys(Oi).forEach(t=>{z0[Oi[t]]=t});const nM={type:"error",data:"parser error"};yi.ERROR_PACKET=nM;Object.defineProperty(no,"__esModule",{value:!0});no.encodePacket=no.encodePacketToBinary=void 0;const iM=yi,H0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",V0=typeof ArrayBuffer=="function",X0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,$0=({type:t,data:e},n,i)=>H0&&e instanceof Blob?n?i(e):fm(e,i):V0&&(e instanceof ArrayBuffer||X0(e))?n?i(e):fm(new Blob([e]),i):i(iM.PACKET_TYPES[t]+(e||""));no.encodePacket=$0;const fm=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function hm(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let zu;function rM(t,e){if(H0&&t.data instanceof Blob)return t.data.arrayBuffer().then(hm).then(e);if(V0&&(t.data instanceof ArrayBuffer||X0(t.data)))return e(hm(t.data));$0(t,!1,n=>{zu||(zu=new TextEncoder),e(zu.encode(n))})}no.encodePacketToBinary=rM;var kc={},io={};Object.defineProperty(io,"__esModule",{value:!0});io.decode=io.encode=void 0;const Ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ds.length;t++)Bo[Ds.charCodeAt(t)]=t;const sM=t=>{let e=new Uint8Array(t),n,i=e.length,r="";for(n=0;n<i;n+=3)r+=Ds[e[n]>>2],r+=Ds[(e[n]&3)<<4|e[n+1]>>4],r+=Ds[(e[n+1]&15)<<2|e[n+2]>>6],r+=Ds[e[n+2]&63];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r};io.encode=sM;const oM=t=>{let e=t.length*.75,n=t.length,i,r=0,o,h,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),f=new Uint8Array(c);for(i=0;i<n;i+=4)o=Bo[t.charCodeAt(i)],h=Bo[t.charCodeAt(i+1)],a=Bo[t.charCodeAt(i+2)],s=Bo[t.charCodeAt(i+3)],f[r++]=o<<2|h>>4,f[r++]=(h&15)<<4|a>>2,f[r++]=(a&3)<<6|s&63;return c};io.decode=oM;Object.defineProperty(kc,"__esModule",{value:!0});kc.decodePacket=void 0;const il=yi,aM=io,lM=typeof ArrayBuffer=="function",cM=(t,e)=>{if(typeof t!="string")return{type:"message",data:G0(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:uM(t.substring(1),e)}:il.PACKET_TYPES_REVERSE[n]?t.length>1?{type:il.PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:il.PACKET_TYPES_REVERSE[n]}:il.ERROR_PACKET};kc.decodePacket=cM;const uM=(t,e)=>{if(lM){const n=(0,aM.decode)(t);return G0(n,e)}else return{base64:!0,data:t}},G0=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;const e=no;Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const n=kc;Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const i=yi,r="",o=(u,d)=>{const p=u.length,m=new Array(p);let g=0;u.forEach((v,_)=>{(0,e.encodePacket)(v,!1,b=>{m[_]=b,++g===p&&d(m.join(r))})})};t.encodePayload=o;const h=(u,d)=>{const p=u.split(r),m=[];for(let g=0;g<p.length;g++){const v=(0,n.decodePacket)(p[g],d);if(m.push(v),v.type==="error")break}return m};t.decodePayload=h;function a(){return new TransformStream({transform(u,d){(0,e.encodePacketToBinary)(u,p=>{const m=p.length;let g;if(m<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,m);else if(m<65536){g=new Uint8Array(3);const v=new DataView(g.buffer);v.setUint8(0,126),v.setUint16(1,m)}else{g=new Uint8Array(9);const v=new DataView(g.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(m))}u.data&&typeof u.data!="string"&&(g[0]|=128),d.enqueue(g),d.enqueue(p)})}})}t.createPacketEncoderStream=a;let s;function c(u){return u.reduce((d,p)=>d+p.length,0)}function f(u,d){if(u[0].length===d)return u.shift();const p=new Uint8Array(d);let m=0;for(let g=0;g<d;g++)p[g]=u[0][m++],m===u[0].length&&(u.shift(),m=0);return u.length&&m<u[0].length&&(u[0]=u[0].slice(m)),p}function l(u,d){s||(s=new TextDecoder);const p=[];let m=0,g=-1,v=!1;return new TransformStream({transform(_,b){for(p.push(_);;){if(m===0){if(c(p)<1)break;const y=f(p,1);v=(y[0]&128)===128,g=y[0]&127,g<126?m=3:g===126?m=1:m=2}else if(m===1){if(c(p)<2)break;const y=f(p,2);g=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),m=3}else if(m===2){if(c(p)<8)break;const y=f(p,8),w=new DataView(y.buffer,y.byteOffset,y.length),C=w.getUint32(0);if(C>Math.pow(2,21)-1){b.enqueue(i.ERROR_PACKET);break}g=C*Math.pow(2,32)+w.getUint32(4),m=3}else{if(c(p)<g)break;const y=f(p,g);b.enqueue((0,n.decodePacket)(v?y:s.decode(y),d)),m=0}if(g===0||g>u){b.enqueue(i.ERROR_PACKET);break}}}})}t.createPacketDecoderStream=l,t.protocol=4})(_o);function yn(t){if(t)return fM(t)}function fM(t){for(var e in yn.prototype)t[e]=yn.prototype[e];return t}yn.prototype.on=yn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};yn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};yn.prototype.off=yn.prototype.removeListener=yn.prototype.removeAllListeners=yn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};yn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};yn.prototype.emitReserved=yn.prototype.emit;yn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};yn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const hM=Object.freeze(Object.defineProperty({__proto__:null,Emitter:yn},Symbol.toStringTag,{value:"Module"})),yo=jy(hM);var $n={},ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.globalThisShim=void 0;ss.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty($n,"__esModule",{value:!0});$n.byteLength=$n.installTimerFunctions=$n.pick=void 0;const sr=ss;function dM(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}$n.pick=dM;const pM=sr.globalThisShim.setTimeout,gM=sr.globalThisShim.clearTimeout;function mM(t,e){e.useNativeTimers?(t.setTimeoutFn=pM.bind(sr.globalThisShim),t.clearTimeoutFn=gM.bind(sr.globalThisShim)):(t.setTimeoutFn=sr.globalThisShim.setTimeout.bind(sr.globalThisShim),t.clearTimeoutFn=sr.globalThisShim.clearTimeout.bind(sr.globalThisShim))}$n.installTimerFunctions=mM;const vM=1.33;function _M(t){return typeof t=="string"?yM(t):Math.ceil((t.byteLength||t.size)*vM)}$n.byteLength=_M;function yM(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}var Bf={exports:{}},Hu,dm;function bM(){if(dm)return Hu;dm=1;var t=1e3,e=t*60,n=e*60,i=n*24,r=i*7,o=i*365.25;Hu=function(f,l){l=l||{};var u=typeof f;if(u==="string"&&f.length>0)return h(f);if(u==="number"&&isFinite(f))return l.long?s(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function h(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var u=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*r;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*e;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function a(f){var l=Math.abs(f);return l>=i?Math.round(f/i)+"d":l>=n?Math.round(f/n)+"h":l>=e?Math.round(f/e)+"m":l>=t?Math.round(f/t)+"s":f+"ms"}function s(f){var l=Math.abs(f);return l>=i?c(f,l,i,"day"):l>=n?c(f,l,n,"hour"):l>=e?c(f,l,e,"minute"):l>=t?c(f,l,t,"second"):f+" ms"}function c(f,l,u,d){var p=l>=u*1.5;return Math.round(f/u)+" "+d+(p?"s":"")}return Hu}function wM(t){n.debug=n,n.default=n,n.coerce=s,n.disable=o,n.enable=r,n.enabled=h,n.humanize=bM(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let l=0;for(let u=0;u<f.length;u++)l=(l<<5)-l+f.charCodeAt(u),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=e;function n(f){let l,u=null,d,p;function m(...g){if(!m.enabled)return;const v=m,_=Number(new Date),b=_-(l||_);v.diff=b,v.prev=l,v.curr=_,l=_,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";y++;const O=n.formatters[T];if(typeof O=="function"){const D=g[y];C=O.call(v,D),g.splice(y,1),y--}return C}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return m.namespace=f,m.useColors=n.useColors(),m.color=n.selectColor(f),m.extend=i,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(f)),p),set:g=>{u=g}}),typeof n.init=="function"&&n.init(m),m}function i(f,l){const u=n(this.namespace+(typeof l>"u"?":":l)+f);return u.log=this.log,u}function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let l;const u=(typeof f=="string"?f:"").split(/[\s,]+/),d=u.length;for(l=0;l<d;l++)u[l]&&(f=u[l].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...n.names.map(a),...n.skips.map(a).map(l=>"-"+l)].join(",");return n.enable(""),f}function h(f){if(f[f.length-1]==="*")return!0;let l,u;for(l=0,u=n.skips.length;l<u;l++)if(n.skips[l].test(f))return!1;for(l=0,u=n.names.length;l<u;l++)if(n.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function s(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var CM=wM;(function(t,e){var n={};e.formatArgs=r,e.save=o,e.load=h,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(u=l))}),c.splice(u,0,f)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function h(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=CM(e);const{formatters:s}=t.exports;s.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(Bf,Bf.exports);var Ai=Bf.exports,ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.decode=ts.encode=void 0;function SM(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}ts.encode=SM;function TM(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}ts.decode=TM;var kM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($i,"__esModule",{value:!0});$i.Transport=$i.TransportError=void 0;const OM=_o,EM=yo,xM=$n,DM=kM(Ai),AM=ts,PM=(0,DM.default)("engine.io-client:transport");class q0 extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}$i.TransportError=q0;class MM extends EM.Emitter{constructor(e){super(),this.writable=!1,(0,xM.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new q0(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):PM("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=(0,OM.decodePacket)(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=(0,AM.encode)(e);return n.length?"?"+n:""}}$i.Transport=MM;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.yeast=Hi.decode=Hi.encode=void 0;const K0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Zl=64,J0={};let pm=0,hr=0,gm;function Uf(t){let e="";do e=K0[t%Zl]+e,t=Math.floor(t/Zl);while(t>0);return e}Hi.encode=Uf;function IM(t){let e=0;for(hr=0;hr<t.length;hr++)e=e*Zl+J0[t.charAt(hr)];return e}Hi.decode=IM;function RM(){const t=Uf(+new Date);return t!==gm?(pm=0,gm=t):t+"."+Uf(pm++)}Hi.yeast=RM;for(;hr<Zl;hr++)J0[K0[hr]]=hr;var ro={},Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.hasCORS=void 0;let Z0=!1;try{Z0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}Oc.hasCORS=Z0;Object.defineProperty(ro,"__esModule",{value:!0});ro.createCookieJar=ro.XHR=void 0;const FM=Oc,LM=ss;function NM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||FM.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new LM.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}ro.XHR=NM;function jM(){}ro.createCookieJar=jM;var BM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});to.Request=to.Polling=void 0;const UM=$i,YM=BM(Ai),WM=Hi,mm=_o,Jh=ro,zM=yo,vm=$n,HM=ss,Cn=(0,YM.default)("engine.io-client:polling");function VM(){}const XM=function(){return new Jh.XHR({xdomain:!1}).responseType!=null}();class $M extends UM.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const n=e&&e.forceBase64;this.supportsBinary=XM&&!n,this.opts.withCredentials&&(this.cookieJar=(0,Jh.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{Cn("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(Cn("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){Cn("pre-pause polling complete"),--i||n()})),this.writable||(Cn("we are currently writing - waiting to pause"),i++,this.once("drain",function(){Cn("pre-pause writing complete"),--i||n()}))}else n()}poll(){Cn("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){Cn("polling got data %s",e);const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};(0,mm.decodePayload)(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():Cn('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{Cn("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Cn("transport open - closing"),e()):(Cn("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,mm.encodePayload)(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=(0,WM.yeast)()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ri(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){Cn("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}to.Polling=$M;class ri extends zM.Emitter{constructor(e,n){super(),(0,vm.installTimerFunctions)(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=(0,vm.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new Jh.XHR(n);try{Cn("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},Cn("xhr data %s",this.data),i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=ri.requestsCount++,ri.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=VM,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ri.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}to.Request=ri;ri.requestsCount=0;ri.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_m);else if(typeof addEventListener=="function"){const t="onpagehide"in HM.globalThisShim?"pagehide":"unload";addEventListener(t,_m,!1)}}function _m(){for(let t in ri.requests)ri.requests.hasOwnProperty(t)&&ri.requests[t].abort()}var Ec={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.defaultBinaryType=Fn.usingBrowserWebSocket=Fn.WebSocket=Fn.nextTick=void 0;const ym=ss;Fn.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0);Fn.WebSocket=ym.globalThisShim.WebSocket||ym.globalThisShim.MozWebSocket;Fn.usingBrowserWebSocket=!0;Fn.defaultBinaryType="arraybuffer";var GM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.WS=void 0;const qM=$i,KM=Hi,JM=$n,er=Fn,ZM=GM(Ai),QM=_o,eI=(0,ZM.default)("engine.io-client:websocket"),bm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tI extends qM.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=bm?{}:(0,JM.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=er.usingBrowserWebSocket&&!bm?n?new er.WebSocket(e,n):new er.WebSocket(e):new er.WebSocket(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;(0,QM.encodePacket)(i,this.supportsBinary,o=>{const h={};er.usingBrowserWebSocket||(i.options&&(h.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(h.compress=!1));try{er.usingBrowserWebSocket?this.ws.send(o):this.ws.send(o,h)}catch{eI("websocket closed before onclose event")}r&&(0,er.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=(0,KM.yeast)()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!er.WebSocket}}Ec.WS=tI;var xc={},nI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xc,"__esModule",{value:!0});xc.WT=void 0;const iI=$i,rI=Fn,wm=_o,sI=nI(Ai),Ro=(0,sI.default)("engine.io-client:webtransport");class oI extends iI.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{Ro("transport closed gracefully"),this.onClose()}).catch(e=>{Ro("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=(0,wm.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=(0,wm.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const o=()=>{i.read().then(({done:a,value:s})=>{if(a){Ro("session is closed");return}Ro("received chunk: %o",s),this.onPacket(s),o()}).catch(a=>{Ro("an error occurred while reading: %s",a)})};o();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this.writer.write(h).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this.writer.write(i).then(()=>{r&&(0,rI.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}xc.WT=oI;Object.defineProperty(Aa,"__esModule",{value:!0});Aa.transports=void 0;const aI=to,lI=Ec,cI=xc;Aa.transports={websocket:lI.WS,webtransport:cI.WT,polling:aI.Polling};var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.parse=void 0;const uI=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hI(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=uI.exec(t||""),o={},h=14;for(;h--;)o[fI[h]]=r[h]||"";return n!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=dI(o,o.path),o.queryKey=pI(o,o.query),o}Pa.parse=hI;function dI(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function pI(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(n[r]=o)}),n}var gI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Socket=void 0;const mI=Aa,Cm=$n,vI=ts,Sm=Pa,_I=gI(Ai),yI=yo,Q0=_o,bI=Fn,Et=(0,_I.default)("engine.io-client:socket");let ew=class Ts extends yI.Emitter{constructor(e,n={}){super(),this.binaryType=bI.defaultBinaryType,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=(0,Sm.parse)(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=(0,Sm.parse)(n.host).host),(0,Cm.installTimerFunctions)(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,vI.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){Et('creating transport "%s"',e);const n=Object.assign({},this.opts.query);n.EIO=Q0.protocol,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return Et("options: %j",i),new mI.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Ts.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(n){Et("error while creating transport: %s",n),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){Et("setting transport %s",e.name),this.transport&&(Et("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){Et('probing transport "%s"',e);let n=this.createTransport(e),i=!1;Ts.priorWebsocketSuccess=!1;const r=()=>{i||(Et('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",l=>{if(!i)if(l.type==="pong"&&l.data==="probe"){if(Et('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ts.priorWebsocketSuccess=n.name==="websocket",Et('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(Et("changing transport and sending upgrade packet"),f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{Et('probe transport "%s" failed',e);const u=new Error("probe error");u.transport=n.name,this.emitReserved("upgradeError",u)}}))};function o(){i||(i=!0,f(),n.close(),n=null)}const h=l=>{const u=new Error("probe error: "+l);u.transport=n.name,o(),Et('probe transport "%s" failed because of error: %s',e,l),this.emitReserved("upgradeError",u)};function a(){h("transport closed")}function s(){h("socket closed")}function c(l){n&&l.name!==n.name&&(Et('"%s" works - aborting "%s"',l.name,n.name),o())}const f=()=>{n.removeListener("open",r),n.removeListener("error",h),n.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};n.once("open",r),n.once("error",h),n.once("close",a),this.once("close",s),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(Et("socket open"),this.readyState="open",Ts.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){Et("starting upgrade probes");let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Et('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else Et('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();Et("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=(0,Cm.byteLength)(r)),i>0&&n>this.maxPayload)return Et("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);n+=2}return Et("payload size is %d (max: %d)",n,this.maxPayload),this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:n,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),Et("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Et("socket error %j",e),Ts.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Et('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const r=e.length;for(;i<r;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};Tc.Socket=ew;ew.protocol=Q0.protocol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.Socket=void 0;const e=Tc;Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return e.Socket}}),t.protocol=e.Socket.protocol;var n=$i;Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Aa;Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var r=$n;Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return r.installTimerFunctions}});var o=Pa;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}});var h=Fn;Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return h.nextTick}})})(Kh);var wI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.url=void 0;const CI=Kh,SI=wI(Ai),Tm=SI.default("socket.io-client:url");function TI(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(Tm("protocol-less url %s",t),typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),Tm("parse %s",t),i=CI.parse(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}Sc.url=TI;var Dc={},Ma={},Ac={},so={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.hasBinary=ns.isBinary=void 0;const kI=typeof ArrayBuffer=="function",OI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,tw=Object.prototype.toString,EI=typeof Blob=="function"||typeof Blob<"u"&&tw.call(Blob)==="[object BlobConstructor]",xI=typeof File=="function"||typeof File<"u"&&tw.call(File)==="[object FileConstructor]";function nw(t){return kI&&(t instanceof ArrayBuffer||OI(t))||EI&&t instanceof Blob||xI&&t instanceof File}ns.isBinary=nw;function Sl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Sl(t[n]))return!0;return!1}if(nw(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Sl(t[n]))return!0;return!1}ns.hasBinary=Sl;Object.defineProperty(so,"__esModule",{value:!0});so.reconstructPacket=so.deconstructPacket=void 0;const DI=ns;function AI(t){const e=[],n=t.data,i=t;return i.data=Yf(n,e),i.attachments=e.length,{packet:i,buffers:e}}so.deconstructPacket=AI;function Yf(t,e){if(!t)return t;if((0,DI.isBinary)(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=Yf(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Yf(t[i],e));return n}return t}function PI(t,e){return t.data=Wf(t.data,e),delete t.attachments,t}so.reconstructPacket=PI;function Wf(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Wf(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Wf(t[n],e));return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const e=yo,n=so,i=ns,o=(0,Ai.default)("socket.io-parser"),h=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];t.protocol=5;var a;(function(u){u[u.CONNECT=0]="CONNECT",u[u.DISCONNECT=1]="DISCONNECT",u[u.EVENT=2]="EVENT",u[u.ACK=3]="ACK",u[u.CONNECT_ERROR=4]="CONNECT_ERROR",u[u.BINARY_EVENT=5]="BINARY_EVENT",u[u.BINARY_ACK=6]="BINARY_ACK"})(a=t.PacketType||(t.PacketType={}));class s{constructor(d){this.replacer=d}encode(d){return o("encoding packet %j",d),(d.type===a.EVENT||d.type===a.ACK)&&(0,i.hasBinary)(d)?this.encodeAsBinary({type:d.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:d.nsp,data:d.data,id:d.id}):[this.encodeAsString(d)]}encodeAsString(d){let p=""+d.type;return(d.type===a.BINARY_EVENT||d.type===a.BINARY_ACK)&&(p+=d.attachments+"-"),d.nsp&&d.nsp!=="/"&&(p+=d.nsp+","),d.id!=null&&(p+=d.id),d.data!=null&&(p+=JSON.stringify(d.data,this.replacer)),o("encoded %j as %s",d,p),p}encodeAsBinary(d){const p=(0,n.deconstructPacket)(d),m=this.encodeAsString(p.packet),g=p.buffers;return g.unshift(m),g}}t.Encoder=s;function c(u){return Object.prototype.toString.call(u)==="[object Object]"}class f extends e.Emitter{constructor(d){super(),this.reviver=d}add(d){let p;if(typeof d=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(d);const m=p.type===a.BINARY_EVENT;m||p.type===a.BINARY_ACK?(p.type=m?a.EVENT:a.ACK,this.reconstructor=new l(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,i.isBinary)(d)||d.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(d),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+d)}decodeString(d){let p=0;const m={type:Number(d.charAt(0))};if(a[m.type]===void 0)throw new Error("unknown packet type "+m.type);if(m.type===a.BINARY_EVENT||m.type===a.BINARY_ACK){const v=p+1;for(;d.charAt(++p)!=="-"&&p!=d.length;);const _=d.substring(v,p);if(_!=Number(_)||d.charAt(p)!=="-")throw new Error("Illegal attachments");m.attachments=Number(_)}if(d.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(d.charAt(p)===","||p===d.length););m.nsp=d.substring(v,p)}else m.nsp="/";const g=d.charAt(p+1);if(g!==""&&Number(g)==g){const v=p+1;for(;++p;){const _=d.charAt(p);if(_==null||Number(_)!=_){--p;break}if(p===d.length)break}m.id=Number(d.substring(v,p+1))}if(d.charAt(++p)){const v=this.tryParse(d.substr(p));if(f.isPayloadValid(m.type,v))m.data=v;else throw new Error("invalid payload")}return o("decoded %s as %j",d,m),m}tryParse(d){try{return JSON.parse(d,this.reviver)}catch{return!1}}static isPayloadValid(d,p){switch(d){case a.CONNECT:return c(p);case a.DISCONNECT:return p===void 0;case a.CONNECT_ERROR:return typeof p=="string"||c(p);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&h.indexOf(p[0])===-1);case a.ACK:case a.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=f;class l{constructor(d){this.packet=d,this.buffers=[],this.reconPack=d}takeBinaryData(d){if(this.buffers.push(d),this.buffers.length===this.reconPack.attachments){const p=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(Ac);var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.on=void 0;function MI(t,e,n){return t.on(e,n),function(){t.off(e,n)}}Ia.on=MI;var II=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.Socket=void 0;const Zn=Ac,rl=Ia,RI=yo,FI=II(Ai),$t=FI.default("socket.io-client:socket"),LI=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class NI extends RI.Emitter{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[rl.on(e,"open",this.onopen.bind(this)),rl.on(e,"packet",this.onpacket.bind(this)),rl.on(e,"error",this.onerror.bind(this)),rl.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(LI.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Zn.PacketType.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++;$t("emitting packet with ack id %d",h);const a=n.pop();this._registerAckCallback(h,a),i.id=h}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?$t("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&($t("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));$t("event with ack id %d has timed out after %d ms",e,r),n.call(this,new Error("operation has timed out"))},r),h=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};h.withError=!0,this.acks[e]=h}emitWithAck(e,...n){return new Promise((i,r)=>{const o=(h,a)=>h?r(h):i(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&($t("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),n&&n(r)):($t("packet [%d] was successfully sent",i.id),this._queue.shift(),n&&n(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if($t("draining queue"),!this.connected||this._queue.length===0)return;const n=this._queue[0];if(n.pending&&!e){$t("packet [%d] has already been sent and is waiting for an ack",n.id);return}n.pending=!0,n.tryCount++,$t("sending packet [%d] (try n°%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){$t("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Zn.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){$t("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Zn.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Zn.PacketType.EVENT:case Zn.PacketType.BINARY_EVENT:this.onevent(e);break;case Zn.PacketType.ACK:case Zn.PacketType.BINARY_ACK:this.onack(e);break;case Zn.PacketType.DISCONNECT:this.ondisconnect();break;case Zn.PacketType.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];$t("emitting event %j",n),e.id!=null&&($t("attaching ack callback to event"),n.push(this.ack(e.id))),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,$t("sending ack %j",r),n.packet({type:Zn.PacketType.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];if(typeof n!="function"){$t("bad ack %s",e.id);return}delete this.acks[e.id],$t("calling ack %s with %j",e.id,e.data),n.withError&&e.data.unshift(null),n.apply(this,e.data)}onconnect(e,n){$t("socket connected with id %s",e),this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){$t("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&($t("performing disconnect (%s)",this.nsp),this.packet({type:Zn.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}Ma.Socket=NI;var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.Backoff=void 0;function bo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Pc.Backoff=bo;bo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};bo.prototype.reset=function(){this.attempts=0};bo.prototype.setMin=function(t){this.ms=t};bo.prototype.setMax=function(t){this.max=t};bo.prototype.setJitter=function(t){this.jitter=t};var jI=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),BI=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UI=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&jI(e,t,n);return BI(e,t),e},YI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.Manager=void 0;const Vu=Kh,WI=Ma,zI=UI(Ac),Or=Ia,HI=Pc,VI=yo,XI=YI(Ai),nn=XI.default("socket.io-client:manager");class $I extends VI.Emitter{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Vu.installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new HI.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||zI;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(nn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;nn("opening %s",this.uri),this.engine=new Vu.Socket(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Or.on(n,"open",function(){i.onopen(),e&&e()}),o=a=>{nn("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},h=Or.on(n,"error",o);if(this._timeout!==!1){const a=this._timeout;nn("connect attempt will timeout after %d",a);const s=this.setTimeoutFn(()=>{nn("connect attempt timed out after %d",a),r(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(h),this}connect(e){return this.open(e)}onopen(){nn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Or.on(e,"ping",this.onping.bind(this)),Or.on(e,"data",this.ondata.bind(this)),Or.on(e,"error",this.onerror.bind(this)),Or.on(e,"close",this.onclose.bind(this)),Or.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Vu.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){nn("error",e),this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new WI.Socket(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active){nn("socket %s is still active, skipping close",i);return}this._close()}_packet(e){nn("writing packet %j",e);const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){nn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){nn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){nn("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)nn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();nn("will wait %dms before reconnect attempt",n),this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(nn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(nn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(nn("reconnect success"),e.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}Dc.Manager=$I;(function(t,e){var n=Ne&&Ne.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const i=Sc,r=Dc;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});const o=Ma;Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(Ai).default("socket.io-client"),s={};function c(l,u){typeof l=="object"&&(u=l,l=void 0),u=u||{};const d=i.url(l,u.path||"/socket.io"),p=d.source,m=d.id,g=d.path,v=s[m]&&g in s[m].nsps,_=u.forceNew||u["force new connection"]||u.multiplex===!1||v;let b;return _?(a("ignoring socket cache for %s",p),b=new r.Manager(p,u)):(s[m]||(a("new io instance for %s",p),s[m]=new r.Manager(p,u)),b=s[m]),d.query&&!u.query&&(u.query=d.queryKey),b.socket(d.path,u)}e.io=c,e.connect=c,e.default=c,Object.assign(c,{Manager:r.Manager,Socket:o.Socket,io:c,connect:c});var f=Ac;Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return f.protocol}}),t.exports=c})(jf,jf.exports);var GI=jf.exports,Zh={},Er=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(Zh,"__esModule",{value:!0});class qI{constructor(e){this.cloudConvert=e}get(e,n=null){return Er(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{params:n||{}})).data.data})}wait(e){return Er(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}all(e=null){return Er(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Er(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e,{maxBodyLength:1/0})).data.data})}delete(e){return Er(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`jobs/${e}`)})}subscribeEvent(e,n,i){return Er(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Er(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}.tasks`,`task.${n}`,i)})}getExportUrls(e){return e.tasks.filter(n=>n.operation==="export/url"&&n.status==="finished").flatMap(n=>{var i,r;return(r=(i=n.result)===null||i===void 0?void 0:i.files)!==null&&r!==void 0?r:[]})}}Zh.default=qI;var Qh={},KI=typeof self=="object"?self.FormData:window.FormData,tr=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})},iw=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qh,"__esModule",{value:!0});const JI=iw(KI),ZI=iw(W0),km=Ur;class QI{constructor(e){this.cloudConvert=e}get(e,n=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{params:n||{}})).data.data})}wait(e){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}cancel(e){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(`tasks/${e}/cancel`)).data.data})}all(e=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,n=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,n)).data.data})}delete(e){return tr(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`tasks/${e}`)})}upload(e,n,i=null,r=null){return tr(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const o=new JI.default;for(const a in e.result.form.parameters)o.append(a,e.result.form.parameters[a]);const h={};return i&&(h.filename=i),r?h.knownLength=r:n instanceof km.ReadStream&&(h.knownLength=(0,km.statSync)(n.path).size),o.append("file",n,h),yield ZI.default.post(e.result.form.url,o,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign(Object.assign({},o.hasKnownLength()?{"Content-Length":o.getLengthSync()}:{}),o.getHeaders())})})}subscribeEvent(e,n,i){return tr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-task.${e}`,`task.${n}`,i)})}}Qh.default=QI;var ed={},Xu=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(ed,"__esModule",{value:!0});class eR{constructor(e){this.cloudConvert=e}me(){return Xu(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,n,i){return Xu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.jobs`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Xu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.tasks`,`task.${n}`,i)})}}ed.default=eR;var td={},tR=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),nR=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iR=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&tR(e,t,n);return nR(e,t),e};Object.defineProperty(td,"__esModule",{value:!0});const rR=iR(Ur);class sR{verify(e,n,i){const o=rR.createHmac("sha256",i).update(Buffer.from(e,"utf-8")).digest("hex");return n===o}}td.default=sR;const oR="cloudconvert",aR="2.3.6",lR="MIT",cR="Official Node.js SDK for the CloudConvert API",uR="https://github.com/cloudconvert/cloudconvert-node",fR="Josias Montag <josias@montag.info>",hR="built/lib/index.js",dR="built/lib/index.d.ts",pR="built/lib/CloudConvert.js",gR={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},mR={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},vR={axios:"^0.27.2","form-data":"^4.0.0","socket.io-client":"^4.6.1"},_R={"@types/node":"^18.14.0","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.53.0",chai:"^4.3.7",eslint:"^8.34.0","eslint-config-prettier":"^8.6.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^4.2.1",esm:"^3.2.25",mocha:"^8.4.0",nock:"^13.3.0",prettier:"^2.8.4",typescript:"^4.9.5"},yR={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."},bR={name:oR,version:aR,license:lR,description:cR,homepage:uR,author:fR,main:hR,types:dR,module:pR,repository:gR,bugs:mR,dependencies:vR,devDependencies:_R,scripts:yR};var nd={},wR=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),CR=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SR=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&wR(e,t,n);return CR(e,t),e};Object.defineProperty(nd,"__esModule",{value:!0});const TR=SR(Ur);class kR{sign(e,n,i,r){const o=JSON.stringify(i),a=Buffer.from(o||"").toString("base64").replace("+","-").replace("/","_").replace(/=+$/,"");let s=`${e}?job=${a}`;r&&(s+=`&cache_key=${r}`);const f=TR.createHmac("sha256",n).update(Buffer.from(s,"utf-8")).digest("hex");return s+=`&s=${f}`,s}}nd.default=kR;var os=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(k0,"__esModule",{value:!0});const OR=os(W0),ER=os(GI),xR=os(Zh),DR=os(Qh),AR=os(ed),PR=os(td),MR=bR,IR=os(nd);class RR{constructor(e,n=!1,i=null){this.apiKey=e,this.useSandbox=n,this.region=i,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=OR.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":`https://${this.region?this.region+".":""}api.cloudconvert.com/v2/`,headers:{Authorization:`Bearer ${this.apiKey}`,"User-Agent":`cloudconvert-node/v${MR.version} (https://github.com/cloudconvert/cloudconvert-node)`}})}createResources(){this.tasks=new DR.default(this),this.jobs=new xR.default(this),this.users=new AR.default(this),this.webhooks=new PR.default,this.signedUrls=new IR.default}subscribe(e,n,i){var r,o;this.socket||(this.socket=ER.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),!((r=this.subscribedChannels)===null||r===void 0)&&r.get(e)||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:`Bearer ${this.apiKey}`}}}),(o=this.subscribedChannels)===null||o===void 0||o.set(e,!0)),this.socket.on(n,function(h,a){e===h&&i(a)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var FR=k0.default=RR;const jr=async(t,e,n,i)=>{const o=await(await fetch(t)).blob();return rw(o,e,n,i)},rw=(t,e,n,i,r="")=>new Promise((o,h)=>{const a=BA(GA,e),s=NA(a,t,i);s.on("state_changed",c=>{const f=c.bytesTransferred/c.totalBytes*100;n({progress:f,uploadMsg:r})},c=>{n({error:c,uploadMsg:r})},()=>{jA(s.snapshot.ref).then(c=>{const f={url:c,metadata:s.snapshot.metadata,fileName:s.snapshot.metadata.fullPath,extension:i.extension,size:s.snapshot.totalBytes};n({success:!0,uploadMsg:r}),o(f)})})});function LR(t,e,n){return new Promise(async(i,r)=>{try{const o=new FR("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMWIzNWRhYTc3MmZkZTI0ZDI1ODBiMTNiNDkyMWMyNDkzMmE5ZDJhYzk1OTQzNGIzMTQwYWM0NDEyNGI4ZDRjMDFkNDQwYmJkMDJlYzZmNzEiLCJpYXQiOjE2NDY2MjM0MTEuMDAxMjg5LCJuYmYiOjE2NDY2MjM0MTEuMDAxMjkyLCJleHAiOjQ4MDIyOTcwMTAuOTk3ODMzLCJzdWIiOiI0MzczODU0NiIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiXX0.TLmy-ePeLIxA8VE7TkWuQU1jCUSQ6smRW-tKQjGcU0Z7cwR2fE7p5Jd-7QYVI-f6zM6IUKH6JTFRgE9N_4W9ldwLe6Rx-XyOl8v3Rh1Cp4MUIb5kThF-c2uj5hsMIHj1pmFflmNpHB3jL4Mb7To6CCwpw_5Q7BUVpYOG_eHAXboWCGnfb62hFjjbHTLzm0rfSLH-8eiCikzKovjD1W2xK05Rc4ZTjCKikivHqkKpcQjxuH8bEu2mnoHP-flqknIz8kn3yzp3hc55jd5l-QFG8AZ8fcjsVx8MpoRHW4k1lcDjvgIlatYFfHXnmjXnFm9aUwDiPP0XNbRfUjYUoi0jzt7l004sdnyh8_ZOboz1dB0EoGBg0L9NK4V6BZx_Ne59czgh5LdmbBaByVCc26LGZkA6DnZg_PTz7UYQ924xGtjWwFFYffCjRNH9r7AfmE4656KNNaeVwORygRwzL4QbAnjWYKtQUpOOtSiD3xUSENIF4uYLQRthaqvkdxi92LrF2r9MaeDAWqxPV7nLYPSeOUS_Qc75n1F0Ke3VCuE5Z2n_lYkklhGVPSS4jXJJJ7mAJolwp-zlKMYLHINRmZ08AgjV39tCtA--EJVikinVX7Wg7RLL-nRkWRFfI_UgM7OVirqb4O1OJb8MfqRAwfLhj6lDCNTxA4ycI8s0f6x9lR8");let h=await o.jobs.create({tasks:{"import-1":{operation:"import/url",url:`${t.url}`},"task-1":{operation:"convert",input:["import-1"],output_format:"svg"},"export-1":{operation:"export/url",input:["task-1"],inline:!0,archive_multiple_files:!1}},tag:"jobbuilder"});o.jobs.subscribeTaskEvent(h.id,"finished",async a=>{if(a.task.name==="import-1"&&n({uploadMsg:"원본파일을 분석중 입니다.",progress:30}),a.task.name==="export-1"){const s=await jr(a.task.result.files[0].url,e,n,{extension:"svg"});i(s)}})}catch(o){r(o)}})}let sl;const NR=new Uint8Array(16);function jR(){if(!sl&&(sl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sl(NR)}const rn=[];for(let t=0;t<256;++t)rn.push((t+256).toString(16).slice(1));function BR(t,e=0){return rn[t[e+0]]+rn[t[e+1]]+rn[t[e+2]]+rn[t[e+3]]+"-"+rn[t[e+4]]+rn[t[e+5]]+"-"+rn[t[e+6]]+rn[t[e+7]]+"-"+rn[t[e+8]]+rn[t[e+9]]+"-"+rn[t[e+10]]+rn[t[e+11]]+rn[t[e+12]]+rn[t[e+13]]+rn[t[e+14]]+rn[t[e+15]]}const UR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Om={randomUUID:UR};function Pr(t,e,n){if(Om.randomUUID&&!e&&!t)return Om.randomUUID();t=t||{};const i=t.random||(t.rng||jR)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return BR(i)}function Em(t,e,n){const i=t.slice();return i[9]=e[n],i}function YR(t){let e;return{c(){e=be("이미지 업로드")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function WR(t){let e;return{c(){e=be("이미지 교체")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function zR(t){let e,n,i,r,o,h,a;n=new HE({}),n.$on("drop",t[10]);let s=Fe(t[5]),c=[];for(let f=0;f<s.length;f+=1)c[f]=xm(Em(t,s,f));return{c(){e=x("div"),he(n.$$.fragment),i=V(),r=x("div"),r.innerHTML='<h1 class="font-semibold text-lg">이미지 보관함</h1> <span class="text-xs">사용하실 이미지를 선택해 주세요.</span>',o=V(),h=x("div");for(let f=0;f<c.length;f+=1)c[f].c();S(e,"class","mt-3 overflow-y-auto gap-4"),S(r,"class","flex gap-3 items-center mt-3"),S(h,"class","grid gap-3 grid-cols-2 md:grid-cols-4 mt-5")},m(f,l){B(f,e,l),ue(n,e,null),B(f,i,l),B(f,r,l),B(f,o,l),B(f,h,l);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(h,null);a=!0},p(f,l){if(l[0]&131104){s=Fe(f[5]);let u;for(u=0;u<s.length;u+=1){const d=Em(f,s,u);c[u]?c[u].p(d,l):(c[u]=xm(d),c[u].c(),c[u].m(h,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}},i(f){a||(M(n.$$.fragment,f),a=!0)},o(f){U(n.$$.fragment,f),a=!1},d(f){f&&(N(e),N(i),N(r),N(o),N(h)),fe(n),Pt(c,f)}}}function HR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b=t[1]&&Dm(t);c=new Ce({props:{icon:"fe:crop",height:25}});let y=t[6].usePicWish&&Am(t);return{c(){e=x("div"),n=x("img"),o=V(),b&&b.c(),h=V(),a=x("div"),s=x("button"),he(c.$$.fragment),f=V(),l=x("span"),l.textContent="자르기",u=V(),y&&y.c(),d=V(),p=x("div"),m=x("button"),m.textContent="이미지 등록",S(n,"id","upload-image-ori"),Ye(n.src,i=t[9].url)||S(n,"src",i),S(n,"alt",r=t[9].name),S(l,"class","text-2xs"),S(s,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(s,"type","button"),S(a,"class","absolute left-0 top-10 flex flex-col gap-2"),S(e,"class","p-1 relative image-container overflow-y-auto svelte-1cs98qz"),S(m,"class","btn primary-btn"),S(p,"class","actions mt-3 flex justify-center gap-2")},m(w,C){B(w,e,C),k(e,n),t[20](n),k(e,o),b&&b.m(e,null),k(e,h),k(e,a),k(a,s),ue(c,s,null),k(s,f),k(s,l),k(a,u),y&&y.m(a,null),B(w,d,C),B(w,p,C),k(p,m),g=!0,v||(_=[Q(s,"click",t[23]),Q(m,"click",t[26])],v=!0)},p(w,C){(!g||C[0]&512&&!Ye(n.src,i=w[9].url))&&S(n,"src",i),(!g||C[0]&512&&r!==(r=w[9].name))&&S(n,"alt",r),w[1]?b?(b.p(w,C),C[0]&2&&M(b,1)):(b=Dm(w),b.c(),M(b,1),b.m(e,h)):b&&(Se(),U(b,1,1,()=>{b=null}),Te()),w[6].usePicWish?y?(y.p(w,C),C[0]&64&&M(y,1)):(y=Am(w),y.c(),M(y,1),y.m(a,null)):y&&(Se(),U(y,1,1,()=>{y=null}),Te())},i(w){g||(M(b),M(c.$$.fragment,w),M(y),g=!0)},o(w){U(b),U(c.$$.fragment,w),U(y),g=!1},d(w){w&&(N(e),N(d),N(p)),t[20](null),b&&b.d(),fe(c),y&&y.d(),v=!1,Ue(_)}}}function xm(t){let e,n,i,r,o,h,a;function s(){return t[27](t[9])}return{c(){e=x("button"),n=x("img"),o=V(),Ye(n.src,i=t[9].thumbnail.url)||S(n,"src",i),S(n,"alt",r=t[9].thumbnail.fileName),S(n,"class","object-contain"),S(e,"class","image-container flex border rounded svelte-1cs98qz")},m(c,f){B(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f[0]&32&&!Ye(n.src,i=t[9].thumbnail.url)&&S(n,"src",i),f[0]&32&&r!==(r=t[9].thumbnail.fileName)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function Dm(t){let e,n,i,r,o,h,a,s,c,f,l;return i=new Ce({props:{icon:"mdi:success-bold"}}),a=new Ce({props:{icon:"mdi:success-bold"}}),{c(){e=x("div"),n=x("button"),he(i.$$.fragment),r=be(" 자르기"),o=V(),h=x("button"),he(a.$$.fragment),s=be(" 취소"),S(n,"type","button"),S(n,"class","btn primary-btn"),S(h,"type","button"),S(h,"class","btn primary-btn"),S(e,"class","sticky bottom-0 flex w-full p-3")},m(u,d){B(u,e,d),k(e,n),ue(i,n,null),k(n,r),k(e,o),k(e,h),ue(a,h,null),k(h,s),c=!0,f||(l=[Q(n,"click",t[21]),Q(h,"click",t[22])],f=!0)},p:ge,i(u){c||(M(i.$$.fragment,u),M(a.$$.fragment,u),c=!0)},o(u){U(i.$$.fragment,u),U(a.$$.fragment,u),c=!1},d(u){u&&N(e),fe(i),fe(a),f=!1,Ue(l)}}}function Am(t){let e,n,i,r;const o=[XR,VR],h=[];function a(s,c){return s[0]?0:1}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=Je()},m(s,c){h[e].m(s,c),B(s,i,c),r=!0},p(s,c){let f=e;e=a(s),e===f?h[e].p(s,c):(Se(),U(h[f],1,1,()=>{h[f]=null}),Te(),n=h[e],n?n.p(s,c):(n=h[e]=o[e](s),n.c()),M(n,1),n.m(i.parentNode,i))},i(s){r||(M(n),r=!0)},o(s){U(n),r=!1},d(s){s&&N(i),h[e].d(s)}}}function VR(t){let e,n,i,r,o,h,a;return n=new Ce({props:{icon:"material-symbols-light:background-replace-rounded",height:25}}),{c(){e=x("button"),he(n.$$.fragment),i=V(),r=x("span"),r.textContent="배경지우기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){B(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Q(e,"click",t[25]),h=!0)},p:ge,i(s){o||(M(n.$$.fragment,s),o=!0)},o(s){U(n.$$.fragment,s),o=!1},d(s){s&&N(e),fe(n),h=!1,a()}}}function XR(t){let e,n,i,r,o,h,a;return n=new Ce({props:{icon:"iconoir:redo",height:25}}),{c(){e=x("button"),he(n.$$.fragment),i=V(),r=x("span"),r.textContent="되돌리기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){B(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Q(e,"click",t[24]),h=!0)},p:ge,i(s){o||(M(n.$$.fragment,s),o=!0)},o(s){U(n.$$.fragment,s),o=!1},d(s){s&&N(e),fe(n),h=!1,a()}}}function Pm(t){let e,n;return e=new Gb({props:{isSpinner:!0,$$slots:{default:[$R]},$$scope:{ctx:t}}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&16|r[1]&16&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function $R(t){let e;return{c(){e=be(t[4])},m(n,i){B(n,e,i)},p(n,i){i[0]&16&&He(e,n[4])},d(n){n&&N(e)}}}function GR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;function p(w,C){return w[7]?WR:YR}let m=p(t),g=m(t);o=new Ce({props:{icon:"mingcute:left-line",height:"30"}});const v=[HR,zR],_=[];function b(w,C){return w[9]?0:1}a=b(t),s=_[a]=v[a](t);let y=t[3]&&Pm(t);return{c(){e=x("div"),n=x("h2"),g.c(),i=V(),r=x("button"),he(o.$$.fragment),h=V(),s.c(),c=V(),y&&y.c(),f=Je(),S(r,"type","button"),S(r,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex font-semibold"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(w,C){B(w,e,C),k(e,n),g.m(n,null),k(n,i),k(n,r),ue(o,r,null),k(e,h),_[a].m(e,null),B(w,c,C),y&&y.m(w,C),B(w,f,C),l=!0,u||(d=Q(r,"click",t[19]),u=!0)},p(w,C){m!==(m=p(w))&&(g.d(1),g=m(w),g&&(g.c(),g.m(n,i)));let T=a;a=b(w),a===T?_[a].p(w,C):(Se(),U(_[T],1,1,()=>{_[T]=null}),Te(),s=_[a],s?s.p(w,C):(s=_[a]=v[a](w),s.c()),M(s,1),s.m(e,null)),w[3]?y?(y.p(w,C),C[0]&8&&M(y,1)):(y=Pm(w),y.c(),M(y,1),y.m(f.parentNode,f)):y&&(Se(),U(y,1,1,()=>{y=null}),Te())},i(w){l||(M(o.$$.fragment,w),M(s),M(y),l=!0)},o(w){U(o.$$.fragment,w),U(s),U(y),l=!1},d(w){w&&(N(e),N(c),N(f)),g.d(),fe(o),_[a].d(),y&&y.d(w),u=!1,d()}}}function _s(t){}function qR(t,e,n){let i,r,o,h,a,s;Me(t,Go,E=>n(5,i=E)),Me(t,Le,E=>n(30,r=E)),Me(t,ra,E=>n(31,o=E)),Me(t,po,E=>n(6,h=E)),Me(t,js,E=>n(7,a=E)),Me(t,Yt,E=>n(8,s=E));let{handleAddUpload:c}=e;Xt();let f=null,l=null,u=null,d={},p=null,m=null,g=!1,v="";async function _(E){n(3,g=!0);try{const P=E.detail;if(P.length>0){const F=P[0],L=new FileReader,Z=q2(F);if(Z==="psd"||Z==="svg"||Z==="ai"||Z==="eps"||Z==="pdf"){n(4,v="이미지를 업로드중 입니다.");const R={},A=`editorData/${r.uuid}/`,X={extension:Z},J=await rw(F,`${A}${Pr()}.${Z}`,_s,X);switch(R.origin=J,Z){case"svg":R.thumbnail=J;break;case"ai":case"eps":case"pdf":n(4,v="파일을 이미지로 변환중입니다.");const ie=await LR(J,`${A}${Pr()}.svg`,_s);R.thumbnail=ie;break;case"psd":n(4,v="썸네일을 생성중 입니다.");const ne=await yg({fileName:J.fileName,extension:Z,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});if(ne.original){const le=await jr(ne.original,`${A}${Pr()}.png`,_s,X);R.convert=le}n(4,v="썸네일을 업로드중 입니다.");const $=await jr(ne.thumbnail,`${A}${Pr()}.png`,_s,X);R.thumbnail=$;break;default:break}ye(Le,r.uploads=[...r.uploads,R],r),ye(Go,i=[...i,R],i),n(3,g=!1);return}if(Z!=="png"&&Z!=="jpg"&&Z!=="jpeg"&&Z!=="gif"&&Z!=="webp"){alert("지원하지 않는 파일 형식입니다."),n(3,g=!1);return}L.onload=function(R){const A=R.target.result,X=new Image;X.src=A,X.onload=function(){const J=X.width,ie=X.height;n(9,f={url:A,width:J,height:ie,extension:Z})},n(3,g=!1)},L.readAsDataURL(F)}}catch(P){console.log({error:P}),n(3,g=!1)}}function b(){n(1,p=new Hb(m,{crop(E){d=E.detail}}))}function y(){n(9,f={url:l}),n(0,l=null)}async function w(){if(u){n(0,l=f.url),n(9,f={url:u});return}try{n(3,g=!0),n(4,v="AI 배경제거를 진행중 입니다."),n(9,f.url=f.url.replace(/^data:image\/png;base64,/,""),f),n(9,f.url=f.url.replace(/^data:image\/jpeg;base64,/,""),f),n(9,f.url=f.url.replace(/^data:image\/gif;base64,/,""),f);const E=await F2(h.id,f.url);if(E.status===200)n(0,l=`data:image/png;base64, ${f.url}`),u=`data:image/png;base64, ${E.data.image}`,n(9,f={url:u});else throw new Error("배경제거에 실패했습니다.")}catch(E){console.log({error:E})}finally{n(4,v=""),n(3,g=!1)}}function C(){p&&(p.destroy(),n(1,p=null))}async function T(){try{n(3,g=!0),n(4,v="이미지를 업로드중 입니다.");const E={},P=`editorData/${r.uuid}/`,F={width:f.width,height:f.height,extension:f.extension},L=await jr(f.url,`${P}${Pr()}.${f.extension}`,_s,F);E.origin=L,E.convert=L,n(4,v="썸네일을 생성중 입니다.");const Z=await yg({fileName:L.fileName,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});n(4,v="썸네일을 업로드중 입니다.");const R=await jr(Z.thumbnail,`${P}${Pr()}.png`,_s,F);E.thumbnail=R,ye(Le,r.uploads=[...r.uploads,E],r),ye(Go,i=[...i,E],i),n(9,f=null)}catch{}finally{n(4,v=""),n(3,g=!1)}}function O(){const E=document.createElement("canvas"),P=E.getContext("2d"),{x:F,y:L,width:Z,height:R}=d;E.width=Z,E.height=R,P.drawImage(m,-F,-L),n(9,f={url:E.toDataURL("image/png"),width:Z,height:R,extension:"png"}),C()}function D(E){c(E)}const I=()=>ye(Yt,s=null,s);function Y(E){tt[E?"unshift":"push"](()=>{m=E,n(2,m)})}const z=()=>O(),q=()=>C(),G=()=>b(),j=()=>y(),W=()=>w(),te=()=>T(),se=E=>D(E);return t.$$set=E=>{"handleAddUpload"in E&&n(18,c=E.handleAddUpload)},[l,p,m,g,v,i,h,a,s,f,_,b,y,w,C,T,O,D,c,I,Y,z,q,G,j,W,te,se]}class KR extends qe{constructor(e){super(),Ge(this,e,qR,GR,Ve,{handleAddUpload:18},null,[-1,-1])}}function JR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}});let y=ZR;return{c(){e=x("div"),n=x("h2"),i=x("span"),i.textContent="텍스트",r=V(),o=x("button"),he(h.$$.fragment),a=V(),s=x("div"),c=x("div"),f=x("div"),l=x("textarea"),u=V(),d=x("div"),p=x("button"),p.textContent="입력하기",m=V(),g=Je(),S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"class","textarea"),S(l,"rows","5"),S(l,"placeholder","텍스트를 입력해주세요."),S(f,"class","my-3"),S(p,"type","button"),S(p,"class","btn btn-sm md:p-3 md:text-base primary-btn w-full"),S(d,"class","p-3 flex justify-center"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(w,C){B(w,e,C),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),Re(l,t[1]),k(c,u),k(c,d),k(d,p),B(w,m,C),B(w,g,C),v=!0,_||(b=[Q(o,"click",t[3]),Q(l,"input",t[4]),Q(p,"click",t[5])],_=!0)},p(w,[C]){C&2&&Re(l,w[1])},i(w){v||(M(h.$$.fragment,w),M(y),v=!0)},o(w){U(h.$$.fragment,w),U(y),v=!1},d(w){w&&(N(e),N(m),N(g)),fe(h),_=!1,Ue(b)}}}let ZR=!1;function QR(t,e,n){let i;Me(t,Yt,c=>n(2,i=c));let{handleAddText:r}=e,o="";const h=()=>ye(Yt,i=null,i);function a(){o=this.value,n(1,o)}const s=()=>r(o);return t.$$set=c=>{"handleAddText"in c&&n(0,r=c.handleAddText)},[r,o,i,h,a,s]}class eF extends qe{constructor(e){super(),Ge(this,e,QR,JR,Ve,{handleAddText:0})}}function tF(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w,C,T,O,D,I;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}}),u=new Ce({props:{icon:"ic:outline-rectangle",width:16}}),m=new Ce({props:{icon:"ic:outline-circle",width:16}}),_=new Ce({props:{icon:"uil:triangle",width:16}}),w=new Ce({props:{icon:"material-symbols-light:draw",width:16}});let Y=nF;return{c(){e=x("div"),n=x("h2"),i=x("span"),i.textContent="도형/그리기",r=V(),o=x("button"),he(h.$$.fragment),a=V(),s=x("div"),c=x("div"),f=x("div"),l=x("button"),he(u.$$.fragment),d=V(),p=x("button"),he(m.$$.fragment),g=V(),v=x("button"),he(_.$$.fragment),b=V(),y=x("button"),he(w.$$.fragment),C=V(),T=Je(),S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"type","button"),S(l,"class","btn white-btn"),S(p,"type","button"),S(p,"class","btn white-btn"),S(v,"type","button"),S(v,"class","btn white-btn"),S(y,"type","button"),S(y,"class","btn white-btn"),S(f,"class","my-3 flex gap-1"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(z,q){B(z,e,q),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),ue(u,l,null),k(f,d),k(f,p),ue(m,p,null),k(f,g),k(f,v),ue(_,v,null),k(f,b),k(f,y),ue(w,y,null),B(z,C,q),B(z,T,q),O=!0,D||(I=[Q(o,"click",t[2]),Q(l,"click",t[3]),Q(p,"click",t[4]),Q(v,"click",t[5]),Q(y,"click",t[6])],D=!0)},p(z,[q]){},i(z){O||(M(h.$$.fragment,z),M(u.$$.fragment,z),M(m.$$.fragment,z),M(_.$$.fragment,z),M(w.$$.fragment,z),M(Y),O=!0)},o(z){U(h.$$.fragment,z),U(u.$$.fragment,z),U(m.$$.fragment,z),U(_.$$.fragment,z),U(w.$$.fragment,z),U(Y),O=!1},d(z){z&&(N(e),N(C),N(T)),fe(h),fe(u),fe(m),fe(_),fe(w),D=!1,Ue(I)}}}let nF=!1;function iF(t,e,n){let i;Me(t,Yt,f=>n(1,i=f));let{handleAddShape:r}=e;const o=()=>ye(Yt,i=null,i),h=()=>r("rect"),a=()=>r("circle"),s=()=>r("triangle"),c=()=>r("draw");return t.$$set=f=>{"handleAddShape"in f&&n(0,r=f.handleAddShape)},[r,i,o,h,a,s,c]}class rF extends qe{constructor(e){super(),Ge(this,e,iF,tF,Ve,{handleAddShape:0})}}function Mm(t){let e,n,i,r,o,h,a;return i=new Ce({props:{icon:"ic:outline-content-paste-go",height:"15"}}),{c(){e=x("div"),n=x("button"),he(i.$$.fragment),r=be(`\r
        디자인 붙여넣기`),S(n,"type","button"),S(n,"class","btn white-btn btn-xs"),S(e,"class","absolute top-2 right-2")},m(s,c){B(s,e,c),k(e,n),ue(i,n,null),k(n,r),o=!0,h||(a=Q(n,"click",t[23]),h=!0)},p:ge,i(s){o||(M(i.$$.fragment,s),o=!0)},o(s){U(i.$$.fragment,s),o=!1},d(s){s&&N(e),fe(i),h=!1,a()}}}function sF(t){let e;return{c(){e=x("canvas"),e.innerHTML="",S(e,"id","print"),S(e,"class","svelte-d96o53")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function oF(t){let e,n,i,r,o;return{c(){var h,a,s;e=x("div"),n=x("div"),i=x("canvas"),i.innerHTML="",S(i,"id","print"),S(i,"class","svelte-d96o53"),S(n,"class","print-container absolute"),S(n,"style",`left:${t[7].background.canvasLeft}%; top:${t[7].background.canvasTop}%; width:${t[7].background.canvasPer}%; height:${t[7].background.canvasPer*t[9]}%;`),S(e,"style",r=`max-width: ${t[8]}px; max-height: ${t[10]}px; width: 100%; height: ${t[2]}px; background-image:url(${(a=(h=t[7].background)==null?void 0:h.image)==null?void 0:a.url}); background-color:${(s=t[4].currentOption)!=null&&s.colorCode?t[4].currentOption.colorCode:"#ffffff"}`),S(e,"class","flex flex-col justify-center background-container svelte-d96o53"),zt(()=>t[24].call(e))},m(h,a){B(h,e,a),k(e,n),k(n,i),o=D1(e,t[24].bind(e))},p(h,a){var s,c,f;a[0]&20&&r!==(r=`max-width: ${h[8]}px; max-height: ${h[10]}px; width: 100%; height: ${h[2]}px; background-image:url(${(c=(s=h[7].background)==null?void 0:s.image)==null?void 0:c.url}); background-color:${(f=h[4].currentOption)!=null&&f.colorCode?h[4].currentOption.colorCode:"#ffffff"}`)&&S(e,"style",r)},d(h){h&&N(e),o()}}}function Im(t){let e,n,i,r;return n=new BE({props:{handleAddClipArt:t[11]}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){B(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!0)),i.run(1))}),r=!0)},o(o){U(n.$$.fragment,o),o&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Rm(t){let e,n,i,r;return n=new KR({props:{handleAddUpload:t[12]}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-full max-w-2xl h-full z-50")},m(o,h){B(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!0)),i.run(1))}),r=!0)},o(o){U(n.$$.fragment,o),o&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Fm(t){let e,n,i,r;return n=new eF({props:{handleAddText:t[13]}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){B(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!0)),i.run(1))}),r=!0)},o(o){U(n.$$.fragment,o),o&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Lm(t){let e,n,i,r;return n=new rF({props:{handleAddShape:t[14]}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){B(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!0)),i.run(1))}),r=!0)},o(o){U(n.$$.fragment,o),o&&(i||(i=Vt(e,wr,{delay:10,duration:200,axis:"x",opacity:.5,easing:br},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Nm(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;i=new Ce({props:{icon:"ph:angle",height:"18"}});let y=(t[5][0].colorType==="color"||t[5][0].objType==="text"||t[5][0].objType==="shape"||t[5][0].type==="path")&&jm(t),w=t[5][0].colorType==="colors"&&Bm(t),C=t[5][0].objType==="text"&&Um(t),T=(t[5][0].type==="path"||t[5][0].objType==="text"||t[5][0].objType==="shape")&&Ym(t),O=t[1]==="rotate"&&Wm(t),D=t[1]==="color"&&zm(t),I=t[1]==="text"&&Hm(t),Y=t[1]==="align"&&Vm(t),z=t[1]==="style"&&Xm(t),q=t[1]==="decoration"&&$m(t),G=t[1]==="stroke"&&Gm(t),j=t[1]==="colors"&&qm(t);return{c(){e=x("div"),n=x("button"),he(i.$$.fragment),r=V(),y&&y.c(),o=V(),w&&w.c(),h=V(),C&&C.c(),a=V(),T&&T.c(),s=V(),O&&O.c(),c=V(),D&&D.c(),f=V(),I&&I.c(),l=V(),Y&&Y.c(),u=V(),z&&z.c(),d=V(),q&&q.c(),p=V(),G&&G.c(),m=V(),j&&j.c(),g=Je(),S(n,"class","btn white-btn circle-btn"),S(e,"class","absolute flex justify-center gap-0.5 z-40 top-10")},m(W,te){B(W,e,te),k(e,n),ue(i,n,null),k(e,r),y&&y.m(e,null),k(e,o),w&&w.m(e,null),k(e,h),C&&C.m(e,null),k(e,a),T&&T.m(e,null),B(W,s,te),O&&O.m(W,te),B(W,c,te),D&&D.m(W,te),B(W,f,te),I&&I.m(W,te),B(W,l,te),Y&&Y.m(W,te),B(W,u,te),z&&z.m(W,te),B(W,d,te),q&&q.m(W,te),B(W,p,te),G&&G.m(W,te),B(W,m,te),j&&j.m(W,te),B(W,g,te),v=!0,_||(b=Q(n,"click",t[25]),_=!0)},p(W,te){W[5][0].colorType==="color"||W[5][0].objType==="text"||W[5][0].objType==="shape"||W[5][0].type==="path"?y?(y.p(W,te),te[0]&32&&M(y,1)):(y=jm(W),y.c(),M(y,1),y.m(e,o)):y&&(Se(),U(y,1,1,()=>{y=null}),Te()),W[5][0].colorType==="colors"?w?(w.p(W,te),te[0]&32&&M(w,1)):(w=Bm(W),w.c(),M(w,1),w.m(e,h)):w&&(Se(),U(w,1,1,()=>{w=null}),Te()),W[5][0].objType==="text"?C?(C.p(W,te),te[0]&32&&M(C,1)):(C=Um(W),C.c(),M(C,1),C.m(e,a)):C&&(Se(),U(C,1,1,()=>{C=null}),Te()),W[5][0].type==="path"||W[5][0].objType==="text"||W[5][0].objType==="shape"?T?(T.p(W,te),te[0]&32&&M(T,1)):(T=Ym(W),T.c(),M(T,1),T.m(e,null)):T&&(Se(),U(T,1,1,()=>{T=null}),Te()),W[1]==="rotate"?O?(O.p(W,te),te[0]&2&&M(O,1)):(O=Wm(W),O.c(),M(O,1),O.m(c.parentNode,c)):O&&(Se(),U(O,1,1,()=>{O=null}),Te()),W[1]==="color"?D?(D.p(W,te),te[0]&2&&M(D,1)):(D=zm(W),D.c(),M(D,1),D.m(f.parentNode,f)):D&&(Se(),U(D,1,1,()=>{D=null}),Te()),W[1]==="text"?I?(I.p(W,te),te[0]&2&&M(I,1)):(I=Hm(W),I.c(),M(I,1),I.m(l.parentNode,l)):I&&(Se(),U(I,1,1,()=>{I=null}),Te()),W[1]==="align"?Y?(Y.p(W,te),te[0]&2&&M(Y,1)):(Y=Vm(W),Y.c(),M(Y,1),Y.m(u.parentNode,u)):Y&&(Se(),U(Y,1,1,()=>{Y=null}),Te()),W[1]==="style"?z?(z.p(W,te),te[0]&2&&M(z,1)):(z=Xm(W),z.c(),M(z,1),z.m(d.parentNode,d)):z&&(Se(),U(z,1,1,()=>{z=null}),Te()),W[1]==="decoration"?q?(q.p(W,te),te[0]&2&&M(q,1)):(q=$m(W),q.c(),M(q,1),q.m(p.parentNode,p)):q&&(Se(),U(q,1,1,()=>{q=null}),Te()),W[1]==="stroke"?G?(G.p(W,te),te[0]&2&&M(G,1)):(G=Gm(W),G.c(),M(G,1),G.m(m.parentNode,m)):G&&(Se(),U(G,1,1,()=>{G=null}),Te()),W[1]==="colors"?j?(j.p(W,te),te[0]&2&&M(j,1)):(j=qm(W),j.c(),M(j,1),j.m(g.parentNode,g)):j&&(Se(),U(j,1,1,()=>{j=null}),Te())},i(W){v||(M(i.$$.fragment,W),M(y),M(w),M(C),M(T),M(O),M(D),M(I),M(Y),M(z),M(q),M(G),M(j),v=!0)},o(W){U(i.$$.fragment,W),U(y),U(w),U(C),U(T),U(O),U(D),U(I),U(Y),U(z),U(q),U(G),U(j),v=!1},d(W){W&&(N(e),N(s),N(c),N(f),N(l),N(u),N(d),N(p),N(m),N(g)),fe(i),y&&y.d(),w&&w.d(),C&&C.d(),T&&T.d(),O&&O.d(W),D&&D.d(W),I&&I.d(W),Y&&Y.d(W),z&&z.d(W),q&&q.d(W),G&&G.d(W),j&&j.d(W),_=!1,b()}}}function jm(t){let e,n,i,r,o;return n=new Ce({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=x("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){B(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[26]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){U(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Bm(t){let e,n,i,r,o;return n=new Ce({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=x("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){B(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[27]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){U(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Um(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p;return n=new Ce({props:{icon:"cil:text",height:"18"}}),o=new Ce({props:{icon:"uim:align-left",height:"18"}}),s=new Ce({props:{icon:"pajamas:italic",height:"18"}}),l=new Ce({props:{icon:"fluent:text-underline-24-filled",height:"18"}}),{c(){e=x("button"),he(n.$$.fragment),i=V(),r=x("button"),he(o.$$.fragment),h=V(),a=x("button"),he(s.$$.fragment),c=V(),f=x("button"),he(l.$$.fragment),S(e,"class","btn white-btn circle-btn"),S(r,"class","btn white-btn circle-btn"),S(a,"class","btn white-btn circle-btn"),S(f,"class","btn white-btn circle-btn")},m(m,g){B(m,e,g),ue(n,e,null),B(m,i,g),B(m,r,g),ue(o,r,null),B(m,h,g),B(m,a,g),ue(s,a,null),B(m,c,g),B(m,f,g),ue(l,f,null),u=!0,d||(p=[Q(e,"click",t[28]),Q(r,"click",t[29]),Q(a,"click",t[30]),Q(f,"click",t[31])],d=!0)},p:ge,i(m){u||(M(n.$$.fragment,m),M(o.$$.fragment,m),M(s.$$.fragment,m),M(l.$$.fragment,m),u=!0)},o(m){U(n.$$.fragment,m),U(o.$$.fragment,m),U(s.$$.fragment,m),U(l.$$.fragment,m),u=!1},d(m){m&&(N(e),N(i),N(r),N(h),N(a),N(c),N(f)),fe(n),fe(o),fe(s),fe(l),d=!1,Ue(p)}}}function Ym(t){let e,n,i,r,o;return n=new Ce({props:{icon:"maki:square-stroked",height:"18"}}),{c(){e=x("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){B(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[32]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){U(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Wm(t){let e,n,i;function r(h){t[33](h)}let o={sliderValue:t[5][0].angle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new kO({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeRotate",t[15]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.sliderValue=h[5][0].angle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function zm(t){let e,n,i;function r(h){t[34](h)}let o={object:t[5][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new _E({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeColor",t[35]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.object=h[5][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Hm(t){let e,n,i;function r(h){t[36](h)}let o={text:t[5][0].text};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new wE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeText",t[16]),e.$on("onChangeFontFamily",t[17]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.text=h[5][0].text),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Vm(t){let e,n,i;function r(h){t[37](h)}let o={align:t[5][0].textAlign};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new TE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeAlign",t[18]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.align=h[5][0].textAlign),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Xm(t){let e,n,i;function r(h){t[38](h)}let o={style:t[5][0].fontStyle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new EE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeStyle",t[19]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.style=h[5][0].fontStyle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function $m(t){let e,n,i;function r(h){t[39](h)}let o={object:t[5][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new AE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeDecoration",t[20]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.object=h[5][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Gm(t){let e,n,i;function r(h){t[40](h)}let o={object:t[5][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new IE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeStroke",t[21]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.object=h[5][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function qm(t){let e,n,i;function r(h){t[41](h)}let o={object:t[5][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new LE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeColors",t[42]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&32&&(s.object=h[5][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function aF(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p;i=new Ce({props:{icon:"ic:outline-content-copy",height:"15"}});let m=t[3]&&Mm(t);function g(O,D){return O[7].background?oF:sF}let _=g(t)(t),b=t[6]==="clipart"&&Im(t),y=t[6]==="upload"&&Rm(t),w=t[6]==="text"&&Fm(t),C=t[6]==="draw"&&Lm(t),T=t[5]&&Nm(t);return{c(){e=x("div"),n=x("button"),he(i.$$.fragment),r=be(`\r
    디자인복사`),o=V(),m&&m.c(),h=V(),_.c(),a=V(),b&&b.c(),s=V(),y&&y.c(),c=V(),w&&w.c(),f=V(),C&&C.c(),l=V(),T&&T.c(),S(n,"type","button"),S(n,"class","btn white-btn btn-xs absolute top-2 left-2"),S(e,"class","flex justify-center items-center h-full w-full relative flex-col")},m(O,D){B(O,e,D),k(e,n),ue(i,n,null),k(n,r),k(e,o),m&&m.m(e,null),k(e,h),_.m(e,null),k(e,a),b&&b.m(e,null),k(e,s),y&&y.m(e,null),k(e,c),w&&w.m(e,null),k(e,f),C&&C.m(e,null),k(e,l),T&&T.m(e,null),u=!0,d||(p=Q(n,"click",t[22]),d=!0)},p(O,D){O[3]?m?(m.p(O,D),D[0]&8&&M(m,1)):(m=Mm(O),m.c(),M(m,1),m.m(e,h)):m&&(Se(),U(m,1,1,()=>{m=null}),Te()),_.p(O,D),O[6]==="clipart"?b?(b.p(O,D),D[0]&64&&M(b,1)):(b=Im(O),b.c(),M(b,1),b.m(e,s)):b&&(Se(),U(b,1,1,()=>{b=null}),Te()),O[6]==="upload"?y?(y.p(O,D),D[0]&64&&M(y,1)):(y=Rm(O),y.c(),M(y,1),y.m(e,c)):y&&(Se(),U(y,1,1,()=>{y=null}),Te()),O[6]==="text"?w?(w.p(O,D),D[0]&64&&M(w,1)):(w=Fm(O),w.c(),M(w,1),w.m(e,f)):w&&(Se(),U(w,1,1,()=>{w=null}),Te()),O[6]==="draw"?C?(C.p(O,D),D[0]&64&&M(C,1)):(C=Lm(O),C.c(),M(C,1),C.m(e,l)):C&&(Se(),U(C,1,1,()=>{C=null}),Te()),O[5]?T?(T.p(O,D),D[0]&32&&M(T,1)):(T=Nm(O),T.c(),M(T,1),T.m(e,null)):T&&(Se(),U(T,1,1,()=>{T=null}),Te())},i(O){u||(M(i.$$.fragment,O),M(m),M(b),M(y),M(w),M(C),M(T),u=!0)},o(O){U(i.$$.fragment,O),U(m),U(b),U(y),U(w),U(C),U(T),u=!1},d(O){O&&N(e),fe(i),m&&m.d(),_.d(),b&&b.d(),y&&y.d(),w&&w.d(),C&&C.d(),T&&T.d(),d=!1,p()}}}function lF(t,e,n){let i,r,o,h,a,s,c,f,l,u;Me(t,Tp,H=>n(3,r=H)),Me(t,ra,H=>n(43,o=H)),Me(t,Le,H=>n(4,h=H)),Me(t,Ui,H=>n(5,a=H)),Me(t,Yt,H=>n(6,s=H)),Me(t,hu,H=>n(44,c=H)),Me(t,$o,H=>n(45,f=H)),Me(t,js,H=>n(46,l=H)),Me(t,po,H=>n(47,u=H));let d=h.prints[o],p,m=d.canvasWidth,g=d.height/d.width,v=m*g,_=d.canvasJSON,b=null;Xt();function y(H,ae=null){console.log({json:H}),ye(Le,h.prints[o].isChange=!0,h),H&&ye(Le,h.prints[o].canvasJSON=H,h),ye(Le,h.prints[o].imageDataURL=aC(),h),ae&&ye(Le,h.prints[o].svg=ae,h)}xi(async()=>{var H,ae;if(ye(Ui,a=null,a),J1("print",m,v,y),_&&Q1(_),((H=d.colorGroup)==null?void 0:H.value)!=="palette"){const _e=await ak(u.id);_e.error?console.log("컬러 데이터 로드 실패"):((ae=d.colorGroup)==null?void 0:ae.value)==="shopColor"?ye(hu,c=_e.data,c):ye(hu,c=_e.data.filter(Pe=>Pe.colorGroup===d.colorGroup.value),c)}});function w(H){console.log({clipart:H});const ae={url:H.file.url,convertUrl:H.file.convert.url,originUrl:H.file.origin.url},_e={id:H.id,name:H.name,file:H.file};Vd(H.file.url,{convert:ae,objType:"clipart",clipartInfo:_e}),ye(Yt,s=null,s)}function C(H){const ae={url:H.thumbnail.url,convertUrl:H.convert.url,originUrl:H.origin.url};l?(eC(l,H.thumbnail.url,{convert:ae,origin:H.origin,thumbnail:H.thumbnail,objType:"upload"}),ye(js,l=null,l)):Vd(H.thumbnail.url,{convert:ae,origin:H.origin,thumbnail:H.thumbnail,objType:"upload"}),ye(Yt,s=null,s)}function T(H){const ae=c!=null&&c.length?c[0].hex:"#000000";iC(H,{objType:"text",fontFamily:f[0].fontFamily,localFamily:f[0].localFamily,fill:ae}),ye(Yt,s=null,s)}function O(H){const ae=c[0]?c[0].hex:"#000000";switch(H){case"rect":bC(ae);break;case"triangle":CC(ae);break;case"circle":wC(ae);break;case"draw":SC(!0);break}ye(Yt,s=null,s)}function D({detail:H}){lC(H.value)}function I({detail:H}){cC(a[0],H.text)}function Y({detail:H}){uC(a[0],H.fontFamily,H.localFamily)}function z({detail:H}){fC(a[0],H.align)}function q({detail:H}){hC(a[0],H.style)}function G({detail:H}){dC(a[0],H.decoration)}function j({detail:H}){pC(a[0],H.stroke)}function W(){ye(Tp,r=h.prints[o].canvasJSON,r)}function te(){console.log("pastDesign",r),kC(r),eu()}function se(){p=this.clientWidth,n(0,p)}const E=()=>n(1,b="rotate"),P=()=>n(1,b="color"),F=()=>n(1,b="colors"),L=()=>n(1,b="text"),Z=()=>n(1,b="align"),R=()=>n(1,b="style"),A=()=>n(1,b="decoration"),X=()=>n(1,b="stroke");function J(H){b=H,n(1,b)}function ie(H){b=H,n(1,b)}const ne=()=>eu();function $(H){b=H,n(1,b)}function le(H){b=H,n(1,b)}function me(H){b=H,n(1,b)}function ee(H){b=H,n(1,b)}function K(H){b=H,n(1,b)}function oe(H){b=H,n(1,b)}const re=()=>eu();return t.$$.update=()=>{var H;t.$$.dirty[0]&1&&n(2,i=p*((H=d.background)!=null&&H.ratio?d.background.ratio:1))},[p,b,i,r,h,a,s,d,m,g,v,w,C,T,O,D,I,Y,z,q,G,j,W,te,se,E,P,F,L,Z,R,A,X,J,ie,ne,$,le,me,ee,K,oe,re]}class cF extends qe{constructor(e){super(),Ge(this,e,lF,aF,Ve,{},null,[-1,-1])}}function Km(t,e,n){const i=t.slice();return i[6]=e[n],i[8]=n,i}function Jm(t){let e,n,i;return{c(){var r;e=x("img"),Ye(e.src,n=(r=t[6].background.image)==null?void 0:r.url)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class","max-h-full")},m(r,o){B(r,e,o)},p(r,o){var h;o&1&&!Ye(e.src,n=(h=r[6].background.image)==null?void 0:h.url)&&S(e,"src",n),o&1&&i!==(i=r[6].title)&&S(e,"alt",i)},d(r){r&&N(e)}}}function Zm(t){let e,n,i,r,o;return{c(){var h,a,s,c,f;e=x("img"),Ye(e.src,n=t[6].imageDataURL)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class",r=(a=(h=t[6].background)==null?void 0:h.image)!=null&&a.url?"absolute":""),S(e,"style",o=`left:${(s=t[6].background)!=null&&s.canvasLeft?t[6].background.canvasLeft:0}%; top:${(c=t[6].background)!=null&&c.canvasTop?t[6].background.canvasTop:0}%; width:${(f=t[6].background)!=null&&f.canvasPer?t[6].background.canvasPer:100}%; height:auto;`)},m(h,a){B(h,e,a)},p(h,a){var s,c,f,l,u;a&1&&!Ye(e.src,n=h[6].imageDataURL)&&S(e,"src",n),a&1&&i!==(i=h[6].title)&&S(e,"alt",i),a&1&&r!==(r=(c=(s=h[6].background)==null?void 0:s.image)!=null&&c.url?"absolute":"")&&S(e,"class",r),a&1&&o!==(o=`left:${(f=h[6].background)!=null&&f.canvasLeft?h[6].background.canvasLeft:0}%; top:${(l=h[6].background)!=null&&l.canvasTop?h[6].background.canvasTop:0}%; width:${(u=h[6].background)!=null&&u.canvasPer?h[6].background.canvasPer:100}%; height:auto;`)&&S(e,"style",o)},d(h){h&&N(e)}}}function Qm(t){var p,m;let e,n,i,r,o,h=t[6].title+"",a,s,c,f,l=((m=(p=t[6].background)==null?void 0:p.image)==null?void 0:m.url)&&Jm(t),u=t[6].imageDataURL&&Zm(t);function d(){return t[3](t[8])}return{c(){var g;e=x("div"),n=x("button"),l&&l.c(),i=V(),u&&u.c(),r=V(),o=x("span"),a=be(h),s=V(),S(n,"class","max-w-24 max-h-24 min-w-14 min-h-14 relative bg-no-repeat border rounded-lg overflow-hidden"),mt(n,"background-color",(g=t[0].currentOption)!=null&&g.colorCode?t[0].currentOption.colorCode:"#ffffff"),S(o,"class","w-full flex justify-center text-xs py-0.5"),S(e,"class","p-1 bg-white rounded-lg flex flex-col")},m(g,v){B(g,e,v),k(e,n),l&&l.m(n,null),k(n,i),u&&u.m(n,null),k(e,r),k(e,o),k(o,a),k(e,s),c||(f=Q(n,"click",d),c=!0)},p(g,v){var _,b,y;t=g,(b=(_=t[6].background)==null?void 0:_.image)!=null&&b.url?l?l.p(t,v):(l=Jm(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null),t[6].imageDataURL?u?u.p(t,v):(u=Zm(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),v&1&&mt(n,"background-color",(y=t[0].currentOption)!=null&&y.colorCode?t[0].currentOption.colorCode:"#ffffff"),v&1&&h!==(h=t[6].title+"")&&He(a,h)},d(g){g&&N(e),l&&l.d(),u&&u.d(),c=!1,f()}}}function uF(t){let e,n,i=Fe(t[0].prints),r=[];for(let o=0;o<i.length;o+=1)r[o]=Qm(Km(t,i,o));return{c(){e=x("div"),n=x("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","flex flex-row max-w-full space-x-4 overflow-x-auto overflow-y-hidden p-5"),S(e,"class","absolute bottom-2 w-full")},m(o,h){B(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,[h]){if(h&3){i=Fe(o[0].prints);let a;for(a=0;a<i.length;a+=1){const s=Km(o,i,a);r[a]?r[a].p(s,h):(r[a]=Qm(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:ge,o:ge,d(o){o&&N(e),Pt(r,o)}}}function fF(t,e,n){let i,r;Me(t,ra,s=>n(4,i=s)),Me(t,Le,s=>n(0,r=s));let{printKey:o}=e;Xt();function h(s){ye(ra,i=s,i),n(2,o++,o)}const a=s=>h(s);return t.$$set=s=>{"printKey"in s&&n(2,o=s.printKey)},[r,h,o,a]}class hF extends qe{constructor(e){super(),Ge(this,e,fF,uF,Ve,{printKey:2})}}/*!
* Viewer.js v1.11.6
* https://fengyuanchen.github.io/viewerjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:16:38.052Z
*/function ev(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ev(Object(n),!0).forEach(function(i){gF(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function dF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tv(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,sw(i.key),i)}}function pF(t,e,n){return e&&tv(t.prototype,e),n&&tv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gF(t,e,n){return e=sw(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mF(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sw(t){var e=mF(t,"string");return typeof e=="symbol"?e:String(e)}var nv={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},vF='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',Mc=typeof window<"u"&&typeof window.document<"u",Gi=Mc?window:{},Ws=Mc&&Gi.document.documentElement?"ontouchstart"in Gi.document.documentElement:!1,rd=Mc?"PointerEvent"in Gi:!1,$e="viewer",Tl="move",ow="switch",Uo="zoom",ol="".concat($e,"-active"),_F="".concat($e,"-close"),kl="".concat($e,"-fade"),Hf="".concat($e,"-fixed"),yF="".concat($e,"-fullscreen"),iv="".concat($e,"-fullscreen-exit"),Lr="".concat($e,"-hide"),bF="".concat($e,"-hide-md-down"),wF="".concat($e,"-hide-sm-down"),CF="".concat($e,"-hide-xs-down"),Bn="".concat($e,"-in"),Qo="".concat($e,"-invisible"),zs="".concat($e,"-loading"),SF="".concat($e,"-move"),rv="".concat($e,"-open"),ys="".concat($e,"-show"),It="".concat($e,"-transition"),oo="click",Vf="dblclick",sv="dragstart",ov="focusin",av="keydown",zn="load",$r="error",TF=Ws?"touchend touchcancel":"mouseup",kF=Ws?"touchmove":"mousemove",OF=Ws?"touchstart":"mousedown",lv=rd?"pointerdown":OF,cv=rd?"pointermove":kF,uv=rd?"pointerup pointercancel":TF,fv="resize",Qn="transitionend",hv="wheel",dv="ready",pv="show",gv="shown",mv="hide",vv="hidden",_v="view",fa="viewed",yv="move",bv="moved",wv="rotate",Cv="rotated",Sv="scale",Tv="scaled",kv="zoom",Ov="zoomed",Ev="play",xv="stop",Ql="".concat($e,"Action"),sd=/\s\s*/,al=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function ha(t){return typeof t=="string"}var EF=Number.isNaN||Gi.isNaN;function xt(t){return typeof t=="number"&&!EF(t)}function As(t){return typeof t>"u"}function ao(t){return zf(t)==="object"&&t!==null}var xF=Object.prototype.hasOwnProperty;function Ps(t){if(!ao(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&xF.call(n,"isPrototypeOf")}catch{return!1}}function ft(t){return typeof t=="function"}function dt(t,e){if(t&&ft(e))if(Array.isArray(t)||xt(t.length)){var n=t.length,i;for(i=0;i<n&&e.call(t,t[i],i,t)!==!1;i+=1);}else ao(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)});return t}var Ln=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return ao(e)&&i.length>0&&i.forEach(function(o){ao(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},DF=/^(?:width|height|left|top|marginLeft|marginTop)$/;function ti(t,e){var n=t.style;dt(e,function(i,r){DF.test(r)&&xt(i)&&(i+="px"),n[r]=i})}function AF(t){return ha(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function ks(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function je(t,e){if(!(!t||!e)){if(xt(t.length)){dt(t,function(i){je(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function st(t,e){if(!(!t||!e)){if(xt(t.length)){dt(t,function(n){st(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function da(t,e,n){if(e){if(xt(t.length)){dt(t,function(i){da(i,e,n)});return}n?je(t,e):st(t,e)}}var PF=/([a-z\d])([A-Z])/g;function od(t){return t.replace(PF,"$1-$2").toLowerCase()}function Ms(t,e){return ao(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(od(e)))}function Xf(t,e,n){ao(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(od(e)),n)}var aw=function(){var t=!1;if(Mc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});Gi.addEventListener("test",n,i),Gi.removeEventListener("test",n,i)}return t}();function ht(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(sd).forEach(function(o){if(!aw){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Be(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(sd).forEach(function(o){if(i.once&&!aw){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Lt(t,e,n,i){var r;return ft(Event)&&ft(CustomEvent)?r=new CustomEvent(e,id({bubbles:!0,cancelable:!0,detail:n},i)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function MF(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function Ol(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];xt(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),xt(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),xt(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),xt(n)&&n!==1&&h.push("scaleX(".concat(n,")")),xt(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function IF(t){return ha(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var $u=Gi.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Gi.navigator.userAgent);function lw(t,e,n){var i=document.createElement("img");if(t.naturalWidth&&!$u)return n(t.naturalWidth,t.naturalHeight),i;var r=document.body||document.documentElement;return i.onload=function(){n(i.width,i.height),$u||r.removeChild(i)},dt(e.inheritedAttributes,function(o){var h=t.getAttribute(o);h!==null&&i.setAttribute(o,h)}),i.src=t.src,$u||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i)),i}function ll(t){switch(t){case 2:return CF;case 3:return wF;case 4:return bF;default:return""}}function RF(t){var e=id({},t),n=[];return dt(t,function(i,r){delete e[r],dt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;n.push(u)})}),n.sort(function(i,r){return Math.abs(i)<Math.abs(r)}),n[0]}function cl(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:id({timeStamp:Date.now(),startX:n,startY:i},r)}function FF(t){var e=0,n=0,i=0;return dt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}var LF={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,i;e.inline&&(i={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=i),(this.fulled||!i)&&(i=this.containerData),this.viewerData=Ln({},i)},renderViewer:function(){this.options.inline&&!this.fulled&&ti(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,i=this.options,r=this.list,o=[];r.innerHTML="",dt(this.images,function(h,a){var s=h.src,c=h.alt||IF(s),f=e.getImageURL(h);if(s||f){var l=document.createElement("li"),u=document.createElement("img");dt(i.inheritedAttributes,function(d){var p=h.getAttribute(d);p!==null&&u.setAttribute(d,p)}),i.navbar&&(u.src=s||f),u.alt=c,u.setAttribute("data-original-url",f||s),l.setAttribute("data-index",a),l.setAttribute("data-viewer-action","view"),l.setAttribute("role","button"),i.keyboard&&l.setAttribute("tabindex",0),l.appendChild(u),r.appendChild(l),o.push(l)}}),this.items=o,dt(o,function(h){var a=h.firstElementChild,s,c;Xf(a,"filled",!0),i.loading&&je(h,zs),Be(a,zn,s=function(l){ht(a,$r,c),i.loading&&st(h,zs),e.loadImage(l)},{once:!0}),Be(a,$r,c=function(){ht(a,zn,s),i.loading&&st(h,zs)},{once:!0})}),i.transition&&Be(n,fa,function(){je(r,It)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var i=n.nextElementSibling,r=parseInt(window.getComputedStyle(i||n).marginLeft,10),o=n.offsetWidth,h=o+r;ti(this.list,Ln({width:h*this.length-r},Ol({translateX:(this.viewerData.width-o)/2-h*e})))}},resetList:function(){var e=this.list;e.innerHTML="",st(e,It),ti(e,Ol({translateX:0}))},initImage:function(e){var n=this,i=this.options,r=this.image,o=this.viewerData,h=this.footer.offsetHeight,a=o.width,s=Math.max(o.height-h,h),c=this.imageData||{},f;this.imageInitializing={abort:function(){f.onload=null}},f=lw(r,i,function(l,u){var d=l/u,p=Math.max(0,Math.min(1,i.initialCoverage)),m=a,g=s;n.imageInitializing=!1,s*d>a?g=a/d:m=s*d,p=xt(p)?p:.9,m=Math.min(m*p,l),g=Math.min(g*p,u);var v=(a-m)/2,_=(s-g)/2,b={left:v,top:_,x:v,y:_,width:m,height:g,oldRatio:1,ratio:m/l,aspectRatio:d,naturalWidth:l,naturalHeight:u},y=Ln({},b);i.rotatable&&(b.rotate=c.rotate||0,y.rotate=0),i.scalable&&(b.scaleX=c.scaleX||1,b.scaleY=c.scaleY||1,y.scaleX=1,y.scaleY=1),n.imageData=b,n.initialImageData=y,e&&e()})},renderImage:function(e){var n=this,i=this.image,r=this.imageData;if(ti(i,Ln({width:r.width,height:r.height,marginLeft:r.x,marginTop:r.y},Ol(r))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&ks(i,It)){var o=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){ht(i,Qn,o)}},Be(i,Qn,o,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},NF={bind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;Be(n,oo,this.onClick=this.click.bind(this)),Be(n,sv,this.onDragStart=this.dragstart.bind(this)),Be(i,lv,this.onPointerDown=this.pointerdown.bind(this)),Be(r,cv,this.onPointerMove=this.pointermove.bind(this)),Be(r,uv,this.onPointerUp=this.pointerup.bind(this)),Be(r,av,this.onKeyDown=this.keydown.bind(this)),Be(window,fv,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&Be(n,hv,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&Be(i,Vf,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;ht(n,oo,this.onClick),ht(n,sv,this.onDragStart),ht(i,lv,this.onPointerDown),ht(r,cv,this.onPointerMove),ht(r,uv,this.onPointerUp),ht(r,av,this.onKeyDown),ht(window,fv,this.onResize),e.zoomable&&e.zoomOnWheel&&ht(n,hv,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&ht(i,Vf,this.onDblclick)}},jF={click:function(e){var n=this.options,i=this.imageData,r=e.target,o=Ms(r,Ql);switch(!o&&r.localName==="img"&&r.parentElement.localName==="li"&&(r=r.parentElement,o=Ms(r,Ql)),Ws&&e.isTrusted&&r===this.canvas&&clearTimeout(this.clickCanvasTimeout),o){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(Ms(r,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-i.scaleX||-1);break;case"flip-vertical":this.scaleY(-i.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Ws&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,i=this.options,r=this.image,o=this.index,h=this.viewerData;st(r,Qo),i.loading&&st(this.canvas,zs),r.style.cssText="height:0;"+"margin-left:".concat(h.width/2,"px;")+"margin-top:".concat(h.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){da(r,SF,i.movable),da(r,It,i.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,ft(i.viewed)&&Be(n,fa,i.viewed,{once:!0}),Lt(n,fa,{originalImage:e.images[o],index:o,image:r},{cancelable:!1})})})},loadImage:function(e){var n=e.target,i=n.parentNode,r=i.offsetWidth||30,o=i.offsetHeight||50,h=!!Ms(n,"filled");lw(n,this.options,function(a,s){var c=a/s,f=r,l=o;o*c>r?h?f=o*c:l=r/c:h?l=r/c:f=o*c,ti(n,Ln({width:f,height:l},Ol({translateX:(r-f)/2,translateY:(o-l)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var i=e.keyCode||e.which||e.charCode;switch(i){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(i){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,i=this.pointers,r=e.buttons,o=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(xt(r)&&r!==1||xt(o)&&o!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?dt(e.changedTouches,function(a){i[a.identifier]=cl(a)}):i[e.pointerId||0]=cl(e);var h=n.movable?Tl:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(i).length>1?h=Uo:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(h=ow),n.transition&&(h===Tl||h===Uo)&&st(this.image,It),this.action=h}},pointermove:function(e){var n=this.pointers,i=this.action;!this.viewed||!i||(e.preventDefault(),e.changedTouches?dt(e.changedTouches,function(r){Ln(n[r.identifier]||{},cl(r,!0))}):Ln(n[e.pointerId||0]||{},cl(e,!0)),this.change(e))},pointerup:function(e){var n=this,i=this.options,r=this.action,o=this.pointers,h;e.changedTouches?dt(e.changedTouches,function(a){h=o[a.identifier],delete o[a.identifier]}):(h=o[e.pointerId||0],delete o[e.pointerId||0]),r&&(e.preventDefault(),i.transition&&(r===Tl||r===Uo)&&je(this.image,It),this.action=!1,Ws&&r!==Uo&&h&&Date.now()-h.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),i.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){Lt(n.image,Vf,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,i.backdrop&&i.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){Lt(n.canvas,oo,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}dt(this.player.getElementsByTagName("img"),function(n){Be(n,zn,e.loadImage.bind(e),{once:!0}),Lt(n,zn)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,r=1;e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,!0,null,e)}}},BF={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(ft(i.show)&&Be(n,pv,i.show,{once:!0}),Lt(n,pv)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var r=this.viewer;if(st(r,Lr),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("aria-hidden"),i.transition&&!e){var o=this.shown.bind(this);this.transitioning={abort:function(){ht(r,Qn,o),st(r,Bn)}},je(r,It),r.initialOffsetWidth=r.offsetWidth,Be(r,Qn,o,{once:!0}),je(r,Bn)}else je(r,Bn),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,r=this.options;if(r.inline||this.hiding||!(this.isShown||this.showing))return this;if(ft(r.hide)&&Be(i,mv,r.hide,{once:!0}),Lt(i,mv)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var o=this.viewer,h=this.image,a=function(){st(o,Bn),e.hidden()};if(r.transition&&!n){var s=function f(l){l&&l.target===o&&(ht(o,Qn,f),e.hidden())},c=function(){ks(o,It)?(Be(o,Qn,s),st(o,Bn)):a()};this.transitioning={abort:function(){e.viewed&&ks(h,It)?ht(h,Qn,c):ks(o,It)&&ht(o,Qn,s)}},this.viewed&&ks(h,It)?(Be(h,Qn,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else a();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var i=this.element,r=this.options,o=this.title,h=this.canvas,a=this.items[n],s=a.querySelector("img"),c=Ms(s,"originalUrl"),f=s.getAttribute("alt"),l=document.createElement("img");if(dt(r.inheritedAttributes,function(g){var v=s.getAttribute(g);v!==null&&l.setAttribute(g,v)}),l.src=c,l.alt=f,ft(r.view)&&Be(i,_v,r.view,{once:!0}),Lt(i,_v,{originalImage:this.images[n],index:n,image:l})===!1||!this.isShown||this.hiding||this.played)return this;var u=this.items[this.index];u&&(st(u,ol),u.removeAttribute("aria-selected")),je(a,ol),a.setAttribute("aria-selected",!0),r.focus&&a.focus(),this.image=l,this.viewed=!1,this.index=n,this.imageData={},je(l,Qo),r.loading&&je(h,zs),h.innerHTML="",h.appendChild(l),this.renderList(),o.innerHTML="";var d=function(){var v=e.imageData,_=Array.isArray(r.title)?r.title[1]:r.title;o.innerHTML=AF(ft(_)?_.call(e,l,v):"".concat(f," (").concat(v.naturalWidth," × ").concat(v.naturalHeight,")"))},p,m;return Be(i,fa,d,{once:!0}),this.viewing={abort:function(){ht(i,fa,d),l.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(l.src="",ht(l,zn,p),e.timeout&&clearTimeout(e.timeout))}},l.complete?this.load():(Be(l,zn,p=function(){ht(l,$r,m),e.load()},{once:!0}),Be(l,$r,m=function(){ht(l,zn,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),st(l,Qo),r.loading&&st(e.canvas,zs)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){st(l,Qo),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,i=this.index+1;return i>n&&(i=e?0:n),this.view(i),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData;return this.moveTo(As(e)?e:i.x+Number(e),As(n)?n:i.y+Number(n)),this},moveTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.element,h=this.options,a=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&h.movable){var s=a.x,c=a.y,f=!1;if(xt(e)?f=!0:e=s,xt(i)?f=!0:i=c,f){if(ft(h.move)&&Be(o,yv,h.move,{once:!0}),Lt(o,yv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r})===!1)return this;a.x=e,a.y=i,a.left=e,a.top=i,this.moving=!0,this.renderImage(function(){n.moving=!1,ft(h.moved)&&Be(o,bv,h.moved,{once:!0}),Lt(o,bv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,i=this.element,r=this.options,o=this.imageData;if(e=Number(e),xt(e)&&this.viewed&&!this.played&&r.rotatable){var h=o.rotate;if(ft(r.rotate)&&Be(i,wv,r.rotate,{once:!0}),Lt(i,wv,{degree:e,oldDegree:h})===!1)return this;o.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,ft(r.rotated)&&Be(i,Cv,r.rotated,{once:!0}),Lt(i,Cv,{degree:e,oldDegree:h},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.element,o=this.options,h=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&o.scalable){var a=h.scaleX,s=h.scaleY,c=!1;if(xt(e)?c=!0:e=a,xt(i)?c=!0:i=s,c){if(ft(o.scale)&&Be(r,Sv,o.scale,{once:!0}),Lt(r,Sv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s})===!1)return this;h.scaleX=e,h.scaleY=i,this.scaling=!0,this.renderImage(function(){n.scaling=!1,ft(o.scaled)&&Be(r,Tv,o.scaled,{once:!0}),Lt(r,Tv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(o.width*e/o.naturalWidth,n,i,r),this},zoomTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,s=this.options,c=this.pointers,f=this.imageData,l=f.x,u=f.y,d=f.width,p=f.height,m=f.naturalWidth,g=f.naturalHeight;if(e=Math.max(0,e),xt(e)&&this.viewed&&!this.played&&(h||s.zoomable)){if(!h){var v=Math.max(.01,s.minZoomRatio),_=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),_)}if(o)switch(o.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var b=m*e,y=g*e,w=b-d,C=y-p,T=f.ratio;if(ft(s.zoom)&&Be(a,kv,s.zoom,{once:!0}),Lt(a,kv,{ratio:e,oldRatio:T,originalEvent:o})===!1)return this;if(this.zooming=!0,o){var O=MF(this.viewer),D=c&&Object.keys(c).length>0?FF(c):{pageX:o.pageX,pageY:o.pageY};f.x-=w*((D.pageX-O.left-l)/d),f.y-=C*((D.pageY-O.top-u)/p)}else Ps(r)&&xt(r.x)&&xt(r.y)?(f.x-=w*((r.x-l)/d),f.y-=C*((r.y-u)/p)):(f.x-=w/2,f.y-=C/2);f.left=f.x,f.top=f.y,f.width=b,f.height=y,f.oldRatio=T,f.ratio=e,this.renderImage(function(){n.zooming=!1,ft(s.zoomed)&&Be(a,Ov,s.zoomed,{once:!0}),Lt(a,Ov,{ratio:e,oldRatio:T,originalEvent:o},{cancelable:!1})}),i&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var i=this.element,r=this.options;if(ft(r.play)&&Be(i,Ev,r.play,{once:!0}),Lt(i,Ev)===!1)return this;var o=this.player,h=this.loadImage.bind(this),a=[],s=0,c=0;if(this.played=!0,this.onLoadWhenPlay=h,n&&this.requestFullscreen(n),je(o,ys),dt(this.items,function(u,d){var p=u.querySelector("img"),m=document.createElement("img");m.src=Ms(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,s+=1,je(m,kl),da(m,It,r.transition),ks(u,ol)&&(je(m,Bn),c=d),a.push(m),Be(m,zn,h,{once:!0}),o.appendChild(m)}),xt(r.interval)&&r.interval>0){var f=function u(){clearTimeout(e.playing.timeout),st(a[c],Bn),c-=1,c=c>=0?c:s-1,je(a[c],Bn),e.playing.timeout=setTimeout(u,r.interval)},l=function u(){clearTimeout(e.playing.timeout),st(a[c],Bn),c+=1,c=c<s?c:0,je(a[c],Bn),e.playing.timeout=setTimeout(u,r.interval)};s>1&&(this.playing={prev:f,next:l,timeout:setTimeout(l,r.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,i=this.options;if(ft(i.stop)&&Be(n,xv,i.stop,{once:!0}),Lt(n,xv)===!1)return this;var r=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,dt(r.getElementsByTagName("img"),function(o){ht(o,zn,e.onLoadWhenPlay)}),st(r,ys),r.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),je(this.button,iv),n.transition&&(st(o,It),this.viewed&&st(r,It)),je(i,Hf),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("style"),ti(i,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Ln({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){je(r,It),je(o,It)},0)})}),this)},exit:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),st(this.button,iv),n.transition&&(st(o,It),this.viewed&&st(r,It)),n.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),st(i,Hf),ti(i,{zIndex:n.zIndexInline}),this.viewerData=Ln({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){je(r,It),je(o,It)},0)})}),this)},tooltip:function(){var e=this,n=this.options,i=this.tooltipBox,r=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(i.textContent="".concat(Math.round(r.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&Lt(i,Qn),je(i,ys),je(i,kl),je(i,It),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,je(i,Bn)):(je(i,ys),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(Be(i,Qn,function(){st(i,ys),st(i,kl),st(i,It),i.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),st(i,Bn),e.fading=!0):(st(i,ys),i.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Ln({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,i=this.options,r=this.isImg;if(r&&!n.parentNode)return this.destroy();var o=[];if(dt(r?[n]:n.querySelectorAll("img"),function(c){ft(i.filter)?i.filter.call(e,c)&&o.push(c):e.getImageURL(c)&&o.push(c)}),!o.length)return this;if(this.images=o,this.length=o.length,this.ready){var h=[];if(dt(this.items,function(c,f){var l=c.querySelector("img"),u=o[f];u&&l?(u.src!==l.src||u.alt!==l.alt)&&h.push(f):h.push(f)}),ti(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=h.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var s=this.items[this.index];je(s,ol),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[$e]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||ht(e,oo,this.onStart),e[$e]=void 0,this):this}},UF={getImageURL:function(e){var n=this.options.url;return ha(n)?n=e.getAttribute(n):ft(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),Be(document,ov,this.onFocusin=function(n){var i=e.viewer,r=n.target;if(!(r===document||r===i||i.contains(r))){for(;r;){if(r.getAttribute("tabindex")!==null||r.getAttribute("aria-modal")==="true")return;r=r.parentElement}i.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(ht(document,ov,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;je(e,rv),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;st(e,rv),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,i=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(i.focus(),this.enforceFocus()),ft(n.shown)&&Be(e,gv,n.shown,{once:!0}),Lt(e,gv)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,i=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),je(i,Lr),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),i.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(ft(n.hidden)&&Be(e,vv,n.hidden,{once:!0}),Lt(e,vv,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var i=n.documentElement;i.requestFullscreen?Ps(e)?i.requestFullscreen(e):i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,i=this.pointers,r=i[Object.keys(i)[0]];if(r){var o=r.endX-r.startX,h=r.endY-r.startY;switch(this.action){case Tl:(o!==0||h!==0)&&(this.pointerMoved=!0,this.move(o,h,e));break;case Uo:this.zoom(RF(i),!1,null,e);break;case ow:{this.action="switched";var a=Math.abs(o);a>1&&a>Math.abs(h)&&(this.pointers={},o>1?this.prev(n.loop):o<-1&&this.next(n.loop));break}}dt(i,function(s){s.startX=s.endX,s.startY=s.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},YF=Gi.Viewer,WF=function(t){return function(){return t+=1,t}}(-1),cw=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dF(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Ln({},nv,Ps(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=WF(),this.init()}return pF(t,[{key:"init",value:function(){var n=this,i=this.element,r=this.options;if(!i[$e]){i[$e]=this,r.focus&&!r.keyboard&&(r.focus=!1);var o=i.localName==="img",h=[];if(dt(o?[i]:i.querySelectorAll("img"),function(c){ft(r.filter)?r.filter.call(n,c)&&h.push(c):n.getImageURL(c)&&h.push(c)}),this.isImg=o,this.length=h.length,this.images=h,this.initBody(),As(document.createElement($e).style.transition)&&(r.transition=!1),r.inline){var a=0,s=function(){if(a+=1,a===n.length){var f;n.initializing=!1,n.delaying={abort:function(){clearTimeout(f)}},f=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){dt(h,function(f){f.complete||(ht(f,zn,s),ht(f,$r,s))})}},dt(h,function(c){if(c.complete)s();else{var f,l;Be(c,zn,f=function(){ht(c,$r,l),s()},{once:!0}),Be(c,$r,l=function(){ht(c,zn,f),s()},{once:!0})}})}else Be(i,oo,this.onStart=function(c){var f=c.target;f.localName==="img"&&(!ft(r.filter)||r.filter.call(n,f))&&n.view(n.images.indexOf(f))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,i=this.options,r=n.parentNode,o=document.createElement("div");o.innerHTML=vF;var h=o.querySelector(".".concat($e,"-container")),a=h.querySelector(".".concat($e,"-title")),s=h.querySelector(".".concat($e,"-toolbar")),c=h.querySelector(".".concat($e,"-navbar")),f=h.querySelector(".".concat($e,"-button")),l=h.querySelector(".".concat($e,"-canvas"));if(this.parent=r,this.viewer=h,this.title=a,this.toolbar=s,this.navbar=c,this.button=f,this.canvas=l,this.footer=h.querySelector(".".concat($e,"-footer")),this.tooltipBox=h.querySelector(".".concat($e,"-tooltip")),this.player=h.querySelector(".".concat($e,"-player")),this.list=h.querySelector(".".concat($e,"-list")),h.id="".concat($e).concat(this.id),a.id="".concat($e,"Title").concat(this.id),je(a,i.title?ll(Array.isArray(i.title)?i.title[0]:i.title):Lr),je(c,i.navbar?ll(i.navbar):Lr),da(f,Lr,!i.button),i.keyboard&&f.setAttribute("tabindex",0),i.backdrop&&(je(h,"".concat($e,"-backdrop")),!i.inline&&i.backdrop!=="static"&&Xf(l,Ql,"hide")),ha(i.className)&&i.className&&i.className.split(sd).forEach(function(b){je(h,b)}),i.toolbar){var u=document.createElement("ul"),d=Ps(i.toolbar),p=al.slice(0,3),m=al.slice(7,9),g=al.slice(9);d||je(s,ll(i.toolbar)),dt(d?i.toolbar:al,function(b,y){var w=d&&Ps(b),C=d?od(y):b,T=w&&!As(b.show)?b.show:b;if(!(!T||!i.zoomable&&p.indexOf(C)!==-1||!i.rotatable&&m.indexOf(C)!==-1||!i.scalable&&g.indexOf(C)!==-1)){var O=w&&!As(b.size)?b.size:b,D=w&&!As(b.click)?b.click:b,I=document.createElement("li");i.keyboard&&I.setAttribute("tabindex",0),I.setAttribute("role","button"),je(I,"".concat($e,"-").concat(C)),ft(D)||Xf(I,Ql,C),xt(T)&&je(I,ll(T)),["small","large"].indexOf(O)!==-1?je(I,"".concat($e,"-").concat(O)):C==="play"&&je(I,"".concat($e,"-large")),ft(D)&&Be(I,oo,D),u.appendChild(I)}}),s.appendChild(u)}else je(s,Lr);if(!i.rotatable){var v=s.querySelectorAll('li[class*="rotate"]');je(v,Qo),dt(v,function(b){s.appendChild(b)})}if(i.inline)je(f,yF),ti(h,{zIndex:i.zIndexInline}),window.getComputedStyle(r).position==="static"&&ti(r,{position:"relative"}),r.insertBefore(h,n.nextSibling);else{je(f,_F),je(h,Hf),je(h,kl),je(h,Lr),ti(h,{zIndex:i.zIndex});var _=i.container;ha(_)&&(_=n.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(h)}if(i.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,ft(i.ready)&&Be(n,dv,i.ready,{once:!0}),Lt(n,dv)===!1){this.ready=!1;return}this.ready&&i.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=YF,t}},{key:"setDefaults",value:function(n){Ln(nv,Ps(n)&&n)}}]),t}();Ln(cw.prototype,LF,NF,jF,BF,UF);function Dv(t,e,n){const i=t.slice();return i[8]=e[n],i}function Av(t){var T;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w;a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let C=((T=t[2].thumbnails)==null?void 0:T.length)&&Pv(t);return{c(){e=x("div"),n=x("div"),i=x("h2"),r=x("span"),r.textContent="미리보기",o=V(),h=x("button"),he(a.$$.fragment),s=V(),c=x("div"),f=x("div"),l=x("div"),u=x("img"),p=V(),C&&C.c(),m=V(),g=x("div"),v=x("button"),v.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),Ye(u.src,d=t[1])||S(u,"src",d),S(u,"alt",""),S(u,"class","object-contain max-h-full max-w-full"),S(l,"class","h-[50vh] flex justify-center items-center"),S(f,"class","flex-grow overflow-y-auto"),S(c,"class","flex flex-col flex-grow overflow-hidden"),S(v,"class","btn secondary-btn"),S(g,"class","mt-3 flex justify-center"),S(n,"class","flex flex-col h-full max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(O,D){B(O,e,D),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u),k(f,p),C&&C.m(f,null),k(n,m),k(n,g),k(g,v),b=!0,y||(w=[Q(h,"click",dn),Q(v,"click",dn),Q(e,"introstart",t[3]),Q(e,"outroend",t[4])],y=!0)},p(O,D){var I;(!b||D&2&&!Ye(u.src,d=O[1]))&&S(u,"src",d),(I=O[2].thumbnails)!=null&&I.length?C?C.p(O,D):(C=Pv(O),C.c(),C.m(f,null)):C&&(C.d(1),C=null)},i(O){b||(M(a.$$.fragment,O),O&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(O){U(a.$$.fragment,O),O&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(O){O&&N(e),fe(a),C&&C.d(),O&&_&&_.end(),y=!1,Ue(w)}}}function Pv(t){let e,n,i=Fe(t[2].thumbnails),r=[];for(let o=0;o<i.length;o+=1)r[o]=Mv(Dv(t,i,o));return{c(){e=x("div"),n=x("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 w-full"),S(e,"class","mt-3")},m(o,h){B(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,h){if(h&6){i=Fe(o[2].thumbnails);let a;for(a=0;a<i.length;a+=1){const s=Dv(o,i,a);r[a]?r[a].p(s,h):(r[a]=Mv(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(o){o&&N(e),Pt(r,o)}}}function Mv(t){let e,n,i,r,o,h;function a(){return t[5](t[8])}return{c(){e=x("button"),n=x("img"),r=V(),Ye(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt","미리보기"),S(n,"class","rounded-lg object-contain h-full"),S(e,"type","button")},m(s,c){B(s,e,c),k(e,n),k(e,r),o||(h=Q(e,"click",a),o=!0)},p(s,c){t=s,c&4&&!Ye(n.src,i=t[8].url)&&S(n,"src",i)},d(s){s&&N(e),o=!1,h()}}}function zF(t){let e,n,i=t[0]&&Av(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=Av(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function HF(t,e,n){let i;Me(t,Le,c=>n(2,i=c));let{isOpen:r}=e,o=i.thumbnails[0].url;Xt(),xi(async()=>{});function h(c){Si.call(this,t,c)}function a(c){Si.call(this,t,c)}const s=c=>n(1,o=c.url);return t.$$set=c=>{"isOpen"in c&&n(0,r=c.isOpen)},[r,o,i,h,a,s]}class VF extends qe{constructor(e){super(),Ge(this,e,HF,zF,Ve,{isOpen:0})}}function Iv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Rv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Fv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Lv(t){let e,n=t[3].product.optionNames[0]+"",i;return{c(){e=x("label"),i=be(n),S(e,"for","color"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[0]+"")&&He(i,n)},d(r){r&&N(e)}}}function Nv(t){let e,n=t[20]+"",i,r;return{c(){e=x("option"),i=be(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){B(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&N(e)}}}function jv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[1]&&Bv(t),s=Fe(t[2].optionValue2),c=[];for(let f=0;f<s.length;f+=1)c[f]=Uv(Rv(t,s,f));return{c(){e=x("div"),a&&a.c(),n=V(),i=x("select"),r=x("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Re(r,r.__value),S(i,"id","size"),S(i,"class","select w-full"),t[1].optionValue2===void 0&&zt(()=>t[11].call(i))},m(f,l){B(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);wi(i,t[1].optionValue2,!0),o||(h=[Q(i,"change",t[11]),Q(i,"change",t[12])],o=!0)},p(f,l){if(f[3].product.optionNames[1]?a?a.p(f,l):(a=Bv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Fe(f[2].optionValue2);let u;for(u=0;u<s.length;u+=1){const d=Rv(f,s,u);c[u]?c[u].p(d,l):(c[u]=Uv(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&wi(i,f[1].optionValue2)},d(f){f&&N(e),a&&a.d(),Pt(c,f),o=!1,Ue(h)}}}function Bv(t){let e,n=t[3].product.optionNames[1]+"",i;return{c(){e=x("label"),i=be(n),S(e,"for","size"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[1]+"")&&He(i,n)},d(r){r&&N(e)}}}function Uv(t){let e,n=t[20]+"",i,r;return{c(){e=x("option"),i=be(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){B(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&N(e)}}}function Yv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[2]&&Wv(t),s=Fe(t[2].optionValue3),c=[];for(let f=0;f<s.length;f+=1)c[f]=zv(Iv(t,s,f));return{c(){e=x("div"),a&&a.c(),n=V(),i=x("select"),r=x("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Re(r,r.__value),S(i,"id","option3"),S(i,"class","select w-full"),t[1].optionValue3===void 0&&zt(()=>t[13].call(i))},m(f,l){B(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);wi(i,t[1].optionValue3,!0),o||(h=[Q(i,"change",t[13]),Q(i,"change",t[14])],o=!0)},p(f,l){if(f[3].product.optionNames[2]?a?a.p(f,l):(a=Wv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Fe(f[2].optionValue3);let u;for(u=0;u<s.length;u+=1){const d=Iv(f,s,u);c[u]?c[u].p(d,l):(c[u]=zv(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&wi(i,f[1].optionValue3)},d(f){f&&N(e),a&&a.d(),Pt(c,f),o=!1,Ue(h)}}}function Wv(t){let e,n=t[3].product.optionNames[2]+"",i;return{c(){e=x("label"),i=be(n),S(e,"for","option3"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[2]+"")&&He(i,n)},d(r){r&&N(e)}}}function zv(t){let e,n=t[20]+"",i,r;return{c(){e=x("option"),i=be(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){B(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&N(e)}}}function Hv(t){let e,n,i,r;return{c(){e=x("div"),n=x("button"),n.textContent="취소",S(n,"type","button"),S(n,"class","btn dark-btn w-full")},m(o,h){B(o,e,h),k(e,n),i||(r=Q(n,"click",t[16]),i=!0)},p:ge,d(o){o&&N(e),i=!1,r()}}}function XF(t){var w;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m=t[3].product.optionNames[0]&&Lv(t),g=Fe(t[2].optionValue1),v=[];for(let C=0;C<g.length;C+=1)v[C]=Nv(Fv(t,g,C));let _=t[1].optionValue1&&jv(t),b=t[1].optionValue2&&t[2].optionValue3.length>0&&Yv(t),y=!((w=t[4])!=null&&w.length)&&Hv(t);return{c(){e=x("div"),n=x("div"),i=x("div"),m&&m.c(),r=V(),o=x("select"),h=x("option"),h.textContent="선택하세요";for(let C=0;C<v.length;C+=1)v[C].c();a=V(),_&&_.c(),s=V(),b&&b.c(),c=V(),f=x("div"),l=x("button"),l.textContent="선택완료",u=V(),y&&y.c(),h.__value="",Re(h,h.__value),S(o,"id","color"),S(o,"class","select w-full"),t[1].optionValue1===void 0&&zt(()=>t[9].call(o)),S(l,"type","button"),S(l,"class","btn primary-btn w-full"),S(n,"class","flex flex-col absolute top-1/2 left-1/2 transform -translate-xy-50 bg-white border w-full max-h-[400px] max-w-[400px] drop-shadow-lg h-full rounded-lg p-5 gap-3"),S(e,"class","flex absolute h-full w-full max-h-[100%] max-w-[100%] grow flex-col bg-white rounded bg-opacity-95 z-50 border")},m(C,T){B(C,e,T),k(e,n),k(n,i),m&&m.m(i,null),k(i,r),k(i,o),k(o,h);for(let O=0;O<v.length;O+=1)v[O]&&v[O].m(o,null);wi(o,t[1].optionValue1,!0),k(n,a),_&&_.m(n,null),k(n,s),b&&b.m(n,null),k(n,c),k(n,f),k(f,l),k(n,u),y&&y.m(n,null),d||(p=[Q(o,"change",t[9]),Q(o,"change",t[10]),Q(l,"click",t[15])],d=!0)},p(C,[T]){var O;if(C[3].product.optionNames[0]?m?m.p(C,T):(m=Lv(C),m.c(),m.m(i,r)):m&&(m.d(1),m=null),T&4){g=Fe(C[2].optionValue1);let D;for(D=0;D<g.length;D+=1){const I=Fv(C,g,D);v[D]?v[D].p(I,T):(v[D]=Nv(I),v[D].c(),v[D].m(o,null))}for(;D<v.length;D+=1)v[D].d(1);v.length=g.length}T&6&&wi(o,C[1].optionValue1),C[1].optionValue1?_?_.p(C,T):(_=jv(C),_.c(),_.m(n,s)):_&&(_.d(1),_=null),C[1].optionValue2&&C[2].optionValue3.length>0?b?b.p(C,T):(b=Yv(C),b.c(),b.m(n,c)):b&&(b.d(1),b=null),(O=C[4])!=null&&O.length?y&&(y.d(1),y=null):y?y.p(C,T):(y=Hv(C),y.c(),y.m(n,null))},i:ge,o:ge,d(C){C&&N(e),m&&m.d(),Pt(v,C),_&&_.d(),b&&b.d(),y&&y.d(),d=!1,Ue(p)}}}function $F(t,e,n){let i,r,o,h;Me(t,Le,T=>n(3,r=T)),Me(t,Wl,T=>n(18,o=T)),Me(t,di,T=>n(4,h=T));let{publishId:a}=e,{loadPublish:s}=e,{runEditor:c}=e;const f=o.linkOptions.reduce((T,O,D)=>{if(O.editorOptions){const I={...O.editorOptions,productNo:O.productNo,productOption:O.productOptions,publish:O.publish};T=[...T,I]}return T},[]);let l={optionValue1:[],optionValue2:[],optionValue3:[]},u={optionValue1:"",optionValue2:"",optionValue3:""};function d(T,O){const D=O.target.value;if(n(1,u[T]=D,u),T!=="optionValue3")for(let I=parseInt(T.slice(-1))+1;I<=3;I++)n(1,u[`optionValue${I}`]="",u);n(1,u={...u})}async function p(){n(7,a=i.publish),await s(),ye(Le,r.currentOption=i,r)}function m(){u.optionValue1=Yo(this),n(1,u),n(2,l),n(1,u)}const g=T=>d("optionValue1",T);function v(){u.optionValue2=Yo(this),n(1,u),n(2,l),n(1,u)}const _=T=>d("optionValue2",T);function b(){u.optionValue3=Yo(this),n(1,u),n(2,l),n(1,u)}const y=T=>d("optionValue3",T),w=()=>p(),C=()=>n(0,c=!1);return t.$$set=T=>{"publishId"in T&&n(7,a=T.publishId),"loadPublish"in T&&n(8,s=T.loadPublish),"runEditor"in T&&n(0,c=T.runEditor)},t.$$.update=()=>{t.$$.dirty&2&&(u.optionValue1?n(2,l.optionValue2=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1).map(T=>T.optionValue2))],l):n(2,l.optionValue2=[],l)),t.$$.dirty&2&&(u.optionValue1&&u.optionValue2?n(2,l.optionValue3=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2).map(T=>T.optionValue3).filter(Boolean))],l):n(2,l.optionValue3=[],l)),t.$$.dirty&2&&(i=f.find(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2&&(T.optionValue3===u.optionValue3||!T.optionValue3)))},n(2,l.optionValue1=[...new Set(f.map(T=>T.optionValue1))],l),[c,u,l,r,h,d,p,a,s,m,g,v,_,b,y,w,C]}class GF extends qe{constructor(e){super(),Ge(this,e,$F,XF,Ve,{publishId:7,loadPublish:8,runEditor:0})}}function qF(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w,C;return n=new Ce({props:{icon:"file-icons:arttext4",height:"20"}}),a=new Ce({props:{icon:"ph:upload-bold",height:"20"}}),u=new Ce({props:{icon:"mingcute:text-2-fill",height:"20"}}),v=new Ce({props:{icon:"ic:outline-draw",height:"20"}}),{c(){e=x("button"),he(n.$$.fragment),i=V(),r=x("span"),r.textContent="클립아트",o=V(),h=x("button"),he(a.$$.fragment),s=V(),c=x("span"),c.textContent="업로드",f=V(),l=x("button"),he(u.$$.fragment),d=V(),p=x("span"),p.textContent="텍스트",m=V(),g=x("button"),he(v.$$.fragment),_=V(),b=x("span"),b.textContent="도형/그리기",S(r,"class","whitespace-nowrap text-2xs hidden md:block"),S(e,"type","button"),S(e,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(c,"class","whitespace-nowrap text-2xs hidden md:block"),S(h,"type","button"),S(h,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(p,"class","whitespace-nowrap text-2xs hidden md:block"),S(l,"type","button"),S(l,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(b,"class","whitespace-nowrap text-2xs hidden md:block"),S(g,"type","button"),S(g,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded")},m(T,O){B(T,e,O),ue(n,e,null),k(e,i),k(e,r),B(T,o,O),B(T,h,O),ue(a,h,null),k(h,s),k(h,c),B(T,f,O),B(T,l,O),ue(u,l,null),k(l,d),k(l,p),B(T,m,O),B(T,g,O),ue(v,g,null),k(g,_),k(g,b),y=!0,w||(C=[Q(e,"click",t[1]),Q(h,"click",t[2]),Q(l,"click",t[3]),Q(g,"click",t[4])],w=!0)},p:ge,i(T){y||(M(n.$$.fragment,T),M(a.$$.fragment,T),M(u.$$.fragment,T),M(v.$$.fragment,T),y=!0)},o(T){U(n.$$.fragment,T),U(a.$$.fragment,T),U(u.$$.fragment,T),U(v.$$.fragment,T),y=!1},d(T){T&&(N(e),N(o),N(h),N(f),N(l),N(m),N(g)),fe(n),fe(a),fe(u),fe(v),w=!1,Ue(C)}}}function KF(t,e,n){let i;return Me(t,Yt,s=>n(0,i=s)),[i,()=>ye(Yt,i="clipart",i),()=>ye(Yt,i="upload",i),()=>ye(Yt,i="text",i),()=>ye(Yt,i="draw",i)]}class JF extends qe{constructor(e){super(),Ge(this,e,KF,qF,Ve,{})}}function Vv(t){let e,n,i,r,o,h,a,s,c,f=t[0].product.productName+"",l,u,d,p,m,g,v,_,b,y,w,C=t[0].currentOption&&Xv(t);return{c(){e=x("div"),n=x("h2"),n.textContent="선택상품",i=V(),r=x("div"),o=x("img"),a=V(),s=x("div"),c=x("p"),l=be(f),u=V(),C&&C.c(),d=V(),p=x("div"),m=x("button"),m.textContent="-",g=V(),v=x("input"),_=V(),b=x("button"),b.textContent="+",S(n,"class","text-xs border-b p-3"),Ye(o.src,h=t[0].product.images[0].url)||S(o,"src",h),S(o,"alt","thumbnail"),S(o,"class","max-h-12 max-w-12 object-contain"),S(c,"class","text-xs grow"),S(s,"class","flex flex-col"),S(m,"type","button"),S(m,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(v,"type","text"),S(v,"class","border w-12 input-sm rounded-none"),S(b,"type","button"),S(b,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(p,"class","flex"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(T,O){B(T,e,O),k(e,n),k(e,i),k(e,r),k(r,o),k(r,a),k(r,s),k(s,c),k(c,l),k(s,u),C&&C.m(s,null),k(r,d),k(r,p),k(p,m),k(p,g),k(p,v),Re(v,t[0].count),k(p,_),k(p,b),y||(w=[Q(m,"click",t[3]),Q(v,"input",t[4]),Q(b,"click",t[5])],y=!0)},p(T,O){O&1&&!Ye(o.src,h=T[0].product.images[0].url)&&S(o,"src",h),O&1&&f!==(f=T[0].product.productName+"")&&He(l,f),T[0].currentOption?C?C.p(T,O):(C=Xv(T),C.c(),C.m(s,null)):C&&(C.d(1),C=null),O&1&&v.value!==T[0].count&&Re(v,T[0].count)},d(T){T&&N(e),C&&C.d(),y=!1,Ue(w)}}}function Xv(t){let e,n,i,r=t[0].currentOption.optionValue1&&$v(t),o=t[0].currentOption.optionValue2&&Gv(t),h=t[0].currentOption.optionValue3&&qv(t);return{c(){e=x("p"),r&&r.c(),n=V(),o&&o.c(),i=V(),h&&h.c(),S(e,"class","text-xs grow mt-1 text-gray-500")},m(a,s){B(a,e,s),r&&r.m(e,null),k(e,n),o&&o.m(e,null),k(e,i),h&&h.m(e,null)},p(a,s){a[0].currentOption.optionValue1?r?r.p(a,s):(r=$v(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),a[0].currentOption.optionValue2?o?o.p(a,s):(o=Gv(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null),a[0].currentOption.optionValue3?h?h.p(a,s):(h=qv(a),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(a){a&&N(e),r&&r.d(),o&&o.d(),h&&h.d()}}}function $v(t){let e=t[0].currentOption.optionValue1+"",n;return{c(){n=be(e)},m(i,r){B(i,n,r)},p(i,r){r&1&&e!==(e=i[0].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&N(n)}}}function Gv(t){let e,n=t[0].currentOption.optionValue2+"",i;return{c(){e=be("/ "),i=be(n)},m(r,o){B(r,e,o),B(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function qv(t){let e,n=t[0].currentOption.optionValue3+"",i;return{c(){e=be("/ "),i=be(n)},m(r,o){B(r,e,o),B(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function ZF(t){let e,n=t[0].product&&Vv(t);return{c(){n&&n.c(),e=Je()},m(i,r){n&&n.m(i,r),B(i,e,r)},p(i,[r]){i[0].product?n?n.p(i,r):(n=Vv(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d(i)}}}function QF(t,e,n){let i;Me(t,Le,c=>n(0,i=c));function r(){ye(Le,i.count++,i)}function o(){i.count>1&&ye(Le,i.count--,i)}const h=()=>o();function a(){i.count=this.value,Le.set(i)}return[i,r,o,h,a,()=>r()]}class eL extends qe{constructor(e){super(),Ge(this,e,QF,ZF,Ve,{})}}function tL(t,{from:e,to:n},i={}){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform,[h,a]=r.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*h/n.width-(n.left+h),c=e.top+e.height*a/n.height-(n.top+a),{delay:f=0,duration:l=d=>Math.sqrt(d)*120,easing:u=ph}=i;return{delay:f,duration:Hn(l)?l(Math.sqrt(s*s+c*c)):l,easing:u,css:(d,p)=>{const m=p*s,g=p*c,v=d+p*e.width/n.width,_=d+p*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${_});`}}}function Kv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ec(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kv(Object(n),!0).forEach(function(i){lo(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ea(t){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(t)}function lo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nL(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function iL(t,e){if(t==null)return{};var n=nL(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function rL(t,e){return oL(t)||lL(t,e)||ad(t,e)||uL()}function Xn(t){return sL(t)||aL(t)||ad(t)||cL()}function sL(t){if(Array.isArray(t))return $f(t)}function oL(t){if(Array.isArray(t))return t}function aL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,o=!1,h,a;try{for(n=n.call(t);!(r=(h=n.next()).done)&&(i.push(h.value),!(e&&i.length===e));r=!0);}catch(s){o=!0,a=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw a}}return i}}function ad(t,e){if(t){if(typeof t=="string")return $f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $f(t,e)}}function $f(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ra(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ad(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,h=!1,a;return{s:function(){n=n.call(t)},n:function(){var s=n.next();return o=s.done,s},e:function(s){h=!0,a=s},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(h)throw a}}}}var fL="finalize",hL="consider";function co(t,e,n){t.dispatchEvent(new CustomEvent(fL,{detail:{items:e,info:n}}))}function Cr(t,e,n){t.dispatchEvent(new CustomEvent(hL,{detail:{items:e,info:n}}))}var Ic="draggedEntered",Fa="draggedLeft",Rc="draggedOverIndex",ld="draggedLeftDocument",tc={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function dL(t,e,n){t.dispatchEvent(new CustomEvent(Ic,{detail:{indexObj:e,draggedEl:n}}))}function pL(t,e,n){t.dispatchEvent(new CustomEvent(Fa,{detail:{draggedEl:e,type:tc.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function gL(t,e){t.dispatchEvent(new CustomEvent(Fa,{detail:{draggedEl:e,type:tc.OUTSIDE_OF_ANY}}))}function mL(t,e,n){t.dispatchEvent(new CustomEvent(Rc,{detail:{indexObj:e,draggedEl:n}}))}function vL(t){window.dispatchEvent(new CustomEvent(ld,{detail:{draggedEl:t}}))}var bn={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Ic,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Rc,DRAGGED_LEFT:Fa,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},xn={POINTER:"pointer",KEYBOARD:"keyboard"},Fc="isDndShadowItem",cd="data-is-dnd-shadow-item-internal",_L="data-is-dnd-shadow-item-hint",yL="id:dnd-shadow-placeholder-0000",bL="dnd-action-dragged-el",tn="id",Gf=0;function uw(){Gf++}function fw(){if(Gf===0)throw new Error("Bug! trying to decrement when there are no dropzones");Gf--}var ud=typeof window>"u";function qf(t){var e,n=t.getBoundingClientRect(),i=getComputedStyle(t),r=i.transform;if(r){var o,h,a,s;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),o=+e[0],h=+e[5],a=+e[12],s=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),o=+e[0],h=+e[3],a=+e[4],s=+e[5];else return n;var c=i.transformOrigin,f=n.x-a-(1-o)*parseFloat(c),l=n.y-s-(1-h)*parseFloat(c.slice(c.indexOf(" ")+1)),u=o?n.width/o:t.offsetWidth,d=h?n.height/h:t.offsetHeight;return{x:f,y:l,width:u,height:d,top:l,right:f+u,bottom:l+d,left:f}}else return n}function hw(t){var e=qf(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function dw(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function pw(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function wL(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Lc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function pa(t){return pw(dw(t))}function Jv(t,e){var n=pa(t),i=hw(e);return Lc(n,i)}function CL(t,e){var n=pa(t),i=pa(e);return wL(n,i)}function SL(t){var e=dw(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var Hs;function fd(){Hs=new Map}fd();function TL(t){var e=Array.from(t.children).findIndex(function(n){return n.getAttribute(cd)});if(e>=0)return Hs.has(t)||Hs.set(t,new Map),Hs.get(t).set(e,hw(t.children[e])),e}function kL(t,e){if(!Jv(t,e))return null;var n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};for(var i=TL(e),r=0;r<n.length;r++)if(Jv(t,n[r])){var o=Hs.has(e)&&Hs.get(e).get(r);return o&&!Lc(pa(t),o)?{index:i,isProximityBased:!1}:{index:r,isProximityBased:!1}}for(var h=Number.MAX_VALUE,a=void 0,s=0;s<n.length;s++){var c=CL(t,n[s]);c<h&&(h=c,a=s)}return{index:a,isProximityBased:!0}}function ul(t){return JSON.stringify(t,null,2)}function nc(t){if(!t)throw new Error("cannot get depth of a falsy node");return gw(t,0)}function gw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.parentElement?gw(t.parentElement,e+1):e-1}function OL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function EL(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var xL=200,Zv=10,Kf;function DL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xL,i=arguments.length>3?arguments[3]:void 0,r,o,h=!1,a,s=Array.from(e).sort(function(f,l){return nc(l)-nc(f)});function c(){var f=pa(t),l=i.multiScrollIfNeeded();if(!l&&a&&Math.abs(a.x-f.x)<Zv&&Math.abs(a.y-f.y)<Zv){Kf=window.setTimeout(c,n);return}if(SL(t)){vL(t);return}a=f;var u=!1,d=Ra(s),p;try{for(d.s();!(p=d.n()).done;){var m=p.value;l&&fd();var g=kL(t,m);if(g!==null){var v=g.index;u=!0,m!==r?(r&&pL(r,t,m),dL(m,g,t),r=m):v!==o&&(mL(m,g,t),o=v);break}}}catch(_){d.e(_)}finally{d.f()}!u&&h&&r?(gL(r,t),r=void 0,o=void 0,h=!1):h=!0,Kf=window.setTimeout(c,n)}c()}function AL(){clearTimeout(Kf),fd()}var Fo=30;function PL(){var t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(o){var h=t,a=h.directionObj,s=h.stepPx;a&&(o.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(function(){return n(o)}))}function i(o){return Fo-o}function r(o,h){if(!h)return!1;var a=ML(o,h);if(a===null)return e(),!1;var s=!!t.directionObj,c=!1,f=!1;return h.scrollHeight>h.clientHeight&&(a.bottom<Fo?(c=!0,t.directionObj={x:0,y:1},t.stepPx=i(a.bottom)):a.top<Fo&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=i(a.top)),!s&&c)||h.scrollWidth>h.clientWidth&&(a.right<Fo?(f=!0,t.directionObj={x:1,y:0},t.stepPx=i(a.right)):a.left<Fo&&(f=!0,t.directionObj={x:-1,y:0},t.stepPx=i(a.left)),!s&&f)?(n(h),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function ML(t,e){var n=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Lc(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:n.right-t.x}:null}function IL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=FL(t),i=Array.from(n).sort(function(a,s){return nc(s)-nc(a)}),r=PL(),o=r.scrollIfNeeded;function h(){var a=e();if(!a||!i)return!1;for(var s=i.filter(function(l){return Lc(a,l.getBoundingClientRect())||l===document.scrollingElement}),c=0;c<s.length;c++){var f=o(a,s[c]);if(f)return!0}return!1}return{multiScrollIfNeeded:n.size>0?h:function(){return!1}}}function RL(t){if(!t)return[];for(var e=[],n=t;n;){var i=window.getComputedStyle(n),r=i.overflow;r.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&e.push(n),n=n.parentElement}return e}function FL(t){var e=new Set,n=Ra(t),i;try{for(n.s();!(i=n.n()).done;){var r=i.value;RL(r).forEach(function(o){return e.add(o)})}}catch(o){n.e(o)}finally{n.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function LL(t){var e=t.cloneNode(!0),n=[],i=t.tagName==="SELECT",r=i?[t]:Xn(t.querySelectorAll("select")),o=Ra(r),h;try{for(o.s();!(h=o.n()).done;){var a=h.value;n.push(a.value)}}catch(b){o.e(b)}finally{o.f()}if(r.length>0)for(var s=i?[e]:Xn(e.querySelectorAll("select")),c=0;c<s.length;c++){var f=s[c],l=n[c],u=f.querySelector('option[value="'.concat(l,'"'));u&&u.setAttribute("selected",!0)}var d=t.tagName==="CANVAS",p=d?[t]:Xn(t.querySelectorAll("canvas"));if(p.length>0)for(var m=d?[e]:Xn(e.querySelectorAll("canvas")),g=0;g<m.length;g++){var v=p[g],_=m[g];_.width=v.width,_.height=v.height,_.getContext("2d").drawImage(v,0,0)}return e}var ga=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),NL=lo({},ga.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function mw(t){if(!ga[t])throw new Error("Can't get non existing feature flag ".concat(t,"! Supported flags: ").concat(Object.keys(ga)));return NL[t]}var jL=.2;function xr(t){return"".concat(t," ").concat(jL,"s ease")}function BL(t,e){var n=t.getBoundingClientRect(),i=LL(t);vw(t,i),i.id=bL,i.style.position="fixed";var r=n.top,o=n.left;if(i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px"),e){var h=pw(n);r-=h.y-e.y,o-=h.x-e.x,window.setTimeout(function(){i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px")},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height="".concat(n.height,"px"),i.style.width="".concat(n.width,"px"),i.style.transition="".concat(xr("top"),", ").concat(xr("left"),", ").concat(xr("background-color"),", ").concat(xr("opacity"),", ").concat(xr("color")," "),window.setTimeout(function(){return i.style.transition+=", ".concat(xr("width"),", ").concat(xr("height"))},0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function UL(t){t.style.cursor="grab"}function YL(t,e,n,i){vw(e,t);var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),h=r.width-o.width,a=r.height-o.height;if(h||a){var s={left:(n-o.left)/o.width,top:(i-o.top)/o.height};mw(ga.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height="".concat(r.height,"px"),t.style.width="".concat(r.width,"px")),t.style.left="".concat(parseFloat(t.style.left)-s.left*h,"px"),t.style.top="".concat(parseFloat(t.style.top)-s.top*a,"px")}}function vw(t,e){var n=window.getComputedStyle(t);Array.from(n).filter(function(i){return i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||mw(ga.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")}).forEach(function(i){return e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))})}function WL(t,e){t.draggable=!1,t.ondragstart=function(){return!1},e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function _w(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function zL(t){t.style.visibility="hidden",t.setAttribute(cd,"true")}function HL(t){t.style.visibility="",t.removeAttribute(cd)}function El(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=r[o]}),n(i).forEach(function(o){return i.classList.add(o)})})}function ic(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=""}),n(i).forEach(function(o){return i.classList.contains(o)&&i.classList.remove(o)})})}function VL(t){var e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");var n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}var XL="--any--",$L=100,GL=20,Qv=3,e_={outline:"rgba(255, 255, 102, 0.7) solid 2px"},t_="data-is-dnd-original-dragged-item",ui,on,En,Nc,Dt,jc,_r,cn,ar,In,Nr=!1,hd=!1,dd,La=!1,xl=[],ni=new Map,Ut=new Map,Gu=new WeakMap;function qL(t,e){ni.has(e)||ni.set(e,new Set),ni.get(e).has(t)||(ni.get(e).add(t),uw())}function n_(t,e){ni.get(e).delete(t),fw(),ni.get(e).size===0&&ni.delete(e)}function KL(){var t=ni.get(Nc),e=Ra(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.addEventListener(Ic,yw),i.addEventListener(Fa,bw),i.addEventListener(Rc,ww)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(ld,uo);var r=Math.max.apply(Math,Xn(Array.from(t.keys()).map(function(a){return Ut.get(a).dropAnimationDurationMs}))),o=r===0?GL:Math.max(r,$L),h=IL(t,function(){return In});DL(on,t,o*1.07,h)}function JL(){var t=ni.get(Nc),e=Ra(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.removeEventListener(Ic,yw),i.removeEventListener(Fa,bw),i.removeEventListener(Rc,ww)}}catch(r){e.e(r)}finally{e.f()}window.removeEventListener(ld,uo),AL()}function Bc(t){return t.findIndex(function(e){return!!e[Fc]})}function ZL(t){var e;return ec(ec({},t),{},(e={},lo(e,Fc,!0),lo(e,tn,yL),e))}function yw(t){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt)){if(La=!1,n=n.filter(function(f){return f[tn]!==_r[tn]}),Dt!==t.currentTarget){var r=Ut.get(Dt).items,o=r.filter(function(f){return!f[Fc]});Cr(Dt,o,{trigger:bn.DRAGGED_ENTERED_ANOTHER,id:En[tn],source:xn.POINTER})}var h=t.detail.indexObj,a=h.index,s=h.isProximityBased,c=s&&a===t.currentTarget.children.length-1?a+1:a;cn=t.currentTarget,n.splice(c,0,_r),Cr(t.currentTarget,n,{trigger:bn.DRAGGED_ENTERED,id:En[tn],source:xn.POINTER})}}function bw(t){if(Nr){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt&&t.currentTarget!==cn)){var r=Xn(n),o=Bc(r);o!==-1&&r.splice(o,1);var h=cn;cn=void 0;var a=t.detail,s=a.type,c=a.theOtherDz;if(s===tc.OUTSIDE_OF_ANY||s===tc.LEFT_FOR_ANOTHER&&c!==Dt&&Ut.get(c).dropFromOthersDisabled){La=!0,cn=Dt;var f=h===Dt?r:Xn(Ut.get(Dt).items);f.splice(jc,0,_r),Cr(Dt,f,{trigger:bn.DRAGGED_LEFT_ALL,id:En[tn],source:xn.POINTER})}Cr(t.currentTarget,r,{trigger:bn.DRAGGED_LEFT,id:En[tn],source:xn.POINTER})}}}function ww(t){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt)){var r=Xn(n);La=!1;var o=t.detail.indexObj.index,h=Bc(r);h!==-1&&r.splice(h,1),r.splice(o,0,_r),Cr(t.currentTarget,r,{trigger:bn.DRAGGED_OVER_INDEX,id:En[tn],source:xn.POINTER})}}function rc(t){t.preventDefault();var e=t.touches?t.touches[0]:t;In={x:e.clientX,y:e.clientY},on.style.transform="translate3d(".concat(In.x-ar.x,"px, ").concat(In.y-ar.y,"px, 0)")}function uo(){hd=!0,window.removeEventListener("mousemove",rc),window.removeEventListener("touchmove",rc),window.removeEventListener("mouseup",uo),window.removeEventListener("touchend",uo),JL(),UL(on),cn||(cn=Dt);var t=Ut.get(cn),e=t.items,n=t.type;ic(ni.get(n),function(o){return Ut.get(o).dropTargetStyle},function(o){return Ut.get(o).dropTargetClasses});var i=Bc(e);i===-1&&cn===Dt&&(i=jc),e=e.map(function(o){return o[Fc]?En:o});function r(){dd(),co(cn,e,{trigger:La?bn.DROPPED_OUTSIDE_OF_ANY:bn.DROPPED_INTO_ZONE,id:En[tn],source:xn.POINTER}),cn!==Dt&&co(Dt,Ut.get(Dt).items,{trigger:bn.DROPPED_INTO_ANOTHER,id:En[tn],source:xn.POINTER}),i!==-1&&HL(cn.children[i]),tN()}QL(i,r)}function QL(t,e){var n=t>-1?qf(cn.children[t]):qf(cn),i={x:n.left-parseFloat(on.style.left),y:n.top-parseFloat(on.style.top)},r=Ut.get(cn),o=r.dropAnimationDurationMs,h="transform ".concat(o,"ms ease");on.style.transition=on.style.transition?on.style.transition+","+h:h,on.style.transform="translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)"),window.setTimeout(e,o)}function eN(t,e){xl.push({dz:t,destroy:e}),window.requestAnimationFrame(function(){_w(t),document.body.appendChild(t)})}function tN(){on.remove(),ui.remove(),xl.length&&(xl.forEach(function(t){var e=t.dz,n=t.destroy;n(),e.remove()}),xl=[]),on=void 0,ui=void 0,En=void 0,Nc=void 0,Dt=void 0,jc=void 0,_r=void 0,cn=void 0,ar=void 0,In=void 0,Nr=!1,hd=!1,dd=void 0,La=!1}function nN(t,e){var n=!1,i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:e_,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},r=new Map;function o(){window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function h(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){h(),ui=void 0,ar=void 0,In=void 0}function s(u){u.preventDefault();var d=u.touches?u.touches[0]:u;In={x:d.clientX,y:d.clientY},(Math.abs(In.x-ar.x)>=Qv||Math.abs(In.y-ar.y)>=Qv)&&(h(),f())}function c(u){if(!(u.target!==u.currentTarget&&(u.target.value!==void 0||u.target.isContentEditable))&&!u.button&&!Nr){u.stopPropagation();var d=u.touches?u.touches[0]:u;ar={x:d.clientX,y:d.clientY},In=ec({},ar),ui=u.currentTarget,o()}}function f(){Nr=!0;var u=r.get(ui);jc=u,Dt=ui.parentElement;var d=Dt.closest("dialog")||Dt.getRootNode(),p=d.body||d,m=i.items,g=i.type,v=i.centreDraggedOnCursor,_=Xn(m);En=_[u],Nc=g,_r=ZL(En),on=BL(ui,v&&In),ui.setAttribute(t_,!0);function b(){on.parentElement?window.requestAnimationFrame(b):(p.appendChild(on),on.focus(),KL(),_w(ui),p.appendChild(ui),_r[tn]=En[tn])}window.requestAnimationFrame(b),El(Array.from(ni.get(i.type)).filter(function(y){return y===Dt||!Ut.get(y).dropFromOthersDisabled}),function(y){return Ut.get(y).dropTargetStyle},function(y){return Ut.get(y).dropTargetClasses}),_.splice(u,1,_r),dd=VL(Dt),Cr(Dt,_,{trigger:bn.DRAG_STARTED,id:En[tn],source:xn.POINTER}),window.addEventListener("mousemove",rc,{passive:!1}),window.addEventListener("touchmove",rc,{passive:!1,capture:!1}),window.addEventListener("mouseup",uo,{passive:!1}),window.addEventListener("touchend",uo,{passive:!1})}function l(u){var d=u.items,p=d===void 0?void 0:d,m=u.flipDurationMs,g=m===void 0?0:m,v=u.type,_=v===void 0?XL:v,b=u.dragDisabled,y=b===void 0?!1:b,w=u.morphDisabled,C=w===void 0?!1:w,T=u.dropFromOthersDisabled,O=T===void 0?!1:T,D=u.dropTargetStyle,I=D===void 0?e_:D,Y=u.dropTargetClasses,z=Y===void 0?[]:Y,q=u.transformDraggedElement,G=q===void 0?function(){}:q,j=u.centreDraggedOnCursor,W=j===void 0?!1:j;i.dropAnimationDurationMs=g,i.type&&_!==i.type&&n_(t,i.type),i.type=_,i.items=Xn(p),i.dragDisabled=y,i.morphDisabled=C,i.transformDraggedElement=G,i.centreDraggedOnCursor=W,n&&Nr&&!hd&&(!OL(I,i.dropTargetStyle)||!EL(z,i.dropTargetClasses))&&(ic([t],function(){return i.dropTargetStyle},function(){return z}),El([t],function(){return I},function(){return z})),i.dropTargetStyle=I,i.dropTargetClasses=Xn(z);function te(F,L){return Ut.get(F)?Ut.get(F)[L]:i[L]}n&&Nr&&i.dropFromOthersDisabled!==O&&(O?ic([t],function(F){return te(F,"dropTargetStyle")},function(F){return te(F,"dropTargetClasses")}):El([t],function(F){return te(F,"dropTargetStyle")},function(F){return te(F,"dropTargetClasses")})),i.dropFromOthersDisabled=O,Ut.set(t,i),qL(t,_);for(var se=Bc(i.items),E=0;E<t.children.length;E++){var P=t.children[E];if(WL(P,y),E===se){i.transformDraggedElement(on,En,E),C||YL(on,P,In.x,In.y),zL(P);continue}P.removeEventListener("mousedown",Gu.get(P)),P.removeEventListener("touchstart",Gu.get(P)),y||(P.addEventListener("mousedown",c),P.addEventListener("touchstart",c),Gu.set(P,c)),r.set(P,E),n||(n=!0)}}return l(e),{update:function(d){l(d)},destroy:function(){function d(){n_(t,Ut.get(t).type),Ut.delete(t)}Nr&&!t.closest("[".concat(t_,"]"))?eN(t,d):d()}}}var fl,Jf={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Cw=(fl={},lo(fl,Jf.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),lo(fl,Jf.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),fl),iN="dnd-action-aria-alert",Bt;function Zf(){Bt||(Bt=document.createElement("div"),function(){Bt.id=iN,Bt.style.position="fixed",Bt.style.bottom="0",Bt.style.left="0",Bt.style.zIndex="-5",Bt.style.opacity="0",Bt.style.height="0",Bt.style.width="0",Bt.setAttribute("role","alert")}(),document.body.prepend(Bt),Object.entries(Cw).forEach(function(t){var e=rL(t,2),n=e[0],i=e[1];return document.body.prepend(oN(n,i))}))}function rN(){return ud?null:(document.readyState==="complete"?Zf():window.addEventListener("DOMContentLoaded",Zf),ec({},Jf))}function sN(){ud||!Bt||(Object.keys(Cw).forEach(function(t){var e;return(e=document.getElementById(t))===null||e===void 0?void 0:e.remove()}),Bt.remove(),Bt=void 0)}function oN(t,e){var n=document.createElement("div");return n.id=t,n.innerHTML="<p>".concat(e,"</p>"),n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function Vs(t){if(!ud){Bt||Zf(),Bt.innerHTML="";var e=document.createTextNode(t);Bt.appendChild(e),Bt.style.display="none",Bt.style.display="inline"}}var aN="--any--",i_={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Yn=!1,Qf,un,Gr="",Mr,pi,dr="",sc=new WeakSet,r_=new WeakMap,s_=new WeakMap,eh=new Map,sn=new Map,ei=new Map,oc;function lN(t,e){ei.size===0&&(oc=rN(),window.addEventListener("keydown",Sw),window.addEventListener("click",Tw)),ei.has(e)||ei.set(e,new Set),ei.get(e).has(t)||(ei.get(e).add(t),uw())}function o_(t,e){un===t&&ma(),ei.get(e).delete(t),fw(),ei.get(e).size===0&&ei.delete(e),ei.size===0&&(window.removeEventListener("keydown",Sw),window.removeEventListener("click",Tw),oc=void 0,sN())}function Sw(t){if(Yn)switch(t.key){case"Escape":{ma();break}}}function Tw(){Yn&&(sc.has(document.activeElement)||ma())}function cN(t){if(Yn){var e=t.currentTarget;if(e!==un){Gr=e.getAttribute("aria-label")||"";var n=sn.get(un),i=n.items,r=i.find(function(l){return l[tn]===pi}),o=i.indexOf(r),h=i.splice(o,1)[0],a=sn.get(e),s=a.items,c=a.autoAriaDisabled;e.getBoundingClientRect().top<un.getBoundingClientRect().top||e.getBoundingClientRect().left<un.getBoundingClientRect().left?(s.push(h),c||Vs("Moved item ".concat(dr," to the end of the list ").concat(Gr))):(s.unshift(h),c||Vs("Moved item ".concat(dr," to the beginning of the list ").concat(Gr)));var f=un;co(f,i,{trigger:bn.DROPPED_INTO_ANOTHER,id:pi,source:xn.KEYBOARD}),co(e,s,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}),un=e}}}function kw(){eh.forEach(function(t,e){var n=t.update;return n(sn.get(e))})}function ma(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;sn.get(un).autoAriaDisabled||Vs("Stopped dragging item ".concat(dr)),sc.has(document.activeElement)&&document.activeElement.blur(),t&&Cr(un,sn.get(un).items,{trigger:bn.DRAG_STOPPED,id:pi,source:xn.KEYBOARD}),ic(ei.get(Qf),function(e){return sn.get(e).dropTargetStyle},function(e){return sn.get(e).dropTargetClasses}),Mr=null,pi=null,dr="",Qf=null,un=null,Gr="",Yn=!1,kw()}function uN(t,e){var n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:i_,dropTargetClasses:[],autoAriaDisabled:!1};function i(f,l,u){f.length<=1||f.splice(u,1,f.splice(l,1,f[u])[0])}function r(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!sc.has(f.target))return;f.preventDefault(),f.stopPropagation(),Yn?ma():o(f);break}case"ArrowDown":case"ArrowRight":{if(!Yn)return;f.preventDefault(),f.stopPropagation();var l=sn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f.currentTarget);p<d.length-1&&(n.autoAriaDisabled||Vs("Moved item ".concat(dr," to position ").concat(p+2," in the list ").concat(Gr)),i(u,p,p+1),co(t,u,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Yn)return;f.preventDefault(),f.stopPropagation();var m=sn.get(t),g=m.items,v=Array.from(t.children),_=v.indexOf(f.currentTarget);_>0&&(n.autoAriaDisabled||Vs("Moved item ".concat(dr," to position ").concat(_," in the list ").concat(Gr)),i(g,_,_-1),co(t,g,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}));break}}}function o(f){a(f.currentTarget),un=t,Qf=n.type,Yn=!0;var l=Array.from(ei.get(n.type)).filter(function(d){return d===un||!sn.get(d).dropFromOthersDisabled});if(El(l,function(d){return sn.get(d).dropTargetStyle},function(d){return sn.get(d).dropTargetClasses}),!n.autoAriaDisabled){var u="Started dragging item ".concat(dr,". Use the arrow keys to move it within its list ").concat(Gr);l.length>1&&(u+=", or tab to another list in order to move the item into it"),Vs(u)}Cr(t,sn.get(t).items,{trigger:bn.DRAG_STARTED,id:pi,source:xn.KEYBOARD}),kw()}function h(f){Yn&&f.currentTarget!==Mr&&(f.stopPropagation(),ma(!1),o(f))}function a(f){var l=sn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f);Mr=f,Mr.tabIndex=n.zoneItemTabIndex,pi=u[p][tn],dr=d[p].getAttribute("aria-label")||""}function s(f){var l=f.items,u=l===void 0?[]:l,d=f.type,p=d===void 0?aN:d,m=f.dragDisabled,g=m===void 0?!1:m,v=f.zoneTabIndex,_=v===void 0?0:v,b=f.zoneItemTabIndex,y=b===void 0?0:b,w=f.dropFromOthersDisabled,C=w===void 0?!1:w,T=f.dropTargetStyle,O=T===void 0?i_:T,D=f.dropTargetClasses,I=D===void 0?[]:D,Y=f.autoAriaDisabled,z=Y===void 0?!1:Y;n.items=Xn(u),n.dragDisabled=g,n.dropFromOthersDisabled=C,n.zoneTabIndex=_,n.zoneItemTabIndex=y,n.dropTargetStyle=O,n.dropTargetClasses=I,n.autoAriaDisabled=z,n.type&&p!==n.type&&o_(t,n.type),n.type=p,lN(t,p),z||(t.setAttribute("aria-disabled",g),t.setAttribute("role","list"),t.setAttribute("aria-describedby",g?oc.DND_ZONE_DRAG_DISABLED:oc.DND_ZONE_ACTIVE)),sn.set(t,n),Yn?t.tabIndex=t===un||Mr.contains(t)||n.dropFromOthersDisabled||un&&n.type!==sn.get(un).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",cN);for(var q=function(W){var te=t.children[W];sc.add(te),te.tabIndex=Yn?-1:n.zoneItemTabIndex,z||te.setAttribute("role","listitem"),te.removeEventListener("keydown",r_.get(te)),te.removeEventListener("click",s_.get(te)),g||(te.addEventListener("keydown",r),r_.set(te,r),te.addEventListener("click",h),s_.set(te,h)),Yn&&n.items[W][tn]===pi&&(Mr=te,Mr.tabIndex=n.zoneItemTabIndex,te.focus())},G=0;G<t.children.length;G++)q(G)}s(e);var c={update:function(l){s(l)},destroy:function(){o_(t,n.type),sn.delete(t),eh.delete(t)}};return eh.set(t,c),c}var fN=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function hN(t,e){if(dN(t))return{update:function(){},destroy:function(){}};a_(e);var n=nN(t,e),i=uN(t,e);return{update:function(o){a_(o),n.update(o),i.update(o)},destroy:function(){n.destroy(),i.destroy()}}}function dN(t){return!!t.closest("[".concat(_L,'="true"]'))}function a_(t){var e=t.items;t.flipDurationMs,t.type,t.dragDisabled,t.morphDisabled,t.dropFromOthersDisabled;var n=t.zoneTabIndex,i=t.zoneItemTabIndex;t.dropTargetStyle;var r=t.dropTargetClasses;t.transformDraggedElement,t.autoAriaDisabled,t.centreDraggedOnCursor;var o=iL(t,fN);if(Object.keys(o).length>0&&console.warn("dndzone will ignore unknown options",o),!e)throw new Error("no 'items' key provided to dndzone");var h=e.find(function(a){return!{}.hasOwnProperty.call(a,tn)});if(h)throw new Error("missing '".concat(tn,"' property for item ").concat(ul(h)));if(r&&!Array.isArray(r))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(ea(r),", ").concat(ul(r)));if(n&&!l_(n))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(ea(n),", ").concat(ul(n)));if(i&&!l_(i))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(ea(i),", ").concat(ul(i)))}function l_(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function pN(t){function e(n){var i=n.target;if(i.matches(t)){var r;switch(n.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;case"touchcancel":r="mouseup";break;default:return}var o=n.changedTouches[0],h=o.clientX,a=o.pageX,s=window.pageXOffset,c=o.clientY,f=o.pageY,l=window.pageYOffset;a===0&&Math.floor(h)>Math.floor(a)||f===0&&Math.floor(c)>Math.floor(f)?(h-=s,c-=l):(h<a-s||c<f-l)&&(h=a-s,c=f-l);var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,screenX:o.screenX,screenY:o.screenY,clientX:h,clientY:c,pageX:a,pageY:f,buttons:1,button:0,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey});o.target.dispatchEvent(u)}}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}function c_(t,e,n){const i=t.slice();return i[12]=e[n],i[14]=n,i}function u_(t){let e,n,i,r,o,h=[],a=new Map,s,c,f,l,u=Fe(t[1]);const d=p=>p[12].id;for(let p=0;p<u.length;p+=1){let m=c_(t,u,p),g=d(m);a.set(g,h[p]=g_(g,m))}return{c(){e=x("div"),n=x("h2"),n.textContent="레이어",i=V(),r=x("div"),o=x("div");for(let p=0;p<h.length;p+=1)h[p].c();S(n,"class","text-xs border-b p-3"),S(o,"class","sortable space-y-2 w-full svelte-1q3bi75"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(p,m){B(p,e,m),k(e,n),k(e,i),k(e,r),k(r,o);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(o,null);c=!0,f||(l=[Ty(s=hN.call(null,o,{items:t[1],flipDurationMs:th})),Q(o,"consider",t[2]),Q(o,"finalize",t[3])],f=!0)},p(p,m){if(m&115){u=Fe(p[1]),Se();for(let g=0;g<h.length;g+=1)h[g].r();h=Ny(h,m,d,1,p,u,a,o,W1,g_,null,c_);for(let g=0;g<h.length;g+=1)h[g].a();Te()}s&&Hn(s.update)&&m&2&&s.update.call(null,{items:p[1],flipDurationMs:th})},i(p){if(!c){for(let m=0;m<u.length;m+=1)M(h[m]);c=!0}},o(p){for(let m=0;m<h.length;m+=1)U(h[m]);c=!1},d(p){p&&N(e);for(let m=0;m<h.length;m+=1)h[m].d();f=!1,Ue(l)}}}function gN(t){let e,n,i,r,o=t[12].type==="ellipse"&&f_(),h=t[12].type==="triangle"&&h_(),a=t[12].type==="rectangle"&&d_();return{c(){o&&o.c(),e=V(),h&&h.c(),n=V(),a&&a.c(),i=Je()},m(s,c){o&&o.m(s,c),B(s,e,c),h&&h.m(s,c),B(s,n,c),a&&a.m(s,c),B(s,i,c),r=!0},p(s,c){s[12].type==="ellipse"?o?c&2&&M(o,1):(o=f_(),o.c(),M(o,1),o.m(e.parentNode,e)):o&&(Se(),U(o,1,1,()=>{o=null}),Te()),s[12].type==="triangle"?h?c&2&&M(h,1):(h=h_(),h.c(),M(h,1),h.m(n.parentNode,n)):h&&(Se(),U(h,1,1,()=>{h=null}),Te()),s[12].type==="rectangle"?a?c&2&&M(a,1):(a=d_(),a.c(),M(a,1),a.m(i.parentNode,i)):a&&(Se(),U(a,1,1,()=>{a=null}),Te())},i(s){r||(M(o),M(h),M(a),r=!0)},o(s){U(o),U(h),U(a),r=!1},d(s){s&&(N(e),N(n),N(i)),o&&o.d(s),h&&h.d(s),a&&a.d(s)}}}function mN(t){let e,n,i;return n=new Ce({props:{icon:"streamline:hand-held-tablet-drawing"}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){B(r,e,o),ue(n,e,null),i=!0},p:ge,i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){U(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function vN(t){let e,n=t[12].thumbnail&&p_(t);return{c(){e=x("div"),n&&n.c(),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center")},m(i,r){B(i,e,r),n&&n.m(e,null)},p(i,r){i[12].thumbnail?n?n.p(i,r):(n=p_(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d()}}}function _N(t){let e,n=t[12].text+"",i;return{c(){e=x("div"),i=be(n),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center truncate ")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&2&&n!==(n=r[12].text+"")&&He(i,n)},i:ge,o:ge,d(r){r&&N(e)}}}function yN(t){let e,n,i;return{c(){e=x("div"),n=x("img"),Ye(n.src,i=t[12].convert.url)||S(n,"src",i),S(n,"class","object-contain svelte-1q3bi75"),S(n,"height","40"),S(n,"alt",""),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){B(r,e,o),k(e,n)},p(r,o){o&2&&!Ye(n.src,i=r[12].convert.url)&&S(n,"src",i)},i:ge,o:ge,d(r){r&&N(e)}}}function f_(t){let e,n,i;return n=new Ce({props:{icon:"material-symbols:circle-outline"}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){B(r,e,o),ue(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){U(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function h_(t){let e,n,i;return n=new Ce({props:{icon:"uil:triangle"}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){B(r,e,o),ue(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){U(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function d_(t){let e,n,i;return n=new Ce({props:{icon:"material-symbols:rectangle-outline"}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){B(r,e,o),ue(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){U(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function p_(t){let e,n;return{c(){e=x("img"),Ye(e.src,n=t[12].thumbnail.url)||S(e,"src",n),S(e,"class","object-contain svelte-1q3bi75"),S(e,"height","40"),S(e,"alt","")},m(i,r){B(i,e,r)},p(i,r){r&2&&!Ye(e.src,n=i[12].thumbnail.url)&&S(e,"src",n)},d(i){i&&N(e)}}}function bN(t){let e,n;return e=new Ce({props:{icon:"iconamoon:lock",class:"pointer-events-none",height:"30"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function wN(t){let e,n;return e=new Ce({props:{icon:"iconamoon:lock-off",class:"pointer-events-none",height:"30"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function g_(t,e){let n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w=ge,C,T,O;const D=[yN,_N,vN,mN,gN],I=[];function Y(se,E){return se[12].objType==="clipart"?0:se[12].objType==="text"?1:se[12].objType==="upload"?2:se[12].type==="path"?3:se[12].objType==="shape"?4:-1}~(i=Y(e))&&(r=I[i]=D[i](e)),a=new Ce({props:{icon:"fluent:select-object-20-filled",class:"pointer-events-none",height:"30"}});function z(){return e[9](e[12])}const q=[wN,bN],G=[];function j(se,E){return se[12].selectable?0:1}f=j(e),l=G[f]=q[f](e);function W(){return e[10](e[12],e[14])}p=new Ce({props:{icon:"mi:select",class:"pointer-events-none",height:"30"}}),v=new Ce({props:{icon:"mi:delete",class:"pointer-events-none",height:"30"}});function te(){return e[11](e[12])}return{key:t,first:null,c(){n=x("div"),r&&r.c(),o=V(),h=x("button"),he(a.$$.fragment),s=V(),c=x("button"),l.c(),u=V(),d=x("div"),he(p.$$.fragment),m=V(),g=x("button"),he(v.$$.fragment),_=V(),S(h,"type","button"),S(h,"class","select-button ghost-btn"),S(c,"type","button"),S(c,"class","lock-button ghost-btn"),S(d,"class","move-button"),S(g,"type","button"),S(g,"class","delete-button ghost-btn"),S(n,"class",b="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[12].id?"border-2 border-black":"border")+" svelte-1q3bi75"),this.first=n},m(se,E){B(se,n,E),~i&&I[i].m(n,null),k(n,o),k(n,h),ue(a,h,null),k(n,s),k(n,c),G[f].m(c,null),k(n,u),k(n,d),ue(p,d,null),k(n,m),k(n,g),ue(v,g,null),k(n,_),C=!0,T||(O=[Q(h,"click",z),Q(c,"click",W),Q(g,"click",te)],T=!0)},p(se,E){e=se;let P=i;i=Y(e),i===P?~i&&I[i].p(e,E):(r&&(Se(),U(I[P],1,1,()=>{I[P]=null}),Te()),~i?(r=I[i],r?r.p(e,E):(r=I[i]=D[i](e),r.c()),M(r,1),r.m(n,o)):r=null);let F=f;f=j(e),f!==F&&(Se(),U(G[F],1,1,()=>{G[F]=null}),Te(),l=G[f],l||(l=G[f]=q[f](e),l.c()),M(l,1),l.m(c,null)),(!C||E&3&&b!==(b="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[12].id?"border-2 border-black":"border")+" svelte-1q3bi75"))&&S(n,"class",b)},r(){y=n.getBoundingClientRect()},f(){R1(n),w()},a(){w(),w=I1(n,y,tL,{duration:th})},i(se){C||(M(r),M(a.$$.fragment,se),M(l),M(p.$$.fragment,se),M(v.$$.fragment,se),C=!0)},o(se){U(r),U(a.$$.fragment,se),U(l),U(p.$$.fragment,se),U(v.$$.fragment,se),C=!1},d(se){se&&N(n),~i&&I[i].d(),fe(a),G[f].d(),fe(p),fe(v),T=!1,Ue(O)}}}function CN(t){var r;let e,n,i=((r=t[1])==null?void 0:r.length)&&u_(t);return{c(){i&&i.c(),e=Je()},m(o,h){i&&i.m(o,h),B(o,e,h),n=!0},p(o,[h]){var a;(a=o[1])!=null&&a.length?i?(i.p(o,h),h&2&&M(i,1)):(i=u_(o),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(o){n||(M(i),n=!0)},o(o){U(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}const th=300;function SN(t,e,n){let i,r,o;Me(t,Uy,m=>n(7,r=m)),Me(t,Ui,m=>n(8,o=m));let h="";function a(m){n(1,i=m.detail.items)}function s(m){Z1(m.detail.items.reverse()),r.reverse()}function c(m){rC(m)}async function f(m,g){oC(m,!m.selectable),n(1,i),n(7,r),m.selectable||Yy()}function l(m){sC(m)}xi(()=>{pN(".move-button")});const u=m=>c(m),d=(m,g)=>f(m),p=m=>l(m);return t.$$.update=()=>{t.$$.dirty&256&&(o?n(0,h=o[0].id):n(0,h="")),t.$$.dirty&128&&n(1,i=r)},[h,i,a,s,c,f,l,r,o,u,d,p]}class TN extends qe{constructor(e){super(),Ge(this,e,SN,CN,Ve,{})}}function m_(t,e,n){const i=t.slice();return i[19]=e[n],i[20]=e,i[21]=n,i}function v_(t,e,n){const i=t.slice();return i[22]=e[n],i}function __(t,e,n){const i=t.slice();return i[25]=e[n],i}function y_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;function _(Y,z){return Y[2]==="design"?ON:kN}let b=_(t),y=b(t);h=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let w=Fe(t[3]),C=[];for(let Y=0;Y<w.length;Y+=1)C[Y]=E_(m_(t,w,Y));const T=Y=>U(C[Y],1,1,()=>{C[Y]=null});function O(Y,z){return Y[2]==="design"?AN:DN}let D=O(t),I=D(t);return{c(){e=x("div"),n=x("div"),i=x("h2"),y.c(),r=V(),o=x("button"),he(h.$$.fragment),a=V(),s=x("div");for(let Y=0;Y<C.length;Y+=1)C[Y].c();c=V(),f=x("div"),l=x("button"),I.c(),u=V(),d=x("button"),d.textContent="닫기",S(o,"class","absolute right-2"),S(o,"type","button"),S(i,"class","primary-bg rounded font-semibold p-3 text-center relative items-center flex w-full border-b"),S(l,"type","button"),S(l,"class","btn md:btn-lg primary-btn"),S(d,"type","button"),S(d,"class","btn md:btn-lg secondary-btn"),S(f,"class","p-3 flex justify-center gap-2"),S(s,"class","grow overflow-y-hidden h-full flex flex-col mt-3 gap-3"),S(n,"class","max-h-full w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(Y,z){B(Y,e,z),k(e,n),k(n,i),y.m(i,null),k(i,r),k(i,o),ue(h,o,null),k(n,a),k(n,s);for(let q=0;q<C.length;q+=1)C[q]&&C[q].m(s,null);k(s,c),k(s,f),k(f,l),I.m(l,null),k(f,u),k(f,d),m=!0,g||(v=[Q(o,"click",dn),Q(l,"click",t[17]),Q(d,"click",dn),Q(e,"introstart",t[10]),Q(e,"outroend",t[11])],g=!0)},p(Y,z){if(b!==(b=_(Y))&&(y.d(1),y=b(Y),y&&(y.c(),y.m(i,r))),z&504){w=Fe(Y[3]);let q;for(q=0;q<w.length;q+=1){const G=m_(Y,w,q);C[q]?(C[q].p(G,z),M(C[q],1)):(C[q]=E_(G),C[q].c(),M(C[q],1),C[q].m(s,c))}for(Se(),q=w.length;q<C.length;q+=1)T(q);Te()}D!==(D=O(Y))&&(I.d(1),I=D(Y),I&&(I.c(),I.m(l,null)))},i(Y){if(!m){M(h.$$.fragment,Y);for(let z=0;z<w.length;z+=1)M(C[z]);Y&&zt(()=>{m&&(p||(p=Vt(e,Ti,{y:50},!0)),p.run(1))}),m=!0}},o(Y){U(h.$$.fragment,Y),C=C.filter(Boolean);for(let z=0;z<C.length;z+=1)U(C[z]);Y&&(p||(p=Vt(e,Ti,{y:50},!1)),p.run(0)),m=!1},d(Y){Y&&N(e),y.d(),fe(h),Pt(C,Y),I.d(),Y&&p&&p.end(),g=!1,Ue(v)}}}function kN(t){let e;return{c(){e=be("주문하기")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function ON(t){let e;return{c(){e=be("디자인 등록")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function b_(t){let e,n,i;return{c(){e=x("img"),Ye(e.src,n=t[25].url)||S(e,"src",n),S(e,"alt",i=t[19].product.productName),S(e,"class","max-w-16 md:max-w-24 max-h-16 md:max-h-24 object-contain border rounded")},m(r,o){B(r,e,o)},p(r,o){o&8&&!Ye(e.src,n=r[25].url)&&S(e,"src",n),o&8&&i!==(i=r[19].product.productName)&&S(e,"alt",i)},d(r){r&&N(e)}}}function w_(t){let e=t[19].currentOption.optionValue1+"",n;return{c(){n=be(e)},m(i,r){B(i,n,r)},p(i,r){r&8&&e!==(e=i[19].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&N(n)}}}function C_(t){let e,n=t[19].currentOption.optionValue2+"",i;return{c(){e=be("/ "),i=be(n)},m(r,o){B(r,e,o),B(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function S_(t){let e,n=t[19].currentOption.optionValue3+"",i;return{c(){e=be("/ "),i=be(n)},m(r,o){B(r,e,o),B(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function EN(t){let e,n,i;function r(){return t[12](t[21])}return{c(){e=x("button"),e.textContent="편집하기",S(e,"type","button"),S(e,"class","btn primary-btn")},m(o,h){B(o,e,h),n||(i=Q(e,"click",r),n=!0)},p(o,h){t=o},d(o){o&&N(e),n=!1,i()}}}function xN(t){let e;return{c(){e=x("button"),e.textContent="편집중",S(e,"type","button"),S(e,"class","btn secondary-btn")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function T_(t){let e,n=t[19].templateTitle+"",i;return{c(){e=x("div"),i=be(n),S(e,"class","text-sm font-semibold")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[19].templateTitle+"")&&He(i,n)},d(r){r&&N(e)}}}function k_(t){let e,n=Fe(t[19].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=O_(v_(t,n,r));return{c(){e=x("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex items-center gap-2 max-w-full overflow-x-auto")},m(r,o){B(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Fe(r[19].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=v_(r,n,h);i[h]?i[h].p(a,o):(i[h]=O_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function O_(t){let e,n;return{c(){e=x("img"),Ye(e.src,n=t[22].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","object-contain max-w-16 max-h-16 md:max-w-24 md:max-h-24 rounded border")},m(i,r){B(i,e,r)},p(i,r){r&8&&!Ye(e.src,n=i[22].url)&&S(e,"src",n)},d(i){i&&N(e)}}}function E_(t){var me;let e,n,i,r,o,h,a,s=t[19].product.productName+"",c,f,l,u,d,p,m,g,v,_,b,y,w,C,T,O,D,I,Y,z,q,G,j,W,te,se=Fe(t[19].product.images),E=[];for(let ee=0;ee<se.length;ee+=1)E[ee]=b_(__(t,se,ee));let P=t[19].currentOption.optionValue1&&w_(t),F=t[19].currentOption.optionValue2&&C_(t),L=t[19].currentOption.optionValue3&&S_(t);function Z(ee,K){return ee[21]===ee[4]?xN:EN}let R=Z(t),A=R(t);function X(){return t[13](t[21])}function J(){t[14].call(C,t[20],t[21])}function ie(){return t[15](t[21])}z=new Ce({props:{icon:"mi:delete",height:15}});function ne(){return t[16](t[21])}let $=t[19].templateTitle&&T_(t),le=((me=t[19].thumbnails)==null?void 0:me.length)&&k_(t);return{c(){e=x("div"),n=x("div"),i=x("div"),r=x("div");for(let ee=0;ee<E.length;ee+=1)E[ee].c();o=V(),h=x("div"),a=x("h1"),c=be(s),f=V(),l=x("h3"),P&&P.c(),u=V(),F&&F.c(),d=V(),L&&L.c(),p=V(),m=x("div"),g=x("div"),A.c(),v=V(),_=x("div"),b=x("div"),y=x("button"),y.textContent="-",w=V(),C=x("input"),T=V(),O=x("button"),O.textContent="+",D=V(),I=x("div"),Y=x("button"),he(z.$$.fragment),q=V(),$&&$.c(),G=V(),le&&le.c(),S(r,"class","flex"),S(a,"class","text-sm"),S(l,"class","text-xs"),S(h,"class","flex flex-col justify-center grow gap-1"),S(y,"type","button"),S(y,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(C,"type","text"),S(C,"class","border w-12 input-sm rounded-none"),S(O,"type","button"),S(O,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(b,"class","flex"),S(Y,"type","button"),S(Y,"class","btn secondary-btn"),S(m,"class","flex gap-2 items-center"),S(i,"class","flex gap-3 flex-col sm:flex-row"),S(n,"class","grow flex flex-col gap-3 justify-center w-full"),S(e,"class","flex justify-between items-center border-b p-2")},m(ee,K){B(ee,e,K),k(e,n),k(n,i),k(i,r);for(let oe=0;oe<E.length;oe+=1)E[oe]&&E[oe].m(r,null);k(i,o),k(i,h),k(h,a),k(a,c),k(h,f),k(h,l),P&&P.m(l,null),k(l,u),F&&F.m(l,null),k(l,d),L&&L.m(l,null),k(i,p),k(i,m),k(m,g),A.m(g,null),k(m,v),k(m,_),k(_,b),k(b,y),k(b,w),k(b,C),Re(C,t[19].count),k(b,T),k(b,O),k(m,D),k(m,I),k(I,Y),ue(z,Y,null),k(n,q),$&&$.m(n,null),k(n,G),le&&le.m(n,null),j=!0,W||(te=[Q(y,"click",X),Q(C,"input",J),Q(O,"click",ie),Q(Y,"click",ne)],W=!0)},p(ee,K){var oe;if(t=ee,K&8){se=Fe(t[19].product.images);let re;for(re=0;re<se.length;re+=1){const H=__(t,se,re);E[re]?E[re].p(H,K):(E[re]=b_(H),E[re].c(),E[re].m(r,null))}for(;re<E.length;re+=1)E[re].d(1);E.length=se.length}(!j||K&8)&&s!==(s=t[19].product.productName+"")&&He(c,s),t[19].currentOption.optionValue1?P?P.p(t,K):(P=w_(t),P.c(),P.m(l,u)):P&&(P.d(1),P=null),t[19].currentOption.optionValue2?F?F.p(t,K):(F=C_(t),F.c(),F.m(l,d)):F&&(F.d(1),F=null),t[19].currentOption.optionValue3?L?L.p(t,K):(L=S_(t),L.c(),L.m(l,null)):L&&(L.d(1),L=null),R===(R=Z(t))&&A?A.p(t,K):(A.d(1),A=R(t),A&&(A.c(),A.m(g,null))),K&8&&C.value!==t[19].count&&Re(C,t[19].count),t[19].templateTitle?$?$.p(t,K):($=T_(t),$.c(),$.m(n,G)):$&&($.d(1),$=null),(oe=t[19].thumbnails)!=null&&oe.length?le?le.p(t,K):(le=k_(t),le.c(),le.m(n,null)):le&&(le.d(1),le=null)},i(ee){j||(M(z.$$.fragment,ee),j=!0)},o(ee){U(z.$$.fragment,ee),j=!1},d(ee){ee&&N(e),Pt(E,ee),P&&P.d(),F&&F.d(),L&&L.d(),A.d(),fe(z),$&&$.d(),le&&le.d(),W=!1,Ue(te)}}}function DN(t){let e;return{c(){e=be("주문하기")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function AN(t){let e;return{c(){e=be("디자인 등록")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function PN(t){let e,n,i=t[0]&&y_(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=y_(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function MN(t,e,n){let i,r;Me(t,di,w=>n(3,i=w)),Me(t,jo,w=>n(4,r=w));let{isOpen:o}=e,{changeEditorDataIndex:h}=e,{sendOrder:a}=e,{mode:s}=e;Xt(),xi(async()=>{});function c(w){i[w].count>1&&ye(di,i[w].count--,i)}function f(w){ye(di,i[w].count++,i)}function l(w){ye(di,i=i.filter((C,T)=>w!=T),i)}function u(w){h(w),dn()}function d(w){Si.call(this,t,w)}function p(w){Si.call(this,t,w)}const m=w=>u(w),g=w=>c(w);function v(w,C){w[C].count=this.value,di.set(i)}const _=w=>f(w),b=w=>l(w),y=()=>a();return t.$$set=w=>{"isOpen"in w&&n(0,o=w.isOpen),"changeEditorDataIndex"in w&&n(9,h=w.changeEditorDataIndex),"sendOrder"in w&&n(1,a=w.sendOrder),"mode"in w&&n(2,s=w.mode)},[o,a,s,i,r,c,f,l,u,h,d,p,m,g,v,_,b,y]}class IN extends qe{constructor(e){super(),Ge(this,e,MN,PN,Ve,{isOpen:0,changeEditorDataIndex:9,sendOrder:1,mode:2})}}function x_(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}function D_(t,e,n){const i=t.slice();return i[12]=e[n],i}function A_(t,e,n){const i=t.slice();return i[12]=e[n],i}function P_(t,e,n){const i=t.slice();return i[18]=e[n],i}function M_(t){let e,n,i,r,o=Fe(t[2]),h=[];for(let a=0;a<o.length;a+=1)h[a]=j_(x_(t,o,a));return{c(){e=x("div"),n=x("div"),i=x("h1"),i.innerHTML='제작상품 <span class="text-xs font-normal">(해당상품은 옵션별 수량으로 주문상품 수에 추가됩니다.)</span>',r=V();for(let a=0;a<h.length;a+=1)h[a].c();S(i,"class","p-5 bg-gray-50 font-semibold text-lg"),S(n,"class","border rounded relative flex flex-col divide-y"),S(e,"class","flex flex-col gap-3 my-2 bg-white")},m(a,s){B(a,e,s),k(e,n),k(n,i),k(n,r);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(n,null)},p(a,s){if(s&15){o=Fe(a[2]);let c;for(c=0;c<o.length;c+=1){const f=x_(a,o,c);h[c]?h[c].p(f,s):(h[c]=j_(f),h[c].c(),h[c].m(n,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}},d(a){a&&N(e),Pt(h,a)}}}function I_(t){let e,n,i;function r(...o){return t[5](t[9],...o)}return{c(){e=x("input"),S(e,"type","checkbox"),S(e,"class","podiz-checkbox")},m(o,h){B(o,e,h),n||(i=Q(e,"change",r),n=!0)},p(o,h){t=o},d(o){o&&N(e),n=!1,i()}}}function RN(t){return{c:ge,m:ge,p:ge,d:ge}}function FN(t){var h;let e,n=t[11],i=((h=t[17].data)==null?void 0:h.thumbnails.length)&&R_(t);const r=()=>t[6](e,n),o=()=>t[6](null,n);return{c(){e=x("div"),i&&i.c(),S(e,"class","flex gap-2 overflow-x-auto")},m(a,s){B(a,e,s),i&&i.m(e,null),r()},p(a,s){var c;t=a,(c=t[17].data)!=null&&c.thumbnails.length?i?i.p(t,s):(i=R_(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),n!==t[11]&&(o(),n=t[11],r())},d(a){a&&N(e),i&&i.d(),o()}}}function R_(t){let e,n=Fe(t[17].data.thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=F_(P_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);B(r,e,o)},p(r,o){if(o&4){n=Fe(r[17].data.thumbnails);let h;for(h=0;h<n.length;h+=1){const a=P_(r,n,h);i[h]?i[h].p(a,o):(i[h]=F_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function F_(t){let e,n,i;return{c(){e=x("img"),Ye(e.src,n=t[18].url)||S(e,"src",n),S(e,"alt",i=t[18].alt),S(e,"class","max-h-20 max-w-xs border rounded cursor-pointer")},m(r,o){B(r,e,o)},p(r,o){o&4&&!Ye(e.src,n=r[18].url)&&S(e,"src",n),o&4&&i!==(i=r[18].alt)&&S(e,"alt",i)},d(r){r&&N(e)}}}function LN(t){let e;return{c(){e=x("div"),e.innerHTML='<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>',S(e,"class","flex items justify-center")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function NN(t){let e,n=Fe(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=L_(D_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);B(r,e,o)},p(r,o){if(o&4){n=Fe(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=D_(r,n,h);i[h]?i[h].p(a,o):(i[h]=L_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function jN(t){let e,n=Fe(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=N_(A_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);B(r,e,o)},p(r,o){if(o&4){n=Fe(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=A_(r,n,h);i[h]?i[h].p(a,o):(i[h]=N_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function L_(t){let e=t[12].option_value+"",n,i,r=t[12].price.toLocaleString("ko-KR")+"",o,h;return{c(){n=be(e),i=be(" ("),o=be(r),h=be("원)  ")},m(a,s){B(a,n,s),B(a,i,s),B(a,o,s),B(a,h,s)},p(a,s){s&4&&e!==(e=a[12].option_value+"")&&He(n,e),s&4&&r!==(r=a[12].price.toLocaleString("ko-KR")+"")&&He(o,r)},d(a){a&&(N(n),N(i),N(o),N(h))}}}function N_(t){let e,n=t[12].price.toLocaleString("ko-KR")+"",i,r;return{c(){e=be("("),i=be(n),r=be("원)  ")},m(o,h){B(o,e,h),B(o,i,h),B(o,r,h)},p(o,h){h&4&&n!==(n=o[12].price.toLocaleString("ko-KR")+"")&&He(i,n)},d(o){o&&(N(e),N(i),N(r))}}}function j_(t){let e,n,i,r,o,h,a,s=t[9].product_name+"",c,f,l,u,d,p,m,g,v,_=t[9].quantity+"",b,y,w,C,T,O,D=t[9].price.toLocaleString("ko-KR")+"",I,Y,z,q,G=t[0]==="cart"&&I_(t),j={ctx:t,current:null,token:null,hasCatch:!1,pending:LN,then:FN,catch:RN,value:17};qs(r=t[9].editorData,j);function W(E,P){return E[0]==="orderend"?jN:NN}let te=W(t),se=te(t);return{c(){e=x("div"),n=x("div"),G&&G.c(),i=V(),j.block.c(),o=V(),h=x("div"),a=x("h1"),c=be(s),l=V(),u=x("div"),d=x("p"),se.c(),p=V(),m=x("p"),g=be("수량: "),v=x("span"),b=be(_),y=be("개"),w=V(),C=x("p"),T=be("금액: "),O=x("span"),I=be(D),Y=be("원"),q=V(),S(n,"class","flex w-full gap-2 items-center overflow-x-hidden"),S(a,"class","font-semibold"),S(h,"class",f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":"")),S(v,"class","font-semibold"),S(O,"class","font-semibold"),S(u,"class",z="flex gap-5 "+(t[0]==="cart"?"pl-8":"")),S(e,"class","p-5")},m(E,P){B(E,e,P),k(e,n),G&&G.m(n,null),k(n,i),j.block.m(n,j.anchor=null),j.mount=()=>n,j.anchor=null,k(e,o),k(e,h),k(h,a),k(a,c),k(e,l),k(e,u),k(u,d),se.m(d,null),k(u,p),k(u,m),k(m,g),k(m,v),k(v,b),k(m,y),k(u,w),k(u,C),k(C,T),k(C,O),k(O,I),k(C,Y),k(e,q)},p(E,P){t=E,t[0]==="cart"?G?G.p(t,P):(G=I_(t),G.c(),G.m(n,i)):G&&(G.d(1),G=null),j.ctx=t,P&4&&r!==(r=t[9].editorData)&&qs(r,j)||dh(j,t,P),P&4&&s!==(s=t[9].product_name+"")&&He(c,s),P&1&&f!==(f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":""))&&S(h,"class",f),te===(te=W(t))&&se?se.p(t,P):(se.d(1),se=te(t),se&&(se.c(),se.m(d,null))),P&4&&_!==(_=t[9].quantity+"")&&He(b,_),P&4&&D!==(D=t[9].price.toLocaleString("ko-KR")+"")&&He(I,D),P&1&&z!==(z="flex gap-5 "+(t[0]==="cart"?"pl-8":""))&&S(u,"class",z)},d(E){E&&N(e),G&&G.d(),j.block.d(),j.token=null,j=null,se.d()}}}function BN(t){var i;let e,n=((i=t[2])==null?void 0:i.length)&&M_(t);return{c(){n&&n.c(),e=Je()},m(r,o){n&&n.m(r,o),B(r,e,o)},p(r,[o]){var h;(h=r[2])!=null&&h.length?n?n.p(r,o):(n=M_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(r){r&&N(e),n&&n.d(r)}}}function UN(t,e,n){let{previews:i}=e,{mode:r="cart"}=e,o=[],h=[];console.log({previews:i});function a(u,d){i.items.forEach(p=>{p.uuid===d&&(p.element.querySelector("input[type=checkbox]").checked=u)})}const s=u=>{var d;return(d=u.additional_option_values)!=null&&d.length?u.additional_option_values.map(({custom_option:p,quantity:m})=>{const g=p.find(({key:_})=>_==="item_option_add").value,v=u.option_value[0];return{uuid:g,option_value:v,quantity:m,price:u.discount_price}}):[]},c=u=>{const d={};return u.forEach(p=>{s(p).forEach(g=>{const{uuid:v}=g;if(!d[v]){const _=cb(v);d[v]={uuid:v,editorData:_,items:[]}}d[v].items.push({option_value:g.option_value.replace(/\[|\]|\([+-]?\d{1,3}(,\d{3})*\)/g,""),quantity:g.quantity,price:g.price}),d[v].quantity=g.quantity,d[v].price=d[v].items.reduce((_,b)=>_+b.quantity*b.price,0),d[v].product_name=p.product_name})}),Object.values(d)};xi(async()=>{var d;(d=i.elements)!=null&&d.length&&i.elements.forEach(p=>{p.style.display="none"});const u=await ex();n(2,o=c(u.items)),document.getElementById("product_select_all")&&document.getElementById("product_select_all").addEventListener("click",function(){document.querySelectorAll(".podiz-checkbox").forEach(function(p){p.checked=!p.checked})})});const f=(u,d)=>a(d.target.checked,u.uuid);function l(u,d){tt[u?"unshift":"push"](()=>{h[d]=u,n(1,h)})}return t.$$set=u=>{"previews"in u&&n(4,i=u.previews),"mode"in u&&n(0,r=u.mode)},t.$$.update=()=>{t.$$.dirty&2&&(h==null?void 0:h.length)>0&&h.forEach(u=>{new cw(u,{toolbar:!1,title:!1,navbar:2})})},[r,h,o,a,i,f,l]}class YN extends qe{constructor(e){super(),Ge(this,e,UN,BN,Ve,{previews:4,mode:0})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Ow;function we(){return Ow.apply(null,arguments)}function WN(t){Ow=t}function si(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function qr(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function it(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pd(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(it(t,e))return!1;return!0}function Sn(t){return t===void 0}function qi(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Na(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ew(t,e){var n=[],i,r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function pr(t,e){for(var n in e)it(e,n)&&(t[n]=e[n]);return it(e,"toString")&&(t.toString=e.toString),it(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Pi(t,e,n,i){return Kw(t,e,n,i,!0).utc()}function zN(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ze(t){return t._pf==null&&(t._pf=zN()),t._pf}var nh;Array.prototype.some?nh=Array.prototype.some:nh=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function gd(t){var e=null,n=!1,i=t._d&&!isNaN(t._d.getTime());if(i&&(e=ze(t),n=nh.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i;return t._isValid}function Uc(t){var e=Pi(NaN);return t!=null?pr(ze(e),t):ze(e).userInvalidated=!0,e}var B_=we.momentProperties=[],qu=!1;function md(t,e){var n,i,r,o=B_.length;if(Sn(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Sn(e._i)||(t._i=e._i),Sn(e._f)||(t._f=e._f),Sn(e._l)||(t._l=e._l),Sn(e._strict)||(t._strict=e._strict),Sn(e._tzm)||(t._tzm=e._tzm),Sn(e._isUTC)||(t._isUTC=e._isUTC),Sn(e._offset)||(t._offset=e._offset),Sn(e._pf)||(t._pf=ze(e)),Sn(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)i=B_[n],r=e[i],Sn(r)||(t[i]=r);return t}function ja(t){md(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),qu===!1&&(qu=!0,we.updateOffset(this),qu=!1)}function oi(t){return t instanceof ja||t!=null&&t._isAMomentObject!=null}function xw(t){we.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Gn(t,e){var n=!0;return pr(function(){if(we.deprecationHandler!=null&&we.deprecationHandler(null,t),n){var i=[],r,o,h,a=arguments.length;for(o=0;o<a;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(h in arguments[0])it(arguments[0],h)&&(r+=h+": "+arguments[0][h]+", ");r=r.slice(0,-2)}else r=arguments[o];i.push(r)}xw(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var U_={};function Dw(t,e){we.deprecationHandler!=null&&we.deprecationHandler(t,e),U_[t]||(xw(e),U_[t]=!0)}we.suppressDeprecationWarnings=!1;we.deprecationHandler=null;function Mi(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function HN(t){var e,n;for(n in t)it(t,n)&&(e=t[n],Mi(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ih(t,e){var n=pr({},t),i;for(i in e)it(e,i)&&(qr(t[i])&&qr(e[i])?(n[i]={},pr(n[i],t[i]),pr(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)it(t,i)&&!it(e,i)&&qr(t[i])&&(n[i]=pr({},n[i]));return n}function vd(t){t!=null&&this.set(t)}var rh;Object.keys?rh=Object.keys:rh=function(t){var e,n=[];for(e in t)it(t,e)&&n.push(e);return n};var VN={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function XN(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return Mi(i)?i.call(e,n):i}function Ei(t,e,n){var i=""+Math.abs(t),r=e-i.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var _d=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,hl=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ku={},Xs={};function Ae(t,e,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),t&&(Xs[t]=r),e&&(Xs[e[0]]=function(){return Ei(r.apply(this,arguments),e[1],e[2])}),n&&(Xs[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function $N(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function GN(t){var e=t.match(_d),n,i;for(n=0,i=e.length;n<i;n++)Xs[e[n]]?e[n]=Xs[e[n]]:e[n]=$N(e[n]);return function(r){var o="",h;for(h=0;h<i;h++)o+=Mi(e[h])?e[h].call(r,t):e[h];return o}}function Dl(t,e){return t.isValid()?(e=Aw(e,t.localeData()),Ku[e]=Ku[e]||GN(e),Ku[e](t)):t.localeData().invalidDate()}function Aw(t,e){var n=5;function i(r){return e.longDateFormat(r)||r}for(hl.lastIndex=0;n>=0&&hl.test(t);)t=t.replace(hl,i),hl.lastIndex=0,n-=1;return t}var qN={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function KN(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(_d).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var JN="Invalid date";function ZN(){return this._invalidDate}var QN="%d",ej=/\d{1,2}/;function tj(t){return this._ordinal.replace("%d",t)}var nj={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ij(t,e,n,i){var r=this._relativeTime[n];return Mi(r)?r(t,e,n,i):r.replace(/%d/i,t)}function rj(t,e){var n=this._relativeTime[t>0?"future":"past"];return Mi(n)?n(e):n.replace(/%s/i,e)}var Y_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function qn(t){return typeof t=="string"?Y_[t]||Y_[t.toLowerCase()]:void 0}function yd(t){var e={},n,i;for(i in t)it(t,i)&&(n=qn(i),n&&(e[n]=t[i]));return e}var sj={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function oj(t){var e=[],n;for(n in t)it(t,n)&&e.push({unit:n,priority:sj[n]});return e.sort(function(i,r){return i.priority-r.priority}),e}var Pw=/\d/,Nn=/\d\d/,Mw=/\d{3}/,bd=/\d{4}/,Yc=/[+-]?\d{6}/,bt=/\d\d?/,Iw=/\d\d\d\d?/,Rw=/\d\d\d\d\d\d?/,Wc=/\d{1,3}/,wd=/\d{1,4}/,zc=/[+-]?\d{1,6}/,wo=/\d+/,Hc=/[+-]?\d+/,aj=/Z|[+-]\d\d:?\d\d/gi,Vc=/Z|[+-]\d\d(?::?\d\d)?/gi,lj=/[+-]?\d+(\.\d{1,3})?/,Ba=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Co=/^[1-9]\d?/,Cd=/^([1-9]\d|\d)/,ac;ac={};function Oe(t,e,n){ac[t]=Mi(e)?e:function(i,r){return i&&n?n:e}}function cj(t,e){return it(ac,t)?ac[t](e._strict,e._locale):new RegExp(uj(t))}function uj(t){return Vi(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,r,o){return n||i||r||o}))}function Vi(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wn(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function et(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Wn(e)),n}var sh={};function ut(t,e){var n,i=e,r;for(typeof t=="string"&&(t=[t]),qi(e)&&(i=function(o,h){h[e]=et(o)}),r=t.length,n=0;n<r;n++)sh[t[n]]=i}function Ua(t,e){ut(t,function(n,i,r,o){r._w=r._w||{},e(n,r._w,r,o)})}function fj(t,e,n){e!=null&&it(sh,t)&&sh[t](e,n._a,n,t)}function Xc(t){return t%4===0&&t%100!==0||t%400===0}var fn=0,Yi=1,gi=2,qt=3,ii=4,Wi=5,Br=6,hj=7,dj=8;Ae("Y",0,0,function(){var t=this.year();return t<=9999?Ei(t,4):"+"+t});Ae(0,["YY",2],0,function(){return this.year()%100});Ae(0,["YYYY",4],0,"year");Ae(0,["YYYYY",5],0,"year");Ae(0,["YYYYYY",6,!0],0,"year");Oe("Y",Hc);Oe("YY",bt,Nn);Oe("YYYY",wd,bd);Oe("YYYYY",zc,Yc);Oe("YYYYYY",zc,Yc);ut(["YYYYY","YYYYYY"],fn);ut("YYYY",function(t,e){e[fn]=t.length===2?we.parseTwoDigitYear(t):et(t)});ut("YY",function(t,e){e[fn]=we.parseTwoDigitYear(t)});ut("Y",function(t,e){e[fn]=parseInt(t,10)});function ta(t){return Xc(t)?366:365}we.parseTwoDigitYear=function(t){return et(t)+(et(t)>68?1900:2e3)};var Fw=So("FullYear",!0);function pj(){return Xc(this.year())}function So(t,e){return function(n){return n!=null?(Lw(this,t,n),we.updateOffset(this,e),this):va(this,t)}}function va(t,e){if(!t.isValid())return NaN;var n=t._d,i=t._isUTC;switch(e){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Lw(t,e,n){var i,r,o,h,a;if(!(!t.isValid()||isNaN(n))){switch(i=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,h=t.month(),a=t.date(),a=a===29&&h===1&&!Xc(o)?28:a,r?i.setUTCFullYear(o,h,a):i.setFullYear(o,h,a)}}function gj(t){return t=qn(t),Mi(this[t])?this[t]():this}function mj(t,e){if(typeof t=="object"){t=yd(t);var n=oj(t),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](t[n[i].unit])}else if(t=qn(t),Mi(this[t]))return this[t](e);return this}function vj(t,e){return(t%e+e)%e}var Nt;Array.prototype.indexOf?Nt=Array.prototype.indexOf:Nt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Sd(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=vj(e,12);return t+=(e-n)/12,n===1?Xc(t)?29:28:31-n%7%2}Ae("M",["MM",2],"Mo",function(){return this.month()+1});Ae("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Ae("MMMM",0,0,function(t){return this.localeData().months(this,t)});Oe("M",bt,Co);Oe("MM",bt,Nn);Oe("MMM",function(t,e){return e.monthsShortRegex(t)});Oe("MMMM",function(t,e){return e.monthsRegex(t)});ut(["M","MM"],function(t,e){e[Yi]=et(t)-1});ut(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);r!=null?e[Yi]=r:ze(n).invalidMonth=t});var _j="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nw="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),jw=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yj=Ba,bj=Ba;function wj(t,e){return t?si(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||jw).test(e)?"format":"standalone"][t.month()]:si(this._months)?this._months:this._months.standalone}function Cj(t,e){return t?si(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[jw.test(e)?"format":"standalone"][t.month()]:si(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Sj(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=Pi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:null):(r=Nt.call(this._longMonthsParse,h),r!==-1?r:null):e==="MMM"?(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:(r=Nt.call(this._longMonthsParse,h),r!==-1?r:null)):(r=Nt.call(this._longMonthsParse,h),r!==-1?r:(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:null))}function Tj(t,e,n){var i,r,o;if(this._monthsParseExact)return Sj.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Pi([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function Bw(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=et(e);else if(e=t.localeData().monthsParse(e),!qi(e))return t}var n=e,i=t.date();return i=i<29?i:Math.min(i,Sd(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,i):t._d.setMonth(n,i),t}function Uw(t){return t!=null?(Bw(this,t),we.updateOffset(this,!0),this):va(this,"Month")}function kj(){return Sd(this.year(),this.month())}function Oj(t){return this._monthsParseExact?(it(this,"_monthsRegex")||Yw.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(it(this,"_monthsShortRegex")||(this._monthsShortRegex=yj),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ej(t){return this._monthsParseExact?(it(this,"_monthsRegex")||Yw.call(this),t?this._monthsStrictRegex:this._monthsRegex):(it(this,"_monthsRegex")||(this._monthsRegex=bj),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Yw(){function t(s,c){return c.length-s.length}var e=[],n=[],i=[],r,o,h,a;for(r=0;r<12;r++)o=Pi([2e3,r]),h=Vi(this.monthsShort(o,"")),a=Vi(this.months(o,"")),e.push(h),n.push(a),i.push(a),i.push(h);e.sort(t),n.sort(t),i.sort(t),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function xj(t,e,n,i,r,o,h){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,h),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,h),a}function _a(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function lc(t,e,n){var i=7+e-n,r=(7+_a(t,0,i).getUTCDay()-e)%7;return-r+i-1}function Ww(t,e,n,i,r){var o=(7+n-i)%7,h=lc(t,i,r),a=1+7*(e-1)+o+h,s,c;return a<=0?(s=t-1,c=ta(s)+a):a>ta(t)?(s=t+1,c=a-ta(t)):(s=t,c=a),{year:s,dayOfYear:c}}function ya(t,e,n){var i=lc(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,o,h;return r<1?(h=t.year()-1,o=r+Xi(h,e,n)):r>Xi(t.year(),e,n)?(o=r-Xi(t.year(),e,n),h=t.year()+1):(h=t.year(),o=r),{week:o,year:h}}function Xi(t,e,n){var i=lc(t,e,n),r=lc(t+1,e,n);return(ta(t)-i+r)/7}Ae("w",["ww",2],"wo","week");Ae("W",["WW",2],"Wo","isoWeek");Oe("w",bt,Co);Oe("ww",bt,Nn);Oe("W",bt,Co);Oe("WW",bt,Nn);Ua(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=et(t)});function Dj(t){return ya(t,this._week.dow,this._week.doy).week}var Aj={dow:0,doy:6};function Pj(){return this._week.dow}function Mj(){return this._week.doy}function Ij(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Rj(t){var e=ya(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Ae("d",0,"do","day");Ae("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Ae("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Ae("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Ae("e",0,0,"weekday");Ae("E",0,0,"isoWeekday");Oe("d",bt);Oe("e",bt);Oe("E",bt);Oe("dd",function(t,e){return e.weekdaysMinRegex(t)});Oe("ddd",function(t,e){return e.weekdaysShortRegex(t)});Oe("dddd",function(t,e){return e.weekdaysRegex(t)});Ua(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);r!=null?e.d=r:ze(n).invalidWeekday=t});Ua(["d","e","E"],function(t,e,n,i){e[i]=et(t)});function Fj(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Lj(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Td(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Nj="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jj="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bj=Ba,Uj=Ba,Yj=Ba;function Wj(t,e){var n=si(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Td(n,this._week.dow):t?n[t.day()]:n}function zj(t){return t===!0?Td(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Hj(t){return t===!0?Td(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Vj(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=Pi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(r=Nt.call(this._weekdaysParse,h),r!==-1?r:null):e==="ddd"?(r=Nt.call(this._shortWeekdaysParse,h),r!==-1?r:null):(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null):e==="dddd"?(r=Nt.call(this._weekdaysParse,h),r!==-1||(r=Nt.call(this._shortWeekdaysParse,h),r!==-1)?r:(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null)):e==="ddd"?(r=Nt.call(this._shortWeekdaysParse,h),r!==-1||(r=Nt.call(this._weekdaysParse,h),r!==-1)?r:(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null)):(r=Nt.call(this._minWeekdaysParse,h),r!==-1||(r=Nt.call(this._weekdaysParse,h),r!==-1)?r:(r=Nt.call(this._shortWeekdaysParse,h),r!==-1?r:null))}function Xj(t,e,n){var i,r,o;if(this._weekdaysParseExact)return Vj.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=Pi([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function $j(t){if(!this.isValid())return t!=null?this:NaN;var e=va(this,"Day");return t!=null?(t=Fj(t,this.localeData()),this.add(t-e,"d")):e}function Gj(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function qj(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Lj(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Kj(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||kd.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(it(this,"_weekdaysRegex")||(this._weekdaysRegex=Bj),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Jj(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||kd.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(it(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Uj),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Zj(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||kd.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(it(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yj),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function kd(){function t(f,l){return l.length-f.length}var e=[],n=[],i=[],r=[],o,h,a,s,c;for(o=0;o<7;o++)h=Pi([2e3,1]).day(o),a=Vi(this.weekdaysMin(h,"")),s=Vi(this.weekdaysShort(h,"")),c=Vi(this.weekdays(h,"")),e.push(a),n.push(s),i.push(c),r.push(a),r.push(s),r.push(c);e.sort(t),n.sort(t),i.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Od(){return this.hours()%12||12}function Qj(){return this.hours()||24}Ae("H",["HH",2],0,"hour");Ae("h",["hh",2],0,Od);Ae("k",["kk",2],0,Qj);Ae("hmm",0,0,function(){return""+Od.apply(this)+Ei(this.minutes(),2)});Ae("hmmss",0,0,function(){return""+Od.apply(this)+Ei(this.minutes(),2)+Ei(this.seconds(),2)});Ae("Hmm",0,0,function(){return""+this.hours()+Ei(this.minutes(),2)});Ae("Hmmss",0,0,function(){return""+this.hours()+Ei(this.minutes(),2)+Ei(this.seconds(),2)});function Hw(t,e){Ae(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Hw("a",!0);Hw("A",!1);function Vw(t,e){return e._meridiemParse}Oe("a",Vw);Oe("A",Vw);Oe("H",bt,Cd);Oe("h",bt,Co);Oe("k",bt,Co);Oe("HH",bt,Nn);Oe("hh",bt,Nn);Oe("kk",bt,Nn);Oe("hmm",Iw);Oe("hmmss",Rw);Oe("Hmm",Iw);Oe("Hmmss",Rw);ut(["H","HH"],qt);ut(["k","kk"],function(t,e,n){var i=et(t);e[qt]=i===24?0:i});ut(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});ut(["h","hh"],function(t,e,n){e[qt]=et(t),ze(n).bigHour=!0});ut("hmm",function(t,e,n){var i=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i)),ze(n).bigHour=!0});ut("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i,2)),e[Wi]=et(t.substr(r)),ze(n).bigHour=!0});ut("Hmm",function(t,e,n){var i=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i))});ut("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i,2)),e[Wi]=et(t.substr(r))});function e3(t){return(t+"").toLowerCase().charAt(0)==="p"}var t3=/[ap]\.?m?\.?/i,n3=So("Hours",!0);function i3(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var Xw={calendar:VN,longDateFormat:qN,invalidDate:JN,ordinal:QN,dayOfMonthOrdinalParse:ej,relativeTime:nj,months:_j,monthsShort:Nw,week:Aj,weekdays:Nj,weekdaysMin:jj,weekdaysShort:zw,meridiemParse:t3},Ct={},Lo={},ba;function r3(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function W_(t){return t&&t.toLowerCase().replace("_","-")}function s3(t){for(var e=0,n,i,r,o;e<t.length;){for(o=W_(t[e]).split("-"),n=o.length,i=W_(t[e+1]),i=i?i.split("-"):null;n>0;){if(r=$c(o.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&r3(o,i)>=n-1)break;n--}e++}return ba}function o3(t){return!!(t&&t.match("^[^/\\\\]*$"))}function $c(t){var e=null,n;if(Ct[t]===void 0&&typeof Ml<"u"&&Ml&&Ml.exports&&o3(t))try{e=ba._abbr,n=require,n("./locale/"+t),yr(e)}catch{Ct[t]=null}return Ct[t]}function yr(t,e){var n;return t&&(Sn(e)?n=Ki(t):n=Ed(t,e),n?ba=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ba._abbr}function Ed(t,e){if(e!==null){var n,i=Xw;if(e.abbr=t,Ct[t]!=null)Dw("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ct[t]._config;else if(e.parentLocale!=null)if(Ct[e.parentLocale]!=null)i=Ct[e.parentLocale]._config;else if(n=$c(e.parentLocale),n!=null)i=n._config;else return Lo[e.parentLocale]||(Lo[e.parentLocale]=[]),Lo[e.parentLocale].push({name:t,config:e}),null;return Ct[t]=new vd(ih(i,e)),Lo[t]&&Lo[t].forEach(function(r){Ed(r.name,r.config)}),yr(t),Ct[t]}else return delete Ct[t],null}function a3(t,e){if(e!=null){var n,i,r=Xw;Ct[t]!=null&&Ct[t].parentLocale!=null?Ct[t].set(ih(Ct[t]._config,e)):(i=$c(t),i!=null&&(r=i._config),e=ih(r,e),i==null&&(e.abbr=t),n=new vd(e),n.parentLocale=Ct[t],Ct[t]=n),yr(t)}else Ct[t]!=null&&(Ct[t].parentLocale!=null?(Ct[t]=Ct[t].parentLocale,t===yr()&&yr(t)):Ct[t]!=null&&delete Ct[t]);return Ct[t]}function Ki(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ba;if(!si(t)){if(e=$c(t),e)return e;t=[t]}return s3(t)}function l3(){return rh(Ct)}function xd(t){var e,n=t._a;return n&&ze(t).overflow===-2&&(e=n[Yi]<0||n[Yi]>11?Yi:n[gi]<1||n[gi]>Sd(n[fn],n[Yi])?gi:n[qt]<0||n[qt]>24||n[qt]===24&&(n[ii]!==0||n[Wi]!==0||n[Br]!==0)?qt:n[ii]<0||n[ii]>59?ii:n[Wi]<0||n[Wi]>59?Wi:n[Br]<0||n[Br]>999?Br:-1,ze(t)._overflowDayOfYear&&(e<fn||e>gi)&&(e=gi),ze(t)._overflowWeeks&&e===-1&&(e=hj),ze(t)._overflowWeekday&&e===-1&&(e=dj),ze(t).overflow=e),t}var c3=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,u3=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,f3=/Z|[+-]\d\d(?::?\d\d)?/,dl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ju=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],h3=/^\/?Date\((-?\d+)/i,d3=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,p3={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function $w(t){var e,n,i=t._i,r=c3.exec(i)||u3.exec(i),o,h,a,s,c=dl.length,f=Ju.length;if(r){for(ze(t).iso=!0,e=0,n=c;e<n;e++)if(dl[e][1].exec(r[1])){h=dl[e][0],o=dl[e][2]!==!1;break}if(h==null){t._isValid=!1;return}if(r[3]){for(e=0,n=f;e<n;e++)if(Ju[e][1].exec(r[3])){a=(r[2]||" ")+Ju[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(r[4])if(f3.exec(r[4]))s="Z";else{t._isValid=!1;return}t._f=h+(a||"")+(s||""),Ad(t)}else t._isValid=!1}function g3(t,e,n,i,r,o){var h=[m3(t),Nw.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&h.push(parseInt(o,10)),h}function m3(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function v3(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function _3(t,e,n){if(t){var i=zw.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return ze(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function y3(t,e,n){if(t)return p3[t];if(e)return 0;var i=parseInt(n,10),r=i%100,o=(i-r)/100;return o*60+r}function Gw(t){var e=d3.exec(v3(t._i)),n;if(e){if(n=g3(e[4],e[3],e[2],e[5],e[6],e[7]),!_3(e[1],n,t))return;t._a=n,t._tzm=y3(e[8],e[9],e[10]),t._d=_a.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ze(t).rfc2822=!0}else t._isValid=!1}function b3(t){var e=h3.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if($w(t),t._isValid===!1)delete t._isValid;else return;if(Gw(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:we.createFromInputFallback(t)}we.createFromInputFallback=Gn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Os(t,e,n){return t??e??n}function w3(t){var e=new Date(we.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Dd(t){var e,n,i=[],r,o,h;if(!t._d){for(r=w3(t),t._w&&t._a[gi]==null&&t._a[Yi]==null&&C3(t),t._dayOfYear!=null&&(h=Os(t._a[fn],r[fn]),(t._dayOfYear>ta(h)||t._dayOfYear===0)&&(ze(t)._overflowDayOfYear=!0),n=_a(h,0,t._dayOfYear),t._a[Yi]=n.getUTCMonth(),t._a[gi]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[qt]===24&&t._a[ii]===0&&t._a[Wi]===0&&t._a[Br]===0&&(t._nextDay=!0,t._a[qt]=0),t._d=(t._useUTC?_a:xj).apply(null,i),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[qt]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(ze(t).weekdayMismatch=!0)}}function C3(t){var e,n,i,r,o,h,a,s,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,h=4,n=Os(e.GG,t._a[fn],ya(_t(),1,4).year),i=Os(e.W,1),r=Os(e.E,1),(r<1||r>7)&&(s=!0)):(o=t._locale._week.dow,h=t._locale._week.doy,c=ya(_t(),o,h),n=Os(e.gg,t._a[fn],c.year),i=Os(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(s=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(s=!0)):r=o),i<1||i>Xi(n,o,h)?ze(t)._overflowWeeks=!0:s!=null?ze(t)._overflowWeekday=!0:(a=Ww(n,i,r,o,h),t._a[fn]=a.year,t._dayOfYear=a.dayOfYear)}we.ISO_8601=function(){};we.RFC_2822=function(){};function Ad(t){if(t._f===we.ISO_8601){$w(t);return}if(t._f===we.RFC_2822){Gw(t);return}t._a=[],ze(t).empty=!0;var e=""+t._i,n,i,r,o,h,a=e.length,s=0,c,f;for(r=Aw(t._f,t._locale).match(_d)||[],f=r.length,n=0;n<f;n++)o=r[n],i=(e.match(cj(o,t))||[])[0],i&&(h=e.substr(0,e.indexOf(i)),h.length>0&&ze(t).unusedInput.push(h),e=e.slice(e.indexOf(i)+i.length),s+=i.length),Xs[o]?(i?ze(t).empty=!1:ze(t).unusedTokens.push(o),fj(o,i,t)):t._strict&&!i&&ze(t).unusedTokens.push(o);ze(t).charsLeftOver=a-s,e.length>0&&ze(t).unusedInput.push(e),t._a[qt]<=12&&ze(t).bigHour===!0&&t._a[qt]>0&&(ze(t).bigHour=void 0),ze(t).parsedDateParts=t._a.slice(0),ze(t).meridiem=t._meridiem,t._a[qt]=S3(t._locale,t._a[qt],t._meridiem),c=ze(t).era,c!==null&&(t._a[fn]=t._locale.erasConvertYear(c,t._a[fn])),Dd(t),xd(t)}function S3(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function T3(t){var e,n,i,r,o,h,a=!1,s=t._f.length;if(s===0){ze(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<s;r++)o=0,h=!1,e=md({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],Ad(e),gd(e)&&(h=!0),o+=ze(e).charsLeftOver,o+=ze(e).unusedTokens.length*10,ze(e).score=o,a?o<i&&(i=o,n=e):(i==null||o<i||h)&&(i=o,n=e,h&&(a=!0));pr(t,n||e)}function k3(t){if(!t._d){var e=yd(t._i),n=e.day===void 0?e.date:e.day;t._a=Ew([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Dd(t)}}function O3(t){var e=new ja(xd(qw(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function qw(t){var e=t._i,n=t._f;return t._locale=t._locale||Ki(t._l),e===null||n===void 0&&e===""?Uc({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),oi(e)?new ja(xd(e)):(Na(e)?t._d=e:si(n)?T3(t):n?Ad(t):E3(t),gd(t)||(t._d=null),t))}function E3(t){var e=t._i;Sn(e)?t._d=new Date(we.now()):Na(e)?t._d=new Date(e.valueOf()):typeof e=="string"?b3(t):si(e)?(t._a=Ew(e.slice(0),function(n){return parseInt(n,10)}),Dd(t)):qr(e)?k3(t):qi(e)?t._d=new Date(e):we.createFromInputFallback(t)}function Kw(t,e,n,i,r){var o={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(qr(t)&&pd(t)||si(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,O3(o)}function _t(t,e,n,i){return Kw(t,e,n,i,!1)}var x3=Gn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Uc()}),D3=Gn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Uc()});function Jw(t,e){var n,i;if(e.length===1&&si(e[0])&&(e=e[0]),!e.length)return _t();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function A3(){var t=[].slice.call(arguments,0);return Jw("isBefore",t)}function P3(){var t=[].slice.call(arguments,0);return Jw("isAfter",t)}var M3=function(){return Date.now?Date.now():+new Date},No=["year","quarter","month","week","day","hour","minute","second","millisecond"];function I3(t){var e,n=!1,i,r=No.length;for(e in t)if(it(t,e)&&!(Nt.call(No,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<r;++i)if(t[No[i]]){if(n)return!1;parseFloat(t[No[i]])!==et(t[No[i]])&&(n=!0)}return!0}function R3(){return this._isValid}function F3(){return ai(NaN)}function Gc(t){var e=yd(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,h=e.day||0,a=e.hour||0,s=e.minute||0,c=e.second||0,f=e.millisecond||0;this._isValid=I3(e),this._milliseconds=+f+c*1e3+s*6e4+a*1e3*60*60,this._days=+h+o*7,this._months=+r+i*3+n*12,this._data={},this._locale=Ki(),this._bubble()}function Al(t){return t instanceof Gc}function oh(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function L3(t,e,n){var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,h;for(h=0;h<i;h++)(n&&t[h]!==e[h]||!n&&et(t[h])!==et(e[h]))&&o++;return o+r}function Zw(t,e){Ae(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Ei(~~(n/60),2)+e+Ei(~~n%60,2)})}Zw("Z",":");Zw("ZZ","");Oe("Z",Vc);Oe("ZZ",Vc);ut(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Pd(Vc,t)});var N3=/([\+\-]|\d\d)/gi;function Pd(t,e){var n=(e||"").match(t),i,r,o;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(N3)||["-",0,0],o=+(r[1]*60)+et(r[2]),o===0?0:r[0]==="+"?o:-o)}function Md(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(oi(t)||Na(t)?t.valueOf():_t(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),we.updateOffset(n,!1),n):_t(t).local()}function ah(t){return-Math.round(t._d.getTimezoneOffset())}we.updateOffset=function(){};function j3(t,e,n){var i=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Pd(Vc,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=ah(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?t1(this,ai(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,we.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:ah(this)}function B3(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function U3(t){return this.utcOffset(0,t)}function Y3(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ah(this),"m")),this}function W3(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Pd(aj,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function z3(t){return this.isValid()?(t=t?_t(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function H3(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function V3(){if(!Sn(this._isDSTShifted))return this._isDSTShifted;var t={},e;return md(t,this),t=qw(t),t._a?(e=t._isUTC?Pi(t._a):_t(t._a),this._isDSTShifted=this.isValid()&&L3(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function X3(){return this.isValid()?!this._isUTC:!1}function $3(){return this.isValid()?this._isUTC:!1}function Qw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var G3=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,q3=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ai(t,e){var n=t,i=null,r,o,h;return Al(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:qi(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=G3.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:et(i[gi])*r,h:et(i[qt])*r,m:et(i[ii])*r,s:et(i[Wi])*r,ms:et(oh(i[Br]*1e3))*r}):(i=q3.exec(t))?(r=i[1]==="-"?-1:1,n={y:Dr(i[2],r),M:Dr(i[3],r),w:Dr(i[4],r),d:Dr(i[5],r),h:Dr(i[6],r),m:Dr(i[7],r),s:Dr(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(h=K3(_t(n.from),_t(n.to)),n={},n.ms=h.milliseconds,n.M=h.months),o=new Gc(n),Al(t)&&it(t,"_locale")&&(o._locale=t._locale),Al(t)&&it(t,"_isValid")&&(o._isValid=t._isValid),o}ai.fn=Gc.prototype;ai.invalid=F3;function Dr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function z_(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function K3(t,e){var n;return t.isValid()&&e.isValid()?(e=Md(e,t),t.isBefore(e)?n=z_(t,e):(n=z_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function e1(t,e){return function(n,i){var r,o;return i!==null&&!isNaN(+i)&&(Dw(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),r=ai(n,i),t1(this,r,t),this}}function t1(t,e,n,i){var r=e._milliseconds,o=oh(e._days),h=oh(e._months);t.isValid()&&(i=i??!0,h&&Bw(t,va(t,"Month")+h*n),o&&Lw(t,"Date",va(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&we.updateOffset(t,o||h))}var J3=e1(1,"add"),Z3=e1(-1,"subtract");function n1(t){return typeof t=="string"||t instanceof String}function Q3(t){return oi(t)||Na(t)||n1(t)||qi(t)||tB(t)||eB(t)||t===null||t===void 0}function eB(t){var e=qr(t)&&!pd(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,h=i.length;for(r=0;r<h;r+=1)o=i[r],n=n||it(t,o);return e&&n}function tB(t){var e=si(t),n=!1;return e&&(n=t.filter(function(i){return!qi(i)&&n1(t)}).length===0),e&&n}function nB(t){var e=qr(t)&&!pd(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<i.length;r+=1)o=i[r],n=n||it(t,o);return e&&n}function iB(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rB(t,e){arguments.length===1&&(arguments[0]?Q3(arguments[0])?(t=arguments[0],e=void 0):nB(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||_t(),i=Md(n,this).startOf("day"),r=we.calendarFormat(this,i)||"sameElse",o=e&&(Mi(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,_t(n)))}function sB(){return new ja(this)}function oB(t,e){var n=oi(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function aB(t,e){var n=oi(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function lB(t,e,n,i){var r=oi(t)?t:_t(t),o=oi(e)?e:_t(e);return this.isValid()&&r.isValid()&&o.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function cB(t,e){var n=oi(t)?t:_t(t),i;return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function uB(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function fB(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function hB(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(i=Md(t,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=qn(e),e){case"year":o=Pl(this,i)/12;break;case"month":o=Pl(this,i);break;case"quarter":o=Pl(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:Wn(o)}function Pl(t,e){if(t.date()<e.date())return-Pl(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,o;return e-i<0?(r=t.clone().add(n-1,"months"),o=(e-i)/(i-r)):(r=t.clone().add(n+1,"months"),o=(e-i)/(r-i)),-(n+o)||0}we.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";we.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function dB(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pB(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Dl(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Mi(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Dl(n,"Z")):Dl(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gB(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+i+r+o)}function mB(t){t||(t=this.isUtc()?we.defaultFormatUtc:we.defaultFormat);var e=Dl(this,t);return this.localeData().postformat(e)}function vB(t,e){return this.isValid()&&(oi(t)&&t.isValid()||_t(t).isValid())?ai({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _B(t){return this.from(_t(),t)}function yB(t,e){return this.isValid()&&(oi(t)&&t.isValid()||_t(t).isValid())?ai({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function bB(t){return this.to(_t(),t)}function i1(t){var e;return t===void 0?this._locale._abbr:(e=Ki(t),e!=null&&(this._locale=e),this)}var r1=Gn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function s1(){return this._locale}var cc=1e3,$s=60*cc,uc=60*$s,o1=(365*400+97)*24*uc;function Gs(t,e){return(t%e+e)%e}function a1(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-o1:new Date(t,e,n).valueOf()}function l1(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-o1:Date.UTC(t,e,n)}function wB(t){var e,n;if(t=qn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?l1:a1,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Gs(e+(this._isUTC?0:this.utcOffset()*$s),uc);break;case"minute":e=this._d.valueOf(),e-=Gs(e,$s);break;case"second":e=this._d.valueOf(),e-=Gs(e,cc);break}return this._d.setTime(e),we.updateOffset(this,!0),this}function CB(t){var e,n;if(t=qn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?l1:a1,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=uc-Gs(e+(this._isUTC?0:this.utcOffset()*$s),uc)-1;break;case"minute":e=this._d.valueOf(),e+=$s-Gs(e,$s)-1;break;case"second":e=this._d.valueOf(),e+=cc-Gs(e,cc)-1;break}return this._d.setTime(e),we.updateOffset(this,!0),this}function SB(){return this._d.valueOf()-(this._offset||0)*6e4}function TB(){return Math.floor(this.valueOf()/1e3)}function kB(){return new Date(this.valueOf())}function OB(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function EB(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function xB(){return this.isValid()?this.toISOString():null}function DB(){return gd(this)}function AB(){return pr({},ze(this))}function PB(){return ze(this).overflow}function MB(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ae("N",0,0,"eraAbbr");Ae("NN",0,0,"eraAbbr");Ae("NNN",0,0,"eraAbbr");Ae("NNNN",0,0,"eraName");Ae("NNNNN",0,0,"eraNarrow");Ae("y",["y",1],"yo","eraYear");Ae("y",["yy",2],0,"eraYear");Ae("y",["yyy",3],0,"eraYear");Ae("y",["yyyy",4],0,"eraYear");Oe("N",Id);Oe("NN",Id);Oe("NNN",Id);Oe("NNNN",zB);Oe("NNNNN",HB);ut(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?ze(n).era=r:ze(n).invalidEra=t});Oe("y",wo);Oe("yy",wo);Oe("yyy",wo);Oe("yyyy",wo);Oe("yo",VB);ut(["y","yy","yyy","yyyy"],fn);ut(["yo"],function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[fn]=n._locale.eraYearOrdinalParse(t,r):e[fn]=parseInt(t,10)});function IB(t,e){var n,i,r,o=this._eras||Ki("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=we(o[n].since).startOf("day"),o[n].since=r.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=we(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf();break}}return o}function RB(t,e,n){var i,r,o=this.eras(),h,a,s;for(t=t.toUpperCase(),i=0,r=o.length;i<r;++i)if(h=o[i].name.toUpperCase(),a=o[i].abbr.toUpperCase(),s=o[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[i];break;case"NNNN":if(h===t)return o[i];break;case"NNNNN":if(s===t)return o[i];break}else if([h,a,s].indexOf(t)>=0)return o[i]}function FB(t,e){var n=t.since<=t.until?1:-1;return e===void 0?we(t.since).year():we(t.since).year()+(e-t.offset)*n}function LB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function NB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function jB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function BB(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.clone().startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-we(r[t].since).year())*n+r[t].offset;return this.year()}function UB(t){return it(this,"_erasNameRegex")||Rd.call(this),t?this._erasNameRegex:this._erasRegex}function YB(t){return it(this,"_erasAbbrRegex")||Rd.call(this),t?this._erasAbbrRegex:this._erasRegex}function WB(t){return it(this,"_erasNarrowRegex")||Rd.call(this),t?this._erasNarrowRegex:this._erasRegex}function Id(t,e){return e.erasAbbrRegex(t)}function zB(t,e){return e.erasNameRegex(t)}function HB(t,e){return e.erasNarrowRegex(t)}function VB(t,e){return e._eraYearOrdinalRegex||wo}function Rd(){var t=[],e=[],n=[],i=[],r,o,h,a,s,c=this.eras();for(r=0,o=c.length;r<o;++r)h=Vi(c[r].name),a=Vi(c[r].abbr),s=Vi(c[r].narrow),e.push(h),t.push(a),n.push(s),i.push(h),i.push(a),i.push(s);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Ae(0,["gg",2],0,function(){return this.weekYear()%100});Ae(0,["GG",2],0,function(){return this.isoWeekYear()%100});function qc(t,e){Ae(0,[t,t.length],0,e)}qc("gggg","weekYear");qc("ggggg","weekYear");qc("GGGG","isoWeekYear");qc("GGGGG","isoWeekYear");Oe("G",Hc);Oe("g",Hc);Oe("GG",bt,Nn);Oe("gg",bt,Nn);Oe("GGGG",wd,bd);Oe("gggg",wd,bd);Oe("GGGGG",zc,Yc);Oe("ggggg",zc,Yc);Ua(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=et(t)});Ua(["gg","GG"],function(t,e,n,i){e[i]=we.parseTwoDigitYear(t)});function XB(t){return c1.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function $B(t){return c1.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function GB(){return Xi(this.year(),1,4)}function qB(){return Xi(this.isoWeekYear(),1,4)}function KB(){var t=this.localeData()._week;return Xi(this.year(),t.dow,t.doy)}function JB(){var t=this.localeData()._week;return Xi(this.weekYear(),t.dow,t.doy)}function c1(t,e,n,i,r){var o;return t==null?ya(this,i,r).year:(o=Xi(t,i,r),e>o&&(e=o),ZB.call(this,t,e,n,i,r))}function ZB(t,e,n,i,r){var o=Ww(t,e,n,i,r),h=_a(o.year,0,o.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}Ae("Q",0,"Qo","quarter");Oe("Q",Pw);ut("Q",function(t,e){e[Yi]=(et(t)-1)*3});function QB(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Ae("D",["DD",2],"Do","date");Oe("D",bt,Co);Oe("DD",bt,Nn);Oe("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ut(["D","DD"],gi);ut("Do",function(t,e){e[gi]=et(t.match(bt)[0])});var u1=So("Date",!0);Ae("DDD",["DDDD",3],"DDDo","dayOfYear");Oe("DDD",Wc);Oe("DDDD",Mw);ut(["DDD","DDDD"],function(t,e,n){n._dayOfYear=et(t)});function e4(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Ae("m",["mm",2],0,"minute");Oe("m",bt,Cd);Oe("mm",bt,Nn);ut(["m","mm"],ii);var t4=So("Minutes",!1);Ae("s",["ss",2],0,"second");Oe("s",bt,Cd);Oe("ss",bt,Nn);ut(["s","ss"],Wi);var n4=So("Seconds",!1);Ae("S",0,0,function(){return~~(this.millisecond()/100)});Ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ae(0,["SSS",3],0,"millisecond");Ae(0,["SSSS",4],0,function(){return this.millisecond()*10});Ae(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ae(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ae(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ae(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ae(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Oe("S",Wc,Pw);Oe("SS",Wc,Nn);Oe("SSS",Wc,Mw);var gr,f1;for(gr="SSSS";gr.length<=9;gr+="S")Oe(gr,wo);function i4(t,e){e[Br]=et(("0."+t)*1e3)}for(gr="S";gr.length<=9;gr+="S")ut(gr,i4);f1=So("Milliseconds",!1);Ae("z",0,0,"zoneAbbr");Ae("zz",0,0,"zoneName");function r4(){return this._isUTC?"UTC":""}function s4(){return this._isUTC?"Coordinated Universal Time":""}var ve=ja.prototype;ve.add=J3;ve.calendar=rB;ve.clone=sB;ve.diff=hB;ve.endOf=CB;ve.format=mB;ve.from=vB;ve.fromNow=_B;ve.to=yB;ve.toNow=bB;ve.get=gj;ve.invalidAt=PB;ve.isAfter=oB;ve.isBefore=aB;ve.isBetween=lB;ve.isSame=cB;ve.isSameOrAfter=uB;ve.isSameOrBefore=fB;ve.isValid=DB;ve.lang=r1;ve.locale=i1;ve.localeData=s1;ve.max=D3;ve.min=x3;ve.parsingFlags=AB;ve.set=mj;ve.startOf=wB;ve.subtract=Z3;ve.toArray=OB;ve.toObject=EB;ve.toDate=kB;ve.toISOString=pB;ve.inspect=gB;typeof Symbol<"u"&&Symbol.for!=null&&(ve[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ve.toJSON=xB;ve.toString=dB;ve.unix=TB;ve.valueOf=SB;ve.creationData=MB;ve.eraName=LB;ve.eraNarrow=NB;ve.eraAbbr=jB;ve.eraYear=BB;ve.year=Fw;ve.isLeapYear=pj;ve.weekYear=XB;ve.isoWeekYear=$B;ve.quarter=ve.quarters=QB;ve.month=Uw;ve.daysInMonth=kj;ve.week=ve.weeks=Ij;ve.isoWeek=ve.isoWeeks=Rj;ve.weeksInYear=KB;ve.weeksInWeekYear=JB;ve.isoWeeksInYear=GB;ve.isoWeeksInISOWeekYear=qB;ve.date=u1;ve.day=ve.days=$j;ve.weekday=Gj;ve.isoWeekday=qj;ve.dayOfYear=e4;ve.hour=ve.hours=n3;ve.minute=ve.minutes=t4;ve.second=ve.seconds=n4;ve.millisecond=ve.milliseconds=f1;ve.utcOffset=j3;ve.utc=U3;ve.local=Y3;ve.parseZone=W3;ve.hasAlignedHourOffset=z3;ve.isDST=H3;ve.isLocal=X3;ve.isUtcOffset=$3;ve.isUtc=Qw;ve.isUTC=Qw;ve.zoneAbbr=r4;ve.zoneName=s4;ve.dates=Gn("dates accessor is deprecated. Use date instead.",u1);ve.months=Gn("months accessor is deprecated. Use month instead",Uw);ve.years=Gn("years accessor is deprecated. Use year instead",Fw);ve.zone=Gn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",B3);ve.isDSTShifted=Gn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",V3);function o4(t){return _t(t*1e3)}function a4(){return _t.apply(null,arguments).parseZone()}function h1(t){return t}var rt=vd.prototype;rt.calendar=XN;rt.longDateFormat=KN;rt.invalidDate=ZN;rt.ordinal=tj;rt.preparse=h1;rt.postformat=h1;rt.relativeTime=ij;rt.pastFuture=rj;rt.set=HN;rt.eras=IB;rt.erasParse=RB;rt.erasConvertYear=FB;rt.erasAbbrRegex=YB;rt.erasNameRegex=UB;rt.erasNarrowRegex=WB;rt.months=wj;rt.monthsShort=Cj;rt.monthsParse=Tj;rt.monthsRegex=Ej;rt.monthsShortRegex=Oj;rt.week=Dj;rt.firstDayOfYear=Mj;rt.firstDayOfWeek=Pj;rt.weekdays=Wj;rt.weekdaysMin=Hj;rt.weekdaysShort=zj;rt.weekdaysParse=Xj;rt.weekdaysRegex=Kj;rt.weekdaysShortRegex=Jj;rt.weekdaysMinRegex=Zj;rt.isPM=e3;rt.meridiem=i3;function fc(t,e,n,i){var r=Ki(),o=Pi().set(i,e);return r[n](o,t)}function d1(t,e,n){if(qi(t)&&(e=t,t=void 0),t=t||"",e!=null)return fc(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=fc(t,i,n,"month");return r}function Fd(t,e,n,i){typeof t=="boolean"?(qi(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,qi(e)&&(n=e,e=void 0),e=e||"");var r=Ki(),o=t?r._week.dow:0,h,a=[];if(n!=null)return fc(e,(n+o)%7,i,"day");for(h=0;h<7;h++)a[h]=fc(e,(h+o)%7,i,"day");return a}function l4(t,e){return d1(t,e,"months")}function c4(t,e){return d1(t,e,"monthsShort")}function u4(t,e,n){return Fd(t,e,n,"weekdays")}function f4(t,e,n){return Fd(t,e,n,"weekdaysShort")}function h4(t,e,n){return Fd(t,e,n,"weekdaysMin")}yr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=et(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});we.lang=Gn("moment.lang is deprecated. Use moment.locale instead.",yr);we.langData=Gn("moment.langData is deprecated. Use moment.localeData instead.",Ki);var Fi=Math.abs;function d4(){var t=this._data;return this._milliseconds=Fi(this._milliseconds),this._days=Fi(this._days),this._months=Fi(this._months),t.milliseconds=Fi(t.milliseconds),t.seconds=Fi(t.seconds),t.minutes=Fi(t.minutes),t.hours=Fi(t.hours),t.months=Fi(t.months),t.years=Fi(t.years),this}function p1(t,e,n,i){var r=ai(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function p4(t,e){return p1(this,t,e,1)}function g4(t,e){return p1(this,t,e,-1)}function H_(t){return t<0?Math.floor(t):Math.ceil(t)}function m4(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,r,o,h,a,s;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=H_(lh(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,r=Wn(t/1e3),i.seconds=r%60,o=Wn(r/60),i.minutes=o%60,h=Wn(o/60),i.hours=h%24,e+=Wn(h/24),s=Wn(g1(e)),n+=s,e-=H_(lh(s)),a=Wn(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function g1(t){return t*4800/146097}function lh(t){return t*146097/4800}function v4(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=qn(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+g1(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(lh(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function Ji(t){return function(){return this.as(t)}}var m1=Ji("ms"),_4=Ji("s"),y4=Ji("m"),b4=Ji("h"),w4=Ji("d"),C4=Ji("w"),S4=Ji("M"),T4=Ji("Q"),k4=Ji("y"),O4=m1;function E4(){return ai(this)}function x4(t){return t=qn(t),this.isValid()?this[t+"s"]():NaN}function as(t){return function(){return this.isValid()?this._data[t]:NaN}}var D4=as("milliseconds"),A4=as("seconds"),P4=as("minutes"),M4=as("hours"),I4=as("days"),R4=as("months"),F4=as("years");function L4(){return Wn(this.days()/7)}var Li=Math.round,Is={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function N4(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function j4(t,e,n,i){var r=ai(t).abs(),o=Li(r.as("s")),h=Li(r.as("m")),a=Li(r.as("h")),s=Li(r.as("d")),c=Li(r.as("M")),f=Li(r.as("w")),l=Li(r.as("y")),u=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||h<=1&&["m"]||h<n.m&&["mm",h]||a<=1&&["h"]||a<n.h&&["hh",a]||s<=1&&["d"]||s<n.d&&["dd",s];return n.w!=null&&(u=u||f<=1&&["w"]||f<n.w&&["ww",f]),u=u||c<=1&&["M"]||c<n.M&&["MM",c]||l<=1&&["y"]||["yy",l],u[2]=e,u[3]=+t>0,u[4]=i,N4.apply(null,u)}function B4(t){return t===void 0?Li:typeof t=="function"?(Li=t,!0):!1}function U4(t,e){return Is[t]===void 0?!1:e===void 0?Is[t]:(Is[t]=e,t==="s"&&(Is.ss=e-1),!0)}function Y4(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Is,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},Is,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),o=j4(this,!n,i,r),n&&(o=r.pastFuture(+this,o)),r.postformat(o)}var Zu=Math.abs;function bs(t){return(t>0)-(t<0)||+t}function Kc(){if(!this.isValid())return this.localeData().invalidDate();var t=Zu(this._milliseconds)/1e3,e=Zu(this._days),n=Zu(this._months),i,r,o,h,a=this.asSeconds(),s,c,f,l;return a?(i=Wn(t/60),r=Wn(i/60),t%=60,i%=60,o=Wn(n/12),n%=12,h=t?t.toFixed(3).replace(/\.?0+$/,""):"",s=a<0?"-":"",c=bs(this._months)!==bs(a)?"-":"",f=bs(this._days)!==bs(a)?"-":"",l=bs(this._milliseconds)!==bs(a)?"-":"",s+"P"+(o?c+o+"Y":"")+(n?c+n+"M":"")+(e?f+e+"D":"")+(r||i||t?"T":"")+(r?l+r+"H":"")+(i?l+i+"M":"")+(t?l+h+"S":"")):"P0D"}var nt=Gc.prototype;nt.isValid=R3;nt.abs=d4;nt.add=p4;nt.subtract=g4;nt.as=v4;nt.asMilliseconds=m1;nt.asSeconds=_4;nt.asMinutes=y4;nt.asHours=b4;nt.asDays=w4;nt.asWeeks=C4;nt.asMonths=S4;nt.asQuarters=T4;nt.asYears=k4;nt.valueOf=O4;nt._bubble=m4;nt.clone=E4;nt.get=x4;nt.milliseconds=D4;nt.seconds=A4;nt.minutes=P4;nt.hours=M4;nt.days=I4;nt.weeks=L4;nt.months=R4;nt.years=F4;nt.humanize=Y4;nt.toISOString=Kc;nt.toString=Kc;nt.toJSON=Kc;nt.locale=i1;nt.localeData=s1;nt.toIsoString=Gn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kc);nt.lang=r1;Ae("X",0,0,"unix");Ae("x",0,0,"valueOf");Oe("x",Hc);Oe("X",lj);ut("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});ut("x",function(t,e,n){n._d=new Date(et(t))});//! moment.js
we.version="2.30.1";WN(_t);we.fn=ve;we.min=A3;we.max=P3;we.now=M3;we.utc=Pi;we.unix=o4;we.months=l4;we.isDate=Na;we.locale=yr;we.invalid=Uc;we.duration=ai;we.isMoment=oi;we.weekdays=u4;we.parseZone=a4;we.localeData=Ki;we.isDuration=Al;we.monthsShort=c4;we.weekdaysMin=h4;we.defineLocale=Ed;we.updateLocale=a3;we.locales=l3;we.weekdaysShort=f4;we.normalizeUnits=qn;we.relativeTimeRounding=B4;we.relativeTimeThreshold=U4;we.calendarFormat=iB;we.prototype=ve;we.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function V_(t,e,n){const i=t.slice();return i[8]=e[n],i}function X_(t,e,n){const i=t.slice();return i[11]=e[n],i}function W4(t){let e;return{c(){e=x("div"),e.innerHTML='<h2 class="flex p-5 justify-center">로그인후 이용가능합니다.</h2> <a href="/member/login.html" class="btn primary-btn btn-lg max-w-lg w-full">로그인 페이지로</a>',S(e,"class","flex flex-col justify-center items-center")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function z4(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m={ctx:t,current:null,token:null,hasCatch:!1,pending:q4,then:V4,catch:H4,value:7};return qs(u=t[3],m),{c(){e=x("div"),n=x("select"),i=x("option"),i.textContent="최근 1개월",r=x("option"),r.textContent="최근 3개월",o=x("option"),o.textContent="최근 5개월",h=x("option"),h.textContent="최근 6개월",a=x("option"),a.textContent="최근 9개월",s=x("option"),s.textContent="최근 12개월",c=x("option"),c.textContent="최근 2년",f=V(),l=Je(),m.block.c(),i.__value=1,Re(i,i.__value),r.__value=3,Re(r,r.__value),o.__value=5,Re(o,o.__value),h.__value=6,Re(h,h.__value),a.__value=9,Re(a,a.__value),s.__value=12,Re(s,s.__value),c.__value=24,Re(c,c.__value),S(n,"class","block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 select"),t[2]===void 0&&zt(()=>t[5].call(n)),S(e,"class","mb-4")},m(g,v){B(g,e,v),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(n,s),k(n,c),wi(n,t[2],!0),B(g,f,v),B(g,l,v),m.block.m(g,m.anchor=v),m.mount=()=>l.parentNode,m.anchor=l,d||(p=[Q(n,"change",t[5]),Q(n,"change",t[4])],d=!0)},p(g,v){t=g,v&4&&wi(n,t[2]),m.ctx=t,v&8&&u!==(u=t[3])&&qs(u,m)||dh(m,t,v)},d(g){g&&(N(e),N(f),N(l)),m.block.d(g),m.token=null,m=null,d=!1,Ue(p)}}}function H4(t){return{c:ge,m:ge,p:ge,d:ge}}function V4(t){let e=console.log({response:t[7]})+"",n,i,r;function o(s,c){return s[7].error?G4:s[7].count?$4:X4}let h=o(t),a=h(t);return{c(){n=be(e),i=V(),r=x("div"),a.c()},m(s,c){B(s,n,c),B(s,i,c),B(s,r,c),a.m(r,null)},p(s,c){c&8&&e!==(e=console.log({response:s[7]})+"")&&He(n,e),h===(h=o(s))&&a?a.p(s,c):(a.d(1),a=h(s),a&&(a.c(),a.m(r,null)))},d(s){s&&(N(n),N(i),N(r)),a.d()}}}function X4(t){let e;return{c(){e=x("div"),e.textContent="저장된 디자인이 없습니다.",S(e,"class","text-center py-8 text-gray-500")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function $4(t){let e,n=Fe(t[7].data),i=[];for(let r=0;r<n.length;r+=1)i[r]=K_(V_(t,n,r));return{c(){e=x("ul");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,o){B(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&10){n=Fe(r[7].data);let h;for(h=0;h<n.length;h+=1){const a=V_(r,n,h);i[h]?i[h].p(a,o):(i[h]=K_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function G4(t){let e,n=t[7].error+"",i;return{c(){e=x("div"),i=be(n),S(e,"class","text-red-500 p-4")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[7].error+"")&&He(i,n)},d(r){r&&N(e)}}}function $_(t){var q;let e,n,i,r,o,h,a,s,c,f=t[8].cafe24Product.product.product_name+"",l,u,d,p,m=we(t[8].created_at).format("YYYY-MM-DD")+"",g,v,_,b=Xl(t[8].cafe24Product.product.price)+"",y,w,C,T,O,D,I;function Y(){return t[6](t[8])}let z=((q=t[8].thumbnails)==null?void 0:q.length)&&G_(t);return{c(){e=x("li"),n=x("div"),i=x("div"),r=x("img"),a=V(),s=x("div"),c=x("h2"),l=be(f),u=V(),d=x("div"),p=be("주문일: "),g=be(m),v=V(),_=x("div"),y=be(b),w=V(),C=x("button"),C.textContent="디자인 재주문",T=V(),z&&z.c(),O=V(),Ye(r.src,o=t[8].cafe24Product.product.small_image)||S(r,"src",o),S(r,"class","w-24 h-24 object-cover rounded-md"),S(r,"alt",h=t[8].cafe24Product.product.product_name),S(c,"class","text-base font-semibold mb-2 line-clamp-2"),S(d,"class","text-sm font-normal mb-2"),S(_,"class","text-blue-600 font-bold mb-2"),S(C,"type","button"),S(C,"class","btn btn-sm primary-btn w-full"),S(s,"class","flex-1"),S(i,"class","flex items-center gap-4 mb-4"),S(n,"class","p-4"),S(e,"class","bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105")},m(G,j){B(G,e,j),k(e,n),k(n,i),k(i,r),k(i,a),k(i,s),k(s,c),k(c,l),k(s,u),k(s,d),k(d,p),k(d,g),k(s,v),k(s,_),k(_,y),k(s,w),k(s,C),k(n,T),z&&z.m(n,null),k(e,O),D||(I=Q(C,"click",Y),D=!0)},p(G,j){var W;t=G,j&8&&!Ye(r.src,o=t[8].cafe24Product.product.small_image)&&S(r,"src",o),j&8&&h!==(h=t[8].cafe24Product.product.product_name)&&S(r,"alt",h),j&8&&f!==(f=t[8].cafe24Product.product.product_name+"")&&He(l,f),j&8&&m!==(m=we(t[8].created_at).format("YYYY-MM-DD")+"")&&He(g,m),j&8&&b!==(b=Xl(t[8].cafe24Product.product.price)+"")&&He(y,b),(W=t[8].thumbnails)!=null&&W.length?z?z.p(t,j):(z=G_(t),z.c(),z.m(n,null)):z&&(z.d(1),z=null)},d(G){G&&N(e),z&&z.d(),D=!1,I()}}}function G_(t){let e,n=Fe(t[8].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=q_(X_(t,n,r));return{c(){e=x("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex overflow-x-auto space-x-2 pb-2")},m(r,o){B(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Fe(r[8].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=X_(r,n,h);i[h]?i[h].p(a,o):(i[h]=q_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Pt(i,r)}}}function q_(t){let e,n;return{c(){e=x("img"),Ye(e.src,n=t[11].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","w-20 h-20 object-cover rounded-md flex-shrink-0")},m(i,r){B(i,e,r)},p(i,r){r&8&&!Ye(e.src,n=i[11].url)&&S(e,"src",n)},d(i){i&&N(e)}}}function K_(t){var i;let e,n=((i=t[8].cafe24Product)==null?void 0:i.product)&&$_(t);return{c(){n&&n.c(),e=Je()},m(r,o){n&&n.m(r,o),B(r,e,o)},p(r,o){var h;(h=r[8].cafe24Product)!=null&&h.product?n?n.p(r,o):(n=$_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&N(e),n&&n.d(r)}}}function q4(t){let e;return{c(){e=x("div"),e.textContent="로딩 중...",S(e,"class","text-center py-4")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function K4(t){let e;function n(o,h){return o[0].cafe24UserType==="member"?z4:W4}let i=n(t),r=i(t);return{c(){r.c(),e=Je()},m(o,h){r.m(o,h),B(o,e,h)},p(o,[h]){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:ge,o:ge,d(o){o&&N(e),r.d(o)}}}function J4(t,e,n){let{user:i}=e,{handleClick:r}=e,o=3,h;function a(f){n(2,o=parseInt(f.target.value))}function s(){o=Yo(this),n(2,o)}const c=f=>r(f.uuid);return t.$$set=f=>{"user"in f&&n(0,i=f.user),"handleClick"in f&&n(1,r=f.handleClick)},t.$$.update=()=>{t.$$.dirty&13&&(n(3,h=uk(i.cafe24MallId,i.cafe24MemberId,o)),console.log({loadCafe24MemberDesign:h}))},[i,r,o,h,a,s,c]}class Z4 extends qe{constructor(e){super(),Ge(this,e,J4,K4,Ve,{user:0,handleClick:1})}}function J_(t){let e,n,i,r,o=t[4].printGuide+"",h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w;return c=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=x("div"),n=x("div"),i=x("h2"),r=x("span"),h=be(o),a=V(),s=x("button"),he(c.$$.fragment),f=V(),l=x("div"),u=x("textarea"),d=V(),p=x("div"),m=x("button"),m.textContent="주문하기",g=V(),v=x("button"),v.textContent="취소",S(r,"class","font-semibold"),S(s,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(u,"class","textarea"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(C,T){B(C,e,T),k(e,n),k(n,i),k(i,r),k(r,h),k(i,a),k(i,s),ue(c,s,null),k(n,f),k(n,l),k(l,u),Re(u,t[3]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(w=[Q(s,"click",dn),Q(u,"input",t[7]),Q(u,"change",t[8]),Q(m,"click",t[9]),Q(v,"click",dn),Q(e,"introstart",t[5]),Q(e,"outroend",t[6])],y=!0)},p(C,T){(!b||T&16)&&o!==(o=C[4].printGuide+"")&&He(h,o),T&8&&Re(u,C[3])},i(C){b||(M(c.$$.fragment,C),C&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(C){U(c.$$.fragment,C),C&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(C){C&&N(e),fe(c),C&&_&&_.end(),y=!1,Ue(w)}}}function Q4(t){let e,n,i=t[0]&&J_(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=J_(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function e5(t,e,n){let i;Me(t,po,d=>n(4,i=d));let{isOpen:r}=e,{orderAction:o}=e,{setPrintMemo:h}=e,a="";function s(d){Si.call(this,t,d)}function c(d){Si.call(this,t,d)}function f(){a=this.value,n(3,a)}const l=()=>h(a),u=()=>o();return t.$$set=d=>{"isOpen"in d&&n(0,r=d.isOpen),"orderAction"in d&&n(1,o=d.orderAction),"setPrintMemo"in d&&n(2,h=d.setPrintMemo)},[r,o,h,a,i,s,c,f,l,u]}class t5 extends qe{constructor(e){super(),Ge(this,e,e5,Q4,Ve,{isOpen:0,orderAction:1,setPrintMemo:2})}}function Z_(t,e,n){const i=t.slice();return i[15]=e[n],i}function Q_(t,e,n){const i=t.slice();return i[18]=e[n],i}function ey(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w,C,T,O,D,I;a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let Y=Fe(t[1]),z=[];for(let W=0;W<Y.length;W+=1)z[W]=ty(Q_(t,Y,W));const q=[i5,n5],G=[];function j(W,te){return W[5]?0:1}return _=j(t),b=G[_]=q[_](t),{c(){e=x("div"),n=x("div"),i=x("h2"),r=x("span"),r.textContent="상품변경",o=V(),h=x("button"),he(a.$$.fragment),s=V(),c=x("div"),f=x("div"),l=x("select"),u=x("option"),u.textContent="모든 카테고리";for(let W=0;W<z.length;W+=1)z[W].c();d=V(),p=x("input"),m=V(),g=x("button"),g.textContent="검색",v=V(),b.c(),y=V(),w=x("div"),C=x("button"),C.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),u.__value=null,Re(u,u.__value),S(l,"class","select w-5/12"),t[2]===void 0&&zt(()=>t[12].call(l)),S(p,"type","text"),S(p,"placeholder","상품 검색"),S(p,"class","input grow"),S(g,"class","btn primary-btn whitespace-nowrap min-w-24"),S(f,"class","flex space-x-4"),S(c,"class","mt-4 space-y-4"),S(C,"class","btn secondary-btn"),S(w,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(W,te){B(W,e,te),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u);for(let se=0;se<z.length;se+=1)z[se]&&z[se].m(l,null);wi(l,t[2],!0),k(f,d),k(f,p),Re(p,t[3]),k(f,m),k(f,g),k(c,v),G[_].m(c,null),k(n,y),k(n,w),k(w,C),O=!0,D||(I=[Q(h,"click",dn),Q(l,"change",t[12]),Q(l,"change",t[6]),Q(p,"input",t[13]),Q(g,"click",t[7]),Q(C,"click",dn),Q(e,"introstart",t[10]),Q(e,"outroend",t[11])],D=!0)},p(W,te){if(te&2){Y=Fe(W[1]);let E;for(E=0;E<Y.length;E+=1){const P=Q_(W,Y,E);z[E]?z[E].p(P,te):(z[E]=ty(P),z[E].c(),z[E].m(l,null))}for(;E<z.length;E+=1)z[E].d(1);z.length=Y.length}te&6&&wi(l,W[2]),te&8&&p.value!==W[3]&&Re(p,W[3]);let se=_;_=j(W),_===se?G[_].p(W,te):(Se(),U(G[se],1,1,()=>{G[se]=null}),Te(),b=G[_],b?b.p(W,te):(b=G[_]=q[_](W),b.c()),M(b,1),b.m(c,null))},i(W){O||(M(a.$$.fragment,W),M(b),W&&zt(()=>{O&&(T||(T=Vt(e,Ti,{y:50},!0)),T.run(1))}),O=!0)},o(W){U(a.$$.fragment,W),U(b),W&&(T||(T=Vt(e,Ti,{y:50},!1)),T.run(0)),O=!1},d(W){W&&N(e),fe(a),Pt(z,W),G[_].d(),W&&T&&T.end(),D=!1,Ue(I)}}}function ty(t){let e,n=t[18].category_name+"",i,r;return{c(){e=x("option"),i=be(n),e.__value=r=t[18].category_no,Re(e,e.__value)},m(o,h){B(o,e,h),k(e,i)},p(o,h){h&2&&n!==(n=o[18].category_name+"")&&He(i,n),h&2&&r!==(r=o[18].category_no)&&(e.__value=r,Re(e,e.__value))},d(o){o&&N(e)}}}function n5(t){let e,n,i=Fe(t[4]),r=[];for(let h=0;h<i.length;h+=1)r[h]=ny(Z_(t,i,h));const o=h=>U(r[h],1,1,()=>{r[h]=null});return{c(){e=x("div");for(let h=0;h<r.length;h+=1)r[h].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4")},m(h,a){B(h,e,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);n=!0},p(h,a){if(a&272){i=Fe(h[4]);let s;for(s=0;s<i.length;s+=1){const c=Z_(h,i,s);r[s]?(r[s].p(c,a),M(r[s],1)):(r[s]=ny(c),r[s].c(),M(r[s],1),r[s].m(e,null))}for(Se(),s=i.length;s<r.length;s+=1)o(s);Te()}},i(h){if(!n){for(let a=0;a<i.length;a+=1)M(r[a]);n=!0}},o(h){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)U(r[a]);n=!1},d(h){h&&N(e),Pt(r,h)}}}function i5(t){let e;return{c(){e=x("p"),e.textContent="로딩 중..."},m(n,i){B(n,e,i)},p:ge,i:ge,o:ge,d(n){n&&N(e)}}}function r5(t){let e,n;return e=new Ce({props:{icon:"carbon:no-image",class:"w-full max-h-32 mb-2"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p:ge,i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function s5(t){let e,n,i;return{c(){e=x("img"),Ye(e.src,n=t[15].list_image)||S(e,"src",n),S(e,"alt",i=t[15].product_name),S(e,"class","w-full max-h-32 object-contain mb-2")},m(r,o){B(r,e,o)},p(r,o){o&16&&!Ye(e.src,n=r[15].list_image)&&S(e,"src",n),o&16&&i!==(i=r[15].product_name)&&S(e,"alt",i)},i:ge,o:ge,d(r){r&&N(e)}}}function ny(t){let e,n,i,r,o,h=t[15].product_name+"",a,s,c,f=Xl(t[15].price)+"",l,u,d,p,m;const g=[s5,r5],v=[];function _(y,w){return y[15].list_image?0:1}n=_(t),i=v[n]=g[n](t);function b(){return t[14](t[15])}return{c(){e=x("button"),i.c(),r=V(),o=x("p"),a=be(h),s=V(),c=x("p"),l=be(f),u=V(),S(o,"class","font-semibold"),S(c,"class","text-base font-semibold text-gray-600"),S(e,"class","border p-2 rounded cursor-pointer hover:bg-gray-100")},m(y,w){B(y,e,w),v[n].m(e,null),k(e,r),k(e,o),k(o,a),k(e,s),k(e,c),k(c,l),k(e,u),d=!0,p||(m=Q(e,"click",b),p=!0)},p(y,w){t=y;let C=n;n=_(t),n===C?v[n].p(t,w):(Se(),U(v[C],1,1,()=>{v[C]=null}),Te(),i=v[n],i?i.p(t,w):(i=v[n]=g[n](t),i.c()),M(i,1),i.m(e,r)),(!d||w&16)&&h!==(h=t[15].product_name+"")&&He(a,h),(!d||w&16)&&f!==(f=Xl(t[15].price)+"")&&He(l,f)},i(y){d||(M(i),d=!0)},o(y){U(i),d=!1},d(y){y&&N(e),v[n].d(),p=!1,m()}}}function o5(t){let e,n,i=t[0]&&ey(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=ey(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function a5(t,e,n){let{isOpen:i}=e,{changeProduct:r}=e,o=[],h=null,a="",s=[],c=!1;xi(async()=>{try{n(1,o=await tx()),await l()}catch(_){console.error("Failed to load categories:",_)}});async function f(_){n(2,h=_.target.value?Number(_.target.value):null),await l()}async function l(){n(5,c=!0);try{n(4,s=await nx(h,a)),console.log({products:s})}catch(_){console.error("Failed to search products:",_)}finally{n(5,c=!1)}}async function u(_){n(5,c=!0);try{const{options:b}=await Df(_.product_no);console.log({options:b});const y=b.additional_options.some(w=>w.additional_option_name==="podiz");if(console.log("podiz 옵션 존재 여부:",y),y)r(_),dn();else{alert("선택하신 상품은 POD 상품이 아닙니다.");return}}catch(b){console.log(b)}finally{n(5,c=!1)}}function d(_){Si.call(this,t,_)}function p(_){Si.call(this,t,_)}function m(){h=Yo(this),n(2,h),n(1,o)}function g(){a=this.value,n(3,a)}const v=_=>u(_);return t.$$set=_=>{"isOpen"in _&&n(0,i=_.isOpen),"changeProduct"in _&&n(9,r=_.changeProduct)},[i,o,h,a,s,c,f,l,u,r,d,p,m,g,v]}class l5 extends qe{constructor(e){super(),Ge(this,e,a5,o5,Ve,{isOpen:0,changeProduct:9})}}function iy(t,e,n){const i=t.slice();return i[23]=e[n],i[25]=n,i}function ry(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}function c5(t){return{c:ge,m:ge,p:ge,i:ge,o:ge,d:ge}}function u5(t){let e,n,i,r,o,h,a,s,c,f,l;i=new Ce({props:{icon:"mdi:chevron-left",height:"24"}});let u=Fe(t[0]),d=[];for(let p=0;p<u.length;p+=1)d[p]=ay(iy(t,u,p));return s=new Ce({props:{icon:"mdi:chevron-right",height:"24"}}),{c(){e=x("div"),n=x("button"),he(i.$$.fragment),r=V(),o=x("div");for(let p=0;p<d.length;p+=1)d[p].c();h=V(),a=x("button"),he(s.$$.fragment),S(n,"class","nav-button prev svelte-10gxpzb"),n.disabled=t[5],S(o,"class","carousel-container svelte-10gxpzb"),S(a,"class","nav-button next svelte-10gxpzb"),a.disabled=t[6],S(e,"class","carousel svelte-10gxpzb")},m(p,m){B(p,e,m),k(e,n),ue(i,n,null),k(e,r),k(e,o);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(o,null);t[17](o),k(e,h),k(e,a),ue(s,a,null),c=!0,f||(l=[Q(n,"click",t[10]),Q(a,"click",t[9])],f=!0)},p(p,m){if((!c||m&32)&&(n.disabled=p[5]),m&403){u=Fe(p[0]);let g;for(g=0;g<u.length;g+=1){const v=iy(p,u,g);d[g]?d[g].p(v,m):(d[g]=ay(v),d[g].c(),d[g].m(o,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=u.length}(!c||m&64)&&(a.disabled=p[6])},i(p){c||(M(i.$$.fragment,p),M(s.$$.fragment,p),c=!0)},o(p){U(i.$$.fragment,p),U(s.$$.fragment,p),c=!1},d(p){p&&N(e),fe(i),Pt(d,p),t[17](null),fe(s),f=!1,Ue(l)}}}function f5(t){let e,n,i;return n=new Ce({props:{icon:"eos-icons:loading",height:"50"}}),{c(){e=x("div"),he(n.$$.fragment),S(e,"class","loading svelte-10gxpzb")},m(r,o){B(r,e,o),ue(n,e,null),i=!0},p:ge,i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){U(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function sy(t){let e,n=t[23].templateTitle+"",i;return{c(){e=x("h3"),i=be(n),S(e,"class","template-title svelte-10gxpzb")},m(r,o){B(r,e,o),k(e,i)},p(r,o){o&1&&n!==(n=r[23].templateTitle+"")&&He(i,n)},d(r){r&&N(e)}}}function oy(t){let e,n,i,r,o,h,a;function s(){return t[16](t[25],t[28])}return{c(){e=x("button"),n=x("img"),o=V(),Ye(n.src,i=t[26].url)||S(n,"src",i),S(n,"alt",r=`${t[23].name} thumbnail ${t[28]+1}`),S(n,"class","svelte-10gxpzb"),S(e,"type","button"),S(e,"class","svelte-10gxpzb")},m(c,f){B(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f&1&&!Ye(n.src,i=t[26].url)&&S(n,"src",i),f&1&&r!==(r=`${t[23].name} thumbnail ${t[28]+1}`)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function ay(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;function p(){return t[15](t[23])}let m=t[23].templateTitle&&sy(t),g=Fe(t[23].thumbnails),v=[];for(let _=0;_<g.length;_+=1)v[_]=oy(ry(t,g,_));return{c(){e=x("div"),n=x("div"),i=x("button"),r=x("img"),a=V(),s=x("div"),m&&m.c(),c=V(),f=x("div");for(let _=0;_<v.length;_+=1)v[_].c();l=V(),Ye(r.src,o=t[23].thumbnails[t[1][t[25]]].url)||S(r,"src",o),S(r,"alt",h=t[23].name),S(r,"class","svelte-10gxpzb"),S(i,"type","button"),S(i,"class","svelte-10gxpzb"),S(n,"class","main-image svelte-10gxpzb"),mt(n,"height",t[4]),S(f,"class","thumbnails svelte-10gxpzb"),S(s,"class","card-body svelte-10gxpzb"),S(e,"class","template-card svelte-10gxpzb")},m(_,b){B(_,e,b),k(e,n),k(n,i),k(i,r),k(e,a),k(e,s),m&&m.m(s,null),k(s,c),k(s,f);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(f,null);k(e,l),u||(d=Q(i,"click",p),u=!0)},p(_,b){if(t=_,b&3&&!Ye(r.src,o=t[23].thumbnails[t[1][t[25]]].url)&&S(r,"src",o),b&1&&h!==(h=t[23].name)&&S(r,"alt",h),b&16&&mt(n,"height",t[4]),t[23].templateTitle?m?m.p(t,b):(m=sy(t),m.c(),m.m(s,c)):m&&(m.d(1),m=null),b&129){g=Fe(t[23].thumbnails);let y;for(y=0;y<g.length;y+=1){const w=ry(t,g,y);v[y]?v[y].p(w,b):(v[y]=oy(w),v[y].c(),v[y].m(f,null))}for(;y<v.length;y+=1)v[y].d(1);v.length=g.length}},d(_){_&&N(e),m&&m.d(),Pt(v,_),u=!1,d()}}}function h5(t){let e,n,i,r;const o=[f5,u5,c5],h=[];function a(s,c){return s[2]?0:s[0].length?1:2}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=Je()},m(s,c){h[e].m(s,c),B(s,i,c),r=!0},p(s,[c]){let f=e;e=a(s),e===f?h[e].p(s,c):(Se(),U(h[f],1,1,()=>{h[f]=null}),Te(),n=h[e],n?n.p(s,c):(n=h[e]=o[e](s),n.c()),M(n,1),n.m(i.parentNode,i))},i(s){r||(M(n),r=!0)},o(s){U(n),r=!1},d(s){s&&N(i),h[e].d(s)}}}function d5(t,e,n){let i,r,{handleClick:o=()=>{}}=e,{editorProductLink:h=""}=e,a=[],s={},c=!0,f=0,l,u=1,d;async function p(I){n(2,c=!0);const{data:Y,error:z}=await fk(I);if(z){console.log({error:z}),n(2,c=!1);return}n(0,a=Y.templateDatas),n(1,s=a.reduce((q,G,j)=>(q[j]=0,q),{})),a!=null&&a.length&&n(0,a=a.sort((q,G)=>new Date(q.templateSort)-new Date(G.templateSort))),n(2,c=!1)}xi(async()=>{await p(h),g(),v(),window.addEventListener("resize",m)});function m(){g(),v()}function g(){if(l){const I=l.offsetWidth;n(14,u=Math.floor(I/320))}}function v(){const I=window.innerWidth;I<640?n(4,d="200px"):I<1024?n(4,d="250px"):n(4,d="300px")}function _(I,Y){n(1,s[I]=Y,s),n(1,s)}function b(I){o(I)}function y(){f<a.length-u&&(n(13,f++,f),C())}function w(){f>0&&(n(13,f--,f),C())}function C(){l&&n(3,l.style.transform=`translateX(-${f*320}px)`,l)}const T=I=>b(I.uuid),O=(I,Y)=>_(I,Y);function D(I){tt[I?"unshift":"push"](()=>{l=I,n(3,l)})}return t.$$set=I=>{"handleClick"in I&&n(11,o=I.handleClick),"editorProductLink"in I&&n(12,h=I.editorProductLink)},t.$$.update=()=>{t.$$.dirty&24577&&n(6,i=f>=a.length-u),t.$$.dirty&8192&&n(5,r=f===0)},[a,s,c,l,d,r,i,_,b,y,w,o,h,f,u,T,O,D]}class p5 extends qe{constructor(e){super(),Ge(this,e,d5,h5,Ve,{handleClick:11,editorProductLink:12})}}function ly(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w;return a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=x("div"),n=x("div"),i=x("h2"),r=x("span"),r.textContent="템플릿 정보 입력",o=V(),h=x("button"),he(a.$$.fragment),s=V(),c=x("div"),f=x("input"),l=V(),u=x("input"),d=V(),p=x("div"),m=x("button"),m.textContent="디자인 저장",g=V(),v=x("button"),v.textContent="취소",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"class","input w-full"),S(f,"type","text"),S(f,"placeholder","템플릿 이름을 입력해주세요."),S(u,"class","input w-full"),S(u,"type","text"),S(u,"placeholder","키워드/태그 ( 콤마, 또는 스페이스로 구분)"),S(c,"class","flex flex-col gap-3"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[400px] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(C,T){B(C,e,T),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),Re(f,t[1]),k(c,l),k(c,u),Re(u,t[2]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(w=[Q(h,"click",dn),Q(f,"input",t[8]),Q(f,"change",t[9]),Q(u,"input",t[10]),Q(u,"change",t[11]),Q(m,"click",t[12]),Q(v,"click",dn),Q(e,"introstart",t[6]),Q(e,"outroend",t[7])],y=!0)},p(C,T){T&2&&f.value!==C[1]&&Re(f,C[1]),T&4&&u.value!==C[2]&&Re(u,C[2])},i(C){b||(M(a.$$.fragment,C),C&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(C){U(a.$$.fragment,C),C&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(C){C&&N(e),fe(a),C&&_&&_.end(),y=!1,Ue(w)}}}function g5(t){let e,n,i=t[0]&&ly(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=ly(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function m5(t,e,n){let i;Me(t,Le,v=>n(13,i=v));let{isOpen:r}=e,{handleAddEditorData:o}=e,h="",a="";function s(){ye(Le,i.templateTitle=h,i),ye(Le,i.templateKeyword=a,i)}function c(){o(),dn()}function f(v){Si.call(this,t,v)}function l(v){Si.call(this,t,v)}function u(){h=this.value,n(1,h)}const d=()=>s();function p(){a=this.value,n(2,a)}const m=()=>s(),g=()=>c();return t.$$set=v=>{"isOpen"in v&&n(0,r=v.isOpen),"handleAddEditorData"in v&&n(5,o=v.handleAddEditorData)},[r,h,a,s,c,o,f,l,u,d,p,m,g]}class v5 extends qe{constructor(e){super(),Ge(this,e,m5,g5,Ve,{isOpen:0,handleAddEditorData:5})}}function cy(t,e,n){const i=t.slice();return i[70]=e[n],i}function uy(t){var Ld;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,w=t[10].length+"",C,T,O,D,I,Y,z,q,G,j,W,te,se,E,P,F=t[0],L,Z,R,A,X,J,ie,ne,$,le,me,ee,K,oe,re,H,ae,_e,Pe,ke,ce,xe,Ie,We,at,Ke,Rt,pt,ln=Fe(t[13]),Tt=[];for(let Ee=0;Ee<ln.length;Ee+=1)Tt[Ee]=fy(cy(t,ln,Ee));function gn(Ee,jt){var li,ls;return(ls=(li=Ee[11])==null?void 0:li.image)!=null&&ls.url?y5:_5}let Zi=gn(t),mn=Zi(t);p=new Ce({props:{icon:"icon-park-outline:preview-open",height:"18"}}),_=new Ce({props:{icon:"uil:cart",height:"18"}});function To(Ee,jt){return Ee[16]==="design"?w5:b5}let de=To(t)(t);q=new JF({}),W=new Ce({props:{icon:"gg:log-off",height:"20"}});let De=dy(t);function Xe(Ee){t[30](Ee)}let lt={};t[0]!==void 0&&(lt.printKey=t[0]),Z=new hF({props:lt}),tt.push(()=>At(Z,"printKey",Xe));const vn=[S5,C5],ct=[];function kt(Ee,jt){return Ee[5]?0:1}ne=kt(t),$=ct[ne]=vn[ne](t),ee=new eL({}),H=new Ce({props:{icon:"fa6-solid:plus"}});let An=t[16]!=="design"&&T5(t),Ot=((Ld=t[15])==null?void 0:Ld.length)&&py(t);Ie=new TN({});let Kt=t[12].options&&!t[9].currentOption&&my(t);return{c(){e=x("div");for(let Ee=0;Ee<Tt.length;Ee+=1)Tt[Ee].c();n=V(),i=x("div"),r=x("div"),o=x("div"),h=x("div"),mn.c(),a=V(),s=x("div"),c=V(),f=x("div"),l=x("button"),l.textContent="디자인저장",u=V(),d=x("button"),he(p.$$.fragment),m=be(`\r
                미리보기`),g=V(),v=x("button"),he(_.$$.fragment),b=V(),y=x("div"),C=be(w),T=V(),O=x("span"),de.c(),D=V(),I=x("div"),Y=x("div"),z=x("div"),he(q.$$.fragment),G=V(),j=x("button"),he(W.$$.fragment),te=V(),se=x("span"),se.textContent="나가기",E=V(),P=x("div"),De.c(),L=V(),he(Z.$$.fragment),A=V(),X=x("div"),J=x("div"),ie=x("button"),$.c(),le=V(),me=x("div"),he(ee.$$.fragment),K=V(),oe=x("div"),re=x("button"),he(H.$$.fragment),ae=be(`\r
                      옵션/디자인 변경`),_e=V(),An&&An.c(),Pe=V(),ke=x("div"),Ot&&Ot.c(),ce=V(),xe=x("div"),he(Ie.$$.fragment),at=V(),Kt&&Kt.c(),mt(e,"font-size","0.1px"),mt(e,"height","0px"),mt(e,"color","#FFFFFF "),mt(e,"overflow","hidden"),S(s,"class","md:hidden"),S(l,"type","button"),S(l,"class","btn btn-sm md:btn-md primary-btn"),S(d,"type","button"),S(d,"class","btn btn-sm md:btn-md white-btn"),S(y,"class","rounded-full border bg-white px-1 absolute left-8"),S(O,"class","ml-3"),S(v,"type","button"),S(v,"class","btn btn-sm secondary-btn relative gap-0"),S(f,"class","flex items-center gap-3"),S(h,"class","flex justify-between items-center p-4 bg-white h-16 border-b border-b-gray-300"),S(z,"class","flex flex-col"),S(se,"class","whitespace-nowrap text-2xs hidden md:block"),S(j,"type","button"),S(j,"class","flex bg-white flex-col items-center border-t py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(Y,"class","w-[50px] md:w-[80px] flex flex-col px-1 z-40 h-full justify-between"),S(P,"class","flex-1 bg-gray-200 flex items-center justify-center h-full w-full rounded border relative"),S(ie,"type","button"),S(ie,"class","border border-r-0 bg-white py-5 px-1 rounded-lg rounded-r-none"),S(J,"class","absolute -left-[22px] py-3 top-1/2 transform -translate-y-50 md:hidden"),S(re,"type","button"),S(re,"class","btn primary-btn w-full"),S(oe,"class","mt-3"),S(xe,"class","mt-3"),S(ke,"class","grow overflow-y-auto"),S(X,"class",We="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(t[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-40 svelte-ezfnmf"),S(I,"class","flex-1 flex mt-2 relative"),S(o,"class","flex-1 flex flex-col"),S(r,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(i,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[1000] left-0 top-0")},m(Ee,jt){B(Ee,e,jt);for(let li=0;li<Tt.length;li+=1)Tt[li]&&Tt[li].m(e,null);B(Ee,n,jt),B(Ee,i,jt),k(i,r),k(r,o),k(o,h),mn.m(h,null),k(h,a),k(h,s),k(h,c),k(h,f),k(f,l),k(f,u),k(f,d),ue(p,d,null),k(d,m),k(f,g),k(f,v),ue(_,v,null),k(v,b),k(v,y),k(y,C),k(v,T),k(v,O),de.m(O,null),k(o,D),k(o,I),k(I,Y),k(Y,z),ue(q,z,null),k(Y,G),k(Y,j),ue(W,j,null),k(j,te),k(j,se),k(I,E),k(I,P),De.m(P,null),k(P,L),ue(Z,P,null),k(I,A),k(I,X),k(X,J),k(J,ie),ct[ne].m(ie,null),k(X,le),k(X,me),ue(ee,me,null),k(X,K),k(X,oe),k(oe,re),ue(H,re,null),k(re,ae),k(oe,_e),An&&An.m(oe,null),k(X,Pe),k(X,ke),Ot&&Ot.m(ke,null),k(ke,ce),k(ke,xe),ue(Ie,xe,null),k(r,at),Kt&&Kt.m(r,null),Ke=!0,Rt||(pt=[Q(l,"click",t[26]),Q(d,"click",t[27]),Q(v,"click",t[28]),Q(j,"click",t[29]),Q(ie,"click",t[31]),Q(re,"click",t[32])],Rt=!0)},p(Ee,jt){var Nd;if(jt[0]&8192){ln=Fe(Ee[13]);let jn;for(jn=0;jn<ln.length;jn+=1){const jd=cy(Ee,ln,jn);Tt[jn]?Tt[jn].p(jd,jt):(Tt[jn]=fy(jd),Tt[jn].c(),Tt[jn].m(e,null))}for(;jn<Tt.length;jn+=1)Tt[jn].d(1);Tt.length=ln.length}Zi===(Zi=gn(Ee))&&mn?mn.p(Ee,jt):(mn.d(1),mn=Zi(Ee),mn&&(mn.c(),mn.m(h,a))),(!Ke||jt[0]&1024)&&w!==(w=Ee[10].length+"")&&He(C,w),jt[0]&1&&Ve(F,F=Ee[0])?(Se(),U(De,1,1,ge),Te(),De=dy(Ee),De.c(),M(De,1),De.m(P,L)):De.p(Ee,jt);const li={};!R&&jt[0]&1&&(R=!0,li.printKey=Ee[0],Ht(()=>R=!1)),Z.$set(li);let ls=ne;ne=kt(Ee),ne!==ls&&(Se(),U(ct[ls],1,1,()=>{ct[ls]=null}),Te(),$=ct[ne],$||($=ct[ne]=vn[ne](Ee),$.c()),M($,1),$.m(ie,null)),Ee[16]!=="design"&&An.p(Ee,jt),(Nd=Ee[15])!=null&&Nd.length?Ot?(Ot.p(Ee,jt),jt[0]&32768&&M(Ot,1)):(Ot=py(Ee),Ot.c(),M(Ot,1),Ot.m(ke,ce)):Ot&&(Se(),U(Ot,1,1,()=>{Ot=null}),Te()),(!Ke||jt[0]&32&&We!==(We="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(Ee[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-40 svelte-ezfnmf"))&&S(X,"class",We),Ee[12].options&&!Ee[9].currentOption?Kt?(Kt.p(Ee,jt),jt[0]&4608&&M(Kt,1)):(Kt=my(Ee),Kt.c(),M(Kt,1),Kt.m(r,null)):Kt&&(Se(),U(Kt,1,1,()=>{Kt=null}),Te())},i(Ee){Ke||(M(p.$$.fragment,Ee),M(_.$$.fragment,Ee),M(q.$$.fragment,Ee),M(W.$$.fragment,Ee),M(De),M(Z.$$.fragment,Ee),M($),M(ee.$$.fragment,Ee),M(H.$$.fragment,Ee),M(An),M(Ot),M(Ie.$$.fragment,Ee),M(Kt),Ke=!0)},o(Ee){U(p.$$.fragment,Ee),U(_.$$.fragment,Ee),U(q.$$.fragment,Ee),U(W.$$.fragment,Ee),U(De),U(Z.$$.fragment,Ee),U($),U(ee.$$.fragment,Ee),U(H.$$.fragment,Ee),U(An),U(Ot),U(Ie.$$.fragment,Ee),U(Kt),Ke=!1},d(Ee){Ee&&(N(e),N(n),N(i)),Pt(Tt,Ee),mn.d(),fe(p),fe(_),de.d(),fe(q),fe(W),De.d(Ee),fe(Z),ct[ne].d(),fe(ee),fe(H),An&&An.d(),Ot&&Ot.d(),fe(Ie),Kt&&Kt.d(),Rt=!1,Ue(pt)}}}function fy(t){let e,n,i;return{c(){e=x("div"),n=be("podiz"),S(e,"style",i=`font-family:${t[70].fontFamily}`)},m(r,o){B(r,e,o),k(e,n)},p(r,o){o[0]&8192&&i!==(i=`font-family:${r[70].fontFamily}`)&&S(e,"style",i)},d(r){r&&N(e)}}}function _5(t){let e;return{c(){e=x("div"),e.textContent="[LOGO]",S(e,"class","hidden md:block")},m(n,i){B(n,e,i)},p:ge,d(n){n&&N(e)}}}function y5(t){let e,n,i,r;return{c(){e=x("div"),n=x("img"),Ye(n.src,i=t[11].image.url)||S(n,"src",i),S(n,"alt",r=t[11].shopName),S(n,"class","max-h-12 object-contain"),S(e,"class","hidden md:block")},m(o,h){B(o,e,h),k(e,n)},p(o,h){h[0]&2048&&!Ye(n.src,i=o[11].image.url)&&S(n,"src",i),h[0]&2048&&r!==(r=o[11].shopName)&&S(n,"alt",r)},d(o){o&&N(e)}}}function b5(t){let e;return{c(){e=be("주문하기")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function w5(t){let e;return{c(){e=be("디자인 등록")},m(n,i){B(n,e,i)},d(n){n&&N(e)}}}function hy(t){let e,n;return e=new cF({}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function dy(t){let e,n,i=t[9].prints[t[14]]&&hy();return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,o){r[9].prints[r[14]]?i?o[0]&16896&&M(i,1):(i=hy(),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function C5(t){let e,n;return e=new Ce({props:{icon:"mingcute:right-fill"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function S5(t){let e,n;return e=new Ce({props:{icon:"mingcute:left-fill"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function T5(t){let e,n,i,r,o,h;return n=new Ce({props:{icon:"fa-solid:exchange-alt"}}),{c(){e=x("button"),he(n.$$.fragment),i=be(`\r
                      상품변경`),S(e,"type","button"),S(e,"class","btn dark-btn w-full mt-2")},m(a,s){B(a,e,s),ue(n,e,null),k(e,i),r=!0,o||(h=Q(e,"click",t[33]),o=!0)},p:ge,i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){U(n.$$.fragment,a),r=!1},d(a){a&&N(e),fe(n),o=!1,h()}}}function py(t){let e,n,i=t[15][0].objType==="upload"&&gy(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),B(r,e,o),n=!0},p(r,o){r[15][0].objType==="upload"?i?(i.p(r,o),o[0]&32768&&M(i,1)):(i=gy(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Se(),U(i,1,1,()=>{i=null}),Te())},i(r){n||(M(i),n=!0)},o(r){U(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function gy(t){let e,n,i,r,o,h,a,s,c,f;return h=new Ce({props:{icon:"ion:image-outline",height:"23"}}),{c(){e=x("div"),n=x("img"),r=V(),o=x("button"),he(h.$$.fragment),a=be(`\r
                            이미지 교체`),Ye(n.src,i=t[15][0].thumbnail.url)||S(n,"src",i),S(n,"alt",""),S(n,"class","w-full h-full max-h-[300px] object-contain"),S(o,"type","button"),S(o,"class","btn white-btn w-full mt-2"),S(e,"class","w-full flex flex-col gap-3 p-2")},m(l,u){B(l,e,u),k(e,n),k(e,r),k(e,o),ue(h,o,null),k(o,a),s=!0,c||(f=Q(o,"click",t[34]),c=!0)},p(l,u){(!s||u[0]&32768&&!Ye(n.src,i=l[15][0].thumbnail.url))&&S(n,"src",i)},i(l){s||(M(h.$$.fragment,l),s=!0)},o(l){U(h.$$.fragment,l),s=!1},d(l){l&&N(e),fe(h),c=!1,f()}}}function my(t){let e,n,i,r;function o(s){t[35](s)}function h(s){t[36](s)}let a={loadPublish:t[18]};return t[6]!==void 0&&(a.publishId=t[6]),t[3]!==void 0&&(a.runEditor=t[3]),e=new GF({props:a}),tt.push(()=>At(e,"publishId",o)),tt.push(()=>At(e,"runEditor",h)),{c(){he(e.$$.fragment)},m(s,c){ue(e,s,c),r=!0},p(s,c){const f={};!n&&c[0]&64&&(n=!0,f.publishId=s[6],Ht(()=>n=!1)),!i&&c[0]&8&&(i=!0,f.runEditor=s[3],Ht(()=>i=!1)),e.$set(f)},i(s){r||(M(e.$$.fragment,s),r=!0)},o(s){U(e.$$.fragment,s),r=!1},d(s){fe(e,s)}}}function vy(t){let e,n;return e=new YN({props:{previews:t[7],mode:t[16]}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.previews=i[7]),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function _y(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return s=new Ce({props:{icon:"lets-icons:close-round",height:"30"}}),f=new Z4({props:{user:t[8],handleClick:t[17]}}),{c(){e=x("div"),n=x("div"),i=x("div"),r=x("h1"),o=x("span"),o.textContent="디자인보관함",h=V(),a=x("button"),he(s.$$.fragment),c=V(),he(f.$$.fragment),S(a,"type","button"),S(a,"class","btn white-btn"),S(r,"class","font-semibold text-lg border-b py-3 flex justify-between"),S(i,"class","flex-1 flex flex-col p-5"),S(n,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-y-auto"),S(e,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(p,m){B(p,e,m),k(e,n),k(n,i),k(i,r),k(r,o),k(r,h),k(r,a),ue(s,a,null),k(i,c),ue(f,i,null),l=!0,u||(d=Q(a,"click",t[37]),u=!0)},p(p,m){const g={};m[0]&256&&(g.user=p[8]),f.$set(g)},i(p){l||(M(s.$$.fragment,p),M(f.$$.fragment,p),l=!0)},o(p){U(s.$$.fragment,p),U(f.$$.fragment,p),l=!1},d(p){p&&N(e),fe(s),fe(f),u=!1,d()}}}function k5(t){let e,n,i,r,o;return{c(){e=x("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-ezfnmf")},m(h,a){B(h,e,a),i=!0,r||(o=Q(e,"click",dn),r=!0)},p:ge,i(h){i||(h&&zt(()=>{i&&(n||(n=Vt(e,$d,{},!0)),n.run(1))}),i=!0)},o(h){h&&(n||(n=Vt(e,$d,{},!1)),n.run(0)),i=!1},d(h){h&&N(e),h&&n&&n.end(),r=!1,o()}}}function yy(t){let e,n,i;function r(h){t[38](h)}let o={isProgress:!0};return t[2]!==void 0&&(o.progress=t[2]),e=new Gb({props:o}),tt.push(()=>At(e,"progress",r)),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};!n&&a[0]&4&&(n=!0,s.progress=h[2],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){U(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function O5(t){let e,n,i,r,o,h,a,s=t[3]&&uy(t),c=t[7]&&vy(t),f=t[4]&&_y(t);r=new BC({props:{$$slots:{backdrop:[k5]},$$scope:{ctx:t}}});let l=t[1]&&yy(t);return{c(){s&&s.c(),e=V(),c&&c.c(),n=V(),f&&f.c(),i=V(),he(r.$$.fragment),o=V(),l&&l.c(),h=Je()},m(u,d){s&&s.m(u,d),B(u,e,d),c&&c.m(u,d),B(u,n,d),f&&f.m(u,d),B(u,i,d),ue(r,u,d),B(u,o,d),l&&l.m(u,d),B(u,h,d),a=!0},p(u,d){u[3]?s?(s.p(u,d),d[0]&8&&M(s,1)):(s=uy(u),s.c(),M(s,1),s.m(e.parentNode,e)):s&&(Se(),U(s,1,1,()=>{s=null}),Te()),u[7]?c?(c.p(u,d),d[0]&128&&M(c,1)):(c=vy(u),c.c(),M(c,1),c.m(n.parentNode,n)):c&&(Se(),U(c,1,1,()=>{c=null}),Te()),u[4]?f?(f.p(u,d),d[0]&16&&M(f,1)):(f=_y(u),f.c(),M(f,1),f.m(i.parentNode,i)):f&&(Se(),U(f,1,1,()=>{f=null}),Te());const p={};d[2]&2048&&(p.$$scope={dirty:d,ctx:u}),r.$set(p),u[1]?l?(l.p(u,d),d[0]&2&&M(l,1)):(l=yy(u),l.c(),M(l,1),l.m(h.parentNode,h)):l&&(Se(),U(l,1,1,()=>{l=null}),Te())},i(u){a||(M(s),M(c),M(f),M(r.$$.fragment,u),M(l),a=!0)},o(u){U(s),U(c),U(f),U(r.$$.fragment,u),U(l),a=!1},d(u){u&&(N(e),N(n),N(i),N(o),N(h)),s&&s.d(u),c&&c.d(u),f&&f.d(u),fe(r,u),l&&l.d(u)}}}function by(t,e){for(const[n,i]of t.entries())for(const[r,o]of e[n].canvasJSON.objects.entries())(o.objType==="clipart"||o.objType==="text"||o.objType==="shape"||o.objType==="draw"||o.objType==="upload")&&t[n].canvasJSON.objects.push(o);return t}function wy(t){console.log({e:t})}function E5(t,e,n){let i,r,o,h,a,s,c,f,l,u,d,p,m;Me(t,js,de=>n(46,i=de)),Me(t,Yt,de=>n(25,r=de)),Me(t,Le,de=>n(9,o=de)),Me(t,di,de=>n(10,h=de)),Me(t,po,de=>n(11,a=de)),Me(t,jo,de=>n(47,s=de)),Me(t,Ii,de=>n(12,c=de)),Me(t,Sp,de=>n(48,f=de)),Me(t,$o,de=>n(13,l=de)),Me(t,Wl,de=>n(49,u=de)),Me(t,Go,de=>n(50,d=de)),Me(t,ra,de=>n(14,p=de)),Me(t,Ui,de=>n(15,m=de)),ye(Le,o.prints=[],o);let g=1,v=!1,_=0,b=!1,y=!1,w=!1,C=null,T=null,O=null,D=null,I=null,Y=null,z="",{uuid:q,shopid:G,provider:j,productno:W,previewclass:te,previewitem:se,mode:E}=$2();j&&L1("provider",j),xi(async()=>{if(E==="design"){const Xe=document.getElementById("podiz-button");if(Xe){const lt=document.createElement("button");lt.textContent="상품만들기",lt.addEventListener("click",()=>P()),lt.classList.add("podiz-run-btn"),Xe.appendChild(lt)}else window.runPodizEditor=function(lt=null){P(lt)};return}n(8,D=await Q2());const de=document.getElementById("podiz-member-design");if(de&&de.addEventListener("click",ce),te){n(7,O=Z2(te,se));return}if(E==="product"){G2(),await L();const Xe=document.createElement("button");Xe.textContent="상품만들기",Xe.addEventListener("click",()=>P());const lt=document.getElementById("podiz-button");lt&&(Xe.classList.add("podiz-run-btn"),lt.appendChild(Xe)),document.getElementById("podiz-template")&&new p5({target:document.getElementById("podiz-template"),props:{editorProductLink:T.editorProductLink,handleClick:P}})}const De=document.getElementById("podiz-data-uuid");return De&&(I=De.value),()=>{de&&de.removeEventListener("click",ce)}});async function P(de=null){if(n(1,v=!0),n(4,y=!1),de?I=de:(I=null,Y=null),I){const{data:De,error:Xe}=await cb(I);if(Xe){console.log(Xe);return}De&&(W=De.cafe24Product.productno,j=De.cafe24Product?"cafe24":null,G=De.publish.shop,Y=De)}if(C||await L(),await F(),G&&await hk(G),j==="cafe24"&&(ye(Ii,c.options={},c),ye(Ii,c.productno=W,c),E==="product")){const De=await Df(W),Xe=await Tg(W);ye(Ii,c.options=De.options,c),ye(Ii,c.product=Xe.product,c)}n(1,v=!1),n(3,b=!0)}async function F(){var Xe;n(1,v=!0);const{data:de,error:De}=await tk(C);if(De){console.error(De);return}ye(Le,o.id=null,o),ye(Le,o.scenes=de.editor.scenes,o),ye(Le,o.product=de.editor.product,o),ye(Le,o.currentOption=Y?Y.currentOption:null,o),ye(Le,o.count=o.product.minCnt?o.product.minCnt:1,o),ye(Le,o.uuid=Pr(),o),ye(Le,o.uploads=de.uploads?de.uploads:[],o),ye(Le,o.publish=de.id,o),ye(Le,o.cafe24MallId=D?D.cafe24MallId:null,o),ye(Le,o.cafe24MemberId=D?D.cafe24MemberId:null,o),ye(Le,o.cafe24ShopNo=D?D.cafe24ShopNo:null,o),ye(Le,o.cafe24UserType=D?D.cafe24UserType:null,o),ye(Le,o.templateTitle=Y?Y.templateTitle:"",o),ye(Le,o.templateKeyword=Y?Y.templateKeyword:"",o),ye(Le,o.cafe24Product=c,o),await R(o.product.shop),await N1(),ye(Le,o.prints=de.editor.prints,o),Y&&(Y.uploads&&(ye(Le,o.uploads=Y.uploads,o),ye(Go,d=Y.uploads,d)),ye(Le,o.prints=by(o.prints,Y.prints),o)),f&&ye(Le,o.prints=by(o.prints,f),o),(Xe=o.scenes)!=null&&Xe.length&&Z(),n(0,g++,g),n(1,v=!1)}async function L(){const{data:de,error:De}=await ck({provider:j,productno:W,shopid:G});if(!de.length||De){alert("잘못된 연결이거나 연결에 오류가있습니다."),n(3,b=!1);return}ye(Wl,u=de[0],u);const Xe=u.linkOptions;Xe.length&&(o!=null&&o.currentOption||(n(6,C=Xe[0].publish),T=Xe[0]))}async function Z(){ye(Le,o.composites=[],o);for(const de of o.prints)if(de.id){const De=await lk(de.id);De.data&&ye(Le,o.composites=[...o.composites,De.data],o)}}async function R(de){try{const De=await sk(de);De.data&&ye($o,l=De.data.defaultFonts,l);const Xe=await rk(de);Xe.data&&ye($o,l=[...l,...Xe.data],l);const lt=l.map(kt=>kt.css).join(`
`),vn=document.createElement("style");vn.textContent=lt,document.head.appendChild(vn),await document.fonts.ready;const ct=l.map(kt=>kt.fontFamily&&kt.url?new FontFace(kt.fontFamily,`url(${kt.url})`).load().catch(An=>(console.warn(`Failed to load font: ${kt.fontFamily}`,An),null)):Promise.resolve());await Promise.all(ct),document.dispatchEvent(new Event("fontsLoaded"))}catch(De){console.error("Error loading fonts:",De)}}async function A(){var de;try{n(1,v=!0),n(2,_=1);const De=o.prints;for(const[Xe,lt]of De.entries())if(n(2,_=100/De.length*(Xe+1)),lt.id&&lt.imageDataURL&&lt.isChange){const vn=await R2(o,Xe,o.currentOption.colorCode);ne(vn.scenes),(de=vn.scenes)!=null&&de.length&&ye(Le,o.thumbnails=vn.scenes.map(ct=>ct.compositeThumbnail).filter(ct=>ct),o),lt.isChange=!1}}catch(De){console.log({error:De})}finally{n(1,v=!1)}}async function X(){await A(),Oo(VF,{isOpen:!0,message:"미리보기"})}function J(){Oo(IN,{isOpen:!0,message:"주문하기",changeEditorDataIndex:H,sendOrder:_e,mode:E})}async function ie(){await oe(),J()}function ne(de){console.log({compositeScenes:de});for(const[De,Xe]of de.entries())ye(Le,o.scenes[De].composites=Xe.composites,o),Xe.compositeThumbnail&&ye(Le,o.scenes[De].compositeThumbnail=Xe.compositeThumbnail,o)}async function $(de=!0){if(Yy(),console.log({$editorData:o}),console.log({mode:E}),E==="design"&&!o.templateTitle){Oo(v5,{isOpen:!0,handleAddEditorData:$});return}await A(),await ke();const De=JSON.stringify(o);s!=null&&s>=0&&s<h.length?ye(di,h[s]=JSON.parse(De),h):ye(di,h=[...h,JSON.parse(De)],h),de&&J()}async function le(){for(const de of h){const{id:De}=await me(de);de.id=De}}async function me(de){const De={id:de.id?de.id:null,uuid:de.uuid,prints:de.prints,uploads:de.uploads,scenes:de.scenes.map(vn=>{const{composites:ct,...kt}=vn;return kt}),thumbnails:de.thumbnails,printImages:de.printImages,currentOption:de.currentOption,provider:j,count:de.count,publish:de.publish,cafe24MallId:de.cafe24MallId,cafe24ShopNo:de.cafe24ShopNo,cafe24UserType:de.cafe24UserType,cafe24MemberId:de.cafe24MemberId,cafe24Product:de.cafe24Product,printMemo:z,templateTitle:de.templateTitle,templateKeyword:de.templateKeyword};E==="design"&&(De.currentOption=null);const{data:Xe,error:lt}=await ok(De);if(lt){console.log(lt);return}return console.log("save data",Xe),Xe}async function ee(){await oe(),ye(jo,s++,s),ye(Le,o.currentOption=null,o),o.prints.forEach(de=>{de.isChange!==void 0&&de.isChange===!1&&(de.isChange=!0)})}async function K(){await oe(),ye(jo,s++,s),Oo(l5,{isOpen:!0,changeProduct:re})}async function oe(){o.prints.filter(De=>De.isChange).length>=1&&(confirm("변경사항이 있습니다. 디자인 저장을 하지않으면 해당 옵션의 편집내용은 저장되지 않습니다. 저장하시겠습니까?")?await $(!1):console.log("사용자가 변경을 취소했습니다."))}async function re({product_no:de}){Y=null,W=de,ye(Sp,f=[...o.prints],f),ye(Ii,c.options={},c),ye(Ii,c.productno=W,c),await L(),await F();const De=await Df(W),Xe=await Tg(W);ye(Ii,c.options=De.options,c),ye(Ii,c.product=Xe.product,c)}function H(de){ye(jo,s=de,s);const De=JSON.stringify(h[de]);ye(Le,o=JSON.parse(De),o),n(0,g++,g)}function ae(de){z=de,console.log({printMemo:z})}async function _e(){if(a.usePrintMemo&&E!=="design"){dn(),Oo(t5,{isOpen:!0,orderAction:Pe,setPrintMemo:ae});return}Pe()}async function Pe(){n(1,v=!0);try{if(await le(),E==="design"){typeof podizCallBack=="function"&&podizCallBack(JSON.parse(JSON.stringify(h))),dn(),n(3,b=!1);return}await J2(),n(3,b=!1)}catch(de){alert(de)}finally{n(1,v=!1)}}async function ke(){var vn;n(1,v=!0);const de=o.prints.length+o.scenes.length;let De=0;n(2,_=0);const Xe=`editorData/${o.uuid}`,lt=o;ye(Le,o.printImages=[],o);for(let ct=0;ct<lt.prints.length;ct++){const kt=lt.prints[ct];if(kt.imageDataURL?kt.imageDataURL.startsWith("data:image"):null){const Ot=await jr(kt.imageDataURL,`${Xe}/print_${ct}.png`,wy,{extension:"png"});kt.imageDataURL=Ot.url,o.printImages.push(Ot)}else o.printImages.push({url:kt.imageDataURL});De++,n(2,_=De/de*100)}for(let ct=0;ct<lt.scenes.length;ct++){const kt=lt.scenes[ct];if((vn=kt.compositeThumbnail)!=null&&vn.url?kt.compositeThumbnail.url.startsWith("data:image"):null){const Ot=await jr(kt.compositeThumbnail.url,`${Xe}/scene_${ct}.jpg`,wy,{extension:"jpg"});kt.compositeThumbnail.url=Ot.url}De++,n(2,_=De/de*100)}return ye(Le,o.thumbnails=lt.scenes.map(ct=>ct.compositeThumbnail).filter(ct=>ct),o),n(1,v=!1),o}function ce(){console.log("handleOpenMemberDesign"),n(4,y=!0)}function xe(de){ye(js,i=de,i),ye(Yt,r="upload",r),n(5,w=!0)}Di(()=>{delete window.runPodizEditor});const Ie=()=>$(),We=()=>X(),at=()=>ie(),Ke=()=>n(3,b=!1);function Rt(de){g=de,n(0,g)}const pt=()=>n(5,w=!w),ln=()=>ee(),Tt=()=>K(),gn=()=>xe(m[0]);function Zi(de){C=de,n(6,C)}function mn(de){b=de,n(3,b)}const To=()=>n(4,y=!1);function Ya(de){_=de,n(2,_)}return t.$$.update=()=>{t.$$.dirty[0]&33554432&&r!=="upload"&&ye(js,i=null,i)},[g,v,_,b,y,w,C,O,D,o,h,a,c,l,p,m,E,P,F,X,ie,$,ee,K,xe,r,Ie,We,at,Ke,Rt,pt,ln,Tt,gn,Zi,mn,To,Ya]}class x5 extends qe{constructor(e){super(),Ge(this,e,E5,O5,Ve,{},null,[-1,-1,-1])}}let D5=document.getElementById("podiz-app");new x5({target:D5})});export default A5();
