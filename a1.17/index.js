var p1=Object.defineProperty;var g1=(t,e,n)=>e in t?p1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m1=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Kc=(t,e,n)=>(g1(t,typeof e!="symbol"?e+"":e,n),n);var EU=m1((AU,Pl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ge(){}const ah=t=>t;function bi(t,e){for(const n in e)t[n]=e[n];return t}function v1(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function yy(t){return t()}function Nd(){return Object.create(null)}function Ue(t){t.forEach(yy)}function Hn(t){return typeof t=="function"}function Ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ya;function Ye(t,e){return t===e?!0:(Ya||(Ya=document.createElement("a")),Ya.href=e,t===Ya.href)}function _1(t){return Object.keys(t).length===0}function lh(t,...e){if(t==null){for(const i of e)i(void 0);return ge}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mi(t){let e;return lh(t,n=>e=n)(),e}function Me(t,e,n){t.$$.on_destroy.push(lh(e,n))}function ba(t,e,n,i){if(t){const r=by(t,e,n,i);return t[0](r)}}function by(t,e,n,i){return t[1]&&i?bi(n.ctx.slice(),t[1](i(e))):n.ctx}function wa(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],h=Math.max(e.dirty.length,r.length);for(let a=0;a<h;a+=1)o[a]=e.dirty[a]|r[a];return o}return e.dirty|r}return e.dirty}function Ca(t,e,n,i,r,o){if(r){const h=by(e,n,i,o);t.p(h,r)}}function Sa(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function jd(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function _e(t,e,n){return t.set(n),e}function wy(t){return t&&Hn(t.destroy)?t.destroy:ge}function Bd(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Cy=typeof window<"u";let Sy=Cy?()=>window.performance.now():()=>Date.now(),ch=Cy?t=>requestAnimationFrame(t):ge;const Is=new Set;function Ty(t){Is.forEach(e=>{e.c(t)||(Is.delete(e),e.f())}),Is.size!==0&&ch(Ty)}function ky(t){let e;return Is.size===0&&ch(Ty),{promise:new Promise(n=>{Is.add(e={c:t,f:n})}),abort(){Is.delete(e)}}}function k(t,e){t.appendChild(e)}function Oy(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y1(t){const e=E("style");return e.textContent="/* empty */",b1(Oy(t),e),e.sheet}function b1(t,e){return k(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Pt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function w1(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function we(t){return document.createTextNode(t)}function V(){return we(" ")}function Je(){return we("")}function Z(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ni(t){return function(e){return e.preventDefault(),t.call(this,e)}}function C1(t){return function(e){e.target===this&&t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const S1=["width","height"];function Ml(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&S1.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function Ud(t,e){for(const n in e)S(t,n,e[n])}function Ey(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xy(t){return t===""?null:+t}function T1(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.data!==e&&(t.data=e)}function Re(t,e){t.value=e??""}function mt(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function wi(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yo(t){const e=t.querySelector(":checked");return e&&e.__value}let Wa;function k1(){if(Wa===void 0){Wa=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Wa=!0}}return Wa}function O1(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=E("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=k1();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Z(window,"message",h=>{h.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=Z(i.contentWindow,"resize",e),e()}),k(t,i),()=>{(r||o&&i.contentWindow)&&o(),j(i)}}function Ci(t,e,n){t.classList.toggle(e,!!n)}function Dy(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function hn(t,e){return new t(e)}const Il=new Map;let Rl=0;function E1(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function x1(t,e){const n={stylesheet:y1(e),rules:{}};return Il.set(t,n),n}function Ju(t,e,n,i,r,o,h,a=0){const s=16.666/i;let u=`{
`;for(let g=0;g<=1;g+=s){const v=e+(n-e)*o(g);u+=g*100+`%{${h(v,1-v)}}
`}const f=u+`100% {${h(n,1-n)}}
}`,l=`__svelte_${E1(f)}_${a}`,c=Oy(t),{stylesheet:d,rules:p}=Il.get(c)||x1(c,t);p[l]||(p[l]=!0,d.insertRule(`@keyframes ${l} ${f}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${l} ${i}ms linear ${r}ms 1 both`,Rl+=1,l}function Ay(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Rl-=r,Rl||D1())}function D1(){ch(()=>{Rl||(Il.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),Il.clear())})}function A1(t,e,n,i){if(!e)return ge;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return ge;const{delay:o=0,duration:h=300,easing:a=ah,start:s=Sy()+o,end:u=s+h,tick:f=ge,css:l}=n(t,{from:e,to:r},i);let c=!0,d=!1,p;function m(){l&&(p=Ju(t,0,1,h,o,a,l)),o||(d=!0)}function g(){l&&Ay(t,p),c=!1}return ky(v=>{if(!d&&v>=s&&(d=!0),d&&v>=u&&(f(1,0),g()),!c)return!1;if(d){const _=v-s,b=0+1*a(_/h);f(b,1-b)}return!0}),m(),f(0,1),g}function P1(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,M1(t,r)}}function M1(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r=i.transform==="none"?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let na;function ji(t){na=t}function Ta(){if(!na)throw new Error("Function called outside component initialization");return na}function xi(t){Ta().$$.on_mount.push(t)}function Di(t){Ta().$$.on_destroy.push(t)}function Xt(){const t=Ta();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Dy(e,n,{cancelable:i});return r.slice().forEach(h=>{h.call(t,o)}),!o.defaultPrevented}return!0}}function I1(t,e){return Ta().$$.context.set(t,e),e}function Si(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const _s=[],tt=[];let Rs=[];const Zu=[],Py=Promise.resolve();let Qu=!1;function My(){Qu||(Qu=!0,Py.then(uh))}function R1(){return My(),Py}function zt(t){Rs.push(t)}function Ht(t){Zu.push(t)}const Jc=new Set;let os=0;function uh(){if(os!==0)return;const t=na;do{try{for(;os<_s.length;){const e=_s[os];os++,ji(e),F1(e.$$)}}catch(e){throw _s.length=0,os=0,e}for(ji(null),_s.length=0,os=0;tt.length;)tt.pop()();for(let e=0;e<Rs.length;e+=1){const n=Rs[e];Jc.has(n)||(Jc.add(n),n())}Rs.length=0}while(_s.length);for(;Zu.length;)Zu.pop()();Qu=!1,Jc.clear(),ji(t)}function F1(t){if(t.fragment!==null){t.update(),Ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zt)}}function L1(t){const e=[],n=[];Rs.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Rs=e}let ko;function N1(){return ko||(ko=Promise.resolve(),ko.then(()=>{ko=null})),ko}function Zc(t,e,n){t.dispatchEvent(Dy(`${e?"intro":"outro"}${n}`))}const dl=new Set;let Bi;function Te(){Bi={r:0,c:[],p:Bi}}function ke(){Bi.r||Ue(Bi.c),Bi=Bi.p}function M(t,e){t&&t.i&&(dl.delete(t),t.i(e))}function Y(t,e,n,i){if(t&&t.o){if(dl.has(t))return;dl.add(t),Bi.c.push(()=>{dl.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const j1={duration:0};function Vt(t,e,n,i){let o=e(t,n,{direction:"both"}),h=i?0:1,a=null,s=null,u=null,f;function l(){u&&Ay(t,u)}function c(p,m){const g=p.b-h;return m*=Math.abs(g),{a:h,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function d(p){const{delay:m=0,duration:g=300,easing:v=ah,tick:_=ge,css:b}=o||j1,y={start:Sy()+m,b:p};p||(y.group=Bi,Bi.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=y:(b&&(l(),u=Ju(t,h,p,g,m,v,b)),p&&_(0,1),a=c(y,g),zt(()=>Zc(t,p,"start")),ky(w=>{if(s&&w>s.start&&(a=c(s,g),s=null,Zc(t,a.b,"start"),b&&(l(),u=Ju(t,h,a.b,a.duration,0,v,o.css))),a){if(w>=a.end)_(h=a.b,1-h),Zc(t,a.b,"end"),s||(a.b?l():--a.group.r||Ue(a.group.c)),a=null;else if(w>=a.start){const C=w-a.start;h=a.a+a.d*v(C/a.duration),_(h,1-h)}}return!!(a||s)}))}return{run(p){Hn(o)?N1().then(()=>{o=o({direction:p?"in":"out"}),d(p)}):d(p)},end(){l(),a=s=null}}}function Gs(t,e){const n=e.token={};function i(r,o,h,a){if(e.token!==n)return;e.resolved=a;let s=e.ctx;h!==void 0&&(s=s.slice(),s[h]=a);const u=r&&(e.current=r)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((l,c)=>{c!==o&&l&&(Te(),Y(l,1,1,()=>{e.blocks[c]===l&&(e.blocks[c]=null)}),ke())}):e.block.d(1),u.c(),M(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[o]=u),f&&uh()}if(v1(t)){const r=Ta();if(t.then(o=>{ji(r),i(e.then,1,e.value,o),ji(null)},o=>{if(ji(r),i(e.catch,2,e.error,o),ji(null),!e.hasCatch)throw o}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function fh(t,e,n){const i=e.slice(),{resolved:r}=t;t.current===t.then&&(i[t.value]=r),t.current===t.catch&&(i[t.error]=r),t.block.p(i,n)}function Fe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Iy(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function B1(t,e){t.f(),Iy(t,e)}function Ry(t,e,n,i,r,o,h,a,s,u,f,l){let c=t.length,d=o.length,p=c;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map,b=[];for(p=d;p--;){const T=l(r,o,p),x=n(T);let A=h.get(x);A?i&&b.push(()=>A.p(T,e)):(A=u(x,T),A.c()),v.set(x,g[p]=A),x in m&&_.set(x,Math.abs(p-m[x]))}const y=new Set,w=new Set;function C(T){M(T,1),T.m(a,f),h.set(T.key,T),f=T.first,d--}for(;c&&d;){const T=g[d-1],x=t[c-1],A=T.key,I=x.key;T===x?(f=T.first,c--,d--):v.has(I)?!h.has(A)||y.has(A)?C(T):w.has(I)?c--:_.get(A)>_.get(I)?(w.add(A),C(T)):(y.add(I),c--):(s(x,h),c--)}for(;c--;){const T=t[c];v.has(T.key)||s(T,h)}for(;d;)C(g[d-1]);return Ue(b),g}function Gr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const h=t[o],a=e[o];if(a){for(const s in h)s in a||(i[s]=1);for(const s in a)r[s]||(n[s]=a[s],r[s]=1);t[o]=a}else for(const s in h)r[s]=1}for(const h in i)h in n||(n[h]=void 0);return n}function Fl(t){return typeof t=="object"&&t!==null?t:{}}function At(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function fe(t){t&&t.c()}function ce(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),zt(()=>{const o=t.$$.on_mount.map(yy).filter(Hn);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ue(o),t.$$.on_mount=[]}),r.forEach(zt)}function ue(t,e){const n=t.$$;n.fragment!==null&&(L1(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U1(t,e){t.$$.dirty[0]===-1&&(_s.push(t),My(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ge(t,e,n,i,r,o,h=null,a=[-1]){const s=na;ji(t);const u=t.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:r,bound:Nd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Nd(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};h&&h(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(l,c,...d)=>{const p=d.length?d[0]:c;return u.ctx&&r(u.ctx[l],u.ctx[l]=p)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](p),f&&U1(t,l)),c}):[],u.update(),f=!0,Ue(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const l=T1(e.target);u.fragment&&u.fragment.l(l),l.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&M(t.$$.fragment),ce(t,e.target,e.anchor),uh()}ji(s)}class qe{constructor(){Kc(this,"$$");Kc(this,"$$set")}$destroy(){ue(this,1),this.$destroy=ge}$on(e,n){if(!Hn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!_1(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Y1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Y1);var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var at={};const z1={},H1=Object.freeze(Object.defineProperty({__proto__:null,default:z1},Symbol.toStringTag,{value:"Module"})),jr=Fy(H1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=jr,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=jr.implForWrapper,e.nodeCanvas=jr.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function s(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function u(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function f(d,p){if(arguments.length===1)for(var m in d)u.call(this,m,d[m]);else u.call(this,d,p);return this}function l(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)a.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)a.call(this,m,d[m]);else a.call(this,d,p);return this}function c(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(_){return _!==!1}),this}e.Observable={fire:c,on:s,once:f,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,u){var f=this._objects;return u?f[s]=a:f.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,u=!1,f=0,l=arguments.length;f<l;f++)s=a.indexOf(arguments[f]),s!==-1&&(u=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var u=this.getObjects(),f=0,l=u.length;f<l;f++)a.call(s,u[f],f,u);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(s,new e.Gradient(a))},_initPattern:function(a,s,u){a&&a.source&&!(a instanceof e.Pattern)?this.set(s,new e.Pattern(a,u)):u&&u()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,u=Math.atan2,f=Math.pow,l=Math.PI/180,c=Math.PI/2;e.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/c;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/c,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*l},radiansToDegrees:function(d){return d/l},rotatePoint:function(d,p,m){var g=new e.Point(d.x-p.x,d.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var m=e.util.sin(p),g=e.util.cos(p),v=d.x*g-d.y*m,_=d.x*m+d.y*g;return{x:v,y:_}},createVector:function(d,p){return new e.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new e.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,m){var g=e.util.createVector(d,p),v=e.util.createVector(d,m),_=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,_),v),y=_*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,y)),angle:_}},projectStrokeOnPoints:function(d,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(y){var w=v/Math.hypot(y.x,y.y);return new e.Point(y.x*w*_.x,y.y*w*_.y)};return d.length<=1||d.forEach(function(y,w){var C=new e.Point(y.x,y.y),T,x;w===0?(x=d[w+1],T=m?b(e.util.createVector(x,C)).addEquals(C):d[d.length-1]):w===d.length-1?(T=d[w-1],x=m?b(e.util.createVector(T,C)).addEquals(C):d[0]):(T=d[w-1],x=d[w+1]);var A=e.util.getBisector(C,T,x),I=A.vector,W=A.angle,H,q;if(p.strokeLineJoin==="miter"&&(H=-v/Math.sin(W/2),q=new e.Point(I.x*H*_.x,I.y*H*_.y),Math.hypot(q.x,q.y)/v<=p.strokeMiterLimit)){g.push(C.add(q)),g.push(C.subtract(q));return}H=-v*Math.SQRT2,q=new e.Point(I.x*H*_.x,I.y*H*_.y),g.push(C.add(q)),g.push(C.subtract(q))}),g},transformPoint:function(d,p,m){return m?new e.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new e.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=e.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],v=e.util.array.min(g),_=e.util.array.max(g),b=_-v,y=[d[0].y,d[1].y,d[2].y,d[3].y],w=e.util.array.min(y),C=e.util.array.max(y),T=C-w;return{left:v,top:w,width:b,height:T}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=e.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=e.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),e.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return e;var p=d.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var v=e.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,_)),v.src=d},loadImageInDom:function(d,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),e.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var v=[],_=0,b=d.length;function y(){++_===b&&p&&p(v.filter(function(w){return w}))}if(!b){p&&p(v);return}d.forEach(function(w,C){if(!w||!w.type){y();return}var T=e.util.getKlass(w.type,m);T.fromObject(w,function(x,A){A||(v[C]=x),g&&g(w,x,A),y()})})},enlivenObjectEnlivables:function(d,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});e.util.enlivenObjects(g.map(function(v){return d[v]}),function(v){var _={};g.forEach(function(b,y){_[b]=v[y],p&&(p[b]=v[y])}),m&&m(_)})},enlivenPatterns:function(d,p){d=d||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=d.length;if(!_){p&&p(g);return}d.forEach(function(b,y){b&&b.source?new e.Pattern(b,function(w){g[y]=w,m()}):(g[y]=b,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?(typeof m<"u"&&(d[0].sourcePath=m),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in d&&(p[m[g]]=d[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(d){var p=e.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=u(d[1],d[0]),m=f(d[0],2)+f(d[1],2),g=s(m),v=(d[0]*d[3]-d[2]*d[1])/g,_=u(d[0]*d[2]+d[1]*d[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:_/l,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(d.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,_=e.util.degreesToRadians;return d.skewX&&(g=v(g,[1,0,Math.tan(_(d.skewX)),1],!0)),d.skewY&&(g=v(g,[1,Math.tan(_(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=e.util.multiplyTransformMatrices;return d.angle&&(p=m(p,e.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,b,y=d.getImageData(p,m,g*2||1,g*2||1),w=y.data.length;for(_=3;_<w&&(b=y.data[_],v=b<=0,v!==!1);_+=4);return y=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",v=d.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?e.charWidthsCache[d]&&delete e.charWidthsCache[d]:e.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,d.calcOwnMatrix());e.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){e.util.applyTransformToObject(d,e.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),y=e.util.makeBoundingBoxFromPoints(_,b);return{x:y.width,y:y.height}},mergeClipPaths:function(d,p){var m=d,g=p;m.inverted&&!g.inverted&&(m=p,g=d),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(d,p,m){return m=m||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||m&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},b=[],y=0;y<g.length;y++){if(!m[y]){v+=g[y].length;continue}for(var w=0;w<g[y].length;w++){v++;var C=m[y][w];if(C&&Object.keys(C).length>0){var T=e.util.hasStyleChanged(_,C,!0);T?b.push({start:v,end:v+1,style:C}):b[b.length-1].end++}_=C||{}}}return b},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var m=p.split(`
`),g=-1,v=0,_={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)g++,d[v]&&d[v].start<=g&&g<d[v].end&&(_[b]=_[b]||{},_[b][y]=Object.assign({},d[v].style),g===d[v].end-1&&v++);return _}}}(t),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function f(O,P,F,L,J,R,D,X,K,re,te){var $=e.util.cos(O),ae=e.util.sin(O),me=e.util.cos(P),Q=e.util.sin(P),N=F*J*me-L*R*Q+D,ne=L*J*me+F*R*Q+X,se=re+K*(-F*J*ae-L*R*$),ie=te+K*(-L*J*ae+F*R*$),he=N+K*(F*J*Q+L*R*me),ye=ne+K*(L*J*Q-F*R*me);return["C",se,ie,he,ye,N,ne]}function l(O,P,F,L,J,R,D){var X=Math.PI,K=D*X/180,re=e.util.sin(K),te=e.util.cos(K),$=0,ae=0;F=Math.abs(F),L=Math.abs(L);var me=-te*O*.5-re*P*.5,Q=-te*P*.5+re*O*.5,N=F*F,ne=L*L,se=Q*Q,ie=me*me,he=N*ne-N*se-ne*ie,ye=0;if(he<0){var Ie=Math.sqrt(1-he/(N*ne));F*=Ie,L*=Ie}else ye=(J===R?-1:1)*Math.sqrt(he/(N*se+ne*ie));var Se=ye*F*Q/L,le=-ye*L*me/F,xe=te*Se-re*le+O*.5,Pe=re*Se+te*le+P*.5,We=c(1,0,(me-Se)/F,(Q-le)/L),ot=c((me-Se)/F,(Q-le)/L,(-me-Se)/F,(-Q-le)/L);R===0&&ot>0?ot-=2*X:R===1&&ot<0&&(ot+=2*X);for(var Ke=Math.ceil(Math.abs(ot/X*2)),Rt=[],pt=ot/Ke,ln=8/3*Math.sin(pt/4)*Math.sin(pt/4)/Math.sin(pt/2),Tt=We+pt,gn=0;gn<Ke;gn++)Rt[gn]=f(We,Tt,te,re,F,L,xe,Pe,ln,$,ae),$=Rt[gn][5],ae=Rt[gn][6],We=Tt,Tt+=pt;return Rt}function c(O,P,F,L){var J=Math.atan2(P,O),R=Math.atan2(L,F);return R>=J?R-J:2*Math.PI-(J-R)}function d(O,P,F,L,J,R,D,X){var K;if(e.cachesBoundsOfCurve&&(K=a.call(arguments),e.boundsOfCurveCache[K]))return e.boundsOfCurveCache[K];var re=Math.sqrt,te=Math.min,$=Math.max,ae=Math.abs,me=[],Q=[[],[]],N,ne,se,ie,he,ye,Ie,Se;ne=6*O-12*F+6*J,N=-3*O+9*F-9*J+3*D,se=3*F-3*O;for(var le=0;le<2;++le){if(le>0&&(ne=6*P-12*L+6*R,N=-3*P+9*L-9*R+3*X,se=3*L-3*P),ae(N)<1e-12){if(ae(ne)<1e-12)continue;ie=-se/ne,0<ie&&ie<1&&me.push(ie);continue}Ie=ne*ne-4*se*N,!(Ie<0)&&(Se=re(Ie),he=(-ne+Se)/(2*N),0<he&&he<1&&me.push(he),ye=(-ne-Se)/(2*N),0<ye&&ye<1&&me.push(ye))}for(var xe,Pe,We=me.length,ot=We,Ke;We--;)ie=me[We],Ke=1-ie,xe=Ke*Ke*Ke*O+3*Ke*Ke*ie*F+3*Ke*ie*ie*J+ie*ie*ie*D,Q[0][We]=xe,Pe=Ke*Ke*Ke*P+3*Ke*Ke*ie*L+3*Ke*ie*ie*R+ie*ie*ie*X,Q[1][We]=Pe;Q[0][ot]=O,Q[1][ot]=P,Q[0][ot+1]=D,Q[1][ot+1]=X;var Rt=[{x:te.apply(null,Q[0]),y:te.apply(null,Q[1])},{x:$.apply(null,Q[0]),y:$.apply(null,Q[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[K]=Rt),Rt}function p(O,P,F){for(var L=F[1],J=F[2],R=F[3],D=F[4],X=F[5],K=F[6],re=F[7],te=l(K-O,re-P,L,J,D,X,R),$=0,ae=te.length;$<ae;$++)te[$][1]+=O,te[$][2]+=P,te[$][3]+=O,te[$][4]+=P,te[$][5]+=O,te[$][6]+=P;return te}function m(O){var P=0,F=0,L=O.length,J=0,R=0,D,X,K,re=[],te,$,ae;for(X=0;X<L;++X){switch(K=!1,D=O[X].slice(0),D[0]){case"l":D[0]="L",D[1]+=P,D[2]+=F;case"L":P=D[1],F=D[2];break;case"h":D[1]+=P;case"H":D[0]="L",D[2]=F,P=D[1];break;case"v":D[1]+=F;case"V":D[0]="L",F=D[1],D[1]=P,D[2]=F;break;case"m":D[0]="M",D[1]+=P,D[2]+=F;case"M":P=D[1],F=D[2],J=D[1],R=D[2];break;case"c":D[0]="C",D[1]+=P,D[2]+=F,D[3]+=P,D[4]+=F,D[5]+=P,D[6]+=F;case"C":$=D[3],ae=D[4],P=D[5],F=D[6];break;case"s":D[0]="S",D[1]+=P,D[2]+=F,D[3]+=P,D[4]+=F;case"S":te==="C"?($=2*P-$,ae=2*F-ae):($=P,ae=F),P=D[3],F=D[4],D[0]="C",D[5]=D[3],D[6]=D[4],D[3]=D[1],D[4]=D[2],D[1]=$,D[2]=ae,$=D[3],ae=D[4];break;case"q":D[0]="Q",D[1]+=P,D[2]+=F,D[3]+=P,D[4]+=F;case"Q":$=D[1],ae=D[2],P=D[3],F=D[4];break;case"t":D[0]="T",D[1]+=P,D[2]+=F;case"T":te==="Q"?($=2*P-$,ae=2*F-ae):($=P,ae=F),D[0]="Q",P=D[1],F=D[2],D[1]=$,D[2]=ae,D[3]=P,D[4]=F;break;case"a":D[0]="A",D[6]+=P,D[7]+=F;case"A":K=!0,re=re.concat(p(P,F,D)),P=D[6],F=D[7];break;case"z":case"Z":P=J,F=R;break}K||re.push(D),te=D[0]}return re}function g(O,P,F,L){return Math.sqrt((F-O)*(F-O)+(L-P)*(L-P))}function v(O){return O*O*O}function _(O){return 3*O*O*(1-O)}function b(O){return 3*O*(1-O)*(1-O)}function y(O){return(1-O)*(1-O)*(1-O)}function w(O,P,F,L,J,R,D,X){return function(K){var re=v(K),te=_(K),$=b(K),ae=y(K);return{x:D*re+J*te+F*$+O*ae,y:X*re+R*te+L*$+P*ae}}}function C(O,P,F,L,J,R,D,X){return function(K){var re=1-K,te=3*re*re*(F-O)+6*re*K*(J-F)+3*K*K*(D-J),$=3*re*re*(L-P)+6*re*K*(R-L)+3*K*K*(X-R);return Math.atan2($,te)}}function T(O){return O*O}function x(O){return 2*O*(1-O)}function A(O){return(1-O)*(1-O)}function I(O,P,F,L,J,R){return function(D){var X=T(D),K=x(D),re=A(D);return{x:J*X+F*K+O*re,y:R*X+L*K+P*re}}}function W(O,P,F,L,J,R){return function(D){var X=1-D,K=2*X*(F-O)+2*D*(J-F),re=2*X*(L-P)+2*D*(R-L);return Math.atan2(re,K)}}function H(O,P,F){var L={x:P,y:F},J,R=0,D;for(D=1;D<=100;D+=1)J=O(D/100),R+=g(L.x,L.y,J.x,J.y),L=J;return R}function q(O,P){for(var F=0,L=0,J=O.iterator,R={x:O.x,y:O.y},D,X,K=.01,re=O.angleFinder,te;L<P&&K>1e-4;)D=J(F),te=F,X=g(R.x,R.y,D.x,D.y),X+L>P?(F-=K,K/=2):(R=D,F+=K,L+=X);return D.angle=re(te),D}function G(O){for(var P=0,F=O.length,L,J=0,R=0,D=0,X=0,K=[],re,te,$,ae=0;ae<F;ae++){switch(L=O[ae],te={x:J,y:R,command:L[0]},L[0]){case"M":te.length=0,D=J=L[1],X=R=L[2];break;case"L":te.length=g(J,R,L[1],L[2]),J=L[1],R=L[2];break;case"C":re=w(J,R,L[1],L[2],L[3],L[4],L[5],L[6]),$=C(J,R,L[1],L[2],L[3],L[4],L[5],L[6]),te.iterator=re,te.angleFinder=$,te.length=H(re,J,R),J=L[5],R=L[6];break;case"Q":re=I(J,R,L[1],L[2],L[3],L[4]),$=W(J,R,L[1],L[2],L[3],L[4]),te.iterator=re,te.angleFinder=$,te.length=H(re,J,R),J=L[3],R=L[4];break;case"Z":case"z":te.destX=D,te.destY=X,te.length=g(J,R,D,X),J=D,R=X;break}P+=te.length,K.push(te)}return K.push({length:P,x:J,y:R}),K}function B(O,P,F){F||(F=G(O));for(var L=0;P-F[L].length>0&&L<F.length-2;)P-=F[L].length,L++;var J=F[L],R=P/J.length,D=J.command,X=O[L],K;switch(D){case"M":return{x:J.x,y:J.y,angle:0};case"Z":case"z":return K=new e.Point(J.x,J.y).lerp(new e.Point(J.destX,J.destY),R),K.angle=Math.atan2(J.destY-J.y,J.destX-J.x),K;case"L":return K=new e.Point(J.x,J.y).lerp(new e.Point(X[1],X[2]),R),K.angle=Math.atan2(X[2]-J.y,X[1]-J.x),K;case"C":return q(J,P);case"Q":return q(J,P)}}function z(O){var P=[],F=[],L,J,R=e.rePathCommand,D="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",X="("+D+")"+e.commaWsp,K="([01])"+e.commaWsp+"?",re=X+"?"+X+"?"+X+K+K+X+"?("+D+")",te=new RegExp(re,"g"),$,ae,me;if(!O||!O.match)return P;me=O.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var Q=0,N,ne=me.length;Q<ne;Q++){L=me[Q],ae=L.slice(1).trim(),F.length=0;var se=L.charAt(0);if(N=[se],se.toLowerCase()==="a")for(var ie;ie=te.exec(ae);)for(var he=1;he<ie.length;he++)F.push(ie[he]);else for(;$=R.exec(ae);)F.push($[0]);for(var he=0,ye=F.length;he<ye;he++)J=parseFloat(F[he]),isNaN(J)||N.push(J);var Ie=s[se.toLowerCase()],Se=u[se]||se;if(N.length-1>Ie)for(var le=1,xe=N.length;le<xe;le+=Ie)P.push([se].concat(N.slice(le,le+Ie))),se=Se;else P.push(N)}return P}function ee(O,P){var F=[],L,J=new e.Point(O[0].x,O[0].y),R=new e.Point(O[1].x,O[1].y),D=O.length,X=1,K=0,re=D>2;for(P=P||0,re&&(X=O[2].x<R.x?-1:O[2].x===R.x?0:1,K=O[2].y<R.y?-1:O[2].y===R.y?0:1),F.push(["M",J.x-X*P,J.y-K*P]),L=1;L<D;L++){if(!J.eq(R)){var te=J.midPointFrom(R);F.push(["Q",J.x,J.y,te.x,te.y])}J=O[L],L+1<O.length&&(R=O[L+1])}return re&&(X=J.x>O[L-2].x?1:J.x===O[L-2].x?0:-1,K=J.y>O[L-2].y?1:J.y===O[L-2].y?0:-1),F.push(["L",J.x+X*P,J.y+K*P]),F}function oe(O,P,F){return F&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-F.x,-F.y])),O.map(function(L){for(var J=L.slice(0),R={},D=1;D<L.length-1;D+=2)R.x=L[D],R.y=L[D+1],R=e.util.transformPoint(R,P),J[D]=R.x,J[D+1]=R.y;return J})}e.util.joinPath=function(O){return O.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=z,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=ee,e.util.getPathSegmentsInfo=G,e.util.getBoundsOfCurve=d,e.util.getPointOnPath=B,e.util.transformPath=oe}(),function(){var a=Array.prototype.slice;function s(d,p){for(var m=a.call(arguments,2),g=[],v=0,_=d.length;v<_;v++)g[v]=m.length?d[v][p].apply(d[v],m):d[v][p].call(d[v]);return g}function u(d,p){return c(d,p,function(m,g){return m>=g})}function f(d,p){return c(d,p,function(m,g){return m<g})}function l(d,p){for(var m=d.length;m--;)d[m]=p;return d}function c(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,v=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],v)&&(v=d[g][p]);else for(;g--;)m(d[g],v)&&(v=d[g]);return v}}e.util.array={fill:l,invoke:s,min:f,max:u}}(),function(){function a(u,f,l){if(l)if(!e.isLikelyNode&&f instanceof Element)u=f;else if(f instanceof Array){u=[];for(var c=0,d=f.length;c<d;c++)u[c]=a({},f[c],l)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?u[p]=null:f.hasOwnProperty(p)&&(u[p]=a({},f[p],l));else u=f;else for(var p in f)u[p]=f[p];return u}function s(u,f){return a({},u,f)}e.util.object={extend:a,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function a(c){return c.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function s(c,d){return c.charAt(0).toUpperCase()+(d?c.slice(1):c.slice(1).toLowerCase())}function u(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(c){var d=0,p,m=[];for(d=0,p;d<c.length;d++)(p=l(c,d))!==!1&&m.push(p);return m}function l(c,d){var p=c.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return c.charAt(d);if(55296<=p&&p<=56319){if(c.length<=d+1)throw"High surrogate without following low surrogate";var m=c.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return c.charAt(d)+c.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=c.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:s,escapeXml:u,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,s=function(){},u=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var y=m[_].apply(this,arguments);if(this.constructor.superclass=b,_!=="initialize")return y}}(v):p.prototype[v]=m[v],u&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function c(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=c,g}e.util.createClass=d}(),function(){var a=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,l,c,d){f&&f.addEventListener(l,c,a?!1:d)},e.util.removeListener=function(f,l,c,d){f&&f.removeEventListener(l,c,a?!1:d)};function u(f){var l=f.changedTouches;return l&&l[0]?l[0]:f}e.util.getPointer=function(f){var l=f.target,c=e.util.getScrollLeftTop(l),d=u(f);return{x:d.clientX+c.left,y:d.clientY+c.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?c(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")c(d,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return d}var s=e.document.createElement("div"),u=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,c=function(d){return d};u?c=function(d,p){return d.style.opacity=p,d}:f&&(c=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",d}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(y){return typeof y=="string"?e.document.getElementById(y):y}var u,f=function(y){return a.call(y,0)};try{u=f(e.document.childNodes)instanceof Array}catch{}u||(f=function(y){for(var w=new Array(y.length),C=y.length;C--;)w[C]=y[C];return w});function l(y,w){var C=e.document.createElement(y);for(var T in w)T==="class"?C.className=w[T]:T==="for"?C.htmlFor=w[T]:C.setAttribute(T,w[T]);return C}function c(y,w){y&&(" "+y.className+" ").indexOf(" "+w+" ")===-1&&(y.className+=(y.className?" ":"")+w)}function d(y,w,C){return typeof w=="string"&&(w=l(w,C)),y.parentNode&&y.parentNode.replaceChild(w,y),w.appendChild(y),w}function p(y){for(var w=0,C=0,T=e.document.documentElement,x=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(w=x.scrollLeft||T.scrollLeft||0,C=x.scrollTop||T.scrollTop||0):(w+=y.scrollLeft||0,C+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:w,top:C}}function m(y){var w,C=y&&y.ownerDocument,T={left:0,top:0},x={left:0,top:0},A,I={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return x;for(var W in I)x[I[W]]+=parseInt(g(y,W),10)||0;return w=C.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),A=p(y),{left:T.left+A.left-(w.clientLeft||0)+x.left,top:T.top+A.top-(w.clientTop||0)+x.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(y,w){var C=e.document.defaultView.getComputedStyle(y,null);return C?C[w]:void 0}:g=function(y,w){var C=y.style[w];return!C&&y.currentStyle&&(C=y.currentStyle[w]),C},function(){var y=e.document.documentElement.style,w="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function C(x){return typeof x.onselectstart<"u"&&(x.onselectstart=e.util.falseFunction),w?x.style[w]="none":typeof x.unselectable=="string"&&(x.unselectable="on"),x}function T(x){return typeof x.onselectstart<"u"&&(x.onselectstart=null),w?x.style[w]="":typeof x.unselectable=="string"&&(x.unselectable=""),x}e.util.makeElementUnselectable=C,e.util.makeElementSelectable=T}();function v(y){var w=e.jsdomImplForWrapper(y);return w._canvas||w._image}function _(y){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(y);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function b(y,w){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=w}e.util.setImageSmoothing=b,e.util.getById=s,e.util.toArray=f,e.util.addClass=c,e.util.makeElement=l,e.util.wrapElement=d,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=_}(),function(){function a(f,l){return f+(/\?/.test(f)?"&":"?")+l}function s(){}function u(f,l){l||(l={});var c=l.method?l.method.toUpperCase():"GET",d=l.onComplete||function(){},p=new e.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=s)},c==="GET"&&(m=null,typeof l.parameters=="string"&&(f=a(f,l.parameters))),p.open(c,f,!0),(c==="POST"||c==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=u}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,s=e.util.object.clone,u=[];e.util.object.extend(u,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return _.forEach(function(b){b.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(b){b.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function f(){return!1}function l(v,_,b,y){return-b*Math.cos(v/y*(Math.PI/2))+b+_}function c(v){v||(v={});var _=!1,b,y=function(){var w=e.runningAnimations.indexOf(b);return w>-1&&e.runningAnimations.splice(w,1)[0]};return b=a(s(v),{cancel:function(){return _=!0,y()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(w){var C=w||+new Date,T=v.duration||500,x=C+T,A,I=v.onChange||f,W=v.abort||f,H=v.onComplete||f,q=v.easing||l,G="startValue"in v?v.startValue.length>0:!1,B="startValue"in v?v.startValue:0,z="endValue"in v?v.endValue:100,ee=v.byValue||(G?B.map(function(oe,O){return z[O]-B[O]}):z-B);v.onStart&&v.onStart(),function oe(O){A=O||+new Date;var P=A>x?T:A-C,F=P/T,L=G?B.map(function(R,D){return q(P,B[D],ee[D],T)}):q(P,B,ee,T),J=Math.abs(G?(L[0]-B[0])/ee[0]:(L-B)/ee);if(b.currentValue=G?L.slice():L,b.completionRate=J,b.durationRate=F,!_){if(W(L,J,F)){y();return}if(A>x){b.currentValue=G?z.slice():z,b.completionRate=1,b.durationRate=1,I(G?z.slice():z,1,1),H(z,1,1),y();return}else I(L,J,F),m(oe)}}(C)}),b.cancel}var d=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return d.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=c,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=u}(),function(){function a(u,f,l){var c="rgba("+parseInt(u[0]+l*(f[0]-u[0]),10)+","+parseInt(u[1]+l*(f[1]-u[1]),10)+","+parseInt(u[2]+l*(f[2]-u[2]),10);return c+=","+(u&&f?parseFloat(u[3]+l*(f[3]-u[3])):1),c+=")",c}function s(u,f,l,c){var d=new e.Color(u).getSource(),p=new e.Color(f).getSource(),m=c.onComplete,g=c.onChange;return c=c||{},e.util.animate(e.util.object.extend(c,{duration:l||500,startValue:d,endValue:p,byValue:p,easing:function(v,_,b,y){var w=c.colorEasing?c.colorEasing(v,y):1-Math.cos(v/y*(Math.PI/2));return a(_,b,w)},onComplete:function(v,_,b){if(m)return m(a(p,p,0),_,b)},onChange:function(v,_,b){if(g){if(Array.isArray(v))return g(a(v,v,0),_,b);g(v,_,b)}}}))}e.util.animateColor=s}(),function(){function a(O,P,F,L){return O<Math.abs(P)?(O=P,L=F/4):P===0&&O===0?L=F/(2*Math.PI)*Math.asin(1):L=F/(2*Math.PI)*Math.asin(P/O),{a:O,c:P,p:F,s:L}}function s(O,P,F){return O.a*Math.pow(2,10*(P-=1))*Math.sin((P*F-O.s)*(2*Math.PI)/O.p)}function u(O,P,F,L){return F*((O=O/L-1)*O*O+1)+P}function f(O,P,F,L){return O/=L/2,O<1?F/2*O*O*O+P:F/2*((O-=2)*O*O+2)+P}function l(O,P,F,L){return F*(O/=L)*O*O*O+P}function c(O,P,F,L){return-F*((O=O/L-1)*O*O*O-1)+P}function d(O,P,F,L){return O/=L/2,O<1?F/2*O*O*O*O+P:-F/2*((O-=2)*O*O*O-2)+P}function p(O,P,F,L){return F*(O/=L)*O*O*O*O+P}function m(O,P,F,L){return F*((O=O/L-1)*O*O*O*O+1)+P}function g(O,P,F,L){return O/=L/2,O<1?F/2*O*O*O*O*O+P:F/2*((O-=2)*O*O*O*O+2)+P}function v(O,P,F,L){return-F*Math.cos(O/L*(Math.PI/2))+F+P}function _(O,P,F,L){return F*Math.sin(O/L*(Math.PI/2))+P}function b(O,P,F,L){return-F/2*(Math.cos(Math.PI*O/L)-1)+P}function y(O,P,F,L){return O===0?P:F*Math.pow(2,10*(O/L-1))+P}function w(O,P,F,L){return O===L?P+F:F*(-Math.pow(2,-10*O/L)+1)+P}function C(O,P,F,L){return O===0?P:O===L?P+F:(O/=L/2,O<1?F/2*Math.pow(2,10*(O-1))+P:F/2*(-Math.pow(2,-10*--O)+2)+P)}function T(O,P,F,L){return-F*(Math.sqrt(1-(O/=L)*O)-1)+P}function x(O,P,F,L){return F*Math.sqrt(1-(O=O/L-1)*O)+P}function A(O,P,F,L){return O/=L/2,O<1?-F/2*(Math.sqrt(1-O*O)-1)+P:F/2*(Math.sqrt(1-(O-=2)*O)+1)+P}function I(O,P,F,L){var J=1.70158,R=0,D=F;if(O===0)return P;if(O/=L,O===1)return P+F;R||(R=L*.3);var X=a(D,F,R,J);return-s(X,O,L)+P}function W(O,P,F,L){var J=1.70158,R=0,D=F;if(O===0)return P;if(O/=L,O===1)return P+F;R||(R=L*.3);var X=a(D,F,R,J);return X.a*Math.pow(2,-10*O)*Math.sin((O*L-X.s)*(2*Math.PI)/X.p)+X.c+P}function H(O,P,F,L){var J=1.70158,R=0,D=F;if(O===0)return P;if(O/=L/2,O===2)return P+F;R||(R=L*(.3*1.5));var X=a(D,F,R,J);return O<1?-.5*s(X,O,L)+P:X.a*Math.pow(2,-10*(O-=1))*Math.sin((O*L-X.s)*(2*Math.PI)/X.p)*.5+X.c+P}function q(O,P,F,L,J){return J===void 0&&(J=1.70158),F*(O/=L)*O*((J+1)*O-J)+P}function G(O,P,F,L,J){return J===void 0&&(J=1.70158),F*((O=O/L-1)*O*((J+1)*O+J)+1)+P}function B(O,P,F,L,J){return J===void 0&&(J=1.70158),O/=L/2,O<1?F/2*(O*O*(((J*=1.525)+1)*O-J))+P:F/2*((O-=2)*O*(((J*=1.525)+1)*O+J)+2)+P}function z(O,P,F,L){return F-ee(L-O,0,F,L)+P}function ee(O,P,F,L){return(O/=L)<1/2.75?F*(7.5625*O*O)+P:O<2/2.75?F*(7.5625*(O-=1.5/2.75)*O+.75)+P:O<2.5/2.75?F*(7.5625*(O-=2.25/2.75)*O+.9375)+P:F*(7.5625*(O-=2.625/2.75)*O+.984375)+P}function oe(O,P,F,L){return O<L/2?z(O*2,0,F,L)*.5+P:ee(O*2-L,0,F,L)*.5+F*.5+P}e.util.ease={easeInQuad:function(O,P,F,L){return F*(O/=L)*O+P},easeOutQuad:function(O,P,F,L){return-F*(O/=L)*(O-2)+P},easeInOutQuad:function(O,P,F,L){return O/=L/2,O<1?F/2*O*O+P:-F/2*(--O*(O-2)-1)+P},easeInCubic:function(O,P,F,L){return F*(O/=L)*O*O+P},easeOutCubic:u,easeInOutCubic:f,easeInQuart:l,easeOutQuart:c,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:b,easeInExpo:y,easeOutExpo:w,easeInOutExpo:C,easeInCirc:T,easeOutCirc:x,easeInOutCirc:A,easeInElastic:I,easeOutElastic:W,easeInOutElastic:H,easeInBack:q,easeOutBack:G,easeInOutBack:B,easeInBounce:z,easeOutBounce:ee,easeInOutBounce:oe}}(),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,c=s.util.parseUnit,d=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",w="clip-path";s.svgValidTagNamesRegEx=x(p),s.svgViewBoxElementsRegEx=x(m),s.svgInvalidAncestorsRegEx=x(g),s.svgValidParentsRegEx=x(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function C(R){return R in _?_[R]:R}function T(R,D,X,K){var re=Array.isArray(D),te;if((R==="fill"||R==="stroke")&&D==="none")D="";else{if(R==="strokeUniform")return D==="non-scaling-stroke";if(R==="strokeDashArray")D==="none"?D=null:D=D.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(R==="transformMatrix")X&&X.transformMatrix?D=d(X.transformMatrix,s.parseTransformAttribute(D)):D=s.parseTransformAttribute(D);else if(R==="visible")D=D!=="none"&&D!=="hidden",X&&X.visible===!1&&(D=!1);else if(R==="opacity")D=parseFloat(D),X&&typeof X.opacity<"u"&&(D*=X.opacity);else if(R==="textAnchor")D=D==="start"?"left":D==="end"?"right":"center";else if(R==="charSpacing")te=c(D,K)/K*1e3;else if(R==="paintFirst"){var $=D.indexOf("fill"),ae=D.indexOf("stroke"),D="fill";($>-1&&ae>-1&&ae<$||$===-1&&ae>-1)&&(D="stroke")}else{if(R==="href"||R==="xlink:href"||R==="font")return D;if(R==="imageSmoothing")return D==="optimizeQuality";te=re?D.map(c):c(D,K)}}return!re&&isNaN(te)?D:te}function x(R){return new RegExp("^("+R.join("|")+")\\b","i")}function A(R){for(var D in b)if(!(typeof R[b[D]]>"u"||R[D]==="")){if(typeof R[D]>"u"){if(!s.Object.prototype[D])continue;R[D]=s.Object.prototype[D]}if(R[D].indexOf("url(")!==0){var X=new s.Color(R[D]);R[D]=X.setAlpha(l(X.getAlpha()*R[b[D]],2)).toRgba()}}return R}function I(R,D){var X,K=[],re,te,$;for(te=0,$=D.length;te<$;te++)X=D[te],re=R.getElementsByTagName(X),K=K.concat(Array.prototype.slice.call(re));return K}s.parseTransformAttribute=function(){function R(le,xe){var Pe=s.util.cos(xe[0]),We=s.util.sin(xe[0]),ot=0,Ke=0;xe.length===3&&(ot=xe[1],Ke=xe[2]),le[0]=Pe,le[1]=We,le[2]=-We,le[3]=Pe,le[4]=ot-(Pe*ot-We*Ke),le[5]=Ke-(We*ot+Pe*Ke)}function D(le,xe){var Pe=xe[0],We=xe.length===2?xe[1]:xe[0];le[0]=Pe,le[3]=We}function X(le,xe,Pe){le[Pe]=Math.tan(s.util.degreesToRadians(xe[0]))}function K(le,xe){le[4]=xe[0],xe.length===2&&(le[5]=xe[1])}var re=s.iMatrix,te=s.reNum,$=s.commaWsp,ae="(?:(skewX)\\s*\\(\\s*("+te+")\\s*\\))",me="(?:(skewY)\\s*\\(\\s*("+te+")\\s*\\))",Q="(?:(rotate)\\s*\\(\\s*("+te+")(?:"+$+"("+te+")"+$+"("+te+"))?\\s*\\))",N="(?:(scale)\\s*\\(\\s*("+te+")(?:"+$+"("+te+"))?\\s*\\))",ne="(?:(translate)\\s*\\(\\s*("+te+")(?:"+$+"("+te+"))?\\s*\\))",se="(?:(matrix)\\s*\\(\\s*("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")\\s*\\))",ie="(?:"+se+"|"+ne+"|"+N+"|"+Q+"|"+ae+"|"+me+")",he="(?:"+ie+"(?:"+$+"*"+ie+")*)",ye="^\\s*(?:"+he+"?)\\s*$",Ie=new RegExp(ye),Se=new RegExp(ie,"g");return function(le){var xe=re.concat(),Pe=[];if(!le||le&&!Ie.test(le))return xe;le.replace(Se,function(ot){var Ke=new RegExp(ie).exec(ot).filter(function(ln){return!!ln}),Rt=Ke[1],pt=Ke.slice(2).map(parseFloat);switch(Rt){case"translate":K(xe,pt);break;case"rotate":pt[0]=s.util.degreesToRadians(pt[0]),R(xe,pt);break;case"scale":D(xe,pt);break;case"skewX":X(xe,pt,2);break;case"skewY":X(xe,pt,1);break;case"matrix":xe=pt;break}Pe.push(xe.concat()),xe=re.concat()});for(var We=Pe[0];Pe.length>1;)Pe.shift(),We=s.util.multiplyTransformMatrices(We,Pe[0]);return We}}();function W(R,D){var X,K;R.replace(/;\s*$/,"").split(";").forEach(function(re){var te=re.split(":");X=te[0].trim().toLowerCase(),K=te[1].trim(),D[X]=K})}function H(R,D){var X,K;for(var re in R)typeof R[re]>"u"||(X=re.toLowerCase(),K=R[re],D[X]=K)}function q(R,D){var X={};for(var K in s.cssRules[D])if(G(R,K.split(" ")))for(var re in s.cssRules[D][K])X[re]=s.cssRules[D][K][re];return X}function G(R,D){var X,K=!0;return X=z(R,D.pop()),X&&D.length&&(K=B(R,D)),X&&K&&D.length===0}function B(R,D){for(var X,K=!0;R.parentNode&&R.parentNode.nodeType===1&&D.length;)K&&(X=D.pop()),R=R.parentNode,K=z(R,X);return D.length===0}function z(R,D){var X=R.nodeName,K=R.getAttribute("class"),re=R.getAttribute("id"),te,$;if(te=new RegExp("^"+X,"i"),D=D.replace(te,""),re&&D.length&&(te=new RegExp("#"+re+"(?![a-zA-Z\\-]+)","i"),D=D.replace(te,"")),K&&D.length)for(K=K.split(" "),$=K.length;$--;)te=new RegExp("\\."+K[$]+"(?![a-zA-Z\\-]+)","i"),D=D.replace(te,"");return D.length===0}function ee(R,D){var X;if(R.getElementById&&(X=R.getElementById(D)),X)return X;var K,re,te,$=R.getElementsByTagName("*");for(re=0,te=$.length;re<te;re++)if(K=$[re],D===K.getAttribute("id"))return K}function oe(R){for(var D=I(R,["use","svg:use"]),X=0;D.length&&X<D.length;){var K=D[X],re=K.getAttribute("xlink:href")||K.getAttribute("href");if(re===null)return;var te=re.slice(1),$=K.getAttribute("x")||0,ae=K.getAttribute("y")||0,me=ee(R,te).cloneNode(!0),Q=(me.getAttribute("transform")||"")+" translate("+$+", "+ae+")",N,ne=D.length,se,ie,he,ye,Ie=s.svgNS;if(P(me),/^svg$/i.test(me.nodeName)){var Se=me.ownerDocument.createElementNS(Ie,"g");for(ie=0,he=me.attributes,ye=he.length;ie<ye;ie++)se=he.item(ie),Se.setAttributeNS(Ie,se.nodeName,se.nodeValue);for(;me.firstChild;)Se.appendChild(me.firstChild);me=Se}for(ie=0,he=K.attributes,ye=he.length;ie<ye;ie++)se=he.item(ie),!(se.nodeName==="x"||se.nodeName==="y"||se.nodeName==="xlink:href"||se.nodeName==="href")&&(se.nodeName==="transform"?Q=se.nodeValue+" "+Q:me.setAttribute(se.nodeName,se.nodeValue));me.setAttribute("transform",Q),me.setAttribute("instantiated_by_use","1"),me.removeAttribute("id"),N=K.parentNode,N.replaceChild(me,K),D.length===ne&&X++}}var O=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(R){if(!s.svgViewBoxElementsRegEx.test(R.nodeName))return{};var D=R.getAttribute("viewBox"),X=1,K=1,re=0,te=0,$,ae,me,Q,N=R.getAttribute("width"),ne=R.getAttribute("height"),se=R.getAttribute("x")||0,ie=R.getAttribute("y")||0,he=R.getAttribute("preserveAspectRatio")||"",ye=!D||!(D=D.match(O)),Ie=!N||!ne||N==="100%"||ne==="100%",Se=ye&&Ie,le={},xe="",Pe=0,We=0;if(le.width=0,le.height=0,le.toBeParsed=Se,ye&&(se||ie)&&R.parentNode&&R.parentNode.nodeName!=="#document"&&(xe=" translate("+c(se)+" "+c(ie)+") ",me=(R.getAttribute("transform")||"")+xe,R.setAttribute("transform",me),R.removeAttribute("x"),R.removeAttribute("y")),Se)return le;if(ye)return le.width=c(N),le.height=c(ne),le;if(re=-parseFloat(D[1]),te=-parseFloat(D[2]),$=parseFloat(D[3]),ae=parseFloat(D[4]),le.minX=re,le.minY=te,le.viewBoxWidth=$,le.viewBoxHeight=ae,Ie?(le.width=$,le.height=ae):(le.width=c(N),le.height=c(ne),X=le.width/$,K=le.height/ae),he=s.util.parsePreserveAspectRatioAttribute(he),he.alignX!=="none"&&(he.meetOrSlice==="meet"&&(K=X=X>K?K:X),he.meetOrSlice==="slice"&&(K=X=X>K?X:K),Pe=le.width-$*X,We=le.height-ae*X,he.alignX==="Mid"&&(Pe/=2),he.alignY==="Mid"&&(We/=2),he.alignX==="Min"&&(Pe=0),he.alignY==="Min"&&(We=0)),X===1&&K===1&&re===0&&te===0&&se===0&&ie===0)return le;if((se||ie)&&R.parentNode.nodeName!=="#document"&&(xe=" translate("+c(se)+" "+c(ie)+") "),me=xe+" matrix("+X+" 0 0 "+K+" "+(re*X+Pe)+" "+(te*K+We)+") ",R.nodeName==="svg"){for(Q=R.ownerDocument.createElementNS(s.svgNS,"g");R.firstChild;)Q.appendChild(R.firstChild);R.appendChild(Q)}else Q=R,Q.removeAttribute("x"),Q.removeAttribute("y"),me=Q.getAttribute("transform")+me;return Q.setAttribute("transform",me),le}function F(R,D){for(;R&&(R=R.parentNode);)if(R.nodeName&&D.test(R.nodeName.replace("svg:",""))&&!R.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(R,D,X,K){if(R){oe(R);var re=s.Object.__uid++,te,$,ae=P(R),me=s.util.toArray(R.getElementsByTagName("*"));if(ae.crossOrigin=K&&K.crossOrigin,ae.svgUid=re,me.length===0&&s.isLikelyNode){me=R.selectNodes('//*[name(.)!="svg"]');var Q=[];for(te=0,$=me.length;te<$;te++)Q[te]=me[te];me=Q}var N=me.filter(function(se){return P(se),s.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))&&!F(se,s.svgInvalidAncestorsRegEx)});if(!N||N&&!N.length){D&&D([],{});return}var ne={};me.filter(function(se){return se.nodeName.replace("svg:","")==="clipPath"}).forEach(function(se){var ie=se.getAttribute("id");ne[ie]=s.util.toArray(se.getElementsByTagName("*")).filter(function(he){return s.svgValidTagNamesRegEx.test(he.nodeName.replace("svg:",""))})}),s.gradientDefs[re]=s.getGradientDefs(R),s.cssRules[re]=s.getCSSRules(R),s.clipPaths[re]=ne,s.parseElements(N,function(se,ie){D&&(D(se,ae,ie,me),delete s.gradientDefs[re],delete s.cssRules[re],delete s.clipPaths[re])},f(ae),X,K)}};function L(R,D){var X=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],K="xlink:href",re=D.getAttribute(K).slice(1),te=ee(R,re);if(te&&te.getAttribute(K)&&L(R,te),X.forEach(function(ae){te&&!D.hasAttribute(ae)&&te.hasAttribute(ae)&&D.setAttribute(ae,te.getAttribute(ae))}),!D.children.length)for(var $=te.cloneNode(!0);$.firstChild;)D.appendChild($.firstChild);D.removeAttribute(K)}var J=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");u(s,{parseFontDeclaration:function(R,D){var X=R.match(J);if(X){var K=X[1],re=X[3],te=X[4],$=X[5],ae=X[6];K&&(D.fontStyle=K),re&&(D.fontWeight=isNaN(parseFloat(re))?re:parseFloat(re)),te&&(D.fontSize=c(te)),ae&&(D.fontFamily=ae),$&&(D.lineHeight=$==="normal"?1:$)}},getGradientDefs:function(R){var D=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],X=I(R,D),K,re=0,te={};for(re=X.length;re--;)K=X[re],K.getAttribute("xlink:href")&&L(R,K),te[K.getAttribute("id")]=K;return te},parseAttributes:function(R,D,X){if(R){var K,re={},te,$;typeof X>"u"&&(X=R.getAttribute("svgUid")),R.parentNode&&s.svgValidParentsRegEx.test(R.parentNode.nodeName)&&(re=s.parseAttributes(R.parentNode,D,X));var ae=D.reduce(function(he,ye){return K=R.getAttribute(ye),K&&(he[ye]=K),he},{}),me=u(q(R,X),s.parseStyleAttribute(R));ae=u(ae,me),me[w]&&R.setAttribute(w,me[w]),te=$=re.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,ae[y]&&(ae[y]=te=c(ae[y],$));var Q,N,ne={};for(var se in ae)Q=C(se),N=T(Q,ae[se],re,te),ne[Q]=N;ne&&ne.font&&s.parseFontDeclaration(ne.font,ne);var ie=u(re,ne);return s.svgValidParentsRegEx.test(R.nodeName)?ie:A(ie)}},parseElements:function(R,D,X,K,re){new s.ElementsParser(R,D,X,K,re).parse()},parseStyleAttribute:function(R){var D={},X=R.getAttribute("style");return X&&(typeof X=="string"?W(X,D):H(X,D)),D},parsePointsAttribute:function(R){if(!R)return null;R=R.replace(/,/g," ").trim(),R=R.split(/\s+/);var D=[],X,K;for(X=0,K=R.length;X<K;X+=2)D.push({x:parseFloat(R[X]),y:parseFloat(R[X+1])});return D},getCSSRules:function(R){var D=R.getElementsByTagName("style"),X,K,re={},te;for(X=0,K=D.length;X<K;X++){var $=D[X].textContent;$=$.replace(/\/\*[\s\S]*?\*\//g,""),$.trim()!==""&&(te=$.split("}"),te=te.filter(function(ae){return ae.trim()}),te.forEach(function(ae){var me=ae.split("{"),Q={},N=me[1].trim(),ne=N.split(";").filter(function(ye){return ye.trim()});for(X=0,K=ne.length;X<K;X++){var se=ne[X].split(":"),ie=se[0].trim(),he=se[1].trim();Q[ie]=he}ae=me[0].trim(),ae.split(",").forEach(function(ye){ye=ye.replace(/^svg/i,"").trim(),ye!==""&&(re[ye]?s.util.object.extend(re[ye],Q):re[ye]=s.util.object.clone(Q))})}))}return re},loadSVGFromURL:function(R,D,X,K){R=R.replace(/^\n\s*/,"").trim(),new s.util.request(R,{method:"get",onComplete:re});function re(te){var $=te.responseXML;if(!$||!$.documentElement)return D&&D(null),!1;s.parseSVGDocument($.documentElement,function(ae,me,Q,N){D&&D(ae,me,Q,N)},X,K)}},loadSVGFromString:function(R,D,X,K){var re=new s.window.DOMParser,te=re.parseFromString(R.trim(),"text/xml");s.parseSVGDocument(te.documentElement,function($,ae,me,Q){D($,ae,me,Q)},X,K)}})}(t),e.ElementsParser=function(a,s,u,f,l,c){this.elements=a,this.callback=s,this.options=u,this.reviver=f,this.svgUid=u&&u.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=c},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(u,f){u.setAttribute("svgUid",s.svgUid),s.createObject(u,f)})},a.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,u){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(u,s),this.options)}catch(l){e.log(l)}else this.checkIfDone()},a.createCallback=function(s,u){var f=this;return function(l){var c;f.resolveGradient(l,u,"fill"),f.resolveGradient(l,u,"stroke"),l instanceof e.Image&&l._originalElement&&(c=l.parsePreserveAspectRatioAttribute(u)),l._removeTransformMatrix(c),f.resolveClipPath(l,u),f.reviver&&f.reviver(u,l),f.instances[s]=l,f.checkIfDone()}},a.extractPropertyDefinition=function(s,u,f){var l=s[u],c=this.regexUrl;if(c.test(l)){c.lastIndex=0;var d=c.exec(l)[1];return c.lastIndex=0,e[f][this.svgUid][d]}},a.resolveGradient=function(s,u,f){var l=this.extractPropertyDefinition(s,f,"gradientDefs");if(l){var c=u.getAttribute(f+"-opacity"),d=e.Gradient.fromElement(l,s,c,this.options);s.set(f,d)}},a.createClipPathCallback=function(s,u){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,u.push(f)}},a.resolveClipPath=function(s,u){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),l,c,d,p,m,g;if(f){p=[],d=e.util.invertTransform(s.calcTransformMatrix());for(var v=f[0].parentNode,_=u;_.parentNode&&_.getAttribute("clip-path")!==s.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var b=0;b<f.length;b++)l=f[b],c=this.findTag(l),c.fromElement(l,this.createClipPathCallback(s,p),this.options);p.length===1?f=p[0]:f=new e.Group(p),m=e.util.multiplyTransformMatrices(d,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,_);var g=e.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=u;function u(f,l){this.x=f,this.y=l}u.prototype={type:"point",constructor:u,add:function(f){return new u(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new u(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new u(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new u(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new u(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new u(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new u(this.x+(f.x-this.x)*l,this.y+(f.y-this.y)*l)},distanceFrom:function(f){var l=this.x-f.x,c=this.y-f.y;return Math.sqrt(l*l+c*c)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new u(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new u(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,l){return this.x=f,this.y=l,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var l=this.x,c=this.y;this.x=f.x,this.y=f.y,f.x=l,f.y=c},clone:function(){return new u(this.x,this.y)}}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function u(f){this.status=f,this.points=[]}s.Intersection=u,s.Intersection.prototype={constructor:u,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,l,c,d){var p,m=(d.x-c.x)*(f.y-c.y)-(d.y-c.y)*(f.x-c.x),g=(l.x-f.x)*(f.y-c.y)-(l.y-f.y)*(f.x-c.x),v=(d.y-c.y)*(l.x-f.x)-(d.x-c.x)*(l.y-f.y);if(v!==0){var _=m/v,b=g/v;0<=_&&_<=1&&0<=b&&b<=1?(p=new u("Intersection"),p.appendPoint(new s.Point(f.x+_*(l.x-f.x),f.y+_*(l.y-f.y)))):p=new u}else m===0||g===0?p=new u("Coincident"):p=new u("Parallel");return p},s.Intersection.intersectLinePolygon=function(f,l,c){var d=new u,p=c.length,m,g,v,_;for(_=0;_<p;_++)m=c[_],g=c[(_+1)%p],v=u.intersectLineLine(f,l,m,g),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},s.Intersection.intersectPolygonPolygon=function(f,l){var c=new u,d=f.length,p;for(p=0;p<d;p++){var m=f[p],g=f[(p+1)%d],v=u.intersectLinePolygon(m,g,l);c.appendPoints(v.points)}return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonRectangle=function(f,l,c){var d=l.min(c),p=l.max(c),m=new s.Point(p.x,d.y),g=new s.Point(d.x,p.y),v=u.intersectLinePolygon(d,m,f),_=u.intersectLinePolygon(m,p,f),b=u.intersectLinePolygon(p,g,f),y=u.intersectLinePolygon(g,d,f),w=new u;return w.appendPoints(v.points),w.appendPoints(_.points),w.appendPoints(b.points),w.appendPoints(y.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function u(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}s.Color=u,s.Color.prototype={_tryParsingColor:function(l){var c;l in u.colorNameMap&&(l=u.colorNameMap[l]),l==="transparent"&&(c=[255,255,255,0]),c||(c=u.sourceFromHex(l)),c||(c=u.sourceFromRgb(l)),c||(c=u.sourceFromHsl(l)),c||(c=[0,0,0,1]),c&&this.setSource(c)},_rgbToHsl:function(l,c,d){l/=255,c/=255,d/=255;var p,m,g,v=s.util.array.max([l,c,d]),_=s.util.array.min([l,c,d]);if(g=(v+_)/2,v===_)p=m=0;else{var b=v-_;switch(m=g>.5?b/(2-v-_):b/(v+_),v){case l:p=(c-d)/b+(c<d?6:0);break;case c:p=(d-l)/b+2;break;case d:p=(l-c)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),c=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+c[0]+","+c[1]+"%,"+c[2]+"%)"},toHsla:function(){var l=this.getSource(),c=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),c,d,p;return c=l[0].toString(16),c=c.length===1?"0"+c:c,d=l[1].toString(16),d=d.length===1?"0"+d:d,p=l[2].toString(16),p=p.length===1?"0"+p:p,c.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),c;return c=Math.round(l[3]*255),c=c.toString(16),c=c.length===1?"0"+c:c,this.toHex()+c.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var c=this.getSource();return c[3]=l,this.setSource(c),this},toGrayscale:function(){var l=this.getSource(),c=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),d=l[3];return this.setSource([c,c,c,d]),this},toBlackWhite:function(l){var c=this.getSource(),d=(c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),p=c[3];return l=l||127,d=Number(d)<Number(l)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(l){l instanceof u||(l=new u(l));var c=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)c.push(Math.round(m[v]*(1-p)+g[v]*p));return c[3]=d,this.setSource(c),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(l,c,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(c-l)*6*d:d<1/2?c:d<2/3?l+(c-l)*(2/3-d)*6:l}s.Color.fromRgb=function(l){return u.fromSource(u.sourceFromRgb(l))},s.Color.sourceFromRgb=function(l){var c=l.match(u.reRGBa);if(c){var d=parseInt(c[1],10)/(/%$/.test(c[1])?100:1)*(/%$/.test(c[1])?255:1),p=parseInt(c[2],10)/(/%$/.test(c[2])?100:1)*(/%$/.test(c[2])?255:1),m=parseInt(c[3],10)/(/%$/.test(c[3])?100:1)*(/%$/.test(c[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),c[4]?parseFloat(c[4]):1]}},s.Color.fromRgba=u.fromRgb,s.Color.fromHsl=function(l){return u.fromSource(u.sourceFromHsl(l))},s.Color.sourceFromHsl=function(l){var c=l.match(u.reHSLa);if(c){var d=(parseFloat(c[1])%360+360)%360/360,p=parseFloat(c[2])/(/%$/.test(c[2])?100:1),m=parseFloat(c[3])/(/%$/.test(c[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var b=m<=.5?m*(p+1):m+p-m*p,y=m*2-b;g=f(y,b,d+1/3),v=f(y,b,d),_=f(y,b,d-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),c[4]?parseFloat(c[4]):1]}},s.Color.fromHsla=u.fromHsl,s.Color.fromHex=function(l){return u.fromSource(u.sourceFromHex(l))},s.Color.sourceFromHex=function(l){if(l.match(u.reHex)){var c=l.slice(l.indexOf("#")+1),d=c.length===3||c.length===4,p=c.length===8||c.length===4,m=d?c.charAt(0)+c.charAt(0):c.substring(0,2),g=d?c.charAt(1)+c.charAt(1):c.substring(2,4),v=d?c.charAt(2)+c.charAt(2):c.substring(4,6),_=p?d?c.charAt(3)+c.charAt(3):c.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(l){var c=new u;return c.setSource(l),c}}(t),function(a){var s=a.fabric||(a.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],l={},c="left",d="top",p="right",m="bottom",g="center",v={top:m,bottom:d,left:p,right:c,center:g},_=s.util.radiansToDegrees,b=Math.sign||function(Q){return(Q>0)-(Q<0)||+Q};function y(Q,N){var ne=Q.angle+_(Math.atan2(N.y,N.x))+360;return Math.round(ne%360/45)}function w(Q,N){var ne=N.transform.target,se=ne.canvas,ie=s.util.object.clone(N);ie.target=ne,se&&se.fire("object:"+Q,ie),ne.fire(Q,N)}function C(Q,N){var ne=N.canvas,se=ne.uniScaleKey,ie=Q[se];return ne.uniformScaling&&!ie||!ne.uniformScaling&&ie}function T(Q){return Q.originX===g&&Q.originY===g}function x(Q,N,ne){var se=Q.lockScalingX,ie=Q.lockScalingY;return!!(se&&ie||!N&&(se||ie)&&ne||se&&N==="x"||ie&&N==="y")}function A(Q,N,ne){var se="not-allowed",ie=C(Q,ne),he="";if(N.x!==0&&N.y===0?he="x":N.x===0&&N.y!==0&&(he="y"),x(ne,he,ie))return se;var ye=y(ne,N);return u[ye]+"-resize"}function I(Q,N,ne){var se="not-allowed";if(N.x!==0&&ne.lockSkewingY||N.y!==0&&ne.lockSkewingX)return se;var ie=y(ne,N)%4;return f[ie]+"-resize"}function W(Q,N,ne){return Q[ne.canvas.altActionKey]?l.skewCursorStyleHandler(Q,N,ne):l.scaleCursorStyleHandler(Q,N,ne)}function H(Q,N,ne){var se=Q[ne.canvas.altActionKey];if(N.x===0)return se?"skewX":"scaleY";if(N.y===0)return se?"skewY":"scaleX"}function q(Q,N,ne){return ne.lockRotation?"not-allowed":N.cursorStyle}function G(Q,N,ne,se){return{e:Q,transform:N,pointer:{x:ne,y:se}}}function B(Q){return function(N,ne,se,ie){var he=ne.target,ye=he.getCenterPoint(),Ie=he.translateToOriginPoint(ye,ne.originX,ne.originY),Se=Q(N,ne,se,ie);return he.setPositionByOrigin(Ie,ne.originX,ne.originY),Se}}function z(Q,N){return function(ne,se,ie,he){var ye=N(ne,se,ie,he);return ye&&w(Q,G(ne,se,ie,he)),ye}}function ee(Q,N,ne,se,ie){var he=Q.target,ye=he.controls[Q.corner],Ie=he.canvas.getZoom(),Se=he.padding/Ie,le=he.toLocalPoint(new s.Point(se,ie),N,ne);return le.x>=Se&&(le.x-=Se),le.x<=-Se&&(le.x+=Se),le.y>=Se&&(le.y-=Se),le.y<=Se&&(le.y+=Se),le.x-=ye.offsetX,le.y-=ye.offsetY,le}function oe(Q){return Q.flipX!==Q.flipY}function O(Q,N,ne,se,ie){if(Q[N]!==0){var he=Q._getTransformedDimensions()[se],ye=ie/he*Q[ne];Q.set(ne,ye)}}function P(Q,N,ne,se){var ie=N.target,he=ie._getTransformedDimensions(0,ie.skewY),ye=ee(N,N.originX,N.originY,ne,se),Ie=Math.abs(ye.x*2)-he.x,Se=ie.skewX,le;Ie<2?le=0:(le=_(Math.atan2(Ie/ie.scaleX,he.y/ie.scaleY)),N.originX===c&&N.originY===m&&(le=-le),N.originX===p&&N.originY===d&&(le=-le),oe(ie)&&(le=-le));var xe=Se!==le;if(xe){var Pe=ie._getTransformedDimensions().y;ie.set("skewX",le),O(ie,"skewY","scaleY","y",Pe)}return xe}function F(Q,N,ne,se){var ie=N.target,he=ie._getTransformedDimensions(ie.skewX,0),ye=ee(N,N.originX,N.originY,ne,se),Ie=Math.abs(ye.y*2)-he.y,Se=ie.skewY,le;Ie<2?le=0:(le=_(Math.atan2(Ie/ie.scaleY,he.x/ie.scaleX)),N.originX===c&&N.originY===m&&(le=-le),N.originX===p&&N.originY===d&&(le=-le),oe(ie)&&(le=-le));var xe=Se!==le;if(xe){var Pe=ie._getTransformedDimensions().x;ie.set("skewY",le),O(ie,"skewX","scaleX","x",Pe)}return xe}function L(Q,N,ne,se){var ie=N.target,he=ie.skewX,ye,Ie=N.originY;if(ie.lockSkewingX)return!1;if(he===0){var Se=ee(N,g,g,ne,se);Se.x>0?ye=c:ye=p}else he>0&&(ye=Ie===d?c:p),he<0&&(ye=Ie===d?p:c),oe(ie)&&(ye=ye===c?p:c);N.originX=ye;var le=z("skewing",B(P));return le(Q,N,ne,se)}function J(Q,N,ne,se){var ie=N.target,he=ie.skewY,ye,Ie=N.originX;if(ie.lockSkewingY)return!1;if(he===0){var Se=ee(N,g,g,ne,se);Se.y>0?ye=d:ye=m}else he>0&&(ye=Ie===c?d:m),he<0&&(ye=Ie===c?m:d),oe(ie)&&(ye=ye===d?m:d);N.originY=ye;var le=z("skewing",B(F));return le(Q,N,ne,se)}function R(Q,N,ne,se){var ie=N,he=ie.target,ye=he.translateToOriginPoint(he.getCenterPoint(),ie.originX,ie.originY);if(he.lockRotation)return!1;var Ie=Math.atan2(ie.ey-ye.y,ie.ex-ye.x),Se=Math.atan2(se-ye.y,ne-ye.x),le=_(Se-Ie+ie.theta),xe=!0;if(he.snapAngle>0){var Pe=he.snapAngle,We=he.snapThreshold||Pe,ot=Math.ceil(le/Pe)*Pe,Ke=Math.floor(le/Pe)*Pe;Math.abs(le-Ke)<We?le=Ke:Math.abs(le-ot)<We&&(le=ot)}return le<0&&(le=360+le),le%=360,xe=he.angle!==le,he.angle=le,xe}function D(Q,N,ne,se,ie){ie=ie||{};var he=N.target,ye=he.lockScalingX,Ie=he.lockScalingY,Se=ie.by,le,xe,Pe,We,ot=C(Q,he),Ke=x(he,Se,ot),Rt,pt,ln=N.gestureScale;if(Ke)return!1;if(ln)xe=N.scaleX*ln,Pe=N.scaleY*ln;else{if(le=ee(N,N.originX,N.originY,ne,se),Rt=Se!=="y"?b(le.x):1,pt=Se!=="x"?b(le.y):1,N.signX||(N.signX=Rt),N.signY||(N.signY=pt),he.lockScalingFlip&&(N.signX!==Rt||N.signY!==pt))return!1;if(We=he._getTransformedDimensions(),ot&&!Se){var Tt=Math.abs(le.x)+Math.abs(le.y),gn=N.original,Zi=Math.abs(We.x*gn.scaleX/he.scaleX)+Math.abs(We.y*gn.scaleY/he.scaleY),mn=Tt/Zi;xe=gn.scaleX*mn,Pe=gn.scaleY*mn}else xe=Math.abs(le.x*he.scaleX/We.x),Pe=Math.abs(le.y*he.scaleY/We.y);T(N)&&(xe*=2,Pe*=2),N.signX!==Rt&&Se!=="y"&&(N.originX=v[N.originX],xe*=-1,N.signX=Rt),N.signY!==pt&&Se!=="x"&&(N.originY=v[N.originY],Pe*=-1,N.signY=pt)}var To=he.scaleX,Ua=he.scaleY;return Se?(Se==="x"&&he.set("scaleX",xe),Se==="y"&&he.set("scaleY",Pe)):(!ye&&he.set("scaleX",xe),!Ie&&he.set("scaleY",Pe)),To!==he.scaleX||Ua!==he.scaleY}function X(Q,N,ne,se){return D(Q,N,ne,se)}function K(Q,N,ne,se){return D(Q,N,ne,se,{by:"x"})}function re(Q,N,ne,se){return D(Q,N,ne,se,{by:"y"})}function te(Q,N,ne,se){return Q[N.target.canvas.altActionKey]?l.skewHandlerX(Q,N,ne,se):l.scalingY(Q,N,ne,se)}function $(Q,N,ne,se){return Q[N.target.canvas.altActionKey]?l.skewHandlerY(Q,N,ne,se):l.scalingX(Q,N,ne,se)}function ae(Q,N,ne,se){var ie=N.target,he=ee(N,N.originX,N.originY,ne,se),ye=ie.strokeWidth/(ie.strokeUniform?ie.scaleX:1),Ie=T(N)?2:1,Se=ie.width,le=Math.abs(he.x*Ie/ie.scaleX)-ye;return ie.set("width",Math.max(le,0)),Se!==le}function me(Q,N,ne,se){var ie=N.target,he=ne-N.offsetX,ye=se-N.offsetY,Ie=!ie.get("lockMovementX")&&ie.left!==he,Se=!ie.get("lockMovementY")&&ie.top!==ye;return Ie&&ie.set("left",he),Se&&ie.set("top",ye),(Ie||Se)&&w("moving",G(Q,N,ne,se)),Ie||Se}l.scaleCursorStyleHandler=A,l.skewCursorStyleHandler=I,l.scaleSkewCursorStyleHandler=W,l.rotationWithSnapping=z("rotating",B(R)),l.scalingEqually=z("scaling",B(X)),l.scalingX=z("scaling",B(K)),l.scalingY=z("scaling",B(re)),l.scalingYOrSkewingX=te,l.scalingXOrSkewingY=$,l.changeWidth=z("resizing",B(ae)),l.skewHandlerX=L,l.skewHandlerY=J,l.dragHandler=me,l.scaleOrSkewActionName=H,l.rotationStyleHandler=q,l.fireEvent=w,l.wrapWithFixedAnchor=B,l.wrapWithFireEvent=z,l.getLocalPoint=ee,s.controlsUtils=l}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.degreesToRadians,f=s.controlsUtils;function l(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=p,x=m,A;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>b?(A=_,d.scale(1,b/_),x=m*_/b):b>_?(A=b,d.scale(_/b,1),T=p*b/_):A=_,d.lineWidth=1,d.beginPath(),d.arc(T,x,A/2,0,2*Math.PI,!1),d[w](),C&&d.stroke(),d.restore()}function c(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,w=y?"stroke":"fill",C=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=_/2,x=b/2;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(u(v.angle)),d[w+"Rect"](-T,-x,_,b),C&&d.strokeRect(-T,-x,_,b),d.restore()}f.renderCircleControl=l,f.renderSquareControl=c}(t),function(a){var s=a.fabric||(a.fabric={});function u(f){for(var l in f)this[l]=f[l]}s.Control=u,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,l){return l.cursorStyle},getActionName:function(f,l){return l.actionName},getVisibility:function(f,l){var c=f._controlsVisibility;return c&&typeof c[l]<"u"?c[l]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,l){var c=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},l);return c},calcCornerCoords:function(f,l,c,d,p){var m,g,v,_,b=p?this.touchSizeX:this.sizeX,y=p?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var w=Math.atan2(y,b),C=Math.sqrt(b*b+y*y)/2,T=w-s.util.degreesToRadians(f),x=Math.PI/2-w-s.util.degreesToRadians(f);m=C*s.util.cos(T),g=C*s.util.sin(T),v=C*s.util.cos(x),_=C*s.util.sin(x)}else{var A=b&&y?b:l;C=A*.7071067812;var T=s.util.degreesToRadians(45-f);m=v=C*s.util.cos(T),g=_=C*s.util.sin(T)}return{tl:{x:c-_,y:d-v},tr:{x:c+m,y:d-g},bl:{x:c-m,y:d+g},br:{x:c+_,y:d+v}}},render:function(f,l,c,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,l,c,d,p);break;default:s.controlsUtils.renderSquareControl.call(this,f,l,c,d,p)}}}}(t),function(){function a(c,d){var p=c.getAttribute("style"),m=c.getAttribute("offset")||0,g,v,_,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var y=p.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var w=y[b].split(/\s*:\s*/),C=w[0].trim(),T=w[1].trim();C==="stop-color"?g=T:C==="stop-opacity"&&(_=T)}}return g||(g=c.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=c.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*d,{offset:m,color:g.toRgb(),opacity:_}}function s(c){return{x1:c.getAttribute("x1")||0,y1:c.getAttribute("y1")||0,x2:c.getAttribute("x2")||"100%",y2:c.getAttribute("y2")||0}}function u(c){return{x1:c.getAttribute("fx")||c.getAttribute("cx")||"50%",y1:c.getAttribute("fy")||c.getAttribute("cy")||"50%",r1:0,x2:c.getAttribute("cx")||"50%",y2:c.getAttribute("cy")||"50%",r2:c.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(c){c||(c={}),c.coords||(c.coords={});var d,p=this;Object.keys(c).forEach(function(m){p[m]=c[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,d={x1:c.coords.x1||0,y1:c.coords.y1||0,x2:c.coords.x2||0,y2:c.coords.y2||0},this.type==="radial"&&(d.r1=c.coords.r1||0,d.r2=c.coords.r2||0),this.coords=d,this.colorStops=c.colorStops.slice()},addColorStop:function(c){for(var d in c){var p=new e.Color(c[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(c){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,d,c),d},toSVG:function(c,v){var p=f(this.coords,!0),m,g,v=v||{},_,b,y=f(this.colorStops,!0),w=p.r1>p.r2,C=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,x=-this.offsetY,A=!!v.additionalTransform,I=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(B,z){return B.offset-z.offset}),I==="objectBoundingBox"?(T/=c.width,x/=c.height):(T+=c.width/2,x+=c.height/2),c.type==="path"&&this.gradientUnits!=="percentage"&&(T-=c.pathOffset.x,x-=c.pathOffset.y),C[4]-=T,C[5]-=x,b='id="SVGID_'+this.id+'" gradientUnits="'+I+'"',b+=' gradientTransform="'+(A?v.additionalTransform+" ":"")+e.util.matrixToSVG(C)+'" ',this.type==="linear"?_=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",b,' cx="',w?p.x1:p.x2,'" cy="',w?p.y1:p.y2,'" r="',w?p.r1:p.r2,'" fx="',w?p.x2:p.x1,'" fy="',w?p.y2:p.y1,`">
`]),this.type==="radial"){if(w)for(y=y.concat(),y.reverse(),m=0,g=y.length;m<g;m++)y[m].offset=1-y[m].offset;var W=Math.min(p.r1,p.r2);if(W>0){var H=Math.max(p.r1,p.r2),q=W/H;for(m=0,g=y.length;m<g;m++)y[m].offset+=q*(1-y[m].offset)}}for(m=0,g=y.length;m<g;m++){var G=y[m];_.push("<stop ",'offset="',G.offset*100+"%",'" style="stop-color:',G.color,typeof G.opacity<"u"?";stop-opacity: "+G.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(c){var d,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=c.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=c.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof _<"u"&&(v=new e.Color(v).setAlpha(_).toRgba()),d.addColorStop(b,v)}return d}}}),e.util.object.extend(e.Gradient,{fromElement:function(c,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=c.getElementsByTagName("stop"),_,b=c.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=c.getAttribute("gradientTransform")||"",w=[],C,T,x=0,A=0,I;for(c.nodeName==="linearGradient"||c.nodeName==="LINEARGRADIENT"?(_="linear",C=s(c)):(_="radial",C=u(c)),T=v.length;T--;)w.push(a(v[T],g));I=e.parseTransformAttribute(y),l(d,C,m,b),b==="pixels"&&(x=-d.left,A=-d.top);var W=new e.Gradient({id:c.getAttribute("id"),type:_,coords:C,colorStops:w,gradientUnits:b,gradientTransform:I,offsetX:x,offsetY:A});return W}});function l(c,d,p,m){var g,v;Object.keys(d).forEach(function(_){g=d[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(d[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[_]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,u){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){u&&u(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(l,c){f.source=l,u&&u(f,c)},null,this.crossOrigin)}},toObject:function(s){var u=e.Object.NUM_FRACTION_DIGITS,f,l;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),l={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,u),offsetY:a(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,s),l},toSVG:function(s){var u=typeof this.source=="function"?this.source():this.source,f=u.width/s.width,l=u.height/s.height,c=this.offsetX/s.width,d=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,d&&(l+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,c&&(f+=Math.abs(c))),u.src?p=u.src:u.toDataURL&&(p=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+c+'" y="'+d+'" width="'+f+'" height="'+l+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var u in s)this[u]=s[u]},toLive:function(s){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":s.createPattern(u,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),u=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var l in f)this[l]=f[l];this.id=s.Object.__uid++},_parseShadow:function(f){var l=f.trim(),c=s.Shadow.reOffsetsAndBlur.exec(l)||[],d=l.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(c[1],10)||0,offsetY:parseFloat(c[2],10)||0,blur:parseFloat(c[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var l=40,c=40,d=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),m=20,g=new s.Color(this.color);return f.width&&f.height&&(l=u((Math.abs(p.x)+this.blur)/f.width,d)*100+m,c=u((Math.abs(p.y)+this.blur)/f.height,d)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+c+'%" height="'+(100+2*c)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+u(p.x,d)+'" dy="'+u(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},l=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(c){this[c]!==l[c]&&(f[c]=this[c])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,s=e.util.getElementOffset,u=e.util.removeFromArray,f=e.util.toFixed,l=e.util.transformPoint,c=e.util.invertTransform,d=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,b){return typeof v=="string"?e.util.loadImage(v,function(y,w){if(y){var C=new e.Image(y,b);this[g]=C,C.canvas=this}_&&_(y,w)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var b in g)_=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,b=this.overlayImage,y,w,C;for(this.viewportTransform=g,w=0,C=this._objects.length;w<C;w++)y=this._objects[w],y.group||y.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,b=this.viewportTransform.slice(0);g=l(g,c(this.viewportTransform)),b[0]=v,b[3]=v;var y=l(g,b);return b[4]+=_.x-y.x,b[5]+=_.y-y.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,b=c(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y:_},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,b;for(_=0,b=v.length;_<b;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],b=this[v+"Image"],y=this.viewportTransform,w=this[v+"Vpt"];if(!(!_&&!b)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var C=_.gradientTransform||_.patternTransform;C&&g.transform(C[0],C[1],C[2],C[3],C[4],C[5]),g.fill(),g.restore()}b&&(g.save(),w&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=c(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var y=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=b),y},__serializeBgOverlay:function(g,v){var _={},b=this.backgroundImage,y=this.overlayImage,w=this.backgroundColor,C=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(_.background=w.toObject(v)):w&&(_.background=w),C&&C.toObject?C.excludeFromExport||(_.overlay=C.toObject(v)):C&&(_.overlay=C),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,g,v)),y&&!y.excludeFromExport&&(_.overlayImage=this._toObject(y,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,b=v.height||this.height,y,w='viewBox="0 0 '+this.width+" "+this.height+'" ',C=e.Object.NUM_FRACTION_DIGITS;v.viewBox?w='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,w='viewBox="'+f(-y[4]/y[0],C)+" "+f(-y[5]/y[3],C)+" "+f(this.width/y[0],C)+" "+f(this.height/y[3],C)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',b,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var b=g[_+"Color"];if(b&&b.toLive){var y=g[_+"Vpt"],w=g.viewportTransform,C={width:g.width/(y?w[0]:1),height:g.height/(y?w[3]:1)};return b.toSVG(C,{additionalTransform:y?e.util.matrixToSVG(w):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,b,y,w,C,T,x,A,I,W=e.fontPaths,H=[];for(this._objects.forEach(function G(B){H.push(B),B._objects&&B._objects.forEach(G)}),A=0,I=H.length;A<I;A++)if(_=H[A],b=_.fontFamily,!(_.type.indexOf("text")===-1||v[b]||!W[b])&&(v[b]=!0,!!_.styles)){y=_.styles;for(C in y){w=y[C];for(x in w)T=w[x],b=T.fontFamily,!v[b]&&W[b]&&(v[b]=!0)}}for(var q in v)g+=[`		@font-face {
`,"			font-family: '",q,`';
`,"			src: url('",W[q],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,b,y,w=this._objects;for(b=0,y=w.length;b<y;b++)_=w[b],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],b=this.viewportTransform,y=this.width,w=this.height;if(_)if(_.toLive){var C=_.repeat,T=e.util.invertTransform(b),x=this[v+"Vpt"],A=x?e.util.matrixToSVG(T):"";g.push('<rect transform="'+A+" translate(",y/2,",",w/2,')"',' x="',_.offsetX-y/2,'" y="',_.offsetY-w/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?_.source.width:y,'" height="',C==="repeat-x"||C==="no-repeat"?_.source.height:w,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=y.length;_--;)b=y[_],u(this._objects,b),this._objects.unshift(b);else u(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=0;_<y.length;_++)b=y[_],u(this._objects,b),this._objects.push(b);else u(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,x=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=0;b<T.length;b++)y=T[b],w=this._objects.indexOf(y),w>0+x&&(C=w-1,u(this._objects,y),this._objects.splice(C,0,y)),x++;else w=this._objects.indexOf(g),w!==0&&(C=this._findNewLowerIndex(g,w,v),u(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var b,y;if(_)for(b=v,y=v-1;y>=0;--y){var w=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(w){b=y;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,b,y,w,C,T,x=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=T.length;b--;)y=T[b],w=this._objects.indexOf(y),w<this._objects.length-1-x&&(C=w+1,u(this._objects,y),this._objects.splice(C,0,y)),x++;else w=this._objects.indexOf(g),w!==this._objects.length-1&&(C=this._findNewUpperIndex(g,w,v),u(this._objects,g),this._objects.splice(C,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var b,y,w;if(_)for(b=v,y=v+1,w=this._objects.length;y<w;++y){var C=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(C){b=y;break}}else b=v+1;return b},moveTo:function(g,v){return u(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,u=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=e.devicePixelRatio),u.shadowColor=s.color,u.shadowBlur=s.blur*f,u.shadowOffsetX=s.offsetX*f,u.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,u){var f=s.midPointFrom(u);return a.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,f=u.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,u[f-2],u[f-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new e.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new e.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,u,f=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===l.x&&f.y===l.y){var c=this.width/1e3;f=new e.Point(f.x,f.y),l=new e.Point(l.x,l.y),f.x-=c,l.x+=c}for(a.moveTo(f.x,f.y),s=1,u=this._points.length;s<u;s++)this._drawSegment(a,f,l),f=this._points[s],l=this._points[s+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=e.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var u=this.canvas.getZoom(),f=Math.pow(s/u,2),l,c=a.length-1,d=a[0],p=[d],m;for(l=1;l<c-1;l++)m=Math.pow(d.x-a[l].x,2)+Math.pow(d.y-a[l].y,2),m>=f&&(d=a[l],p.push(d));return p.push(a[c]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var u=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,s),u.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,u,f=this.points;for(this._saveAndTransform(a),s=0,u=f.length;s<u;s++)this.dot(a,f[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,u;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,u=this.points.length;s<u;s++){var l=this.points[s],c=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(c.shadow=new e.Shadow(this.shadow)),f.push(c)}var d=new e.Group(f);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new e.Point(a.x,a.y),u=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=u,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],u=0,f=this.sprayChunks.length;u<f;u++)for(var l=this.sprayChunks[u],c=0,d=l.length;c<d;c++){var p=new e.Rect({width:l[c].width,height:l[c].width,left:l[c].x+1,top:l[c].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new e.Group(s);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},u,f,l;for(f=0,l=a.length;f<l;f++)u=a[f].left+""+a[f].top,s[u]||(s[u]=a[f]);var c=[];for(u in s)c.push(s[u]);return c},render:function(a){var s=this.canvas.contextTop,u,f;for(s.fillStyle=this.color,this._saveAndTransform(s),u=0,f=a.length;u<f;u++){var l=a[u];typeof l.opacity<"u"&&(s.globalAlpha=l.opacity),s.fillRect(l.x,l.y,l.width,l.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,u;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,u=this.sprayChunks.length;s<u;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,u,f,l=this.width/2,c;for(c=0;c<this.density;c++){s=e.util.getRandomInt(a.x-l,a.x+l),u=e.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var d=new e.Point(s,u);d.width=f,this.randomOpacity&&(d.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,s=5,u=e.util.createCanvasElement(),f=u.getContext("2d");return u.width=u.height=a+s,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),u=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),s}}),function(){var a=e.util.getPointer,s=e.util.degreesToRadians,u=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,c){c||(c={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,c),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),c,d,p;if(l.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)c=this._objects[m],l.indexOf(c)===-1?d.push(c):p.push(c);l.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,c){var d=l.calcTransformMatrix(),p=e.util.invertTransform(d),m=this.restorePointerVpt(c);return e.util.transformPoint(m,p)},isTargetTransparent:function(l,c,d){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:c,y:d}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),y=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return y}var v=this.contextCache,_=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=_;var y=e.util.isTransparent(v,c,d,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(l){var c=!1;return Array.isArray(this.selectionKey)?c=!!this.selectionKey.find(function(d){return l[d]===!0}):c=l[this.selectionKey],c},_shouldClearSelection:function(l,c){var d=this.getActiveObjects(),p=this._activeObject;return!c||c&&p&&d.length>1&&d.indexOf(c)===-1&&p!==c&&!this._isSelectionKeyPressed(l)||c&&!c.evented||c&&!c.selectable&&p&&p!==c},_shouldCenterTransform:function(l,c,d){if(l){var p;return c==="scale"||c==="scaleX"||c==="scaleY"||c==="resizing"?p=this.centeredScaling||l.centeredScaling:c==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!d:d}},_getOriginFromCorner:function(l,c){var d={x:l.originX,y:l.originY};return c==="ml"||c==="tl"||c==="bl"?d.x="right":(c==="mr"||c==="tr"||c==="br")&&(d.x="left"),c==="tl"||c==="mt"||c==="tr"?d.y="bottom":(c==="bl"||c==="mb"||c==="br")&&(d.y="top"),d},_getActionFromCorner:function(l,c,d,p){if(!c||!l)return"drag";var m=p.controls[c];return m.getActionName(d,m,p)},_setupCurrentTransform:function(l,c,d){if(c){var p=this.getPointer(l),m=c.__corner,g=c.controls[m],v=d&&m?g.getActionHandler(l,c,g):e.controlsUtils.dragHandler,_=this._getActionFromCorner(d,m,l,c),b=this._getOriginFromCorner(c,m),y=l[this.centeredKey],w={target:c,action:_,actionHandler:v,corner:m,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,offsetX:p.x-c.left,offsetY:p.y-c.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(c.angle),width:c.width*c.scaleX,shiftKey:l.shiftKey,altKey:y,original:e.util.saveObjectTransform(c)};this._shouldCenterTransform(c,_,y)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var c=this._groupSelector,d=new e.Point(c.ex,c.ey),p=e.util.transformPoint(d,this.viewportTransform),m=new e.Point(c.ex+c.left,c.ey+c.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),b=Math.max(p.x,g.x),y=Math.max(p.y,g.y),w=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,_,b-v,y-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=w,_+=w,b-=w,y-=w,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,_,b-v,y-_))},findTarget:function(l,c){if(!this.skipTargetFind){var d=!0,p=this.getPointer(l,d),m=this._activeObject,g=this.getActiveObjects(),v,_,b=u(l),y=g.length>1&&!c||g.length===1;if(this.targets=[],y&&m._findTargetCorner(p,b)||g.length>1&&!c&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var w=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&w&&v&&w!==v&&(w=v,this.targets=_),w}},_checkTarget:function(l,c,d){if(c&&c.visible&&c.evented&&c.containsPoint(l))if((this.perPixelTargetFind||c.perPixelTargetFind)&&!c.isEditing){var p=this.isTargetTransparent(c,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,c){for(var d,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,c):c;if(this._checkTarget(v,g,c)){d=l[p],d.subTargetCheck&&d instanceof e.Group&&(m=this._searchPossibleTargets(d._objects,c),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,c){if(this._absolutePointer&&!c)return this._absolutePointer;if(this._pointer&&c)return this._pointer;var d=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,c||(d=this.restorePointerVpt(d));var b=this.getRetinaScaling();return b!==1&&(d.x/=b,d.y/=b),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:d.x*_.width,y:d.y*_.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),c=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),e.util.addClass(d,"upper-canvas "+l),this.wrapperEl.appendChild(d),this._copyCanvasStyle(c,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var c=this.width||l.width,d=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:c+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=c,l.height=d,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,c){c.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,c){var d=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:c,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:c,target:v}),m.push(v))}),l.length>0&&p.length>0?d&&this.fire("selection:updated",{e:c,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:c,selected:m}):l.length>0&&this.fire("selection:cleared",{e:c,deselected:g})},setActiveObject:function(l,c){var d=this.getActiveObjects();return this._setActiveObject(l,c),this._fireSelectionEvents(d,c),this},_setActiveObject:function(l,c){return this._activeObject===l||!this._discardActiveObject(c,l)||l.onSelect({e:c})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,c){var d=this._activeObject;if(d){if(d.onDeselect({e:l,object:c}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var c=this.getActiveObjects(),d=this.getActiveObject();return c.length&&this.fire("before:selection:cleared",{target:d,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(c,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var c=this._activeObject;c&&c._renderControls(l)},_toObject:function(l,c,d){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,c,d);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var c=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return c.forEach(function(p){d[p]=l[p]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(l,c){c&&l.set(c)},_setSVGObject:function(l,c,d){var p=this._realizeGroupTransformOnObject(c);this.callSuper("_setSVGObject",l,c,d),this._unwindGroupTransformOnObject(c,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var a=e.util.addListener,s=e.util.removeListener,u=3,f=2,l=1,c={passive:!1};function d(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,c),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,c),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(e.document,p+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,c),s(e.document,p+"move",this._onMouseMove,c),s(e.document,"touchmove",this._onMouseMove,c)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,c),a(e.document,"touchmove",this._onMouseMove,c),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,c),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,c)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,c),s(e.document,"touchmove",this._onMouseMove,c);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,c),a(m,g+"move",this._onMouseMove,c))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,u)){this.fireRightClick&&this._handleEvent(p,"up",u,b);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!y&&m===this._activeObject)}var w,C;if(m){if(w=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var T=m.controls[w],x=T&&T.getMouseUpHandler(p,m,T);x&&(C=this.getPointer(p),x(p,g,C.x,C.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==w)){var A=g.target&&g.target.controls[g.corner],I=A&&A.getMouseUpHandler(p,m,T);C=C||this.getPointer(p),I&&I(p,g,C.x,C.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,b=this.targets||[],y={e:p,target:_,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(p),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),_&&_.fire("mouse"+m,y);for(var w=0;w<b.length;w++)b[w].fire("mouse"+m,y)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,u)){this.fireRightClick&&this._handleEvent(p,"down",u);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var y=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=y,m===this._activeObject&&(y||!_)){this._setupCurrentTransform(p,m,b);var w=m.controls[y],g=this.getPointer(p),C=w&&w.getMouseDownHandler(p,m,w);C&&C(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,b=g.oldTarget,y,w,C=b!==p,T=g.canvasEvtIn,x=g.canvasEvtOut;C&&(v={e:m,target:p,previousTarget:b},_={e:m,target:b,nextTarget:p}),w=p&&C,y=b&&C,y&&(x&&this.fire(x,_),b.fire(g.evtOut,_)),w&&(T&&this.fire(T,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,b=m.action,y=!1,w=m.actionHandler;w&&(y=w(p,m,v,_)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(u,f){var l=this._activeObject;return l&&this._isSelectionKeyPressed(u)&&f&&f.selectable&&this.selection&&(l!==f||l.type==="activeSelection")&&!f.onSelect({e:u})},_handleGrouping:function(u,f){var l=this._activeObject;l.__corner||f===l&&(f=this.findTarget(u,!0),!f||!f.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(f,u):this._createActiveSelection(f,u))},_updateActiveSelection:function(u,f){var l=this._activeObject,c=l._objects.slice(0);l.contains(u)?(l.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),f)):(l.addWithUpdate(u),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(c,f)},_createActiveSelection:function(u,f){var l=this.getActiveObjects(),c=this._createGroup(u);this._hoveredTarget=c,this._setActiveObject(c,f),this._fireSelectionEvents(l,f)},_createGroup:function(u){var f=this._objects,l=f.indexOf(this._activeObject)<f.indexOf(u),c=l?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(c,{canvas:this})},_groupSelectedObjects:function(u){var f=this._collectObjects(u),l;f.length===1?this.setActiveObject(f[0],u):f.length>1&&(l=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(l,u))},_collectObjects:function(u){for(var f=[],l,c=this._groupSelector.ex,d=this._groupSelector.ey,p=c+this._groupSelector.left,m=d+this._groupSelector.top,g=new e.Point(a(c,p),a(d,m)),v=new e.Point(s(c,p),s(d,m)),_=!this.selectionFullyContained,b=c===p&&d===m,y=this._objects.length;y--&&(l=this._objects[y],!(!(!l||!l.selectable||!l.visible)&&(_&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||_&&l.containsPoint(g,null,!0)||_&&l.containsPoint(v,null,!0))&&(f.push(l),b))););return f.length>1&&(f=f.filter(function(w){return!w.onSelect({e:u})})),f},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",u=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(f,a);return e.util.toDataURL(l,s,u)},toCanvasElement:function(a,s){a=a||1,s=s||{};var u=(s.width||this.width)*a,f=(s.height||this.height)*a,l=this.getZoom(),c=this.width,d=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,_=this.interactive,b=[p,0,0,p,g,v],y=this.enableRetinaScaling,w=e.util.createCanvasElement(),C=this.contextTop;return w.width=u,w.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=u,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=m,this.width=c,this.height=d,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=y,this.contextTop=C,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,s,u){if(a){var f=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),l=this,c=f.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){l.clear(),l._setBgOverlay(f,function(){c?l._enlivenObjects([c],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,f,p,d,s)}):l.__setupCanvas.call(l,f,p,d,s)})},u),this}},__setupCanvas:function(a,s,u,f){var l=this;s.forEach(function(c,d){l.insertAt(c,d)}),this.renderOnAddRemove=u,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,s){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var f=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,u,f),this.__setBgOverlay("overlayImage",a.overlayImage,u,f),this.__setBgOverlay("backgroundColor",a.background,u,f),this.__setBgOverlay("overlayColor",a.overlay,u,f)},__setBgOverlay:function(a,s,u,f){var l=this;if(!s){u[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([s],function(c){l[a]=c[0],u[a]=!0,f&&f()}):this["set"+e.util.string.capitalize(a,!0)](s,function(){u[a]=!0,f&&f()})},_enlivenObjects:function(a,s,u){if(!a||a.length===0){s&&s([]);return}e.util.enlivenObjects(a,function(f){s&&s(f)},null,u)},_toDataURL:function(a,s){this.clone(function(u){s(u.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,u){this.clone(function(f){u(f.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var u=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(u,function(){a&&a(f)})})},cloneWithoutData:function(a){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var u=new e.Canvas(s);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),a&&a(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):a&&a(u)}}),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,c=s.util.string.capitalize,d=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,_=g.width,b=g.height,y=s.maxCacheSideLimit,w=s.minCacheSideLimit;if(_<=y&&b<=y&&_*b<=v)return _<w&&(g.width=w),b<w&&(g.height=w),g;var C=_/b,T=s.util.limitDimsByArea(C,v),x=s.util.capValue,A=x(w,T.x,y),I=x(w,T.y,y);return _>A&&(g.zoomX/=_/A,g.width=A,g.capped=!0),b>I&&(g.zoomY/=b/I,g.height=I,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:_+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),w=s.minCacheSideLimit,C=y.width,T=y.height,x,A,I=y.zoomX,W=y.zoomY,H=C!==this.cacheWidth||T!==this.cacheHeight,q=this.zoomX!==I||this.zoomY!==W,G=H||q,B=0,z=0,ee=!1;if(H){var oe=this._cacheCanvas.width,O=this._cacheCanvas.height,P=C>oe||T>O,F=(C<oe*.9||T<O*.9)&&oe>w&&O>w;ee=P||F,P&&!y.capped&&(C>w||T>w)&&(B=C*.1,z=T*.1)}return this instanceof s.Text&&this.path&&(G=!0,ee=!0,B+=this.getHeightOfLine(0)*this.zoomX,z+=this.getHeightOfLine(0)*this.zoomY),G?(ee?(b.width=Math.ceil(C+B),b.height=Math.ceil(T+z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),x=y.x/2,A=y.y/2,this.cacheTranslationX=Math.round(b.width/2-x)+x,this.cacheTranslationY=Math.round(b.height/2-A)+A,this.cacheWidth=C,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(I,W),this.zoomX=I,this.zoomY=W,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+c(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();v*=b*y,_*=b*y}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",b=this[g]!==v,y=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=s.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),b=this.calcTransformMatrix(),y,w,C;v=v||{},w=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,C=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(_,b),y=s.util.qrDecompose(b),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(d(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?w&&this.drawBordersInGroup(g,y,v):w&&this.drawBorders(g,v),C&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,b,y=_&&_.viewportTransform[0]||1,w=_&&_.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),_&&_._isRetinaScaling()&&(y*=s.devicePixelRatio,w*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(y+w)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*y*b.scaleX,g.shadowOffsetY=v.offsetY*w*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,y=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,y):g.transform(1,0,0,1,b,y),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),y,w=this.canvas.getRetinaScaling(),C=_.x/this.scaleX/w,T=_.y/this.scaleY/w;b.width=C,b.height=T,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(C,0),y.lineTo(C,T),y.lineTo(0,T),y.closePath(),y.translate(C/2,T/2),y.scale(_.zoomX/this.scaleX/w,_.zoomY/this.scaleY/w),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(w*this.scaleX/_.zoomX,w*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):s.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new s.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=s.util,_=v.saveObjectTransform(this),b=this.group,y=this.shadow,w=Math.abs,C=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var T=s.util.createCanvasElement(),x=this.getBoundingRect(!0,!0),A=this.shadow,I,W={x:0,y:0},H,q,G;A&&(H=A.blur,A.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),W.x=2*Math.round(w(A.offsetX)+H)*w(I.scaleX),W.y=2*Math.round(w(A.offsetY)+H)*w(I.scaleY)),q=x.width+W.x,G=x.height+W.y,T.width=Math.ceil(q),T.height=Math.ceil(G);var B=new s.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(B.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(B.width/2,B.height/2),"center","center");var z=this.canvas;B.add(this);var ee=B.toCanvasElement(C||1,g);return this.shadow=y,this.set("canvas",z),b&&(this.group=b),this.set(_).setCoords(),B._objects=[],B.dispose(),B=null,ee},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(_=s.util.rotatePoint(_,b,d(-this.angle))),{x:_.x-b.x,y:_.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),u(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,_,b){var y=s[g];v=f(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(w){typeof w[0]<"u"&&(v.fill=w[0]),typeof w[1]<"u"&&(v.stroke=w[1]),s.util.enlivenObjectEnlivables(v,v,function(){var C=b?new y(v[b],v):new y(v);_&&_(C)})})},s.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,l,c,d,p){var m=f.x,g=f.y,v,_,b;return typeof l=="string"?l=s[l]:l-=.5,typeof d=="string"?d=s[d]:d-=.5,v=d-l,typeof c=="string"?c=u[c]:c-=.5,typeof p=="string"?p=u[p]:p-=.5,_=p-c,(v||_)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+_*b.y),new e.Point(m,g)},translateToCenterPoint:function(f,l,c){var d=this.translateToGivenOrigin(f,l,c,"center","center");return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},translateToOriginPoint:function(f,l,c){var d=this.translateToGivenOrigin(f,"center","center",l,c);return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,l){var c=this.getCenterPoint();return this.translateToOriginPoint(c,f,l)},toLocalPoint:function(f,l,c){var d=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof c<"u"?p=this.translateToGivenOrigin(d,"center","center",l,c):p=new e.Point(this.left,this.top),m=new e.Point(f.x,f.y),this.angle&&(m=e.util.rotatePoint(m,d,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,l,c){var d=this.translateToCenterPoint(f,l,c),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var l=a(this.angle),c=this.getScaledWidth(),d=e.util.cos(l)*c,p=e.util.sin(l)*c,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof f=="string"?g=s[f]:g=f-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(c){return[new e.Point(c.tl.x,c.tl.y),new e.Point(c.tr.x,c.tr.y),new e.Point(c.br.x,c.br.y),new e.Point(c.bl.x,c.bl.y)]}var s=e.util,u=s.degreesToRadians,f=s.multiplyTransformMatrices,l=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(c,d){return d?c?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),c?this.aCoords:this.lineCoords)},getCoords:function(c,d){return a(this._getCoords(c,d))},intersectsWithRect:function(c,d,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,c,d);return v.status==="Intersection"},intersectsWithObject:function(c,d,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(d,p),c.getCoords(d,p));return m.status==="Intersection"||c.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(c,d,p)},isContainedWithinObject:function(c,d,p){for(var m=this.getCoords(d,p),g=d?c.aCoords:c.lineCoords,v=0,_=c._getImageLines(g);v<4;v++)if(!c.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(c,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=c.x&&g.left+g.width<=d.x&&g.top>=c.y&&g.top+g.height<=d.y},containsPoint:function(c,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(c,v);return _!==0&&_%2===1},isOnScreen:function(c){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,c);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,c)?!0:this._containsCenterOfCanvas(d,p,c)},_containsCenterOfCanvas:function(c,d,p){var m={x:(c.x+d.x)/2,y:(c.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(c){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,c))return!0;var m=this.getCoords(!0,c).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,c)},_getImageLines:function(c){var d={topline:{o:c.tl,d:c.tr},rightline:{o:c.tr,d:c.br},bottomline:{o:c.br,d:c.bl},leftline:{o:c.bl,d:c.tl}};return d},_findCrossPoints:function(c,d){var p,m,g,v,_,b=0,y;for(var w in d)if(y=d[w],!(y.o.y<c.y&&y.d.y<c.y)&&!(y.o.y>=c.y&&y.d.y>=c.y)&&(y.o.x===y.d.x&&y.o.x>=c.x?_=y.o.x:(p=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),g=c.y-p*c.x,v=y.o.y-m*y.o.x,_=-(g-v)/(p-m)),_>=c.x&&(b+=1),b===2))break;return b},getBoundingRect:function(c,d){var p=this.getCoords(c,d);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(c){return Math.abs(c)<this.minScaleLimit?c<0?-this.minScaleLimit:this.minScaleLimit:c===0?1e-4:c},scale:function(c){return this._set("scaleX",c),this._set("scaleY",c),this.setCoords()},scaleToWidth:function(c,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(c/this.width/p)},scaleToHeight:function(c,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(c/this.height/p)},calcLineCoords:function(){var c=this.getViewportTransform(),d=this.padding,p=u(this.angle),m=s.cos(p),g=s.sin(p),v=m*d,_=g*d,b=v+_,y=v-_,w=this.calcACoords(),C={tl:l(w.tl,c),tr:l(w.tr,c),bl:l(w.bl,c),br:l(w.br,c)};return d&&(C.tl.x-=y,C.tl.y-=b,C.tr.x+=b,C.tr.y-=y,C.bl.x-=b,C.bl.y+=y,C.br.x+=y,C.br.y+=b),C},calcOCoords:function(){var c=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,d),g=f(m,c),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(b,y,w){_[y]=b.positionHandler(v,g,w)}),_},calcACoords:function(){var c=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=f(d,c),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(c){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),c?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var c=this.getCenterPoint();return[1,0,0,1,c.x,c.y]},transformMatrixKey:function(c){var d="_",p="";return!c&&this.group&&(p=this.group.transformMatrixKey(c)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(c){var d=this.calcOwnMatrix();if(c||!this.group)return d;var p=this.transformMatrixKey(c),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=f(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var c=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===c)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=c,d.value=s.composeMatrix(m),d.value},_getNonTransformedDimensions:function(){var c=this.strokeWidth,d=this.width+c,p=this.height+c;return{x:d,y:p}},_getTransformedDimensions:function(c,d){typeof c>"u"&&(c=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,v=c===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:c,skewY:d});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(c,d){return this.strokeUniform?{x:c+this.strokeWidth,y:d+this.strokeWidth}:{x:c,y:d}},_calculateCurrentDimensions:function(){var c=this.getViewportTransform(),d=this._getTransformedDimensions(),p=l(d,c,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(u,f){if(f){if(f.toLive)return u+": url(#SVGID_"+f.id+"); ";var l=new e.Color(f),c=u+": "+l.toRgb()+"; ",d=l.getAlpha();return d!==1&&(c+=u+"-opacity: "+d.toString()+"; "),c}else return u+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(u){var f=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",c=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=u?"":this.getSvgFilter(),y=a("fill",this.fill),w=a("stroke",this.stroke);return[w,"stroke-width: ",l,"; ","stroke-dasharray: ",c,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",y,"fill-rule: ",f,"; ","opacity: ",v,";",b,_].join("")},getSvgSpanStyles:function(u,f){var l="; ",d=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+l:"",c=u.strokeWidth?"stroke-width: "+u.strokeWidth+l:"",d=d,p=u.fontSize?"font-size: "+u.fontSize+"px"+l:"",m=u.fontStyle?"font-style: "+u.fontStyle+l:"",g=u.fontWeight?"font-weight: "+u.fontWeight+l:"",v=u.fill?a("fill",u.fill):"",_=u.stroke?a("stroke",u.stroke):"",b=this.getSvgTextDecoration(u),y=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[_,c,d,p,m,g,b,v,y,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(f){return u[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,f){var l=u?this.calcTransformMatrix():this.calcOwnMatrix(),c='transform="'+e.util.matrixToSVG(l);return c+(f||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,f){f=f||{};var l=f.reviver,c=f.additionalTransform||"",d=[this.getSvgTransform(!0,c),this.getSvgCommons()].join(""),p=u.indexOf("COMMON_PARTS");return u[p]=d,l?l(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,f){f=f||{};var l=f.noStyle,c=f.reviver,d=l?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,b=this.fill,y=this.shadow,w,C=[],T,x=u.indexOf("COMMON_PARTS"),A=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(c)+`</clipPath>
`),v&&C.push("<g ",p,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),w=[d,g,l?"":this.addPaintOrder()," ",A?'transform="'+A+'" ':""].join(""),u[x]=w,b&&b.toLive&&C.push(b.toSVG(this)),_&&_.toLive&&C.push(_.toSVG(this)),y&&C.push(y.toSVG(this)),m&&C.push(T),C.push(u.join("")),C.push(`</g>
`),v&&C.push(`</g>
`),c?c(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,s="stateProperties";function u(l,c,d){var p={},m=!0;d.forEach(function(g){p[g]=l[g]}),a(l[c],p,m)}function f(l,c,d){if(l===c)return!0;if(Array.isArray(l)){if(!Array.isArray(c)||l.length!==c.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!f(l[p],c[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!c||typeof c!="object"||!d&&g.length!==Object.keys(c).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(l[v],c[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||s;var c="_"+l;return Object.keys(this[c]).length<this[l].length?!0:!f(this[c],this,!0)},saveState:function(l){var c=l&&l.propertySet||s,d="_"+c;return this[d]?(u(this,d,this[c]),l&&l.stateProperties&&u(this,d,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var c=l.propertySet||s;return l.propertySet=c,this["_"+c]={},this.saveState(l),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,l=s.y,c,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(u?this.oCoords[g].touchCorner:this.oCoords[g].corner),c=this._findCrossPoints({x:f,y:l},d),c!==0&&c%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var u in this.controls)s(this.controls[u],u,this)},_setCornerCoords:function(){var s=this.oCoords;for(var u in s){var f=this.controls[u];s[u].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[u].x,s[u].y,!1),s[u].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[u].x,s[u].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var u=this.getCenterPoint(),f=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return s.translate(u.x,u.y),s.scale(1/l[0],1/l[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,u){u=u||{};var f=this._calculateCurrentDimensions(),l=this.borderScaleFactor,c=f.x+l,d=f.y+l,p=typeof u.hasControls<"u"?u.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(s,u.borderDashArray||this.borderDashArray),s.strokeRect(-c/2,-d/2,c,d),p&&(s.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,s.moveTo(g.x*c,g.y*d),s.lineTo(g.x*c+g.offsetX,g.y*d+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,u,f){f=f||{};var l=e.util.sizeAfterTransform(this.width,this.height,u),c=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=l.x+c*(d?this.canvas.getZoom():u.scaleX)+p,g=l.y+c*(d?this.canvas.getZoom():u.scaleY)+p;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,u){u=u||{},s.save();var f=this.canvas.getRetinaScaling(),l,c;return s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){c=m.oCoords[p],d.getVisibility(m,p)&&(l&&(c=e.util.transformPoint(c,l)),d.render(s,c.x,c.y,u,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=u,this},setControlsVisibility:function(s){s||(s={});for(var u in s)this.setControlVisible(u,s[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var u=function(){},f=s.onComplete||u,l=s.onChange||u,c=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){a.set("left",d),c.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,s){s=s||{};var u=function(){},f=s.onComplete||u,l=s.onChange||u,c=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){a.set("top",d),c.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,s){s=s||{};var u=function(){},f=s.onComplete||u,l=s.onChange||u,c=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){a.set("opacity",d),c.requestRenderAll(),l()},onComplete:function(){c.remove(a),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,u,f=[];for(s in arguments[0])a.push(s);for(var l=0,c=a.length;l<c;l++)s=a[l],u=l!==c-1,f.push(this._animate(s,arguments[0][s],arguments[1],u));return f}else return this._animate.apply(this,arguments)},_animate:function(a,s,u,f){var l=this,c;s=s.toString(),u?u=e.util.object.clone(u):u={},~a.indexOf(".")&&(c=a.split("."));var d=l.colorProperties.indexOf(a)>-1||c&&l.colorProperties.indexOf(c[1])>-1,p=c?this.get(c[0])[c[1]]:this.get(a);"from"in u||(u.from=p),d||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:u.from,endValue:s,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(g,v,_){return u.abort.call(l,g,v,_)},onChange:function(g,v,_){c?l[c[0]][c[1]]=g:l.set(a,g),!f&&u.onChange&&u.onChange(g,v,_)},onComplete:function(g,v,_){f||(l.setCoords(),u.onComplete&&u.onComplete(g,v,_))}};return d?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof l[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return u(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,v=d*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(d,p,m){m=m||{};var g=s.parseAttributes(d,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,u(g,m)))},s.Line.fromObject=function(d,p){function m(v){delete v.points,p&&p(v)}var g=f(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],s.Object._fromObject("Line",g,m,"points")};function c(d,p){var m=d.origin,g=d.axis1,v=d.axis2,_=d.dimension,b=p.nearest,y=p.center,w=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case y:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case w:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,c){return this.callSuper("_set",l,c),l==="radius"&&this.setRadius(c),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,c=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+c+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=u(this.startAngle),g=u(this.endAngle),v=this.radius,_=s.util.cos(m)*v,b=s.util.sin(m)*v,y=s.util.cos(g)*v,w=s.util.sin(g)*v,C=p>180?"1":"0";l=['<path d="M '+_+" "+b," A "+v+" "+v," 0 ",+C+" 1"," "+y+" "+w,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(l,c){var d=s.parseAttributes(l,s.Circle.ATTRIBUTE_NAMES);if(!f(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,c(new s.Circle(d))};function f(l){return"radius"in l&&l.radius>=0}s.Circle.fromObject=function(l,c){s.Object._fromObject("Circle",l,c)}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(u){var f=this.width/2,l=this.height/2;u.beginPath(),u.moveTo(-f,l),u.lineTo(0,-l),u.lineTo(f,l),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,f=this.height/2,l=[-u+" "+f,"0 "+-f,u+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),s.Triangle.fromObject=function(u,f){return s.Object._fromObject("Triangle",u,f)}}(t),function(a){var s=a.fabric||(a.fabric={}),u=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,l){switch(this.callSuper("_set",f,l),f){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,u,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,l){var c=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);c.left=(c.left||0)-c.rx,c.top=(c.top||0)-c.ry,l(new s.Ellipse(c))},s.Ellipse.fromObject=function(f,l){s.Object._fromObject("Ellipse",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var l=this.rx?Math.min(this.rx,this.width/2):0,c=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||c!==0,_=1-.5522847498;f.beginPath(),f.moveTo(m+l,g),f.lineTo(m+d-l,g),v&&f.bezierCurveTo(m+d-_*l,g,m+d,g+_*c,m+d,g+c),f.lineTo(m+d,g+p-c),v&&f.bezierCurveTo(m+d,g+p-_*c,m+d-_*l,g+p,m+d-l,g+p),f.lineTo(m+l,g+p),v&&f.bezierCurveTo(m+_*l,g+p,m,g+p-_*c,m,g+p-c),f.lineTo(m,g+c),v&&f.bezierCurveTo(m,g+_*c,m+_*l,g,m+l,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,l,c){if(!f)return l(null);c=c||{};var d=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new s.Rect(u(c?s.util.object.clone(c):{},d));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},s.Rect.fromObject=function(f,l){return s.Object._fromObject("Rect",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.util.array.min,l=s.util.array.max,c=s.util.toFixed,d=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=l(p,"x")||0,_=l(p,"y")||0,b=v-m,y=_-g;return{left:m,top:g,width:b,height:y}},toObject:function(p){return u(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)p.push(c(this.points[_].x-m,v),",",c(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](_,u(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,l){s.Object._fromObject("Polygon",f,l,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.array.min,f=s.util.array.max,l=s.util.object.extend,c=s.util.object.clone,d=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=c(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,b=0,y=0,w=0,C=-this.pathOffset.x,T=-this.pathOffset.y;p.beginPath();for(var x=0,A=this.path.length;x<A;++x)switch(m=this.path[x],m[0]){case"L":_=m[1],b=m[2],p.lineTo(_+C,b+T);break;case"M":_=m[1],b=m[2],g=_,v=b,p.moveTo(_+C,b+T);break;case"C":_=m[5],b=m[6],y=m[3],w=m[4],p.bezierCurveTo(m[1]+C,m[2]+T,y+C,w+T,_+C,b+T);break;case"Q":p.quadraticCurveTo(m[1]+C,m[2]+T,m[3]+C,m[4]+T),_=m[3],b=m[4],y=m[1],w=m[2];break;case"z":case"Z":_=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,b=0,y=0,w,C=0,T=this.path.length;C<T;++C){switch(g=this.path[C],g[0]){case"L":b=g[1],y=g[2],w=[];break;case"M":b=g[1],y=g[2],v=b,_=y,w=[];break;case"C":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],y=g[6];break;case"Q":w=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],y=g[4];break;case"z":case"Z":b=v,y=_;break}w.forEach(function(G){p.push(G.x),m.push(G.y)}),p.push(b),m.push(y)}var x=u(p)||0,A=u(m)||0,I=f(p)||0,W=f(m)||0,H=I-x,q=W-A;return{left:x,top:A,width:H,height:q}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){_.clipPath=b[0],m&&m(_)}):m&&m(_)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,l(v,g)))}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,c,d){c=c||{},this._objects=[],d&&this.callSuper("initialize",c),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=c&&c.centerPoint;c.originX!==void 0&&(this.originX=c.originX),c.originY!==void 0&&(this.originY=c.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete c.centerPoint,this.callSuper("initialize",c)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,c=this._objects.length;c--;)this._objects[c].setCoords(l)},_updateObjectsCoords:function(c){for(var c=c||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],c)},_updateObjectCoords:function(l,c){var d=l.left,p=l.top,m=!0;l.set({left:d-c.x,top:p-c.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var c=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),l&&(c&&s.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,c?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,c){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(l,c);if(l==="canvas")for(;d--;)this._objects[d]._set(l,c);s.Object.prototype._set.call(this,l,c)},toObject:function(l){var c=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=c;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,l);return p.objects=d,p},toDatalessObject:function(l){var c,d=this.sourcePath;if(d)c=d;else{var p=this.includeDefaultValues;c=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(l);return g.includeDefaultValues=v,_})}var m=s.Object.prototype.toDatalessObject.call(this,l);return m.objects=c,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=s.Object.prototype.shouldCache.call(this);if(l){for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var c=0,d=this._objects.length;c<d;c++)this._objects[c].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(c){s.util.addTransformToObject(c,l),delete c.group,c.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,c=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new s.ActiveSelection([]);return p.set(d),p.type="activeSelection",c.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,c.add(m)}),p.canvas=c,p._objects=l,c._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(c){c.setCoords(l)}),this},_calcBounds:function(l){for(var c=[],d=[],p,m,g,v=["tr","br","bl","tl"],_=0,b=this._objects.length,y,w=v.length;_<b;++_){for(p=this._objects[_],g=p.calcACoords(),y=0;y<w;y++)m=v[y],c.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(c,d,l)},_getBounds:function(l,c,d){var p=new s.Point(u(l),u(c)),m=new s.Point(f(l),f(c)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,b=m.y-p.y||0;this.width=_,this.height=b,d||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var c=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)c.push("		",this._objects[d].toSVG(l));return c.push(`</g>
`),c},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",c=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),c].join("")},toClipPathSVG:function(l){for(var c=[],d=0,p=this._objects.length;d<p;d++)c.push("	",this._objects[d].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(c,{reviver:l})}}),s.Group.fromObject=function(l,c){var d=l.objects,p=s.util.object.clone(l,!0);if(delete p.objects,typeof d=="string"){s.loadSVGFromURL(d,function(m){var g=s.util.groupSVGElements(m,l,d),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(_){g.clipPath=_[0],c&&c(g)}):c&&c(g)});return}s.util.enlivenObjects(d,function(m){s.util.enlivenObjectEnlivables(l,p,function(){c&&c(new s.Group(m,p,!0))})})})}(t),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(u,f){f=f||{},this._objects=u||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),l=new s.Group([]);if(delete f.type,l.set(f),u.forEach(function(d){d.canvas.remove(d),d.group=l}),l._objects=u,!this.canvas)return l;var c=this.canvas;return c.add(l),c._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,f,l){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,f),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var c=0,d=this._objects.length;c<d;c++)this._objects[c]._renderControls(u,l);u.restore()}}),s.ActiveSelection.fromObject=function(u,f){s.util.enlivenObjects(u.objects,function(l){delete u.objects,f&&f(new s.ActiveSelection(l,u,!0))})})}(t),function(a){var s=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(u,f)},getElement:function(){return this._element||{}},setElement:function(u,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,l=this.height/2;u.beginPath(),u.moveTo(-f,-l),u.lineTo(f,-l),u.lineTo(f,l),u.lineTo(-f,l),u.lineTo(-f,-l),u.closePath()}},toObject:function(u){var f=[];this.filters.forEach(function(c){c&&f.push(c.toObject())});var l=s(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],f=[],l,c=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!c)return[];if(this.hasCrop()){var v=e.Object.__uid++;u.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',c.width||c.naturalWidth,'" height="',c.height||c.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,l=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?u=u.concat(l,f):u=u.concat(f,l),u},getSrc:function(u){var f=u?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(u,f,l){return e.util.loadImage(u,function(c,d){this.setElement(c,l),this._setWidthHeight(),f&&f(this,d)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,f=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),c=l.scaleX,d=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||c>f&&d>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=c,this._lastScaleY=d;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=u.scaleX=c,this._lastScaleY=u.scaleY=d,e.filterBackend.applyFilters([u],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,l=f.naturalWidth||f.width,c=f.naturalHeight||f.height;if(this._element===this._originalElement){var d=e.util.createCanvasElement();d.width=l,d.height=c,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,c),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(u,this._originalElement,l,c,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var f=this._element;if(f){var l=this._filterScalingX,c=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),b=f.naturalWidth||f.width,y=f.naturalHeight||f.height,w=v*l,C=_*c,T=m(d*l,b-w),x=m(p*c,y-C),A=-d/2,I=-p/2,W=m(d,b/l-v),H=m(p,y/c-_);f&&u.drawImage(f,w,C,T,x,A,I,W,H)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,f){this.setElement(e.util.getById(u),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,f){u&&u.length?e.util.enlivenObjects(u,function(l){f&&f(l)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(u){u||(u={});var f=this.getElement();this.width=u.width||f.naturalWidth||f.width||0,this.height=u.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var u=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,l=this._element.height,c=1,d=1,p=0,m=0,g=0,v=0,_,b=this.width,y=this.height,w={width:b,height:y};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(c=d=e.util.findScaleToFit(this._element,w),_=(b-f*c)/2,u.alignX==="Min"&&(p=-_),u.alignX==="Max"&&(p=_),_=(y-l*d)/2,u.alignY==="Min"&&(m=-_),u.alignY==="Max"&&(m=_)),u.meetOrSlice==="slice"&&(c=d=e.util.findScaleToCover(this._element,w),_=f-b/c,u.alignX==="Mid"&&(g=_/2),u.alignX==="Max"&&(g=_),_=l-y/d,u.alignY==="Mid"&&(v=_/2),u.alignY==="Max"&&(v=_),f=b/c,l=y/d)):(c=b/f,d=y/l),{width:f,height:l,scaleX:c,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(u,f){var l=e.util.object.clone(u);e.util.loadImage(l.src,function(c,d){if(d){f&&f(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var g=new e.Image(c,l);f(g,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(u,f,l){e.util.loadImage(u,function(c,d){f&&f(new e.Image(c,l),d)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(u,f,l){var c=e.parseAttributes(u,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(c["xlink:href"],f,s(l?e.util.object.clone(l):{},c))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},u=a.onComplete||s,f=a.onChange||s,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(c){l.rotate(c),f()},onComplete:function(){l.setCoords(),u()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(u,f){var l="precision "+f+` float;
void main(){}`,c=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(c,l),u.compileShader(c),!!u.getShaderParameter(c,u.COMPILE_STATUS)}e.isWebglSupported=function(u){if(e.isLikelyNode)return!1;u=u||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),l=f.getContext("webgl")||f.getContext("experimental-webgl"),c=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),c=e.maxTextureSize>=u;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,d[p])){e.webGlPrecision=d[p];break}}return this.isSupported=c,c},e.WebglFilterBackend=s;function s(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(u,f){this.dispose(),this.createWebGLCanvas(u,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,f)},chooseFastestCopyGLTo2DMethod:function(u,f){var l=typeof window.performance<"u",c;try{new ImageData(1,1),c=!0}catch{c=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&c&&d&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(u*f*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=h;return}var v={imageBuffer:g,destinationWidth:u,destinationHeight:f,targetCanvas:m},_,b,y;m.width=u,m.height=f,_=window.performance.now(),o.call(v,this.gl,v),b=window.performance.now()-_,_=window.performance.now(),h.call(v,this.gl,v),y=window.performance.now()-_,b>y?(this.imageBuffer=g,this.copyGLTo2D=h):this.copyGLTo2D=o}},createWebGLCanvas:function(u,f){var l=e.util.createCanvasElement();l.width=u,l.height=f;var c={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=l.getContext("webgl",c);d||(d=l.getContext("experimental-webgl",c)),d&&(d.clearColor(0,0,0,0),this.canvas=l,this.gl=d)},applyFilters:function(u,f,l,c,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:l,sourceHeight:c,destinationWidth:l,destinationHeight:c,context:m,sourceTexture:this.createTexture(m,l,c,!g&&f),targetTexture:this.createTexture(m,l,c),originalTexture:g||this.createTexture(m,l,c,!g&&f),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),u.forEach(function(b){b&&b.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,f,l,c,d){var p=u.createTexture();return u.bindTexture(u.TEXTURE_2D,p),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,d||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,d||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),c?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,c):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,f,l,0,u.RGBA,u.UNSIGNED_BYTE,null),p},getCachedTexture:function(u,f){if(this.textureCache[u])return this.textureCache[u];var l=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[u]=l,l},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,f={renderer:"",vendor:""};if(!u)return f;var l=u.getExtension("WEBGL_debug_renderer_info");if(l){var c=u.getParameter(l.UNMASKED_RENDERER_WEBGL),d=u.getParameter(l.UNMASKED_VENDOR_WEBGL);c&&(f.renderer=c.toLowerCase()),d&&(f.vendor=d.toLowerCase())}return this.gpuInfo=f,f}}}();function r(a){var s=a.targetCanvas,u=s.width,f=s.height,l=a.destinationWidth,c=a.destinationHeight;(u!==l||f!==c)&&(s.width=l,s.height=c)}function o(a,s){var u=a.canvas,f=s.targetCanvas,l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1);var c=u.height-f.height;l.drawImage(u,0,c,f.width,f.height,0,0,f.width,f.height)}function h(a,s){var u=s.targetCanvas,f=u.getContext("2d"),l=s.destinationWidth,c=s.destinationHeight,d=l*c*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);a.readPixels(0,0,l,c,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,c);f.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(u,f,l,c,d){var p=d.getContext("2d");p.drawImage(f,0,0,l,c);var m=p.getImageData(0,0,l,c),g=p.getImageData(0,0,l,c),v={sourceWidth:l,sourceHeight:c,imageData:m,originalEl:f,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return u.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==c)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,u){s=s||this.fragmentSource,u=u||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,u),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,s),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var c=a.createProgram();if(a.attachShader(c,f),a.attachShader(c,l),a.linkProgram(c),!a.getProgramParameter(c,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(c));var d=this.getAttributeLocations(a,c),p=this.getUniformLocations(a,c)||{};return p.uStepW=a.getUniformLocation(c,"uStepW"),p.uStepH=a.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,u){var f=s.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,u,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,u,f;a.passes>1?(u=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==u||a.sourceHeight!==f)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,u,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var u=s[a].length;u--;)if(this[a][u]!==s[a][u])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,u=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(u.program),this.sendAttributeData(s,u.attributeLocations,a.aPosition),s.uniform1f(u.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(u.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,u.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,u){a.activeTexture(u),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,s){var u=new e.Image.filters[a.type](a);return s&&s(u),u},function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.ColorMatrix=f(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var c=l.imageData,d=c.data,p=d.length,m=this.matrix,g,v,_,b,y,w=this.colorsOnly;for(y=0;y<p;y+=4)g=d[y],v=d[y+1],_=d[y+2],w?(d[y]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(b=d[y+3],d[y]=g*m[0]+v*m[1]+_*m[2]+b*m[3]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+b*m[8]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+b*m[13]+m[14]*255,d[y+3]=g*m[15]+v*m[16]+_*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,c){return{uColorMatrix:l.getUniformLocation(c,"uColorMatrix"),uConstants:l.getUniformLocation(c,"uConstants")}},sendUniformData:function(l,c){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];l.uniformMatrix4fv(c.uColorMatrix,!1,p),l.uniform4fv(c.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Brightness=f(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var c=l.imageData,d=c.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(l,c){return{uBrightness:l.getUniformLocation(c,"uBrightness")}},sendUniformData:function(l,c){l.uniform1f(c.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Convolute=l(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(c){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return c.programCache.hasOwnProperty(p)||(c.programCache[p]=this.createProgram(c.context,m)),c.programCache[p]},applyTo2d:function(c){var d=c.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=d.width,b=d.height,y=c.ctx.createImageData(_,b),w=y.data,C=this.opaque?1:0,T,x,A,I,W,H,q,G,B,z,ee,oe,O;for(ee=0;ee<b;ee++)for(z=0;z<_;z++){for(W=(ee*_+z)*4,T=0,x=0,A=0,I=0,O=0;O<g;O++)for(oe=0;oe<g;oe++)q=ee+O-v,H=z+oe-v,!(q<0||q>=b||H<0||H>=_)&&(G=(q*_+H)*4,B=m[O*g+oe],T+=p[G]*B,x+=p[G+1]*B,A+=p[G+2]*B,C||(I+=p[G+3]*B));w[W]=T,w[W+1]=x,w[W+2]=A,C?w[W+3]=p[W+3]:w[W+3]=I}c.imageData=y},getUniformLocations:function(c,d){return{uMatrix:c.getUniformLocation(d,"uMatrix"),uOpaque:c.getUniformLocation(d,"uOpaque"),uHalfSize:c.getUniformLocation(d,"uHalfSize"),uSize:c.getUniformLocation(d,"uSize")}},sendUniformData:function(c,d){c.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Grayscale=f(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var c=l.imageData,d=c.data,p,m=d.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(l){var c=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(c)){var d=this.fragmentSource[this.mode];l.programCache[c]=this.createProgram(l.context,d)}return l.programCache[c]},getUniformLocations:function(l,c){return{uMode:l.getUniformLocation(c,"uMode")}},sendUniformData:function(l,c){var d=1;l.uniform1i(c.uMode,d)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Invert=f(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var c=l.imageData,d=c.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,c){return{uInvert:l.getUniformLocation(c,"uInvert")}},sendUniformData:function(l,c){l.uniform1i(c.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Noise=l(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(c){if(this.noise!==0){var d=c.imageData,p=d.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(c,d){return{uNoise:c.getUniformLocation(d,"uNoise"),uSeed:c.getUniformLocation(d,"uSeed")}},sendUniformData:function(c,d){c.uniform1f(d.uNoise,this.noise/255),c.uniform1f(d.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Pixelate=f(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var c=l.imageData,d=c.data,p=c.height,m=c.width,g,v,_,b,y,w,C,T,x,A,I;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,b=d[g],y=d[g+1],w=d[g+2],C=d[g+3],A=Math.min(v+this.blocksize,p),I=Math.min(_+this.blocksize,m),T=v;T<A;T++)for(x=_;x<I;x++)g=T*4*m+x*4,d[g]=b,d[g+1]=y,d[g+2]=w,d[g+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,c){return{uBlocksize:l.getUniformLocation(c,"uBlocksize"),uStepW:l.getUniformLocation(c,"uStepW"),uStepH:l.getUniformLocation(c,"uStepH")}},sendUniformData:function(l,c){l.uniform1f(c.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.RemoveColor=l(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(c){var d=c.imageData,p=d.data,m,g=this.distance*255,v,_,b,y=new s.Color(this.color).getSource(),w=[y[0]-g,y[1]-g,y[2]-g],C=[y[0]+g,y[1]+g,y[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],b=p[m+2],v>w[0]&&_>w[1]&&b>w[2]&&v<C[0]&&_<C[1]&&b<C[2]&&(p[m+3]=0)},getUniformLocations:function(c,d){return{uLow:c.getUniformLocation(d,"uLow"),uHigh:c.getUniformLocation(d,"uHigh")}},sendUniformData:function(c,d){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];c.uniform4fv(d.uLow,g),c.uniform4fv(d.uHigh,v)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var c in l)u[c]=f(u.ColorMatrix,{type:c,matrix:l[c],mainParameter:!1,colorsOnly:!0}),s.Image.filters[c].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,u=s.Image.filters,f=s.util.createClass;u.BlendColor=f(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var c=this.type+"_"+this.mode,d;return l.programCache.hasOwnProperty(c)||(d=this.buildSource(this.mode),l.programCache[c]=this.createProgram(l.context,d)),l.programCache[c]},applyTo2d:function(l){var c=l.imageData,d=c.data,p=d.length,m,g,v,_,b,y,w,C=1-this.alpha;w=new s.Color(this.color).getSource(),m=w[0]*this.alpha,g=w[1]*this.alpha,v=w[2]*this.alpha;for(var T=0;T<p;T+=4)switch(_=d[T],b=d[T+1],y=d[T+2],this.mode){case"multiply":d[T]=_*m/255,d[T+1]=b*g/255,d[T+2]=y*v/255;break;case"screen":d[T]=255-(255-_)*(255-m)/255,d[T+1]=255-(255-b)*(255-g)/255,d[T+2]=255-(255-y)*(255-v)/255;break;case"add":d[T]=_+m,d[T+1]=b+g,d[T+2]=y+v;break;case"diff":case"difference":d[T]=Math.abs(_-m),d[T+1]=Math.abs(b-g),d[T+2]=Math.abs(y-v);break;case"subtract":d[T]=_-m,d[T+1]=b-g,d[T+2]=y-v;break;case"darken":d[T]=Math.min(_,m),d[T+1]=Math.min(b,g),d[T+2]=Math.min(y,v);break;case"lighten":d[T]=Math.max(_,m),d[T+1]=Math.max(b,g),d[T+2]=Math.max(y,v);break;case"overlay":d[T]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,d[T+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,d[T+2]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255;break;case"exclusion":d[T]=m+_-2*m*_/255,d[T+1]=g+b-2*g*b/255,d[T+2]=v+y-2*v*y/255;break;case"tint":d[T]=m+_*C,d[T+1]=g+b*C,d[T+2]=v+y*C}},getUniformLocations:function(l,c){return{uColor:l.getUniformLocation(c,"uColor")}},sendUniformData:function(l,c){var d=new s.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,l.uniform4fv(c.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,u=s.Image.filters,f=s.util.createClass;u.BlendImage=f(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var c=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(c)||(l.programCache[c]=this.createProgram(l.context,d)),l.programCache[c]},applyToWebGL:function(l){var c=l.context,d=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(c,d,c.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(c,c.TEXTURE1)},createTexture:function(l,c){return l.getCachedTexture(c.cacheKey,c._element)},calculateMatrix:function(){var l=this.image,c=l._element.width,d=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/c,-l.top/d,1]},applyTo2d:function(l){var c=l.imageData,d=l.filterBackend.resources,p=c.data,m=p.length,g=c.width,v=c.height,_,b,y,w,C,T,x,A,I,W,H=this.image,q;d.blendImage||(d.blendImage=s.util.createCanvasElement()),I=d.blendImage,W=I.getContext("2d"),I.width!==g||I.height!==v?(I.width=g,I.height=v):W.clearRect(0,0,g,v),W.setTransform(H.scaleX,0,0,H.scaleY,H.left,H.top),W.drawImage(H._element,0,0,g,v),q=W.getImageData(0,0,g,v).data;for(var G=0;G<m;G+=4)switch(C=p[G],T=p[G+1],x=p[G+2],A=p[G+3],_=q[G],b=q[G+1],y=q[G+2],w=q[G+3],this.mode){case"multiply":p[G]=C*_/255,p[G+1]=T*b/255,p[G+2]=x*y/255,p[G+3]=A*w/255;break;case"mask":p[G+3]=w;break}},getUniformLocations:function(l,c){return{uTransformMatrix:l.getUniformLocation(c,"uTransformMatrix"),uImage:l.getUniformLocation(c,"uImage")}},sendUniformData:function(l,c){var d=this.calculateMatrix();l.uniform1i(c.uImage,1),l.uniformMatrix3fv(c.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(l,c){s.Image.fromObject(l.image,function(d){var p=s.util.object.clone(l);p.image=d,c(new s.Image.filters.BlendImage(p))})}}(t),function(a){var s=a.fabric||(a.fabric={}),u=Math.pow,f=Math.floor,l=Math.sqrt,c=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!_.programCache.hasOwnProperty(y)){var w=this.generateShader(b);_.programCache[y]=this.createProgram(_.context,w)}return _.programCache[y]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),w=new Array(y),C=1;C<=y;C++)w[C-1]=_(C*b);return w},generateShader:function(w){for(var b=new Array(w),y=this.fragmentSourceTOP,w,C=1;C<=w;C++)b[C-1]=C+".0 * uDelta";return y+="uniform float uTaps["+w+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(T,x){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+x+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+x+`];
`,y+="  sum += 2.0 * uTaps["+x+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(b){if(b>=_||b<=-_)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/_;return p(b)/b*p(y)/y}},applyTo2d:function(_){var b=_.imageData,y=this.scaleX,w=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/w;var C=b.width,T=b.height,x=d(C*y),A=d(T*w),I;this.resizeType==="sliceHack"?I=this.sliceByTwo(_,C,T,x,A):this.resizeType==="hermite"?I=this.hermiteFastResize(_,C,T,x,A):this.resizeType==="bilinear"?I=this.bilinearFiltering(_,C,T,x,A):this.resizeType==="lanczos"&&(I=this.lanczosResize(_,C,T,x,A)),_.imageData=I},sliceByTwo:function(_,b,y,w,C){var T=_.imageData,x=.5,A=!1,I=!1,W=b*x,H=y*x,q=s.filterBackend.resources,G,B,z=0,ee=0,oe=b,O=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),G=q.sliceByTwo,(G.width<b*1.5||G.height<y)&&(G.width=b*1.5,G.height=y),B=G.getContext("2d"),B.clearRect(0,0,b*1.5,y),B.putImageData(T,0,0),w=f(w),C=f(C);!A||!I;)b=W,y=H,w<f(W*x)?W=f(W*x):(W=w,A=!0),C<f(H*x)?H=f(H*x):(H=C,I=!0),B.drawImage(G,z,ee,b,y,oe,O,W,H),z=oe,ee=O,O+=H;return B.getImageData(z,ee,w,C)},lanczosResize:function(_,b,y,w,C){function T(F){var L,J,R,D,X,K,re,te,$,ae,me;for(O.x=(F+.5)*H,P.x=f(O.x),L=0;L<C;L++){for(O.y=(L+.5)*q,P.y=f(O.y),X=0,K=0,re=0,te=0,$=0,J=P.x-z;J<=P.x+z;J++)if(!(J<0||J>=b)){ae=f(1e3*c(J-O.x)),oe[ae]||(oe[ae]={});for(var Q=P.y-ee;Q<=P.y+ee;Q++)Q<0||Q>=y||(me=f(1e3*c(Q-O.y)),oe[ae][me]||(oe[ae][me]=W(l(u(ae*G,2)+u(me*B,2))/1e3)),R=oe[ae][me],R>0&&(D=(Q*b+J)*4,X+=R,K+=R*x[D],re+=R*x[D+1],te+=R*x[D+2],$+=R*x[D+3]))}D=(L*w+F)*4,I[D]=K/X,I[D+1]=re/X,I[D+2]=te/X,I[D+3]=$/X}return++F<w?T(F):A}var x=_.imageData.data,A=_.ctx.createImageData(w,C),I=A.data,W=this.lanczosCreate(this.lanczosLobes),H=this.rcpScaleX,q=this.rcpScaleY,G=2/this.rcpScaleX,B=2/this.rcpScaleY,z=m(H*this.lanczosLobes/2),ee=m(q*this.lanczosLobes/2),oe={},O={},P={};return T(0)},bilinearFiltering:function(_,b,y,w,C){var T,x,A,I,W,H,q,G,B,z,ee,oe,O=0,P,F=this.rcpScaleX,L=this.rcpScaleY,J=4*(b-1),R=_.imageData,D=R.data,X=_.ctx.createImageData(w,C),K=X.data;for(q=0;q<C;q++)for(G=0;G<w;G++)for(W=f(F*G),H=f(L*q),B=F*G-W,z=L*q-H,P=4*(H*b+W),ee=0;ee<4;ee++)T=D[P+ee],x=D[P+4+ee],A=D[P+J+ee],I=D[P+J+4+ee],oe=T*(1-B)*(1-z)+x*B*(1-z)+A*z*(1-B)+I*B*z,K[O++]=oe;return X},hermiteFastResize:function(_,b,y,w,C){for(var T=this.rcpScaleX,x=this.rcpScaleY,A=m(T/2),I=m(x/2),W=_.imageData,H=W.data,q=_.ctx.createImageData(w,C),G=q.data,B=0;B<C;B++)for(var z=0;z<w;z++){for(var ee=(z+B*w)*4,oe=0,O=0,P=0,F=0,L=0,J=0,R=0,D=(B+.5)*x,X=f(B*x);X<(B+1)*x;X++)for(var K=c(D-(X+.5))/I,re=(z+.5)*T,te=K*K,$=f(z*T);$<(z+1)*T;$++){var ae=c(re-($+.5))/A,me=l(te+ae*ae);me>1&&me<-1||(oe=2*me*me*me-3*me*me+1,oe>0&&(ae=4*($+X*b),R+=oe*H[ae+3],P+=oe,H[ae+3]<255&&(oe=oe*H[ae+3]/250),F+=oe*H[ae],L+=oe*H[ae+1],J+=oe*H[ae+2],O+=oe))}G[ee]=F/O,G[ee+1]=L/O,G[ee+2]=J/O,G[ee+3]=R/P}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Contrast=f(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var c=l.imageData,d,m,p=c.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(l,c){return{uContrast:l.getUniformLocation(c,"uContrast")}},sendUniformData:function(l,c){l.uniform1f(c.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Saturation=f(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var c=l.imageData,d=c.data,p=d.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),d[g]+=v!==d[g]?(v-d[g])*m:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*m:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*m:0}},getUniformLocations:function(l,c){return{uSaturation:l.getUniformLocation(c,"uSaturation")}},sendUniformData:function(l,c){l.uniform1f(c.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Vibrance=f(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var c=l.imageData,d=c.data,p=d.length,m=-this.vibrance,g,v,_,b;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),_=(d[g]+d[g+1]+d[g+2])/3,b=Math.abs(v-_)*2/255*m,d[g]+=v!==d[g]?(v-d[g])*b:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*b:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*b:0}},getUniformLocations:function(l,c){return{uVibrance:l.getUniformLocation(c,"uVibrance")}},sendUniformData:function(l,c){l.uniform1f(c.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Blur=f(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var c=l.filterBackend.resources,d,p,m=l.imageData.width,g=l.imageData.height;c.blurLayer1||(c.blurLayer1=s.util.createCanvasElement(),c.blurLayer2=s.util.createCanvasElement()),d=c.blurLayer1,p=c.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var v=d.getContext("2d"),_=p.getContext("2d"),b=15,y,w,C,T,x=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),_.clearRect(0,0,m,g),T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=x*w*m+y,_.globalAlpha=1-Math.abs(w),_.drawImage(d,C,y),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(T=-b;T<=b;T++)y=(Math.random()-.5)/4,w=T/b,C=x*w*g+y,_.globalAlpha=1-Math.abs(w),_.drawImage(d,y,C),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);l.ctx.drawImage(d,0,0);var A=l.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),A},getUniformLocations:function(l,c){return{delta:l.getUniformLocation(c,"uDelta")}},sendUniformData:function(l,c){var d=this.chooseRightDelta();l.uniform2fv(c.delta,d)},chooseRightDelta:function(){var l=1,c=[0,0],d;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),d=l*this.blur*.12,this.horizontal?c[0]=d:c[1]=d,c}}),u.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Gamma=f(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var c=l.imageData,d=c.data,p=this.gamma,m=d.length,g=1/p[0],v=1/p[1],_=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,_)*255;for(b=0,m=d.length;b<m;b+=4)d[b]=this.rVals[d[b]],d[b+1]=this.gVals[d[b+1]],d[b+2]=this.bVals[d[b+2]]},getUniformLocations:function(l,c){return{uGamma:l.getUniformLocation(c,"uGamma")}},sendUniformData:function(l,c){l.uniform3fv(c.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.Composed=f(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(c){c.applyTo(l)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(l,c){var d=l.subFilters||[],p=d.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return c&&c(m),m}}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,f=s.util.createClass;u.HueRotation=f(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,c=s.util.cos(l),d=s.util.sin(l),p=1/3,m=Math.sqrt(p)*d,g=1-c;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=c+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=c+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=c+p*g},isNeutralState:function(l){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,l)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,c){this.styles=c?c.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",c),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=s.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,c,d,p,m,g,v,_=0,b=this._textLines.length;_<b;_++)if(!(this.textAlign!=="justify"&&(_===b-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],c=this.getLineWidth(_),c<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){d=v.length,l=(this.width-c)/d;for(var y=0,w=m.length;y<=w;y++)g=this.__charBounds[_][y],this._reSpaceAndTab.test(m[y])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),c=this.fontSize;return l.width+=c*l.zoomX,l.height+=c*l.zoomY,l},_render:function(l){var c=this.path;c&&!c.isNotVisible()&&c._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,c,d){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(c,d)},calcTextWidth:function(){for(var l=this.getLineWidth(0),c=1,d=this._textLines.length;c<d;c++){var p=this.getLineWidth(c);p>l&&(l=p)}return l},_renderTextLine:function(l,c,d,p,m,g){this._renderChars(l,c,d,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var c,d,p=l.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),b=0,y=0,w,C,T=this.path,x,A=0,I=this._textLines.length;A<I;A++){if(c=this.getHeightOfLine(A),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",A)){_+=c;continue}m=this._textLines[A],d=this._getLineLeftOffset(A),y=0,b=0,g=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var W=0,H=m.length;W<H;W++)w=this.__charBounds[A][W],C=this.getValueOfPropertyAt(A,W,"textBackgroundColor"),T?(l.save(),l.translate(w.renderLeft,w.renderTop),l.rotate(w.angle),l.fillStyle=C,C&&l.fillRect(-w.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),w.width,c/this.lineHeight),l.restore()):C!==g?(x=v+d+b,this.direction==="rtl"&&(x=this.width-x-y),l.fillStyle=g,g&&l.fillRect(x,_,y,c/this.lineHeight),b=w.left,y=w.width,g=C):y+=w.kernedWidth;C&&!T&&(x=v+d+b,this.direction==="rtl"&&(x=this.width-x-y),l.fillStyle=C,l.fillRect(x,_,y,c/this.lineHeight)),_+=c}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var c=l.fontFamily.toLowerCase();s.charWidthsCache[c]||(s.charWidthsCache[c]={});var d=s.charWidthsCache[c],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(l,c,d,p){var m=this.getFontCache(c),g=this._getFontDeclaration(c),v=this._getFontDeclaration(p),_=d+l,b=g===v,y,w,C,T=c.fontSize/this.CACHE_FONT_SIZE,x;if(d&&m[d]!==void 0&&(C=m[d]),m[l]!==void 0&&(x=y=m[l]),b&&m[_]!==void 0&&(w=m[_],x=w-C),y===void 0||C===void 0||w===void 0){var A=this.getMeasuringContext();this._setTextStyles(A,c,!0)}return y===void 0&&(x=y=A.measureText(l).width,m[l]=y),C===void 0&&b&&d&&(C=A.measureText(d).width,m[d]=C),b&&w===void 0&&(w=A.measureText(_).width,m[_]=w,x=w-C),{width:y*T,kernedWidth:x*T}},getHeightOfChar:function(l,c){return this.getValueOfPropertyAt(l,c,"fontSize")},measureLine:function(l){var c=this._measureLine(l);return this.charSpacing!==0&&(c.width-=this._getWidthOfCharSpacing()),c.width<0&&(c.width=0),c},_measureLine:function(l){var c=0,d,p,m=this._textLines[l],g,v,_=0,b=new Array(m.length),y=0,w,C,T=this.path,x=this.pathSide==="right";for(this.__charBounds[l]=b,d=0;d<m.length;d++)p=m[d],v=this._getGraphemeBox(p,l,d,g),b[d]=v,c+=v.kernedWidth,g=p;if(b[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(C=T.segmentsInfo[T.segmentsInfo.length-1].length,w=s.util.getPointOnPath(T.path,0,T.segmentsInfo),w.x+=T.pathOffset.x,w.y+=T.pathOffset.y,this.textAlign){case"left":y=x?C-c:0;break;case"center":y=(C-c)/2;break;case"right":y=x?0:C-c;break}for(y+=this.pathStartOffset*(x?-1:1),d=x?m.length-1:0;x?d>=0:d<m.length;x?d--:d++)v=b[d],y>C?y%=C:y<0&&(y+=C),this._setGraphemeOnPath(y,v,w),y+=v.kernedWidth}return{width:c,numOfSpaces:_}},_setGraphemeOnPath:function(l,c,d){var p=l+c.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);c.renderLeft=g.x-d.x,c.renderTop=g.y-d.y,c.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,c,d,p,m){var g=this.getCompleteStyleDeclaration(c,d),v=p?this.getCompleteStyleDeclaration(c,d-1):{},_=this._measureChar(l,g,p,v),b=_.kernedWidth,y=_.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),y+=w,b+=w);var C={width:y,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(d>0&&!m){var T=this.__charBounds[c][d-1];C.left=T.left+T.width+_.kernedWidth-_.width}return C},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var c=this._textLines[l],d=this.getHeightOfChar(l,0),p=1,m=c.length;p<m;p++)d=Math.max(this.getHeightOfChar(l,p),d);return this.__lineHeights[l]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,c=0,d=0,p=this._textLines.length;d<p;d++)l=this.getHeightOfLine(d),c+=d===p-1?l/this.lineHeight:l;return c},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,c){l.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),b=_/this.lineHeight,y=this._getLineLeftOffset(g);this._renderTextLine(c,l,this._textLines[g],p+y,m+d+b,g),d+=_}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,c,d,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,b,y,w="",C,T=0,x,A=this.path,I=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!A,W=this.direction==="ltr",H=this.direction==="ltr"?1:-1,q,G=c.canvas.getAttribute("dir");if(c.save(),G!==this.direction&&(c.canvas.setAttribute("dir",W?"ltr":"rtl"),c.direction=W?"ltr":"rtl",c.textAlign=W?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,I){this._renderChar(l,c,g,0,d.join(""),p,m,v),c.restore();return}for(var B=0,z=d.length-1;B<=z;B++)x=B===z||this.charSpacing||A,w+=d[B],C=this.__charBounds[g][B],T===0?(p+=H*(C.kernedWidth-C.width),T+=C.width):T+=C.kernedWidth,_&&!x&&this._reSpaceAndTab.test(d[B])&&(x=!0),x||(b=b||this.getCompleteStyleDeclaration(g,B),y=this.getCompleteStyleDeclaration(g,B+1),x=s.util.hasStyleChanged(b,y,!1)),x&&(A?(c.save(),c.translate(C.renderLeft,C.renderTop),c.rotate(C.angle),this._renderChar(l,c,g,B,w,-T/2,0,v),c.restore()):(q=p,this._renderChar(l,c,g,B,w,q,m,v)),w="",b=y,p+=H*T,T=0);c.restore()},_applyPatternGradientTransformText:function(l){var c=s.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return c.width=p,c.height=m,d=c.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=l.toLive(d),this._applyPatternGradientTransform(d,l),d.fill(),d.createPattern(c,"no-repeat")},handleFiller:function(l,c,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[c]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(l[c]=d.toLive(l,this),this._applyPatternGradientTransform(l,d)):(l[c]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,c){return l.lineWidth=c.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",c.stroke)},_setFillStyles:function(l,c){return this.handleFiller(l,"fillStyle",c.fill)},_renderChar:function(l,c,d,p,m,g,v){var _=this._getStyleDeclaration(d,p),b=this.getCompleteStyleDeclaration(d,p),y=l==="fillText"&&b.fill,w=l==="strokeText"&&b.stroke&&b.strokeWidth,C,T;!w&&!y||(c.save(),y&&(C=this._setFillStyles(c,b)),w&&(T=this._setStrokeStyles(c,b)),c.font=this._getFontDeclaration(b),_&&_.textBackgroundColor&&this._removeShadow(c),_&&_.deltaY&&(v+=_.deltaY),y&&c.fillText(m,g-C.offsetX,v-C.offsetY),w&&c.strokeText(m,g-T.offsetX,v-T.offsetY),c.restore())},setSuperscript:function(l,c){return this._setScript(l,c,this.superscript)},setSubscript:function(l,c){return this._setScript(l,c,this.subscript)},_setScript:function(l,c,d){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(v,l,c),this},_getLineLeftOffset:function(l){var c=this.getLineWidth(l),d=this.width-c,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var c=this.measureLine(l),d=c.width;return this.__lineWidths[l]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,c,d){var p=this._getStyleDeclaration(l,c);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(l,c){if(!(!this[c]&&!this.styleHas(c))){for(var d,p,m,g,v,_,b,y,w=this._getLeftOffset(),C=this._getTopOffset(),T,x,A,I,W,H,q,G,B=this.path,z=this._getWidthOfCharSpacing(),ee=this.offsets[c],oe=0,O=this._textLines.length;oe<O;oe++){if(d=this.getHeightOfLine(oe),!this[c]&&!this.styleHas(c,oe)){C+=d;continue}b=this._textLines[oe],H=d/this.lineHeight,g=this._getLineLeftOffset(oe),x=0,A=0,y=this.getValueOfPropertyAt(oe,0,c),G=this.getValueOfPropertyAt(oe,0,"fill"),T=C+H*(1-this._fontSizeFraction),p=this.getHeightOfChar(oe,0),v=this.getValueOfPropertyAt(oe,0,"deltaY");for(var P=0,F=b.length;P<F;P++)if(I=this.__charBounds[oe][P],W=this.getValueOfPropertyAt(oe,P,c),q=this.getValueOfPropertyAt(oe,P,"fill"),m=this.getHeightOfChar(oe,P),_=this.getValueOfPropertyAt(oe,P,"deltaY"),B&&W&&q)l.save(),l.fillStyle=G,l.translate(I.renderLeft,I.renderTop),l.rotate(I.angle),l.fillRect(-I.kernedWidth/2,ee*m+_,I.kernedWidth,this.fontSize/15),l.restore();else if((W!==y||q!==G||m!==p||_!==v)&&A>0){var L=w+g+x;this.direction==="rtl"&&(L=this.width-L-A),y&&G&&(l.fillStyle=G,l.fillRect(L,T+ee*p+v,A,this.fontSize/15)),x=I.left,A=I.width,y=W,G=q,p=m,v=_}else A+=I.kernedWidth;var L=w+g+x;this.direction==="rtl"&&(L=this.width-L-A),l.fillStyle=q,W&&q&&l.fillRect(L,T+ee*p+v,A-z,this.fontSize/15),C+=d}this._removeShadow(l)}},_getFontDeclaration:function(l,c){var d=l||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[s.isLikelyNode?d.fontWeight:d.fontStyle,s.isLikelyNode?d.fontStyle:d.fontWeight,c?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var c=l.split(this._reNewline),d=new Array(c.length),p=[`
`],m=[],g=0;g<c.length;g++)d[g]=s.util.string.graphemeSplit(c[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:c,graphemeText:m,graphemeLines:d}},toObject:function(l){var c=f.concat(l),d=this.callSuper("toObject",c);return d.styles=s.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(l,c){this.callSuper("set",l,c);var d=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(l,c,d){if(!l)return c(null);var p=s.parseAttributes(l,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=s.util.object.extend(d?u(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=d.strokeWidth;d.strokeWidth=0;var b=new s.Text(v,d),y=b.getScaledHeight()/b.height,w=(b.height+b.strokeWidth)*b.lineHeight-b.height,C=w*y,T=b.getScaledHeight()+C,x=0;m==="center"&&(x=b.getScaledWidth()/2),m==="right"&&(x=b.getScaledWidth()),b.set({left:b.left-x,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof _<"u"?_:1}),c(b)},s.Text.fromObject=function(l,c){var d=u(l),p=l.path;return delete d.path,s.Object._fromObject("Text",d,function(m){m.styles=s.util.stylesFromArray(l.styles,l.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),c(m)},"path"):c(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var u in s)for(var f in s[u])for(var l in s[u][f])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var u=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in u)for(var l in u[f])if(typeof u[f][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,u=0,f,l,c=!0,d=0,p;for(var m in s){f=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);u++,v?(l?p[a]!==l&&(c=!1):l=p[a],p[a]===this[a]&&delete p[a]):c=!1,Object.keys(p).length!==0?f++:delete s[m][g]}f===0&&delete s[m]}for(var _=0;_<this._textLines.length;_++)d+=this._textLines[_].length;c&&u===d&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,u,f,l;for(f in s){u=s[f];for(l in u)delete u[l][a],Object.keys(u[l]).length===0&&delete u[l];Object.keys(u).length===0&&delete s[f]}}},_extendStyles:function(a,s){var u=this.get2DCursorLocation(a);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var u=s?this._unwrappedTextLines:this._textLines,f=u.length,l=0;l<f;l++){if(a<=u[l].length)return{lineIndex:l,charIndex:a};a-=u[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:u[l-1].length<a?u[l-1].length:a}},getSelectionStyles:function(a,s,u){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var f=[],l=a;l<s;l++)f.push(this.getStyleAtPosition(l,u));return f},getStyleAtPosition:function(a,s){var u=this.get2DCursorLocation(a),f=s?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return f||{}},setSelectionStyles:function(a,s,u){typeof s>"u"&&(s=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||s);for(var f=s;f<u;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var u=this.styles&&this.styles[a];return u?u[s]:null},getCompleteStyleDeclaration:function(a,s){for(var u=this._getStyleDeclaration(a,s)||{},f={},l,c=0;c<this._styleProperties.length;c++)l=this._styleProperties[c],f[l]=typeof u[l]>"u"?this[l]:u[l];return f},_setStyleDeclaration:function(a,s,u){this.styles[a][s]=u},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,u){this.callSuper("initialize",s,u),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,u){this[s]!==u&&(this._fireSelectionChanged(),this[s]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,f=this.canvas.viewportTransform;u.save(),u.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(u),this._clearTextArea(u),s||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,u):this.renderSelection(s,u),u.restore()}},_clearTextArea:function(s){var u=this.width+4,f=this.height+4;s.clearRect(-u/2,-f/2,u,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var u=this._getLeftOffset(),f=this._getTopOffset(),l=this._getCursorBoundariesOffsets(s);return{left:u,top:f,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,f,l,c=0,d=0,p,m=this.get2DCursorLocation(s);l=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)c+=this.getHeightOfLine(g);u=this._getLineLeftOffset(f);var v=this.__charBounds[f][l];return v&&(d=v.left),this.charSpacing!==0&&l===this._textLines[f].length&&(d-=this._getWidthOfCharSpacing()),p={top:c,left:u+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,u){var f=this.get2DCursorLocation(),l=f.lineIndex,c=f.charIndex>0?f.charIndex-1:0,d=this.getValueOfPropertyAt(l,c,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(l,c,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,c,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,d)},renderSelection:function(s,u){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,c=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(f),p=this.get2DCursorLocation(l),m=d.lineIndex,g=p.lineIndex,v=d.charIndex<0?0:d.charIndex,_=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var y=this._getLineLeftOffset(b)||0,w=this.getHeightOfLine(b),C=0,T=0,x=0;if(b===m&&(T=this.__charBounds[m][v].left),b>=m&&b<g)x=c&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(_===0)x=this.__charBounds[g][_].left;else{var A=this._getWidthOfCharSpacing();x=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-A}C=w,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(w/=this.lineHeight);var I=s.left+y+T,W=x-T,H=w,q=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",H=1,q=w):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(I=this.width-I-W),u.fillRect(I,s.top+s.topOffset+q,W,H),s.topOffset+=C}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),u=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:u}}}),e.IText.fromObject=function(s,u){var f=e.util.stylesFromArray(s.styles,s.text),l=Object.assign({},s,{styles:f});if(a(l),l.styles)for(var c in l.styles)for(var d in l.styles[c])a(l.styles[c][d]);e.Object._fromObject("IText",l,u,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var u=s.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,s._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var u=s.canvas;u&&(u._iTextInstances=u._iTextInstances||[],e.util.removeFromArray(u._iTextInstances,s),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,s._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,u,f,l){var c;return c={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",u,{duration:f,onComplete:function(){c.isAborted||s[l]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return c.isAborted}}),c},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var u=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var u=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)u++,f--;for(;/\S/.test(this._text[f])&&f>-1;)u++,f--;return s-u},findWordBoundaryRight:function(s){var u=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)u++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)u++,f++;return s+u},findLineBoundaryLeft:function(s){for(var u=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)u++,f--;return s-u},findLineBoundaryRight:function(s){for(var u=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)u++,f++;return s+u},searchWordBoundary:function(s,u){for(var f=this._text,l=this._reSpace.test(f[s])?s-1:s,c=f[l],d=e.reNonWord;!d.test(c)&&l>0&&l<f.length;)l+=u,c=f[l];return d.test(c)&&(l+=u===1?0:1),l},selectWord:function(s){s=s||this.selectionStart;var u=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=u,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var u=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=u,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,l=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||f===l)&&(f===u||l===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,u,f){var l=f.slice(0,s),c=e.util.string.graphemeSplit(l).length;if(s===u)return{selectionStart:c,selectionEnd:c};var d=f.slice(s,u),p=e.util.string.graphemeSplit(d).length;return{selectionStart:c,selectionEnd:c+p}},fromGraphemeToStringSelection:function(s,u,f){var l=f.slice(0,s),c=l.join("").length;if(s===u)return{selectionStart:c,selectionEnd:c};var d=f.slice(s,u),p=d.join("").length;return{selectionStart:c,selectionEnd:c+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),l=f.lineIndex,c=f.charIndex,d=this.getValueOfPropertyAt(l,c,"fontSize")*this.lineHeight,p=u.leftOffset,m=this.calcTransformMatrix(),g={x:u.left+p,y:u.top+u.topOffset+d},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/v,y=_.height/v,w=b-d,C=y-d,T=_.clientWidth/b,x=_.clientHeight/y;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=T,g.y*=x,g.x<0&&(g.x=0),g.x>w&&(g.x=w),g.y<0&&(g.y=0),g.y>C&&(g.y=C),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,u){var f=this.get2DCursorLocation(s,!0),l=this.get2DCursorLocation(u,!0),c=f.lineIndex,d=f.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(c!==p){if(this.styles[c])for(g=d;g<this._unwrappedTextLines[c].length;g++)delete this.styles[c][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[c]||(this.styles[c]={}),this.styles[c][d+g-m]=v);for(g=c+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,c-p)}else if(this.styles[c]){v=this.styles[c];var _=m-d,b,y;for(g=d;g<m;g++)delete v[g];for(y in this.styles[c])b=parseInt(y,10),b>=m&&(v[b-_]=v[y],delete v[y])}},shiftLineStyles:function(s,u){var f=a(this.styles);for(var l in this.styles){var c=parseInt(l,10);c>s&&(this.styles[c+u]=f[c],f[c-u]||delete this.styles[c])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,u,f,l){var c,d={},p=!1,m=this._unwrappedTextLines[s].length===u;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(c=this.styles[s][u===0?u:u-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=u&&(p=!0,d[v-u]=this.styles[s][g],m&&u===0||delete this.styles[s][g])}var _=!1;for(p&&!m&&(this.styles[s+f]=d,_=!0),_&&f--;f>0;)l&&l[f-1]?this.styles[s+f]={0:a(l[f-1])}:c?this.styles[s+f]={0:a(c)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,u,f,l){this.styles||(this.styles={});var c=this.styles[s],d=c?a(c):{};f||(f=1);for(var p in d){var m=parseInt(p,10);m>=u&&(c[m+f]=d[m],d[m-f]||delete c[m])}if(this._forceClearCache=!0,l){for(;f--;)Object.keys(l[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][u+f]=a(l[f]));return}if(c)for(var g=c[u?u-1:1];g&&f--;)this.styles[s][u+f]=a(g)},insertNewStyleBlock:function(s,u,f){for(var l=this.get2DCursorLocation(u,!0),c=[0],d=0,p=0;p<s.length;p++)s[p]===`
`?(d++,c[d]=0):c[d]++;c[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,c[0],f),f=f&&f.slice(c[0]+1)),d&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+c[0],d);for(var p=1;p<d;p++)c[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,c[p],f):f&&this.styles[l.lineIndex+p]&&f[0]&&(this.styles[l.lineIndex+p][0]=f[0]),f=f&&f.slice(c[p]+1);c[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,c[p],f)},setSelectionStartEndWithShift:function(s,u,f){f<=s?(u===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<u?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(u===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),u=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(u,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),u=0,f=0,l=0,c=0,d=0,p,m,g=0,v=this._textLines.length;g<v&&l<=s.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(c+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),f=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var _=0,b=m.length;_<b&&(u=f,f+=this.__charBounds[d][_].kernedWidth*this.scaleX,f<=s.x);_++)c++;return this._getNewSelectionStartFromOffset(s,u,f,c,b)},_getNewSelectionStartFromOffset:function(a,s,u,f,l){var c=a.x-s,d=u-a.x,p=d>c||d<0?0:1,m=f+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,l=u.length,c,d,p=l-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=m>w.selectionStart;v?(c=this._text.slice(m,g),p+=g-m):l<f&&(C?c=this._text.slice(g+p,g):c=this._text.slice(m,m-p)),d=u.slice(w.selectionEnd-p,w.selectionEnd),c&&c.length&&(d.length&&(_=this.getSelectionStyles(m,m+1,!1),_=d.map(function(){return _[0]})),v?(b=m,y=g):C?(b=g-c.length,y=g):(b=g,y=g+c.length),this.removeStyleFromTo(b,y)),d.length&&(s&&d.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(_=e.copiedTextStyle),this.insertNewStyleBlock(d,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,s){var u=this._getLineLeftOffset(a),f;return s>0&&(f=this.__charBounds[a][s-1],u+=f.left+f.width),u},getDownCursorOffset:function(a,s){var u=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(u),l=f.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-u;var c=f.charIndex,d=this._getWidthBeforeCursor(l,c),p=this._getIndexOnLine(l+1,d),m=this._textLines[l].slice(c);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var u=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(u),l=f.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-u;var c=f.charIndex,d=this._getWidthBeforeCursor(l,c),p=this._getIndexOnLine(l-1,d),m=this._textLines[l].slice(0,c),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var u=this._textLines[a],f=this._getLineLeftOffset(a),l=f,c=0,d,p,m=0,g=u.length;m<g;m++)if(d=this.__charBounds[a][m].width,l+=d,l>s){p=!0;var v=l-d,_=l,b=Math.abs(v-s),y=Math.abs(_-s);c=y<b?m:m-1;break}return p||(c=u.length-1),c},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var u="get"+a+"CursorOffset",f=this[u](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,u){var f;if(a.altKey)f=this["findWordBoundary"+u](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+u](this[s]);else return this[s]+=u==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var u="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?u+="Shift":u+="outShift",this[u](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,u,f){typeof f>"u"&&(f=u),f>u&&this.removeStyleFromTo(u,f);var l=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,u,s),this._text=[].concat(this._text.slice(0,u),l,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var f=!0,l=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,f){var l=[],c=[],d=u,p;this._setSVGBg(c);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(c,m,f+p,d),this._setSVGTextLineText(l,m,f+p,d),d+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:c}},_createTextCharSpan:function(u,f,l,c){var d=u!==u.trim()||u.match(s),p=this.getSvgSpanStyles(f,d),m=p?'style="'+p+'"':"",g=f.deltaY,v="",_=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(l,_),'" y="',a(c,_),'" ',v,m,">",e.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,f,l,c){var d=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,b,y=0,w=this._textLines[f],C;c+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,x=w.length-1;T<=x;T++)C=T===x||this.charSpacing,v+=w[T],_=this.__charBounds[f][T],y===0?(l+=_.kernedWidth-_.width,y+=_.width):y+=_.kernedWidth,p&&!C&&this._reSpaceAndTab.test(w[T])&&(C=!0),C||(m=m||this.getCompleteStyleDeclaration(f,T),g=this.getCompleteStyleDeclaration(f,T+1),C=e.util.hasStyleChanged(m,g,!0)),C&&(b=this._getStyleDeclaration(f,T)||{},u.push(this._createTextCharSpan(v,b,l,c)),v="",m=g,l+=y,y=0)},_pushTextBgRect:function(u,f,l,c,d,p){var m=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(f),' x="',a(l,m),'" y="',a(c,m),'" width="',a(d,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(u,f,l,c){for(var d=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,_,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),y=0,w=d.length;y<w;y++)v=this.__charBounds[f][y],_=this.getValueOfPropertyAt(f,y,"textBackgroundColor"),_!==b?(b&&this._pushTextBgRect(u,b,l+g,c,m,p),g=v.left,m=v.width,b=_):m+=v.kernedWidth;_&&this._pushTextBgRect(u,_,l+g,c,m,p)},_getFillAttributes:function(u){var f=u&&typeof u=="string"?new e.Color(u):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+u+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(u){for(var f=0,l=0,c=0;c<u;c++)f+=this.getHeightOfLine(c);return l=this.getHeightOfLine(c),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){var f=e.Object.prototype.getSvgStyles.call(this,u);return f+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var f=0,l=0,c=0,d={},p=0;p<u.graphemeLines.length;p++)u.graphemeText[c]===`
`&&p>0?(l=0,c++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[c])&&p>0&&(l++,c++),d[p]={line:f,offset:l},c+=u.graphemeLines[p].length,l+=u.graphemeLines[p].length;return d},styleHas:function(u,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[f];l&&(f=l.line)}return s.Text.prototype.styleHas.call(this,u,f)},isEmptyStyles:function(u){if(!this.styles)return!0;var f=0,l=u+1,c,d,p=!1,m=this._styleMap[u],g=this._styleMap[u+1];m&&(u=m.line,f=m.offset),g&&(l=g.line,p=l===u,c=g.offset),d=typeof u>"u"?this.styles:{line:this.styles[u]};for(var v in d)for(var _ in d[v])if(_>=f&&(!p||_<c))for(var b in d[v][_])return!1;return!0},_getStyleDeclaration:function(u,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[u];if(!l)return null;u=l.line,f=l.offset+f}return this.callSuper("_getStyleDeclaration",u,f)},_setStyleDeclaration:function(u,f,l){var c=this._styleMap[u];u=c.line,f=c.offset+f,this.styles[u][f]=l},_deleteStyleDeclaration:function(u,f){var l=this._styleMap[u];u=l.line,f=l.offset+f,delete this.styles[u][f]},_getLineStyle:function(u){var f=this._styleMap[u];return!!this.styles[f.line]},_setLineStyle:function(u){var f=this._styleMap[u];this.styles[f.line]={}},_wrapText:function(u,f){var l=[],c;for(this.isWrapping=!0,c=0;c<u.length;c++)l=l.concat(this._wrapLine(u[c],c,f));return this.isWrapping=!1,l},_measureWord:function(u,f,l){var c=0,d,p=!0;l=l||0;for(var m=0,g=u.length;m<g;m++){var v=this._getGraphemeBox(u[m],f,m+l,d,p);c+=v.kernedWidth,d=u[m]}return c},_wrapLine:function(u,f,l,I){var d=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(u):u.split(this._wordJoiners),_="",b=0,y=p?"":" ",w=0,C=0,T=0,x=!0,A=this._getWidthOfCharSpacing(),I=I||0;v.length===0&&v.push([]),l-=I;for(var W=0;W<v.length;W++)_=p?v[W]:s.util.string.graphemeSplit(v[W]),w=this._measureWord(_,f,b),b+=_.length,d+=C+w-A,d>l&&!x?(m.push(g),g=[],d=w,x=!0):d+=A,!x&&!p&&g.push(y),g=g.concat(_),C=p?0:this._measureWord([y],f,b),b++,x=!1,w>T&&(T=w);return W&&m.push(g),T+I>this.dynamicMinWidth&&(this.dynamicMinWidth=T-A+I),m},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var f=s.Text.prototype._splitTextIntoLines.call(this,u),l=this._wrapText(f.lines,this.width),c=new Array(l.length),d=0;d<l.length;d++)c[d]=l[d].join("");return f.lines=c,f.graphemeLines=l,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var f in this._styleMap)this._textLines[f]&&(u[this._styleMap[f].line]=1);for(var f in this.styles)u[f]||delete this.styles[f]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),s.Textbox.fromObject=function(u,f){var l=s.util.stylesFromArray(u.styles,u.text),c=Object.assign({},u,{styles:l});return s.Object._fromObject("Textbox",c,f,"text")}}(t),function(){var a=e.controlsUtils,s=a.scaleSkewCursorStyleHandler,u=a.scaleCursorStyleHandler,f=a.scalingEqually,l=a.scalingYOrSkewingX,c=a.scalingXOrSkewingY,d=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:c,getActionName:d}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:c,getActionName:d}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:f}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:f}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:f}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:f}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(at);const as=[];function Fs(t,e){return{subscribe:St(t,e).subscribe}}function St(t,e=ge){let n;const i=new Set;function r(a){if(Ve(t,a)&&(t=a,n)){const s=!as.length;for(const u of i)u[1](),as.push(u,t);if(s){for(let u=0;u<as.length;u+=2)as[u][0](as[u+1]);as.length=0}}}function o(a){r(a(t))}function h(a,s=ge){const u=[a,s];return i.add(u),i.size===1&&(n=e(r,o)||ge),a(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:h}}function V1(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Fs(n,(h,a)=>{let s=!1;const u=[];let f=0,l=ge;const c=()=>{if(f)return;l();const p=e(i?u[0]:u,h,a);o?h(p):l=Hn(p)?p:ge},d=r.map((p,m)=>lh(p,g=>{u[m]=g,f&=~(1<<m),s&&c()},()=>{f|=1<<m}));return s=!0,c(),function(){Ue(d),l(),s=!1}})}let pl,gl,Ui=St(null),X1=St({left:0,top:0});const Yd=10;let pe,ef,Ly,Wo,zo,tf=!1,Dr=null,ar=!1;const $1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/><path d="M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',ys=["selectable","objType","successPosition","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","compositeId","imageIndex","printWidth","printHeight","extension","charSpacing","convert","thumbnail","uuid","localFamily","url","printIgnore","printIndex","targetFrame","vector","userEvent","evented","patternSourceCanvas","pattern","patternPadding","patternOffset","patternWidth"],G1=["print","guide","snapW","snapH","frame","guideText"];let Ny=St([]);function q1(t,e,n,i){Dr=i,ef=document.getElementById(t).parentElement,pl=e,gl=n,pe=new at.fabric.Canvas(t,{width:e,height:n,selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0,isDrawingMode:ar,preserveObjectStacking:!0}),at.fabric.Object.prototype._renderControl=function(h,a,s,u,f){h.actionName==="rotate"?gC(a,u,f,$1):h.render(a,u,f)},at.fabric.Object.prototype.cornerStyle="circle",at.fabric.Object.prototype.cornerColor="#2EF2E8",at.fabric.Object.prototype.borderColor="#0075ff",at.fabric.Object.prototype.cornerStrokeColor="#0075ff";const r={mtr:!0,ml:!1,mr:!1,mb:!1,mt:!1,tl:!0,tr:!0,bl:!0,br:!0},o={mtr:!0,ml:!0,mr:!0,mb:!0,mt:!0,tl:!0,tr:!0,bl:!0,br:!0};at.fabric.Image.prototype.setControlsVisibility(r),at.fabric.Path.prototype.setControlsVisibility(r),at.fabric.Text.prototype.setControlsVisibility(r),at.fabric.Rect.prototype.setControlsVisibility(o),at.fabric.Ellipse.prototype.setControlsVisibility(o),at.fabric.Triangle.prototype.setControlsVisibility(o),at.fabric.Object.prototype.cornerSize=20,at.fabric.Object.prototype.transparentCorners=!1,pe.on("object:modified",h=>{Ll(),Dr(pe.toJSON(ys),bs()),h.target.type==="pen"||h.target.type}),pe.on("object:added",()=>{Ll(),tf||Dr(pe.toJSON(ys),bs())}),pe.on("selection:created",h=>{Ui.set(h.selected),Dr(pe.toJSON(ys),bs())}),pe.on("selection:updated",async h=>{Ui.set(null),await setTimeout(()=>{Dr(pe.toJSON(ys),bs())},0),Ui.set(h.selected)}),pe.on("selection:cleared",()=>{Ui.set(null),Dr(pe.toJSON(ys),bs())}),pe.on("mouse:down",h=>{ar&&mC(h.e.clientX,h.e.clientY),Wd()}),pe.on("mouse:move",h=>{ar&&(h.e.clientX,h.e.clientY,void 0),Wd()}),pe.on("mouse:up",()=>{ar&&vC()}),pe.on("object:moving",function(h){const a=h.target,s=pe.getZoom(),u=a.left,f=a.top;if(typeof Wo<"u"&&typeof zo<"u"){let l=a.left,c=a.top;Math.abs(u-Wo)<Yd/s&&(l=Wo),Math.abs(f-zo)<Yd/s&&(c=zo),a.set({left:l,top:c})}pe.renderAll()}),pe.on("after:render",CC),Vd(),window.addEventListener("resize",Vd,!1)}function Wd(){const t=pe.getZoom(),e=pe.getActiveObject();if(!e)return;const n=pe.getElement().getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top,o=e.oCoords.mb;if(o){const h=(i+o.x)*t;X1.set({left:i+h,top:r})}else console.warn("Bottom-center controller not found")}function Ll(){Ny.update(t=>pe.getObjects().map((n,i)=>{const r=n;return r.id=`layer_${i}`,r}).filter(n=>!G1.includes(n.objType)))}function K1(t){t.forEach(e=>{const n=pe.getObjects().find(i=>i.id===e.id);n&&n.bringToFront()}),Ll(),pe.renderAll()}function J1(t){tf=!0,pe.loadFromJSON(t,()=>{tf=!1,pe.renderAll.bind(pe),Dr(pe.toJSON(ys),bs())},(e,n)=>{const i={selectable:!1,evented:!1};n.objType==="snapW"&&(Wo=n.left,n.set(i),n.printIgnore=!0),n.objType==="snapH"&&(zo=n.top,n.set(i),n.printIgnore=!0),n.objType==="print"&&(at.fabric.util.enlivenObjects([e],function(r){r[0].set({absolutePositioned:!0,stroke:"#FFFFFF",strokeWidth:0}),r[0].fill,Ly=r[0]}),n.set(i)),n.objType,n.objType==="guide"&&n.set(i),n.objType==="pattern"&&changePattern(n),(n.objType==="clipart"||n.objType==="text"||n.objType==="shape"||n.objType==="draw"||n.objType==="upload")&&uo(n),pe.discardActiveObject().renderAll()})}function zd(t,e={}){const{extension:n}=e.origin?e.origin:e.convert;if(n==="svg"){Q1(t,e);return}at.fabric.Image.fromURL(t,i=>{const r=pe.getWidth(),o=pe.getHeight(),h=pe.getZoom(),a=i.width,s=i.height;let u=1;(a>r||s>o)&&(u=Math.min(r/a,o/s));const f={left:r/h/2,top:o/h/2,originX:"center",originY:"center",scaleX:u,scaleY:u,...e};i.set({...f}),uo(i),pe.add(i),pe.setActiveObject(i),pe.renderAll()},{crossOrigin:"anonymous"})}function Z1(t,e,n={}){if(!t||!e){console.error(" URL ");return}const{extension:i}=n.origin?n.origin:n.convert;if(i==="svg"){eC(t,e,n);return}const r=pe.getObjects().indexOf(t);at.fabric.Image.fromURL(e,o=>{const{left:h,top:a,scaleX:s,scaleY:u,angle:f,flipX:l,flipY:c}=t;o.set({left:h,top:a,scaleX:s,scaleY:u,angle:f,flipX:l,flipY:c,originX:t.originX||"center",originY:t.originY||"center",...n}),uo(o),pe.remove(t),pe.insertAt(o,r),pe.setActiveObject(o),pe.renderAll()},{crossOrigin:"anonymous"})}function Q1(t,e={}){at.fabric.loadSVGFromURL(t,(n,i)=>{const r=at.fabric.util.groupSVGElements(n,i),o=pe.getWidth(),h=pe.getHeight(),a=pe.getZoom(),s=n.length>1?"colors":"color",u={left:o/a/2,top:h/a/2,originX:"center",originY:"center",colorType:s,vector:!0,...e};r.set({...u}),uo(r),pe.add(r),pe.setActiveObject(r),pe.renderAll()})}function eC(t,e,n={}){at.fabric.loadSVGFromURL(e,(i,r)=>{const o=at.fabric.util.groupSVGElements(i,r),{left:h,top:a,scaleX:s,scaleY:u,angle:f,flipX:l,flipY:c}=t;o.set({left:h,top:a,scaleX:s,scaleY:u,angle:f,flipX:l,flipY:c,originX:t.originX||"center",originY:t.originY||"center",...n}),uo(o),pe.remove(t),pe.add(o),pe.setActiveObject(o),pe.renderAll()})}function uo(t){t.clipPath=Ly}function tC(t,e={}){const n=pe.getWidth(),i=pe.getHeight(),r=pe.getZoom(),o=new at.fabric.Text(t,{left:n/r/2,top:i/r/2,fontSize:50/r,originX:"center",originY:"center",strokeUniform:!0,centeredScaling:!0,perPixelTargetFind:!0,paintFirst:"stroke",...e});pe.add(o),pe.setActiveObject(o),pe.renderAll()}function nC(t){pe.setActiveObject(t),pe.renderAll()}function iC(t){pe.remove(t),Ll(),pe.renderAll()}function rC(t,e){t.set("selectable",e),t.set("evented",e),pe.renderAll()}function sC(){dC(["print","guide","snapH","snapW"]);const t=pe.toDataURL({format:"png",quality:.6,multiplier:1});return pC(["print","guide","snapH","snapW"]),t}function oC(t){pe.getActiveObject().rotate(t),pe.renderAll()}function aC(t,e){t.set("text",e),pe.renderAll()}function lC(t,e,n=""){t.set("fontFamily",e),t.set("localFamily",n),pe.renderAll()}function cC(t,e){t.set("textAlign",e),pe.renderAll()}function uC(t,e){t.set("fontStyle",e),pe.renderAll()}function fC(t,e){const{underline:n,linethrough:i,overline:r}=e;n?t.set("underline",n):t.set("underline",!1),i?t.set("linethrough",i):t.set("linethrough",!1),r?t.set("overline",r):t.set("overline",!1),pe.renderAll()}function hC(t,e){const{stroke:n,strokeWidth:i}=e;n?t.set("stroke",n):t.set("stroke",null),i?t.set("strokeWidth",i):t.set("strokeWidth",0),pe.renderAll()}function Hd(){pe.renderAll()}function dC(t){const e=pe.getObjects();for(const n of e)t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:"transparent",oriStroke:n.stroke}),n.type==="image"&&n.set({opacity:0})):n.set({opacity:0}))}function pC(t){pe.getObjects().forEach(n=>{t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:n.oriStroke}),n.type==="image"&&n.set({opacity:1})):n.set({opacity:1}))})}function Vd(){const t=ef.clientWidth,e=ef.clientHeight,n=t/e,i=pl/gl;let r;n>i?r=e/gl:r=t/pl,pe.setZoom(r),pe.setWidth(pl*r),pe.setHeight(gl*r),pe.renderAll()}function gC(t,e,n,i,r){const o=new at.fabric.Svg(i,null,{strokeWidth:1,stroke:"rgba(0,0,0,0.5)",strokeUniform:!0,scaleX:.5,scaleY:.5});o.set({left:e,top:n}).setCoords(),o.render(t)}function mC(t,e){ar=!0}function vC(){ar=!1;const t=pe.getObjects().pop();t&&(t.set("objType","draw"),uo(t)),pe.isDrawingMode=ar,pe.renderAll()}function _C(t){const e=pe.getWidth(),n=pe.getHeight(),i=e*.5,r=pe.getZoom(),o=new at.fabric.Rect({type:"rectangle",left:e/r/2,top:n/r/2,originX:"center",originY:"center",objType:"shape",width:i,height:i,fill:t});pe.add(o),pe.renderAll()}function yC(t){const e=pe.getWidth(),n=pe.getHeight(),i=pe.getZoom(),r=e*.5,o=new at.fabric.Ellipse({type:"ellipse",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",objType:"shape",rx:r/2,ry:r/2,fill:t});pe.add(o),pe.renderAll()}function bC(t){const e=pe.getWidth(),n=pe.getHeight(),i=pe.getZoom(),r=e*.5,o=new at.fabric.Triangle({type:"triangle",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",width:r,height:r,objType:"shape",fill:t});pe.add(o),pe.renderAll()}function wC(t){ar=t,pe.isDrawingMode=t,pe.renderAll()}function jy(){pe.discardActiveObject(),pe.renderAll(),Ui.set(null)}function CC(){const t=pe.getObjects().find(n=>n.objType==="snapW"),e=pe.getObjects().find(n=>n.objType==="snapH");t&&(Wo=t.left),e&&(zo=e.top)}const bs=()=>{const e=pe.getObjects().filter(r=>!r.printIgnore),n=new at.fabric.Canvas(null,{width:pe.width,height:pe.height});e.forEach(r=>{n.add(at.fabric.util.object.clone(r))});const i=n.toSVG();return n.dispose(),i};function hh(t){const e=t-1;return e*e*e+1}function yr(t){return--t*t*t*t*t+1}function Xd(t,{delay:e=0,duration:n=400,easing:i=ah}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function Ti(t,{delay:e=0,duration:n=400,easing:i=hh,x:r=0,y:o=0,opacity:h=0}={}){const a=getComputedStyle(t),s=+a.opacity,u=a.transform==="none"?"":a.transform,f=s*(1-h),[l,c]=Bd(r),[d,p]=Bd(o);return{delay:e,duration:n,easing:i,css:(m,g)=>`
			transform: ${u} translate(${(1-m)*l}${c}, ${(1-m)*d}${p});
			opacity: ${s-f*g}`}}function br(t,{delay:e=0,duration:n=400,easing:i=hh,axis:r="y"}={}){const o=getComputedStyle(t),h=+o.opacity,a=r==="y"?"height":"width",s=parseFloat(o[a]),u=r==="y"?["top","bottom"]:["left","right"],f=u.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),l=parseFloat(o[`padding${f[0]}`]),c=parseFloat(o[`padding${f[1]}`]),d=parseFloat(o[`margin${f[0]}`]),p=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),g=parseFloat(o[`border${f[1]}Width`]);return{delay:e,duration:n,easing:i,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*h};${a}: ${v*s}px;padding-${u[0]}: ${v*l}px;padding-${u[1]}: ${v*c}px;margin-${u[0]}: ${v*d}px;margin-${u[1]}: ${v*p}px;border-${u[0]}-width: ${v*m}px;border-${u[1]}-width: ${v*g}px;`}}const Br=St(!1),Ur=St(null),Yr=St([]),By=St(null);function SC(t=1){var i,r;const e=mi(Yr).length,n=mi(Yr)[e-1];return mi(Ur)||(i=n==null?void 0:n.callbacks)!=null&&i.onBeforeClose&&((r=n==null?void 0:n.callbacks)==null?void 0:r.onBeforeClose())===!1?!1:(mi(Br)&&e>0&&Ur.set(!0),Br.set(!1),By.set("pop"),TC(t),!0)}function dn(){return SC(1)}function Oo(t,e,n){mi(Ur)||(By.set("push"),mi(Br)&&mi(Yr).length&&Ur.set(!0),Br.set(!1),n!=null&&n.replace?Yr.update(i=>[...i.slice(0,i.length-1),{component:t,props:e}]):Yr.update(i=>[...i,{component:t,props:e}]))}function TC(t=1){Yr.update(e=>e.slice(0,Math.max(0,e.length-t)))}function $d(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}const kC=t=>({}),Gd=t=>({}),OC=t=>({}),qd=t=>({});function Kd(t){let e;const n=t[4].backdrop,i=ba(n,t,t[3],qd);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&Ca(i,n,r,r[3],e?wa(n,r[3],o,OC):Sa(r[3]),qd)},i(r){e||(M(i,r),e=!0)},o(r){Y(i,r),e=!1},d(r){i&&i.d(r)}}}function EC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[9].component;function h(a,s){let u={};for(let f=0;f<r.length;f+=1)u=bi(u,r[f]);return s!==void 0&&s&3&&(u=bi(u,Gr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Fl(a[9].props)]))),{props:u}}return o&&(e=hn(o,h(t)),e.$on("introstart",t[7]),e.$on("outroend",t[8])),{c(){e&&fe(e.$$.fragment),n=Je()},m(a,s){e&&ce(e,a,s),U(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[9].component)){if(e){Te();const u=e;Y(u.$$.fragment,1,0,()=>{ue(u,1)}),ke()}o?(e=hn(o,h(a,s)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,n.parentNode,n)):e=null}else if(o){const u=s&3?Gr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Fl(a[9].props)]):{};e.$set(u)}},i(a){i||(e&&M(e.$$.fragment,a),i=!0)},o(a){e&&Y(e.$$.fragment,a),i=!1},d(a){a&&j(n),e&&ue(e,a)}}}function xC(t){let e,n,i,r={ctx:t,current:null,token:null,hasCatch:!1,pending:PC,then:AC,catch:DC,value:12,blocks:[,,,]};return Gs(n=Zd(t[9].component),r),{c(){e=Je(),r.block.c()},m(o,h){U(o,e,h),r.block.m(o,r.anchor=h),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(o,h){t=o,r.ctx=t,h&1&&n!==(n=Zd(t[9].component))&&Gs(n,r)||fh(r,t,h)},i(o){i||(M(r.block),i=!0)},o(o){for(let h=0;h<3;h+=1){const a=r.blocks[h];Y(a)}i=!1},d(o){o&&j(e),r.block.d(o),r.token=null,r=null}}}function DC(t){return{c:ge,m:ge,p:ge,i:ge,o:ge,d:ge}}function AC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[12];function h(a,s){let u={};for(let f=0;f<r.length;f+=1)u=bi(u,r[f]);return s!==void 0&&s&3&&(u=bi(u,Gr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Fl(a[9].props)]))),{props:u}}return o&&(e=hn(o,h(t)),e.$on("introstart",t[5]),e.$on("outroend",t[6])),{c(){e&&fe(e.$$.fragment),n=V()},m(a,s){e&&ce(e,a,s),U(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[12])){if(e){Te();const u=e;Y(u.$$.fragment,1,0,()=>{ue(u,1)}),ke()}o?(e=hn(o,h(a,s)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,n.parentNode,n)):e=null}else if(o){const u=s&3?Gr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Fl(a[9].props)]):{};e.$set(u)}},i(a){i||(e&&M(e.$$.fragment,a),i=!0)},o(a){e&&Y(e.$$.fragment,a),i=!1},d(a){a&&j(n),e&&ue(e,a)}}}function PC(t){let e,n;const i=t[4].loading,r=ba(i,t,t[3],Gd);return{c(){r&&r.c(),e=V()},m(o,h){r&&r.m(o,h),U(o,e,h),n=!0},p(o,h){r&&r.p&&(!n||h&8)&&Ca(r,i,o,o[3],n?wa(i,o[3],h,kC):Sa(o[3]),Gd)},i(o){n||(M(r,o),n=!0)},o(o){Y(r,o),n=!1},d(o){o&&j(e),r&&r.d(o)}}}function Jd(t,e){let n,i,r,o,h,a;const s=[xC,EC],u=[];function f(l,c){return c&1&&(i=null),i==null&&(i=!!RC(l[9].component)),i?0:1}return r=f(e,-1),o=u[r]=s[r](e),{key:t,first:null,c(){n=Je(),o.c(),h=Je(),this.first=n},m(l,c){U(l,n,c),u[r].m(l,c),U(l,h,c),a=!0},p(l,c){e=l;let d=r;r=f(e,c),r===d?u[r].p(e,c):(Te(),Y(u[d],1,1,()=>{u[d]=null}),ke(),o=u[r],o?o.p(e,c):(o=u[r]=s[r](e),o.c()),M(o,1),o.m(h.parentNode,h))},i(l){a||(M(o),a=!0)},o(l){Y(o),a=!1},d(l){l&&(j(n),j(h)),u[r].d(l)}}}function MC(t){let e=[],n=new Map,i,r,o=Fe(t[0]);const h=a=>a[11];for(let a=0;a<o.length;a+=1){let s=$d(t,o,a),u=h(s);n.set(u,e[a]=Jd(u,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=Je()},m(a,s){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,s);U(a,i,s),r=!0},p(a,s){s&15&&(o=Fe(a[0]),Te(),e=Ry(e,s,h,1,a,o,n,i.parentNode,Iy,Jd,i,$d),ke())},i(a){if(!r){for(let s=0;s<o.length;s+=1)M(e[s]);r=!0}},o(a){for(let s=0;s<e.length;s+=1)Y(e[s]);r=!1},d(a){a&&j(i);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function IC(t){let e,n,i=t[0].length>0&&Kd(t);const r=t[4].default,o=ba(r,t,t[3],null),h=o||MC(t);return{c(){i&&i.c(),e=V(),h&&h.c()},m(a,s){i&&i.m(a,s),U(a,e,s),h&&h.m(a,s),n=!0},p(a,[s]){a[0].length>0?i?(i.p(a,s),s&1&&M(i,1)):(i=Kd(a),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke()),o?o.p&&(!n||s&8)&&Ca(o,r,a,a[3],n?wa(r,a[3],s,null):Sa(a[3]),null):h&&h.p&&(!n||s&15)&&h.p(a,n?s:-1)},i(a){n||(M(i),M(h,a),n=!0)},o(a){Y(i),Y(h,a),n=!1},d(a){a&&j(e),i&&i.d(a),h&&h.d(a)}}}function RC(t){return typeof t.prototype>"u"}async function Zd(t){return t().then(e=>e.default)}function FC(t,e,n){let i,r,o;Me(t,Yr,c=>n(0,i=c)),Me(t,Ur,c=>n(1,r=c)),Me(t,Br,c=>n(2,o=c));let{$$slots:h={},$$scope:a}=e;const s=()=>{_e(Br,o=!0,o)},u=()=>{_e(Ur,r=!1,r)},f=()=>{_e(Br,o=!0,o)},l=()=>{_e(Ur,r=!1,r)};return t.$$set=c=>{"$$scope"in c&&n(3,a=c.$$scope)},[i,r,o,a,h,s,u,f,l]}class LC extends qe{constructor(e){super(),Ge(this,e,FC,IC,Ve,{})}}var NC=Error,jC=EvalError,BC=RangeError,UC=ReferenceError,Uy=SyntaxError,ka=TypeError,YC=URIError,WC=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[n]=r;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,n);if(h.value!==r||h.enumerable!==!0)return!1}return!0},Qd=typeof Symbol<"u"&&Symbol,zC=WC,HC=function(){return typeof Qd!="function"||typeof Symbol!="function"||typeof Qd("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:zC()},Qc={__proto__:null,foo:{}},VC=Object,XC=function(){return{__proto__:Qc}.foo===Qc.foo&&!(Qc instanceof VC)},$C="Function.prototype.bind called on incompatible ",GC=Object.prototype.toString,qC=Math.max,KC="[object Function]",ep=function(e,n){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var o=0;o<n.length;o+=1)i[o+e.length]=n[o];return i},JC=function(e,n){for(var i=[],r=n||0,o=0;r<e.length;r+=1,o+=1)i[o]=e[r];return i},ZC=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},QC=function(e){var n=this;if(typeof n!="function"||GC.apply(n)!==KC)throw new TypeError($C+n);for(var i=JC(arguments,1),r,o=function(){if(this instanceof r){var f=n.apply(this,ep(i,arguments));return Object(f)===f?f:this}return n.apply(e,ep(i,arguments))},h=qC(0,n.length-i.length),a=[],s=0;s<h;s++)a[s]="$"+s;if(r=Function("binder","return function ("+ZC(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,r.prototype=new u,u.prototype=null}return r},eS=QC,dh=Function.prototype.bind||eS,tS=Function.prototype.call,nS=Object.prototype.hasOwnProperty,iS=dh,rS=iS.call(tS,nS),Ze,sS=NC,oS=jC,aS=BC,lS=UC,qs=Uy,Ls=ka,cS=YC,Yy=Function,eu=function(t){try{return Yy('"use strict"; return ('+t+").constructor;")()}catch{}},Wr=Object.getOwnPropertyDescriptor;if(Wr)try{Wr({},"")}catch{Wr=null}var tu=function(){throw new Ls},uS=Wr?function(){try{return arguments.callee,tu}catch{try{return Wr(arguments,"callee").get}catch{return tu}}}():tu,ls=HC(),fS=XC(),Jt=Object.getPrototypeOf||(fS?function(t){return t.__proto__}:null),ws={},hS=typeof Uint8Array>"u"||!Jt?Ze:Jt(Uint8Array),zr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ze:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ze:ArrayBuffer,"%ArrayIteratorPrototype%":ls&&Jt?Jt([][Symbol.iterator]()):Ze,"%AsyncFromSyncIteratorPrototype%":Ze,"%AsyncFunction%":ws,"%AsyncGenerator%":ws,"%AsyncGeneratorFunction%":ws,"%AsyncIteratorPrototype%":ws,"%Atomics%":typeof Atomics>"u"?Ze:Atomics,"%BigInt%":typeof BigInt>"u"?Ze:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ze:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ze:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ze:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":sS,"%eval%":eval,"%EvalError%":oS,"%Float32Array%":typeof Float32Array>"u"?Ze:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ze:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ze:FinalizationRegistry,"%Function%":Yy,"%GeneratorFunction%":ws,"%Int8Array%":typeof Int8Array>"u"?Ze:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ze:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ze:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ls&&Jt?Jt(Jt([][Symbol.iterator]())):Ze,"%JSON%":typeof JSON=="object"?JSON:Ze,"%Map%":typeof Map>"u"?Ze:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ls||!Jt?Ze:Jt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ze:Promise,"%Proxy%":typeof Proxy>"u"?Ze:Proxy,"%RangeError%":aS,"%ReferenceError%":lS,"%Reflect%":typeof Reflect>"u"?Ze:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ze:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ls||!Jt?Ze:Jt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ze:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ls&&Jt?Jt(""[Symbol.iterator]()):Ze,"%Symbol%":ls?Symbol:Ze,"%SyntaxError%":qs,"%ThrowTypeError%":uS,"%TypedArray%":hS,"%TypeError%":Ls,"%Uint8Array%":typeof Uint8Array>"u"?Ze:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ze:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ze:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ze:Uint32Array,"%URIError%":cS,"%WeakMap%":typeof WeakMap>"u"?Ze:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ze:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ze:WeakSet};if(Jt)try{null.error}catch(t){var dS=Jt(Jt(t));zr["%Error.prototype%"]=dS}var pS=function t(e){var n;if(e==="%AsyncFunction%")n=eu("async function () {}");else if(e==="%GeneratorFunction%")n=eu("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=eu("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&Jt&&(n=Jt(r.prototype))}return zr[e]=n,n},tp={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Oa=dh,Nl=rS,gS=Oa.call(Function.call,Array.prototype.concat),mS=Oa.call(Function.apply,Array.prototype.splice),np=Oa.call(Function.call,String.prototype.replace),jl=Oa.call(Function.call,String.prototype.slice),vS=Oa.call(Function.call,RegExp.prototype.exec),_S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,yS=/\\(\\)?/g,bS=function(e){var n=jl(e,0,1),i=jl(e,-1);if(n==="%"&&i!=="%")throw new qs("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new qs("invalid intrinsic syntax, expected opening `%`");var r=[];return np(e,_S,function(o,h,a,s){r[r.length]=a?np(s,yS,"$1"):h||o}),r},wS=function(e,n){var i=e,r;if(Nl(tp,i)&&(r=tp[i],i="%"+r[0]+"%"),Nl(zr,i)){var o=zr[i];if(o===ws&&(o=pS(i)),typeof o>"u"&&!n)throw new Ls("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new qs("intrinsic "+e+" does not exist!")},fo=function(e,n){if(typeof e!="string"||e.length===0)throw new Ls("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Ls('"allowMissing" argument must be a boolean');if(vS(/^%?[^%]*%?$/,e)===null)throw new qs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=bS(e),r=i.length>0?i[0]:"",o=wS("%"+r+"%",n),h=o.name,a=o.value,s=!1,u=o.alias;u&&(r=u[0],mS(i,gS([0,1],u)));for(var f=1,l=!0;f<i.length;f+=1){var c=i[f],d=jl(c,0,1),p=jl(c,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new qs("property names with quotes must have matching quotes");if((c==="constructor"||!l)&&(s=!0),r+="."+c,h="%"+r+"%",Nl(zr,h))a=zr[h];else if(a!=null){if(!(c in a)){if(!n)throw new Ls("base intrinsic for "+e+" exists, but the property is not available.");return}if(Wr&&f+1>=i.length){var m=Wr(a,c);l=!!m,l&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[c]}else l=Nl(a,c),a=a[c];l&&!s&&(zr[h]=a)}}return a},Wy={exports:{}},nu,ip;function ph(){if(ip)return nu;ip=1;var t=fo,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return nu=e,nu}var CS=fo,ml=CS("%Object.getOwnPropertyDescriptor%",!0);if(ml)try{ml([],"length")}catch{ml=null}var zy=ml,rp=ph(),SS=Uy,cs=ka,sp=zy,TS=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new cs("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new cs("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new cs("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new cs("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new cs("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new cs("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!sp&&sp(e,n);if(rp)rp(e,n,{configurable:h===null&&s?s.configurable:!h,enumerable:r===null&&s?s.enumerable:!r,value:i,writable:o===null&&s?s.writable:!o});else if(a||!r&&!o&&!h)e[n]=i;else throw new SS("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},nf=ph(),Hy=function(){return!!nf};Hy.hasArrayLengthDefineBug=function(){if(!nf)return null;try{return nf([],"length",{value:1}).length!==1}catch{return!0}};var kS=Hy,OS=fo,op=TS,ES=kS(),ap=zy,lp=ka,xS=OS("%Math.floor%"),DS=function(e,n){if(typeof e!="function")throw new lp("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||xS(n)!==n)throw new lp("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,o=!0;if("length"in e&&ap){var h=ap(e,"length");h&&!h.configurable&&(r=!1),h&&!h.writable&&(o=!1)}return(r||o||!i)&&(ES?op(e,"length",n,!0,!0):op(e,"length",n)),e};(function(t){var e=dh,n=fo,i=DS,r=ka,o=n("%Function.prototype.apply%"),h=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(h,o),s=ph(),u=n("%Math.max%");t.exports=function(c){if(typeof c!="function")throw new r("a function is required");var d=a(e,h,arguments);return i(d,1+u(0,c.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(Wy);var AS=Wy.exports,Vy=fo,Xy=AS,PS=Xy(Vy("String.prototype.indexOf")),MS=function(e,n){var i=Vy(e,!!n);return typeof i=="function"&&PS(e,".prototype.")>-1?Xy(i):i},gh=typeof Map=="function"&&Map.prototype,iu=Object.getOwnPropertyDescriptor&&gh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Bl=gh&&iu&&typeof iu.get=="function"?iu.get:null,cp=gh&&Map.prototype.forEach,mh=typeof Set=="function"&&Set.prototype,ru=Object.getOwnPropertyDescriptor&&mh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ul=mh&&ru&&typeof ru.get=="function"?ru.get:null,up=mh&&Set.prototype.forEach,IS=typeof WeakMap=="function"&&WeakMap.prototype,Ho=IS?WeakMap.prototype.has:null,RS=typeof WeakSet=="function"&&WeakSet.prototype,Vo=RS?WeakSet.prototype.has:null,FS=typeof WeakRef=="function"&&WeakRef.prototype,fp=FS?WeakRef.prototype.deref:null,LS=Boolean.prototype.valueOf,NS=Object.prototype.toString,jS=Function.prototype.toString,BS=String.prototype.match,vh=String.prototype.slice,lr=String.prototype.replace,US=String.prototype.toUpperCase,hp=String.prototype.toLowerCase,$y=RegExp.prototype.test,dp=Array.prototype.concat,hi=Array.prototype.join,YS=Array.prototype.slice,pp=Math.floor,rf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,su=Object.getOwnPropertySymbols,sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ks||!0)?Symbol.toStringTag:null,Gy=Object.prototype.propertyIsEnumerable,gp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function mp(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$y.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-pp(-t):pp(t);if(i!==t){var r=String(i),o=vh.call(e,r.length+1);return lr.call(r,n,"$&_")+"."+lr.call(lr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return lr.call(e,n,"$&_")}var of=jr,vp=of.custom,_p=Ky(vp)?vp:null,WS=function t(e,n,i,r){var o=n||{};if(nr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var h=nr(o,"customInspect")?o.customInspect:!0;if(typeof h!="boolean"&&h!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Zy(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return a?mp(e,s):s}if(typeof e=="bigint"){var u=String(e)+"n";return a?mp(e,u):u}var f=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return af(e)?"[Array]":"[Object]";var l=oT(o,i);if(typeof r>"u")r=[];else if(Jy(r,e)>=0)return"[Circular]";function c(q,G,B){if(G&&(r=YS.call(r),r.push(G)),B){var z={depth:o.depth};return nr(o,"quoteStyle")&&(z.quoteStyle=o.quoteStyle),t(q,z,i+1,r)}return t(q,o,i+1,r)}if(typeof e=="function"&&!yp(e)){var d=JS(e),p=za(e,c);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+hi.call(p,", ")+" }":"")}if(Ky(e)){var m=Ks?lr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):sf.call(e);return typeof e=="object"&&!Ks?Eo(m):m}if(iT(e)){for(var g="<"+hp.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+qy(zS(v[_].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+hp.call(String(e.nodeName))+">",g}if(af(e)){if(e.length===0)return"[]";var b=za(e,c);return l&&!sT(b)?"["+lf(b,l)+"]":"[ "+hi.call(b,", ")+" ]"}if(VS(e)){var y=za(e,c);return!("cause"in Error.prototype)&&"cause"in e&&!Gy.call(e,"cause")?"{ ["+String(e)+"] "+hi.call(dp.call("[cause]: "+c(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+hi.call(y,", ")+" }"}if(typeof e=="object"&&h){if(_p&&typeof e[_p]=="function"&&of)return of(e,{depth:f-i});if(h!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ZS(e)){var w=[];return cp&&cp.call(e,function(q,G){w.push(c(G,e,!0)+" => "+c(q,e))}),bp("Map",Bl.call(e),w,l)}if(tT(e)){var C=[];return up&&up.call(e,function(q){C.push(c(q,e))}),bp("Set",Ul.call(e),C,l)}if(QS(e))return ou("WeakMap");if(nT(e))return ou("WeakSet");if(eT(e))return ou("WeakRef");if($S(e))return Eo(c(Number(e)));if(qS(e))return Eo(c(rf.call(e)));if(GS(e))return Eo(LS.call(e));if(XS(e))return Eo(c(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Ne)return"{ [object globalThis] }";if(!HS(e)&&!yp(e)){var T=za(e,c),x=gp?gp(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",I=!x&&pn&&Object(e)===e&&pn in e?vh.call(Cr(e),8,-1):A?"Object":"",W=x||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",H=W+(I||A?"["+hi.call(dp.call([],I||[],A||[]),": ")+"] ":"");return T.length===0?H+"{}":l?H+"{"+lf(T,l)+"}":H+"{ "+hi.call(T,", ")+" }"}return String(e)};function qy(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function zS(t){return lr.call(String(t),/"/g,"&quot;")}function af(t){return Cr(t)==="[object Array]"&&(!pn||!(typeof t=="object"&&pn in t))}function HS(t){return Cr(t)==="[object Date]"&&(!pn||!(typeof t=="object"&&pn in t))}function yp(t){return Cr(t)==="[object RegExp]"&&(!pn||!(typeof t=="object"&&pn in t))}function VS(t){return Cr(t)==="[object Error]"&&(!pn||!(typeof t=="object"&&pn in t))}function XS(t){return Cr(t)==="[object String]"&&(!pn||!(typeof t=="object"&&pn in t))}function $S(t){return Cr(t)==="[object Number]"&&(!pn||!(typeof t=="object"&&pn in t))}function GS(t){return Cr(t)==="[object Boolean]"&&(!pn||!(typeof t=="object"&&pn in t))}function Ky(t){if(Ks)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!sf)return!1;try{return sf.call(t),!0}catch{}return!1}function qS(t){if(!t||typeof t!="object"||!rf)return!1;try{return rf.call(t),!0}catch{}return!1}var KS=Object.prototype.hasOwnProperty||function(t){return t in this};function nr(t,e){return KS.call(t,e)}function Cr(t){return NS.call(t)}function JS(t){if(t.name)return t.name;var e=BS.call(jS.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Jy(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function ZS(t){if(!Bl||!t||typeof t!="object")return!1;try{Bl.call(t);try{Ul.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function QS(t){if(!Ho||!t||typeof t!="object")return!1;try{Ho.call(t,Ho);try{Vo.call(t,Vo)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function eT(t){if(!fp||!t||typeof t!="object")return!1;try{return fp.call(t),!0}catch{}return!1}function tT(t){if(!Ul||!t||typeof t!="object")return!1;try{Ul.call(t);try{Bl.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function nT(t){if(!Vo||!t||typeof t!="object")return!1;try{Vo.call(t,Vo);try{Ho.call(t,Ho)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function iT(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Zy(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Zy(vh.call(t,0,e.maxStringLength),e)+i}var r=lr.call(lr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rT);return qy(r,"single",e)}function rT(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+US.call(e.toString(16))}function Eo(t){return"Object("+t+")"}function ou(t){return t+" { ? }"}function bp(t,e,n,i){var r=i?lf(n,i):hi.call(n,", ");return t+" ("+e+") {"+r+"}"}function sT(t){for(var e=0;e<t.length;e++)if(Jy(t[e],`
`)>=0)return!1;return!0}function oT(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=hi.call(Array(t.indent+1)," ");else return null;return{base:n,prev:hi.call(Array(e+1),n)}}function lf(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+hi.call(t,","+n)+`
`+e.prev}function za(t,e){var n=af(t),i=[];if(n){i.length=t.length;for(var r=0;r<t.length;r++)i[r]=nr(t,r)?e(t[r],t):""}var o=typeof su=="function"?su(t):[],h;if(Ks){h={};for(var a=0;a<o.length;a++)h["$"+o[a]]=o[a]}for(var s in t)nr(t,s)&&(n&&String(Number(s))===s&&s<t.length||Ks&&h["$"+s]instanceof Symbol||($y.call(/[^\w$]/,s)?i.push(e(s,t)+": "+e(t[s],t)):i.push(s+": "+e(t[s],t))));if(typeof su=="function")for(var u=0;u<o.length;u++)Gy.call(t,o[u])&&i.push("["+e(o[u])+"]: "+e(t[o[u]],t));return i}var Qy=fo,ho=MS,aT=WS,lT=ka,Ha=Qy("%WeakMap%",!0),Va=Qy("%Map%",!0),cT=ho("WeakMap.prototype.get",!0),uT=ho("WeakMap.prototype.set",!0),fT=ho("WeakMap.prototype.has",!0),hT=ho("Map.prototype.get",!0),dT=ho("Map.prototype.set",!0),pT=ho("Map.prototype.has",!0),_h=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},gT=function(t,e){var n=_h(t,e);return n&&n.value},mT=function(t,e,n){var i=_h(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},vT=function(t,e){return!!_h(t,e)},_T=function(){var e,n,i,r={assert:function(o){if(!r.has(o))throw new lT("Side channel does not contain "+aT(o))},get:function(o){if(Ha&&o&&(typeof o=="object"||typeof o=="function")){if(e)return cT(e,o)}else if(Va){if(n)return hT(n,o)}else if(i)return gT(i,o)},has:function(o){if(Ha&&o&&(typeof o=="object"||typeof o=="function")){if(e)return fT(e,o)}else if(Va){if(n)return pT(n,o)}else if(i)return vT(i,o);return!1},set:function(o,h){Ha&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ha),uT(e,o,h)):Va?(n||(n=new Va),dT(n,o,h)):(i||(i={key:{},next:null}),mT(i,o,h))}};return r},yT=String.prototype.replace,bT=/%20/g,au={RFC1738:"RFC1738",RFC3986:"RFC3986"},yh={default:au.RFC3986,formatters:{RFC1738:function(t){return yT.call(t,bT,"+")},RFC3986:function(t){return String(t)}},RFC1738:au.RFC1738,RFC3986:au.RFC3986},wT=yh,lu=Object.prototype.hasOwnProperty,Ir=Array.isArray,ci=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),CT=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Ir(i)){for(var r=[],o=0;o<i.length;++o)typeof i[o]<"u"&&r.push(i[o]);n.obj[n.prop]=r}}},eb=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},ST=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Ir(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!lu.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var r=e;return Ir(e)&&!Ir(n)&&(r=eb(e,i)),Ir(e)&&Ir(n)?(n.forEach(function(o,h){if(lu.call(e,h)){var a=e[h];a&&typeof a=="object"&&o&&typeof o=="object"?e[h]=t(a,o,i):e.push(o)}else e[h]=o}),e):Object.keys(n).reduce(function(o,h){var a=n[h];return lu.call(o,h)?o[h]=t(o[h],a,i):o[h]=a,o},r)},TT=function(e,n){return Object.keys(n).reduce(function(i,r){return i[r]=n[r],i},e)},kT=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},OT=function(e,n,i,r,o){if(e.length===0)return e;var h=e;if(typeof e=="symbol"?h=Symbol.prototype.toString.call(e):typeof e!="string"&&(h=String(e)),i==="iso-8859-1")return escape(h).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",s=0;s<h.length;++s){var u=h.charCodeAt(s);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===wT.RFC1738&&(u===40||u===41)){a+=h.charAt(s);continue}if(u<128){a=a+ci[u];continue}if(u<2048){a=a+(ci[192|u>>6]+ci[128|u&63]);continue}if(u<55296||u>=57344){a=a+(ci[224|u>>12]+ci[128|u>>6&63]+ci[128|u&63]);continue}s+=1,u=65536+((u&1023)<<10|h.charCodeAt(s)&1023),a+=ci[240|u>>18]+ci[128|u>>12&63]+ci[128|u>>6&63]+ci[128|u&63]}return a},ET=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],r=0;r<n.length;++r)for(var o=n[r],h=o.obj[o.prop],a=Object.keys(h),s=0;s<a.length;++s){var u=a[s],f=h[u];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(n.push({obj:h,prop:u}),i.push(f))}return CT(n),e},xT=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},DT=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},AT=function(e,n){return[].concat(e,n)},PT=function(e,n){if(Ir(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(n(e[r]));return i}return n(e)},tb={arrayToObject:eb,assign:TT,combine:AT,compact:ET,decode:kT,encode:OT,isBuffer:DT,isRegExp:xT,maybeMap:PT,merge:ST},nb=_T,vl=tb,Xo=yh,MT=Object.prototype.hasOwnProperty,ib={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},fi=Array.isArray,IT=Array.prototype.push,rb=function(t,e){IT.apply(t,fi(e)?e:[e])},RT=Date.prototype.toISOString,wp=Xo.default,Gt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:vl.encode,encodeValuesOnly:!1,format:wp,formatter:Xo.formatters[wp],indices:!1,serializeDate:function(e){return RT.call(e)},skipNulls:!1,strictNullHandling:!1},FT=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},cu={},LT=function t(e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_){for(var b=e,y=_,w=0,C=!1;(y=y.get(cu))!==void 0&&!C;){var T=y.get(e);if(w+=1,typeof T<"u"){if(T===w)throw new RangeError("Cyclic object value");C=!0}typeof y.get(cu)>"u"&&(w=0)}if(typeof f=="function"?b=f(n,b):b instanceof Date?b=d(b):i==="comma"&&fi(b)&&(b=vl.maybeMap(b,function(P){return P instanceof Date?d(P):P})),b===null){if(h)return u&&!g?u(n,Gt.encoder,v,"key",p):n;b=""}if(FT(b)||vl.isBuffer(b)){if(u){var x=g?n:u(n,Gt.encoder,v,"key",p);return[m(x)+"="+m(u(b,Gt.encoder,v,"value",p))]}return[m(n)+"="+m(String(b))]}var A=[];if(typeof b>"u")return A;var I;if(i==="comma"&&fi(b))g&&u&&(b=vl.maybeMap(b,u)),I=[{value:b.length>0?b.join(",")||null:void 0}];else if(fi(f))I=f;else{var W=Object.keys(b);I=l?W.sort(l):W}var H=s?n.replace(/\./g,"%2E"):n,q=r&&fi(b)&&b.length===1?H+"[]":H;if(o&&fi(b)&&b.length===0)return q+"[]";for(var G=0;G<I.length;++G){var B=I[G],z=typeof B=="object"&&typeof B.value<"u"?B.value:b[B];if(!(a&&z===null)){var ee=c&&s?B.replace(/\./g,"%2E"):B,oe=fi(b)?typeof i=="function"?i(q,ee):q:q+(c?"."+ee:"["+ee+"]");_.set(e,w);var O=nb();O.set(cu,_),rb(A,t(z,oe,i,r,o,h,a,s,i==="comma"&&g&&fi(b)?null:u,f,l,c,d,p,m,g,v,O))}}return A},NT=function(e){if(!e)return Gt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Gt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Xo.default;if(typeof e.format<"u"){if(!MT.call(Xo.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Xo.formatters[i],o=Gt.filter;(typeof e.filter=="function"||fi(e.filter))&&(o=e.filter);var h;if(e.arrayFormat in ib?h=e.arrayFormat:"indices"in e?h=e.indices?"indices":"repeat":h=Gt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Gt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Gt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Gt.allowEmptyArrays,arrayFormat:h,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Gt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Gt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Gt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Gt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Gt.encodeValuesOnly,filter:o,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Gt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Gt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gt.strictNullHandling}},jT=function(t,e){var n=t,i=NT(e),r,o;typeof i.filter=="function"?(o=i.filter,n=o("",n)):fi(i.filter)&&(o=i.filter,r=o);var h=[];if(typeof n!="object"||n===null)return"";var a=ib[i.arrayFormat],s=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var u=nb(),f=0;f<r.length;++f){var l=r[f];i.skipNulls&&n[l]===null||rb(h,LT(n[l],l,a,s,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var c=h.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""},Js=tb,cf=Object.prototype.hasOwnProperty,BT=Array.isArray,Ft={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Js.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},UT=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},sb=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},YT="utf8=%26%2310003%3B",WT="utf8=%E2%9C%93",zT=function(e,n){var i={__proto__:null},r=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=n.parameterLimit===1/0?void 0:n.parameterLimit,h=r.split(n.delimiter,o),a=-1,s,u=n.charset;if(n.charsetSentinel)for(s=0;s<h.length;++s)h[s].indexOf("utf8=")===0&&(h[s]===WT?u="utf-8":h[s]===YT&&(u="iso-8859-1"),a=s,s=h.length);for(s=0;s<h.length;++s)if(s!==a){var f=h[s],l=f.indexOf("]="),c=l===-1?f.indexOf("="):l+1,d,p;c===-1?(d=n.decoder(f,Ft.decoder,u,"key"),p=n.strictNullHandling?null:""):(d=n.decoder(f.slice(0,c),Ft.decoder,u,"key"),p=Js.maybeMap(sb(f.slice(c+1),n),function(g){return n.decoder(g,Ft.decoder,u,"value")})),p&&n.interpretNumericEntities&&u==="iso-8859-1"&&(p=UT(p)),f.indexOf("[]=")>-1&&(p=BT(p)?[p]:p);var m=cf.call(i,d);m&&n.duplicates==="combine"?i[d]=Js.combine(i[d],p):(!m||n.duplicates==="last")&&(i[d]=p)}return i},HT=function(t,e,n,i){for(var r=i?e:sb(e,n),o=t.length-1;o>=0;--o){var h,a=t[o];if(a==="[]"&&n.parseArrays)h=n.allowEmptyArrays&&r===""?[]:[].concat(r);else{h=n.plainObjects?Object.create(null):{};var s=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=n.decodeDotInKeys?s.replace(/%2E/g,"."):s,f=parseInt(u,10);!n.parseArrays&&u===""?h={0:r}:!isNaN(f)&&a!==u&&String(f)===u&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(h=[],h[f]=r):u!=="__proto__"&&(h[u]=r)}r=h}return r},VT=function(e,n,i,r){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,h=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=i.depth>0&&h.exec(o),u=s?o.slice(0,s.index):o,f=[];if(u){if(!i.plainObjects&&cf.call(Object.prototype,u)&&!i.allowPrototypes)return;f.push(u)}for(var l=0;i.depth>0&&(s=a.exec(o))!==null&&l<i.depth;){if(l+=1,!i.plainObjects&&cf.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+o.slice(s.index)+"]"),HT(f,n,i,r)}},XT=function(e){if(!e)return Ft;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Ft.charset:e.charset,i=typeof e.duplicates>"u"?Ft.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ft.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ft.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ft.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ft.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ft.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ft.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ft.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ft.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ft.decoder,delimiter:typeof e.delimiter=="string"||Js.isRegExp(e.delimiter)?e.delimiter:Ft.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ft.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ft.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ft.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ft.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ft.strictNullHandling}},$T=function(t,e){var n=XT(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?zT(t,n):t,r=n.plainObjects?Object.create(null):{},o=Object.keys(i),h=0;h<o.length;++h){var a=o[h],s=VT(a,i[a],n,typeof t=="string");r=Js.merge(r,s,n)}return n.allowSparse===!0?r:Js.compact(r)},GT=jT,qT=$T,KT=yh,JT={formats:KT,parse:qT,stringify:GT};const bh=W1(JT);let wn="https://podiz-strapi-uieqvbv3ya-du.a.run.app";async function ZT(t){try{return{data:await(await fetch(`${wn}/publishes/${t}`)).json()}}catch(e){return{error:e}}}async function QT(t){try{return{data:await(await fetch(`${wn}/shops/${t}`)).json()}}catch(e){return{error:e}}}async function ek(t,e={perPage:24,current:0,keyword:"",categories:[]}){try{const n=[];if(e.keyword&&n.push({_or:[{name_contains:e.keyword},{tag_contains:e.keyword}]}),n.push({shop:t}),e.categories.length){const s=[];e.categories.forEach(u=>{s.push({categories_contains:u})}),n.push({_or:{...s}})}const i=bh.stringify({_where:{...n},_start:e.perPage*e.current,_sort:"created_at:DESC",_limit:e.perPage}),r=await fetch(`${wn}/cliparts?${i}`),o=await fetch(`${wn}/cliparts/count?${i}`),h=await r.json(),a=await o.json();return{data:h,count:a}}catch(n){return{error:n}}}const tk=async t=>{try{return{data:await(await fetch(`${wn}/fonts?shop=${t}`)).json()}}catch(e){return{error:e}}},nk=async t=>{try{const n=await(await fetch(`${wn}/shop-default-fonts?shop=${t}`)).json();return n.length||n.push({shop:t,defaultFonts:[]}),{data:n[0]}}catch(e){return{error:`  . ${e}`}}},ob=async t=>{try{return{data:await(await fetch(`${wn}/editor-data/${t}`)).json()}}catch(e){return{error:e}}},ik=async t=>{try{const e=t.id?"PUT":"POST",n=t.id?`/${t.id}`:"";return{data:await(await fetch(`${wn}/editor-data${n}`,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}}catch{return{error:"  ."}}},rk=async(t,e=null)=>{try{return{data:await(e?await fetch(`${wn}/colors?shop=${t}&colorGroup=${e}`):await fetch(`${wn}/colors?shop=${t}`)).json()}}catch(n){return{error:n}}},sk=async t=>{try{return{data:await(await fetch(`${wn}/composites?print=${t}`)).json(),error:null}}catch(e){return{error:e}}},ok=async({provider:t,productno:e,shopid:n})=>{try{const i=[];t?i.push({selectApi:t}):i.push({selectApi_null:!0}),e?i.push({productNo:e}):i.push({productNo_null:!0}),n&&i.push({shop:n});const r=bh.stringify({_where:{...i},_sort:"created_at:DESC"});return{data:await(await fetch(`${wn}/editor-product-links?${r}`)).json(),error:null}}catch(i){return{error:i}}};async function ak(t,e,n=null,i={perPage:24,current:0,keyword:""}){try{let r=[{cafe24MallId:t},{cafe24MemberId:e}];if(console.log({selectedPeriod:n}),n){const f=new Date,l=24*60*60*1e3,c=new Date(f.getTime()-n*30*l);r.push({created_at_gte:c.toISOString()})}console.log({where:r});const o=bh.stringify({_where:r,_start:i.perPage*i.current,_sort:"created_at:DESC",_limit:i.perPage}),h=await fetch(`${wn}/editor-data?${o}`),a=await fetch(`${wn}/editor-data/count?${o}`),s=await h.json(),u=await a.json();return{data:s,count:u}}catch(r){return console.log({error:r}),{error:r}}}async function lk(t){try{return{data:await(await fetch(`${wn}/editor-product-links/templates/${t}`)).json(),error:null}}catch(e){return{error:e}}}const po=St(null),$o=St([]),uu=St([]),Le=St({}),Go=St([]),di=St([]),jo=St(0),ia=St(0),Ii=St({options:null,product:null}),Yt=St(null),Yl=St(null),Cp=St(null),Ns=St(null);async function ck(t){const{data:e,error:n}=await QT(t);if(n){console.error(n);return}po.set(e)}const qo=/^[a-z0-9]+(-[a-z0-9]+)*$/,fc=(t,e,n,i="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),s=r.pop(),u={provider:r.length>0?r[0]:i,prefix:s,name:a};return e&&!_l(u)?null:u}const o=r[0],h=o.split("-");if(h.length>1){const a={provider:i,prefix:h.shift(),name:h.join("-")};return e&&!_l(a)?null:a}if(n&&i===""){const a={provider:i,prefix:"",name:o};return e&&!_l(a,n)?null:a}return null},_l=(t,e)=>t?!!((t.provider===""||t.provider.match(qo))&&(e&&t.prefix===""||t.prefix.match(qo))&&t.name.match(qo)):!1,ab=Object.freeze({left:0,top:0,width:16,height:16}),Wl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),hc=Object.freeze({...ab,...Wl}),uf=Object.freeze({...hc,body:"",hidden:!1});function uk(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(n.rotate=i),n}function Sp(t,e){const n=uk(t,e);for(const i in uf)i in Wl?i in t&&!(i in n)&&(n[i]=Wl[i]):i in e?n[i]=e[i]:i in t&&(n[i]=t[i]);return n}function fk(t,e){const n=t.icons,i=t.aliases||Object.create(null),r=Object.create(null);function o(h){if(n[h])return r[h]=[];if(!(h in r)){r[h]=null;const a=i[h]&&i[h].parent,s=a&&o(a);s&&(r[h]=[a].concat(s))}return r[h]}return(e||Object.keys(n).concat(Object.keys(i))).forEach(o),r}function hk(t,e,n){const i=t.icons,r=t.aliases||Object.create(null);let o={};function h(a){o=Sp(i[a]||r[a],o)}return h(e),n.forEach(h),Sp(t,o)}function lb(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(r=>{e(r,null),n.push(r)});const i=fk(t);for(const r in i){const o=i[r];o&&(e(r,hk(t,r,o)),n.push(r))}return n}const dk={provider:"",aliases:{},not_found:{},...ab};function fu(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function cb(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!fu(t,dk))return null;const n=e.icons;for(const r in n){const o=n[r];if(!r.match(qo)||typeof o.body!="string"||!fu(o,uf))return null}const i=e.aliases||Object.create(null);for(const r in i){const o=i[r],h=o.parent;if(!r.match(qo)||typeof h!="string"||!n[h]&&!i[h]||!fu(o,uf))return null}return e}const Tp=Object.create(null);function pk(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function qr(t,e){const n=Tp[t]||(Tp[t]=Object.create(null));return n[e]||(n[e]=pk(t,e))}function wh(t,e){return cb(e)?lb(e,(n,i)=>{i?t.icons[n]=i:t.missing.add(n)}):[]}function gk(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let ra=!1;function ub(t){return typeof t=="boolean"&&(ra=t),ra}function mk(t){const e=typeof t=="string"?fc(t,!0,ra):t;if(e){const n=qr(e.provider,e.prefix),i=e.name;return n.icons[i]||(n.missing.has(i)?null:void 0)}}function vk(t,e){const n=fc(t,!0,ra);if(!n)return!1;const i=qr(n.provider,n.prefix);return gk(i,n.name,e)}function _k(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),ra&&!e&&!t.prefix){let r=!1;return cb(t)&&(t.prefix="",lb(t,(o,h)=>{h&&vk(o,h)&&(r=!0)})),r}const n=t.prefix;if(!_l({provider:e,prefix:n,name:"a"}))return!1;const i=qr(e,n);return!!wh(i,t)}const fb=Object.freeze({width:null,height:null}),hb=Object.freeze({...fb,...Wl}),yk=/(-?[0-9.]*[0-9]+[0-9.]*)/g,bk=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function kp(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const i=t.split(yk);if(i===null||!i.length)return t;const r=[];let o=i.shift(),h=bk.test(o);for(;;){if(h){const a=parseFloat(o);isNaN(a)?r.push(o):r.push(Math.ceil(a*e*n)/n)}else r.push(o);if(o=i.shift(),o===void 0)return r.join("");h=!h}}function wk(t,e="defs"){let n="";const i=t.indexOf("<"+e);for(;i>=0;){const r=t.indexOf(">",i),o=t.indexOf("</"+e);if(r===-1||o===-1)break;const h=t.indexOf(">",o);if(h===-1)break;n+=t.slice(r+1,o).trim(),t=t.slice(0,i).trim()+t.slice(h+1)}return{defs:n,content:t}}function Ck(t,e){return t?"<defs>"+t+"</defs>"+e:e}function Sk(t,e,n){const i=wk(t);return Ck(i.defs,e+i.content+n)}const Tk=t=>t==="unset"||t==="undefined"||t==="none";function kk(t,e){const n={...hc,...t},i={...hb,...e},r={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,i].forEach(m=>{const g=[],v=m.hFlip,_=m.vFlip;let b=m.rotate;v?_?b+=2:(g.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),g.push("scale(-1 1)"),r.top=r.left=0):_&&(g.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),g.push("scale(1 -1)"),r.top=r.left=0);let y;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:y=r.height/2+r.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:y=r.width/2+r.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}b%2===1&&(r.left!==r.top&&(y=r.left,r.left=r.top,r.top=y),r.width!==r.height&&(y=r.width,r.width=r.height,r.height=y)),g.length&&(o=Sk(o,'<g transform="'+g.join(" ")+'">',"</g>"))});const h=i.width,a=i.height,s=r.width,u=r.height;let f,l;h===null?(l=a===null?"1em":a==="auto"?u:a,f=kp(l,s/u)):(f=h==="auto"?s:h,l=a===null?kp(f,u/s):a==="auto"?u:a);const c={},d=(m,g)=>{Tk(g)||(c[m]=g.toString())};d("width",f),d("height",l);const p=[r.left,r.top,s,u];return c.viewBox=p.join(" "),{attributes:c,viewBox:p,body:o}}const Ok=/\sid="(\S+)"/g,Ek="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let xk=0;function Dk(t,e=Ek){const n=[];let i;for(;i=Ok.exec(t);)n.push(i[1]);if(!n.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const h=typeof e=="function"?e(o):e+(xk++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+h+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const ff=Object.create(null);function Ak(t,e){ff[t]=e}function hf(t){return ff[t]||ff[""]}function Ch(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const Sh=Object.create(null),xo=["https://api.simplesvg.com","https://api.unisvg.com"],yl=[];for(;xo.length>0;)xo.length===1||Math.random()>.5?yl.push(xo.shift()):yl.push(xo.pop());Sh[""]=Ch({resources:["https://api.iconify.design"].concat(yl)});function Pk(t,e){const n=Ch(e);return n===null?!1:(Sh[t]=n,!0)}function Th(t){return Sh[t]}const Mk=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Op=Mk();function Ik(t,e){const n=Th(t);if(!n)return 0;let i;if(!n.maxURL)i=0;else{let r=0;n.resources.forEach(h=>{r=Math.max(r,h.length)});const o=e+".json?icons=";i=n.maxURL-r-n.path.length-o.length}return i}function Rk(t){return t===404}const Fk=(t,e,n)=>{const i=[],r=Ik(t,e),o="icons";let h={type:o,provider:t,prefix:e,icons:[]},a=0;return n.forEach((s,u)=>{a+=s.length+1,a>=r&&u>0&&(i.push(h),h={type:o,provider:t,prefix:e,icons:[]},a=s.length),h.icons.push(s)}),i.push(h),i};function Lk(t){if(typeof t=="string"){const e=Th(t);if(e)return e.path}return"/"}const Nk=(t,e,n)=>{if(!Op){n("abort",424);return}let i=Lk(e.provider);switch(e.type){case"icons":{const o=e.prefix,a=e.icons.join(","),s=new URLSearchParams({icons:a});i+=o+".json?"+s.toString();break}case"custom":{const o=e.uri;i+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let r=503;Op(t+i).then(o=>{const h=o.status;if(h!==200){setTimeout(()=>{n(Rk(h)?"abort":"next",h)});return}return r=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",r)});return}setTimeout(()=>{n("success",o)})}).catch(()=>{n("next",r)})},jk={prepare:Fk,send:Nk};function Bk(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((r,o)=>r.provider!==o.provider?r.provider.localeCompare(o.provider):r.prefix!==o.prefix?r.prefix.localeCompare(o.prefix):r.name.localeCompare(o.name));let i={provider:"",prefix:"",name:""};return t.forEach(r=>{if(i.name===r.name&&i.prefix===r.prefix&&i.provider===r.provider)return;i=r;const o=r.provider,h=r.prefix,a=r.name,s=n[o]||(n[o]=Object.create(null)),u=s[h]||(s[h]=qr(o,h));let f;a in u.icons?f=e.loaded:h===""||u.missing.has(a)?f=e.missing:f=e.pending;const l={provider:o,prefix:h,name:a};f.push(l)}),e}function db(t,e){t.forEach(n=>{const i=n.loaderCallbacks;i&&(n.loaderCallbacks=i.filter(r=>r.id!==e))})}function Uk(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const i=t.provider,r=t.prefix;e.forEach(o=>{const h=o.icons,a=h.pending.length;h.pending=h.pending.filter(s=>{if(s.prefix!==r)return!0;const u=s.name;if(t.icons[u])h.loaded.push({provider:i,prefix:r,name:u});else if(t.missing.has(u))h.missing.push({provider:i,prefix:r,name:u});else return n=!0,!0;return!1}),h.pending.length!==a&&(n||db([t],o.id),o.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),o.abort))})}))}let Yk=0;function Wk(t,e,n){const i=Yk++,r=db.bind(null,n,i);if(!e.pending.length)return r;const o={id:i,icons:e,callback:t,abort:r};return n.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(o)}),r}function zk(t,e=!0,n=!1){const i=[];return t.forEach(r=>{const o=typeof r=="string"?fc(r,e,n):r;o&&i.push(o)}),i}var Hk={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Vk(t,e,n,i){const r=t.resources.length,o=t.random?Math.floor(Math.random()*r):t.index;let h;if(t.random){let C=t.resources.slice(0);for(h=[];C.length>1;){const T=Math.floor(Math.random()*C.length);h.push(C[T]),C=C.slice(0,T).concat(C.slice(T+1))}h=h.concat(C)}else h=t.resources.slice(o).concat(t.resources.slice(0,o));const a=Date.now();let s="pending",u=0,f,l=null,c=[],d=[];typeof i=="function"&&d.push(i);function p(){l&&(clearTimeout(l),l=null)}function m(){s==="pending"&&(s="aborted"),p(),c.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),c=[]}function g(C,T){T&&(d=[]),typeof C=="function"&&d.push(C)}function v(){return{startTime:a,payload:e,status:s,queriesSent:u,queriesPending:c.length,subscribe:g,abort:m}}function _(){s="failed",d.forEach(C=>{C(void 0,f)})}function b(){c.forEach(C=>{C.status==="pending"&&(C.status="aborted")}),c=[]}function y(C,T,x){const A=T!=="success";switch(c=c.filter(I=>I!==C),s){case"pending":break;case"failed":if(A||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){f=x,_();return}if(A){f=x,c.length||(h.length?w():_());return}if(p(),b(),!t.random){const I=t.resources.indexOf(C.resource);I!==-1&&I!==t.index&&(t.index=I)}s="completed",d.forEach(I=>{I(x)})}function w(){if(s!=="pending")return;p();const C=h.shift();if(C===void 0){if(c.length){l=setTimeout(()=>{p(),s==="pending"&&(b(),_())},t.timeout);return}_();return}const T={status:"pending",resource:C,callback:(x,A)=>{y(T,x,A)}};c.push(T),u++,l=setTimeout(w,t.rotate),n(C,e,T.callback)}return setTimeout(w),v}function pb(t){const e={...Hk,...t};let n=[];function i(){n=n.filter(a=>a().status==="pending")}function r(a,s,u){const f=Vk(e,a,s,(l,c)=>{i(),u&&u(l,c)});return n.push(f),f}function o(a){return n.find(s=>a(s))||null}return{query:r,find:o,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:i}}function Ep(){}const hu=Object.create(null);function Xk(t){if(!hu[t]){const e=Th(t);if(!e)return;const n=pb(e),i={config:e,redundancy:n};hu[t]=i}return hu[t]}function $k(t,e,n){let i,r;if(typeof t=="string"){const o=hf(t);if(!o)return n(void 0,424),Ep;r=o.send;const h=Xk(t);h&&(i=h.redundancy)}else{const o=Ch(t);if(o){i=pb(o);const h=t.resources?t.resources[0]:"",a=hf(h);a&&(r=a.send)}}return!i||!r?(n(void 0,424),Ep):i.query(e,r,n)().abort}const xp="iconify2",sa="iconify",gb=sa+"-count",Dp=sa+"-version",mb=36e5,Gk=168,qk=50;function df(t,e){try{return t.getItem(e)}catch{}}function kh(t,e,n){try{return t.setItem(e,n),!0}catch{}}function Ap(t,e){try{t.removeItem(e)}catch{}}function pf(t,e){return kh(t,gb,e.toString())}function gf(t){return parseInt(df(t,gb))||0}const dc={local:!0,session:!0},vb={local:new Set,session:new Set};let Oh=!1;function Kk(t){Oh=t}let Xa=typeof window>"u"?{}:window;function _b(t){const e=t+"Storage";try{if(Xa&&Xa[e]&&typeof Xa[e].length=="number")return Xa[e]}catch{}dc[t]=!1}function yb(t,e){const n=_b(t);if(!n)return;const i=df(n,Dp);if(i!==xp){if(i){const a=gf(n);for(let s=0;s<a;s++)Ap(n,sa+s.toString())}kh(n,Dp,xp),pf(n,0);return}const r=Math.floor(Date.now()/mb)-Gk,o=a=>{const s=sa+a.toString(),u=df(n,s);if(typeof u=="string"){try{const f=JSON.parse(u);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>r&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,a))return!0}catch{}Ap(n,s)}};let h=gf(n);for(let a=h-1;a>=0;a--)o(a)||(a===h-1?(h--,pf(n,h)):vb[t].add(a))}function bb(){if(!Oh){Kk(!0);for(const t in dc)yb(t,e=>{const n=e.data,i=e.provider,r=n.prefix,o=qr(i,r);if(!wh(o,n).length)return!1;const h=n.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,h):h,!0})}}function Jk(t,e){const n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(const i in dc)yb(i,r=>{const o=r.data;return r.provider!==t.provider||o.prefix!==t.prefix||o.lastModified===e});return!0}function Zk(t,e){Oh||bb();function n(i){let r;if(!dc[i]||!(r=_b(i)))return;const o=vb[i];let h;if(o.size)o.delete(h=Array.from(o).shift());else if(h=gf(r),h>=qk||!pf(r,h+1))return;const a={cached:Math.floor(Date.now()/mb),provider:t.provider,data:e};return kh(r,sa+h.toString(),JSON.stringify(a))}e.lastModified&&!Jk(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),n("local")||n("session"))}function Pp(){}function Qk(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,Uk(t)}))}function eO(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:i}=t,r=t.iconsToLoad;delete t.iconsToLoad;let o;if(!r||!(o=hf(n)))return;o.prepare(n,i,r).forEach(a=>{$k(n,a,s=>{if(typeof s!="object")a.icons.forEach(u=>{t.missing.add(u)});else try{const u=wh(t,s);if(!u.length)return;const f=t.pendingIcons;f&&u.forEach(l=>{f.delete(l)}),Zk(t,s)}catch(u){console.error(u)}Qk(t)})})}))}const tO=(t,e)=>{const n=zk(t,!0,ub()),i=Bk(n);if(!i.pending.length){let s=!0;return e&&setTimeout(()=>{s&&e(i.loaded,i.missing,i.pending,Pp)}),()=>{s=!1}}const r=Object.create(null),o=[];let h,a;return i.pending.forEach(s=>{const{provider:u,prefix:f}=s;if(f===a&&u===h)return;h=u,a=f,o.push(qr(u,f));const l=r[u]||(r[u]=Object.create(null));l[f]||(l[f]=[])}),i.pending.forEach(s=>{const{provider:u,prefix:f,name:l}=s,c=qr(u,f),d=c.pendingIcons||(c.pendingIcons=new Set);d.has(l)||(d.add(l),r[u][f].push(l))}),o.forEach(s=>{const{provider:u,prefix:f}=s;r[u][f].length&&eO(s,r[u][f])}),e?Wk(e,i,o):Pp};function nO(t,e){const n={...t};for(const i in e){const r=e[i],o=typeof r;i in fb?(r===null||r&&(o==="string"||o==="number"))&&(n[i]=r):o===typeof n[i]&&(n[i]=i==="rotate"?r%4:r)}return n}const iO=/[\s,]+/;function rO(t,e){e.split(iO).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function sO(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function i(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(t);return isNaN(r)?0:i(r)}else if(n!==t){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let o=parseFloat(t.slice(0,t.length-n.length));return isNaN(o)?0:(o=o/r,o%1===0?i(o):0)}}return e}function oO(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)n+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function aO(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function lO(t){return"data:image/svg+xml,"+aO(t)}function cO(t){return'url("'+lO(t)+'")'}const Mp={...hb,inline:!1},uO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},fO={display:"inline-block"},mf={"background-color":"currentColor"},wb={"background-color":"transparent"},Ip={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Rp={"-webkit-mask":mf,mask:mf,background:wb};for(const t in Rp){const e=Rp[t];for(const n in Ip)e[t+"-"+n]=Ip[n]}function hO(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function dO(t,e){const n=nO(Mp,e),i=e.mode||"svg",r=i==="svg"?{...uO}:{};t.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let o=typeof e.style=="string"?e.style:"";for(let v in e){const _=e[v];if(_!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[v]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&rO(n,_);break;case"color":o=o+(o.length>0&&o.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?n[v]=sO(_):typeof _=="number"&&(n[v]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete r["aria-hidden"];break;default:if(v.slice(0,3)==="on:")break;Mp[v]===void 0&&(r[v]=_)}}const h=kk(t,n),a=h.attributes;if(n.inline&&(o="vertical-align: -0.125em; "+o),i==="svg"){Object.assign(r,a),o!==""&&(r.style=o);let v=0,_=e.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:r,body:Dk(h.body,_?()=>_+"ID"+v++:"iconifySvelte")}}const{body:s,width:u,height:f}=t,l=i==="mask"||(i==="bg"?!1:s.indexOf("currentColor")!==-1),c=oO(s,{...a,width:u+"",height:f+""}),p={"--svg":cO(c)},m=v=>{const _=a[v];_&&(p[v]=hO(_))};m("width"),m("height"),Object.assign(p,fO,l?mf:wb);let g="";for(const v in p)g+=v+": "+p[v]+";";return r.style=g+o,{svg:!1,attributes:r}}ub(!0);Ak("",jk);if(typeof document<"u"&&typeof window<"u"){bb();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!_k(i))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const i="IconifyProviders["+n+"] is invalid.";try{const r=e[n];if(typeof r!="object"||!r||r.resources===void 0)continue;Pk(n,r)||console.error(i)}catch{console.error(i)}}}}function pO(t,e,n,i,r){function o(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",o(),{data:{...hc,...t}};let h;if(typeof t!="string"||(h=fc(t,!1,!0))===null)return o(),null;const a=mk(h);if(!a)return n&&(!e.loading||e.loading.name!==t)&&(o(),e.name="",e.loading={name:t,abort:tO([h],i)}),null;o(),e.name!==t&&(e.name=t,r&&!e.destroyed&&r(t));const s=["iconify"];return h.prefix!==""&&s.push("iconify--"+h.prefix),h.provider!==""&&s.push("iconify--"+h.provider),{data:a,classes:s}}function gO(t,e){return t?dO({...hc,...t},e):null}function Fp(t){let e;function n(o,h){return o[0].svg?vO:mO}let i=n(t),r=i(t);return{c(){r.c(),e=Je()},m(o,h){r.m(o,h),U(o,e,h)},p(o,h){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&j(e),r.d(o)}}}function mO(t){let e,n=[t[0].attributes],i={};for(let r=0;r<n.length;r+=1)i=bi(i,n[r]);return{c(){e=E("span"),Ml(e,i)},m(r,o){U(r,e,o)},p(r,o){Ml(e,i=Gr(n,[o&1&&r[0].attributes]))},d(r){r&&j(e)}}}function vO(t){let e,n=t[0].body+"",i=[t[0].attributes],r={};for(let o=0;o<i.length;o+=1)r=bi(r,i[o]);return{c(){e=w1("svg"),Ud(e,r)},m(o,h){U(o,e,h),e.innerHTML=n},p(o,h){h&1&&n!==(n=o[0].body+"")&&(e.innerHTML=n),Ud(e,r=Gr(i,[h&1&&o[0].attributes]))},d(o){o&&j(e)}}}function _O(t){let e,n=t[0]&&Fp(t);return{c(){n&&n.c(),e=Je()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=Fp(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&j(e),n&&n.d(i)}}}function yO(t,e,n){const i={name:"",loading:null,destroyed:!1};let r=!1,o=0,h;const a=u=>{typeof e.onLoad=="function"&&e.onLoad(u),Xt()("load",{icon:u})};function s(){n(3,o++,o)}return xi(()=>{n(2,r=!0)}),Di(()=>{n(1,i.destroyed=!0,i),i.loading&&(i.loading.abort(),n(1,i.loading=null,i))}),t.$$set=u=>{n(6,e=bi(bi({},e),jd(u)))},t.$$.update=()=>{{const u=pO(e.icon,i,r,s,a);n(0,h=u?gO(u.data,e):null),h&&u.classes&&n(0,h.attributes.class=(typeof e.class=="string"?e.class+" ":"")+u.classes.join(" "),h)}},e=jd(e),[h,i,r,o]}class Ce extends qe{constructor(e){super(),Ge(this,e,yO,_O,Ve,{})}}function bO(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;return f=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("div"),a=E("input"),s=V(),u=E("button"),fe(f.$$.fragment),S(r,"id","minmax-range"),S(r,"type","range"),S(r,"min","0"),S(r,"max","360"),S(r,"step","1"),S(r,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(i,"class","w-full mt-3"),S(a,"type","text"),S(a,"class","input w-full text-center"),S(u,"type","button"),S(u,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){U(p,e,m),k(e,n),k(n,i),k(i,r),Re(r,t[1]),k(n,o),k(n,h),k(h,a),Re(a,t[1]),k(n,s),k(n,u),ce(f,u,null),l=!0,c||(d=[Z(r,"change",t[3]),Z(r,"input",t[3]),Z(r,"input",t[4]),Z(a,"input",t[5]),Z(a,"input",t[6]),Z(u,"click",t[7])],c=!0)},p(p,[m]){m&2&&Re(r,p[1]),m&2&&a.value!==p[1]&&Re(a,p[1])},i(p){l||(M(f.$$.fragment,p),l=!0)},o(p){Y(f.$$.fragment,p),l=!1},d(p){p&&j(e),ue(f),c=!1,Ue(d)}}}function wO(t,e,n){let{selectProperty:i=null}=e,{sliderValue:r=0}=e;const o=Xt();function h(){o("onChangeRotate",{value:r})}Di(()=>{n(0,i=null)});function a(){r=xy(this.value),n(1,r)}const s=()=>h();function u(){r=this.value,n(1,r)}const f=()=>h(),l=()=>n(0,i=null);return t.$$set=c=>{"selectProperty"in c&&n(0,i=c.selectProperty),"sliderValue"in c&&n(1,r=c.sliderValue)},[i,r,h,a,s,u,f,l]}class CO extends qe{constructor(e){super(),Ge(this,e,wO,bO,Ve,{selectProperty:0,sliderValue:1})}}var SO={grad:.9,turn:360,rad:360/(2*Math.PI)},Ri=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},en=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Vn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Cb=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Lp=function(t){return{r:Vn(t.r,0,255),g:Vn(t.g,0,255),b:Vn(t.b,0,255),a:Vn(t.a)}},du=function(t){return{r:en(t.r),g:en(t.g),b:en(t.b),a:en(t.a,3)}},TO=/^#([0-9a-f]{3,8})$/i,$a=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Sb=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),h=o-Math.min(e,n,i),a=h?o===e?(n-i)/h:o===n?2+(i-e)/h:4+(e-n)/h:0;return{h:60*(a<0?a+6:a),s:o?h/o*100:0,v:o/255*100,a:r}},Tb=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),h=i*(1-n),a=i*(1-(e-o)*n),s=i*(1-(1-e+o)*n),u=o%6;return{r:255*[i,a,h,h,s,i][u],g:255*[s,i,i,a,h,h][u],b:255*[h,h,s,i,i,a][u],a:r}},Np=function(t){return{h:Cb(t.h),s:Vn(t.s,0,100),l:Vn(t.l,0,100),a:Vn(t.a)}},jp=function(t){return{h:en(t.h),s:en(t.s),l:en(t.l),a:en(t.a,3)}},Bp=function(t){return Tb((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},Ko=function(t){return{h:(e=Sb(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},kO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,EO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Up={string:[[function(t){var e=TO.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?en(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?en(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=EO.exec(t)||xO.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Lp({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=kO.exec(t)||OO.exec(t);if(!e)return null;var n,i,r=Np({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(SO[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Bp(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=r===void 0?1:r;return Ri(e)&&Ri(n)&&Ri(i)?Lp({r:Number(e),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,o=r===void 0?1:r;if(!Ri(e)||!Ri(n)||!Ri(i))return null;var h=Np({h:Number(e),s:Number(n),l:Number(i),a:Number(o)});return Bp(h)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=r===void 0?1:r;if(!Ri(e)||!Ri(n)||!Ri(i))return null;var h=function(a){return{h:Cb(a.h),s:Vn(a.s,0,100),v:Vn(a.v,0,100),a:Vn(a.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(o)});return Tb(h)},"hsv"]]},Yp=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},DO=function(t){return typeof t=="string"?Yp(t.trim(),Up.string):typeof t=="object"&&t!==null?Yp(t,Up.object):[null,void 0]},pu=function(t,e){var n=Ko(t);return{h:n.h,s:Vn(n.s+100*e,0,100),l:n.l,a:n.a}},gu=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Wp=function(t,e){var n=Ko(t);return{h:n.h,s:n.s,l:Vn(n.l+100*e,0,100),a:n.a}},zp=function(){function t(e){this.parsed=DO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return en(gu(this.rgba),2)},t.prototype.isDark=function(){return gu(this.rgba)<.5},t.prototype.isLight=function(){return gu(this.rgba)>=.5},t.prototype.toHex=function(){return e=du(this.rgba),n=e.r,i=e.g,r=e.b,h=(o=e.a)<1?$a(en(255*o)):"","#"+$a(n)+$a(i)+$a(r)+h;var e,n,i,r,o,h},t.prototype.toRgb=function(){return du(this.rgba)},t.prototype.toRgbString=function(){return e=du(this.rgba),n=e.r,i=e.g,r=e.b,(o=e.a)<1?"rgba("+n+", "+i+", "+r+", "+o+")":"rgb("+n+", "+i+", "+r+")";var e,n,i,r,o},t.prototype.toHsl=function(){return jp(Ko(this.rgba))},t.prototype.toHslString=function(){return e=jp(Ko(this.rgba)),n=e.h,i=e.s,r=e.l,(o=e.a)<1?"hsla("+n+", "+i+"%, "+r+"%, "+o+")":"hsl("+n+", "+i+"%, "+r+"%)";var e,n,i,r,o},t.prototype.toHsv=function(){return e=Sb(this.rgba),{h:en(e.h),s:en(e.s),v:en(e.v),a:en(e.a,3)};var e},t.prototype.invert=function(){return Mn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Mn(pu(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mn(pu(this.rgba,-e))},t.prototype.grayscale=function(){return Mn(pu(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Mn(Wp(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Mn(Wp(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Mn({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):en(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Ko(this.rgba);return typeof e=="number"?Mn({h:e,s:n.s,l:n.l,a:n.a}):en(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Mn(e).toHex()},t}(),Mn=function(t){return t instanceof zp?t:new zp(t)};function Hp(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),S(e,"name",t[3]),e.value=t[0]},m(n,i){U(n,e,i)},p(n,i){i&8&&S(e,"name",n[3]),i&1&&(e.value=n[0])},d(n){n&&j(e)}}}function AO(t){let e,n,i,r,o,h,a,s,u,f=t[3]&&Hp(t);return{c(){e=E("div"),n=E("div"),i=V(),r=E("div"),h=V(),f&&f.c(),a=Je(),S(n,"class","track svelte-x7oaj0"),S(r,"class","thumb svelte-x7oaj0"),S(e,"class","slider svelte-x7oaj0"),S(e,"role","slider"),S(e,"aria-orientation",t[4]),S(e,"aria-valuemax",t[11]),S(e,"aria-valuemin",t[10]),S(e,"aria-valuenow",t[0]),S(e,"aria-valuetext",o=t[2](t[0])),S(e,"aria-label",t[7]),S(e,"aria-labelledby",t[8]),S(e,"aria-controls",t[9]),S(e,"tabindex","0"),Ci(e,"reverse",t[5]),mt(e,"--position",t[12])},m(l,c){U(l,e,c),k(e,n),k(e,i),k(e,r),t[22](e),U(l,h,c),f&&f.m(l,c),U(l,a,c),s||(u=[Z(window,"mousemove",t[15]),Z(window,"mouseup",t[16]),Z(e,"keydown",t[13]),Z(e,"mousedown",C1(function(){Hn(t[6]?void 0:t[14])&&(t[6]?void 0:t[14]).apply(this,arguments)})),Z(e,"touchstart",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Z(e,"touchmove",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Z(e,"touchend",Ni(function(){Hn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1})],s=!0)},p(l,[c]){t=l,c&16&&S(e,"aria-orientation",t[4]),c&2048&&S(e,"aria-valuemax",t[11]),c&1024&&S(e,"aria-valuemin",t[10]),c&1&&S(e,"aria-valuenow",t[0]),c&5&&o!==(o=t[2](t[0]))&&S(e,"aria-valuetext",o),c&128&&S(e,"aria-label",t[7]),c&256&&S(e,"aria-labelledby",t[8]),c&512&&S(e,"aria-controls",t[9]),c&32&&Ci(e,"reverse",t[5]),c&4096&&mt(e,"--position",t[12]),t[3]?f?f.p(t,c):(f=Hp(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:ge,o:ge,d(l){l&&(j(e),j(h),j(a)),t[22](null),f&&f.d(l),s=!1,Ue(u)}}}function PO(t,e,n){let i,r,o,h,{min:a=0}=e,{max:s=100}=e,{step:u=1}=e,{value:f=50}=e,{ariaValueText:l=B=>B.toString()}=e,{name:c=void 0}=e,{direction:d="horizontal"}=e,{reverse:p=!1}=e,{keyboardOnly:m=!1}=e,{slider:g=void 0}=e,{ariaLabel:v=void 0}=e,{ariaLabelledBy:_=void 0}=e,{ariaControls:b=void 0}=e,{isDragging:y=!1}=e;const w=Xt();function C(B){const z=1/o,ee=Math.round(B*z)/z;return Math.max(i,Math.min(r,ee))}function T(B){const z=B.shiftKey?o*10:o;B.key==="ArrowUp"||B.key==="ArrowRight"?(n(0,f+=z),B.preventDefault()):B.key==="ArrowDown"||B.key==="ArrowLeft"?(n(0,f-=z),B.preventDefault()):B.key==="Home"?(n(0,f=i),B.preventDefault()):B.key==="End"?(n(0,f=r),B.preventDefault()):B.key==="PageUp"?(n(0,f+=o*10),B.preventDefault()):B.key==="PageDown"&&(n(0,f-=o*10),B.preventDefault()),n(0,f=C(f)),w("input",f)}const x={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function A(B){const z=(g==null?void 0:g[x[d].clientSize])||120,ee=(g==null?void 0:g.getBoundingClientRect()[x[d].offset])||0;let oe=B[x[d].client]-ee;d==="vertical"&&(oe=-1*oe+z),p?n(0,f=r-oe/z*(r-i)):n(0,f=oe/z*(r-i)+i),n(0,f=C(f)),w("input",f)}function I(B){A(B),n(18,y=!0)}function W(B){y&&A(B)}function H(){n(18,y=!1)}function q(B){A({clientX:B.changedTouches[0].clientX,clientY:B.changedTouches[0].clientY})}function G(B){tt[B?"unshift":"push"](()=>{g=B,n(1,g)})}return t.$$set=B=>{"min"in B&&n(19,a=B.min),"max"in B&&n(20,s=B.max),"step"in B&&n(21,u=B.step),"value"in B&&n(0,f=B.value),"ariaValueText"in B&&n(2,l=B.ariaValueText),"name"in B&&n(3,c=B.name),"direction"in B&&n(4,d=B.direction),"reverse"in B&&n(5,p=B.reverse),"keyboardOnly"in B&&n(6,m=B.keyboardOnly),"slider"in B&&n(1,g=B.slider),"ariaLabel"in B&&n(7,v=B.ariaLabel),"ariaLabelledBy"in B&&n(8,_=B.ariaLabelledBy),"ariaControls"in B&&n(9,b=B.ariaControls),"isDragging"in B&&n(18,y=B.isDragging)},t.$$.update=()=>{t.$$.dirty&524288&&n(10,i=typeof a=="string"?parseFloat(a):a),t.$$.dirty&1048576&&n(11,r=typeof s=="string"?parseFloat(s):s),t.$$.dirty&2097152&&(o=typeof u=="string"?parseFloat(u):u),t.$$.dirty&3073&&n(12,h=((f-i)/(r-i)*1).toFixed(4))},[f,g,l,c,d,p,m,v,_,b,i,r,h,T,I,W,H,q,y,a,s,u,G]}class zl extends qe{constructor(e){super(),Ge(this,e,PO,AO,Ve,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function MO(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;var p=t[2].pickerIndicator;function m(y,w){return{props:{pos:y[6],isDark:y[3]}}}p&&(n=hn(p,m(t)));function g(y){t[13](y)}let v={keyboardOnly:!0,ariaValueText:IO,ariaLabel:"saturation color"};t[0]!==void 0&&(v.value=t[0]),o=new zl({props:v}),tt.push(()=>At(o,"value",g));function _(y){t[14](y)}let b={keyboardOnly:!0,ariaValueText:RO,direction:"vertical",ariaLabel:"brightness color"};return t[1]!==void 0&&(b.value=t[1]),u=new zl({props:b}),tt.push(()=>At(u,"value",_)),{c(){e=E("div"),n&&fe(n.$$.fragment),i=V(),r=E("div"),fe(o.$$.fragment),a=V(),s=E("div"),fe(u.$$.fragment),S(r,"class","s svelte-amfbfx"),mt(r,"--pos-y",t[6].y),S(s,"class","v svelte-amfbfx"),mt(s,"--pos-x",t[6].x),S(e,"class","picker svelte-amfbfx"),mt(e,"--picker-color-bg",t[5])},m(y,w){U(y,e,w),n&&ce(n,e,null),k(e,i),k(e,r),ce(o,r,null),k(e,a),k(e,s),ce(u,s,null),t[15](e),l=!0,c||(d=[Z(window,"mouseup",t[8]),Z(window,"mousedown",t[10]),Z(window,"mousemove",t[9]),Z(e,"mousedown",Ni(t[7])),Z(e,"touchstart",t[11],{passive:!1}),Z(e,"touchmove",Ni(t[11]),{passive:!1}),Z(e,"touchend",t[11],{passive:!1})],c=!0)},p(y,[w]){if(w&4&&p!==(p=y[2].pickerIndicator)){if(n){Te();const x=n;Y(x.$$.fragment,1,0,()=>{ue(x,1)}),ke()}p?(n=hn(p,m(y)),fe(n.$$.fragment),M(n.$$.fragment,1),ce(n,e,i)):n=null}else if(p){const x={};w&64&&(x.pos=y[6]),w&8&&(x.isDark=y[3]),n.$set(x)}const C={};!h&&w&1&&(h=!0,C.value=y[0],Ht(()=>h=!1)),o.$set(C),w&64&&mt(r,"--pos-y",y[6].y);const T={};!f&&w&2&&(f=!0,T.value=y[1],Ht(()=>f=!1)),u.$set(T),w&64&&mt(s,"--pos-x",y[6].x),w&32&&mt(e,"--picker-color-bg",y[5])},i(y){l||(n&&M(n.$$.fragment,y),M(o.$$.fragment,y),M(u.$$.fragment,y),l=!0)},o(y){n&&Y(n.$$.fragment,y),Y(o.$$.fragment,y),Y(u.$$.fragment,y),l=!1},d(y){y&&j(e),n&&ue(n),ue(o),ue(u),t[15](null),c=!1,Ue(d)}}}function Ga(t,e,n){return Math.min(Math.max(e,t),n)}const IO=t=>`${t}%`,RO=t=>`${t}%`;function FO(t,e,n){const i=Xt();let{components:r}=e,{h:o}=e,{s:h}=e,{v:a}=e,{isDark:s}=e,u,f=!1,l,c={x:100,y:0};function d(C){const{width:T,left:x,height:A,top:I}=u.getBoundingClientRect(),W={x:Ga(C.clientX-x,0,T),y:Ga(C.clientY-I,0,A)};n(0,h=Ga(W.x/T,0,1)*100),n(1,a=Ga((A-W.y)/A,0,1)*100)}function p(C){C.button===0&&(f=!0,d(C))}function m(){f=!1}function g(C){f&&d(C)}function v(C){C.target.isSameNode(u)}function _(C){C.preventDefault(),d(C.changedTouches[0])}function b(C){h=C,n(0,h)}function y(C){a=C,n(1,a)}function w(C){tt[C?"unshift":"push"](()=>{u=C,n(4,u)})}return t.$$set=C=>{"components"in C&&n(2,r=C.components),"h"in C&&n(12,o=C.h),"s"in C&&n(0,h=C.s),"v"in C&&n(1,a=C.v),"isDark"in C&&n(3,s=C.isDark)},t.$$.update=()=>{t.$$.dirty&4096&&typeof o=="number"&&n(5,l=Mn({h:o,s:100,v:100,a:1}).toHex()),t.$$.dirty&19&&typeof h=="number"&&typeof a=="number"&&u&&n(6,c={x:h,y:100-a}),t.$$.dirty&3&&i("input",{s:h,v:a})},[h,a,r,s,u,l,c,p,m,g,v,_,o,b,y,w]}class LO extends qe{constructor(e){super(),Ge(this,e,FO,MO,Ve,{components:2,h:12,s:0,v:1,isDark:3})}}function NO(t){let e;return{c(){e=E("div"),S(e,"class","picker-indicator svelte-i5mg2p"),Ci(e,"is-dark",t[1]),mt(e,"--pos-x",t[0].x),mt(e,"--pos-y",t[0].y)},m(n,i){U(n,e,i)},p(n,[i]){i&2&&Ci(e,"is-dark",n[1]),i&1&&mt(e,"--pos-x",n[0].x),i&1&&mt(e,"--pos-y",n[0].y)},i:ge,o:ge,d(n){n&&j(e)}}}function jO(t,e,n){let{pos:i}=e,{isDark:r}=e;return t.$$set=o=>{"pos"in o&&n(0,i=o.pos),"isDark"in o&&n(1,r=o.isDark)},[i,r]}class BO extends qe{constructor(e){super(),Ge(this,e,jO,NO,Ve,{pos:0,isDark:1})}}function UO(t){let e,n,i,r,o,h,a,s,u,f;return{c(){e=E("input"),i=V(),r=E("input"),h=V(),a=E("input"),S(e,"aria-label",n=t[4].label.h),e.value=t[9],S(e,"type","number"),S(e,"min","0"),S(e,"max","360"),S(e,"class","svelte-qtukzs"),S(r,"aria-label",o=t[4].label.s),r.value=t[8],S(r,"type","number"),S(r,"min","0"),S(r,"max","100"),S(r,"class","svelte-qtukzs"),S(a,"aria-label",s=t[4].label.v),a.value=t[7],S(a,"type","number"),S(a,"min","0"),S(a,"max","100"),S(a,"class","svelte-qtukzs")},m(l,c){U(l,e,c),U(l,i,c),U(l,r,c),U(l,h,c),U(l,a,c),u||(f=[Z(e,"input",t[13]("h")),Z(r,"input",t[13]("s")),Z(a,"input",t[13]("v"))],u=!0)},p(l,c){c&16&&n!==(n=l[4].label.h)&&S(e,"aria-label",n),c&512&&e.value!==l[9]&&(e.value=l[9]),c&16&&o!==(o=l[4].label.s)&&S(r,"aria-label",o),c&256&&r.value!==l[8]&&(r.value=l[8]),c&16&&s!==(s=l[4].label.v)&&S(a,"aria-label",s),c&128&&a.value!==l[7]&&(a.value=l[7])},d(l){l&&(j(e),j(i),j(r),j(h),j(a)),u=!1,Ue(f)}}}function YO(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;return{c(){e=E("input"),r=V(),o=E("input"),s=V(),u=E("input"),S(e,"aria-label",n=t[4].label.r),e.value=i=t[0].r,S(e,"type","number"),S(e,"min","0"),S(e,"max","255"),S(e,"class","svelte-qtukzs"),S(o,"aria-label",h=t[4].label.g),o.value=a=t[0].g,S(o,"type","number"),S(o,"min","0"),S(o,"max","255"),S(o,"class","svelte-qtukzs"),S(u,"aria-label",f=t[4].label.b),u.value=l=t[0].b,S(u,"type","number"),S(u,"min","0"),S(u,"max","255"),S(u,"class","svelte-qtukzs")},m(p,m){U(p,e,m),U(p,r,m),U(p,o,m),U(p,s,m),U(p,u,m),c||(d=[Z(e,"input",t[12]("r")),Z(o,"input",t[12]("g")),Z(u,"input",t[12]("b"))],c=!0)},p(p,m){m&16&&n!==(n=p[4].label.r)&&S(e,"aria-label",n),m&1&&i!==(i=p[0].r)&&e.value!==i&&(e.value=i),m&16&&h!==(h=p[4].label.g)&&S(o,"aria-label",h),m&1&&a!==(a=p[0].g)&&o.value!==a&&(o.value=a),m&16&&f!==(f=p[4].label.b)&&S(u,"aria-label",f),m&1&&l!==(l=p[0].b)&&u.value!==l&&(u.value=l)},d(p){p&&(j(e),j(r),j(o),j(s),j(u)),c=!1,Ue(d)}}}function WO(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.hex),e.value=t[1],S(e,"class","svelte-qtukzs"),mt(e,"flex",3)},m(o,h){U(o,e,h),i||(r=Z(e,"input",t[11]),i=!0)},p(o,h){h&16&&n!==(n=o[4].label.hex)&&S(e,"aria-label",n),h&2&&e.value!==o[1]&&(e.value=o[1])},d(o){o&&j(e),i=!1,r()}}}function Vp(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.a),e.value=t[6],S(e,"type","number"),S(e,"min","0"),S(e,"max","1"),S(e,"step","0.01"),S(e,"class","svelte-qtukzs")},m(o,h){U(o,e,h),i||(r=Z(e,"input",function(){Hn(t[5]==="hsv"?t[13]("a"):t[12]("a"))&&(t[5]==="hsv"?t[13]("a"):t[12]("a")).apply(this,arguments)}),i=!0)},p(o,h){t=o,h&16&&n!==(n=t[4].label.a)&&S(e,"aria-label",n),h&64&&e.value!==t[6]&&(e.value=t[6])},d(o){o&&j(e),i=!1,r()}}}function zO(t){let e,n=t[4].color[t[5]]+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","button-like svelte-qtukzs")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&48&&n!==(n=r[4].color[r[5]]+"")&&He(i,n)},d(r){r&&j(e)}}}function HO(t){let e,n,i=t[4].color[t[5]]+"",r,o,h,a=t[4].changeTo+"",s,u,f,l,c;return{c(){e=E("button"),n=E("span"),r=we(i),o=V(),h=E("span"),s=we(a),u=V(),f=we(t[10]),S(n,"class","disappear svelte-qtukzs"),S(n,"aria-hidden","true"),S(h,"class","appear svelte-qtukzs"),S(e,"type","button"),S(e,"class","svelte-qtukzs")},m(d,p){U(d,e,p),k(e,n),k(n,r),k(e,o),k(e,h),k(h,s),k(h,u),k(h,f),l||(c=Z(e,"click",t[15]),l=!0)},p(d,p){p&48&&i!==(i=d[4].color[d[5]]+"")&&He(r,i),p&16&&a!==(a=d[4].changeTo+"")&&He(s,a),p&1024&&He(f,d[10])},d(d){d&&j(e),l=!1,c()}}}function VO(t){let e,n,i,r;function o(c,d){return c[5]==="hex"?WO:c[5]==="rgb"?YO:UO}let h=o(t),a=h(t),s=t[2]&&Vp(t);function u(c,d){return c[3].length>1?HO:zO}let f=u(t),l=f(t);return{c(){e=E("div"),n=E("div"),a.c(),i=V(),s&&s.c(),r=V(),l.c(),S(n,"class","input-container svelte-qtukzs"),S(e,"class","text-input svelte-qtukzs")},m(c,d){U(c,e,d),k(e,n),a.m(n,null),k(n,i),s&&s.m(n,null),k(e,r),l.m(e,null)},p(c,[d]){h===(h=o(c))&&a?a.p(c,d):(a.d(1),a=h(c),a&&(a.c(),a.m(n,i))),c[2]?s?s.p(c,d):(s=Vp(c),s.c(),s.m(n,null)):s&&(s.d(1),s=null),f===(f=u(c))&&l?l.p(c,d):(l.d(1),l=f(c),l&&(l.c(),l.m(e,null)))},i:ge,o:ge,d(c){c&&j(e),a.d(),s&&s.d(),l.d()}}}const XO=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function $O(t,e,n){let i,r,o,h,a;const s=Xt();let{isAlpha:u}=e,{rgb:f}=e,{hsv:l}=e,{hex:c}=e,{textInputModes:d}=e,{texts:p}=e,m=d[0]||"hex";function g(y){const w=y.target;XO.test(w.value)&&(n(1,c=w.value),s("input",{hex:c}))}function v(y){return function(w){n(0,f={...f,[y]:parseFloat(w.target.value)}),s("input",{rgb:f})}}function _(y){return function(w){n(14,l={...l,[y]:parseFloat(w.target.value)}),s("input",{hsv:l})}}const b=()=>n(5,m=i);return t.$$set=y=>{"isAlpha"in y&&n(2,u=y.isAlpha),"rgb"in y&&n(0,f=y.rgb),"hsv"in y&&n(14,l=y.hsv),"hex"in y&&n(1,c=y.hex),"textInputModes"in y&&n(3,d=y.textInputModes),"texts"in y&&n(4,p=y.texts)},t.$$.update=()=>{t.$$.dirty&40&&n(10,i=d[(d.indexOf(m)+1)%d.length]),t.$$.dirty&16384&&n(9,r=Math.round(l.h)),t.$$.dirty&16384&&n(8,o=Math.round(l.s)),t.$$.dirty&16384&&n(7,h=Math.round(l.v)),t.$$.dirty&16384&&n(6,a=l.a===void 0?1:Math.round(l.a*100)/100)},[f,c,u,d,p,m,a,h,o,r,i,g,v,_,l,b]}class GO extends qe{constructor(e){super(),Ge(this,e,$O,VO,Ve,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function qO(t){let e,n,i,r,o,h,a,s,u,f,l;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("div"),h=V(),a=E("div"),s=V(),u=we(t[2]),S(i,"type","color"),S(i,"name",t[3]),i.value=t[1],S(i,"aria-haspopup","dialog"),S(i,"class","svelte-r4tbal"),S(o,"class","alpha svelte-r4tbal"),S(a,"class","color svelte-r4tbal"),mt(a,"background",t[1]),S(n,"class","container svelte-r4tbal"),S(e,"class","svelte-r4tbal")},m(c,d){U(c,e,d),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(e,s),k(e,u),t[5](e),f||(l=[Z(i,"click",Ni(qa)),Z(i,"mousedown",Ni(qa)),Z(e,"click",Ni(qa)),Z(e,"mousedown",Ni(qa))],f=!0)},p(c,[d]){d&8&&S(i,"name",c[3]),d&2&&(i.value=c[1]),d&2&&mt(a,"background",c[1]),d&4&&He(u,c[2])},i:ge,o:ge,d(c){c&&j(e),t[5](null),f=!1,Ue(l)}}}function qa(){}function KO(t,e,n){let{labelElement:i}=e,{hex:r}=e,{label:o}=e,{name:h=void 0}=e,{isOpen:a}=e;function s(u){tt[u?"unshift":"push"](()=>{i=u,n(0,i)})}return t.$$set=u=>{"labelElement"in u&&n(0,i=u.labelElement),"hex"in u&&n(1,r=u.hex),"label"in u&&n(2,o=u.label),"name"in u&&n(3,h=u.name),"isOpen"in u&&n(4,a=u.isOpen)},[i,r,o,h,a,s]}class JO extends qe{constructor(e){super(),Ge(this,e,KO,qO,Ve,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function ZO(t){let e,n,i;const r=t[4].default,o=ba(r,t,t[3],null);return{c(){e=E("div"),o&&o.c(),S(e,"class","wrapper svelte-1h4o41o"),S(e,"role",n=t[2]?"dialog":void 0),S(e,"aria-label","color picker"),Ci(e,"is-open",t[1])},m(h,a){U(h,e,a),o&&o.m(e,null),t[5](e),i=!0},p(h,[a]){o&&o.p&&(!i||a&8)&&Ca(o,r,h,h[3],i?wa(r,h[3],a,null):Sa(h[3]),null),(!i||a&4&&n!==(n=h[2]?"dialog":void 0))&&S(e,"role",n),(!i||a&2)&&Ci(e,"is-open",h[1])},i(h){i||(M(o,h),i=!0)},o(h){Y(o,h),i=!1},d(h){h&&j(e),o&&o.d(h),t[5](null)}}}function QO(t,e,n){let{$$slots:i={},$$scope:r}=e,{wrapper:o}=e,{isOpen:h}=e,{isDialog:a}=e;function s(u){tt[u?"unshift":"push"](()=>{o=u,n(0,o)})}return t.$$set=u=>{"wrapper"in u&&n(0,o=u.wrapper),"isOpen"in u&&n(1,h=u.isOpen),"isDialog"in u&&n(2,a=u.isDialog),"$$scope"in u&&n(3,r=u.$$scope)},[o,h,a,r,i,s]}class eE extends qe{constructor(e){super(),Ge(this,e,QO,ZO,Ve,{wrapper:0,isOpen:1,isDialog:2})}}const mu={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},kb="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function tE(t){return function(e){if(e.target===window)return;const n=e.target;if(!t.contains(n))return;const i=t.querySelectorAll(kb),r=i[0],o=i[i.length-1];function h(s){return s.code==="Tab"&&!s.shiftKey}function a(s){return s.code==="Tab"&&s.shiftKey}h(e)&&e.target===o?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),o.focus())}}const nE=t=>{const e=t.querySelector(kb);e&&e.focus();const n=tE(t);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};function iE(t){let e,n,i,r,o,h,a=t[1].label.withoutColor+"",s,u,f;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("span"),h=V(),s=we(a),S(i,"type","checkbox"),S(i,"class","svelte-pt866j"),S(o,"class","svelte-pt866j"),S(n,"class","svelte-pt866j"),S(e,"class","nullability-checkbox svelte-pt866j")},m(l,c){U(l,e,c),k(e,n),k(n,i),i.checked=t[0],k(n,r),k(n,o),k(e,h),k(e,s),u||(f=Z(i,"change",t[2]),u=!0)},p(l,[c]){c&1&&(i.checked=l[0]),c&2&&a!==(a=l[1].label.withoutColor+"")&&He(s,a)},i:ge,o:ge,d(l){l&&j(e),u=!1,f()}}}function rE(t,e,n){let{isUndefined:i}=e,{texts:r}=e;function o(){i=this.checked,n(0,i)}return t.$$set=h=>{"isUndefined"in h&&n(0,i=h.isUndefined),"texts"in h&&n(1,r=h.texts)},[i,r,o]}class sE extends qe{constructor(e){super(),Ge(this,e,rE,iE,Ve,{isUndefined:0,texts:1})}}function oE(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),e.value=t[2],S(e,"name",t[6])},m(n,i){U(n,e,i)},p(n,i){i[0]&4&&(e.value=n[2]),i[0]&64&&S(e,"name",n[6])},i:ge,o:ge,d(n){n&&j(e)}}}function aE(t){let e,n,i,r;function o(s){t[33](s)}var h=t[23]().input;function a(s,u){let f={isOpen:!0,hex:s[2],label:s[5],name:s[6]};return s[21]!==void 0&&(f.labelElement=s[21]),{props:f}}return h&&(e=hn(h,a(t)),tt.push(()=>At(e,"labelElement",o))),{c(){e&&fe(e.$$.fragment),i=Je()},m(s,u){e&&ce(e,s,u),U(s,i,u),r=!0},p(s,u){if(h!==(h=s[23]().input)){if(e){Te();const f=e;Y(f.$$.fragment,1,0,()=>{ue(f,1)}),ke()}h?(e=hn(h,a(s)),tt.push(()=>At(e,"labelElement",o)),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,i.parentNode,i)):e=null}else if(h){const f={};u[0]&4&&(f.hex=s[2]),u[0]&32&&(f.label=s[5]),u[0]&64&&(f.name=s[6]),!n&&u[0]&2097152&&(n=!0,f.labelElement=s[21],Ht(()=>n=!1)),e.$set(f)}},i(s){r||(e&&M(e.$$.fragment,s),r=!0)},o(s){e&&Y(e.$$.fragment,s),r=!1},d(s){s&&j(i),e&&ue(e,s)}}}function Xp(t){let e,n,i,r;function o(s){t[34](s)}var h=t[23]().nullabilityCheckbox;function a(s,u){let f={texts:s[24]()};return s[16]!==void 0&&(f.isUndefined=s[16]),{props:f}}return h&&(e=hn(h,a(t)),tt.push(()=>At(e,"isUndefined",o))),{c(){e&&fe(e.$$.fragment),i=Je()},m(s,u){e&&ce(e,s,u),U(s,i,u),r=!0},p(s,u){if(h!==(h=s[23]().nullabilityCheckbox)){if(e){Te();const f=e;Y(f.$$.fragment,1,0,()=>{ue(f,1)}),ke()}h?(e=hn(h,a(s)),tt.push(()=>At(e,"isUndefined",o)),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,i.parentNode,i)):e=null}else if(h){const f={};!n&&u[0]&65536&&(n=!0,f.isUndefined=s[16],Ht(()=>n=!1)),e.$set(f)}},i(s){r||(e&&M(e.$$.fragment,s),r=!0)},o(s){e&&Y(e.$$.fragment,s),r=!1},d(s){s&&j(i),e&&ue(e,s)}}}function $p(t){var r;let e,n,i;return n=new zl({props:{min:0,max:1,step:.01,value:((r=t[1])==null?void 0:r.a)??t[18].a,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.a}}),n.$on("input",t[27]("a")),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","a svelte-tsvobk"),mt(e,"--alphaless-color",(t[2]?t[2]:t[19]).substring(0,7))},m(o,h){U(o,e,h),ce(n,e,null),i=!0},p(o,h){var s;const a={};h[0]&262146&&(a.value=((s=o[1])==null?void 0:s.a)??o[18].a),h[0]&4096&&(a.direction=o[12]),h[0]&4096&&(a.reverse=o[12]==="vertical"),n.$set(a),h[0]&524292&&mt(e,"--alphaless-color",(o[2]?o[2]:o[19]).substring(0,7))},i(o){i||(M(n.$$.fragment,o),i=!0)},o(o){Y(n.$$.fragment,o),i=!1},d(o){o&&j(e),ue(n)}}}function Gp(t){let e,n,i;var r=t[23]().textInput;function o(h,a){return{props:{hex:h[2]??h[19],rgb:h[0]??h[17],hsv:h[1]??h[18],isAlpha:h[8],textInputModes:h[11],texts:h[24]()}}}return r&&(e=hn(r,o(t)),e.$on("input",t[35])),{c(){e&&fe(e.$$.fragment),n=Je()},m(h,a){e&&ce(e,h,a),U(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().textInput)){if(e){Te();const s=e;Y(s.$$.fragment,1,0,()=>{ue(s,1)}),ke()}r?(e=hn(r,o(h)),e.$on("input",h[35]),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&524292&&(s.hex=h[2]??h[19]),a[0]&131073&&(s.rgb=h[0]??h[17]),a[0]&262146&&(s.hsv=h[1]??h[18]),a[0]&256&&(s.isAlpha=h[8]),a[0]&2048&&(s.textInputModes=h[11]),e.$set(s)}},i(h){i||(e&&M(e.$$.fragment,h),i=!0)},o(h){e&&Y(e.$$.fragment,h),i=!1},d(h){h&&j(n),e&&ue(e,h)}}}function lE(t){let e,n,i;var r=t[23]().a11yNotice;function o(h,a){return{props:{components:h[23](),a11yColors:h[13],hex:h[2]||"#00000000",a11yTexts:h[15],a11yLevel:h[14]}}}return r&&(e=hn(r,o(t))),{c(){e&&fe(e.$$.fragment),n=Je()},m(h,a){e&&ce(e,h,a),U(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().a11yNotice)){if(e){Te();const s=e;Y(s.$$.fragment,1,0,()=>{ue(s,1)}),ke()}r?(e=hn(r,o(h)),fe(e.$$.fragment),M(e.$$.fragment,1),ce(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&8192&&(s.a11yColors=h[13]),a[0]&4&&(s.hex=h[2]||"#00000000"),a[0]&32768&&(s.a11yTexts=h[15]),a[0]&16384&&(s.a11yLevel=h[14]),e.$set(s)}},i(h){i||(e&&M(e.$$.fragment,h),i=!0)},o(h){e&&Y(e.$$.fragment,h),i=!1},d(h){h&&j(n),e&&ue(e,h)}}}function cE(t){var g,v,_,b;let e,n,i,r,o,h,a,s,u=t[23]().a11yNotice,f,l,c=t[7]&&Xp(t);n=new LO({props:{components:t[23](),h:((g=t[1])==null?void 0:g.h)??t[18].h,s:((v=t[1])==null?void 0:v.s)??t[18].s,v:((_=t[1])==null?void 0:_.v)??t[18].v,isDark:t[3]}}),n.$on("input",t[28](["s","v"])),o=new zl({props:{min:0,max:360,step:1,value:((b=t[1])==null?void 0:b.h)??t[18].h,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.h}}),o.$on("input",t[27]("h"));let d=t[8]&&$p(t),p=t[10]&&Gp(t),m=u&&lE(t);return{c(){c&&c.c(),e=V(),fe(n.$$.fragment),i=V(),r=E("div"),fe(o.$$.fragment),h=V(),d&&d.c(),a=V(),p&&p.c(),s=V(),m&&m.c(),f=Je(),S(r,"class","h svelte-tsvobk")},m(y,w){c&&c.m(y,w),U(y,e,w),ce(n,y,w),U(y,i,w),U(y,r,w),ce(o,r,null),U(y,h,w),d&&d.m(y,w),U(y,a,w),p&&p.m(y,w),U(y,s,w),m&&m.m(y,w),U(y,f,w),l=!0},p(y,w){var x,A,I,W;y[7]?c?(c.p(y,w),w[0]&128&&M(c,1)):(c=Xp(y),c.c(),M(c,1),c.m(e.parentNode,e)):c&&(Te(),Y(c,1,1,()=>{c=null}),ke());const C={};w[0]&262146&&(C.h=((x=y[1])==null?void 0:x.h)??y[18].h),w[0]&262146&&(C.s=((A=y[1])==null?void 0:A.s)??y[18].s),w[0]&262146&&(C.v=((I=y[1])==null?void 0:I.v)??y[18].v),w[0]&8&&(C.isDark=y[3]),n.$set(C);const T={};w[0]&262146&&(T.value=((W=y[1])==null?void 0:W.h)??y[18].h),w[0]&4096&&(T.direction=y[12]),w[0]&4096&&(T.reverse=y[12]==="vertical"),o.$set(T),y[8]?d?(d.p(y,w),w[0]&256&&M(d,1)):(d=$p(y),d.c(),M(d,1),d.m(a.parentNode,a)):d&&(Te(),Y(d,1,1,()=>{d=null}),ke()),y[10]?p?(p.p(y,w),w[0]&1024&&M(p,1)):(p=Gp(y),p.c(),M(p,1),p.m(s.parentNode,s)):p&&(Te(),Y(p,1,1,()=>{p=null}),ke()),u&&m.p(y,w)},i(y){l||(M(c),M(n.$$.fragment,y),M(o.$$.fragment,y),M(d),M(p),M(m),l=!0)},o(y){Y(c),Y(n.$$.fragment,y),Y(o.$$.fragment,y),Y(d),Y(p),Y(m),l=!1},d(y){y&&(j(e),j(i),j(r),j(h),j(a),j(s),j(f)),c&&c.d(y),ue(n,y),ue(o),d&&d.d(y),p&&p.d(y),m&&m.d(y)}}}function uE(t){let e,n,i,r,o,h,a,s,u,f;const l=[aE,oE],c=[];function d(v,_){return v[9]?0:v[6]?1:-1}~(n=d(t))&&(i=c[n]=l[n](t));function p(v){t[36](v)}var m=t[23]().wrapper;function g(v,_){let b={isOpen:v[4],isDialog:v[9],$$slots:{default:[cE]},$$scope:{ctx:v}};return v[22]!==void 0&&(b.wrapper=v[22]),{props:b}}return m&&(o=hn(m,g(t)),tt.push(()=>At(o,"wrapper",p))),{c(){e=E("span"),i&&i.c(),r=V(),o&&fe(o.$$.fragment),S(e,"class",a="color-picker "+t[12]+" svelte-tsvobk")},m(v,_){U(v,e,_),~n&&c[n].m(e,null),k(e,r),o&&ce(o,e,null),t[37](e),s=!0,u||(f=[Z(window,"mousedown",t[25]),Z(window,"keyup",t[26])],u=!0)},p(v,_){let b=n;if(n=d(v),n===b?~n&&c[n].p(v,_):(i&&(Te(),Y(c[b],1,1,()=>{c[b]=null}),ke()),~n?(i=c[n],i?i.p(v,_):(i=c[n]=l[n](v),i.c()),M(i,1),i.m(e,r)):i=null),m!==(m=v[23]().wrapper)){if(o){Te();const y=o;Y(y.$$.fragment,1,0,()=>{ue(y,1)}),ke()}m?(o=hn(m,g(v)),tt.push(()=>At(o,"wrapper",p)),fe(o.$$.fragment),M(o.$$.fragment,1),ce(o,e,null)):o=null}else if(m){const y={};_[0]&16&&(y.isOpen=v[4]),_[0]&512&&(y.isDialog=v[9]),_[0]&1047951|_[1]&4096&&(y.$$scope={dirty:_,ctx:v}),!h&&_[0]&4194304&&(h=!0,y.wrapper=v[22],Ht(()=>h=!1)),o.$set(y)}(!s||_[0]&4096&&a!==(a="color-picker "+v[12]+" svelte-tsvobk"))&&S(e,"class",a)},i(v){s||(M(i),o&&M(o.$$.fragment,v),s=!0)},o(v){Y(i),o&&Y(o.$$.fragment,v),s=!1},d(v){v&&j(e),~n&&c[n].d(),o&&ue(o),t[37](null),u=!1,Ue(f)}}}function fE(t,e,n){const i=Xt();let{components:r={}}=e,{label:o="Choose a color"}=e,{name:h=void 0}=e,{nullable:a=!1}=e,{rgb:s=a?void 0:{r:255,g:0,b:0,a:1}}=e,{hsv:u=a?void 0:{h:0,s:100,v:100,a:1}}=e,{hex:f=a?void 0:"#ff0000"}=e,{color:l=void 0}=e,{isDark:c=!1}=e,{isAlpha:d=!0}=e,{isDialog:p=!0}=e,{isOpen:m=!p}=e,{isTextInput:g=!0}=e,{textInputModes:v=["hex","rgb","hsv"]}=e,{sliderDirection:_="vertical"}=e,{disableCloseClickOutside:b=!1}=e,{a11yColors:y=[{bgHex:"#ffffff"}]}=e,{a11yLevel:w="AA"}=e,{texts:C=void 0}=e,{a11yTexts:T=void 0}=e,x={r:255,g:0,b:0,a:1},A={h:0,s:100,v:100,a:1},I="#ff0000",W=!1,H=W,q,G,B,z;const ee={pickerIndicator:BO,textInput:GO,input:JO,nullabilityCheckbox:sE,wrapper:eE};function oe(){return{...ee,...r}}function O(){return{label:{...mu.label,...C==null?void 0:C.label},color:{...mu.color,...C==null?void 0:C.color},changeTo:(C==null?void 0:C.changeTo)??mu.changeTo}}function P({target:$}){p&&(G.contains($)||G.isSameNode($)?n(4,m=!m):m&&!B.contains($)&&!b&&n(4,m=!1))}function F({key:$,target:ae}){if(p)$==="Enter"&&G.contains(ae)?(n(4,m=!m),setTimeout(()=>{z=nE(B)})):$==="Escape"&&m&&(n(4,m=!1),q.contains(ae)&&(G==null||G.focus(),z==null||z.destroy()));else return}function L(){if(W&&!H){H=!0,n(1,u=n(0,s=n(2,f=void 0))),i("input",{color:l,hsv:u,rgb:s,hex:f});return}else if(H&&!W){H=!1,n(1,u=A),n(0,s=x),n(2,f=I),i("input",{color:l,hsv:u,rgb:s,hex:f});return}if(!u&&!s&&!f){n(16,W=!0),H=!0,i("input",{color:void 0,hsv:u,rgb:s,hex:f});return}u&&s&&u.h===A.h&&u.s===A.s&&u.v===A.v&&u.a===A.a&&s.r===x.r&&s.g===x.g&&s.b===x.b&&s.a===x.a&&f===I||(n(16,W=!1),u&&u.a===void 0&&n(1,u.a=1,u),A.a===void 0&&n(18,A.a=1,A),s&&s.a===void 0&&n(0,s.a=1,s),x.a===void 0&&n(17,x.a=1,x),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),u&&(u.h!==A.h||u.s!==A.s||u.v!==A.v||u.a!==A.a)?(n(29,l=Mn(u)),n(0,s=l.toRgb()),n(2,f=l.toHex())):s&&(s.r!==x.r||s.g!==x.g||s.b!==x.b||s.a!==x.a)?(n(29,l=Mn(s)),n(2,f=l.toHex()),n(1,u=l.toHsv())):f&&f!==I&&(n(29,l=Mn(f)),n(0,s=l.toRgb()),n(1,u=l.toHsv())),l&&n(3,c=l.isDark()),f&&(n(18,A=Object.assign({},u)),n(17,x=Object.assign({},s)),n(19,I=f),H=W,i("input",{color:l,hsv:u,rgb:s,hex:f})))}function J($){return ae=>{u||n(1,u={...A}),n(1,u[$]=ae.detail,u)}}function R($){return ae=>{u||n(1,u={...A}),$.forEach(me=>{u&&n(1,u[me]=ae.detail[me],u)})}}function D($){G=$,n(21,G)}function X($){W=$,n(16,W)}const K=({detail:$})=>{$.hsv?n(1,u=$.hsv):$.rgb?n(0,s=$.rgb):$.hex&&n(2,f=$.hex)};function re($){B=$,n(22,B)}function te($){tt[$?"unshift":"push"](()=>{q=$,n(20,q)})}return t.$$set=$=>{"components"in $&&n(30,r=$.components),"label"in $&&n(5,o=$.label),"name"in $&&n(6,h=$.name),"nullable"in $&&n(7,a=$.nullable),"rgb"in $&&n(0,s=$.rgb),"hsv"in $&&n(1,u=$.hsv),"hex"in $&&n(2,f=$.hex),"color"in $&&n(29,l=$.color),"isDark"in $&&n(3,c=$.isDark),"isAlpha"in $&&n(8,d=$.isAlpha),"isDialog"in $&&n(9,p=$.isDialog),"isOpen"in $&&n(4,m=$.isOpen),"isTextInput"in $&&n(10,g=$.isTextInput),"textInputModes"in $&&n(11,v=$.textInputModes),"sliderDirection"in $&&n(12,_=$.sliderDirection),"disableCloseClickOutside"in $&&n(31,b=$.disableCloseClickOutside),"a11yColors"in $&&n(13,y=$.a11yColors),"a11yLevel"in $&&n(14,w=$.a11yLevel),"texts"in $&&n(32,C=$.texts),"a11yTexts"in $&&n(15,T=$.a11yTexts)},t.$$.update=()=>{t.$$.dirty[0]&7&&(u||s||f)&&L(),t.$$.dirty[0]&65536&&L()},[s,u,f,c,m,o,h,a,d,p,g,v,_,y,w,T,W,x,A,I,q,G,B,oe,O,P,F,J,R,l,r,b,C,D,X,K,re,te]}class Eh extends qe{constructor(e){super(),Ge(this,e,fE,uE,Ve,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function hE(t){let e,n,i,r,o,h,a,s,u,f,l;function c(p){t[4](p)}let d={isAlpha:!1,label:""};return t[2]!==void 0&&(d.hex=t[2]),r=new Eh({props:d}),tt.push(()=>At(r,"hex",c)),r.$on("input",t[5]),s=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),fe(r.$$.fragment),h=V(),a=E("button"),fe(s.$$.fragment),S(i,"class","grow flex justify-center color-picker-wrapper"),S(a,"type","button"),S(a,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){U(p,e,m),k(e,n),k(n,i),ce(r,i,null),k(n,h),k(n,a),ce(s,a,null),u=!0,f||(l=Z(a,"click",t[6]),f=!0)},p(p,[m]){const g={};!o&&m&4&&(o=!0,g.hex=p[2],Ht(()=>o=!1)),r.$set(g)},i(p){u||(M(r.$$.fragment,p),M(s.$$.fragment,p),u=!0)},o(p){Y(r.$$.fragment,p),Y(s.$$.fragment,p),u=!1},d(p){p&&j(e),ue(r),ue(s),f=!1,l()}}}function dE(t){if(typeof t=="object"&&t!==null)return"#000000";const e=typeof t=="string"?t:String(t),i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e);if(i){const[,o,h,a]=i.map(Number),s=o.toString(16).padStart(2,"0"),u=h.toString(16).padStart(2,"0"),f=a.toString(16).padStart(2,"0");return`#${s}${u}${f}`}return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?e:"#000000"}function pE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e,o="#000000";o=dE(r.fill);const h=Xt();Di(()=>{n(0,i=null)});function a(f){o=f,n(2,o)}const s=()=>{r.set("fill",o),h("onChangeColor")},u=()=>n(0,i=null);return t.$$set=f=>{"selectProperty"in f&&n(0,i=f.selectProperty),"object"in f&&n(1,r=f.object)},[i,r,o,h,a,s,u]}class gE extends qe{constructor(e){super(),Ge(this,e,pE,hE,Ve,{selectProperty:0,object:1})}}function qp(t,e,n){const i=t.slice();return i[7]=e[n],i}function Kp(t){let e,n,i,r,o,h,a,s;function u(){return t[5](t[7])}return{c(){e=E("li"),n=E("button"),i=E("img"),h=V(),Ye(i.src,r=t[7].thumbnail)||S(i,"src",r),S(i,"alt",o=t[7].fontName),S(i,"class","object-contain border rounded"),S(n,"type","button")},m(f,l){U(f,e,l),k(e,n),k(n,i),k(e,h),a||(s=Z(n,"click",u),a=!0)},p(f,l){t=f,l&4&&!Ye(i.src,r=t[7].thumbnail)&&S(i,"src",r),l&4&&o!==(o=t[7].fontName)&&S(i,"alt",o)},d(f){f&&j(e),a=!1,s()}}}function mE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p=Fe(t[2]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Kp(qp(t,p,g));return f=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("textarea"),o=V(),h=E("div"),a=E("ul");for(let g=0;g<m.length;g+=1)m[g].c();s=V(),u=E("button"),fe(f.$$.fragment),S(r,"class","textarea"),S(i,"class","w-full flex justify-center"),S(a,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 h-52 overflow-y-auto"),S(u,"type","button"),S(u,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(g,v){U(g,e,v),k(e,n),k(n,i),k(i,r),Re(r,t[0]),k(n,o),k(n,h),k(h,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(a,null);k(n,s),k(n,u),ce(f,u,null),l=!0,c||(d=[Z(r,"input",t[4]),Z(u,"click",t[6])],c=!0)},p(g,[v]){if(v&1&&Re(r,g[0]),v&12){p=Fe(g[2]);let _;for(_=0;_<p.length;_+=1){const b=qp(g,p,_);m[_]?m[_].p(b,v):(m[_]=Kp(b),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i(g){l||(M(f.$$.fragment,g),l=!0)},o(g){Y(f.$$.fragment,g),l=!1},d(g){g&&j(e),Pt(m,g),ue(f),c=!1,Ue(d)}}}function vE(t,e,n){let i;Me(t,$o,f=>n(2,i=f));let{selectProperty:r=null}=e,{text:o=""}=e;const h=Xt();Di(()=>{n(1,r=null)});function a(){o=this.value,n(0,o)}const s=f=>h("onChangeFontFamily",{fontFamily:f.fontFamily,localFamily:f.localFamily}),u=()=>n(1,r=null);return t.$$set=f=>{"selectProperty"in f&&n(1,r=f.selectProperty),"text"in f&&n(0,o=f.text)},t.$$.update=()=>{t.$$.dirty&1&&o&&h("onChangeText",{text:o})},[o,r,i,h,a,s,u]}let _E=class extends qe{constructor(e){super(),Ge(this,e,vE,mE,Ve,{selectProperty:1,text:0})}};function yE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w,C,T,x;return a=new Ce({props:{icon:"mingcute:align-left-line",height:"20"}}),c=new Ce({props:{icon:"mingcute:align-center-line",height:"20"}}),v=new Ce({props:{icon:"iconoir:align-right",height:"20"}}),y=new Ce({props:{icon:"ion:close"}}),C=Ey(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),fe(a.$$.fragment),s=V(),u=E("input"),f=V(),l=E("label"),fe(c.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),fe(v.$$.fragment),_=V(),b=E("button"),fe(y.$$.fragment),S(r,"id","align-left"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="left",Re(r,r.__value),S(h,"for","align-left"),S(h,"class","radio-label"),S(u,"id","align-center"),S(u,"class","hidden radio-input"),S(u,"type","radio"),u.__value="center",Re(u,u.__value),S(l,"for","align-center"),S(l,"class","radio-label"),S(p,"id","align-right"),S(p,"class","hidden radio-input"),S(p,"type","radio"),p.__value="right",Re(p,p.__value),S(g,"for","align-right"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),C.p(r,u,p)},m(A,I){U(A,e,I),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ce(a,h,null),k(i,s),k(i,u),u.checked=u.__value===t[0],k(i,f),k(i,l),ce(c,l,null),k(i,d),k(i,p),p.checked=p.__value===t[0],k(i,m),k(i,g),ce(v,g,null),k(n,_),k(n,b),ce(y,b,null),w=!0,T||(x=[Z(r,"change",t[2]),Z(u,"change",t[4]),Z(p,"change",t[5]),Z(b,"click",t[6])],T=!0)},p(A,[I]){I&1&&(r.checked=r.__value===A[0]),I&1&&(u.checked=u.__value===A[0]),I&1&&(p.checked=p.__value===A[0])},i(A){w||(M(a.$$.fragment,A),M(c.$$.fragment,A),M(v.$$.fragment,A),M(y.$$.fragment,A),w=!0)},o(A){Y(a.$$.fragment,A),Y(c.$$.fragment,A),Y(v.$$.fragment,A),Y(y.$$.fragment,A),w=!1},d(A){A&&j(e),ue(a),ue(c),ue(v),ue(y),C.r(),T=!1,Ue(x)}}}function bE(t,e,n){let{selectProperty:i=null}=e,{align:r="left"}=e;const o=Xt();Di(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}function u(){r=this.__value,n(0,r)}const f=()=>n(1,i=null);return t.$$set=l=>{"selectProperty"in l&&n(1,i=l.selectProperty),"align"in l&&n(0,r=l.align)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeAlign",{align:r})},[r,i,a,h,s,u,f]}class wE extends qe{constructor(e){super(),Ge(this,e,bE,yE,Ve,{selectProperty:1,align:0})}}function CE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b;return a=new Ce({props:{icon:"ci:text",height:"20"}}),c=new Ce({props:{icon:"clarity:italic-line",height:"20"}}),m=new Ce({props:{icon:"ion:close"}}),v=Ey(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),fe(a.$$.fragment),s=V(),u=E("input"),f=V(),l=E("label"),fe(c.$$.fragment),d=V(),p=E("button"),fe(m.$$.fragment),S(r,"id","align-normal"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="normal",Re(r,r.__value),S(h,"for","align-normal"),S(h,"class","radio-label"),S(u,"id","align-italic"),S(u,"class","hidden radio-input"),S(u,"type","radio"),u.__value="italic",Re(u,u.__value),S(l,"for","align-italic"),S(l,"class","radio-label"),S(i,"class","grow flex justify-center"),S(p,"type","button"),S(p,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),v.p(r,u)},m(y,w){U(y,e,w),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ce(a,h,null),k(i,s),k(i,u),u.checked=u.__value===t[0],k(i,f),k(i,l),ce(c,l,null),k(n,d),k(n,p),ce(m,p,null),g=!0,_||(b=[Z(r,"change",t[2]),Z(u,"change",t[4]),Z(p,"click",t[5])],_=!0)},p(y,[w]){w&1&&(r.checked=r.__value===y[0]),w&1&&(u.checked=u.__value===y[0])},i(y){g||(M(a.$$.fragment,y),M(c.$$.fragment,y),M(m.$$.fragment,y),g=!0)},o(y){Y(a.$$.fragment,y),Y(c.$$.fragment,y),Y(m.$$.fragment,y),g=!1},d(y){y&&j(e),ue(a),ue(c),ue(m),v.r(),_=!1,Ue(b)}}}function SE(t,e,n){let{selectProperty:i=null}=e,{style:r="normal"}=e;console.log({style:r});const o=Xt();Di(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}const u=()=>n(1,i=null);return t.$$set=f=>{"selectProperty"in f&&n(1,i=f.selectProperty),"style"in f&&n(0,r=f.style)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeStyle",{style:r})},[r,i,a,h,s,u]}class TE extends qe{constructor(e){super(),Ge(this,e,SE,CE,Ve,{selectProperty:1,style:0})}}function kE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w,C,T;return a=new Ce({props:{icon:"radix-icons:underline",height:"20"}}),c=new Ce({props:{icon:"radix-icons:overline",height:"20"}}),v=new Ce({props:{icon:"radix-icons:strikethrough",height:"20"}}),y=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),fe(a.$$.fragment),s=V(),u=E("input"),f=V(),l=E("label"),fe(c.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),fe(v.$$.fragment),_=V(),b=E("button"),fe(y.$$.fragment),S(r,"id","decoration-underline"),S(r,"class","hidden radio-input"),S(r,"type","checkbox"),S(h,"for","decoration-underline"),S(h,"class","radio-label"),S(u,"id","decoration-overline"),S(u,"class","hidden radio-input"),S(u,"type","checkbox"),S(l,"for","decoration-overline"),S(l,"class","radio-label"),S(p,"id","decoration-through"),S(p,"class","hidden radio-input"),S(p,"type","checkbox"),S(g,"for","decoration-through"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(x,A){U(x,e,A),k(e,n),k(n,i),k(i,r),r.checked=t[1].underline,k(i,o),k(i,h),ce(a,h,null),k(i,s),k(i,u),u.checked=t[1].overline,k(i,f),k(i,l),ce(c,l,null),k(i,d),k(i,p),p.checked=t[1].linethrough,k(i,m),k(i,g),ce(v,g,null),k(n,_),k(n,b),ce(y,b,null),w=!0,C||(T=[Z(r,"change",t[3]),Z(u,"change",t[4]),Z(p,"change",t[5]),Z(b,"click",t[6])],C=!0)},p(x,[A]){A&2&&(r.checked=x[1].underline),A&2&&(u.checked=x[1].overline),A&2&&(p.checked=x[1].linethrough)},i(x){w||(M(a.$$.fragment,x),M(c.$$.fragment,x),M(v.$$.fragment,x),M(y.$$.fragment,x),w=!0)},o(x){Y(a.$$.fragment,x),Y(c.$$.fragment,x),Y(v.$$.fragment,x),Y(y.$$.fragment,x),w=!1},d(x){x&&j(e),ue(a),ue(c),ue(v),ue(y),C=!1,Ue(T)}}}function OE(t,e,n){let{selectProperty:i=null}=e,{object:r=""}=e,o={underline:r.underline,overline:r.overline,linethrough:r.linethrough};const h=Xt();Di(()=>{n(0,i=null)});function a(){o.underline=this.checked,n(1,o)}function s(){o.overline=this.checked,n(1,o)}function u(){o.linethrough=this.checked,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeDecoration",{decoration:o})},[i,o,r,a,s,u,f]}class EE extends qe{constructor(e){super(),Ge(this,e,OE,kE,Ve,{selectProperty:0,object:2})}}function xE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v;function _(y){t[3](y)}let b={isAlpha:!1,label:""};return t[1].stroke!==void 0&&(b.hex=t[1].stroke),r=new Eh({props:b}),tt.push(()=>At(r,"hex",_)),p=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),fe(r.$$.fragment),h=V(),a=E("div"),s=E("input"),u=V(),f=E("div"),l=E("input"),c=V(),d=E("button"),fe(p.$$.fragment),S(i,"class","grow flex justify-center"),S(s,"id","minmax-range"),S(s,"type","range"),S(s,"min","0"),S(s,"step","0.5"),S(s,"max","20"),S(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(a,"class","grow w-full"),S(l,"type","text"),S(l,"class","input w-full"),S(d,"type","button"),S(d,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(y,w){U(y,e,w),k(e,n),k(n,i),ce(r,i,null),k(n,h),k(n,a),k(a,s),Re(s,t[1].strokeWidth),k(n,u),k(n,f),k(f,l),Re(l,t[1].strokeWidth),k(n,c),k(n,d),ce(p,d,null),m=!0,g||(v=[Z(s,"change",t[4]),Z(s,"input",t[4]),Z(l,"input",t[5]),Z(d,"click",t[6])],g=!0)},p(y,[w]){const C={};!o&&w&2&&(o=!0,C.hex=y[1].stroke,Ht(()=>o=!1)),r.$set(C),w&2&&Re(s,y[1].strokeWidth),w&2&&l.value!==y[1].strokeWidth&&Re(l,y[1].strokeWidth)},i(y){m||(M(r.$$.fragment,y),M(p.$$.fragment,y),m=!0)},o(y){Y(r.$$.fragment,y),Y(p.$$.fragment,y),m=!1},d(y){y&&j(e),ue(r),ue(p),g=!1,Ue(v)}}}function DE(t,e,n){let{selectProperty:i=null}=e,{object:r={}}=e,o={strokeWidth:r.strokeWidth?r.strokeWidth:0,stroke:r.stroke?r.stroke:"#000000"};const h=Xt();Di(()=>{n(0,i=null)});function a(l){t.$$.not_equal(o.stroke,l)&&(o.stroke=l,n(1,o))}function s(){o.strokeWidth=xy(this.value),n(1,o)}function u(){o.strokeWidth=this.value,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeStroke",{stroke:o})},[i,o,r,a,s,u,f]}class AE extends qe{constructor(e){super(),Ge(this,e,DE,xE,Ve,{selectProperty:0,object:2})}}function Jp(t,e,n){const i=t.slice();return i[6]=e[n],i[7]=e,i[8]=n,i}function Zp(t){let e,n,i;function r(a){t[3](a,t[6])}function o(){return t[4](t[6])}let h={isAlpha:!1,label:""};return t[6].fill!==void 0&&(h.hex=t[6].fill),e=new Eh({props:h}),tt.push(()=>At(e,"hex",r)),e.$on("input",o),{c(){fe(e.$$.fragment)},m(a,s){ce(e,a,s),i=!0},p(a,s){t=a;const u={};!n&&s&2&&(n=!0,u.hex=t[6].fill,Ht(()=>n=!1)),e.$set(u)},i(a){i||(M(e.$$.fragment,a),i=!0)},o(a){Y(e.$$.fragment,a),i=!1},d(a){ue(e,a)}}}function PE(t){let e,n,i,r,o,h,a,s,u,f=Fe(t[1]._objects),l=[];for(let d=0;d<f.length;d+=1)l[d]=Zp(Jp(t,f,d));const c=d=>Y(l[d],1,1,()=>{l[d]=null});return h=new Ce({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div");for(let d=0;d<l.length;d+=1)l[d].c();r=V(),o=E("button"),fe(h.$$.fragment),S(i,"class","grow flex justify-center w-full color-picker-wrapper"),S(o,"type","button"),S(o,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(d,p){U(d,e,p),k(e,n),k(n,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);k(n,r),k(n,o),ce(h,o,null),a=!0,s||(u=Z(o,"click",t[5]),s=!0)},p(d,[p]){if(p&6){f=Fe(d[1]._objects);let m;for(m=0;m<f.length;m+=1){const g=Jp(d,f,m);l[m]?(l[m].p(g,p),M(l[m],1)):(l[m]=Zp(g),l[m].c(),M(l[m],1),l[m].m(i,null))}for(Te(),m=f.length;m<l.length;m+=1)c(m);ke()}},i(d){if(!a){for(let p=0;p<f.length;p+=1)M(l[p]);M(h.$$.fragment,d),a=!0}},o(d){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)Y(l[p]);Y(h.$$.fragment,d),a=!1},d(d){d&&j(e),Pt(l,d),ue(h),s=!1,u()}}}function ME(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e;const o=Xt();Di(()=>{o("onChangeColorEnd"),n(0,i=null)});function h(u,f){t.$$.not_equal(f.fill,u)&&(f.fill=u,n(1,r))}const a=u=>{u.set("fill",u.fill),o("onChangeColors")},s=()=>n(0,i=null);return t.$$set=u=>{"selectProperty"in u&&n(0,i=u.selectProperty),"object"in u&&n(1,r=u.object)},[i,r,o,h,a,s]}class IE extends qe{constructor(e){super(),Ge(this,e,ME,PE,Ve,{selectProperty:0,object:1})}}function Qp(t,e,n){const i=t.slice();return i[16]=e[n],i}function eg(t){let e,n,i,r,o,h,a;function s(){return t[9](t[16])}return{c(){e=E("button"),n=E("img"),o=V(),Ye(n.src,i=t[16].file.url)||S(n,"src",i),S(n,"alt",r=t[16].name),S(n,"class","max-w-full"),S(e,"class","masonry-item flex flex-col justify-center")},m(u,f){U(u,e,f),k(e,n),k(e,o),h||(a=Z(e,"click",s),h=!0)},p(u,f){t=u,f&2&&!Ye(n.src,i=t[16].file.url)&&S(n,"src",i),f&2&&r!==(r=t[16].name)&&S(n,"alt",r)},d(u){u&&j(e),h=!1,a()}}}function RE(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}});let _=Fe(t[1]),b=[];for(let y=0;y<_.length;y+=1)b[y]=eg(Qp(t,_,y));return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="",r=V(),o=E("button"),fe(h.$$.fragment),a=V(),s=E("div"),u=E("div"),f=E("input"),l=V(),c=E("button"),c.textContent="",d=V(),p=E("div");for(let y=0;y<b.length;y+=1)b[y].c();S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"type","search"),S(f,"class","border p-2 rounded join-left text-sm grow"),S(f,"placeholder"," "),f.required=!0,S(c,"type","submit"),S(c,"class","btn btn-sm primary-btn join-right text-sm"),S(u,"class","flex w-full"),S(s,"class","w-full mt-3"),S(p,"class","grow mt-3 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(y,w){U(y,e,w),k(e,n),k(n,i),k(n,r),k(n,o),ce(h,o,null),k(e,a),k(e,s),k(s,u),k(u,f),Re(f,t[3].keyword),k(u,l),k(u,c),k(e,d),k(e,p);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(p,null);t[10](p),m=!0,g||(v=[Z(o,"click",t[6]),Z(f,"input",t[7]),Z(c,"click",t[8])],g=!0)},p(y,[w]){if(w&8&&f.value!==y[3].keyword&&Re(f,y[3].keyword),w&3){_=Fe(y[1]);let C;for(C=0;C<_.length;C+=1){const T=Qp(y,_,C);b[C]?b[C].p(T,w):(b[C]=eg(T),b[C].c(),b[C].m(p,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=_.length}},i(y){m||(M(h.$$.fragment,y),m=!0)},o(y){Y(h.$$.fragment,y),m=!1},d(y){y&&j(e),ue(h),Pt(b,y),t[10](null),g=!1,Ue(v)}}}function FE(t,e,n){let i,r;Me(t,po,_=>n(13,i=_)),Me(t,Yt,_=>n(4,r=_));let{handleAddClipArt:o}=e;Xt();let h=[],a,s=!1,u=!0,f={perPage:24,current:0,keyword:"",categories:[]};async function l(_=!1){_&&(n(3,f.current=0,f),n(1,h=[])),s=!0;const b=await ek(i.id,f);n(1,h=[...h,...b.data]),u=b.data.length===f.perPage,s=!1}function c(){const _=a.scrollHeight,b=a.scrollTop,y=a.clientHeight;b+y>=_-100&&!s&&u&&(n(3,f.current++,f),l())}xi(()=>{l(),a.addEventListener("scroll",c)});const d=()=>_e(Yt,r=null,r);function p(){f.keyword=this.value,n(3,f)}const m=()=>l(!0),g=_=>o(_);function v(_){tt[_?"unshift":"push"](()=>{a=_,n(2,a)})}return t.$$set=_=>{"handleAddClipArt"in _&&n(0,o=_.handleAddClipArt)},[o,h,a,f,r,l,d,p,m,g,v]}class LE extends qe{constructor(e){super(),Ge(this,e,FE,RE,Ve,{handleAddClipArt:0})}}function NE(t){let e;return{c(){e=E("p"),e.textContent="       .",S(e,"class","p-5")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function jE(t){let e;return{c(){e=E("p"),e.textContent="       .",S(e,"class","p-5")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function BE(t){let e,n,i,r,o;function h(u,f){return u[0]?jE:NE}let a=h(t),s=a(t);return{c(){e=E("div"),s.c(),n=V(),i=E("input"),S(i,"type","file"),i.multiple=!0,S(e,"class","dropzone svelte-1xosmac"),S(e,"role","dropzone"),Ci(e,"active",t[0])},m(u,f){U(u,e,f),s.m(e,null),k(e,n),k(e,i),r||(o=[Z(i,"change",t[4]),Z(e,"dragover",t[1]),Z(e,"dragleave",t[2]),Z(e,"drop",t[3])],r=!0)},p(u,[f]){a!==(a=h(u))&&(s.d(1),s=a(u),s&&(s.c(),s.m(e,n))),f&1&&Ci(e,"active",u[0])},i:ge,o:ge,d(u){u&&j(e),s.d(),r=!1,Ue(o)}}}function UE(t,e,n){const i=Xt();let r=!1;function o(u){u.preventDefault(),n(0,r=!0)}function h(){n(0,r=!1)}function a(u){u.preventDefault(),n(0,r=!1);const f=u.dataTransfer.files;i("drop",f)}function s(u){const f=u.target.files;i("drop",f)}return[r,o,h,a,s]}class YE extends qe{constructor(e){super(),Ge(this,e,UE,BE,Ve,{})}}/*!
* Cropper.js v1.6.1
* https://fengyuanchen.github.io/cropperjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:44:19.860Z
*/function tg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ob(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tg(Object(n),!0).forEach(function(i){HE(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function WE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ng(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,xb(i.key),i)}}function zE(t,e,n){return e&&ng(t.prototype,e),n&&ng(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HE(t,e,n){return e=xb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eb(t){return VE(t)||XE(t)||$E(t)||GE()}function VE(t){if(Array.isArray(t))return _f(t)}function XE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $E(t,e){if(t){if(typeof t=="string")return _f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _f(t,e)}}function _f(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function GE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qE(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xb(t){var e=qE(t,"string");return typeof e=="symbol"?e:String(e)}var pc=typeof window<"u"&&typeof window.document<"u",ki=pc?window:{},xh=pc&&ki.document.documentElement?"ontouchstart"in ki.document.documentElement:!1,Dh=pc?"PointerEvent"in ki:!1,bt="cropper",Ah="all",Db="crop",Ab="move",Pb="zoom",Sr="e",Tr="w",us="s",Qi="n",Do="ne",Ao="nw",Po="se",Mo="sw",yf="".concat(bt,"-crop"),ig="".concat(bt,"-disabled"),On="".concat(bt,"-hidden"),rg="".concat(bt,"-hide"),KE="".concat(bt,"-invisible"),Hl="".concat(bt,"-modal"),bf="".concat(bt,"-move"),oa="".concat(bt,"Action"),Ka="".concat(bt,"Preview"),Ph="crop",Mb="move",Ib="none",wf="crop",Cf="cropend",Sf="cropmove",Tf="cropstart",sg="dblclick",JE=xh?"touchstart":"mousedown",ZE=xh?"touchmove":"mousemove",QE=xh?"touchend touchcancel":"mouseup",og=Dh?"pointerdown":JE,ag=Dh?"pointermove":ZE,lg=Dh?"pointerup pointercancel":QE,cg="ready",ug="resize",fg="wheel",kf="zoom",hg="image/jpeg",ex=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,tx=/^data:/,nx=/^data:image\/jpeg;base64,/,ix=/^img|canvas$/i,Rb=200,Fb=100,dg={viewMode:0,dragMode:Ph,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Rb,minContainerHeight:Fb,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},rx='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',sx=Number.isNaN||ki.isNaN;function Qe(t){return typeof t=="number"&&!sx(t)}var pg=function(e){return e>0&&e<1/0};function vu(t){return typeof t>"u"}function Kr(t){return vf(t)==="object"&&t!==null}var ox=Object.prototype.hasOwnProperty;function Os(t){if(!Kr(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&ox.call(n,"isPrototypeOf")}catch{return!1}}function Tn(t){return typeof t=="function"}var ax=Array.prototype.slice;function Lb(t){return Array.from?Array.from(t):ax.call(t)}function Wt(t,e){return t&&Tn(e)&&(Array.isArray(t)||Qe(t.length)?Lb(t).forEach(function(n,i){e.call(t,n,i,t)}):Kr(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var Ct=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Kr(e)&&i.length>0&&i.forEach(function(o){Kr(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},lx=/\.\d*(?:0|9){12}\d*$/;function js(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return lx.test(t)?Math.round(t*e)/e:t}var cx=/^width|height|left|top|marginLeft|marginTop$/;function cr(t,e){var n=t.style;Wt(e,function(i,r){cx.test(r)&&Qe(i)&&(i="".concat(i,"px")),n[r]=i})}function ux(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Qt(t,e){if(e){if(Qe(t.length)){Wt(t,function(i){Qt(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function _i(t,e){if(e){if(Qe(t.length)){Wt(t,function(n){_i(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Es(t,e,n){if(e){if(Qe(t.length)){Wt(t,function(i){Es(i,e,n)});return}n?Qt(t,e):_i(t,e)}}var fx=/([a-z\d])([A-Z])/g;function Mh(t){return t.replace(fx,"$1-$2").toLowerCase()}function Of(t,e){return Kr(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Mh(e)))}function aa(t,e,n){Kr(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Mh(e)),n)}function hx(t,e){if(Kr(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Mh(e)))}var Nb=/\s\s*/,jb=function(){var t=!1;if(pc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});ki.addEventListener("test",n,i),ki.removeEventListener("test",n,i)}return t}();function Kn(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Nb).forEach(function(o){if(!jb){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Un(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Nb).forEach(function(o){if(i.once&&!jb){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Bs(t,e,n){var i;return Tn(Event)&&Tn(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(i)}function Bb(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var _u=ki.location,dx=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function gg(t){var e=t.match(dx);return e!==null&&(e[1]!==_u.protocol||e[2]!==_u.hostname||e[3]!==_u.port)}function mg(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Jo(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Qe(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Qe(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Qe(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Qe(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Qe(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function px(t){var e=Ob({},t),n=0;return Wt(t,function(i,r){delete e[r],Wt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),u=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+u*u),c=(l-f)/f;Math.abs(c)>Math.abs(n)&&(n=c)})}),n}function Ja(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:Ob({startX:n,startY:i},r)}function gx(t){var e=0,n=0,i=0;return Wt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}function ur(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=pg(i),h=pg(n);if(o&&h){var a=n*e;r==="contain"&&a>i||r==="cover"&&a<i?n=i/e:i=n*e}else o?n=i/e:h&&(i=n*e);return{width:i,height:n}}function mx(t){var e=t.width,n=t.height,i=t.degree;if(i=Math.abs(i)%180,i===90)return{width:n,height:e};var r=i%90*Math.PI/180,o=Math.sin(r),h=Math.cos(r),a=e*h+n*o,s=e*o+n*h;return i>90?{width:s,height:a}:{width:a,height:s}}function vx(t,e,n,i){var r=e.aspectRatio,o=e.naturalWidth,h=e.naturalHeight,a=e.rotate,s=a===void 0?0:a,u=e.scaleX,f=u===void 0?1:u,l=e.scaleY,c=l===void 0?1:l,d=n.aspectRatio,p=n.naturalWidth,m=n.naturalHeight,g=i.fillColor,v=g===void 0?"transparent":g,_=i.imageSmoothingEnabled,b=_===void 0?!0:_,y=i.imageSmoothingQuality,w=y===void 0?"low":y,C=i.maxWidth,T=C===void 0?1/0:C,x=i.maxHeight,A=x===void 0?1/0:x,I=i.minWidth,W=I===void 0?0:I,H=i.minHeight,q=H===void 0?0:H,G=document.createElement("canvas"),B=G.getContext("2d"),z=ur({aspectRatio:d,width:T,height:A}),ee=ur({aspectRatio:d,width:W,height:q},"cover"),oe=Math.min(z.width,Math.max(ee.width,p)),O=Math.min(z.height,Math.max(ee.height,m)),P=ur({aspectRatio:r,width:T,height:A}),F=ur({aspectRatio:r,width:W,height:q},"cover"),L=Math.min(P.width,Math.max(F.width,o)),J=Math.min(P.height,Math.max(F.height,h)),R=[-L/2,-J/2,L,J];return G.width=js(oe),G.height=js(O),B.fillStyle=v,B.fillRect(0,0,oe,O),B.save(),B.translate(oe/2,O/2),B.rotate(s*Math.PI/180),B.scale(f,c),B.imageSmoothingEnabled=b,B.imageSmoothingQuality=w,B.drawImage.apply(B,[t].concat(Eb(R.map(function(D){return Math.floor(js(D))})))),B.restore(),G}var Ub=String.fromCharCode;function _x(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=Ub(t.getUint8(r));return i}var yx=/^data:.*,/;function bx(t){var e=t.replace(yx,""),n=atob(e),i=new ArrayBuffer(n.length),r=new Uint8Array(i);return Wt(r,function(o,h){r[h]=n.charCodeAt(h)}),i}function wx(t,e){for(var n=[],i=8192,r=new Uint8Array(t);r.length>0;)n.push(Ub.apply(null,Lb(r.subarray(0,i)))),r=r.subarray(i);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function Cx(t){var e=new DataView(t),n;try{var i,r,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,a=2;a+1<h;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var s=r+4,u=r+10;if(_x(e,s,4)==="Exif"){var f=e.getUint16(u);if(i=f===18761,(i||f===19789)&&e.getUint16(u+2,i)===42){var l=e.getUint32(u+4,i);l>=8&&(o=u+l)}}}if(o){var c=e.getUint16(o,i),d,p;for(p=0;p<c;p+=1)if(d=o+p*12+2,e.getUint16(d,i)===274){d+=8,n=e.getUint16(d,i),e.setUint16(d,1,i);break}}}catch{n=1}return n}function Sx(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:i}}var Tx={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,i=this.container,r=this.cropper,o=Number(n.minContainerWidth),h=Number(n.minContainerHeight);Qt(r,On),_i(e,On);var a={width:Math.max(i.offsetWidth,o>=0?o:Rb),height:Math.max(i.offsetHeight,h>=0?h:Fb)};this.containerData=a,cr(r,{width:a.width,height:a.height}),Qt(e,On),_i(r,On)},initCanvas:function(){var e=this.containerData,n=this.imageData,i=this.options.viewMode,r=Math.abs(n.rotate)%180===90,o=r?n.naturalHeight:n.naturalWidth,h=r?n.naturalWidth:n.naturalHeight,a=o/h,s=e.width,u=e.height;e.height*a>e.width?i===3?s=e.height*a:u=e.width/a:i===3?u=e.width/a:s=e.height*a;var f={aspectRatio:a,naturalWidth:o,naturalHeight:h,width:s,height:u};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=Ct({},f)},limitCanvas:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=i.viewMode,s=o.aspectRatio,u=this.cropped&&h;if(e){var f=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;a>1?(f=Math.max(f,r.width),l=Math.max(l,r.height),a===3&&(l*s>f?f=l*s:l=f/s)):a>0&&(f?f=Math.max(f,u?h.width:0):l?l=Math.max(l,u?h.height:0):u&&(f=h.width,l=h.height,l*s>f?f=l*s:l=f/s));var c=ur({aspectRatio:s,width:f,height:l});f=c.width,l=c.height,o.minWidth=f,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(n)if(a>(u?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),u&&this.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,a===2&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,n){var i=this.canvasData,r=this.imageData;if(n){var o=mx({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),h=o.width,a=o.height,s=i.width*(h/i.naturalWidth),u=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(u-i.height)/2,i.width=s,i.height=u,i.aspectRatio=h/a,i.naturalWidth=h,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,cr(this.canvas,Ct({width:i.width,height:i.height},Jo({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,i=this.imageData,r=i.naturalWidth*(n.width/n.naturalWidth),o=i.naturalHeight*(n.height/n.naturalHeight);Ct(i,{width:r,height:o,left:(n.width-r)/2,top:(n.height-o)/2}),cr(this.image,Ct({width:i.width,height:i.height},Jo(Ct({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:n.width,height:n.height};i&&(n.height*i>n.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=n.left+(n.width-o.width)/2,o.top=n.top+(n.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Ct({},o)},limitCropBox:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(e){var u=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,l=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,c=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;u=Math.min(u,r.width),f=Math.min(f,r.height),s&&(u&&f?f*s>u?f=u/s:u=f*s:u?f=u/s:f&&(u=f*s),c*s>l?c=l/s:l=c*s),h.minWidth=Math.min(u,l),h.minHeight=Math.min(f,c),h.maxWidth=l,h.maxHeight=c}n&&(a?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(r.width,o.left+o.width)-h.width,h.maxTop=Math.min(r.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=r.width-h.width,h.maxTop=r.height-h.height))},renderCropBox:function(){var e=this.options,n=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&aa(this.face,oa,i.width>=n.width&&i.height>=n.height?Ab:Ah),cr(this.cropBox,Ct({width:i.width,height:i.height},Jo({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Bs(this.element,wf,this.getData())}},kx={initPreview:function(){var e=this.element,n=this.crossOrigin,i=this.options.preview,r=n?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",h=document.createElement("img");if(n&&(h.crossOrigin=n),h.src=r,h.alt=o,this.viewBox.appendChild(h),this.viewBoxImage=h,!!i){var a=i;typeof i=="string"?a=e.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,Wt(a,function(s){var u=document.createElement("img");aa(s,Ka,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),n&&(u.crossOrigin=n),u.src=r,u.alt=o,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(u)})}},resetPreview:function(){Wt(this.previews,function(e){var n=Of(e,Ka);cr(e,{width:n.width,height:n.height}),e.innerHTML=n.html,hx(e,Ka)})},preview:function(){var e=this.imageData,n=this.canvasData,i=this.cropBoxData,r=i.width,o=i.height,h=e.width,a=e.height,s=i.left-n.left-e.left,u=i.top-n.top-e.top;!this.cropped||this.disabled||(cr(this.viewBoxImage,Ct({width:h,height:a},Jo(Ct({translateX:-s,translateY:-u},e)))),Wt(this.previews,function(f){var l=Of(f,Ka),c=l.width,d=l.height,p=c,m=d,g=1;r&&(g=c/r,m=o*g),o&&m>d&&(g=d/o,p=r*g,m=d),cr(f,{width:p,height:m}),cr(f.getElementsByTagName("img")[0],Ct({width:h*g,height:a*g},Jo(Ct({translateX:-s*g,translateY:-u*g},e))))}))}},Ox={bind:function(){var e=this.element,n=this.options,i=this.cropper;Tn(n.cropstart)&&Un(e,Tf,n.cropstart),Tn(n.cropmove)&&Un(e,Sf,n.cropmove),Tn(n.cropend)&&Un(e,Cf,n.cropend),Tn(n.crop)&&Un(e,wf,n.crop),Tn(n.zoom)&&Un(e,kf,n.zoom),Un(i,og,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Un(i,fg,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Un(i,sg,this.onDblclick=this.dblclick.bind(this)),Un(e.ownerDocument,ag,this.onCropMove=this.cropMove.bind(this)),Un(e.ownerDocument,lg,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Un(window,ug,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,i=this.cropper;Tn(n.cropstart)&&Kn(e,Tf,n.cropstart),Tn(n.cropmove)&&Kn(e,Sf,n.cropmove),Tn(n.cropend)&&Kn(e,Cf,n.cropend),Tn(n.crop)&&Kn(e,wf,n.crop),Tn(n.zoom)&&Kn(e,kf,n.zoom),Kn(i,og,this.onCropStart),n.zoomable&&n.zoomOnWheel&&Kn(i,fg,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Kn(i,sg,this.onDblclick),Kn(e.ownerDocument,ag,this.onCropMove),Kn(e.ownerDocument,lg,this.onCropEnd),n.responsive&&Kn(window,ug,this.onResize)}},Ex={resize:function(){if(!this.disabled){var e=this.options,n=this.container,i=this.containerData,r=n.offsetWidth/i.width,o=n.offsetHeight/i.height,h=Math.abs(r-1)>Math.abs(o-1)?r:o;if(h!==1){var a,s;e.restore&&(a=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Wt(a,function(u,f){a[f]=u*h})),this.setCropBoxData(Wt(s,function(u,f){s[f]=u*h})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ib||this.setDragMode(ux(this.dragBox,yf)?Mb:Ph)},wheel:function(e){var n=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,e)))},cropStart:function(e){var n=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Qe(n)&&n!==1||Qe(i)&&i!==0||e.ctrlKey))){var r=this.options,o=this.pointers,h;e.changedTouches?Wt(e.changedTouches,function(a){o[a.identifier]=Ja(a)}):o[e.pointerId||0]=Ja(e),Object.keys(o).length>1&&r.zoomable&&r.zoomOnTouch?h=Pb:h=Of(e.target,oa),ex.test(h)&&Bs(this.element,Tf,{originalEvent:e,action:h})!==!1&&(e.preventDefault(),this.action=h,this.cropping=!1,h===Db&&(this.cropping=!0,Qt(this.dragBox,Hl)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var i=this.pointers;e.preventDefault(),Bs(this.element,Sf,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Wt(e.changedTouches,function(r){Ct(i[r.identifier]||{},Ja(r,!0))}):Ct(i[e.pointerId||0]||{},Ja(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,i=this.pointers;e.changedTouches?Wt(e.changedTouches,function(r){delete i[r.identifier]}):delete i[e.pointerId||0],n&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Es(this.dragBox,Hl,this.cropped&&this.options.modal)),Bs(this.element,Cf,{originalEvent:e,action:n}))}}},xx={change:function(e){var n=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,h=this.pointers,a=this.action,s=n.aspectRatio,u=o.left,f=o.top,l=o.width,c=o.height,d=u+l,p=f+c,m=0,g=0,v=r.width,_=r.height,b=!0,y;!s&&e.shiftKey&&(s=l&&c?l/c:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(r.width,i.width,i.left+i.width),_=g+Math.min(r.height,i.height,i.top+i.height));var w=h[Object.keys(h)[0]],C={x:w.endX-w.startX,y:w.endY-w.startY},T=function(A){switch(A){case Sr:d+C.x>v&&(C.x=v-d);break;case Tr:u+C.x<m&&(C.x=m-u);break;case Qi:f+C.y<g&&(C.y=g-f);break;case us:p+C.y>_&&(C.y=_-p);break}};switch(a){case Ah:u+=C.x,f+=C.y;break;case Sr:if(C.x>=0&&(d>=v||s&&(f<=g||p>=_))){b=!1;break}T(Sr),l+=C.x,l<0&&(a=Tr,l=-l,u-=l),s&&(c=l/s,f+=(o.height-c)/2);break;case Qi:if(C.y<=0&&(f<=g||s&&(u<=m||d>=v))){b=!1;break}T(Qi),c-=C.y,f+=C.y,c<0&&(a=us,c=-c,f-=c),s&&(l=c*s,u+=(o.width-l)/2);break;case Tr:if(C.x<=0&&(u<=m||s&&(f<=g||p>=_))){b=!1;break}T(Tr),l-=C.x,u+=C.x,l<0&&(a=Sr,l=-l,u-=l),s&&(c=l/s,f+=(o.height-c)/2);break;case us:if(C.y>=0&&(p>=_||s&&(u<=m||d>=v))){b=!1;break}T(us),c+=C.y,c<0&&(a=Qi,c=-c,f-=c),s&&(l=c*s,u+=(o.width-l)/2);break;case Do:if(s){if(C.y<=0&&(f<=g||d>=v)){b=!1;break}T(Qi),c-=C.y,f+=C.y,l=c*s}else T(Qi),T(Sr),C.x>=0?d<v?l+=C.x:C.y<=0&&f<=g&&(b=!1):l+=C.x,C.y<=0?f>g&&(c-=C.y,f+=C.y):(c-=C.y,f+=C.y);l<0&&c<0?(a=Mo,c=-c,l=-l,f-=c,u-=l):l<0?(a=Ao,l=-l,u-=l):c<0&&(a=Po,c=-c,f-=c);break;case Ao:if(s){if(C.y<=0&&(f<=g||u<=m)){b=!1;break}T(Qi),c-=C.y,f+=C.y,l=c*s,u+=o.width-l}else T(Qi),T(Tr),C.x<=0?u>m?(l-=C.x,u+=C.x):C.y<=0&&f<=g&&(b=!1):(l-=C.x,u+=C.x),C.y<=0?f>g&&(c-=C.y,f+=C.y):(c-=C.y,f+=C.y);l<0&&c<0?(a=Po,c=-c,l=-l,f-=c,u-=l):l<0?(a=Do,l=-l,u-=l):c<0&&(a=Mo,c=-c,f-=c);break;case Mo:if(s){if(C.x<=0&&(u<=m||p>=_)){b=!1;break}T(Tr),l-=C.x,u+=C.x,c=l/s}else T(us),T(Tr),C.x<=0?u>m?(l-=C.x,u+=C.x):C.y>=0&&p>=_&&(b=!1):(l-=C.x,u+=C.x),C.y>=0?p<_&&(c+=C.y):c+=C.y;l<0&&c<0?(a=Do,c=-c,l=-l,f-=c,u-=l):l<0?(a=Po,l=-l,u-=l):c<0&&(a=Ao,c=-c,f-=c);break;case Po:if(s){if(C.x>=0&&(d>=v||p>=_)){b=!1;break}T(Sr),l+=C.x,c=l/s}else T(us),T(Sr),C.x>=0?d<v?l+=C.x:C.y>=0&&p>=_&&(b=!1):l+=C.x,C.y>=0?p<_&&(c+=C.y):c+=C.y;l<0&&c<0?(a=Ao,c=-c,l=-l,f-=c,u-=l):l<0?(a=Mo,l=-l,u-=l):c<0&&(a=Do,c=-c,f-=c);break;case Ab:this.move(C.x,C.y),b=!1;break;case Pb:this.zoom(px(h),e),b=!1;break;case Db:if(!C.x||!C.y){b=!1;break}y=Bb(this.cropper),u=w.startX-y.left,f=w.startY-y.top,l=o.minWidth,c=o.minHeight,C.x>0?a=C.y>0?Po:Do:C.x<0&&(u-=l,a=C.y>0?Mo:Ao),C.y<0&&(f-=c),this.cropped||(_i(this.cropBox,On),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(o.width=l,o.height=c,o.left=u,o.top=f,this.action=a,this.renderCropBox()),Wt(h,function(x){x.startX=x.endX,x.startY=x.endY})}},Dx={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Qt(this.dragBox,Hl),_i(this.cropBox,On),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ct({},this.initialImageData),this.canvasData=Ct({},this.initialCanvasData),this.cropBoxData=Ct({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ct(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),_i(this.dragBox,Hl),Qt(this.cropBox,On)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Wt(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,_i(this.cropper,ig)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Qt(this.cropper,ig)),this},destroy:function(){var e=this.element;return e[bt]?(e[bt]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=i.left,o=i.top;return this.moveTo(vu(e)?e:r+Number(e),vu(n)?n:o+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Qe(e)&&(i.left=e,r=!0),Qe(n)&&(i.top=n,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,n){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,n)},zoomTo:function(e,n,i){var r=this.options,o=this.canvasData,h=o.width,a=o.height,s=o.naturalWidth,u=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var f=s*e,l=u*e;if(Bs(this.element,kf,{ratio:e,oldRatio:h/s,originalEvent:i})===!1)return this;if(i){var c=this.pointers,d=Bb(this.cropper),p=c&&Object.keys(c).length?gx(c):{pageX:i.pageX,pageY:i.pageY};o.left-=(f-h)*((p.pageX-d.left-o.left)/h),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else Os(n)&&Qe(n.x)&&Qe(n.y)?(o.left-=(f-h)*((n.x-o.left)/h),o.top-=(l-a)*((n.y-o.top)/a)):(o.left-=(f-h)/2,o.top-=(l-a)/2);o.width=f,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Qe(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Qe(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Qe(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Qe(e)&&(i.scaleX=e,r=!0),Qe(n)&&(i.scaleY=n,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,i=this.imageData,r=this.canvasData,o=this.cropBoxData,h;if(this.ready&&this.cropped){h={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height};var a=i.width/i.naturalWidth;if(Wt(h,function(f,l){h[l]=f/a}),e){var s=Math.round(h.y+h.height),u=Math.round(h.x+h.width);h.x=Math.round(h.x),h.y=Math.round(h.y),h.width=u-h.x,h.height=s-h.y}}else h={x:0,y:0,width:0,height:0};return n.rotatable&&(h.rotate=i.rotate||0),n.scalable&&(h.scaleX=i.scaleX||1,h.scaleY=i.scaleY||1),h},setData:function(e){var n=this.options,i=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&Os(e)){var h=!1;n.rotatable&&Qe(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,h=!0),n.scalable&&(Qe(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,h=!0),Qe(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,h=!0)),h&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;Qe(e.x)&&(o.left=e.x*a+r.left),Qe(e.y)&&(o.top=e.y*a+r.top),Qe(e.width)&&(o.width=e.width*a),Qe(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Ct({},this.containerData):{}},getImageData:function(){return this.sized?Ct({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Wt(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=e[i]}),n},setCanvasData:function(e){var n=this.canvasData,i=n.aspectRatio;return this.ready&&!this.disabled&&Os(e)&&(Qe(e.left)&&(n.left=e.left),Qe(e.top)&&(n.top=e.top),Qe(e.width)?(n.width=e.width,n.height=e.width/i):Qe(e.height)&&(n.height=e.height,n.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,i=this.options.aspectRatio,r,o;return this.ready&&this.cropped&&!this.disabled&&Os(e)&&(Qe(e.left)&&(n.left=e.left),Qe(e.top)&&(n.top=e.top),Qe(e.width)&&e.width!==n.width&&(r=!0,n.width=e.width),Qe(e.height)&&e.height!==n.height&&(o=!0,n.height=e.height),i&&(r?n.height=n.width/i:o&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,i=vx(this.image,this.imageData,n,e);if(!this.cropped)return i;var r=this.getData(e.rounded),o=r.x,h=r.y,a=r.width,s=r.height,u=i.width/Math.floor(n.naturalWidth);u!==1&&(o*=u,h*=u,a*=u,s*=u);var f=a/s,l=ur({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),c=ur({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),d=ur({aspectRatio:f,width:e.width||(u!==1?i.width:a),height:e.height||(u!==1?i.height:s)}),p=d.width,m=d.height;p=Math.min(l.width,Math.max(c.width,p)),m=Math.min(l.height,Math.max(c.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=js(p),g.height=js(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,p,m);var _=e.imageSmoothingEnabled,b=_===void 0?!0:_,y=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var w=i.width,C=i.height,T=o,x=h,A,I,W,H,q,G;T<=-a||T>w?(T=0,A=0,W=0,q=0):T<=0?(W=-T,T=0,A=Math.min(w,a+T),q=A):T<=w&&(W=0,A=Math.min(a,w-T),q=A),A<=0||x<=-s||x>C?(x=0,I=0,H=0,G=0):x<=0?(H=-x,x=0,I=Math.min(C,s+x),G=I):x<=C&&(H=0,I=Math.min(s,C-x),G=I);var B=[T,x,A,I];if(q>0&&G>0){var z=p/a;B.push(W*z,H*z,q*z,G*z)}return v.drawImage.apply(v,[i].concat(Eb(B.map(function(ee){return Math.floor(js(ee))})))),g},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!vu(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===Ph,h=n.movable&&e===Mb;e=o||h?e:Ib,n.dragMode=e,aa(i,oa,e),Es(i,yf,o),Es(i,bf,h),n.cropBoxMovable||(aa(r,oa,e),Es(r,yf,o),Es(r,bf,h))}return this}},Ax=ki.Cropper,Yb=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(WE(this,t),!e||!ix.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Ct({},dg,Os(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return zE(t,[{key:"init",value:function(){var n=this.element,i=n.tagName.toLowerCase(),r;if(!n[bt]){if(n[bt]=this,i==="img"){if(this.isImg=!0,r=n.getAttribute("src")||"",this.originalUrl=r,!r)return;r=n.src}else i==="canvas"&&window.HTMLCanvasElement&&(r=n.toDataURL());this.load(r)}}},{key:"load",value:function(n){var i=this;if(n){this.url=n,this.imageData={};var r=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(tx.test(n)){nx.test(n)?this.read(bx(n)):this.clone();return}var h=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=a,h.onerror=a,h.ontimeout=a,h.onprogress=function(){h.getResponseHeader("content-type")!==hg&&h.abort()},h.onload=function(){i.read(h.response)},h.onloadend=function(){i.reloading=!1,i.xhr=null},o.checkCrossOrigin&&gg(n)&&r.crossOrigin&&(n=mg(n)),h.open("GET",n,!0),h.responseType="arraybuffer",h.withCredentials=r.crossOrigin==="use-credentials",h.send()}}},{key:"read",value:function(n){var i=this.options,r=this.imageData,o=Cx(n),h=0,a=1,s=1;if(o>1){this.url=wx(n,hg);var u=Sx(o);h=u.rotate,a=u.scaleX,s=u.scaleY}i.rotatable&&(r.rotate=h),i.scalable&&(r.scaleX=a,r.scaleY=s),this.clone()}},{key:"clone",value:function(){var n=this.element,i=this.url,r=n.crossOrigin,o=i;this.options.checkCrossOrigin&&gg(i)&&(r||(r="anonymous"),o=mg(i)),this.crossOrigin=r,this.crossOriginUrl=o;var h=document.createElement("img");r&&(h.crossOrigin=r),h.src=o||i,h.alt=n.alt||"The image to crop",this.image=h,h.onload=this.start.bind(this),h.onerror=this.stop.bind(this),Qt(h,rg),n.parentNode.insertBefore(h,n.nextSibling)}},{key:"start",value:function(){var n=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var r=ki.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ki.navigator.userAgent),o=function(u,f){Ct(n.imageData,{naturalWidth:u,naturalHeight:f,aspectRatio:u/f}),n.initialImageData=Ct({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(i.naturalWidth&&!r){o(i.naturalWidth,i.naturalHeight);return}var h=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=h,h.onload=function(){o(h.width,h.height),r||a.removeChild(h)},h.src=i.src,r||(h.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(h))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,i=this.options,r=this.image,o=n.parentNode,h=document.createElement("div");h.innerHTML=rx;var a=h.querySelector(".".concat(bt,"-container")),s=a.querySelector(".".concat(bt,"-canvas")),u=a.querySelector(".".concat(bt,"-drag-box")),f=a.querySelector(".".concat(bt,"-crop-box")),l=f.querySelector(".".concat(bt,"-face"));this.container=o,this.cropper=a,this.canvas=s,this.dragBox=u,this.cropBox=f,this.viewBox=a.querySelector(".".concat(bt,"-view-box")),this.face=l,s.appendChild(r),Qt(n,On),o.insertBefore(a,n.nextSibling),_i(r,rg),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,Qt(f,On),i.guides||Qt(f.getElementsByClassName("".concat(bt,"-dashed")),On),i.center||Qt(f.getElementsByClassName("".concat(bt,"-center")),On),i.background&&Qt(a,"".concat(bt,"-bg")),i.highlight||Qt(l,KE),i.cropBoxMovable&&(Qt(l,bf),aa(l,oa,Ah)),i.cropBoxResizable||(Qt(f.getElementsByClassName("".concat(bt,"-line")),On),Qt(f.getElementsByClassName("".concat(bt,"-point")),On)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),Tn(i.ready)&&Un(n,cg,i.ready,{once:!0}),Bs(n,cg)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),_i(this.element,On)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Ax,t}},{key:"setDefaults",value:function(n){Ct(dg,Os(n)&&n)}}]),t}();Ct(Yb.prototype,Tx,kx,Ox,Ex,xx,Dx);let Ih="https://podiz-convert-uieqvbv3ya-du.a.run.app";const Px=async(t,e,n="#FFFFFF")=>{try{const i={colorCode:n,composites:t.composites,printIndex:e,prints:t.prints,scenes:t.scenes};return await(await fetch(`${Ih}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}catch(i){console.log({error:i})}},Mx=async(t,e)=>{try{const n={data:e,shopid:t};return await(await fetch(`${Ih}/background_remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(n){return JSON.stringify(n)}},vg=async t=>{try{return await(await fetch(`${Ih}/thumbnail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}};function Ix(t){return Object.keys(t).reduce((e,n)=>t[n]===void 0?e:e+`${n}:${t[n]};`,"")}Ix({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Wb(t,...e){const n={};for(const i of Object.keys(t))e.includes(i)||(n[i]=t[i]);return n}function Za(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=i)}return e}function _g(t){function e(n){return n(t),()=>{}}return{subscribe:e}}const Qa=t=>new Proxy(t,{get(e,n,i){return Reflect.get(e,n,i)},ownKeys(e){return Reflect.ownKeys(e).filter(n=>n!=="action")}}),yg=t=>typeof t=="function";zb("empty");function zb(t,e){const{stores:n,action:i,returned:r}=e??{},o=(()=>{if(n&&r)return V1(n,a=>{const s=r(a);if(yg(s)){const u=(...f)=>Qa(Za({...s(...f),[`data-melt-${t}`]:"",action:i??fs}));return u.action=i??fs,u}return Qa(Za({...s,[`data-melt-${t}`]:"",action:i??fs}))});{const a=r,s=a==null?void 0:a();if(yg(s)){const u=(...f)=>Qa(Za({...s(...f),[`data-melt-${t}`]:"",action:i??fs}));return u.action=i??fs,_g(u)}return _g(Qa(Za({...s,[`data-melt-${t}`]:"",action:i??fs})))}})(),h=i??(()=>{});return h.subscribe=o.subscribe,h}function Rx(t){const e=o=>o?`${t}-${o}`:t,n=o=>`data-melt-${t}${o?`-${o}`:""}`,i=o=>`[data-melt-${t}${o?`-${o}`:""}]`;return{name:e,attribute:n,selector:i,getEl:o=>document.querySelector(i(o))}}function fs(){}function Hb(t,e,n,i){const r=Array.isArray(e)?e:[e];return r.forEach(o=>t.addEventListener(o,n,i)),()=>{r.forEach(o=>t.removeEventListener(o,n,i))}}function gc(t){return{...t,get:()=>mi(t)}}gc.writable=function(t){const e=St(t);let n=t;return{subscribe:e.subscribe,set(i){e.set(i),n=i},update(i){const r=i(n);e.set(r),n=r},get(){return n}}};gc.derived=function(t,e){const n=new Map,i=()=>{const o=Array.isArray(t)?t.map(h=>h.get()):t.get();return e(o)};return{get:i,subscribe:o=>{const h=[];return(Array.isArray(t)?t:[t]).forEach(s=>{h.push(s.subscribe(()=>{o(i())}))}),o(i()),n.set(o,h),()=>{const s=n.get(o);if(s)for(const u of s)u();n.delete(o)}}}};const Fx=(t,e)=>{const n=gc(t),i=(o,h)=>{n.update(a=>{const s=o(a);let u=s;return e&&(u=e({curr:a,next:s})),h==null||h(u),u})};return{...n,update:i,set:o=>{i(()=>o)}}},Lx={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Nx(t){const e={};return Object.keys(t).forEach(n=>{const i=n,r=t[i];e[i]=gc(St(r))}),e}Fs(void 0,t=>{function e(i){t(i),t(void 0)}return Hb(document,"pointerup",e,{passive:!1,capture:!0})});Fs(void 0,t=>{function e(i){i&&i.key===Lx.ESCAPE&&t(i),t(void 0)}return Hb(document,"keydown",e,{passive:!1})});Fs(!1),Fs(!1),Fs(void 0);const jx={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Wb(jx,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Bx={defaultValue:0,max:100},{name:Ux}=Rx("progress"),Yx=t=>{const e={...Bx,...t},n=Nx(Wb(e,"value")),{max:i}=n,r=e.value??St(e.defaultValue),o=Fx(r,e==null?void 0:e.onValueChange);return{elements:{root:zb(Ux(),{stores:[o,i],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:o},options:n}};function bg(t){let e,n;return e=new Ce({props:{icon:"line-md:loading-twotone-loop",height:"50"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function wg(t){let e,n,i,r,o,h=[t[3],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}],a={};for(let s=0;s<h.length;s+=1)a=bi(a,h[s]);return{c(){e=E("div"),n=E("div"),S(n,"class","h-full w-full bg-black transition-transform duration-[660ms] ease-[cubic-bezier(0.65,0,0.35,1)]"),S(n,"style",i=`transform: translateX(-${100-100*(t[2]??0)/(t[4]??1)}%)`),Ml(e,a),Ci(e,"svelte-1xfyli4",!0)},m(s,u){U(s,e,u),k(e,n),r||(o=wy(t[3].action(e)),r=!0)},p(s,u){u&20&&i!==(i=`transform: translateX(-${100-100*(s[2]??0)/(s[4]??1)}%)`)&&S(n,"style",i),Ml(e,a=Gr(h,[u&8&&s[3],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}])),Ci(e,"svelte-1xfyli4",!0)},d(s){s&&j(e),r=!1,o()}}}function Wx(t){let e,n,i,r,o,h,a,s=t[1]&&bg();const u=t[8].default,f=ba(u,t,t[7],null);let l=t[0]&&t[2]&&wg(t);return{c(){e=E("div"),n=E("div"),n.innerHTML='<div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div> <div class="circle svelte-1xfyli4"></div>',i=V(),s&&s.c(),r=V(),o=E("div"),f&&f.c(),h=V(),l&&l.c(),S(n,"class","loader svelte-1xfyli4"),S(o,"class","loader-text svelte-1xfyli4"),S(e,"class","loader-container svelte-1xfyli4")},m(c,d){U(c,e,d),k(e,n),k(e,i),s&&s.m(e,null),k(e,r),k(e,o),f&&f.m(o,null),k(e,h),l&&l.m(e,null),a=!0},p(c,[d]){c[1]?s?d&2&&M(s,1):(s=bg(),s.c(),M(s,1),s.m(e,r)):s&&(Te(),Y(s,1,1,()=>{s=null}),ke()),f&&f.p&&(!a||d&128)&&Ca(f,u,c,c[7],a?wa(u,c[7],d,null):Sa(c[7]),null),c[0]&&c[2]?l?l.p(c,d):(l=wg(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(c){a||(M(s),M(f,c),a=!0)},o(c){Y(s),Y(f,c),a=!1},d(c){c&&j(e),s&&s.d(),f&&f.d(c),l&&l.d()}}}function zx(t,e,n){let i,r,{$$slots:o={},$$scope:h}=e,{isProgress:a=!1}=e,{isSpinner:s=!1}=e,{progress:u=0}=e;const{elements:{root:f},options:{max:l}}=Yx({max:100});return Me(t,f,c=>n(3,i=c)),Me(t,l,c=>n(4,r=c)),t.$$set=c=>{"isProgress"in c&&n(0,a=c.isProgress),"isSpinner"in c&&n(1,s=c.isSpinner),"progress"in c&&n(2,u=c.progress),"$$scope"in c&&n(7,h=c.$$scope)},[a,s,u,i,r,f,l,h,o]}class Vb extends qe{constructor(e){super(),Ge(this,e,zx,Wx,Ve,{isProgress:0,isSpinner:1,progress:2})}}function Hx(){const t={};return document.getElementById("podiz-publish-uuid")&&(t.uuid=document.getElementById("podiz-publish-uuid").value),document.getElementById("podiz-shop-id")&&(t.shopid=document.getElementById("podiz-shop-id").value),document.getElementById("podiz-provider")&&(t.provider=document.getElementById("podiz-provider").value),document.getElementById("podiz-productno")&&(t.productno=document.getElementById("podiz-productno").value),document.getElementById("podiz-preview-class")&&(t.previewclass=document.getElementById("podiz-preview-class").value),document.getElementById("podiz-preview-item-class")&&(t.previewitem=document.getElementById("podiz-preview-item-class").value),document.getElementById("podiz-mode")&&(t.mode=document.getElementById("podiz-mode").value),t}function Vx(){const t=document.querySelectorAll('input[type="hidden"].podiz-hidden');t.forEach(n=>{const i=n.value;document.querySelectorAll(`.${i}`).forEach(o=>{o.style.display="none"})});const e=new MutationObserver(n=>{n.forEach(i=>{if(i.type==="attributes"&&i.attributeName==="value"){const o=i.target.value;document.querySelectorAll(`.${o}`).forEach(a=>{a.style.display="none"})}})});t.forEach(n=>{e.observe(n,{attributes:!0})})}function Xx(t){const e=t.name,n=e.lastIndexOf(".");return n===-1?"":e.slice(n+1).toLowerCase()}async function $x(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/variants`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function Ef(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/options`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function Cg(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function Sg(t,e){return(await $x(e)).variants.find(i=>{const r=t.productOptions.map(h=>h.value),o=i.options.map(h=>h.value);return r.join(",")===o.join(",")})}async function Gx(){var n;const t="item_option_add",e="podiz";try{const i=mi(di),r=mi(Yl),o=await Promise.all(i.map(async h=>{const a=[],s=r.linkOptions.find(l=>{var c,d,p;return((c=l.editorOptions)==null?void 0:c.optionValue1)===h.currentOption.optionValue1&&((d=l.editorOptions)==null?void 0:d.optionValue2)===h.currentOption.optionValue2&&((p=l.editorOptions)==null?void 0:p.optionValue3)===h.currentOption.optionValue3}),u=await Sg(s,s.productNo);a.push({product_no:s.productNo,variants_code:u.variant_code,quantity:h.count,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]});const f=await Promise.all(h.prints.filter(l=>l.imageDataURL).map(async l=>{const c=r.linkOptions.find(p=>p.print===l.id);if(!c)return null;const d=await Sg(c,c.productNo);return{product_no:c.productNo,quantity:h.count,variants_code:d.variant_code,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]}}));return[...a,...f.filter(Boolean)]}));if(CAFE24API){const h=await Promise.all(o.map(s=>new Promise((u,f)=>{CAFE24API.addCart("A0000","P",s,(l,c)=>{u(l?{error:l,product:s}:c)})})));console.log({results:h});let a=[];for(let s=0;s<h.length;s++)(n=h[s].errors)!=null&&n.length&&a.push(...h[s].errors);if(a.length>0){console.error("     :");for(let s=0;s<a.length;s++)throw a[s]}else{const s="/order/basket.html#none";window.location.pathname.includes("/order/basket.htm")?window.location.reload():window.location.href=s}}}catch(i){throw console.error("Error in addCafe24Cart:",i),i}}function qx(t,e=null){const n=document.getElementsByClassName(t),i=new Set,r=[],o=/\s*\[\s*podiz\s*:\s*([a-f0-9-]{36})\s*\]\s*/g,h=[];function a(s,u){for(;s&&s.nodeType===Node.TEXT_NODE;)s=s.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE;){if(s.classList.contains(u))return s;s=s.parentNode}return null}for(let s of n){const u=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let f;for(;f=u.nextNode();){let l;for(;(l=o.exec(f.textContent))!==null;){i.add(l[1]);let c;e?c=a(f,e):c=f.parentElement,c&&!r.includes(c)&&r.push(c),h.push({uuid:l[1],element:c})}}}return{uids:Array.from(i),elements:r,items:h}}async function Kx(){try{return new Promise(function(t,e){if(CAFE24API){const n={cafe24MallId:null,cafe24ShopNo:null,cafe24UserType:null,cafe24MemberId:null};n.cafe24MallId=CAFE24API.MALL_ID,n.cafe24ShopNo=CAFE24API.SHOP_NO,CAFE24API.getCustomerIDInfo(function(i,r){if(i)throw i;r.id.member_id?(n.cafe24UserType="member",n.cafe24MemberId=r.id.member_id):(n.cafe24UserType="guest",n.cafe24MemberId=r.id.guest_id)}),t(n)}})}catch(t){reject(t)}}const Jx=()=>new Promise(function(t,e){CAFE24API&&CAFE24API.getCartItemList(async function(n,i){if(n)console.log({err:n});else return t(i)})});function Vl(t){return parseFloat(t).toLocaleString("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0})}async function Zx(){try{return new Promise((t,e)=>{CAFE24API?CAFE24API.get("/api/v2/categories",(n,i)=>{n?(console.error("Error fetching product categories:",n),e(n)):t(i.categories)}):e(new Error("CAFE24API is not available"))})}catch(t){throw console.error("Error in getCafe24ProductCategories:",t),t}}async function Qx(t,e,n=10,i=1){try{return new Promise((r,o)=>{if(CAFE24API){let h="/api/v2/products";const a=[];t&&a.push(`category=${encodeURIComponent(t)}`),e&&a.push(`keyword=${encodeURIComponent(e)}`),a.push(`limit=${n}`),a.push(`page=${i}`),a.length>0&&(h+="?"+a.join("&")),CAFE24API.get(h,(s,u)=>{s?(console.error("Error searching products:",s),o(s)):r(u.products)})}else o(new Error("CAFE24API is not available"))})}catch(r){throw console.error("Error in searchProducts:",r),r}}var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},e2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],h=t[n++],a=t[n++],s=((r&7)<<18|(o&63)<<12|(h&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(s&1023))}else{const o=t[n++],h=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|h&63)}}return e.join("")},$b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],h=r+1<t.length,a=h?t[r+1]:0,s=r+2<t.length,u=s?t[r+2]:0,f=o>>2,l=(o&3)<<4|a>>4;let c=(a&15)<<2|u>>6,d=u&63;s||(d=64,h||(c=64)),i.push(n[f],n[l],n[c],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):e2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||a==null||u==null||l==null)throw new t2;const c=o<<2|a>>4;if(i.push(c),u!==64){const d=a<<4&240|u>>2;if(i.push(d),l!==64){const p=u<<6&192|l;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class t2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n2=function(t){const e=Xb(t);return $b.encodeByteArray(e,!0)},Xl=function(t){return n2(t).replace(/\./g,"")},i2=function(t){try{return $b.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=()=>r2().__FIREBASE_DEFAULTS__,o2=()=>{if(typeof process>"u"||typeof Tg>"u")return;const t=Tg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&i2(t[1]);return e&&JSON.parse(e)},Gb=()=>{try{return s2()||o2()||a2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l2=t=>{var e,n;return(n=(e=Gb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c2=t=>{const e=l2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},qb=()=>{var t;return(t=Gb())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xl(JSON.stringify(n)),Xl(JSON.stringify(h)),""].join(".")}function h2(){try{return typeof indexedDB=="object"}catch{return!1}}function d2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="FirebaseError";class go extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=p2,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kb.prototype.create)}}class Kb{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],h=o?g2(o,i):"Error",a=`${this.serviceName}: ${h} (${r}).`;return new go(r,a,i)}}function g2(t,e){return t.replace(m2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const m2=/\{\$([^}]+)}/g;function xf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],h=e[r];if(kg(o)&&kg(h)){if(!xf(o,h))return!1}else if(o!==h)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function kg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){return t&&t._delegate?t._delegate:t}class la{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new u2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y2(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,h]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);i===a&&h.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _2(t){return t===Ar?void 0:t}function y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const w2={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},C2=gt.INFO,S2={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},T2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=S2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k2{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=T2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const O2=(t,e)=>e.some(n=>t instanceof n);let Og,Eg;function E2(){return Og||(Og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x2(){return Eg||(Eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jb=new WeakMap,Df=new WeakMap,Zb=new WeakMap,yu=new WeakMap,Rh=new WeakMap;function D2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",h)},o=()=>{n(gr(t.result)),r()},h=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Jb.set(n,t)}).catch(()=>{}),Rh.set(e,t),e}function A2(t){if(Df.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",h),t.removeEventListener("abort",h)},o=()=>{n(),r()},h=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",h),t.addEventListener("abort",h)});Df.set(t,e)}let Af={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P2(t){Af=t(Af)}function M2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bu(this),e,...n);return Zb.set(i,e.sort?e.sort():[e]),gr(i)}:x2().includes(t)?function(...e){return t.apply(bu(this),e),gr(Jb.get(this))}:function(...e){return gr(t.apply(bu(this),e))}}function I2(t){return typeof t=="function"?M2(t):(t instanceof IDBTransaction&&A2(t),O2(t,E2())?new Proxy(t,Af):t)}function gr(t){if(t instanceof IDBRequest)return D2(t);if(yu.has(t))return yu.get(t);const e=I2(t);return e!==t&&(yu.set(t,e),Rh.set(e,t)),e}const bu=t=>Rh.get(t);function R2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const h=indexedDB.open(t,e),a=gr(h);return i&&h.addEventListener("upgradeneeded",s=>{i(gr(h.result),s.oldVersion,s.newVersion,gr(h.transaction),s)}),n&&h.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),a.then(s=>{o&&s.addEventListener("close",()=>o()),r&&s.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const F2=["get","getKey","getAll","getAllKeys","count"],L2=["put","add","delete","clear"],wu=new Map;function xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wu.get(e))return wu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=L2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||F2.includes(n)))return;const o=async function(h,...a){const s=this.transaction(h,r?"readwrite":"readonly");let u=s.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&s.done]))[0]};return wu.set(e,o),o}P2(t=>({...t,get:(e,n,i)=>xg(e,n)||t.get(e,n,i),has:(e,n)=>!!xg(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function j2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",Dg="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new k2("@firebase/app"),B2="@firebase/app-compat",U2="@firebase/analytics-compat",Y2="@firebase/analytics",W2="@firebase/app-check-compat",z2="@firebase/app-check",H2="@firebase/auth",V2="@firebase/auth-compat",X2="@firebase/database",$2="@firebase/database-compat",G2="@firebase/functions",q2="@firebase/functions-compat",K2="@firebase/installations",J2="@firebase/installations-compat",Z2="@firebase/messaging",Q2="@firebase/messaging-compat",eD="@firebase/performance",tD="@firebase/performance-compat",nD="@firebase/remote-config",iD="@firebase/remote-config-compat",rD="@firebase/storage",sD="@firebase/storage-compat",oD="@firebase/firestore",aD="@firebase/firestore-compat",lD="firebase",cD="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="[DEFAULT]",uD={[Pf]:"fire-core",[B2]:"fire-core-compat",[Y2]:"fire-analytics",[U2]:"fire-analytics-compat",[z2]:"fire-app-check",[W2]:"fire-app-check-compat",[H2]:"fire-auth",[V2]:"fire-auth-compat",[X2]:"fire-rtdb",[$2]:"fire-rtdb-compat",[G2]:"fire-fn",[q2]:"fire-fn-compat",[K2]:"fire-iid",[J2]:"fire-iid-compat",[Z2]:"fire-fcm",[Q2]:"fire-fcm-compat",[eD]:"fire-perf",[tD]:"fire-perf-compat",[nD]:"fire-rc",[iD]:"fire-rc-compat",[rD]:"fire-gcs",[sD]:"fire-gcs-compat",[oD]:"fire-fst",[aD]:"fire-fst-compat","fire-js":"fire-js",[lD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Map,fD=new Map,If=new Map;function Ag(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(If.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,t);for(const n of $l.values())Ag(n,t);for(const n of fD.values())Ag(n,t);return!0}function hD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Kb("app","Firebase",dD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=cD;function Qb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Mf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mr.create("bad-app-name",{appName:String(r)});if(n||(n=qb()),!n)throw mr.create("no-options");const o=$l.get(r);if(o){if(xf(n,o.options)&&xf(i,o.config))return o;throw mr.create("duplicate-app",{appName:r})}const h=new b2(r);for(const s of If.values())h.addComponent(s);const a=new pD(n,i,h);return $l.set(r,a),a}function mD(t=Mf){const e=$l.get(t);if(!e&&t===Mf&&qb())return Qb();if(!e)throw mr.create("no-app",{appName:t});return e}function Us(t,e,n){var i;let r=(i=uD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const a=[`Unable to register library "${r}" with version "${e}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&a.push("and"),h&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(a.join(" "));return}Gl(new la(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="firebase-heartbeat-database",_D=1,ca="firebase-heartbeat-store";let Cu=null;function e0(){return Cu||(Cu=R2(vD,_D,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Cu}async function yD(t){try{const n=(await e0()).transaction(ca),i=await n.objectStore(ca).get(t0(t));return await n.done,i}catch(e){if(e instanceof go)Jr.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(n.message)}}}async function Pg(t,e){try{const i=(await e0()).transaction(ca,"readwrite");await i.objectStore(ca).put(e,t0(t)),await i.done}catch(n){if(n instanceof go)Jr.warn(n.message);else{const i=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jr.warn(i.message)}}}function t0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=1024,wD=30*24*60*60*1e3;class CD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const a=new Date(h.date).valueOf();return Date.now()-a<=wD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mg(),{heartbeatsToSend:i,unsentEntries:r}=SD(this._heartbeatsCache.heartbeats),o=Xl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Mg(){return new Date().toISOString().substring(0,10)}function SD(t,e=bD){const n=[];let i=t.slice();for(const r of t){const o=n.find(h=>h.agent===r.agent);if(o){if(o.dates.push(r.date),Ig(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ig(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h2()?d2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ig(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){Gl(new la("platform-logger",e=>new N2(e),"PRIVATE")),Gl(new la("heartbeat",e=>new CD(e),"PRIVATE")),Us(Pf,Dg,t),Us(Pf,Dg,"esm2017"),Us("fire-js","")}kD("");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n0="firebasestorage.googleapis.com",i0="storageBucket",OD=2*60*1e3,ED=10*60*1e3,xD=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends go{constructor(e,n,i=0){super(Su(e),`Firebase Storage: ${n} (${Su(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Su(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function Su(t){return"storage/"+t}function Fh(){const t="An unknown error occurred, please check the error payload for server response.";return new Mt(vt.UNKNOWN,t)}function DD(t){return new Mt(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function AD(t){return new Mt(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt(vt.UNAUTHENTICATED,t)}function MD(){return new Mt(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ID(t){return new Mt(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function r0(){return new Mt(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s0(){return new Mt(vt.CANCELED,"User canceled the upload/download.")}function RD(t){return new Mt(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function FD(t){return new Mt(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LD(){return new Mt(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+i0+"' property when initializing the app?")}function o0(){return new Mt(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ND(){return new Mt(vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function jD(){return new Mt(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BD(t){return new Mt(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rf(t){return new Mt(vt.INVALID_ARGUMENT,t)}function a0(){return new Mt(vt.APP_DELETED,"The Firebase app was deleted.")}function UD(t){return new Mt(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zo(t,e){return new Mt(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Io(t){throw new Mt(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(i.path==="")return i;throw FD(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const h="(/(.*))?$",a=new RegExp("^gs://"+r+h,"i"),s={bucket:1,path:3};function u(y){y.path_=decodeURIComponent(y.path)}const f="v[A-Za-z0-9_]+",l=n.replace(/[.]/g,"\\."),c="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${f}/b/${r}/o${c}`,"i"),p={bucket:1,path:3},m=n===n0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${r}/${g}`,"i"),b=[{regex:a,indices:s,postModify:o},{regex:d,indices:p,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let y=0;y<b.length;y++){const w=b[y],C=w.regex.exec(e);if(C){const T=C[w.indices.bucket];let x=C[w.indices.path];x||(x=""),i=new Rn(T,x),w.postModify(i);break}}if(i==null)throw RD(e);return i}}class YD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t,e,n){let i=1,r=null,o=null,h=!1,a=0;function s(){return a===2}let u=!1;function f(...g){u||(u=!0,e.apply(null,g))}function l(g){r=setTimeout(()=>{r=null,t(d,s())},g)}function c(){o&&clearTimeout(o)}function d(g,...v){if(u){c();return}if(g){c(),f.call(null,g,...v);return}if(s()||h){c(),f.call(null,g,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,l(b)}let p=!1;function m(g){p||(p=!0,c(),!u&&(r!==null?(g||(a=2),clearTimeout(r),l(0)):g||(a=1)))}return l(0),o=setTimeout(()=>{h=!0,m(!0)},n),m}function zD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){return t!==void 0}function VD(t){return typeof t=="function"}function XD(t){return typeof t=="object"&&!Array.isArray(t)}function vc(t){return typeof t=="string"||t instanceof String}function Rg(t){return Lh()&&t instanceof Blob}function Lh(){return typeof Blob<"u"}function Fg(t,e,n,i){if(i<e)throw Rf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Rf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function l0(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hr||(Hr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n,i,r,o,h,a,s,u,f,l,c=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=h,this.callback_=a,this.errorCallback_=s,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=l,this.retry=c,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new el(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const h=a=>{const s=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(s,u)};this.progressCallback_!==null&&o.addUploadProgressListener(h),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(h),this.pendingConnection_=null;const a=o.getErrorCode()===Hr.NO_ERROR,s=o.getStatus();if(!a||c0(s,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Hr.ABORT;i(!1,new el(!1,null,f));return}const u=this.successCodes_.indexOf(s)!==-1;i(!0,new el(u,o))})},n=(i,r)=>{const o=this.resolve_,h=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const s=this.callback_(a,a.getResponse());HD(s)?o(s):o()}catch(s){h(s)}else if(a!==null){const s=Fh();s.serverResponse=a.getErrorText(),this.errorCallback_?h(this.errorCallback_(a,s)):h(s)}else if(r.canceled){const s=this.appDelete_?a0():s0();h(s)}else{const s=r0();h(s)}};this.canceled_?n(!1,new el(!1,null,!0)):this.backoffId_=WD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class el{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZD(t,e,n,i,r,o,h=!0){const a=l0(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return KD(u,e),GD(u,n),qD(u,o),JD(u,i),new $D(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eA(...t){const e=QD();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Lh())return new Blob(t);throw new Mt(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){if(typeof atob>"u")throw BD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tu{constructor(e,n){this.data=e,this.contentType=n||null}}function iA(t,e){switch(t){case vi.RAW:return new Tu(u0(e));case vi.BASE64:case vi.BASE64URL:return new Tu(f0(t,e));case vi.DATA_URL:return new Tu(sA(e),oA(e))}throw Fh()}function u0(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,h=t.charCodeAt(++n);i=65536|(o&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function rA(t){let e;try{e=decodeURIComponent(t)}catch{throw Zo(vi.DATA_URL,"Malformed data URL.")}return u0(e)}function f0(t,e){switch(t){case vi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Zo(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case vi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Zo(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nA(e)}catch(r){throw r.message.includes("polyfill")?r:Zo(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class h0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zo(vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=aA(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function sA(t){const e=new h0(t);return e.base64?f0(vi.BASE64,e.rest):rA(e.rest)}function oA(t){return new h0(t).contentType}function aA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){let i=0,r="";Rg(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Rg(this.data_)){const i=this.data_,r=tA(i,e,n);return r===null?null:new sr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new sr(i,!0)}}static getBlob(...e){if(Lh()){const n=e.map(i=>i instanceof sr?i.data_:i);return new sr(eA.apply(null,n))}else{const n=e.map(h=>vc(h)?iA(vi.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(h=>{for(let a=0;a<h.length;a++)r[o++]=h[a]}),new sr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){let e;try{e=JSON.parse(t)}catch{return null}return XD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cA(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function p0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e){return e}class _n{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||uA}}let tl=null;function fA(t){return!vc(t)||t.length<2?t:p0(t)}function g0(){if(tl)return tl;const t=[];t.push(new _n("bucket")),t.push(new _n("generation")),t.push(new _n("metageneration")),t.push(new _n("name","fullPath",!0));function e(o,h){return fA(h)}const n=new _n("name");n.xform=e,t.push(n);function i(o,h){return h!==void 0?Number(h):h}const r=new _n("size");return r.xform=i,t.push(r),t.push(new _n("timeCreated")),t.push(new _n("updated")),t.push(new _n("md5Hash",null,!0)),t.push(new _n("cacheControl",null,!0)),t.push(new _n("contentDisposition",null,!0)),t.push(new _n("contentEncoding",null,!0)),t.push(new _n("contentLanguage",null,!0)),t.push(new _n("contentType",null,!0)),t.push(new _n("metadata","customMetadata",!0)),tl=t,tl}function hA(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Rn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function dA(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const h=n[o];i[h.local]=h.xform(i,e[h.server])}return hA(i,t),i}function m0(t,e,n){const i=d0(e);return i===null?null:dA(t,i,n)}function pA(t,e,n,i){const r=d0(e);if(r===null||!vc(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const h=encodeURIComponent;return o.split(",").map(u=>{const f=t.bucket,l=t.fullPath,c="/b/"+h(f)+"/o/"+h(l),d=Ea(c,n,i),p=l0({alt:"media",token:u});return d+p})[0]}function v0(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class mo{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){if(!t)throw Fh()}function Nh(t,e){function n(i,r){const o=m0(t,r,e);return zi(o!==null),o}return n}function gA(t,e){function n(i,r){const o=m0(t,r,e);return zi(o!==null),pA(o,r,t.host,t._protocol)}return n}function xa(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=MD():r=PD():n.getStatus()===402?r=AD(t.bucket):n.getStatus()===403?r=ID(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function _0(t){const e=xa(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=DD(t.path)),o.serverResponse=r.serverResponse,o}return n}function mA(t,e,n){const i=e.fullServerUrl(),r=Ea(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new mo(r,o,Nh(t,n),h);return a.errorHandler=_0(e),a}function vA(t,e,n){const i=e.fullServerUrl(),r=Ea(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new mo(r,o,gA(t,n),h);return a.errorHandler=_0(e),a}function _A(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function y0(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=_A(null,e)),i}function yA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const s=a();h["Content-Type"]="multipart/related; boundary="+s;const u=y0(e,i,r),f=v0(u,n),l="--"+s+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+s+`\r
Content-Type: `+u.contentType+`\r
\r
`,c=`\r
--`+s+"--",d=sr.getBlob(l,i,c);if(d===null)throw o0();const p={name:u.fullPath},m=Ea(o,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,_=new mo(m,g,Nh(t,n),v);return _.urlParams=p,_.headers=h,_.body=d.uploadData(),_.errorHandler=xa(e),_}class ql{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function jh(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{zi(!1)}return zi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function bA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h=y0(e,i,r),a={name:h.fullPath},s=Ea(o,t.host,t._protocol),u="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},l=v0(h,n),c=t.maxUploadRetryTime;function d(m){jh(m);let g;try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{zi(!1)}return zi(vc(g)),g}const p=new mo(s,u,d,c);return p.urlParams=a,p.headers=f,p.body=l,p.errorHandler=xa(e),p}function wA(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(u){const f=jh(u,["active","final"]);let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{zi(!1)}l||zi(!1);const c=Number(l);return zi(!isNaN(c)),new ql(c,i.size(),f==="final")}const h="POST",a=t.maxUploadRetryTime,s=new mo(n,h,o,a);return s.headers=r,s.errorHandler=xa(e),s}const Lg=256*1024;function CA(t,e,n,i,r,o,h,a){const s=new ql(0,0);if(h?(s.current=h.current,s.total=h.total):(s.current=0,s.total=i.size()),i.size()!==s.total)throw ND();const u=s.total-s.current;let f=u;r>0&&(f=Math.min(f,r));const l=s.current,c=l+f;let d="";f===0?d="finalize":u===f?d="upload, finalize":d="upload";const p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${s.current}`},m=i.slice(l,c);if(m===null)throw o0();function g(y,w){const C=jh(y,["active","final"]),T=s.current+f,x=i.size();let A;return C==="final"?A=Nh(e,o)(y,w):A=null,new ql(T,x,C==="final",A)}const v="POST",_=e.maxUploadRetryTime,b=new mo(n,v,g,_);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=xa(t),b}const kn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ku(t){switch(t){case"running":case"pausing":case"canceling":return kn.RUNNING;case"paused":return kn.PAUSED;case"success":return kn.SUCCESS;case"canceled":return kn.CANCELED;case"error":return kn.ERROR;default:return kn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,i){if(VD(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class TA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Io("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Io("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Io("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Io("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Io("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kA extends TA{initXhr(){this.xhr_.responseType="text"}}function Cs(){return new kA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=g0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(c0(r.status,[]))if(o)r=r0();else{this.sleepTime=Math.max(this.sleepTime*2,xD),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(vt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=bA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Cs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=wA(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Cs,n,i);this._request=o,o.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Lg*this._chunkMultiplier,n=new ql(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let h;try{h=CA(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(s){this._error=s,this._transition("error");return}const a=this._ref.storage._makeRequest(h,Cs,r,o,!1);this._request=a,a.getPromise().then(s=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(s.current),s.finalized?(this._metadata=s.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Lg*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=mA(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Cs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=yA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Cs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=s0(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ku(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new SA(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ku(this._state)){case kn.SUCCESS:hs(this._resolve.bind(null,this.snapshot))();break;case kn.CANCELED:case kn.ERROR:const n=this._reject;hs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ku(this._state)){case kn.RUNNING:case kn.PAUSED:e.next&&hs(e.next.bind(e,this.snapshot))();break;case kn.SUCCESS:e.complete&&hs(e.complete.bind(e))();break;case kn.CANCELED:case kn.ERROR:e.error&&hs(e.error.bind(e,this._error))();break;default:e.error&&hs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zr(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p0(this._location.path)}get storage(){return this._service}get parent(){const e=lA(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new Zr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UD(e)}}function EA(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new OA(t,new sr(e),n)}function xA(t){t._throwIfRoot("getDownloadURL");const e=vA(t.storage,t._location,g0());return t.storage.makeRequestWithTokens(e,Cs).then(n=>{if(n===null)throw jD();return n})}function DA(t,e){const n=cA(t._location.path,e),i=new Rn(t._location.bucket,n);return new Zr(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return/^[A-Za-z]+:\/\//.test(t)}function PA(t,e){return new Zr(t,e)}function b0(t,e){if(t instanceof Bh){const n=t;if(n._bucket==null)throw LD();const i=new Zr(n,n._bucket);return e!=null?b0(i,e):i}else return e!==void 0?DA(t,e):t}function MA(t,e){if(e&&AA(e)){if(t instanceof Bh)return PA(t,e);throw Rf("To use ref(service, url), the first argument must be a Storage instance.")}else return b0(t,e)}function Ng(t,e){const n=e==null?void 0:e[i0];return n==null?null:Rn.makeFromBucketSpec(n,t)}function IA(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:f2(r,t.app.options.projectId))}class Bh{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=n0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OD,this._maxUploadRetryTime=ED,this._requests=new Set,r!=null?this._bucket=Rn.makeFromBucketSpec(r,this._host):this._bucket=Ng(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=Ng(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zr(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new YD(a0());{const h=ZD(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const jg="@firebase/storage",Bg="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="storage";function RA(t,e,n){return t=mc(t),EA(t,e,n)}function FA(t){return t=mc(t),xA(t)}function LA(t,e){return t=mc(t),MA(t,e)}function NA(t=mD(),e){t=mc(t);const i=hD(t,w0).getImmediate({identifier:e}),r=c2("storage");return r&&jA(i,...r),i}function jA(t,e,n,i={}){IA(t,e,n,i)}function BA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Bh(n,i,r,e,gD)}function UA(){Gl(new la(w0,BA,"PUBLIC").setMultipleInstances(!0)),Us(jg,Bg,""),Us(jg,Bg,"esm2017")}UA();var YA="firebase",WA="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(YA,WA,"app");const zA={apiKey:"AIzaSyANQCJa2A3rxVz0g-iKS2DnZjDEEc4zcPQ",authDomain:"podiz-22471.firebaseapp.com",databaseURL:"podiz-22471.firebaseio.com",storageBucket:"podiz-22471.appspot.com"},HA=Qb(zA),VA=NA(HA);var C0={},Uh={exports:{}},S0=function(e,n){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(n,r)}},XA=S0,Yh=Object.prototype.toString,Wh=function(t){return function(e){var n=Yh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function ts(t){return t=t.toLowerCase(),function(n){return Wh(n)===t}}function zh(t){return Array.isArray(t)}function Kl(t){return typeof t>"u"}function $A(t){return t!==null&&!Kl(t)&&t.constructor!==null&&!Kl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var T0=ts("ArrayBuffer");function GA(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&T0(t.buffer),e}function qA(t){return typeof t=="string"}function KA(t){return typeof t=="number"}function k0(t){return t!==null&&typeof t=="object"}function bl(t){if(Wh(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var JA=ts("Date"),ZA=ts("File"),QA=ts("Blob"),eP=ts("FileList");function Hh(t){return Yh.call(t)==="[object Function]"}function tP(t){return k0(t)&&Hh(t.pipe)}function nP(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Yh.call(t)===e||Hh(t.toString)&&t.toString()===e)}var iP=ts("URLSearchParams");function rP(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function sP(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Vh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),zh(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Ff(){var t={};function e(r,o){bl(t[o])&&bl(r)?t[o]=Ff(t[o],r):bl(r)?t[o]=Ff({},r):zh(r)?t[o]=r.slice():t[o]=r}for(var n=0,i=arguments.length;n<i;n++)Vh(arguments[n],e);return t}function oP(t,e,n){return Vh(e,function(r,o){n&&typeof r=="function"?t[o]=XA(r,n):t[o]=r}),t}function aP(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function lP(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function cP(t,e,n){var i,r,o,h={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],h[o]||(e[o]=t[o],h[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function uP(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function fP(t){if(!t)return null;var e=t.length;if(Kl(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var hP=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),an={isArray:zh,isArrayBuffer:T0,isBuffer:$A,isFormData:nP,isArrayBufferView:GA,isString:qA,isNumber:KA,isObject:k0,isPlainObject:bl,isUndefined:Kl,isDate:JA,isFile:ZA,isBlob:QA,isFunction:Hh,isStream:tP,isURLSearchParams:iP,isStandardBrowserEnv:sP,forEach:Vh,merge:Ff,extend:oP,trim:rP,stripBOM:aP,inherits:lP,toFlatObject:cP,kindOf:Wh,kindOfTest:ts,endsWith:uP,toArray:fP,isTypedArray:hP,isFileList:eP},ds=an;function Ug(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var O0=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(ds.isURLSearchParams(n))r=n.toString();else{var o=[];ds.forEach(n,function(s,u){s===null||typeof s>"u"||(ds.isArray(s)?u=u+"[]":s=[s],ds.forEach(s,function(l){ds.isDate(l)?l=l.toISOString():ds.isObject(l)&&(l=JSON.stringify(l)),o.push(Ug(u)+"="+Ug(l))}))}),r=o.join("&")}if(r){var h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},dP=an;function _c(){this.handlers=[]}_c.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};_c.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};_c.prototype.forEach=function(e){dP.forEach(this.handlers,function(i){i!==null&&e(i)})};var pP=_c,gP=an,mP=function(e,n){gP.forEach(e,function(r,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[o])})},E0=an;function Zs(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}E0.inherits(Zs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var x0=Zs.prototype,D0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){D0[t]={value:t}});Object.defineProperties(Zs,D0);Object.defineProperty(x0,"isAxiosError",{value:!0});Zs.from=function(t,e,n,i,r,o){var h=Object.create(x0);return E0.toFlatObject(t,h,function(s){return s!==Error.prototype}),Zs.call(h,t.message,e,n,i,r),h.name=t.name,o&&Object.assign(h,o),h};var vo=Zs,A0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jn=an;function vP(t,e){e=e||new FormData;var n=[];function i(o){return o===null?"":Jn.isDate(o)?o.toISOString():Jn.isArrayBuffer(o)||Jn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function r(o,h){if(Jn.isPlainObject(o)||Jn.isArray(o)){if(n.indexOf(o)!==-1)throw Error("Circular reference detected in "+h);n.push(o),Jn.forEach(o,function(s,u){if(!Jn.isUndefined(s)){var f=h?h+"."+u:u,l;if(s&&!h&&typeof s=="object"){if(Jn.endsWith(u,"{}"))s=JSON.stringify(s);else if(Jn.endsWith(u,"[]")&&(l=Jn.toArray(s))){l.forEach(function(c){!Jn.isUndefined(c)&&e.append(f,i(c))});return}}r(s,f)}}),n.pop()}else e.append(h,i(o))}return r(t),e}var P0=vP,Ou,Yg;function _P(){if(Yg)return Ou;Yg=1;var t=vo;return Ou=function(n,i,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},Ou}var Eu,Wg;function yP(){if(Wg)return Eu;Wg=1;var t=an;return Eu=t.isStandardBrowserEnv()?function(){return{write:function(i,r,o,h,a,s){var u=[];u.push(i+"="+encodeURIComponent(r)),t.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),t.isString(h)&&u.push("path="+h),t.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Eu}var bP=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},wP=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},CP=bP,SP=wP,M0=function(e,n){return e&&!CP(n)?SP(e,n):n},xu,zg;function TP(){if(zg)return xu;zg=1;var t=an,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return xu=function(i){var r={},o,h,a;return i&&t.forEach(i.split(`
`),function(u){if(a=u.indexOf(":"),o=t.trim(u.substr(0,a)).toLowerCase(),h=t.trim(u.substr(a+1)),o){if(r[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([h]):r[o]=r[o]?r[o]+", "+h:h}}),r},xu}var Du,Hg;function kP(){if(Hg)return Du;Hg=1;var t=an;return Du=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function o(h){var a=h;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=o(window.location.href),function(a){var s=t.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),Du}var Au,Vg;function yc(){if(Vg)return Au;Vg=1;var t=vo,e=an;function n(i){t.call(this,i??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Au=n,Au}var Pu,Xg;function OP(){return Xg||(Xg=1,Pu=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),Pu}var Mu,$g;function Gg(){if($g)return Mu;$g=1;var t=an,e=_P(),n=yP(),i=O0,r=M0,o=TP(),h=kP(),a=A0,s=vo,u=yc(),f=OP();return Mu=function(c){return new Promise(function(p,m){var g=c.data,v=c.headers,_=c.responseType,b;function y(){c.cancelToken&&c.cancelToken.unsubscribe(b),c.signal&&c.signal.removeEventListener("abort",b)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var w=new XMLHttpRequest;if(c.auth){var C=c.auth.username||"",T=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";v.Authorization="Basic "+btoa(C+":"+T)}var x=r(c.baseURL,c.url);w.open(c.method.toUpperCase(),i(x,c.params,c.paramsSerializer),!0),w.timeout=c.timeout;function A(){if(w){var H="getAllResponseHeaders"in w?o(w.getAllResponseHeaders()):null,q=!_||_==="text"||_==="json"?w.responseText:w.response,G={data:q,status:w.status,statusText:w.statusText,headers:H,config:c,request:w};e(function(z){p(z),y()},function(z){m(z),y()},G),w=null}}if("onloadend"in w?w.onloadend=A:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(A)},w.onabort=function(){w&&(m(new s("Request aborted",s.ECONNABORTED,c,w)),w=null)},w.onerror=function(){m(new s("Network Error",s.ERR_NETWORK,c,w,w)),w=null},w.ontimeout=function(){var q=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",G=c.transitional||a;c.timeoutErrorMessage&&(q=c.timeoutErrorMessage),m(new s(q,G.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,c,w)),w=null},t.isStandardBrowserEnv()){var I=(c.withCredentials||h(x))&&c.xsrfCookieName?n.read(c.xsrfCookieName):void 0;I&&(v[c.xsrfHeaderName]=I)}"setRequestHeader"in w&&t.forEach(v,function(q,G){typeof g>"u"&&G.toLowerCase()==="content-type"?delete v[G]:w.setRequestHeader(G,q)}),t.isUndefined(c.withCredentials)||(w.withCredentials=!!c.withCredentials),_&&_!=="json"&&(w.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&w.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",c.onUploadProgress),(c.cancelToken||c.signal)&&(b=function(H){w&&(m(!H||H&&H.type?new u:H),w.abort(),w=null)},c.cancelToken&&c.cancelToken.subscribe(b),c.signal&&(c.signal.aborted?b():c.signal.addEventListener("abort",b))),g||(g=null);var W=f(x);if(W&&["http","https","file"].indexOf(W)===-1){m(new s("Unsupported protocol "+W+":",s.ERR_BAD_REQUEST,c));return}w.send(g)})},Mu}var Iu,qg;function EP(){return qg||(qg=1,Iu=null),Iu}var Zt=an,Kg=mP,Jg=vo,xP=A0,DP=P0,AP={"Content-Type":"application/x-www-form-urlencoded"};function Zg(t,e){!Zt.isUndefined(t)&&Zt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function PP(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Gg()),t}function MP(t,e,n){if(Zt.isString(t))try{return(e||JSON.parse)(t),Zt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var bc={transitional:xP,adapter:PP(),transformRequest:[function(e,n){if(Kg(n,"Accept"),Kg(n,"Content-Type"),Zt.isFormData(e)||Zt.isArrayBuffer(e)||Zt.isBuffer(e)||Zt.isStream(e)||Zt.isFile(e)||Zt.isBlob(e))return e;if(Zt.isArrayBufferView(e))return e.buffer;if(Zt.isURLSearchParams(e))return Zg(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Zt.isObject(e),r=n&&n["Content-Type"],o;if((o=Zt.isFileList(e))||i&&r==="multipart/form-data"){var h=this.env&&this.env.FormData;return DP(o?{"files[]":e}:e,h&&new h)}else if(i||r==="application/json")return Zg(n,"application/json"),MP(e);return e}],transformResponse:[function(e){var n=this.transitional||bc.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||r&&Zt.isString(e)&&e.length)try{return JSON.parse(e)}catch(h){if(o)throw h.name==="SyntaxError"?Jg.from(h,Jg.ERR_BAD_RESPONSE,this,null,this.response):h}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:EP()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zt.forEach(["delete","get","head"],function(e){bc.headers[e]={}});Zt.forEach(["post","put","patch"],function(e){bc.headers[e]=Zt.merge(AP)});var Xh=bc,IP=an,RP=Xh,FP=function(e,n,i){var r=this||RP;return IP.forEach(i,function(h){e=h.call(r,e,n)}),e},Ru,Qg;function I0(){return Qg||(Qg=1,Ru=function(e){return!!(e&&e.__CANCEL__)}),Ru}var em=an,Fu=FP,LP=I0(),NP=Xh,jP=yc();function Lu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new jP}var BP=function(e){Lu(e),e.headers=e.headers||{},e.data=Fu.call(e,e.data,e.headers,e.transformRequest),e.headers=em.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),em.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||NP.adapter;return n(e).then(function(r){return Lu(e),r.data=Fu.call(e,r.data,r.headers,e.transformResponse),r},function(r){return LP(r)||(Lu(e),r&&r.response&&(r.response.data=Fu.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Pn=an,R0=function(e,n){n=n||{};var i={};function r(f,l){return Pn.isPlainObject(f)&&Pn.isPlainObject(l)?Pn.merge(f,l):Pn.isPlainObject(l)?Pn.merge({},l):Pn.isArray(l)?l.slice():l}function o(f){if(Pn.isUndefined(n[f])){if(!Pn.isUndefined(e[f]))return r(void 0,e[f])}else return r(e[f],n[f])}function h(f){if(!Pn.isUndefined(n[f]))return r(void 0,n[f])}function a(f){if(Pn.isUndefined(n[f])){if(!Pn.isUndefined(e[f]))return r(void 0,e[f])}else return r(void 0,n[f])}function s(f){if(f in n)return r(e[f],n[f]);if(f in e)return r(void 0,e[f])}var u={url:h,method:h,data:h,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return Pn.forEach(Object.keys(e).concat(Object.keys(n)),function(l){var c=u[l]||o,d=c(l);Pn.isUndefined(d)&&c!==s||(i[l]=d)}),i},Nu,tm;function F0(){return tm||(tm=1,Nu={version:"0.27.2"}),Nu}var UP=F0().version,ir=vo,$h={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){$h[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var nm={};$h.transitional=function(e,n,i){function r(o,h){return"[Axios v"+UP+"] Transitional option '"+o+"'"+h+(i?". "+i:"")}return function(o,h,a){if(e===!1)throw new ir(r(h," has been removed"+(n?" in "+n:"")),ir.ERR_DEPRECATED);return n&&!nm[h]&&(nm[h]=!0,console.warn(r(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,h,a):!0}};function YP(t,e,n){if(typeof t!="object")throw new ir("options must be an object",ir.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var o=i[r],h=e[o];if(h){var a=t[o],s=a===void 0||h(a,o,t);if(s!==!0)throw new ir("option "+o+" must be "+s,ir.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ir("Unknown option "+o,ir.ERR_BAD_OPTION)}}var WP={assertOptions:YP,validators:$h},L0=an,zP=O0,im=pP,rm=BP,wc=R0,HP=M0,N0=WP,ps=N0.validators;function Qs(t){this.defaults=t,this.interceptors={request:new im,response:new im}}Qs.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=wc(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&N0.assertOptions(i,{silentJSONParsing:ps.transitional(ps.boolean),forcedJSONParsing:ps.transitional(ps.boolean),clarifyTimeoutError:ps.transitional(ps.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(o=o&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var h=[];this.interceptors.response.forEach(function(d){h.push(d.fulfilled,d.rejected)});var a;if(!o){var s=[rm,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(h),a=Promise.resolve(n);s.length;)a=a.then(s.shift(),s.shift());return a}for(var u=n;r.length;){var f=r.shift(),l=r.shift();try{u=f(u)}catch(c){l(c);break}}try{a=rm(u)}catch(c){return Promise.reject(c)}for(;h.length;)a=a.then(h.shift(),h.shift());return a};Qs.prototype.getUri=function(e){e=wc(this.defaults,e);var n=HP(e.baseURL,e.url);return zP(n,e.params,e.paramsSerializer)};L0.forEach(["delete","get","head","options"],function(e){Qs.prototype[e]=function(n,i){return this.request(wc(i||{},{method:e,url:n,data:(i||{}).data}))}});L0.forEach(["post","put","patch"],function(e){function n(i){return function(o,h,a){return this.request(wc(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:h}))}}Qs.prototype[e]=n(),Qs.prototype[e+"Form"]=n(!0)});var VP=Qs,ju,sm;function XP(){if(sm)return ju;sm=1;var t=yc();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(h){i=h});var r=this;this.promise.then(function(o){if(r._listeners){var h,a=r._listeners.length;for(h=0;h<a;h++)r._listeners[h](o);r._listeners=null}}),this.promise.then=function(o){var h,a=new Promise(function(s){r.subscribe(s),h=s}).then(o);return a.cancel=function(){r.unsubscribe(h)},a},n(function(h){r.reason||(r.reason=new t(h),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(h){i=h});return{token:r,cancel:i}},ju=e,ju}var Bu,om;function $P(){return om||(om=1,Bu=function(e){return function(i){return e.apply(null,i)}}),Bu}var Uu,am;function GP(){if(am)return Uu;am=1;var t=an;return Uu=function(n){return t.isObject(n)&&n.isAxiosError===!0},Uu}var lm=an,qP=S0,wl=VP,KP=R0,JP=Xh;function j0(t){var e=new wl(t),n=qP(wl.prototype.request,e);return lm.extend(n,wl.prototype,e),lm.extend(n,e),n.create=function(r){return j0(KP(t,r))},n}var Dn=j0(JP);Dn.Axios=wl;Dn.CanceledError=yc();Dn.CancelToken=XP();Dn.isCancel=I0();Dn.VERSION=F0().version;Dn.toFormData=P0;Dn.AxiosError=vo;Dn.Cancel=Dn.CanceledError;Dn.all=function(e){return Promise.all(e)};Dn.spread=$P();Dn.isAxiosError=GP();Uh.exports=Dn;Uh.exports.default=Dn;var ZP=Uh.exports,B0=ZP,Lf={exports:{}},Cc={},Gh={},Sc={},Da={},eo={},$i={},_o={},to={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.ERROR_PACKET=yi.PACKET_TYPES_REVERSE=yi.PACKET_TYPES=void 0;const Oi=Object.create(null);yi.PACKET_TYPES=Oi;Oi.open="0";Oi.close="1";Oi.ping="2";Oi.pong="3";Oi.message="4";Oi.upgrade="5";Oi.noop="6";const U0=Object.create(null);yi.PACKET_TYPES_REVERSE=U0;Object.keys(Oi).forEach(t=>{U0[Oi[t]]=t});const QP={type:"error",data:"parser error"};yi.ERROR_PACKET=QP;Object.defineProperty(to,"__esModule",{value:!0});to.encodePacket=to.encodePacketToBinary=void 0;const eM=yi,Y0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",W0=typeof ArrayBuffer=="function",z0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,H0=({type:t,data:e},n,i)=>Y0&&e instanceof Blob?n?i(e):cm(e,i):W0&&(e instanceof ArrayBuffer||z0(e))?n?i(e):cm(new Blob([e]),i):i(eM.PACKET_TYPES[t]+(e||""));to.encodePacket=H0;const cm=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function um(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Yu;function tM(t,e){if(Y0&&t.data instanceof Blob)return t.data.arrayBuffer().then(um).then(e);if(W0&&(t.data instanceof ArrayBuffer||z0(t.data)))return e(um(t.data));H0(t,!1,n=>{Yu||(Yu=new TextEncoder),e(Yu.encode(n))})}to.encodePacketToBinary=tM;var Tc={},no={};Object.defineProperty(no,"__esModule",{value:!0});no.decode=no.encode=void 0;const xs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<xs.length;t++)Bo[xs.charCodeAt(t)]=t;const nM=t=>{let e=new Uint8Array(t),n,i=e.length,r="";for(n=0;n<i;n+=3)r+=xs[e[n]>>2],r+=xs[(e[n]&3)<<4|e[n+1]>>4],r+=xs[(e[n+1]&15)<<2|e[n+2]>>6],r+=xs[e[n+2]&63];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r};no.encode=nM;const iM=t=>{let e=t.length*.75,n=t.length,i,r=0,o,h,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(i=0;i<n;i+=4)o=Bo[t.charCodeAt(i)],h=Bo[t.charCodeAt(i+1)],a=Bo[t.charCodeAt(i+2)],s=Bo[t.charCodeAt(i+3)],f[r++]=o<<2|h>>4,f[r++]=(h&15)<<4|a>>2,f[r++]=(a&3)<<6|s&63;return u};no.decode=iM;Object.defineProperty(Tc,"__esModule",{value:!0});Tc.decodePacket=void 0;const nl=yi,rM=no,sM=typeof ArrayBuffer=="function",oM=(t,e)=>{if(typeof t!="string")return{type:"message",data:V0(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:aM(t.substring(1),e)}:nl.PACKET_TYPES_REVERSE[n]?t.length>1?{type:nl.PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:nl.PACKET_TYPES_REVERSE[n]}:nl.ERROR_PACKET};Tc.decodePacket=oM;const aM=(t,e)=>{if(sM){const n=(0,rM.decode)(t);return V0(n,e)}else return{base64:!0,data:t}},V0=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;const e=to;Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const n=Tc;Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const i=yi,r="",o=(c,d)=>{const p=c.length,m=new Array(p);let g=0;c.forEach((v,_)=>{(0,e.encodePacket)(v,!1,b=>{m[_]=b,++g===p&&d(m.join(r))})})};t.encodePayload=o;const h=(c,d)=>{const p=c.split(r),m=[];for(let g=0;g<p.length;g++){const v=(0,n.decodePacket)(p[g],d);if(m.push(v),v.type==="error")break}return m};t.decodePayload=h;function a(){return new TransformStream({transform(c,d){(0,e.encodePacketToBinary)(c,p=>{const m=p.length;let g;if(m<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,m);else if(m<65536){g=new Uint8Array(3);const v=new DataView(g.buffer);v.setUint8(0,126),v.setUint16(1,m)}else{g=new Uint8Array(9);const v=new DataView(g.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(m))}c.data&&typeof c.data!="string"&&(g[0]|=128),d.enqueue(g),d.enqueue(p)})}})}t.createPacketEncoderStream=a;let s;function u(c){return c.reduce((d,p)=>d+p.length,0)}function f(c,d){if(c[0].length===d)return c.shift();const p=new Uint8Array(d);let m=0;for(let g=0;g<d;g++)p[g]=c[0][m++],m===c[0].length&&(c.shift(),m=0);return c.length&&m<c[0].length&&(c[0]=c[0].slice(m)),p}function l(c,d){s||(s=new TextDecoder);const p=[];let m=0,g=-1,v=!1;return new TransformStream({transform(_,b){for(p.push(_);;){if(m===0){if(u(p)<1)break;const y=f(p,1);v=(y[0]&128)===128,g=y[0]&127,g<126?m=3:g===126?m=1:m=2}else if(m===1){if(u(p)<2)break;const y=f(p,2);g=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),m=3}else if(m===2){if(u(p)<8)break;const y=f(p,8),w=new DataView(y.buffer,y.byteOffset,y.length),C=w.getUint32(0);if(C>Math.pow(2,21)-1){b.enqueue(i.ERROR_PACKET);break}g=C*Math.pow(2,32)+w.getUint32(4),m=3}else{if(u(p)<g)break;const y=f(p,g);b.enqueue((0,n.decodePacket)(v?y:s.decode(y),d)),m=0}if(g===0||g>c){b.enqueue(i.ERROR_PACKET);break}}}})}t.createPacketDecoderStream=l,t.protocol=4})(_o);function yn(t){if(t)return lM(t)}function lM(t){for(var e in yn.prototype)t[e]=yn.prototype[e];return t}yn.prototype.on=yn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};yn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};yn.prototype.off=yn.prototype.removeListener=yn.prototype.removeAllListeners=yn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};yn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};yn.prototype.emitReserved=yn.prototype.emit;yn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};yn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const cM=Object.freeze(Object.defineProperty({__proto__:null,Emitter:yn},Symbol.toStringTag,{value:"Module"})),yo=Fy(cM);var $n={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.globalThisShim=void 0;ns.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty($n,"__esModule",{value:!0});$n.byteLength=$n.installTimerFunctions=$n.pick=void 0;const rr=ns;function uM(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}$n.pick=uM;const fM=rr.globalThisShim.setTimeout,hM=rr.globalThisShim.clearTimeout;function dM(t,e){e.useNativeTimers?(t.setTimeoutFn=fM.bind(rr.globalThisShim),t.clearTimeoutFn=hM.bind(rr.globalThisShim)):(t.setTimeoutFn=rr.globalThisShim.setTimeout.bind(rr.globalThisShim),t.clearTimeoutFn=rr.globalThisShim.clearTimeout.bind(rr.globalThisShim))}$n.installTimerFunctions=dM;const pM=1.33;function gM(t){return typeof t=="string"?mM(t):Math.ceil((t.byteLength||t.size)*pM)}$n.byteLength=gM;function mM(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}var Nf={exports:{}},Wu,fm;function vM(){if(fm)return Wu;fm=1;var t=1e3,e=t*60,n=e*60,i=n*24,r=i*7,o=i*365.25;Wu=function(f,l){l=l||{};var c=typeof f;if(c==="string"&&f.length>0)return h(f);if(c==="number"&&isFinite(f))return l.long?s(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function h(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var c=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*r;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function a(f){var l=Math.abs(f);return l>=i?Math.round(f/i)+"d":l>=n?Math.round(f/n)+"h":l>=e?Math.round(f/e)+"m":l>=t?Math.round(f/t)+"s":f+"ms"}function s(f){var l=Math.abs(f);return l>=i?u(f,l,i,"day"):l>=n?u(f,l,n,"hour"):l>=e?u(f,l,e,"minute"):l>=t?u(f,l,t,"second"):f+" ms"}function u(f,l,c,d){var p=l>=c*1.5;return Math.round(f/c)+" "+d+(p?"s":"")}return Wu}function _M(t){n.debug=n,n.default=n,n.coerce=s,n.disable=o,n.enable=r,n.enabled=h,n.humanize=vM(),n.destroy=u,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let l=0;for(let c=0;c<f.length;c++)l=(l<<5)-l+f.charCodeAt(c),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=e;function n(f){let l,c=null,d,p;function m(...g){if(!m.enabled)return;const v=m,_=Number(new Date),b=_-(l||_);v.diff=b,v.prev=l,v.curr=_,l=_,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";y++;const x=n.formatters[T];if(typeof x=="function"){const A=g[y];C=x.call(v,A),g.splice(y,1),y--}return C}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return m.namespace=f,m.useColors=n.useColors(),m.color=n.selectColor(f),m.extend=i,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(f)),p),set:g=>{c=g}}),typeof n.init=="function"&&n.init(m),m}function i(f,l){const c=n(this.namespace+(typeof l>"u"?":":l)+f);return c.log=this.log,c}function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let l;const c=(typeof f=="string"?f:"").split(/[\s,]+/),d=c.length;for(l=0;l<d;l++)c[l]&&(f=c[l].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...n.names.map(a),...n.skips.map(a).map(l=>"-"+l)].join(",");return n.enable(""),f}function h(f){if(f[f.length-1]==="*")return!0;let l,c;for(l=0,c=n.skips.length;l<c;l++)if(n.skips[l].test(f))return!1;for(l=0,c=n.names.length;l<c;l++)if(n.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function s(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var yM=_M;(function(t,e){var n={};e.formatArgs=r,e.save=o,e.load=h,e.useColors=i,e.storage=a(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let l=0,c=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(c=l))}),u.splice(c,0,f)}e.log=console.debug||console.log||(()=>{});function o(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function h(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}function a(){try{return localStorage}catch{}}t.exports=yM(e);const{formatters:s}=t.exports;s.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(Nf,Nf.exports);var Ai=Nf.exports,Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.decode=Qr.encode=void 0;function bM(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}Qr.encode=bM;function wM(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}Qr.decode=wM;var CM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($i,"__esModule",{value:!0});$i.Transport=$i.TransportError=void 0;const SM=_o,TM=yo,kM=$n,OM=CM(Ai),EM=Qr,xM=(0,OM.default)("engine.io-client:transport");class X0 extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}$i.TransportError=X0;class DM extends TM.Emitter{constructor(e){super(),this.writable=!1,(0,kM.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new X0(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):xM("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=(0,SM.decodePacket)(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=(0,EM.encode)(e);return n.length?"?"+n:""}}$i.Transport=DM;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.yeast=Hi.decode=Hi.encode=void 0;const $0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Jl=64,G0={};let hm=0,fr=0,dm;function jf(t){let e="";do e=$0[t%Jl]+e,t=Math.floor(t/Jl);while(t>0);return e}Hi.encode=jf;function AM(t){let e=0;for(fr=0;fr<t.length;fr++)e=e*Jl+G0[t.charAt(fr)];return e}Hi.decode=AM;function PM(){const t=jf(+new Date);return t!==dm?(hm=0,dm=t):t+"."+jf(hm++)}Hi.yeast=PM;for(;fr<Jl;fr++)G0[$0[fr]]=fr;var io={},kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.hasCORS=void 0;let q0=!1;try{q0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}kc.hasCORS=q0;Object.defineProperty(io,"__esModule",{value:!0});io.createCookieJar=io.XHR=void 0;const MM=kc,IM=ns;function RM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||MM.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new IM.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}io.XHR=RM;function FM(){}io.createCookieJar=FM;var LM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eo,"__esModule",{value:!0});eo.Request=eo.Polling=void 0;const NM=$i,jM=LM(Ai),BM=Hi,pm=_o,qh=io,UM=yo,gm=$n,YM=ns,Cn=(0,jM.default)("engine.io-client:polling");function WM(){}const zM=function(){return new qh.XHR({xdomain:!1}).responseType!=null}();class HM extends NM.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const n=e&&e.forceBase64;this.supportsBinary=zM&&!n,this.opts.withCredentials&&(this.cookieJar=(0,qh.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{Cn("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(Cn("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){Cn("pre-pause polling complete"),--i||n()})),this.writable||(Cn("we are currently writing - waiting to pause"),i++,this.once("drain",function(){Cn("pre-pause writing complete"),--i||n()}))}else n()}poll(){Cn("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){Cn("polling got data %s",e);const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};(0,pm.decodePayload)(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():Cn('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{Cn("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Cn("transport open - closing"),e()):(Cn("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,pm.encodePayload)(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=(0,BM.yeast)()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ri(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){Cn("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}eo.Polling=HM;class ri extends UM.Emitter{constructor(e,n){super(),(0,gm.installTimerFunctions)(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=(0,gm.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new qh.XHR(n);try{Cn("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},Cn("xhr data %s",this.data),i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=ri.requestsCount++,ri.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=WM,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ri.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}eo.Request=ri;ri.requestsCount=0;ri.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",mm);else if(typeof addEventListener=="function"){const t="onpagehide"in YM.globalThisShim?"pagehide":"unload";addEventListener(t,mm,!1)}}function mm(){for(let t in ri.requests)ri.requests.hasOwnProperty(t)&&ri.requests[t].abort()}var Oc={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.defaultBinaryType=Fn.usingBrowserWebSocket=Fn.WebSocket=Fn.nextTick=void 0;const vm=ns;Fn.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0);Fn.WebSocket=vm.globalThisShim.WebSocket||vm.globalThisShim.MozWebSocket;Fn.usingBrowserWebSocket=!0;Fn.defaultBinaryType="arraybuffer";var VM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.WS=void 0;const XM=$i,$M=Hi,GM=$n,er=Fn,qM=VM(Ai),KM=_o,JM=(0,qM.default)("engine.io-client:websocket"),_m=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ZM extends XM.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=_m?{}:(0,GM.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=er.usingBrowserWebSocket&&!_m?n?new er.WebSocket(e,n):new er.WebSocket(e):new er.WebSocket(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;(0,KM.encodePacket)(i,this.supportsBinary,o=>{const h={};er.usingBrowserWebSocket||(i.options&&(h.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(h.compress=!1));try{er.usingBrowserWebSocket?this.ws.send(o):this.ws.send(o,h)}catch{JM("websocket closed before onclose event")}r&&(0,er.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=(0,$M.yeast)()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!er.WebSocket}}Oc.WS=ZM;var Ec={},QM=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.WT=void 0;const eI=$i,tI=Fn,ym=_o,nI=QM(Ai),Ro=(0,nI.default)("engine.io-client:webtransport");class iI extends eI.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{Ro("transport closed gracefully"),this.onClose()}).catch(e=>{Ro("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=(0,ym.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=(0,ym.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const o=()=>{i.read().then(({done:a,value:s})=>{if(a){Ro("session is closed");return}Ro("received chunk: %o",s),this.onPacket(s),o()}).catch(a=>{Ro("an error occurred while reading: %s",a)})};o();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this.writer.write(h).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this.writer.write(i).then(()=>{r&&(0,tI.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}Ec.WT=iI;Object.defineProperty(Da,"__esModule",{value:!0});Da.transports=void 0;const rI=eo,sI=Oc,oI=Ec;Da.transports={websocket:sI.WS,webtransport:oI.WT,polling:rI.Polling};var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.parse=void 0;const aI=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,lI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cI(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=aI.exec(t||""),o={},h=14;for(;h--;)o[lI[h]]=r[h]||"";return n!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=uI(o,o.path),o.queryKey=fI(o,o.query),o}Aa.parse=cI;function uI(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function fI(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(n[r]=o)}),n}var hI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.Socket=void 0;const dI=Da,bm=$n,pI=Qr,wm=Aa,gI=hI(Ai),mI=yo,K0=_o,vI=Fn,Et=(0,gI.default)("engine.io-client:socket");let J0=class Ss extends mI.Emitter{constructor(e,n={}){super(),this.binaryType=vI.defaultBinaryType,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=(0,wm.parse)(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=(0,wm.parse)(n.host).host),(0,bm.installTimerFunctions)(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,pI.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){Et('creating transport "%s"',e);const n=Object.assign({},this.opts.query);n.EIO=K0.protocol,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return Et("options: %j",i),new dI.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Ss.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(n){Et("error while creating transport: %s",n),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){Et("setting transport %s",e.name),this.transport&&(Et("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){Et('probing transport "%s"',e);let n=this.createTransport(e),i=!1;Ss.priorWebsocketSuccess=!1;const r=()=>{i||(Et('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",l=>{if(!i)if(l.type==="pong"&&l.data==="probe"){if(Et('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ss.priorWebsocketSuccess=n.name==="websocket",Et('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(Et("changing transport and sending upgrade packet"),f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{Et('probe transport "%s" failed',e);const c=new Error("probe error");c.transport=n.name,this.emitReserved("upgradeError",c)}}))};function o(){i||(i=!0,f(),n.close(),n=null)}const h=l=>{const c=new Error("probe error: "+l);c.transport=n.name,o(),Et('probe transport "%s" failed because of error: %s',e,l),this.emitReserved("upgradeError",c)};function a(){h("transport closed")}function s(){h("socket closed")}function u(l){n&&l.name!==n.name&&(Et('"%s" works - aborting "%s"',l.name,n.name),o())}const f=()=>{n.removeListener("open",r),n.removeListener("error",h),n.removeListener("close",a),this.off("close",s),this.off("upgrading",u)};n.once("open",r),n.once("error",h),n.once("close",a),this.once("close",s),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(Et("socket open"),this.readyState="open",Ss.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){Et("starting upgrade probes");let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Et('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else Et('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();Et("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=(0,bm.byteLength)(r)),i>0&&n>this.maxPayload)return Et("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);n+=2}return Et("payload size is %d (max: %d)",n,this.maxPayload),this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:n,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),Et("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Et("socket error %j",e),Ss.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Et('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const r=e.length;for(;i<r;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};Sc.Socket=J0;J0.protocol=K0.protocol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.Socket=void 0;const e=Sc;Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return e.Socket}}),t.protocol=e.Socket.protocol;var n=$i;Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Da;Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var r=$n;Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return r.installTimerFunctions}});var o=Aa;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}});var h=Fn;Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return h.nextTick}})})(Gh);var _I=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.url=void 0;const yI=Gh,bI=_I(Ai),Cm=bI.default("socket.io-client:url");function wI(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(Cm("protocol-less url %s",t),typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),Cm("parse %s",t),i=yI.parse(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}Cc.url=wI;var xc={},Pa={},Dc={},ro={},es={};Object.defineProperty(es,"__esModule",{value:!0});es.hasBinary=es.isBinary=void 0;const CI=typeof ArrayBuffer=="function",SI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Z0=Object.prototype.toString,TI=typeof Blob=="function"||typeof Blob<"u"&&Z0.call(Blob)==="[object BlobConstructor]",kI=typeof File=="function"||typeof File<"u"&&Z0.call(File)==="[object FileConstructor]";function Q0(t){return CI&&(t instanceof ArrayBuffer||SI(t))||TI&&t instanceof Blob||kI&&t instanceof File}es.isBinary=Q0;function Cl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Cl(t[n]))return!0;return!1}if(Q0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Cl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Cl(t[n]))return!0;return!1}es.hasBinary=Cl;Object.defineProperty(ro,"__esModule",{value:!0});ro.reconstructPacket=ro.deconstructPacket=void 0;const OI=es;function EI(t){const e=[],n=t.data,i=t;return i.data=Bf(n,e),i.attachments=e.length,{packet:i,buffers:e}}ro.deconstructPacket=EI;function Bf(t,e){if(!t)return t;if((0,OI.isBinary)(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=Bf(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Bf(t[i],e));return n}return t}function xI(t,e){return t.data=Uf(t.data,e),delete t.attachments,t}ro.reconstructPacket=xI;function Uf(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Uf(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Uf(t[n],e));return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const e=yo,n=ro,i=es,o=(0,Ai.default)("socket.io-parser"),h=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];t.protocol=5;var a;(function(c){c[c.CONNECT=0]="CONNECT",c[c.DISCONNECT=1]="DISCONNECT",c[c.EVENT=2]="EVENT",c[c.ACK=3]="ACK",c[c.CONNECT_ERROR=4]="CONNECT_ERROR",c[c.BINARY_EVENT=5]="BINARY_EVENT",c[c.BINARY_ACK=6]="BINARY_ACK"})(a=t.PacketType||(t.PacketType={}));class s{constructor(d){this.replacer=d}encode(d){return o("encoding packet %j",d),(d.type===a.EVENT||d.type===a.ACK)&&(0,i.hasBinary)(d)?this.encodeAsBinary({type:d.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:d.nsp,data:d.data,id:d.id}):[this.encodeAsString(d)]}encodeAsString(d){let p=""+d.type;return(d.type===a.BINARY_EVENT||d.type===a.BINARY_ACK)&&(p+=d.attachments+"-"),d.nsp&&d.nsp!=="/"&&(p+=d.nsp+","),d.id!=null&&(p+=d.id),d.data!=null&&(p+=JSON.stringify(d.data,this.replacer)),o("encoded %j as %s",d,p),p}encodeAsBinary(d){const p=(0,n.deconstructPacket)(d),m=this.encodeAsString(p.packet),g=p.buffers;return g.unshift(m),g}}t.Encoder=s;function u(c){return Object.prototype.toString.call(c)==="[object Object]"}class f extends e.Emitter{constructor(d){super(),this.reviver=d}add(d){let p;if(typeof d=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(d);const m=p.type===a.BINARY_EVENT;m||p.type===a.BINARY_ACK?(p.type=m?a.EVENT:a.ACK,this.reconstructor=new l(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,i.isBinary)(d)||d.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(d),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+d)}decodeString(d){let p=0;const m={type:Number(d.charAt(0))};if(a[m.type]===void 0)throw new Error("unknown packet type "+m.type);if(m.type===a.BINARY_EVENT||m.type===a.BINARY_ACK){const v=p+1;for(;d.charAt(++p)!=="-"&&p!=d.length;);const _=d.substring(v,p);if(_!=Number(_)||d.charAt(p)!=="-")throw new Error("Illegal attachments");m.attachments=Number(_)}if(d.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(d.charAt(p)===","||p===d.length););m.nsp=d.substring(v,p)}else m.nsp="/";const g=d.charAt(p+1);if(g!==""&&Number(g)==g){const v=p+1;for(;++p;){const _=d.charAt(p);if(_==null||Number(_)!=_){--p;break}if(p===d.length)break}m.id=Number(d.substring(v,p+1))}if(d.charAt(++p)){const v=this.tryParse(d.substr(p));if(f.isPayloadValid(m.type,v))m.data=v;else throw new Error("invalid payload")}return o("decoded %s as %j",d,m),m}tryParse(d){try{return JSON.parse(d,this.reviver)}catch{return!1}}static isPayloadValid(d,p){switch(d){case a.CONNECT:return u(p);case a.DISCONNECT:return p===void 0;case a.CONNECT_ERROR:return typeof p=="string"||u(p);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&h.indexOf(p[0])===-1);case a.ACK:case a.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=f;class l{constructor(d){this.packet=d,this.buffers=[],this.reconPack=d}takeBinaryData(d){if(this.buffers.push(d),this.buffers.length===this.reconPack.attachments){const p=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(Dc);var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.on=void 0;function DI(t,e,n){return t.on(e,n),function(){t.off(e,n)}}Ma.on=DI;var AI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.Socket=void 0;const Zn=Dc,il=Ma,PI=yo,MI=AI(Ai),$t=MI.default("socket.io-client:socket"),II=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class RI extends PI.Emitter{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[il.on(e,"open",this.onopen.bind(this)),il.on(e,"packet",this.onpacket.bind(this)),il.on(e,"error",this.onerror.bind(this)),il.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(II.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Zn.PacketType.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++;$t("emitting packet with ack id %d",h);const a=n.pop();this._registerAckCallback(h,a),i.id=h}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?$t("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&($t("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));$t("event with ack id %d has timed out after %d ms",e,r),n.call(this,new Error("operation has timed out"))},r),h=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};h.withError=!0,this.acks[e]=h}emitWithAck(e,...n){return new Promise((i,r)=>{const o=(h,a)=>h?r(h):i(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&($t("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),n&&n(r)):($t("packet [%d] was successfully sent",i.id),this._queue.shift(),n&&n(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if($t("draining queue"),!this.connected||this._queue.length===0)return;const n=this._queue[0];if(n.pending&&!e){$t("packet [%d] has already been sent and is waiting for an ack",n.id);return}n.pending=!0,n.tryCount++,$t("sending packet [%d] (try n%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){$t("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Zn.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){$t("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Zn.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Zn.PacketType.EVENT:case Zn.PacketType.BINARY_EVENT:this.onevent(e);break;case Zn.PacketType.ACK:case Zn.PacketType.BINARY_ACK:this.onack(e);break;case Zn.PacketType.DISCONNECT:this.ondisconnect();break;case Zn.PacketType.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];$t("emitting event %j",n),e.id!=null&&($t("attaching ack callback to event"),n.push(this.ack(e.id))),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,$t("sending ack %j",r),n.packet({type:Zn.PacketType.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];if(typeof n!="function"){$t("bad ack %s",e.id);return}delete this.acks[e.id],$t("calling ack %s with %j",e.id,e.data),n.withError&&e.data.unshift(null),n.apply(this,e.data)}onconnect(e,n){$t("socket connected with id %s",e),this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){$t("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&($t("performing disconnect (%s)",this.nsp),this.packet({type:Zn.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}Pa.Socket=RI;var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.Backoff=void 0;function bo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ac.Backoff=bo;bo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};bo.prototype.reset=function(){this.attempts=0};bo.prototype.setMin=function(t){this.ms=t};bo.prototype.setMax=function(t){this.max=t};bo.prototype.setJitter=function(t){this.jitter=t};var FI=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),LI=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NI=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&FI(e,t,n);return LI(e,t),e},jI=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xc,"__esModule",{value:!0});xc.Manager=void 0;const zu=Gh,BI=Pa,UI=NI(Dc),kr=Ma,YI=Ac,WI=yo,zI=jI(Ai),nn=zI.default("socket.io-client:manager");class HI extends WI.Emitter{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,zu.installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new YI.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||UI;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(nn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;nn("opening %s",this.uri),this.engine=new zu.Socket(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=kr.on(n,"open",function(){i.onopen(),e&&e()}),o=a=>{nn("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},h=kr.on(n,"error",o);if(this._timeout!==!1){const a=this._timeout;nn("connect attempt will timeout after %d",a);const s=this.setTimeoutFn(()=>{nn("connect attempt timed out after %d",a),r(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(h),this}connect(e){return this.open(e)}onopen(){nn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(kr.on(e,"ping",this.onping.bind(this)),kr.on(e,"data",this.ondata.bind(this)),kr.on(e,"error",this.onerror.bind(this)),kr.on(e,"close",this.onclose.bind(this)),kr.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){zu.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){nn("error",e),this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new BI.Socket(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active){nn("socket %s is still active, skipping close",i);return}this._close()}_packet(e){nn("writing packet %j",e);const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){nn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){nn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){nn("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)nn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();nn("will wait %dms before reconnect attempt",n),this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(nn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(nn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(nn("reconnect success"),e.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}xc.Manager=HI;(function(t,e){var n=Ne&&Ne.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const i=Cc,r=xc;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});const o=Pa;Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(Ai).default("socket.io-client"),s={};function u(l,c){typeof l=="object"&&(c=l,l=void 0),c=c||{};const d=i.url(l,c.path||"/socket.io"),p=d.source,m=d.id,g=d.path,v=s[m]&&g in s[m].nsps,_=c.forceNew||c["force new connection"]||c.multiplex===!1||v;let b;return _?(a("ignoring socket cache for %s",p),b=new r.Manager(p,c)):(s[m]||(a("new io instance for %s",p),s[m]=new r.Manager(p,c)),b=s[m]),d.query&&!c.query&&(c.query=d.queryKey),b.socket(d.path,c)}e.io=u,e.connect=u,e.default=u,Object.assign(u,{Manager:r.Manager,Socket:o.Socket,io:u,connect:u});var f=Dc;Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return f.protocol}}),t.exports=u})(Lf,Lf.exports);var VI=Lf.exports,Kh={},Or=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{u(i.next(f))}catch(l){h(l)}}function s(f){try{u(i.throw(f))}catch(l){h(l)}}function u(f){f.done?o(f.value):r(f.value).then(a,s)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(Kh,"__esModule",{value:!0});class XI{constructor(e){this.cloudConvert=e}get(e,n=null){return Or(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{params:n||{}})).data.data})}wait(e){return Or(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}all(e=null){return Or(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Or(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e,{maxBodyLength:1/0})).data.data})}delete(e){return Or(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`jobs/${e}`)})}subscribeEvent(e,n,i){return Or(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Or(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}.tasks`,`task.${n}`,i)})}getExportUrls(e){return e.tasks.filter(n=>n.operation==="export/url"&&n.status==="finished").flatMap(n=>{var i,r;return(r=(i=n.result)===null||i===void 0?void 0:i.files)!==null&&r!==void 0?r:[]})}}Kh.default=XI;var Jh={},$I=typeof self=="object"?self.FormData:window.FormData,tr=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{u(i.next(f))}catch(l){h(l)}}function s(f){try{u(i.throw(f))}catch(l){h(l)}}function u(f){f.done?o(f.value):r(f.value).then(a,s)}u((i=i.apply(t,e||[])).next())})},ew=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jh,"__esModule",{value:!0});const GI=ew($I),qI=ew(B0),Sm=jr;class KI{constructor(e){this.cloudConvert=e}get(e,n=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{params:n||{}})).data.data})}wait(e){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}cancel(e){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(`tasks/${e}/cancel`)).data.data})}all(e=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,n=null){return tr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,n)).data.data})}delete(e){return tr(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`tasks/${e}`)})}upload(e,n,i=null,r=null){return tr(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const o=new GI.default;for(const a in e.result.form.parameters)o.append(a,e.result.form.parameters[a]);const h={};return i&&(h.filename=i),r?h.knownLength=r:n instanceof Sm.ReadStream&&(h.knownLength=(0,Sm.statSync)(n.path).size),o.append("file",n,h),yield qI.default.post(e.result.form.url,o,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign(Object.assign({},o.hasKnownLength()?{"Content-Length":o.getLengthSync()}:{}),o.getHeaders())})})}subscribeEvent(e,n,i){return tr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-task.${e}`,`task.${n}`,i)})}}Jh.default=KI;var Zh={},Hu=Ne&&Ne.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{u(i.next(f))}catch(l){h(l)}}function s(f){try{u(i.throw(f))}catch(l){h(l)}}function u(f){f.done?o(f.value):r(f.value).then(a,s)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(Zh,"__esModule",{value:!0});class JI{constructor(e){this.cloudConvert=e}me(){return Hu(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,n,i){return Hu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.jobs`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Hu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.tasks`,`task.${n}`,i)})}}Zh.default=JI;var Qh={},ZI=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),QI=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eR=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ZI(e,t,n);return QI(e,t),e};Object.defineProperty(Qh,"__esModule",{value:!0});const tR=eR(jr);class nR{verify(e,n,i){const o=tR.createHmac("sha256",i).update(Buffer.from(e,"utf-8")).digest("hex");return n===o}}Qh.default=nR;const iR="cloudconvert",rR="2.3.6",sR="MIT",oR="Official Node.js SDK for the CloudConvert API",aR="https://github.com/cloudconvert/cloudconvert-node",lR="Josias Montag <josias@montag.info>",cR="built/lib/index.js",uR="built/lib/index.d.ts",fR="built/lib/CloudConvert.js",hR={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},dR={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},pR={axios:"^0.27.2","form-data":"^4.0.0","socket.io-client":"^4.6.1"},gR={"@types/node":"^18.14.0","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.53.0",chai:"^4.3.7",eslint:"^8.34.0","eslint-config-prettier":"^8.6.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^4.2.1",esm:"^3.2.25",mocha:"^8.4.0",nock:"^13.3.0",prettier:"^2.8.4",typescript:"^4.9.5"},mR={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."},vR={name:iR,version:rR,license:sR,description:oR,homepage:aR,author:lR,main:cR,types:uR,module:fR,repository:hR,bugs:dR,dependencies:pR,devDependencies:gR,scripts:mR};var ed={},_R=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),yR=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bR=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&_R(e,t,n);return yR(e,t),e};Object.defineProperty(ed,"__esModule",{value:!0});const wR=bR(jr);class CR{sign(e,n,i,r){const o=JSON.stringify(i),a=Buffer.from(o||"").toString("base64").replace("+","-").replace("/","_").replace(/=+$/,"");let s=`${e}?job=${a}`;r&&(s+=`&cache_key=${r}`);const f=wR.createHmac("sha256",n).update(Buffer.from(s,"utf-8")).digest("hex");return s+=`&s=${f}`,s}}ed.default=CR;var is=Ne&&Ne.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(C0,"__esModule",{value:!0});const SR=is(B0),TR=is(VI),kR=is(Kh),OR=is(Jh),ER=is(Zh),xR=is(Qh),DR=vR,AR=is(ed);class PR{constructor(e,n=!1,i=null){this.apiKey=e,this.useSandbox=n,this.region=i,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=SR.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":`https://${this.region?this.region+".":""}api.cloudconvert.com/v2/`,headers:{Authorization:`Bearer ${this.apiKey}`,"User-Agent":`cloudconvert-node/v${DR.version} (https://github.com/cloudconvert/cloudconvert-node)`}})}createResources(){this.tasks=new OR.default(this),this.jobs=new kR.default(this),this.users=new ER.default(this),this.webhooks=new xR.default,this.signedUrls=new AR.default}subscribe(e,n,i){var r,o;this.socket||(this.socket=TR.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),!((r=this.subscribedChannels)===null||r===void 0)&&r.get(e)||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:`Bearer ${this.apiKey}`}}}),(o=this.subscribedChannels)===null||o===void 0||o.set(e,!0)),this.socket.on(n,function(h,a){e===h&&i(a)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var MR=C0.default=PR;const Lr=async(t,e,n,i)=>{const o=await(await fetch(t)).blob();return tw(o,e,n,i)},tw=(t,e,n,i,r="")=>new Promise((o,h)=>{const a=LA(VA,e),s=RA(a,t,i);s.on("state_changed",u=>{const f=u.bytesTransferred/u.totalBytes*100;n({progress:f,uploadMsg:r})},u=>{n({error:u,uploadMsg:r})},()=>{FA(s.snapshot.ref).then(u=>{const f={url:u,metadata:s.snapshot.metadata,fileName:s.snapshot.metadata.fullPath,extension:i.extension,size:s.snapshot.totalBytes};n({success:!0,uploadMsg:r}),o(f)})})});function IR(t,e,n){return new Promise(async(i,r)=>{try{const o=new MR("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMWIzNWRhYTc3MmZkZTI0ZDI1ODBiMTNiNDkyMWMyNDkzMmE5ZDJhYzk1OTQzNGIzMTQwYWM0NDEyNGI4ZDRjMDFkNDQwYmJkMDJlYzZmNzEiLCJpYXQiOjE2NDY2MjM0MTEuMDAxMjg5LCJuYmYiOjE2NDY2MjM0MTEuMDAxMjkyLCJleHAiOjQ4MDIyOTcwMTAuOTk3ODMzLCJzdWIiOiI0MzczODU0NiIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiXX0.TLmy-ePeLIxA8VE7TkWuQU1jCUSQ6smRW-tKQjGcU0Z7cwR2fE7p5Jd-7QYVI-f6zM6IUKH6JTFRgE9N_4W9ldwLe6Rx-XyOl8v3Rh1Cp4MUIb5kThF-c2uj5hsMIHj1pmFflmNpHB3jL4Mb7To6CCwpw_5Q7BUVpYOG_eHAXboWCGnfb62hFjjbHTLzm0rfSLH-8eiCikzKovjD1W2xK05Rc4ZTjCKikivHqkKpcQjxuH8bEu2mnoHP-flqknIz8kn3yzp3hc55jd5l-QFG8AZ8fcjsVx8MpoRHW4k1lcDjvgIlatYFfHXnmjXnFm9aUwDiPP0XNbRfUjYUoi0jzt7l004sdnyh8_ZOboz1dB0EoGBg0L9NK4V6BZx_Ne59czgh5LdmbBaByVCc26LGZkA6DnZg_PTz7UYQ924xGtjWwFFYffCjRNH9r7AfmE4656KNNaeVwORygRwzL4QbAnjWYKtQUpOOtSiD3xUSENIF4uYLQRthaqvkdxi92LrF2r9MaeDAWqxPV7nLYPSeOUS_Qc75n1F0Ke3VCuE5Z2n_lYkklhGVPSS4jXJJJ7mAJolwp-zlKMYLHINRmZ08AgjV39tCtA--EJVikinVX7Wg7RLL-nRkWRFfI_UgM7OVirqb4O1OJb8MfqRAwfLhj6lDCNTxA4ycI8s0f6x9lR8");let h=await o.jobs.create({tasks:{"import-1":{operation:"import/url",url:`${t.url}`},"task-1":{operation:"convert",input:["import-1"],output_format:"svg"},"export-1":{operation:"export/url",input:["task-1"],inline:!0,archive_multiple_files:!1}},tag:"jobbuilder"});o.jobs.subscribeTaskEvent(h.id,"finished",async a=>{if(a.task.name==="import-1"&&n({uploadMsg:"  .",progress:30}),a.task.name==="export-1"){const s=await Lr(a.task.result.files[0].url,e,n,{extension:"svg"});i(s)}})}catch(o){r(o)}})}let rl;const RR=new Uint8Array(16);function FR(){if(!rl&&(rl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rl(RR)}const rn=[];for(let t=0;t<256;++t)rn.push((t+256).toString(16).slice(1));function LR(t,e=0){return rn[t[e+0]]+rn[t[e+1]]+rn[t[e+2]]+rn[t[e+3]]+"-"+rn[t[e+4]]+rn[t[e+5]]+"-"+rn[t[e+6]]+rn[t[e+7]]+"-"+rn[t[e+8]]+rn[t[e+9]]+"-"+rn[t[e+10]]+rn[t[e+11]]+rn[t[e+12]]+rn[t[e+13]]+rn[t[e+14]]+rn[t[e+15]]}const NR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tm={randomUUID:NR};function Pr(t,e,n){if(Tm.randomUUID&&!e&&!t)return Tm.randomUUID();t=t||{};const i=t.random||(t.rng||FR)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return LR(i)}function km(t,e,n){const i=t.slice();return i[9]=e[n],i}function jR(t){let e;return{c(){e=we(" ")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function BR(t){let e;return{c(){e=we(" ")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function UR(t){let e,n,i,r,o,h,a;n=new YE({}),n.$on("drop",t[10]);let s=Fe(t[5]),u=[];for(let f=0;f<s.length;f+=1)u[f]=Om(km(t,s,f));return{c(){e=E("div"),fe(n.$$.fragment),i=V(),r=E("div"),r.innerHTML='<h1 class="font-semibold text-lg"> </h1> <span class="text-xs">   .</span>',o=V(),h=E("div");for(let f=0;f<u.length;f+=1)u[f].c();S(e,"class","mt-3 overflow-y-auto gap-4"),S(r,"class","flex gap-3 items-center mt-3"),S(h,"class","grid gap-3 grid-cols-2 md:grid-cols-4 mt-5")},m(f,l){U(f,e,l),ce(n,e,null),U(f,i,l),U(f,r,l),U(f,o,l),U(f,h,l);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(h,null);a=!0},p(f,l){if(l[0]&131104){s=Fe(f[5]);let c;for(c=0;c<s.length;c+=1){const d=km(f,s,c);u[c]?u[c].p(d,l):(u[c]=Om(d),u[c].c(),u[c].m(h,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}},i(f){a||(M(n.$$.fragment,f),a=!0)},o(f){Y(n.$$.fragment,f),a=!1},d(f){f&&(j(e),j(i),j(r),j(o),j(h)),ue(n),Pt(u,f)}}}function YR(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b=t[1]&&Em(t);u=new Ce({props:{icon:"fe:crop",height:25}});let y=t[6].usePicWish&&xm(t);return{c(){e=E("div"),n=E("img"),o=V(),b&&b.c(),h=V(),a=E("div"),s=E("button"),fe(u.$$.fragment),f=V(),l=E("span"),l.textContent="",c=V(),y&&y.c(),d=V(),p=E("div"),m=E("button"),m.textContent=" ",S(n,"id","upload-image-ori"),Ye(n.src,i=t[9].url)||S(n,"src",i),S(n,"alt",r=t[9].name),S(l,"class","text-2xs"),S(s,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(s,"type","button"),S(a,"class","absolute left-0 top-10 flex flex-col gap-2"),S(e,"class","p-1 relative image-container overflow-y-auto svelte-1cs98qz"),S(m,"class","btn primary-btn"),S(p,"class","actions mt-3 flex justify-center gap-2")},m(w,C){U(w,e,C),k(e,n),t[20](n),k(e,o),b&&b.m(e,null),k(e,h),k(e,a),k(a,s),ce(u,s,null),k(s,f),k(s,l),k(a,c),y&&y.m(a,null),U(w,d,C),U(w,p,C),k(p,m),g=!0,v||(_=[Z(s,"click",t[23]),Z(m,"click",t[26])],v=!0)},p(w,C){(!g||C[0]&512&&!Ye(n.src,i=w[9].url))&&S(n,"src",i),(!g||C[0]&512&&r!==(r=w[9].name))&&S(n,"alt",r),w[1]?b?(b.p(w,C),C[0]&2&&M(b,1)):(b=Em(w),b.c(),M(b,1),b.m(e,h)):b&&(Te(),Y(b,1,1,()=>{b=null}),ke()),w[6].usePicWish?y?(y.p(w,C),C[0]&64&&M(y,1)):(y=xm(w),y.c(),M(y,1),y.m(a,null)):y&&(Te(),Y(y,1,1,()=>{y=null}),ke())},i(w){g||(M(b),M(u.$$.fragment,w),M(y),g=!0)},o(w){Y(b),Y(u.$$.fragment,w),Y(y),g=!1},d(w){w&&(j(e),j(d),j(p)),t[20](null),b&&b.d(),ue(u),y&&y.d(),v=!1,Ue(_)}}}function Om(t){let e,n,i,r,o,h,a;function s(){return t[27](t[9])}return{c(){e=E("button"),n=E("img"),o=V(),Ye(n.src,i=t[9].thumbnail.url)||S(n,"src",i),S(n,"alt",r=t[9].thumbnail.fileName),S(n,"class","object-contain"),S(e,"class","image-container flex border rounded svelte-1cs98qz")},m(u,f){U(u,e,f),k(e,n),k(e,o),h||(a=Z(e,"click",s),h=!0)},p(u,f){t=u,f[0]&32&&!Ye(n.src,i=t[9].thumbnail.url)&&S(n,"src",i),f[0]&32&&r!==(r=t[9].thumbnail.fileName)&&S(n,"alt",r)},d(u){u&&j(e),h=!1,a()}}}function Em(t){let e,n,i,r,o,h,a,s,u,f,l;return i=new Ce({props:{icon:"mdi:success-bold"}}),a=new Ce({props:{icon:"mdi:success-bold"}}),{c(){e=E("div"),n=E("button"),fe(i.$$.fragment),r=we(" "),o=V(),h=E("button"),fe(a.$$.fragment),s=we(" "),S(n,"type","button"),S(n,"class","btn primary-btn"),S(h,"type","button"),S(h,"class","btn primary-btn"),S(e,"class","sticky bottom-0 flex w-full p-3")},m(c,d){U(c,e,d),k(e,n),ce(i,n,null),k(n,r),k(e,o),k(e,h),ce(a,h,null),k(h,s),u=!0,f||(l=[Z(n,"click",t[21]),Z(h,"click",t[22])],f=!0)},p:ge,i(c){u||(M(i.$$.fragment,c),M(a.$$.fragment,c),u=!0)},o(c){Y(i.$$.fragment,c),Y(a.$$.fragment,c),u=!1},d(c){c&&j(e),ue(i),ue(a),f=!1,Ue(l)}}}function xm(t){let e,n,i,r;const o=[zR,WR],h=[];function a(s,u){return s[0]?0:1}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=Je()},m(s,u){h[e].m(s,u),U(s,i,u),r=!0},p(s,u){let f=e;e=a(s),e===f?h[e].p(s,u):(Te(),Y(h[f],1,1,()=>{h[f]=null}),ke(),n=h[e],n?n.p(s,u):(n=h[e]=o[e](s),n.c()),M(n,1),n.m(i.parentNode,i))},i(s){r||(M(n),r=!0)},o(s){Y(n),r=!1},d(s){s&&j(i),h[e].d(s)}}}function WR(t){let e,n,i,r,o,h,a;return n=new Ce({props:{icon:"material-symbols-light:background-replace-rounded",height:25}}),{c(){e=E("button"),fe(n.$$.fragment),i=V(),r=E("span"),r.textContent="",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,u){U(s,e,u),ce(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Z(e,"click",t[25]),h=!0)},p:ge,i(s){o||(M(n.$$.fragment,s),o=!0)},o(s){Y(n.$$.fragment,s),o=!1},d(s){s&&j(e),ue(n),h=!1,a()}}}function zR(t){let e,n,i,r,o,h,a;return n=new Ce({props:{icon:"iconoir:redo",height:25}}),{c(){e=E("button"),fe(n.$$.fragment),i=V(),r=E("span"),r.textContent="",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,u){U(s,e,u),ce(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Z(e,"click",t[24]),h=!0)},p:ge,i(s){o||(M(n.$$.fragment,s),o=!0)},o(s){Y(n.$$.fragment,s),o=!1},d(s){s&&j(e),ue(n),h=!1,a()}}}function Dm(t){let e,n;return e=new Vb({props:{isSpinner:!0,$$slots:{default:[HR]},$$scope:{ctx:t}}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},p(i,r){const o={};r[0]&16|r[1]&16&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function HR(t){let e;return{c(){e=we(t[4])},m(n,i){U(n,e,i)},p(n,i){i[0]&16&&He(e,n[4])},d(n){n&&j(e)}}}function VR(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;function p(w,C){return w[7]?BR:jR}let m=p(t),g=m(t);o=new Ce({props:{icon:"mingcute:left-line",height:"30"}});const v=[YR,UR],_=[];function b(w,C){return w[9]?0:1}a=b(t),s=_[a]=v[a](t);let y=t[3]&&Dm(t);return{c(){e=E("div"),n=E("h2"),g.c(),i=V(),r=E("button"),fe(o.$$.fragment),h=V(),s.c(),u=V(),y&&y.c(),f=Je(),S(r,"type","button"),S(r,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex font-semibold"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(w,C){U(w,e,C),k(e,n),g.m(n,null),k(n,i),k(n,r),ce(o,r,null),k(e,h),_[a].m(e,null),U(w,u,C),y&&y.m(w,C),U(w,f,C),l=!0,c||(d=Z(r,"click",t[19]),c=!0)},p(w,C){m!==(m=p(w))&&(g.d(1),g=m(w),g&&(g.c(),g.m(n,i)));let T=a;a=b(w),a===T?_[a].p(w,C):(Te(),Y(_[T],1,1,()=>{_[T]=null}),ke(),s=_[a],s?s.p(w,C):(s=_[a]=v[a](w),s.c()),M(s,1),s.m(e,null)),w[3]?y?(y.p(w,C),C[0]&8&&M(y,1)):(y=Dm(w),y.c(),M(y,1),y.m(f.parentNode,f)):y&&(Te(),Y(y,1,1,()=>{y=null}),ke())},i(w){l||(M(o.$$.fragment,w),M(s),M(y),l=!0)},o(w){Y(o.$$.fragment,w),Y(s),Y(y),l=!1},d(w){w&&(j(e),j(u),j(f)),g.d(),ue(o),_[a].d(),y&&y.d(w),c=!1,d()}}}function gs(t){}function XR(t,e,n){let i,r,o,h,a,s;Me(t,Go,O=>n(5,i=O)),Me(t,Le,O=>n(30,r=O)),Me(t,ia,O=>n(31,o=O)),Me(t,po,O=>n(6,h=O)),Me(t,Ns,O=>n(7,a=O)),Me(t,Yt,O=>n(8,s=O));let{handleAddUpload:u}=e;Xt();let f=null,l=null,c=null,d={},p=null,m=null,g=!1,v="";async function _(O){n(3,g=!0);try{const P=O.detail;if(P.length>0){const F=P[0],L=new FileReader,J=Xx(F);if(J==="psd"||J==="svg"||J==="ai"||J==="eps"||J==="pdf"){n(4,v="  .");const R={},D=`editorData/${r.uuid}/`,X={extension:J},K=await tw(F,`${D}${Pr()}.${J}`,gs,X);switch(R.origin=K,J){case"svg":R.thumbnail=K;break;case"ai":case"eps":case"pdf":n(4,v="  .");const re=await IR(K,`${D}${Pr()}.svg`,gs);R.thumbnail=re;break;case"psd":n(4,v="  .");const te=await vg({fileName:K.fileName,extension:J,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});if(te.original){const ae=await Lr(te.original,`${D}${Pr()}.png`,gs,X);R.convert=ae}n(4,v="  .");const $=await Lr(te.thumbnail,`${D}${Pr()}.png`,gs,X);R.thumbnail=$;break;default:break}_e(Le,r.uploads=[...r.uploads,R],r),_e(Go,i=[...i,R],i),n(3,g=!1);return}if(J!=="png"&&J!=="jpg"&&J!=="jpeg"&&J!=="gif"&&J!=="webp"){alert("   ."),n(3,g=!1);return}L.onload=function(R){const D=R.target.result,X=new Image;X.src=D,X.onload=function(){const K=X.width,re=X.height;n(9,f={url:D,width:K,height:re,extension:J})},n(3,g=!1)},L.readAsDataURL(F)}}catch(P){console.log({error:P}),n(3,g=!1)}}function b(){n(1,p=new Yb(m,{crop(O){d=O.detail}}))}function y(){n(9,f={url:l}),n(0,l=null)}async function w(){if(c){n(0,l=f.url),n(9,f={url:c});return}try{n(3,g=!0),n(4,v="AI   ."),n(9,f.url=f.url.replace(/^data:image\/png;base64,/,""),f),n(9,f.url=f.url.replace(/^data:image\/jpeg;base64,/,""),f),n(9,f.url=f.url.replace(/^data:image\/gif;base64,/,""),f);const O=await Mx(h.id,f.url);if(O.status===200)n(0,l=`data:image/png;base64, ${f.url}`),c=`data:image/png;base64, ${O.data.image}`,n(9,f={url:c});else throw new Error(" .")}catch(O){console.log({error:O})}finally{n(4,v=""),n(3,g=!1)}}function C(){p&&(p.destroy(),n(1,p=null))}async function T(){try{n(3,g=!0),n(4,v="  .");const O={},P=`editorData/${r.uuid}/`,F={width:f.width,height:f.height,extension:f.extension},L=await Lr(f.url,`${P}${Pr()}.${f.extension}`,gs,F);O.origin=L,O.convert=L,n(4,v="  .");const J=await vg({fileName:L.fileName,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});n(4,v="  .");const R=await Lr(J.thumbnail,`${P}${Pr()}.png`,gs,F);O.thumbnail=R,_e(Le,r.uploads=[...r.uploads,O],r),_e(Go,i=[...i,O],i),n(9,f=null)}catch{}finally{n(4,v=""),n(3,g=!1)}}function x(){const O=document.createElement("canvas"),P=O.getContext("2d"),{x:F,y:L,width:J,height:R}=d;O.width=J,O.height=R,P.drawImage(m,-F,-L),n(9,f={url:O.toDataURL("image/png"),width:J,height:R,extension:"png"}),C()}function A(O){u(O)}const I=()=>_e(Yt,s=null,s);function W(O){tt[O?"unshift":"push"](()=>{m=O,n(2,m)})}const H=()=>x(),q=()=>C(),G=()=>b(),B=()=>y(),z=()=>w(),ee=()=>T(),oe=O=>A(O);return t.$$set=O=>{"handleAddUpload"in O&&n(18,u=O.handleAddUpload)},[l,p,m,g,v,i,h,a,s,f,_,b,y,w,C,T,x,A,u,I,W,H,q,G,B,z,ee,oe]}class $R extends qe{constructor(e){super(),Ge(this,e,XR,VR,Ve,{handleAddUpload:18},null,[-1,-1])}}function GR(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}});let y=qR;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="",r=V(),o=E("button"),fe(h.$$.fragment),a=V(),s=E("div"),u=E("div"),f=E("div"),l=E("textarea"),c=V(),d=E("div"),p=E("button"),p.textContent="",m=V(),g=Je(),S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"class","textarea"),S(l,"rows","5"),S(l,"placeholder"," ."),S(f,"class","my-3"),S(p,"type","button"),S(p,"class","btn btn-sm md:p-3 md:text-base primary-btn w-full"),S(d,"class","p-3 flex justify-center"),S(u,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(w,C){U(w,e,C),k(e,n),k(n,i),k(n,r),k(n,o),ce(h,o,null),k(e,a),k(e,s),k(s,u),k(u,f),k(f,l),Re(l,t[1]),k(u,c),k(u,d),k(d,p),U(w,m,C),U(w,g,C),v=!0,_||(b=[Z(o,"click",t[3]),Z(l,"input",t[4]),Z(p,"click",t[5])],_=!0)},p(w,[C]){C&2&&Re(l,w[1])},i(w){v||(M(h.$$.fragment,w),M(y),v=!0)},o(w){Y(h.$$.fragment,w),Y(y),v=!1},d(w){w&&(j(e),j(m),j(g)),ue(h),_=!1,Ue(b)}}}let qR=!1;function KR(t,e,n){let i;Me(t,Yt,u=>n(2,i=u));let{handleAddText:r}=e,o="";const h=()=>_e(Yt,i=null,i);function a(){o=this.value,n(1,o)}const s=()=>r(o);return t.$$set=u=>{"handleAddText"in u&&n(0,r=u.handleAddText)},[r,o,i,h,a,s]}class JR extends qe{constructor(e){super(),Ge(this,e,KR,GR,Ve,{handleAddText:0})}}function ZR(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w,C,T,x,A,I;h=new Ce({props:{icon:"mingcute:left-line",height:"30"}}),c=new Ce({props:{icon:"ic:outline-rectangle",width:16}}),m=new Ce({props:{icon:"ic:outline-circle",width:16}}),_=new Ce({props:{icon:"uil:triangle",width:16}}),w=new Ce({props:{icon:"material-symbols-light:draw",width:16}});let W=QR;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="/",r=V(),o=E("button"),fe(h.$$.fragment),a=V(),s=E("div"),u=E("div"),f=E("div"),l=E("button"),fe(c.$$.fragment),d=V(),p=E("button"),fe(m.$$.fragment),g=V(),v=E("button"),fe(_.$$.fragment),b=V(),y=E("button"),fe(w.$$.fragment),C=V(),T=Je(),S(o,"type","button"),S(o,"class","absolute right-2 btn btn-sm"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"type","button"),S(l,"class","btn white-btn"),S(p,"type","button"),S(p,"class","btn white-btn"),S(v,"type","button"),S(v,"class","btn white-btn"),S(y,"type","button"),S(y,"class","btn white-btn"),S(f,"class","my-3 flex gap-1"),S(u,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(H,q){U(H,e,q),k(e,n),k(n,i),k(n,r),k(n,o),ce(h,o,null),k(e,a),k(e,s),k(s,u),k(u,f),k(f,l),ce(c,l,null),k(f,d),k(f,p),ce(m,p,null),k(f,g),k(f,v),ce(_,v,null),k(f,b),k(f,y),ce(w,y,null),U(H,C,q),U(H,T,q),x=!0,A||(I=[Z(o,"click",t[2]),Z(l,"click",t[3]),Z(p,"click",t[4]),Z(v,"click",t[5]),Z(y,"click",t[6])],A=!0)},p(H,[q]){},i(H){x||(M(h.$$.fragment,H),M(c.$$.fragment,H),M(m.$$.fragment,H),M(_.$$.fragment,H),M(w.$$.fragment,H),M(W),x=!0)},o(H){Y(h.$$.fragment,H),Y(c.$$.fragment,H),Y(m.$$.fragment,H),Y(_.$$.fragment,H),Y(w.$$.fragment,H),Y(W),x=!1},d(H){H&&(j(e),j(C),j(T)),ue(h),ue(c),ue(m),ue(_),ue(w),A=!1,Ue(I)}}}let QR=!1;function eF(t,e,n){let i;Me(t,Yt,f=>n(1,i=f));let{handleAddShape:r}=e;const o=()=>_e(Yt,i=null,i),h=()=>r("rect"),a=()=>r("circle"),s=()=>r("triangle"),u=()=>r("draw");return t.$$set=f=>{"handleAddShape"in f&&n(0,r=f.handleAddShape)},[r,i,o,h,a,s,u]}class tF extends qe{constructor(e){super(),Ge(this,e,eF,ZR,Ve,{handleAddShape:0})}}function nF(t){let e;return{c(){e=E("canvas"),e.innerHTML="",S(e,"id","print"),S(e,"class","svelte-d96o53")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function iF(t){let e,n,i,r,o;return{c(){var h,a,s;e=E("div"),n=E("div"),i=E("canvas"),i.innerHTML="",S(i,"id","print"),S(i,"class","svelte-d96o53"),S(n,"class","print-container absolute"),S(n,"style",`left:${t[6].background.canvasLeft}%; top:${t[6].background.canvasTop}%; width:${t[6].background.canvasPer}%; height:${t[6].background.canvasPer*t[8]}%;`),S(e,"style",r=`max-width: ${t[7]}px; max-height: ${t[9]}px; width: 100%; height: ${t[2]}px; background-image:url(${(a=(h=t[6].background)==null?void 0:h.image)==null?void 0:a.url}); background-color:${(s=t[5].currentOption)!=null&&s.colorCode?t[5].currentOption.colorCode:"#ffffff"}`),S(e,"class","flex flex-col justify-center background-container svelte-d96o53"),zt(()=>t[21].call(e))},m(h,a){U(h,e,a),k(e,n),k(n,i),o=O1(e,t[21].bind(e))},p(h,a){var s,u,f;a[0]&36&&r!==(r=`max-width: ${h[7]}px; max-height: ${h[9]}px; width: 100%; height: ${h[2]}px; background-image:url(${(u=(s=h[6].background)==null?void 0:s.image)==null?void 0:u.url}); background-color:${(f=h[5].currentOption)!=null&&f.colorCode?h[5].currentOption.colorCode:"#ffffff"}`)&&S(e,"style",r)},d(h){h&&j(e),o()}}}function Am(t){let e,n,i,r;return n=new LE({props:{handleAddClipArt:t[10]}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ce(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!0)),i.run(1))}),r=!0)},o(o){Y(n.$$.fragment,o),o&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!1)),i.run(0)),r=!1},d(o){o&&j(e),ue(n),o&&i&&i.end()}}}function Pm(t){let e,n,i,r;return n=new $R({props:{handleAddUpload:t[11]}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-full max-w-2xl h-full z-50")},m(o,h){U(o,e,h),ce(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!0)),i.run(1))}),r=!0)},o(o){Y(n.$$.fragment,o),o&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!1)),i.run(0)),r=!1},d(o){o&&j(e),ue(n),o&&i&&i.end()}}}function Mm(t){let e,n,i,r;return n=new JR({props:{handleAddText:t[12]}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ce(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!0)),i.run(1))}),r=!0)},o(o){Y(n.$$.fragment,o),o&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!1)),i.run(0)),r=!1},d(o){o&&j(e),ue(n),o&&i&&i.end()}}}function Im(t){let e,n,i,r;return n=new tF({props:{handleAddShape:t[13]}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ce(n,e,null),r=!0},p:ge,i(o){r||(M(n.$$.fragment,o),o&&zt(()=>{r&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!0)),i.run(1))}),r=!0)},o(o){Y(n.$$.fragment,o),o&&(i||(i=Vt(e,br,{delay:10,duration:200,axis:"x",opacity:.5,easing:yr},!1)),i.run(0)),r=!1},d(o){o&&j(e),ue(n),o&&i&&i.end()}}}function Rm(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b;i=new Ce({props:{icon:"ph:angle",height:"18"}});let y=(t[3][0].colorType==="color"||t[3][0].objType==="text"||t[3][0].objType==="shape"||t[3][0].type==="path")&&Fm(t),w=t[3][0].colorType==="colors"&&Lm(t),C=t[3][0].objType==="text"&&Nm(t),T=(t[3][0].type==="path"||t[3][0].objType==="text"||t[3][0].objType==="shape")&&jm(t),x=t[1]==="rotate"&&Bm(t),A=t[1]==="color"&&Um(t),I=t[1]==="text"&&Ym(t),W=t[1]==="align"&&Wm(t),H=t[1]==="style"&&zm(t),q=t[1]==="decoration"&&Hm(t),G=t[1]==="stroke"&&Vm(t),B=t[1]==="colors"&&Xm(t);return{c(){e=E("div"),n=E("button"),fe(i.$$.fragment),r=V(),y&&y.c(),o=V(),w&&w.c(),h=V(),C&&C.c(),a=V(),T&&T.c(),s=V(),x&&x.c(),u=V(),A&&A.c(),f=V(),I&&I.c(),l=V(),W&&W.c(),c=V(),H&&H.c(),d=V(),q&&q.c(),p=V(),G&&G.c(),m=V(),B&&B.c(),g=Je(),S(n,"class","btn white-btn circle-btn"),S(e,"class","absolute flex justify-center gap-0.5 z-40 top-10")},m(z,ee){U(z,e,ee),k(e,n),ce(i,n,null),k(e,r),y&&y.m(e,null),k(e,o),w&&w.m(e,null),k(e,h),C&&C.m(e,null),k(e,a),T&&T.m(e,null),U(z,s,ee),x&&x.m(z,ee),U(z,u,ee),A&&A.m(z,ee),U(z,f,ee),I&&I.m(z,ee),U(z,l,ee),W&&W.m(z,ee),U(z,c,ee),H&&H.m(z,ee),U(z,d,ee),q&&q.m(z,ee),U(z,p,ee),G&&G.m(z,ee),U(z,m,ee),B&&B.m(z,ee),U(z,g,ee),v=!0,_||(b=Z(n,"click",t[22]),_=!0)},p(z,ee){z[3][0].colorType==="color"||z[3][0].objType==="text"||z[3][0].objType==="shape"||z[3][0].type==="path"?y?(y.p(z,ee),ee[0]&8&&M(y,1)):(y=Fm(z),y.c(),M(y,1),y.m(e,o)):y&&(Te(),Y(y,1,1,()=>{y=null}),ke()),z[3][0].colorType==="colors"?w?(w.p(z,ee),ee[0]&8&&M(w,1)):(w=Lm(z),w.c(),M(w,1),w.m(e,h)):w&&(Te(),Y(w,1,1,()=>{w=null}),ke()),z[3][0].objType==="text"?C?(C.p(z,ee),ee[0]&8&&M(C,1)):(C=Nm(z),C.c(),M(C,1),C.m(e,a)):C&&(Te(),Y(C,1,1,()=>{C=null}),ke()),z[3][0].type==="path"||z[3][0].objType==="text"||z[3][0].objType==="shape"?T?(T.p(z,ee),ee[0]&8&&M(T,1)):(T=jm(z),T.c(),M(T,1),T.m(e,null)):T&&(Te(),Y(T,1,1,()=>{T=null}),ke()),z[1]==="rotate"?x?(x.p(z,ee),ee[0]&2&&M(x,1)):(x=Bm(z),x.c(),M(x,1),x.m(u.parentNode,u)):x&&(Te(),Y(x,1,1,()=>{x=null}),ke()),z[1]==="color"?A?(A.p(z,ee),ee[0]&2&&M(A,1)):(A=Um(z),A.c(),M(A,1),A.m(f.parentNode,f)):A&&(Te(),Y(A,1,1,()=>{A=null}),ke()),z[1]==="text"?I?(I.p(z,ee),ee[0]&2&&M(I,1)):(I=Ym(z),I.c(),M(I,1),I.m(l.parentNode,l)):I&&(Te(),Y(I,1,1,()=>{I=null}),ke()),z[1]==="align"?W?(W.p(z,ee),ee[0]&2&&M(W,1)):(W=Wm(z),W.c(),M(W,1),W.m(c.parentNode,c)):W&&(Te(),Y(W,1,1,()=>{W=null}),ke()),z[1]==="style"?H?(H.p(z,ee),ee[0]&2&&M(H,1)):(H=zm(z),H.c(),M(H,1),H.m(d.parentNode,d)):H&&(Te(),Y(H,1,1,()=>{H=null}),ke()),z[1]==="decoration"?q?(q.p(z,ee),ee[0]&2&&M(q,1)):(q=Hm(z),q.c(),M(q,1),q.m(p.parentNode,p)):q&&(Te(),Y(q,1,1,()=>{q=null}),ke()),z[1]==="stroke"?G?(G.p(z,ee),ee[0]&2&&M(G,1)):(G=Vm(z),G.c(),M(G,1),G.m(m.parentNode,m)):G&&(Te(),Y(G,1,1,()=>{G=null}),ke()),z[1]==="colors"?B?(B.p(z,ee),ee[0]&2&&M(B,1)):(B=Xm(z),B.c(),M(B,1),B.m(g.parentNode,g)):B&&(Te(),Y(B,1,1,()=>{B=null}),ke())},i(z){v||(M(i.$$.fragment,z),M(y),M(w),M(C),M(T),M(x),M(A),M(I),M(W),M(H),M(q),M(G),M(B),v=!0)},o(z){Y(i.$$.fragment,z),Y(y),Y(w),Y(C),Y(T),Y(x),Y(A),Y(I),Y(W),Y(H),Y(q),Y(G),Y(B),v=!1},d(z){z&&(j(e),j(s),j(u),j(f),j(l),j(c),j(d),j(p),j(m),j(g)),ue(i),y&&y.d(),w&&w.d(),C&&C.d(),T&&T.d(),x&&x.d(z),A&&A.d(z),I&&I.d(z),W&&W.d(z),H&&H.d(z),q&&q.d(z),G&&G.d(z),B&&B.d(z),_=!1,b()}}}function Fm(t){let e,n,i,r,o;return n=new Ce({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),fe(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ce(n,e,null),i=!0,r||(o=Z(e,"click",t[23]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){Y(n.$$.fragment,h),i=!1},d(h){h&&j(e),ue(n),r=!1,o()}}}function Lm(t){let e,n,i,r,o;return n=new Ce({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),fe(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ce(n,e,null),i=!0,r||(o=Z(e,"click",t[24]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){Y(n.$$.fragment,h),i=!1},d(h){h&&j(e),ue(n),r=!1,o()}}}function Nm(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p;return n=new Ce({props:{icon:"cil:text",height:"18"}}),o=new Ce({props:{icon:"uim:align-left",height:"18"}}),s=new Ce({props:{icon:"pajamas:italic",height:"18"}}),l=new Ce({props:{icon:"fluent:text-underline-24-filled",height:"18"}}),{c(){e=E("button"),fe(n.$$.fragment),i=V(),r=E("button"),fe(o.$$.fragment),h=V(),a=E("button"),fe(s.$$.fragment),u=V(),f=E("button"),fe(l.$$.fragment),S(e,"class","btn white-btn circle-btn"),S(r,"class","btn white-btn circle-btn"),S(a,"class","btn white-btn circle-btn"),S(f,"class","btn white-btn circle-btn")},m(m,g){U(m,e,g),ce(n,e,null),U(m,i,g),U(m,r,g),ce(o,r,null),U(m,h,g),U(m,a,g),ce(s,a,null),U(m,u,g),U(m,f,g),ce(l,f,null),c=!0,d||(p=[Z(e,"click",t[25]),Z(r,"click",t[26]),Z(a,"click",t[27]),Z(f,"click",t[28])],d=!0)},p:ge,i(m){c||(M(n.$$.fragment,m),M(o.$$.fragment,m),M(s.$$.fragment,m),M(l.$$.fragment,m),c=!0)},o(m){Y(n.$$.fragment,m),Y(o.$$.fragment,m),Y(s.$$.fragment,m),Y(l.$$.fragment,m),c=!1},d(m){m&&(j(e),j(i),j(r),j(h),j(a),j(u),j(f)),ue(n),ue(o),ue(s),ue(l),d=!1,Ue(p)}}}function jm(t){let e,n,i,r,o;return n=new Ce({props:{icon:"maki:square-stroked",height:"18"}}),{c(){e=E("button"),fe(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ce(n,e,null),i=!0,r||(o=Z(e,"click",t[29]),r=!0)},p:ge,i(h){i||(M(n.$$.fragment,h),i=!0)},o(h){Y(n.$$.fragment,h),i=!1},d(h){h&&j(e),ue(n),r=!1,o()}}}function Bm(t){let e,n,i;function r(h){t[30](h)}let o={sliderValue:t[3][0].angle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new CO({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeRotate",t[14]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.sliderValue=h[3][0].angle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Um(t){let e,n,i;function r(h){t[31](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new gE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeColor",t[32]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Ym(t){let e,n,i;function r(h){t[33](h)}let o={text:t[3][0].text};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new _E({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeText",t[15]),e.$on("onChangeFontFamily",t[16]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.text=h[3][0].text),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Wm(t){let e,n,i;function r(h){t[34](h)}let o={align:t[3][0].textAlign};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new wE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeAlign",t[17]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.align=h[3][0].textAlign),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function zm(t){let e,n,i;function r(h){t[35](h)}let o={style:t[3][0].fontStyle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new TE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeStyle",t[18]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.style=h[3][0].fontStyle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Hm(t){let e,n,i;function r(h){t[36](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new EE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeDecoration",t[19]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Vm(t){let e,n,i;function r(h){t[37](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new AE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeStroke",t[20]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function Xm(t){let e,n,i;function r(h){t[38](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new IE({props:o}),tt.push(()=>At(e,"selectProperty",r)),e.$on("onChangeColors",t[39]),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function rF(t){let e,n,i,r,o,h,a;function s(g,v){return g[6].background?iF:nF}let f=s(t)(t),l=t[4]==="clipart"&&Am(t),c=t[4]==="upload"&&Pm(t),d=t[4]==="text"&&Mm(t),p=t[4]==="draw"&&Im(t),m=t[3]&&Rm(t);return{c(){e=E("div"),f.c(),n=V(),l&&l.c(),i=V(),c&&c.c(),r=V(),d&&d.c(),o=V(),p&&p.c(),h=V(),m&&m.c(),S(e,"class","flex justify-center items-center h-full w-full relative flex-col")},m(g,v){U(g,e,v),f.m(e,null),k(e,n),l&&l.m(e,null),k(e,i),c&&c.m(e,null),k(e,r),d&&d.m(e,null),k(e,o),p&&p.m(e,null),k(e,h),m&&m.m(e,null),a=!0},p(g,v){f.p(g,v),g[4]==="clipart"?l?(l.p(g,v),v[0]&16&&M(l,1)):(l=Am(g),l.c(),M(l,1),l.m(e,i)):l&&(Te(),Y(l,1,1,()=>{l=null}),ke()),g[4]==="upload"?c?(c.p(g,v),v[0]&16&&M(c,1)):(c=Pm(g),c.c(),M(c,1),c.m(e,r)):c&&(Te(),Y(c,1,1,()=>{c=null}),ke()),g[4]==="text"?d?(d.p(g,v),v[0]&16&&M(d,1)):(d=Mm(g),d.c(),M(d,1),d.m(e,o)):d&&(Te(),Y(d,1,1,()=>{d=null}),ke()),g[4]==="draw"?p?(p.p(g,v),v[0]&16&&M(p,1)):(p=Im(g),p.c(),M(p,1),p.m(e,h)):p&&(Te(),Y(p,1,1,()=>{p=null}),ke()),g[3]?m?(m.p(g,v),v[0]&8&&M(m,1)):(m=Rm(g),m.c(),M(m,1),m.m(e,null)):m&&(Te(),Y(m,1,1,()=>{m=null}),ke())},i(g){a||(M(l),M(c),M(d),M(p),M(m),a=!0)},o(g){Y(l),Y(c),Y(d),Y(p),Y(m),a=!1},d(g){g&&j(e),f.d(),l&&l.d(),c&&c.d(),d&&d.d(),p&&p.d(),m&&m.d()}}}function sF(t,e,n){let i,r,o,h,a,s,u,f,l;Me(t,Ui,N=>n(3,r=N)),Me(t,Yt,N=>n(4,o=N)),Me(t,uu,N=>n(40,h=N)),Me(t,$o,N=>n(41,a=N)),Me(t,Ns,N=>n(42,s=N)),Me(t,po,N=>n(43,u=N)),Me(t,ia,N=>n(44,f=N)),Me(t,Le,N=>n(5,l=N));let c=l.prints[f],d,p=c.canvasWidth,m=c.height/c.width,g=p*m,v=c.canvasJSON,_=null;Xt();function b(N,ne=null){console.log({json:N}),_e(Le,l.prints[f].isChange=!0,l),N&&_e(Le,l.prints[f].canvasJSON=N,l),_e(Le,l.prints[f].imageDataURL=sC(),l),ne&&_e(Le,l.prints[f].svg=ne,l)}xi(async()=>{var N,ne;if(_e(Ui,r=null,r),q1("print",p,g,b),v&&J1(v),((N=c.colorGroup)==null?void 0:N.value)!=="palette"){const se=await rk(u.id);se.error?console.log("   "):((ne=c.colorGroup)==null?void 0:ne.value)==="shopColor"?_e(uu,h=se.data,h):_e(uu,h=se.data.filter(ie=>ie.colorGroup===c.colorGroup.value),h)}});function y(N){const ne={url:N.file.url,convertUrl:N.file.convert.url,originUrl:N.file.origin.url};zd(N.file.url,{convert:ne,objType:"clipart"}),_e(Yt,o=null,o)}function w(N){const ne={url:N.thumbnail.url,convertUrl:N.convert.url,originUrl:N.origin.url};s?(Z1(s,N.thumbnail.url,{convert:ne,origin:N.origin,thumbnail:N.thumbnail,objType:"upload"}),_e(Ns,s=null,s)):zd(N.thumbnail.url,{convert:ne,origin:N.origin,thumbnail:N.thumbnail,objType:"upload"}),_e(Yt,o=null,o)}function C(N){const ne=h!=null&&h.length?h[0].hex:"#000000";tC(N,{objType:"text",fontFamily:a[0].fontFamily,localFamily:a[0].localFamily,fill:ne}),_e(Yt,o=null,o)}function T(N){const ne=h[0]?h[0].hex:"#000000";switch(N){case"rect":_C(ne);break;case"triangle":bC(ne);break;case"circle":yC(ne);break;case"draw":wC(!0);break}_e(Yt,o=null,o)}function x({detail:N}){oC(N.value)}function A({detail:N}){aC(r[0],N.text)}function I({detail:N}){lC(r[0],N.fontFamily,N.localFamily)}function W({detail:N}){cC(r[0],N.align)}function H({detail:N}){uC(r[0],N.style)}function q({detail:N}){fC(r[0],N.decoration)}function G({detail:N}){hC(r[0],N.stroke)}function B(){d=this.clientWidth,n(0,d)}const z=()=>n(1,_="rotate"),ee=()=>n(1,_="color"),oe=()=>n(1,_="colors"),O=()=>n(1,_="text"),P=()=>n(1,_="align"),F=()=>n(1,_="style"),L=()=>n(1,_="decoration"),J=()=>n(1,_="stroke");function R(N){_=N,n(1,_)}function D(N){_=N,n(1,_)}const X=()=>Hd();function K(N){_=N,n(1,_)}function re(N){_=N,n(1,_)}function te(N){_=N,n(1,_)}function $(N){_=N,n(1,_)}function ae(N){_=N,n(1,_)}function me(N){_=N,n(1,_)}const Q=()=>Hd();return t.$$.update=()=>{var N;t.$$.dirty[0]&1&&n(2,i=d*((N=c.background)!=null&&N.ratio?c.background.ratio:1))},[d,_,i,r,o,l,c,p,m,g,y,w,C,T,x,A,I,W,H,q,G,B,z,ee,oe,O,P,F,L,J,R,D,X,K,re,te,$,ae,me,Q]}class oF extends qe{constructor(e){super(),Ge(this,e,sF,rF,Ve,{},null,[-1,-1])}}function $m(t,e,n){const i=t.slice();return i[6]=e[n],i[8]=n,i}function Gm(t){let e,n,i;return{c(){var r;e=E("img"),Ye(e.src,n=(r=t[6].background.image)==null?void 0:r.url)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class","max-h-full")},m(r,o){U(r,e,o)},p(r,o){var h;o&1&&!Ye(e.src,n=(h=r[6].background.image)==null?void 0:h.url)&&S(e,"src",n),o&1&&i!==(i=r[6].title)&&S(e,"alt",i)},d(r){r&&j(e)}}}function qm(t){let e,n,i,r,o;return{c(){var h,a,s,u,f;e=E("img"),Ye(e.src,n=t[6].imageDataURL)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class",r=(a=(h=t[6].background)==null?void 0:h.image)!=null&&a.url?"absolute":""),S(e,"style",o=`left:${(s=t[6].background)!=null&&s.canvasLeft?t[6].background.canvasLeft:0}%; top:${(u=t[6].background)!=null&&u.canvasTop?t[6].background.canvasTop:0}%; width:${(f=t[6].background)!=null&&f.canvasPer?t[6].background.canvasPer:100}%; height:auto;`)},m(h,a){U(h,e,a)},p(h,a){var s,u,f,l,c;a&1&&!Ye(e.src,n=h[6].imageDataURL)&&S(e,"src",n),a&1&&i!==(i=h[6].title)&&S(e,"alt",i),a&1&&r!==(r=(u=(s=h[6].background)==null?void 0:s.image)!=null&&u.url?"absolute":"")&&S(e,"class",r),a&1&&o!==(o=`left:${(f=h[6].background)!=null&&f.canvasLeft?h[6].background.canvasLeft:0}%; top:${(l=h[6].background)!=null&&l.canvasTop?h[6].background.canvasTop:0}%; width:${(c=h[6].background)!=null&&c.canvasPer?h[6].background.canvasPer:100}%; height:auto;`)&&S(e,"style",o)},d(h){h&&j(e)}}}function Km(t){var p,m;let e,n,i,r,o,h=t[6].title+"",a,s,u,f,l=((m=(p=t[6].background)==null?void 0:p.image)==null?void 0:m.url)&&Gm(t),c=t[6].imageDataURL&&qm(t);function d(){return t[3](t[8])}return{c(){var g;e=E("div"),n=E("button"),l&&l.c(),i=V(),c&&c.c(),r=V(),o=E("span"),a=we(h),s=V(),S(n,"class","max-w-24 max-h-24 min-w-14 min-h-14 relative bg-no-repeat border rounded-lg overflow-hidden"),mt(n,"background-color",(g=t[0].currentOption)!=null&&g.colorCode?t[0].currentOption.colorCode:"#ffffff"),S(o,"class","w-full flex justify-center text-xs py-0.5"),S(e,"class","p-1 bg-white rounded-lg flex flex-col")},m(g,v){U(g,e,v),k(e,n),l&&l.m(n,null),k(n,i),c&&c.m(n,null),k(e,r),k(e,o),k(o,a),k(e,s),u||(f=Z(n,"click",d),u=!0)},p(g,v){var _,b,y;t=g,(b=(_=t[6].background)==null?void 0:_.image)!=null&&b.url?l?l.p(t,v):(l=Gm(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null),t[6].imageDataURL?c?c.p(t,v):(c=qm(t),c.c(),c.m(n,null)):c&&(c.d(1),c=null),v&1&&mt(n,"background-color",(y=t[0].currentOption)!=null&&y.colorCode?t[0].currentOption.colorCode:"#ffffff"),v&1&&h!==(h=t[6].title+"")&&He(a,h)},d(g){g&&j(e),l&&l.d(),c&&c.d(),u=!1,f()}}}function aF(t){let e,n,i=Fe(t[0].prints),r=[];for(let o=0;o<i.length;o+=1)r[o]=Km($m(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","flex flex-row max-w-full space-x-4 overflow-x-auto overflow-y-hidden p-5"),S(e,"class","absolute bottom-2")},m(o,h){U(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,[h]){if(h&3){i=Fe(o[0].prints);let a;for(a=0;a<i.length;a+=1){const s=$m(o,i,a);r[a]?r[a].p(s,h):(r[a]=Km(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:ge,o:ge,d(o){o&&j(e),Pt(r,o)}}}function lF(t,e,n){let i,r;Me(t,ia,s=>n(4,i=s)),Me(t,Le,s=>n(0,r=s));let{printKey:o}=e;Xt();function h(s){_e(ia,i=s,i),n(2,o++,o)}const a=s=>h(s);return t.$$set=s=>{"printKey"in s&&n(2,o=s.printKey)},[r,h,o,a]}class cF extends qe{constructor(e){super(),Ge(this,e,lF,aF,Ve,{printKey:2})}}/*!
* Viewer.js v1.11.6
* https://fengyuanchen.github.io/viewerjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:16:38.052Z
*/function Jm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function td(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jm(Object(n),!0).forEach(function(i){hF(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function uF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zm(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nw(i.key),i)}}function fF(t,e,n){return e&&Zm(t.prototype,e),n&&Zm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hF(t,e,n){return e=nw(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dF(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nw(t){var e=dF(t,"string");return typeof e=="symbol"?e:String(e)}var Qm={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},pF='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',Pc=typeof window<"u"&&typeof window.document<"u",Gi=Pc?window:{},Ys=Pc&&Gi.document.documentElement?"ontouchstart"in Gi.document.documentElement:!1,nd=Pc?"PointerEvent"in Gi:!1,$e="viewer",Sl="move",iw="switch",Uo="zoom",sl="".concat($e,"-active"),gF="".concat($e,"-close"),Tl="".concat($e,"-fade"),Wf="".concat($e,"-fixed"),mF="".concat($e,"-fullscreen"),ev="".concat($e,"-fullscreen-exit"),Rr="".concat($e,"-hide"),vF="".concat($e,"-hide-md-down"),_F="".concat($e,"-hide-sm-down"),yF="".concat($e,"-hide-xs-down"),Bn="".concat($e,"-in"),Qo="".concat($e,"-invisible"),Ws="".concat($e,"-loading"),bF="".concat($e,"-move"),tv="".concat($e,"-open"),ms="".concat($e,"-show"),It="".concat($e,"-transition"),so="click",zf="dblclick",nv="dragstart",iv="focusin",rv="keydown",zn="load",Vr="error",wF=Ys?"touchend touchcancel":"mouseup",CF=Ys?"touchmove":"mousemove",SF=Ys?"touchstart":"mousedown",sv=nd?"pointerdown":SF,ov=nd?"pointermove":CF,av=nd?"pointerup pointercancel":wF,lv="resize",Qn="transitionend",cv="wheel",uv="ready",fv="show",hv="shown",dv="hide",pv="hidden",gv="view",ua="viewed",mv="move",vv="moved",_v="rotate",yv="rotated",bv="scale",wv="scaled",Cv="zoom",Sv="zoomed",Tv="play",kv="stop",Zl="".concat($e,"Action"),id=/\s\s*/,ol=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function fa(t){return typeof t=="string"}var TF=Number.isNaN||Gi.isNaN;function xt(t){return typeof t=="number"&&!TF(t)}function Ds(t){return typeof t>"u"}function oo(t){return Yf(t)==="object"&&t!==null}var kF=Object.prototype.hasOwnProperty;function As(t){if(!oo(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&kF.call(n,"isPrototypeOf")}catch{return!1}}function ft(t){return typeof t=="function"}function dt(t,e){if(t&&ft(e))if(Array.isArray(t)||xt(t.length)){var n=t.length,i;for(i=0;i<n&&e.call(t,t[i],i,t)!==!1;i+=1);}else oo(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)});return t}var Ln=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return oo(e)&&i.length>0&&i.forEach(function(o){oo(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},OF=/^(?:width|height|left|top|marginLeft|marginTop)$/;function ti(t,e){var n=t.style;dt(e,function(i,r){OF.test(r)&&xt(i)&&(i+="px"),n[r]=i})}function EF(t){return fa(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Ts(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function je(t,e){if(!(!t||!e)){if(xt(t.length)){dt(t,function(i){je(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function st(t,e){if(!(!t||!e)){if(xt(t.length)){dt(t,function(n){st(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function ha(t,e,n){if(e){if(xt(t.length)){dt(t,function(i){ha(i,e,n)});return}n?je(t,e):st(t,e)}}var xF=/([a-z\d])([A-Z])/g;function rd(t){return t.replace(xF,"$1-$2").toLowerCase()}function Ps(t,e){return oo(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(rd(e)))}function Hf(t,e,n){oo(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(rd(e)),n)}var rw=function(){var t=!1;if(Pc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});Gi.addEventListener("test",n,i),Gi.removeEventListener("test",n,i)}return t}();function ht(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(id).forEach(function(o){if(!rw){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Be(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(id).forEach(function(o){if(i.once&&!rw){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Lt(t,e,n,i){var r;return ft(Event)&&ft(CustomEvent)?r=new CustomEvent(e,td({bubbles:!0,cancelable:!0,detail:n},i)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function DF(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function kl(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];xt(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),xt(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),xt(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),xt(n)&&n!==1&&h.push("scaleX(".concat(n,")")),xt(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function AF(t){return fa(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var Vu=Gi.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Gi.navigator.userAgent);function sw(t,e,n){var i=document.createElement("img");if(t.naturalWidth&&!Vu)return n(t.naturalWidth,t.naturalHeight),i;var r=document.body||document.documentElement;return i.onload=function(){n(i.width,i.height),Vu||r.removeChild(i)},dt(e.inheritedAttributes,function(o){var h=t.getAttribute(o);h!==null&&i.setAttribute(o,h)}),i.src=t.src,Vu||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i)),i}function al(t){switch(t){case 2:return yF;case 3:return _F;case 4:return vF;default:return""}}function PF(t){var e=td({},t),n=[];return dt(t,function(i,r){delete e[r],dt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),u=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+u*u),c=(l-f)/f;n.push(c)})}),n.sort(function(i,r){return Math.abs(i)<Math.abs(r)}),n[0]}function ll(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:td({timeStamp:Date.now(),startX:n,startY:i},r)}function MF(t){var e=0,n=0,i=0;return dt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}var IF={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,i;e.inline&&(i={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=i),(this.fulled||!i)&&(i=this.containerData),this.viewerData=Ln({},i)},renderViewer:function(){this.options.inline&&!this.fulled&&ti(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,i=this.options,r=this.list,o=[];r.innerHTML="",dt(this.images,function(h,a){var s=h.src,u=h.alt||AF(s),f=e.getImageURL(h);if(s||f){var l=document.createElement("li"),c=document.createElement("img");dt(i.inheritedAttributes,function(d){var p=h.getAttribute(d);p!==null&&c.setAttribute(d,p)}),i.navbar&&(c.src=s||f),c.alt=u,c.setAttribute("data-original-url",f||s),l.setAttribute("data-index",a),l.setAttribute("data-viewer-action","view"),l.setAttribute("role","button"),i.keyboard&&l.setAttribute("tabindex",0),l.appendChild(c),r.appendChild(l),o.push(l)}}),this.items=o,dt(o,function(h){var a=h.firstElementChild,s,u;Hf(a,"filled",!0),i.loading&&je(h,Ws),Be(a,zn,s=function(l){ht(a,Vr,u),i.loading&&st(h,Ws),e.loadImage(l)},{once:!0}),Be(a,Vr,u=function(){ht(a,zn,s),i.loading&&st(h,Ws)},{once:!0})}),i.transition&&Be(n,ua,function(){je(r,It)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var i=n.nextElementSibling,r=parseInt(window.getComputedStyle(i||n).marginLeft,10),o=n.offsetWidth,h=o+r;ti(this.list,Ln({width:h*this.length-r},kl({translateX:(this.viewerData.width-o)/2-h*e})))}},resetList:function(){var e=this.list;e.innerHTML="",st(e,It),ti(e,kl({translateX:0}))},initImage:function(e){var n=this,i=this.options,r=this.image,o=this.viewerData,h=this.footer.offsetHeight,a=o.width,s=Math.max(o.height-h,h),u=this.imageData||{},f;this.imageInitializing={abort:function(){f.onload=null}},f=sw(r,i,function(l,c){var d=l/c,p=Math.max(0,Math.min(1,i.initialCoverage)),m=a,g=s;n.imageInitializing=!1,s*d>a?g=a/d:m=s*d,p=xt(p)?p:.9,m=Math.min(m*p,l),g=Math.min(g*p,c);var v=(a-m)/2,_=(s-g)/2,b={left:v,top:_,x:v,y:_,width:m,height:g,oldRatio:1,ratio:m/l,aspectRatio:d,naturalWidth:l,naturalHeight:c},y=Ln({},b);i.rotatable&&(b.rotate=u.rotate||0,y.rotate=0),i.scalable&&(b.scaleX=u.scaleX||1,b.scaleY=u.scaleY||1,y.scaleX=1,y.scaleY=1),n.imageData=b,n.initialImageData=y,e&&e()})},renderImage:function(e){var n=this,i=this.image,r=this.imageData;if(ti(i,Ln({width:r.width,height:r.height,marginLeft:r.x,marginTop:r.y},kl(r))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&Ts(i,It)){var o=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){ht(i,Qn,o)}},Be(i,Qn,o,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},RF={bind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;Be(n,so,this.onClick=this.click.bind(this)),Be(n,nv,this.onDragStart=this.dragstart.bind(this)),Be(i,sv,this.onPointerDown=this.pointerdown.bind(this)),Be(r,ov,this.onPointerMove=this.pointermove.bind(this)),Be(r,av,this.onPointerUp=this.pointerup.bind(this)),Be(r,rv,this.onKeyDown=this.keydown.bind(this)),Be(window,lv,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&Be(n,cv,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&Be(i,zf,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;ht(n,so,this.onClick),ht(n,nv,this.onDragStart),ht(i,sv,this.onPointerDown),ht(r,ov,this.onPointerMove),ht(r,av,this.onPointerUp),ht(r,rv,this.onKeyDown),ht(window,lv,this.onResize),e.zoomable&&e.zoomOnWheel&&ht(n,cv,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&ht(i,zf,this.onDblclick)}},FF={click:function(e){var n=this.options,i=this.imageData,r=e.target,o=Ps(r,Zl);switch(!o&&r.localName==="img"&&r.parentElement.localName==="li"&&(r=r.parentElement,o=Ps(r,Zl)),Ys&&e.isTrusted&&r===this.canvas&&clearTimeout(this.clickCanvasTimeout),o){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(Ps(r,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-i.scaleX||-1);break;case"flip-vertical":this.scaleY(-i.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Ys&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,i=this.options,r=this.image,o=this.index,h=this.viewerData;st(r,Qo),i.loading&&st(this.canvas,Ws),r.style.cssText="height:0;"+"margin-left:".concat(h.width/2,"px;")+"margin-top:".concat(h.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){ha(r,bF,i.movable),ha(r,It,i.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,ft(i.viewed)&&Be(n,ua,i.viewed,{once:!0}),Lt(n,ua,{originalImage:e.images[o],index:o,image:r},{cancelable:!1})})})},loadImage:function(e){var n=e.target,i=n.parentNode,r=i.offsetWidth||30,o=i.offsetHeight||50,h=!!Ps(n,"filled");sw(n,this.options,function(a,s){var u=a/s,f=r,l=o;o*u>r?h?f=o*u:l=r/u:h?l=r/u:f=o*u,ti(n,Ln({width:f,height:l},kl({translateX:(r-f)/2,translateY:(o-l)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var i=e.keyCode||e.which||e.charCode;switch(i){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(i){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,i=this.pointers,r=e.buttons,o=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(xt(r)&&r!==1||xt(o)&&o!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?dt(e.changedTouches,function(a){i[a.identifier]=ll(a)}):i[e.pointerId||0]=ll(e);var h=n.movable?Sl:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(i).length>1?h=Uo:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(h=iw),n.transition&&(h===Sl||h===Uo)&&st(this.image,It),this.action=h}},pointermove:function(e){var n=this.pointers,i=this.action;!this.viewed||!i||(e.preventDefault(),e.changedTouches?dt(e.changedTouches,function(r){Ln(n[r.identifier]||{},ll(r,!0))}):Ln(n[e.pointerId||0]||{},ll(e,!0)),this.change(e))},pointerup:function(e){var n=this,i=this.options,r=this.action,o=this.pointers,h;e.changedTouches?dt(e.changedTouches,function(a){h=o[a.identifier],delete o[a.identifier]}):(h=o[e.pointerId||0],delete o[e.pointerId||0]),r&&(e.preventDefault(),i.transition&&(r===Sl||r===Uo)&&je(this.image,It),this.action=!1,Ys&&r!==Uo&&h&&Date.now()-h.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),i.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){Lt(n.image,zf,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,i.backdrop&&i.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){Lt(n.canvas,so,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}dt(this.player.getElementsByTagName("img"),function(n){Be(n,zn,e.loadImage.bind(e),{once:!0}),Lt(n,zn)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,r=1;e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,!0,null,e)}}},LF={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(ft(i.show)&&Be(n,fv,i.show,{once:!0}),Lt(n,fv)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var r=this.viewer;if(st(r,Rr),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("aria-hidden"),i.transition&&!e){var o=this.shown.bind(this);this.transitioning={abort:function(){ht(r,Qn,o),st(r,Bn)}},je(r,It),r.initialOffsetWidth=r.offsetWidth,Be(r,Qn,o,{once:!0}),je(r,Bn)}else je(r,Bn),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,r=this.options;if(r.inline||this.hiding||!(this.isShown||this.showing))return this;if(ft(r.hide)&&Be(i,dv,r.hide,{once:!0}),Lt(i,dv)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var o=this.viewer,h=this.image,a=function(){st(o,Bn),e.hidden()};if(r.transition&&!n){var s=function f(l){l&&l.target===o&&(ht(o,Qn,f),e.hidden())},u=function(){Ts(o,It)?(Be(o,Qn,s),st(o,Bn)):a()};this.transitioning={abort:function(){e.viewed&&Ts(h,It)?ht(h,Qn,u):Ts(o,It)&&ht(o,Qn,s)}},this.viewed&&Ts(h,It)?(Be(h,Qn,u,{once:!0}),this.zoomTo(0,!1,null,null,!0)):u()}else a();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var i=this.element,r=this.options,o=this.title,h=this.canvas,a=this.items[n],s=a.querySelector("img"),u=Ps(s,"originalUrl"),f=s.getAttribute("alt"),l=document.createElement("img");if(dt(r.inheritedAttributes,function(g){var v=s.getAttribute(g);v!==null&&l.setAttribute(g,v)}),l.src=u,l.alt=f,ft(r.view)&&Be(i,gv,r.view,{once:!0}),Lt(i,gv,{originalImage:this.images[n],index:n,image:l})===!1||!this.isShown||this.hiding||this.played)return this;var c=this.items[this.index];c&&(st(c,sl),c.removeAttribute("aria-selected")),je(a,sl),a.setAttribute("aria-selected",!0),r.focus&&a.focus(),this.image=l,this.viewed=!1,this.index=n,this.imageData={},je(l,Qo),r.loading&&je(h,Ws),h.innerHTML="",h.appendChild(l),this.renderList(),o.innerHTML="";var d=function(){var v=e.imageData,_=Array.isArray(r.title)?r.title[1]:r.title;o.innerHTML=EF(ft(_)?_.call(e,l,v):"".concat(f," (").concat(v.naturalWidth,"  ").concat(v.naturalHeight,")"))},p,m;return Be(i,ua,d,{once:!0}),this.viewing={abort:function(){ht(i,ua,d),l.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(l.src="",ht(l,zn,p),e.timeout&&clearTimeout(e.timeout))}},l.complete?this.load():(Be(l,zn,p=function(){ht(l,Vr,m),e.load()},{once:!0}),Be(l,Vr,m=function(){ht(l,zn,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),st(l,Qo),r.loading&&st(e.canvas,Ws)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){st(l,Qo),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,i=this.index+1;return i>n&&(i=e?0:n),this.view(i),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData;return this.moveTo(Ds(e)?e:i.x+Number(e),Ds(n)?n:i.y+Number(n)),this},moveTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.element,h=this.options,a=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&h.movable){var s=a.x,u=a.y,f=!1;if(xt(e)?f=!0:e=s,xt(i)?f=!0:i=u,f){if(ft(h.move)&&Be(o,mv,h.move,{once:!0}),Lt(o,mv,{x:e,y:i,oldX:s,oldY:u,originalEvent:r})===!1)return this;a.x=e,a.y=i,a.left=e,a.top=i,this.moving=!0,this.renderImage(function(){n.moving=!1,ft(h.moved)&&Be(o,vv,h.moved,{once:!0}),Lt(o,vv,{x:e,y:i,oldX:s,oldY:u,originalEvent:r},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,i=this.element,r=this.options,o=this.imageData;if(e=Number(e),xt(e)&&this.viewed&&!this.played&&r.rotatable){var h=o.rotate;if(ft(r.rotate)&&Be(i,_v,r.rotate,{once:!0}),Lt(i,_v,{degree:e,oldDegree:h})===!1)return this;o.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,ft(r.rotated)&&Be(i,yv,r.rotated,{once:!0}),Lt(i,yv,{degree:e,oldDegree:h},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.element,o=this.options,h=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&o.scalable){var a=h.scaleX,s=h.scaleY,u=!1;if(xt(e)?u=!0:e=a,xt(i)?u=!0:i=s,u){if(ft(o.scale)&&Be(r,bv,o.scale,{once:!0}),Lt(r,bv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s})===!1)return this;h.scaleX=e,h.scaleY=i,this.scaling=!0,this.renderImage(function(){n.scaling=!1,ft(o.scaled)&&Be(r,wv,o.scaled,{once:!0}),Lt(r,wv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(o.width*e/o.naturalWidth,n,i,r),this},zoomTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,s=this.options,u=this.pointers,f=this.imageData,l=f.x,c=f.y,d=f.width,p=f.height,m=f.naturalWidth,g=f.naturalHeight;if(e=Math.max(0,e),xt(e)&&this.viewed&&!this.played&&(h||s.zoomable)){if(!h){var v=Math.max(.01,s.minZoomRatio),_=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),_)}if(o)switch(o.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var b=m*e,y=g*e,w=b-d,C=y-p,T=f.ratio;if(ft(s.zoom)&&Be(a,Cv,s.zoom,{once:!0}),Lt(a,Cv,{ratio:e,oldRatio:T,originalEvent:o})===!1)return this;if(this.zooming=!0,o){var x=DF(this.viewer),A=u&&Object.keys(u).length>0?MF(u):{pageX:o.pageX,pageY:o.pageY};f.x-=w*((A.pageX-x.left-l)/d),f.y-=C*((A.pageY-x.top-c)/p)}else As(r)&&xt(r.x)&&xt(r.y)?(f.x-=w*((r.x-l)/d),f.y-=C*((r.y-c)/p)):(f.x-=w/2,f.y-=C/2);f.left=f.x,f.top=f.y,f.width=b,f.height=y,f.oldRatio=T,f.ratio=e,this.renderImage(function(){n.zooming=!1,ft(s.zoomed)&&Be(a,Sv,s.zoomed,{once:!0}),Lt(a,Sv,{ratio:e,oldRatio:T,originalEvent:o},{cancelable:!1})}),i&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var i=this.element,r=this.options;if(ft(r.play)&&Be(i,Tv,r.play,{once:!0}),Lt(i,Tv)===!1)return this;var o=this.player,h=this.loadImage.bind(this),a=[],s=0,u=0;if(this.played=!0,this.onLoadWhenPlay=h,n&&this.requestFullscreen(n),je(o,ms),dt(this.items,function(c,d){var p=c.querySelector("img"),m=document.createElement("img");m.src=Ps(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,s+=1,je(m,Tl),ha(m,It,r.transition),Ts(c,sl)&&(je(m,Bn),u=d),a.push(m),Be(m,zn,h,{once:!0}),o.appendChild(m)}),xt(r.interval)&&r.interval>0){var f=function c(){clearTimeout(e.playing.timeout),st(a[u],Bn),u-=1,u=u>=0?u:s-1,je(a[u],Bn),e.playing.timeout=setTimeout(c,r.interval)},l=function c(){clearTimeout(e.playing.timeout),st(a[u],Bn),u+=1,u=u<s?u:0,je(a[u],Bn),e.playing.timeout=setTimeout(c,r.interval)};s>1&&(this.playing={prev:f,next:l,timeout:setTimeout(l,r.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,i=this.options;if(ft(i.stop)&&Be(n,kv,i.stop,{once:!0}),Lt(n,kv)===!1)return this;var r=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,dt(r.getElementsByTagName("img"),function(o){ht(o,zn,e.onLoadWhenPlay)}),st(r,ms),r.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),je(this.button,ev),n.transition&&(st(o,It),this.viewed&&st(r,It)),je(i,Wf),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("style"),ti(i,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Ln({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){je(r,It),je(o,It)},0)})}),this)},exit:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),st(this.button,ev),n.transition&&(st(o,It),this.viewed&&st(r,It)),n.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),st(i,Wf),ti(i,{zIndex:n.zIndexInline}),this.viewerData=Ln({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){je(r,It),je(o,It)},0)})}),this)},tooltip:function(){var e=this,n=this.options,i=this.tooltipBox,r=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(i.textContent="".concat(Math.round(r.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&Lt(i,Qn),je(i,ms),je(i,Tl),je(i,It),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,je(i,Bn)):(je(i,ms),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(Be(i,Qn,function(){st(i,ms),st(i,Tl),st(i,It),i.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),st(i,Bn),e.fading=!0):(st(i,ms),i.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Ln({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,i=this.options,r=this.isImg;if(r&&!n.parentNode)return this.destroy();var o=[];if(dt(r?[n]:n.querySelectorAll("img"),function(u){ft(i.filter)?i.filter.call(e,u)&&o.push(u):e.getImageURL(u)&&o.push(u)}),!o.length)return this;if(this.images=o,this.length=o.length,this.ready){var h=[];if(dt(this.items,function(u,f){var l=u.querySelector("img"),c=o[f];c&&l?(c.src!==l.src||c.alt!==l.alt)&&h.push(f):h.push(f)}),ti(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=h.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var s=this.items[this.index];je(s,sl),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[$e]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||ht(e,so,this.onStart),e[$e]=void 0,this):this}},NF={getImageURL:function(e){var n=this.options.url;return fa(n)?n=e.getAttribute(n):ft(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),Be(document,iv,this.onFocusin=function(n){var i=e.viewer,r=n.target;if(!(r===document||r===i||i.contains(r))){for(;r;){if(r.getAttribute("tabindex")!==null||r.getAttribute("aria-modal")==="true")return;r=r.parentElement}i.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(ht(document,iv,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;je(e,tv),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;st(e,tv),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,i=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(i.focus(),this.enforceFocus()),ft(n.shown)&&Be(e,hv,n.shown,{once:!0}),Lt(e,hv)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,i=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),je(i,Rr),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),i.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(ft(n.hidden)&&Be(e,pv,n.hidden,{once:!0}),Lt(e,pv,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var i=n.documentElement;i.requestFullscreen?As(e)?i.requestFullscreen(e):i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,i=this.pointers,r=i[Object.keys(i)[0]];if(r){var o=r.endX-r.startX,h=r.endY-r.startY;switch(this.action){case Sl:(o!==0||h!==0)&&(this.pointerMoved=!0,this.move(o,h,e));break;case Uo:this.zoom(PF(i),!1,null,e);break;case iw:{this.action="switched";var a=Math.abs(o);a>1&&a>Math.abs(h)&&(this.pointers={},o>1?this.prev(n.loop):o<-1&&this.next(n.loop));break}}dt(i,function(s){s.startX=s.endX,s.startY=s.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},jF=Gi.Viewer,BF=function(t){return function(){return t+=1,t}}(-1),ow=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(uF(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Ln({},Qm,As(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=BF(),this.init()}return fF(t,[{key:"init",value:function(){var n=this,i=this.element,r=this.options;if(!i[$e]){i[$e]=this,r.focus&&!r.keyboard&&(r.focus=!1);var o=i.localName==="img",h=[];if(dt(o?[i]:i.querySelectorAll("img"),function(u){ft(r.filter)?r.filter.call(n,u)&&h.push(u):n.getImageURL(u)&&h.push(u)}),this.isImg=o,this.length=h.length,this.images=h,this.initBody(),Ds(document.createElement($e).style.transition)&&(r.transition=!1),r.inline){var a=0,s=function(){if(a+=1,a===n.length){var f;n.initializing=!1,n.delaying={abort:function(){clearTimeout(f)}},f=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){dt(h,function(f){f.complete||(ht(f,zn,s),ht(f,Vr,s))})}},dt(h,function(u){if(u.complete)s();else{var f,l;Be(u,zn,f=function(){ht(u,Vr,l),s()},{once:!0}),Be(u,Vr,l=function(){ht(u,zn,f),s()},{once:!0})}})}else Be(i,so,this.onStart=function(u){var f=u.target;f.localName==="img"&&(!ft(r.filter)||r.filter.call(n,f))&&n.view(n.images.indexOf(f))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,i=this.options,r=n.parentNode,o=document.createElement("div");o.innerHTML=pF;var h=o.querySelector(".".concat($e,"-container")),a=h.querySelector(".".concat($e,"-title")),s=h.querySelector(".".concat($e,"-toolbar")),u=h.querySelector(".".concat($e,"-navbar")),f=h.querySelector(".".concat($e,"-button")),l=h.querySelector(".".concat($e,"-canvas"));if(this.parent=r,this.viewer=h,this.title=a,this.toolbar=s,this.navbar=u,this.button=f,this.canvas=l,this.footer=h.querySelector(".".concat($e,"-footer")),this.tooltipBox=h.querySelector(".".concat($e,"-tooltip")),this.player=h.querySelector(".".concat($e,"-player")),this.list=h.querySelector(".".concat($e,"-list")),h.id="".concat($e).concat(this.id),a.id="".concat($e,"Title").concat(this.id),je(a,i.title?al(Array.isArray(i.title)?i.title[0]:i.title):Rr),je(u,i.navbar?al(i.navbar):Rr),ha(f,Rr,!i.button),i.keyboard&&f.setAttribute("tabindex",0),i.backdrop&&(je(h,"".concat($e,"-backdrop")),!i.inline&&i.backdrop!=="static"&&Hf(l,Zl,"hide")),fa(i.className)&&i.className&&i.className.split(id).forEach(function(b){je(h,b)}),i.toolbar){var c=document.createElement("ul"),d=As(i.toolbar),p=ol.slice(0,3),m=ol.slice(7,9),g=ol.slice(9);d||je(s,al(i.toolbar)),dt(d?i.toolbar:ol,function(b,y){var w=d&&As(b),C=d?rd(y):b,T=w&&!Ds(b.show)?b.show:b;if(!(!T||!i.zoomable&&p.indexOf(C)!==-1||!i.rotatable&&m.indexOf(C)!==-1||!i.scalable&&g.indexOf(C)!==-1)){var x=w&&!Ds(b.size)?b.size:b,A=w&&!Ds(b.click)?b.click:b,I=document.createElement("li");i.keyboard&&I.setAttribute("tabindex",0),I.setAttribute("role","button"),je(I,"".concat($e,"-").concat(C)),ft(A)||Hf(I,Zl,C),xt(T)&&je(I,al(T)),["small","large"].indexOf(x)!==-1?je(I,"".concat($e,"-").concat(x)):C==="play"&&je(I,"".concat($e,"-large")),ft(A)&&Be(I,so,A),c.appendChild(I)}}),s.appendChild(c)}else je(s,Rr);if(!i.rotatable){var v=s.querySelectorAll('li[class*="rotate"]');je(v,Qo),dt(v,function(b){s.appendChild(b)})}if(i.inline)je(f,mF),ti(h,{zIndex:i.zIndexInline}),window.getComputedStyle(r).position==="static"&&ti(r,{position:"relative"}),r.insertBefore(h,n.nextSibling);else{je(f,gF),je(h,Wf),je(h,Tl),je(h,Rr),ti(h,{zIndex:i.zIndex});var _=i.container;fa(_)&&(_=n.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(h)}if(i.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,ft(i.ready)&&Be(n,uv,i.ready,{once:!0}),Lt(n,uv)===!1){this.ready=!1;return}this.ready&&i.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=jF,t}},{key:"setDefaults",value:function(n){Ln(Qm,As(n)&&n)}}]),t}();Ln(ow.prototype,IF,RF,FF,LF,NF);function Ov(t,e,n){const i=t.slice();return i[8]=e[n],i}function Ev(t){var T;let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w;a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let C=((T=t[2].thumbnails)==null?void 0:T.length)&&xv(t);return{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="",o=V(),h=E("button"),fe(a.$$.fragment),s=V(),u=E("div"),f=E("div"),l=E("div"),c=E("img"),p=V(),C&&C.c(),m=V(),g=E("div"),v=E("button"),v.textContent="",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),Ye(c.src,d=t[1])||S(c,"src",d),S(c,"alt",""),S(c,"class","object-contain max-h-full max-w-full"),S(l,"class","h-[50vh] flex justify-center items-center"),S(f,"class","flex-grow overflow-y-auto"),S(u,"class","flex flex-col flex-grow overflow-hidden"),S(v,"class","btn secondary-btn"),S(g,"class","mt-3 flex justify-center"),S(n,"class","flex flex-col h-full max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(x,A){U(x,e,A),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ce(a,h,null),k(n,s),k(n,u),k(u,f),k(f,l),k(l,c),k(f,p),C&&C.m(f,null),k(n,m),k(n,g),k(g,v),b=!0,y||(w=[Z(h,"click",dn),Z(v,"click",dn),Z(e,"introstart",t[3]),Z(e,"outroend",t[4])],y=!0)},p(x,A){var I;(!b||A&2&&!Ye(c.src,d=x[1]))&&S(c,"src",d),(I=x[2].thumbnails)!=null&&I.length?C?C.p(x,A):(C=xv(x),C.c(),C.m(f,null)):C&&(C.d(1),C=null)},i(x){b||(M(a.$$.fragment,x),x&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(x){Y(a.$$.fragment,x),x&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(x){x&&j(e),ue(a),C&&C.d(),x&&_&&_.end(),y=!1,Ue(w)}}}function xv(t){let e,n,i=Fe(t[2].thumbnails),r=[];for(let o=0;o<i.length;o+=1)r[o]=Dv(Ov(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 w-full"),S(e,"class","mt-3")},m(o,h){U(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,h){if(h&6){i=Fe(o[2].thumbnails);let a;for(a=0;a<i.length;a+=1){const s=Ov(o,i,a);r[a]?r[a].p(s,h):(r[a]=Dv(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(o){o&&j(e),Pt(r,o)}}}function Dv(t){let e,n,i,r,o,h;function a(){return t[5](t[8])}return{c(){e=E("button"),n=E("img"),r=V(),Ye(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt",""),S(n,"class","rounded-lg object-contain h-full"),S(e,"type","button")},m(s,u){U(s,e,u),k(e,n),k(e,r),o||(h=Z(e,"click",a),o=!0)},p(s,u){t=s,u&4&&!Ye(n.src,i=t[8].url)&&S(n,"src",i)},d(s){s&&j(e),o=!1,h()}}}function UF(t){let e,n,i=t[0]&&Ev(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=Ev(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function YF(t,e,n){let i;Me(t,Le,u=>n(2,i=u));let{isOpen:r}=e,o=i.thumbnails[0].url;Xt(),xi(async()=>{});function h(u){Si.call(this,t,u)}function a(u){Si.call(this,t,u)}const s=u=>n(1,o=u.url);return t.$$set=u=>{"isOpen"in u&&n(0,r=u.isOpen)},[r,o,i,h,a,s]}class WF extends qe{constructor(e){super(),Ge(this,e,YF,UF,Ve,{isOpen:0})}}function Av(t,e,n){const i=t.slice();return i[20]=e[n],i}function Pv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Mv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Iv(t){let e,n=t[3].product.optionNames[0]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","color"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[0]+"")&&He(i,n)},d(r){r&&j(e)}}}function Rv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&j(e)}}}function Fv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[1]&&Lv(t),s=Fe(t[2].optionValue2),u=[];for(let f=0;f<s.length;f+=1)u[f]=Nv(Pv(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="";for(let f=0;f<u.length;f+=1)u[f].c();r.__value="",Re(r,r.__value),S(i,"id","size"),S(i,"class","select w-full"),t[1].optionValue2===void 0&&zt(()=>t[11].call(i))},m(f,l){U(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(i,null);wi(i,t[1].optionValue2,!0),o||(h=[Z(i,"change",t[11]),Z(i,"change",t[12])],o=!0)},p(f,l){if(f[3].product.optionNames[1]?a?a.p(f,l):(a=Lv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Fe(f[2].optionValue2);let c;for(c=0;c<s.length;c+=1){const d=Pv(f,s,c);u[c]?u[c].p(d,l):(u[c]=Nv(d),u[c].c(),u[c].m(i,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}l&6&&wi(i,f[1].optionValue2)},d(f){f&&j(e),a&&a.d(),Pt(u,f),o=!1,Ue(h)}}}function Lv(t){let e,n=t[3].product.optionNames[1]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","size"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[1]+"")&&He(i,n)},d(r){r&&j(e)}}}function Nv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&j(e)}}}function jv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[2]&&Bv(t),s=Fe(t[2].optionValue3),u=[];for(let f=0;f<s.length;f+=1)u[f]=Uv(Av(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="";for(let f=0;f<u.length;f+=1)u[f].c();r.__value="",Re(r,r.__value),S(i,"id","option3"),S(i,"class","select w-full"),t[1].optionValue3===void 0&&zt(()=>t[13].call(i))},m(f,l){U(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(i,null);wi(i,t[1].optionValue3,!0),o||(h=[Z(i,"change",t[13]),Z(i,"change",t[14])],o=!0)},p(f,l){if(f[3].product.optionNames[2]?a?a.p(f,l):(a=Bv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Fe(f[2].optionValue3);let c;for(c=0;c<s.length;c+=1){const d=Av(f,s,c);u[c]?u[c].p(d,l):(u[c]=Uv(d),u[c].c(),u[c].m(i,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}l&6&&wi(i,f[1].optionValue3)},d(f){f&&j(e),a&&a.d(),Pt(u,f),o=!1,Ue(h)}}}function Bv(t){let e,n=t[3].product.optionNames[2]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","option3"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[2]+"")&&He(i,n)},d(r){r&&j(e)}}}function Uv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Re(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Re(e,e.__value))},d(o){o&&j(e)}}}function Yv(t){let e,n,i,r;return{c(){e=E("div"),n=E("button"),n.textContent="",S(n,"type","button"),S(n,"class","btn dark-btn w-full")},m(o,h){U(o,e,h),k(e,n),i||(r=Z(n,"click",t[16]),i=!0)},p:ge,d(o){o&&j(e),i=!1,r()}}}function zF(t){var w;let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m=t[3].product.optionNames[0]&&Iv(t),g=Fe(t[2].optionValue1),v=[];for(let C=0;C<g.length;C+=1)v[C]=Rv(Mv(t,g,C));let _=t[1].optionValue1&&Fv(t),b=t[1].optionValue2&&t[2].optionValue3.length>0&&jv(t),y=!((w=t[4])!=null&&w.length)&&Yv(t);return{c(){e=E("div"),n=E("div"),i=E("div"),m&&m.c(),r=V(),o=E("select"),h=E("option"),h.textContent="";for(let C=0;C<v.length;C+=1)v[C].c();a=V(),_&&_.c(),s=V(),b&&b.c(),u=V(),f=E("div"),l=E("button"),l.textContent="",c=V(),y&&y.c(),h.__value="",Re(h,h.__value),S(o,"id","color"),S(o,"class","select w-full"),t[1].optionValue1===void 0&&zt(()=>t[9].call(o)),S(l,"type","button"),S(l,"class","btn primary-btn w-full"),S(n,"class","flex flex-col absolute top-1/2 left-1/2 transform -translate-xy-50 bg-white border w-full max-h-[400px] max-w-[400px] drop-shadow-lg h-full rounded-lg p-5 gap-3"),S(e,"class","flex absolute h-full w-full max-h-[100%] max-w-[100%] grow flex-col bg-white rounded bg-opacity-95 z-50 border")},m(C,T){U(C,e,T),k(e,n),k(n,i),m&&m.m(i,null),k(i,r),k(i,o),k(o,h);for(let x=0;x<v.length;x+=1)v[x]&&v[x].m(o,null);wi(o,t[1].optionValue1,!0),k(n,a),_&&_.m(n,null),k(n,s),b&&b.m(n,null),k(n,u),k(n,f),k(f,l),k(n,c),y&&y.m(n,null),d||(p=[Z(o,"change",t[9]),Z(o,"change",t[10]),Z(l,"click",t[15])],d=!0)},p(C,[T]){var x;if(C[3].product.optionNames[0]?m?m.p(C,T):(m=Iv(C),m.c(),m.m(i,r)):m&&(m.d(1),m=null),T&4){g=Fe(C[2].optionValue1);let A;for(A=0;A<g.length;A+=1){const I=Mv(C,g,A);v[A]?v[A].p(I,T):(v[A]=Rv(I),v[A].c(),v[A].m(o,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=g.length}T&6&&wi(o,C[1].optionValue1),C[1].optionValue1?_?_.p(C,T):(_=Fv(C),_.c(),_.m(n,s)):_&&(_.d(1),_=null),C[1].optionValue2&&C[2].optionValue3.length>0?b?b.p(C,T):(b=jv(C),b.c(),b.m(n,u)):b&&(b.d(1),b=null),(x=C[4])!=null&&x.length?y&&(y.d(1),y=null):y?y.p(C,T):(y=Yv(C),y.c(),y.m(n,null))},i:ge,o:ge,d(C){C&&j(e),m&&m.d(),Pt(v,C),_&&_.d(),b&&b.d(),y&&y.d(),d=!1,Ue(p)}}}function HF(t,e,n){let i,r,o,h;Me(t,Le,T=>n(3,r=T)),Me(t,Yl,T=>n(18,o=T)),Me(t,di,T=>n(4,h=T));let{publishId:a}=e,{loadPublish:s}=e,{runEditor:u}=e;const f=o.linkOptions.reduce((T,x,A)=>{if(x.editorOptions){const I={...x.editorOptions,productNo:x.productNo,productOption:x.productOptions,publish:x.publish};T=[...T,I]}return T},[]);let l={optionValue1:[],optionValue2:[],optionValue3:[]},c={optionValue1:"",optionValue2:"",optionValue3:""};function d(T,x){const A=x.target.value;if(n(1,c[T]=A,c),T!=="optionValue3")for(let I=parseInt(T.slice(-1))+1;I<=3;I++)n(1,c[`optionValue${I}`]="",c);n(1,c={...c})}async function p(){n(7,a=i.publish),await s(),_e(Le,r.currentOption=i,r)}function m(){c.optionValue1=Yo(this),n(1,c),n(2,l),n(1,c)}const g=T=>d("optionValue1",T);function v(){c.optionValue2=Yo(this),n(1,c),n(2,l),n(1,c)}const _=T=>d("optionValue2",T);function b(){c.optionValue3=Yo(this),n(1,c),n(2,l),n(1,c)}const y=T=>d("optionValue3",T),w=()=>p(),C=()=>n(0,u=!1);return t.$$set=T=>{"publishId"in T&&n(7,a=T.publishId),"loadPublish"in T&&n(8,s=T.loadPublish),"runEditor"in T&&n(0,u=T.runEditor)},t.$$.update=()=>{t.$$.dirty&2&&(c.optionValue1?n(2,l.optionValue2=[...new Set(f.filter(T=>T.optionValue1===c.optionValue1).map(T=>T.optionValue2))],l):n(2,l.optionValue2=[],l)),t.$$.dirty&2&&(c.optionValue1&&c.optionValue2?n(2,l.optionValue3=[...new Set(f.filter(T=>T.optionValue1===c.optionValue1&&T.optionValue2===c.optionValue2).map(T=>T.optionValue3).filter(Boolean))],l):n(2,l.optionValue3=[],l)),t.$$.dirty&2&&(i=f.find(T=>T.optionValue1===c.optionValue1&&T.optionValue2===c.optionValue2&&(T.optionValue3===c.optionValue3||!T.optionValue3)))},n(2,l.optionValue1=[...new Set(f.map(T=>T.optionValue1))],l),[u,c,l,r,h,d,p,a,s,m,g,v,_,b,y,w,C]}class VF extends qe{constructor(e){super(),Ge(this,e,HF,zF,Ve,{publishId:7,loadPublish:8,runEditor:0})}}function XF(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w,C;return n=new Ce({props:{icon:"file-icons:arttext4",height:"20"}}),a=new Ce({props:{icon:"ph:upload-bold",height:"20"}}),c=new Ce({props:{icon:"mingcute:text-2-fill",height:"20"}}),v=new Ce({props:{icon:"ic:outline-draw",height:"20"}}),{c(){e=E("button"),fe(n.$$.fragment),i=V(),r=E("span"),r.textContent="",o=V(),h=E("button"),fe(a.$$.fragment),s=V(),u=E("span"),u.textContent="",f=V(),l=E("button"),fe(c.$$.fragment),d=V(),p=E("span"),p.textContent="",m=V(),g=E("button"),fe(v.$$.fragment),_=V(),b=E("span"),b.textContent="/",S(r,"class","whitespace-nowrap text-2xs hidden md:block"),S(e,"type","button"),S(e,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(u,"class","whitespace-nowrap text-2xs hidden md:block"),S(h,"type","button"),S(h,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(p,"class","whitespace-nowrap text-2xs hidden md:block"),S(l,"type","button"),S(l,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(b,"class","whitespace-nowrap text-2xs hidden md:block"),S(g,"type","button"),S(g,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded")},m(T,x){U(T,e,x),ce(n,e,null),k(e,i),k(e,r),U(T,o,x),U(T,h,x),ce(a,h,null),k(h,s),k(h,u),U(T,f,x),U(T,l,x),ce(c,l,null),k(l,d),k(l,p),U(T,m,x),U(T,g,x),ce(v,g,null),k(g,_),k(g,b),y=!0,w||(C=[Z(e,"click",t[1]),Z(h,"click",t[2]),Z(l,"click",t[3]),Z(g,"click",t[4])],w=!0)},p:ge,i(T){y||(M(n.$$.fragment,T),M(a.$$.fragment,T),M(c.$$.fragment,T),M(v.$$.fragment,T),y=!0)},o(T){Y(n.$$.fragment,T),Y(a.$$.fragment,T),Y(c.$$.fragment,T),Y(v.$$.fragment,T),y=!1},d(T){T&&(j(e),j(o),j(h),j(f),j(l),j(m),j(g)),ue(n),ue(a),ue(c),ue(v),w=!1,Ue(C)}}}function $F(t,e,n){let i;return Me(t,Yt,s=>n(0,i=s)),[i,()=>_e(Yt,i="clipart",i),()=>_e(Yt,i="upload",i),()=>_e(Yt,i="text",i),()=>_e(Yt,i="draw",i)]}class GF extends qe{constructor(e){super(),Ge(this,e,$F,XF,Ve,{})}}function Wv(t){let e,n,i,r,o,h,a,s,u,f=t[0].product.productName+"",l,c,d,p,m,g,v,_,b,y,w,C=t[0].currentOption&&zv(t);return{c(){e=E("div"),n=E("h2"),n.textContent="",i=V(),r=E("div"),o=E("img"),a=V(),s=E("div"),u=E("p"),l=we(f),c=V(),C&&C.c(),d=V(),p=E("div"),m=E("button"),m.textContent="-",g=V(),v=E("input"),_=V(),b=E("button"),b.textContent="+",S(n,"class","text-xs border-b p-3"),Ye(o.src,h=t[0].product.images[0].url)||S(o,"src",h),S(o,"alt","thumbnail"),S(o,"class","max-h-12 max-w-12 object-contain"),S(u,"class","text-xs grow"),S(s,"class","flex flex-col"),S(m,"type","button"),S(m,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(v,"type","text"),S(v,"class","border w-12 input-sm rounded-none"),S(b,"type","button"),S(b,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(p,"class","flex"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(T,x){U(T,e,x),k(e,n),k(e,i),k(e,r),k(r,o),k(r,a),k(r,s),k(s,u),k(u,l),k(s,c),C&&C.m(s,null),k(r,d),k(r,p),k(p,m),k(p,g),k(p,v),Re(v,t[0].count),k(p,_),k(p,b),y||(w=[Z(m,"click",t[3]),Z(v,"input",t[4]),Z(b,"click",t[5])],y=!0)},p(T,x){x&1&&!Ye(o.src,h=T[0].product.images[0].url)&&S(o,"src",h),x&1&&f!==(f=T[0].product.productName+"")&&He(l,f),T[0].currentOption?C?C.p(T,x):(C=zv(T),C.c(),C.m(s,null)):C&&(C.d(1),C=null),x&1&&v.value!==T[0].count&&Re(v,T[0].count)},d(T){T&&j(e),C&&C.d(),y=!1,Ue(w)}}}function zv(t){let e,n,i,r=t[0].currentOption.optionValue1&&Hv(t),o=t[0].currentOption.optionValue2&&Vv(t),h=t[0].currentOption.optionValue3&&Xv(t);return{c(){e=E("p"),r&&r.c(),n=V(),o&&o.c(),i=V(),h&&h.c(),S(e,"class","text-xs grow mt-1 text-gray-500")},m(a,s){U(a,e,s),r&&r.m(e,null),k(e,n),o&&o.m(e,null),k(e,i),h&&h.m(e,null)},p(a,s){a[0].currentOption.optionValue1?r?r.p(a,s):(r=Hv(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),a[0].currentOption.optionValue2?o?o.p(a,s):(o=Vv(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null),a[0].currentOption.optionValue3?h?h.p(a,s):(h=Xv(a),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(a){a&&j(e),r&&r.d(),o&&o.d(),h&&h.d()}}}function Hv(t){let e=t[0].currentOption.optionValue1+"",n;return{c(){n=we(e)},m(i,r){U(i,n,r)},p(i,r){r&1&&e!==(e=i[0].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&j(n)}}}function Vv(t){let e,n=t[0].currentOption.optionValue2+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(j(e),j(i))}}}function Xv(t){let e,n=t[0].currentOption.optionValue3+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(j(e),j(i))}}}function qF(t){let e,n=t[0].product&&Wv(t);return{c(){n&&n.c(),e=Je()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0].product?n?n.p(i,r):(n=Wv(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&j(e),n&&n.d(i)}}}function KF(t,e,n){let i;Me(t,Le,u=>n(0,i=u));function r(){_e(Le,i.count++,i)}function o(){i.count>1&&_e(Le,i.count--,i)}const h=()=>o();function a(){i.count=this.value,Le.set(i)}return[i,r,o,h,a,()=>r()]}class JF extends qe{constructor(e){super(),Ge(this,e,KF,qF,Ve,{})}}function ZF(t,{from:e,to:n},i={}){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform,[h,a]=r.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*h/n.width-(n.left+h),u=e.top+e.height*a/n.height-(n.top+a),{delay:f=0,duration:l=d=>Math.sqrt(d)*120,easing:c=hh}=i;return{delay:f,duration:Hn(l)?l(Math.sqrt(s*s+u*u)):l,easing:c,css:(d,p)=>{const m=p*s,g=p*u,v=d+p*e.width/n.width,_=d+p*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${_});`}}}function $v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ql(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$v(Object(n),!0).forEach(function(i){ao(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$v(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ea(t){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(t)}function ao(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QF(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function eL(t,e){if(t==null)return{};var n=QF(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function tL(t,e){return iL(t)||sL(t,e)||sd(t,e)||aL()}function Xn(t){return nL(t)||rL(t)||sd(t)||oL()}function nL(t){if(Array.isArray(t))return Vf(t)}function iL(t){if(Array.isArray(t))return t}function rL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,o=!1,h,a;try{for(n=n.call(t);!(r=(h=n.next()).done)&&(i.push(h.value),!(e&&i.length===e));r=!0);}catch(s){o=!0,a=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw a}}return i}}function sd(t,e){if(t){if(typeof t=="string")return Vf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vf(t,e)}}function Vf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function oL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ia(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=sd(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,h=!1,a;return{s:function(){n=n.call(t)},n:function(){var s=n.next();return o=s.done,s},e:function(s){h=!0,a=s},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(h)throw a}}}}var lL="finalize",cL="consider";function lo(t,e,n){t.dispatchEvent(new CustomEvent(lL,{detail:{items:e,info:n}}))}function wr(t,e,n){t.dispatchEvent(new CustomEvent(cL,{detail:{items:e,info:n}}))}var Mc="draggedEntered",Ra="draggedLeft",Ic="draggedOverIndex",od="draggedLeftDocument",ec={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function uL(t,e,n){t.dispatchEvent(new CustomEvent(Mc,{detail:{indexObj:e,draggedEl:n}}))}function fL(t,e,n){t.dispatchEvent(new CustomEvent(Ra,{detail:{draggedEl:e,type:ec.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function hL(t,e){t.dispatchEvent(new CustomEvent(Ra,{detail:{draggedEl:e,type:ec.OUTSIDE_OF_ANY}}))}function dL(t,e,n){t.dispatchEvent(new CustomEvent(Ic,{detail:{indexObj:e,draggedEl:n}}))}function pL(t){window.dispatchEvent(new CustomEvent(od,{detail:{draggedEl:t}}))}var bn={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Mc,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ic,DRAGGED_LEFT:Ra,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},xn={POINTER:"pointer",KEYBOARD:"keyboard"},Rc="isDndShadowItem",ad="data-is-dnd-shadow-item-internal",gL="data-is-dnd-shadow-item-hint",mL="id:dnd-shadow-placeholder-0000",vL="dnd-action-dragged-el",tn="id",Xf=0;function aw(){Xf++}function lw(){if(Xf===0)throw new Error("Bug! trying to decrement when there are no dropzones");Xf--}var ld=typeof window>"u";function $f(t){var e,n=t.getBoundingClientRect(),i=getComputedStyle(t),r=i.transform;if(r){var o,h,a,s;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),o=+e[0],h=+e[5],a=+e[12],s=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),o=+e[0],h=+e[3],a=+e[4],s=+e[5];else return n;var u=i.transformOrigin,f=n.x-a-(1-o)*parseFloat(u),l=n.y-s-(1-h)*parseFloat(u.slice(u.indexOf(" ")+1)),c=o?n.width/o:t.offsetWidth,d=h?n.height/h:t.offsetHeight;return{x:f,y:l,width:c,height:d,top:l,right:f+c,bottom:l+d,left:f}}else return n}function cw(t){var e=$f(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function uw(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function fw(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function _L(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Fc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function da(t){return fw(uw(t))}function Gv(t,e){var n=da(t),i=cw(e);return Fc(n,i)}function yL(t,e){var n=da(t),i=da(e);return _L(n,i)}function bL(t){var e=uw(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var zs;function cd(){zs=new Map}cd();function wL(t){var e=Array.from(t.children).findIndex(function(n){return n.getAttribute(ad)});if(e>=0)return zs.has(t)||zs.set(t,new Map),zs.get(t).set(e,cw(t.children[e])),e}function CL(t,e){if(!Gv(t,e))return null;var n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};for(var i=wL(e),r=0;r<n.length;r++)if(Gv(t,n[r])){var o=zs.has(e)&&zs.get(e).get(r);return o&&!Fc(da(t),o)?{index:i,isProximityBased:!1}:{index:r,isProximityBased:!1}}for(var h=Number.MAX_VALUE,a=void 0,s=0;s<n.length;s++){var u=yL(t,n[s]);u<h&&(h=u,a=s)}return{index:a,isProximityBased:!0}}function cl(t){return JSON.stringify(t,null,2)}function tc(t){if(!t)throw new Error("cannot get depth of a falsy node");return hw(t,0)}function hw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.parentElement?hw(t.parentElement,e+1):e-1}function SL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function TL(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var kL=200,qv=10,Gf;function OL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kL,i=arguments.length>3?arguments[3]:void 0,r,o,h=!1,a,s=Array.from(e).sort(function(f,l){return tc(l)-tc(f)});function u(){var f=da(t),l=i.multiScrollIfNeeded();if(!l&&a&&Math.abs(a.x-f.x)<qv&&Math.abs(a.y-f.y)<qv){Gf=window.setTimeout(u,n);return}if(bL(t)){pL(t);return}a=f;var c=!1,d=Ia(s),p;try{for(d.s();!(p=d.n()).done;){var m=p.value;l&&cd();var g=CL(t,m);if(g!==null){var v=g.index;c=!0,m!==r?(r&&fL(r,t,m),uL(m,g,t),r=m):v!==o&&(dL(m,g,t),o=v);break}}}catch(_){d.e(_)}finally{d.f()}!c&&h&&r?(hL(r,t),r=void 0,o=void 0,h=!1):h=!0,Gf=window.setTimeout(u,n)}u()}function EL(){clearTimeout(Gf),cd()}var Fo=30;function xL(){var t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(o){var h=t,a=h.directionObj,s=h.stepPx;a&&(o.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(function(){return n(o)}))}function i(o){return Fo-o}function r(o,h){if(!h)return!1;var a=DL(o,h);if(a===null)return e(),!1;var s=!!t.directionObj,u=!1,f=!1;return h.scrollHeight>h.clientHeight&&(a.bottom<Fo?(u=!0,t.directionObj={x:0,y:1},t.stepPx=i(a.bottom)):a.top<Fo&&(u=!0,t.directionObj={x:0,y:-1},t.stepPx=i(a.top)),!s&&u)||h.scrollWidth>h.clientWidth&&(a.right<Fo?(f=!0,t.directionObj={x:1,y:0},t.stepPx=i(a.right)):a.left<Fo&&(f=!0,t.directionObj={x:-1,y:0},t.stepPx=i(a.left)),!s&&f)?(n(h),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function DL(t,e){var n=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Fc(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:n.right-t.x}:null}function AL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=ML(t),i=Array.from(n).sort(function(a,s){return tc(s)-tc(a)}),r=xL(),o=r.scrollIfNeeded;function h(){var a=e();if(!a||!i)return!1;for(var s=i.filter(function(l){return Fc(a,l.getBoundingClientRect())||l===document.scrollingElement}),u=0;u<s.length;u++){var f=o(a,s[u]);if(f)return!0}return!1}return{multiScrollIfNeeded:n.size>0?h:function(){return!1}}}function PL(t){if(!t)return[];for(var e=[],n=t;n;){var i=window.getComputedStyle(n),r=i.overflow;r.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&e.push(n),n=n.parentElement}return e}function ML(t){var e=new Set,n=Ia(t),i;try{for(n.s();!(i=n.n()).done;){var r=i.value;PL(r).forEach(function(o){return e.add(o)})}}catch(o){n.e(o)}finally{n.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function IL(t){var e=t.cloneNode(!0),n=[],i=t.tagName==="SELECT",r=i?[t]:Xn(t.querySelectorAll("select")),o=Ia(r),h;try{for(o.s();!(h=o.n()).done;){var a=h.value;n.push(a.value)}}catch(b){o.e(b)}finally{o.f()}if(r.length>0)for(var s=i?[e]:Xn(e.querySelectorAll("select")),u=0;u<s.length;u++){var f=s[u],l=n[u],c=f.querySelector('option[value="'.concat(l,'"'));c&&c.setAttribute("selected",!0)}var d=t.tagName==="CANVAS",p=d?[t]:Xn(t.querySelectorAll("canvas"));if(p.length>0)for(var m=d?[e]:Xn(e.querySelectorAll("canvas")),g=0;g<m.length;g++){var v=p[g],_=m[g];_.width=v.width,_.height=v.height,_.getContext("2d").drawImage(v,0,0)}return e}var pa=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),RL=ao({},pa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function dw(t){if(!pa[t])throw new Error("Can't get non existing feature flag ".concat(t,"! Supported flags: ").concat(Object.keys(pa)));return RL[t]}var FL=.2;function Er(t){return"".concat(t," ").concat(FL,"s ease")}function LL(t,e){var n=t.getBoundingClientRect(),i=IL(t);pw(t,i),i.id=vL,i.style.position="fixed";var r=n.top,o=n.left;if(i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px"),e){var h=fw(n);r-=h.y-e.y,o-=h.x-e.x,window.setTimeout(function(){i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px")},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height="".concat(n.height,"px"),i.style.width="".concat(n.width,"px"),i.style.transition="".concat(Er("top"),", ").concat(Er("left"),", ").concat(Er("background-color"),", ").concat(Er("opacity"),", ").concat(Er("color")," "),window.setTimeout(function(){return i.style.transition+=", ".concat(Er("width"),", ").concat(Er("height"))},0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function NL(t){t.style.cursor="grab"}function jL(t,e,n,i){pw(e,t);var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),h=r.width-o.width,a=r.height-o.height;if(h||a){var s={left:(n-o.left)/o.width,top:(i-o.top)/o.height};dw(pa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height="".concat(r.height,"px"),t.style.width="".concat(r.width,"px")),t.style.left="".concat(parseFloat(t.style.left)-s.left*h,"px"),t.style.top="".concat(parseFloat(t.style.top)-s.top*a,"px")}}function pw(t,e){var n=window.getComputedStyle(t);Array.from(n).filter(function(i){return i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||dw(pa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")}).forEach(function(i){return e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))})}function BL(t,e){t.draggable=!1,t.ondragstart=function(){return!1},e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function gw(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function UL(t){t.style.visibility="hidden",t.setAttribute(ad,"true")}function YL(t){t.style.visibility="",t.removeAttribute(ad)}function Ol(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=r[o]}),n(i).forEach(function(o){return i.classList.add(o)})})}function nc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=""}),n(i).forEach(function(o){return i.classList.contains(o)&&i.classList.remove(o)})})}function WL(t){var e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");var n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}var zL="--any--",HL=100,VL=20,Kv=3,Jv={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Zv="data-is-dnd-original-dragged-item",ui,on,En,Lc,Dt,Nc,vr,cn,or,In,Fr=!1,ud=!1,fd,Fa=!1,El=[],ni=new Map,Ut=new Map,Xu=new WeakMap;function XL(t,e){ni.has(e)||ni.set(e,new Set),ni.get(e).has(t)||(ni.get(e).add(t),aw())}function Qv(t,e){ni.get(e).delete(t),lw(),ni.get(e).size===0&&ni.delete(e)}function $L(){var t=ni.get(Lc),e=Ia(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.addEventListener(Mc,mw),i.addEventListener(Ra,vw),i.addEventListener(Ic,_w)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(od,co);var r=Math.max.apply(Math,Xn(Array.from(t.keys()).map(function(a){return Ut.get(a).dropAnimationDurationMs}))),o=r===0?VL:Math.max(r,HL),h=AL(t,function(){return In});OL(on,t,o*1.07,h)}function GL(){var t=ni.get(Lc),e=Ia(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.removeEventListener(Mc,mw),i.removeEventListener(Ra,vw),i.removeEventListener(Ic,_w)}}catch(r){e.e(r)}finally{e.f()}window.removeEventListener(od,co),EL()}function jc(t){return t.findIndex(function(e){return!!e[Rc]})}function qL(t){var e;return Ql(Ql({},t),{},(e={},ao(e,Rc,!0),ao(e,tn,mL),e))}function mw(t){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt)){if(Fa=!1,n=n.filter(function(f){return f[tn]!==vr[tn]}),Dt!==t.currentTarget){var r=Ut.get(Dt).items,o=r.filter(function(f){return!f[Rc]});wr(Dt,o,{trigger:bn.DRAGGED_ENTERED_ANOTHER,id:En[tn],source:xn.POINTER})}var h=t.detail.indexObj,a=h.index,s=h.isProximityBased,u=s&&a===t.currentTarget.children.length-1?a+1:a;cn=t.currentTarget,n.splice(u,0,vr),wr(t.currentTarget,n,{trigger:bn.DRAGGED_ENTERED,id:En[tn],source:xn.POINTER})}}function vw(t){if(Fr){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt&&t.currentTarget!==cn)){var r=Xn(n),o=jc(r);o!==-1&&r.splice(o,1);var h=cn;cn=void 0;var a=t.detail,s=a.type,u=a.theOtherDz;if(s===ec.OUTSIDE_OF_ANY||s===ec.LEFT_FOR_ANOTHER&&u!==Dt&&Ut.get(u).dropFromOthersDisabled){Fa=!0,cn=Dt;var f=h===Dt?r:Xn(Ut.get(Dt).items);f.splice(Nc,0,vr),wr(Dt,f,{trigger:bn.DRAGGED_LEFT_ALL,id:En[tn],source:xn.POINTER})}wr(t.currentTarget,r,{trigger:bn.DRAGGED_LEFT,id:En[tn],source:xn.POINTER})}}}function _w(t){var e=Ut.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Dt)){var r=Xn(n);Fa=!1;var o=t.detail.indexObj.index,h=jc(r);h!==-1&&r.splice(h,1),r.splice(o,0,vr),wr(t.currentTarget,r,{trigger:bn.DRAGGED_OVER_INDEX,id:En[tn],source:xn.POINTER})}}function ic(t){t.preventDefault();var e=t.touches?t.touches[0]:t;In={x:e.clientX,y:e.clientY},on.style.transform="translate3d(".concat(In.x-or.x,"px, ").concat(In.y-or.y,"px, 0)")}function co(){ud=!0,window.removeEventListener("mousemove",ic),window.removeEventListener("touchmove",ic),window.removeEventListener("mouseup",co),window.removeEventListener("touchend",co),GL(),NL(on),cn||(cn=Dt);var t=Ut.get(cn),e=t.items,n=t.type;nc(ni.get(n),function(o){return Ut.get(o).dropTargetStyle},function(o){return Ut.get(o).dropTargetClasses});var i=jc(e);i===-1&&cn===Dt&&(i=Nc),e=e.map(function(o){return o[Rc]?En:o});function r(){fd(),lo(cn,e,{trigger:Fa?bn.DROPPED_OUTSIDE_OF_ANY:bn.DROPPED_INTO_ZONE,id:En[tn],source:xn.POINTER}),cn!==Dt&&lo(Dt,Ut.get(Dt).items,{trigger:bn.DROPPED_INTO_ANOTHER,id:En[tn],source:xn.POINTER}),i!==-1&&YL(cn.children[i]),ZL()}KL(i,r)}function KL(t,e){var n=t>-1?$f(cn.children[t]):$f(cn),i={x:n.left-parseFloat(on.style.left),y:n.top-parseFloat(on.style.top)},r=Ut.get(cn),o=r.dropAnimationDurationMs,h="transform ".concat(o,"ms ease");on.style.transition=on.style.transition?on.style.transition+","+h:h,on.style.transform="translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)"),window.setTimeout(e,o)}function JL(t,e){El.push({dz:t,destroy:e}),window.requestAnimationFrame(function(){gw(t),document.body.appendChild(t)})}function ZL(){on.remove(),ui.remove(),El.length&&(El.forEach(function(t){var e=t.dz,n=t.destroy;n(),e.remove()}),El=[]),on=void 0,ui=void 0,En=void 0,Lc=void 0,Dt=void 0,Nc=void 0,vr=void 0,cn=void 0,or=void 0,In=void 0,Fr=!1,ud=!1,fd=void 0,Fa=!1}function QL(t,e){var n=!1,i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Jv,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},r=new Map;function o(){window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function h(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){h(),ui=void 0,or=void 0,In=void 0}function s(c){c.preventDefault();var d=c.touches?c.touches[0]:c;In={x:d.clientX,y:d.clientY},(Math.abs(In.x-or.x)>=Kv||Math.abs(In.y-or.y)>=Kv)&&(h(),f())}function u(c){if(!(c.target!==c.currentTarget&&(c.target.value!==void 0||c.target.isContentEditable))&&!c.button&&!Fr){c.stopPropagation();var d=c.touches?c.touches[0]:c;or={x:d.clientX,y:d.clientY},In=Ql({},or),ui=c.currentTarget,o()}}function f(){Fr=!0;var c=r.get(ui);Nc=c,Dt=ui.parentElement;var d=Dt.closest("dialog")||Dt.getRootNode(),p=d.body||d,m=i.items,g=i.type,v=i.centreDraggedOnCursor,_=Xn(m);En=_[c],Lc=g,vr=qL(En),on=LL(ui,v&&In),ui.setAttribute(Zv,!0);function b(){on.parentElement?window.requestAnimationFrame(b):(p.appendChild(on),on.focus(),$L(),gw(ui),p.appendChild(ui),vr[tn]=En[tn])}window.requestAnimationFrame(b),Ol(Array.from(ni.get(i.type)).filter(function(y){return y===Dt||!Ut.get(y).dropFromOthersDisabled}),function(y){return Ut.get(y).dropTargetStyle},function(y){return Ut.get(y).dropTargetClasses}),_.splice(c,1,vr),fd=WL(Dt),wr(Dt,_,{trigger:bn.DRAG_STARTED,id:En[tn],source:xn.POINTER}),window.addEventListener("mousemove",ic,{passive:!1}),window.addEventListener("touchmove",ic,{passive:!1,capture:!1}),window.addEventListener("mouseup",co,{passive:!1}),window.addEventListener("touchend",co,{passive:!1})}function l(c){var d=c.items,p=d===void 0?void 0:d,m=c.flipDurationMs,g=m===void 0?0:m,v=c.type,_=v===void 0?zL:v,b=c.dragDisabled,y=b===void 0?!1:b,w=c.morphDisabled,C=w===void 0?!1:w,T=c.dropFromOthersDisabled,x=T===void 0?!1:T,A=c.dropTargetStyle,I=A===void 0?Jv:A,W=c.dropTargetClasses,H=W===void 0?[]:W,q=c.transformDraggedElement,G=q===void 0?function(){}:q,B=c.centreDraggedOnCursor,z=B===void 0?!1:B;i.dropAnimationDurationMs=g,i.type&&_!==i.type&&Qv(t,i.type),i.type=_,i.items=Xn(p),i.dragDisabled=y,i.morphDisabled=C,i.transformDraggedElement=G,i.centreDraggedOnCursor=z,n&&Fr&&!ud&&(!SL(I,i.dropTargetStyle)||!TL(H,i.dropTargetClasses))&&(nc([t],function(){return i.dropTargetStyle},function(){return H}),Ol([t],function(){return I},function(){return H})),i.dropTargetStyle=I,i.dropTargetClasses=Xn(H);function ee(F,L){return Ut.get(F)?Ut.get(F)[L]:i[L]}n&&Fr&&i.dropFromOthersDisabled!==x&&(x?nc([t],function(F){return ee(F,"dropTargetStyle")},function(F){return ee(F,"dropTargetClasses")}):Ol([t],function(F){return ee(F,"dropTargetStyle")},function(F){return ee(F,"dropTargetClasses")})),i.dropFromOthersDisabled=x,Ut.set(t,i),XL(t,_);for(var oe=jc(i.items),O=0;O<t.children.length;O++){var P=t.children[O];if(BL(P,y),O===oe){i.transformDraggedElement(on,En,O),C||jL(on,P,In.x,In.y),UL(P);continue}P.removeEventListener("mousedown",Xu.get(P)),P.removeEventListener("touchstart",Xu.get(P)),y||(P.addEventListener("mousedown",u),P.addEventListener("touchstart",u),Xu.set(P,u)),r.set(P,O),n||(n=!0)}}return l(e),{update:function(d){l(d)},destroy:function(){function d(){Qv(t,Ut.get(t).type),Ut.delete(t)}Fr&&!t.closest("[".concat(Zv,"]"))?JL(t,d):d()}}}var ul,qf={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},yw=(ul={},ao(ul,qf.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),ao(ul,qf.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),ul),eN="dnd-action-aria-alert",Bt;function Kf(){Bt||(Bt=document.createElement("div"),function(){Bt.id=eN,Bt.style.position="fixed",Bt.style.bottom="0",Bt.style.left="0",Bt.style.zIndex="-5",Bt.style.opacity="0",Bt.style.height="0",Bt.style.width="0",Bt.setAttribute("role","alert")}(),document.body.prepend(Bt),Object.entries(yw).forEach(function(t){var e=tL(t,2),n=e[0],i=e[1];return document.body.prepend(iN(n,i))}))}function tN(){return ld?null:(document.readyState==="complete"?Kf():window.addEventListener("DOMContentLoaded",Kf),Ql({},qf))}function nN(){ld||!Bt||(Object.keys(yw).forEach(function(t){var e;return(e=document.getElementById(t))===null||e===void 0?void 0:e.remove()}),Bt.remove(),Bt=void 0)}function iN(t,e){var n=document.createElement("div");return n.id=t,n.innerHTML="<p>".concat(e,"</p>"),n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function Hs(t){if(!ld){Bt||Kf(),Bt.innerHTML="";var e=document.createTextNode(t);Bt.appendChild(e),Bt.style.display="none",Bt.style.display="inline"}}var rN="--any--",e_={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Yn=!1,Jf,un,Xr="",Mr,pi,hr="",rc=new WeakSet,t_=new WeakMap,n_=new WeakMap,Zf=new Map,sn=new Map,ei=new Map,sc;function sN(t,e){ei.size===0&&(sc=tN(),window.addEventListener("keydown",bw),window.addEventListener("click",ww)),ei.has(e)||ei.set(e,new Set),ei.get(e).has(t)||(ei.get(e).add(t),aw())}function i_(t,e){un===t&&ga(),ei.get(e).delete(t),lw(),ei.get(e).size===0&&ei.delete(e),ei.size===0&&(window.removeEventListener("keydown",bw),window.removeEventListener("click",ww),sc=void 0,nN())}function bw(t){if(Yn)switch(t.key){case"Escape":{ga();break}}}function ww(){Yn&&(rc.has(document.activeElement)||ga())}function oN(t){if(Yn){var e=t.currentTarget;if(e!==un){Xr=e.getAttribute("aria-label")||"";var n=sn.get(un),i=n.items,r=i.find(function(l){return l[tn]===pi}),o=i.indexOf(r),h=i.splice(o,1)[0],a=sn.get(e),s=a.items,u=a.autoAriaDisabled;e.getBoundingClientRect().top<un.getBoundingClientRect().top||e.getBoundingClientRect().left<un.getBoundingClientRect().left?(s.push(h),u||Hs("Moved item ".concat(hr," to the end of the list ").concat(Xr))):(s.unshift(h),u||Hs("Moved item ".concat(hr," to the beginning of the list ").concat(Xr)));var f=un;lo(f,i,{trigger:bn.DROPPED_INTO_ANOTHER,id:pi,source:xn.KEYBOARD}),lo(e,s,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}),un=e}}}function Cw(){Zf.forEach(function(t,e){var n=t.update;return n(sn.get(e))})}function ga(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;sn.get(un).autoAriaDisabled||Hs("Stopped dragging item ".concat(hr)),rc.has(document.activeElement)&&document.activeElement.blur(),t&&wr(un,sn.get(un).items,{trigger:bn.DRAG_STOPPED,id:pi,source:xn.KEYBOARD}),nc(ei.get(Jf),function(e){return sn.get(e).dropTargetStyle},function(e){return sn.get(e).dropTargetClasses}),Mr=null,pi=null,hr="",Jf=null,un=null,Xr="",Yn=!1,Cw()}function aN(t,e){var n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:e_,dropTargetClasses:[],autoAriaDisabled:!1};function i(f,l,c){f.length<=1||f.splice(c,1,f.splice(l,1,f[c])[0])}function r(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!rc.has(f.target))return;f.preventDefault(),f.stopPropagation(),Yn?ga():o(f);break}case"ArrowDown":case"ArrowRight":{if(!Yn)return;f.preventDefault(),f.stopPropagation();var l=sn.get(t),c=l.items,d=Array.from(t.children),p=d.indexOf(f.currentTarget);p<d.length-1&&(n.autoAriaDisabled||Hs("Moved item ".concat(hr," to position ").concat(p+2," in the list ").concat(Xr)),i(c,p,p+1),lo(t,c,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Yn)return;f.preventDefault(),f.stopPropagation();var m=sn.get(t),g=m.items,v=Array.from(t.children),_=v.indexOf(f.currentTarget);_>0&&(n.autoAriaDisabled||Hs("Moved item ".concat(hr," to position ").concat(_," in the list ").concat(Xr)),i(g,_,_-1),lo(t,g,{trigger:bn.DROPPED_INTO_ZONE,id:pi,source:xn.KEYBOARD}));break}}}function o(f){a(f.currentTarget),un=t,Jf=n.type,Yn=!0;var l=Array.from(ei.get(n.type)).filter(function(d){return d===un||!sn.get(d).dropFromOthersDisabled});if(Ol(l,function(d){return sn.get(d).dropTargetStyle},function(d){return sn.get(d).dropTargetClasses}),!n.autoAriaDisabled){var c="Started dragging item ".concat(hr,". Use the arrow keys to move it within its list ").concat(Xr);l.length>1&&(c+=", or tab to another list in order to move the item into it"),Hs(c)}wr(t,sn.get(t).items,{trigger:bn.DRAG_STARTED,id:pi,source:xn.KEYBOARD}),Cw()}function h(f){Yn&&f.currentTarget!==Mr&&(f.stopPropagation(),ga(!1),o(f))}function a(f){var l=sn.get(t),c=l.items,d=Array.from(t.children),p=d.indexOf(f);Mr=f,Mr.tabIndex=n.zoneItemTabIndex,pi=c[p][tn],hr=d[p].getAttribute("aria-label")||""}function s(f){var l=f.items,c=l===void 0?[]:l,d=f.type,p=d===void 0?rN:d,m=f.dragDisabled,g=m===void 0?!1:m,v=f.zoneTabIndex,_=v===void 0?0:v,b=f.zoneItemTabIndex,y=b===void 0?0:b,w=f.dropFromOthersDisabled,C=w===void 0?!1:w,T=f.dropTargetStyle,x=T===void 0?e_:T,A=f.dropTargetClasses,I=A===void 0?[]:A,W=f.autoAriaDisabled,H=W===void 0?!1:W;n.items=Xn(c),n.dragDisabled=g,n.dropFromOthersDisabled=C,n.zoneTabIndex=_,n.zoneItemTabIndex=y,n.dropTargetStyle=x,n.dropTargetClasses=I,n.autoAriaDisabled=H,n.type&&p!==n.type&&i_(t,n.type),n.type=p,sN(t,p),H||(t.setAttribute("aria-disabled",g),t.setAttribute("role","list"),t.setAttribute("aria-describedby",g?sc.DND_ZONE_DRAG_DISABLED:sc.DND_ZONE_ACTIVE)),sn.set(t,n),Yn?t.tabIndex=t===un||Mr.contains(t)||n.dropFromOthersDisabled||un&&n.type!==sn.get(un).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",oN);for(var q=function(z){var ee=t.children[z];rc.add(ee),ee.tabIndex=Yn?-1:n.zoneItemTabIndex,H||ee.setAttribute("role","listitem"),ee.removeEventListener("keydown",t_.get(ee)),ee.removeEventListener("click",n_.get(ee)),g||(ee.addEventListener("keydown",r),t_.set(ee,r),ee.addEventListener("click",h),n_.set(ee,h)),Yn&&n.items[z][tn]===pi&&(Mr=ee,Mr.tabIndex=n.zoneItemTabIndex,ee.focus())},G=0;G<t.children.length;G++)q(G)}s(e);var u={update:function(l){s(l)},destroy:function(){i_(t,n.type),sn.delete(t),Zf.delete(t)}};return Zf.set(t,u),u}var lN=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function cN(t,e){if(uN(t))return{update:function(){},destroy:function(){}};r_(e);var n=QL(t,e),i=aN(t,e);return{update:function(o){r_(o),n.update(o),i.update(o)},destroy:function(){n.destroy(),i.destroy()}}}function uN(t){return!!t.closest("[".concat(gL,'="true"]'))}function r_(t){var e=t.items;t.flipDurationMs,t.type,t.dragDisabled,t.morphDisabled,t.dropFromOthersDisabled;var n=t.zoneTabIndex,i=t.zoneItemTabIndex;t.dropTargetStyle;var r=t.dropTargetClasses;t.transformDraggedElement,t.autoAriaDisabled,t.centreDraggedOnCursor;var o=eL(t,lN);if(Object.keys(o).length>0&&console.warn("dndzone will ignore unknown options",o),!e)throw new Error("no 'items' key provided to dndzone");var h=e.find(function(a){return!{}.hasOwnProperty.call(a,tn)});if(h)throw new Error("missing '".concat(tn,"' property for item ").concat(cl(h)));if(r&&!Array.isArray(r))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(ea(r),", ").concat(cl(r)));if(n&&!s_(n))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(ea(n),", ").concat(cl(n)));if(i&&!s_(i))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(ea(i),", ").concat(cl(i)))}function s_(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function fN(t){function e(n){var i=n.target;if(i.matches(t)){var r;switch(n.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;case"touchcancel":r="mouseup";break;default:return}var o=n.changedTouches[0],h=o.clientX,a=o.pageX,s=window.pageXOffset,u=o.clientY,f=o.pageY,l=window.pageYOffset;a===0&&Math.floor(h)>Math.floor(a)||f===0&&Math.floor(u)>Math.floor(f)?(h-=s,u-=l):(h<a-s||u<f-l)&&(h=a-s,u=f-l);var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,screenX:o.screenX,screenY:o.screenY,clientX:h,clientY:u,pageX:a,pageY:f,buttons:1,button:0,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey});o.target.dispatchEvent(c)}}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}function o_(t,e,n){const i=t.slice();return i[12]=e[n],i[14]=n,i}function a_(t){let e,n,i,r,o,h=[],a=new Map,s,u,f,l,c=Fe(t[1]);const d=p=>p[12].id;for(let p=0;p<c.length;p+=1){let m=o_(t,c,p),g=d(m);a.set(g,h[p]=h_(g,m))}return{c(){e=E("div"),n=E("h2"),n.textContent="",i=V(),r=E("div"),o=E("div");for(let p=0;p<h.length;p+=1)h[p].c();S(n,"class","text-xs border-b p-3"),S(o,"class","sortable space-y-2 w-full svelte-1q3bi75"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(p,m){U(p,e,m),k(e,n),k(e,i),k(e,r),k(r,o);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(o,null);u=!0,f||(l=[wy(s=cN.call(null,o,{items:t[1],flipDurationMs:Qf})),Z(o,"consider",t[2]),Z(o,"finalize",t[3])],f=!0)},p(p,m){if(m&115){c=Fe(p[1]),Te();for(let g=0;g<h.length;g+=1)h[g].r();h=Ry(h,m,d,1,p,c,a,o,B1,h_,null,o_);for(let g=0;g<h.length;g+=1)h[g].a();ke()}s&&Hn(s.update)&&m&2&&s.update.call(null,{items:p[1],flipDurationMs:Qf})},i(p){if(!u){for(let m=0;m<c.length;m+=1)M(h[m]);u=!0}},o(p){for(let m=0;m<h.length;m+=1)Y(h[m]);u=!1},d(p){p&&j(e);for(let m=0;m<h.length;m+=1)h[m].d();f=!1,Ue(l)}}}function hN(t){let e,n,i,r,o=t[12].type==="ellipse"&&l_(),h=t[12].type==="triangle"&&c_(),a=t[12].type==="rectangle"&&u_();return{c(){o&&o.c(),e=V(),h&&h.c(),n=V(),a&&a.c(),i=Je()},m(s,u){o&&o.m(s,u),U(s,e,u),h&&h.m(s,u),U(s,n,u),a&&a.m(s,u),U(s,i,u),r=!0},p(s,u){s[12].type==="ellipse"?o?u&2&&M(o,1):(o=l_(),o.c(),M(o,1),o.m(e.parentNode,e)):o&&(Te(),Y(o,1,1,()=>{o=null}),ke()),s[12].type==="triangle"?h?u&2&&M(h,1):(h=c_(),h.c(),M(h,1),h.m(n.parentNode,n)):h&&(Te(),Y(h,1,1,()=>{h=null}),ke()),s[12].type==="rectangle"?a?u&2&&M(a,1):(a=u_(),a.c(),M(a,1),a.m(i.parentNode,i)):a&&(Te(),Y(a,1,1,()=>{a=null}),ke())},i(s){r||(M(o),M(h),M(a),r=!0)},o(s){Y(o),Y(h),Y(a),r=!1},d(s){s&&(j(e),j(n),j(i)),o&&o.d(s),h&&h.d(s),a&&a.d(s)}}}function dN(t){let e,n,i;return n=new Ce({props:{icon:"streamline:hand-held-tablet-drawing"}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ce(n,e,null),i=!0},p:ge,i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){Y(n.$$.fragment,r),i=!1},d(r){r&&j(e),ue(n)}}}function pN(t){let e,n=t[12].thumbnail&&f_(t);return{c(){e=E("div"),n&&n.c(),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center")},m(i,r){U(i,e,r),n&&n.m(e,null)},p(i,r){i[12].thumbnail?n?n.p(i,r):(n=f_(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&j(e),n&&n.d()}}}function gN(t){let e,n=t[12].text+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center truncate ")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&2&&n!==(n=r[12].text+"")&&He(i,n)},i:ge,o:ge,d(r){r&&j(e)}}}function mN(t){let e,n,i;return{c(){e=E("div"),n=E("img"),Ye(n.src,i=t[12].convert.url)||S(n,"src",i),S(n,"class","object-contain svelte-1q3bi75"),S(n,"height","40"),S(n,"alt",""),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),k(e,n)},p(r,o){o&2&&!Ye(n.src,i=r[12].convert.url)&&S(n,"src",i)},i:ge,o:ge,d(r){r&&j(e)}}}function l_(t){let e,n,i;return n=new Ce({props:{icon:"material-symbols:circle-outline"}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ce(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){Y(n.$$.fragment,r),i=!1},d(r){r&&j(e),ue(n)}}}function c_(t){let e,n,i;return n=new Ce({props:{icon:"uil:triangle"}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ce(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){Y(n.$$.fragment,r),i=!1},d(r){r&&j(e),ue(n)}}}function u_(t){let e,n,i;return n=new Ce({props:{icon:"material-symbols:rectangle-outline"}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ce(n,e,null),i=!0},i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){Y(n.$$.fragment,r),i=!1},d(r){r&&j(e),ue(n)}}}function f_(t){let e,n;return{c(){e=E("img"),Ye(e.src,n=t[12].thumbnail.url)||S(e,"src",n),S(e,"class","object-contain svelte-1q3bi75"),S(e,"height","40"),S(e,"alt","")},m(i,r){U(i,e,r)},p(i,r){r&2&&!Ye(e.src,n=i[12].thumbnail.url)&&S(e,"src",n)},d(i){i&&j(e)}}}function vN(t){let e,n;return e=new Ce({props:{icon:"iconamoon:lock",class:"pointer-events-none",height:"30"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function _N(t){let e,n;return e=new Ce({props:{icon:"iconamoon:lock-off",class:"pointer-events-none",height:"30"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function h_(t,e){let n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w=ge,C,T,x;const A=[mN,gN,pN,dN,hN],I=[];function W(oe,O){return oe[12].objType==="clipart"?0:oe[12].objType==="text"?1:oe[12].objType==="upload"?2:oe[12].type==="path"?3:oe[12].objType==="shape"?4:-1}~(i=W(e))&&(r=I[i]=A[i](e)),a=new Ce({props:{icon:"fluent:select-object-20-filled",class:"pointer-events-none",height:"30"}});function H(){return e[9](e[12])}const q=[_N,vN],G=[];function B(oe,O){return oe[12].selectable?0:1}f=B(e),l=G[f]=q[f](e);function z(){return e[10](e[12],e[14])}p=new Ce({props:{icon:"mi:select",class:"pointer-events-none",height:"30"}}),v=new Ce({props:{icon:"mi:delete",class:"pointer-events-none",height:"30"}});function ee(){return e[11](e[12])}return{key:t,first:null,c(){n=E("div"),r&&r.c(),o=V(),h=E("button"),fe(a.$$.fragment),s=V(),u=E("button"),l.c(),c=V(),d=E("div"),fe(p.$$.fragment),m=V(),g=E("button"),fe(v.$$.fragment),_=V(),S(h,"type","button"),S(h,"class","select-button ghost-btn"),S(u,"type","button"),S(u,"class","lock-button ghost-btn"),S(d,"class","move-button"),S(g,"type","button"),S(g,"class","delete-button ghost-btn"),S(n,"class",b="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[12].id?"border-2 border-black":"border")+" svelte-1q3bi75"),this.first=n},m(oe,O){U(oe,n,O),~i&&I[i].m(n,null),k(n,o),k(n,h),ce(a,h,null),k(n,s),k(n,u),G[f].m(u,null),k(n,c),k(n,d),ce(p,d,null),k(n,m),k(n,g),ce(v,g,null),k(n,_),C=!0,T||(x=[Z(h,"click",H),Z(u,"click",z),Z(g,"click",ee)],T=!0)},p(oe,O){e=oe;let P=i;i=W(e),i===P?~i&&I[i].p(e,O):(r&&(Te(),Y(I[P],1,1,()=>{I[P]=null}),ke()),~i?(r=I[i],r?r.p(e,O):(r=I[i]=A[i](e),r.c()),M(r,1),r.m(n,o)):r=null);let F=f;f=B(e),f!==F&&(Te(),Y(G[F],1,1,()=>{G[F]=null}),ke(),l=G[f],l||(l=G[f]=q[f](e),l.c()),M(l,1),l.m(u,null)),(!C||O&3&&b!==(b="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[12].id?"border-2 border-black":"border")+" svelte-1q3bi75"))&&S(n,"class",b)},r(){y=n.getBoundingClientRect()},f(){P1(n),w()},a(){w(),w=A1(n,y,ZF,{duration:Qf})},i(oe){C||(M(r),M(a.$$.fragment,oe),M(l),M(p.$$.fragment,oe),M(v.$$.fragment,oe),C=!0)},o(oe){Y(r),Y(a.$$.fragment,oe),Y(l),Y(p.$$.fragment,oe),Y(v.$$.fragment,oe),C=!1},d(oe){oe&&j(n),~i&&I[i].d(),ue(a),G[f].d(),ue(p),ue(v),T=!1,Ue(x)}}}function yN(t){var r;let e,n,i=((r=t[1])==null?void 0:r.length)&&a_(t);return{c(){i&&i.c(),e=Je()},m(o,h){i&&i.m(o,h),U(o,e,h),n=!0},p(o,[h]){var a;(a=o[1])!=null&&a.length?i?(i.p(o,h),h&2&&M(i,1)):(i=a_(o),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(o){n||(M(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&j(e),i&&i.d(o)}}}const Qf=300;function bN(t,e,n){let i,r,o;Me(t,Ny,m=>n(7,r=m)),Me(t,Ui,m=>n(8,o=m));let h="";function a(m){n(1,i=m.detail.items)}function s(m){K1(m.detail.items.reverse()),r.reverse()}function u(m){nC(m)}async function f(m,g){rC(m,!m.selectable),n(1,i),n(7,r),m.selectable||jy()}function l(m){iC(m)}xi(()=>{fN(".move-button")});const c=m=>u(m),d=(m,g)=>f(m),p=m=>l(m);return t.$$.update=()=>{t.$$.dirty&256&&(o?n(0,h=o[0].id):n(0,h="")),t.$$.dirty&128&&n(1,i=r)},[h,i,a,s,u,f,l,r,o,c,d,p]}class wN extends qe{constructor(e){super(),Ge(this,e,bN,yN,Ve,{})}}function d_(t,e,n){const i=t.slice();return i[19]=e[n],i[20]=e,i[21]=n,i}function p_(t,e,n){const i=t.slice();return i[22]=e[n],i}function g_(t,e,n){const i=t.slice();return i[25]=e[n],i}function m_(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v;function _(W,H){return W[2]==="design"?SN:CN}let b=_(t),y=b(t);h=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let w=Fe(t[3]),C=[];for(let W=0;W<w.length;W+=1)C[W]=T_(d_(t,w,W));const T=W=>Y(C[W],1,1,()=>{C[W]=null});function x(W,H){return W[2]==="design"?EN:ON}let A=x(t),I=A(t);return{c(){e=E("div"),n=E("div"),i=E("h2"),y.c(),r=V(),o=E("button"),fe(h.$$.fragment),a=V(),s=E("div");for(let W=0;W<C.length;W+=1)C[W].c();u=V(),f=E("div"),l=E("button"),I.c(),c=V(),d=E("button"),d.textContent="",S(o,"class","absolute right-2"),S(o,"type","button"),S(i,"class","primary-bg rounded font-semibold p-3 text-center relative items-center flex w-full border-b"),S(l,"type","button"),S(l,"class","btn md:btn-lg primary-btn"),S(d,"type","button"),S(d,"class","btn md:btn-lg secondary-btn"),S(f,"class","p-3 flex justify-center gap-2"),S(s,"class","grow overflow-y-hidden h-full flex flex-col mt-3 gap-3"),S(n,"class","max-h-full w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(W,H){U(W,e,H),k(e,n),k(n,i),y.m(i,null),k(i,r),k(i,o),ce(h,o,null),k(n,a),k(n,s);for(let q=0;q<C.length;q+=1)C[q]&&C[q].m(s,null);k(s,u),k(s,f),k(f,l),I.m(l,null),k(f,c),k(f,d),m=!0,g||(v=[Z(o,"click",dn),Z(l,"click",t[17]),Z(d,"click",dn),Z(e,"introstart",t[10]),Z(e,"outroend",t[11])],g=!0)},p(W,H){if(b!==(b=_(W))&&(y.d(1),y=b(W),y&&(y.c(),y.m(i,r))),H&504){w=Fe(W[3]);let q;for(q=0;q<w.length;q+=1){const G=d_(W,w,q);C[q]?(C[q].p(G,H),M(C[q],1)):(C[q]=T_(G),C[q].c(),M(C[q],1),C[q].m(s,u))}for(Te(),q=w.length;q<C.length;q+=1)T(q);ke()}A!==(A=x(W))&&(I.d(1),I=A(W),I&&(I.c(),I.m(l,null)))},i(W){if(!m){M(h.$$.fragment,W);for(let H=0;H<w.length;H+=1)M(C[H]);W&&zt(()=>{m&&(p||(p=Vt(e,Ti,{y:50},!0)),p.run(1))}),m=!0}},o(W){Y(h.$$.fragment,W),C=C.filter(Boolean);for(let H=0;H<C.length;H+=1)Y(C[H]);W&&(p||(p=Vt(e,Ti,{y:50},!1)),p.run(0)),m=!1},d(W){W&&j(e),y.d(),ue(h),Pt(C,W),I.d(),W&&p&&p.end(),g=!1,Ue(v)}}}function CN(t){let e;return{c(){e=we("")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function SN(t){let e;return{c(){e=we(" ")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function v_(t){let e,n,i;return{c(){e=E("img"),Ye(e.src,n=t[25].url)||S(e,"src",n),S(e,"alt",i=t[19].product.productName),S(e,"class","max-w-16 md:max-w-24 max-h-16 md:max-h-24 object-contain border rounded")},m(r,o){U(r,e,o)},p(r,o){o&8&&!Ye(e.src,n=r[25].url)&&S(e,"src",n),o&8&&i!==(i=r[19].product.productName)&&S(e,"alt",i)},d(r){r&&j(e)}}}function __(t){let e=t[19].currentOption.optionValue1+"",n;return{c(){n=we(e)},m(i,r){U(i,n,r)},p(i,r){r&8&&e!==(e=i[19].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&j(n)}}}function y_(t){let e,n=t[19].currentOption.optionValue2+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(j(e),j(i))}}}function b_(t){let e,n=t[19].currentOption.optionValue3+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(j(e),j(i))}}}function TN(t){let e,n,i;function r(){return t[12](t[21])}return{c(){e=E("button"),e.textContent="",S(e,"type","button"),S(e,"class","btn primary-btn")},m(o,h){U(o,e,h),n||(i=Z(e,"click",r),n=!0)},p(o,h){t=o},d(o){o&&j(e),n=!1,i()}}}function kN(t){let e;return{c(){e=E("button"),e.textContent="",S(e,"type","button"),S(e,"class","btn secondary-btn")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function w_(t){let e,n=t[19].templateTitle+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","text-sm font-semibold")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[19].templateTitle+"")&&He(i,n)},d(r){r&&j(e)}}}function C_(t){let e,n=Fe(t[19].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=S_(p_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex items-center gap-2 max-w-full overflow-x-auto")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Fe(r[19].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=p_(r,n,h);i[h]?i[h].p(a,o):(i[h]=S_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function S_(t){let e,n;return{c(){e=E("img"),Ye(e.src,n=t[22].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","object-contain max-w-16 max-h-16 md:max-w-24 md:max-h-24 rounded border")},m(i,r){U(i,e,r)},p(i,r){r&8&&!Ye(e.src,n=i[22].url)&&S(e,"src",n)},d(i){i&&j(e)}}}function T_(t){var me;let e,n,i,r,o,h,a,s=t[19].product.productName+"",u,f,l,c,d,p,m,g,v,_,b,y,w,C,T,x,A,I,W,H,q,G,B,z,ee,oe=Fe(t[19].product.images),O=[];for(let Q=0;Q<oe.length;Q+=1)O[Q]=v_(g_(t,oe,Q));let P=t[19].currentOption.optionValue1&&__(t),F=t[19].currentOption.optionValue2&&y_(t),L=t[19].currentOption.optionValue3&&b_(t);function J(Q,N){return Q[21]===Q[4]?kN:TN}let R=J(t),D=R(t);function X(){return t[13](t[21])}function K(){t[14].call(C,t[20],t[21])}function re(){return t[15](t[21])}H=new Ce({props:{icon:"mi:delete",height:15}});function te(){return t[16](t[21])}let $=t[19].templateTitle&&w_(t),ae=((me=t[19].thumbnails)==null?void 0:me.length)&&C_(t);return{c(){e=E("div"),n=E("div"),i=E("div"),r=E("div");for(let Q=0;Q<O.length;Q+=1)O[Q].c();o=V(),h=E("div"),a=E("h1"),u=we(s),f=V(),l=E("h3"),P&&P.c(),c=V(),F&&F.c(),d=V(),L&&L.c(),p=V(),m=E("div"),g=E("div"),D.c(),v=V(),_=E("div"),b=E("div"),y=E("button"),y.textContent="-",w=V(),C=E("input"),T=V(),x=E("button"),x.textContent="+",A=V(),I=E("div"),W=E("button"),fe(H.$$.fragment),q=V(),$&&$.c(),G=V(),ae&&ae.c(),S(r,"class","flex"),S(a,"class","text-sm"),S(l,"class","text-xs"),S(h,"class","flex flex-col justify-center grow gap-1"),S(y,"type","button"),S(y,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(C,"type","text"),S(C,"class","border w-12 input-sm rounded-none"),S(x,"type","button"),S(x,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(b,"class","flex"),S(W,"type","button"),S(W,"class","btn secondary-btn"),S(m,"class","flex gap-2 items-center"),S(i,"class","flex gap-3 flex-col sm:flex-row"),S(n,"class","grow flex flex-col gap-3 justify-center w-full"),S(e,"class","flex justify-between items-center border-b p-2")},m(Q,N){U(Q,e,N),k(e,n),k(n,i),k(i,r);for(let ne=0;ne<O.length;ne+=1)O[ne]&&O[ne].m(r,null);k(i,o),k(i,h),k(h,a),k(a,u),k(h,f),k(h,l),P&&P.m(l,null),k(l,c),F&&F.m(l,null),k(l,d),L&&L.m(l,null),k(i,p),k(i,m),k(m,g),D.m(g,null),k(m,v),k(m,_),k(_,b),k(b,y),k(b,w),k(b,C),Re(C,t[19].count),k(b,T),k(b,x),k(m,A),k(m,I),k(I,W),ce(H,W,null),k(n,q),$&&$.m(n,null),k(n,G),ae&&ae.m(n,null),B=!0,z||(ee=[Z(y,"click",X),Z(C,"input",K),Z(x,"click",re),Z(W,"click",te)],z=!0)},p(Q,N){var ne;if(t=Q,N&8){oe=Fe(t[19].product.images);let se;for(se=0;se<oe.length;se+=1){const ie=g_(t,oe,se);O[se]?O[se].p(ie,N):(O[se]=v_(ie),O[se].c(),O[se].m(r,null))}for(;se<O.length;se+=1)O[se].d(1);O.length=oe.length}(!B||N&8)&&s!==(s=t[19].product.productName+"")&&He(u,s),t[19].currentOption.optionValue1?P?P.p(t,N):(P=__(t),P.c(),P.m(l,c)):P&&(P.d(1),P=null),t[19].currentOption.optionValue2?F?F.p(t,N):(F=y_(t),F.c(),F.m(l,d)):F&&(F.d(1),F=null),t[19].currentOption.optionValue3?L?L.p(t,N):(L=b_(t),L.c(),L.m(l,null)):L&&(L.d(1),L=null),R===(R=J(t))&&D?D.p(t,N):(D.d(1),D=R(t),D&&(D.c(),D.m(g,null))),N&8&&C.value!==t[19].count&&Re(C,t[19].count),t[19].templateTitle?$?$.p(t,N):($=w_(t),$.c(),$.m(n,G)):$&&($.d(1),$=null),(ne=t[19].thumbnails)!=null&&ne.length?ae?ae.p(t,N):(ae=C_(t),ae.c(),ae.m(n,null)):ae&&(ae.d(1),ae=null)},i(Q){B||(M(H.$$.fragment,Q),B=!0)},o(Q){Y(H.$$.fragment,Q),B=!1},d(Q){Q&&j(e),Pt(O,Q),P&&P.d(),F&&F.d(),L&&L.d(),D.d(),ue(H),$&&$.d(),ae&&ae.d(),z=!1,Ue(ee)}}}function ON(t){let e;return{c(){e=we("")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function EN(t){let e;return{c(){e=we(" ")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function xN(t){let e,n,i=t[0]&&m_(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=m_(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function DN(t,e,n){let i,r;Me(t,di,w=>n(3,i=w)),Me(t,jo,w=>n(4,r=w));let{isOpen:o}=e,{changeEditorDataIndex:h}=e,{sendOrder:a}=e,{mode:s}=e;Xt(),xi(async()=>{});function u(w){i[w].count>1&&_e(di,i[w].count--,i)}function f(w){_e(di,i[w].count++,i)}function l(w){_e(di,i=i.filter((C,T)=>w!=T),i)}function c(w){h(w),dn()}function d(w){Si.call(this,t,w)}function p(w){Si.call(this,t,w)}const m=w=>c(w),g=w=>u(w);function v(w,C){w[C].count=this.value,di.set(i)}const _=w=>f(w),b=w=>l(w),y=()=>a();return t.$$set=w=>{"isOpen"in w&&n(0,o=w.isOpen),"changeEditorDataIndex"in w&&n(9,h=w.changeEditorDataIndex),"sendOrder"in w&&n(1,a=w.sendOrder),"mode"in w&&n(2,s=w.mode)},[o,a,s,i,r,u,f,l,c,h,d,p,m,g,v,_,b,y]}class AN extends qe{constructor(e){super(),Ge(this,e,DN,xN,Ve,{isOpen:0,changeEditorDataIndex:9,sendOrder:1,mode:2})}}function k_(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}function O_(t,e,n){const i=t.slice();return i[12]=e[n],i}function E_(t,e,n){const i=t.slice();return i[12]=e[n],i}function x_(t,e,n){const i=t.slice();return i[18]=e[n],i}function D_(t){let e,n,i,r,o=Fe(t[2]),h=[];for(let a=0;a<o.length;a+=1)h[a]=F_(k_(t,o,a));return{c(){e=E("div"),n=E("div"),i=E("h1"),i.innerHTML=' <span class="text-xs font-normal">(     .)</span>',r=V();for(let a=0;a<h.length;a+=1)h[a].c();S(i,"class","p-5 bg-gray-50 font-semibold text-lg"),S(n,"class","border rounded relative flex flex-col divide-y"),S(e,"class","flex flex-col gap-3 my-2 bg-white")},m(a,s){U(a,e,s),k(e,n),k(n,i),k(n,r);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(n,null)},p(a,s){if(s&15){o=Fe(a[2]);let u;for(u=0;u<o.length;u+=1){const f=k_(a,o,u);h[u]?h[u].p(f,s):(h[u]=F_(f),h[u].c(),h[u].m(n,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=o.length}},d(a){a&&j(e),Pt(h,a)}}}function A_(t){let e,n,i;function r(...o){return t[5](t[9],...o)}return{c(){e=E("input"),S(e,"type","checkbox"),S(e,"class","podiz-checkbox")},m(o,h){U(o,e,h),n||(i=Z(e,"change",r),n=!0)},p(o,h){t=o},d(o){o&&j(e),n=!1,i()}}}function PN(t){return{c:ge,m:ge,p:ge,d:ge}}function MN(t){var h;let e,n=t[11],i=((h=t[17].data)==null?void 0:h.thumbnails.length)&&P_(t);const r=()=>t[6](e,n),o=()=>t[6](null,n);return{c(){e=E("div"),i&&i.c(),S(e,"class","flex gap-2 overflow-x-auto")},m(a,s){U(a,e,s),i&&i.m(e,null),r()},p(a,s){var u;t=a,(u=t[17].data)!=null&&u.thumbnails.length?i?i.p(t,s):(i=P_(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),n!==t[11]&&(o(),n=t[11],r())},d(a){a&&j(e),i&&i.d(),o()}}}function P_(t){let e,n=Fe(t[17].data.thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=M_(x_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Fe(r[17].data.thumbnails);let h;for(h=0;h<n.length;h+=1){const a=x_(r,n,h);i[h]?i[h].p(a,o):(i[h]=M_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function M_(t){let e,n,i;return{c(){e=E("img"),Ye(e.src,n=t[18].url)||S(e,"src",n),S(e,"alt",i=t[18].alt),S(e,"class","max-h-20 max-w-xs border rounded cursor-pointer")},m(r,o){U(r,e,o)},p(r,o){o&4&&!Ye(e.src,n=r[18].url)&&S(e,"src",n),o&4&&i!==(i=r[18].alt)&&S(e,"alt",i)},d(r){r&&j(e)}}}function IN(t){let e;return{c(){e=E("div"),e.innerHTML='<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>',S(e,"class","flex items justify-center")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function RN(t){let e,n=Fe(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=I_(O_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Fe(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=O_(r,n,h);i[h]?i[h].p(a,o):(i[h]=I_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function FN(t){let e,n=Fe(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=R_(E_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Je()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Fe(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=E_(r,n,h);i[h]?i[h].p(a,o):(i[h]=R_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function I_(t){let e=t[12].option_value+"",n,i,r=t[12].price.toLocaleString("ko-KR")+"",o,h;return{c(){n=we(e),i=we(" ("),o=we(r),h=we(") ")},m(a,s){U(a,n,s),U(a,i,s),U(a,o,s),U(a,h,s)},p(a,s){s&4&&e!==(e=a[12].option_value+"")&&He(n,e),s&4&&r!==(r=a[12].price.toLocaleString("ko-KR")+"")&&He(o,r)},d(a){a&&(j(n),j(i),j(o),j(h))}}}function R_(t){let e,n=t[12].price.toLocaleString("ko-KR")+"",i,r;return{c(){e=we("("),i=we(n),r=we(") ")},m(o,h){U(o,e,h),U(o,i,h),U(o,r,h)},p(o,h){h&4&&n!==(n=o[12].price.toLocaleString("ko-KR")+"")&&He(i,n)},d(o){o&&(j(e),j(i),j(r))}}}function F_(t){let e,n,i,r,o,h,a,s=t[9].product_name+"",u,f,l,c,d,p,m,g,v,_=t[9].quantity+"",b,y,w,C,T,x,A=t[9].price.toLocaleString("ko-KR")+"",I,W,H,q,G=t[0]==="cart"&&A_(t),B={ctx:t,current:null,token:null,hasCatch:!1,pending:IN,then:MN,catch:PN,value:17};Gs(r=t[9].editorData,B);function z(O,P){return O[0]==="orderend"?FN:RN}let ee=z(t),oe=ee(t);return{c(){e=E("div"),n=E("div"),G&&G.c(),i=V(),B.block.c(),o=V(),h=E("div"),a=E("h1"),u=we(s),l=V(),c=E("div"),d=E("p"),oe.c(),p=V(),m=E("p"),g=we(": "),v=E("span"),b=we(_),y=we(""),w=V(),C=E("p"),T=we(": "),x=E("span"),I=we(A),W=we(""),q=V(),S(n,"class","flex w-full gap-2 items-center overflow-x-hidden"),S(a,"class","font-semibold"),S(h,"class",f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":"")),S(v,"class","font-semibold"),S(x,"class","font-semibold"),S(c,"class",H="flex gap-5 "+(t[0]==="cart"?"pl-8":"")),S(e,"class","p-5")},m(O,P){U(O,e,P),k(e,n),G&&G.m(n,null),k(n,i),B.block.m(n,B.anchor=null),B.mount=()=>n,B.anchor=null,k(e,o),k(e,h),k(h,a),k(a,u),k(e,l),k(e,c),k(c,d),oe.m(d,null),k(c,p),k(c,m),k(m,g),k(m,v),k(v,b),k(m,y),k(c,w),k(c,C),k(C,T),k(C,x),k(x,I),k(C,W),k(e,q)},p(O,P){t=O,t[0]==="cart"?G?G.p(t,P):(G=A_(t),G.c(),G.m(n,i)):G&&(G.d(1),G=null),B.ctx=t,P&4&&r!==(r=t[9].editorData)&&Gs(r,B)||fh(B,t,P),P&4&&s!==(s=t[9].product_name+"")&&He(u,s),P&1&&f!==(f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":""))&&S(h,"class",f),ee===(ee=z(t))&&oe?oe.p(t,P):(oe.d(1),oe=ee(t),oe&&(oe.c(),oe.m(d,null))),P&4&&_!==(_=t[9].quantity+"")&&He(b,_),P&4&&A!==(A=t[9].price.toLocaleString("ko-KR")+"")&&He(I,A),P&1&&H!==(H="flex gap-5 "+(t[0]==="cart"?"pl-8":""))&&S(c,"class",H)},d(O){O&&j(e),G&&G.d(),B.block.d(),B.token=null,B=null,oe.d()}}}function LN(t){var i;let e,n=((i=t[2])==null?void 0:i.length)&&D_(t);return{c(){n&&n.c(),e=Je()},m(r,o){n&&n.m(r,o),U(r,e,o)},p(r,[o]){var h;(h=r[2])!=null&&h.length?n?n.p(r,o):(n=D_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(r){r&&j(e),n&&n.d(r)}}}function NN(t,e,n){let{previews:i}=e,{mode:r="cart"}=e,o=[],h=[];console.log({previews:i});function a(c,d){i.items.forEach(p=>{p.uuid===d&&(p.element.querySelector("input[type=checkbox]").checked=c)})}const s=c=>{var d;return(d=c.additional_option_values)!=null&&d.length?c.additional_option_values.map(({custom_option:p,quantity:m})=>{const g=p.find(({key:_})=>_==="item_option_add").value,v=c.option_value[0];return{uuid:g,option_value:v,quantity:m,price:c.discount_price}}):[]},u=c=>{const d={};return c.forEach(p=>{s(p).forEach(g=>{const{uuid:v}=g;if(!d[v]){const _=ob(v);d[v]={uuid:v,editorData:_,items:[]}}d[v].items.push({option_value:g.option_value.replace(/\[|\]|\([+-]?\d{1,3}(,\d{3})*\)/g,""),quantity:g.quantity,price:g.price}),d[v].quantity=g.quantity,d[v].price=d[v].items.reduce((_,b)=>_+b.quantity*b.price,0),d[v].product_name=p.product_name})}),Object.values(d)};xi(async()=>{var d;(d=i.elements)!=null&&d.length&&i.elements.forEach(p=>{p.style.display="none"});const c=await Jx();n(2,o=u(c.items)),document.getElementById("product_select_all")&&document.getElementById("product_select_all").addEventListener("click",function(){document.querySelectorAll(".podiz-checkbox").forEach(function(p){p.checked=!p.checked})})});const f=(c,d)=>a(d.target.checked,c.uuid);function l(c,d){tt[c?"unshift":"push"](()=>{h[d]=c,n(1,h)})}return t.$$set=c=>{"previews"in c&&n(4,i=c.previews),"mode"in c&&n(0,r=c.mode)},t.$$.update=()=>{t.$$.dirty&2&&(h==null?void 0:h.length)>0&&h.forEach(c=>{new ow(c,{toolbar:!1,title:!1,navbar:2})})},[r,h,o,a,i,f,l]}class jN extends qe{constructor(e){super(),Ge(this,e,NN,LN,Ve,{previews:4,mode:0})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Sw;function be(){return Sw.apply(null,arguments)}function BN(t){Sw=t}function si(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function $r(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function it(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hd(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(it(t,e))return!1;return!0}function Sn(t){return t===void 0}function qi(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function La(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Tw(t,e){var n=[],i,r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function dr(t,e){for(var n in e)it(e,n)&&(t[n]=e[n]);return it(e,"toString")&&(t.toString=e.toString),it(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Pi(t,e,n,i){return $w(t,e,n,i,!0).utc()}function UN(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ze(t){return t._pf==null&&(t._pf=UN()),t._pf}var eh;Array.prototype.some?eh=Array.prototype.some:eh=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function dd(t){var e=null,n=!1,i=t._d&&!isNaN(t._d.getTime());if(i&&(e=ze(t),n=eh.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i;return t._isValid}function Bc(t){var e=Pi(NaN);return t!=null?dr(ze(e),t):ze(e).userInvalidated=!0,e}var L_=be.momentProperties=[],$u=!1;function pd(t,e){var n,i,r,o=L_.length;if(Sn(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Sn(e._i)||(t._i=e._i),Sn(e._f)||(t._f=e._f),Sn(e._l)||(t._l=e._l),Sn(e._strict)||(t._strict=e._strict),Sn(e._tzm)||(t._tzm=e._tzm),Sn(e._isUTC)||(t._isUTC=e._isUTC),Sn(e._offset)||(t._offset=e._offset),Sn(e._pf)||(t._pf=ze(e)),Sn(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)i=L_[n],r=e[i],Sn(r)||(t[i]=r);return t}function Na(t){pd(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),$u===!1&&($u=!0,be.updateOffset(this),$u=!1)}function oi(t){return t instanceof Na||t!=null&&t._isAMomentObject!=null}function kw(t){be.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Gn(t,e){var n=!0;return dr(function(){if(be.deprecationHandler!=null&&be.deprecationHandler(null,t),n){var i=[],r,o,h,a=arguments.length;for(o=0;o<a;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(h in arguments[0])it(arguments[0],h)&&(r+=h+": "+arguments[0][h]+", ");r=r.slice(0,-2)}else r=arguments[o];i.push(r)}kw(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var N_={};function Ow(t,e){be.deprecationHandler!=null&&be.deprecationHandler(t,e),N_[t]||(kw(e),N_[t]=!0)}be.suppressDeprecationWarnings=!1;be.deprecationHandler=null;function Mi(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function YN(t){var e,n;for(n in t)it(t,n)&&(e=t[n],Mi(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function th(t,e){var n=dr({},t),i;for(i in e)it(e,i)&&($r(t[i])&&$r(e[i])?(n[i]={},dr(n[i],t[i]),dr(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)it(t,i)&&!it(e,i)&&$r(t[i])&&(n[i]=dr({},n[i]));return n}function gd(t){t!=null&&this.set(t)}var nh;Object.keys?nh=Object.keys:nh=function(t){var e,n=[];for(e in t)it(t,e)&&n.push(e);return n};var WN={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function zN(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return Mi(i)?i.call(e,n):i}function Ei(t,e,n){var i=""+Math.abs(t),r=e-i.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var md=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,fl=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gu={},Vs={};function Ae(t,e,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),t&&(Vs[t]=r),e&&(Vs[e[0]]=function(){return Ei(r.apply(this,arguments),e[1],e[2])}),n&&(Vs[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function HN(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function VN(t){var e=t.match(md),n,i;for(n=0,i=e.length;n<i;n++)Vs[e[n]]?e[n]=Vs[e[n]]:e[n]=HN(e[n]);return function(r){var o="",h;for(h=0;h<i;h++)o+=Mi(e[h])?e[h].call(r,t):e[h];return o}}function xl(t,e){return t.isValid()?(e=Ew(e,t.localeData()),Gu[e]=Gu[e]||VN(e),Gu[e](t)):t.localeData().invalidDate()}function Ew(t,e){var n=5;function i(r){return e.longDateFormat(r)||r}for(fl.lastIndex=0;n>=0&&fl.test(t);)t=t.replace(fl,i),fl.lastIndex=0,n-=1;return t}var XN={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function $N(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(md).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var GN="Invalid date";function qN(){return this._invalidDate}var KN="%d",JN=/\d{1,2}/;function ZN(t){return this._ordinal.replace("%d",t)}var QN={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function e3(t,e,n,i){var r=this._relativeTime[n];return Mi(r)?r(t,e,n,i):r.replace(/%d/i,t)}function t3(t,e){var n=this._relativeTime[t>0?"future":"past"];return Mi(n)?n(e):n.replace(/%s/i,e)}var j_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function qn(t){return typeof t=="string"?j_[t]||j_[t.toLowerCase()]:void 0}function vd(t){var e={},n,i;for(i in t)it(t,i)&&(n=qn(i),n&&(e[n]=t[i]));return e}var n3={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function i3(t){var e=[],n;for(n in t)it(t,n)&&e.push({unit:n,priority:n3[n]});return e.sort(function(i,r){return i.priority-r.priority}),e}var xw=/\d/,Nn=/\d\d/,Dw=/\d{3}/,_d=/\d{4}/,Uc=/[+-]?\d{6}/,yt=/\d\d?/,Aw=/\d\d\d\d?/,Pw=/\d\d\d\d\d\d?/,Yc=/\d{1,3}/,yd=/\d{1,4}/,Wc=/[+-]?\d{1,6}/,wo=/\d+/,zc=/[+-]?\d+/,r3=/Z|[+-]\d\d:?\d\d/gi,Hc=/Z|[+-]\d\d(?::?\d\d)?/gi,s3=/[+-]?\d+(\.\d{1,3})?/,ja=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Co=/^[1-9]\d?/,bd=/^([1-9]\d|\d)/,oc;oc={};function Oe(t,e,n){oc[t]=Mi(e)?e:function(i,r){return i&&n?n:e}}function o3(t,e){return it(oc,t)?oc[t](e._strict,e._locale):new RegExp(a3(t))}function a3(t){return Vi(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,r,o){return n||i||r||o}))}function Vi(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wn(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function et(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Wn(e)),n}var ih={};function ut(t,e){var n,i=e,r;for(typeof t=="string"&&(t=[t]),qi(e)&&(i=function(o,h){h[e]=et(o)}),r=t.length,n=0;n<r;n++)ih[t[n]]=i}function Ba(t,e){ut(t,function(n,i,r,o){r._w=r._w||{},e(n,r._w,r,o)})}function l3(t,e,n){e!=null&&it(ih,t)&&ih[t](e,n._a,n,t)}function Vc(t){return t%4===0&&t%100!==0||t%400===0}var fn=0,Yi=1,gi=2,qt=3,ii=4,Wi=5,Nr=6,c3=7,u3=8;Ae("Y",0,0,function(){var t=this.year();return t<=9999?Ei(t,4):"+"+t});Ae(0,["YY",2],0,function(){return this.year()%100});Ae(0,["YYYY",4],0,"year");Ae(0,["YYYYY",5],0,"year");Ae(0,["YYYYYY",6,!0],0,"year");Oe("Y",zc);Oe("YY",yt,Nn);Oe("YYYY",yd,_d);Oe("YYYYY",Wc,Uc);Oe("YYYYYY",Wc,Uc);ut(["YYYYY","YYYYYY"],fn);ut("YYYY",function(t,e){e[fn]=t.length===2?be.parseTwoDigitYear(t):et(t)});ut("YY",function(t,e){e[fn]=be.parseTwoDigitYear(t)});ut("Y",function(t,e){e[fn]=parseInt(t,10)});function ta(t){return Vc(t)?366:365}be.parseTwoDigitYear=function(t){return et(t)+(et(t)>68?1900:2e3)};var Mw=So("FullYear",!0);function f3(){return Vc(this.year())}function So(t,e){return function(n){return n!=null?(Iw(this,t,n),be.updateOffset(this,e),this):ma(this,t)}}function ma(t,e){if(!t.isValid())return NaN;var n=t._d,i=t._isUTC;switch(e){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Iw(t,e,n){var i,r,o,h,a;if(!(!t.isValid()||isNaN(n))){switch(i=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,h=t.month(),a=t.date(),a=a===29&&h===1&&!Vc(o)?28:a,r?i.setUTCFullYear(o,h,a):i.setFullYear(o,h,a)}}function h3(t){return t=qn(t),Mi(this[t])?this[t]():this}function d3(t,e){if(typeof t=="object"){t=vd(t);var n=i3(t),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](t[n[i].unit])}else if(t=qn(t),Mi(this[t]))return this[t](e);return this}function p3(t,e){return(t%e+e)%e}var Nt;Array.prototype.indexOf?Nt=Array.prototype.indexOf:Nt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function wd(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=p3(e,12);return t+=(e-n)/12,n===1?Vc(t)?29:28:31-n%7%2}Ae("M",["MM",2],"Mo",function(){return this.month()+1});Ae("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Ae("MMMM",0,0,function(t){return this.localeData().months(this,t)});Oe("M",yt,Co);Oe("MM",yt,Nn);Oe("MMM",function(t,e){return e.monthsShortRegex(t)});Oe("MMMM",function(t,e){return e.monthsRegex(t)});ut(["M","MM"],function(t,e){e[Yi]=et(t)-1});ut(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);r!=null?e[Yi]=r:ze(n).invalidMonth=t});var g3="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Rw="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Fw=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,m3=ja,v3=ja;function _3(t,e){return t?si(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Fw).test(e)?"format":"standalone"][t.month()]:si(this._months)?this._months:this._months.standalone}function y3(t,e){return t?si(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Fw.test(e)?"format":"standalone"][t.month()]:si(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function b3(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=Pi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:null):(r=Nt.call(this._longMonthsParse,h),r!==-1?r:null):e==="MMM"?(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:(r=Nt.call(this._longMonthsParse,h),r!==-1?r:null)):(r=Nt.call(this._longMonthsParse,h),r!==-1?r:(r=Nt.call(this._shortMonthsParse,h),r!==-1?r:null))}function w3(t,e,n){var i,r,o;if(this._monthsParseExact)return b3.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Pi([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function Lw(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=et(e);else if(e=t.localeData().monthsParse(e),!qi(e))return t}var n=e,i=t.date();return i=i<29?i:Math.min(i,wd(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,i):t._d.setMonth(n,i),t}function Nw(t){return t!=null?(Lw(this,t),be.updateOffset(this,!0),this):ma(this,"Month")}function C3(){return wd(this.year(),this.month())}function S3(t){return this._monthsParseExact?(it(this,"_monthsRegex")||jw.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(it(this,"_monthsShortRegex")||(this._monthsShortRegex=m3),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function T3(t){return this._monthsParseExact?(it(this,"_monthsRegex")||jw.call(this),t?this._monthsStrictRegex:this._monthsRegex):(it(this,"_monthsRegex")||(this._monthsRegex=v3),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function jw(){function t(s,u){return u.length-s.length}var e=[],n=[],i=[],r,o,h,a;for(r=0;r<12;r++)o=Pi([2e3,r]),h=Vi(this.monthsShort(o,"")),a=Vi(this.months(o,"")),e.push(h),n.push(a),i.push(a),i.push(h);e.sort(t),n.sort(t),i.sort(t),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function k3(t,e,n,i,r,o,h){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,h),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,h),a}function va(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ac(t,e,n){var i=7+e-n,r=(7+va(t,0,i).getUTCDay()-e)%7;return-r+i-1}function Bw(t,e,n,i,r){var o=(7+n-i)%7,h=ac(t,i,r),a=1+7*(e-1)+o+h,s,u;return a<=0?(s=t-1,u=ta(s)+a):a>ta(t)?(s=t+1,u=a-ta(t)):(s=t,u=a),{year:s,dayOfYear:u}}function _a(t,e,n){var i=ac(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,o,h;return r<1?(h=t.year()-1,o=r+Xi(h,e,n)):r>Xi(t.year(),e,n)?(o=r-Xi(t.year(),e,n),h=t.year()+1):(h=t.year(),o=r),{week:o,year:h}}function Xi(t,e,n){var i=ac(t,e,n),r=ac(t+1,e,n);return(ta(t)-i+r)/7}Ae("w",["ww",2],"wo","week");Ae("W",["WW",2],"Wo","isoWeek");Oe("w",yt,Co);Oe("ww",yt,Nn);Oe("W",yt,Co);Oe("WW",yt,Nn);Ba(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=et(t)});function O3(t){return _a(t,this._week.dow,this._week.doy).week}var E3={dow:0,doy:6};function x3(){return this._week.dow}function D3(){return this._week.doy}function A3(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function P3(t){var e=_a(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Ae("d",0,"do","day");Ae("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Ae("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Ae("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Ae("e",0,0,"weekday");Ae("E",0,0,"isoWeekday");Oe("d",yt);Oe("e",yt);Oe("E",yt);Oe("dd",function(t,e){return e.weekdaysMinRegex(t)});Oe("ddd",function(t,e){return e.weekdaysShortRegex(t)});Oe("dddd",function(t,e){return e.weekdaysRegex(t)});Ba(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);r!=null?e.d=r:ze(n).invalidWeekday=t});Ba(["d","e","E"],function(t,e,n,i){e[i]=et(t)});function M3(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function I3(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Cd(t,e){return t.slice(e,7).concat(t.slice(0,e))}var R3="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Uw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),F3="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),L3=ja,N3=ja,j3=ja;function B3(t,e){var n=si(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Cd(n,this._week.dow):t?n[t.day()]:n}function U3(t){return t===!0?Cd(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Y3(t){return t===!0?Cd(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function W3(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=Pi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(r=Nt.call(this._weekdaysParse,h),r!==-1?r:null):e==="ddd"?(r=Nt.call(this._shortWeekdaysParse,h),r!==-1?r:null):(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null):e==="dddd"?(r=Nt.call(this._weekdaysParse,h),r!==-1||(r=Nt.call(this._shortWeekdaysParse,h),r!==-1)?r:(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null)):e==="ddd"?(r=Nt.call(this._shortWeekdaysParse,h),r!==-1||(r=Nt.call(this._weekdaysParse,h),r!==-1)?r:(r=Nt.call(this._minWeekdaysParse,h),r!==-1?r:null)):(r=Nt.call(this._minWeekdaysParse,h),r!==-1||(r=Nt.call(this._weekdaysParse,h),r!==-1)?r:(r=Nt.call(this._shortWeekdaysParse,h),r!==-1?r:null))}function z3(t,e,n){var i,r,o;if(this._weekdaysParseExact)return W3.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=Pi([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function H3(t){if(!this.isValid())return t!=null?this:NaN;var e=ma(this,"Day");return t!=null?(t=M3(t,this.localeData()),this.add(t-e,"d")):e}function V3(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function X3(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=I3(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function $3(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||Sd.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(it(this,"_weekdaysRegex")||(this._weekdaysRegex=L3),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function G3(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||Sd.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(it(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=N3),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function q3(t){return this._weekdaysParseExact?(it(this,"_weekdaysRegex")||Sd.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(it(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=j3),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Sd(){function t(f,l){return l.length-f.length}var e=[],n=[],i=[],r=[],o,h,a,s,u;for(o=0;o<7;o++)h=Pi([2e3,1]).day(o),a=Vi(this.weekdaysMin(h,"")),s=Vi(this.weekdaysShort(h,"")),u=Vi(this.weekdays(h,"")),e.push(a),n.push(s),i.push(u),r.push(a),r.push(s),r.push(u);e.sort(t),n.sort(t),i.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Td(){return this.hours()%12||12}function K3(){return this.hours()||24}Ae("H",["HH",2],0,"hour");Ae("h",["hh",2],0,Td);Ae("k",["kk",2],0,K3);Ae("hmm",0,0,function(){return""+Td.apply(this)+Ei(this.minutes(),2)});Ae("hmmss",0,0,function(){return""+Td.apply(this)+Ei(this.minutes(),2)+Ei(this.seconds(),2)});Ae("Hmm",0,0,function(){return""+this.hours()+Ei(this.minutes(),2)});Ae("Hmmss",0,0,function(){return""+this.hours()+Ei(this.minutes(),2)+Ei(this.seconds(),2)});function Yw(t,e){Ae(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Yw("a",!0);Yw("A",!1);function Ww(t,e){return e._meridiemParse}Oe("a",Ww);Oe("A",Ww);Oe("H",yt,bd);Oe("h",yt,Co);Oe("k",yt,Co);Oe("HH",yt,Nn);Oe("hh",yt,Nn);Oe("kk",yt,Nn);Oe("hmm",Aw);Oe("hmmss",Pw);Oe("Hmm",Aw);Oe("Hmmss",Pw);ut(["H","HH"],qt);ut(["k","kk"],function(t,e,n){var i=et(t);e[qt]=i===24?0:i});ut(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});ut(["h","hh"],function(t,e,n){e[qt]=et(t),ze(n).bigHour=!0});ut("hmm",function(t,e,n){var i=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i)),ze(n).bigHour=!0});ut("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i,2)),e[Wi]=et(t.substr(r)),ze(n).bigHour=!0});ut("Hmm",function(t,e,n){var i=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i))});ut("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[qt]=et(t.substr(0,i)),e[ii]=et(t.substr(i,2)),e[Wi]=et(t.substr(r))});function J3(t){return(t+"").toLowerCase().charAt(0)==="p"}var Z3=/[ap]\.?m?\.?/i,Q3=So("Hours",!0);function ej(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var zw={calendar:WN,longDateFormat:XN,invalidDate:GN,ordinal:KN,dayOfMonthOrdinalParse:JN,relativeTime:QN,months:g3,monthsShort:Rw,week:E3,weekdays:R3,weekdaysMin:F3,weekdaysShort:Uw,meridiemParse:Z3},wt={},Lo={},ya;function tj(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function B_(t){return t&&t.toLowerCase().replace("_","-")}function nj(t){for(var e=0,n,i,r,o;e<t.length;){for(o=B_(t[e]).split("-"),n=o.length,i=B_(t[e+1]),i=i?i.split("-"):null;n>0;){if(r=Xc(o.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&tj(o,i)>=n-1)break;n--}e++}return ya}function ij(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Xc(t){var e=null,n;if(wt[t]===void 0&&typeof Pl<"u"&&Pl&&Pl.exports&&ij(t))try{e=ya._abbr,n=require,n("./locale/"+t),_r(e)}catch{wt[t]=null}return wt[t]}function _r(t,e){var n;return t&&(Sn(e)?n=Ki(t):n=kd(t,e),n?ya=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ya._abbr}function kd(t,e){if(e!==null){var n,i=zw;if(e.abbr=t,wt[t]!=null)Ow("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=wt[t]._config;else if(e.parentLocale!=null)if(wt[e.parentLocale]!=null)i=wt[e.parentLocale]._config;else if(n=Xc(e.parentLocale),n!=null)i=n._config;else return Lo[e.parentLocale]||(Lo[e.parentLocale]=[]),Lo[e.parentLocale].push({name:t,config:e}),null;return wt[t]=new gd(th(i,e)),Lo[t]&&Lo[t].forEach(function(r){kd(r.name,r.config)}),_r(t),wt[t]}else return delete wt[t],null}function rj(t,e){if(e!=null){var n,i,r=zw;wt[t]!=null&&wt[t].parentLocale!=null?wt[t].set(th(wt[t]._config,e)):(i=Xc(t),i!=null&&(r=i._config),e=th(r,e),i==null&&(e.abbr=t),n=new gd(e),n.parentLocale=wt[t],wt[t]=n),_r(t)}else wt[t]!=null&&(wt[t].parentLocale!=null?(wt[t]=wt[t].parentLocale,t===_r()&&_r(t)):wt[t]!=null&&delete wt[t]);return wt[t]}function Ki(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ya;if(!si(t)){if(e=Xc(t),e)return e;t=[t]}return nj(t)}function sj(){return nh(wt)}function Od(t){var e,n=t._a;return n&&ze(t).overflow===-2&&(e=n[Yi]<0||n[Yi]>11?Yi:n[gi]<1||n[gi]>wd(n[fn],n[Yi])?gi:n[qt]<0||n[qt]>24||n[qt]===24&&(n[ii]!==0||n[Wi]!==0||n[Nr]!==0)?qt:n[ii]<0||n[ii]>59?ii:n[Wi]<0||n[Wi]>59?Wi:n[Nr]<0||n[Nr]>999?Nr:-1,ze(t)._overflowDayOfYear&&(e<fn||e>gi)&&(e=gi),ze(t)._overflowWeeks&&e===-1&&(e=c3),ze(t)._overflowWeekday&&e===-1&&(e=u3),ze(t).overflow=e),t}var oj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lj=/Z|[+-]\d\d(?::?\d\d)?/,hl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],qu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],cj=/^\/?Date\((-?\d+)/i,uj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fj={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Hw(t){var e,n,i=t._i,r=oj.exec(i)||aj.exec(i),o,h,a,s,u=hl.length,f=qu.length;if(r){for(ze(t).iso=!0,e=0,n=u;e<n;e++)if(hl[e][1].exec(r[1])){h=hl[e][0],o=hl[e][2]!==!1;break}if(h==null){t._isValid=!1;return}if(r[3]){for(e=0,n=f;e<n;e++)if(qu[e][1].exec(r[3])){a=(r[2]||" ")+qu[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(r[4])if(lj.exec(r[4]))s="Z";else{t._isValid=!1;return}t._f=h+(a||"")+(s||""),xd(t)}else t._isValid=!1}function hj(t,e,n,i,r,o){var h=[dj(t),Rw.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&h.push(parseInt(o,10)),h}function dj(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function pj(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function gj(t,e,n){if(t){var i=Uw.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return ze(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function mj(t,e,n){if(t)return fj[t];if(e)return 0;var i=parseInt(n,10),r=i%100,o=(i-r)/100;return o*60+r}function Vw(t){var e=uj.exec(pj(t._i)),n;if(e){if(n=hj(e[4],e[3],e[2],e[5],e[6],e[7]),!gj(e[1],n,t))return;t._a=n,t._tzm=mj(e[8],e[9],e[10]),t._d=va.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ze(t).rfc2822=!0}else t._isValid=!1}function vj(t){var e=cj.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Hw(t),t._isValid===!1)delete t._isValid;else return;if(Vw(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:be.createFromInputFallback(t)}be.createFromInputFallback=Gn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function ks(t,e,n){return t??e??n}function _j(t){var e=new Date(be.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ed(t){var e,n,i=[],r,o,h;if(!t._d){for(r=_j(t),t._w&&t._a[gi]==null&&t._a[Yi]==null&&yj(t),t._dayOfYear!=null&&(h=ks(t._a[fn],r[fn]),(t._dayOfYear>ta(h)||t._dayOfYear===0)&&(ze(t)._overflowDayOfYear=!0),n=va(h,0,t._dayOfYear),t._a[Yi]=n.getUTCMonth(),t._a[gi]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[qt]===24&&t._a[ii]===0&&t._a[Wi]===0&&t._a[Nr]===0&&(t._nextDay=!0,t._a[qt]=0),t._d=(t._useUTC?va:k3).apply(null,i),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[qt]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(ze(t).weekdayMismatch=!0)}}function yj(t){var e,n,i,r,o,h,a,s,u;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,h=4,n=ks(e.GG,t._a[fn],_a(_t(),1,4).year),i=ks(e.W,1),r=ks(e.E,1),(r<1||r>7)&&(s=!0)):(o=t._locale._week.dow,h=t._locale._week.doy,u=_a(_t(),o,h),n=ks(e.gg,t._a[fn],u.year),i=ks(e.w,u.week),e.d!=null?(r=e.d,(r<0||r>6)&&(s=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(s=!0)):r=o),i<1||i>Xi(n,o,h)?ze(t)._overflowWeeks=!0:s!=null?ze(t)._overflowWeekday=!0:(a=Bw(n,i,r,o,h),t._a[fn]=a.year,t._dayOfYear=a.dayOfYear)}be.ISO_8601=function(){};be.RFC_2822=function(){};function xd(t){if(t._f===be.ISO_8601){Hw(t);return}if(t._f===be.RFC_2822){Vw(t);return}t._a=[],ze(t).empty=!0;var e=""+t._i,n,i,r,o,h,a=e.length,s=0,u,f;for(r=Ew(t._f,t._locale).match(md)||[],f=r.length,n=0;n<f;n++)o=r[n],i=(e.match(o3(o,t))||[])[0],i&&(h=e.substr(0,e.indexOf(i)),h.length>0&&ze(t).unusedInput.push(h),e=e.slice(e.indexOf(i)+i.length),s+=i.length),Vs[o]?(i?ze(t).empty=!1:ze(t).unusedTokens.push(o),l3(o,i,t)):t._strict&&!i&&ze(t).unusedTokens.push(o);ze(t).charsLeftOver=a-s,e.length>0&&ze(t).unusedInput.push(e),t._a[qt]<=12&&ze(t).bigHour===!0&&t._a[qt]>0&&(ze(t).bigHour=void 0),ze(t).parsedDateParts=t._a.slice(0),ze(t).meridiem=t._meridiem,t._a[qt]=bj(t._locale,t._a[qt],t._meridiem),u=ze(t).era,u!==null&&(t._a[fn]=t._locale.erasConvertYear(u,t._a[fn])),Ed(t),Od(t)}function bj(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function wj(t){var e,n,i,r,o,h,a=!1,s=t._f.length;if(s===0){ze(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<s;r++)o=0,h=!1,e=pd({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],xd(e),dd(e)&&(h=!0),o+=ze(e).charsLeftOver,o+=ze(e).unusedTokens.length*10,ze(e).score=o,a?o<i&&(i=o,n=e):(i==null||o<i||h)&&(i=o,n=e,h&&(a=!0));dr(t,n||e)}function Cj(t){if(!t._d){var e=vd(t._i),n=e.day===void 0?e.date:e.day;t._a=Tw([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Ed(t)}}function Sj(t){var e=new Na(Od(Xw(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Xw(t){var e=t._i,n=t._f;return t._locale=t._locale||Ki(t._l),e===null||n===void 0&&e===""?Bc({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),oi(e)?new Na(Od(e)):(La(e)?t._d=e:si(n)?wj(t):n?xd(t):Tj(t),dd(t)||(t._d=null),t))}function Tj(t){var e=t._i;Sn(e)?t._d=new Date(be.now()):La(e)?t._d=new Date(e.valueOf()):typeof e=="string"?vj(t):si(e)?(t._a=Tw(e.slice(0),function(n){return parseInt(n,10)}),Ed(t)):$r(e)?Cj(t):qi(e)?t._d=new Date(e):be.createFromInputFallback(t)}function $w(t,e,n,i,r){var o={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),($r(t)&&hd(t)||si(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,Sj(o)}function _t(t,e,n,i){return $w(t,e,n,i,!1)}var kj=Gn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Bc()}),Oj=Gn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Bc()});function Gw(t,e){var n,i;if(e.length===1&&si(e[0])&&(e=e[0]),!e.length)return _t();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function Ej(){var t=[].slice.call(arguments,0);return Gw("isBefore",t)}function xj(){var t=[].slice.call(arguments,0);return Gw("isAfter",t)}var Dj=function(){return Date.now?Date.now():+new Date},No=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Aj(t){var e,n=!1,i,r=No.length;for(e in t)if(it(t,e)&&!(Nt.call(No,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<r;++i)if(t[No[i]]){if(n)return!1;parseFloat(t[No[i]])!==et(t[No[i]])&&(n=!0)}return!0}function Pj(){return this._isValid}function Mj(){return ai(NaN)}function $c(t){var e=vd(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,h=e.day||0,a=e.hour||0,s=e.minute||0,u=e.second||0,f=e.millisecond||0;this._isValid=Aj(e),this._milliseconds=+f+u*1e3+s*6e4+a*1e3*60*60,this._days=+h+o*7,this._months=+r+i*3+n*12,this._data={},this._locale=Ki(),this._bubble()}function Dl(t){return t instanceof $c}function rh(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Ij(t,e,n){var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,h;for(h=0;h<i;h++)(n&&t[h]!==e[h]||!n&&et(t[h])!==et(e[h]))&&o++;return o+r}function qw(t,e){Ae(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Ei(~~(n/60),2)+e+Ei(~~n%60,2)})}qw("Z",":");qw("ZZ","");Oe("Z",Hc);Oe("ZZ",Hc);ut(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Dd(Hc,t)});var Rj=/([\+\-]|\d\d)/gi;function Dd(t,e){var n=(e||"").match(t),i,r,o;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(Rj)||["-",0,0],o=+(r[1]*60)+et(r[2]),o===0?0:r[0]==="+"?o:-o)}function Ad(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(oi(t)||La(t)?t.valueOf():_t(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),be.updateOffset(n,!1),n):_t(t).local()}function sh(t){return-Math.round(t._d.getTimezoneOffset())}be.updateOffset=function(){};function Fj(t,e,n){var i=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Dd(Hc,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=sh(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?Zw(this,ai(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:sh(this)}function Lj(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Nj(t){return this.utcOffset(0,t)}function jj(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(sh(this),"m")),this}function Bj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Dd(r3,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Uj(t){return this.isValid()?(t=t?_t(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Yj(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wj(){if(!Sn(this._isDSTShifted))return this._isDSTShifted;var t={},e;return pd(t,this),t=Xw(t),t._a?(e=t._isUTC?Pi(t._a):_t(t._a),this._isDSTShifted=this.isValid()&&Ij(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function zj(){return this.isValid()?!this._isUTC:!1}function Hj(){return this.isValid()?this._isUTC:!1}function Kw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Vj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ai(t,e){var n=t,i=null,r,o,h;return Dl(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:qi(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=Vj.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:et(i[gi])*r,h:et(i[qt])*r,m:et(i[ii])*r,s:et(i[Wi])*r,ms:et(rh(i[Nr]*1e3))*r}):(i=Xj.exec(t))?(r=i[1]==="-"?-1:1,n={y:xr(i[2],r),M:xr(i[3],r),w:xr(i[4],r),d:xr(i[5],r),h:xr(i[6],r),m:xr(i[7],r),s:xr(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(h=$j(_t(n.from),_t(n.to)),n={},n.ms=h.milliseconds,n.M=h.months),o=new $c(n),Dl(t)&&it(t,"_locale")&&(o._locale=t._locale),Dl(t)&&it(t,"_isValid")&&(o._isValid=t._isValid),o}ai.fn=$c.prototype;ai.invalid=Mj;function xr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function U_(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function $j(t,e){var n;return t.isValid()&&e.isValid()?(e=Ad(e,t),t.isBefore(e)?n=U_(t,e):(n=U_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Jw(t,e){return function(n,i){var r,o;return i!==null&&!isNaN(+i)&&(Ow(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),r=ai(n,i),Zw(this,r,t),this}}function Zw(t,e,n,i){var r=e._milliseconds,o=rh(e._days),h=rh(e._months);t.isValid()&&(i=i??!0,h&&Lw(t,ma(t,"Month")+h*n),o&&Iw(t,"Date",ma(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&be.updateOffset(t,o||h))}var Gj=Jw(1,"add"),qj=Jw(-1,"subtract");function Qw(t){return typeof t=="string"||t instanceof String}function Kj(t){return oi(t)||La(t)||Qw(t)||qi(t)||Zj(t)||Jj(t)||t===null||t===void 0}function Jj(t){var e=$r(t)&&!hd(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,h=i.length;for(r=0;r<h;r+=1)o=i[r],n=n||it(t,o);return e&&n}function Zj(t){var e=si(t),n=!1;return e&&(n=t.filter(function(i){return!qi(i)&&Qw(t)}).length===0),e&&n}function Qj(t){var e=$r(t)&&!hd(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<i.length;r+=1)o=i[r],n=n||it(t,o);return e&&n}function eB(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function tB(t,e){arguments.length===1&&(arguments[0]?Kj(arguments[0])?(t=arguments[0],e=void 0):Qj(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||_t(),i=Ad(n,this).startOf("day"),r=be.calendarFormat(this,i)||"sameElse",o=e&&(Mi(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,_t(n)))}function nB(){return new Na(this)}function iB(t,e){var n=oi(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function rB(t,e){var n=oi(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function sB(t,e,n,i){var r=oi(t)?t:_t(t),o=oi(e)?e:_t(e);return this.isValid()&&r.isValid()&&o.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function oB(t,e){var n=oi(t)?t:_t(t),i;return this.isValid()&&n.isValid()?(e=qn(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function aB(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function lB(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function cB(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(i=Ad(t,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=qn(e),e){case"year":o=Al(this,i)/12;break;case"month":o=Al(this,i);break;case"quarter":o=Al(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:Wn(o)}function Al(t,e){if(t.date()<e.date())return-Al(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,o;return e-i<0?(r=t.clone().add(n-1,"months"),o=(e-i)/(i-r)):(r=t.clone().add(n+1,"months"),o=(e-i)/(r-i)),-(n+o)||0}be.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";be.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function uB(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fB(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?xl(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Mi(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",xl(n,"Z")):xl(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function hB(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+i+r+o)}function dB(t){t||(t=this.isUtc()?be.defaultFormatUtc:be.defaultFormat);var e=xl(this,t);return this.localeData().postformat(e)}function pB(t,e){return this.isValid()&&(oi(t)&&t.isValid()||_t(t).isValid())?ai({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function gB(t){return this.from(_t(),t)}function mB(t,e){return this.isValid()&&(oi(t)&&t.isValid()||_t(t).isValid())?ai({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function vB(t){return this.to(_t(),t)}function e1(t){var e;return t===void 0?this._locale._abbr:(e=Ki(t),e!=null&&(this._locale=e),this)}var t1=Gn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function n1(){return this._locale}var lc=1e3,Xs=60*lc,cc=60*Xs,i1=(365*400+97)*24*cc;function $s(t,e){return(t%e+e)%e}function r1(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-i1:new Date(t,e,n).valueOf()}function s1(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-i1:Date.UTC(t,e,n)}function _B(t){var e,n;if(t=qn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?s1:r1,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=$s(e+(this._isUTC?0:this.utcOffset()*Xs),cc);break;case"minute":e=this._d.valueOf(),e-=$s(e,Xs);break;case"second":e=this._d.valueOf(),e-=$s(e,lc);break}return this._d.setTime(e),be.updateOffset(this,!0),this}function yB(t){var e,n;if(t=qn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?s1:r1,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cc-$s(e+(this._isUTC?0:this.utcOffset()*Xs),cc)-1;break;case"minute":e=this._d.valueOf(),e+=Xs-$s(e,Xs)-1;break;case"second":e=this._d.valueOf(),e+=lc-$s(e,lc)-1;break}return this._d.setTime(e),be.updateOffset(this,!0),this}function bB(){return this._d.valueOf()-(this._offset||0)*6e4}function wB(){return Math.floor(this.valueOf()/1e3)}function CB(){return new Date(this.valueOf())}function SB(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function TB(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function kB(){return this.isValid()?this.toISOString():null}function OB(){return dd(this)}function EB(){return dr({},ze(this))}function xB(){return ze(this).overflow}function DB(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ae("N",0,0,"eraAbbr");Ae("NN",0,0,"eraAbbr");Ae("NNN",0,0,"eraAbbr");Ae("NNNN",0,0,"eraName");Ae("NNNNN",0,0,"eraNarrow");Ae("y",["y",1],"yo","eraYear");Ae("y",["yy",2],0,"eraYear");Ae("y",["yyy",3],0,"eraYear");Ae("y",["yyyy",4],0,"eraYear");Oe("N",Pd);Oe("NN",Pd);Oe("NNN",Pd);Oe("NNNN",UB);Oe("NNNNN",YB);ut(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?ze(n).era=r:ze(n).invalidEra=t});Oe("y",wo);Oe("yy",wo);Oe("yyy",wo);Oe("yyyy",wo);Oe("yo",WB);ut(["y","yy","yyy","yyyy"],fn);ut(["yo"],function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[fn]=n._locale.eraYearOrdinalParse(t,r):e[fn]=parseInt(t,10)});function AB(t,e){var n,i,r,o=this._eras||Ki("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=be(o[n].since).startOf("day"),o[n].since=r.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=be(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf();break}}return o}function PB(t,e,n){var i,r,o=this.eras(),h,a,s;for(t=t.toUpperCase(),i=0,r=o.length;i<r;++i)if(h=o[i].name.toUpperCase(),a=o[i].abbr.toUpperCase(),s=o[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[i];break;case"NNNN":if(h===t)return o[i];break;case"NNNNN":if(s===t)return o[i];break}else if([h,a,s].indexOf(t)>=0)return o[i]}function MB(t,e){var n=t.since<=t.until?1:-1;return e===void 0?be(t.since).year():be(t.since).year()+(e-t.offset)*n}function IB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function RB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function FB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function LB(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.clone().startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-be(r[t].since).year())*n+r[t].offset;return this.year()}function NB(t){return it(this,"_erasNameRegex")||Md.call(this),t?this._erasNameRegex:this._erasRegex}function jB(t){return it(this,"_erasAbbrRegex")||Md.call(this),t?this._erasAbbrRegex:this._erasRegex}function BB(t){return it(this,"_erasNarrowRegex")||Md.call(this),t?this._erasNarrowRegex:this._erasRegex}function Pd(t,e){return e.erasAbbrRegex(t)}function UB(t,e){return e.erasNameRegex(t)}function YB(t,e){return e.erasNarrowRegex(t)}function WB(t,e){return e._eraYearOrdinalRegex||wo}function Md(){var t=[],e=[],n=[],i=[],r,o,h,a,s,u=this.eras();for(r=0,o=u.length;r<o;++r)h=Vi(u[r].name),a=Vi(u[r].abbr),s=Vi(u[r].narrow),e.push(h),t.push(a),n.push(s),i.push(h),i.push(a),i.push(s);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Ae(0,["gg",2],0,function(){return this.weekYear()%100});Ae(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Gc(t,e){Ae(0,[t,t.length],0,e)}Gc("gggg","weekYear");Gc("ggggg","weekYear");Gc("GGGG","isoWeekYear");Gc("GGGGG","isoWeekYear");Oe("G",zc);Oe("g",zc);Oe("GG",yt,Nn);Oe("gg",yt,Nn);Oe("GGGG",yd,_d);Oe("gggg",yd,_d);Oe("GGGGG",Wc,Uc);Oe("ggggg",Wc,Uc);Ba(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=et(t)});Ba(["gg","GG"],function(t,e,n,i){e[i]=be.parseTwoDigitYear(t)});function zB(t){return o1.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function HB(t){return o1.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function VB(){return Xi(this.year(),1,4)}function XB(){return Xi(this.isoWeekYear(),1,4)}function $B(){var t=this.localeData()._week;return Xi(this.year(),t.dow,t.doy)}function GB(){var t=this.localeData()._week;return Xi(this.weekYear(),t.dow,t.doy)}function o1(t,e,n,i,r){var o;return t==null?_a(this,i,r).year:(o=Xi(t,i,r),e>o&&(e=o),qB.call(this,t,e,n,i,r))}function qB(t,e,n,i,r){var o=Bw(t,e,n,i,r),h=va(o.year,0,o.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}Ae("Q",0,"Qo","quarter");Oe("Q",xw);ut("Q",function(t,e){e[Yi]=(et(t)-1)*3});function KB(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Ae("D",["DD",2],"Do","date");Oe("D",yt,Co);Oe("DD",yt,Nn);Oe("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ut(["D","DD"],gi);ut("Do",function(t,e){e[gi]=et(t.match(yt)[0])});var a1=So("Date",!0);Ae("DDD",["DDDD",3],"DDDo","dayOfYear");Oe("DDD",Yc);Oe("DDDD",Dw);ut(["DDD","DDDD"],function(t,e,n){n._dayOfYear=et(t)});function JB(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Ae("m",["mm",2],0,"minute");Oe("m",yt,bd);Oe("mm",yt,Nn);ut(["m","mm"],ii);var ZB=So("Minutes",!1);Ae("s",["ss",2],0,"second");Oe("s",yt,bd);Oe("ss",yt,Nn);ut(["s","ss"],Wi);var QB=So("Seconds",!1);Ae("S",0,0,function(){return~~(this.millisecond()/100)});Ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ae(0,["SSS",3],0,"millisecond");Ae(0,["SSSS",4],0,function(){return this.millisecond()*10});Ae(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ae(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ae(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ae(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ae(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Oe("S",Yc,xw);Oe("SS",Yc,Nn);Oe("SSS",Yc,Dw);var pr,l1;for(pr="SSSS";pr.length<=9;pr+="S")Oe(pr,wo);function e4(t,e){e[Nr]=et(("0."+t)*1e3)}for(pr="S";pr.length<=9;pr+="S")ut(pr,e4);l1=So("Milliseconds",!1);Ae("z",0,0,"zoneAbbr");Ae("zz",0,0,"zoneName");function t4(){return this._isUTC?"UTC":""}function n4(){return this._isUTC?"Coordinated Universal Time":""}var ve=Na.prototype;ve.add=Gj;ve.calendar=tB;ve.clone=nB;ve.diff=cB;ve.endOf=yB;ve.format=dB;ve.from=pB;ve.fromNow=gB;ve.to=mB;ve.toNow=vB;ve.get=h3;ve.invalidAt=xB;ve.isAfter=iB;ve.isBefore=rB;ve.isBetween=sB;ve.isSame=oB;ve.isSameOrAfter=aB;ve.isSameOrBefore=lB;ve.isValid=OB;ve.lang=t1;ve.locale=e1;ve.localeData=n1;ve.max=Oj;ve.min=kj;ve.parsingFlags=EB;ve.set=d3;ve.startOf=_B;ve.subtract=qj;ve.toArray=SB;ve.toObject=TB;ve.toDate=CB;ve.toISOString=fB;ve.inspect=hB;typeof Symbol<"u"&&Symbol.for!=null&&(ve[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ve.toJSON=kB;ve.toString=uB;ve.unix=wB;ve.valueOf=bB;ve.creationData=DB;ve.eraName=IB;ve.eraNarrow=RB;ve.eraAbbr=FB;ve.eraYear=LB;ve.year=Mw;ve.isLeapYear=f3;ve.weekYear=zB;ve.isoWeekYear=HB;ve.quarter=ve.quarters=KB;ve.month=Nw;ve.daysInMonth=C3;ve.week=ve.weeks=A3;ve.isoWeek=ve.isoWeeks=P3;ve.weeksInYear=$B;ve.weeksInWeekYear=GB;ve.isoWeeksInYear=VB;ve.isoWeeksInISOWeekYear=XB;ve.date=a1;ve.day=ve.days=H3;ve.weekday=V3;ve.isoWeekday=X3;ve.dayOfYear=JB;ve.hour=ve.hours=Q3;ve.minute=ve.minutes=ZB;ve.second=ve.seconds=QB;ve.millisecond=ve.milliseconds=l1;ve.utcOffset=Fj;ve.utc=Nj;ve.local=jj;ve.parseZone=Bj;ve.hasAlignedHourOffset=Uj;ve.isDST=Yj;ve.isLocal=zj;ve.isUtcOffset=Hj;ve.isUtc=Kw;ve.isUTC=Kw;ve.zoneAbbr=t4;ve.zoneName=n4;ve.dates=Gn("dates accessor is deprecated. Use date instead.",a1);ve.months=Gn("months accessor is deprecated. Use month instead",Nw);ve.years=Gn("years accessor is deprecated. Use year instead",Mw);ve.zone=Gn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Lj);ve.isDSTShifted=Gn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wj);function i4(t){return _t(t*1e3)}function r4(){return _t.apply(null,arguments).parseZone()}function c1(t){return t}var rt=gd.prototype;rt.calendar=zN;rt.longDateFormat=$N;rt.invalidDate=qN;rt.ordinal=ZN;rt.preparse=c1;rt.postformat=c1;rt.relativeTime=e3;rt.pastFuture=t3;rt.set=YN;rt.eras=AB;rt.erasParse=PB;rt.erasConvertYear=MB;rt.erasAbbrRegex=jB;rt.erasNameRegex=NB;rt.erasNarrowRegex=BB;rt.months=_3;rt.monthsShort=y3;rt.monthsParse=w3;rt.monthsRegex=T3;rt.monthsShortRegex=S3;rt.week=O3;rt.firstDayOfYear=D3;rt.firstDayOfWeek=x3;rt.weekdays=B3;rt.weekdaysMin=Y3;rt.weekdaysShort=U3;rt.weekdaysParse=z3;rt.weekdaysRegex=$3;rt.weekdaysShortRegex=G3;rt.weekdaysMinRegex=q3;rt.isPM=J3;rt.meridiem=ej;function uc(t,e,n,i){var r=Ki(),o=Pi().set(i,e);return r[n](o,t)}function u1(t,e,n){if(qi(t)&&(e=t,t=void 0),t=t||"",e!=null)return uc(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=uc(t,i,n,"month");return r}function Id(t,e,n,i){typeof t=="boolean"?(qi(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,qi(e)&&(n=e,e=void 0),e=e||"");var r=Ki(),o=t?r._week.dow:0,h,a=[];if(n!=null)return uc(e,(n+o)%7,i,"day");for(h=0;h<7;h++)a[h]=uc(e,(h+o)%7,i,"day");return a}function s4(t,e){return u1(t,e,"months")}function o4(t,e){return u1(t,e,"monthsShort")}function a4(t,e,n){return Id(t,e,n,"weekdays")}function l4(t,e,n){return Id(t,e,n,"weekdaysShort")}function c4(t,e,n){return Id(t,e,n,"weekdaysMin")}_r("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=et(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});be.lang=Gn("moment.lang is deprecated. Use moment.locale instead.",_r);be.langData=Gn("moment.langData is deprecated. Use moment.localeData instead.",Ki);var Fi=Math.abs;function u4(){var t=this._data;return this._milliseconds=Fi(this._milliseconds),this._days=Fi(this._days),this._months=Fi(this._months),t.milliseconds=Fi(t.milliseconds),t.seconds=Fi(t.seconds),t.minutes=Fi(t.minutes),t.hours=Fi(t.hours),t.months=Fi(t.months),t.years=Fi(t.years),this}function f1(t,e,n,i){var r=ai(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function f4(t,e){return f1(this,t,e,1)}function h4(t,e){return f1(this,t,e,-1)}function Y_(t){return t<0?Math.floor(t):Math.ceil(t)}function d4(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,r,o,h,a,s;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=Y_(oh(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,r=Wn(t/1e3),i.seconds=r%60,o=Wn(r/60),i.minutes=o%60,h=Wn(o/60),i.hours=h%24,e+=Wn(h/24),s=Wn(h1(e)),n+=s,e-=Y_(oh(s)),a=Wn(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function h1(t){return t*4800/146097}function oh(t){return t*146097/4800}function p4(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=qn(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+h1(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(oh(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function Ji(t){return function(){return this.as(t)}}var d1=Ji("ms"),g4=Ji("s"),m4=Ji("m"),v4=Ji("h"),_4=Ji("d"),y4=Ji("w"),b4=Ji("M"),w4=Ji("Q"),C4=Ji("y"),S4=d1;function T4(){return ai(this)}function k4(t){return t=qn(t),this.isValid()?this[t+"s"]():NaN}function rs(t){return function(){return this.isValid()?this._data[t]:NaN}}var O4=rs("milliseconds"),E4=rs("seconds"),x4=rs("minutes"),D4=rs("hours"),A4=rs("days"),P4=rs("months"),M4=rs("years");function I4(){return Wn(this.days()/7)}var Li=Math.round,Ms={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function R4(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function F4(t,e,n,i){var r=ai(t).abs(),o=Li(r.as("s")),h=Li(r.as("m")),a=Li(r.as("h")),s=Li(r.as("d")),u=Li(r.as("M")),f=Li(r.as("w")),l=Li(r.as("y")),c=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||h<=1&&["m"]||h<n.m&&["mm",h]||a<=1&&["h"]||a<n.h&&["hh",a]||s<=1&&["d"]||s<n.d&&["dd",s];return n.w!=null&&(c=c||f<=1&&["w"]||f<n.w&&["ww",f]),c=c||u<=1&&["M"]||u<n.M&&["MM",u]||l<=1&&["y"]||["yy",l],c[2]=e,c[3]=+t>0,c[4]=i,R4.apply(null,c)}function L4(t){return t===void 0?Li:typeof t=="function"?(Li=t,!0):!1}function N4(t,e){return Ms[t]===void 0?!1:e===void 0?Ms[t]:(Ms[t]=e,t==="s"&&(Ms.ss=e-1),!0)}function j4(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Ms,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},Ms,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),o=F4(this,!n,i,r),n&&(o=r.pastFuture(+this,o)),r.postformat(o)}var Ku=Math.abs;function vs(t){return(t>0)-(t<0)||+t}function qc(){if(!this.isValid())return this.localeData().invalidDate();var t=Ku(this._milliseconds)/1e3,e=Ku(this._days),n=Ku(this._months),i,r,o,h,a=this.asSeconds(),s,u,f,l;return a?(i=Wn(t/60),r=Wn(i/60),t%=60,i%=60,o=Wn(n/12),n%=12,h=t?t.toFixed(3).replace(/\.?0+$/,""):"",s=a<0?"-":"",u=vs(this._months)!==vs(a)?"-":"",f=vs(this._days)!==vs(a)?"-":"",l=vs(this._milliseconds)!==vs(a)?"-":"",s+"P"+(o?u+o+"Y":"")+(n?u+n+"M":"")+(e?f+e+"D":"")+(r||i||t?"T":"")+(r?l+r+"H":"")+(i?l+i+"M":"")+(t?l+h+"S":"")):"P0D"}var nt=$c.prototype;nt.isValid=Pj;nt.abs=u4;nt.add=f4;nt.subtract=h4;nt.as=p4;nt.asMilliseconds=d1;nt.asSeconds=g4;nt.asMinutes=m4;nt.asHours=v4;nt.asDays=_4;nt.asWeeks=y4;nt.asMonths=b4;nt.asQuarters=w4;nt.asYears=C4;nt.valueOf=S4;nt._bubble=d4;nt.clone=T4;nt.get=k4;nt.milliseconds=O4;nt.seconds=E4;nt.minutes=x4;nt.hours=D4;nt.days=A4;nt.weeks=I4;nt.months=P4;nt.years=M4;nt.humanize=j4;nt.toISOString=qc;nt.toString=qc;nt.toJSON=qc;nt.locale=e1;nt.localeData=n1;nt.toIsoString=Gn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qc);nt.lang=t1;Ae("X",0,0,"unix");Ae("x",0,0,"valueOf");Oe("x",zc);Oe("X",s3);ut("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});ut("x",function(t,e,n){n._d=new Date(et(t))});//! moment.js
be.version="2.30.1";BN(_t);be.fn=ve;be.min=Ej;be.max=xj;be.now=Dj;be.utc=Pi;be.unix=i4;be.months=s4;be.isDate=La;be.locale=_r;be.invalid=Bc;be.duration=ai;be.isMoment=oi;be.weekdays=a4;be.parseZone=r4;be.localeData=Ki;be.isDuration=Dl;be.monthsShort=o4;be.weekdaysMin=c4;be.defineLocale=kd;be.updateLocale=rj;be.locales=sj;be.weekdaysShort=l4;be.normalizeUnits=qn;be.relativeTimeRounding=L4;be.relativeTimeThreshold=N4;be.calendarFormat=eB;be.prototype=ve;be.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function W_(t,e,n){const i=t.slice();return i[8]=e[n],i}function z_(t,e,n){const i=t.slice();return i[11]=e[n],i}function B4(t){let e;return{c(){e=E("div"),e.innerHTML='<h2 class="flex p-5 justify-center"> .</h2> <a href="/member/login.html" class="btn primary-btn btn-lg max-w-lg w-full"> </a>',S(e,"class","flex flex-col justify-center items-center")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function U4(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m={ctx:t,current:null,token:null,hasCatch:!1,pending:X4,then:W4,catch:Y4,value:7};return Gs(c=t[3],m),{c(){e=E("div"),n=E("select"),i=E("option"),i.textContent=" 1",r=E("option"),r.textContent=" 3",o=E("option"),o.textContent=" 5",h=E("option"),h.textContent=" 6",a=E("option"),a.textContent=" 9",s=E("option"),s.textContent=" 12",u=E("option"),u.textContent=" 2",f=V(),l=Je(),m.block.c(),i.__value=1,Re(i,i.__value),r.__value=3,Re(r,r.__value),o.__value=5,Re(o,o.__value),h.__value=6,Re(h,h.__value),a.__value=9,Re(a,a.__value),s.__value=12,Re(s,s.__value),u.__value=24,Re(u,u.__value),S(n,"class","block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 select"),t[2]===void 0&&zt(()=>t[5].call(n)),S(e,"class","mb-4")},m(g,v){U(g,e,v),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(n,s),k(n,u),wi(n,t[2],!0),U(g,f,v),U(g,l,v),m.block.m(g,m.anchor=v),m.mount=()=>l.parentNode,m.anchor=l,d||(p=[Z(n,"change",t[5]),Z(n,"change",t[4])],d=!0)},p(g,v){t=g,v&4&&wi(n,t[2]),m.ctx=t,v&8&&c!==(c=t[3])&&Gs(c,m)||fh(m,t,v)},d(g){g&&(j(e),j(f),j(l)),m.block.d(g),m.token=null,m=null,d=!1,Ue(p)}}}function Y4(t){return{c:ge,m:ge,p:ge,d:ge}}function W4(t){let e=console.log({response:t[7]})+"",n,i,r;function o(s,u){return s[7].error?V4:s[7].count?H4:z4}let h=o(t),a=h(t);return{c(){n=we(e),i=V(),r=E("div"),a.c()},m(s,u){U(s,n,u),U(s,i,u),U(s,r,u),a.m(r,null)},p(s,u){u&8&&e!==(e=console.log({response:s[7]})+"")&&He(n,e),h===(h=o(s))&&a?a.p(s,u):(a.d(1),a=h(s),a&&(a.c(),a.m(r,null)))},d(s){s&&(j(n),j(i),j(r)),a.d()}}}function z4(t){let e;return{c(){e=E("div"),e.textContent="  .",S(e,"class","text-center py-8 text-gray-500")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function H4(t){let e,n=Fe(t[7].data),i=[];for(let r=0;r<n.length;r+=1)i[r]=$_(W_(t,n,r));return{c(){e=E("ul");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&10){n=Fe(r[7].data);let h;for(h=0;h<n.length;h+=1){const a=W_(r,n,h);i[h]?i[h].p(a,o):(i[h]=$_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function V4(t){let e,n=t[7].error+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","text-red-500 p-4")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[7].error+"")&&He(i,n)},d(r){r&&j(e)}}}function H_(t){var q;let e,n,i,r,o,h,a,s,u,f=t[8].cafe24Product.product.product_name+"",l,c,d,p,m=be(t[8].created_at).format("YYYY-MM-DD")+"",g,v,_,b=Vl(t[8].cafe24Product.product.price)+"",y,w,C,T,x,A,I;function W(){return t[6](t[8])}let H=((q=t[8].thumbnails)==null?void 0:q.length)&&V_(t);return{c(){e=E("li"),n=E("div"),i=E("div"),r=E("img"),a=V(),s=E("div"),u=E("h2"),l=we(f),c=V(),d=E("div"),p=we(": "),g=we(m),v=V(),_=E("div"),y=we(b),w=V(),C=E("button"),C.textContent=" ",T=V(),H&&H.c(),x=V(),Ye(r.src,o=t[8].cafe24Product.product.small_image)||S(r,"src",o),S(r,"class","w-24 h-24 object-cover rounded-md"),S(r,"alt",h=t[8].cafe24Product.product.product_name),S(u,"class","text-base font-semibold mb-2 line-clamp-2"),S(d,"class","text-sm font-normal mb-2"),S(_,"class","text-blue-600 font-bold mb-2"),S(C,"type","button"),S(C,"class","btn btn-sm primary-btn w-full"),S(s,"class","flex-1"),S(i,"class","flex items-center gap-4 mb-4"),S(n,"class","p-4"),S(e,"class","bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105")},m(G,B){U(G,e,B),k(e,n),k(n,i),k(i,r),k(i,a),k(i,s),k(s,u),k(u,l),k(s,c),k(s,d),k(d,p),k(d,g),k(s,v),k(s,_),k(_,y),k(s,w),k(s,C),k(n,T),H&&H.m(n,null),k(e,x),A||(I=Z(C,"click",W),A=!0)},p(G,B){var z;t=G,B&8&&!Ye(r.src,o=t[8].cafe24Product.product.small_image)&&S(r,"src",o),B&8&&h!==(h=t[8].cafe24Product.product.product_name)&&S(r,"alt",h),B&8&&f!==(f=t[8].cafe24Product.product.product_name+"")&&He(l,f),B&8&&m!==(m=be(t[8].created_at).format("YYYY-MM-DD")+"")&&He(g,m),B&8&&b!==(b=Vl(t[8].cafe24Product.product.price)+"")&&He(y,b),(z=t[8].thumbnails)!=null&&z.length?H?H.p(t,B):(H=V_(t),H.c(),H.m(n,null)):H&&(H.d(1),H=null)},d(G){G&&j(e),H&&H.d(),A=!1,I()}}}function V_(t){let e,n=Fe(t[8].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=X_(z_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex overflow-x-auto space-x-2 pb-2")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Fe(r[8].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=z_(r,n,h);i[h]?i[h].p(a,o):(i[h]=X_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Pt(i,r)}}}function X_(t){let e,n;return{c(){e=E("img"),Ye(e.src,n=t[11].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","w-20 h-20 object-cover rounded-md flex-shrink-0")},m(i,r){U(i,e,r)},p(i,r){r&8&&!Ye(e.src,n=i[11].url)&&S(e,"src",n)},d(i){i&&j(e)}}}function $_(t){var i;let e,n=((i=t[8].cafe24Product)==null?void 0:i.product)&&H_(t);return{c(){n&&n.c(),e=Je()},m(r,o){n&&n.m(r,o),U(r,e,o)},p(r,o){var h;(h=r[8].cafe24Product)!=null&&h.product?n?n.p(r,o):(n=H_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&j(e),n&&n.d(r)}}}function X4(t){let e;return{c(){e=E("div"),e.textContent=" ...",S(e,"class","text-center py-4")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function $4(t){let e;function n(o,h){return o[0].cafe24UserType==="member"?U4:B4}let i=n(t),r=i(t);return{c(){r.c(),e=Je()},m(o,h){r.m(o,h),U(o,e,h)},p(o,[h]){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:ge,o:ge,d(o){o&&j(e),r.d(o)}}}function G4(t,e,n){let{user:i}=e,{handleClick:r}=e,o=3,h;function a(f){n(2,o=parseInt(f.target.value))}function s(){o=Yo(this),n(2,o)}const u=f=>r(f.uuid);return t.$$set=f=>{"user"in f&&n(0,i=f.user),"handleClick"in f&&n(1,r=f.handleClick)},t.$$.update=()=>{t.$$.dirty&13&&(n(3,h=ak(i.cafe24MallId,i.cafe24MemberId,o)),console.log({loadCafe24MemberDesign:h}))},[i,r,o,h,a,s,u]}class q4 extends qe{constructor(e){super(),Ge(this,e,G4,$4,Ve,{user:0,handleClick:1})}}function G_(t){let e,n,i,r,o=t[4].printGuide+"",h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w;return u=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),h=we(o),a=V(),s=E("button"),fe(u.$$.fragment),f=V(),l=E("div"),c=E("textarea"),d=V(),p=E("div"),m=E("button"),m.textContent="",g=V(),v=E("button"),v.textContent="",S(r,"class","font-semibold"),S(s,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(c,"class","textarea"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(C,T){U(C,e,T),k(e,n),k(n,i),k(i,r),k(r,h),k(i,a),k(i,s),ce(u,s,null),k(n,f),k(n,l),k(l,c),Re(c,t[3]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(w=[Z(s,"click",dn),Z(c,"input",t[7]),Z(c,"change",t[8]),Z(m,"click",t[9]),Z(v,"click",dn),Z(e,"introstart",t[5]),Z(e,"outroend",t[6])],y=!0)},p(C,T){(!b||T&16)&&o!==(o=C[4].printGuide+"")&&He(h,o),T&8&&Re(c,C[3])},i(C){b||(M(u.$$.fragment,C),C&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(C){Y(u.$$.fragment,C),C&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(C){C&&j(e),ue(u),C&&_&&_.end(),y=!1,Ue(w)}}}function K4(t){let e,n,i=t[0]&&G_(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=G_(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function J4(t,e,n){let i;Me(t,po,d=>n(4,i=d));let{isOpen:r}=e,{orderAction:o}=e,{setPrintMemo:h}=e,a="";function s(d){Si.call(this,t,d)}function u(d){Si.call(this,t,d)}function f(){a=this.value,n(3,a)}const l=()=>h(a),c=()=>o();return t.$$set=d=>{"isOpen"in d&&n(0,r=d.isOpen),"orderAction"in d&&n(1,o=d.orderAction),"setPrintMemo"in d&&n(2,h=d.setPrintMemo)},[r,o,h,a,i,s,u,f,l,c]}class Z4 extends qe{constructor(e){super(),Ge(this,e,J4,K4,Ve,{isOpen:0,orderAction:1,setPrintMemo:2})}}function q_(t,e,n){const i=t.slice();return i[15]=e[n],i}function K_(t,e,n){const i=t.slice();return i[18]=e[n],i}function J_(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w,C,T,x,A,I;a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let W=Fe(t[1]),H=[];for(let z=0;z<W.length;z+=1)H[z]=Z_(K_(t,W,z));const q=[eU,Q4],G=[];function B(z,ee){return z[5]?0:1}return _=B(t),b=G[_]=q[_](t),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="",o=V(),h=E("button"),fe(a.$$.fragment),s=V(),u=E("div"),f=E("div"),l=E("select"),c=E("option"),c.textContent=" ";for(let z=0;z<H.length;z+=1)H[z].c();d=V(),p=E("input"),m=V(),g=E("button"),g.textContent="",v=V(),b.c(),y=V(),w=E("div"),C=E("button"),C.textContent="",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),c.__value=null,Re(c,c.__value),S(l,"class","select w-5/12"),t[2]===void 0&&zt(()=>t[12].call(l)),S(p,"type","text"),S(p,"placeholder"," "),S(p,"class","input grow"),S(g,"class","btn primary-btn whitespace-nowrap min-w-24"),S(f,"class","flex space-x-4"),S(u,"class","mt-4 space-y-4"),S(C,"class","btn secondary-btn"),S(w,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(z,ee){U(z,e,ee),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ce(a,h,null),k(n,s),k(n,u),k(u,f),k(f,l),k(l,c);for(let oe=0;oe<H.length;oe+=1)H[oe]&&H[oe].m(l,null);wi(l,t[2],!0),k(f,d),k(f,p),Re(p,t[3]),k(f,m),k(f,g),k(u,v),G[_].m(u,null),k(n,y),k(n,w),k(w,C),x=!0,A||(I=[Z(h,"click",dn),Z(l,"change",t[12]),Z(l,"change",t[6]),Z(p,"input",t[13]),Z(g,"click",t[7]),Z(C,"click",dn),Z(e,"introstart",t[10]),Z(e,"outroend",t[11])],A=!0)},p(z,ee){if(ee&2){W=Fe(z[1]);let O;for(O=0;O<W.length;O+=1){const P=K_(z,W,O);H[O]?H[O].p(P,ee):(H[O]=Z_(P),H[O].c(),H[O].m(l,null))}for(;O<H.length;O+=1)H[O].d(1);H.length=W.length}ee&6&&wi(l,z[2]),ee&8&&p.value!==z[3]&&Re(p,z[3]);let oe=_;_=B(z),_===oe?G[_].p(z,ee):(Te(),Y(G[oe],1,1,()=>{G[oe]=null}),ke(),b=G[_],b?b.p(z,ee):(b=G[_]=q[_](z),b.c()),M(b,1),b.m(u,null))},i(z){x||(M(a.$$.fragment,z),M(b),z&&zt(()=>{x&&(T||(T=Vt(e,Ti,{y:50},!0)),T.run(1))}),x=!0)},o(z){Y(a.$$.fragment,z),Y(b),z&&(T||(T=Vt(e,Ti,{y:50},!1)),T.run(0)),x=!1},d(z){z&&j(e),ue(a),Pt(H,z),G[_].d(),z&&T&&T.end(),A=!1,Ue(I)}}}function Z_(t){let e,n=t[18].category_name+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[18].category_no,Re(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&2&&n!==(n=o[18].category_name+"")&&He(i,n),h&2&&r!==(r=o[18].category_no)&&(e.__value=r,Re(e,e.__value))},d(o){o&&j(e)}}}function Q4(t){let e,n,i=Fe(t[4]),r=[];for(let h=0;h<i.length;h+=1)r[h]=Q_(q_(t,i,h));const o=h=>Y(r[h],1,1,()=>{r[h]=null});return{c(){e=E("div");for(let h=0;h<r.length;h+=1)r[h].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4")},m(h,a){U(h,e,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);n=!0},p(h,a){if(a&272){i=Fe(h[4]);let s;for(s=0;s<i.length;s+=1){const u=q_(h,i,s);r[s]?(r[s].p(u,a),M(r[s],1)):(r[s]=Q_(u),r[s].c(),M(r[s],1),r[s].m(e,null))}for(Te(),s=i.length;s<r.length;s+=1)o(s);ke()}},i(h){if(!n){for(let a=0;a<i.length;a+=1)M(r[a]);n=!0}},o(h){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Y(r[a]);n=!1},d(h){h&&j(e),Pt(r,h)}}}function eU(t){let e;return{c(){e=E("p"),e.textContent=" ..."},m(n,i){U(n,e,i)},p:ge,i:ge,o:ge,d(n){n&&j(e)}}}function tU(t){let e,n;return e=new Ce({props:{icon:"carbon:no-image",class:"w-full max-h-32 mb-2"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},p:ge,i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function nU(t){let e,n,i;return{c(){e=E("img"),Ye(e.src,n=t[15].list_image)||S(e,"src",n),S(e,"alt",i=t[15].product_name),S(e,"class","w-full max-h-32 object-contain mb-2")},m(r,o){U(r,e,o)},p(r,o){o&16&&!Ye(e.src,n=r[15].list_image)&&S(e,"src",n),o&16&&i!==(i=r[15].product_name)&&S(e,"alt",i)},i:ge,o:ge,d(r){r&&j(e)}}}function Q_(t){let e,n,i,r,o,h=t[15].product_name+"",a,s,u,f=Vl(t[15].price)+"",l,c,d,p,m;const g=[nU,tU],v=[];function _(y,w){return y[15].list_image?0:1}n=_(t),i=v[n]=g[n](t);function b(){return t[14](t[15])}return{c(){e=E("button"),i.c(),r=V(),o=E("p"),a=we(h),s=V(),u=E("p"),l=we(f),c=V(),S(o,"class","font-semibold"),S(u,"class","text-base font-semibold text-gray-600"),S(e,"class","border p-2 rounded cursor-pointer hover:bg-gray-100")},m(y,w){U(y,e,w),v[n].m(e,null),k(e,r),k(e,o),k(o,a),k(e,s),k(e,u),k(u,l),k(e,c),d=!0,p||(m=Z(e,"click",b),p=!0)},p(y,w){t=y;let C=n;n=_(t),n===C?v[n].p(t,w):(Te(),Y(v[C],1,1,()=>{v[C]=null}),ke(),i=v[n],i?i.p(t,w):(i=v[n]=g[n](t),i.c()),M(i,1),i.m(e,r)),(!d||w&16)&&h!==(h=t[15].product_name+"")&&He(a,h),(!d||w&16)&&f!==(f=Vl(t[15].price)+"")&&He(l,f)},i(y){d||(M(i),d=!0)},o(y){Y(i),d=!1},d(y){y&&j(e),v[n].d(),p=!1,m()}}}function iU(t){let e,n,i=t[0]&&J_(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=J_(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function rU(t,e,n){let{isOpen:i}=e,{changeProduct:r}=e,o=[],h=null,a="",s=[],u=!1;xi(async()=>{try{n(1,o=await Zx()),await l()}catch(_){console.error("Failed to load categories:",_)}});async function f(_){n(2,h=_.target.value?Number(_.target.value):null),await l()}async function l(){n(5,u=!0);try{n(4,s=await Qx(h,a)),console.log({products:s})}catch(_){console.error("Failed to search products:",_)}finally{n(5,u=!1)}}async function c(_){n(5,u=!0);try{const{options:b}=await Ef(_.product_no);console.log({options:b});const y=b.additional_options.some(w=>w.additional_option_name==="podiz");if(console.log("podiz   :",y),y)r(_),dn();else{alert("  POD  .");return}}catch(b){console.log(b)}finally{n(5,u=!1)}}function d(_){Si.call(this,t,_)}function p(_){Si.call(this,t,_)}function m(){h=Yo(this),n(2,h),n(1,o)}function g(){a=this.value,n(3,a)}const v=_=>c(_);return t.$$set=_=>{"isOpen"in _&&n(0,i=_.isOpen),"changeProduct"in _&&n(9,r=_.changeProduct)},[i,o,h,a,s,u,f,l,c,r,d,p,m,g,v]}class sU extends qe{constructor(e){super(),Ge(this,e,rU,iU,Ve,{isOpen:0,changeProduct:9})}}function ey(t,e,n){const i=t.slice();return i[23]=e[n],i[25]=n,i}function ty(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}function oU(t){return{c:ge,m:ge,p:ge,i:ge,o:ge,d:ge}}function aU(t){let e,n,i,r,o,h,a,s,u,f,l;i=new Ce({props:{icon:"mdi:chevron-left",height:"24"}});let c=Fe(t[0]),d=[];for(let p=0;p<c.length;p+=1)d[p]=ry(ey(t,c,p));return s=new Ce({props:{icon:"mdi:chevron-right",height:"24"}}),{c(){e=E("div"),n=E("button"),fe(i.$$.fragment),r=V(),o=E("div");for(let p=0;p<d.length;p+=1)d[p].c();h=V(),a=E("button"),fe(s.$$.fragment),S(n,"class","nav-button prev svelte-10gxpzb"),n.disabled=t[5],S(o,"class","carousel-container svelte-10gxpzb"),S(a,"class","nav-button next svelte-10gxpzb"),a.disabled=t[6],S(e,"class","carousel svelte-10gxpzb")},m(p,m){U(p,e,m),k(e,n),ce(i,n,null),k(e,r),k(e,o);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(o,null);t[17](o),k(e,h),k(e,a),ce(s,a,null),u=!0,f||(l=[Z(n,"click",t[10]),Z(a,"click",t[9])],f=!0)},p(p,m){if((!u||m&32)&&(n.disabled=p[5]),m&403){c=Fe(p[0]);let g;for(g=0;g<c.length;g+=1){const v=ey(p,c,g);d[g]?d[g].p(v,m):(d[g]=ry(v),d[g].c(),d[g].m(o,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=c.length}(!u||m&64)&&(a.disabled=p[6])},i(p){u||(M(i.$$.fragment,p),M(s.$$.fragment,p),u=!0)},o(p){Y(i.$$.fragment,p),Y(s.$$.fragment,p),u=!1},d(p){p&&j(e),ue(i),Pt(d,p),t[17](null),ue(s),f=!1,Ue(l)}}}function lU(t){let e,n,i;return n=new Ce({props:{icon:"eos-icons:loading",height:"50"}}),{c(){e=E("div"),fe(n.$$.fragment),S(e,"class","loading svelte-10gxpzb")},m(r,o){U(r,e,o),ce(n,e,null),i=!0},p:ge,i(r){i||(M(n.$$.fragment,r),i=!0)},o(r){Y(n.$$.fragment,r),i=!1},d(r){r&&j(e),ue(n)}}}function ny(t){let e,n=t[23].templateTitle+"",i;return{c(){e=E("h3"),i=we(n),S(e,"class","template-title svelte-10gxpzb")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&1&&n!==(n=r[23].templateTitle+"")&&He(i,n)},d(r){r&&j(e)}}}function iy(t){let e,n,i,r,o,h,a;function s(){return t[16](t[25],t[28])}return{c(){e=E("button"),n=E("img"),o=V(),Ye(n.src,i=t[26].url)||S(n,"src",i),S(n,"alt",r=`${t[23].name} thumbnail ${t[28]+1}`),S(n,"class","svelte-10gxpzb"),S(e,"type","button"),S(e,"class","svelte-10gxpzb")},m(u,f){U(u,e,f),k(e,n),k(e,o),h||(a=Z(e,"click",s),h=!0)},p(u,f){t=u,f&1&&!Ye(n.src,i=t[26].url)&&S(n,"src",i),f&1&&r!==(r=`${t[23].name} thumbnail ${t[28]+1}`)&&S(n,"alt",r)},d(u){u&&j(e),h=!1,a()}}}function ry(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;function p(){return t[15](t[23])}let m=t[23].templateTitle&&ny(t),g=Fe(t[23].thumbnails),v=[];for(let _=0;_<g.length;_+=1)v[_]=iy(ty(t,g,_));return{c(){e=E("div"),n=E("div"),i=E("button"),r=E("img"),a=V(),s=E("div"),m&&m.c(),u=V(),f=E("div");for(let _=0;_<v.length;_+=1)v[_].c();l=V(),Ye(r.src,o=t[23].thumbnails[t[1][t[25]]].url)||S(r,"src",o),S(r,"alt",h=t[23].name),S(r,"class","svelte-10gxpzb"),S(i,"type","button"),S(i,"class","svelte-10gxpzb"),S(n,"class","main-image svelte-10gxpzb"),mt(n,"height",t[4]),S(f,"class","thumbnails svelte-10gxpzb"),S(s,"class","card-body svelte-10gxpzb"),S(e,"class","template-card svelte-10gxpzb")},m(_,b){U(_,e,b),k(e,n),k(n,i),k(i,r),k(e,a),k(e,s),m&&m.m(s,null),k(s,u),k(s,f);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(f,null);k(e,l),c||(d=Z(i,"click",p),c=!0)},p(_,b){if(t=_,b&3&&!Ye(r.src,o=t[23].thumbnails[t[1][t[25]]].url)&&S(r,"src",o),b&1&&h!==(h=t[23].name)&&S(r,"alt",h),b&16&&mt(n,"height",t[4]),t[23].templateTitle?m?m.p(t,b):(m=ny(t),m.c(),m.m(s,u)):m&&(m.d(1),m=null),b&129){g=Fe(t[23].thumbnails);let y;for(y=0;y<g.length;y+=1){const w=ty(t,g,y);v[y]?v[y].p(w,b):(v[y]=iy(w),v[y].c(),v[y].m(f,null))}for(;y<v.length;y+=1)v[y].d(1);v.length=g.length}},d(_){_&&j(e),m&&m.d(),Pt(v,_),c=!1,d()}}}function cU(t){let e,n,i,r;const o=[lU,aU,oU],h=[];function a(s,u){return s[2]?0:s[0].length?1:2}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=Je()},m(s,u){h[e].m(s,u),U(s,i,u),r=!0},p(s,[u]){let f=e;e=a(s),e===f?h[e].p(s,u):(Te(),Y(h[f],1,1,()=>{h[f]=null}),ke(),n=h[e],n?n.p(s,u):(n=h[e]=o[e](s),n.c()),M(n,1),n.m(i.parentNode,i))},i(s){r||(M(n),r=!0)},o(s){Y(n),r=!1},d(s){s&&j(i),h[e].d(s)}}}function uU(t,e,n){let i,r,{handleClick:o=()=>{}}=e,{editorProductLink:h=""}=e,a=[],s={},u=!0,f=0,l,c=1,d;async function p(I){n(2,u=!0);const{data:W,error:H}=await lk(I);if(H){console.log({error:H}),n(2,u=!1);return}n(0,a=W.templateDatas),n(1,s=a.reduce((q,G,B)=>(q[B]=0,q),{})),a!=null&&a.length&&n(0,a=a.sort((q,G)=>new Date(q.templateSort)-new Date(G.templateSort))),n(2,u=!1)}xi(async()=>{await p(h),g(),v(),window.addEventListener("resize",m)});function m(){g(),v()}function g(){if(l){const I=l.offsetWidth;n(14,c=Math.floor(I/320))}}function v(){const I=window.innerWidth;I<640?n(4,d="200px"):I<1024?n(4,d="250px"):n(4,d="300px")}function _(I,W){n(1,s[I]=W,s),n(1,s)}function b(I){o(I)}function y(){f<a.length-c&&(n(13,f++,f),C())}function w(){f>0&&(n(13,f--,f),C())}function C(){l&&n(3,l.style.transform=`translateX(-${f*320}px)`,l)}const T=I=>b(I.uuid),x=(I,W)=>_(I,W);function A(I){tt[I?"unshift":"push"](()=>{l=I,n(3,l)})}return t.$$set=I=>{"handleClick"in I&&n(11,o=I.handleClick),"editorProductLink"in I&&n(12,h=I.editorProductLink)},t.$$.update=()=>{t.$$.dirty&24577&&n(6,i=f>=a.length-c),t.$$.dirty&8192&&n(5,r=f===0)},[a,s,u,l,d,r,i,_,b,y,w,o,h,f,c,T,x,A]}class fU extends qe{constructor(e){super(),Ge(this,e,uU,cU,Ve,{handleClick:11,editorProductLink:12})}}function sy(t){let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w;return a=new Ce({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="  ",o=V(),h=E("button"),fe(a.$$.fragment),s=V(),u=E("div"),f=E("input"),l=V(),c=E("input"),d=V(),p=E("div"),m=E("button"),m.textContent=" ",g=V(),v=E("button"),v.textContent="",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"class","input w-full"),S(f,"type","text"),S(f,"placeholder","  ."),S(c,"class","input w-full"),S(c,"type","text"),S(c,"placeholder","/ ( ,   )"),S(u,"class","flex flex-col gap-3"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[400px] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(C,T){U(C,e,T),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ce(a,h,null),k(n,s),k(n,u),k(u,f),Re(f,t[1]),k(u,l),k(u,c),Re(c,t[2]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(w=[Z(h,"click",dn),Z(f,"input",t[8]),Z(f,"change",t[9]),Z(c,"input",t[10]),Z(c,"change",t[11]),Z(m,"click",t[12]),Z(v,"click",dn),Z(e,"introstart",t[6]),Z(e,"outroend",t[7])],y=!0)},p(C,T){T&2&&f.value!==C[1]&&Re(f,C[1]),T&4&&c.value!==C[2]&&Re(c,C[2])},i(C){b||(M(a.$$.fragment,C),C&&zt(()=>{b&&(_||(_=Vt(e,Ti,{y:50},!0)),_.run(1))}),b=!0)},o(C){Y(a.$$.fragment,C),C&&(_||(_=Vt(e,Ti,{y:50},!1)),_.run(0)),b=!1},d(C){C&&j(e),ue(a),C&&_&&_.end(),y=!1,Ue(w)}}}function hU(t){let e,n,i=t[0]&&sy(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&M(i,1)):(i=sy(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function dU(t,e,n){let i;Me(t,Le,v=>n(13,i=v));let{isOpen:r}=e,{handleAddEditorData:o}=e,h="",a="";function s(){_e(Le,i.templateTitle=h,i),_e(Le,i.templateKeyword=a,i)}function u(){o(),dn()}function f(v){Si.call(this,t,v)}function l(v){Si.call(this,t,v)}function c(){h=this.value,n(1,h)}const d=()=>s();function p(){a=this.value,n(2,a)}const m=()=>s(),g=()=>u();return t.$$set=v=>{"isOpen"in v&&n(0,r=v.isOpen),"handleAddEditorData"in v&&n(5,o=v.handleAddEditorData)},[r,h,a,s,u,o,f,l,c,d,p,m,g]}class pU extends qe{constructor(e){super(),Ge(this,e,dU,hU,Ve,{isOpen:0,handleAddEditorData:5})}}function oy(t,e,n){const i=t.slice();return i[70]=e[n],i}function ay(t){var Rd;let e,n,i,r,o,h,a,s,u,f,l,c,d,p,m,g,v,_,b,y,w=t[10].length+"",C,T,x,A,I,W,H,q,G,B,z,ee,oe,O,P,F=t[0],L,J,R,D,X,K,re,te,$,ae,me,Q,N,ne,se,ie,he,ye,Ie,Se,le,xe,Pe,We,ot,Ke,Rt,pt,ln=Fe(t[13]),Tt=[];for(let Ee=0;Ee<ln.length;Ee+=1)Tt[Ee]=ly(oy(t,ln,Ee));function gn(Ee,jt){var li,ss;return(ss=(li=Ee[11])==null?void 0:li.image)!=null&&ss.url?mU:gU}let Zi=gn(t),mn=Zi(t);p=new Ce({props:{icon:"icon-park-outline:preview-open",height:"18"}}),_=new Ce({props:{icon:"uil:cart",height:"18"}});function To(Ee,jt){return Ee[16]==="design"?_U:vU}let de=To(t)(t);q=new GF({}),z=new Ce({props:{icon:"gg:log-off",height:"20"}});let De=uy(t);function Xe(Ee){t[30](Ee)}let lt={};t[0]!==void 0&&(lt.printKey=t[0]),J=new cF({props:lt}),tt.push(()=>At(J,"printKey",Xe));const vn=[bU,yU],ct=[];function kt(Ee,jt){return Ee[5]?0:1}te=kt(t),$=ct[te]=vn[te](t),Q=new JF({}),ie=new Ce({props:{icon:"fa6-solid:plus"}});let An=t[16]!=="design"&&wU(t),Ot=((Rd=t[15])==null?void 0:Rd.length)&&fy(t);Pe=new wN({});let Kt=t[12].options&&!t[9].currentOption&&dy(t);return{c(){e=E("div");for(let Ee=0;Ee<Tt.length;Ee+=1)Tt[Ee].c();n=V(),i=E("div"),r=E("div"),o=E("div"),h=E("div"),mn.c(),a=V(),s=E("div"),u=V(),f=E("div"),l=E("button"),l.textContent="",c=V(),d=E("button"),fe(p.$$.fragment),m=we(`\r
                `),g=V(),v=E("button"),fe(_.$$.fragment),b=V(),y=E("div"),C=we(w),T=V(),x=E("span"),de.c(),A=V(),I=E("div"),W=E("div"),H=E("div"),fe(q.$$.fragment),G=V(),B=E("button"),fe(z.$$.fragment),ee=V(),oe=E("span"),oe.textContent="",O=V(),P=E("div"),De.c(),L=V(),fe(J.$$.fragment),D=V(),X=E("div"),K=E("div"),re=E("button"),$.c(),ae=V(),me=E("div"),fe(Q.$$.fragment),N=V(),ne=E("div"),se=E("button"),fe(ie.$$.fragment),he=we(`\r
                      / `),ye=V(),An&&An.c(),Ie=V(),Se=E("div"),Ot&&Ot.c(),le=V(),xe=E("div"),fe(Pe.$$.fragment),ot=V(),Kt&&Kt.c(),mt(e,"font-size","0.1px"),mt(e,"height","0px"),mt(e,"color","#FFFFFF "),mt(e,"overflow","hidden"),S(s,"class","md:hidden"),S(l,"type","button"),S(l,"class","btn btn-sm md:btn-md primary-btn"),S(d,"type","button"),S(d,"class","btn btn-sm md:btn-md white-btn"),S(y,"class","rounded-full border bg-white px-1 absolute left-8"),S(x,"class","ml-3"),S(v,"type","button"),S(v,"class","btn btn-sm secondary-btn relative gap-0"),S(f,"class","flex items-center gap-3"),S(h,"class","flex justify-between items-center p-4 bg-white h-16 border-b border-b-gray-300"),S(H,"class","flex flex-col"),S(oe,"class","whitespace-nowrap text-2xs hidden md:block"),S(B,"type","button"),S(B,"class","flex bg-white flex-col items-center border-t py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(W,"class","w-[50px] md:w-[80px] flex flex-col px-1 z-40 h-full justify-between"),S(P,"class","flex-1 bg-gray-200 flex items-center justify-center h-full w-full rounded border relative"),S(re,"type","button"),S(re,"class","border border-r-0 bg-white py-5 px-1 rounded-lg rounded-r-none"),S(K,"class","absolute -left-[22px] py-3 top-1/2 transform -translate-y-50 md:hidden"),S(se,"type","button"),S(se,"class","btn primary-btn w-full"),S(ne,"class","mt-3"),S(xe,"class","mt-3"),S(Se,"class","grow overflow-y-auto"),S(X,"class",We="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(t[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-40 svelte-ezfnmf"),S(I,"class","flex-1 flex mt-2 relative"),S(o,"class","flex-1 flex flex-col"),S(r,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(i,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[1000] left-0 top-0")},m(Ee,jt){U(Ee,e,jt);for(let li=0;li<Tt.length;li+=1)Tt[li]&&Tt[li].m(e,null);U(Ee,n,jt),U(Ee,i,jt),k(i,r),k(r,o),k(o,h),mn.m(h,null),k(h,a),k(h,s),k(h,u),k(h,f),k(f,l),k(f,c),k(f,d),ce(p,d,null),k(d,m),k(f,g),k(f,v),ce(_,v,null),k(v,b),k(v,y),k(y,C),k(v,T),k(v,x),de.m(x,null),k(o,A),k(o,I),k(I,W),k(W,H),ce(q,H,null),k(W,G),k(W,B),ce(z,B,null),k(B,ee),k(B,oe),k(I,O),k(I,P),De.m(P,null),k(P,L),ce(J,P,null),k(I,D),k(I,X),k(X,K),k(K,re),ct[te].m(re,null),k(X,ae),k(X,me),ce(Q,me,null),k(X,N),k(X,ne),k(ne,se),ce(ie,se,null),k(se,he),k(ne,ye),An&&An.m(ne,null),k(X,Ie),k(X,Se),Ot&&Ot.m(Se,null),k(Se,le),k(Se,xe),ce(Pe,xe,null),k(r,ot),Kt&&Kt.m(r,null),Ke=!0,Rt||(pt=[Z(l,"click",t[26]),Z(d,"click",t[27]),Z(v,"click",t[28]),Z(B,"click",t[29]),Z(re,"click",t[31]),Z(se,"click",t[32])],Rt=!0)},p(Ee,jt){var Fd;if(jt[0]&8192){ln=Fe(Ee[13]);let jn;for(jn=0;jn<ln.length;jn+=1){const Ld=oy(Ee,ln,jn);Tt[jn]?Tt[jn].p(Ld,jt):(Tt[jn]=ly(Ld),Tt[jn].c(),Tt[jn].m(e,null))}for(;jn<Tt.length;jn+=1)Tt[jn].d(1);Tt.length=ln.length}Zi===(Zi=gn(Ee))&&mn?mn.p(Ee,jt):(mn.d(1),mn=Zi(Ee),mn&&(mn.c(),mn.m(h,a))),(!Ke||jt[0]&1024)&&w!==(w=Ee[10].length+"")&&He(C,w),jt[0]&1&&Ve(F,F=Ee[0])?(Te(),Y(De,1,1,ge),ke(),De=uy(Ee),De.c(),M(De,1),De.m(P,L)):De.p(Ee,jt);const li={};!R&&jt[0]&1&&(R=!0,li.printKey=Ee[0],Ht(()=>R=!1)),J.$set(li);let ss=te;te=kt(Ee),te!==ss&&(Te(),Y(ct[ss],1,1,()=>{ct[ss]=null}),ke(),$=ct[te],$||($=ct[te]=vn[te](Ee),$.c()),M($,1),$.m(re,null)),Ee[16]!=="design"&&An.p(Ee,jt),(Fd=Ee[15])!=null&&Fd.length?Ot?(Ot.p(Ee,jt),jt[0]&32768&&M(Ot,1)):(Ot=fy(Ee),Ot.c(),M(Ot,1),Ot.m(Se,le)):Ot&&(Te(),Y(Ot,1,1,()=>{Ot=null}),ke()),(!Ke||jt[0]&32&&We!==(We="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(Ee[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-40 svelte-ezfnmf"))&&S(X,"class",We),Ee[12].options&&!Ee[9].currentOption?Kt?(Kt.p(Ee,jt),jt[0]&4608&&M(Kt,1)):(Kt=dy(Ee),Kt.c(),M(Kt,1),Kt.m(r,null)):Kt&&(Te(),Y(Kt,1,1,()=>{Kt=null}),ke())},i(Ee){Ke||(M(p.$$.fragment,Ee),M(_.$$.fragment,Ee),M(q.$$.fragment,Ee),M(z.$$.fragment,Ee),M(De),M(J.$$.fragment,Ee),M($),M(Q.$$.fragment,Ee),M(ie.$$.fragment,Ee),M(An),M(Ot),M(Pe.$$.fragment,Ee),M(Kt),Ke=!0)},o(Ee){Y(p.$$.fragment,Ee),Y(_.$$.fragment,Ee),Y(q.$$.fragment,Ee),Y(z.$$.fragment,Ee),Y(De),Y(J.$$.fragment,Ee),Y($),Y(Q.$$.fragment,Ee),Y(ie.$$.fragment,Ee),Y(An),Y(Ot),Y(Pe.$$.fragment,Ee),Y(Kt),Ke=!1},d(Ee){Ee&&(j(e),j(n),j(i)),Pt(Tt,Ee),mn.d(),ue(p),ue(_),de.d(),ue(q),ue(z),De.d(Ee),ue(J),ct[te].d(),ue(Q),ue(ie),An&&An.d(),Ot&&Ot.d(),ue(Pe),Kt&&Kt.d(),Rt=!1,Ue(pt)}}}function ly(t){let e,n,i;return{c(){e=E("div"),n=we("podiz"),S(e,"style",i=`font-family:${t[70].fontFamily}`)},m(r,o){U(r,e,o),k(e,n)},p(r,o){o[0]&8192&&i!==(i=`font-family:${r[70].fontFamily}`)&&S(e,"style",i)},d(r){r&&j(e)}}}function gU(t){let e;return{c(){e=E("div"),e.textContent="[LOGO]",S(e,"class","hidden md:block")},m(n,i){U(n,e,i)},p:ge,d(n){n&&j(e)}}}function mU(t){let e,n,i,r;return{c(){e=E("div"),n=E("img"),Ye(n.src,i=t[11].image.url)||S(n,"src",i),S(n,"alt",r=t[11].shopName),S(n,"class","max-h-12 object-contain"),S(e,"class","hidden md:block")},m(o,h){U(o,e,h),k(e,n)},p(o,h){h[0]&2048&&!Ye(n.src,i=o[11].image.url)&&S(n,"src",i),h[0]&2048&&r!==(r=o[11].shopName)&&S(n,"alt",r)},d(o){o&&j(e)}}}function vU(t){let e;return{c(){e=we("")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function _U(t){let e;return{c(){e=we(" ")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function cy(t){let e,n;return e=new oF({}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function uy(t){let e,n,i=t[9].prints[t[14]]&&cy();return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,o){r[9].prints[r[14]]?i?o[0]&16896&&M(i,1):(i=cy(),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function yU(t){let e,n;return e=new Ce({props:{icon:"mingcute:right-fill"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function bU(t){let e,n;return e=new Ce({props:{icon:"mingcute:left-fill"}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function wU(t){let e,n,i,r,o,h;return n=new Ce({props:{icon:"fa-solid:exchange-alt"}}),{c(){e=E("button"),fe(n.$$.fragment),i=we(`\r
                      `),S(e,"type","button"),S(e,"class","btn dark-btn w-full mt-2")},m(a,s){U(a,e,s),ce(n,e,null),k(e,i),r=!0,o||(h=Z(e,"click",t[33]),o=!0)},p:ge,i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){Y(n.$$.fragment,a),r=!1},d(a){a&&j(e),ue(n),o=!1,h()}}}function fy(t){let e,n,i=t[15][0].objType==="upload"&&hy(t);return{c(){i&&i.c(),e=Je()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,o){r[15][0].objType==="upload"?i?(i.p(r,o),o[0]&32768&&M(i,1)):(i=hy(r),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(Te(),Y(i,1,1,()=>{i=null}),ke())},i(r){n||(M(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function hy(t){let e,n,i,r,o,h,a,s,u,f;return h=new Ce({props:{icon:"ion:image-outline",height:"23"}}),{c(){e=E("div"),n=E("img"),r=V(),o=E("button"),fe(h.$$.fragment),a=we(`\r
                             `),Ye(n.src,i=t[15][0].thumbnail.url)||S(n,"src",i),S(n,"alt",""),S(n,"class","w-full h-full max-h-[300px] object-contain"),S(o,"type","button"),S(o,"class","btn white-btn w-full mt-2"),S(e,"class","w-full flex flex-col gap-3 p-2")},m(l,c){U(l,e,c),k(e,n),k(e,r),k(e,o),ce(h,o,null),k(o,a),s=!0,u||(f=Z(o,"click",t[34]),u=!0)},p(l,c){(!s||c[0]&32768&&!Ye(n.src,i=l[15][0].thumbnail.url))&&S(n,"src",i)},i(l){s||(M(h.$$.fragment,l),s=!0)},o(l){Y(h.$$.fragment,l),s=!1},d(l){l&&j(e),ue(h),u=!1,f()}}}function dy(t){let e,n,i,r;function o(s){t[35](s)}function h(s){t[36](s)}let a={loadPublish:t[18]};return t[6]!==void 0&&(a.publishId=t[6]),t[3]!==void 0&&(a.runEditor=t[3]),e=new VF({props:a}),tt.push(()=>At(e,"publishId",o)),tt.push(()=>At(e,"runEditor",h)),{c(){fe(e.$$.fragment)},m(s,u){ce(e,s,u),r=!0},p(s,u){const f={};!n&&u[0]&64&&(n=!0,f.publishId=s[6],Ht(()=>n=!1)),!i&&u[0]&8&&(i=!0,f.runEditor=s[3],Ht(()=>i=!1)),e.$set(f)},i(s){r||(M(e.$$.fragment,s),r=!0)},o(s){Y(e.$$.fragment,s),r=!1},d(s){ue(e,s)}}}function py(t){let e,n;return e=new jN({props:{previews:t[7],mode:t[16]}}),{c(){fe(e.$$.fragment)},m(i,r){ce(e,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.previews=i[7]),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function gy(t){let e,n,i,r,o,h,a,s,u,f,l,c,d;return s=new Ce({props:{icon:"lets-icons:close-round",height:"30"}}),f=new q4({props:{user:t[8],handleClick:t[17]}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("h1"),o=E("span"),o.textContent="",h=V(),a=E("button"),fe(s.$$.fragment),u=V(),fe(f.$$.fragment),S(a,"type","button"),S(a,"class","btn white-btn"),S(r,"class","font-semibold text-lg border-b py-3 flex justify-between"),S(i,"class","flex-1 flex flex-col p-5"),S(n,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-y-auto"),S(e,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(p,m){U(p,e,m),k(e,n),k(n,i),k(i,r),k(r,o),k(r,h),k(r,a),ce(s,a,null),k(i,u),ce(f,i,null),l=!0,c||(d=Z(a,"click",t[37]),c=!0)},p(p,m){const g={};m[0]&256&&(g.user=p[8]),f.$set(g)},i(p){l||(M(s.$$.fragment,p),M(f.$$.fragment,p),l=!0)},o(p){Y(s.$$.fragment,p),Y(f.$$.fragment,p),l=!1},d(p){p&&j(e),ue(s),ue(f),c=!1,d()}}}function CU(t){let e,n,i,r,o;return{c(){e=E("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-ezfnmf")},m(h,a){U(h,e,a),i=!0,r||(o=Z(e,"click",dn),r=!0)},p:ge,i(h){i||(h&&zt(()=>{i&&(n||(n=Vt(e,Xd,{},!0)),n.run(1))}),i=!0)},o(h){h&&(n||(n=Vt(e,Xd,{},!1)),n.run(0)),i=!1},d(h){h&&j(e),h&&n&&n.end(),r=!1,o()}}}function my(t){let e,n,i;function r(h){t[38](h)}let o={isProgress:!0};return t[2]!==void 0&&(o.progress=t[2]),e=new Vb({props:o}),tt.push(()=>At(e,"progress",r)),{c(){fe(e.$$.fragment)},m(h,a){ce(e,h,a),i=!0},p(h,a){const s={};!n&&a[0]&4&&(n=!0,s.progress=h[2],Ht(()=>n=!1)),e.$set(s)},i(h){i||(M(e.$$.fragment,h),i=!0)},o(h){Y(e.$$.fragment,h),i=!1},d(h){ue(e,h)}}}function SU(t){let e,n,i,r,o,h,a,s=t[3]&&ay(t),u=t[7]&&py(t),f=t[4]&&gy(t);r=new LC({props:{$$slots:{backdrop:[CU]},$$scope:{ctx:t}}});let l=t[1]&&my(t);return{c(){s&&s.c(),e=V(),u&&u.c(),n=V(),f&&f.c(),i=V(),fe(r.$$.fragment),o=V(),l&&l.c(),h=Je()},m(c,d){s&&s.m(c,d),U(c,e,d),u&&u.m(c,d),U(c,n,d),f&&f.m(c,d),U(c,i,d),ce(r,c,d),U(c,o,d),l&&l.m(c,d),U(c,h,d),a=!0},p(c,d){c[3]?s?(s.p(c,d),d[0]&8&&M(s,1)):(s=ay(c),s.c(),M(s,1),s.m(e.parentNode,e)):s&&(Te(),Y(s,1,1,()=>{s=null}),ke()),c[7]?u?(u.p(c,d),d[0]&128&&M(u,1)):(u=py(c),u.c(),M(u,1),u.m(n.parentNode,n)):u&&(Te(),Y(u,1,1,()=>{u=null}),ke()),c[4]?f?(f.p(c,d),d[0]&16&&M(f,1)):(f=gy(c),f.c(),M(f,1),f.m(i.parentNode,i)):f&&(Te(),Y(f,1,1,()=>{f=null}),ke());const p={};d[2]&2048&&(p.$$scope={dirty:d,ctx:c}),r.$set(p),c[1]?l?(l.p(c,d),d[0]&2&&M(l,1)):(l=my(c),l.c(),M(l,1),l.m(h.parentNode,h)):l&&(Te(),Y(l,1,1,()=>{l=null}),ke())},i(c){a||(M(s),M(u),M(f),M(r.$$.fragment,c),M(l),a=!0)},o(c){Y(s),Y(u),Y(f),Y(r.$$.fragment,c),Y(l),a=!1},d(c){c&&(j(e),j(n),j(i),j(o),j(h)),s&&s.d(c),u&&u.d(c),f&&f.d(c),ue(r,c),l&&l.d(c)}}}function vy(t,e){for(const[n,i]of t.entries())for(const[r,o]of e[n].canvasJSON.objects.entries())(o.objType==="clipart"||o.objType==="text"||o.objType==="shape"||o.objType==="draw"||o.objType==="upload")&&t[n].canvasJSON.objects.push(o);return t}function _y(t){console.log({e:t})}function TU(t,e,n){let i,r,o,h,a,s,u,f,l,c,d,p,m;Me(t,Ns,de=>n(46,i=de)),Me(t,Yt,de=>n(25,r=de)),Me(t,Le,de=>n(9,o=de)),Me(t,di,de=>n(10,h=de)),Me(t,po,de=>n(11,a=de)),Me(t,jo,de=>n(47,s=de)),Me(t,Ii,de=>n(12,u=de)),Me(t,Cp,de=>n(48,f=de)),Me(t,$o,de=>n(13,l=de)),Me(t,Yl,de=>n(49,c=de)),Me(t,Go,de=>n(50,d=de)),Me(t,ia,de=>n(14,p=de)),Me(t,Ui,de=>n(15,m=de)),_e(Le,o.prints=[],o);let g=1,v=!1,_=0,b=!1,y=!1,w=!1,C=null,T=null,x=null,A=null,I=null,W=null,H="",{uuid:q,shopid:G,provider:B,productno:z,previewclass:ee,previewitem:oe,mode:O}=Hx();B&&I1("provider",B),xi(async()=>{if(O==="design"){const Xe=document.getElementById("podiz-button");if(Xe){const lt=document.createElement("button");lt.textContent="",lt.addEventListener("click",()=>P()),lt.classList.add("podiz-run-btn"),Xe.appendChild(lt)}else window.runPodizEditor=function(lt=null){P(lt)};return}n(8,A=await Kx());const de=document.getElementById("podiz-member-design");if(de&&de.addEventListener("click",le),ee){n(7,x=qx(ee,oe));return}if(O==="product"){Vx(),await L();const Xe=document.createElement("button");Xe.textContent="",Xe.addEventListener("click",()=>P());const lt=document.getElementById("podiz-button");lt&&(Xe.classList.add("podiz-run-btn"),lt.appendChild(Xe)),document.getElementById("podiz-template")&&new fU({target:document.getElementById("podiz-template"),props:{editorProductLink:T.editorProductLink,handleClick:P}})}const De=document.getElementById("podiz-data-uuid");return De&&(I=De.value),()=>{de&&de.removeEventListener("click",le)}});async function P(de=null){if(n(1,v=!0),n(4,y=!1),de?I=de:(I=null,W=null),I){const{data:De,error:Xe}=await ob(I);if(Xe){console.log(Xe);return}De&&(z=De.cafe24Product.productno,B=De.cafe24Product?"cafe24":null,G=De.publish.shop,W=De)}if(C||await L(),await F(),G&&await ck(G),B==="cafe24"&&(_e(Ii,u.options={},u),_e(Ii,u.productno=z,u),O==="product")){const De=await Ef(z),Xe=await Cg(z);_e(Ii,u.options=De.options,u),_e(Ii,u.product=Xe.product,u)}n(1,v=!1),n(3,b=!0)}async function F(){var Xe;n(1,v=!0);const{data:de,error:De}=await ZT(C);if(De){console.error(De);return}_e(Le,o.id=null,o),_e(Le,o.scenes=de.editor.scenes,o),_e(Le,o.product=de.editor.product,o),_e(Le,o.currentOption=W?W.currentOption:null,o),_e(Le,o.count=o.product.minCnt?o.product.minCnt:1,o),_e(Le,o.uuid=Pr(),o),_e(Le,o.uploads=de.uploads?de.uploads:[],o),_e(Le,o.publish=de.id,o),_e(Le,o.cafe24MallId=A?A.cafe24MallId:null,o),_e(Le,o.cafe24MemberId=A?A.cafe24MemberId:null,o),_e(Le,o.cafe24ShopNo=A?A.cafe24ShopNo:null,o),_e(Le,o.cafe24UserType=A?A.cafe24UserType:null,o),_e(Le,o.templateTitle=W?W.templateTitle:"",o),_e(Le,o.templateKeyword=W?W.templateKeyword:"",o),_e(Le,o.cafe24Product=u,o),await R(o.product.shop),await R1(),_e(Le,o.prints=de.editor.prints,o),W&&(W.uploads&&(_e(Le,o.uploads=W.uploads,o),_e(Go,d=W.uploads,d)),_e(Le,o.prints=vy(o.prints,W.prints),o)),f&&_e(Le,o.prints=vy(o.prints,f),o),(Xe=o.scenes)!=null&&Xe.length&&J(),n(0,g++,g),n(1,v=!1)}async function L(){const{data:de,error:De}=await ok({provider:B,productno:z,shopid:G});if(!de.length||De){alert("   ."),n(3,b=!1);return}_e(Yl,c=de[0],c);const Xe=c.linkOptions;Xe.length&&(o!=null&&o.currentOption||(n(6,C=Xe[0].publish),T=Xe[0]))}async function J(){_e(Le,o.composites=[],o);for(const de of o.prints)if(de.id){const De=await sk(de.id);De.data&&_e(Le,o.composites=[...o.composites,De.data],o)}}async function R(de){try{const De=await nk(de);De.data&&_e($o,l=De.data.defaultFonts,l);const Xe=await tk(de);Xe.data&&_e($o,l=[...l,...Xe.data],l);const lt=l.map(kt=>kt.css).join(`
`),vn=document.createElement("style");vn.textContent=lt,document.head.appendChild(vn),await document.fonts.ready;const ct=l.map(kt=>kt.fontFamily&&kt.url?new FontFace(kt.fontFamily,`url(${kt.url})`).load().catch(An=>(console.warn(`Failed to load font: ${kt.fontFamily}`,An),null)):Promise.resolve());await Promise.all(ct),document.dispatchEvent(new Event("fontsLoaded"))}catch(De){console.error("Error loading fonts:",De)}}async function D(){var de;try{n(1,v=!0),n(2,_=1);const De=o.prints;for(const[Xe,lt]of De.entries())if(n(2,_=100/De.length*(Xe+1)),lt.id&&lt.imageDataURL&&lt.isChange){const vn=await Px(o,Xe,o.currentOption.colorCode);te(vn.scenes),(de=vn.scenes)!=null&&de.length&&_e(Le,o.thumbnails=vn.scenes.map(ct=>ct.compositeThumbnail).filter(ct=>ct),o),lt.isChange=!1}}catch(De){console.log({error:De})}finally{n(1,v=!1)}}async function X(){await D(),Oo(WF,{isOpen:!0,message:""})}function K(){Oo(AN,{isOpen:!0,message:"",changeEditorDataIndex:ie,sendOrder:ye,mode:O})}async function re(){await ne(),K()}function te(de){console.log({compositeScenes:de});for(const[De,Xe]of de.entries())_e(Le,o.scenes[De].composites=Xe.composites,o),Xe.compositeThumbnail&&_e(Le,o.scenes[De].compositeThumbnail=Xe.compositeThumbnail,o)}async function $(de=!0){if(jy(),console.log({$editorData:o}),console.log({mode:O}),O==="design"&&!o.templateTitle){Oo(pU,{isOpen:!0,handleAddEditorData:$});return}await D(),await Se();const De=JSON.stringify(o);s!=null&&s>=0&&s<h.length?_e(di,h[s]=JSON.parse(De),h):_e(di,h=[...h,JSON.parse(De)],h),de&&K()}async function ae(){for(const de of h){const{id:De}=await me(de);de.id=De}}async function me(de){const De={id:de.id?de.id:null,uuid:de.uuid,prints:de.prints,uploads:de.uploads,scenes:de.scenes.map(vn=>{const{composites:ct,...kt}=vn;return kt}),thumbnails:de.thumbnails,printImages:de.printImages,currentOption:de.currentOption,provider:B,count:de.count,publish:de.publish,cafe24MallId:de.cafe24MallId,cafe24ShopNo:de.cafe24ShopNo,cafe24UserType:de.cafe24UserType,cafe24MemberId:de.cafe24MemberId,cafe24Product:de.cafe24Product,printMemo:H,templateTitle:de.templateTitle,templateKeyword:de.templateKeyword};O==="design"&&(De.currentOption=null);const{data:Xe,error:lt}=await ik(De);if(lt){console.log(lt);return}return console.log("save data",Xe),Xe}async function Q(){await ne(),_e(jo,s++,s),_e(Le,o.currentOption=null,o),o.prints.forEach(de=>{de.isChange!==void 0&&de.isChange===!1&&(de.isChange=!0)})}async function N(){await ne(),_e(jo,s++,s),Oo(sU,{isOpen:!0,changeProduct:se})}async function ne(){o.prints.filter(De=>De.isChange).length>=1&&(confirm(" .        . ?")?await $(!1):console.log("  ."))}async function se({product_no:de}){W=null,z=de,_e(Cp,f=[...o.prints],f),_e(Ii,u.options={},u),_e(Ii,u.productno=z,u),await L(),await F();const De=await Ef(z),Xe=await Cg(z);_e(Ii,u.options=De.options,u),_e(Ii,u.product=Xe.product,u)}function ie(de){_e(jo,s=de,s);const De=JSON.stringify(h[de]);_e(Le,o=JSON.parse(De),o),n(0,g++,g)}function he(de){H=de,console.log({printMemo:H})}async function ye(){if(a.usePrintMemo&&O!=="design"){dn(),Oo(Z4,{isOpen:!0,orderAction:Ie,setPrintMemo:he});return}Ie()}async function Ie(){n(1,v=!0);try{if(await ae(),O==="design"){typeof podizCallBack=="function"&&podizCallBack(JSON.parse(JSON.stringify(h))),dn(),n(3,b=!1);return}await Gx(),n(3,b=!1)}catch(de){alert(de)}finally{n(1,v=!1)}}async function Se(){var vn;n(1,v=!0);const de=o.prints.length+o.scenes.length;let De=0;n(2,_=0);const Xe=`editorData/${o.uuid}`,lt=o;_e(Le,o.printImages=[],o);for(let ct=0;ct<lt.prints.length;ct++){const kt=lt.prints[ct];if(kt.imageDataURL?kt.imageDataURL.startsWith("data:image"):null){const Ot=await Lr(kt.imageDataURL,`${Xe}/print_${ct}.png`,_y,{extension:"png"});kt.imageDataURL=Ot.url,o.printImages.push(Ot)}else o.printImages.push({url:kt.imageDataURL});De++,n(2,_=De/de*100)}for(let ct=0;ct<lt.scenes.length;ct++){const kt=lt.scenes[ct];if((vn=kt.compositeThumbnail)!=null&&vn.url?kt.compositeThumbnail.url.startsWith("data:image"):null){const Ot=await Lr(kt.compositeThumbnail.url,`${Xe}/scene_${ct}.jpg`,_y,{extension:"jpg"});kt.compositeThumbnail.url=Ot.url}De++,n(2,_=De/de*100)}return _e(Le,o.thumbnails=lt.scenes.map(ct=>ct.compositeThumbnail).filter(ct=>ct),o),n(1,v=!1),o}function le(){console.log("handleOpenMemberDesign"),n(4,y=!0)}function xe(de){_e(Ns,i=de,i),_e(Yt,r="upload",r),n(5,w=!0)}Di(()=>{delete window.runPodizEditor});const Pe=()=>$(),We=()=>X(),ot=()=>re(),Ke=()=>n(3,b=!1);function Rt(de){g=de,n(0,g)}const pt=()=>n(5,w=!w),ln=()=>Q(),Tt=()=>N(),gn=()=>xe(m[0]);function Zi(de){C=de,n(6,C)}function mn(de){b=de,n(3,b)}const To=()=>n(4,y=!1);function Ua(de){_=de,n(2,_)}return t.$$.update=()=>{t.$$.dirty[0]&33554432&&r!=="upload"&&_e(Ns,i=null,i)},[g,v,_,b,y,w,C,x,A,o,h,a,u,l,p,m,O,P,F,X,re,$,Q,N,xe,r,Pe,We,ot,Ke,Rt,pt,ln,Tt,gn,Zi,mn,To,Ua]}class kU extends qe{constructor(e){super(),Ge(this,e,TU,SU,Ve,{},null,[-1,-1,-1])}}let OU=document.getElementById("podiz-app");new kU({target:OU})});export default EU();
