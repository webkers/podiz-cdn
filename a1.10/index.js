var Jw=Object.defineProperty;var Zw=(t,e,n)=>e in t?Jw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Qw=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var zc=(t,e,n)=>(Zw(t,typeof e!="symbol"?e+"":e,n),n);var W4=Qw((V4,Tl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ve(){}const eh=t=>t;function gi(t,e){for(const n in e)t[n]=e[n];return t}function e1(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function iy(t){return t()}function Pd(){return Object.create(null)}function We(t){t.forEach(iy)}function jn(t){return typeof t=="function"}function Xe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ra;function Ze(t,e){return t===e?!0:(Ra||(Ra=document.createElement("a")),Ra.href=e,t===Ra.href)}function t1(t){return Object.keys(t).length===0}function th(t,...e){if(t==null){for(const i of e)i(void 0);return ve}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function fi(t){let e;return th(t,n=>e=n)(),e}function Ne(t,e,n){t.$$.on_destroy.push(th(e,n))}function da(t,e,n,i){if(t){const r=ry(t,e,n,i);return t[0](r)}}function ry(t,e,n,i){return t[1]&&i?gi(n.ctx.slice(),t[1](i(e))):n.ctx}function pa(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],h=Math.max(e.dirty.length,r.length);for(let a=0;a<h;a+=1)o[a]=e.dirty[a]|r[a];return o}return e.dirty|r}return e.dirty}function ga(t,e,n,i,r,o){if(r){const h=ry(e,n,i,o);t.p(h,r)}}function ma(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Md(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ye(t,e,n){return t.set(n),e}function sy(t){return t&&jn(t.destroy)?t.destroy:ve}function Rd(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const oy=typeof window<"u";let ay=oy?()=>window.performance.now():()=>Date.now(),nh=oy?t=>requestAnimationFrame(t):ve;const As=new Set;function ly(t){As.forEach(e=>{e.c(t)||(As.delete(e),e.f())}),As.size!==0&&nh(ly)}function cy(t){let e;return As.size===0&&nh(ly),{promise:new Promise(n=>{As.add(e={c:t,f:n})}),abort(){As.delete(e)}}}function k(t,e){t.appendChild(e)}function uy(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function n1(t){const e=E("style");return e.textContent="/* empty */",i1(uy(t),e),e.sheet}function i1(t,e){return k(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function r1(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Te(t){return document.createTextNode(t)}function V(){return Te(" ")}function et(){return Te("")}function ne(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function xi(t){return function(e){return e.preventDefault(),t.call(this,e)}}function s1(t){return function(e){e.target===this&&t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const o1=["width","height"];function kl(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&o1.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function Id(t,e){for(const n in e)S(t,n,e[n])}function fy(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function hy(t){return t===""?null:+t}function a1(t){return Array.from(t.childNodes)}function Ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function Fe(t,e){t.value=e??""}function kt(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function mi(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Io(t){const e=t.querySelector(":checked");return e&&e.__value}let Ia;function l1(){if(Ia===void 0){Ia=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ia=!0}}return Ia}function c1(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=E("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=l1();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=ne(window,"message",h=>{h.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=ne(i.contentWindow,"resize",e),e()}),k(t,i),()=>{(r||o&&i.contentWindow)&&o(),j(i)}}function vi(t,e,n){t.classList.toggle(e,!!n)}function dy(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function un(t,e){return new t(e)}const Ol=new Map;let El=0;function u1(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function f1(t,e){const n={stylesheet:n1(e),rules:{}};return Ol.set(t,n),n}function Hu(t,e,n,i,r,o,h,a=0){const s=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=s){const v=e+(n-e)*o(g);c+=g*100+`%{${h(v,1-v)}}
`}const f=c+`100% {${h(n,1-n)}}
}`,l=`__svelte_${u1(f)}_${a}`,u=uy(t),{stylesheet:d,rules:p}=Ol.get(u)||f1(u,t);p[l]||(p[l]=!0,d.insertRule(`@keyframes ${l} ${f}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${l} ${i}ms linear ${r}ms 1 both`,El+=1,l}function py(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),El-=r,El||h1())}function h1(){nh(()=>{El||(Ol.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),Ol.clear())})}function d1(t,e,n,i){if(!e)return ve;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return ve;const{delay:o=0,duration:h=300,easing:a=eh,start:s=ay()+o,end:c=s+h,tick:f=ve,css:l}=n(t,{from:e,to:r},i);let u=!0,d=!1,p;function m(){l&&(p=Hu(t,0,1,h,o,a,l)),o||(d=!0)}function g(){l&&py(t,p),u=!1}return cy(v=>{if(!d&&v>=s&&(d=!0),d&&v>=c&&(f(1,0),g()),!u)return!1;if(d){const _=v-s,b=0+1*a(_/h);f(b,1-b)}return!0}),m(),f(0,1),g}function p1(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,g1(t,r)}}function g1(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r=i.transform==="none"?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let qo;function Di(t){qo=t}function va(){if(!qo)throw new Error("Function called outside component initialization");return qo}function Yi(t){va().$$.on_mount.push(t)}function Wi(t){va().$$.on_destroy.push(t)}function Yt(){const t=va();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=dy(e,n,{cancelable:i});return r.slice().forEach(h=>{h.call(t,o)}),!o.defaultPrevented}return!0}}function m1(t,e){return va().$$.context.set(t,e),e}function fr(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const gs=[],it=[];let Ps=[];const Vu=[],gy=Promise.resolve();let Xu=!1;function my(){Xu||(Xu=!0,gy.then(ih))}function v1(){return my(),gy}function Vt(t){Ps.push(t)}function Ut(t){Vu.push(t)}const Hc=new Set;let is=0;function ih(){if(is!==0)return;const t=qo;do{try{for(;is<gs.length;){const e=gs[is];is++,Di(e),_1(e.$$)}}catch(e){throw gs.length=0,is=0,e}for(Di(null),gs.length=0,is=0;it.length;)it.pop()();for(let e=0;e<Ps.length;e+=1){const n=Ps[e];Hc.has(n)||(Hc.add(n),n())}Ps.length=0}while(gs.length);for(;Vu.length;)Vu.pop()();Xu=!1,Hc.clear(),Di(t)}function _1(t){if(t.fragment!==null){t.update(),We(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Vt)}}function y1(t){const e=[],n=[];Ps.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ps=e}let yo;function b1(){return yo||(yo=Promise.resolve(),yo.then(()=>{yo=null})),yo}function Vc(t,e,n){t.dispatchEvent(dy(`${e?"intro":"outro"}${n}`))}const ol=new Set;let Ai;function Oe(){Ai={r:0,c:[],p:Ai}}function Ee(){Ai.r||We(Ai.c),Ai=Ai.p}function I(t,e){t&&t.i&&(ol.delete(t),t.i(e))}function W(t,e,n,i){if(t&&t.o){if(ol.has(t))return;ol.add(t),Ai.c.push(()=>{ol.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const w1={duration:0};function Qt(t,e,n,i){let o=e(t,n,{direction:"both"}),h=i?0:1,a=null,s=null,c=null,f;function l(){c&&py(t,c)}function u(p,m){const g=p.b-h;return m*=Math.abs(g),{a:h,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function d(p){const{delay:m=0,duration:g=300,easing:v=eh,tick:_=ve,css:b}=o||w1,y={start:ay()+m,b:p};p||(y.group=Ai,Ai.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=y:(b&&(l(),c=Hu(t,h,p,g,m,v,b)),p&&_(0,1),a=u(y,g),Vt(()=>Vc(t,p,"start")),cy(C=>{if(s&&C>s.start&&(a=u(s,g),s=null,Vc(t,a.b,"start"),b&&(l(),c=Hu(t,h,a.b,a.duration,0,v,o.css))),a){if(C>=a.end)_(h=a.b,1-h),Vc(t,a.b,"end"),s||(a.b?l():--a.group.r||We(a.group.c)),a=null;else if(C>=a.start){const w=C-a.start;h=a.a+a.d*v(w/a.duration),_(h,1-h)}}return!!(a||s)}))}return{run(p){jn(o)?b1().then(()=>{o=o({direction:p?"in":"out"}),d(p)}):d(p)},end(){l(),a=s=null}}}function Hs(t,e){const n=e.token={};function i(r,o,h,a){if(e.token!==n)return;e.resolved=a;let s=e.ctx;h!==void 0&&(s=s.slice(),s[h]=a);const c=r&&(e.current=r)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((l,u)=>{u!==o&&l&&(Oe(),W(l,1,1,()=>{e.blocks[u]===l&&(e.blocks[u]=null)}),Ee())}):e.block.d(1),c.c(),I(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[o]=c),f&&ih()}if(e1(t)){const r=va();if(t.then(o=>{Di(r),i(e.then,1,e.value,o),Di(null)},o=>{if(Di(r),i(e.catch,2,e.error,o),Di(null),!e.hasCatch)throw o}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function rh(t,e,n){const i=e.slice(),{resolved:r}=t;t.current===t.then&&(i[t.value]=r),t.current===t.catch&&(i[t.error]=r),t.block.p(i,n)}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function vy(t,e){W(t,1,1,()=>{e.delete(t.key)})}function C1(t,e){t.f(),vy(t,e)}function _y(t,e,n,i,r,o,h,a,s,c,f,l){let u=t.length,d=o.length,p=u;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map,b=[];for(p=d;p--;){const T=l(r,o,p),O=n(T);let A=h.get(O);A?i&&b.push(()=>A.p(T,e)):(A=c(O,T),A.c()),v.set(O,g[p]=A),O in m&&_.set(O,Math.abs(p-m[O]))}const y=new Set,C=new Set;function w(T){I(T,1),T.m(a,f),h.set(T.key,T),f=T.first,d--}for(;u&&d;){const T=g[d-1],O=t[u-1],A=T.key,L=O.key;T===O?(f=T.first,u--,d--):v.has(L)?!h.has(A)||y.has(A)?w(T):C.has(L)?u--:_.get(A)>_.get(L)?(C.add(A),w(T)):(y.add(L),u--):(s(O,h),u--)}for(;u--;){const T=t[u];v.has(T.key)||s(T,h)}for(;d;)w(g[d-1]);return We(b),g}function Hr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const h=t[o],a=e[o];if(a){for(const s in h)s in a||(i[s]=1);for(const s in a)r[s]||(n[s]=a[s],r[s]=1);t[o]=a}else for(const s in h)r[s]=1}for(const h in i)h in n||(n[h]=void 0);return n}function xl(t){return typeof t=="object"&&t!==null?t:{}}function Et(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function he(t){t&&t.c()}function ue(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Vt(()=>{const o=t.$$.on_mount.map(iy).filter(jn);t.$$.on_destroy?t.$$.on_destroy.push(...o):We(o),t.$$.on_mount=[]}),r.forEach(Vt)}function fe(t,e){const n=t.$$;n.fragment!==null&&(y1(n.after_update),We(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function S1(t,e){t.$$.dirty[0]===-1&&(gs.push(t),my(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function $e(t,e,n,i,r,o,h=null,a=[-1]){const s=qo;Di(t);const c=t.$$={fragment:null,ctx:[],props:o,update:ve,not_equal:r,bound:Pd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Pd(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};h&&h(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(l,u,...d)=>{const p=d.length?d[0]:u;return c.ctx&&r(c.ctx[l],c.ctx[l]=p)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](p),f&&S1(t,l)),u}):[],c.update(),f=!0,We(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const l=a1(e.target);c.fragment&&c.fragment.l(l),l.forEach(j)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),ue(t,e.target,e.anchor),ih()}Di(s)}class Ge{constructor(){zc(this,"$$");zc(this,"$$set")}$destroy(){fe(this,1),this.$destroy=ve}$on(e,n){if(!jn(n))return ve;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!t1(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const T1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(T1);var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var ut={};const O1={},E1=Object.freeze(Object.defineProperty({__proto__:null,default:O1},Symbol.toStringTag,{value:"Module"})),Ir=yy(E1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Ir,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Ir.implForWrapper,e.nodeCanvas=Ir.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function s(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function c(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function f(d,p){if(arguments.length===1)for(var m in d)c.call(this,m,d[m]);else c.call(this,d,p);return this}function l(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)a.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)a.call(this,m,d[m]);else a.call(this,d,p);return this}function u(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(_){return _!==!1}),this}e.Observable={fire:u,on:s,once:f,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,c){var f=this._objects;return c?f[s]=a:f.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,c=!1,f=0,l=arguments.length;f<l;f++)s=a.indexOf(arguments[f]),s!==-1&&(c=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var c=this.getObjects(),f=0,l=c.length;f<l;f++)a.call(s,c[f],f,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(s,new e.Gradient(a))},_initPattern:function(a,s,c){a&&a.source&&!(a instanceof e.Pattern)?this.set(s,new e.Pattern(a,c)):c&&c()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,c=Math.atan2,f=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/u;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/u,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*l},radiansToDegrees:function(d){return d/l},rotatePoint:function(d,p,m){var g=new e.Point(d.x-p.x,d.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var m=e.util.sin(p),g=e.util.cos(p),v=d.x*g-d.y*m,_=d.x*m+d.y*g;return{x:v,y:_}},createVector:function(d,p){return new e.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new e.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,m){var g=e.util.createVector(d,p),v=e.util.createVector(d,m),_=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,_),v),y=_*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,y)),angle:_}},projectStrokeOnPoints:function(d,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(y){var C=v/Math.hypot(y.x,y.y);return new e.Point(y.x*C*_.x,y.y*C*_.y)};return d.length<=1||d.forEach(function(y,C){var w=new e.Point(y.x,y.y),T,O;C===0?(O=d[C+1],T=m?b(e.util.createVector(O,w)).addEquals(w):d[d.length-1]):C===d.length-1?(T=d[C-1],O=m?b(e.util.createVector(T,w)).addEquals(w):d[0]):(T=d[C-1],O=d[C+1]);var A=e.util.getBisector(w,T,O),L=A.vector,G=A.angle,Y,te;if(p.strokeLineJoin==="miter"&&(Y=-v/Math.sin(G/2),te=new e.Point(L.x*Y*_.x,L.y*Y*_.y),Math.hypot(te.x,te.y)/v<=p.strokeMiterLimit)){g.push(w.add(te)),g.push(w.subtract(te));return}Y=-v*Math.SQRT2,te=new e.Point(L.x*Y*_.x,L.y*Y*_.y),g.push(w.add(te)),g.push(w.subtract(te))}),g},transformPoint:function(d,p,m){return m?new e.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new e.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=e.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],v=e.util.array.min(g),_=e.util.array.max(g),b=_-v,y=[d[0].y,d[1].y,d[2].y,d[3].y],C=e.util.array.min(y),w=e.util.array.max(y),T=w-C;return{left:v,top:C,width:b,height:T}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=e.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=e.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),e.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return e;var p=d.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var v=e.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,_)),v.src=d},loadImageInDom:function(d,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),e.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var v=[],_=0,b=d.length;function y(){++_===b&&p&&p(v.filter(function(C){return C}))}if(!b){p&&p(v);return}d.forEach(function(C,w){if(!C||!C.type){y();return}var T=e.util.getKlass(C.type,m);T.fromObject(C,function(O,A){A||(v[w]=O),g&&g(C,O,A),y()})})},enlivenObjectEnlivables:function(d,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});e.util.enlivenObjects(g.map(function(v){return d[v]}),function(v){var _={};g.forEach(function(b,y){_[b]=v[y],p&&(p[b]=v[y])}),m&&m(_)})},enlivenPatterns:function(d,p){d=d||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=d.length;if(!_){p&&p(g);return}d.forEach(function(b,y){b&&b.source?new e.Pattern(b,function(C){g[y]=C,m()}):(g[y]=b,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?(typeof m<"u"&&(d[0].sourcePath=m),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in d&&(p[m[g]]=d[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(d){var p=e.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=c(d[1],d[0]),m=f(d[0],2)+f(d[1],2),g=s(m),v=(d[0]*d[3]-d[2]*d[1])/g,_=c(d[0]*d[2]+d[1]*d[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:_/l,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(d.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,_=e.util.degreesToRadians;return d.skewX&&(g=v(g,[1,0,Math.tan(_(d.skewX)),1],!0)),d.skewY&&(g=v(g,[1,Math.tan(_(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=e.util.multiplyTransformMatrices;return d.angle&&(p=m(p,e.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,b,y=d.getImageData(p,m,g*2||1,g*2||1),C=y.data.length;for(_=3;_<C&&(b=y.data[_],v=b<=0,v!==!1);_+=4);return y=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",v=d.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?e.charWidthsCache[d]&&delete e.charWidthsCache[d]:e.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,d.calcOwnMatrix());e.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){e.util.applyTransformToObject(d,e.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),y=e.util.makeBoundingBoxFromPoints(_,b);return{x:y.width,y:y.height}},mergeClipPaths:function(d,p){var m=d,g=p;m.inverted&&!g.inverted&&(m=p,g=d),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(d,p,m){return m=m||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||m&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},b=[],y=0;y<g.length;y++){if(!m[y]){v+=g[y].length;continue}for(var C=0;C<g[y].length;C++){v++;var w=m[y][C];if(w&&Object.keys(w).length>0){var T=e.util.hasStyleChanged(_,w,!0);T?b.push({start:v,end:v+1,style:w}):b[b.length-1].end++}_=w||{}}}return b},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var m=p.split(`
`),g=-1,v=0,_={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)g++,d[v]&&d[v].start<=g&&g<d[v].end&&(_[b]=_[b]||{},_[b][y]=Object.assign({},d[v].style),g===d[v].end-1&&v++);return _}}}(t),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function f(x,P,R,F,K,M,D,H,J,ie,Z){var $=e.util.cos(x),se=e.util.sin(x),pe=e.util.cos(P),z=e.util.sin(P),X=R*K*pe-F*M*z+D,oe=F*K*pe+R*M*z+H,ae=ie+J*(-R*K*se-F*M*$),re=Z+J*(-F*K*se+R*M*$),ce=X+J*(R*K*z+F*M*pe),_e=oe+J*(F*K*z-R*M*pe);return["C",ae,re,ce,_e,X,oe]}function l(x,P,R,F,K,M,D){var H=Math.PI,J=D*H/180,ie=e.util.sin(J),Z=e.util.cos(J),$=0,se=0;R=Math.abs(R),F=Math.abs(F);var pe=-Z*x*.5-ie*P*.5,z=-Z*P*.5+ie*x*.5,X=R*R,oe=F*F,ae=z*z,re=pe*pe,ce=X*oe-X*ae-oe*re,_e=0;if(ce<0){var Pe=Math.sqrt(1-ce/(X*oe));R*=Pe,F*=Pe}else _e=(K===M?-1:1)*Math.sqrt(ce/(X*ae+oe*re));var Se=_e*R*z/F,le=-_e*F*pe/R,xe=Z*Se-ie*le+x*.5,Me=ie*Se+Z*le+P*.5,Ue=u(1,0,(pe-Se)/R,(z-le)/F),ot=u((pe-Se)/R,(z-le)/F,(-pe-Se)/R,(-z-le)/F);M===0&&ot>0?ot-=2*H:M===1&&ot<0&&(ot+=2*H);for(var Qe=Math.ceil(Math.abs(ot/H*2)),yt=[],ht=ot/Qe,Pn=8/3*Math.sin(ht/4)*Math.sin(ht/4)/Math.sin(ht/2),de=Ue+ht,be=0;be<Qe;be++)yt[be]=f(Ue,de,Z,ie,R,F,xe,Me,Pn,$,se),$=yt[be][5],se=yt[be][6],Ue=de,de+=ht;return yt}function u(x,P,R,F){var K=Math.atan2(P,x),M=Math.atan2(F,R);return M>=K?M-K:2*Math.PI-(K-M)}function d(x,P,R,F,K,M,D,H){var J;if(e.cachesBoundsOfCurve&&(J=a.call(arguments),e.boundsOfCurveCache[J]))return e.boundsOfCurveCache[J];var ie=Math.sqrt,Z=Math.min,$=Math.max,se=Math.abs,pe=[],z=[[],[]],X,oe,ae,re,ce,_e,Pe,Se;oe=6*x-12*R+6*K,X=-3*x+9*R-9*K+3*D,ae=3*R-3*x;for(var le=0;le<2;++le){if(le>0&&(oe=6*P-12*F+6*M,X=-3*P+9*F-9*M+3*H,ae=3*F-3*P),se(X)<1e-12){if(se(oe)<1e-12)continue;re=-ae/oe,0<re&&re<1&&pe.push(re);continue}Pe=oe*oe-4*ae*X,!(Pe<0)&&(Se=ie(Pe),ce=(-oe+Se)/(2*X),0<ce&&ce<1&&pe.push(ce),_e=(-oe-Se)/(2*X),0<_e&&_e<1&&pe.push(_e))}for(var xe,Me,Ue=pe.length,ot=Ue,Qe;Ue--;)re=pe[Ue],Qe=1-re,xe=Qe*Qe*Qe*x+3*Qe*Qe*re*R+3*Qe*re*re*K+re*re*re*D,z[0][Ue]=xe,Me=Qe*Qe*Qe*P+3*Qe*Qe*re*F+3*Qe*re*re*M+re*re*re*H,z[1][Ue]=Me;z[0][ot]=x,z[1][ot]=P,z[0][ot+1]=D,z[1][ot+1]=H;var yt=[{x:Z.apply(null,z[0]),y:Z.apply(null,z[1])},{x:$.apply(null,z[0]),y:$.apply(null,z[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[J]=yt),yt}function p(x,P,R){for(var F=R[1],K=R[2],M=R[3],D=R[4],H=R[5],J=R[6],ie=R[7],Z=l(J-x,ie-P,F,K,D,H,M),$=0,se=Z.length;$<se;$++)Z[$][1]+=x,Z[$][2]+=P,Z[$][3]+=x,Z[$][4]+=P,Z[$][5]+=x,Z[$][6]+=P;return Z}function m(x){var P=0,R=0,F=x.length,K=0,M=0,D,H,J,ie=[],Z,$,se;for(H=0;H<F;++H){switch(J=!1,D=x[H].slice(0),D[0]){case"l":D[0]="L",D[1]+=P,D[2]+=R;case"L":P=D[1],R=D[2];break;case"h":D[1]+=P;case"H":D[0]="L",D[2]=R,P=D[1];break;case"v":D[1]+=R;case"V":D[0]="L",R=D[1],D[1]=P,D[2]=R;break;case"m":D[0]="M",D[1]+=P,D[2]+=R;case"M":P=D[1],R=D[2],K=D[1],M=D[2];break;case"c":D[0]="C",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R,D[5]+=P,D[6]+=R;case"C":$=D[3],se=D[4],P=D[5],R=D[6];break;case"s":D[0]="S",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R;case"S":Z==="C"?($=2*P-$,se=2*R-se):($=P,se=R),P=D[3],R=D[4],D[0]="C",D[5]=D[3],D[6]=D[4],D[3]=D[1],D[4]=D[2],D[1]=$,D[2]=se,$=D[3],se=D[4];break;case"q":D[0]="Q",D[1]+=P,D[2]+=R,D[3]+=P,D[4]+=R;case"Q":$=D[1],se=D[2],P=D[3],R=D[4];break;case"t":D[0]="T",D[1]+=P,D[2]+=R;case"T":Z==="Q"?($=2*P-$,se=2*R-se):($=P,se=R),D[0]="Q",P=D[1],R=D[2],D[1]=$,D[2]=se,D[3]=P,D[4]=R;break;case"a":D[0]="A",D[6]+=P,D[7]+=R;case"A":J=!0,ie=ie.concat(p(P,R,D)),P=D[6],R=D[7];break;case"z":case"Z":P=K,R=M;break}J||ie.push(D),Z=D[0]}return ie}function g(x,P,R,F){return Math.sqrt((R-x)*(R-x)+(F-P)*(F-P))}function v(x){return x*x*x}function _(x){return 3*x*x*(1-x)}function b(x){return 3*x*(1-x)*(1-x)}function y(x){return(1-x)*(1-x)*(1-x)}function C(x,P,R,F,K,M,D,H){return function(J){var ie=v(J),Z=_(J),$=b(J),se=y(J);return{x:D*ie+K*Z+R*$+x*se,y:H*ie+M*Z+F*$+P*se}}}function w(x,P,R,F,K,M,D,H){return function(J){var ie=1-J,Z=3*ie*ie*(R-x)+6*ie*J*(K-R)+3*J*J*(D-K),$=3*ie*ie*(F-P)+6*ie*J*(M-F)+3*J*J*(H-M);return Math.atan2($,Z)}}function T(x){return x*x}function O(x){return 2*x*(1-x)}function A(x){return(1-x)*(1-x)}function L(x,P,R,F,K,M){return function(D){var H=T(D),J=O(D),ie=A(D);return{x:K*H+R*J+x*ie,y:M*H+F*J+P*ie}}}function G(x,P,R,F,K,M){return function(D){var H=1-D,J=2*H*(R-x)+2*D*(K-R),ie=2*H*(F-P)+2*D*(M-F);return Math.atan2(ie,J)}}function Y(x,P,R){var F={x:P,y:R},K,M=0,D;for(D=1;D<=100;D+=1)K=x(D/100),M+=g(F.x,F.y,K.x,K.y),F=K;return M}function te(x,P){for(var R=0,F=0,K=x.iterator,M={x:x.x,y:x.y},D,H,J=.01,ie=x.angleFinder,Z;F<P&&J>1e-4;)D=K(R),Z=R,H=g(M.x,M.y,D.x,D.y),H+F>P?(R-=J,J/=2):(M=D,R+=J,F+=H);return D.angle=ie(Z),D}function q(x){for(var P=0,R=x.length,F,K=0,M=0,D=0,H=0,J=[],ie,Z,$,se=0;se<R;se++){switch(F=x[se],Z={x:K,y:M,command:F[0]},F[0]){case"M":Z.length=0,D=K=F[1],H=M=F[2];break;case"L":Z.length=g(K,M,F[1],F[2]),K=F[1],M=F[2];break;case"C":ie=C(K,M,F[1],F[2],F[3],F[4],F[5],F[6]),$=w(K,M,F[1],F[2],F[3],F[4],F[5],F[6]),Z.iterator=ie,Z.angleFinder=$,Z.length=Y(ie,K,M),K=F[5],M=F[6];break;case"Q":ie=L(K,M,F[1],F[2],F[3],F[4]),$=G(K,M,F[1],F[2],F[3],F[4]),Z.iterator=ie,Z.angleFinder=$,Z.length=Y(ie,K,M),K=F[3],M=F[4];break;case"Z":case"z":Z.destX=D,Z.destY=H,Z.length=g(K,M,D,H),K=D,M=H;break}P+=Z.length,J.push(Z)}return J.push({length:P,x:K,y:M}),J}function N(x,P,R){R||(R=q(x));for(var F=0;P-R[F].length>0&&F<R.length-2;)P-=R[F].length,F++;var K=R[F],M=P/K.length,D=K.command,H=x[F],J;switch(D){case"M":return{x:K.x,y:K.y,angle:0};case"Z":case"z":return J=new e.Point(K.x,K.y).lerp(new e.Point(K.destX,K.destY),M),J.angle=Math.atan2(K.destY-K.y,K.destX-K.x),J;case"L":return J=new e.Point(K.x,K.y).lerp(new e.Point(H[1],H[2]),M),J.angle=Math.atan2(H[2]-K.y,H[1]-K.x),J;case"C":return te(K,P);case"Q":return te(K,P)}}function B(x){var P=[],R=[],F,K,M=e.rePathCommand,D="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",H="("+D+")"+e.commaWsp,J="([01])"+e.commaWsp+"?",ie=H+"?"+H+"?"+H+J+J+H+"?("+D+")",Z=new RegExp(ie,"g"),$,se,pe;if(!x||!x.match)return P;pe=x.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var z=0,X,oe=pe.length;z<oe;z++){F=pe[z],se=F.slice(1).trim(),R.length=0;var ae=F.charAt(0);if(X=[ae],ae.toLowerCase()==="a")for(var re;re=Z.exec(se);)for(var ce=1;ce<re.length;ce++)R.push(re[ce]);else for(;$=M.exec(se);)R.push($[0]);for(var ce=0,_e=R.length;ce<_e;ce++)K=parseFloat(R[ce]),isNaN(K)||X.push(K);var Pe=s[ae.toLowerCase()],Se=c[ae]||ae;if(X.length-1>Pe)for(var le=1,xe=X.length;le<xe;le+=Pe)P.push([ae].concat(X.slice(le,le+Pe))),ae=Se;else P.push(X)}return P}function Q(x,P){var R=[],F,K=new e.Point(x[0].x,x[0].y),M=new e.Point(x[1].x,x[1].y),D=x.length,H=1,J=0,ie=D>2;for(P=P||0,ie&&(H=x[2].x<M.x?-1:x[2].x===M.x?0:1,J=x[2].y<M.y?-1:x[2].y===M.y?0:1),R.push(["M",K.x-H*P,K.y-J*P]),F=1;F<D;F++){if(!K.eq(M)){var Z=K.midPointFrom(M);R.push(["Q",K.x,K.y,Z.x,Z.y])}K=x[F],F+1<x.length&&(M=x[F+1])}return ie&&(H=K.x>x[F-2].x?1:K.x===x[F-2].x?0:-1,J=K.y>x[F-2].y?1:K.y===x[F-2].y?0:-1),R.push(["L",K.x+H*P,K.y+J*P]),R}function ee(x,P,R){return R&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-R.x,-R.y])),x.map(function(F){for(var K=F.slice(0),M={},D=1;D<F.length-1;D+=2)M.x=F[D],M.y=F[D+1],M=e.util.transformPoint(M,P),K[D]=M.x,K[D+1]=M.y;return K})}e.util.joinPath=function(x){return x.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=B,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=Q,e.util.getPathSegmentsInfo=q,e.util.getBoundsOfCurve=d,e.util.getPointOnPath=N,e.util.transformPath=ee}(),function(){var a=Array.prototype.slice;function s(d,p){for(var m=a.call(arguments,2),g=[],v=0,_=d.length;v<_;v++)g[v]=m.length?d[v][p].apply(d[v],m):d[v][p].call(d[v]);return g}function c(d,p){return u(d,p,function(m,g){return m>=g})}function f(d,p){return u(d,p,function(m,g){return m<g})}function l(d,p){for(var m=d.length;m--;)d[m]=p;return d}function u(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,v=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],v)&&(v=d[g][p]);else for(;g--;)m(d[g],v)&&(v=d[g]);return v}}e.util.array={fill:l,invoke:s,min:f,max:c}}(),function(){function a(c,f,l){if(l)if(!e.isLikelyNode&&f instanceof Element)c=f;else if(f instanceof Array){c=[];for(var u=0,d=f.length;u<d;u++)c[u]=a({},f[u],l)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?c[p]=null:f.hasOwnProperty(p)&&(c[p]=a({},f[p],l));else c=f;else for(var p in f)c[p]=f[p];return c}function s(c,f){return a({},c,f)}e.util.object={extend:a,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function a(u){return u.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function s(u,d){return u.charAt(0).toUpperCase()+(d?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(u){var d=0,p,m=[];for(d=0,p;d<u.length;d++)(p=l(u,d))!==!1&&m.push(p);return m}function l(u,d){var p=u.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return u.charAt(d);if(55296<=p&&p<=56319){if(u.length<=d+1)throw"High surrogate without following low surrogate";var m=u.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return u.charAt(d)+u.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=u.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:s,escapeXml:c,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,s=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var y=m[_].apply(this,arguments);if(this.constructor.superclass=b,_!=="initialize")return y}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function u(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=u,g}e.util.createClass=d}(),function(){var a=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,l,u,d){f&&f.addEventListener(l,u,a?!1:d)},e.util.removeListener=function(f,l,u,d){f&&f.removeEventListener(l,u,a?!1:d)};function c(f){var l=f.changedTouches;return l&&l[0]?l[0]:f}e.util.getPointer=function(f){var l=f.target,u=e.util.getScrollLeftTop(l),d=c(f);return{x:d.clientX+u.left,y:d.clientY+u.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?u(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")u(d,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return d}var s=e.document.createElement("div"),c=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(d){return d};c?u=function(d,p){return d.style.opacity=p,d}:f&&(u=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",d}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(y){return typeof y=="string"?e.document.getElementById(y):y}var c,f=function(y){return a.call(y,0)};try{c=f(e.document.childNodes)instanceof Array}catch{}c||(f=function(y){for(var C=new Array(y.length),w=y.length;w--;)C[w]=y[w];return C});function l(y,C){var w=e.document.createElement(y);for(var T in C)T==="class"?w.className=C[T]:T==="for"?w.htmlFor=C[T]:w.setAttribute(T,C[T]);return w}function u(y,C){y&&(" "+y.className+" ").indexOf(" "+C+" ")===-1&&(y.className+=(y.className?" ":"")+C)}function d(y,C,w){return typeof C=="string"&&(C=l(C,w)),y.parentNode&&y.parentNode.replaceChild(C,y),C.appendChild(y),C}function p(y){for(var C=0,w=0,T=e.document.documentElement,O=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(C=O.scrollLeft||T.scrollLeft||0,w=O.scrollTop||T.scrollTop||0):(C+=y.scrollLeft||0,w+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:C,top:w}}function m(y){var C,w=y&&y.ownerDocument,T={left:0,top:0},O={left:0,top:0},A,L={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return O;for(var G in L)O[L[G]]+=parseInt(g(y,G),10)||0;return C=w.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),A=p(y),{left:T.left+A.left-(C.clientLeft||0)+O.left,top:T.top+A.top-(C.clientTop||0)+O.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(y,C){var w=e.document.defaultView.getComputedStyle(y,null);return w?w[C]:void 0}:g=function(y,C){var w=y.style[C];return!w&&y.currentStyle&&(w=y.currentStyle[C]),w},function(){var y=e.document.documentElement.style,C="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function w(O){return typeof O.onselectstart<"u"&&(O.onselectstart=e.util.falseFunction),C?O.style[C]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function T(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),C?O.style[C]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}e.util.makeElementUnselectable=w,e.util.makeElementSelectable=T}();function v(y){var C=e.jsdomImplForWrapper(y);return C._canvas||C._image}function _(y){if(e.isLikelyNode){var C=e.jsdomImplForWrapper(y);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(y,C){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=C}e.util.setImageSmoothing=b,e.util.getById=s,e.util.toArray=f,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=d,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=_}(),function(){function a(f,l){return f+(/\?/.test(f)?"&":"?")+l}function s(){}function c(f,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",d=l.onComplete||function(){},p=new e.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=s)},u==="GET"&&(m=null,typeof l.parameters=="string"&&(f=a(f,l.parameters))),p.open(u,f,!0),(u==="POST"||u==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,s=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return _.forEach(function(b){b.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(b){b.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function f(){return!1}function l(v,_,b,y){return-b*Math.cos(v/y*(Math.PI/2))+b+_}function u(v){v||(v={});var _=!1,b,y=function(){var C=e.runningAnimations.indexOf(b);return C>-1&&e.runningAnimations.splice(C,1)[0]};return b=a(s(v),{cancel:function(){return _=!0,y()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(C){var w=C||+new Date,T=v.duration||500,O=w+T,A,L=v.onChange||f,G=v.abort||f,Y=v.onComplete||f,te=v.easing||l,q="startValue"in v?v.startValue.length>0:!1,N="startValue"in v?v.startValue:0,B="endValue"in v?v.endValue:100,Q=v.byValue||(q?N.map(function(ee,x){return B[x]-N[x]}):B-N);v.onStart&&v.onStart(),function ee(x){A=x||+new Date;var P=A>O?T:A-w,R=P/T,F=q?N.map(function(M,D){return te(P,N[D],Q[D],T)}):te(P,N,Q,T),K=Math.abs(q?(F[0]-N[0])/Q[0]:(F-N)/Q);if(b.currentValue=q?F.slice():F,b.completionRate=K,b.durationRate=R,!_){if(G(F,K,R)){y();return}if(A>O){b.currentValue=q?B.slice():B,b.completionRate=1,b.durationRate=1,L(q?B.slice():B,1,1),Y(B,1,1),y();return}else L(F,K,R),m(ee)}}(w)}),b.cancel}var d=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return d.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=c}(),function(){function a(c,f,l){var u="rgba("+parseInt(c[0]+l*(f[0]-c[0]),10)+","+parseInt(c[1]+l*(f[1]-c[1]),10)+","+parseInt(c[2]+l*(f[2]-c[2]),10);return u+=","+(c&&f?parseFloat(c[3]+l*(f[3]-c[3])):1),u+=")",u}function s(c,f,l,u){var d=new e.Color(c).getSource(),p=new e.Color(f).getSource(),m=u.onComplete,g=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:d,endValue:p,byValue:p,easing:function(v,_,b,y){var C=u.colorEasing?u.colorEasing(v,y):1-Math.cos(v/y*(Math.PI/2));return a(_,b,C)},onComplete:function(v,_,b){if(m)return m(a(p,p,0),_,b)},onChange:function(v,_,b){if(g){if(Array.isArray(v))return g(a(v,v,0),_,b);g(v,_,b)}}}))}e.util.animateColor=s}(),function(){function a(x,P,R,F){return x<Math.abs(P)?(x=P,F=R/4):P===0&&x===0?F=R/(2*Math.PI)*Math.asin(1):F=R/(2*Math.PI)*Math.asin(P/x),{a:x,c:P,p:R,s:F}}function s(x,P,R){return x.a*Math.pow(2,10*(P-=1))*Math.sin((P*R-x.s)*(2*Math.PI)/x.p)}function c(x,P,R,F){return R*((x=x/F-1)*x*x+1)+P}function f(x,P,R,F){return x/=F/2,x<1?R/2*x*x*x+P:R/2*((x-=2)*x*x+2)+P}function l(x,P,R,F){return R*(x/=F)*x*x*x+P}function u(x,P,R,F){return-R*((x=x/F-1)*x*x*x-1)+P}function d(x,P,R,F){return x/=F/2,x<1?R/2*x*x*x*x+P:-R/2*((x-=2)*x*x*x-2)+P}function p(x,P,R,F){return R*(x/=F)*x*x*x*x+P}function m(x,P,R,F){return R*((x=x/F-1)*x*x*x*x+1)+P}function g(x,P,R,F){return x/=F/2,x<1?R/2*x*x*x*x*x+P:R/2*((x-=2)*x*x*x*x+2)+P}function v(x,P,R,F){return-R*Math.cos(x/F*(Math.PI/2))+R+P}function _(x,P,R,F){return R*Math.sin(x/F*(Math.PI/2))+P}function b(x,P,R,F){return-R/2*(Math.cos(Math.PI*x/F)-1)+P}function y(x,P,R,F){return x===0?P:R*Math.pow(2,10*(x/F-1))+P}function C(x,P,R,F){return x===F?P+R:R*(-Math.pow(2,-10*x/F)+1)+P}function w(x,P,R,F){return x===0?P:x===F?P+R:(x/=F/2,x<1?R/2*Math.pow(2,10*(x-1))+P:R/2*(-Math.pow(2,-10*--x)+2)+P)}function T(x,P,R,F){return-R*(Math.sqrt(1-(x/=F)*x)-1)+P}function O(x,P,R,F){return R*Math.sqrt(1-(x=x/F-1)*x)+P}function A(x,P,R,F){return x/=F/2,x<1?-R/2*(Math.sqrt(1-x*x)-1)+P:R/2*(Math.sqrt(1-(x-=2)*x)+1)+P}function L(x,P,R,F){var K=1.70158,M=0,D=R;if(x===0)return P;if(x/=F,x===1)return P+R;M||(M=F*.3);var H=a(D,R,M,K);return-s(H,x,F)+P}function G(x,P,R,F){var K=1.70158,M=0,D=R;if(x===0)return P;if(x/=F,x===1)return P+R;M||(M=F*.3);var H=a(D,R,M,K);return H.a*Math.pow(2,-10*x)*Math.sin((x*F-H.s)*(2*Math.PI)/H.p)+H.c+P}function Y(x,P,R,F){var K=1.70158,M=0,D=R;if(x===0)return P;if(x/=F/2,x===2)return P+R;M||(M=F*(.3*1.5));var H=a(D,R,M,K);return x<1?-.5*s(H,x,F)+P:H.a*Math.pow(2,-10*(x-=1))*Math.sin((x*F-H.s)*(2*Math.PI)/H.p)*.5+H.c+P}function te(x,P,R,F,K){return K===void 0&&(K=1.70158),R*(x/=F)*x*((K+1)*x-K)+P}function q(x,P,R,F,K){return K===void 0&&(K=1.70158),R*((x=x/F-1)*x*((K+1)*x+K)+1)+P}function N(x,P,R,F,K){return K===void 0&&(K=1.70158),x/=F/2,x<1?R/2*(x*x*(((K*=1.525)+1)*x-K))+P:R/2*((x-=2)*x*(((K*=1.525)+1)*x+K)+2)+P}function B(x,P,R,F){return R-Q(F-x,0,R,F)+P}function Q(x,P,R,F){return(x/=F)<1/2.75?R*(7.5625*x*x)+P:x<2/2.75?R*(7.5625*(x-=1.5/2.75)*x+.75)+P:x<2.5/2.75?R*(7.5625*(x-=2.25/2.75)*x+.9375)+P:R*(7.5625*(x-=2.625/2.75)*x+.984375)+P}function ee(x,P,R,F){return x<F/2?B(x*2,0,R,F)*.5+P:Q(x*2-F,0,R,F)*.5+R*.5+P}e.util.ease={easeInQuad:function(x,P,R,F){return R*(x/=F)*x+P},easeOutQuad:function(x,P,R,F){return-R*(x/=F)*(x-2)+P},easeInOutQuad:function(x,P,R,F){return x/=F/2,x<1?R/2*x*x+P:-R/2*(--x*(x-2)-1)+P},easeInCubic:function(x,P,R,F){return R*(x/=F)*x*x+P},easeOutCubic:c,easeInOutCubic:f,easeInQuart:l,easeOutQuart:u,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:b,easeInExpo:y,easeOutExpo:C,easeInOutExpo:w,easeInCirc:T,easeOutCirc:O,easeInOutCirc:A,easeInElastic:L,easeOutElastic:G,easeInOutElastic:Y,easeInBack:te,easeOutBack:q,easeInOutBack:N,easeInBounce:B,easeOutBounce:Q,easeInOutBounce:ee}}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.parseUnit,d=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",C="clip-path";s.svgValidTagNamesRegEx=O(p),s.svgViewBoxElementsRegEx=O(m),s.svgInvalidAncestorsRegEx=O(g),s.svgValidParentsRegEx=O(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function w(M){return M in _?_[M]:M}function T(M,D,H,J){var ie=Array.isArray(D),Z;if((M==="fill"||M==="stroke")&&D==="none")D="";else{if(M==="strokeUniform")return D==="non-scaling-stroke";if(M==="strokeDashArray")D==="none"?D=null:D=D.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(M==="transformMatrix")H&&H.transformMatrix?D=d(H.transformMatrix,s.parseTransformAttribute(D)):D=s.parseTransformAttribute(D);else if(M==="visible")D=D!=="none"&&D!=="hidden",H&&H.visible===!1&&(D=!1);else if(M==="opacity")D=parseFloat(D),H&&typeof H.opacity<"u"&&(D*=H.opacity);else if(M==="textAnchor")D=D==="start"?"left":D==="end"?"right":"center";else if(M==="charSpacing")Z=u(D,J)/J*1e3;else if(M==="paintFirst"){var $=D.indexOf("fill"),se=D.indexOf("stroke"),D="fill";($>-1&&se>-1&&se<$||$===-1&&se>-1)&&(D="stroke")}else{if(M==="href"||M==="xlink:href"||M==="font")return D;if(M==="imageSmoothing")return D==="optimizeQuality";Z=ie?D.map(u):u(D,J)}}return!ie&&isNaN(Z)?D:Z}function O(M){return new RegExp("^("+M.join("|")+")\\b","i")}function A(M){for(var D in b)if(!(typeof M[b[D]]>"u"||M[D]==="")){if(typeof M[D]>"u"){if(!s.Object.prototype[D])continue;M[D]=s.Object.prototype[D]}if(M[D].indexOf("url(")!==0){var H=new s.Color(M[D]);M[D]=H.setAlpha(l(H.getAlpha()*M[b[D]],2)).toRgba()}}return M}function L(M,D){var H,J=[],ie,Z,$;for(Z=0,$=D.length;Z<$;Z++)H=D[Z],ie=M.getElementsByTagName(H),J=J.concat(Array.prototype.slice.call(ie));return J}s.parseTransformAttribute=function(){function M(le,xe){var Me=s.util.cos(xe[0]),Ue=s.util.sin(xe[0]),ot=0,Qe=0;xe.length===3&&(ot=xe[1],Qe=xe[2]),le[0]=Me,le[1]=Ue,le[2]=-Ue,le[3]=Me,le[4]=ot-(Me*ot-Ue*Qe),le[5]=Qe-(Ue*ot+Me*Qe)}function D(le,xe){var Me=xe[0],Ue=xe.length===2?xe[1]:xe[0];le[0]=Me,le[3]=Ue}function H(le,xe,Me){le[Me]=Math.tan(s.util.degreesToRadians(xe[0]))}function J(le,xe){le[4]=xe[0],xe.length===2&&(le[5]=xe[1])}var ie=s.iMatrix,Z=s.reNum,$=s.commaWsp,se="(?:(skewX)\\s*\\(\\s*("+Z+")\\s*\\))",pe="(?:(skewY)\\s*\\(\\s*("+Z+")\\s*\\))",z="(?:(rotate)\\s*\\(\\s*("+Z+")(?:"+$+"("+Z+")"+$+"("+Z+"))?\\s*\\))",X="(?:(scale)\\s*\\(\\s*("+Z+")(?:"+$+"("+Z+"))?\\s*\\))",oe="(?:(translate)\\s*\\(\\s*("+Z+")(?:"+$+"("+Z+"))?\\s*\\))",ae="(?:(matrix)\\s*\\(\\s*("+Z+")"+$+"("+Z+")"+$+"("+Z+")"+$+"("+Z+")"+$+"("+Z+")"+$+"("+Z+")\\s*\\))",re="(?:"+ae+"|"+oe+"|"+X+"|"+z+"|"+se+"|"+pe+")",ce="(?:"+re+"(?:"+$+"*"+re+")*)",_e="^\\s*(?:"+ce+"?)\\s*$",Pe=new RegExp(_e),Se=new RegExp(re,"g");return function(le){var xe=ie.concat(),Me=[];if(!le||le&&!Pe.test(le))return xe;le.replace(Se,function(ot){var Qe=new RegExp(re).exec(ot).filter(function(Pn){return!!Pn}),yt=Qe[1],ht=Qe.slice(2).map(parseFloat);switch(yt){case"translate":J(xe,ht);break;case"rotate":ht[0]=s.util.degreesToRadians(ht[0]),M(xe,ht);break;case"scale":D(xe,ht);break;case"skewX":H(xe,ht,2);break;case"skewY":H(xe,ht,1);break;case"matrix":xe=ht;break}Me.push(xe.concat()),xe=ie.concat()});for(var Ue=Me[0];Me.length>1;)Me.shift(),Ue=s.util.multiplyTransformMatrices(Ue,Me[0]);return Ue}}();function G(M,D){var H,J;M.replace(/;\s*$/,"").split(";").forEach(function(ie){var Z=ie.split(":");H=Z[0].trim().toLowerCase(),J=Z[1].trim(),D[H]=J})}function Y(M,D){var H,J;for(var ie in M)typeof M[ie]>"u"||(H=ie.toLowerCase(),J=M[ie],D[H]=J)}function te(M,D){var H={};for(var J in s.cssRules[D])if(q(M,J.split(" ")))for(var ie in s.cssRules[D][J])H[ie]=s.cssRules[D][J][ie];return H}function q(M,D){var H,J=!0;return H=B(M,D.pop()),H&&D.length&&(J=N(M,D)),H&&J&&D.length===0}function N(M,D){for(var H,J=!0;M.parentNode&&M.parentNode.nodeType===1&&D.length;)J&&(H=D.pop()),M=M.parentNode,J=B(M,H);return D.length===0}function B(M,D){var H=M.nodeName,J=M.getAttribute("class"),ie=M.getAttribute("id"),Z,$;if(Z=new RegExp("^"+H,"i"),D=D.replace(Z,""),ie&&D.length&&(Z=new RegExp("#"+ie+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Z,"")),J&&D.length)for(J=J.split(" "),$=J.length;$--;)Z=new RegExp("\\."+J[$]+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Z,"");return D.length===0}function Q(M,D){var H;if(M.getElementById&&(H=M.getElementById(D)),H)return H;var J,ie,Z,$=M.getElementsByTagName("*");for(ie=0,Z=$.length;ie<Z;ie++)if(J=$[ie],D===J.getAttribute("id"))return J}function ee(M){for(var D=L(M,["use","svg:use"]),H=0;D.length&&H<D.length;){var J=D[H],ie=J.getAttribute("xlink:href")||J.getAttribute("href");if(ie===null)return;var Z=ie.slice(1),$=J.getAttribute("x")||0,se=J.getAttribute("y")||0,pe=Q(M,Z).cloneNode(!0),z=(pe.getAttribute("transform")||"")+" translate("+$+", "+se+")",X,oe=D.length,ae,re,ce,_e,Pe=s.svgNS;if(P(pe),/^svg$/i.test(pe.nodeName)){var Se=pe.ownerDocument.createElementNS(Pe,"g");for(re=0,ce=pe.attributes,_e=ce.length;re<_e;re++)ae=ce.item(re),Se.setAttributeNS(Pe,ae.nodeName,ae.nodeValue);for(;pe.firstChild;)Se.appendChild(pe.firstChild);pe=Se}for(re=0,ce=J.attributes,_e=ce.length;re<_e;re++)ae=ce.item(re),!(ae.nodeName==="x"||ae.nodeName==="y"||ae.nodeName==="xlink:href"||ae.nodeName==="href")&&(ae.nodeName==="transform"?z=ae.nodeValue+" "+z:pe.setAttribute(ae.nodeName,ae.nodeValue));pe.setAttribute("transform",z),pe.setAttribute("instantiated_by_use","1"),pe.removeAttribute("id"),X=J.parentNode,X.replaceChild(pe,J),D.length===oe&&H++}}var x=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(M){if(!s.svgViewBoxElementsRegEx.test(M.nodeName))return{};var D=M.getAttribute("viewBox"),H=1,J=1,ie=0,Z=0,$,se,pe,z,X=M.getAttribute("width"),oe=M.getAttribute("height"),ae=M.getAttribute("x")||0,re=M.getAttribute("y")||0,ce=M.getAttribute("preserveAspectRatio")||"",_e=!D||!(D=D.match(x)),Pe=!X||!oe||X==="100%"||oe==="100%",Se=_e&&Pe,le={},xe="",Me=0,Ue=0;if(le.width=0,le.height=0,le.toBeParsed=Se,_e&&(ae||re)&&M.parentNode&&M.parentNode.nodeName!=="#document"&&(xe=" translate("+u(ae)+" "+u(re)+") ",pe=(M.getAttribute("transform")||"")+xe,M.setAttribute("transform",pe),M.removeAttribute("x"),M.removeAttribute("y")),Se)return le;if(_e)return le.width=u(X),le.height=u(oe),le;if(ie=-parseFloat(D[1]),Z=-parseFloat(D[2]),$=parseFloat(D[3]),se=parseFloat(D[4]),le.minX=ie,le.minY=Z,le.viewBoxWidth=$,le.viewBoxHeight=se,Pe?(le.width=$,le.height=se):(le.width=u(X),le.height=u(oe),H=le.width/$,J=le.height/se),ce=s.util.parsePreserveAspectRatioAttribute(ce),ce.alignX!=="none"&&(ce.meetOrSlice==="meet"&&(J=H=H>J?J:H),ce.meetOrSlice==="slice"&&(J=H=H>J?H:J),Me=le.width-$*H,Ue=le.height-se*H,ce.alignX==="Mid"&&(Me/=2),ce.alignY==="Mid"&&(Ue/=2),ce.alignX==="Min"&&(Me=0),ce.alignY==="Min"&&(Ue=0)),H===1&&J===1&&ie===0&&Z===0&&ae===0&&re===0)return le;if((ae||re)&&M.parentNode.nodeName!=="#document"&&(xe=" translate("+u(ae)+" "+u(re)+") "),pe=xe+" matrix("+H+" 0 0 "+J+" "+(ie*H+Me)+" "+(Z*J+Ue)+") ",M.nodeName==="svg"){for(z=M.ownerDocument.createElementNS(s.svgNS,"g");M.firstChild;)z.appendChild(M.firstChild);M.appendChild(z)}else z=M,z.removeAttribute("x"),z.removeAttribute("y"),pe=z.getAttribute("transform")+pe;return z.setAttribute("transform",pe),le}function R(M,D){for(;M&&(M=M.parentNode);)if(M.nodeName&&D.test(M.nodeName.replace("svg:",""))&&!M.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(M,D,H,J){if(M){ee(M);var ie=s.Object.__uid++,Z,$,se=P(M),pe=s.util.toArray(M.getElementsByTagName("*"));if(se.crossOrigin=J&&J.crossOrigin,se.svgUid=ie,pe.length===0&&s.isLikelyNode){pe=M.selectNodes('//*[name(.)!="svg"]');var z=[];for(Z=0,$=pe.length;Z<$;Z++)z[Z]=pe[Z];pe=z}var X=pe.filter(function(ae){return P(ae),s.svgValidTagNamesRegEx.test(ae.nodeName.replace("svg:",""))&&!R(ae,s.svgInvalidAncestorsRegEx)});if(!X||X&&!X.length){D&&D([],{});return}var oe={};pe.filter(function(ae){return ae.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ae){var re=ae.getAttribute("id");oe[re]=s.util.toArray(ae.getElementsByTagName("*")).filter(function(ce){return s.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))})}),s.gradientDefs[ie]=s.getGradientDefs(M),s.cssRules[ie]=s.getCSSRules(M),s.clipPaths[ie]=oe,s.parseElements(X,function(ae,re){D&&(D(ae,se,re,pe),delete s.gradientDefs[ie],delete s.cssRules[ie],delete s.clipPaths[ie])},f(se),H,J)}};function F(M,D){var H=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],J="xlink:href",ie=D.getAttribute(J).slice(1),Z=Q(M,ie);if(Z&&Z.getAttribute(J)&&F(M,Z),H.forEach(function(se){Z&&!D.hasAttribute(se)&&Z.hasAttribute(se)&&D.setAttribute(se,Z.getAttribute(se))}),!D.children.length)for(var $=Z.cloneNode(!0);$.firstChild;)D.appendChild($.firstChild);D.removeAttribute(J)}var K=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");c(s,{parseFontDeclaration:function(M,D){var H=M.match(K);if(H){var J=H[1],ie=H[3],Z=H[4],$=H[5],se=H[6];J&&(D.fontStyle=J),ie&&(D.fontWeight=isNaN(parseFloat(ie))?ie:parseFloat(ie)),Z&&(D.fontSize=u(Z)),se&&(D.fontFamily=se),$&&(D.lineHeight=$==="normal"?1:$)}},getGradientDefs:function(M){var D=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],H=L(M,D),J,ie=0,Z={};for(ie=H.length;ie--;)J=H[ie],J.getAttribute("xlink:href")&&F(M,J),Z[J.getAttribute("id")]=J;return Z},parseAttributes:function(M,D,H){if(M){var J,ie={},Z,$;typeof H>"u"&&(H=M.getAttribute("svgUid")),M.parentNode&&s.svgValidParentsRegEx.test(M.parentNode.nodeName)&&(ie=s.parseAttributes(M.parentNode,D,H));var se=D.reduce(function(ce,_e){return J=M.getAttribute(_e),J&&(ce[_e]=J),ce},{}),pe=c(te(M,H),s.parseStyleAttribute(M));se=c(se,pe),pe[C]&&M.setAttribute(C,pe[C]),Z=$=ie.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,se[y]&&(se[y]=Z=u(se[y],$));var z,X,oe={};for(var ae in se)z=w(ae),X=T(z,se[ae],ie,Z),oe[z]=X;oe&&oe.font&&s.parseFontDeclaration(oe.font,oe);var re=c(ie,oe);return s.svgValidParentsRegEx.test(M.nodeName)?re:A(re)}},parseElements:function(M,D,H,J,ie){new s.ElementsParser(M,D,H,J,ie).parse()},parseStyleAttribute:function(M){var D={},H=M.getAttribute("style");return H&&(typeof H=="string"?G(H,D):Y(H,D)),D},parsePointsAttribute:function(M){if(!M)return null;M=M.replace(/,/g," ").trim(),M=M.split(/\s+/);var D=[],H,J;for(H=0,J=M.length;H<J;H+=2)D.push({x:parseFloat(M[H]),y:parseFloat(M[H+1])});return D},getCSSRules:function(M){var D=M.getElementsByTagName("style"),H,J,ie={},Z;for(H=0,J=D.length;H<J;H++){var $=D[H].textContent;$=$.replace(/\/\*[\s\S]*?\*\//g,""),$.trim()!==""&&(Z=$.split("}"),Z=Z.filter(function(se){return se.trim()}),Z.forEach(function(se){var pe=se.split("{"),z={},X=pe[1].trim(),oe=X.split(";").filter(function(_e){return _e.trim()});for(H=0,J=oe.length;H<J;H++){var ae=oe[H].split(":"),re=ae[0].trim(),ce=ae[1].trim();z[re]=ce}se=pe[0].trim(),se.split(",").forEach(function(_e){_e=_e.replace(/^svg/i,"").trim(),_e!==""&&(ie[_e]?s.util.object.extend(ie[_e],z):ie[_e]=s.util.object.clone(z))})}))}return ie},loadSVGFromURL:function(M,D,H,J){M=M.replace(/^\n\s*/,"").trim(),new s.util.request(M,{method:"get",onComplete:ie});function ie(Z){var $=Z.responseXML;if(!$||!$.documentElement)return D&&D(null),!1;s.parseSVGDocument($.documentElement,function(se,pe,z,X){D&&D(se,pe,z,X)},H,J)}},loadSVGFromString:function(M,D,H,J){var ie=new s.window.DOMParser,Z=ie.parseFromString(M.trim(),"text/xml");s.parseSVGDocument(Z.documentElement,function($,se,pe,z){D($,se,pe,z)},H,J)}})}(t),e.ElementsParser=function(a,s,c,f,l,u){this.elements=a,this.callback=s,this.options=c,this.reviver=f,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(c,f){c.setAttribute("svgUid",s.svgUid),s.createObject(c,f)})},a.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,c){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(c,s),this.options)}catch(l){e.log(l)}else this.checkIfDone()},a.createCallback=function(s,c){var f=this;return function(l){var u;f.resolveGradient(l,c,"fill"),f.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),f.resolveClipPath(l,c),f.reviver&&f.reviver(c,l),f.instances[s]=l,f.checkIfDone()}},a.extractPropertyDefinition=function(s,c,f){var l=s[c],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var d=u.exec(l)[1];return u.lastIndex=0,e[f][this.svgUid][d]}},a.resolveGradient=function(s,c,f){var l=this.extractPropertyDefinition(s,f,"gradientDefs");if(l){var u=c.getAttribute(f+"-opacity"),d=e.Gradient.fromElement(l,s,u,this.options);s.set(f,d)}},a.createClipPathCallback=function(s,c){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,c.push(f)}},a.resolveClipPath=function(s,c){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),l,u,d,p,m,g;if(f){p=[],d=e.util.invertTransform(s.calcTransformMatrix());for(var v=f[0].parentNode,_=c;_.parentNode&&_.getAttribute("clip-path")!==s.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var b=0;b<f.length;b++)l=f[b],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(s,p),this.options);p.length===1?f=p[0]:f=new e.Group(p),m=e.util.multiplyTransformMatrices(d,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,_);var g=e.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=c;function c(f,l){this.x=f,this.y=l}c.prototype={type:"point",constructor:c,add:function(f){return new c(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new c(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new c(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new c(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new c(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new c(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(f.x-this.x)*l,this.y+(f.y-this.y)*l)},distanceFrom:function(f){var l=this.x-f.x,u=this.y-f.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new c(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new c(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,l){return this.x=f,this.y=l,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var l=this.x,u=this.y;this.x=f.x,this.y=f.y,f.x=l,f.y=u},clone:function(){return new c(this.x,this.y)}}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function c(f){this.status=f,this.points=[]}s.Intersection=c,s.Intersection.prototype={constructor:c,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,l,u,d){var p,m=(d.x-u.x)*(f.y-u.y)-(d.y-u.y)*(f.x-u.x),g=(l.x-f.x)*(f.y-u.y)-(l.y-f.y)*(f.x-u.x),v=(d.y-u.y)*(l.x-f.x)-(d.x-u.x)*(l.y-f.y);if(v!==0){var _=m/v,b=g/v;0<=_&&_<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new s.Point(f.x+_*(l.x-f.x),f.y+_*(l.y-f.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},s.Intersection.intersectLinePolygon=function(f,l,u){var d=new c,p=u.length,m,g,v,_;for(_=0;_<p;_++)m=u[_],g=u[(_+1)%p],v=c.intersectLineLine(f,l,m,g),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},s.Intersection.intersectPolygonPolygon=function(f,l){var u=new c,d=f.length,p;for(p=0;p<d;p++){var m=f[p],g=f[(p+1)%d],v=c.intersectLinePolygon(m,g,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},s.Intersection.intersectPolygonRectangle=function(f,l,u){var d=l.min(u),p=l.max(u),m=new s.Point(p.x,d.y),g=new s.Point(d.x,p.y),v=c.intersectLinePolygon(d,m,f),_=c.intersectLinePolygon(m,p,f),b=c.intersectLinePolygon(p,g,f),y=c.intersectLinePolygon(g,d,f),C=new c;return C.appendPoints(v.points),C.appendPoints(_.points),C.appendPoints(b.points),C.appendPoints(y.points),C.points.length>0&&(C.status="Intersection"),C}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}s.Color=c,s.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,d){l/=255,u/=255,d/=255;var p,m,g,v=s.util.array.max([l,u,d]),_=s.util.array.min([l,u,d]);if(g=(v+_)/2,v===_)p=m=0;else{var b=v-_;switch(m=g>.5?b/(2-v-_):b/(v+_),v){case l:p=(u-d)/b+(u<d?6:0);break;case u:p=(d-l)/b+2;break;case d:p=(l-u)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,d,p;return u=l[0].toString(16),u=u.length===1?"0"+u:u,d=l[1].toString(16),d=d.length===1?"0"+d:d,p=l[2].toString(16),p=p.length===1?"0"+p:p,u.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),d=l[3];return this.setSource([u,u,u,d]),this},toBlackWhite:function(l){var u=this.getSource(),d=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),p=u[3];return l=l||127,d=Number(d)<Number(l)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(m[v]*(1-p)+g[v]*p));return u[3]=d,this.setSource(u),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(l,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(u-l)*6*d:d<1/2?u:d<2/3?l+(u-l)*(2/3-d)*6:l}s.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},s.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var d=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),p=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),m=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),u[4]?parseFloat(u[4]):1]}},s.Color.fromRgba=c.fromRgb,s.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},s.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(u){var d=(parseFloat(u[1])%360+360)%360/360,p=parseFloat(u[2])/(/%$/.test(u[2])?100:1),m=parseFloat(u[3])/(/%$/.test(u[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var b=m<=.5?m*(p+1):m+p-m*p,y=m*2-b;g=f(y,b,d+1/3),v=f(y,b,d),_=f(y,b,d-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),u[4]?parseFloat(u[4]):1]}},s.Color.fromHsla=c.fromHsl,s.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},s.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),d=u.length===3||u.length===4,p=u.length===8||u.length===4,m=d?u.charAt(0)+u.charAt(0):u.substring(0,2),g=d?u.charAt(1)+u.charAt(1):u.substring(2,4),v=d?u.charAt(2)+u.charAt(2):u.substring(4,6),_=p?d?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(t),function(a){var s=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],l={},u="left",d="top",p="right",m="bottom",g="center",v={top:m,bottom:d,left:p,right:u,center:g},_=s.util.radiansToDegrees,b=Math.sign||function(z){return(z>0)-(z<0)||+z};function y(z,X){var oe=z.angle+_(Math.atan2(X.y,X.x))+360;return Math.round(oe%360/45)}function C(z,X){var oe=X.transform.target,ae=oe.canvas,re=s.util.object.clone(X);re.target=oe,ae&&ae.fire("object:"+z,re),oe.fire(z,X)}function w(z,X){var oe=X.canvas,ae=oe.uniScaleKey,re=z[ae];return oe.uniformScaling&&!re||!oe.uniformScaling&&re}function T(z){return z.originX===g&&z.originY===g}function O(z,X,oe){var ae=z.lockScalingX,re=z.lockScalingY;return!!(ae&&re||!X&&(ae||re)&&oe||ae&&X==="x"||re&&X==="y")}function A(z,X,oe){var ae="not-allowed",re=w(z,oe),ce="";if(X.x!==0&&X.y===0?ce="x":X.x===0&&X.y!==0&&(ce="y"),O(oe,ce,re))return ae;var _e=y(oe,X);return c[_e]+"-resize"}function L(z,X,oe){var ae="not-allowed";if(X.x!==0&&oe.lockSkewingY||X.y!==0&&oe.lockSkewingX)return ae;var re=y(oe,X)%4;return f[re]+"-resize"}function G(z,X,oe){return z[oe.canvas.altActionKey]?l.skewCursorStyleHandler(z,X,oe):l.scaleCursorStyleHandler(z,X,oe)}function Y(z,X,oe){var ae=z[oe.canvas.altActionKey];if(X.x===0)return ae?"skewX":"scaleY";if(X.y===0)return ae?"skewY":"scaleX"}function te(z,X,oe){return oe.lockRotation?"not-allowed":X.cursorStyle}function q(z,X,oe,ae){return{e:z,transform:X,pointer:{x:oe,y:ae}}}function N(z){return function(X,oe,ae,re){var ce=oe.target,_e=ce.getCenterPoint(),Pe=ce.translateToOriginPoint(_e,oe.originX,oe.originY),Se=z(X,oe,ae,re);return ce.setPositionByOrigin(Pe,oe.originX,oe.originY),Se}}function B(z,X){return function(oe,ae,re,ce){var _e=X(oe,ae,re,ce);return _e&&C(z,q(oe,ae,re,ce)),_e}}function Q(z,X,oe,ae,re){var ce=z.target,_e=ce.controls[z.corner],Pe=ce.canvas.getZoom(),Se=ce.padding/Pe,le=ce.toLocalPoint(new s.Point(ae,re),X,oe);return le.x>=Se&&(le.x-=Se),le.x<=-Se&&(le.x+=Se),le.y>=Se&&(le.y-=Se),le.y<=Se&&(le.y+=Se),le.x-=_e.offsetX,le.y-=_e.offsetY,le}function ee(z){return z.flipX!==z.flipY}function x(z,X,oe,ae,re){if(z[X]!==0){var ce=z._getTransformedDimensions()[ae],_e=re/ce*z[oe];z.set(oe,_e)}}function P(z,X,oe,ae){var re=X.target,ce=re._getTransformedDimensions(0,re.skewY),_e=Q(X,X.originX,X.originY,oe,ae),Pe=Math.abs(_e.x*2)-ce.x,Se=re.skewX,le;Pe<2?le=0:(le=_(Math.atan2(Pe/re.scaleX,ce.y/re.scaleY)),X.originX===u&&X.originY===m&&(le=-le),X.originX===p&&X.originY===d&&(le=-le),ee(re)&&(le=-le));var xe=Se!==le;if(xe){var Me=re._getTransformedDimensions().y;re.set("skewX",le),x(re,"skewY","scaleY","y",Me)}return xe}function R(z,X,oe,ae){var re=X.target,ce=re._getTransformedDimensions(re.skewX,0),_e=Q(X,X.originX,X.originY,oe,ae),Pe=Math.abs(_e.y*2)-ce.y,Se=re.skewY,le;Pe<2?le=0:(le=_(Math.atan2(Pe/re.scaleY,ce.x/re.scaleX)),X.originX===u&&X.originY===m&&(le=-le),X.originX===p&&X.originY===d&&(le=-le),ee(re)&&(le=-le));var xe=Se!==le;if(xe){var Me=re._getTransformedDimensions().x;re.set("skewY",le),x(re,"skewX","scaleX","x",Me)}return xe}function F(z,X,oe,ae){var re=X.target,ce=re.skewX,_e,Pe=X.originY;if(re.lockSkewingX)return!1;if(ce===0){var Se=Q(X,g,g,oe,ae);Se.x>0?_e=u:_e=p}else ce>0&&(_e=Pe===d?u:p),ce<0&&(_e=Pe===d?p:u),ee(re)&&(_e=_e===u?p:u);X.originX=_e;var le=B("skewing",N(P));return le(z,X,oe,ae)}function K(z,X,oe,ae){var re=X.target,ce=re.skewY,_e,Pe=X.originX;if(re.lockSkewingY)return!1;if(ce===0){var Se=Q(X,g,g,oe,ae);Se.y>0?_e=d:_e=m}else ce>0&&(_e=Pe===u?d:m),ce<0&&(_e=Pe===u?m:d),ee(re)&&(_e=_e===d?m:d);X.originY=_e;var le=B("skewing",N(R));return le(z,X,oe,ae)}function M(z,X,oe,ae){var re=X,ce=re.target,_e=ce.translateToOriginPoint(ce.getCenterPoint(),re.originX,re.originY);if(ce.lockRotation)return!1;var Pe=Math.atan2(re.ey-_e.y,re.ex-_e.x),Se=Math.atan2(ae-_e.y,oe-_e.x),le=_(Se-Pe+re.theta),xe=!0;if(ce.snapAngle>0){var Me=ce.snapAngle,Ue=ce.snapThreshold||Me,ot=Math.ceil(le/Me)*Me,Qe=Math.floor(le/Me)*Me;Math.abs(le-Qe)<Ue?le=Qe:Math.abs(le-ot)<Ue&&(le=ot)}return le<0&&(le=360+le),le%=360,xe=ce.angle!==le,ce.angle=le,xe}function D(z,X,oe,ae,re){re=re||{};var ce=X.target,_e=ce.lockScalingX,Pe=ce.lockScalingY,Se=re.by,le,xe,Me,Ue,ot=w(z,ce),Qe=O(ce,Se,ot),yt,ht,Pn=X.gestureScale;if(Qe)return!1;if(Pn)xe=X.scaleX*Pn,Me=X.scaleY*Pn;else{if(le=Q(X,X.originX,X.originY,oe,ae),yt=Se!=="y"?b(le.x):1,ht=Se!=="x"?b(le.y):1,X.signX||(X.signX=yt),X.signY||(X.signY=ht),ce.lockScalingFlip&&(X.signX!==yt||X.signY!==ht))return!1;if(Ue=ce._getTransformedDimensions(),ot&&!Se){var de=Math.abs(le.x)+Math.abs(le.y),be=X.original,ze=Math.abs(Ue.x*be.scaleX/ce.scaleX)+Math.abs(Ue.y*be.scaleY/ce.scaleY),dt=de/ze;xe=be.scaleX*dt,Me=be.scaleY*dt}else xe=Math.abs(le.x*ce.scaleX/Ue.x),Me=Math.abs(le.y*ce.scaleY/Ue.y);T(X)&&(xe*=2,Me*=2),X.signX!==yt&&Se!=="y"&&(X.originX=v[X.originX],xe*=-1,X.signX=yt),X.signY!==ht&&Se!=="x"&&(X.originY=v[X.originY],Me*=-1,X.signY=ht)}var At=ce.scaleX,nt=ce.scaleY;return Se?(Se==="x"&&ce.set("scaleX",xe),Se==="y"&&ce.set("scaleY",Me)):(!_e&&ce.set("scaleX",xe),!Pe&&ce.set("scaleY",Me)),At!==ce.scaleX||nt!==ce.scaleY}function H(z,X,oe,ae){return D(z,X,oe,ae)}function J(z,X,oe,ae){return D(z,X,oe,ae,{by:"x"})}function ie(z,X,oe,ae){return D(z,X,oe,ae,{by:"y"})}function Z(z,X,oe,ae){return z[X.target.canvas.altActionKey]?l.skewHandlerX(z,X,oe,ae):l.scalingY(z,X,oe,ae)}function $(z,X,oe,ae){return z[X.target.canvas.altActionKey]?l.skewHandlerY(z,X,oe,ae):l.scalingX(z,X,oe,ae)}function se(z,X,oe,ae){var re=X.target,ce=Q(X,X.originX,X.originY,oe,ae),_e=re.strokeWidth/(re.strokeUniform?re.scaleX:1),Pe=T(X)?2:1,Se=re.width,le=Math.abs(ce.x*Pe/re.scaleX)-_e;return re.set("width",Math.max(le,0)),Se!==le}function pe(z,X,oe,ae){var re=X.target,ce=oe-X.offsetX,_e=ae-X.offsetY,Pe=!re.get("lockMovementX")&&re.left!==ce,Se=!re.get("lockMovementY")&&re.top!==_e;return Pe&&re.set("left",ce),Se&&re.set("top",_e),(Pe||Se)&&C("moving",q(z,X,oe,ae)),Pe||Se}l.scaleCursorStyleHandler=A,l.skewCursorStyleHandler=L,l.scaleSkewCursorStyleHandler=G,l.rotationWithSnapping=B("rotating",N(M)),l.scalingEqually=B("scaling",N(H)),l.scalingX=B("scaling",N(J)),l.scalingY=B("scaling",N(ie)),l.scalingYOrSkewingX=Z,l.scalingXOrSkewingY=$,l.changeWidth=B("resizing",N(se)),l.skewHandlerX=F,l.skewHandlerY=K,l.dragHandler=pe,l.scaleOrSkewActionName=Y,l.rotationStyleHandler=te,l.fireEvent=C,l.wrapWithFixedAnchor=N,l.wrapWithFireEvent=B,l.getLocalPoint=Q,s.controlsUtils=l}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians,f=s.controlsUtils;function l(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=y?"stroke":"fill",w=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=p,O=m,A;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>b?(A=_,d.scale(1,b/_),O=m*_/b):b>_?(A=b,d.scale(_/b,1),T=p*b/_):A=_,d.lineWidth=1,d.beginPath(),d.arc(T,O,A/2,0,2*Math.PI,!1),d[C](),w&&d.stroke(),d.restore()}function u(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=y?"stroke":"fill",w=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=_/2,O=b/2;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(c(v.angle)),d[C+"Rect"](-T,-O,_,b),w&&d.strokeRect(-T,-O,_,b),d.restore()}f.renderCircleControl=l,f.renderSquareControl=u}(t),function(a){var s=a.fabric||(a.fabric={});function c(f){for(var l in f)this[l]=f[l]}s.Control=c,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,l){return l.cursorStyle},getActionName:function(f,l){return l.actionName},getVisibility:function(f,l){var u=f._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,l){var u=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},l);return u},calcCornerCoords:function(f,l,u,d,p){var m,g,v,_,b=p?this.touchSizeX:this.sizeX,y=p?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var C=Math.atan2(y,b),w=Math.sqrt(b*b+y*y)/2,T=C-s.util.degreesToRadians(f),O=Math.PI/2-C-s.util.degreesToRadians(f);m=w*s.util.cos(T),g=w*s.util.sin(T),v=w*s.util.cos(O),_=w*s.util.sin(O)}else{var A=b&&y?b:l;w=A*.7071067812;var T=s.util.degreesToRadians(45-f);m=v=w*s.util.cos(T),g=_=w*s.util.sin(T)}return{tl:{x:u-_,y:d-v},tr:{x:u+m,y:d-g},bl:{x:u-m,y:d+g},br:{x:u+_,y:d+v}}},render:function(f,l,u,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,l,u,d,p);break;default:s.controlsUtils.renderSquareControl.call(this,f,l,u,d,p)}}}}(t),function(){function a(u,d){var p=u.getAttribute("style"),m=u.getAttribute("offset")||0,g,v,_,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var y=p.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var C=y[b].split(/\s*:\s*/),w=C[0].trim(),T=C[1].trim();w==="stop-color"?g=T:w==="stop-opacity"&&(_=T)}}return g||(g=u.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=u.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*d,{offset:m,color:g.toRgb(),opacity:_}}function s(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var d,p=this;Object.keys(u).forEach(function(m){p[m]=u[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,d={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(d.r1=u.coords.r1||0,d.r2=u.coords.r2||0),this.coords=d,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var d in u){var p=new e.Color(u[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(u){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,d,u),d},toSVG:function(u,v){var p=f(this.coords,!0),m,g,v=v||{},_,b,y=f(this.colorStops,!0),C=p.r1>p.r2,w=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,O=-this.offsetY,A=!!v.additionalTransform,L=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(N,B){return N.offset-B.offset}),L==="objectBoundingBox"?(T/=u.width,O/=u.height):(T+=u.width/2,O+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(T-=u.pathOffset.x,O-=u.pathOffset.y),w[4]-=T,w[5]-=O,b='id="SVGID_'+this.id+'" gradientUnits="'+L+'"',b+=' gradientTransform="'+(A?v.additionalTransform+" ":"")+e.util.matrixToSVG(w)+'" ',this.type==="linear"?_=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",b,' cx="',C?p.x1:p.x2,'" cy="',C?p.y1:p.y2,'" r="',C?p.r1:p.r2,'" fx="',C?p.x2:p.x1,'" fy="',C?p.y2:p.y1,`">
`]),this.type==="radial"){if(C)for(y=y.concat(),y.reverse(),m=0,g=y.length;m<g;m++)y[m].offset=1-y[m].offset;var G=Math.min(p.r1,p.r2);if(G>0){var Y=Math.max(p.r1,p.r2),te=G/Y;for(m=0,g=y.length;m<g;m++)y[m].offset+=te*(1-y[m].offset)}}for(m=0,g=y.length;m<g;m++){var q=y[m];_.push("<stop ",'offset="',q.offset*100+"%",'" style="stop-color:',q.color,typeof q.opacity<"u"?";stop-opacity: "+q.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(u){var d,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=u.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=u.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof _<"u"&&(v=new e.Color(v).setAlpha(_).toRgba()),d.addColorStop(b,v)}return d}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=u.getElementsByTagName("stop"),_,b=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=u.getAttribute("gradientTransform")||"",C=[],w,T,O=0,A=0,L;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(_="linear",w=s(u)):(_="radial",w=c(u)),T=v.length;T--;)C.push(a(v[T],g));L=e.parseTransformAttribute(y),l(d,w,m,b),b==="pixels"&&(O=-d.left,A=-d.top);var G=new e.Gradient({id:u.getAttribute("id"),type:_,coords:w,colorStops:C,gradientUnits:b,gradientTransform:L,offsetX:O,offsetY:A});return G}});function l(u,d,p,m){var g,v;Object.keys(d).forEach(function(_){g=d[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(d[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[_]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,c){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){c&&c(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(l,u){f.source=l,c&&c(f,u)},null,this.crossOrigin)}},toObject:function(s){var c=e.Object.NUM_FRACTION_DIGITS,f,l;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),l={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,s),l},toSVG:function(s){var c=typeof this.source=="function"?this.source():this.source,f=c.width/s.width,l=c.height/s.height,u=this.offsetX/s.width,d=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,d&&(l+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,u&&(f+=Math.abs(u))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+d+'" width="'+f+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var c in s)this[c]=s[c]},toLive:function(s){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":s.createPattern(c,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var l in f)this[l]=f[l];this.id=s.Object.__uid++},_parseShadow:function(f){var l=f.trim(),u=s.Shadow.reOffsetsAndBlur.exec(l)||[],d=l.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var l=40,u=40,d=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),m=20,g=new s.Color(this.color);return f.width&&f.height&&(l=c((Math.abs(p.x)+this.blur)/f.width,d)*100+m,u=c((Math.abs(p.y)+this.blur)/f.height,d)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,d)+'" dy="'+c(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},l=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(f[u]=this[u])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,s=e.util.getElementOffset,c=e.util.removeFromArray,f=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,d=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,b){return typeof v=="string"?e.util.loadImage(v,function(y,C){if(y){var w=new e.Image(y,b);this[g]=w,w.canvas=this}_&&_(y,C)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var b in g)_=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,b=this.overlayImage,y,C,w;for(this.viewportTransform=g,C=0,w=this._objects.length;C<w;C++)y=this._objects[C],y.group||y.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,b=this.viewportTransform.slice(0);g=l(g,u(this.viewportTransform)),b[0]=v,b[3]=v;var y=l(g,b);return b[4]+=_.x-y.x,b[5]+=_.y-y.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,b=u(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y:_},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,b;for(_=0,b=v.length;_<b;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],b=this[v+"Image"],y=this.viewportTransform,C=this[v+"Vpt"];if(!(!_&&!b)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,C&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var w=_.gradientTransform||_.patternTransform;w&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.fill(),g.restore()}b&&(g.save(),C&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=u(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var y=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=b),y},__serializeBgOverlay:function(g,v){var _={},b=this.backgroundImage,y=this.overlayImage,C=this.backgroundColor,w=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(_.background=C.toObject(v)):C&&(_.background=C),w&&w.toObject?w.excludeFromExport||(_.overlay=w.toObject(v)):w&&(_.overlay=w),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,g,v)),y&&!y.excludeFromExport&&(_.overlayImage=this._toObject(y,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,b=v.height||this.height,y,C='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;v.viewBox?C='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,C='viewBox="'+f(-y[4]/y[0],w)+" "+f(-y[5]/y[3],w)+" "+f(this.width/y[0],w)+" "+f(this.height/y[3],w)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var b=g[_+"Color"];if(b&&b.toLive){var y=g[_+"Vpt"],C=g.viewportTransform,w={width:g.width/(y?C[0]:1),height:g.height/(y?C[3]:1)};return b.toSVG(w,{additionalTransform:y?e.util.matrixToSVG(C):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,b,y,C,w,T,O,A,L,G=e.fontPaths,Y=[];for(this._objects.forEach(function q(N){Y.push(N),N._objects&&N._objects.forEach(q)}),A=0,L=Y.length;A<L;A++)if(_=Y[A],b=_.fontFamily,!(_.type.indexOf("text")===-1||v[b]||!G[b])&&(v[b]=!0,!!_.styles)){y=_.styles;for(w in y){C=y[w];for(O in C)T=C[O],b=T.fontFamily,!v[b]&&G[b]&&(v[b]=!0)}}for(var te in v)g+=[`		@font-face {
`,"			font-family: '",te,`';
`,"			src: url('",G[te],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,b,y,C=this._objects;for(b=0,y=C.length;b<y;b++)_=C[b],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],b=this.viewportTransform,y=this.width,C=this.height;if(_)if(_.toLive){var w=_.repeat,T=e.util.invertTransform(b),O=this[v+"Vpt"],A=O?e.util.matrixToSVG(T):"";g.push('<rect transform="'+A+" translate(",y/2,",",C/2,')"',' x="',_.offsetX-y/2,'" y="',_.offsetY-C/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?_.source.width:y,'" height="',w==="repeat-x"||w==="no-repeat"?_.source.height:C,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=y.length;_--;)b=y[_],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=0;_<y.length;_++)b=y[_],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,b,y,C,w,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=0;b<T.length;b++)y=T[b],C=this._objects.indexOf(y),C>0+O&&(w=C-1,c(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(g),C!==0&&(w=this._findNewLowerIndex(g,C,v),c(this._objects,g),this._objects.splice(w,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var b,y;if(_)for(b=v,y=v-1;y>=0;--y){var C=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(C){b=y;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,b,y,C,w,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=T.length;b--;)y=T[b],C=this._objects.indexOf(y),C<this._objects.length-1-O&&(w=C+1,c(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(g),C!==this._objects.length-1&&(w=this._findNewUpperIndex(g,C,v),c(this._objects,g),this._objects.splice(w,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var b,y,C;if(_)for(b=v,y=v+1,C=this._objects.length;y<C;++y){var w=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(w){b=y;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,c=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=e.devicePixelRatio),c.shadowColor=s.color,c.shadowBlur=s.blur*f,c.shadowOffsetX=s.offsetX*f,c.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,c){var f=s.midPointFrom(c);return a.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,f=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[f-2],c[f-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new e.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new e.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,c,f=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===l.x&&f.y===l.y){var u=this.width/1e3;f=new e.Point(f.x,f.y),l=new e.Point(l.x,l.y),f.x-=u,l.x+=u}for(a.moveTo(f.x,f.y),s=1,c=this._points.length;s<c;s++)this._drawSegment(a,f,l),f=this._points[s],l=this._points[s+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=e.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var c=this.canvas.getZoom(),f=Math.pow(s/c,2),l,u=a.length-1,d=a[0],p=[d],m;for(l=1;l<u-1;l++)m=Math.pow(d.x-a[l].x,2)+Math.pow(d.y-a[l].y,2),m>=f&&(d=a[l],p.push(d));return p.push(a[u]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var c=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,s),c.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,c,f=this.points;for(this._saveAndTransform(a),s=0,c=f.length;s<c;s++)this.dot(a,f[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,c;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,c=this.points.length;s<c;s++){var l=this.points[s],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),f.push(u)}var d=new e.Group(f);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new e.Point(a.x,a.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=c,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],c=0,f=this.sprayChunks.length;c<f;c++)for(var l=this.sprayChunks[c],u=0,d=l.length;u<d;u++){var p=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new e.Group(s);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},c,f,l;for(f=0,l=a.length;f<l;f++)c=a[f].left+""+a[f].top,s[c]||(s[c]=a[f]);var u=[];for(c in s)u.push(s[c]);return u},render:function(a){var s=this.canvas.contextTop,c,f;for(s.fillStyle=this.color,this._saveAndTransform(s),c=0,f=a.length;c<f;c++){var l=a[c];typeof l.opacity<"u"&&(s.globalAlpha=l.opacity),s.fillRect(l.x,l.y,l.width,l.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,c;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,c=this.sprayChunks.length;s<c;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,c,f,l=this.width/2,u;for(u=0;u<this.density;u++){s=e.util.getRandomInt(a.x-l,a.x+l),c=e.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var d=new e.Point(s,c);d.width=f,this.randomOpacity&&(d.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,s=5,c=e.util.createCanvasElement(),f=c.getContext("2d");return c.width=c.height=a+s,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),c=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),s}}),function(){var a=e.util.getPointer,s=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,d,p;if(l.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)u=this._objects[m],l.indexOf(u)===-1?d.push(u):p.push(u);l.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var d=l.calcTransformMatrix(),p=e.util.invertTransform(d),m=this.restorePointerVpt(u);return e.util.transformPoint(m,p)},isTargetTransparent:function(l,u,d){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:u,y:d}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),y=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return y}var v=this.contextCache,_=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=_;var y=e.util.isTransparent(v,u,d,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(d){return l[d]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var d=this.getActiveObjects(),p=this._activeObject;return!u||u&&p&&d.length>1&&d.indexOf(u)===-1&&p!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&p&&p!==u},_shouldCenterTransform:function(l,u,d){if(l){var p;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?p=this.centeredScaling||l.centeredScaling:u==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!d:d}},_getOriginFromCorner:function(l,u){var d={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?d.x="right":(u==="mr"||u==="tr"||u==="br")&&(d.x="left"),u==="tl"||u==="mt"||u==="tr"?d.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(d.y="top"),d},_getActionFromCorner:function(l,u,d,p){if(!u||!l)return"drag";var m=p.controls[u];return m.getActionName(d,m,p)},_setupCurrentTransform:function(l,u,d){if(u){var p=this.getPointer(l),m=u.__corner,g=u.controls[m],v=d&&m?g.getActionHandler(l,u,g):e.controlsUtils.dragHandler,_=this._getActionFromCorner(d,m,l,u),b=this._getOriginFromCorner(u,m),y=l[this.centeredKey],C={target:u,action:_,actionHandler:v,corner:m,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:p.x-u.left,offsetY:p.y-u.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:y,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,_,y)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,d=new e.Point(u.ex,u.ey),p=e.util.transformPoint(d,this.viewportTransform),m=new e.Point(u.ex+u.left,u.ey+u.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),b=Math.max(p.x,g.x),y=Math.max(p.y,g.y),C=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,_,b-v,y-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=C,_+=C,b-=C,y-=C,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,_,b-v,y-_))},findTarget:function(l,u){if(!this.skipTargetFind){var d=!0,p=this.getPointer(l,d),m=this._activeObject,g=this.getActiveObjects(),v,_,b=c(l),y=g.length>1&&!u||g.length===1;if(this.targets=[],y&&m._findTargetCorner(p,b)||g.length>1&&!u&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&C&&v&&C!==v&&(C=v,this.targets=_),C}},_checkTarget:function(l,u,d){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var p=this.isTargetTransparent(u,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var d,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,u):u;if(this._checkTarget(v,g,u)){d=l[p],d.subTargetCheck&&d instanceof e.Group&&(m=this._searchPossibleTargets(d._objects,u),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var d=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,u||(d=this.restorePointerVpt(d));var b=this.getRetinaScaling();return b!==1&&(d.x/=b,d.y/=b),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:d.x*_.width,y:d.y*_.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),e.util.addClass(d,"upper-canvas "+l),this.wrapperEl.appendChild(d),this._copyCanvasStyle(u,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,d=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=d,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var d=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:u,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:u,target:v}),m.push(v))}),l.length>0&&p.length>0?d&&this.fire("selection:updated",{e:u,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:u,selected:m}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:g})},setActiveObject:function(l,u){var d=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(d,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var d=this._activeObject;if(d){if(d.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),d=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:d,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,u,d);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return u.forEach(function(p){d[p]=l[p]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,d),this._unwindGroupTransformOnObject(u,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var a=e.util.addListener,s=e.util.removeListener,c=3,f=2,l=1,u={passive:!1};function d(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,u),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(e.document,p+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,u),s(e.document,p+"move",this._onMouseMove,u),s(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,u),a(e.document,"touchmove",this._onMouseMove,u),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,u),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,u)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,u),s(e.document,"touchmove",this._onMouseMove,u);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,u),a(m,g+"move",this._onMouseMove,u))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!y&&m===this._activeObject)}var C,w;if(m){if(C=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var T=m.controls[C],O=T&&T.getMouseUpHandler(p,m,T);O&&(w=this.getPointer(p),O(p,g,w.x,w.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==C)){var A=g.target&&g.target.controls[g.corner],L=A&&A.getMouseUpHandler(p,m,T);w=w||this.getPointer(p),L&&L(p,g,w.x,w.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,b=this.targets||[],y={e:p,target:_,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(p),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),_&&_.fire("mouse"+m,y);for(var C=0;C<b.length;C++)b[C].fire("mouse"+m,y)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var y=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=y,m===this._activeObject&&(y||!_)){this._setupCurrentTransform(p,m,b);var C=m.controls[y],g=this.getPointer(p),w=C&&C.getMouseDownHandler(p,m,C);w&&w(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,b=g.oldTarget,y,C,w=b!==p,T=g.canvasEvtIn,O=g.canvasEvtOut;w&&(v={e:m,target:p,previousTarget:b},_={e:m,target:b,nextTarget:p}),C=p&&w,y=b&&w,y&&(O&&this.fire(O,_),b.fire(g.evtOut,_)),C&&(T&&this.fire(T,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,b=m.action,y=!1,C=m.actionHandler;C&&(y=C(p,m,v,_)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,f){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&f&&f.selectable&&this.selection&&(l!==f||l.type==="activeSelection")&&!f.onSelect({e:c})},_handleGrouping:function(c,f){var l=this._activeObject;l.__corner||f===l&&(f=this.findTarget(c,!0),!f||!f.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(f,c):this._createActiveSelection(f,c))},_updateActiveSelection:function(c,f){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),f)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,f)},_createActiveSelection:function(c,f){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,f),this._fireSelectionEvents(l,f)},_createGroup:function(c){var f=this._objects,l=f.indexOf(this._activeObject)<f.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var f=this._collectObjects(c),l;f.length===1?this.setActiveObject(f[0],c):f.length>1&&(l=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var f=[],l,u=this._groupSelector.ex,d=this._groupSelector.ey,p=u+this._groupSelector.left,m=d+this._groupSelector.top,g=new e.Point(a(u,p),a(d,m)),v=new e.Point(s(u,p),s(d,m)),_=!this.selectionFullyContained,b=u===p&&d===m,y=this._objects.length;y--&&(l=this._objects[y],!(!(!l||!l.selectable||!l.visible)&&(_&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||_&&l.containsPoint(g,null,!0)||_&&l.containsPoint(v,null,!0))&&(f.push(l),b))););return f.length>1&&(f=f.filter(function(C){return!C.onSelect({e:c})})),f},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",c=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(f,a);return e.util.toDataURL(l,s,c)},toCanvasElement:function(a,s){a=a||1,s=s||{};var c=(s.width||this.width)*a,f=(s.height||this.height)*a,l=this.getZoom(),u=this.width,d=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,_=this.interactive,b=[p,0,0,p,g,v],y=this.enableRetinaScaling,C=e.util.createCanvasElement(),w=this.contextTop;return C.width=c,C.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=m,this.width=u,this.height=d,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=y,this.contextTop=w,C}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,s,c){if(a){var f=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),l=this,u=f.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){l.clear(),l._setBgOverlay(f,function(){u?l._enlivenObjects([u],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,f,p,d,s)}):l.__setupCanvas.call(l,f,p,d,s)})},c),this}},__setupCanvas:function(a,s,c,f){var l=this;s.forEach(function(u,d){l.insertAt(u,d)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,s){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var f=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,f),this.__setBgOverlay("overlayImage",a.overlayImage,c,f),this.__setBgOverlay("backgroundColor",a.background,c,f),this.__setBgOverlay("overlayColor",a.overlay,c,f)},__setBgOverlay:function(a,s,c,f){var l=this;if(!s){c[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([s],function(u){l[a]=u[0],c[a]=!0,f&&f()}):this["set"+e.util.string.capitalize(a,!0)](s,function(){c[a]=!0,f&&f()})},_enlivenObjects:function(a,s,c){if(!a||a.length===0){s&&s([]);return}e.util.enlivenObjects(a,function(f){s&&s(f)},null,c)},_toDataURL:function(a,s){this.clone(function(c){s(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,c){this.clone(function(f){c(f.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var c=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(c,function(){a&&a(f)})})},cloneWithoutData:function(a){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var c=new e.Canvas(s);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.string.capitalize,d=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,_=g.width,b=g.height,y=s.maxCacheSideLimit,C=s.minCacheSideLimit;if(_<=y&&b<=y&&_*b<=v)return _<C&&(g.width=C),b<C&&(g.height=C),g;var w=_/b,T=s.util.limitDimsByArea(w,v),O=s.util.capValue,A=O(C,T.x,y),L=O(C,T.y,y);return _>A&&(g.zoomX/=_/A,g.width=A,g.capped=!0),b>L&&(g.zoomY/=b/L,g.height=L,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:_+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),C=s.minCacheSideLimit,w=y.width,T=y.height,O,A,L=y.zoomX,G=y.zoomY,Y=w!==this.cacheWidth||T!==this.cacheHeight,te=this.zoomX!==L||this.zoomY!==G,q=Y||te,N=0,B=0,Q=!1;if(Y){var ee=this._cacheCanvas.width,x=this._cacheCanvas.height,P=w>ee||T>x,R=(w<ee*.9||T<x*.9)&&ee>C&&x>C;Q=P||R,P&&!y.capped&&(w>C||T>C)&&(N=w*.1,B=T*.1)}return this instanceof s.Text&&this.path&&(q=!0,Q=!0,N+=this.getHeightOfLine(0)*this.zoomX,B+=this.getHeightOfLine(0)*this.zoomY),q?(Q?(b.width=Math.ceil(w+N),b.height=Math.ceil(T+B)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),O=y.x/2,A=y.y/2,this.cacheTranslationX=Math.round(b.width/2-O)+O,this.cacheTranslationY=Math.round(b.height/2-A)+A,this.cacheWidth=w,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(L,G),this.zoomX=L,this.zoomY=G,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();v*=b*y,_*=b*y}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",b=this[g]!==v,y=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=s.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),b=this.calcTransformMatrix(),y,C,w;v=v||{},C=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,w=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(_,b),y=s.util.qrDecompose(b),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(d(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?C&&this.drawBordersInGroup(g,y,v):C&&this.drawBorders(g,v),w&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,b,y=_&&_.viewportTransform[0]||1,C=_&&_.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),_&&_._isRetinaScaling()&&(y*=s.devicePixelRatio,C*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(y+C)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*y*b.scaleX,g.shadowOffsetY=v.offsetY*C*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,y=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,y):g.transform(1,0,0,1,b,y),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),y,C=this.canvas.getRetinaScaling(),w=_.x/this.scaleX/C,T=_.y/this.scaleY/C;b.width=w,b.height=T,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(w,0),y.lineTo(w,T),y.lineTo(0,T),y.closePath(),y.translate(w/2,T/2),y.scale(_.zoomX/this.scaleX/C,_.zoomY/this.scaleY/C),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(C*this.scaleX/_.zoomX,C*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):s.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new s.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=s.util,_=v.saveObjectTransform(this),b=this.group,y=this.shadow,C=Math.abs,w=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var T=s.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),A=this.shadow,L,G={x:0,y:0},Y,te,q;A&&(Y=A.blur,A.nonScaling?L={scaleX:1,scaleY:1}:L=this.getObjectScaling(),G.x=2*Math.round(C(A.offsetX)+Y)*C(L.scaleX),G.y=2*Math.round(C(A.offsetY)+Y)*C(L.scaleY)),te=O.width+G.x,q=O.height+G.y,T.width=Math.ceil(te),T.height=Math.ceil(q);var N=new s.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(N.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(N.width/2,N.height/2),"center","center");var B=this.canvas;N.add(this);var Q=N.toCanvasElement(w||1,g);return this.shadow=y,this.set("canvas",B),b&&(this.group=b),this.set(_).setCoords(),N._objects=[],N.dispose(),N=null,Q},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(_=s.util.rotatePoint(_,b,d(-this.angle))),{x:_.x-b.x,y:_.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),c(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,_,b){var y=s[g];v=f(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(C){typeof C[0]<"u"&&(v.fill=C[0]),typeof C[1]<"u"&&(v.stroke=C[1]),s.util.enlivenObjectEnlivables(v,v,function(){var w=b?new y(v[b],v):new y(v);_&&_(w)})})},s.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,l,u,d,p){var m=f.x,g=f.y,v,_,b;return typeof l=="string"?l=s[l]:l-=.5,typeof d=="string"?d=s[d]:d-=.5,v=d-l,typeof u=="string"?u=c[u]:u-=.5,typeof p=="string"?p=c[p]:p-=.5,_=p-u,(v||_)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+_*b.y),new e.Point(m,g)},translateToCenterPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,l,u,"center","center");return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},translateToOriginPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,"center","center",l,u);return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,f,l)},toLocalPoint:function(f,l,u){var d=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof u<"u"?p=this.translateToGivenOrigin(d,"center","center",l,u):p=new e.Point(this.left,this.top),m=new e.Point(f.x,f.y),this.angle&&(m=e.util.rotatePoint(m,d,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,l,u){var d=this.translateToCenterPoint(f,l,u),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var l=a(this.angle),u=this.getScaledWidth(),d=e.util.cos(l)*u,p=e.util.sin(l)*u,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof f=="string"?g=s[f]:g=f-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var s=e.util,c=s.degreesToRadians,f=s.multiplyTransformMatrices,l=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,d){return d?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,d){return a(this._getCoords(u,d))},intersectsWithRect:function(u,d,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,u,d);return v.status==="Intersection"},intersectsWithObject:function(u,d,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(d,p),u.getCoords(d,p));return m.status==="Intersection"||u.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(u,d,p)},isContainedWithinObject:function(u,d,p){for(var m=this.getCoords(d,p),g=d?u.aCoords:u.lineCoords,v=0,_=u._getImageLines(g);v<4;v++)if(!u.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(u,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=u.x&&g.left+g.width<=d.x&&g.top>=u.y&&g.top+g.height<=d.y},containsPoint:function(u,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(u,v);return _!==0&&_%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,u);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,u)?!0:this._containsCenterOfCanvas(d,p,u)},_containsCenterOfCanvas:function(u,d,p){var m={x:(u.x+d.x)/2,y:(u.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,u))return!0;var m=this.getCoords(!0,u).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,u)},_getImageLines:function(u){var d={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return d},_findCrossPoints:function(u,d){var p,m,g,v,_,b=0,y;for(var C in d)if(y=d[C],!(y.o.y<u.y&&y.d.y<u.y)&&!(y.o.y>=u.y&&y.d.y>=u.y)&&(y.o.x===y.d.x&&y.o.x>=u.x?_=y.o.x:(p=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),g=u.y-p*u.x,v=y.o.y-m*y.o.x,_=-(g-v)/(p-m)),_>=u.x&&(b+=1),b===2))break;return b},getBoundingRect:function(u,d){var p=this.getCoords(u,d);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(u/this.width/p)},scaleToHeight:function(u,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(u/this.height/p)},calcLineCoords:function(){var u=this.getViewportTransform(),d=this.padding,p=c(this.angle),m=s.cos(p),g=s.sin(p),v=m*d,_=g*d,b=v+_,y=v-_,C=this.calcACoords(),w={tl:l(C.tl,u),tr:l(C.tr,u),bl:l(C.bl,u),br:l(C.br,u)};return d&&(w.tl.x-=y,w.tl.y-=b,w.tr.x+=b,w.tr.y-=y,w.bl.x-=b,w.bl.y+=y,w.br.x+=y,w.br.y+=b),w},calcOCoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,d),g=f(m,u),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(b,y,C){_[y]=b.positionHandler(v,g,C)}),_},calcACoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=f(d,u),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var d="_",p="";return!u&&this.group&&(p=this.group.transformMatrixKey(u)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var d=this.calcOwnMatrix();if(u||!this.group)return d;var p=this.transformMatrixKey(u),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=f(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===u)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=u,d.value=s.composeMatrix(m),d.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,d=this.width+u,p=this.height+u;return{x:d,y:p}},_getTransformedDimensions:function(u,d){typeof u>"u"&&(u=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,v=u===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:d});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(u,d){return this.strokeUniform?{x:u+this.strokeWidth,y:d+this.strokeWidth}:{x:u,y:d}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),d=this._getTransformedDimensions(),p=l(d,u,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,f){if(f){if(f.toLive)return c+": url(#SVGID_"+f.id+"); ";var l=new e.Color(f),u=c+": "+l.toRgb()+"; ",d=l.getAlpha();return d!==1&&(u+=c+"-opacity: "+d.toString()+"; "),u}else return c+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var f=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),y=a("fill",this.fill),C=a("stroke",this.stroke);return[C,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",y,"fill-rule: ",f,"; ","opacity: ",v,";",b,_].join("")},getSvgSpanStyles:function(c,f){var l="; ",d=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",d=d,p=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",g=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?a("fill",c.fill):"",_=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[_,u,d,p,m,g,b,v,y,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(f){return c[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,f){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(f||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,f){f=f||{};var l=f.reviver,u=f.additionalTransform||"",d=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=d,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,f){f=f||{};var l=f.noStyle,u=f.reviver,d=l?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,b=this.fill,y=this.shadow,C,w=[],T,O=c.indexOf("COMMON_PARTS"),A=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(u)+`</clipPath>
`),v&&w.push("<g ",p,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),C=[d,g,l?"":this.addPaintOrder()," ",A?'transform="'+A+'" ':""].join(""),c[O]=C,b&&b.toLive&&w.push(b.toSVG(this)),_&&_.toLive&&w.push(_.toSVG(this)),y&&w.push(y.toSVG(this)),m&&w.push(T),w.push(c.join("")),w.push(`</g>
`),v&&w.push(`</g>
`),u?u(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,s="stateProperties";function c(l,u,d){var p={},m=!0;d.forEach(function(g){p[g]=l[g]}),a(l[u],p,m)}function f(l,u,d){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!f(l[p],u[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!u||typeof u!="object"||!d&&g.length!==Object.keys(u).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||s;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!f(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||s,d="_"+u;return this[d]?(c(this,d,this[u]),l&&l.stateProperties&&c(this,d,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||s;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,l=s.y,u,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),u=this._findCrossPoints({x:f,y:l},d),u!==0&&u%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var c in this.controls)s(this.controls[c],c,this)},_setCornerCoords:function(){var s=this.oCoords;for(var c in s){var f=this.controls[c];s[c].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[c].x,s[c].y,!1),s[c].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[c].x,s[c].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var c=this.getCenterPoint(),f=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return s.translate(c.x,c.y),s.scale(1/l[0],1/l[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,c){c=c||{};var f=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=f.x+l,d=f.y+l,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(s,c.borderDashArray||this.borderDashArray),s.strokeRect(-u/2,-d/2,u,d),p&&(s.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,s.moveTo(g.x*u,g.y*d),s.lineTo(g.x*u+g.offsetX,g.y*d+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,c,f){f=f||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=l.x+u*(d?this.canvas.getZoom():c.scaleX)+p,g=l.y+u*(d?this.canvas.getZoom():c.scaleY)+p;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,c){c=c||{},s.save();var f=this.canvas.getRetinaScaling(),l,u;return s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){u=m.oCoords[p],d.getVisibility(m,p)&&(l&&(u=e.util.transformPoint(u,l)),d.render(s,u.x,u.y,c,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=c,this},setControlsVisibility:function(s){s||(s={});for(var c in s)this.setControlVisible(c,s[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){a.set("left",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){a.set("top",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){a.set("opacity",d),u.requestRenderAll(),l()},onComplete:function(){u.remove(a),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,c,f=[];for(s in arguments[0])a.push(s);for(var l=0,u=a.length;l<u;l++)s=a[l],c=l!==u-1,f.push(this._animate(s,arguments[0][s],arguments[1],c));return f}else return this._animate.apply(this,arguments)},_animate:function(a,s,c,f){var l=this,u;s=s.toString(),c?c=e.util.object.clone(c):c={},~a.indexOf(".")&&(u=a.split("."));var d=l.colorProperties.indexOf(a)>-1||u&&l.colorProperties.indexOf(u[1])>-1,p=u?this.get(u[0])[u[1]]:this.get(a);"from"in c||(c.from=p),d||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:c.from,endValue:s,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,_){return c.abort.call(l,g,v,_)},onChange:function(g,v,_){u?l[u[0]][u[1]]=g:l.set(a,g),!f&&c.onChange&&c.onChange(g,v,_)},onComplete:function(g,v,_){f||(l.setCoords(),c.onComplete&&c.onComplete(g,v,_))}};return d?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof l[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return c(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,v=d*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(d,p,m){m=m||{};var g=s.parseAttributes(d,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,c(g,m)))},s.Line.fromObject=function(d,p){function m(v){delete v.points,p&&p(v)}var g=f(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],s.Object._fromObject("Line",g,m,"points")};function u(d,p){var m=d.origin,g=d.axis1,v=d.axis2,_=d.dimension,b=p.nearest,y=p.center,C=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case y:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case C:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,_=s.util.cos(m)*v,b=s.util.sin(m)*v,y=s.util.cos(g)*v,C=s.util.sin(g)*v,w=p>180?"1":"0";l=['<path d="M '+_+" "+b," A "+v+" "+v," 0 ",+w+" 1"," "+y+" "+C,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(l,u){var d=s.parseAttributes(l,s.Circle.ATTRIBUTE_NAMES);if(!f(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,u(new s.Circle(d))};function f(l){return"radius"in l&&l.radius>=0}s.Circle.fromObject=function(l,u){s.Object._fromObject("Circle",l,u)}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(c){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,l),c.lineTo(0,-l),c.lineTo(f,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,f=this.height/2,l=[-c+" "+f,"0 "+-f,c+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),s.Triangle.fromObject=function(c,f){return s.Object._fromObject("Triangle",c,f)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,l){switch(this.callSuper("_set",f,l),f){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,c,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,l){var u=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new s.Ellipse(u))},s.Ellipse.fromObject=function(f,l){s.Object._fromObject("Ellipse",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||u!==0,_=1-.5522847498;f.beginPath(),f.moveTo(m+l,g),f.lineTo(m+d-l,g),v&&f.bezierCurveTo(m+d-_*l,g,m+d,g+_*u,m+d,g+u),f.lineTo(m+d,g+p-u),v&&f.bezierCurveTo(m+d,g+p-_*u,m+d-_*l,g+p,m+d-l,g+p),f.lineTo(m+l,g+p),v&&f.bezierCurveTo(m+_*l,g+p,m,g+p-_*u,m,g+p-u),f.lineTo(m,g+u),v&&f.bezierCurveTo(m,g+_*u,m+_*l,g,m+l,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,l,u){if(!f)return l(null);u=u||{};var d=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new s.Rect(c(u?s.util.object.clone(u):{},d));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},s.Rect.fromObject=function(f,l){return s.Object._fromObject("Rect",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.array.min,l=s.util.array.max,u=s.util.toFixed,d=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=l(p,"x")||0,_=l(p,"y")||0,b=v-m,y=_-g;return{left:m,top:g,width:b,height:y}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)p.push(u(this.points[_].x-m,v),",",u(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](_,c(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,l){s.Object._fromObject("Polygon",f,l,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max,l=s.util.object.extend,u=s.util.object.clone,d=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=u(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,b=0,y=0,C=0,w=-this.pathOffset.x,T=-this.pathOffset.y;p.beginPath();for(var O=0,A=this.path.length;O<A;++O)switch(m=this.path[O],m[0]){case"L":_=m[1],b=m[2],p.lineTo(_+w,b+T);break;case"M":_=m[1],b=m[2],g=_,v=b,p.moveTo(_+w,b+T);break;case"C":_=m[5],b=m[6],y=m[3],C=m[4],p.bezierCurveTo(m[1]+w,m[2]+T,y+w,C+T,_+w,b+T);break;case"Q":p.quadraticCurveTo(m[1]+w,m[2]+T,m[3]+w,m[4]+T),_=m[3],b=m[4],y=m[1],C=m[2];break;case"z":case"Z":_=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,b=0,y=0,C,w=0,T=this.path.length;w<T;++w){switch(g=this.path[w],g[0]){case"L":b=g[1],y=g[2],C=[];break;case"M":b=g[1],y=g[2],v=b,_=y,C=[];break;case"C":C=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],y=g[6];break;case"Q":C=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],y=g[4];break;case"z":case"Z":b=v,y=_;break}C.forEach(function(q){p.push(q.x),m.push(q.y)}),p.push(b),m.push(y)}var O=c(p)||0,A=c(m)||0,L=f(p)||0,G=f(m)||0,Y=L-O,te=G-A;return{left:O,top:A,width:Y,height:te}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){_.clipPath=b[0],m&&m(_)}):m&&m(_)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,l(v,g)))}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,d){u=u||{},this._objects=[],d&&this.callSuper("initialize",u),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],u)},_updateObjectCoords:function(l,u){var d=l.left,p=l.top,m=!0;l.set({left:d-u.x,top:p-u.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),l&&(u&&s.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(l,u);if(l==="canvas")for(;d--;)this._objects[d]._set(l,u);s.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=u;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,l);return p.objects=d,p},toDatalessObject:function(l){var u,d=this.sourcePath;if(d)u=d;else{var p=this.includeDefaultValues;u=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(l);return g.includeDefaultValues=v,_})}var m=s.Object.prototype.toDatalessObject.call(this,l);return m.objects=u,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=s.Object.prototype.shouldCache.call(this);if(l){for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,d=this._objects.length;u<d;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){s.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new s.ActiveSelection([]);return p.set(d),p.type="activeSelection",u.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,u.add(m)}),p.canvas=u,p._objects=l,u._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],d=[],p,m,g,v=["tr","br","bl","tl"],_=0,b=this._objects.length,y,C=v.length;_<b;++_){for(p=this._objects[_],g=p.calcACoords(),y=0;y<C;y++)m=v[y],u.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(u,d,l)},_getBounds:function(l,u,d){var p=new s.Point(c(l),c(u)),m=new s.Point(f(l),f(u)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,b=m.y-p.y||0;this.width=_,this.height=b,d||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)u.push("		",this._objects[d].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],d=0,p=this._objects.length;d<p;d++)u.push("	",this._objects[d].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),s.Group.fromObject=function(l,u){var d=l.objects,p=s.util.object.clone(l,!0);if(delete p.objects,typeof d=="string"){s.loadSVGFromURL(d,function(m){var g=s.util.groupSVGElements(m,l,d),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(_){g.clipPath=_[0],u&&u(g)}):u&&u(g)});return}s.util.enlivenObjects(d,function(m){s.util.enlivenObjectEnlivables(l,p,function(){u&&u(new s.Group(m,p,!0))})})})}(t),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(c,f){f=f||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),l=new s.Group([]);if(delete f.type,l.set(f),c.forEach(function(d){d.canvas.remove(d),d.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,f,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,f),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,d=this._objects.length;u<d;u++)this._objects[u]._renderControls(c,l);c.restore()}}),s.ActiveSelection.fromObject=function(c,f){s.util.enlivenObjects(c.objects,function(l){delete c.objects,f&&f(new s.ActiveSelection(l,c,!0))})})}(t),function(a){var s=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(c,f)},getElement:function(){return this._element||{}},setElement:function(c,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,-l),c.lineTo(f,-l),c.lineTo(f,l),c.lineTo(-f,l),c.lineTo(-f,-l),c.closePath()}},toObject:function(c){var f=[];this.filters.forEach(function(u){u&&f.push(u.toObject())});var l=s(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],f=[],l,u=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,l=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?c=c.concat(l,f):c=c.concat(f,l),c},getSrc:function(c){var f=c?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(c,f,l){return e.util.loadImage(c,function(u,d){this.setElement(u,l),this._setWidthHeight(),f&&f(this,d)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,f=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,d=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>f&&d>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=d;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=d,e.filterBackend.applyFilters([c],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,l=f.naturalWidth||f.width,u=f.naturalHeight||f.height;if(this._element===this._originalElement){var d=e.util.createCanvasElement();d.width=l,d.height=u,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var f=this._element;if(f){var l=this._filterScalingX,u=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),b=f.naturalWidth||f.width,y=f.naturalHeight||f.height,C=v*l,w=_*u,T=m(d*l,b-C),O=m(p*u,y-w),A=-d/2,L=-p/2,G=m(d,b/l-v),Y=m(p,y/u-_);f&&c.drawImage(f,C,w,T,O,A,L,G,Y)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,f){this.setElement(e.util.getById(c),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,f){c&&c.length?e.util.enlivenObjects(c,function(l){f&&f(l)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(c){c||(c={});var f=this.getElement();this.width=c.width||f.naturalWidth||f.width||0,this.height=c.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,l=this._element.height,u=1,d=1,p=0,m=0,g=0,v=0,_,b=this.width,y=this.height,C={width:b,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=d=e.util.findScaleToFit(this._element,C),_=(b-f*u)/2,c.alignX==="Min"&&(p=-_),c.alignX==="Max"&&(p=_),_=(y-l*d)/2,c.alignY==="Min"&&(m=-_),c.alignY==="Max"&&(m=_)),c.meetOrSlice==="slice"&&(u=d=e.util.findScaleToCover(this._element,C),_=f-b/u,c.alignX==="Mid"&&(g=_/2),c.alignX==="Max"&&(g=_),_=l-y/d,c.alignY==="Mid"&&(v=_/2),c.alignY==="Max"&&(v=_),f=b/u,l=y/d)):(u=b/f,d=y/l),{width:f,height:l,scaleX:u,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,f){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,d){if(d){f&&f(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var g=new e.Image(u,l);f(g,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,f,l){e.util.loadImage(c,function(u,d){f&&f(new e.Image(u,l),d)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,f,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],f,s(l?e.util.object.clone(l):{},u))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},c=a.onComplete||s,f=a.onChange||s,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),f()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,f){var l="precision "+f+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),l=f.getContext("webgl")||f.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,d[p])){e.webGlPrecision=d[p];break}}return this.isSupported=u,u},e.WebglFilterBackend=s;function s(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(c,f){this.dispose(),this.createWebGLCanvas(c,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,f)},chooseFastestCopyGLTo2DMethod:function(c,f){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&u&&d&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(c*f*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=h;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:f,targetCanvas:m},_,b,y;m.width=c,m.height=f,_=window.performance.now(),o.call(v,this.gl,v),b=window.performance.now()-_,_=window.performance.now(),h.call(v,this.gl,v),y=window.performance.now()-_,b>y?(this.imageBuffer=g,this.copyGLTo2D=h):this.copyGLTo2D=o}},createWebGLCanvas:function(c,f){var l=e.util.createCanvasElement();l.width=c,l.height=f;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=l.getContext("webgl",u);d||(d=l.getContext("experimental-webgl",u)),d&&(d.clearColor(0,0,0,0),this.canvas=l,this.gl=d)},applyFilters:function(c,f,l,u,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:m,sourceTexture:this.createTexture(m,l,u,!g&&f),targetTexture:this.createTexture(m,l,u),originalTexture:g||this.createTexture(m,l,u,!g&&f),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),c.forEach(function(b){b&&b.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,f,l,u,d){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,l,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,f){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,f={renderer:"",vendor:""};if(!c)return f;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),d=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(f.renderer=u.toLowerCase()),d&&(f.vendor=d.toLowerCase())}return this.gpuInfo=f,f}}}();function r(a){var s=a.targetCanvas,c=s.width,f=s.height,l=a.destinationWidth,u=a.destinationHeight;(c!==l||f!==u)&&(s.width=l,s.height=u)}function o(a,s){var c=a.canvas,f=s.targetCanvas,l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1);var u=c.height-f.height;l.drawImage(c,0,u,f.width,f.height,0,0,f.width,f.height)}function h(a,s){var c=s.targetCanvas,f=c.getContext("2d"),l=s.destinationWidth,u=s.destinationHeight,d=l*u*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);a.readPixels(0,0,l,u,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,u);f.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,f,l,u,d){var p=d.getContext("2d");p.drawImage(f,0,0,l,u);var m=p.getImageData(0,0,l,u),g=p.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:m,originalEl:f,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return c.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,c){s=s||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,c),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,s),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var u=a.createProgram();if(a.attachShader(u,f),a.attachShader(u,l),a.linkProgram(u),!a.getProgramParameter(u,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(u));var d=this.getAttributeLocations(a,u),p=this.getUniformLocations(a,u)||{};return p.uStepW=a.getUniformLocation(u,"uStepW"),p.uStepH=a.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,c){var f=s.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,c,f;a.passes>1?(c=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==f)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,c,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var c=s[a].length;c--;)if(this[a][c]!==s[a][c])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(c.program),this.sendAttributeData(s,c.attributeLocations,a.aPosition),s.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,c.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,s){var c=new e.Image.filters[a.type](a);return s&&s(c),c},function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.ColorMatrix=f(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m=this.matrix,g,v,_,b,y,C=this.colorsOnly;for(y=0;y<p;y+=4)g=d[y],v=d[y+1],_=d[y+2],C?(d[y]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(b=d[y+3],d[y]=g*m[0]+v*m[1]+_*m[2]+b*m[3]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+b*m[8]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+b*m[13]+m[14]*255,d[y+3]=g*m[15]+v*m[16]+_*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,p),l.uniform4fv(u.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Brightness=f(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,d=u.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Convolute=l(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return u.programCache.hasOwnProperty(p)||(u.programCache[p]=this.createProgram(u.context,m)),u.programCache[p]},applyTo2d:function(u){var d=u.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=d.width,b=d.height,y=u.ctx.createImageData(_,b),C=y.data,w=this.opaque?1:0,T,O,A,L,G,Y,te,q,N,B,Q,ee,x;for(Q=0;Q<b;Q++)for(B=0;B<_;B++){for(G=(Q*_+B)*4,T=0,O=0,A=0,L=0,x=0;x<g;x++)for(ee=0;ee<g;ee++)te=Q+x-v,Y=B+ee-v,!(te<0||te>=b||Y<0||Y>=_)&&(q=(te*_+Y)*4,N=m[x*g+ee],T+=p[q]*N,O+=p[q+1]*N,A+=p[q+2]*N,w||(L+=p[q+3]*N));C[G]=T,C[G+1]=O,C[G+2]=A,w?C[G+3]=p[G+3]:C[G+3]=L}u.imageData=y},getUniformLocations:function(u,d){return{uMatrix:u.getUniformLocation(d,"uMatrix"),uOpaque:u.getUniformLocation(d,"uOpaque"),uHalfSize:u.getUniformLocation(d,"uHalfSize"),uSize:u.getUniformLocation(d,"uSize")}},sendUniformData:function(u,d){u.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Grayscale=f(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var d=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,d)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var d=1;l.uniform1i(u.uMode,d)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Invert=f(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Noise=l(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var d=u.imageData,p=d.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(u,d){return{uNoise:u.getUniformLocation(d,"uNoise"),uSeed:u.getUniformLocation(d,"uSeed")}},sendUniformData:function(u,d){u.uniform1f(d.uNoise,this.noise/255),u.uniform1f(d.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Pixelate=f(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,d=u.data,p=u.height,m=u.width,g,v,_,b,y,C,w,T,O,A,L;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,b=d[g],y=d[g+1],C=d[g+2],w=d[g+3],A=Math.min(v+this.blocksize,p),L=Math.min(_+this.blocksize,m),T=v;T<A;T++)for(O=_;O<L;O++)g=T*4*m+O*4,d[g]=b,d[g+1]=y,d[g+2]=C,d[g+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.RemoveColor=l(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var d=u.imageData,p=d.data,m,g=this.distance*255,v,_,b,y=new s.Color(this.color).getSource(),C=[y[0]-g,y[1]-g,y[2]-g],w=[y[0]+g,y[1]+g,y[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],b=p[m+2],v>C[0]&&_>C[1]&&b>C[2]&&v<w[0]&&_<w[1]&&b<w[2]&&(p[m+3]=0)},getUniformLocations:function(u,d){return{uLow:u.getUniformLocation(d,"uLow"),uHigh:u.getUniformLocation(d,"uHigh")}},sendUniformData:function(u,d){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];u.uniform4fv(d.uLow,g),u.uniform4fv(d.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=f(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),s.Image.filters[u].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendColor=f(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d;return l.programCache.hasOwnProperty(u)||(d=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m,g,v,_,b,y,C,w=1-this.alpha;C=new s.Color(this.color).getSource(),m=C[0]*this.alpha,g=C[1]*this.alpha,v=C[2]*this.alpha;for(var T=0;T<p;T+=4)switch(_=d[T],b=d[T+1],y=d[T+2],this.mode){case"multiply":d[T]=_*m/255,d[T+1]=b*g/255,d[T+2]=y*v/255;break;case"screen":d[T]=255-(255-_)*(255-m)/255,d[T+1]=255-(255-b)*(255-g)/255,d[T+2]=255-(255-y)*(255-v)/255;break;case"add":d[T]=_+m,d[T+1]=b+g,d[T+2]=y+v;break;case"diff":case"difference":d[T]=Math.abs(_-m),d[T+1]=Math.abs(b-g),d[T+2]=Math.abs(y-v);break;case"subtract":d[T]=_-m,d[T+1]=b-g,d[T+2]=y-v;break;case"darken":d[T]=Math.min(_,m),d[T+1]=Math.min(b,g),d[T+2]=Math.min(y,v);break;case"lighten":d[T]=Math.max(_,m),d[T+1]=Math.max(b,g),d[T+2]=Math.max(y,v);break;case"overlay":d[T]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,d[T+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,d[T+2]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255;break;case"exclusion":d[T]=m+_-2*m*_/255,d[T+1]=g+b-2*g*b/255,d[T+2]=v+y-2*v*y/255;break;case"tint":d[T]=m+_*w,d[T+1]=g+b*w,d[T+2]=v+y*w}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var d=new s.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,l.uniform4fv(u.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendImage=f(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,d=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,d,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,d=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/d,1]},applyTo2d:function(l){var u=l.imageData,d=l.filterBackend.resources,p=u.data,m=p.length,g=u.width,v=u.height,_,b,y,C,w,T,O,A,L,G,Y=this.image,te;d.blendImage||(d.blendImage=s.util.createCanvasElement()),L=d.blendImage,G=L.getContext("2d"),L.width!==g||L.height!==v?(L.width=g,L.height=v):G.clearRect(0,0,g,v),G.setTransform(Y.scaleX,0,0,Y.scaleY,Y.left,Y.top),G.drawImage(Y._element,0,0,g,v),te=G.getImageData(0,0,g,v).data;for(var q=0;q<m;q+=4)switch(w=p[q],T=p[q+1],O=p[q+2],A=p[q+3],_=te[q],b=te[q+1],y=te[q+2],C=te[q+3],this.mode){case"multiply":p[q]=w*_/255,p[q+1]=T*b/255,p[q+2]=O*y/255,p[q+3]=A*C/255;break;case"mask":p[q+3]=C;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var d=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(l,u){s.Image.fromObject(l.image,function(d){var p=s.util.object.clone(l);p.image=d,u(new s.Image.filters.BlendImage(p))})}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.pow,f=Math.floor,l=Math.sqrt,u=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!_.programCache.hasOwnProperty(y)){var C=this.generateShader(b);_.programCache[y]=this.createProgram(_.context,C)}return _.programCache[y]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),C=new Array(y),w=1;w<=y;w++)C[w-1]=_(w*b);return C},generateShader:function(C){for(var b=new Array(C),y=this.fragmentSourceTOP,C,w=1;w<=C;w++)b[w-1]=w+".0 * uDelta";return y+="uniform float uTaps["+C+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(T,O){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+O+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+O+`];
`,y+="  sum += 2.0 * uTaps["+O+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(b){if(b>=_||b<=-_)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/_;return p(b)/b*p(y)/y}},applyTo2d:function(_){var b=_.imageData,y=this.scaleX,C=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/C;var w=b.width,T=b.height,O=d(w*y),A=d(T*C),L;this.resizeType==="sliceHack"?L=this.sliceByTwo(_,w,T,O,A):this.resizeType==="hermite"?L=this.hermiteFastResize(_,w,T,O,A):this.resizeType==="bilinear"?L=this.bilinearFiltering(_,w,T,O,A):this.resizeType==="lanczos"&&(L=this.lanczosResize(_,w,T,O,A)),_.imageData=L},sliceByTwo:function(_,b,y,C,w){var T=_.imageData,O=.5,A=!1,L=!1,G=b*O,Y=y*O,te=s.filterBackend.resources,q,N,B=0,Q=0,ee=b,x=0;for(te.sliceByTwo||(te.sliceByTwo=document.createElement("canvas")),q=te.sliceByTwo,(q.width<b*1.5||q.height<y)&&(q.width=b*1.5,q.height=y),N=q.getContext("2d"),N.clearRect(0,0,b*1.5,y),N.putImageData(T,0,0),C=f(C),w=f(w);!A||!L;)b=G,y=Y,C<f(G*O)?G=f(G*O):(G=C,A=!0),w<f(Y*O)?Y=f(Y*O):(Y=w,L=!0),N.drawImage(q,B,Q,b,y,ee,x,G,Y),B=ee,Q=x,x+=Y;return N.getImageData(B,Q,C,w)},lanczosResize:function(_,b,y,C,w){function T(R){var F,K,M,D,H,J,ie,Z,$,se,pe;for(x.x=(R+.5)*Y,P.x=f(x.x),F=0;F<w;F++){for(x.y=(F+.5)*te,P.y=f(x.y),H=0,J=0,ie=0,Z=0,$=0,K=P.x-B;K<=P.x+B;K++)if(!(K<0||K>=b)){se=f(1e3*u(K-x.x)),ee[se]||(ee[se]={});for(var z=P.y-Q;z<=P.y+Q;z++)z<0||z>=y||(pe=f(1e3*u(z-x.y)),ee[se][pe]||(ee[se][pe]=G(l(c(se*q,2)+c(pe*N,2))/1e3)),M=ee[se][pe],M>0&&(D=(z*b+K)*4,H+=M,J+=M*O[D],ie+=M*O[D+1],Z+=M*O[D+2],$+=M*O[D+3]))}D=(F*C+R)*4,L[D]=J/H,L[D+1]=ie/H,L[D+2]=Z/H,L[D+3]=$/H}return++R<C?T(R):A}var O=_.imageData.data,A=_.ctx.createImageData(C,w),L=A.data,G=this.lanczosCreate(this.lanczosLobes),Y=this.rcpScaleX,te=this.rcpScaleY,q=2/this.rcpScaleX,N=2/this.rcpScaleY,B=m(Y*this.lanczosLobes/2),Q=m(te*this.lanczosLobes/2),ee={},x={},P={};return T(0)},bilinearFiltering:function(_,b,y,C,w){var T,O,A,L,G,Y,te,q,N,B,Q,ee,x=0,P,R=this.rcpScaleX,F=this.rcpScaleY,K=4*(b-1),M=_.imageData,D=M.data,H=_.ctx.createImageData(C,w),J=H.data;for(te=0;te<w;te++)for(q=0;q<C;q++)for(G=f(R*q),Y=f(F*te),N=R*q-G,B=F*te-Y,P=4*(Y*b+G),Q=0;Q<4;Q++)T=D[P+Q],O=D[P+4+Q],A=D[P+K+Q],L=D[P+K+4+Q],ee=T*(1-N)*(1-B)+O*N*(1-B)+A*B*(1-N)+L*N*B,J[x++]=ee;return H},hermiteFastResize:function(_,b,y,C,w){for(var T=this.rcpScaleX,O=this.rcpScaleY,A=m(T/2),L=m(O/2),G=_.imageData,Y=G.data,te=_.ctx.createImageData(C,w),q=te.data,N=0;N<w;N++)for(var B=0;B<C;B++){for(var Q=(B+N*C)*4,ee=0,x=0,P=0,R=0,F=0,K=0,M=0,D=(N+.5)*O,H=f(N*O);H<(N+1)*O;H++)for(var J=u(D-(H+.5))/L,ie=(B+.5)*T,Z=J*J,$=f(B*T);$<(B+1)*T;$++){var se=u(ie-($+.5))/A,pe=l(Z+se*se);pe>1&&pe<-1||(ee=2*pe*pe*pe-3*pe*pe+1,ee>0&&(se=4*($+H*b),M+=ee*Y[se+3],P+=ee,Y[se+3]<255&&(ee=ee*Y[se+3]/250),R+=ee*Y[se],F+=ee*Y[se+1],K+=ee*Y[se+2],x+=ee))}q[Q]=R/x,q[Q+1]=F/x,q[Q+2]=K/x,q[Q+3]=M/P}return te},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Contrast=f(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,d,m,p=u.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Saturation=f(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),d[g]+=v!==d[g]?(v-d[g])*m:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*m:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*m:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Vibrance=f(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.vibrance,g,v,_,b;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),_=(d[g]+d[g+1]+d[g+2])/3,b=Math.abs(v-_)*2/255*m,d[g]+=v!==d[g]?(v-d[g])*b:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*b:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*b:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Blur=f(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,d,p,m=l.imageData.width,g=l.imageData.height;u.blurLayer1||(u.blurLayer1=s.util.createCanvasElement(),u.blurLayer2=s.util.createCanvasElement()),d=u.blurLayer1,p=u.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var v=d.getContext("2d"),_=p.getContext("2d"),b=15,y,C,w,T,O=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),_.clearRect(0,0,m,g),T=-b;T<=b;T++)y=(Math.random()-.5)/4,C=T/b,w=O*C*m+y,_.globalAlpha=1-Math.abs(C),_.drawImage(d,w,y),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(T=-b;T<=b;T++)y=(Math.random()-.5)/4,C=T/b,w=O*C*g+y,_.globalAlpha=1-Math.abs(C),_.drawImage(d,y,w),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);l.ctx.drawImage(d,0,0);var A=l.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),A},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var d=this.chooseRightDelta();l.uniform2fv(u.delta,d)},chooseRightDelta:function(){var l=1,u=[0,0],d;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),d=l*this.blur*.12,this.horizontal?u[0]=d:u[1]=d,u}}),c.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Gamma=f(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=this.gamma,m=d.length,g=1/p[0],v=1/p[1],_=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,_)*255;for(b=0,m=d.length;b<m;b+=4)d[b]=this.rVals[d[b]],d[b+1]=this.gVals[d[b+1]],d[b+2]=this.bVals[d[b+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Composed=f(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(l,u){var d=l.subFilters||[],p=d.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return u&&u(m),m}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.HueRotation=f(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=s.util.cos(l),d=s.util.sin(l),p=1/3,m=Math.sqrt(p)*d,g=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=u+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=u+p*g},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=s.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,d,p,m,g,v,_=0,b=this._textLines.length;_<b;_++)if(!(this.textAlign!=="justify"&&(_===b-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],u=this.getLineWidth(_),u<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){d=v.length,l=(this.width-u)/d;for(var y=0,C=m.length;y<=C;y++)g=this.__charBounds[_][y],this._reSpaceAndTab.test(m[y])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,d){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,d)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,d=this._textLines.length;u<d;u++){var p=this.getLineWidth(u);p>l&&(l=p)}return l},_renderTextLine:function(l,u,d,p,m,g){this._renderChars(l,u,d,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,d,p=l.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),b=0,y=0,C,w,T=this.path,O,A=0,L=this._textLines.length;A<L;A++){if(u=this.getHeightOfLine(A),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",A)){_+=u;continue}m=this._textLines[A],d=this._getLineLeftOffset(A),y=0,b=0,g=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var G=0,Y=m.length;G<Y;G++)C=this.__charBounds[A][G],w=this.getValueOfPropertyAt(A,G,"textBackgroundColor"),T?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),l.fillStyle=w,w&&l.fillRect(-C.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),C.width,u/this.lineHeight),l.restore()):w!==g?(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=g,g&&l.fillRect(O,_,y,u/this.lineHeight),b=C.left,y=C.width,g=w):y+=C.kernedWidth;w&&!T&&(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=w,l.fillRect(O,_,y,u/this.lineHeight)),_+=u}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();s.charWidthsCache[u]||(s.charWidthsCache[u]={});var d=s.charWidthsCache[u],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(l,u,d,p){var m=this.getFontCache(u),g=this._getFontDeclaration(u),v=this._getFontDeclaration(p),_=d+l,b=g===v,y,C,w,T=u.fontSize/this.CACHE_FONT_SIZE,O;if(d&&m[d]!==void 0&&(w=m[d]),m[l]!==void 0&&(O=y=m[l]),b&&m[_]!==void 0&&(C=m[_],O=C-w),y===void 0||w===void 0||C===void 0){var A=this.getMeasuringContext();this._setTextStyles(A,u,!0)}return y===void 0&&(O=y=A.measureText(l).width,m[l]=y),w===void 0&&b&&d&&(w=A.measureText(d).width,m[d]=w),b&&C===void 0&&(C=A.measureText(_).width,m[_]=C,O=C-w),{width:y*T,kernedWidth:O*T}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,d,p,m=this._textLines[l],g,v,_=0,b=new Array(m.length),y=0,C,w,T=this.path,O=this.pathSide==="right";for(this.__charBounds[l]=b,d=0;d<m.length;d++)p=m[d],v=this._getGraphemeBox(p,l,d,g),b[d]=v,u+=v.kernedWidth,g=p;if(b[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(w=T.segmentsInfo[T.segmentsInfo.length-1].length,C=s.util.getPointOnPath(T.path,0,T.segmentsInfo),C.x+=T.pathOffset.x,C.y+=T.pathOffset.y,this.textAlign){case"left":y=O?w-u:0;break;case"center":y=(w-u)/2;break;case"right":y=O?0:w-u;break}for(y+=this.pathStartOffset*(O?-1:1),d=O?m.length-1:0;O?d>=0:d<m.length;O?d--:d++)v=b[d],y>w?y%=w:y<0&&(y+=w),this._setGraphemeOnPath(y,v,C),y+=v.kernedWidth}return{width:u,numOfSpaces:_}},_setGraphemeOnPath:function(l,u,d){var p=l+u.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);u.renderLeft=g.x-d.x,u.renderTop=g.y-d.y,u.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,d,p,m){var g=this.getCompleteStyleDeclaration(u,d),v=p?this.getCompleteStyleDeclaration(u,d-1):{},_=this._measureChar(l,g,p,v),b=_.kernedWidth,y=_.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),y+=C,b+=C);var w={width:y,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(d>0&&!m){var T=this.__charBounds[u][d-1];w.left=T.left+T.width+_.kernedWidth-_.width}return w},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],d=this.getHeightOfChar(l,0),p=1,m=u.length;p<m;p++)d=Math.max(this.getHeightOfChar(l,p),d);return this.__lineHeights[l]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,d=0,p=this._textLines.length;d<p;d++)l=this.getHeightOfLine(d),u+=d===p-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),b=_/this.lineHeight,y=this._getLineLeftOffset(g);this._renderTextLine(u,l,this._textLines[g],p+y,m+d+b,g),d+=_}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,d,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,b,y,C="",w,T=0,O,A=this.path,L=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!A,G=this.direction==="ltr",Y=this.direction==="ltr"?1:-1,te,q=u.canvas.getAttribute("dir");if(u.save(),q!==this.direction&&(u.canvas.setAttribute("dir",G?"ltr":"rtl"),u.direction=G?"ltr":"rtl",u.textAlign=G?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,L){this._renderChar(l,u,g,0,d.join(""),p,m,v),u.restore();return}for(var N=0,B=d.length-1;N<=B;N++)O=N===B||this.charSpacing||A,C+=d[N],w=this.__charBounds[g][N],T===0?(p+=Y*(w.kernedWidth-w.width),T+=w.width):T+=w.kernedWidth,_&&!O&&this._reSpaceAndTab.test(d[N])&&(O=!0),O||(b=b||this.getCompleteStyleDeclaration(g,N),y=this.getCompleteStyleDeclaration(g,N+1),O=s.util.hasStyleChanged(b,y,!1)),O&&(A?(u.save(),u.translate(w.renderLeft,w.renderTop),u.rotate(w.angle),this._renderChar(l,u,g,N,C,-T/2,0,v),u.restore()):(te=p,this._renderChar(l,u,g,N,C,te,m,v)),C="",b=y,p+=Y*T,T=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=s.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return u.width=p,u.height=m,d=u.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=l.toLive(d),this._applyPatternGradientTransform(d,l),d.fill(),d.createPattern(u,"no-repeat")},handleFiller:function(l,u,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[u]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(l[u]=d.toLive(l,this),this._applyPatternGradientTransform(l,d)):(l[u]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,d,p,m,g,v){var _=this._getStyleDeclaration(d,p),b=this.getCompleteStyleDeclaration(d,p),y=l==="fillText"&&b.fill,C=l==="strokeText"&&b.stroke&&b.strokeWidth,w,T;!C&&!y||(u.save(),y&&(w=this._setFillStyles(u,b)),C&&(T=this._setStrokeStyles(u,b)),u.font=this._getFontDeclaration(b),_&&_.textBackgroundColor&&this._removeShadow(u),_&&_.deltaY&&(v+=_.deltaY),y&&u.fillText(m,g-w.offsetX,v-w.offsetY),C&&u.strokeText(m,g-T.offsetX,v-T.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,d){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),d=this.width-u,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),d=u.width;return this.__lineWidths[l]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,d){var p=this._getStyleDeclaration(l,u);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var d,p,m,g,v,_,b,y,C=this._getLeftOffset(),w=this._getTopOffset(),T,O,A,L,G,Y,te,q,N=this.path,B=this._getWidthOfCharSpacing(),Q=this.offsets[u],ee=0,x=this._textLines.length;ee<x;ee++){if(d=this.getHeightOfLine(ee),!this[u]&&!this.styleHas(u,ee)){w+=d;continue}b=this._textLines[ee],Y=d/this.lineHeight,g=this._getLineLeftOffset(ee),O=0,A=0,y=this.getValueOfPropertyAt(ee,0,u),q=this.getValueOfPropertyAt(ee,0,"fill"),T=w+Y*(1-this._fontSizeFraction),p=this.getHeightOfChar(ee,0),v=this.getValueOfPropertyAt(ee,0,"deltaY");for(var P=0,R=b.length;P<R;P++)if(L=this.__charBounds[ee][P],G=this.getValueOfPropertyAt(ee,P,u),te=this.getValueOfPropertyAt(ee,P,"fill"),m=this.getHeightOfChar(ee,P),_=this.getValueOfPropertyAt(ee,P,"deltaY"),N&&G&&te)l.save(),l.fillStyle=q,l.translate(L.renderLeft,L.renderTop),l.rotate(L.angle),l.fillRect(-L.kernedWidth/2,Q*m+_,L.kernedWidth,this.fontSize/15),l.restore();else if((G!==y||te!==q||m!==p||_!==v)&&A>0){var F=C+g+O;this.direction==="rtl"&&(F=this.width-F-A),y&&q&&(l.fillStyle=q,l.fillRect(F,T+Q*p+v,A,this.fontSize/15)),O=L.left,A=L.width,y=G,q=te,p=m,v=_}else A+=L.kernedWidth;var F=C+g+O;this.direction==="rtl"&&(F=this.width-F-A),l.fillStyle=te,G&&te&&l.fillRect(F,T+Q*p+v,A-B,this.fontSize/15),w+=d}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var d=l||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[s.isLikelyNode?d.fontWeight:d.fontStyle,s.isLikelyNode?d.fontStyle:d.fontWeight,u?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),d=new Array(u.length),p=[`
`],m=[],g=0;g<u.length;g++)d[g]=s.util.string.graphemeSplit(u[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:u,graphemeText:m,graphemeLines:d}},toObject:function(l){var u=f.concat(l),d=this.callSuper("toObject",u);return d.styles=s.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(l,u){this.callSuper("set",l,u);var d=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(l,u,d){if(!l)return u(null);var p=s.parseAttributes(l,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=s.util.object.extend(d?c(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=d.strokeWidth;d.strokeWidth=0;var b=new s.Text(v,d),y=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,w=C*y,T=b.getScaledHeight()+w,O=0;m==="center"&&(O=b.getScaledWidth()/2),m==="right"&&(O=b.getScaledWidth()),b.set({left:b.left-O,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof _<"u"?_:1}),u(b)},s.Text.fromObject=function(l,u){var d=c(l),p=l.path;return delete d.path,s.Object._fromObject("Text",d,function(m){m.styles=s.util.stylesFromArray(l.styles,l.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),u(m)},"path"):u(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in s)for(var f in s[c])for(var l in s[c][f])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var c=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in c)for(var l in c[f])if(typeof c[f][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,c=0,f,l,u=!0,d=0,p;for(var m in s){f=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);c++,v?(l?p[a]!==l&&(u=!1):l=p[a],p[a]===this[a]&&delete p[a]):u=!1,Object.keys(p).length!==0?f++:delete s[m][g]}f===0&&delete s[m]}for(var _=0;_<this._textLines.length;_++)d+=this._textLines[_].length;u&&c===d&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,c,f,l;for(f in s){c=s[f];for(l in c)delete c[l][a],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete s[f]}}},_extendStyles:function(a,s){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var c=s?this._unwrappedTextLines:this._textLines,f=c.length,l=0;l<f;l++){if(a<=c[l].length)return{lineIndex:l,charIndex:a};a-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<a?c[l-1].length:a}},getSelectionStyles:function(a,s,c){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var f=[],l=a;l<s;l++)f.push(this.getStyleAtPosition(l,c));return f},getStyleAtPosition:function(a,s){var c=this.get2DCursorLocation(a),f=s?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return f||{}},setSelectionStyles:function(a,s,c){typeof s>"u"&&(s=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||s);for(var f=s;f<c;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var c=this.styles&&this.styles[a];return c?c[s]:null},getCompleteStyleDeclaration:function(a,s){for(var c=this._getStyleDeclaration(a,s)||{},f={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],f[l]=typeof c[l]>"u"?this[l]:c[l];return f},_setStyleDeclaration:function(a,s,c){this.styles[a][s]=c},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,c){this.callSuper("initialize",s,c),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,c){this[s]!==c&&(this._fireSelectionChanged(),this[s]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,f=this.canvas.viewportTransform;c.save(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(c),this._clearTextArea(c),s||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,c):this.renderSelection(s,c),c.restore()}},_clearTextArea:function(s){var c=this.width+4,f=this.height+4;s.clearRect(-c/2,-f/2,c,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var c=this._getLeftOffset(),f=this._getTopOffset(),l=this._getCursorBoundariesOffsets(s);return{left:c,top:f,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,f,l,u=0,d=0,p,m=this.get2DCursorLocation(s);l=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)u+=this.getHeightOfLine(g);c=this._getLineLeftOffset(f);var v=this.__charBounds[f][l];return v&&(d=v.left),this.charSpacing!==0&&l===this._textLines[f].length&&(d-=this._getWidthOfCharSpacing()),p={top:u,left:c+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,c){var f=this.get2DCursorLocation(),l=f.lineIndex,u=f.charIndex>0?f.charIndex-1:0,d=this.getValueOfPropertyAt(l,u,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,d)},renderSelection:function(s,c){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(f),p=this.get2DCursorLocation(l),m=d.lineIndex,g=p.lineIndex,v=d.charIndex<0?0:d.charIndex,_=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var y=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),w=0,T=0,O=0;if(b===m&&(T=this.__charBounds[m][v].left),b>=m&&b<g)O=u&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(_===0)O=this.__charBounds[g][_].left;else{var A=this._getWidthOfCharSpacing();O=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-A}w=C,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(C/=this.lineHeight);var L=s.left+y+T,G=O-T,Y=C,te=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",Y=1,te=C):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(L=this.width-L-G),c.fillRect(L,s.top+s.topOffset+te,G,Y),s.topOffset+=w}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),c=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c}}}),e.IText.fromObject=function(s,c){var f=e.util.stylesFromArray(s.styles,s.text),l=Object.assign({},s,{styles:f});if(a(l),l.styles)for(var u in l.styles)for(var d in l.styles[u])a(l.styles[u][d]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var c=s.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,s._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var c=s.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,s),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,s._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,c,f,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",c,{duration:f,onComplete:function(){u.isAborted||s[l]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var c=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var c=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f--;for(;/\S/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findWordBoundaryRight:function(s){var c=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},findLineBoundaryLeft:function(s){for(var c=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findLineBoundaryRight:function(s){for(var c=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},searchWordBoundary:function(s,c){for(var f=this._text,l=this._reSpace.test(f[s])?s-1:s,u=f[l],d=e.reNonWord;!d.test(u)&&l>0&&l<f.length;)l+=c,u=f[l];return d.test(u)&&(l+=c===1?0:1),l},selectWord:function(s){s=s||this.selectionStart;var c=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var c=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||f===l)&&(f===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,c,f){var l=f.slice(0,s),u=e.util.string.graphemeSplit(l).length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=e.util.string.graphemeSplit(d).length;return{selectionStart:u,selectionEnd:u+p}},fromGraphemeToStringSelection:function(s,c,f){var l=f.slice(0,s),u=l.join("").length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=d.join("").length;return{selectionStart:u,selectionEnd:u+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),l=f.lineIndex,u=f.charIndex,d=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+d},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/v,y=_.height/v,C=b-d,w=y-d,T=_.clientWidth/b,O=_.clientHeight/y;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=T,g.y*=O,g.x<0&&(g.x=0),g.x>C&&(g.x=C),g.y<0&&(g.y=0),g.y>w&&(g.y=w),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,c){var f=this.get2DCursorLocation(s,!0),l=this.get2DCursorLocation(c,!0),u=f.lineIndex,d=f.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(u!==p){if(this.styles[u])for(g=d;g<this._unwrappedTextLines[u].length;g++)delete this.styles[u][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][d+g-m]=v);for(g=u+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,u-p)}else if(this.styles[u]){v=this.styles[u];var _=m-d,b,y;for(g=d;g<m;g++)delete v[g];for(y in this.styles[u])b=parseInt(y,10),b>=m&&(v[b-_]=v[y],delete v[y])}},shiftLineStyles:function(s,c){var f=a(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>s&&(this.styles[u+c]=f[u],f[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,c,f,l){var u,d={},p=!1,m=this._unwrappedTextLines[s].length===c;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(u=this.styles[s][c===0?c:c-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=c&&(p=!0,d[v-c]=this.styles[s][g],m&&c===0||delete this.styles[s][g])}var _=!1;for(p&&!m&&(this.styles[s+f]=d,_=!0),_&&f--;f>0;)l&&l[f-1]?this.styles[s+f]={0:a(l[f-1])}:u?this.styles[s+f]={0:a(u)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,c,f,l){this.styles||(this.styles={});var u=this.styles[s],d=u?a(u):{};f||(f=1);for(var p in d){var m=parseInt(p,10);m>=c&&(u[m+f]=d[m],d[m-f]||delete u[m])}if(this._forceClearCache=!0,l){for(;f--;)Object.keys(l[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][c+f]=a(l[f]));return}if(u)for(var g=u[c?c-1:1];g&&f--;)this.styles[s][c+f]=a(g)},insertNewStyleBlock:function(s,c,f){for(var l=this.get2DCursorLocation(c,!0),u=[0],d=0,p=0;p<s.length;p++)s[p]===`
`?(d++,u[d]=0):u[d]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],f),f=f&&f.slice(u[0]+1)),d&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],d);for(var p=1;p<d;p++)u[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,u[p],f):f&&this.styles[l.lineIndex+p]&&f[0]&&(this.styles[l.lineIndex+p][0]=f[0]),f=f&&f.slice(u[p]+1);u[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,u[p],f)},setSelectionStartEndWithShift:function(s,c,f){f<=s?(c===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<c?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(c===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),c=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),c=0,f=0,l=0,u=0,d=0,p,m,g=0,v=this._textLines.length;g<v&&l<=s.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(u+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),f=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var _=0,b=m.length;_<b&&(c=f,f+=this.__charBounds[d][_].kernedWidth*this.scaleX,f<=s.x);_++)u++;return this._getNewSelectionStartFromOffset(s,c,f,u,b)},_getNewSelectionStartFromOffset:function(a,s,c,f,l){var u=a.x-s,d=c-a.x,p=d>u||d<0?0:1,m=f+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,l=c.length,u,d,p=l-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=m>C.selectionStart;v?(u=this._text.slice(m,g),p+=g-m):l<f&&(w?u=this._text.slice(g+p,g):u=this._text.slice(m,m-p)),d=c.slice(C.selectionEnd-p,C.selectionEnd),u&&u.length&&(d.length&&(_=this.getSelectionStyles(m,m+1,!1),_=d.map(function(){return _[0]})),v?(b=m,y=g):w?(b=g-u.length,y=g):(b=g,y=g+u.length),this.removeStyleFromTo(b,y)),d.length&&(s&&d.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(_=e.copiedTextStyle),this.insertNewStyleBlock(d,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,s){var c=this._getLineLeftOffset(a),f;return s>0&&(f=this.__charBounds[a][s-1],c+=f.left+f.width),c},getDownCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l+1,d),m=this._textLines[l].slice(u);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l-1,d),m=this._textLines[l].slice(0,u),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var c=this._textLines[a],f=this._getLineLeftOffset(a),l=f,u=0,d,p,m=0,g=c.length;m<g;m++)if(d=this.__charBounds[a][m].width,l+=d,l>s){p=!0;var v=l-d,_=l,b=Math.abs(v-s),y=Math.abs(_-s);u=y<b?m:m-1;break}return p||(u=c.length-1),u},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var c="get"+a+"CursorOffset",f=this[c](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,c){var f;if(a.altKey)f=this["findWordBoundary"+c](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+c](this[s]);else return this[s]+=c==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?c+="Shift":c+="outShift",this[c](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,c,f){typeof f>"u"&&(f=c),f>c&&this.removeStyleFromTo(c,f);var l=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,c,s),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var f=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,f){var l=[],u=[],d=c,p;this._setSVGBg(u);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(u,m,f+p,d),this._setSVGTextLineText(l,m,f+p,d),d+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,f,l,u){var d=c!==c.trim()||c.match(s),p=this.getSvgSpanStyles(f,d),m=p?'style="'+p+'"':"",g=f.deltaY,v="",_=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(l,_),'" y="',a(u,_),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,f,l,u){var d=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,b,y=0,C=this._textLines[f],w;u+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,O=C.length-1;T<=O;T++)w=T===O||this.charSpacing,v+=C[T],_=this.__charBounds[f][T],y===0?(l+=_.kernedWidth-_.width,y+=_.width):y+=_.kernedWidth,p&&!w&&this._reSpaceAndTab.test(C[T])&&(w=!0),w||(m=m||this.getCompleteStyleDeclaration(f,T),g=this.getCompleteStyleDeclaration(f,T+1),w=e.util.hasStyleChanged(m,g,!0)),w&&(b=this._getStyleDeclaration(f,T)||{},c.push(this._createTextCharSpan(v,b,l,u)),v="",m=g,l+=y,y=0)},_pushTextBgRect:function(c,f,l,u,d,p){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(f),' x="',a(l,m),'" y="',a(u,m),'" width="',a(d,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,f,l,u){for(var d=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,_,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),y=0,C=d.length;y<C;y++)v=this.__charBounds[f][y],_=this.getValueOfPropertyAt(f,y,"textBackgroundColor"),_!==b?(b&&this._pushTextBgRect(c,b,l+g,u,m,p),g=v.left,m=v.width,b=_):m+=v.kernedWidth;_&&this._pushTextBgRect(c,_,l+g,u,m,p)},_getFillAttributes:function(c){var f=c&&typeof c=="string"?new e.Color(c):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+c+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var f=0,l=0,u=0;u<c;u++)f+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var f=e.Object.prototype.getSvgStyles.call(this,c);return f+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var f=0,l=0,u=0,d={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[u]===`
`&&p>0?(l=0,u++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&p>0&&(l++,u++),d[p]={line:f,offset:l},u+=c.graphemeLines[p].length,l+=c.graphemeLines[p].length;return d},styleHas:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[f];l&&(f=l.line)}return s.Text.prototype.styleHas.call(this,c,f)},isEmptyStyles:function(c){if(!this.styles)return!0;var f=0,l=c+1,u,d,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,f=m.offset),g&&(l=g.line,p=l===c,u=g.offset),d=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in d)for(var _ in d[v])if(_>=f&&(!p||_<u))for(var b in d[v][_])return!1;return!0},_getStyleDeclaration:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,f=l.offset+f}return this.callSuper("_getStyleDeclaration",c,f)},_setStyleDeclaration:function(c,f,l){var u=this._styleMap[c];c=u.line,f=u.offset+f,this.styles[c][f]=l},_deleteStyleDeclaration:function(c,f){var l=this._styleMap[c];c=l.line,f=l.offset+f,delete this.styles[c][f]},_getLineStyle:function(c){var f=this._styleMap[c];return!!this.styles[f.line]},_setLineStyle:function(c){var f=this._styleMap[c];this.styles[f.line]={}},_wrapText:function(c,f){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,f));return this.isWrapping=!1,l},_measureWord:function(c,f,l){var u=0,d,p=!0;l=l||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],f,m+l,d,p);u+=v.kernedWidth,d=c[m]}return u},_wrapLine:function(c,f,l,L){var d=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(c):c.split(this._wordJoiners),_="",b=0,y=p?"":" ",C=0,w=0,T=0,O=!0,A=this._getWidthOfCharSpacing(),L=L||0;v.length===0&&v.push([]),l-=L;for(var G=0;G<v.length;G++)_=p?v[G]:s.util.string.graphemeSplit(v[G]),C=this._measureWord(_,f,b),b+=_.length,d+=w+C-A,d>l&&!O?(m.push(g),g=[],d=C,O=!0):d+=A,!O&&!p&&g.push(y),g=g.concat(_),w=p?0:this._measureWord([y],f,b),b++,O=!1,C>T&&(T=C);return G&&m.push(g),T+L>this.dynamicMinWidth&&(this.dynamicMinWidth=T-A+L),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var f=s.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(f.lines,this.width),u=new Array(l.length),d=0;d<l.length;d++)u[d]=l[d].join("");return f.lines=u,f.graphemeLines=l,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var f in this._styleMap)this._textLines[f]&&(c[this._styleMap[f].line]=1);for(var f in this.styles)c[f]||delete this.styles[f]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),s.Textbox.fromObject=function(c,f){var l=s.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return s.Object._fromObject("Textbox",u,f,"text")}}(t),function(){var a=e.controlsUtils,s=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,f=a.scalingEqually,l=a.scalingYOrSkewingX,u=a.scalingXOrSkewingY,d=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(ut);const rs=[];function Ms(t,e){return{subscribe:xt(t,e).subscribe}}function xt(t,e=ve){let n;const i=new Set;function r(a){if(Xe(t,a)&&(t=a,n)){const s=!rs.length;for(const c of i)c[1](),rs.push(c,t);if(s){for(let c=0;c<rs.length;c+=2)rs[c][0](rs[c+1]);rs.length=0}}}function o(a){r(a(t))}function h(a,s=ve){const c=[a,s];return i.add(c),i.size===1&&(n=e(r,o)||ve),a(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:h}}function x1(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ms(n,(h,a)=>{let s=!1;const c=[];let f=0,l=ve;const u=()=>{if(f)return;l();const p=e(i?c[0]:c,h,a);o?h(p):l=jn(p)?p:ve},d=r.map((p,m)=>th(p,g=>{c[m]=g,f&=~(1<<m),s&&u()},()=>{f|=1<<m}));return s=!0,u(),function(){We(d),l(),s=!1}})}let al,ll,Qi=xt(null),D1=xt({left:0,top:0});const Fd=10;let ge,$u,by,Fo,Lo,Gu=!1,kr=null,Pi=!1,sh=null;const A1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/><path d="M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',ms=["objType","successPosition","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","compositeId","imageIndex","printWidth","printHeight","extension","charSpacing","convert","thumbnail","uuid","localFamily","url","printIgnore","printIndex","targetFrame","vector","userEvent","evented","patternSourceCanvas","pattern","patternPadding","patternOffset","patternWidth"],P1=["print","guide","snapW","snapH","frame","guideText"];let wy=xt([]);function M1(t,e,n,i){kr=i,$u=document.getElementById(t).parentElement,al=e,ll=n,ge=new ut.fabric.Canvas(t,{width:e,height:n,selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0,isDrawingMode:Pi,preserveObjectStacking:!0}),ut.fabric.Object.prototype._renderControl=function(h,a,s,c,f){h.actionName==="rotate"?q1(a,c,f,A1):h.render(a,c,f)},ut.fabric.Object.prototype.cornerStyle="circle",ut.fabric.Object.prototype.cornerColor="#2EF2E8",ut.fabric.Object.prototype.borderColor="#0075ff",ut.fabric.Object.prototype.cornerStrokeColor="#0075ff";const r={mtr:!0,ml:!1,mr:!1,mb:!1,mt:!1,tl:!0,tr:!0,bl:!0,br:!0},o={mtr:!0,ml:!0,mr:!0,mb:!0,mt:!0,tl:!0,tr:!0,bl:!0,br:!0};ut.fabric.Image.prototype.setControlsVisibility(r),ut.fabric.Path.prototype.setControlsVisibility(r),ut.fabric.Text.prototype.setControlsVisibility(r),ut.fabric.Rect.prototype.setControlsVisibility(o),ut.fabric.Ellipse.prototype.setControlsVisibility(o),ut.fabric.Triangle.prototype.setControlsVisibility(o),ut.fabric.Object.prototype.cornerSize=20,ut.fabric.Object.prototype.transparentCorners=!1,ge.on("object:modified",h=>{Dl(),kr(ge.toJSON(ms),vs()),h.target.type==="pen"||h.target.type}),ge.on("object:added",()=>{Dl(),Gu||kr(ge.toJSON(ms),vs())}),ge.on("selection:created",h=>{Qi.set(h.selected),kr(ge.toJSON(ms),vs())}),ge.on("selection:updated",async h=>{Qi.set(null),await setTimeout(()=>{kr(ge.toJSON(ms),vs())},0),Qi.set(h.selected)}),ge.on("selection:cleared",()=>{Qi.set(null),kr(ge.toJSON(ms),vs())}),ge.on("mouse:down",h=>{Pi&&K1(h.e.clientX,h.e.clientY),Ld()}),ge.on("mouse:move",h=>{Pi&&J1(h.e.clientX,h.e.clientY),Ld()}),ge.on("mouse:up",()=>{Pi&&Z1()}),ge.on("object:moving",function(h){const a=h.target,s=ge.getZoom(),c=a.left,f=a.top;if(typeof Fo<"u"&&typeof Lo<"u"){let l=a.left,u=a.top;Math.abs(c-Fo)<Fd/s&&(l=Fo),Math.abs(f-Lo)<Fd/s&&(u=Lo),a.set({left:l,top:u})}ge.renderAll()}),ge.on("after:render",rC),Bd(),window.addEventListener("resize",Bd,!1)}function Ld(){const t=ge.getZoom(),e=ge.getActiveObject();if(!e)return;const n=ge.getElement().getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top,o=e.oCoords.mb;if(o){const h=(i+o.x)*t;D1.set({left:i+h,top:r})}else console.warn("Bottom-center controller not found")}function Dl(){wy.update(t=>ge.getObjects().map((n,i)=>{const r=n;return r.id=`layer_${i}`,r}).filter(n=>!P1.includes(n.objType)))}function R1(t){t.forEach(e=>{const n=ge.getObjects().find(i=>i.id===e.id);n&&n.bringToFront()}),Dl(),ge.renderAll()}function I1(t){Gu=!0,ge.loadFromJSON(t,()=>{Gu=!1,ge.renderAll.bind(ge),kr(ge.toJSON(ms),vs())},(e,n)=>{const i={selectable:!1,evented:!1};n.objType==="snapW"&&(Fo=n.left,n.set(i),n.printIgnore=!0),n.objType==="snapH"&&(Lo=n.top,n.set(i),n.printIgnore=!0),n.objType==="print"&&(ut.fabric.util.enlivenObjects([e],function(r){r[0].set({absolutePositioned:!0,stroke:"#FFFFFF",strokeWidth:0}),r[0].fill,by=r[0]}),n.set(i)),n.objType,n.objType==="guide"&&n.set(i),n.objType==="pattern"&&changePattern(n),(n.objType==="clipart"||n.objType==="text"||n.objType==="shape"||n.objType==="draw"||n.objType==="upload")&&oh(n),ge.discardActiveObject().renderAll()})}function Nd(t,e={}){const{extension:n}=e.origin?e.origin:e.convert;if(n==="svg"){F1(t,e);return}ut.fabric.Image.fromURL(t,i=>{const r=ge.getWidth(),o=ge.getHeight(),h=ge.getZoom(),a=i.width,s=i.height;let c=1;(a>r||s>o)&&(c=Math.min(r/a,o/s));const f={left:r/h/2,top:o/h/2,originX:"center",originY:"center",scaleX:c,scaleY:c,...e};i.set({...f}),oh(i),ge.add(i),ge.setActiveObject(i),ge.renderAll()},{crossOrigin:"anonymous"})}function F1(t,e={}){ut.fabric.loadSVGFromURL(t,(n,i)=>{const r=ut.fabric.util.groupSVGElements(n,i),o=ge.getWidth(),h=ge.getHeight(),a=ge.getZoom(),s=n.length>1?"colors":"color",c={left:o/a/2,top:h/a/2,originX:"center",originY:"center",colorType:s,vector:!0,...e};r.set({...c}),oh(r),ge.add(r),ge.setActiveObject(r),ge.renderAll()})}function oh(t){t.clipPath=by}function L1(t,e={}){const n=ge.getWidth(),i=ge.getHeight(),r=ge.getZoom(),o=new ut.fabric.Text(t,{left:n/r/2,top:i/r/2,fontSize:50/r,originX:"center",originY:"center",strokeUniform:!0,centeredScaling:!0,perPixelTargetFind:!0,paintFirst:"stroke",...e});ge.add(o),ge.setActiveObject(o),ge.renderAll()}function N1(t){ge.setActiveObject(t),ge.renderAll()}function j1(t){ge.remove(t),Dl(),ge.renderAll()}function B1(){$1(["print","guide","snapH","snapW"]);const t=ge.toDataURL({format:"png",quality:.6,multiplier:1});return G1(["print","guide","snapH","snapW"]),t}function U1(t){ge.getActiveObject().rotate(t),ge.renderAll()}function Y1(t,e){t.set("text",e),ge.renderAll()}function W1(t,e,n=""){t.set("fontFamily",e),t.set("localFamily",n),ge.renderAll()}function z1(t,e){t.set("textAlign",e),ge.renderAll()}function H1(t,e){t.set("fontStyle",e),ge.renderAll()}function V1(t,e){const{underline:n,linethrough:i,overline:r}=e;n?t.set("underline",n):t.set("underline",!1),i?t.set("linethrough",i):t.set("linethrough",!1),r?t.set("overline",r):t.set("overline",!1),ge.renderAll()}function X1(t,e){const{stroke:n,strokeWidth:i}=e;n?t.set("stroke",n):t.set("stroke",null),i?t.set("strokeWidth",i):t.set("strokeWidth",0),ge.renderAll()}function jd(){ge.renderAll()}function $1(t){const e=ge.getObjects();for(const n of e)t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:"transparent",oriStroke:n.stroke}),n.type==="image"&&n.set({opacity:0})):n.set({opacity:0}))}function G1(t){ge.getObjects().forEach(n=>{t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:n.oriStroke}),n.type==="image"&&n.set({opacity:1})):n.set({opacity:1}))})}function Bd(){const t=$u.clientWidth,e=$u.clientHeight,n=t/e,i=al/ll;let r;n>i?r=e/ll:r=t/al,ge.setZoom(r),ge.setWidth(al*r),ge.setHeight(ll*r),ge.renderAll()}function q1(t,e,n,i,r){const o=new ut.fabric.Svg(i,null,{strokeWidth:1,stroke:"rgba(0,0,0,0.5)",strokeUniform:!0,scaleX:.5,scaleY:.5});o.set({left:e,top:n}).setCoords(),o.render(t)}function K1(t,e){sh={type:"path",points:[[t,e]]},Pi=!0}function J1(t,e){Pi&&sh.points.push([t,e])}function Z1(){Pi=!1;const t=new ut.fabric.Path(sh);t.objType="drawing",ge.add(t),ge.isDrawingMode=Pi,ge.renderAll()}function Q1(t){const e=ge.getWidth(),n=ge.getHeight(),i=e*.5,r=ge.getZoom(),o=new ut.fabric.Rect({type:"rectangle",left:e/r/2,top:n/r/2,originX:"center",originY:"center",objType:"shape",width:i,height:i,fill:t});ge.add(o),ge.renderAll()}function eC(t){const e=ge.getWidth(),n=ge.getHeight(),i=ge.getZoom(),r=e*.5,o=new ut.fabric.Ellipse({type:"ellipse",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",objType:"shape",rx:r/2,ry:r/2,fill:t});ge.add(o),ge.renderAll()}function tC(t){const e=ge.getWidth(),n=ge.getHeight(),i=ge.getZoom(),r=e*.5,o=new ut.fabric.Triangle({type:"triangle",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",width:r,height:r,objType:"shape",fill:t});ge.add(o),ge.renderAll()}function nC(t){Pi=t,ge.isDrawingMode=t,ge.renderAll()}function iC(){ge.discardActiveObject(),ge.renderAll(),Qi.set(null)}function rC(){const t=ge.getObjects().find(n=>n.objType==="snapW"),e=ge.getObjects().find(n=>n.objType==="snapH");t&&(Fo=t.left),e&&(Lo=e.top)}const vs=()=>{const e=ge.getObjects().filter(r=>!r.printIgnore),n=new ut.fabric.Canvas(null,{width:ge.width,height:ge.height});e.forEach(r=>{n.add(ut.fabric.util.object.clone(r))});const i=n.toSVG();return n.dispose(),i};function ah(t){const e=t-1;return e*e*e+1}function hr(t){return--t*t*t*t*t+1}function Ud(t,{delay:e=0,duration:n=400,easing:i=eh}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function dr(t,{delay:e=0,duration:n=400,easing:i=ah,x:r=0,y:o=0,opacity:h=0}={}){const a=getComputedStyle(t),s=+a.opacity,c=a.transform==="none"?"":a.transform,f=s*(1-h),[l,u]=Rd(r),[d,p]=Rd(o);return{delay:e,duration:n,easing:i,css:(m,g)=>`
			transform: ${c} translate(${(1-m)*l}${u}, ${(1-m)*d}${p});
			opacity: ${s-f*g}`}}function pr(t,{delay:e=0,duration:n=400,easing:i=ah,axis:r="y"}={}){const o=getComputedStyle(t),h=+o.opacity,a=r==="y"?"height":"width",s=parseFloat(o[a]),c=r==="y"?["top","bottom"]:["left","right"],f=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),l=parseFloat(o[`padding${f[0]}`]),u=parseFloat(o[`padding${f[1]}`]),d=parseFloat(o[`margin${f[0]}`]),p=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),g=parseFloat(o[`border${f[1]}Width`]);return{delay:e,duration:n,easing:i,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*h};${a}: ${v*s}px;padding-${c[0]}: ${v*l}px;padding-${c[1]}: ${v*u}px;margin-${c[0]}: ${v*d}px;margin-${c[1]}: ${v*p}px;border-${c[0]}-width: ${v*m}px;border-${c[1]}-width: ${v*g}px;`}}const Fr=xt(!1),Lr=xt(null),Nr=xt([]),Cy=xt(null);function sC(t=1){var i,r;const e=fi(Nr).length,n=fi(Nr)[e-1];return fi(Lr)||(i=n==null?void 0:n.callbacks)!=null&&i.onBeforeClose&&((r=n==null?void 0:n.callbacks)==null?void 0:r.onBeforeClose())===!1?!1:(fi(Fr)&&e>0&&Lr.set(!0),Fr.set(!1),Cy.set("pop"),oC(t),!0)}function Wn(){return sC(1)}function Fa(t,e,n){fi(Lr)||(Cy.set("push"),fi(Fr)&&fi(Nr).length&&Lr.set(!0),Fr.set(!1),n!=null&&n.replace?Nr.update(i=>[...i.slice(0,i.length-1),{component:t,props:e}]):Nr.update(i=>[...i,{component:t,props:e}]))}function oC(t=1){Nr.update(e=>e.slice(0,Math.max(0,e.length-t)))}function Yd(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}const aC=t=>({}),Wd=t=>({}),lC=t=>({}),zd=t=>({});function Hd(t){let e;const n=t[4].backdrop,i=da(n,t,t[3],zd);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&ga(i,n,r,r[3],e?pa(n,r[3],o,lC):ma(r[3]),zd)},i(r){e||(I(i,r),e=!0)},o(r){W(i,r),e=!1},d(r){i&&i.d(r)}}}function cC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[9].component;function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=gi(c,r[f]);return s!==void 0&&s&3&&(c=gi(c,Hr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&xl(a[9].props)]))),{props:c}}return o&&(e=un(o,h(t)),e.$on("introstart",t[7]),e.$on("outroend",t[8])),{c(){e&&he(e.$$.fragment),n=et()},m(a,s){e&&ue(e,a,s),U(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[9].component)){if(e){Oe();const c=e;W(c.$$.fragment,1,0,()=>{fe(c,1)}),Ee()}o?(e=un(o,h(a,s)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Hr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&xl(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&I(e.$$.fragment,a),i=!0)},o(a){e&&W(e.$$.fragment,a),i=!1},d(a){a&&j(n),e&&fe(e,a)}}}function uC(t){let e,n,i,r={ctx:t,current:null,token:null,hasCatch:!1,pending:dC,then:hC,catch:fC,value:12,blocks:[,,,]};return Hs(n=Xd(t[9].component),r),{c(){e=et(),r.block.c()},m(o,h){U(o,e,h),r.block.m(o,r.anchor=h),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(o,h){t=o,r.ctx=t,h&1&&n!==(n=Xd(t[9].component))&&Hs(n,r)||rh(r,t,h)},i(o){i||(I(r.block),i=!0)},o(o){for(let h=0;h<3;h+=1){const a=r.blocks[h];W(a)}i=!1},d(o){o&&j(e),r.block.d(o),r.token=null,r=null}}}function fC(t){return{c:ve,m:ve,p:ve,i:ve,o:ve,d:ve}}function hC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[12];function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=gi(c,r[f]);return s!==void 0&&s&3&&(c=gi(c,Hr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&xl(a[9].props)]))),{props:c}}return o&&(e=un(o,h(t)),e.$on("introstart",t[5]),e.$on("outroend",t[6])),{c(){e&&he(e.$$.fragment),n=V()},m(a,s){e&&ue(e,a,s),U(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[12])){if(e){Oe();const c=e;W(c.$$.fragment,1,0,()=>{fe(c,1)}),Ee()}o?(e=un(o,h(a,s)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Hr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&xl(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&I(e.$$.fragment,a),i=!0)},o(a){e&&W(e.$$.fragment,a),i=!1},d(a){a&&j(n),e&&fe(e,a)}}}function dC(t){let e,n;const i=t[4].loading,r=da(i,t,t[3],Wd);return{c(){r&&r.c(),e=V()},m(o,h){r&&r.m(o,h),U(o,e,h),n=!0},p(o,h){r&&r.p&&(!n||h&8)&&ga(r,i,o,o[3],n?pa(i,o[3],h,aC):ma(o[3]),Wd)},i(o){n||(I(r,o),n=!0)},o(o){W(r,o),n=!1},d(o){o&&j(e),r&&r.d(o)}}}function Vd(t,e){let n,i,r,o,h,a;const s=[uC,cC],c=[];function f(l,u){return u&1&&(i=null),i==null&&(i=!!mC(l[9].component)),i?0:1}return r=f(e,-1),o=c[r]=s[r](e),{key:t,first:null,c(){n=et(),o.c(),h=et(),this.first=n},m(l,u){U(l,n,u),c[r].m(l,u),U(l,h,u),a=!0},p(l,u){e=l;let d=r;r=f(e,u),r===d?c[r].p(e,u):(Oe(),W(c[d],1,1,()=>{c[d]=null}),Ee(),o=c[r],o?o.p(e,u):(o=c[r]=s[r](e),o.c()),I(o,1),o.m(h.parentNode,h))},i(l){a||(I(o),a=!0)},o(l){W(o),a=!1},d(l){l&&(j(n),j(h)),c[r].d(l)}}}function pC(t){let e=[],n=new Map,i,r,o=Le(t[0]);const h=a=>a[11];for(let a=0;a<o.length;a+=1){let s=Yd(t,o,a),c=h(s);n.set(c,e[a]=Vd(c,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=et()},m(a,s){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,s);U(a,i,s),r=!0},p(a,s){s&15&&(o=Le(a[0]),Oe(),e=_y(e,s,h,1,a,o,n,i.parentNode,vy,Vd,i,Yd),Ee())},i(a){if(!r){for(let s=0;s<o.length;s+=1)I(e[s]);r=!0}},o(a){for(let s=0;s<e.length;s+=1)W(e[s]);r=!1},d(a){a&&j(i);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function gC(t){let e,n,i=t[0].length>0&&Hd(t);const r=t[4].default,o=da(r,t,t[3],null),h=o||pC(t);return{c(){i&&i.c(),e=V(),h&&h.c()},m(a,s){i&&i.m(a,s),U(a,e,s),h&&h.m(a,s),n=!0},p(a,[s]){a[0].length>0?i?(i.p(a,s),s&1&&I(i,1)):(i=Hd(a),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee()),o?o.p&&(!n||s&8)&&ga(o,r,a,a[3],n?pa(r,a[3],s,null):ma(a[3]),null):h&&h.p&&(!n||s&15)&&h.p(a,n?s:-1)},i(a){n||(I(i),I(h,a),n=!0)},o(a){W(i),W(h,a),n=!1},d(a){a&&j(e),i&&i.d(a),h&&h.d(a)}}}function mC(t){return typeof t.prototype>"u"}async function Xd(t){return t().then(e=>e.default)}function vC(t,e,n){let i,r,o;Ne(t,Nr,u=>n(0,i=u)),Ne(t,Lr,u=>n(1,r=u)),Ne(t,Fr,u=>n(2,o=u));let{$$slots:h={},$$scope:a}=e;const s=()=>{ye(Fr,o=!0,o)},c=()=>{ye(Lr,r=!1,r)},f=()=>{ye(Fr,o=!0,o)},l=()=>{ye(Lr,r=!1,r)};return t.$$set=u=>{"$$scope"in u&&n(3,a=u.$$scope)},[i,r,o,a,h,s,c,f,l]}class _C extends Ge{constructor(e){super(),$e(this,e,vC,gC,Xe,{})}}var yC=Error,bC=EvalError,wC=RangeError,CC=ReferenceError,Sy=SyntaxError,_a=TypeError,SC=URIError,TC=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[n]=r;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,n);if(h.value!==r||h.enumerable!==!0)return!1}return!0},$d=typeof Symbol<"u"&&Symbol,kC=TC,OC=function(){return typeof $d!="function"||typeof Symbol!="function"||typeof $d("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:kC()},Xc={__proto__:null,foo:{}},EC=Object,xC=function(){return{__proto__:Xc}.foo===Xc.foo&&!(Xc instanceof EC)},DC="Function.prototype.bind called on incompatible ",AC=Object.prototype.toString,PC=Math.max,MC="[object Function]",Gd=function(e,n){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var o=0;o<n.length;o+=1)i[o+e.length]=n[o];return i},RC=function(e,n){for(var i=[],r=n||0,o=0;r<e.length;r+=1,o+=1)i[o]=e[r];return i},IC=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},FC=function(e){var n=this;if(typeof n!="function"||AC.apply(n)!==MC)throw new TypeError(DC+n);for(var i=RC(arguments,1),r,o=function(){if(this instanceof r){var f=n.apply(this,Gd(i,arguments));return Object(f)===f?f:this}return n.apply(e,Gd(i,arguments))},h=PC(0,n.length-i.length),a=[],s=0;s<h;s++)a[s]="$"+s;if(r=Function("binder","return function ("+IC(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var c=function(){};c.prototype=n.prototype,r.prototype=new c,c.prototype=null}return r},LC=FC,lh=Function.prototype.bind||LC,NC=Function.prototype.call,jC=Object.prototype.hasOwnProperty,BC=lh,UC=BC.call(NC,jC),qe,YC=yC,WC=bC,zC=wC,HC=CC,Vs=Sy,Rs=_a,VC=SC,Ty=Function,$c=function(t){try{return Ty('"use strict"; return ('+t+").constructor;")()}catch{}},jr=Object.getOwnPropertyDescriptor;if(jr)try{jr({},"")}catch{jr=null}var Gc=function(){throw new Rs},XC=jr?function(){try{return arguments.callee,Gc}catch{try{return jr(arguments,"callee").get}catch{return Gc}}}():Gc,ss=OC(),$C=xC(),$t=Object.getPrototypeOf||($C?function(t){return t.__proto__}:null),_s={},GC=typeof Uint8Array>"u"||!$t?qe:$t(Uint8Array),Br={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?qe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?qe:ArrayBuffer,"%ArrayIteratorPrototype%":ss&&$t?$t([][Symbol.iterator]()):qe,"%AsyncFromSyncIteratorPrototype%":qe,"%AsyncFunction%":_s,"%AsyncGenerator%":_s,"%AsyncGeneratorFunction%":_s,"%AsyncIteratorPrototype%":_s,"%Atomics%":typeof Atomics>"u"?qe:Atomics,"%BigInt%":typeof BigInt>"u"?qe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?qe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?qe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?qe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":YC,"%eval%":eval,"%EvalError%":WC,"%Float32Array%":typeof Float32Array>"u"?qe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?qe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?qe:FinalizationRegistry,"%Function%":Ty,"%GeneratorFunction%":_s,"%Int8Array%":typeof Int8Array>"u"?qe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?qe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?qe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ss&&$t?$t($t([][Symbol.iterator]())):qe,"%JSON%":typeof JSON=="object"?JSON:qe,"%Map%":typeof Map>"u"?qe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ss||!$t?qe:$t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?qe:Promise,"%Proxy%":typeof Proxy>"u"?qe:Proxy,"%RangeError%":zC,"%ReferenceError%":HC,"%Reflect%":typeof Reflect>"u"?qe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?qe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ss||!$t?qe:$t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?qe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ss&&$t?$t(""[Symbol.iterator]()):qe,"%Symbol%":ss?Symbol:qe,"%SyntaxError%":Vs,"%ThrowTypeError%":XC,"%TypedArray%":GC,"%TypeError%":Rs,"%Uint8Array%":typeof Uint8Array>"u"?qe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?qe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?qe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?qe:Uint32Array,"%URIError%":VC,"%WeakMap%":typeof WeakMap>"u"?qe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?qe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?qe:WeakSet};if($t)try{null.error}catch(t){var qC=$t($t(t));Br["%Error.prototype%"]=qC}var KC=function t(e){var n;if(e==="%AsyncFunction%")n=$c("async function () {}");else if(e==="%GeneratorFunction%")n=$c("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=$c("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&$t&&(n=$t(r.prototype))}return Br[e]=n,n},qd={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ya=lh,Al=UC,JC=ya.call(Function.call,Array.prototype.concat),ZC=ya.call(Function.apply,Array.prototype.splice),Kd=ya.call(Function.call,String.prototype.replace),Pl=ya.call(Function.call,String.prototype.slice),QC=ya.call(Function.call,RegExp.prototype.exec),eS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tS=/\\(\\)?/g,nS=function(e){var n=Pl(e,0,1),i=Pl(e,-1);if(n==="%"&&i!=="%")throw new Vs("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Vs("invalid intrinsic syntax, expected opening `%`");var r=[];return Kd(e,eS,function(o,h,a,s){r[r.length]=a?Kd(s,tS,"$1"):h||o}),r},iS=function(e,n){var i=e,r;if(Al(qd,i)&&(r=qd[i],i="%"+r[0]+"%"),Al(Br,i)){var o=Br[i];if(o===_s&&(o=KC(i)),typeof o>"u"&&!n)throw new Rs("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new Vs("intrinsic "+e+" does not exist!")},oo=function(e,n){if(typeof e!="string"||e.length===0)throw new Rs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Rs('"allowMissing" argument must be a boolean');if(QC(/^%?[^%]*%?$/,e)===null)throw new Vs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=nS(e),r=i.length>0?i[0]:"",o=iS("%"+r+"%",n),h=o.name,a=o.value,s=!1,c=o.alias;c&&(r=c[0],ZC(i,JC([0,1],c)));for(var f=1,l=!0;f<i.length;f+=1){var u=i[f],d=Pl(u,0,1),p=Pl(u,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Vs("property names with quotes must have matching quotes");if((u==="constructor"||!l)&&(s=!0),r+="."+u,h="%"+r+"%",Al(Br,h))a=Br[h];else if(a!=null){if(!(u in a)){if(!n)throw new Rs("base intrinsic for "+e+" exists, but the property is not available.");return}if(jr&&f+1>=i.length){var m=jr(a,u);l=!!m,l&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[u]}else l=Al(a,u),a=a[u];l&&!s&&(Br[h]=a)}}return a},ky={exports:{}},qc,Jd;function ch(){if(Jd)return qc;Jd=1;var t=oo,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return qc=e,qc}var rS=oo,cl=rS("%Object.getOwnPropertyDescriptor%",!0);if(cl)try{cl([],"length")}catch{cl=null}var Oy=cl,Zd=ch(),sS=Sy,os=_a,Qd=Oy,oS=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new os("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new os("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new os("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new os("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new os("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new os("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!Qd&&Qd(e,n);if(Zd)Zd(e,n,{configurable:h===null&&s?s.configurable:!h,enumerable:r===null&&s?s.enumerable:!r,value:i,writable:o===null&&s?s.writable:!o});else if(a||!r&&!o&&!h)e[n]=i;else throw new sS("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qu=ch(),Ey=function(){return!!qu};Ey.hasArrayLengthDefineBug=function(){if(!qu)return null;try{return qu([],"length",{value:1}).length!==1}catch{return!0}};var aS=Ey,lS=oo,ep=oS,cS=aS(),tp=Oy,np=_a,uS=lS("%Math.floor%"),fS=function(e,n){if(typeof e!="function")throw new np("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||uS(n)!==n)throw new np("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,o=!0;if("length"in e&&tp){var h=tp(e,"length");h&&!h.configurable&&(r=!1),h&&!h.writable&&(o=!1)}return(r||o||!i)&&(cS?ep(e,"length",n,!0,!0):ep(e,"length",n)),e};(function(t){var e=lh,n=oo,i=fS,r=_a,o=n("%Function.prototype.apply%"),h=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(h,o),s=ch(),c=n("%Math.max%");t.exports=function(u){if(typeof u!="function")throw new r("a function is required");var d=a(e,h,arguments);return i(d,1+c(0,u.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(ky);var hS=ky.exports,xy=oo,Dy=hS,dS=Dy(xy("String.prototype.indexOf")),pS=function(e,n){var i=xy(e,!!n);return typeof i=="function"&&dS(e,".prototype.")>-1?Dy(i):i},uh=typeof Map=="function"&&Map.prototype,Kc=Object.getOwnPropertyDescriptor&&uh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ml=uh&&Kc&&typeof Kc.get=="function"?Kc.get:null,ip=uh&&Map.prototype.forEach,fh=typeof Set=="function"&&Set.prototype,Jc=Object.getOwnPropertyDescriptor&&fh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Rl=fh&&Jc&&typeof Jc.get=="function"?Jc.get:null,rp=fh&&Set.prototype.forEach,gS=typeof WeakMap=="function"&&WeakMap.prototype,No=gS?WeakMap.prototype.has:null,mS=typeof WeakSet=="function"&&WeakSet.prototype,jo=mS?WeakSet.prototype.has:null,vS=typeof WeakRef=="function"&&WeakRef.prototype,sp=vS?WeakRef.prototype.deref:null,_S=Boolean.prototype.valueOf,yS=Object.prototype.toString,bS=Function.prototype.toString,wS=String.prototype.match,hh=String.prototype.slice,er=String.prototype.replace,CS=String.prototype.toUpperCase,op=String.prototype.toLowerCase,Ay=RegExp.prototype.test,ap=Array.prototype.concat,ai=Array.prototype.join,SS=Array.prototype.slice,lp=Math.floor,Ku=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Zc=Object.getOwnPropertySymbols,Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Xs||!0)?Symbol.toStringTag:null,Py=Object.prototype.propertyIsEnumerable,cp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function up(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ay.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-lp(-t):lp(t);if(i!==t){var r=String(i),o=hh.call(e,r.length+1);return er.call(r,n,"$&_")+"."+er.call(er.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return er.call(e,n,"$&_")}var Zu=Ir,fp=Zu.custom,hp=Ry(fp)?fp:null,TS=function t(e,n,i,r){var o=n||{};if(Gi(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Gi(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var h=Gi(o,"customInspect")?o.customInspect:!0;if(typeof h!="boolean"&&h!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Gi(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Gi(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Fy(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return a?up(e,s):s}if(typeof e=="bigint"){var c=String(e)+"n";return a?up(e,c):c}var f=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return Qu(e)?"[Array]":"[Object]";var l=WS(o,i);if(typeof r>"u")r=[];else if(Iy(r,e)>=0)return"[Circular]";function u(te,q,N){if(q&&(r=SS.call(r),r.push(q)),N){var B={depth:o.depth};return Gi(o,"quoteStyle")&&(B.quoteStyle=o.quoteStyle),t(te,B,i+1,r)}return t(te,o,i+1,r)}if(typeof e=="function"&&!dp(e)){var d=RS(e),p=La(e,u);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+ai.call(p,", ")+" }":"")}if(Ry(e)){var m=Xs?er.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ju.call(e);return typeof e=="object"&&!Xs?bo(m):m}if(BS(e)){for(var g="<"+op.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+My(kS(v[_].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+op.call(String(e.nodeName))+">",g}if(Qu(e)){if(e.length===0)return"[]";var b=La(e,u);return l&&!YS(b)?"["+ef(b,l)+"]":"[ "+ai.call(b,", ")+" ]"}if(ES(e)){var y=La(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!Py.call(e,"cause")?"{ ["+String(e)+"] "+ai.call(ap.call("[cause]: "+u(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ai.call(y,", ")+" }"}if(typeof e=="object"&&h){if(hp&&typeof e[hp]=="function"&&Zu)return Zu(e,{depth:f-i});if(h!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(IS(e)){var C=[];return ip&&ip.call(e,function(te,q){C.push(u(q,e,!0)+" => "+u(te,e))}),pp("Map",Ml.call(e),C,l)}if(NS(e)){var w=[];return rp&&rp.call(e,function(te){w.push(u(te,e))}),pp("Set",Rl.call(e),w,l)}if(FS(e))return Qc("WeakMap");if(jS(e))return Qc("WeakSet");if(LS(e))return Qc("WeakRef");if(DS(e))return bo(u(Number(e)));if(PS(e))return bo(u(Ku.call(e)));if(AS(e))return bo(_S.call(e));if(xS(e))return bo(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Re)return"{ [object globalThis] }";if(!OS(e)&&!dp(e)){var T=La(e,u),O=cp?cp(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",L=!O&&fn&&Object(e)===e&&fn in e?hh.call(mr(e),8,-1):A?"Object":"",G=O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Y=G+(L||A?"["+ai.call(ap.call([],L||[],A||[]),": ")+"] ":"");return T.length===0?Y+"{}":l?Y+"{"+ef(T,l)+"}":Y+"{ "+ai.call(T,", ")+" }"}return String(e)};function My(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function kS(t){return er.call(String(t),/"/g,"&quot;")}function Qu(t){return mr(t)==="[object Array]"&&(!fn||!(typeof t=="object"&&fn in t))}function OS(t){return mr(t)==="[object Date]"&&(!fn||!(typeof t=="object"&&fn in t))}function dp(t){return mr(t)==="[object RegExp]"&&(!fn||!(typeof t=="object"&&fn in t))}function ES(t){return mr(t)==="[object Error]"&&(!fn||!(typeof t=="object"&&fn in t))}function xS(t){return mr(t)==="[object String]"&&(!fn||!(typeof t=="object"&&fn in t))}function DS(t){return mr(t)==="[object Number]"&&(!fn||!(typeof t=="object"&&fn in t))}function AS(t){return mr(t)==="[object Boolean]"&&(!fn||!(typeof t=="object"&&fn in t))}function Ry(t){if(Xs)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Ju)return!1;try{return Ju.call(t),!0}catch{}return!1}function PS(t){if(!t||typeof t!="object"||!Ku)return!1;try{return Ku.call(t),!0}catch{}return!1}var MS=Object.prototype.hasOwnProperty||function(t){return t in this};function Gi(t,e){return MS.call(t,e)}function mr(t){return yS.call(t)}function RS(t){if(t.name)return t.name;var e=wS.call(bS.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Iy(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function IS(t){if(!Ml||!t||typeof t!="object")return!1;try{Ml.call(t);try{Rl.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function FS(t){if(!No||!t||typeof t!="object")return!1;try{No.call(t,No);try{jo.call(t,jo)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function LS(t){if(!sp||!t||typeof t!="object")return!1;try{return sp.call(t),!0}catch{}return!1}function NS(t){if(!Rl||!t||typeof t!="object")return!1;try{Rl.call(t);try{Ml.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function jS(t){if(!jo||!t||typeof t!="object")return!1;try{jo.call(t,jo);try{No.call(t,No)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function BS(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Fy(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Fy(hh.call(t,0,e.maxStringLength),e)+i}var r=er.call(er.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,US);return My(r,"single",e)}function US(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+CS.call(e.toString(16))}function bo(t){return"Object("+t+")"}function Qc(t){return t+" { ? }"}function pp(t,e,n,i){var r=i?ef(n,i):ai.call(n,", ");return t+" ("+e+") {"+r+"}"}function YS(t){for(var e=0;e<t.length;e++)if(Iy(t[e],`
`)>=0)return!1;return!0}function WS(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=ai.call(Array(t.indent+1)," ");else return null;return{base:n,prev:ai.call(Array(e+1),n)}}function ef(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+ai.call(t,","+n)+`
`+e.prev}function La(t,e){var n=Qu(t),i=[];if(n){i.length=t.length;for(var r=0;r<t.length;r++)i[r]=Gi(t,r)?e(t[r],t):""}var o=typeof Zc=="function"?Zc(t):[],h;if(Xs){h={};for(var a=0;a<o.length;a++)h["$"+o[a]]=o[a]}for(var s in t)Gi(t,s)&&(n&&String(Number(s))===s&&s<t.length||Xs&&h["$"+s]instanceof Symbol||(Ay.call(/[^\w$]/,s)?i.push(e(s,t)+": "+e(t[s],t)):i.push(s+": "+e(t[s],t))));if(typeof Zc=="function")for(var c=0;c<o.length;c++)Py.call(t,o[c])&&i.push("["+e(o[c])+"]: "+e(t[o[c]],t));return i}var Ly=oo,ao=pS,zS=TS,HS=_a,Na=Ly("%WeakMap%",!0),ja=Ly("%Map%",!0),VS=ao("WeakMap.prototype.get",!0),XS=ao("WeakMap.prototype.set",!0),$S=ao("WeakMap.prototype.has",!0),GS=ao("Map.prototype.get",!0),qS=ao("Map.prototype.set",!0),KS=ao("Map.prototype.has",!0),dh=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},JS=function(t,e){var n=dh(t,e);return n&&n.value},ZS=function(t,e,n){var i=dh(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},QS=function(t,e){return!!dh(t,e)},eT=function(){var e,n,i,r={assert:function(o){if(!r.has(o))throw new HS("Side channel does not contain "+zS(o))},get:function(o){if(Na&&o&&(typeof o=="object"||typeof o=="function")){if(e)return VS(e,o)}else if(ja){if(n)return GS(n,o)}else if(i)return JS(i,o)},has:function(o){if(Na&&o&&(typeof o=="object"||typeof o=="function")){if(e)return $S(e,o)}else if(ja){if(n)return KS(n,o)}else if(i)return QS(i,o);return!1},set:function(o,h){Na&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Na),XS(e,o,h)):ja?(n||(n=new ja),qS(n,o,h)):(i||(i={key:{},next:null}),ZS(i,o,h))}};return r},tT=String.prototype.replace,nT=/%20/g,eu={RFC1738:"RFC1738",RFC3986:"RFC3986"},ph={default:eu.RFC3986,formatters:{RFC1738:function(t){return tT.call(t,nT,"+")},RFC3986:function(t){return String(t)}},RFC1738:eu.RFC1738,RFC3986:eu.RFC3986},iT=ph,tu=Object.prototype.hasOwnProperty,Dr=Array.isArray,ri=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),rT=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Dr(i)){for(var r=[],o=0;o<i.length;++o)typeof i[o]<"u"&&r.push(i[o]);n.obj[n.prop]=r}}},Ny=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},sT=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Dr(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!tu.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var r=e;return Dr(e)&&!Dr(n)&&(r=Ny(e,i)),Dr(e)&&Dr(n)?(n.forEach(function(o,h){if(tu.call(e,h)){var a=e[h];a&&typeof a=="object"&&o&&typeof o=="object"?e[h]=t(a,o,i):e.push(o)}else e[h]=o}),e):Object.keys(n).reduce(function(o,h){var a=n[h];return tu.call(o,h)?o[h]=t(o[h],a,i):o[h]=a,o},r)},oT=function(e,n){return Object.keys(n).reduce(function(i,r){return i[r]=n[r],i},e)},aT=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},lT=function(e,n,i,r,o){if(e.length===0)return e;var h=e;if(typeof e=="symbol"?h=Symbol.prototype.toString.call(e):typeof e!="string"&&(h=String(e)),i==="iso-8859-1")return escape(h).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",s=0;s<h.length;++s){var c=h.charCodeAt(s);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===iT.RFC1738&&(c===40||c===41)){a+=h.charAt(s);continue}if(c<128){a=a+ri[c];continue}if(c<2048){a=a+(ri[192|c>>6]+ri[128|c&63]);continue}if(c<55296||c>=57344){a=a+(ri[224|c>>12]+ri[128|c>>6&63]+ri[128|c&63]);continue}s+=1,c=65536+((c&1023)<<10|h.charCodeAt(s)&1023),a+=ri[240|c>>18]+ri[128|c>>12&63]+ri[128|c>>6&63]+ri[128|c&63]}return a},cT=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],r=0;r<n.length;++r)for(var o=n[r],h=o.obj[o.prop],a=Object.keys(h),s=0;s<a.length;++s){var c=a[s],f=h[c];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(n.push({obj:h,prop:c}),i.push(f))}return rT(n),e},uT=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},fT=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},hT=function(e,n){return[].concat(e,n)},dT=function(e,n){if(Dr(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(n(e[r]));return i}return n(e)},jy={arrayToObject:Ny,assign:oT,combine:hT,compact:cT,decode:aT,encode:lT,isBuffer:fT,isRegExp:uT,maybeMap:dT,merge:sT},By=eT,ul=jy,Bo=ph,pT=Object.prototype.hasOwnProperty,Uy={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},oi=Array.isArray,gT=Array.prototype.push,Yy=function(t,e){gT.apply(t,oi(e)?e:[e])},mT=Date.prototype.toISOString,gp=Bo.default,zt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ul.encode,encodeValuesOnly:!1,format:gp,formatter:Bo.formatters[gp],indices:!1,serializeDate:function(e){return mT.call(e)},skipNulls:!1,strictNullHandling:!1},vT=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},nu={},_T=function t(e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_){for(var b=e,y=_,C=0,w=!1;(y=y.get(nu))!==void 0&&!w;){var T=y.get(e);if(C+=1,typeof T<"u"){if(T===C)throw new RangeError("Cyclic object value");w=!0}typeof y.get(nu)>"u"&&(C=0)}if(typeof f=="function"?b=f(n,b):b instanceof Date?b=d(b):i==="comma"&&oi(b)&&(b=ul.maybeMap(b,function(P){return P instanceof Date?d(P):P})),b===null){if(h)return c&&!g?c(n,zt.encoder,v,"key",p):n;b=""}if(vT(b)||ul.isBuffer(b)){if(c){var O=g?n:c(n,zt.encoder,v,"key",p);return[m(O)+"="+m(c(b,zt.encoder,v,"value",p))]}return[m(n)+"="+m(String(b))]}var A=[];if(typeof b>"u")return A;var L;if(i==="comma"&&oi(b))g&&c&&(b=ul.maybeMap(b,c)),L=[{value:b.length>0?b.join(",")||null:void 0}];else if(oi(f))L=f;else{var G=Object.keys(b);L=l?G.sort(l):G}var Y=s?n.replace(/\./g,"%2E"):n,te=r&&oi(b)&&b.length===1?Y+"[]":Y;if(o&&oi(b)&&b.length===0)return te+"[]";for(var q=0;q<L.length;++q){var N=L[q],B=typeof N=="object"&&typeof N.value<"u"?N.value:b[N];if(!(a&&B===null)){var Q=u&&s?N.replace(/\./g,"%2E"):N,ee=oi(b)?typeof i=="function"?i(te,Q):te:te+(u?"."+Q:"["+Q+"]");_.set(e,C);var x=By();x.set(nu,_),Yy(A,t(B,ee,i,r,o,h,a,s,i==="comma"&&g&&oi(b)?null:c,f,l,u,d,p,m,g,v,x))}}return A},yT=function(e){if(!e)return zt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||zt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Bo.default;if(typeof e.format<"u"){if(!pT.call(Bo.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Bo.formatters[i],o=zt.filter;(typeof e.filter=="function"||oi(e.filter))&&(o=e.filter);var h;if(e.arrayFormat in Uy?h=e.arrayFormat:"indices"in e?h=e.indices?"indices":"repeat":h=zt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:zt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:zt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:zt.allowEmptyArrays,arrayFormat:h,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:zt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?zt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:zt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:zt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:zt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:zt.encodeValuesOnly,filter:o,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:zt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:zt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:zt.strictNullHandling}},bT=function(t,e){var n=t,i=yT(e),r,o;typeof i.filter=="function"?(o=i.filter,n=o("",n)):oi(i.filter)&&(o=i.filter,r=o);var h=[];if(typeof n!="object"||n===null)return"";var a=Uy[i.arrayFormat],s=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var c=By(),f=0;f<r.length;++f){var l=r[f];i.skipNulls&&n[l]===null||Yy(h,_T(n[l],l,a,s,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var u=h.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""},$s=jy,tf=Object.prototype.hasOwnProperty,wT=Array.isArray,Mt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:$s.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},CT=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Wy=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},ST="utf8=%26%2310003%3B",TT="utf8=%E2%9C%93",kT=function(e,n){var i={__proto__:null},r=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=n.parameterLimit===1/0?void 0:n.parameterLimit,h=r.split(n.delimiter,o),a=-1,s,c=n.charset;if(n.charsetSentinel)for(s=0;s<h.length;++s)h[s].indexOf("utf8=")===0&&(h[s]===TT?c="utf-8":h[s]===ST&&(c="iso-8859-1"),a=s,s=h.length);for(s=0;s<h.length;++s)if(s!==a){var f=h[s],l=f.indexOf("]="),u=l===-1?f.indexOf("="):l+1,d,p;u===-1?(d=n.decoder(f,Mt.decoder,c,"key"),p=n.strictNullHandling?null:""):(d=n.decoder(f.slice(0,u),Mt.decoder,c,"key"),p=$s.maybeMap(Wy(f.slice(u+1),n),function(g){return n.decoder(g,Mt.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=CT(p)),f.indexOf("[]=")>-1&&(p=wT(p)?[p]:p);var m=tf.call(i,d);m&&n.duplicates==="combine"?i[d]=$s.combine(i[d],p):(!m||n.duplicates==="last")&&(i[d]=p)}return i},OT=function(t,e,n,i){for(var r=i?e:Wy(e,n),o=t.length-1;o>=0;--o){var h,a=t[o];if(a==="[]"&&n.parseArrays)h=n.allowEmptyArrays&&r===""?[]:[].concat(r);else{h=n.plainObjects?Object.create(null):{};var s=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=n.decodeDotInKeys?s.replace(/%2E/g,"."):s,f=parseInt(c,10);!n.parseArrays&&c===""?h={0:r}:!isNaN(f)&&a!==c&&String(f)===c&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(h=[],h[f]=r):c!=="__proto__"&&(h[c]=r)}r=h}return r},ET=function(e,n,i,r){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,h=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=i.depth>0&&h.exec(o),c=s?o.slice(0,s.index):o,f=[];if(c){if(!i.plainObjects&&tf.call(Object.prototype,c)&&!i.allowPrototypes)return;f.push(c)}for(var l=0;i.depth>0&&(s=a.exec(o))!==null&&l<i.depth;){if(l+=1,!i.plainObjects&&tf.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+o.slice(s.index)+"]"),OT(f,n,i,r)}},xT=function(e){if(!e)return Mt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Mt.charset:e.charset,i=typeof e.duplicates>"u"?Mt.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Mt.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Mt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Mt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Mt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Mt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Mt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Mt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Mt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Mt.decoder,delimiter:typeof e.delimiter=="string"||$s.isRegExp(e.delimiter)?e.delimiter:Mt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Mt.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Mt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Mt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Mt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Mt.strictNullHandling}},DT=function(t,e){var n=xT(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?kT(t,n):t,r=n.plainObjects?Object.create(null):{},o=Object.keys(i),h=0;h<o.length;++h){var a=o[h],s=ET(a,i[a],n,typeof t=="string");r=$s.merge(r,s,n)}return n.allowSparse===!0?r:$s.compact(r)},AT=bT,PT=DT,MT=ph,RT={formats:MT,parse:PT,stringify:AT};const gh=k1(RT);let Cn="https://podiz-strapi-uieqvbv3ya-du.a.run.app";async function IT(t){try{return{data:await(await fetch(`${Cn}/publishes/${t}`)).json()}}catch(e){return{error:e}}}async function FT(t){try{return{data:await(await fetch(`${Cn}/shops/${t}`)).json()}}catch(e){return{error:e}}}async function LT(t,e={perPage:24,current:0,keyword:"",categories:[]}){try{const n=[];if(e.keyword&&n.push({_or:[{name_contains:e.keyword},{tag_contains:e.keyword}]}),n.push({shop:t}),e.categories.length){const s=[];e.categories.forEach(c=>{s.push({categories_contains:c})}),n.push({_or:{...s}})}const i=gh.stringify({_where:{...n},_start:e.perPage*e.current,_sort:"created_at:DESC",_limit:e.perPage}),r=await fetch(`${Cn}/cliparts?${i}`),o=await fetch(`${Cn}/cliparts/count?${i}`),h=await r.json(),a=await o.json();return{data:h,count:a}}catch(n){return{error:n}}}const NT=async t=>{try{return{data:await(await fetch(`${Cn}/fonts?shop=${t}`)).json()}}catch(e){return{error:e}}},jT=async t=>{try{const n=await(await fetch(`${Cn}/shop-default-fonts?shop=${t}`)).json();return n.length||n.push({shop:t,defaultFonts:[]}),{data:n[0]}}catch(e){return{error:`기본폰트 조회가 실패하였습니다. ${e}`}}},zy=async t=>{try{return{data:await(await fetch(`${Cn}/editor-data/${t}`)).json()}}catch(e){return{error:e}}},BT=async t=>{try{const e=t.id?"PUT":"POST",n=t.id?`/${t.id}`:"";return{data:await(await fetch(`${Cn}/editor-data${n}`,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}}catch{return{error:"데이터 입력 실패."}}},UT=async(t,e=null)=>{try{return{data:await(e?await fetch(`${Cn}/colors?shop=${t}&colorGroup=${e}`):await fetch(`${Cn}/colors?shop=${t}`)).json()}}catch(n){return{error:n}}},YT=async t=>{try{return{data:await(await fetch(`${Cn}/composites?print=${t}`)).json(),error:null}}catch(e){return{error:e}}},WT=async({provider:t,productno:e,shopid:n})=>{try{const i=[];t?i.push({selectApi:t}):i.push({selectApi_null:!0}),e?i.push({productNo:e}):i.push({productNo_null:!0}),n&&i.push({shop:n}),console.log({where:i});const r=gh.stringify({_where:{...i},_sort:"created_at:DESC"});return{data:await(await fetch(`${Cn}/editor-product-links?${r}`)).json(),error:null}}catch(i){return{error:i}}};async function zT(t,e,n=null,i={perPage:24,current:0,keyword:""}){try{let r=[{cafe24MallId:t},{cafe24MemberId:e}];if(console.log({selectedPeriod:n}),n){const f=new Date,l=24*60*60*1e3,u=new Date(f.getTime()-n*30*l);r.push({created_at_gte:u.toISOString()})}console.log({where:r});const o=gh.stringify({_where:r,_start:i.perPage*i.current,_sort:"created_at:DESC",_limit:i.perPage}),h=await fetch(`${Cn}/editor-data?${o}`),a=await fetch(`${Cn}/editor-data/count?${o}`),s=await h.json(),c=await a.json();return{data:s,count:c}}catch(r){return console.log({error:r}),{error:r}}}const lo=xt(null),Uo=xt([]),iu=xt([]),je=xt({}),Yo=xt([]),li=xt([]),Po=xt(0),Ko=xt(0),Ti=xt({options:null,product:null}),Jt=xt(null),Il=xt(null),mp=xt(null);async function HT(t){const{data:e,error:n}=await FT(t);if(n){console.error(n);return}lo.set(e)}const Wo=/^[a-z0-9]+(-[a-z0-9]+)*$/,rc=(t,e,n,i="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),s=r.pop(),c={provider:r.length>0?r[0]:i,prefix:s,name:a};return e&&!fl(c)?null:c}const o=r[0],h=o.split("-");if(h.length>1){const a={provider:i,prefix:h.shift(),name:h.join("-")};return e&&!fl(a)?null:a}if(n&&i===""){const a={provider:i,prefix:"",name:o};return e&&!fl(a,n)?null:a}return null},fl=(t,e)=>t?!!((t.provider===""||t.provider.match(Wo))&&(e&&t.prefix===""||t.prefix.match(Wo))&&t.name.match(Wo)):!1,Hy=Object.freeze({left:0,top:0,width:16,height:16}),Fl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),sc=Object.freeze({...Hy,...Fl}),nf=Object.freeze({...sc,body:"",hidden:!1});function VT(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(n.rotate=i),n}function vp(t,e){const n=VT(t,e);for(const i in nf)i in Fl?i in t&&!(i in n)&&(n[i]=Fl[i]):i in e?n[i]=e[i]:i in t&&(n[i]=t[i]);return n}function XT(t,e){const n=t.icons,i=t.aliases||Object.create(null),r=Object.create(null);function o(h){if(n[h])return r[h]=[];if(!(h in r)){r[h]=null;const a=i[h]&&i[h].parent,s=a&&o(a);s&&(r[h]=[a].concat(s))}return r[h]}return(e||Object.keys(n).concat(Object.keys(i))).forEach(o),r}function $T(t,e,n){const i=t.icons,r=t.aliases||Object.create(null);let o={};function h(a){o=vp(i[a]||r[a],o)}return h(e),n.forEach(h),vp(t,o)}function Vy(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(r=>{e(r,null),n.push(r)});const i=XT(t);for(const r in i){const o=i[r];o&&(e(r,$T(t,r,o)),n.push(r))}return n}const GT={provider:"",aliases:{},not_found:{},...Hy};function ru(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function Xy(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!ru(t,GT))return null;const n=e.icons;for(const r in n){const o=n[r];if(!r.match(Wo)||typeof o.body!="string"||!ru(o,nf))return null}const i=e.aliases||Object.create(null);for(const r in i){const o=i[r],h=o.parent;if(!r.match(Wo)||typeof h!="string"||!n[h]&&!i[h]||!ru(o,nf))return null}return e}const _p=Object.create(null);function qT(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Vr(t,e){const n=_p[t]||(_p[t]=Object.create(null));return n[e]||(n[e]=qT(t,e))}function mh(t,e){return Xy(e)?Vy(e,(n,i)=>{i?t.icons[n]=i:t.missing.add(n)}):[]}function KT(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let Jo=!1;function $y(t){return typeof t=="boolean"&&(Jo=t),Jo}function JT(t){const e=typeof t=="string"?rc(t,!0,Jo):t;if(e){const n=Vr(e.provider,e.prefix),i=e.name;return n.icons[i]||(n.missing.has(i)?null:void 0)}}function ZT(t,e){const n=rc(t,!0,Jo);if(!n)return!1;const i=Vr(n.provider,n.prefix);return KT(i,n.name,e)}function QT(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Jo&&!e&&!t.prefix){let r=!1;return Xy(t)&&(t.prefix="",Vy(t,(o,h)=>{h&&ZT(o,h)&&(r=!0)})),r}const n=t.prefix;if(!fl({provider:e,prefix:n,name:"a"}))return!1;const i=Vr(e,n);return!!mh(i,t)}const Gy=Object.freeze({width:null,height:null}),qy=Object.freeze({...Gy,...Fl}),ek=/(-?[0-9.]*[0-9]+[0-9.]*)/g,tk=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function yp(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const i=t.split(ek);if(i===null||!i.length)return t;const r=[];let o=i.shift(),h=tk.test(o);for(;;){if(h){const a=parseFloat(o);isNaN(a)?r.push(o):r.push(Math.ceil(a*e*n)/n)}else r.push(o);if(o=i.shift(),o===void 0)return r.join("");h=!h}}function nk(t,e="defs"){let n="";const i=t.indexOf("<"+e);for(;i>=0;){const r=t.indexOf(">",i),o=t.indexOf("</"+e);if(r===-1||o===-1)break;const h=t.indexOf(">",o);if(h===-1)break;n+=t.slice(r+1,o).trim(),t=t.slice(0,i).trim()+t.slice(h+1)}return{defs:n,content:t}}function ik(t,e){return t?"<defs>"+t+"</defs>"+e:e}function rk(t,e,n){const i=nk(t);return ik(i.defs,e+i.content+n)}const sk=t=>t==="unset"||t==="undefined"||t==="none";function ok(t,e){const n={...sc,...t},i={...qy,...e},r={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,i].forEach(m=>{const g=[],v=m.hFlip,_=m.vFlip;let b=m.rotate;v?_?b+=2:(g.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),g.push("scale(-1 1)"),r.top=r.left=0):_&&(g.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),g.push("scale(1 -1)"),r.top=r.left=0);let y;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:y=r.height/2+r.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:y=r.width/2+r.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}b%2===1&&(r.left!==r.top&&(y=r.left,r.left=r.top,r.top=y),r.width!==r.height&&(y=r.width,r.width=r.height,r.height=y)),g.length&&(o=rk(o,'<g transform="'+g.join(" ")+'">',"</g>"))});const h=i.width,a=i.height,s=r.width,c=r.height;let f,l;h===null?(l=a===null?"1em":a==="auto"?c:a,f=yp(l,s/c)):(f=h==="auto"?s:h,l=a===null?yp(f,c/s):a==="auto"?c:a);const u={},d=(m,g)=>{sk(g)||(u[m]=g.toString())};d("width",f),d("height",l);const p=[r.left,r.top,s,c];return u.viewBox=p.join(" "),{attributes:u,viewBox:p,body:o}}const ak=/\sid="(\S+)"/g,lk="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let ck=0;function uk(t,e=lk){const n=[];let i;for(;i=ak.exec(t);)n.push(i[1]);if(!n.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const h=typeof e=="function"?e(o):e+(ck++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+h+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const rf=Object.create(null);function fk(t,e){rf[t]=e}function sf(t){return rf[t]||rf[""]}function vh(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const _h=Object.create(null),wo=["https://api.simplesvg.com","https://api.unisvg.com"],hl=[];for(;wo.length>0;)wo.length===1||Math.random()>.5?hl.push(wo.shift()):hl.push(wo.pop());_h[""]=vh({resources:["https://api.iconify.design"].concat(hl)});function hk(t,e){const n=vh(e);return n===null?!1:(_h[t]=n,!0)}function yh(t){return _h[t]}const dk=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let bp=dk();function pk(t,e){const n=yh(t);if(!n)return 0;let i;if(!n.maxURL)i=0;else{let r=0;n.resources.forEach(h=>{r=Math.max(r,h.length)});const o=e+".json?icons=";i=n.maxURL-r-n.path.length-o.length}return i}function gk(t){return t===404}const mk=(t,e,n)=>{const i=[],r=pk(t,e),o="icons";let h={type:o,provider:t,prefix:e,icons:[]},a=0;return n.forEach((s,c)=>{a+=s.length+1,a>=r&&c>0&&(i.push(h),h={type:o,provider:t,prefix:e,icons:[]},a=s.length),h.icons.push(s)}),i.push(h),i};function vk(t){if(typeof t=="string"){const e=yh(t);if(e)return e.path}return"/"}const _k=(t,e,n)=>{if(!bp){n("abort",424);return}let i=vk(e.provider);switch(e.type){case"icons":{const o=e.prefix,a=e.icons.join(","),s=new URLSearchParams({icons:a});i+=o+".json?"+s.toString();break}case"custom":{const o=e.uri;i+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let r=503;bp(t+i).then(o=>{const h=o.status;if(h!==200){setTimeout(()=>{n(gk(h)?"abort":"next",h)});return}return r=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",r)});return}setTimeout(()=>{n("success",o)})}).catch(()=>{n("next",r)})},yk={prepare:mk,send:_k};function bk(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((r,o)=>r.provider!==o.provider?r.provider.localeCompare(o.provider):r.prefix!==o.prefix?r.prefix.localeCompare(o.prefix):r.name.localeCompare(o.name));let i={provider:"",prefix:"",name:""};return t.forEach(r=>{if(i.name===r.name&&i.prefix===r.prefix&&i.provider===r.provider)return;i=r;const o=r.provider,h=r.prefix,a=r.name,s=n[o]||(n[o]=Object.create(null)),c=s[h]||(s[h]=Vr(o,h));let f;a in c.icons?f=e.loaded:h===""||c.missing.has(a)?f=e.missing:f=e.pending;const l={provider:o,prefix:h,name:a};f.push(l)}),e}function Ky(t,e){t.forEach(n=>{const i=n.loaderCallbacks;i&&(n.loaderCallbacks=i.filter(r=>r.id!==e))})}function wk(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const i=t.provider,r=t.prefix;e.forEach(o=>{const h=o.icons,a=h.pending.length;h.pending=h.pending.filter(s=>{if(s.prefix!==r)return!0;const c=s.name;if(t.icons[c])h.loaded.push({provider:i,prefix:r,name:c});else if(t.missing.has(c))h.missing.push({provider:i,prefix:r,name:c});else return n=!0,!0;return!1}),h.pending.length!==a&&(n||Ky([t],o.id),o.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),o.abort))})}))}let Ck=0;function Sk(t,e,n){const i=Ck++,r=Ky.bind(null,n,i);if(!e.pending.length)return r;const o={id:i,icons:e,callback:t,abort:r};return n.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(o)}),r}function Tk(t,e=!0,n=!1){const i=[];return t.forEach(r=>{const o=typeof r=="string"?rc(r,e,n):r;o&&i.push(o)}),i}var kk={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Ok(t,e,n,i){const r=t.resources.length,o=t.random?Math.floor(Math.random()*r):t.index;let h;if(t.random){let w=t.resources.slice(0);for(h=[];w.length>1;){const T=Math.floor(Math.random()*w.length);h.push(w[T]),w=w.slice(0,T).concat(w.slice(T+1))}h=h.concat(w)}else h=t.resources.slice(o).concat(t.resources.slice(0,o));const a=Date.now();let s="pending",c=0,f,l=null,u=[],d=[];typeof i=="function"&&d.push(i);function p(){l&&(clearTimeout(l),l=null)}function m(){s==="pending"&&(s="aborted"),p(),u.forEach(w=>{w.status==="pending"&&(w.status="aborted")}),u=[]}function g(w,T){T&&(d=[]),typeof w=="function"&&d.push(w)}function v(){return{startTime:a,payload:e,status:s,queriesSent:c,queriesPending:u.length,subscribe:g,abort:m}}function _(){s="failed",d.forEach(w=>{w(void 0,f)})}function b(){u.forEach(w=>{w.status==="pending"&&(w.status="aborted")}),u=[]}function y(w,T,O){const A=T!=="success";switch(u=u.filter(L=>L!==w),s){case"pending":break;case"failed":if(A||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){f=O,_();return}if(A){f=O,u.length||(h.length?C():_());return}if(p(),b(),!t.random){const L=t.resources.indexOf(w.resource);L!==-1&&L!==t.index&&(t.index=L)}s="completed",d.forEach(L=>{L(O)})}function C(){if(s!=="pending")return;p();const w=h.shift();if(w===void 0){if(u.length){l=setTimeout(()=>{p(),s==="pending"&&(b(),_())},t.timeout);return}_();return}const T={status:"pending",resource:w,callback:(O,A)=>{y(T,O,A)}};u.push(T),c++,l=setTimeout(C,t.rotate),n(w,e,T.callback)}return setTimeout(C),v}function Jy(t){const e={...kk,...t};let n=[];function i(){n=n.filter(a=>a().status==="pending")}function r(a,s,c){const f=Ok(e,a,s,(l,u)=>{i(),c&&c(l,u)});return n.push(f),f}function o(a){return n.find(s=>a(s))||null}return{query:r,find:o,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:i}}function wp(){}const su=Object.create(null);function Ek(t){if(!su[t]){const e=yh(t);if(!e)return;const n=Jy(e),i={config:e,redundancy:n};su[t]=i}return su[t]}function xk(t,e,n){let i,r;if(typeof t=="string"){const o=sf(t);if(!o)return n(void 0,424),wp;r=o.send;const h=Ek(t);h&&(i=h.redundancy)}else{const o=vh(t);if(o){i=Jy(o);const h=t.resources?t.resources[0]:"",a=sf(h);a&&(r=a.send)}}return!i||!r?(n(void 0,424),wp):i.query(e,r,n)().abort}const Cp="iconify2",Zo="iconify",Zy=Zo+"-count",Sp=Zo+"-version",Qy=36e5,Dk=168,Ak=50;function of(t,e){try{return t.getItem(e)}catch{}}function bh(t,e,n){try{return t.setItem(e,n),!0}catch{}}function Tp(t,e){try{t.removeItem(e)}catch{}}function af(t,e){return bh(t,Zy,e.toString())}function lf(t){return parseInt(of(t,Zy))||0}const oc={local:!0,session:!0},eb={local:new Set,session:new Set};let wh=!1;function Pk(t){wh=t}let Ba=typeof window>"u"?{}:window;function tb(t){const e=t+"Storage";try{if(Ba&&Ba[e]&&typeof Ba[e].length=="number")return Ba[e]}catch{}oc[t]=!1}function nb(t,e){const n=tb(t);if(!n)return;const i=of(n,Sp);if(i!==Cp){if(i){const a=lf(n);for(let s=0;s<a;s++)Tp(n,Zo+s.toString())}bh(n,Sp,Cp),af(n,0);return}const r=Math.floor(Date.now()/Qy)-Dk,o=a=>{const s=Zo+a.toString(),c=of(n,s);if(typeof c=="string"){try{const f=JSON.parse(c);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>r&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,a))return!0}catch{}Tp(n,s)}};let h=lf(n);for(let a=h-1;a>=0;a--)o(a)||(a===h-1?(h--,af(n,h)):eb[t].add(a))}function ib(){if(!wh){Pk(!0);for(const t in oc)nb(t,e=>{const n=e.data,i=e.provider,r=n.prefix,o=Vr(i,r);if(!mh(o,n).length)return!1;const h=n.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,h):h,!0})}}function Mk(t,e){const n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(const i in oc)nb(i,r=>{const o=r.data;return r.provider!==t.provider||o.prefix!==t.prefix||o.lastModified===e});return!0}function Rk(t,e){wh||ib();function n(i){let r;if(!oc[i]||!(r=tb(i)))return;const o=eb[i];let h;if(o.size)o.delete(h=Array.from(o).shift());else if(h=lf(r),h>=Ak||!af(r,h+1))return;const a={cached:Math.floor(Date.now()/Qy),provider:t.provider,data:e};return bh(r,Zo+h.toString(),JSON.stringify(a))}e.lastModified&&!Mk(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),n("local")||n("session"))}function kp(){}function Ik(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,wk(t)}))}function Fk(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:i}=t,r=t.iconsToLoad;delete t.iconsToLoad;let o;if(!r||!(o=sf(n)))return;o.prepare(n,i,r).forEach(a=>{xk(n,a,s=>{if(typeof s!="object")a.icons.forEach(c=>{t.missing.add(c)});else try{const c=mh(t,s);if(!c.length)return;const f=t.pendingIcons;f&&c.forEach(l=>{f.delete(l)}),Rk(t,s)}catch(c){console.error(c)}Ik(t)})})}))}const Lk=(t,e)=>{const n=Tk(t,!0,$y()),i=bk(n);if(!i.pending.length){let s=!0;return e&&setTimeout(()=>{s&&e(i.loaded,i.missing,i.pending,kp)}),()=>{s=!1}}const r=Object.create(null),o=[];let h,a;return i.pending.forEach(s=>{const{provider:c,prefix:f}=s;if(f===a&&c===h)return;h=c,a=f,o.push(Vr(c,f));const l=r[c]||(r[c]=Object.create(null));l[f]||(l[f]=[])}),i.pending.forEach(s=>{const{provider:c,prefix:f,name:l}=s,u=Vr(c,f),d=u.pendingIcons||(u.pendingIcons=new Set);d.has(l)||(d.add(l),r[c][f].push(l))}),o.forEach(s=>{const{provider:c,prefix:f}=s;r[c][f].length&&Fk(s,r[c][f])}),e?Sk(e,i,o):kp};function Nk(t,e){const n={...t};for(const i in e){const r=e[i],o=typeof r;i in Gy?(r===null||r&&(o==="string"||o==="number"))&&(n[i]=r):o===typeof n[i]&&(n[i]=i==="rotate"?r%4:r)}return n}const jk=/[\s,]+/;function Bk(t,e){e.split(jk).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function Uk(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function i(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(t);return isNaN(r)?0:i(r)}else if(n!==t){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let o=parseFloat(t.slice(0,t.length-n.length));return isNaN(o)?0:(o=o/r,o%1===0?i(o):0)}}return e}function Yk(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)n+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function Wk(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function zk(t){return"data:image/svg+xml,"+Wk(t)}function Hk(t){return'url("'+zk(t)+'")'}const Op={...qy,inline:!1},Vk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Xk={display:"inline-block"},cf={"background-color":"currentColor"},rb={"background-color":"transparent"},Ep={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},xp={"-webkit-mask":cf,mask:cf,background:rb};for(const t in xp){const e=xp[t];for(const n in Ep)e[t+"-"+n]=Ep[n]}function $k(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function Gk(t,e){const n=Nk(Op,e),i=e.mode||"svg",r=i==="svg"?{...Vk}:{};t.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let o=typeof e.style=="string"?e.style:"";for(let v in e){const _=e[v];if(_!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[v]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&Bk(n,_);break;case"color":o=o+(o.length>0&&o.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?n[v]=Uk(_):typeof _=="number"&&(n[v]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete r["aria-hidden"];break;default:if(v.slice(0,3)==="on:")break;Op[v]===void 0&&(r[v]=_)}}const h=ok(t,n),a=h.attributes;if(n.inline&&(o="vertical-align: -0.125em; "+o),i==="svg"){Object.assign(r,a),o!==""&&(r.style=o);let v=0,_=e.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:r,body:uk(h.body,_?()=>_+"ID"+v++:"iconifySvelte")}}const{body:s,width:c,height:f}=t,l=i==="mask"||(i==="bg"?!1:s.indexOf("currentColor")!==-1),u=Yk(s,{...a,width:c+"",height:f+""}),p={"--svg":Hk(u)},m=v=>{const _=a[v];_&&(p[v]=$k(_))};m("width"),m("height"),Object.assign(p,Xk,l?cf:rb);let g="";for(const v in p)g+=v+": "+p[v]+";";return r.style=g+o,{svg:!1,attributes:r}}$y(!0);fk("",yk);if(typeof document<"u"&&typeof window<"u"){ib();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!QT(i))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const i="IconifyProviders["+n+"] is invalid.";try{const r=e[n];if(typeof r!="object"||!r||r.resources===void 0)continue;hk(n,r)||console.error(i)}catch{console.error(i)}}}}function qk(t,e,n,i,r){function o(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",o(),{data:{...sc,...t}};let h;if(typeof t!="string"||(h=rc(t,!1,!0))===null)return o(),null;const a=JT(h);if(!a)return n&&(!e.loading||e.loading.name!==t)&&(o(),e.name="",e.loading={name:t,abort:Lk([h],i)}),null;o(),e.name!==t&&(e.name=t,r&&!e.destroyed&&r(t));const s=["iconify"];return h.prefix!==""&&s.push("iconify--"+h.prefix),h.provider!==""&&s.push("iconify--"+h.provider),{data:a,classes:s}}function Kk(t,e){return t?Gk({...sc,...t},e):null}function Dp(t){let e;function n(o,h){return o[0].svg?Zk:Jk}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(o,h){r.m(o,h),U(o,e,h)},p(o,h){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&j(e),r.d(o)}}}function Jk(t){let e,n=[t[0].attributes],i={};for(let r=0;r<n.length;r+=1)i=gi(i,n[r]);return{c(){e=E("span"),kl(e,i)},m(r,o){U(r,e,o)},p(r,o){kl(e,i=Hr(n,[o&1&&r[0].attributes]))},d(r){r&&j(e)}}}function Zk(t){let e,n=t[0].body+"",i=[t[0].attributes],r={};for(let o=0;o<i.length;o+=1)r=gi(r,i[o]);return{c(){e=r1("svg"),Id(e,r)},m(o,h){U(o,e,h),e.innerHTML=n},p(o,h){h&1&&n!==(n=o[0].body+"")&&(e.innerHTML=n),Id(e,r=Hr(i,[h&1&&o[0].attributes]))},d(o){o&&j(e)}}}function Qk(t){let e,n=t[0]&&Dp(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=Dp(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ve,o:ve,d(i){i&&j(e),n&&n.d(i)}}}function eO(t,e,n){const i={name:"",loading:null,destroyed:!1};let r=!1,o=0,h;const a=c=>{typeof e.onLoad=="function"&&e.onLoad(c),Yt()("load",{icon:c})};function s(){n(3,o++,o)}return Yi(()=>{n(2,r=!0)}),Wi(()=>{n(1,i.destroyed=!0,i),i.loading&&(i.loading.abort(),n(1,i.loading=null,i))}),t.$$set=c=>{n(6,e=gi(gi({},e),Md(c)))},t.$$.update=()=>{{const c=qk(e.icon,i,r,s,a);n(0,h=c?Kk(c.data,e):null),h&&c.classes&&n(0,h.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),h)}},e=Md(e),[h,i,r,o]}class ke extends Ge{constructor(e){super(),$e(this,e,eO,Qk,Xe,{})}}function tO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return f=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("div"),a=E("input"),s=V(),c=E("button"),he(f.$$.fragment),S(r,"id","minmax-range"),S(r,"type","range"),S(r,"min","0"),S(r,"max","360"),S(r,"step","1"),S(r,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(i,"class","w-full mt-3"),S(a,"type","text"),S(a,"class","input w-full text-center"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){U(p,e,m),k(e,n),k(n,i),k(i,r),Fe(r,t[1]),k(n,o),k(n,h),k(h,a),Fe(a,t[1]),k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[ne(r,"change",t[3]),ne(r,"input",t[3]),ne(r,"input",t[4]),ne(a,"input",t[5]),ne(a,"input",t[6]),ne(c,"click",t[7])],u=!0)},p(p,[m]){m&2&&Fe(r,p[1]),m&2&&a.value!==p[1]&&Fe(a,p[1])},i(p){l||(I(f.$$.fragment,p),l=!0)},o(p){W(f.$$.fragment,p),l=!1},d(p){p&&j(e),fe(f),u=!1,We(d)}}}function nO(t,e,n){let{selectProperty:i=null}=e,{sliderValue:r=0}=e;const o=Yt();function h(){o("onChangeRotate",{value:r})}Wi(()=>{n(0,i=null)});function a(){r=hy(this.value),n(1,r)}const s=()=>h();function c(){r=this.value,n(1,r)}const f=()=>h(),l=()=>n(0,i=null);return t.$$set=u=>{"selectProperty"in u&&n(0,i=u.selectProperty),"sliderValue"in u&&n(1,r=u.sliderValue)},[i,r,h,a,s,c,f,l]}class iO extends Ge{constructor(e){super(),$e(this,e,nO,tO,Xe,{selectProperty:0,sliderValue:1})}}var rO={grad:.9,turn:360,rad:360/(2*Math.PI)},ki=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Kt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Bn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},sb=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Ap=function(t){return{r:Bn(t.r,0,255),g:Bn(t.g,0,255),b:Bn(t.b,0,255),a:Bn(t.a)}},ou=function(t){return{r:Kt(t.r),g:Kt(t.g),b:Kt(t.b),a:Kt(t.a,3)}},sO=/^#([0-9a-f]{3,8})$/i,Ua=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ob=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),h=o-Math.min(e,n,i),a=h?o===e?(n-i)/h:o===n?2+(i-e)/h:4+(e-n)/h:0;return{h:60*(a<0?a+6:a),s:o?h/o*100:0,v:o/255*100,a:r}},ab=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),h=i*(1-n),a=i*(1-(e-o)*n),s=i*(1-(1-e+o)*n),c=o%6;return{r:255*[i,a,h,h,s,i][c],g:255*[s,i,i,a,h,h][c],b:255*[h,h,s,i,i,a][c],a:r}},Pp=function(t){return{h:sb(t.h),s:Bn(t.s,0,100),l:Bn(t.l,0,100),a:Bn(t.a)}},Mp=function(t){return{h:Kt(t.h),s:Kt(t.s),l:Kt(t.l),a:Kt(t.a,3)}},Rp=function(t){return ab((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},zo=function(t){return{h:(e=ob(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},oO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ip={string:[[function(t){var e=sO.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Kt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Kt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=lO.exec(t)||cO.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ap({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=oO.exec(t)||aO.exec(t);if(!e)return null;var n,i,r=Pp({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(rO[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Rp(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=r===void 0?1:r;return ki(e)&&ki(n)&&ki(i)?Ap({r:Number(e),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,o=r===void 0?1:r;if(!ki(e)||!ki(n)||!ki(i))return null;var h=Pp({h:Number(e),s:Number(n),l:Number(i),a:Number(o)});return Rp(h)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=r===void 0?1:r;if(!ki(e)||!ki(n)||!ki(i))return null;var h=function(a){return{h:sb(a.h),s:Bn(a.s,0,100),v:Bn(a.v,0,100),a:Bn(a.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(o)});return ab(h)},"hsv"]]},Fp=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},uO=function(t){return typeof t=="string"?Fp(t.trim(),Ip.string):typeof t=="object"&&t!==null?Fp(t,Ip.object):[null,void 0]},au=function(t,e){var n=zo(t);return{h:n.h,s:Bn(n.s+100*e,0,100),l:n.l,a:n.a}},lu=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Lp=function(t,e){var n=zo(t);return{h:n.h,s:n.s,l:Bn(n.l+100*e,0,100),a:n.a}},Np=function(){function t(e){this.parsed=uO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Kt(lu(this.rgba),2)},t.prototype.isDark=function(){return lu(this.rgba)<.5},t.prototype.isLight=function(){return lu(this.rgba)>=.5},t.prototype.toHex=function(){return e=ou(this.rgba),n=e.r,i=e.g,r=e.b,h=(o=e.a)<1?Ua(Kt(255*o)):"","#"+Ua(n)+Ua(i)+Ua(r)+h;var e,n,i,r,o,h},t.prototype.toRgb=function(){return ou(this.rgba)},t.prototype.toRgbString=function(){return e=ou(this.rgba),n=e.r,i=e.g,r=e.b,(o=e.a)<1?"rgba("+n+", "+i+", "+r+", "+o+")":"rgb("+n+", "+i+", "+r+")";var e,n,i,r,o},t.prototype.toHsl=function(){return Mp(zo(this.rgba))},t.prototype.toHslString=function(){return e=Mp(zo(this.rgba)),n=e.h,i=e.s,r=e.l,(o=e.a)<1?"hsla("+n+", "+i+"%, "+r+"%, "+o+")":"hsl("+n+", "+i+"%, "+r+"%)";var e,n,i,r,o},t.prototype.toHsv=function(){return e=ob(this.rgba),{h:Kt(e.h),s:Kt(e.s),v:Kt(e.v),a:Kt(e.a,3)};var e},t.prototype.invert=function(){return kn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),kn(au(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),kn(au(this.rgba,-e))},t.prototype.grayscale=function(){return kn(au(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),kn(Lp(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),kn(Lp(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?kn({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Kt(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=zo(this.rgba);return typeof e=="number"?kn({h:e,s:n.s,l:n.l,a:n.a}):Kt(n.h)},t.prototype.isEqual=function(e){return this.toHex()===kn(e).toHex()},t}(),kn=function(t){return t instanceof Np?t:new Np(t)};function jp(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),S(e,"name",t[3]),e.value=t[0]},m(n,i){U(n,e,i)},p(n,i){i&8&&S(e,"name",n[3]),i&1&&(e.value=n[0])},d(n){n&&j(e)}}}function fO(t){let e,n,i,r,o,h,a,s,c,f=t[3]&&jp(t);return{c(){e=E("div"),n=E("div"),i=V(),r=E("div"),h=V(),f&&f.c(),a=et(),S(n,"class","track svelte-x7oaj0"),S(r,"class","thumb svelte-x7oaj0"),S(e,"class","slider svelte-x7oaj0"),S(e,"role","slider"),S(e,"aria-orientation",t[4]),S(e,"aria-valuemax",t[11]),S(e,"aria-valuemin",t[10]),S(e,"aria-valuenow",t[0]),S(e,"aria-valuetext",o=t[2](t[0])),S(e,"aria-label",t[7]),S(e,"aria-labelledby",t[8]),S(e,"aria-controls",t[9]),S(e,"tabindex","0"),vi(e,"reverse",t[5]),kt(e,"--position",t[12])},m(l,u){U(l,e,u),k(e,n),k(e,i),k(e,r),t[22](e),U(l,h,u),f&&f.m(l,u),U(l,a,u),s||(c=[ne(window,"mousemove",t[15]),ne(window,"mouseup",t[16]),ne(e,"keydown",t[13]),ne(e,"mousedown",s1(function(){jn(t[6]?void 0:t[14])&&(t[6]?void 0:t[14]).apply(this,arguments)})),ne(e,"touchstart",xi(function(){jn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),ne(e,"touchmove",xi(function(){jn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),ne(e,"touchend",xi(function(){jn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1})],s=!0)},p(l,[u]){t=l,u&16&&S(e,"aria-orientation",t[4]),u&2048&&S(e,"aria-valuemax",t[11]),u&1024&&S(e,"aria-valuemin",t[10]),u&1&&S(e,"aria-valuenow",t[0]),u&5&&o!==(o=t[2](t[0]))&&S(e,"aria-valuetext",o),u&128&&S(e,"aria-label",t[7]),u&256&&S(e,"aria-labelledby",t[8]),u&512&&S(e,"aria-controls",t[9]),u&32&&vi(e,"reverse",t[5]),u&4096&&kt(e,"--position",t[12]),t[3]?f?f.p(t,u):(f=jp(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:ve,o:ve,d(l){l&&(j(e),j(h),j(a)),t[22](null),f&&f.d(l),s=!1,We(c)}}}function hO(t,e,n){let i,r,o,h,{min:a=0}=e,{max:s=100}=e,{step:c=1}=e,{value:f=50}=e,{ariaValueText:l=N=>N.toString()}=e,{name:u=void 0}=e,{direction:d="horizontal"}=e,{reverse:p=!1}=e,{keyboardOnly:m=!1}=e,{slider:g=void 0}=e,{ariaLabel:v=void 0}=e,{ariaLabelledBy:_=void 0}=e,{ariaControls:b=void 0}=e,{isDragging:y=!1}=e;const C=Yt();function w(N){const B=1/o,Q=Math.round(N*B)/B;return Math.max(i,Math.min(r,Q))}function T(N){const B=N.shiftKey?o*10:o;N.key==="ArrowUp"||N.key==="ArrowRight"?(n(0,f+=B),N.preventDefault()):N.key==="ArrowDown"||N.key==="ArrowLeft"?(n(0,f-=B),N.preventDefault()):N.key==="Home"?(n(0,f=i),N.preventDefault()):N.key==="End"?(n(0,f=r),N.preventDefault()):N.key==="PageUp"?(n(0,f+=o*10),N.preventDefault()):N.key==="PageDown"&&(n(0,f-=o*10),N.preventDefault()),n(0,f=w(f)),C("input",f)}const O={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function A(N){const B=(g==null?void 0:g[O[d].clientSize])||120,Q=(g==null?void 0:g.getBoundingClientRect()[O[d].offset])||0;let ee=N[O[d].client]-Q;d==="vertical"&&(ee=-1*ee+B),p?n(0,f=r-ee/B*(r-i)):n(0,f=ee/B*(r-i)+i),n(0,f=w(f)),C("input",f)}function L(N){A(N),n(18,y=!0)}function G(N){y&&A(N)}function Y(){n(18,y=!1)}function te(N){A({clientX:N.changedTouches[0].clientX,clientY:N.changedTouches[0].clientY})}function q(N){it[N?"unshift":"push"](()=>{g=N,n(1,g)})}return t.$$set=N=>{"min"in N&&n(19,a=N.min),"max"in N&&n(20,s=N.max),"step"in N&&n(21,c=N.step),"value"in N&&n(0,f=N.value),"ariaValueText"in N&&n(2,l=N.ariaValueText),"name"in N&&n(3,u=N.name),"direction"in N&&n(4,d=N.direction),"reverse"in N&&n(5,p=N.reverse),"keyboardOnly"in N&&n(6,m=N.keyboardOnly),"slider"in N&&n(1,g=N.slider),"ariaLabel"in N&&n(7,v=N.ariaLabel),"ariaLabelledBy"in N&&n(8,_=N.ariaLabelledBy),"ariaControls"in N&&n(9,b=N.ariaControls),"isDragging"in N&&n(18,y=N.isDragging)},t.$$.update=()=>{t.$$.dirty&524288&&n(10,i=typeof a=="string"?parseFloat(a):a),t.$$.dirty&1048576&&n(11,r=typeof s=="string"?parseFloat(s):s),t.$$.dirty&2097152&&(o=typeof c=="string"?parseFloat(c):c),t.$$.dirty&3073&&n(12,h=((f-i)/(r-i)*1).toFixed(4))},[f,g,l,u,d,p,m,v,_,b,i,r,h,T,L,G,Y,te,y,a,s,c,q]}class Ll extends Ge{constructor(e){super(),$e(this,e,hO,fO,Xe,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function dO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;var p=t[2].pickerIndicator;function m(y,C){return{props:{pos:y[6],isDark:y[3]}}}p&&(n=un(p,m(t)));function g(y){t[13](y)}let v={keyboardOnly:!0,ariaValueText:pO,ariaLabel:"saturation color"};t[0]!==void 0&&(v.value=t[0]),o=new Ll({props:v}),it.push(()=>Et(o,"value",g));function _(y){t[14](y)}let b={keyboardOnly:!0,ariaValueText:gO,direction:"vertical",ariaLabel:"brightness color"};return t[1]!==void 0&&(b.value=t[1]),c=new Ll({props:b}),it.push(()=>Et(c,"value",_)),{c(){e=E("div"),n&&he(n.$$.fragment),i=V(),r=E("div"),he(o.$$.fragment),a=V(),s=E("div"),he(c.$$.fragment),S(r,"class","s svelte-amfbfx"),kt(r,"--pos-y",t[6].y),S(s,"class","v svelte-amfbfx"),kt(s,"--pos-x",t[6].x),S(e,"class","picker svelte-amfbfx"),kt(e,"--picker-color-bg",t[5])},m(y,C){U(y,e,C),n&&ue(n,e,null),k(e,i),k(e,r),ue(o,r,null),k(e,a),k(e,s),ue(c,s,null),t[15](e),l=!0,u||(d=[ne(window,"mouseup",t[8]),ne(window,"mousedown",t[10]),ne(window,"mousemove",t[9]),ne(e,"mousedown",xi(t[7])),ne(e,"touchstart",t[11],{passive:!1}),ne(e,"touchmove",xi(t[11]),{passive:!1}),ne(e,"touchend",t[11],{passive:!1})],u=!0)},p(y,[C]){if(C&4&&p!==(p=y[2].pickerIndicator)){if(n){Oe();const O=n;W(O.$$.fragment,1,0,()=>{fe(O,1)}),Ee()}p?(n=un(p,m(y)),he(n.$$.fragment),I(n.$$.fragment,1),ue(n,e,i)):n=null}else if(p){const O={};C&64&&(O.pos=y[6]),C&8&&(O.isDark=y[3]),n.$set(O)}const w={};!h&&C&1&&(h=!0,w.value=y[0],Ut(()=>h=!1)),o.$set(w),C&64&&kt(r,"--pos-y",y[6].y);const T={};!f&&C&2&&(f=!0,T.value=y[1],Ut(()=>f=!1)),c.$set(T),C&64&&kt(s,"--pos-x",y[6].x),C&32&&kt(e,"--picker-color-bg",y[5])},i(y){l||(n&&I(n.$$.fragment,y),I(o.$$.fragment,y),I(c.$$.fragment,y),l=!0)},o(y){n&&W(n.$$.fragment,y),W(o.$$.fragment,y),W(c.$$.fragment,y),l=!1},d(y){y&&j(e),n&&fe(n),fe(o),fe(c),t[15](null),u=!1,We(d)}}}function Ya(t,e,n){return Math.min(Math.max(e,t),n)}const pO=t=>`${t}%`,gO=t=>`${t}%`;function mO(t,e,n){const i=Yt();let{components:r}=e,{h:o}=e,{s:h}=e,{v:a}=e,{isDark:s}=e,c,f=!1,l,u={x:100,y:0};function d(w){const{width:T,left:O,height:A,top:L}=c.getBoundingClientRect(),G={x:Ya(w.clientX-O,0,T),y:Ya(w.clientY-L,0,A)};n(0,h=Ya(G.x/T,0,1)*100),n(1,a=Ya((A-G.y)/A,0,1)*100)}function p(w){w.button===0&&(f=!0,d(w))}function m(){f=!1}function g(w){f&&d(w)}function v(w){w.target.isSameNode(c)}function _(w){w.preventDefault(),d(w.changedTouches[0])}function b(w){h=w,n(0,h)}function y(w){a=w,n(1,a)}function C(w){it[w?"unshift":"push"](()=>{c=w,n(4,c)})}return t.$$set=w=>{"components"in w&&n(2,r=w.components),"h"in w&&n(12,o=w.h),"s"in w&&n(0,h=w.s),"v"in w&&n(1,a=w.v),"isDark"in w&&n(3,s=w.isDark)},t.$$.update=()=>{t.$$.dirty&4096&&typeof o=="number"&&n(5,l=kn({h:o,s:100,v:100,a:1}).toHex()),t.$$.dirty&19&&typeof h=="number"&&typeof a=="number"&&c&&n(6,u={x:h,y:100-a}),t.$$.dirty&3&&i("input",{s:h,v:a})},[h,a,r,s,c,l,u,p,m,g,v,_,o,b,y,C]}class vO extends Ge{constructor(e){super(),$e(this,e,mO,dO,Xe,{components:2,h:12,s:0,v:1,isDark:3})}}function _O(t){let e;return{c(){e=E("div"),S(e,"class","picker-indicator svelte-i5mg2p"),vi(e,"is-dark",t[1]),kt(e,"--pos-x",t[0].x),kt(e,"--pos-y",t[0].y)},m(n,i){U(n,e,i)},p(n,[i]){i&2&&vi(e,"is-dark",n[1]),i&1&&kt(e,"--pos-x",n[0].x),i&1&&kt(e,"--pos-y",n[0].y)},i:ve,o:ve,d(n){n&&j(e)}}}function yO(t,e,n){let{pos:i}=e,{isDark:r}=e;return t.$$set=o=>{"pos"in o&&n(0,i=o.pos),"isDark"in o&&n(1,r=o.isDark)},[i,r]}class bO extends Ge{constructor(e){super(),$e(this,e,yO,_O,Xe,{pos:0,isDark:1})}}function wO(t){let e,n,i,r,o,h,a,s,c,f;return{c(){e=E("input"),i=V(),r=E("input"),h=V(),a=E("input"),S(e,"aria-label",n=t[4].label.h),e.value=t[9],S(e,"type","number"),S(e,"min","0"),S(e,"max","360"),S(e,"class","svelte-qtukzs"),S(r,"aria-label",o=t[4].label.s),r.value=t[8],S(r,"type","number"),S(r,"min","0"),S(r,"max","100"),S(r,"class","svelte-qtukzs"),S(a,"aria-label",s=t[4].label.v),a.value=t[7],S(a,"type","number"),S(a,"min","0"),S(a,"max","100"),S(a,"class","svelte-qtukzs")},m(l,u){U(l,e,u),U(l,i,u),U(l,r,u),U(l,h,u),U(l,a,u),c||(f=[ne(e,"input",t[13]("h")),ne(r,"input",t[13]("s")),ne(a,"input",t[13]("v"))],c=!0)},p(l,u){u&16&&n!==(n=l[4].label.h)&&S(e,"aria-label",n),u&512&&e.value!==l[9]&&(e.value=l[9]),u&16&&o!==(o=l[4].label.s)&&S(r,"aria-label",o),u&256&&r.value!==l[8]&&(r.value=l[8]),u&16&&s!==(s=l[4].label.v)&&S(a,"aria-label",s),u&128&&a.value!==l[7]&&(a.value=l[7])},d(l){l&&(j(e),j(i),j(r),j(h),j(a)),c=!1,We(f)}}}function CO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return{c(){e=E("input"),r=V(),o=E("input"),s=V(),c=E("input"),S(e,"aria-label",n=t[4].label.r),e.value=i=t[0].r,S(e,"type","number"),S(e,"min","0"),S(e,"max","255"),S(e,"class","svelte-qtukzs"),S(o,"aria-label",h=t[4].label.g),o.value=a=t[0].g,S(o,"type","number"),S(o,"min","0"),S(o,"max","255"),S(o,"class","svelte-qtukzs"),S(c,"aria-label",f=t[4].label.b),c.value=l=t[0].b,S(c,"type","number"),S(c,"min","0"),S(c,"max","255"),S(c,"class","svelte-qtukzs")},m(p,m){U(p,e,m),U(p,r,m),U(p,o,m),U(p,s,m),U(p,c,m),u||(d=[ne(e,"input",t[12]("r")),ne(o,"input",t[12]("g")),ne(c,"input",t[12]("b"))],u=!0)},p(p,m){m&16&&n!==(n=p[4].label.r)&&S(e,"aria-label",n),m&1&&i!==(i=p[0].r)&&e.value!==i&&(e.value=i),m&16&&h!==(h=p[4].label.g)&&S(o,"aria-label",h),m&1&&a!==(a=p[0].g)&&o.value!==a&&(o.value=a),m&16&&f!==(f=p[4].label.b)&&S(c,"aria-label",f),m&1&&l!==(l=p[0].b)&&c.value!==l&&(c.value=l)},d(p){p&&(j(e),j(r),j(o),j(s),j(c)),u=!1,We(d)}}}function SO(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.hex),e.value=t[1],S(e,"class","svelte-qtukzs"),kt(e,"flex",3)},m(o,h){U(o,e,h),i||(r=ne(e,"input",t[11]),i=!0)},p(o,h){h&16&&n!==(n=o[4].label.hex)&&S(e,"aria-label",n),h&2&&e.value!==o[1]&&(e.value=o[1])},d(o){o&&j(e),i=!1,r()}}}function Bp(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.a),e.value=t[6],S(e,"type","number"),S(e,"min","0"),S(e,"max","1"),S(e,"step","0.01"),S(e,"class","svelte-qtukzs")},m(o,h){U(o,e,h),i||(r=ne(e,"input",function(){jn(t[5]==="hsv"?t[13]("a"):t[12]("a"))&&(t[5]==="hsv"?t[13]("a"):t[12]("a")).apply(this,arguments)}),i=!0)},p(o,h){t=o,h&16&&n!==(n=t[4].label.a)&&S(e,"aria-label",n),h&64&&e.value!==t[6]&&(e.value=t[6])},d(o){o&&j(e),i=!1,r()}}}function TO(t){let e,n=t[4].color[t[5]]+"",i;return{c(){e=E("div"),i=Te(n),S(e,"class","button-like svelte-qtukzs")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&48&&n!==(n=r[4].color[r[5]]+"")&&Ve(i,n)},d(r){r&&j(e)}}}function kO(t){let e,n,i=t[4].color[t[5]]+"",r,o,h,a=t[4].changeTo+"",s,c,f,l,u;return{c(){e=E("button"),n=E("span"),r=Te(i),o=V(),h=E("span"),s=Te(a),c=V(),f=Te(t[10]),S(n,"class","disappear svelte-qtukzs"),S(n,"aria-hidden","true"),S(h,"class","appear svelte-qtukzs"),S(e,"type","button"),S(e,"class","svelte-qtukzs")},m(d,p){U(d,e,p),k(e,n),k(n,r),k(e,o),k(e,h),k(h,s),k(h,c),k(h,f),l||(u=ne(e,"click",t[15]),l=!0)},p(d,p){p&48&&i!==(i=d[4].color[d[5]]+"")&&Ve(r,i),p&16&&a!==(a=d[4].changeTo+"")&&Ve(s,a),p&1024&&Ve(f,d[10])},d(d){d&&j(e),l=!1,u()}}}function OO(t){let e,n,i,r;function o(u,d){return u[5]==="hex"?SO:u[5]==="rgb"?CO:wO}let h=o(t),a=h(t),s=t[2]&&Bp(t);function c(u,d){return u[3].length>1?kO:TO}let f=c(t),l=f(t);return{c(){e=E("div"),n=E("div"),a.c(),i=V(),s&&s.c(),r=V(),l.c(),S(n,"class","input-container svelte-qtukzs"),S(e,"class","text-input svelte-qtukzs")},m(u,d){U(u,e,d),k(e,n),a.m(n,null),k(n,i),s&&s.m(n,null),k(e,r),l.m(e,null)},p(u,[d]){h===(h=o(u))&&a?a.p(u,d):(a.d(1),a=h(u),a&&(a.c(),a.m(n,i))),u[2]?s?s.p(u,d):(s=Bp(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null),f===(f=c(u))&&l?l.p(u,d):(l.d(1),l=f(u),l&&(l.c(),l.m(e,null)))},i:ve,o:ve,d(u){u&&j(e),a.d(),s&&s.d(),l.d()}}}const EO=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function xO(t,e,n){let i,r,o,h,a;const s=Yt();let{isAlpha:c}=e,{rgb:f}=e,{hsv:l}=e,{hex:u}=e,{textInputModes:d}=e,{texts:p}=e,m=d[0]||"hex";function g(y){const C=y.target;EO.test(C.value)&&(n(1,u=C.value),s("input",{hex:u}))}function v(y){return function(C){n(0,f={...f,[y]:parseFloat(C.target.value)}),s("input",{rgb:f})}}function _(y){return function(C){n(14,l={...l,[y]:parseFloat(C.target.value)}),s("input",{hsv:l})}}const b=()=>n(5,m=i);return t.$$set=y=>{"isAlpha"in y&&n(2,c=y.isAlpha),"rgb"in y&&n(0,f=y.rgb),"hsv"in y&&n(14,l=y.hsv),"hex"in y&&n(1,u=y.hex),"textInputModes"in y&&n(3,d=y.textInputModes),"texts"in y&&n(4,p=y.texts)},t.$$.update=()=>{t.$$.dirty&40&&n(10,i=d[(d.indexOf(m)+1)%d.length]),t.$$.dirty&16384&&n(9,r=Math.round(l.h)),t.$$.dirty&16384&&n(8,o=Math.round(l.s)),t.$$.dirty&16384&&n(7,h=Math.round(l.v)),t.$$.dirty&16384&&n(6,a=l.a===void 0?1:Math.round(l.a*100)/100)},[f,u,c,d,p,m,a,h,o,r,i,g,v,_,l,b]}class DO extends Ge{constructor(e){super(),$e(this,e,xO,OO,Xe,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function AO(t){let e,n,i,r,o,h,a,s,c,f,l;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("div"),h=V(),a=E("div"),s=V(),c=Te(t[2]),S(i,"type","color"),S(i,"name",t[3]),i.value=t[1],S(i,"aria-haspopup","dialog"),S(i,"class","svelte-r4tbal"),S(o,"class","alpha svelte-r4tbal"),S(a,"class","color svelte-r4tbal"),kt(a,"background",t[1]),S(n,"class","container svelte-r4tbal"),S(e,"class","svelte-r4tbal")},m(u,d){U(u,e,d),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(e,s),k(e,c),t[5](e),f||(l=[ne(i,"click",xi(Wa)),ne(i,"mousedown",xi(Wa)),ne(e,"click",xi(Wa)),ne(e,"mousedown",xi(Wa))],f=!0)},p(u,[d]){d&8&&S(i,"name",u[3]),d&2&&(i.value=u[1]),d&2&&kt(a,"background",u[1]),d&4&&Ve(c,u[2])},i:ve,o:ve,d(u){u&&j(e),t[5](null),f=!1,We(l)}}}function Wa(){}function PO(t,e,n){let{labelElement:i}=e,{hex:r}=e,{label:o}=e,{name:h=void 0}=e,{isOpen:a}=e;function s(c){it[c?"unshift":"push"](()=>{i=c,n(0,i)})}return t.$$set=c=>{"labelElement"in c&&n(0,i=c.labelElement),"hex"in c&&n(1,r=c.hex),"label"in c&&n(2,o=c.label),"name"in c&&n(3,h=c.name),"isOpen"in c&&n(4,a=c.isOpen)},[i,r,o,h,a,s]}class MO extends Ge{constructor(e){super(),$e(this,e,PO,AO,Xe,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function RO(t){let e,n,i;const r=t[4].default,o=da(r,t,t[3],null);return{c(){e=E("div"),o&&o.c(),S(e,"class","wrapper svelte-1h4o41o"),S(e,"role",n=t[2]?"dialog":void 0),S(e,"aria-label","color picker"),vi(e,"is-open",t[1])},m(h,a){U(h,e,a),o&&o.m(e,null),t[5](e),i=!0},p(h,[a]){o&&o.p&&(!i||a&8)&&ga(o,r,h,h[3],i?pa(r,h[3],a,null):ma(h[3]),null),(!i||a&4&&n!==(n=h[2]?"dialog":void 0))&&S(e,"role",n),(!i||a&2)&&vi(e,"is-open",h[1])},i(h){i||(I(o,h),i=!0)},o(h){W(o,h),i=!1},d(h){h&&j(e),o&&o.d(h),t[5](null)}}}function IO(t,e,n){let{$$slots:i={},$$scope:r}=e,{wrapper:o}=e,{isOpen:h}=e,{isDialog:a}=e;function s(c){it[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$set=c=>{"wrapper"in c&&n(0,o=c.wrapper),"isOpen"in c&&n(1,h=c.isOpen),"isDialog"in c&&n(2,a=c.isDialog),"$$scope"in c&&n(3,r=c.$$scope)},[o,h,a,r,i,s]}class FO extends Ge{constructor(e){super(),$e(this,e,IO,RO,Xe,{wrapper:0,isOpen:1,isDialog:2})}}const cu={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},lb="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function LO(t){return function(e){if(e.target===window)return;const n=e.target;if(!t.contains(n))return;const i=t.querySelectorAll(lb),r=i[0],o=i[i.length-1];function h(s){return s.code==="Tab"&&!s.shiftKey}function a(s){return s.code==="Tab"&&s.shiftKey}h(e)&&e.target===o?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),o.focus())}}const NO=t=>{const e=t.querySelector(lb);e&&e.focus();const n=LO(t);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};function jO(t){let e,n,i,r,o,h,a=t[1].label.withoutColor+"",s,c,f;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("span"),h=V(),s=Te(a),S(i,"type","checkbox"),S(i,"class","svelte-pt866j"),S(o,"class","svelte-pt866j"),S(n,"class","svelte-pt866j"),S(e,"class","nullability-checkbox svelte-pt866j")},m(l,u){U(l,e,u),k(e,n),k(n,i),i.checked=t[0],k(n,r),k(n,o),k(e,h),k(e,s),c||(f=ne(i,"change",t[2]),c=!0)},p(l,[u]){u&1&&(i.checked=l[0]),u&2&&a!==(a=l[1].label.withoutColor+"")&&Ve(s,a)},i:ve,o:ve,d(l){l&&j(e),c=!1,f()}}}function BO(t,e,n){let{isUndefined:i}=e,{texts:r}=e;function o(){i=this.checked,n(0,i)}return t.$$set=h=>{"isUndefined"in h&&n(0,i=h.isUndefined),"texts"in h&&n(1,r=h.texts)},[i,r,o]}class UO extends Ge{constructor(e){super(),$e(this,e,BO,jO,Xe,{isUndefined:0,texts:1})}}function YO(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),e.value=t[2],S(e,"name",t[6])},m(n,i){U(n,e,i)},p(n,i){i[0]&4&&(e.value=n[2]),i[0]&64&&S(e,"name",n[6])},i:ve,o:ve,d(n){n&&j(e)}}}function WO(t){let e,n,i,r;function o(s){t[33](s)}var h=t[23]().input;function a(s,c){let f={isOpen:!0,hex:s[2],label:s[5],name:s[6]};return s[21]!==void 0&&(f.labelElement=s[21]),{props:f}}return h&&(e=un(h,a(t)),it.push(()=>Et(e,"labelElement",o))),{c(){e&&he(e.$$.fragment),i=et()},m(s,c){e&&ue(e,s,c),U(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().input)){if(e){Oe();const f=e;W(f.$$.fragment,1,0,()=>{fe(f,1)}),Ee()}h?(e=un(h,a(s)),it.push(()=>Et(e,"labelElement",o)),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};c[0]&4&&(f.hex=s[2]),c[0]&32&&(f.label=s[5]),c[0]&64&&(f.name=s[6]),!n&&c[0]&2097152&&(n=!0,f.labelElement=s[21],Ut(()=>n=!1)),e.$set(f)}},i(s){r||(e&&I(e.$$.fragment,s),r=!0)},o(s){e&&W(e.$$.fragment,s),r=!1},d(s){s&&j(i),e&&fe(e,s)}}}function Up(t){let e,n,i,r;function o(s){t[34](s)}var h=t[23]().nullabilityCheckbox;function a(s,c){let f={texts:s[24]()};return s[16]!==void 0&&(f.isUndefined=s[16]),{props:f}}return h&&(e=un(h,a(t)),it.push(()=>Et(e,"isUndefined",o))),{c(){e&&he(e.$$.fragment),i=et()},m(s,c){e&&ue(e,s,c),U(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().nullabilityCheckbox)){if(e){Oe();const f=e;W(f.$$.fragment,1,0,()=>{fe(f,1)}),Ee()}h?(e=un(h,a(s)),it.push(()=>Et(e,"isUndefined",o)),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};!n&&c[0]&65536&&(n=!0,f.isUndefined=s[16],Ut(()=>n=!1)),e.$set(f)}},i(s){r||(e&&I(e.$$.fragment,s),r=!0)},o(s){e&&W(e.$$.fragment,s),r=!1},d(s){s&&j(i),e&&fe(e,s)}}}function Yp(t){var r;let e,n,i;return n=new Ll({props:{min:0,max:1,step:.01,value:((r=t[1])==null?void 0:r.a)??t[18].a,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.a}}),n.$on("input",t[27]("a")),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","a svelte-tsvobk"),kt(e,"--alphaless-color",(t[2]?t[2]:t[19]).substring(0,7))},m(o,h){U(o,e,h),ue(n,e,null),i=!0},p(o,h){var s;const a={};h[0]&262146&&(a.value=((s=o[1])==null?void 0:s.a)??o[18].a),h[0]&4096&&(a.direction=o[12]),h[0]&4096&&(a.reverse=o[12]==="vertical"),n.$set(a),h[0]&524292&&kt(e,"--alphaless-color",(o[2]?o[2]:o[19]).substring(0,7))},i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){W(n.$$.fragment,o),i=!1},d(o){o&&j(e),fe(n)}}}function Wp(t){let e,n,i;var r=t[23]().textInput;function o(h,a){return{props:{hex:h[2]??h[19],rgb:h[0]??h[17],hsv:h[1]??h[18],isAlpha:h[8],textInputModes:h[11],texts:h[24]()}}}return r&&(e=un(r,o(t)),e.$on("input",t[35])),{c(){e&&he(e.$$.fragment),n=et()},m(h,a){e&&ue(e,h,a),U(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().textInput)){if(e){Oe();const s=e;W(s.$$.fragment,1,0,()=>{fe(s,1)}),Ee()}r?(e=un(r,o(h)),e.$on("input",h[35]),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&524292&&(s.hex=h[2]??h[19]),a[0]&131073&&(s.rgb=h[0]??h[17]),a[0]&262146&&(s.hsv=h[1]??h[18]),a[0]&256&&(s.isAlpha=h[8]),a[0]&2048&&(s.textInputModes=h[11]),e.$set(s)}},i(h){i||(e&&I(e.$$.fragment,h),i=!0)},o(h){e&&W(e.$$.fragment,h),i=!1},d(h){h&&j(n),e&&fe(e,h)}}}function zO(t){let e,n,i;var r=t[23]().a11yNotice;function o(h,a){return{props:{components:h[23](),a11yColors:h[13],hex:h[2]||"#00000000",a11yTexts:h[15],a11yLevel:h[14]}}}return r&&(e=un(r,o(t))),{c(){e&&he(e.$$.fragment),n=et()},m(h,a){e&&ue(e,h,a),U(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().a11yNotice)){if(e){Oe();const s=e;W(s.$$.fragment,1,0,()=>{fe(s,1)}),Ee()}r?(e=un(r,o(h)),he(e.$$.fragment),I(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&8192&&(s.a11yColors=h[13]),a[0]&4&&(s.hex=h[2]||"#00000000"),a[0]&32768&&(s.a11yTexts=h[15]),a[0]&16384&&(s.a11yLevel=h[14]),e.$set(s)}},i(h){i||(e&&I(e.$$.fragment,h),i=!0)},o(h){e&&W(e.$$.fragment,h),i=!1},d(h){h&&j(n),e&&fe(e,h)}}}function HO(t){var g,v,_,b;let e,n,i,r,o,h,a,s,c=t[23]().a11yNotice,f,l,u=t[7]&&Up(t);n=new vO({props:{components:t[23](),h:((g=t[1])==null?void 0:g.h)??t[18].h,s:((v=t[1])==null?void 0:v.s)??t[18].s,v:((_=t[1])==null?void 0:_.v)??t[18].v,isDark:t[3]}}),n.$on("input",t[28](["s","v"])),o=new Ll({props:{min:0,max:360,step:1,value:((b=t[1])==null?void 0:b.h)??t[18].h,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.h}}),o.$on("input",t[27]("h"));let d=t[8]&&Yp(t),p=t[10]&&Wp(t),m=c&&zO(t);return{c(){u&&u.c(),e=V(),he(n.$$.fragment),i=V(),r=E("div"),he(o.$$.fragment),h=V(),d&&d.c(),a=V(),p&&p.c(),s=V(),m&&m.c(),f=et(),S(r,"class","h svelte-tsvobk")},m(y,C){u&&u.m(y,C),U(y,e,C),ue(n,y,C),U(y,i,C),U(y,r,C),ue(o,r,null),U(y,h,C),d&&d.m(y,C),U(y,a,C),p&&p.m(y,C),U(y,s,C),m&&m.m(y,C),U(y,f,C),l=!0},p(y,C){var O,A,L,G;y[7]?u?(u.p(y,C),C[0]&128&&I(u,1)):(u=Up(y),u.c(),I(u,1),u.m(e.parentNode,e)):u&&(Oe(),W(u,1,1,()=>{u=null}),Ee());const w={};C[0]&262146&&(w.h=((O=y[1])==null?void 0:O.h)??y[18].h),C[0]&262146&&(w.s=((A=y[1])==null?void 0:A.s)??y[18].s),C[0]&262146&&(w.v=((L=y[1])==null?void 0:L.v)??y[18].v),C[0]&8&&(w.isDark=y[3]),n.$set(w);const T={};C[0]&262146&&(T.value=((G=y[1])==null?void 0:G.h)??y[18].h),C[0]&4096&&(T.direction=y[12]),C[0]&4096&&(T.reverse=y[12]==="vertical"),o.$set(T),y[8]?d?(d.p(y,C),C[0]&256&&I(d,1)):(d=Yp(y),d.c(),I(d,1),d.m(a.parentNode,a)):d&&(Oe(),W(d,1,1,()=>{d=null}),Ee()),y[10]?p?(p.p(y,C),C[0]&1024&&I(p,1)):(p=Wp(y),p.c(),I(p,1),p.m(s.parentNode,s)):p&&(Oe(),W(p,1,1,()=>{p=null}),Ee()),c&&m.p(y,C)},i(y){l||(I(u),I(n.$$.fragment,y),I(o.$$.fragment,y),I(d),I(p),I(m),l=!0)},o(y){W(u),W(n.$$.fragment,y),W(o.$$.fragment,y),W(d),W(p),W(m),l=!1},d(y){y&&(j(e),j(i),j(r),j(h),j(a),j(s),j(f)),u&&u.d(y),fe(n,y),fe(o),d&&d.d(y),p&&p.d(y),m&&m.d(y)}}}function VO(t){let e,n,i,r,o,h,a,s,c,f;const l=[WO,YO],u=[];function d(v,_){return v[9]?0:v[6]?1:-1}~(n=d(t))&&(i=u[n]=l[n](t));function p(v){t[36](v)}var m=t[23]().wrapper;function g(v,_){let b={isOpen:v[4],isDialog:v[9],$$slots:{default:[HO]},$$scope:{ctx:v}};return v[22]!==void 0&&(b.wrapper=v[22]),{props:b}}return m&&(o=un(m,g(t)),it.push(()=>Et(o,"wrapper",p))),{c(){e=E("span"),i&&i.c(),r=V(),o&&he(o.$$.fragment),S(e,"class",a="color-picker "+t[12]+" svelte-tsvobk")},m(v,_){U(v,e,_),~n&&u[n].m(e,null),k(e,r),o&&ue(o,e,null),t[37](e),s=!0,c||(f=[ne(window,"mousedown",t[25]),ne(window,"keyup",t[26])],c=!0)},p(v,_){let b=n;if(n=d(v),n===b?~n&&u[n].p(v,_):(i&&(Oe(),W(u[b],1,1,()=>{u[b]=null}),Ee()),~n?(i=u[n],i?i.p(v,_):(i=u[n]=l[n](v),i.c()),I(i,1),i.m(e,r)):i=null),m!==(m=v[23]().wrapper)){if(o){Oe();const y=o;W(y.$$.fragment,1,0,()=>{fe(y,1)}),Ee()}m?(o=un(m,g(v)),it.push(()=>Et(o,"wrapper",p)),he(o.$$.fragment),I(o.$$.fragment,1),ue(o,e,null)):o=null}else if(m){const y={};_[0]&16&&(y.isOpen=v[4]),_[0]&512&&(y.isDialog=v[9]),_[0]&1047951|_[1]&4096&&(y.$$scope={dirty:_,ctx:v}),!h&&_[0]&4194304&&(h=!0,y.wrapper=v[22],Ut(()=>h=!1)),o.$set(y)}(!s||_[0]&4096&&a!==(a="color-picker "+v[12]+" svelte-tsvobk"))&&S(e,"class",a)},i(v){s||(I(i),o&&I(o.$$.fragment,v),s=!0)},o(v){W(i),o&&W(o.$$.fragment,v),s=!1},d(v){v&&j(e),~n&&u[n].d(),o&&fe(o),t[37](null),c=!1,We(f)}}}function XO(t,e,n){const i=Yt();let{components:r={}}=e,{label:o="Choose a color"}=e,{name:h=void 0}=e,{nullable:a=!1}=e,{rgb:s=a?void 0:{r:255,g:0,b:0,a:1}}=e,{hsv:c=a?void 0:{h:0,s:100,v:100,a:1}}=e,{hex:f=a?void 0:"#ff0000"}=e,{color:l=void 0}=e,{isDark:u=!1}=e,{isAlpha:d=!0}=e,{isDialog:p=!0}=e,{isOpen:m=!p}=e,{isTextInput:g=!0}=e,{textInputModes:v=["hex","rgb","hsv"]}=e,{sliderDirection:_="vertical"}=e,{disableCloseClickOutside:b=!1}=e,{a11yColors:y=[{bgHex:"#ffffff"}]}=e,{a11yLevel:C="AA"}=e,{texts:w=void 0}=e,{a11yTexts:T=void 0}=e,O={r:255,g:0,b:0,a:1},A={h:0,s:100,v:100,a:1},L="#ff0000",G=!1,Y=G,te,q,N,B;const Q={pickerIndicator:bO,textInput:DO,input:MO,nullabilityCheckbox:UO,wrapper:FO};function ee(){return{...Q,...r}}function x(){return{label:{...cu.label,...w==null?void 0:w.label},color:{...cu.color,...w==null?void 0:w.color},changeTo:(w==null?void 0:w.changeTo)??cu.changeTo}}function P({target:$}){p&&(q.contains($)||q.isSameNode($)?n(4,m=!m):m&&!N.contains($)&&!b&&n(4,m=!1))}function R({key:$,target:se}){if(p)$==="Enter"&&q.contains(se)?(n(4,m=!m),setTimeout(()=>{B=NO(N)})):$==="Escape"&&m&&(n(4,m=!1),te.contains(se)&&(q==null||q.focus(),B==null||B.destroy()));else return}function F(){if(G&&!Y){Y=!0,n(1,c=n(0,s=n(2,f=void 0))),i("input",{color:l,hsv:c,rgb:s,hex:f});return}else if(Y&&!G){Y=!1,n(1,c=A),n(0,s=O),n(2,f=L),i("input",{color:l,hsv:c,rgb:s,hex:f});return}if(!c&&!s&&!f){n(16,G=!0),Y=!0,i("input",{color:void 0,hsv:c,rgb:s,hex:f});return}c&&s&&c.h===A.h&&c.s===A.s&&c.v===A.v&&c.a===A.a&&s.r===O.r&&s.g===O.g&&s.b===O.b&&s.a===O.a&&f===L||(n(16,G=!1),c&&c.a===void 0&&n(1,c.a=1,c),A.a===void 0&&n(18,A.a=1,A),s&&s.a===void 0&&n(0,s.a=1,s),O.a===void 0&&n(17,O.a=1,O),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),c&&(c.h!==A.h||c.s!==A.s||c.v!==A.v||c.a!==A.a)?(n(29,l=kn(c)),n(0,s=l.toRgb()),n(2,f=l.toHex())):s&&(s.r!==O.r||s.g!==O.g||s.b!==O.b||s.a!==O.a)?(n(29,l=kn(s)),n(2,f=l.toHex()),n(1,c=l.toHsv())):f&&f!==L&&(n(29,l=kn(f)),n(0,s=l.toRgb()),n(1,c=l.toHsv())),l&&n(3,u=l.isDark()),f&&(n(18,A=Object.assign({},c)),n(17,O=Object.assign({},s)),n(19,L=f),Y=G,i("input",{color:l,hsv:c,rgb:s,hex:f})))}function K($){return se=>{c||n(1,c={...A}),n(1,c[$]=se.detail,c)}}function M($){return se=>{c||n(1,c={...A}),$.forEach(pe=>{c&&n(1,c[pe]=se.detail[pe],c)})}}function D($){q=$,n(21,q)}function H($){G=$,n(16,G)}const J=({detail:$})=>{$.hsv?n(1,c=$.hsv):$.rgb?n(0,s=$.rgb):$.hex&&n(2,f=$.hex)};function ie($){N=$,n(22,N)}function Z($){it[$?"unshift":"push"](()=>{te=$,n(20,te)})}return t.$$set=$=>{"components"in $&&n(30,r=$.components),"label"in $&&n(5,o=$.label),"name"in $&&n(6,h=$.name),"nullable"in $&&n(7,a=$.nullable),"rgb"in $&&n(0,s=$.rgb),"hsv"in $&&n(1,c=$.hsv),"hex"in $&&n(2,f=$.hex),"color"in $&&n(29,l=$.color),"isDark"in $&&n(3,u=$.isDark),"isAlpha"in $&&n(8,d=$.isAlpha),"isDialog"in $&&n(9,p=$.isDialog),"isOpen"in $&&n(4,m=$.isOpen),"isTextInput"in $&&n(10,g=$.isTextInput),"textInputModes"in $&&n(11,v=$.textInputModes),"sliderDirection"in $&&n(12,_=$.sliderDirection),"disableCloseClickOutside"in $&&n(31,b=$.disableCloseClickOutside),"a11yColors"in $&&n(13,y=$.a11yColors),"a11yLevel"in $&&n(14,C=$.a11yLevel),"texts"in $&&n(32,w=$.texts),"a11yTexts"in $&&n(15,T=$.a11yTexts)},t.$$.update=()=>{t.$$.dirty[0]&7&&(c||s||f)&&F(),t.$$.dirty[0]&65536&&F()},[s,c,f,u,m,o,h,a,d,p,g,v,_,y,C,T,G,O,A,L,te,q,N,ee,x,P,R,K,M,l,r,b,w,D,H,J,ie,Z]}class Ch extends Ge{constructor(e){super(),$e(this,e,XO,VO,Xe,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function $O(t){let e,n,i,r,o,h,a,s,c,f,l;function u(p){t[4](p)}let d={isAlpha:!1,label:""};return t[2]!==void 0&&(d.hex=t[2]),r=new Ch({props:d}),it.push(()=>Et(r,"hex",u)),r.$on("input",t[5]),s=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),he(r.$$.fragment),h=V(),a=E("button"),he(s.$$.fragment),S(i,"class","grow flex justify-center color-picker-wrapper"),S(a,"type","button"),S(a,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){U(p,e,m),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),ue(s,a,null),c=!0,f||(l=ne(a,"click",t[6]),f=!0)},p(p,[m]){const g={};!o&&m&4&&(o=!0,g.hex=p[2],Ut(()=>o=!1)),r.$set(g)},i(p){c||(I(r.$$.fragment,p),I(s.$$.fragment,p),c=!0)},o(p){W(r.$$.fragment,p),W(s.$$.fragment,p),c=!1},d(p){p&&j(e),fe(r),fe(s),f=!1,l()}}}function GO(t){if(typeof t=="object"&&t!==null)return"#000000";const e=typeof t=="string"?t:String(t),i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e);if(i){const[,o,h,a]=i.map(Number),s=o.toString(16).padStart(2,"0"),c=h.toString(16).padStart(2,"0"),f=a.toString(16).padStart(2,"0");return`#${s}${c}${f}`}return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?e:"#000000"}function qO(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e,o="#000000";o=GO(r.fill);const h=Yt();Wi(()=>{n(0,i=null)});function a(f){o=f,n(2,o)}const s=()=>{r.set("fill",o),h("onChangeColor")},c=()=>n(0,i=null);return t.$$set=f=>{"selectProperty"in f&&n(0,i=f.selectProperty),"object"in f&&n(1,r=f.object)},[i,r,o,h,a,s,c]}class KO extends Ge{constructor(e){super(),$e(this,e,qO,$O,Xe,{selectProperty:0,object:1})}}function zp(t,e,n){const i=t.slice();return i[7]=e[n],i}function Hp(t){let e,n,i,r,o,h,a,s;function c(){return t[5](t[7])}return{c(){e=E("li"),n=E("button"),i=E("img"),h=V(),Ze(i.src,r=t[7].thumbnail)||S(i,"src",r),S(i,"alt",o=t[7].fontName),S(i,"class","object-contain border rounded"),S(n,"type","button")},m(f,l){U(f,e,l),k(e,n),k(n,i),k(e,h),a||(s=ne(n,"click",c),a=!0)},p(f,l){t=f,l&4&&!Ze(i.src,r=t[7].thumbnail)&&S(i,"src",r),l&4&&o!==(o=t[7].fontName)&&S(i,"alt",o)},d(f){f&&j(e),a=!1,s()}}}function JO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p=Le(t[2]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Hp(zp(t,p,g));return f=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("textarea"),o=V(),h=E("div"),a=E("ul");for(let g=0;g<m.length;g+=1)m[g].c();s=V(),c=E("button"),he(f.$$.fragment),S(r,"class","textarea"),S(i,"class","w-full flex justify-center"),S(a,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 h-52 overflow-y-auto"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(g,v){U(g,e,v),k(e,n),k(n,i),k(i,r),Fe(r,t[0]),k(n,o),k(n,h),k(h,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(a,null);k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[ne(r,"input",t[4]),ne(c,"click",t[6])],u=!0)},p(g,[v]){if(v&1&&Fe(r,g[0]),v&12){p=Le(g[2]);let _;for(_=0;_<p.length;_+=1){const b=zp(g,p,_);m[_]?m[_].p(b,v):(m[_]=Hp(b),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i(g){l||(I(f.$$.fragment,g),l=!0)},o(g){W(f.$$.fragment,g),l=!1},d(g){g&&j(e),Ft(m,g),fe(f),u=!1,We(d)}}}function ZO(t,e,n){let i;Ne(t,Uo,f=>n(2,i=f));let{selectProperty:r=null}=e,{text:o=""}=e;const h=Yt();Wi(()=>{n(1,r=null)});function a(){o=this.value,n(0,o)}const s=f=>h("onChangeFontFamily",{fontFamily:f.fontFamily,localFamily:f.localFamily}),c=()=>n(1,r=null);return t.$$set=f=>{"selectProperty"in f&&n(1,r=f.selectProperty),"text"in f&&n(0,o=f.text)},t.$$.update=()=>{t.$$.dirty&1&&o&&h("onChangeText",{text:o})},[o,r,i,h,a,s,c]}let QO=class extends Ge{constructor(e){super(),$e(this,e,ZO,JO,Xe,{selectProperty:1,text:0})}};function eE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O;return a=new ke({props:{icon:"mingcute:align-left-line",height:"20"}}),u=new ke({props:{icon:"mingcute:align-center-line",height:"20"}}),v=new ke({props:{icon:"iconoir:align-right",height:"20"}}),y=new ke({props:{icon:"ion:close"}}),w=fy(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),he(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),he(u.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),he(v.$$.fragment),_=V(),b=E("button"),he(y.$$.fragment),S(r,"id","align-left"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="left",Fe(r,r.__value),S(h,"for","align-left"),S(h,"class","radio-label"),S(c,"id","align-center"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="center",Fe(c,c.__value),S(l,"for","align-center"),S(l,"class","radio-label"),S(p,"id","align-right"),S(p,"class","hidden radio-input"),S(p,"type","radio"),p.__value="right",Fe(p,p.__value),S(g,"for","align-right"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),w.p(r,c,p)},m(A,L){U(A,e,L),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=p.__value===t[0],k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),C=!0,T||(O=[ne(r,"change",t[2]),ne(c,"change",t[4]),ne(p,"change",t[5]),ne(b,"click",t[6])],T=!0)},p(A,[L]){L&1&&(r.checked=r.__value===A[0]),L&1&&(c.checked=c.__value===A[0]),L&1&&(p.checked=p.__value===A[0])},i(A){C||(I(a.$$.fragment,A),I(u.$$.fragment,A),I(v.$$.fragment,A),I(y.$$.fragment,A),C=!0)},o(A){W(a.$$.fragment,A),W(u.$$.fragment,A),W(v.$$.fragment,A),W(y.$$.fragment,A),C=!1},d(A){A&&j(e),fe(a),fe(u),fe(v),fe(y),w.r(),T=!1,We(O)}}}function tE(t,e,n){let{selectProperty:i=null}=e,{align:r="left"}=e;const o=Yt();Wi(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}function c(){r=this.__value,n(0,r)}const f=()=>n(1,i=null);return t.$$set=l=>{"selectProperty"in l&&n(1,i=l.selectProperty),"align"in l&&n(0,r=l.align)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeAlign",{align:r})},[r,i,a,h,s,c,f]}class nE extends Ge{constructor(e){super(),$e(this,e,tE,eE,Xe,{selectProperty:1,align:0})}}function iE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;return a=new ke({props:{icon:"ci:text",height:"20"}}),u=new ke({props:{icon:"clarity:italic-line",height:"20"}}),m=new ke({props:{icon:"ion:close"}}),v=fy(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),he(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),he(u.$$.fragment),d=V(),p=E("button"),he(m.$$.fragment),S(r,"id","align-normal"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="normal",Fe(r,r.__value),S(h,"for","align-normal"),S(h,"class","radio-label"),S(c,"id","align-italic"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="italic",Fe(c,c.__value),S(l,"for","align-italic"),S(l,"class","radio-label"),S(i,"class","grow flex justify-center"),S(p,"type","button"),S(p,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),v.p(r,c)},m(y,C){U(y,e,C),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(n,d),k(n,p),ue(m,p,null),g=!0,_||(b=[ne(r,"change",t[2]),ne(c,"change",t[4]),ne(p,"click",t[5])],_=!0)},p(y,[C]){C&1&&(r.checked=r.__value===y[0]),C&1&&(c.checked=c.__value===y[0])},i(y){g||(I(a.$$.fragment,y),I(u.$$.fragment,y),I(m.$$.fragment,y),g=!0)},o(y){W(a.$$.fragment,y),W(u.$$.fragment,y),W(m.$$.fragment,y),g=!1},d(y){y&&j(e),fe(a),fe(u),fe(m),v.r(),_=!1,We(b)}}}function rE(t,e,n){let{selectProperty:i=null}=e,{style:r="normal"}=e;console.log({style:r});const o=Yt();Wi(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}const c=()=>n(1,i=null);return t.$$set=f=>{"selectProperty"in f&&n(1,i=f.selectProperty),"style"in f&&n(0,r=f.style)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeStyle",{style:r})},[r,i,a,h,s,c]}class sE extends Ge{constructor(e){super(),$e(this,e,rE,iE,Xe,{selectProperty:1,style:0})}}function oE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T;return a=new ke({props:{icon:"radix-icons:underline",height:"20"}}),u=new ke({props:{icon:"radix-icons:overline",height:"20"}}),v=new ke({props:{icon:"radix-icons:strikethrough",height:"20"}}),y=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),he(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),he(u.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),he(v.$$.fragment),_=V(),b=E("button"),he(y.$$.fragment),S(r,"id","decoration-underline"),S(r,"class","hidden radio-input"),S(r,"type","checkbox"),S(h,"for","decoration-underline"),S(h,"class","radio-label"),S(c,"id","decoration-overline"),S(c,"class","hidden radio-input"),S(c,"type","checkbox"),S(l,"for","decoration-overline"),S(l,"class","radio-label"),S(p,"id","decoration-through"),S(p,"class","hidden radio-input"),S(p,"type","checkbox"),S(g,"for","decoration-through"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(O,A){U(O,e,A),k(e,n),k(n,i),k(i,r),r.checked=t[1].underline,k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=t[1].overline,k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=t[1].linethrough,k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),C=!0,w||(T=[ne(r,"change",t[3]),ne(c,"change",t[4]),ne(p,"change",t[5]),ne(b,"click",t[6])],w=!0)},p(O,[A]){A&2&&(r.checked=O[1].underline),A&2&&(c.checked=O[1].overline),A&2&&(p.checked=O[1].linethrough)},i(O){C||(I(a.$$.fragment,O),I(u.$$.fragment,O),I(v.$$.fragment,O),I(y.$$.fragment,O),C=!0)},o(O){W(a.$$.fragment,O),W(u.$$.fragment,O),W(v.$$.fragment,O),W(y.$$.fragment,O),C=!1},d(O){O&&j(e),fe(a),fe(u),fe(v),fe(y),w=!1,We(T)}}}function aE(t,e,n){let{selectProperty:i=null}=e,{object:r=""}=e,o={underline:r.underline,overline:r.overline,linethrough:r.linethrough};const h=Yt();Wi(()=>{n(0,i=null)});function a(){o.underline=this.checked,n(1,o)}function s(){o.overline=this.checked,n(1,o)}function c(){o.linethrough=this.checked,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeDecoration",{decoration:o})},[i,o,r,a,s,c,f]}class lE extends Ge{constructor(e){super(),$e(this,e,aE,oE,Xe,{selectProperty:0,object:2})}}function cE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;function _(y){t[3](y)}let b={isAlpha:!1,label:""};return t[1].stroke!==void 0&&(b.hex=t[1].stroke),r=new Ch({props:b}),it.push(()=>Et(r,"hex",_)),p=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),he(r.$$.fragment),h=V(),a=E("div"),s=E("input"),c=V(),f=E("div"),l=E("input"),u=V(),d=E("button"),he(p.$$.fragment),S(i,"class","grow flex justify-center"),S(s,"id","minmax-range"),S(s,"type","range"),S(s,"min","0"),S(s,"step","0.5"),S(s,"max","20"),S(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(a,"class","grow w-full"),S(l,"type","text"),S(l,"class","input w-full"),S(d,"type","button"),S(d,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(y,C){U(y,e,C),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),k(a,s),Fe(s,t[1].strokeWidth),k(n,c),k(n,f),k(f,l),Fe(l,t[1].strokeWidth),k(n,u),k(n,d),ue(p,d,null),m=!0,g||(v=[ne(s,"change",t[4]),ne(s,"input",t[4]),ne(l,"input",t[5]),ne(d,"click",t[6])],g=!0)},p(y,[C]){const w={};!o&&C&2&&(o=!0,w.hex=y[1].stroke,Ut(()=>o=!1)),r.$set(w),C&2&&Fe(s,y[1].strokeWidth),C&2&&l.value!==y[1].strokeWidth&&Fe(l,y[1].strokeWidth)},i(y){m||(I(r.$$.fragment,y),I(p.$$.fragment,y),m=!0)},o(y){W(r.$$.fragment,y),W(p.$$.fragment,y),m=!1},d(y){y&&j(e),fe(r),fe(p),g=!1,We(v)}}}function uE(t,e,n){let{selectProperty:i=null}=e,{object:r={}}=e,o={strokeWidth:r.strokeWidth?r.strokeWidth:0,stroke:r.stroke?r.stroke:"#000000"};const h=Yt();Wi(()=>{n(0,i=null)});function a(l){t.$$.not_equal(o.stroke,l)&&(o.stroke=l,n(1,o))}function s(){o.strokeWidth=hy(this.value),n(1,o)}function c(){o.strokeWidth=this.value,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeStroke",{stroke:o})},[i,o,r,a,s,c,f]}class fE extends Ge{constructor(e){super(),$e(this,e,uE,cE,Xe,{selectProperty:0,object:2})}}function Vp(t,e,n){const i=t.slice();return i[6]=e[n],i[7]=e,i[8]=n,i}function Xp(t){let e,n,i;function r(a){t[3](a,t[6])}function o(){return t[4](t[6])}let h={isAlpha:!1,label:""};return t[6].fill!==void 0&&(h.hex=t[6].fill),e=new Ch({props:h}),it.push(()=>Et(e,"hex",r)),e.$on("input",o),{c(){he(e.$$.fragment)},m(a,s){ue(e,a,s),i=!0},p(a,s){t=a;const c={};!n&&s&2&&(n=!0,c.hex=t[6].fill,Ut(()=>n=!1)),e.$set(c)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){W(e.$$.fragment,a),i=!1},d(a){fe(e,a)}}}function hE(t){let e,n,i,r,o,h,a,s,c,f=Le(t[1]._objects),l=[];for(let d=0;d<f.length;d+=1)l[d]=Xp(Vp(t,f,d));const u=d=>W(l[d],1,1,()=>{l[d]=null});return h=new ke({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div");for(let d=0;d<l.length;d+=1)l[d].c();r=V(),o=E("button"),he(h.$$.fragment),S(i,"class","grow flex justify-center w-full color-picker-wrapper"),S(o,"type","button"),S(o,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(d,p){U(d,e,p),k(e,n),k(n,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);k(n,r),k(n,o),ue(h,o,null),a=!0,s||(c=ne(o,"click",t[5]),s=!0)},p(d,[p]){if(p&6){f=Le(d[1]._objects);let m;for(m=0;m<f.length;m+=1){const g=Vp(d,f,m);l[m]?(l[m].p(g,p),I(l[m],1)):(l[m]=Xp(g),l[m].c(),I(l[m],1),l[m].m(i,null))}for(Oe(),m=f.length;m<l.length;m+=1)u(m);Ee()}},i(d){if(!a){for(let p=0;p<f.length;p+=1)I(l[p]);I(h.$$.fragment,d),a=!0}},o(d){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)W(l[p]);W(h.$$.fragment,d),a=!1},d(d){d&&j(e),Ft(l,d),fe(h),s=!1,c()}}}function dE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e;const o=Yt();Wi(()=>{o("onChangeColorEnd"),n(0,i=null)});function h(c,f){t.$$.not_equal(f.fill,c)&&(f.fill=c,n(1,r))}const a=c=>{c.set("fill",c.fill),o("onChangeColors")},s=()=>n(0,i=null);return t.$$set=c=>{"selectProperty"in c&&n(0,i=c.selectProperty),"object"in c&&n(1,r=c.object)},[i,r,o,h,a,s]}class pE extends Ge{constructor(e){super(),$e(this,e,dE,hE,Xe,{selectProperty:0,object:1})}}function $p(t,e,n){const i=t.slice();return i[16]=e[n],i}function Gp(t){let e,n,i,r,o,h,a;function s(){return t[9](t[16])}return{c(){e=E("button"),n=E("img"),o=V(),Ze(n.src,i=t[16].file.url)||S(n,"src",i),S(n,"alt",r=t[16].name),S(n,"class","max-w-full"),S(e,"class","masonry-item flex flex-col justify-center")},m(c,f){U(c,e,f),k(e,n),k(e,o),h||(a=ne(e,"click",s),h=!0)},p(c,f){t=c,f&2&&!Ze(n.src,i=t[16].file.url)&&S(n,"src",i),f&2&&r!==(r=t[16].name)&&S(n,"alt",r)},d(c){c&&j(e),h=!1,a()}}}function gE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;h=new ke({props:{icon:"mingcute:left-line",height:"30"}});let _=Le(t[1]),b=[];for(let y=0;y<_.length;y+=1)b[y]=Gp($p(t,_,y));return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="클립아트",r=V(),o=E("button"),he(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("input"),l=V(),u=E("button"),u.textContent="검색",d=V(),p=E("div");for(let y=0;y<b.length;y+=1)b[y].c();S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"type","search"),S(f,"class","border p-2 rounded join-left text-sm grow"),S(f,"placeholder","키워드 검색"),f.required=!0,S(u,"type","submit"),S(u,"class","btn btn-sm primary-btn join-right text-sm"),S(c,"class","flex w-full"),S(s,"class","w-full mt-3"),S(p,"class","grow mt-3 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(y,C){U(y,e,C),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),Fe(f,t[3].keyword),k(c,l),k(c,u),k(e,d),k(e,p);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(p,null);t[10](p),m=!0,g||(v=[ne(o,"click",t[6]),ne(f,"input",t[7]),ne(u,"click",t[8])],g=!0)},p(y,[C]){if(C&8&&f.value!==y[3].keyword&&Fe(f,y[3].keyword),C&3){_=Le(y[1]);let w;for(w=0;w<_.length;w+=1){const T=$p(y,_,w);b[w]?b[w].p(T,C):(b[w]=Gp(T),b[w].c(),b[w].m(p,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=_.length}},i(y){m||(I(h.$$.fragment,y),m=!0)},o(y){W(h.$$.fragment,y),m=!1},d(y){y&&j(e),fe(h),Ft(b,y),t[10](null),g=!1,We(v)}}}function mE(t,e,n){let i,r;Ne(t,lo,_=>n(13,i=_)),Ne(t,Jt,_=>n(4,r=_));let{handleAddClipArt:o}=e;Yt();let h=[],a,s=!1,c=!0,f={perPage:24,current:0,keyword:"",categories:[]};async function l(_=!1){_&&(n(3,f.current=0,f),n(1,h=[])),s=!0;const b=await LT(i.id,f);n(1,h=[...h,...b.data]),c=b.data.length===f.perPage,s=!1}function u(){const _=a.scrollHeight,b=a.scrollTop,y=a.clientHeight;b+y>=_-100&&!s&&c&&(n(3,f.current++,f),l())}Yi(()=>{l(),a.addEventListener("scroll",u)});const d=()=>ye(Jt,r=null,r);function p(){f.keyword=this.value,n(3,f)}const m=()=>l(!0),g=_=>o(_);function v(_){it[_?"unshift":"push"](()=>{a=_,n(2,a)})}return t.$$set=_=>{"handleAddClipArt"in _&&n(0,o=_.handleAddClipArt)},[o,h,a,f,r,l,d,p,m,g,v]}class vE extends Ge{constructor(e){super(),$e(this,e,mE,gE,Xe,{handleAddClipArt:0})}}function _E(t){let e;return{c(){e=E("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function yE(t){let e;return{c(){e=E("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){U(n,e,i)},d(n){n&&j(e)}}}function bE(t){let e,n,i,r,o;function h(c,f){return c[0]?yE:_E}let a=h(t),s=a(t);return{c(){e=E("div"),s.c(),n=V(),i=E("input"),S(i,"type","file"),i.multiple=!0,S(e,"class","dropzone svelte-1xosmac"),S(e,"role","dropzone"),vi(e,"active",t[0])},m(c,f){U(c,e,f),s.m(e,null),k(e,n),k(e,i),r||(o=[ne(i,"change",t[4]),ne(e,"dragover",t[1]),ne(e,"dragleave",t[2]),ne(e,"drop",t[3])],r=!0)},p(c,[f]){a!==(a=h(c))&&(s.d(1),s=a(c),s&&(s.c(),s.m(e,n))),f&1&&vi(e,"active",c[0])},i:ve,o:ve,d(c){c&&j(e),s.d(),r=!1,We(o)}}}function wE(t,e,n){const i=Yt();let r=!1;function o(c){c.preventDefault(),n(0,r=!0)}function h(){n(0,r=!1)}function a(c){c.preventDefault(),n(0,r=!1);const f=c.dataTransfer.files;i("drop",f)}function s(c){const f=c.target.files;i("drop",f)}return[r,o,h,a,s]}class CE extends Ge{constructor(e){super(),$e(this,e,wE,bE,Xe,{})}}/*!
* Cropper.js v1.6.1
* https://fengyuanchen.github.io/cropperjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:44:19.860Z
*/function qp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qp(Object(n),!0).forEach(function(i){kE(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qp(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function SE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kp(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fb(i.key),i)}}function TE(t,e,n){return e&&Kp(t.prototype,e),n&&Kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kE(t,e,n){return e=fb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ub(t){return OE(t)||EE(t)||xE(t)||DE()}function OE(t){if(Array.isArray(t))return ff(t)}function EE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xE(t,e){if(t){if(typeof t=="string")return ff(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ff(t,e)}}function ff(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function DE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AE(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fb(t){var e=AE(t,"string");return typeof e=="symbol"?e:String(e)}var ac=typeof window<"u"&&typeof window.document<"u",_i=ac?window:{},Sh=ac&&_i.document.documentElement?"ontouchstart"in _i.document.documentElement:!1,Th=ac?"PointerEvent"in _i:!1,bt="cropper",kh="all",hb="crop",db="move",pb="zoom",yr="e",br="w",as="s",Vi="n",Co="ne",So="nw",To="se",ko="sw",hf="".concat(bt,"-crop"),Jp="".concat(bt,"-disabled"),yn="".concat(bt,"-hidden"),Zp="".concat(bt,"-hide"),PE="".concat(bt,"-invisible"),Nl="".concat(bt,"-modal"),df="".concat(bt,"-move"),Qo="".concat(bt,"Action"),za="".concat(bt,"Preview"),Oh="crop",gb="move",mb="none",pf="crop",gf="cropend",mf="cropmove",vf="cropstart",Qp="dblclick",ME=Sh?"touchstart":"mousedown",RE=Sh?"touchmove":"mousemove",IE=Sh?"touchend touchcancel":"mouseup",eg=Th?"pointerdown":ME,tg=Th?"pointermove":RE,ng=Th?"pointerup pointercancel":IE,ig="ready",rg="resize",sg="wheel",_f="zoom",og="image/jpeg",FE=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,LE=/^data:/,NE=/^data:image\/jpeg;base64,/,jE=/^img|canvas$/i,vb=200,_b=100,ag={viewMode:0,dragMode:Oh,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:vb,minContainerHeight:_b,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},BE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',UE=Number.isNaN||_i.isNaN;function Ke(t){return typeof t=="number"&&!UE(t)}var lg=function(e){return e>0&&e<1/0};function uu(t){return typeof t>"u"}function Xr(t){return uf(t)==="object"&&t!==null}var YE=Object.prototype.hasOwnProperty;function Ss(t){if(!Xr(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&YE.call(n,"isPrototypeOf")}catch{return!1}}function vn(t){return typeof t=="function"}var WE=Array.prototype.slice;function yb(t){return Array.from?Array.from(t):WE.call(t)}function Bt(t,e){return t&&vn(e)&&(Array.isArray(t)||Ke(t.length)?yb(t).forEach(function(n,i){e.call(t,n,i,t)}):Xr(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var Ct=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Xr(e)&&i.length>0&&i.forEach(function(o){Xr(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},zE=/\.\d*(?:0|9){12}\d*$/;function Is(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return zE.test(t)?Math.round(t*e)/e:t}var HE=/^width|height|left|top|marginLeft|marginTop$/;function tr(t,e){var n=t.style;Bt(e,function(i,r){HE.test(r)&&Ke(i)&&(i="".concat(i,"px")),n[r]=i})}function VE(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function qt(t,e){if(e){if(Ke(t.length)){Bt(t,function(i){qt(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function di(t,e){if(e){if(Ke(t.length)){Bt(t,function(n){di(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Ts(t,e,n){if(e){if(Ke(t.length)){Bt(t,function(i){Ts(i,e,n)});return}n?qt(t,e):di(t,e)}}var XE=/([a-z\d])([A-Z])/g;function Eh(t){return t.replace(XE,"$1-$2").toLowerCase()}function yf(t,e){return Xr(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Eh(e)))}function ea(t,e,n){Xr(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Eh(e)),n)}function $E(t,e){if(Xr(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Eh(e)))}var bb=/\s\s*/,wb=function(){var t=!1;if(ac){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});_i.addEventListener("test",n,i),_i.removeEventListener("test",n,i)}return t}();function Vn(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(bb).forEach(function(o){if(!wb){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function In(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(bb).forEach(function(o){if(i.once&&!wb){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Fs(t,e,n){var i;return vn(Event)&&vn(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(i)}function Cb(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var fu=_i.location,GE=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function cg(t){var e=t.match(GE);return e!==null&&(e[1]!==fu.protocol||e[2]!==fu.hostname||e[3]!==fu.port)}function ug(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Ho(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Ke(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Ke(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Ke(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Ke(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Ke(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function qE(t){var e=cb({},t),n=0;return Bt(t,function(i,r){delete e[r],Bt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;Math.abs(u)>Math.abs(n)&&(n=u)})}),n}function Ha(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:cb({startX:n,startY:i},r)}function KE(t){var e=0,n=0,i=0;return Bt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}function nr(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=lg(i),h=lg(n);if(o&&h){var a=n*e;r==="contain"&&a>i||r==="cover"&&a<i?n=i/e:i=n*e}else o?n=i/e:h&&(i=n*e);return{width:i,height:n}}function JE(t){var e=t.width,n=t.height,i=t.degree;if(i=Math.abs(i)%180,i===90)return{width:n,height:e};var r=i%90*Math.PI/180,o=Math.sin(r),h=Math.cos(r),a=e*h+n*o,s=e*o+n*h;return i>90?{width:s,height:a}:{width:a,height:s}}function ZE(t,e,n,i){var r=e.aspectRatio,o=e.naturalWidth,h=e.naturalHeight,a=e.rotate,s=a===void 0?0:a,c=e.scaleX,f=c===void 0?1:c,l=e.scaleY,u=l===void 0?1:l,d=n.aspectRatio,p=n.naturalWidth,m=n.naturalHeight,g=i.fillColor,v=g===void 0?"transparent":g,_=i.imageSmoothingEnabled,b=_===void 0?!0:_,y=i.imageSmoothingQuality,C=y===void 0?"low":y,w=i.maxWidth,T=w===void 0?1/0:w,O=i.maxHeight,A=O===void 0?1/0:O,L=i.minWidth,G=L===void 0?0:L,Y=i.minHeight,te=Y===void 0?0:Y,q=document.createElement("canvas"),N=q.getContext("2d"),B=nr({aspectRatio:d,width:T,height:A}),Q=nr({aspectRatio:d,width:G,height:te},"cover"),ee=Math.min(B.width,Math.max(Q.width,p)),x=Math.min(B.height,Math.max(Q.height,m)),P=nr({aspectRatio:r,width:T,height:A}),R=nr({aspectRatio:r,width:G,height:te},"cover"),F=Math.min(P.width,Math.max(R.width,o)),K=Math.min(P.height,Math.max(R.height,h)),M=[-F/2,-K/2,F,K];return q.width=Is(ee),q.height=Is(x),N.fillStyle=v,N.fillRect(0,0,ee,x),N.save(),N.translate(ee/2,x/2),N.rotate(s*Math.PI/180),N.scale(f,u),N.imageSmoothingEnabled=b,N.imageSmoothingQuality=C,N.drawImage.apply(N,[t].concat(ub(M.map(function(D){return Math.floor(Is(D))})))),N.restore(),q}var Sb=String.fromCharCode;function QE(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=Sb(t.getUint8(r));return i}var ex=/^data:.*,/;function tx(t){var e=t.replace(ex,""),n=atob(e),i=new ArrayBuffer(n.length),r=new Uint8Array(i);return Bt(r,function(o,h){r[h]=n.charCodeAt(h)}),i}function nx(t,e){for(var n=[],i=8192,r=new Uint8Array(t);r.length>0;)n.push(Sb.apply(null,yb(r.subarray(0,i)))),r=r.subarray(i);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function ix(t){var e=new DataView(t),n;try{var i,r,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,a=2;a+1<h;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var s=r+4,c=r+10;if(QE(e,s,4)==="Exif"){var f=e.getUint16(c);if(i=f===18761,(i||f===19789)&&e.getUint16(c+2,i)===42){var l=e.getUint32(c+4,i);l>=8&&(o=c+l)}}}if(o){var u=e.getUint16(o,i),d,p;for(p=0;p<u;p+=1)if(d=o+p*12+2,e.getUint16(d,i)===274){d+=8,n=e.getUint16(d,i),e.setUint16(d,1,i);break}}}catch{n=1}return n}function rx(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:i}}var sx={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,i=this.container,r=this.cropper,o=Number(n.minContainerWidth),h=Number(n.minContainerHeight);qt(r,yn),di(e,yn);var a={width:Math.max(i.offsetWidth,o>=0?o:vb),height:Math.max(i.offsetHeight,h>=0?h:_b)};this.containerData=a,tr(r,{width:a.width,height:a.height}),qt(e,yn),di(r,yn)},initCanvas:function(){var e=this.containerData,n=this.imageData,i=this.options.viewMode,r=Math.abs(n.rotate)%180===90,o=r?n.naturalHeight:n.naturalWidth,h=r?n.naturalWidth:n.naturalHeight,a=o/h,s=e.width,c=e.height;e.height*a>e.width?i===3?s=e.height*a:c=e.width/a:i===3?c=e.width/a:s=e.height*a;var f={aspectRatio:a,naturalWidth:o,naturalHeight:h,width:s,height:c};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=Ct({},f)},limitCanvas:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=i.viewMode,s=o.aspectRatio,c=this.cropped&&h;if(e){var f=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;a>1?(f=Math.max(f,r.width),l=Math.max(l,r.height),a===3&&(l*s>f?f=l*s:l=f/s)):a>0&&(f?f=Math.max(f,c?h.width:0):l?l=Math.max(l,c?h.height:0):c&&(f=h.width,l=h.height,l*s>f?f=l*s:l=f/s));var u=nr({aspectRatio:s,width:f,height:l});f=u.width,l=u.height,o.minWidth=f,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(n)if(a>(c?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),c&&this.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,a===2&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,n){var i=this.canvasData,r=this.imageData;if(n){var o=JE({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),h=o.width,a=o.height,s=i.width*(h/i.naturalWidth),c=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(c-i.height)/2,i.width=s,i.height=c,i.aspectRatio=h/a,i.naturalWidth=h,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,tr(this.canvas,Ct({width:i.width,height:i.height},Ho({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,i=this.imageData,r=i.naturalWidth*(n.width/n.naturalWidth),o=i.naturalHeight*(n.height/n.naturalHeight);Ct(i,{width:r,height:o,left:(n.width-r)/2,top:(n.height-o)/2}),tr(this.image,Ct({width:i.width,height:i.height},Ho(Ct({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:n.width,height:n.height};i&&(n.height*i>n.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=n.left+(n.width-o.width)/2,o.top=n.top+(n.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Ct({},o)},limitCropBox:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(e){var c=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,l=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,u=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;c=Math.min(c,r.width),f=Math.min(f,r.height),s&&(c&&f?f*s>c?f=c/s:c=f*s:c?f=c/s:f&&(c=f*s),u*s>l?u=l/s:l=u*s),h.minWidth=Math.min(c,l),h.minHeight=Math.min(f,u),h.maxWidth=l,h.maxHeight=u}n&&(a?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(r.width,o.left+o.width)-h.width,h.maxTop=Math.min(r.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=r.width-h.width,h.maxTop=r.height-h.height))},renderCropBox:function(){var e=this.options,n=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&ea(this.face,Qo,i.width>=n.width&&i.height>=n.height?db:kh),tr(this.cropBox,Ct({width:i.width,height:i.height},Ho({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Fs(this.element,pf,this.getData())}},ox={initPreview:function(){var e=this.element,n=this.crossOrigin,i=this.options.preview,r=n?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",h=document.createElement("img");if(n&&(h.crossOrigin=n),h.src=r,h.alt=o,this.viewBox.appendChild(h),this.viewBoxImage=h,!!i){var a=i;typeof i=="string"?a=e.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,Bt(a,function(s){var c=document.createElement("img");ea(s,za,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),n&&(c.crossOrigin=n),c.src=r,c.alt=o,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(c)})}},resetPreview:function(){Bt(this.previews,function(e){var n=yf(e,za);tr(e,{width:n.width,height:n.height}),e.innerHTML=n.html,$E(e,za)})},preview:function(){var e=this.imageData,n=this.canvasData,i=this.cropBoxData,r=i.width,o=i.height,h=e.width,a=e.height,s=i.left-n.left-e.left,c=i.top-n.top-e.top;!this.cropped||this.disabled||(tr(this.viewBoxImage,Ct({width:h,height:a},Ho(Ct({translateX:-s,translateY:-c},e)))),Bt(this.previews,function(f){var l=yf(f,za),u=l.width,d=l.height,p=u,m=d,g=1;r&&(g=u/r,m=o*g),o&&m>d&&(g=d/o,p=r*g,m=d),tr(f,{width:p,height:m}),tr(f.getElementsByTagName("img")[0],Ct({width:h*g,height:a*g},Ho(Ct({translateX:-s*g,translateY:-c*g},e))))}))}},ax={bind:function(){var e=this.element,n=this.options,i=this.cropper;vn(n.cropstart)&&In(e,vf,n.cropstart),vn(n.cropmove)&&In(e,mf,n.cropmove),vn(n.cropend)&&In(e,gf,n.cropend),vn(n.crop)&&In(e,pf,n.crop),vn(n.zoom)&&In(e,_f,n.zoom),In(i,eg,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&In(i,sg,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&In(i,Qp,this.onDblclick=this.dblclick.bind(this)),In(e.ownerDocument,tg,this.onCropMove=this.cropMove.bind(this)),In(e.ownerDocument,ng,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&In(window,rg,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,i=this.cropper;vn(n.cropstart)&&Vn(e,vf,n.cropstart),vn(n.cropmove)&&Vn(e,mf,n.cropmove),vn(n.cropend)&&Vn(e,gf,n.cropend),vn(n.crop)&&Vn(e,pf,n.crop),vn(n.zoom)&&Vn(e,_f,n.zoom),Vn(i,eg,this.onCropStart),n.zoomable&&n.zoomOnWheel&&Vn(i,sg,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Vn(i,Qp,this.onDblclick),Vn(e.ownerDocument,tg,this.onCropMove),Vn(e.ownerDocument,ng,this.onCropEnd),n.responsive&&Vn(window,rg,this.onResize)}},lx={resize:function(){if(!this.disabled){var e=this.options,n=this.container,i=this.containerData,r=n.offsetWidth/i.width,o=n.offsetHeight/i.height,h=Math.abs(r-1)>Math.abs(o-1)?r:o;if(h!==1){var a,s;e.restore&&(a=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Bt(a,function(c,f){a[f]=c*h})),this.setCropBoxData(Bt(s,function(c,f){s[f]=c*h})))}}},dblclick:function(){this.disabled||this.options.dragMode===mb||this.setDragMode(VE(this.dragBox,hf)?gb:Oh)},wheel:function(e){var n=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,e)))},cropStart:function(e){var n=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Ke(n)&&n!==1||Ke(i)&&i!==0||e.ctrlKey))){var r=this.options,o=this.pointers,h;e.changedTouches?Bt(e.changedTouches,function(a){o[a.identifier]=Ha(a)}):o[e.pointerId||0]=Ha(e),Object.keys(o).length>1&&r.zoomable&&r.zoomOnTouch?h=pb:h=yf(e.target,Qo),FE.test(h)&&Fs(this.element,vf,{originalEvent:e,action:h})!==!1&&(e.preventDefault(),this.action=h,this.cropping=!1,h===hb&&(this.cropping=!0,qt(this.dragBox,Nl)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var i=this.pointers;e.preventDefault(),Fs(this.element,mf,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Bt(e.changedTouches,function(r){Ct(i[r.identifier]||{},Ha(r,!0))}):Ct(i[e.pointerId||0]||{},Ha(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,i=this.pointers;e.changedTouches?Bt(e.changedTouches,function(r){delete i[r.identifier]}):delete i[e.pointerId||0],n&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ts(this.dragBox,Nl,this.cropped&&this.options.modal)),Fs(this.element,gf,{originalEvent:e,action:n}))}}},cx={change:function(e){var n=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,h=this.pointers,a=this.action,s=n.aspectRatio,c=o.left,f=o.top,l=o.width,u=o.height,d=c+l,p=f+u,m=0,g=0,v=r.width,_=r.height,b=!0,y;!s&&e.shiftKey&&(s=l&&u?l/u:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(r.width,i.width,i.left+i.width),_=g+Math.min(r.height,i.height,i.top+i.height));var C=h[Object.keys(h)[0]],w={x:C.endX-C.startX,y:C.endY-C.startY},T=function(A){switch(A){case yr:d+w.x>v&&(w.x=v-d);break;case br:c+w.x<m&&(w.x=m-c);break;case Vi:f+w.y<g&&(w.y=g-f);break;case as:p+w.y>_&&(w.y=_-p);break}};switch(a){case kh:c+=w.x,f+=w.y;break;case yr:if(w.x>=0&&(d>=v||s&&(f<=g||p>=_))){b=!1;break}T(yr),l+=w.x,l<0&&(a=br,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case Vi:if(w.y<=0&&(f<=g||s&&(c<=m||d>=v))){b=!1;break}T(Vi),u-=w.y,f+=w.y,u<0&&(a=as,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case br:if(w.x<=0&&(c<=m||s&&(f<=g||p>=_))){b=!1;break}T(br),l-=w.x,c+=w.x,l<0&&(a=yr,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case as:if(w.y>=0&&(p>=_||s&&(c<=m||d>=v))){b=!1;break}T(as),u+=w.y,u<0&&(a=Vi,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case Co:if(s){if(w.y<=0&&(f<=g||d>=v)){b=!1;break}T(Vi),u-=w.y,f+=w.y,l=u*s}else T(Vi),T(yr),w.x>=0?d<v?l+=w.x:w.y<=0&&f<=g&&(b=!1):l+=w.x,w.y<=0?f>g&&(u-=w.y,f+=w.y):(u-=w.y,f+=w.y);l<0&&u<0?(a=ko,u=-u,l=-l,f-=u,c-=l):l<0?(a=So,l=-l,c-=l):u<0&&(a=To,u=-u,f-=u);break;case So:if(s){if(w.y<=0&&(f<=g||c<=m)){b=!1;break}T(Vi),u-=w.y,f+=w.y,l=u*s,c+=o.width-l}else T(Vi),T(br),w.x<=0?c>m?(l-=w.x,c+=w.x):w.y<=0&&f<=g&&(b=!1):(l-=w.x,c+=w.x),w.y<=0?f>g&&(u-=w.y,f+=w.y):(u-=w.y,f+=w.y);l<0&&u<0?(a=To,u=-u,l=-l,f-=u,c-=l):l<0?(a=Co,l=-l,c-=l):u<0&&(a=ko,u=-u,f-=u);break;case ko:if(s){if(w.x<=0&&(c<=m||p>=_)){b=!1;break}T(br),l-=w.x,c+=w.x,u=l/s}else T(as),T(br),w.x<=0?c>m?(l-=w.x,c+=w.x):w.y>=0&&p>=_&&(b=!1):(l-=w.x,c+=w.x),w.y>=0?p<_&&(u+=w.y):u+=w.y;l<0&&u<0?(a=Co,u=-u,l=-l,f-=u,c-=l):l<0?(a=To,l=-l,c-=l):u<0&&(a=So,u=-u,f-=u);break;case To:if(s){if(w.x>=0&&(d>=v||p>=_)){b=!1;break}T(yr),l+=w.x,u=l/s}else T(as),T(yr),w.x>=0?d<v?l+=w.x:w.y>=0&&p>=_&&(b=!1):l+=w.x,w.y>=0?p<_&&(u+=w.y):u+=w.y;l<0&&u<0?(a=So,u=-u,l=-l,f-=u,c-=l):l<0?(a=ko,l=-l,c-=l):u<0&&(a=Co,u=-u,f-=u);break;case db:this.move(w.x,w.y),b=!1;break;case pb:this.zoom(qE(h),e),b=!1;break;case hb:if(!w.x||!w.y){b=!1;break}y=Cb(this.cropper),c=C.startX-y.left,f=C.startY-y.top,l=o.minWidth,u=o.minHeight,w.x>0?a=w.y>0?To:Co:w.x<0&&(c-=l,a=w.y>0?ko:So),w.y<0&&(f-=u),this.cropped||(di(this.cropBox,yn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(o.width=l,o.height=u,o.left=c,o.top=f,this.action=a,this.renderCropBox()),Bt(h,function(O){O.startX=O.endX,O.startY=O.endY})}},ux={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&qt(this.dragBox,Nl),di(this.cropBox,yn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ct({},this.initialImageData),this.canvasData=Ct({},this.initialCanvasData),this.cropBoxData=Ct({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ct(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),di(this.dragBox,Nl),qt(this.cropBox,yn)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Bt(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,di(this.cropper,Jp)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,qt(this.cropper,Jp)),this},destroy:function(){var e=this.element;return e[bt]?(e[bt]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=i.left,o=i.top;return this.moveTo(uu(e)?e:r+Number(e),uu(n)?n:o+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Ke(e)&&(i.left=e,r=!0),Ke(n)&&(i.top=n,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,n){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,n)},zoomTo:function(e,n,i){var r=this.options,o=this.canvasData,h=o.width,a=o.height,s=o.naturalWidth,c=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var f=s*e,l=c*e;if(Fs(this.element,_f,{ratio:e,oldRatio:h/s,originalEvent:i})===!1)return this;if(i){var u=this.pointers,d=Cb(this.cropper),p=u&&Object.keys(u).length?KE(u):{pageX:i.pageX,pageY:i.pageY};o.left-=(f-h)*((p.pageX-d.left-o.left)/h),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else Ss(n)&&Ke(n.x)&&Ke(n.y)?(o.left-=(f-h)*((n.x-o.left)/h),o.top-=(l-a)*((n.y-o.top)/a)):(o.left-=(f-h)/2,o.top-=(l-a)/2);o.width=f,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Ke(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Ke(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Ke(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Ke(e)&&(i.scaleX=e,r=!0),Ke(n)&&(i.scaleY=n,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,i=this.imageData,r=this.canvasData,o=this.cropBoxData,h;if(this.ready&&this.cropped){h={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height};var a=i.width/i.naturalWidth;if(Bt(h,function(f,l){h[l]=f/a}),e){var s=Math.round(h.y+h.height),c=Math.round(h.x+h.width);h.x=Math.round(h.x),h.y=Math.round(h.y),h.width=c-h.x,h.height=s-h.y}}else h={x:0,y:0,width:0,height:0};return n.rotatable&&(h.rotate=i.rotate||0),n.scalable&&(h.scaleX=i.scaleX||1,h.scaleY=i.scaleY||1),h},setData:function(e){var n=this.options,i=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&Ss(e)){var h=!1;n.rotatable&&Ke(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,h=!0),n.scalable&&(Ke(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,h=!0),Ke(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,h=!0)),h&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;Ke(e.x)&&(o.left=e.x*a+r.left),Ke(e.y)&&(o.top=e.y*a+r.top),Ke(e.width)&&(o.width=e.width*a),Ke(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Ct({},this.containerData):{}},getImageData:function(){return this.sized?Ct({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Bt(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=e[i]}),n},setCanvasData:function(e){var n=this.canvasData,i=n.aspectRatio;return this.ready&&!this.disabled&&Ss(e)&&(Ke(e.left)&&(n.left=e.left),Ke(e.top)&&(n.top=e.top),Ke(e.width)?(n.width=e.width,n.height=e.width/i):Ke(e.height)&&(n.height=e.height,n.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,i=this.options.aspectRatio,r,o;return this.ready&&this.cropped&&!this.disabled&&Ss(e)&&(Ke(e.left)&&(n.left=e.left),Ke(e.top)&&(n.top=e.top),Ke(e.width)&&e.width!==n.width&&(r=!0,n.width=e.width),Ke(e.height)&&e.height!==n.height&&(o=!0,n.height=e.height),i&&(r?n.height=n.width/i:o&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,i=ZE(this.image,this.imageData,n,e);if(!this.cropped)return i;var r=this.getData(e.rounded),o=r.x,h=r.y,a=r.width,s=r.height,c=i.width/Math.floor(n.naturalWidth);c!==1&&(o*=c,h*=c,a*=c,s*=c);var f=a/s,l=nr({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),u=nr({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),d=nr({aspectRatio:f,width:e.width||(c!==1?i.width:a),height:e.height||(c!==1?i.height:s)}),p=d.width,m=d.height;p=Math.min(l.width,Math.max(u.width,p)),m=Math.min(l.height,Math.max(u.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Is(p),g.height=Is(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,p,m);var _=e.imageSmoothingEnabled,b=_===void 0?!0:_,y=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var C=i.width,w=i.height,T=o,O=h,A,L,G,Y,te,q;T<=-a||T>C?(T=0,A=0,G=0,te=0):T<=0?(G=-T,T=0,A=Math.min(C,a+T),te=A):T<=C&&(G=0,A=Math.min(a,C-T),te=A),A<=0||O<=-s||O>w?(O=0,L=0,Y=0,q=0):O<=0?(Y=-O,O=0,L=Math.min(w,s+O),q=L):O<=w&&(Y=0,L=Math.min(s,w-O),q=L);var N=[T,O,A,L];if(te>0&&q>0){var B=p/a;N.push(G*B,Y*B,te*B,q*B)}return v.drawImage.apply(v,[i].concat(ub(N.map(function(Q){return Math.floor(Is(Q))})))),g},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!uu(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===Oh,h=n.movable&&e===gb;e=o||h?e:mb,n.dragMode=e,ea(i,Qo,e),Ts(i,hf,o),Ts(i,df,h),n.cropBoxMovable||(ea(r,Qo,e),Ts(r,hf,o),Ts(r,df,h))}return this}},fx=_i.Cropper,Tb=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(SE(this,t),!e||!jE.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Ct({},ag,Ss(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return TE(t,[{key:"init",value:function(){var n=this.element,i=n.tagName.toLowerCase(),r;if(!n[bt]){if(n[bt]=this,i==="img"){if(this.isImg=!0,r=n.getAttribute("src")||"",this.originalUrl=r,!r)return;r=n.src}else i==="canvas"&&window.HTMLCanvasElement&&(r=n.toDataURL());this.load(r)}}},{key:"load",value:function(n){var i=this;if(n){this.url=n,this.imageData={};var r=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(LE.test(n)){NE.test(n)?this.read(tx(n)):this.clone();return}var h=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=a,h.onerror=a,h.ontimeout=a,h.onprogress=function(){h.getResponseHeader("content-type")!==og&&h.abort()},h.onload=function(){i.read(h.response)},h.onloadend=function(){i.reloading=!1,i.xhr=null},o.checkCrossOrigin&&cg(n)&&r.crossOrigin&&(n=ug(n)),h.open("GET",n,!0),h.responseType="arraybuffer",h.withCredentials=r.crossOrigin==="use-credentials",h.send()}}},{key:"read",value:function(n){var i=this.options,r=this.imageData,o=ix(n),h=0,a=1,s=1;if(o>1){this.url=nx(n,og);var c=rx(o);h=c.rotate,a=c.scaleX,s=c.scaleY}i.rotatable&&(r.rotate=h),i.scalable&&(r.scaleX=a,r.scaleY=s),this.clone()}},{key:"clone",value:function(){var n=this.element,i=this.url,r=n.crossOrigin,o=i;this.options.checkCrossOrigin&&cg(i)&&(r||(r="anonymous"),o=ug(i)),this.crossOrigin=r,this.crossOriginUrl=o;var h=document.createElement("img");r&&(h.crossOrigin=r),h.src=o||i,h.alt=n.alt||"The image to crop",this.image=h,h.onload=this.start.bind(this),h.onerror=this.stop.bind(this),qt(h,Zp),n.parentNode.insertBefore(h,n.nextSibling)}},{key:"start",value:function(){var n=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var r=_i.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(_i.navigator.userAgent),o=function(c,f){Ct(n.imageData,{naturalWidth:c,naturalHeight:f,aspectRatio:c/f}),n.initialImageData=Ct({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(i.naturalWidth&&!r){o(i.naturalWidth,i.naturalHeight);return}var h=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=h,h.onload=function(){o(h.width,h.height),r||a.removeChild(h)},h.src=i.src,r||(h.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(h))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,i=this.options,r=this.image,o=n.parentNode,h=document.createElement("div");h.innerHTML=BE;var a=h.querySelector(".".concat(bt,"-container")),s=a.querySelector(".".concat(bt,"-canvas")),c=a.querySelector(".".concat(bt,"-drag-box")),f=a.querySelector(".".concat(bt,"-crop-box")),l=f.querySelector(".".concat(bt,"-face"));this.container=o,this.cropper=a,this.canvas=s,this.dragBox=c,this.cropBox=f,this.viewBox=a.querySelector(".".concat(bt,"-view-box")),this.face=l,s.appendChild(r),qt(n,yn),o.insertBefore(a,n.nextSibling),di(r,Zp),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,qt(f,yn),i.guides||qt(f.getElementsByClassName("".concat(bt,"-dashed")),yn),i.center||qt(f.getElementsByClassName("".concat(bt,"-center")),yn),i.background&&qt(a,"".concat(bt,"-bg")),i.highlight||qt(l,PE),i.cropBoxMovable&&(qt(l,df),ea(l,Qo,kh)),i.cropBoxResizable||(qt(f.getElementsByClassName("".concat(bt,"-line")),yn),qt(f.getElementsByClassName("".concat(bt,"-point")),yn)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),vn(i.ready)&&In(n,ig,i.ready,{once:!0}),Fs(n,ig)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),di(this.element,yn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=fx,t}},{key:"setDefaults",value:function(n){Ct(ag,Ss(n)&&n)}}]),t}();Ct(Tb.prototype,sx,ox,ax,lx,cx,ux);let xh="https://podiz-convert-uieqvbv3ya-du.a.run.app";const hx=async(t,e,n="#FFFFFF")=>{try{const i={colorCode:n,composites:t.composites,printIndex:e,prints:t.prints,scenes:t.scenes};return await(await fetch(`${xh}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}catch(i){console.log({error:i})}},dx=async(t,e)=>{try{const n={data:e,shopid:t};return await(await fetch(`${xh}/background_remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(n){return JSON.stringify(n)}},fg=async t=>{try{return await(await fetch(`${xh}/thumbnail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}};function px(t){return Object.keys(t).reduce((e,n)=>t[n]===void 0?e:e+`${n}:${t[n]};`,"")}px({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function kb(t,...e){const n={};for(const i of Object.keys(t))e.includes(i)||(n[i]=t[i]);return n}function Va(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=i)}return e}function hg(t){function e(n){return n(t),()=>{}}return{subscribe:e}}const Xa=t=>new Proxy(t,{get(e,n,i){return Reflect.get(e,n,i)},ownKeys(e){return Reflect.ownKeys(e).filter(n=>n!=="action")}}),dg=t=>typeof t=="function";Ob("empty");function Ob(t,e){const{stores:n,action:i,returned:r}=e??{},o=(()=>{if(n&&r)return x1(n,a=>{const s=r(a);if(dg(s)){const c=(...f)=>Xa(Va({...s(...f),[`data-melt-${t}`]:"",action:i??ls}));return c.action=i??ls,c}return Xa(Va({...s,[`data-melt-${t}`]:"",action:i??ls}))});{const a=r,s=a==null?void 0:a();if(dg(s)){const c=(...f)=>Xa(Va({...s(...f),[`data-melt-${t}`]:"",action:i??ls}));return c.action=i??ls,hg(c)}return hg(Xa(Va({...s,[`data-melt-${t}`]:"",action:i??ls})))}})(),h=i??(()=>{});return h.subscribe=o.subscribe,h}function gx(t){const e=o=>o?`${t}-${o}`:t,n=o=>`data-melt-${t}${o?`-${o}`:""}`,i=o=>`[data-melt-${t}${o?`-${o}`:""}]`;return{name:e,attribute:n,selector:i,getEl:o=>document.querySelector(i(o))}}function ls(){}function Eb(t,e,n,i){const r=Array.isArray(e)?e:[e];return r.forEach(o=>t.addEventListener(o,n,i)),()=>{r.forEach(o=>t.removeEventListener(o,n,i))}}function lc(t){return{...t,get:()=>fi(t)}}lc.writable=function(t){const e=xt(t);let n=t;return{subscribe:e.subscribe,set(i){e.set(i),n=i},update(i){const r=i(n);e.set(r),n=r},get(){return n}}};lc.derived=function(t,e){const n=new Map,i=()=>{const o=Array.isArray(t)?t.map(h=>h.get()):t.get();return e(o)};return{get:i,subscribe:o=>{const h=[];return(Array.isArray(t)?t:[t]).forEach(s=>{h.push(s.subscribe(()=>{o(i())}))}),o(i()),n.set(o,h),()=>{const s=n.get(o);if(s)for(const c of s)c();n.delete(o)}}}};const mx=(t,e)=>{const n=lc(t),i=(o,h)=>{n.update(a=>{const s=o(a);let c=s;return e&&(c=e({curr:a,next:s})),h==null||h(c),c})};return{...n,update:i,set:o=>{i(()=>o)}}},vx={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function _x(t){const e={};return Object.keys(t).forEach(n=>{const i=n,r=t[i];e[i]=lc(xt(r))}),e}Ms(void 0,t=>{function e(i){t(i),t(void 0)}return Eb(document,"pointerup",e,{passive:!1,capture:!0})});Ms(void 0,t=>{function e(i){i&&i.key===vx.ESCAPE&&t(i),t(void 0)}return Eb(document,"keydown",e,{passive:!1})});Ms(!1),Ms(!1),Ms(void 0);const yx={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...kb(yx,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const bx={defaultValue:0,max:100},{name:wx}=gx("progress"),Cx=t=>{const e={...bx,...t},n=_x(kb(e,"value")),{max:i}=n,r=e.value??xt(e.defaultValue),o=mx(r,e==null?void 0:e.onValueChange);return{elements:{root:Ob(wx(),{stores:[o,i],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:o},options:n}};function pg(t){let e,n,i,r,o,h=[t[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}],a={};for(let s=0;s<h.length;s+=1)a=gi(a,h[s]);return{c(){e=E("div"),n=E("div"),S(n,"class","h-full w-full bg-black transition-transform duration-[660ms] ease-[cubic-bezier(0.65,0,0.35,1)]"),S(n,"style",i=`transform: translateX(-${100-100*(t[1]??0)/(t[3]??1)}%)`),kl(e,a),vi(e,"svelte-1p3ocr8",!0)},m(s,c){U(s,e,c),k(e,n),r||(o=sy(t[2].action(e)),r=!0)},p(s,c){c&10&&i!==(i=`transform: translateX(-${100-100*(s[1]??0)/(s[3]??1)}%)`)&&S(n,"style",i),kl(e,a=Hr(h,[c&4&&s[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}])),vi(e,"svelte-1p3ocr8",!0)},d(s){s&&j(e),r=!1,o()}}}function Sx(t){let e,n,i,r,o,h;const a=t[7].default,s=da(a,t,t[6],null);let c=t[0]&&t[1]&&pg(t);return{c(){e=E("div"),n=E("div"),n.innerHTML='<div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div>',i=V(),r=E("div"),s&&s.c(),o=V(),c&&c.c(),S(n,"class","loader svelte-1p3ocr8"),S(r,"class","loader-text svelte-1p3ocr8"),S(e,"class","loader-container svelte-1p3ocr8")},m(f,l){U(f,e,l),k(e,n),k(e,i),k(e,r),s&&s.m(r,null),k(e,o),c&&c.m(e,null),h=!0},p(f,[l]){s&&s.p&&(!h||l&64)&&ga(s,a,f,f[6],h?pa(a,f[6],l,null):ma(f[6]),null),f[0]&&f[1]?c?c.p(f,l):(c=pg(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){h||(I(s,f),h=!0)},o(f){W(s,f),h=!1},d(f){f&&j(e),s&&s.d(f),c&&c.d()}}}function Tx(t,e,n){let i,r,{$$slots:o={},$$scope:h}=e,{isProgress:a=!1}=e,{progress:s=0}=e;const{elements:{root:c},options:{max:f}}=Cx({max:100});return Ne(t,c,l=>n(2,i=l)),Ne(t,f,l=>n(3,r=l)),t.$$set=l=>{"isProgress"in l&&n(0,a=l.isProgress),"progress"in l&&n(1,s=l.progress),"$$scope"in l&&n(6,h=l.$$scope)},[a,s,i,r,c,f,h,o]}class xb extends Ge{constructor(e){super(),$e(this,e,Tx,Sx,Xe,{isProgress:0,progress:1})}}function kx(){const t={};return document.getElementById("podiz-publish-uuid")&&(t.uuid=document.getElementById("podiz-publish-uuid").value),document.getElementById("podiz-shop-id")&&(t.shopid=document.getElementById("podiz-shop-id").value),document.getElementById("podiz-provider")&&(t.provider=document.getElementById("podiz-provider").value),document.getElementById("podiz-productno")&&(t.productno=document.getElementById("podiz-productno").value),document.getElementById("podiz-preview-class")&&(t.previewclass=document.getElementById("podiz-preview-class").value),document.getElementById("podiz-preview-item-class")&&(t.previewitem=document.getElementById("podiz-preview-item-class").value),document.getElementById("podiz-mode")&&(t.mode=document.getElementById("podiz-mode").value),t}function Ox(){const t=document.querySelectorAll('input[type="hidden"].podiz-hidden');t.forEach(n=>{const i=n.value;document.querySelectorAll(`.${i}`).forEach(o=>{o.style.display="none"})});const e=new MutationObserver(n=>{n.forEach(i=>{if(i.type==="attributes"&&i.attributeName==="value"){const o=i.target.value;document.querySelectorAll(`.${o}`).forEach(a=>{a.style.display="none"})}})});t.forEach(n=>{e.observe(n,{attributes:!0})})}function Ex(t){const e=t.name,n=e.lastIndexOf(".");return n===-1?"":e.slice(n+1).toLowerCase()}async function xx(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/variants`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function bf(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/options`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function gg(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function mg(t,e){return(await xx(e)).variants.find(i=>{const r=t.productOptions.map(h=>h.value),o=i.options.map(h=>h.value);return r.join(",")===o.join(",")})}async function Dx(){var n;const t="item_option_add",e="podiz";try{const i=fi(li),r=fi(Il),o=await Promise.all(i.map(async h=>{const a=[],s=r.linkOptions.find(l=>{var u,d,p;return((u=l.editorOptions)==null?void 0:u.optionValue1)===h.currentOption.optionValue1&&((d=l.editorOptions)==null?void 0:d.optionValue2)===h.currentOption.optionValue2&&((p=l.editorOptions)==null?void 0:p.optionValue3)===h.currentOption.optionValue3}),c=await mg(s,s.productNo);a.push({product_no:s.productNo,variants_code:c.variant_code,quantity:h.count,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]});const f=await Promise.all(h.prints.filter(l=>l.imageDataURL).map(async l=>{const u=r.linkOptions.find(p=>p.print===l.id);if(!u)return null;const d=await mg(u,u.productNo);return{product_no:u.productNo,quantity:h.count,variants_code:d.variant_code,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]}}));return[...a,...f.filter(Boolean)]}));if(CAFE24API){const h=await Promise.all(o.map(s=>new Promise((c,f)=>{CAFE24API.addCart("A0000","P",s,(l,u)=>{c(l?{error:l,product:s}:u)})})));console.log({results:h});let a=[];for(let s=0;s<h.length;s++)(n=h[s].errors)!=null&&n.length&&a.push(...h[s].errors);if(a.length>0){console.error("장바구니 추가 중 다음 오류가 발생했습니다:");for(let s=0;s<a.length;s++)throw a[s]}else{const s="/order/basket.html#none";window.location.pathname.includes("/order/basket.htm")?window.location.reload():window.location.href=s}}}catch(i){throw console.error("Error in addCafe24Cart:",i),i}}function Ax(t,e=null){const n=document.getElementsByClassName(t),i=new Set,r=[],o=/\s*\[\s*podiz\s*:\s*([a-f0-9-]{36})\s*\]\s*/g,h=[];function a(s,c){for(;s&&s.nodeType===Node.TEXT_NODE;)s=s.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE;){if(s.classList.contains(c))return s;s=s.parentNode}return null}for(let s of n){const c=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let f;for(;f=c.nextNode();){let l;for(;(l=o.exec(f.textContent))!==null;){i.add(l[1]);let u;e?u=a(f,e):u=f.parentElement,u&&!r.includes(u)&&r.push(u),h.push({uuid:l[1],element:u})}}}return{uids:Array.from(i),elements:r,items:h}}async function Px(){try{return new Promise(function(t,e){if(CAFE24API){const n={cafe24MallId:null,cafe24ShopNo:null,cafe24UserType:null,cafe24MemberId:null};n.cafe24MallId=CAFE24API.MALL_ID,n.cafe24ShopNo=CAFE24API.SHOP_NO,CAFE24API.getCustomerIDInfo(function(i,r){if(i)throw i;r.id.member_id?(n.cafe24UserType="member",n.cafe24MemberId=r.id.member_id):(n.cafe24UserType="guest",n.cafe24MemberId=r.id.guest_id)}),t(n)}})}catch(t){reject(t)}}const Mx=()=>new Promise(function(t,e){CAFE24API&&CAFE24API.getCartItemList(async function(n,i){if(n)console.log({err:n});else return t(i)})});function jl(t){return parseFloat(t).toLocaleString("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0})}async function Rx(){try{return new Promise((t,e)=>{CAFE24API?CAFE24API.get("/api/v2/categories",(n,i)=>{n?(console.error("Error fetching product categories:",n),e(n)):t(i.categories)}):e(new Error("CAFE24API is not available"))})}catch(t){throw console.error("Error in getCafe24ProductCategories:",t),t}}async function Ix(t,e,n=10,i=1){try{return new Promise((r,o)=>{if(CAFE24API){let h="/api/v2/products";const a=[];t&&a.push(`category=${encodeURIComponent(t)}`),e&&a.push(`keyword=${encodeURIComponent(e)}`),a.push(`limit=${n}`),a.push(`page=${i}`),a.length>0&&(h+="?"+a.join("&")),CAFE24API.get(h,(s,c)=>{s?(console.error("Error searching products:",s),o(s)):r(c.products)})}else o(new Error("CAFE24API is not available"))})}catch(r){throw console.error("Error in searchProducts:",r),r}}var vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Fx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],h=t[n++],a=t[n++],s=((r&7)<<18|(o&63)<<12|(h&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(s&1023))}else{const o=t[n++],h=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|h&63)}}return e.join("")},Ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],h=r+1<t.length,a=h?t[r+1]:0,s=r+2<t.length,c=s?t[r+2]:0,f=o>>2,l=(o&3)<<4|a>>4;let u=(a&15)<<2|c>>6,d=c&63;s||(d=64,h||(u=64)),i.push(n[f],n[l],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||a==null||c==null||l==null)throw new Lx;const u=o<<2|a>>4;if(i.push(u),c!==64){const d=a<<4&240|c>>2;if(i.push(d),l!==64){const p=c<<6&192|l;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nx=function(t){const e=Db(t);return Ab.encodeByteArray(e,!0)},Bl=function(t){return Nx(t).replace(/\./g,"")},jx=function(t){try{return Ab.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=()=>Bx().__FIREBASE_DEFAULTS__,Yx=()=>{if(typeof process>"u"||typeof vg>"u")return;const t=vg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jx(t[1]);return e&&JSON.parse(e)},Pb=()=>{try{return Ux()||Yx()||Wx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zx=t=>{var e,n;return(n=(e=Pb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hx=t=>{const e=zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Mb=()=>{var t;return(t=Pb())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bl(JSON.stringify(n)),Bl(JSON.stringify(h)),""].join(".")}function $x(){try{return typeof indexedDB=="object"}catch{return!1}}function Gx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="FirebaseError";class co extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qx,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rb.prototype.create)}}class Rb{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],h=o?Kx(o,i):"Error",a=`${this.serviceName}: ${h} (${r}).`;return new co(r,a,i)}}function Kx(t,e){return t.replace(Jx,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Jx=/\{\$([^}]+)}/g;function wf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],h=e[r];if(_g(o)&&_g(h)){if(!wf(o,h))return!1}else if(o!==h)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function _g(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){return t&&t._delegate?t._delegate:t}class ta{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Vx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eD(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,h]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);i===a&&h.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Qx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qx(t){return t===Or?void 0:t}function eD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const nD={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},iD=gt.INFO,rD={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},sD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=rD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oD{constructor(e){this.name=e,this._logLevel=iD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const aD=(t,e)=>e.some(n=>t instanceof n);let yg,bg;function lD(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return bg||(bg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ib=new WeakMap,Cf=new WeakMap,Fb=new WeakMap,hu=new WeakMap,Dh=new WeakMap;function uD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",h)},o=()=>{n(ar(t.result)),r()},h=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Ib.set(n,t)}).catch(()=>{}),Dh.set(e,t),e}function fD(t){if(Cf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",h),t.removeEventListener("abort",h)},o=()=>{n(),r()},h=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",h),t.addEventListener("abort",h)});Cf.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hD(t){Sf=t(Sf)}function dD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(du(this),e,...n);return Fb.set(i,e.sort?e.sort():[e]),ar(i)}:cD().includes(t)?function(...e){return t.apply(du(this),e),ar(Ib.get(this))}:function(...e){return ar(t.apply(du(this),e))}}function pD(t){return typeof t=="function"?dD(t):(t instanceof IDBTransaction&&fD(t),aD(t,lD())?new Proxy(t,Sf):t)}function ar(t){if(t instanceof IDBRequest)return uD(t);if(hu.has(t))return hu.get(t);const e=pD(t);return e!==t&&(hu.set(t,e),Dh.set(e,t)),e}const du=t=>Dh.get(t);function gD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const h=indexedDB.open(t,e),a=ar(h);return i&&h.addEventListener("upgradeneeded",s=>{i(ar(h.result),s.oldVersion,s.newVersion,ar(h.transaction),s)}),n&&h.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),a.then(s=>{o&&s.addEventListener("close",()=>o()),r&&s.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mD=["get","getKey","getAll","getAllKeys","count"],vD=["put","add","delete","clear"],pu=new Map;function wg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pu.get(e))return pu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=vD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||mD.includes(n)))return;const o=async function(h,...a){const s=this.transaction(h,r?"readwrite":"readonly");let c=s.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&s.done]))[0]};return pu.set(e,o),o}hD(t=>({...t,get:(e,n,i)=>wg(e,n)||t.get(e,n,i),has:(e,n)=>!!wg(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _D{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tf="@firebase/app",Cg="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new oD("@firebase/app"),bD="@firebase/app-compat",wD="@firebase/analytics-compat",CD="@firebase/analytics",SD="@firebase/app-check-compat",TD="@firebase/app-check",kD="@firebase/auth",OD="@firebase/auth-compat",ED="@firebase/database",xD="@firebase/database-compat",DD="@firebase/functions",AD="@firebase/functions-compat",PD="@firebase/installations",MD="@firebase/installations-compat",RD="@firebase/messaging",ID="@firebase/messaging-compat",FD="@firebase/performance",LD="@firebase/performance-compat",ND="@firebase/remote-config",jD="@firebase/remote-config-compat",BD="@firebase/storage",UD="@firebase/storage-compat",YD="@firebase/firestore",WD="@firebase/firestore-compat",zD="firebase",HD="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",VD={[Tf]:"fire-core",[bD]:"fire-core-compat",[CD]:"fire-analytics",[wD]:"fire-analytics-compat",[TD]:"fire-app-check",[SD]:"fire-app-check-compat",[kD]:"fire-auth",[OD]:"fire-auth-compat",[ED]:"fire-rtdb",[xD]:"fire-rtdb-compat",[DD]:"fire-fn",[AD]:"fire-fn-compat",[PD]:"fire-iid",[MD]:"fire-iid-compat",[RD]:"fire-fcm",[ID]:"fire-fcm-compat",[FD]:"fire-perf",[LD]:"fire-perf-compat",[ND]:"fire-rc",[jD]:"fire-rc-compat",[BD]:"fire-gcs",[UD]:"fire-gcs-compat",[YD]:"fire-fst",[WD]:"fire-fst-compat","fire-js":"fire-js",[zD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Map,XD=new Map,Of=new Map;function Sg(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yl(t){const e=t.name;if(Of.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Ul.values())Sg(n,t);for(const n of XD.values())Sg(n,t);return!0}function $D(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Rb("app","Firebase",GD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=HD;function Lb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:kf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw lr.create("bad-app-name",{appName:String(r)});if(n||(n=Mb()),!n)throw lr.create("no-options");const o=Ul.get(r);if(o){if(wf(n,o.options)&&wf(i,o.config))return o;throw lr.create("duplicate-app",{appName:r})}const h=new tD(r);for(const s of Of.values())h.addComponent(s);const a=new qD(n,i,h);return Ul.set(r,a),a}function JD(t=kf){const e=Ul.get(t);if(!e&&t===kf&&Mb())return Lb();if(!e)throw lr.create("no-app",{appName:t});return e}function Ls(t,e,n){var i;let r=(i=VD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const a=[`Unable to register library "${r}" with version "${e}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&a.push("and"),h&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}Yl(new ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="firebase-heartbeat-database",QD=1,na="firebase-heartbeat-store";let gu=null;function Nb(){return gu||(gu=gD(ZD,QD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(na)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),gu}async function e2(t){try{const n=(await Nb()).transaction(na),i=await n.objectStore(na).get(jb(t));return await n.done,i}catch(e){if(e instanceof co)$r.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function Tg(t,e){try{const i=(await Nb()).transaction(na,"readwrite");await i.objectStore(na).put(e,jb(t)),await i.done}catch(n){if(n instanceof co)$r.warn(n.message);else{const i=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(i.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1024,n2=30*24*60*60*1e3;class i2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=kg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const a=new Date(h.date).valueOf();return Date.now()-a<=n2}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kg(),{heartbeatsToSend:i,unsentEntries:r}=r2(this._heartbeatsCache.heartbeats),o=Bl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function kg(){return new Date().toISOString().substring(0,10)}function r2(t,e=t2){const n=[];let i=t.slice();for(const r of t){const o=n.find(h=>h.agent===r.agent);if(o){if(o.dates.push(r.date),Og(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Og(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class s2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $x()?Gx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await e2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Og(t){return Bl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){Yl(new ta("platform-logger",e=>new _D(e),"PRIVATE")),Yl(new ta("heartbeat",e=>new i2(e),"PRIVATE")),Ls(Tf,Cg,t),Ls(Tf,Cg,"esm2017"),Ls("fire-js","")}o2("");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bb="firebasestorage.googleapis.com",Ub="storageBucket",a2=2*60*1e3,l2=10*60*1e3,c2=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt extends co{constructor(e,n,i=0){super(mu(e),`Firebase Storage: ${n} (${mu(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function mu(t){return"storage/"+t}function Ah(){const t="An unknown error occurred, please check the error payload for server response.";return new Dt(mt.UNKNOWN,t)}function u2(t){return new Dt(mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function f2(t){return new Dt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h2(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(mt.UNAUTHENTICATED,t)}function d2(){return new Dt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p2(t){return new Dt(mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Yb(){return new Dt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wb(){return new Dt(mt.CANCELED,"User canceled the upload/download.")}function g2(t){return new Dt(mt.INVALID_URL,"Invalid URL '"+t+"'.")}function m2(t){return new Dt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function v2(){return new Dt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ub+"' property when initializing the app?")}function zb(){return new Dt(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _2(){return new Dt(mt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y2(){return new Dt(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function b2(t){return new Dt(mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ef(t){return new Dt(mt.INVALID_ARGUMENT,t)}function Hb(){return new Dt(mt.APP_DELETED,"The Firebase app was deleted.")}function w2(t){return new Dt(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vo(t,e){return new Dt(mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oo(t){throw new Dt(mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(i.path==="")return i;throw m2(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const h="(/(.*))?$",a=new RegExp("^gs://"+r+h,"i"),s={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const f="v[A-Za-z0-9_]+",l=n.replace(/[.]/g,"\\."),u="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${f}/b/${r}/o${u}`,"i"),p={bucket:1,path:3},m=n===Bb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${r}/${g}`,"i"),b=[{regex:a,indices:s,postModify:o},{regex:d,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<b.length;y++){const C=b[y],w=C.regex.exec(e);if(w){const T=w[C.indices.bucket];let O=w[C.indices.path];O||(O=""),i=new En(T,O),C.postModify(i);break}}if(i==null)throw g2(e);return i}}class C2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e,n){let i=1,r=null,o=null,h=!1,a=0;function s(){return a===2}let c=!1;function f(...g){c||(c=!0,e.apply(null,g))}function l(g){r=setTimeout(()=>{r=null,t(d,s())},g)}function u(){o&&clearTimeout(o)}function d(g,...v){if(c){u();return}if(g){u(),f.call(null,g,...v);return}if(s()||h){u(),f.call(null,g,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,l(b)}let p=!1;function m(g){p||(p=!0,u(),!c&&(r!==null?(g||(a=2),clearTimeout(r),l(0)):g||(a=1)))}return l(0),o=setTimeout(()=>{h=!0,m(!0)},n),m}function T2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t){return t!==void 0}function O2(t){return typeof t=="function"}function E2(t){return typeof t=="object"&&!Array.isArray(t)}function uc(t){return typeof t=="string"||t instanceof String}function Eg(t){return Ph()&&t instanceof Blob}function Ph(){return typeof Blob<"u"}function xg(t,e,n,i){if(i<e)throw Ef(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ef(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Vb(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ur||(Ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,i,r,o,h,a,s,c,f,l,u=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=h,this.callback_=a,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=l,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new $a(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const h=a=>{const s=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(s,c)};this.progressCallback_!==null&&o.addUploadProgressListener(h),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(h),this.pendingConnection_=null;const a=o.getErrorCode()===Ur.NO_ERROR,s=o.getStatus();if(!a||Xb(s,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Ur.ABORT;i(!1,new $a(!1,null,f));return}const c=this.successCodes_.indexOf(s)!==-1;i(!0,new $a(c,o))})},n=(i,r)=>{const o=this.resolve_,h=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const s=this.callback_(a,a.getResponse());k2(s)?o(s):o()}catch(s){h(s)}else if(a!==null){const s=Ah();s.serverResponse=a.getErrorText(),this.errorCallback_?h(this.errorCallback_(a,s)):h(s)}else if(r.canceled){const s=this.appDelete_?Hb():Wb();h(s)}else{const s=Yb();h(s)}};this.canceled_?n(!1,new $a(!1,null,!0)):this.backoffId_=S2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&T2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $a{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function D2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function A2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function M2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function R2(t,e,n,i,r,o,h=!0){const a=Vb(t.urlParams),s=t.url+a,c=Object.assign({},t.headers);return P2(c,e),D2(c,n),A2(c,o),M2(c,i),new x2(s,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function F2(...t){const e=I2();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Ph())return new Blob(t);throw new Dt(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function L2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){if(typeof atob>"u")throw b2("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vu{constructor(e,n){this.data=e,this.contentType=n||null}}function j2(t,e){switch(t){case hi.RAW:return new vu($b(e));case hi.BASE64:case hi.BASE64URL:return new vu(Gb(t,e));case hi.DATA_URL:return new vu(U2(e),Y2(e))}throw Ah()}function $b(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,h=t.charCodeAt(++n);i=65536|(o&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function B2(t){let e;try{e=decodeURIComponent(t)}catch{throw Vo(hi.DATA_URL,"Malformed data URL.")}return $b(e)}function Gb(t,e){switch(t){case hi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Vo(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case hi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Vo(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=N2(e)}catch(r){throw r.message.includes("polyfill")?r:Vo(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class qb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vo(hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=W2(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function U2(t){const e=new qb(t);return e.base64?Gb(hi.BASE64,e.rest):B2(e.rest)}function Y2(t){return new qb(t).contentType}function W2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){let i=0,r="";Eg(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Eg(this.data_)){const i=this.data_,r=L2(i,e,n);return r===null?null:new Ji(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ji(i,!0)}}static getBlob(...e){if(Ph()){const n=e.map(i=>i instanceof Ji?i.data_:i);return new Ji(F2.apply(null,n))}else{const n=e.map(h=>uc(h)?j2(hi.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(h=>{for(let a=0;a<h.length;a++)r[o++]=h[a]}),new Ji(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){let e;try{e=JSON.parse(t)}catch{return null}return E2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function H2(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Jb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e){return e}class hn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||V2}}let Ga=null;function X2(t){return!uc(t)||t.length<2?t:Jb(t)}function Zb(){if(Ga)return Ga;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(o,h){return X2(h)}const n=new hn("name");n.xform=e,t.push(n);function i(o,h){return h!==void 0?Number(h):h}const r=new hn("size");return r.xform=i,t.push(r),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),Ga=t,Ga}function $2(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new En(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function G2(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const h=n[o];i[h.local]=h.xform(i,e[h.server])}return $2(i,t),i}function Qb(t,e,n){const i=Kb(e);return i===null?null:G2(t,i,n)}function q2(t,e,n,i){const r=Kb(e);if(r===null||!uc(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const h=encodeURIComponent;return o.split(",").map(c=>{const f=t.bucket,l=t.fullPath,u="/b/"+h(f)+"/o/"+h(l),d=ba(u,n,i),p=Vb({alt:"media",token:c});return d+p})[0]}function e0(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class uo{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){if(!t)throw Ah()}function Mh(t,e){function n(i,r){const o=Qb(t,r,e);return Ii(o!==null),o}return n}function K2(t,e){function n(i,r){const o=Qb(t,r,e);return Ii(o!==null),q2(o,r,t.host,t._protocol)}return n}function wa(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=d2():r=h2():n.getStatus()===402?r=f2(t.bucket):n.getStatus()===403?r=p2(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function t0(t){const e=wa(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=u2(t.path)),o.serverResponse=r.serverResponse,o}return n}function J2(t,e,n){const i=e.fullServerUrl(),r=ba(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new uo(r,o,Mh(t,n),h);return a.errorHandler=t0(e),a}function Z2(t,e,n){const i=e.fullServerUrl(),r=ba(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new uo(r,o,K2(t,n),h);return a.errorHandler=t0(e),a}function Q2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function n0(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=Q2(null,e)),i}function eA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const s=a();h["Content-Type"]="multipart/related; boundary="+s;const c=n0(e,i,r),f=e0(c,n),l="--"+s+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+s+`\r
Content-Type: `+c.contentType+`\r
\r
`,u=`\r
--`+s+"--",d=Ji.getBlob(l,i,u);if(d===null)throw zb();const p={name:c.fullPath},m=ba(o,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,_=new uo(m,g,Mh(t,n),v);return _.urlParams=p,_.headers=h,_.body=d.uploadData(),_.errorHandler=wa(e),_}class Wl{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Rh(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ii(!1)}return Ii(!!n&&(e||["active"]).indexOf(n)!==-1),n}function tA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h=n0(e,i,r),a={name:h.fullPath},s=ba(o,t.host,t._protocol),c="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},l=e0(h,n),u=t.maxUploadRetryTime;function d(m){Rh(m);let g;try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{Ii(!1)}return Ii(uc(g)),g}const p=new uo(s,c,d,u);return p.urlParams=a,p.headers=f,p.body=l,p.errorHandler=wa(e),p}function nA(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(c){const f=Rh(c,["active","final"]);let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ii(!1)}l||Ii(!1);const u=Number(l);return Ii(!isNaN(u)),new Wl(u,i.size(),f==="final")}const h="POST",a=t.maxUploadRetryTime,s=new uo(n,h,o,a);return s.headers=r,s.errorHandler=wa(e),s}const Dg=256*1024;function iA(t,e,n,i,r,o,h,a){const s=new Wl(0,0);if(h?(s.current=h.current,s.total=h.total):(s.current=0,s.total=i.size()),i.size()!==s.total)throw _2();const c=s.total-s.current;let f=c;r>0&&(f=Math.min(f,r));const l=s.current,u=l+f;let d="";f===0?d="finalize":c===f?d="upload, finalize":d="upload";const p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${s.current}`},m=i.slice(l,u);if(m===null)throw zb();function g(y,C){const w=Rh(y,["active","final"]),T=s.current+f,O=i.size();let A;return w==="final"?A=Mh(e,o)(y,C):A=null,new Wl(T,O,w==="final",A)}const v="POST",_=e.maxUploadRetryTime,b=new uo(n,v,g,_);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=wa(t),b}const _n={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _u(t){switch(t){case"running":case"pausing":case"canceling":return _n.RUNNING;case"paused":return _n.PAUSED;case"success":return _n.SUCCESS;case"canceled":return _n.CANCELED;case"error":return _n.ERROR;default:return _n.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,i){if(O2(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class sA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Oo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oA extends sA{initXhr(){this.xhr_.responseType="text"}}function ys(){return new oA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Zb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(mt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Xb(r.status,[]))if(o)r=Yb();else{this.sleepTime=Math.max(this.sleepTime*2,c2),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(mt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=tA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ys,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=nA(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,ys,n,i);this._request=o,o.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Dg*this._chunkMultiplier,n=new Wl(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let h;try{h=iA(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(s){this._error=s,this._transition("error");return}const a=this._ref.storage._makeRequest(h,ys,r,o,!1);this._request=a,a.getPromise().then(s=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(s.current),s.finalized?(this._metadata=s.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Dg*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=J2(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ys,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=eA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ys,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Wb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=_u(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new rA(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(_u(this._state)){case _n.SUCCESS:cs(this._resolve.bind(null,this.snapshot))();break;case _n.CANCELED:case _n.ERROR:const n=this._reject;cs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_u(this._state)){case _n.RUNNING:case _n.PAUSED:e.next&&cs(e.next.bind(e,this.snapshot))();break;case _n.SUCCESS:e.complete&&cs(e.complete.bind(e))();break;case _n.CANCELED:case _n.ERROR:e.error&&cs(e.error.bind(e,this._error))();break;default:e.error&&cs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gr(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jb(this._location.path)}get storage(){return this._service}get parent(){const e=z2(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Gr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w2(e)}}function lA(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new aA(t,new Ji(e),n)}function cA(t){t._throwIfRoot("getDownloadURL");const e=Z2(t.storage,t._location,Zb());return t.storage.makeRequestWithTokens(e,ys).then(n=>{if(n===null)throw y2();return n})}function uA(t,e){const n=H2(t._location.path,e),i=new En(t._location.bucket,n);return new Gr(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){return/^[A-Za-z]+:\/\//.test(t)}function hA(t,e){return new Gr(t,e)}function i0(t,e){if(t instanceof Ih){const n=t;if(n._bucket==null)throw v2();const i=new Gr(n,n._bucket);return e!=null?i0(i,e):i}else return e!==void 0?uA(t,e):t}function dA(t,e){if(e&&fA(e)){if(t instanceof Ih)return hA(t,e);throw Ef("To use ref(service, url), the first argument must be a Storage instance.")}else return i0(t,e)}function Ag(t,e){const n=e==null?void 0:e[Ub];return n==null?null:En.makeFromBucketSpec(n,t)}function pA(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Xx(r,t.app.options.projectId))}class Ih{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=Bb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=l2,this._requests=new Set,r!=null?this._bucket=En.makeFromBucketSpec(r,this._host):this._bucket=Ag(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=Ag(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gr(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new C2(Hb());{const h=R2(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Pg="@firebase/storage",Mg="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="storage";function gA(t,e,n){return t=cc(t),lA(t,e,n)}function mA(t){return t=cc(t),cA(t)}function vA(t,e){return t=cc(t),dA(t,e)}function _A(t=JD(),e){t=cc(t);const i=$D(t,r0).getImmediate({identifier:e}),r=Hx("storage");return r&&yA(i,...r),i}function yA(t,e,n,i={}){pA(t,e,n,i)}function bA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ih(n,i,r,e,KD)}function wA(){Yl(new ta(r0,bA,"PUBLIC").setMultipleInstances(!0)),Ls(Pg,Mg,""),Ls(Pg,Mg,"esm2017")}wA();var CA="firebase",SA="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(CA,SA,"app");const TA={apiKey:"AIzaSyANQCJa2A3rxVz0g-iKS2DnZjDEEc4zcPQ",authDomain:"podiz-22471.firebaseapp.com",databaseURL:"podiz-22471.firebaseio.com",storageBucket:"podiz-22471.appspot.com"},kA=Lb(TA),OA=_A(kA);var s0={},Fh={exports:{}},o0=function(e,n){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(n,r)}},EA=o0,Lh=Object.prototype.toString,Nh=function(t){return function(e){var n=Lh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Jr(t){return t=t.toLowerCase(),function(n){return Nh(n)===t}}function jh(t){return Array.isArray(t)}function zl(t){return typeof t>"u"}function xA(t){return t!==null&&!zl(t)&&t.constructor!==null&&!zl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var a0=Jr("ArrayBuffer");function DA(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&a0(t.buffer),e}function AA(t){return typeof t=="string"}function PA(t){return typeof t=="number"}function l0(t){return t!==null&&typeof t=="object"}function dl(t){if(Nh(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var MA=Jr("Date"),RA=Jr("File"),IA=Jr("Blob"),FA=Jr("FileList");function Bh(t){return Lh.call(t)==="[object Function]"}function LA(t){return l0(t)&&Bh(t.pipe)}function NA(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Lh.call(t)===e||Bh(t.toString)&&t.toString()===e)}var jA=Jr("URLSearchParams");function BA(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function UA(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Uh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),jh(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function xf(){var t={};function e(r,o){dl(t[o])&&dl(r)?t[o]=xf(t[o],r):dl(r)?t[o]=xf({},r):jh(r)?t[o]=r.slice():t[o]=r}for(var n=0,i=arguments.length;n<i;n++)Uh(arguments[n],e);return t}function YA(t,e,n){return Uh(e,function(r,o){n&&typeof r=="function"?t[o]=EA(r,n):t[o]=r}),t}function WA(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function zA(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function HA(t,e,n){var i,r,o,h={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],h[o]||(e[o]=t[o],h[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function VA(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function XA(t){if(!t)return null;var e=t.length;if(zl(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var $A=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),sn={isArray:jh,isArrayBuffer:a0,isBuffer:xA,isFormData:NA,isArrayBufferView:DA,isString:AA,isNumber:PA,isObject:l0,isPlainObject:dl,isUndefined:zl,isDate:MA,isFile:RA,isBlob:IA,isFunction:Bh,isStream:LA,isURLSearchParams:jA,isStandardBrowserEnv:UA,forEach:Uh,merge:xf,extend:YA,trim:BA,stripBOM:WA,inherits:zA,toFlatObject:HA,kindOf:Nh,kindOfTest:Jr,endsWith:VA,toArray:XA,isTypedArray:$A,isFileList:FA},us=sn;function Rg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var c0=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(us.isURLSearchParams(n))r=n.toString();else{var o=[];us.forEach(n,function(s,c){s===null||typeof s>"u"||(us.isArray(s)?c=c+"[]":s=[s],us.forEach(s,function(l){us.isDate(l)?l=l.toISOString():us.isObject(l)&&(l=JSON.stringify(l)),o.push(Rg(c)+"="+Rg(l))}))}),r=o.join("&")}if(r){var h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},GA=sn;function fc(){this.handlers=[]}fc.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};fc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};fc.prototype.forEach=function(e){GA.forEach(this.handlers,function(i){i!==null&&e(i)})};var qA=fc,KA=sn,JA=function(e,n){KA.forEach(e,function(r,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[o])})},u0=sn;function Gs(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}u0.inherits(Gs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var f0=Gs.prototype,h0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){h0[t]={value:t}});Object.defineProperties(Gs,h0);Object.defineProperty(f0,"isAxiosError",{value:!0});Gs.from=function(t,e,n,i,r,o){var h=Object.create(f0);return u0.toFlatObject(t,h,function(s){return s!==Error.prototype}),Gs.call(h,t.message,e,n,i,r),h.name=t.name,o&&Object.assign(h,o),h};var fo=Gs,d0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xn=sn;function ZA(t,e){e=e||new FormData;var n=[];function i(o){return o===null?"":Xn.isDate(o)?o.toISOString():Xn.isArrayBuffer(o)||Xn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function r(o,h){if(Xn.isPlainObject(o)||Xn.isArray(o)){if(n.indexOf(o)!==-1)throw Error("Circular reference detected in "+h);n.push(o),Xn.forEach(o,function(s,c){if(!Xn.isUndefined(s)){var f=h?h+"."+c:c,l;if(s&&!h&&typeof s=="object"){if(Xn.endsWith(c,"{}"))s=JSON.stringify(s);else if(Xn.endsWith(c,"[]")&&(l=Xn.toArray(s))){l.forEach(function(u){!Xn.isUndefined(u)&&e.append(f,i(u))});return}}r(s,f)}}),n.pop()}else e.append(h,i(o))}return r(t),e}var p0=ZA,yu,Ig;function QA(){if(Ig)return yu;Ig=1;var t=fo;return yu=function(n,i,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},yu}var bu,Fg;function eP(){if(Fg)return bu;Fg=1;var t=sn;return bu=t.isStandardBrowserEnv()?function(){return{write:function(i,r,o,h,a,s){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),t.isString(h)&&c.push("path="+h),t.isString(a)&&c.push("domain="+a),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),bu}var tP=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},nP=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},iP=tP,rP=nP,g0=function(e,n){return e&&!iP(n)?rP(e,n):n},wu,Lg;function sP(){if(Lg)return wu;Lg=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return wu=function(i){var r={},o,h,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),o=t.trim(c.substr(0,a)).toLowerCase(),h=t.trim(c.substr(a+1)),o){if(r[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([h]):r[o]=r[o]?r[o]+", "+h:h}}),r},wu}var Cu,Ng;function oP(){if(Ng)return Cu;Ng=1;var t=sn;return Cu=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function o(h){var a=h;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=o(window.location.href),function(a){var s=t.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),Cu}var Su,jg;function hc(){if(jg)return Su;jg=1;var t=fo,e=sn;function n(i){t.call(this,i??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Su=n,Su}var Tu,Bg;function aP(){return Bg||(Bg=1,Tu=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),Tu}var ku,Ug;function Yg(){if(Ug)return ku;Ug=1;var t=sn,e=QA(),n=eP(),i=c0,r=g0,o=sP(),h=oP(),a=d0,s=fo,c=hc(),f=aP();return ku=function(u){return new Promise(function(p,m){var g=u.data,v=u.headers,_=u.responseType,b;function y(){u.cancelToken&&u.cancelToken.unsubscribe(b),u.signal&&u.signal.removeEventListener("abort",b)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var C=new XMLHttpRequest;if(u.auth){var w=u.auth.username||"",T=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";v.Authorization="Basic "+btoa(w+":"+T)}var O=r(u.baseURL,u.url);C.open(u.method.toUpperCase(),i(O,u.params,u.paramsSerializer),!0),C.timeout=u.timeout;function A(){if(C){var Y="getAllResponseHeaders"in C?o(C.getAllResponseHeaders()):null,te=!_||_==="text"||_==="json"?C.responseText:C.response,q={data:te,status:C.status,statusText:C.statusText,headers:Y,config:u,request:C};e(function(B){p(B),y()},function(B){m(B),y()},q),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(m(new s("Request aborted",s.ECONNABORTED,u,C)),C=null)},C.onerror=function(){m(new s("Network Error",s.ERR_NETWORK,u,C,C)),C=null},C.ontimeout=function(){var te=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",q=u.transitional||a;u.timeoutErrorMessage&&(te=u.timeoutErrorMessage),m(new s(te,q.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,u,C)),C=null},t.isStandardBrowserEnv()){var L=(u.withCredentials||h(O))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;L&&(v[u.xsrfHeaderName]=L)}"setRequestHeader"in C&&t.forEach(v,function(te,q){typeof g>"u"&&q.toLowerCase()==="content-type"?delete v[q]:C.setRequestHeader(q,te)}),t.isUndefined(u.withCredentials)||(C.withCredentials=!!u.withCredentials),_&&_!=="json"&&(C.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&C.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(b=function(Y){C&&(m(!Y||Y&&Y.type?new c:Y),C.abort(),C=null)},u.cancelToken&&u.cancelToken.subscribe(b),u.signal&&(u.signal.aborted?b():u.signal.addEventListener("abort",b))),g||(g=null);var G=f(O);if(G&&["http","https","file"].indexOf(G)===-1){m(new s("Unsupported protocol "+G+":",s.ERR_BAD_REQUEST,u));return}C.send(g)})},ku}var Ou,Wg;function lP(){return Wg||(Wg=1,Ou=null),Ou}var Gt=sn,zg=JA,Hg=fo,cP=d0,uP=p0,fP={"Content-Type":"application/x-www-form-urlencoded"};function Vg(t,e){!Gt.isUndefined(t)&&Gt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function hP(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Yg()),t}function dP(t,e,n){if(Gt.isString(t))try{return(e||JSON.parse)(t),Gt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var dc={transitional:cP,adapter:hP(),transformRequest:[function(e,n){if(zg(n,"Accept"),zg(n,"Content-Type"),Gt.isFormData(e)||Gt.isArrayBuffer(e)||Gt.isBuffer(e)||Gt.isStream(e)||Gt.isFile(e)||Gt.isBlob(e))return e;if(Gt.isArrayBufferView(e))return e.buffer;if(Gt.isURLSearchParams(e))return Vg(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Gt.isObject(e),r=n&&n["Content-Type"],o;if((o=Gt.isFileList(e))||i&&r==="multipart/form-data"){var h=this.env&&this.env.FormData;return uP(o?{"files[]":e}:e,h&&new h)}else if(i||r==="application/json")return Vg(n,"application/json"),dP(e);return e}],transformResponse:[function(e){var n=this.transitional||dc.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||r&&Gt.isString(e)&&e.length)try{return JSON.parse(e)}catch(h){if(o)throw h.name==="SyntaxError"?Hg.from(h,Hg.ERR_BAD_RESPONSE,this,null,this.response):h}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lP()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Gt.forEach(["delete","get","head"],function(e){dc.headers[e]={}});Gt.forEach(["post","put","patch"],function(e){dc.headers[e]=Gt.merge(fP)});var Yh=dc,pP=sn,gP=Yh,mP=function(e,n,i){var r=this||gP;return pP.forEach(i,function(h){e=h.call(r,e,n)}),e},Eu,Xg;function m0(){return Xg||(Xg=1,Eu=function(e){return!!(e&&e.__CANCEL__)}),Eu}var $g=sn,xu=mP,vP=m0(),_P=Yh,yP=hc();function Du(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new yP}var bP=function(e){Du(e),e.headers=e.headers||{},e.data=xu.call(e,e.data,e.headers,e.transformRequest),e.headers=$g.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),$g.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||_P.adapter;return n(e).then(function(r){return Du(e),r.data=xu.call(e,r.data,r.headers,e.transformResponse),r},function(r){return vP(r)||(Du(e),r&&r.response&&(r.response.data=xu.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Tn=sn,v0=function(e,n){n=n||{};var i={};function r(f,l){return Tn.isPlainObject(f)&&Tn.isPlainObject(l)?Tn.merge(f,l):Tn.isPlainObject(l)?Tn.merge({},l):Tn.isArray(l)?l.slice():l}function o(f){if(Tn.isUndefined(n[f])){if(!Tn.isUndefined(e[f]))return r(void 0,e[f])}else return r(e[f],n[f])}function h(f){if(!Tn.isUndefined(n[f]))return r(void 0,n[f])}function a(f){if(Tn.isUndefined(n[f])){if(!Tn.isUndefined(e[f]))return r(void 0,e[f])}else return r(void 0,n[f])}function s(f){if(f in n)return r(e[f],n[f]);if(f in e)return r(void 0,e[f])}var c={url:h,method:h,data:h,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return Tn.forEach(Object.keys(e).concat(Object.keys(n)),function(l){var u=c[l]||o,d=u(l);Tn.isUndefined(d)&&u!==s||(i[l]=d)}),i},Au,Gg;function _0(){return Gg||(Gg=1,Au={version:"0.27.2"}),Au}var wP=_0().version,qi=fo,Wh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Wh[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var qg={};Wh.transitional=function(e,n,i){function r(o,h){return"[Axios v"+wP+"] Transitional option '"+o+"'"+h+(i?". "+i:"")}return function(o,h,a){if(e===!1)throw new qi(r(h," has been removed"+(n?" in "+n:"")),qi.ERR_DEPRECATED);return n&&!qg[h]&&(qg[h]=!0,console.warn(r(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,h,a):!0}};function CP(t,e,n){if(typeof t!="object")throw new qi("options must be an object",qi.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var o=i[r],h=e[o];if(h){var a=t[o],s=a===void 0||h(a,o,t);if(s!==!0)throw new qi("option "+o+" must be "+s,qi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new qi("Unknown option "+o,qi.ERR_BAD_OPTION)}}var SP={assertOptions:CP,validators:Wh},y0=sn,TP=c0,Kg=qA,Jg=bP,pc=v0,kP=g0,b0=SP,fs=b0.validators;function qs(t){this.defaults=t,this.interceptors={request:new Kg,response:new Kg}}qs.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=pc(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&b0.assertOptions(i,{silentJSONParsing:fs.transitional(fs.boolean),forcedJSONParsing:fs.transitional(fs.boolean),clarifyTimeoutError:fs.transitional(fs.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(o=o&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var h=[];this.interceptors.response.forEach(function(d){h.push(d.fulfilled,d.rejected)});var a;if(!o){var s=[Jg,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(h),a=Promise.resolve(n);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=n;r.length;){var f=r.shift(),l=r.shift();try{c=f(c)}catch(u){l(u);break}}try{a=Jg(c)}catch(u){return Promise.reject(u)}for(;h.length;)a=a.then(h.shift(),h.shift());return a};qs.prototype.getUri=function(e){e=pc(this.defaults,e);var n=kP(e.baseURL,e.url);return TP(n,e.params,e.paramsSerializer)};y0.forEach(["delete","get","head","options"],function(e){qs.prototype[e]=function(n,i){return this.request(pc(i||{},{method:e,url:n,data:(i||{}).data}))}});y0.forEach(["post","put","patch"],function(e){function n(i){return function(o,h,a){return this.request(pc(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:h}))}}qs.prototype[e]=n(),qs.prototype[e+"Form"]=n(!0)});var OP=qs,Pu,Zg;function EP(){if(Zg)return Pu;Zg=1;var t=hc();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(h){i=h});var r=this;this.promise.then(function(o){if(r._listeners){var h,a=r._listeners.length;for(h=0;h<a;h++)r._listeners[h](o);r._listeners=null}}),this.promise.then=function(o){var h,a=new Promise(function(s){r.subscribe(s),h=s}).then(o);return a.cancel=function(){r.unsubscribe(h)},a},n(function(h){r.reason||(r.reason=new t(h),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(h){i=h});return{token:r,cancel:i}},Pu=e,Pu}var Mu,Qg;function xP(){return Qg||(Qg=1,Mu=function(e){return function(i){return e.apply(null,i)}}),Mu}var Ru,em;function DP(){if(em)return Ru;em=1;var t=sn;return Ru=function(n){return t.isObject(n)&&n.isAxiosError===!0},Ru}var tm=sn,AP=o0,pl=OP,PP=v0,MP=Yh;function w0(t){var e=new pl(t),n=AP(pl.prototype.request,e);return tm.extend(n,pl.prototype,e),tm.extend(n,e),n.create=function(r){return w0(PP(t,r))},n}var Sn=w0(MP);Sn.Axios=pl;Sn.CanceledError=hc();Sn.CancelToken=EP();Sn.isCancel=m0();Sn.VERSION=_0().version;Sn.toFormData=p0;Sn.AxiosError=fo;Sn.Cancel=Sn.CanceledError;Sn.all=function(e){return Promise.all(e)};Sn.spread=xP();Sn.isAxiosError=DP();Fh.exports=Sn;Fh.exports.default=Sn;var RP=Fh.exports,C0=RP,Df={exports:{}},gc={},zh={},mc={},Ca={},Ks={},ji={},ho={},Js={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.ERROR_PACKET=pi.PACKET_TYPES_REVERSE=pi.PACKET_TYPES=void 0;const yi=Object.create(null);pi.PACKET_TYPES=yi;yi.open="0";yi.close="1";yi.ping="2";yi.pong="3";yi.message="4";yi.upgrade="5";yi.noop="6";const S0=Object.create(null);pi.PACKET_TYPES_REVERSE=S0;Object.keys(yi).forEach(t=>{S0[yi[t]]=t});const IP={type:"error",data:"parser error"};pi.ERROR_PACKET=IP;Object.defineProperty(Js,"__esModule",{value:!0});Js.encodePacket=Js.encodePacketToBinary=void 0;const FP=pi,T0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",k0=typeof ArrayBuffer=="function",O0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,E0=({type:t,data:e},n,i)=>T0&&e instanceof Blob?n?i(e):nm(e,i):k0&&(e instanceof ArrayBuffer||O0(e))?n?i(e):nm(new Blob([e]),i):i(FP.PACKET_TYPES[t]+(e||""));Js.encodePacket=E0;const nm=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function im(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Iu;function LP(t,e){if(T0&&t.data instanceof Blob)return t.data.arrayBuffer().then(im).then(e);if(k0&&(t.data instanceof ArrayBuffer||O0(t.data)))return e(im(t.data));E0(t,!1,n=>{Iu||(Iu=new TextEncoder),e(Iu.encode(n))})}Js.encodePacketToBinary=LP;var vc={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.decode=Zs.encode=void 0;const ks="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ks.length;t++)Mo[ks.charCodeAt(t)]=t;const NP=t=>{let e=new Uint8Array(t),n,i=e.length,r="";for(n=0;n<i;n+=3)r+=ks[e[n]>>2],r+=ks[(e[n]&3)<<4|e[n+1]>>4],r+=ks[(e[n+1]&15)<<2|e[n+2]>>6],r+=ks[e[n+2]&63];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r};Zs.encode=NP;const jP=t=>{let e=t.length*.75,n=t.length,i,r=0,o,h,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),f=new Uint8Array(c);for(i=0;i<n;i+=4)o=Mo[t.charCodeAt(i)],h=Mo[t.charCodeAt(i+1)],a=Mo[t.charCodeAt(i+2)],s=Mo[t.charCodeAt(i+3)],f[r++]=o<<2|h>>4,f[r++]=(h&15)<<4|a>>2,f[r++]=(a&3)<<6|s&63;return c};Zs.decode=jP;Object.defineProperty(vc,"__esModule",{value:!0});vc.decodePacket=void 0;const qa=pi,BP=Zs,UP=typeof ArrayBuffer=="function",YP=(t,e)=>{if(typeof t!="string")return{type:"message",data:x0(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:WP(t.substring(1),e)}:qa.PACKET_TYPES_REVERSE[n]?t.length>1?{type:qa.PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:qa.PACKET_TYPES_REVERSE[n]}:qa.ERROR_PACKET};vc.decodePacket=YP;const WP=(t,e)=>{if(UP){const n=(0,BP.decode)(t);return x0(n,e)}else return{base64:!0,data:t}},x0=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;const e=Js;Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const n=vc;Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const i=pi,r="",o=(u,d)=>{const p=u.length,m=new Array(p);let g=0;u.forEach((v,_)=>{(0,e.encodePacket)(v,!1,b=>{m[_]=b,++g===p&&d(m.join(r))})})};t.encodePayload=o;const h=(u,d)=>{const p=u.split(r),m=[];for(let g=0;g<p.length;g++){const v=(0,n.decodePacket)(p[g],d);if(m.push(v),v.type==="error")break}return m};t.decodePayload=h;function a(){return new TransformStream({transform(u,d){(0,e.encodePacketToBinary)(u,p=>{const m=p.length;let g;if(m<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,m);else if(m<65536){g=new Uint8Array(3);const v=new DataView(g.buffer);v.setUint8(0,126),v.setUint16(1,m)}else{g=new Uint8Array(9);const v=new DataView(g.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(m))}u.data&&typeof u.data!="string"&&(g[0]|=128),d.enqueue(g),d.enqueue(p)})}})}t.createPacketEncoderStream=a;let s;function c(u){return u.reduce((d,p)=>d+p.length,0)}function f(u,d){if(u[0].length===d)return u.shift();const p=new Uint8Array(d);let m=0;for(let g=0;g<d;g++)p[g]=u[0][m++],m===u[0].length&&(u.shift(),m=0);return u.length&&m<u[0].length&&(u[0]=u[0].slice(m)),p}function l(u,d){s||(s=new TextDecoder);const p=[];let m=0,g=-1,v=!1;return new TransformStream({transform(_,b){for(p.push(_);;){if(m===0){if(c(p)<1)break;const y=f(p,1);v=(y[0]&128)===128,g=y[0]&127,g<126?m=3:g===126?m=1:m=2}else if(m===1){if(c(p)<2)break;const y=f(p,2);g=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),m=3}else if(m===2){if(c(p)<8)break;const y=f(p,8),C=new DataView(y.buffer,y.byteOffset,y.length),w=C.getUint32(0);if(w>Math.pow(2,21)-1){b.enqueue(i.ERROR_PACKET);break}g=w*Math.pow(2,32)+C.getUint32(4),m=3}else{if(c(p)<g)break;const y=f(p,g);b.enqueue((0,n.decodePacket)(v?y:s.decode(y),d)),m=0}if(g===0||g>u){b.enqueue(i.ERROR_PACKET);break}}}})}t.createPacketDecoderStream=l,t.protocol=4})(ho);function dn(t){if(t)return zP(t)}function zP(t){for(var e in dn.prototype)t[e]=dn.prototype[e];return t}dn.prototype.on=dn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};dn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};dn.prototype.off=dn.prototype.removeListener=dn.prototype.removeAllListeners=dn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};dn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};dn.prototype.emitReserved=dn.prototype.emit;dn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};dn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const HP=Object.freeze(Object.defineProperty({__proto__:null,Emitter:dn},Symbol.toStringTag,{value:"Module"})),po=yy(HP);var Yn={},Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.globalThisShim=void 0;Zr.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.byteLength=Yn.installTimerFunctions=Yn.pick=void 0;const Ki=Zr;function VP(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}Yn.pick=VP;const XP=Ki.globalThisShim.setTimeout,$P=Ki.globalThisShim.clearTimeout;function GP(t,e){e.useNativeTimers?(t.setTimeoutFn=XP.bind(Ki.globalThisShim),t.clearTimeoutFn=$P.bind(Ki.globalThisShim)):(t.setTimeoutFn=Ki.globalThisShim.setTimeout.bind(Ki.globalThisShim),t.clearTimeoutFn=Ki.globalThisShim.clearTimeout.bind(Ki.globalThisShim))}Yn.installTimerFunctions=GP;const qP=1.33;function KP(t){return typeof t=="string"?JP(t):Math.ceil((t.byteLength||t.size)*qP)}Yn.byteLength=KP;function JP(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}var Af={exports:{}},Fu,rm;function ZP(){if(rm)return Fu;rm=1;var t=1e3,e=t*60,n=e*60,i=n*24,r=i*7,o=i*365.25;Fu=function(f,l){l=l||{};var u=typeof f;if(u==="string"&&f.length>0)return h(f);if(u==="number"&&isFinite(f))return l.long?s(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function h(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var u=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*r;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*e;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function a(f){var l=Math.abs(f);return l>=i?Math.round(f/i)+"d":l>=n?Math.round(f/n)+"h":l>=e?Math.round(f/e)+"m":l>=t?Math.round(f/t)+"s":f+"ms"}function s(f){var l=Math.abs(f);return l>=i?c(f,l,i,"day"):l>=n?c(f,l,n,"hour"):l>=e?c(f,l,e,"minute"):l>=t?c(f,l,t,"second"):f+" ms"}function c(f,l,u,d){var p=l>=u*1.5;return Math.round(f/u)+" "+d+(p?"s":"")}return Fu}function QP(t){n.debug=n,n.default=n,n.coerce=s,n.disable=o,n.enable=r,n.enabled=h,n.humanize=ZP(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let l=0;for(let u=0;u<f.length;u++)l=(l<<5)-l+f.charCodeAt(u),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=e;function n(f){let l,u=null,d,p;function m(...g){if(!m.enabled)return;const v=m,_=Number(new Date),b=_-(l||_);v.diff=b,v.prev=l,v.curr=_,l=_,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,T)=>{if(w==="%%")return"%";y++;const O=n.formatters[T];if(typeof O=="function"){const A=g[y];w=O.call(v,A),g.splice(y,1),y--}return w}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return m.namespace=f,m.useColors=n.useColors(),m.color=n.selectColor(f),m.extend=i,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(f)),p),set:g=>{u=g}}),typeof n.init=="function"&&n.init(m),m}function i(f,l){const u=n(this.namespace+(typeof l>"u"?":":l)+f);return u.log=this.log,u}function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let l;const u=(typeof f=="string"?f:"").split(/[\s,]+/),d=u.length;for(l=0;l<d;l++)u[l]&&(f=u[l].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...n.names.map(a),...n.skips.map(a).map(l=>"-"+l)].join(",");return n.enable(""),f}function h(f){if(f[f.length-1]==="*")return!0;let l,u;for(l=0,u=n.skips.length;l<u;l++)if(n.skips[l].test(f))return!1;for(l=0,u=n.names.length;l<u;l++)if(n.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function s(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var eM=QP;(function(t,e){var n={};e.formatArgs=r,e.save=o,e.load=h,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(u=l))}),c.splice(u,0,f)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function h(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=eM(e);const{formatters:s}=t.exports;s.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(Af,Af.exports);var wi=Af.exports,qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.decode=qr.encode=void 0;function tM(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}qr.encode=tM;function nM(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}qr.decode=nM;var iM=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ji,"__esModule",{value:!0});ji.Transport=ji.TransportError=void 0;const rM=ho,sM=po,oM=Yn,aM=iM(wi),lM=qr,cM=(0,aM.default)("engine.io-client:transport");class D0 extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}ji.TransportError=D0;class uM extends sM.Emitter{constructor(e){super(),this.writable=!1,(0,oM.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new D0(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):cM("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=(0,rM.decodePacket)(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=(0,lM.encode)(e);return n.length?"?"+n:""}}ji.Transport=uM;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.yeast=Fi.decode=Fi.encode=void 0;const A0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Hl=64,P0={};let sm=0,ir=0,om;function Pf(t){let e="";do e=A0[t%Hl]+e,t=Math.floor(t/Hl);while(t>0);return e}Fi.encode=Pf;function fM(t){let e=0;for(ir=0;ir<t.length;ir++)e=e*Hl+P0[t.charAt(ir)];return e}Fi.decode=fM;function hM(){const t=Pf(+new Date);return t!==om?(sm=0,om=t):t+"."+Pf(sm++)}Fi.yeast=hM;for(;ir<Hl;ir++)P0[A0[ir]]=ir;var Qs={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.hasCORS=void 0;let M0=!1;try{M0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}_c.hasCORS=M0;Object.defineProperty(Qs,"__esModule",{value:!0});Qs.createCookieJar=Qs.XHR=void 0;const dM=_c,pM=Zr;function gM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||dM.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new pM.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}Qs.XHR=gM;function mM(){}Qs.createCookieJar=mM;var vM=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Request=Ks.Polling=void 0;const _M=ji,yM=vM(wi),bM=Fi,am=ho,Hh=Qs,wM=po,lm=Yn,CM=Zr,gn=(0,yM.default)("engine.io-client:polling");function SM(){}const TM=function(){return new Hh.XHR({xdomain:!1}).responseType!=null}();class kM extends _M.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const n=e&&e.forceBase64;this.supportsBinary=TM&&!n,this.opts.withCredentials&&(this.cookieJar=(0,Hh.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{gn("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(gn("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){gn("pre-pause polling complete"),--i||n()})),this.writable||(gn("we are currently writing - waiting to pause"),i++,this.once("drain",function(){gn("pre-pause writing complete"),--i||n()}))}else n()}poll(){gn("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){gn("polling got data %s",e);const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};(0,am.decodePayload)(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():gn('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{gn("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(gn("transport open - closing"),e()):(gn("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,am.encodePayload)(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=(0,bM.yeast)()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Qn(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){gn("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}Ks.Polling=kM;class Qn extends wM.Emitter{constructor(e,n){super(),(0,lm.installTimerFunctions)(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=(0,lm.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new Hh.XHR(n);try{gn("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},gn("xhr data %s",this.data),i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Qn.requestsCount++,Qn.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=SM,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Qn.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Ks.Request=Qn;Qn.requestsCount=0;Qn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",cm);else if(typeof addEventListener=="function"){const t="onpagehide"in CM.globalThisShim?"pagehide":"unload";addEventListener(t,cm,!1)}}function cm(){for(let t in Qn.requests)Qn.requests.hasOwnProperty(t)&&Qn.requests[t].abort()}var yc={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.defaultBinaryType=xn.usingBrowserWebSocket=xn.WebSocket=xn.nextTick=void 0;const um=Zr;xn.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0);xn.WebSocket=um.globalThisShim.WebSocket||um.globalThisShim.MozWebSocket;xn.usingBrowserWebSocket=!0;xn.defaultBinaryType="arraybuffer";var OM=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yc,"__esModule",{value:!0});yc.WS=void 0;const EM=ji,xM=Fi,DM=Yn,Xi=xn,AM=OM(wi),PM=ho,MM=(0,AM.default)("engine.io-client:websocket"),fm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class RM extends EM.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=fm?{}:(0,DM.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Xi.usingBrowserWebSocket&&!fm?n?new Xi.WebSocket(e,n):new Xi.WebSocket(e):new Xi.WebSocket(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;(0,PM.encodePacket)(i,this.supportsBinary,o=>{const h={};Xi.usingBrowserWebSocket||(i.options&&(h.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(h.compress=!1));try{Xi.usingBrowserWebSocket?this.ws.send(o):this.ws.send(o,h)}catch{MM("websocket closed before onclose event")}r&&(0,Xi.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=(0,xM.yeast)()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Xi.WebSocket}}yc.WS=RM;var bc={},IM=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});bc.WT=void 0;const FM=ji,LM=xn,hm=ho,NM=IM(wi),Eo=(0,NM.default)("engine.io-client:webtransport");class jM extends FM.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{Eo("transport closed gracefully"),this.onClose()}).catch(e=>{Eo("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=(0,hm.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=(0,hm.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const o=()=>{i.read().then(({done:a,value:s})=>{if(a){Eo("session is closed");return}Eo("received chunk: %o",s),this.onPacket(s),o()}).catch(a=>{Eo("an error occurred while reading: %s",a)})};o();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this.writer.write(h).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this.writer.write(i).then(()=>{r&&(0,LM.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}bc.WT=jM;Object.defineProperty(Ca,"__esModule",{value:!0});Ca.transports=void 0;const BM=Ks,UM=yc,YM=bc;Ca.transports={websocket:UM.WS,webtransport:YM.WT,polling:BM.Polling};var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.parse=void 0;const WM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,zM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function HM(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=WM.exec(t||""),o={},h=14;for(;h--;)o[zM[h]]=r[h]||"";return n!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=VM(o,o.path),o.queryKey=XM(o,o.query),o}Sa.parse=HM;function VM(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function XM(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(n[r]=o)}),n}var $M=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mc,"__esModule",{value:!0});mc.Socket=void 0;const GM=Ca,dm=Yn,qM=qr,pm=Sa,KM=$M(wi),JM=po,R0=ho,ZM=xn,St=(0,KM.default)("engine.io-client:socket");let I0=class bs extends JM.Emitter{constructor(e,n={}){super(),this.binaryType=ZM.defaultBinaryType,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=(0,pm.parse)(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=(0,pm.parse)(n.host).host),(0,dm.installTimerFunctions)(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,qM.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){St('creating transport "%s"',e);const n=Object.assign({},this.opts.query);n.EIO=R0.protocol,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return St("options: %j",i),new GM.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&bs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(n){St("error while creating transport: %s",n),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){St("setting transport %s",e.name),this.transport&&(St("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){St('probing transport "%s"',e);let n=this.createTransport(e),i=!1;bs.priorWebsocketSuccess=!1;const r=()=>{i||(St('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",l=>{if(!i)if(l.type==="pong"&&l.data==="probe"){if(St('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;bs.priorWebsocketSuccess=n.name==="websocket",St('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(St("changing transport and sending upgrade packet"),f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{St('probe transport "%s" failed',e);const u=new Error("probe error");u.transport=n.name,this.emitReserved("upgradeError",u)}}))};function o(){i||(i=!0,f(),n.close(),n=null)}const h=l=>{const u=new Error("probe error: "+l);u.transport=n.name,o(),St('probe transport "%s" failed because of error: %s',e,l),this.emitReserved("upgradeError",u)};function a(){h("transport closed")}function s(){h("socket closed")}function c(l){n&&l.name!==n.name&&(St('"%s" works - aborting "%s"',l.name,n.name),o())}const f=()=>{n.removeListener("open",r),n.removeListener("error",h),n.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};n.once("open",r),n.once("error",h),n.once("close",a),this.once("close",s),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(St("socket open"),this.readyState="open",bs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){St("starting upgrade probes");let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(St('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else St('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();St("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=(0,dm.byteLength)(r)),i>0&&n>this.maxPayload)return St("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);n+=2}return St("payload size is %d (max: %d)",n,this.maxPayload),this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:n,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),St("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){St("socket error %j",e),bs.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(St('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const r=e.length;for(;i<r;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};mc.Socket=I0;I0.protocol=R0.protocol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.Socket=void 0;const e=mc;Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return e.Socket}}),t.protocol=e.Socket.protocol;var n=ji;Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Ca;Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var r=Yn;Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return r.installTimerFunctions}});var o=Sa;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}});var h=xn;Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return h.nextTick}})})(zh);var QM=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gc,"__esModule",{value:!0});gc.url=void 0;const eR=zh,tR=QM(wi),gm=tR.default("socket.io-client:url");function nR(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(gm("protocol-less url %s",t),typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),gm("parse %s",t),i=eR.parse(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}gc.url=nR;var wc={},Ta={},Cc={},eo={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.hasBinary=Kr.isBinary=void 0;const iR=typeof ArrayBuffer=="function",rR=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,F0=Object.prototype.toString,sR=typeof Blob=="function"||typeof Blob<"u"&&F0.call(Blob)==="[object BlobConstructor]",oR=typeof File=="function"||typeof File<"u"&&F0.call(File)==="[object FileConstructor]";function L0(t){return iR&&(t instanceof ArrayBuffer||rR(t))||sR&&t instanceof Blob||oR&&t instanceof File}Kr.isBinary=L0;function gl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(gl(t[n]))return!0;return!1}if(L0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return gl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&gl(t[n]))return!0;return!1}Kr.hasBinary=gl;Object.defineProperty(eo,"__esModule",{value:!0});eo.reconstructPacket=eo.deconstructPacket=void 0;const aR=Kr;function lR(t){const e=[],n=t.data,i=t;return i.data=Mf(n,e),i.attachments=e.length,{packet:i,buffers:e}}eo.deconstructPacket=lR;function Mf(t,e){if(!t)return t;if((0,aR.isBinary)(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=Mf(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Mf(t[i],e));return n}return t}function cR(t,e){return t.data=Rf(t.data,e),delete t.attachments,t}eo.reconstructPacket=cR;function Rf(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Rf(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Rf(t[n],e));return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const e=po,n=eo,i=Kr,o=(0,wi.default)("socket.io-parser"),h=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];t.protocol=5;var a;(function(u){u[u.CONNECT=0]="CONNECT",u[u.DISCONNECT=1]="DISCONNECT",u[u.EVENT=2]="EVENT",u[u.ACK=3]="ACK",u[u.CONNECT_ERROR=4]="CONNECT_ERROR",u[u.BINARY_EVENT=5]="BINARY_EVENT",u[u.BINARY_ACK=6]="BINARY_ACK"})(a=t.PacketType||(t.PacketType={}));class s{constructor(d){this.replacer=d}encode(d){return o("encoding packet %j",d),(d.type===a.EVENT||d.type===a.ACK)&&(0,i.hasBinary)(d)?this.encodeAsBinary({type:d.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:d.nsp,data:d.data,id:d.id}):[this.encodeAsString(d)]}encodeAsString(d){let p=""+d.type;return(d.type===a.BINARY_EVENT||d.type===a.BINARY_ACK)&&(p+=d.attachments+"-"),d.nsp&&d.nsp!=="/"&&(p+=d.nsp+","),d.id!=null&&(p+=d.id),d.data!=null&&(p+=JSON.stringify(d.data,this.replacer)),o("encoded %j as %s",d,p),p}encodeAsBinary(d){const p=(0,n.deconstructPacket)(d),m=this.encodeAsString(p.packet),g=p.buffers;return g.unshift(m),g}}t.Encoder=s;function c(u){return Object.prototype.toString.call(u)==="[object Object]"}class f extends e.Emitter{constructor(d){super(),this.reviver=d}add(d){let p;if(typeof d=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(d);const m=p.type===a.BINARY_EVENT;m||p.type===a.BINARY_ACK?(p.type=m?a.EVENT:a.ACK,this.reconstructor=new l(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,i.isBinary)(d)||d.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(d),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+d)}decodeString(d){let p=0;const m={type:Number(d.charAt(0))};if(a[m.type]===void 0)throw new Error("unknown packet type "+m.type);if(m.type===a.BINARY_EVENT||m.type===a.BINARY_ACK){const v=p+1;for(;d.charAt(++p)!=="-"&&p!=d.length;);const _=d.substring(v,p);if(_!=Number(_)||d.charAt(p)!=="-")throw new Error("Illegal attachments");m.attachments=Number(_)}if(d.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(d.charAt(p)===","||p===d.length););m.nsp=d.substring(v,p)}else m.nsp="/";const g=d.charAt(p+1);if(g!==""&&Number(g)==g){const v=p+1;for(;++p;){const _=d.charAt(p);if(_==null||Number(_)!=_){--p;break}if(p===d.length)break}m.id=Number(d.substring(v,p+1))}if(d.charAt(++p)){const v=this.tryParse(d.substr(p));if(f.isPayloadValid(m.type,v))m.data=v;else throw new Error("invalid payload")}return o("decoded %s as %j",d,m),m}tryParse(d){try{return JSON.parse(d,this.reviver)}catch{return!1}}static isPayloadValid(d,p){switch(d){case a.CONNECT:return c(p);case a.DISCONNECT:return p===void 0;case a.CONNECT_ERROR:return typeof p=="string"||c(p);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&h.indexOf(p[0])===-1);case a.ACK:case a.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=f;class l{constructor(d){this.packet=d,this.buffers=[],this.reconPack=d}takeBinaryData(d){if(this.buffers.push(d),this.buffers.length===this.reconPack.attachments){const p=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(Cc);var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.on=void 0;function uR(t,e,n){return t.on(e,n),function(){t.off(e,n)}}ka.on=uR;var fR=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.Socket=void 0;const $n=Cc,Ka=ka,hR=po,dR=fR(wi),Wt=dR.default("socket.io-client:socket"),pR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gR extends hR.Emitter{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ka.on(e,"open",this.onopen.bind(this)),Ka.on(e,"packet",this.onpacket.bind(this)),Ka.on(e,"error",this.onerror.bind(this)),Ka.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(pR.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:$n.PacketType.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++;Wt("emitting packet with ack id %d",h);const a=n.pop();this._registerAckCallback(h,a),i.id=h}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?Wt("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&(Wt("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));Wt("event with ack id %d has timed out after %d ms",e,r),n.call(this,new Error("operation has timed out"))},r),h=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};h.withError=!0,this.acks[e]=h}emitWithAck(e,...n){return new Promise((i,r)=>{const o=(h,a)=>h?r(h):i(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(Wt("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),n&&n(r)):(Wt("packet [%d] was successfully sent",i.id),this._queue.shift(),n&&n(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(Wt("draining queue"),!this.connected||this._queue.length===0)return;const n=this._queue[0];if(n.pending&&!e){Wt("packet [%d] has already been sent and is waiting for an ack",n.id);return}n.pending=!0,n.tryCount++,Wt("sending packet [%d] (try n°%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Wt("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:$n.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){Wt("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case $n.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $n.PacketType.EVENT:case $n.PacketType.BINARY_EVENT:this.onevent(e);break;case $n.PacketType.ACK:case $n.PacketType.BINARY_ACK:this.onack(e);break;case $n.PacketType.DISCONNECT:this.ondisconnect();break;case $n.PacketType.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];Wt("emitting event %j",n),e.id!=null&&(Wt("attaching ack callback to event"),n.push(this.ack(e.id))),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,Wt("sending ack %j",r),n.packet({type:$n.PacketType.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];if(typeof n!="function"){Wt("bad ack %s",e.id);return}delete this.acks[e.id],Wt("calling ack %s with %j",e.id,e.data),n.withError&&e.data.unshift(null),n.apply(this,e.data)}onconnect(e,n){Wt("socket connected with id %s",e),this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){Wt("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Wt("performing disconnect (%s)",this.nsp),this.packet({type:$n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}Ta.Socket=gR;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.Backoff=void 0;function go(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Sc.Backoff=go;go.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};go.prototype.reset=function(){this.attempts=0};go.prototype.setMin=function(t){this.ms=t};go.prototype.setMax=function(t){this.max=t};go.prototype.setJitter=function(t){this.jitter=t};var mR=Re&&Re.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),vR=Re&&Re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_R=Re&&Re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&mR(e,t,n);return vR(e,t),e},yR=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wc,"__esModule",{value:!0});wc.Manager=void 0;const Lu=zh,bR=Ta,wR=_R(Cc),wr=ka,CR=Sc,SR=po,TR=yR(wi),en=TR.default("socket.io-client:manager");class kR extends SR.Emitter{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Lu.installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new CR.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||wR;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(en("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;en("opening %s",this.uri),this.engine=new Lu.Socket(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=wr.on(n,"open",function(){i.onopen(),e&&e()}),o=a=>{en("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},h=wr.on(n,"error",o);if(this._timeout!==!1){const a=this._timeout;en("connect attempt will timeout after %d",a);const s=this.setTimeoutFn(()=>{en("connect attempt timed out after %d",a),r(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(h),this}connect(e){return this.open(e)}onopen(){en("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(wr.on(e,"ping",this.onping.bind(this)),wr.on(e,"data",this.ondata.bind(this)),wr.on(e,"error",this.onerror.bind(this)),wr.on(e,"close",this.onclose.bind(this)),wr.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Lu.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){en("error",e),this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new bR.Socket(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active){en("socket %s is still active, skipping close",i);return}this._close()}_packet(e){en("writing packet %j",e);const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){en("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){en("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){en("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)en("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();en("will wait %dms before reconnect attempt",n),this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(en("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(en("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(en("reconnect success"),e.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}wc.Manager=kR;(function(t,e){var n=Re&&Re.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const i=gc,r=wc;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});const o=Ta;Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(wi).default("socket.io-client"),s={};function c(l,u){typeof l=="object"&&(u=l,l=void 0),u=u||{};const d=i.url(l,u.path||"/socket.io"),p=d.source,m=d.id,g=d.path,v=s[m]&&g in s[m].nsps,_=u.forceNew||u["force new connection"]||u.multiplex===!1||v;let b;return _?(a("ignoring socket cache for %s",p),b=new r.Manager(p,u)):(s[m]||(a("new io instance for %s",p),s[m]=new r.Manager(p,u)),b=s[m]),d.query&&!u.query&&(u.query=d.queryKey),b.socket(d.path,u)}e.io=c,e.connect=c,e.default=c,Object.assign(c,{Manager:r.Manager,Socket:o.Socket,io:c,connect:c});var f=Cc;Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return f.protocol}}),t.exports=c})(Df,Df.exports);var OR=Df.exports,Vh={},Cr=Re&&Re.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(Vh,"__esModule",{value:!0});class ER{constructor(e){this.cloudConvert=e}get(e,n=null){return Cr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{params:n||{}})).data.data})}wait(e){return Cr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}all(e=null){return Cr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Cr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e,{maxBodyLength:1/0})).data.data})}delete(e){return Cr(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`jobs/${e}`)})}subscribeEvent(e,n,i){return Cr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Cr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}.tasks`,`task.${n}`,i)})}getExportUrls(e){return e.tasks.filter(n=>n.operation==="export/url"&&n.status==="finished").flatMap(n=>{var i,r;return(r=(i=n.result)===null||i===void 0?void 0:i.files)!==null&&r!==void 0?r:[]})}}Vh.default=ER;var Xh={},xR=typeof self=="object"?self.FormData:window.FormData,$i=Re&&Re.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})},N0=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xh,"__esModule",{value:!0});const DR=N0(xR),AR=N0(C0),mm=Ir;class PR{constructor(e){this.cloudConvert=e}get(e,n=null){return $i(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{params:n||{}})).data.data})}wait(e){return $i(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}cancel(e){return $i(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(`tasks/${e}/cancel`)).data.data})}all(e=null){return $i(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,n=null){return $i(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,n)).data.data})}delete(e){return $i(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`tasks/${e}`)})}upload(e,n,i=null,r=null){return $i(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const o=new DR.default;for(const a in e.result.form.parameters)o.append(a,e.result.form.parameters[a]);const h={};return i&&(h.filename=i),r?h.knownLength=r:n instanceof mm.ReadStream&&(h.knownLength=(0,mm.statSync)(n.path).size),o.append("file",n,h),yield AR.default.post(e.result.form.url,o,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign(Object.assign({},o.hasKnownLength()?{"Content-Length":o.getLengthSync()}:{}),o.getHeaders())})})}subscribeEvent(e,n,i){return $i(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-task.${e}`,`task.${n}`,i)})}}Xh.default=PR;var $h={},Nu=Re&&Re.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty($h,"__esModule",{value:!0});class MR{constructor(e){this.cloudConvert=e}me(){return Nu(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,n,i){return Nu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.jobs`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Nu(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.tasks`,`task.${n}`,i)})}}$h.default=MR;var Gh={},RR=Re&&Re.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),IR=Re&&Re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FR=Re&&Re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&RR(e,t,n);return IR(e,t),e};Object.defineProperty(Gh,"__esModule",{value:!0});const LR=FR(Ir);class NR{verify(e,n,i){const o=LR.createHmac("sha256",i).update(Buffer.from(e,"utf-8")).digest("hex");return n===o}}Gh.default=NR;const jR="cloudconvert",BR="2.3.6",UR="MIT",YR="Official Node.js SDK for the CloudConvert API",WR="https://github.com/cloudconvert/cloudconvert-node",zR="Josias Montag <josias@montag.info>",HR="built/lib/index.js",VR="built/lib/index.d.ts",XR="built/lib/CloudConvert.js",$R={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},GR={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},qR={axios:"^0.27.2","form-data":"^4.0.0","socket.io-client":"^4.6.1"},KR={"@types/node":"^18.14.0","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.53.0",chai:"^4.3.7",eslint:"^8.34.0","eslint-config-prettier":"^8.6.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^4.2.1",esm:"^3.2.25",mocha:"^8.4.0",nock:"^13.3.0",prettier:"^2.8.4",typescript:"^4.9.5"},JR={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."},ZR={name:jR,version:BR,license:UR,description:YR,homepage:WR,author:zR,main:HR,types:VR,module:XR,repository:$R,bugs:GR,dependencies:qR,devDependencies:KR,scripts:JR};var qh={},QR=Re&&Re.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),eI=Re&&Re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tI=Re&&Re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&QR(e,t,n);return eI(e,t),e};Object.defineProperty(qh,"__esModule",{value:!0});const nI=tI(Ir);class iI{sign(e,n,i,r){const o=JSON.stringify(i),a=Buffer.from(o||"").toString("base64").replace("+","-").replace("/","_").replace(/=+$/,"");let s=`${e}?job=${a}`;r&&(s+=`&cache_key=${r}`);const f=nI.createHmac("sha256",n).update(Buffer.from(s,"utf-8")).digest("hex");return s+=`&s=${f}`,s}}qh.default=iI;var Qr=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s0,"__esModule",{value:!0});const rI=Qr(C0),sI=Qr(OR),oI=Qr(Vh),aI=Qr(Xh),lI=Qr($h),cI=Qr(Gh),uI=ZR,fI=Qr(qh);class hI{constructor(e,n=!1,i=null){this.apiKey=e,this.useSandbox=n,this.region=i,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=rI.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":`https://${this.region?this.region+".":""}api.cloudconvert.com/v2/`,headers:{Authorization:`Bearer ${this.apiKey}`,"User-Agent":`cloudconvert-node/v${uI.version} (https://github.com/cloudconvert/cloudconvert-node)`}})}createResources(){this.tasks=new aI.default(this),this.jobs=new oI.default(this),this.users=new lI.default(this),this.webhooks=new cI.default,this.signedUrls=new fI.default}subscribe(e,n,i){var r,o;this.socket||(this.socket=sI.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),!((r=this.subscribedChannels)===null||r===void 0)&&r.get(e)||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:`Bearer ${this.apiKey}`}}}),(o=this.subscribedChannels)===null||o===void 0||o.set(e,!0)),this.socket.on(n,function(h,a){e===h&&i(a)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var dI=s0.default=hI;const Mr=async(t,e,n,i)=>{const o=await(await fetch(t)).blob();return j0(o,e,n,i)},j0=(t,e,n,i,r="")=>new Promise((o,h)=>{const a=vA(OA,e),s=gA(a,t,i);s.on("state_changed",c=>{const f=c.bytesTransferred/c.totalBytes*100;n({progress:f,uploadMsg:r})},c=>{n({error:c,uploadMsg:r})},()=>{mA(s.snapshot.ref).then(c=>{const f={url:c,metadata:s.snapshot.metadata,fileName:s.snapshot.metadata.fullPath,extension:i.extension,size:s.snapshot.totalBytes};n({success:!0,uploadMsg:r}),o(f)})})});function pI(t,e,n){return new Promise(async(i,r)=>{try{const o=new dI("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMWIzNWRhYTc3MmZkZTI0ZDI1ODBiMTNiNDkyMWMyNDkzMmE5ZDJhYzk1OTQzNGIzMTQwYWM0NDEyNGI4ZDRjMDFkNDQwYmJkMDJlYzZmNzEiLCJpYXQiOjE2NDY2MjM0MTEuMDAxMjg5LCJuYmYiOjE2NDY2MjM0MTEuMDAxMjkyLCJleHAiOjQ4MDIyOTcwMTAuOTk3ODMzLCJzdWIiOiI0MzczODU0NiIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiXX0.TLmy-ePeLIxA8VE7TkWuQU1jCUSQ6smRW-tKQjGcU0Z7cwR2fE7p5Jd-7QYVI-f6zM6IUKH6JTFRgE9N_4W9ldwLe6Rx-XyOl8v3Rh1Cp4MUIb5kThF-c2uj5hsMIHj1pmFflmNpHB3jL4Mb7To6CCwpw_5Q7BUVpYOG_eHAXboWCGnfb62hFjjbHTLzm0rfSLH-8eiCikzKovjD1W2xK05Rc4ZTjCKikivHqkKpcQjxuH8bEu2mnoHP-flqknIz8kn3yzp3hc55jd5l-QFG8AZ8fcjsVx8MpoRHW4k1lcDjvgIlatYFfHXnmjXnFm9aUwDiPP0XNbRfUjYUoi0jzt7l004sdnyh8_ZOboz1dB0EoGBg0L9NK4V6BZx_Ne59czgh5LdmbBaByVCc26LGZkA6DnZg_PTz7UYQ924xGtjWwFFYffCjRNH9r7AfmE4656KNNaeVwORygRwzL4QbAnjWYKtQUpOOtSiD3xUSENIF4uYLQRthaqvkdxi92LrF2r9MaeDAWqxPV7nLYPSeOUS_Qc75n1F0Ke3VCuE5Z2n_lYkklhGVPSS4jXJJJ7mAJolwp-zlKMYLHINRmZ08AgjV39tCtA--EJVikinVX7Wg7RLL-nRkWRFfI_UgM7OVirqb4O1OJb8MfqRAwfLhj6lDCNTxA4ycI8s0f6x9lR8");let h=await o.jobs.create({tasks:{"import-1":{operation:"import/url",url:`${t.url}`},"task-1":{operation:"convert",input:["import-1"],output_format:"svg"},"export-1":{operation:"export/url",input:["task-1"],inline:!0,archive_multiple_files:!1}},tag:"jobbuilder"});o.jobs.subscribeTaskEvent(h.id,"finished",async a=>{if(a.task.name==="import-1"&&n({uploadMsg:"원본파일을 분석중 입니다.",progress:30}),a.task.name==="export-1"){const s=await Mr(a.task.result.files[0].url,e,n,{extension:"svg"});i(s)}})}catch(o){r(o)}})}let Ja;const gI=new Uint8Array(16);function mI(){if(!Ja&&(Ja=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ja))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ja(gI)}const tn=[];for(let t=0;t<256;++t)tn.push((t+256).toString(16).slice(1));function vI(t,e=0){return tn[t[e+0]]+tn[t[e+1]]+tn[t[e+2]]+tn[t[e+3]]+"-"+tn[t[e+4]]+tn[t[e+5]]+"-"+tn[t[e+6]]+tn[t[e+7]]+"-"+tn[t[e+8]]+tn[t[e+9]]+"-"+tn[t[e+10]]+tn[t[e+11]]+tn[t[e+12]]+tn[t[e+13]]+tn[t[e+14]]+tn[t[e+15]]}const _I=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vm={randomUUID:_I};function Er(t,e,n){if(vm.randomUUID&&!e&&!t)return vm.randomUUID();t=t||{};const i=t.random||(t.rng||mI)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return vI(i)}function _m(t,e,n){const i=t.slice();return i[8]=e[n],i}function yI(t){let e,n,i,r,o,h,a;n=new CE({}),n.$on("drop",t[9]);let s=Le(t[5]),c=[];for(let f=0;f<s.length;f+=1)c[f]=ym(_m(t,s,f));return{c(){e=E("div"),he(n.$$.fragment),i=V(),r=E("div"),r.innerHTML='<h1 class="font-semibold text-lg">이미지 보관함</h1> <span class="text-xs">사용하실 이미지를 선택해 주세요.</span>',o=V(),h=E("div");for(let f=0;f<c.length;f+=1)c[f].c();S(e,"class","mt-3 overflow-y-auto gap-4"),S(r,"class","flex gap-3 items-center mt-3"),S(h,"class","grid gap-3 grid-cols-2 md:grid-cols-4 mt-5")},m(f,l){U(f,e,l),ue(n,e,null),U(f,i,l),U(f,r,l),U(f,o,l),U(f,h,l);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(h,null);a=!0},p(f,l){if(l[0]&65568){s=Le(f[5]);let u;for(u=0;u<s.length;u+=1){const d=_m(f,s,u);c[u]?c[u].p(d,l):(c[u]=ym(d),c[u].c(),c[u].m(h,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}},i(f){a||(I(n.$$.fragment,f),a=!0)},o(f){W(n.$$.fragment,f),a=!1},d(f){f&&(j(e),j(i),j(r),j(o),j(h)),fe(n),Ft(c,f)}}}function bI(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b=t[1]&&bm(t);c=new ke({props:{icon:"fe:crop",height:25}});let y=t[6].usePicWish&&wm(t);return{c(){e=E("div"),n=E("img"),o=V(),b&&b.c(),h=V(),a=E("div"),s=E("button"),he(c.$$.fragment),f=V(),l=E("span"),l.textContent="자르기",u=V(),y&&y.c(),d=V(),p=E("div"),m=E("button"),m.textContent="이미지 등록",S(n,"id","upload-image-ori"),Ze(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt",r=t[8].name),S(l,"class","text-2xs"),S(s,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(s,"type","button"),S(a,"class","absolute left-0 top-10 flex flex-col gap-2"),S(e,"class","p-1 relative image-container overflow-y-auto svelte-1cs98qz"),S(m,"class","btn primary-btn"),S(p,"class","actions mt-3 flex justify-center gap-2")},m(C,w){U(C,e,w),k(e,n),t[19](n),k(e,o),b&&b.m(e,null),k(e,h),k(e,a),k(a,s),ue(c,s,null),k(s,f),k(s,l),k(a,u),y&&y.m(a,null),U(C,d,w),U(C,p,w),k(p,m),g=!0,v||(_=[ne(s,"click",t[22]),ne(m,"click",t[25])],v=!0)},p(C,w){(!g||w[0]&256&&!Ze(n.src,i=C[8].url))&&S(n,"src",i),(!g||w[0]&256&&r!==(r=C[8].name))&&S(n,"alt",r),C[1]?b?(b.p(C,w),w[0]&2&&I(b,1)):(b=bm(C),b.c(),I(b,1),b.m(e,h)):b&&(Oe(),W(b,1,1,()=>{b=null}),Ee()),C[6].usePicWish?y?(y.p(C,w),w[0]&64&&I(y,1)):(y=wm(C),y.c(),I(y,1),y.m(a,null)):y&&(Oe(),W(y,1,1,()=>{y=null}),Ee())},i(C){g||(I(b),I(c.$$.fragment,C),I(y),g=!0)},o(C){W(b),W(c.$$.fragment,C),W(y),g=!1},d(C){C&&(j(e),j(d),j(p)),t[19](null),b&&b.d(),fe(c),y&&y.d(),v=!1,We(_)}}}function ym(t){let e,n,i,r,o,h,a;function s(){return t[26](t[8])}return{c(){e=E("button"),n=E("img"),o=V(),Ze(n.src,i=t[8].thumbnail.url)||S(n,"src",i),S(n,"alt",r=t[8].thumbnail.fileName),S(n,"class","object-contain"),S(e,"class","image-container flex border rounded svelte-1cs98qz")},m(c,f){U(c,e,f),k(e,n),k(e,o),h||(a=ne(e,"click",s),h=!0)},p(c,f){t=c,f[0]&32&&!Ze(n.src,i=t[8].thumbnail.url)&&S(n,"src",i),f[0]&32&&r!==(r=t[8].thumbnail.fileName)&&S(n,"alt",r)},d(c){c&&j(e),h=!1,a()}}}function bm(t){let e,n,i,r,o,h,a,s,c,f,l;return i=new ke({props:{icon:"mdi:success-bold"}}),a=new ke({props:{icon:"mdi:success-bold"}}),{c(){e=E("div"),n=E("button"),he(i.$$.fragment),r=Te(" 자르기"),o=V(),h=E("button"),he(a.$$.fragment),s=Te(" 취소"),S(n,"type","button"),S(n,"class","btn primary-btn"),S(h,"type","button"),S(h,"class","btn primary-btn"),S(e,"class","sticky bottom-0 flex w-full p-3")},m(u,d){U(u,e,d),k(e,n),ue(i,n,null),k(n,r),k(e,o),k(e,h),ue(a,h,null),k(h,s),c=!0,f||(l=[ne(n,"click",t[20]),ne(h,"click",t[21])],f=!0)},p:ve,i(u){c||(I(i.$$.fragment,u),I(a.$$.fragment,u),c=!0)},o(u){W(i.$$.fragment,u),W(a.$$.fragment,u),c=!1},d(u){u&&j(e),fe(i),fe(a),f=!1,We(l)}}}function wm(t){let e,n,i,r;const o=[CI,wI],h=[];function a(s,c){return s[0]?0:1}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=et()},m(s,c){h[e].m(s,c),U(s,i,c),r=!0},p(s,c){let f=e;e=a(s),e===f?h[e].p(s,c):(Oe(),W(h[f],1,1,()=>{h[f]=null}),Ee(),n=h[e],n?n.p(s,c):(n=h[e]=o[e](s),n.c()),I(n,1),n.m(i.parentNode,i))},i(s){r||(I(n),r=!0)},o(s){W(n),r=!1},d(s){s&&j(i),h[e].d(s)}}}function wI(t){let e,n,i,r,o,h,a;return n=new ke({props:{icon:"material-symbols-light:background-replace-rounded",height:25}}),{c(){e=E("button"),he(n.$$.fragment),i=V(),r=E("span"),r.textContent="배경지우기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){U(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=ne(e,"click",t[24]),h=!0)},p:ve,i(s){o||(I(n.$$.fragment,s),o=!0)},o(s){W(n.$$.fragment,s),o=!1},d(s){s&&j(e),fe(n),h=!1,a()}}}function CI(t){let e,n,i,r,o,h,a;return n=new ke({props:{icon:"iconoir:redo",height:25}}),{c(){e=E("button"),he(n.$$.fragment),i=V(),r=E("span"),r.textContent="되돌리기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){U(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=ne(e,"click",t[23]),h=!0)},p:ve,i(s){o||(I(n.$$.fragment,s),o=!0)},o(s){W(n.$$.fragment,s),o=!1},d(s){s&&j(e),fe(n),h=!1,a()}}}function Cm(t){let e,n;return e=new xb({props:{$$slots:{default:[SI]},$$scope:{ctx:t}}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&16|r[1]&8&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function SI(t){let e;return{c(){e=Te(t[4])},m(n,i){U(n,e,i)},p(n,i){i[0]&16&&Ve(e,n[4])},d(n){n&&j(e)}}}function TI(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;o=new ke({props:{icon:"mingcute:left-line",height:"30"}});const p=[bI,yI],m=[];function g(_,b){return _[8]?0:1}a=g(t),s=m[a]=p[a](t);let v=t[3]&&Cm(t);return{c(){e=E("div"),n=E("h2"),i=Te(`이미지 업로드\r
        `),r=E("button"),he(o.$$.fragment),h=V(),s.c(),c=V(),v&&v.c(),f=et(),S(r,"type","button"),S(r,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(_,b){U(_,e,b),k(e,n),k(n,i),k(n,r),ue(o,r,null),k(e,h),m[a].m(e,null),U(_,c,b),v&&v.m(_,b),U(_,f,b),l=!0,u||(d=ne(r,"click",t[18]),u=!0)},p(_,b){let y=a;a=g(_),a===y?m[a].p(_,b):(Oe(),W(m[y],1,1,()=>{m[y]=null}),Ee(),s=m[a],s?s.p(_,b):(s=m[a]=p[a](_),s.c()),I(s,1),s.m(e,null)),_[3]?v?(v.p(_,b),b[0]&8&&I(v,1)):(v=Cm(_),v.c(),I(v,1),v.m(f.parentNode,f)):v&&(Oe(),W(v,1,1,()=>{v=null}),Ee())},i(_){l||(I(o.$$.fragment,_),I(s),I(v),l=!0)},o(_){W(o.$$.fragment,_),W(s),W(v),l=!1},d(_){_&&(j(e),j(c),j(f)),fe(o),m[a].d(),v&&v.d(_),u=!1,d()}}}function hs(t){console.log({e:t})}function kI(t,e,n){let i,r,o,h,a;Ne(t,Yo,ee=>n(5,i=ee)),Ne(t,je,ee=>n(29,r=ee)),Ne(t,Ko,ee=>n(30,o=ee)),Ne(t,lo,ee=>n(6,h=ee)),Ne(t,Jt,ee=>n(7,a=ee));let{handleAddUpload:s}=e;Yt();let c=null,f=null,l=null,u={},d=null,p=null,m=!1,g="";async function v(ee){n(3,m=!0);try{const x=ee.detail;if(x.length>0){const P=x[0],R=new FileReader,F=Ex(P);if(F==="psd"||F==="svg"||F==="ai"||F==="eps"||F==="pdf"){n(4,g="이미지를 업로드중 입니다.");const K={},M=`editorData/${r.uuid}/`,D={extension:F},H=await j0(P,`${M}${Er()}.${F}`,hs,D);switch(console.log({uploadFile:H}),K.origin=H,F){case"svg":K.thumbnail=H;break;case"ai":case"eps":case"pdf":n(4,g="파일을 이미지로 변환중입니다.");const J=await pI(H,`${M}${Er()}.svg`,hs);K.thumbnail=J,console.log({covertSVG:J});break;case"psd":n(4,g="썸네일을 생성중 입니다.");const ie=await fg({fileName:H.fileName,extension:F,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});if(ie.original){const $=await Mr(ie.original,`${M}${Er()}.png`,hs,D);K.convert=$}n(4,g="썸네일을 업로드중 입니다.");const Z=await Mr(ie.thumbnail,`${M}${Er()}.png`,hs,D);K.thumbnail=Z;break;default:break}console.log({uploaded:K}),ye(je,r.uploads=[...r.uploads,K],r),ye(Yo,i=[...i,K],i),n(3,m=!1);return}if(F!=="png"&&F!=="jpg"&&F!=="jpeg"&&F!=="gif"&&F!=="webp"){alert("지원하지 않는 파일 형식입니다."),n(3,m=!1);return}R.onload=function(K){const M=K.target.result,D=new Image;D.src=M,D.onload=function(){const H=D.width,J=D.height;n(8,c={url:M,width:H,height:J,extension:F})},n(3,m=!1)},R.readAsDataURL(P)}}catch(x){console.log({error:x}),n(3,m=!1)}}function _(){n(1,d=new Tb(p,{crop(ee){u=ee.detail}}))}function b(){n(8,c={url:f}),n(0,f=null)}async function y(){if(l){n(0,f=c.url),n(8,c={url:l});return}try{n(3,m=!0),n(4,g="AI 배경제거를 진행중 입니다."),n(8,c.url=c.url.replace(/^data:image\/png;base64,/,""),c),n(8,c.url=c.url.replace(/^data:image\/jpeg;base64,/,""),c),n(8,c.url=c.url.replace(/^data:image\/gif;base64,/,""),c);const ee=await dx(h.id,c.url);if(ee.status===200)n(0,f=`data:image/png;base64, ${c.url}`),l=`data:image/png;base64, ${ee.data.image}`,n(8,c={url:l});else throw new Error("배경제거에 실패했습니다.")}catch(ee){console.log({error:ee})}finally{n(4,g=""),n(3,m=!1)}}function C(){d&&(d.destroy(),n(1,d=null))}async function w(){try{n(3,m=!0),n(4,g="이미지를 업로드중 입니다.");const ee={},x=`editorData/${r.uuid}/`,P={width:c.width,height:c.height,extension:c.extension},R=await Mr(c.url,`${x}${Er()}.${c.extension}`,hs,P);ee.origin=R,ee.convert=R,console.log({uploadFile:R}),n(4,g="썸네일을 생성중 입니다.");const F=await fg({fileName:R.fileName,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});n(4,g="썸네일을 업로드중 입니다.");const K=await Mr(F.thumbnail,`${x}${Er()}.png`,hs,P);ee.thumbnail=K,ye(je,r.uploads=[...r.uploads,ee],r),ye(Yo,i=[...i,ee],i),n(8,c=null)}catch(ee){console.log({error:ee})}finally{n(4,g=""),n(3,m=!1)}}function T(){const ee=document.createElement("canvas"),x=ee.getContext("2d"),{x:P,y:R,width:F,height:K}=u;ee.width=F,ee.height=K,x.drawImage(p,-P,-R),n(8,c={url:ee.toDataURL("image/png"),width:F,height:K,extension:"png"}),C()}function O(ee){s(ee)}const A=()=>ye(Jt,a=null,a);function L(ee){it[ee?"unshift":"push"](()=>{p=ee,n(2,p)})}const G=()=>T(),Y=()=>C(),te=()=>_(),q=()=>b(),N=()=>y(),B=()=>w(),Q=ee=>O(ee);return t.$$set=ee=>{"handleAddUpload"in ee&&n(17,s=ee.handleAddUpload)},[f,d,p,m,g,i,h,a,c,v,_,b,y,C,w,T,O,s,A,L,G,Y,te,q,N,B,Q]}class OI extends Ge{constructor(e){super(),$e(this,e,kI,TI,Xe,{handleAddUpload:17},null,[-1,-1])}}function EI(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;h=new ke({props:{icon:"mingcute:left-line",height:"30"}});let y=xI;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="텍스트",r=V(),o=E("button"),he(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("div"),l=E("textarea"),u=V(),d=E("div"),p=E("button"),p.textContent="입력하기",m=V(),g=et(),S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"class","textarea"),S(l,"rows","5"),S(l,"placeholder","텍스트를 입력해주세요."),S(f,"class","my-3"),S(p,"type","button"),S(p,"class","btn btn-sm md:p-3 md:text-base primary-btn w-full"),S(d,"class","p-3 flex justify-center"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(C,w){U(C,e,w),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),Fe(l,t[1]),k(c,u),k(c,d),k(d,p),U(C,m,w),U(C,g,w),v=!0,_||(b=[ne(o,"click",t[3]),ne(l,"input",t[4]),ne(p,"click",t[5])],_=!0)},p(C,[w]){w&2&&Fe(l,C[1])},i(C){v||(I(h.$$.fragment,C),I(y),v=!0)},o(C){W(h.$$.fragment,C),W(y),v=!1},d(C){C&&(j(e),j(m),j(g)),fe(h),_=!1,We(b)}}}let xI=!1;function DI(t,e,n){let i;Ne(t,Jt,c=>n(2,i=c));let{handleAddText:r}=e,o="";const h=()=>ye(Jt,i=null,i);function a(){o=this.value,n(1,o)}const s=()=>r(o);return t.$$set=c=>{"handleAddText"in c&&n(0,r=c.handleAddText)},[r,o,i,h,a,s]}class AI extends Ge{constructor(e){super(),$e(this,e,DI,EI,Xe,{handleAddText:0})}}function PI(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,L;h=new ke({props:{icon:"mingcute:left-line",height:"30"}}),u=new ke({props:{icon:"ic:outline-rectangle",width:16}}),m=new ke({props:{icon:"ic:outline-circle",width:16}}),_=new ke({props:{icon:"uil:triangle",width:16}}),C=new ke({props:{icon:"material-symbols-light:draw",width:16}});let G=MI;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="도형/그리기",r=V(),o=E("button"),he(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("div"),l=E("button"),he(u.$$.fragment),d=V(),p=E("button"),he(m.$$.fragment),g=V(),v=E("button"),he(_.$$.fragment),b=V(),y=E("button"),he(C.$$.fragment),w=V(),T=et(),S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"type","button"),S(l,"class","btn white-btn"),S(p,"type","button"),S(p,"class","btn white-btn"),S(v,"type","button"),S(v,"class","btn white-btn"),S(y,"type","button"),S(y,"class","btn white-btn"),S(f,"class","my-3 flex gap-1"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(Y,te){U(Y,e,te),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),ue(u,l,null),k(f,d),k(f,p),ue(m,p,null),k(f,g),k(f,v),ue(_,v,null),k(f,b),k(f,y),ue(C,y,null),U(Y,w,te),U(Y,T,te),O=!0,A||(L=[ne(o,"click",t[2]),ne(l,"click",t[3]),ne(p,"click",t[4]),ne(v,"click",t[5]),ne(y,"click",t[6])],A=!0)},p(Y,[te]){},i(Y){O||(I(h.$$.fragment,Y),I(u.$$.fragment,Y),I(m.$$.fragment,Y),I(_.$$.fragment,Y),I(C.$$.fragment,Y),I(G),O=!0)},o(Y){W(h.$$.fragment,Y),W(u.$$.fragment,Y),W(m.$$.fragment,Y),W(_.$$.fragment,Y),W(C.$$.fragment,Y),W(G),O=!1},d(Y){Y&&(j(e),j(w),j(T)),fe(h),fe(u),fe(m),fe(_),fe(C),A=!1,We(L)}}}let MI=!1;function RI(t,e,n){let i;Ne(t,Jt,f=>n(1,i=f));let{handleAddShape:r}=e;const o=()=>ye(Jt,i=null,i),h=()=>r("rect"),a=()=>r("circle"),s=()=>r("triangle"),c=()=>r("draw");return t.$$set=f=>{"handleAddShape"in f&&n(0,r=f.handleAddShape)},[r,i,o,h,a,s,c]}class II extends Ge{constructor(e){super(),$e(this,e,RI,PI,Xe,{handleAddShape:0})}}function FI(t){let e;return{c(){e=E("canvas"),e.innerHTML="",S(e,"id","print"),S(e,"class","svelte-d96o53")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function LI(t){let e,n,i,r,o;return{c(){var h,a,s;e=E("div"),n=E("div"),i=E("canvas"),i.innerHTML="",S(i,"id","print"),S(i,"class","svelte-d96o53"),S(n,"class","print-container absolute"),S(n,"style",`left:${t[6].background.canvasLeft}%; top:${t[6].background.canvasTop}%; width:${t[6].background.canvasPer}%; height:${t[6].background.canvasPer*t[8]}%;`),S(e,"style",r=`max-width: ${t[7]}px; max-height: ${t[9]}px; width: 100%; height: ${t[2]}px; background-image:url(${(a=(h=t[6].background)==null?void 0:h.image)==null?void 0:a.url}); background-color:${(s=t[5].currentOption)!=null&&s.colorCode?t[5].currentOption.colorCode:"#ffffff"}`),S(e,"class","flex flex-col justify-center background-container svelte-d96o53"),Vt(()=>t[21].call(e))},m(h,a){U(h,e,a),k(e,n),k(n,i),o=c1(e,t[21].bind(e))},p(h,a){var s,c,f;a[0]&36&&r!==(r=`max-width: ${h[7]}px; max-height: ${h[9]}px; width: 100%; height: ${h[2]}px; background-image:url(${(c=(s=h[6].background)==null?void 0:s.image)==null?void 0:c.url}); background-color:${(f=h[5].currentOption)!=null&&f.colorCode?h[5].currentOption.colorCode:"#ffffff"}`)&&S(e,"style",r)},d(h){h&&j(e),o()}}}function Sm(t){let e,n,i,r;return n=new vE({props:{handleAddClipArt:t[10]}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ue(n,e,null),r=!0},p:ve,i(o){r||(I(n.$$.fragment,o),o&&Vt(()=>{r&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!0)),i.run(1))}),r=!0)},o(o){W(n.$$.fragment,o),o&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!1)),i.run(0)),r=!1},d(o){o&&j(e),fe(n),o&&i&&i.end()}}}function Tm(t){let e,n,i,r;return n=new OI({props:{handleAddUpload:t[11]}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-full max-w-2xl h-full z-50")},m(o,h){U(o,e,h),ue(n,e,null),r=!0},p:ve,i(o){r||(I(n.$$.fragment,o),o&&Vt(()=>{r&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!0)),i.run(1))}),r=!0)},o(o){W(n.$$.fragment,o),o&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!1)),i.run(0)),r=!1},d(o){o&&j(e),fe(n),o&&i&&i.end()}}}function km(t){let e,n,i,r;return n=new AI({props:{handleAddText:t[12]}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ue(n,e,null),r=!0},p:ve,i(o){r||(I(n.$$.fragment,o),o&&Vt(()=>{r&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!0)),i.run(1))}),r=!0)},o(o){W(n.$$.fragment,o),o&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!1)),i.run(0)),r=!1},d(o){o&&j(e),fe(n),o&&i&&i.end()}}}function Om(t){let e,n,i,r;return n=new II({props:{handleAddShape:t[13]}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){U(o,e,h),ue(n,e,null),r=!0},p:ve,i(o){r||(I(n.$$.fragment,o),o&&Vt(()=>{r&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!0)),i.run(1))}),r=!0)},o(o){W(n.$$.fragment,o),o&&(i||(i=Qt(e,pr,{delay:10,duration:200,axis:"x",opacity:.5,easing:hr},!1)),i.run(0)),r=!1},d(o){o&&j(e),fe(n),o&&i&&i.end()}}}function Em(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;i=new ke({props:{icon:"ph:angle",height:"18"}});let y=(t[3][0].colorType==="color"||t[3][0].objType==="text"||t[3][0].objType==="shape"||t[3][0].type==="path")&&xm(t),C=t[3][0].colorType==="colors"&&Dm(t),w=t[3][0].objType==="text"&&Am(t),T=(t[3][0].type==="path"||t[3][0].objType==="text"||t[3][0].objType==="shape")&&Pm(t),O=t[1]==="rotate"&&Mm(t),A=t[1]==="color"&&Rm(t),L=t[1]==="text"&&Im(t),G=t[1]==="align"&&Fm(t),Y=t[1]==="style"&&Lm(t),te=t[1]==="decoration"&&Nm(t),q=t[1]==="stroke"&&jm(t),N=t[1]==="colors"&&Bm(t);return{c(){e=E("div"),n=E("button"),he(i.$$.fragment),r=V(),y&&y.c(),o=V(),C&&C.c(),h=V(),w&&w.c(),a=V(),T&&T.c(),s=V(),O&&O.c(),c=V(),A&&A.c(),f=V(),L&&L.c(),l=V(),G&&G.c(),u=V(),Y&&Y.c(),d=V(),te&&te.c(),p=V(),q&&q.c(),m=V(),N&&N.c(),g=et(),S(n,"class","btn white-btn circle-btn"),S(e,"class","absolute flex justify-center gap-0.5 z-40 top-10")},m(B,Q){U(B,e,Q),k(e,n),ue(i,n,null),k(e,r),y&&y.m(e,null),k(e,o),C&&C.m(e,null),k(e,h),w&&w.m(e,null),k(e,a),T&&T.m(e,null),U(B,s,Q),O&&O.m(B,Q),U(B,c,Q),A&&A.m(B,Q),U(B,f,Q),L&&L.m(B,Q),U(B,l,Q),G&&G.m(B,Q),U(B,u,Q),Y&&Y.m(B,Q),U(B,d,Q),te&&te.m(B,Q),U(B,p,Q),q&&q.m(B,Q),U(B,m,Q),N&&N.m(B,Q),U(B,g,Q),v=!0,_||(b=ne(n,"click",t[22]),_=!0)},p(B,Q){B[3][0].colorType==="color"||B[3][0].objType==="text"||B[3][0].objType==="shape"||B[3][0].type==="path"?y?(y.p(B,Q),Q[0]&8&&I(y,1)):(y=xm(B),y.c(),I(y,1),y.m(e,o)):y&&(Oe(),W(y,1,1,()=>{y=null}),Ee()),B[3][0].colorType==="colors"?C?(C.p(B,Q),Q[0]&8&&I(C,1)):(C=Dm(B),C.c(),I(C,1),C.m(e,h)):C&&(Oe(),W(C,1,1,()=>{C=null}),Ee()),B[3][0].objType==="text"?w?(w.p(B,Q),Q[0]&8&&I(w,1)):(w=Am(B),w.c(),I(w,1),w.m(e,a)):w&&(Oe(),W(w,1,1,()=>{w=null}),Ee()),B[3][0].type==="path"||B[3][0].objType==="text"||B[3][0].objType==="shape"?T?(T.p(B,Q),Q[0]&8&&I(T,1)):(T=Pm(B),T.c(),I(T,1),T.m(e,null)):T&&(Oe(),W(T,1,1,()=>{T=null}),Ee()),B[1]==="rotate"?O?(O.p(B,Q),Q[0]&2&&I(O,1)):(O=Mm(B),O.c(),I(O,1),O.m(c.parentNode,c)):O&&(Oe(),W(O,1,1,()=>{O=null}),Ee()),B[1]==="color"?A?(A.p(B,Q),Q[0]&2&&I(A,1)):(A=Rm(B),A.c(),I(A,1),A.m(f.parentNode,f)):A&&(Oe(),W(A,1,1,()=>{A=null}),Ee()),B[1]==="text"?L?(L.p(B,Q),Q[0]&2&&I(L,1)):(L=Im(B),L.c(),I(L,1),L.m(l.parentNode,l)):L&&(Oe(),W(L,1,1,()=>{L=null}),Ee()),B[1]==="align"?G?(G.p(B,Q),Q[0]&2&&I(G,1)):(G=Fm(B),G.c(),I(G,1),G.m(u.parentNode,u)):G&&(Oe(),W(G,1,1,()=>{G=null}),Ee()),B[1]==="style"?Y?(Y.p(B,Q),Q[0]&2&&I(Y,1)):(Y=Lm(B),Y.c(),I(Y,1),Y.m(d.parentNode,d)):Y&&(Oe(),W(Y,1,1,()=>{Y=null}),Ee()),B[1]==="decoration"?te?(te.p(B,Q),Q[0]&2&&I(te,1)):(te=Nm(B),te.c(),I(te,1),te.m(p.parentNode,p)):te&&(Oe(),W(te,1,1,()=>{te=null}),Ee()),B[1]==="stroke"?q?(q.p(B,Q),Q[0]&2&&I(q,1)):(q=jm(B),q.c(),I(q,1),q.m(m.parentNode,m)):q&&(Oe(),W(q,1,1,()=>{q=null}),Ee()),B[1]==="colors"?N?(N.p(B,Q),Q[0]&2&&I(N,1)):(N=Bm(B),N.c(),I(N,1),N.m(g.parentNode,g)):N&&(Oe(),W(N,1,1,()=>{N=null}),Ee())},i(B){v||(I(i.$$.fragment,B),I(y),I(C),I(w),I(T),I(O),I(A),I(L),I(G),I(Y),I(te),I(q),I(N),v=!0)},o(B){W(i.$$.fragment,B),W(y),W(C),W(w),W(T),W(O),W(A),W(L),W(G),W(Y),W(te),W(q),W(N),v=!1},d(B){B&&(j(e),j(s),j(c),j(f),j(l),j(u),j(d),j(p),j(m),j(g)),fe(i),y&&y.d(),C&&C.d(),w&&w.d(),T&&T.d(),O&&O.d(B),A&&A.d(B),L&&L.d(B),G&&G.d(B),Y&&Y.d(B),te&&te.d(B),q&&q.d(B),N&&N.d(B),_=!1,b()}}}function xm(t){let e,n,i,r,o;return n=new ke({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ue(n,e,null),i=!0,r||(o=ne(e,"click",t[23]),r=!0)},p:ve,i(h){i||(I(n.$$.fragment,h),i=!0)},o(h){W(n.$$.fragment,h),i=!1},d(h){h&&j(e),fe(n),r=!1,o()}}}function Dm(t){let e,n,i,r,o;return n=new ke({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ue(n,e,null),i=!0,r||(o=ne(e,"click",t[24]),r=!0)},p:ve,i(h){i||(I(n.$$.fragment,h),i=!0)},o(h){W(n.$$.fragment,h),i=!1},d(h){h&&j(e),fe(n),r=!1,o()}}}function Am(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p;return n=new ke({props:{icon:"cil:text",height:"18"}}),o=new ke({props:{icon:"uim:align-left",height:"18"}}),s=new ke({props:{icon:"pajamas:italic",height:"18"}}),l=new ke({props:{icon:"fluent:text-underline-24-filled",height:"18"}}),{c(){e=E("button"),he(n.$$.fragment),i=V(),r=E("button"),he(o.$$.fragment),h=V(),a=E("button"),he(s.$$.fragment),c=V(),f=E("button"),he(l.$$.fragment),S(e,"class","btn white-btn circle-btn"),S(r,"class","btn white-btn circle-btn"),S(a,"class","btn white-btn circle-btn"),S(f,"class","btn white-btn circle-btn")},m(m,g){U(m,e,g),ue(n,e,null),U(m,i,g),U(m,r,g),ue(o,r,null),U(m,h,g),U(m,a,g),ue(s,a,null),U(m,c,g),U(m,f,g),ue(l,f,null),u=!0,d||(p=[ne(e,"click",t[25]),ne(r,"click",t[26]),ne(a,"click",t[27]),ne(f,"click",t[28])],d=!0)},p:ve,i(m){u||(I(n.$$.fragment,m),I(o.$$.fragment,m),I(s.$$.fragment,m),I(l.$$.fragment,m),u=!0)},o(m){W(n.$$.fragment,m),W(o.$$.fragment,m),W(s.$$.fragment,m),W(l.$$.fragment,m),u=!1},d(m){m&&(j(e),j(i),j(r),j(h),j(a),j(c),j(f)),fe(n),fe(o),fe(s),fe(l),d=!1,We(p)}}}function Pm(t){let e,n,i,r,o;return n=new ke({props:{icon:"maki:square-stroked",height:"18"}}),{c(){e=E("button"),he(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){U(h,e,a),ue(n,e,null),i=!0,r||(o=ne(e,"click",t[29]),r=!0)},p:ve,i(h){i||(I(n.$$.fragment,h),i=!0)},o(h){W(n.$$.fragment,h),i=!1},d(h){h&&j(e),fe(n),r=!1,o()}}}function Mm(t){let e,n,i;function r(h){t[30](h)}let o={sliderValue:t[3][0].angle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new iO({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeRotate",t[14]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.sliderValue=h[3][0].angle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Rm(t){let e,n,i;function r(h){t[31](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new KO({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeColor",t[32]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Im(t){let e,n,i;function r(h){t[33](h)}let o={text:t[3][0].text};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new QO({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeText",t[15]),e.$on("onChangeFontFamily",t[16]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.text=h[3][0].text),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Fm(t){let e,n,i;function r(h){t[34](h)}let o={align:t[3][0].textAlign};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new nE({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeAlign",t[17]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.align=h[3][0].textAlign),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Lm(t){let e,n,i;function r(h){t[35](h)}let o={style:t[3][0].fontStyle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new sE({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeStyle",t[18]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.style=h[3][0].fontStyle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Nm(t){let e,n,i;function r(h){t[36](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new lE({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeDecoration",t[19]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function jm(t){let e,n,i;function r(h){t[37](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new fE({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeStroke",t[20]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Bm(t){let e,n,i;function r(h){t[38](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new pE({props:o}),it.push(()=>Et(e,"selectProperty",r)),e.$on("onChangeColors",t[39]),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function NI(t){let e,n,i,r,o,h,a;function s(g,v){return g[6].background?LI:FI}let f=s(t)(t),l=t[4]==="clipart"&&Sm(t),u=t[4]==="upload"&&Tm(t),d=t[4]==="text"&&km(t),p=t[4]==="draw"&&Om(t),m=t[3]&&Em(t);return{c(){e=E("div"),f.c(),n=V(),l&&l.c(),i=V(),u&&u.c(),r=V(),d&&d.c(),o=V(),p&&p.c(),h=V(),m&&m.c(),S(e,"class","flex justify-center items-center h-full w-full relative flex-col")},m(g,v){U(g,e,v),f.m(e,null),k(e,n),l&&l.m(e,null),k(e,i),u&&u.m(e,null),k(e,r),d&&d.m(e,null),k(e,o),p&&p.m(e,null),k(e,h),m&&m.m(e,null),a=!0},p(g,v){f.p(g,v),g[4]==="clipart"?l?(l.p(g,v),v[0]&16&&I(l,1)):(l=Sm(g),l.c(),I(l,1),l.m(e,i)):l&&(Oe(),W(l,1,1,()=>{l=null}),Ee()),g[4]==="upload"?u?(u.p(g,v),v[0]&16&&I(u,1)):(u=Tm(g),u.c(),I(u,1),u.m(e,r)):u&&(Oe(),W(u,1,1,()=>{u=null}),Ee()),g[4]==="text"?d?(d.p(g,v),v[0]&16&&I(d,1)):(d=km(g),d.c(),I(d,1),d.m(e,o)):d&&(Oe(),W(d,1,1,()=>{d=null}),Ee()),g[4]==="draw"?p?(p.p(g,v),v[0]&16&&I(p,1)):(p=Om(g),p.c(),I(p,1),p.m(e,h)):p&&(Oe(),W(p,1,1,()=>{p=null}),Ee()),g[3]?m?(m.p(g,v),v[0]&8&&I(m,1)):(m=Em(g),m.c(),I(m,1),m.m(e,null)):m&&(Oe(),W(m,1,1,()=>{m=null}),Ee())},i(g){a||(I(l),I(u),I(d),I(p),I(m),a=!0)},o(g){W(l),W(u),W(d),W(p),W(m),a=!1},d(g){g&&j(e),f.d(),l&&l.d(),u&&u.d(),d&&d.d(),p&&p.d(),m&&m.d()}}}function jI(t,e,n){let i,r,o,h,a,s,c,f;Ne(t,Qi,z=>n(3,r=z)),Ne(t,Jt,z=>n(4,o=z)),Ne(t,iu,z=>n(40,h=z)),Ne(t,Uo,z=>n(41,a=z)),Ne(t,lo,z=>n(42,s=z)),Ne(t,Ko,z=>n(43,c=z)),Ne(t,je,z=>n(5,f=z));let l=f.prints[c],u,d=l.canvasWidth,p=l.height/l.width,m=d*p,g=l.canvasJSON,v=null;Yt();function _(z,X=null){ye(je,f.prints[c].isChange=!0,f),z&&ye(je,f.prints[c].canvasJSON=z,f),ye(je,f.prints[c].imageDataURL=B1(),f),X&&ye(je,f.prints[c].svg=X,f)}Yi(async()=>{var z,X;if(ye(Qi,r=null,r),M1("print",d,m,_),g&&I1(g),((z=l.colorGroup)==null?void 0:z.value)!=="palette"){const oe=await UT(s.id);oe.error?console.log("컬러 데이터 로드 실패"):((X=l.colorGroup)==null?void 0:X.value)==="shopColor"?ye(iu,h=oe.data,h):ye(iu,h=oe.data.filter(ae=>ae.colorGroup===l.colorGroup.value),h)}});function b(z){const X={url:z.file.url,convertUrl:z.file.convert.url,originUrl:z.file.origin.url};Nd(z.file.url,{convert:X,objType:"clipart"}),ye(Jt,o=null,o)}function y(z){const X={url:z.thumbnail.url,convertUrl:z.convert.url,originUrl:z.origin.url};console.log({convert:X}),Nd(z.thumbnail.url,{convert:X,origin:z.origin,thumbnail:z.thumbnail,objType:"upload"}),ye(Jt,o=null,o)}function C(z){console.log("$fonts[0]",a[0]);const X=h!=null&&h.length?h[0].hex:"#000000";L1(z,{objType:"text",fontFamily:a[0].fontFamily,localFamily:a[0].localFamily,fill:X}),ye(Jt,o=null,o)}function w(z){const X=h[0]?h[0].hex:"#000000";switch(z){case"rect":Q1(X);break;case"triangle":tC(X);break;case"circle":eC(X);break;case"draw":nC(!0);break}ye(Jt,o=null,o)}function T({detail:z}){U1(z.value)}function O({detail:z}){Y1(r[0],z.text)}function A({detail:z}){W1(r[0],z.fontFamily,z.localFamily)}function L({detail:z}){z1(r[0],z.align)}function G({detail:z}){H1(r[0],z.style)}function Y({detail:z}){V1(r[0],z.decoration)}function te({detail:z}){X1(r[0],z.stroke)}function q(){u=this.clientWidth,n(0,u)}const N=()=>n(1,v="rotate"),B=()=>n(1,v="color"),Q=()=>n(1,v="colors"),ee=()=>n(1,v="text"),x=()=>n(1,v="align"),P=()=>n(1,v="style"),R=()=>n(1,v="decoration"),F=()=>n(1,v="stroke");function K(z){v=z,n(1,v)}function M(z){v=z,n(1,v)}const D=()=>jd();function H(z){v=z,n(1,v)}function J(z){v=z,n(1,v)}function ie(z){v=z,n(1,v)}function Z(z){v=z,n(1,v)}function $(z){v=z,n(1,v)}function se(z){v=z,n(1,v)}const pe=()=>jd();return t.$$.update=()=>{var z;t.$$.dirty[0]&1&&n(2,i=u*((z=l.background)!=null&&z.ratio?l.background.ratio:1))},[u,v,i,r,o,f,l,d,p,m,b,y,C,w,T,O,A,L,G,Y,te,q,N,B,Q,ee,x,P,R,F,K,M,D,H,J,ie,Z,$,se,pe]}class BI extends Ge{constructor(e){super(),$e(this,e,jI,NI,Xe,{},null,[-1,-1])}}function Um(t,e,n){const i=t.slice();return i[6]=e[n],i[8]=n,i}function Ym(t){let e,n,i;return{c(){var r;e=E("img"),Ze(e.src,n=(r=t[6].background.image)==null?void 0:r.url)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class","max-h-full")},m(r,o){U(r,e,o)},p(r,o){var h;o&1&&!Ze(e.src,n=(h=r[6].background.image)==null?void 0:h.url)&&S(e,"src",n),o&1&&i!==(i=r[6].title)&&S(e,"alt",i)},d(r){r&&j(e)}}}function Wm(t){let e,n,i,r,o;return{c(){var h,a,s,c,f;e=E("img"),Ze(e.src,n=t[6].imageDataURL)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class",r=(a=(h=t[6].background)==null?void 0:h.image)!=null&&a.url?"absolute":""),S(e,"style",o=`left:${(s=t[6].background)!=null&&s.canvasLeft?t[6].background.canvasLeft:0}%; top:${(c=t[6].background)!=null&&c.canvasTop?t[6].background.canvasTop:0}%; width:${(f=t[6].background)!=null&&f.canvasPer?t[6].background.canvasPer:100}%; height:auto;`)},m(h,a){U(h,e,a)},p(h,a){var s,c,f,l,u;a&1&&!Ze(e.src,n=h[6].imageDataURL)&&S(e,"src",n),a&1&&i!==(i=h[6].title)&&S(e,"alt",i),a&1&&r!==(r=(c=(s=h[6].background)==null?void 0:s.image)!=null&&c.url?"absolute":"")&&S(e,"class",r),a&1&&o!==(o=`left:${(f=h[6].background)!=null&&f.canvasLeft?h[6].background.canvasLeft:0}%; top:${(l=h[6].background)!=null&&l.canvasTop?h[6].background.canvasTop:0}%; width:${(u=h[6].background)!=null&&u.canvasPer?h[6].background.canvasPer:100}%; height:auto;`)&&S(e,"style",o)},d(h){h&&j(e)}}}function zm(t){var p,m;let e,n,i,r,o,h=t[6].title+"",a,s,c,f,l=((m=(p=t[6].background)==null?void 0:p.image)==null?void 0:m.url)&&Ym(t),u=t[6].imageDataURL&&Wm(t);function d(){return t[3](t[8])}return{c(){var g;e=E("div"),n=E("button"),l&&l.c(),i=V(),u&&u.c(),r=V(),o=E("span"),a=Te(h),s=V(),S(n,"class","max-w-24 max-h-24 min-w-14 min-h-14 relative bg-no-repeat border rounded-lg overflow-hidden"),kt(n,"background-color",(g=t[0].currentOption)!=null&&g.colorCode?t[0].currentOption.colorCode:"#ffffff"),S(o,"class","w-full flex justify-center text-xs py-0.5"),S(e,"class","p-1 bg-white rounded-lg flex flex-col")},m(g,v){U(g,e,v),k(e,n),l&&l.m(n,null),k(n,i),u&&u.m(n,null),k(e,r),k(e,o),k(o,a),k(e,s),c||(f=ne(n,"click",d),c=!0)},p(g,v){var _,b,y;t=g,(b=(_=t[6].background)==null?void 0:_.image)!=null&&b.url?l?l.p(t,v):(l=Ym(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null),t[6].imageDataURL?u?u.p(t,v):(u=Wm(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),v&1&&kt(n,"background-color",(y=t[0].currentOption)!=null&&y.colorCode?t[0].currentOption.colorCode:"#ffffff"),v&1&&h!==(h=t[6].title+"")&&Ve(a,h)},d(g){g&&j(e),l&&l.d(),u&&u.d(),c=!1,f()}}}function UI(t){let e,n,i=Le(t[0].prints),r=[];for(let o=0;o<i.length;o+=1)r[o]=zm(Um(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","flex flex-row max-w-full space-x-4 overflow-x-auto overflow-y-hidden p-5"),S(e,"class","absolute bottom-2")},m(o,h){U(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,[h]){if(h&3){i=Le(o[0].prints);let a;for(a=0;a<i.length;a+=1){const s=Um(o,i,a);r[a]?r[a].p(s,h):(r[a]=zm(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:ve,o:ve,d(o){o&&j(e),Ft(r,o)}}}function YI(t,e,n){let i,r;Ne(t,Ko,s=>n(4,i=s)),Ne(t,je,s=>n(0,r=s));let{printKey:o}=e;Yt();function h(s){ye(Ko,i=s,i),n(2,o++,o)}const a=s=>h(s);return t.$$set=s=>{"printKey"in s&&n(2,o=s.printKey)},[r,h,o,a]}class WI extends Ge{constructor(e){super(),$e(this,e,YI,UI,Xe,{printKey:2})}}/*!
* Viewer.js v1.11.6
* https://fengyuanchen.github.io/viewerjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:16:38.052Z
*/function Hm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Kh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hm(Object(n),!0).forEach(function(i){VI(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function zI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vm(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B0(i.key),i)}}function HI(t,e,n){return e&&Vm(t.prototype,e),n&&Vm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VI(t,e,n){return e=B0(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B0(t){var e=XI(t,"string");return typeof e=="symbol"?e:String(e)}var Xm={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},$I='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',Tc=typeof window<"u"&&typeof window.document<"u",Bi=Tc?window:{},Ns=Tc&&Bi.document.documentElement?"ontouchstart"in Bi.document.documentElement:!1,Jh=Tc?"PointerEvent"in Bi:!1,He="viewer",ml="move",U0="switch",Ro="zoom",Za="".concat(He,"-active"),GI="".concat(He,"-close"),vl="".concat(He,"-fade"),Ff="".concat(He,"-fixed"),qI="".concat(He,"-fullscreen"),$m="".concat(He,"-fullscreen-exit"),Ar="".concat(He,"-hide"),KI="".concat(He,"-hide-md-down"),JI="".concat(He,"-hide-sm-down"),ZI="".concat(He,"-hide-xs-down"),Rn="".concat(He,"-in"),Xo="".concat(He,"-invisible"),js="".concat(He,"-loading"),QI="".concat(He,"-move"),Gm="".concat(He,"-open"),ds="".concat(He,"-show"),Pt="".concat(He,"-transition"),to="click",Lf="dblclick",qm="dragstart",Km="focusin",Jm="keydown",Nn="load",Yr="error",eF=Ns?"touchend touchcancel":"mouseup",tF=Ns?"touchmove":"mousemove",nF=Ns?"touchstart":"mousedown",Zm=Jh?"pointerdown":nF,Qm=Jh?"pointermove":tF,ev=Jh?"pointerup pointercancel":eF,tv="resize",Gn="transitionend",nv="wheel",iv="ready",rv="show",sv="shown",ov="hide",av="hidden",lv="view",ia="viewed",cv="move",uv="moved",fv="rotate",hv="rotated",dv="scale",pv="scaled",gv="zoom",mv="zoomed",vv="play",_v="stop",Vl="".concat(He,"Action"),Zh=/\s\s*/,Qa=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function ra(t){return typeof t=="string"}var iF=Number.isNaN||Bi.isNaN;function Tt(t){return typeof t=="number"&&!iF(t)}function Os(t){return typeof t>"u"}function no(t){return If(t)==="object"&&t!==null}var rF=Object.prototype.hasOwnProperty;function Es(t){if(!no(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&rF.call(n,"isPrototypeOf")}catch{return!1}}function ct(t){return typeof t=="function"}function pt(t,e){if(t&&ct(e))if(Array.isArray(t)||Tt(t.length)){var n=t.length,i;for(i=0;i<n&&e.call(t,t[i],i,t)!==!1;i+=1);}else no(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)});return t}var Dn=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return no(e)&&i.length>0&&i.forEach(function(o){no(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},sF=/^(?:width|height|left|top|marginLeft|marginTop)$/;function Kn(t,e){var n=t.style;pt(e,function(i,r){sF.test(r)&&Tt(i)&&(i+="px"),n[r]=i})}function oF(t){return ra(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function ws(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Ie(t,e){if(!(!t||!e)){if(Tt(t.length)){pt(t,function(i){Ie(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function at(t,e){if(!(!t||!e)){if(Tt(t.length)){pt(t,function(n){at(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function sa(t,e,n){if(e){if(Tt(t.length)){pt(t,function(i){sa(i,e,n)});return}n?Ie(t,e):at(t,e)}}var aF=/([a-z\d])([A-Z])/g;function Qh(t){return t.replace(aF,"$1-$2").toLowerCase()}function xs(t,e){return no(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Qh(e)))}function Nf(t,e,n){no(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Qh(e)),n)}var Y0=function(){var t=!1;if(Tc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});Bi.addEventListener("test",n,i),Bi.removeEventListener("test",n,i)}return t}();function ft(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Zh).forEach(function(o){if(!Y0){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Be(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Zh).forEach(function(o){if(i.once&&!Y0){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Rt(t,e,n,i){var r;return ct(Event)&&ct(CustomEvent)?r=new CustomEvent(e,Kh({bubbles:!0,cancelable:!0,detail:n},i)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function lF(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function _l(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Tt(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Tt(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Tt(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Tt(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Tt(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function cF(t){return ra(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var ju=Bi.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Bi.navigator.userAgent);function W0(t,e,n){var i=document.createElement("img");if(t.naturalWidth&&!ju)return n(t.naturalWidth,t.naturalHeight),i;var r=document.body||document.documentElement;return i.onload=function(){n(i.width,i.height),ju||r.removeChild(i)},pt(e.inheritedAttributes,function(o){var h=t.getAttribute(o);h!==null&&i.setAttribute(o,h)}),i.src=t.src,ju||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i)),i}function el(t){switch(t){case 2:return ZI;case 3:return JI;case 4:return KI;default:return""}}function uF(t){var e=Kh({},t),n=[];return pt(t,function(i,r){delete e[r],pt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;n.push(u)})}),n.sort(function(i,r){return Math.abs(i)<Math.abs(r)}),n[0]}function tl(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:Kh({timeStamp:Date.now(),startX:n,startY:i},r)}function fF(t){var e=0,n=0,i=0;return pt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}var hF={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,i;e.inline&&(i={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=i),(this.fulled||!i)&&(i=this.containerData),this.viewerData=Dn({},i)},renderViewer:function(){this.options.inline&&!this.fulled&&Kn(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,i=this.options,r=this.list,o=[];r.innerHTML="",pt(this.images,function(h,a){var s=h.src,c=h.alt||cF(s),f=e.getImageURL(h);if(s||f){var l=document.createElement("li"),u=document.createElement("img");pt(i.inheritedAttributes,function(d){var p=h.getAttribute(d);p!==null&&u.setAttribute(d,p)}),i.navbar&&(u.src=s||f),u.alt=c,u.setAttribute("data-original-url",f||s),l.setAttribute("data-index",a),l.setAttribute("data-viewer-action","view"),l.setAttribute("role","button"),i.keyboard&&l.setAttribute("tabindex",0),l.appendChild(u),r.appendChild(l),o.push(l)}}),this.items=o,pt(o,function(h){var a=h.firstElementChild,s,c;Nf(a,"filled",!0),i.loading&&Ie(h,js),Be(a,Nn,s=function(l){ft(a,Yr,c),i.loading&&at(h,js),e.loadImage(l)},{once:!0}),Be(a,Yr,c=function(){ft(a,Nn,s),i.loading&&at(h,js)},{once:!0})}),i.transition&&Be(n,ia,function(){Ie(r,Pt)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var i=n.nextElementSibling,r=parseInt(window.getComputedStyle(i||n).marginLeft,10),o=n.offsetWidth,h=o+r;Kn(this.list,Dn({width:h*this.length-r},_l({translateX:(this.viewerData.width-o)/2-h*e})))}},resetList:function(){var e=this.list;e.innerHTML="",at(e,Pt),Kn(e,_l({translateX:0}))},initImage:function(e){var n=this,i=this.options,r=this.image,o=this.viewerData,h=this.footer.offsetHeight,a=o.width,s=Math.max(o.height-h,h),c=this.imageData||{},f;this.imageInitializing={abort:function(){f.onload=null}},f=W0(r,i,function(l,u){var d=l/u,p=Math.max(0,Math.min(1,i.initialCoverage)),m=a,g=s;n.imageInitializing=!1,s*d>a?g=a/d:m=s*d,p=Tt(p)?p:.9,m=Math.min(m*p,l),g=Math.min(g*p,u);var v=(a-m)/2,_=(s-g)/2,b={left:v,top:_,x:v,y:_,width:m,height:g,oldRatio:1,ratio:m/l,aspectRatio:d,naturalWidth:l,naturalHeight:u},y=Dn({},b);i.rotatable&&(b.rotate=c.rotate||0,y.rotate=0),i.scalable&&(b.scaleX=c.scaleX||1,b.scaleY=c.scaleY||1,y.scaleX=1,y.scaleY=1),n.imageData=b,n.initialImageData=y,e&&e()})},renderImage:function(e){var n=this,i=this.image,r=this.imageData;if(Kn(i,Dn({width:r.width,height:r.height,marginLeft:r.x,marginTop:r.y},_l(r))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&ws(i,Pt)){var o=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){ft(i,Gn,o)}},Be(i,Gn,o,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},dF={bind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;Be(n,to,this.onClick=this.click.bind(this)),Be(n,qm,this.onDragStart=this.dragstart.bind(this)),Be(i,Zm,this.onPointerDown=this.pointerdown.bind(this)),Be(r,Qm,this.onPointerMove=this.pointermove.bind(this)),Be(r,ev,this.onPointerUp=this.pointerup.bind(this)),Be(r,Jm,this.onKeyDown=this.keydown.bind(this)),Be(window,tv,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&Be(n,nv,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&Be(i,Lf,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;ft(n,to,this.onClick),ft(n,qm,this.onDragStart),ft(i,Zm,this.onPointerDown),ft(r,Qm,this.onPointerMove),ft(r,ev,this.onPointerUp),ft(r,Jm,this.onKeyDown),ft(window,tv,this.onResize),e.zoomable&&e.zoomOnWheel&&ft(n,nv,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&ft(i,Lf,this.onDblclick)}},pF={click:function(e){var n=this.options,i=this.imageData,r=e.target,o=xs(r,Vl);switch(!o&&r.localName==="img"&&r.parentElement.localName==="li"&&(r=r.parentElement,o=xs(r,Vl)),Ns&&e.isTrusted&&r===this.canvas&&clearTimeout(this.clickCanvasTimeout),o){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(xs(r,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-i.scaleX||-1);break;case"flip-vertical":this.scaleY(-i.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Ns&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,i=this.options,r=this.image,o=this.index,h=this.viewerData;at(r,Xo),i.loading&&at(this.canvas,js),r.style.cssText="height:0;"+"margin-left:".concat(h.width/2,"px;")+"margin-top:".concat(h.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){sa(r,QI,i.movable),sa(r,Pt,i.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,ct(i.viewed)&&Be(n,ia,i.viewed,{once:!0}),Rt(n,ia,{originalImage:e.images[o],index:o,image:r},{cancelable:!1})})})},loadImage:function(e){var n=e.target,i=n.parentNode,r=i.offsetWidth||30,o=i.offsetHeight||50,h=!!xs(n,"filled");W0(n,this.options,function(a,s){var c=a/s,f=r,l=o;o*c>r?h?f=o*c:l=r/c:h?l=r/c:f=o*c,Kn(n,Dn({width:f,height:l},_l({translateX:(r-f)/2,translateY:(o-l)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var i=e.keyCode||e.which||e.charCode;switch(i){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(i){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,i=this.pointers,r=e.buttons,o=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Tt(r)&&r!==1||Tt(o)&&o!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?pt(e.changedTouches,function(a){i[a.identifier]=tl(a)}):i[e.pointerId||0]=tl(e);var h=n.movable?ml:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(i).length>1?h=Ro:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(h=U0),n.transition&&(h===ml||h===Ro)&&at(this.image,Pt),this.action=h}},pointermove:function(e){var n=this.pointers,i=this.action;!this.viewed||!i||(e.preventDefault(),e.changedTouches?pt(e.changedTouches,function(r){Dn(n[r.identifier]||{},tl(r,!0))}):Dn(n[e.pointerId||0]||{},tl(e,!0)),this.change(e))},pointerup:function(e){var n=this,i=this.options,r=this.action,o=this.pointers,h;e.changedTouches?pt(e.changedTouches,function(a){h=o[a.identifier],delete o[a.identifier]}):(h=o[e.pointerId||0],delete o[e.pointerId||0]),r&&(e.preventDefault(),i.transition&&(r===ml||r===Ro)&&Ie(this.image,Pt),this.action=!1,Ns&&r!==Ro&&h&&Date.now()-h.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),i.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){Rt(n.image,Lf,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,i.backdrop&&i.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){Rt(n.canvas,to,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}pt(this.player.getElementsByTagName("img"),function(n){Be(n,Nn,e.loadImage.bind(e),{once:!0}),Rt(n,Nn)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,r=1;e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,!0,null,e)}}},gF={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(ct(i.show)&&Be(n,rv,i.show,{once:!0}),Rt(n,rv)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var r=this.viewer;if(at(r,Ar),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("aria-hidden"),i.transition&&!e){var o=this.shown.bind(this);this.transitioning={abort:function(){ft(r,Gn,o),at(r,Rn)}},Ie(r,Pt),r.initialOffsetWidth=r.offsetWidth,Be(r,Gn,o,{once:!0}),Ie(r,Rn)}else Ie(r,Rn),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,r=this.options;if(r.inline||this.hiding||!(this.isShown||this.showing))return this;if(ct(r.hide)&&Be(i,ov,r.hide,{once:!0}),Rt(i,ov)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var o=this.viewer,h=this.image,a=function(){at(o,Rn),e.hidden()};if(r.transition&&!n){var s=function f(l){l&&l.target===o&&(ft(o,Gn,f),e.hidden())},c=function(){ws(o,Pt)?(Be(o,Gn,s),at(o,Rn)):a()};this.transitioning={abort:function(){e.viewed&&ws(h,Pt)?ft(h,Gn,c):ws(o,Pt)&&ft(o,Gn,s)}},this.viewed&&ws(h,Pt)?(Be(h,Gn,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else a();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var i=this.element,r=this.options,o=this.title,h=this.canvas,a=this.items[n],s=a.querySelector("img"),c=xs(s,"originalUrl"),f=s.getAttribute("alt"),l=document.createElement("img");if(pt(r.inheritedAttributes,function(g){var v=s.getAttribute(g);v!==null&&l.setAttribute(g,v)}),l.src=c,l.alt=f,ct(r.view)&&Be(i,lv,r.view,{once:!0}),Rt(i,lv,{originalImage:this.images[n],index:n,image:l})===!1||!this.isShown||this.hiding||this.played)return this;var u=this.items[this.index];u&&(at(u,Za),u.removeAttribute("aria-selected")),Ie(a,Za),a.setAttribute("aria-selected",!0),r.focus&&a.focus(),this.image=l,this.viewed=!1,this.index=n,this.imageData={},Ie(l,Xo),r.loading&&Ie(h,js),h.innerHTML="",h.appendChild(l),this.renderList(),o.innerHTML="";var d=function(){var v=e.imageData,_=Array.isArray(r.title)?r.title[1]:r.title;o.innerHTML=oF(ct(_)?_.call(e,l,v):"".concat(f," (").concat(v.naturalWidth," × ").concat(v.naturalHeight,")"))},p,m;return Be(i,ia,d,{once:!0}),this.viewing={abort:function(){ft(i,ia,d),l.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(l.src="",ft(l,Nn,p),e.timeout&&clearTimeout(e.timeout))}},l.complete?this.load():(Be(l,Nn,p=function(){ft(l,Yr,m),e.load()},{once:!0}),Be(l,Yr,m=function(){ft(l,Nn,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),at(l,Xo),r.loading&&at(e.canvas,js)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){at(l,Xo),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,i=this.index+1;return i>n&&(i=e?0:n),this.view(i),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData;return this.moveTo(Os(e)?e:i.x+Number(e),Os(n)?n:i.y+Number(n)),this},moveTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.element,h=this.options,a=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&h.movable){var s=a.x,c=a.y,f=!1;if(Tt(e)?f=!0:e=s,Tt(i)?f=!0:i=c,f){if(ct(h.move)&&Be(o,cv,h.move,{once:!0}),Rt(o,cv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r})===!1)return this;a.x=e,a.y=i,a.left=e,a.top=i,this.moving=!0,this.renderImage(function(){n.moving=!1,ct(h.moved)&&Be(o,uv,h.moved,{once:!0}),Rt(o,uv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,i=this.element,r=this.options,o=this.imageData;if(e=Number(e),Tt(e)&&this.viewed&&!this.played&&r.rotatable){var h=o.rotate;if(ct(r.rotate)&&Be(i,fv,r.rotate,{once:!0}),Rt(i,fv,{degree:e,oldDegree:h})===!1)return this;o.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,ct(r.rotated)&&Be(i,hv,r.rotated,{once:!0}),Rt(i,hv,{degree:e,oldDegree:h},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.element,o=this.options,h=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&o.scalable){var a=h.scaleX,s=h.scaleY,c=!1;if(Tt(e)?c=!0:e=a,Tt(i)?c=!0:i=s,c){if(ct(o.scale)&&Be(r,dv,o.scale,{once:!0}),Rt(r,dv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s})===!1)return this;h.scaleX=e,h.scaleY=i,this.scaling=!0,this.renderImage(function(){n.scaling=!1,ct(o.scaled)&&Be(r,pv,o.scaled,{once:!0}),Rt(r,pv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(o.width*e/o.naturalWidth,n,i,r),this},zoomTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,s=this.options,c=this.pointers,f=this.imageData,l=f.x,u=f.y,d=f.width,p=f.height,m=f.naturalWidth,g=f.naturalHeight;if(e=Math.max(0,e),Tt(e)&&this.viewed&&!this.played&&(h||s.zoomable)){if(!h){var v=Math.max(.01,s.minZoomRatio),_=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),_)}if(o)switch(o.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var b=m*e,y=g*e,C=b-d,w=y-p,T=f.ratio;if(ct(s.zoom)&&Be(a,gv,s.zoom,{once:!0}),Rt(a,gv,{ratio:e,oldRatio:T,originalEvent:o})===!1)return this;if(this.zooming=!0,o){var O=lF(this.viewer),A=c&&Object.keys(c).length>0?fF(c):{pageX:o.pageX,pageY:o.pageY};f.x-=C*((A.pageX-O.left-l)/d),f.y-=w*((A.pageY-O.top-u)/p)}else Es(r)&&Tt(r.x)&&Tt(r.y)?(f.x-=C*((r.x-l)/d),f.y-=w*((r.y-u)/p)):(f.x-=C/2,f.y-=w/2);f.left=f.x,f.top=f.y,f.width=b,f.height=y,f.oldRatio=T,f.ratio=e,this.renderImage(function(){n.zooming=!1,ct(s.zoomed)&&Be(a,mv,s.zoomed,{once:!0}),Rt(a,mv,{ratio:e,oldRatio:T,originalEvent:o},{cancelable:!1})}),i&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var i=this.element,r=this.options;if(ct(r.play)&&Be(i,vv,r.play,{once:!0}),Rt(i,vv)===!1)return this;var o=this.player,h=this.loadImage.bind(this),a=[],s=0,c=0;if(this.played=!0,this.onLoadWhenPlay=h,n&&this.requestFullscreen(n),Ie(o,ds),pt(this.items,function(u,d){var p=u.querySelector("img"),m=document.createElement("img");m.src=xs(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,s+=1,Ie(m,vl),sa(m,Pt,r.transition),ws(u,Za)&&(Ie(m,Rn),c=d),a.push(m),Be(m,Nn,h,{once:!0}),o.appendChild(m)}),Tt(r.interval)&&r.interval>0){var f=function u(){clearTimeout(e.playing.timeout),at(a[c],Rn),c-=1,c=c>=0?c:s-1,Ie(a[c],Rn),e.playing.timeout=setTimeout(u,r.interval)},l=function u(){clearTimeout(e.playing.timeout),at(a[c],Rn),c+=1,c=c<s?c:0,Ie(a[c],Rn),e.playing.timeout=setTimeout(u,r.interval)};s>1&&(this.playing={prev:f,next:l,timeout:setTimeout(l,r.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,i=this.options;if(ct(i.stop)&&Be(n,_v,i.stop,{once:!0}),Rt(n,_v)===!1)return this;var r=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,pt(r.getElementsByTagName("img"),function(o){ft(o,Nn,e.onLoadWhenPlay)}),at(r,ds),r.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),Ie(this.button,$m),n.transition&&(at(o,Pt),this.viewed&&at(r,Pt)),Ie(i,Ff),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("style"),Kn(i,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Dn({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){Ie(r,Pt),Ie(o,Pt)},0)})}),this)},exit:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),at(this.button,$m),n.transition&&(at(o,Pt),this.viewed&&at(r,Pt)),n.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),at(i,Ff),Kn(i,{zIndex:n.zIndexInline}),this.viewerData=Dn({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){Ie(r,Pt),Ie(o,Pt)},0)})}),this)},tooltip:function(){var e=this,n=this.options,i=this.tooltipBox,r=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(i.textContent="".concat(Math.round(r.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&Rt(i,Gn),Ie(i,ds),Ie(i,vl),Ie(i,Pt),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,Ie(i,Rn)):(Ie(i,ds),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(Be(i,Gn,function(){at(i,ds),at(i,vl),at(i,Pt),i.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),at(i,Rn),e.fading=!0):(at(i,ds),i.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Dn({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,i=this.options,r=this.isImg;if(r&&!n.parentNode)return this.destroy();var o=[];if(pt(r?[n]:n.querySelectorAll("img"),function(c){ct(i.filter)?i.filter.call(e,c)&&o.push(c):e.getImageURL(c)&&o.push(c)}),!o.length)return this;if(this.images=o,this.length=o.length,this.ready){var h=[];if(pt(this.items,function(c,f){var l=c.querySelector("img"),u=o[f];u&&l?(u.src!==l.src||u.alt!==l.alt)&&h.push(f):h.push(f)}),Kn(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=h.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var s=this.items[this.index];Ie(s,Za),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[He]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||ft(e,to,this.onStart),e[He]=void 0,this):this}},mF={getImageURL:function(e){var n=this.options.url;return ra(n)?n=e.getAttribute(n):ct(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),Be(document,Km,this.onFocusin=function(n){var i=e.viewer,r=n.target;if(!(r===document||r===i||i.contains(r))){for(;r;){if(r.getAttribute("tabindex")!==null||r.getAttribute("aria-modal")==="true")return;r=r.parentElement}i.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(ft(document,Km,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;Ie(e,Gm),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;at(e,Gm),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,i=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(i.focus(),this.enforceFocus()),ct(n.shown)&&Be(e,sv,n.shown,{once:!0}),Rt(e,sv)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,i=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),Ie(i,Ar),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),i.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(ct(n.hidden)&&Be(e,av,n.hidden,{once:!0}),Rt(e,av,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var i=n.documentElement;i.requestFullscreen?Es(e)?i.requestFullscreen(e):i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,i=this.pointers,r=i[Object.keys(i)[0]];if(r){var o=r.endX-r.startX,h=r.endY-r.startY;switch(this.action){case ml:(o!==0||h!==0)&&(this.pointerMoved=!0,this.move(o,h,e));break;case Ro:this.zoom(uF(i),!1,null,e);break;case U0:{this.action="switched";var a=Math.abs(o);a>1&&a>Math.abs(h)&&(this.pointers={},o>1?this.prev(n.loop):o<-1&&this.next(n.loop));break}}pt(i,function(s){s.startX=s.endX,s.startY=s.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},vF=Bi.Viewer,_F=function(t){return function(){return t+=1,t}}(-1),z0=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zI(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Dn({},Xm,Es(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=_F(),this.init()}return HI(t,[{key:"init",value:function(){var n=this,i=this.element,r=this.options;if(!i[He]){i[He]=this,r.focus&&!r.keyboard&&(r.focus=!1);var o=i.localName==="img",h=[];if(pt(o?[i]:i.querySelectorAll("img"),function(c){ct(r.filter)?r.filter.call(n,c)&&h.push(c):n.getImageURL(c)&&h.push(c)}),this.isImg=o,this.length=h.length,this.images=h,this.initBody(),Os(document.createElement(He).style.transition)&&(r.transition=!1),r.inline){var a=0,s=function(){if(a+=1,a===n.length){var f;n.initializing=!1,n.delaying={abort:function(){clearTimeout(f)}},f=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){pt(h,function(f){f.complete||(ft(f,Nn,s),ft(f,Yr,s))})}},pt(h,function(c){if(c.complete)s();else{var f,l;Be(c,Nn,f=function(){ft(c,Yr,l),s()},{once:!0}),Be(c,Yr,l=function(){ft(c,Nn,f),s()},{once:!0})}})}else Be(i,to,this.onStart=function(c){var f=c.target;f.localName==="img"&&(!ct(r.filter)||r.filter.call(n,f))&&n.view(n.images.indexOf(f))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,i=this.options,r=n.parentNode,o=document.createElement("div");o.innerHTML=$I;var h=o.querySelector(".".concat(He,"-container")),a=h.querySelector(".".concat(He,"-title")),s=h.querySelector(".".concat(He,"-toolbar")),c=h.querySelector(".".concat(He,"-navbar")),f=h.querySelector(".".concat(He,"-button")),l=h.querySelector(".".concat(He,"-canvas"));if(this.parent=r,this.viewer=h,this.title=a,this.toolbar=s,this.navbar=c,this.button=f,this.canvas=l,this.footer=h.querySelector(".".concat(He,"-footer")),this.tooltipBox=h.querySelector(".".concat(He,"-tooltip")),this.player=h.querySelector(".".concat(He,"-player")),this.list=h.querySelector(".".concat(He,"-list")),h.id="".concat(He).concat(this.id),a.id="".concat(He,"Title").concat(this.id),Ie(a,i.title?el(Array.isArray(i.title)?i.title[0]:i.title):Ar),Ie(c,i.navbar?el(i.navbar):Ar),sa(f,Ar,!i.button),i.keyboard&&f.setAttribute("tabindex",0),i.backdrop&&(Ie(h,"".concat(He,"-backdrop")),!i.inline&&i.backdrop!=="static"&&Nf(l,Vl,"hide")),ra(i.className)&&i.className&&i.className.split(Zh).forEach(function(b){Ie(h,b)}),i.toolbar){var u=document.createElement("ul"),d=Es(i.toolbar),p=Qa.slice(0,3),m=Qa.slice(7,9),g=Qa.slice(9);d||Ie(s,el(i.toolbar)),pt(d?i.toolbar:Qa,function(b,y){var C=d&&Es(b),w=d?Qh(y):b,T=C&&!Os(b.show)?b.show:b;if(!(!T||!i.zoomable&&p.indexOf(w)!==-1||!i.rotatable&&m.indexOf(w)!==-1||!i.scalable&&g.indexOf(w)!==-1)){var O=C&&!Os(b.size)?b.size:b,A=C&&!Os(b.click)?b.click:b,L=document.createElement("li");i.keyboard&&L.setAttribute("tabindex",0),L.setAttribute("role","button"),Ie(L,"".concat(He,"-").concat(w)),ct(A)||Nf(L,Vl,w),Tt(T)&&Ie(L,el(T)),["small","large"].indexOf(O)!==-1?Ie(L,"".concat(He,"-").concat(O)):w==="play"&&Ie(L,"".concat(He,"-large")),ct(A)&&Be(L,to,A),u.appendChild(L)}}),s.appendChild(u)}else Ie(s,Ar);if(!i.rotatable){var v=s.querySelectorAll('li[class*="rotate"]');Ie(v,Xo),pt(v,function(b){s.appendChild(b)})}if(i.inline)Ie(f,qI),Kn(h,{zIndex:i.zIndexInline}),window.getComputedStyle(r).position==="static"&&Kn(r,{position:"relative"}),r.insertBefore(h,n.nextSibling);else{Ie(f,GI),Ie(h,Ff),Ie(h,vl),Ie(h,Ar),Kn(h,{zIndex:i.zIndex});var _=i.container;ra(_)&&(_=n.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(h)}if(i.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,ct(i.ready)&&Be(n,iv,i.ready,{once:!0}),Rt(n,iv)===!1){this.ready=!1;return}this.ready&&i.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=vF,t}},{key:"setDefaults",value:function(n){Dn(Xm,Es(n)&&n)}}]),t}();Dn(z0.prototype,hF,dF,pF,gF,mF);function yv(t,e,n){const i=t.slice();return i[8]=e[n],i}function bv(t){var T;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C;a=new ke({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let w=((T=t[2].thumbnails)==null?void 0:T.length)&&wv(t);return{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="미리보기",o=V(),h=E("button"),he(a.$$.fragment),s=V(),c=E("div"),f=E("div"),l=E("div"),u=E("img"),p=V(),w&&w.c(),m=V(),g=E("div"),v=E("button"),v.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),Ze(u.src,d=t[1])||S(u,"src",d),S(u,"alt",""),S(u,"class","object-contain max-h-full max-w-full"),S(l,"class","h-[50vh] flex justify-center items-center"),S(f,"class","flex-grow overflow-y-auto"),S(c,"class","flex flex-col flex-grow overflow-hidden"),S(v,"class","btn secondary-btn"),S(g,"class","mt-3 flex justify-center"),S(n,"class","flex flex-col h-full max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(O,A){U(O,e,A),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u),k(f,p),w&&w.m(f,null),k(n,m),k(n,g),k(g,v),b=!0,y||(C=[ne(h,"click",Wn),ne(v,"click",Wn),ne(e,"introstart",t[3]),ne(e,"outroend",t[4])],y=!0)},p(O,A){var L;(!b||A&2&&!Ze(u.src,d=O[1]))&&S(u,"src",d),(L=O[2].thumbnails)!=null&&L.length?w?w.p(O,A):(w=wv(O),w.c(),w.m(f,null)):w&&(w.d(1),w=null)},i(O){b||(I(a.$$.fragment,O),O&&Vt(()=>{b&&(_||(_=Qt(e,dr,{y:50},!0)),_.run(1))}),b=!0)},o(O){W(a.$$.fragment,O),O&&(_||(_=Qt(e,dr,{y:50},!1)),_.run(0)),b=!1},d(O){O&&j(e),fe(a),w&&w.d(),O&&_&&_.end(),y=!1,We(C)}}}function wv(t){let e,n,i=Le(t[2].thumbnails),r=[];for(let o=0;o<i.length;o+=1)r[o]=Cv(yv(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 w-full"),S(e,"class","mt-3")},m(o,h){U(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,h){if(h&6){i=Le(o[2].thumbnails);let a;for(a=0;a<i.length;a+=1){const s=yv(o,i,a);r[a]?r[a].p(s,h):(r[a]=Cv(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(o){o&&j(e),Ft(r,o)}}}function Cv(t){let e,n,i,r,o,h;function a(){return t[5](t[8])}return{c(){e=E("button"),n=E("img"),r=V(),Ze(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt","미리보기"),S(n,"class","rounded-lg object-contain h-full"),S(e,"type","button")},m(s,c){U(s,e,c),k(e,n),k(e,r),o||(h=ne(e,"click",a),o=!0)},p(s,c){t=s,c&4&&!Ze(n.src,i=t[8].url)&&S(n,"src",i)},d(s){s&&j(e),o=!1,h()}}}function yF(t){let e,n,i=t[0]&&bv(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&I(i,1)):(i=bv(r),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(r){n||(I(i),n=!0)},o(r){W(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function bF(t,e,n){let i;Ne(t,je,c=>n(2,i=c));let{isOpen:r}=e,o=i.thumbnails[0].url;Yt(),Yi(async()=>{});function h(c){fr.call(this,t,c)}function a(c){fr.call(this,t,c)}const s=c=>n(1,o=c.url);return t.$$set=c=>{"isOpen"in c&&n(0,r=c.isOpen)},[r,o,i,h,a,s]}class wF extends Ge{constructor(e){super(),$e(this,e,bF,yF,Xe,{isOpen:0})}}function Sv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Tv(t,e,n){const i=t.slice();return i[20]=e[n],i}function kv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Ov(t){let e,n=t[3].product.optionNames[0]+"",i;return{c(){e=E("label"),i=Te(n),S(e,"for","color"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[0]+"")&&Ve(i,n)},d(r){r&&j(e)}}}function Ev(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=Te(n),e.__value=r=t[20],Fe(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&Ve(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Fe(e,e.__value))},d(o){o&&j(e)}}}function xv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[1]&&Dv(t),s=Le(t[2].optionValue2),c=[];for(let f=0;f<s.length;f+=1)c[f]=Av(Tv(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Fe(r,r.__value),S(i,"id","size"),S(i,"class","select w-full"),t[1].optionValue2===void 0&&Vt(()=>t[11].call(i))},m(f,l){U(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);mi(i,t[1].optionValue2,!0),o||(h=[ne(i,"change",t[11]),ne(i,"change",t[12])],o=!0)},p(f,l){if(f[3].product.optionNames[1]?a?a.p(f,l):(a=Dv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Le(f[2].optionValue2);let u;for(u=0;u<s.length;u+=1){const d=Tv(f,s,u);c[u]?c[u].p(d,l):(c[u]=Av(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&mi(i,f[1].optionValue2)},d(f){f&&j(e),a&&a.d(),Ft(c,f),o=!1,We(h)}}}function Dv(t){let e,n=t[3].product.optionNames[1]+"",i;return{c(){e=E("label"),i=Te(n),S(e,"for","size"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[1]+"")&&Ve(i,n)},d(r){r&&j(e)}}}function Av(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=Te(n),e.__value=r=t[20],Fe(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&Ve(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Fe(e,e.__value))},d(o){o&&j(e)}}}function Pv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[2]&&Mv(t),s=Le(t[2].optionValue3),c=[];for(let f=0;f<s.length;f+=1)c[f]=Rv(Sv(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Fe(r,r.__value),S(i,"id","option3"),S(i,"class","select w-full"),t[1].optionValue3===void 0&&Vt(()=>t[13].call(i))},m(f,l){U(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);mi(i,t[1].optionValue3,!0),o||(h=[ne(i,"change",t[13]),ne(i,"change",t[14])],o=!0)},p(f,l){if(f[3].product.optionNames[2]?a?a.p(f,l):(a=Mv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Le(f[2].optionValue3);let u;for(u=0;u<s.length;u+=1){const d=Sv(f,s,u);c[u]?c[u].p(d,l):(c[u]=Rv(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&mi(i,f[1].optionValue3)},d(f){f&&j(e),a&&a.d(),Ft(c,f),o=!1,We(h)}}}function Mv(t){let e,n=t[3].product.optionNames[2]+"",i;return{c(){e=E("label"),i=Te(n),S(e,"for","option3"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[2]+"")&&Ve(i,n)},d(r){r&&j(e)}}}function Rv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=Te(n),e.__value=r=t[20],Fe(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&Ve(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Fe(e,e.__value))},d(o){o&&j(e)}}}function Iv(t){let e,n,i,r;return{c(){e=E("div"),n=E("button"),n.textContent="취소",S(n,"type","button"),S(n,"class","btn dark-btn w-full")},m(o,h){U(o,e,h),k(e,n),i||(r=ne(n,"click",t[16]),i=!0)},p:ve,d(o){o&&j(e),i=!1,r()}}}function CF(t){var C;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m=t[3].product.optionNames[0]&&Ov(t),g=Le(t[2].optionValue1),v=[];for(let w=0;w<g.length;w+=1)v[w]=Ev(kv(t,g,w));let _=t[1].optionValue1&&xv(t),b=t[1].optionValue2&&t[2].optionValue3.length>0&&Pv(t),y=!((C=t[4])!=null&&C.length)&&Iv(t);return{c(){e=E("div"),n=E("div"),i=E("div"),m&&m.c(),r=V(),o=E("select"),h=E("option"),h.textContent="선택하세요";for(let w=0;w<v.length;w+=1)v[w].c();a=V(),_&&_.c(),s=V(),b&&b.c(),c=V(),f=E("div"),l=E("button"),l.textContent="선택완료",u=V(),y&&y.c(),h.__value="",Fe(h,h.__value),S(o,"id","color"),S(o,"class","select w-full"),t[1].optionValue1===void 0&&Vt(()=>t[9].call(o)),S(l,"type","button"),S(l,"class","btn primary-btn w-full"),S(n,"class","flex flex-col absolute top-1/2 left-1/2 transform -translate-xy-50 bg-white border w-full max-h-[400px] max-w-[400px] drop-shadow-lg h-full rounded-lg p-5 gap-3"),S(e,"class","flex absolute h-full w-full max-h-[100%] max-w-[100%] grow flex-col bg-white rounded bg-opacity-95 z-50 border")},m(w,T){U(w,e,T),k(e,n),k(n,i),m&&m.m(i,null),k(i,r),k(i,o),k(o,h);for(let O=0;O<v.length;O+=1)v[O]&&v[O].m(o,null);mi(o,t[1].optionValue1,!0),k(n,a),_&&_.m(n,null),k(n,s),b&&b.m(n,null),k(n,c),k(n,f),k(f,l),k(n,u),y&&y.m(n,null),d||(p=[ne(o,"change",t[9]),ne(o,"change",t[10]),ne(l,"click",t[15])],d=!0)},p(w,[T]){var O;if(w[3].product.optionNames[0]?m?m.p(w,T):(m=Ov(w),m.c(),m.m(i,r)):m&&(m.d(1),m=null),T&4){g=Le(w[2].optionValue1);let A;for(A=0;A<g.length;A+=1){const L=kv(w,g,A);v[A]?v[A].p(L,T):(v[A]=Ev(L),v[A].c(),v[A].m(o,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=g.length}T&6&&mi(o,w[1].optionValue1),w[1].optionValue1?_?_.p(w,T):(_=xv(w),_.c(),_.m(n,s)):_&&(_.d(1),_=null),w[1].optionValue2&&w[2].optionValue3.length>0?b?b.p(w,T):(b=Pv(w),b.c(),b.m(n,c)):b&&(b.d(1),b=null),(O=w[4])!=null&&O.length?y&&(y.d(1),y=null):y?y.p(w,T):(y=Iv(w),y.c(),y.m(n,null))},i:ve,o:ve,d(w){w&&j(e),m&&m.d(),Ft(v,w),_&&_.d(),b&&b.d(),y&&y.d(),d=!1,We(p)}}}function SF(t,e,n){let i,r,o,h;Ne(t,je,T=>n(3,r=T)),Ne(t,Il,T=>n(18,o=T)),Ne(t,li,T=>n(4,h=T));let{publishId:a}=e,{loadPublish:s}=e,{runEditor:c}=e;const f=o.linkOptions.reduce((T,O,A)=>{if(O.editorOptions){const L={...O.editorOptions,productNo:O.productNo,productOption:O.productOptions,publish:O.publish};T=[...T,L]}return T},[]);let l={optionValue1:[],optionValue2:[],optionValue3:[]},u={optionValue1:"",optionValue2:"",optionValue3:""};function d(T,O){const A=O.target.value;if(n(1,u[T]=A,u),T!=="optionValue3")for(let L=parseInt(T.slice(-1))+1;L<=3;L++)n(1,u[`optionValue${L}`]="",u);n(1,u={...u})}async function p(){n(7,a=i.publish),await s(),ye(je,r.currentOption=i,r)}function m(){u.optionValue1=Io(this),n(1,u),n(2,l),n(1,u)}const g=T=>d("optionValue1",T);function v(){u.optionValue2=Io(this),n(1,u),n(2,l),n(1,u)}const _=T=>d("optionValue2",T);function b(){u.optionValue3=Io(this),n(1,u),n(2,l),n(1,u)}const y=T=>d("optionValue3",T),C=()=>p(),w=()=>n(0,c=!1);return t.$$set=T=>{"publishId"in T&&n(7,a=T.publishId),"loadPublish"in T&&n(8,s=T.loadPublish),"runEditor"in T&&n(0,c=T.runEditor)},t.$$.update=()=>{t.$$.dirty&2&&(u.optionValue1?n(2,l.optionValue2=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1).map(T=>T.optionValue2))],l):n(2,l.optionValue2=[],l)),t.$$.dirty&2&&(u.optionValue1&&u.optionValue2?n(2,l.optionValue3=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2).map(T=>T.optionValue3).filter(Boolean))],l):n(2,l.optionValue3=[],l)),t.$$.dirty&2&&(i=f.find(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2&&(T.optionValue3===u.optionValue3||!T.optionValue3)))},n(2,l.optionValue1=[...new Set(f.map(T=>T.optionValue1))],l),[c,u,l,r,h,d,p,a,s,m,g,v,_,b,y,C,w]}class TF extends Ge{constructor(e){super(),$e(this,e,SF,CF,Xe,{publishId:7,loadPublish:8,runEditor:0})}}function kF(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w;return n=new ke({props:{icon:"file-icons:arttext4",height:"20"}}),a=new ke({props:{icon:"ph:upload-bold",height:"20"}}),u=new ke({props:{icon:"mingcute:text-2-fill",height:"20"}}),v=new ke({props:{icon:"ic:outline-draw",height:"20"}}),{c(){e=E("button"),he(n.$$.fragment),i=V(),r=E("span"),r.textContent="클립아트",o=V(),h=E("button"),he(a.$$.fragment),s=V(),c=E("span"),c.textContent="업로드",f=V(),l=E("button"),he(u.$$.fragment),d=V(),p=E("span"),p.textContent="텍스트",m=V(),g=E("button"),he(v.$$.fragment),_=V(),b=E("span"),b.textContent="도형/그리기",S(r,"class","whitespace-nowrap text-2xs hidden md:block"),S(e,"type","button"),S(e,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(c,"class","whitespace-nowrap text-2xs hidden md:block"),S(h,"type","button"),S(h,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(p,"class","whitespace-nowrap text-2xs hidden md:block"),S(l,"type","button"),S(l,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(b,"class","whitespace-nowrap text-2xs hidden md:block"),S(g,"type","button"),S(g,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded")},m(T,O){U(T,e,O),ue(n,e,null),k(e,i),k(e,r),U(T,o,O),U(T,h,O),ue(a,h,null),k(h,s),k(h,c),U(T,f,O),U(T,l,O),ue(u,l,null),k(l,d),k(l,p),U(T,m,O),U(T,g,O),ue(v,g,null),k(g,_),k(g,b),y=!0,C||(w=[ne(e,"click",t[1]),ne(h,"click",t[2]),ne(l,"click",t[3]),ne(g,"click",t[4])],C=!0)},p:ve,i(T){y||(I(n.$$.fragment,T),I(a.$$.fragment,T),I(u.$$.fragment,T),I(v.$$.fragment,T),y=!0)},o(T){W(n.$$.fragment,T),W(a.$$.fragment,T),W(u.$$.fragment,T),W(v.$$.fragment,T),y=!1},d(T){T&&(j(e),j(o),j(h),j(f),j(l),j(m),j(g)),fe(n),fe(a),fe(u),fe(v),C=!1,We(w)}}}function OF(t,e,n){let i;return Ne(t,Jt,s=>n(0,i=s)),[i,()=>ye(Jt,i="clipart",i),()=>ye(Jt,i="upload",i),()=>ye(Jt,i="text",i),()=>ye(Jt,i="draw",i)]}class EF extends Ge{constructor(e){super(),$e(this,e,OF,kF,Xe,{})}}function Fv(t){let e,n,i,r,o,h,a,s,c,f=t[0].product.productName+"",l,u,d,p,m,g,v,_,b,y,C,w=t[0].currentOption&&Lv(t);return{c(){e=E("div"),n=E("h2"),n.textContent="선택상품",i=V(),r=E("div"),o=E("img"),a=V(),s=E("div"),c=E("p"),l=Te(f),u=V(),w&&w.c(),d=V(),p=E("div"),m=E("button"),m.textContent="-",g=V(),v=E("input"),_=V(),b=E("button"),b.textContent="+",S(n,"class","text-xs border-b p-3"),Ze(o.src,h=t[0].product.images[0].url)||S(o,"src",h),S(o,"alt","thumbnail"),S(o,"class","max-h-12 max-w-12 object-contain"),S(c,"class","text-xs grow"),S(s,"class","flex flex-col"),S(m,"type","button"),S(m,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(v,"type","text"),S(v,"class","border w-12 input-sm rounded-none"),S(b,"type","button"),S(b,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(p,"class","flex"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(T,O){U(T,e,O),k(e,n),k(e,i),k(e,r),k(r,o),k(r,a),k(r,s),k(s,c),k(c,l),k(s,u),w&&w.m(s,null),k(r,d),k(r,p),k(p,m),k(p,g),k(p,v),Fe(v,t[0].count),k(p,_),k(p,b),y||(C=[ne(m,"click",t[3]),ne(v,"input",t[4]),ne(b,"click",t[5])],y=!0)},p(T,O){O&1&&!Ze(o.src,h=T[0].product.images[0].url)&&S(o,"src",h),O&1&&f!==(f=T[0].product.productName+"")&&Ve(l,f),T[0].currentOption?w?w.p(T,O):(w=Lv(T),w.c(),w.m(s,null)):w&&(w.d(1),w=null),O&1&&v.value!==T[0].count&&Fe(v,T[0].count)},d(T){T&&j(e),w&&w.d(),y=!1,We(C)}}}function Lv(t){let e,n,i,r=t[0].currentOption.optionValue1&&Nv(t),o=t[0].currentOption.optionValue2&&jv(t),h=t[0].currentOption.optionValue3&&Bv(t);return{c(){e=E("p"),r&&r.c(),n=V(),o&&o.c(),i=V(),h&&h.c(),S(e,"class","text-xs grow mt-1 text-gray-500")},m(a,s){U(a,e,s),r&&r.m(e,null),k(e,n),o&&o.m(e,null),k(e,i),h&&h.m(e,null)},p(a,s){a[0].currentOption.optionValue1?r?r.p(a,s):(r=Nv(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),a[0].currentOption.optionValue2?o?o.p(a,s):(o=jv(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null),a[0].currentOption.optionValue3?h?h.p(a,s):(h=Bv(a),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(a){a&&j(e),r&&r.d(),o&&o.d(),h&&h.d()}}}function Nv(t){let e=t[0].currentOption.optionValue1+"",n;return{c(){n=Te(e)},m(i,r){U(i,n,r)},p(i,r){r&1&&e!==(e=i[0].currentOption.optionValue1+"")&&Ve(n,e)},d(i){i&&j(n)}}}function jv(t){let e,n=t[0].currentOption.optionValue2+"",i;return{c(){e=Te("/ "),i=Te(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue2+"")&&Ve(i,n)},d(r){r&&(j(e),j(i))}}}function Bv(t){let e,n=t[0].currentOption.optionValue3+"",i;return{c(){e=Te("/ "),i=Te(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue3+"")&&Ve(i,n)},d(r){r&&(j(e),j(i))}}}function xF(t){let e,n=t[0].product&&Fv(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0].product?n?n.p(i,r):(n=Fv(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ve,o:ve,d(i){i&&j(e),n&&n.d(i)}}}function DF(t,e,n){let i;Ne(t,je,c=>n(0,i=c));function r(){ye(je,i.count++,i)}function o(){i.count>1&&ye(je,i.count--,i)}const h=()=>o();function a(){i.count=this.value,je.set(i)}return[i,r,o,h,a,()=>r()]}class AF extends Ge{constructor(e){super(),$e(this,e,DF,xF,Xe,{})}}function PF(t,{from:e,to:n},i={}){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform,[h,a]=r.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*h/n.width-(n.left+h),c=e.top+e.height*a/n.height-(n.top+a),{delay:f=0,duration:l=d=>Math.sqrt(d)*120,easing:u=ah}=i;return{delay:f,duration:jn(l)?l(Math.sqrt(s*s+c*c)):l,easing:u,css:(d,p)=>{const m=p*s,g=p*c,v=d+p*e.width/n.width,_=d+p*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${_});`}}}function Uv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Xl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uv(Object(n),!0).forEach(function(i){io(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uv(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $o(t){"@babel/helpers - typeof";return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(t)}function io(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MF(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function RF(t,e){if(t==null)return{};var n=MF(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function IF(t,e){return LF(t)||jF(t,e)||ed(t,e)||UF()}function Un(t){return FF(t)||NF(t)||ed(t)||BF()}function FF(t){if(Array.isArray(t))return jf(t)}function LF(t){if(Array.isArray(t))return t}function NF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,o=!1,h,a;try{for(n=n.call(t);!(r=(h=n.next()).done)&&(i.push(h.value),!(e&&i.length===e));r=!0);}catch(s){o=!0,a=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw a}}return i}}function ed(t,e){if(t){if(typeof t=="string")return jf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jf(t,e)}}function jf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function BF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oa(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ed(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,h=!1,a;return{s:function(){n=n.call(t)},n:function(){var s=n.next();return o=s.done,s},e:function(s){h=!0,a=s},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(h)throw a}}}}var YF="finalize",WF="consider";function ro(t,e,n){t.dispatchEvent(new CustomEvent(YF,{detail:{items:e,info:n}}))}function gr(t,e,n){t.dispatchEvent(new CustomEvent(WF,{detail:{items:e,info:n}}))}var kc="draggedEntered",Ea="draggedLeft",Oc="draggedOverIndex",td="draggedLeftDocument",$l={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function zF(t,e,n){t.dispatchEvent(new CustomEvent(kc,{detail:{indexObj:e,draggedEl:n}}))}function HF(t,e,n){t.dispatchEvent(new CustomEvent(Ea,{detail:{draggedEl:e,type:$l.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function VF(t,e){t.dispatchEvent(new CustomEvent(Ea,{detail:{draggedEl:e,type:$l.OUTSIDE_OF_ANY}}))}function XF(t,e,n){t.dispatchEvent(new CustomEvent(Oc,{detail:{indexObj:e,draggedEl:n}}))}function $F(t){window.dispatchEvent(new CustomEvent(td,{detail:{draggedEl:t}}))}var pn={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:kc,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Oc,DRAGGED_LEFT:Ea,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},wn={POINTER:"pointer",KEYBOARD:"keyboard"},Ec="isDndShadowItem",nd="data-is-dnd-shadow-item-internal",GF="data-is-dnd-shadow-item-hint",qF="id:dnd-shadow-placeholder-0000",KF="dnd-action-dragged-el",Zt="id",Bf=0;function H0(){Bf++}function V0(){if(Bf===0)throw new Error("Bug! trying to decrement when there are no dropzones");Bf--}var id=typeof window>"u";function Uf(t){var e,n=t.getBoundingClientRect(),i=getComputedStyle(t),r=i.transform;if(r){var o,h,a,s;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),o=+e[0],h=+e[5],a=+e[12],s=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),o=+e[0],h=+e[3],a=+e[4],s=+e[5];else return n;var c=i.transformOrigin,f=n.x-a-(1-o)*parseFloat(c),l=n.y-s-(1-h)*parseFloat(c.slice(c.indexOf(" ")+1)),u=o?n.width/o:t.offsetWidth,d=h?n.height/h:t.offsetHeight;return{x:f,y:l,width:u,height:d,top:l,right:f+u,bottom:l+d,left:f}}else return n}function X0(t){var e=Uf(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function $0(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function G0(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function JF(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function xc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function oa(t){return G0($0(t))}function Yv(t,e){var n=oa(t),i=X0(e);return xc(n,i)}function ZF(t,e){var n=oa(t),i=oa(e);return JF(n,i)}function QF(t){var e=$0(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var Bs;function rd(){Bs=new Map}rd();function eL(t){var e=Array.from(t.children).findIndex(function(n){return n.getAttribute(nd)});if(e>=0)return Bs.has(t)||Bs.set(t,new Map),Bs.get(t).set(e,X0(t.children[e])),e}function tL(t,e){if(!Yv(t,e))return null;var n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};for(var i=eL(e),r=0;r<n.length;r++)if(Yv(t,n[r])){var o=Bs.has(e)&&Bs.get(e).get(r);return o&&!xc(oa(t),o)?{index:i,isProximityBased:!1}:{index:r,isProximityBased:!1}}for(var h=Number.MAX_VALUE,a=void 0,s=0;s<n.length;s++){var c=ZF(t,n[s]);c<h&&(h=c,a=s)}return{index:a,isProximityBased:!0}}function nl(t){return JSON.stringify(t,null,2)}function Gl(t){if(!t)throw new Error("cannot get depth of a falsy node");return q0(t,0)}function q0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.parentElement?q0(t.parentElement,e+1):e-1}function nL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function iL(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var rL=200,Wv=10,Yf;function sL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rL,i=arguments.length>3?arguments[3]:void 0,r,o,h=!1,a,s=Array.from(e).sort(function(f,l){return Gl(l)-Gl(f)});function c(){var f=oa(t),l=i.multiScrollIfNeeded();if(!l&&a&&Math.abs(a.x-f.x)<Wv&&Math.abs(a.y-f.y)<Wv){Yf=window.setTimeout(c,n);return}if(QF(t)){$F(t);return}a=f;var u=!1,d=Oa(s),p;try{for(d.s();!(p=d.n()).done;){var m=p.value;l&&rd();var g=tL(t,m);if(g!==null){var v=g.index;u=!0,m!==r?(r&&HF(r,t,m),zF(m,g,t),r=m):v!==o&&(XF(m,g,t),o=v);break}}}catch(_){d.e(_)}finally{d.f()}!u&&h&&r?(VF(r,t),r=void 0,o=void 0,h=!1):h=!0,Yf=window.setTimeout(c,n)}c()}function oL(){clearTimeout(Yf),rd()}var xo=30;function aL(){var t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(o){var h=t,a=h.directionObj,s=h.stepPx;a&&(o.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(function(){return n(o)}))}function i(o){return xo-o}function r(o,h){if(!h)return!1;var a=lL(o,h);if(a===null)return e(),!1;var s=!!t.directionObj,c=!1,f=!1;return h.scrollHeight>h.clientHeight&&(a.bottom<xo?(c=!0,t.directionObj={x:0,y:1},t.stepPx=i(a.bottom)):a.top<xo&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=i(a.top)),!s&&c)||h.scrollWidth>h.clientWidth&&(a.right<xo?(f=!0,t.directionObj={x:1,y:0},t.stepPx=i(a.right)):a.left<xo&&(f=!0,t.directionObj={x:-1,y:0},t.stepPx=i(a.left)),!s&&f)?(n(h),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function lL(t,e){var n=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return xc(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:n.right-t.x}:null}function cL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=fL(t),i=Array.from(n).sort(function(a,s){return Gl(s)-Gl(a)}),r=aL(),o=r.scrollIfNeeded;function h(){var a=e();if(!a||!i)return!1;for(var s=i.filter(function(l){return xc(a,l.getBoundingClientRect())||l===document.scrollingElement}),c=0;c<s.length;c++){var f=o(a,s[c]);if(f)return!0}return!1}return{multiScrollIfNeeded:n.size>0?h:function(){return!1}}}function uL(t){if(!t)return[];for(var e=[],n=t;n;){var i=window.getComputedStyle(n),r=i.overflow;r.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&e.push(n),n=n.parentElement}return e}function fL(t){var e=new Set,n=Oa(t),i;try{for(n.s();!(i=n.n()).done;){var r=i.value;uL(r).forEach(function(o){return e.add(o)})}}catch(o){n.e(o)}finally{n.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function hL(t){var e=t.cloneNode(!0),n=[],i=t.tagName==="SELECT",r=i?[t]:Un(t.querySelectorAll("select")),o=Oa(r),h;try{for(o.s();!(h=o.n()).done;){var a=h.value;n.push(a.value)}}catch(b){o.e(b)}finally{o.f()}if(r.length>0)for(var s=i?[e]:Un(e.querySelectorAll("select")),c=0;c<s.length;c++){var f=s[c],l=n[c],u=f.querySelector('option[value="'.concat(l,'"'));u&&u.setAttribute("selected",!0)}var d=t.tagName==="CANVAS",p=d?[t]:Un(t.querySelectorAll("canvas"));if(p.length>0)for(var m=d?[e]:Un(e.querySelectorAll("canvas")),g=0;g<m.length;g++){var v=p[g],_=m[g];_.width=v.width,_.height=v.height,_.getContext("2d").drawImage(v,0,0)}return e}var aa=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),dL=io({},aa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function K0(t){if(!aa[t])throw new Error("Can't get non existing feature flag ".concat(t,"! Supported flags: ").concat(Object.keys(aa)));return dL[t]}var pL=.2;function Sr(t){return"".concat(t," ").concat(pL,"s ease")}function gL(t,e){var n=t.getBoundingClientRect(),i=hL(t);J0(t,i),i.id=KF,i.style.position="fixed";var r=n.top,o=n.left;if(i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px"),e){var h=G0(n);r-=h.y-e.y,o-=h.x-e.x,window.setTimeout(function(){i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px")},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height="".concat(n.height,"px"),i.style.width="".concat(n.width,"px"),i.style.transition="".concat(Sr("top"),", ").concat(Sr("left"),", ").concat(Sr("background-color"),", ").concat(Sr("opacity"),", ").concat(Sr("color")," "),window.setTimeout(function(){return i.style.transition+=", ".concat(Sr("width"),", ").concat(Sr("height"))},0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function mL(t){t.style.cursor="grab"}function vL(t,e,n,i){J0(e,t);var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),h=r.width-o.width,a=r.height-o.height;if(h||a){var s={left:(n-o.left)/o.width,top:(i-o.top)/o.height};K0(aa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height="".concat(r.height,"px"),t.style.width="".concat(r.width,"px")),t.style.left="".concat(parseFloat(t.style.left)-s.left*h,"px"),t.style.top="".concat(parseFloat(t.style.top)-s.top*a,"px")}}function J0(t,e){var n=window.getComputedStyle(t);Array.from(n).filter(function(i){return i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||K0(aa.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")}).forEach(function(i){return e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))})}function _L(t,e){t.draggable=!1,t.ondragstart=function(){return!1},e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function Z0(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function yL(t){t.style.visibility="hidden",t.setAttribute(nd,"true")}function bL(t){t.style.visibility="",t.removeAttribute(nd)}function yl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=r[o]}),n(i).forEach(function(o){return i.classList.add(o)})})}function ql(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=""}),n(i).forEach(function(o){return i.classList.contains(o)&&i.classList.remove(o)})})}function wL(t){var e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");var n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}var CL="--any--",SL=100,TL=20,zv=3,Hv={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Vv="data-is-dnd-original-dragged-item",si,rn,bn,Dc,Ot,Ac,cr,an,Zi,On,Pr=!1,sd=!1,od,xa=!1,bl=[],Jn=new Map,jt=new Map,Bu=new WeakMap;function kL(t,e){Jn.has(e)||Jn.set(e,new Set),Jn.get(e).has(t)||(Jn.get(e).add(t),H0())}function Xv(t,e){Jn.get(e).delete(t),V0(),Jn.get(e).size===0&&Jn.delete(e)}function OL(){var t=Jn.get(Dc),e=Oa(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.addEventListener(kc,Q0),i.addEventListener(Ea,ew),i.addEventListener(Oc,tw)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(td,so);var r=Math.max.apply(Math,Un(Array.from(t.keys()).map(function(a){return jt.get(a).dropAnimationDurationMs}))),o=r===0?TL:Math.max(r,SL),h=cL(t,function(){return On});sL(rn,t,o*1.07,h)}function EL(){var t=Jn.get(Dc),e=Oa(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.removeEventListener(kc,Q0),i.removeEventListener(Ea,ew),i.removeEventListener(Oc,tw)}}catch(r){e.e(r)}finally{e.f()}window.removeEventListener(td,so),oL()}function Pc(t){return t.findIndex(function(e){return!!e[Ec]})}function xL(t){var e;return Xl(Xl({},t),{},(e={},io(e,Ec,!0),io(e,Zt,qF),e))}function Q0(t){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Ot)){if(xa=!1,n=n.filter(function(f){return f[Zt]!==cr[Zt]}),Ot!==t.currentTarget){var r=jt.get(Ot).items,o=r.filter(function(f){return!f[Ec]});gr(Ot,o,{trigger:pn.DRAGGED_ENTERED_ANOTHER,id:bn[Zt],source:wn.POINTER})}var h=t.detail.indexObj,a=h.index,s=h.isProximityBased,c=s&&a===t.currentTarget.children.length-1?a+1:a;an=t.currentTarget,n.splice(c,0,cr),gr(t.currentTarget,n,{trigger:pn.DRAGGED_ENTERED,id:bn[Zt],source:wn.POINTER})}}function ew(t){if(Pr){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Ot&&t.currentTarget!==an)){var r=Un(n),o=Pc(r);o!==-1&&r.splice(o,1);var h=an;an=void 0;var a=t.detail,s=a.type,c=a.theOtherDz;if(s===$l.OUTSIDE_OF_ANY||s===$l.LEFT_FOR_ANOTHER&&c!==Ot&&jt.get(c).dropFromOthersDisabled){xa=!0,an=Ot;var f=h===Ot?r:Un(jt.get(Ot).items);f.splice(Ac,0,cr),gr(Ot,f,{trigger:pn.DRAGGED_LEFT_ALL,id:bn[Zt],source:wn.POINTER})}gr(t.currentTarget,r,{trigger:pn.DRAGGED_LEFT,id:bn[Zt],source:wn.POINTER})}}}function tw(t){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Ot)){var r=Un(n);xa=!1;var o=t.detail.indexObj.index,h=Pc(r);h!==-1&&r.splice(h,1),r.splice(o,0,cr),gr(t.currentTarget,r,{trigger:pn.DRAGGED_OVER_INDEX,id:bn[Zt],source:wn.POINTER})}}function Kl(t){t.preventDefault();var e=t.touches?t.touches[0]:t;On={x:e.clientX,y:e.clientY},rn.style.transform="translate3d(".concat(On.x-Zi.x,"px, ").concat(On.y-Zi.y,"px, 0)")}function so(){sd=!0,window.removeEventListener("mousemove",Kl),window.removeEventListener("touchmove",Kl),window.removeEventListener("mouseup",so),window.removeEventListener("touchend",so),EL(),mL(rn),an||(an=Ot);var t=jt.get(an),e=t.items,n=t.type;ql(Jn.get(n),function(o){return jt.get(o).dropTargetStyle},function(o){return jt.get(o).dropTargetClasses});var i=Pc(e);i===-1&&an===Ot&&(i=Ac),e=e.map(function(o){return o[Ec]?bn:o});function r(){od(),ro(an,e,{trigger:xa?pn.DROPPED_OUTSIDE_OF_ANY:pn.DROPPED_INTO_ZONE,id:bn[Zt],source:wn.POINTER}),an!==Ot&&ro(Ot,jt.get(Ot).items,{trigger:pn.DROPPED_INTO_ANOTHER,id:bn[Zt],source:wn.POINTER}),i!==-1&&bL(an.children[i]),PL()}DL(i,r)}function DL(t,e){var n=t>-1?Uf(an.children[t]):Uf(an),i={x:n.left-parseFloat(rn.style.left),y:n.top-parseFloat(rn.style.top)},r=jt.get(an),o=r.dropAnimationDurationMs,h="transform ".concat(o,"ms ease");rn.style.transition=rn.style.transition?rn.style.transition+","+h:h,rn.style.transform="translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)"),window.setTimeout(e,o)}function AL(t,e){bl.push({dz:t,destroy:e}),window.requestAnimationFrame(function(){Z0(t),document.body.appendChild(t)})}function PL(){rn.remove(),si.remove(),bl.length&&(bl.forEach(function(t){var e=t.dz,n=t.destroy;n(),e.remove()}),bl=[]),rn=void 0,si=void 0,bn=void 0,Dc=void 0,Ot=void 0,Ac=void 0,cr=void 0,an=void 0,Zi=void 0,On=void 0,Pr=!1,sd=!1,od=void 0,xa=!1}function ML(t,e){var n=!1,i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Hv,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},r=new Map;function o(){window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function h(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){h(),si=void 0,Zi=void 0,On=void 0}function s(u){u.preventDefault();var d=u.touches?u.touches[0]:u;On={x:d.clientX,y:d.clientY},(Math.abs(On.x-Zi.x)>=zv||Math.abs(On.y-Zi.y)>=zv)&&(h(),f())}function c(u){if(!(u.target!==u.currentTarget&&(u.target.value!==void 0||u.target.isContentEditable))&&!u.button&&!Pr){u.stopPropagation();var d=u.touches?u.touches[0]:u;Zi={x:d.clientX,y:d.clientY},On=Xl({},Zi),si=u.currentTarget,o()}}function f(){Pr=!0;var u=r.get(si);Ac=u,Ot=si.parentElement;var d=Ot.closest("dialog")||Ot.getRootNode(),p=d.body||d,m=i.items,g=i.type,v=i.centreDraggedOnCursor,_=Un(m);bn=_[u],Dc=g,cr=xL(bn),rn=gL(si,v&&On),si.setAttribute(Vv,!0);function b(){rn.parentElement?window.requestAnimationFrame(b):(p.appendChild(rn),rn.focus(),OL(),Z0(si),p.appendChild(si),cr[Zt]=bn[Zt])}window.requestAnimationFrame(b),yl(Array.from(Jn.get(i.type)).filter(function(y){return y===Ot||!jt.get(y).dropFromOthersDisabled}),function(y){return jt.get(y).dropTargetStyle},function(y){return jt.get(y).dropTargetClasses}),_.splice(u,1,cr),od=wL(Ot),gr(Ot,_,{trigger:pn.DRAG_STARTED,id:bn[Zt],source:wn.POINTER}),window.addEventListener("mousemove",Kl,{passive:!1}),window.addEventListener("touchmove",Kl,{passive:!1,capture:!1}),window.addEventListener("mouseup",so,{passive:!1}),window.addEventListener("touchend",so,{passive:!1})}function l(u){var d=u.items,p=d===void 0?void 0:d,m=u.flipDurationMs,g=m===void 0?0:m,v=u.type,_=v===void 0?CL:v,b=u.dragDisabled,y=b===void 0?!1:b,C=u.morphDisabled,w=C===void 0?!1:C,T=u.dropFromOthersDisabled,O=T===void 0?!1:T,A=u.dropTargetStyle,L=A===void 0?Hv:A,G=u.dropTargetClasses,Y=G===void 0?[]:G,te=u.transformDraggedElement,q=te===void 0?function(){}:te,N=u.centreDraggedOnCursor,B=N===void 0?!1:N;i.dropAnimationDurationMs=g,i.type&&_!==i.type&&Xv(t,i.type),i.type=_,i.items=Un(p),i.dragDisabled=y,i.morphDisabled=w,i.transformDraggedElement=q,i.centreDraggedOnCursor=B,n&&Pr&&!sd&&(!nL(L,i.dropTargetStyle)||!iL(Y,i.dropTargetClasses))&&(ql([t],function(){return i.dropTargetStyle},function(){return Y}),yl([t],function(){return L},function(){return Y})),i.dropTargetStyle=L,i.dropTargetClasses=Un(Y);function Q(R,F){return jt.get(R)?jt.get(R)[F]:i[F]}n&&Pr&&i.dropFromOthersDisabled!==O&&(O?ql([t],function(R){return Q(R,"dropTargetStyle")},function(R){return Q(R,"dropTargetClasses")}):yl([t],function(R){return Q(R,"dropTargetStyle")},function(R){return Q(R,"dropTargetClasses")})),i.dropFromOthersDisabled=O,jt.set(t,i),kL(t,_);for(var ee=Pc(i.items),x=0;x<t.children.length;x++){var P=t.children[x];if(_L(P,y),x===ee){i.transformDraggedElement(rn,bn,x),w||vL(rn,P,On.x,On.y),yL(P);continue}P.removeEventListener("mousedown",Bu.get(P)),P.removeEventListener("touchstart",Bu.get(P)),y||(P.addEventListener("mousedown",c),P.addEventListener("touchstart",c),Bu.set(P,c)),r.set(P,x),n||(n=!0)}}return l(e),{update:function(d){l(d)},destroy:function(){function d(){Xv(t,jt.get(t).type),jt.delete(t)}Pr&&!t.closest("[".concat(Vv,"]"))?AL(t,d):d()}}}var il,Wf={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},nw=(il={},io(il,Wf.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),io(il,Wf.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),il),RL="dnd-action-aria-alert",Nt;function zf(){Nt||(Nt=document.createElement("div"),function(){Nt.id=RL,Nt.style.position="fixed",Nt.style.bottom="0",Nt.style.left="0",Nt.style.zIndex="-5",Nt.style.opacity="0",Nt.style.height="0",Nt.style.width="0",Nt.setAttribute("role","alert")}(),document.body.prepend(Nt),Object.entries(nw).forEach(function(t){var e=IF(t,2),n=e[0],i=e[1];return document.body.prepend(LL(n,i))}))}function IL(){return id?null:(document.readyState==="complete"?zf():window.addEventListener("DOMContentLoaded",zf),Xl({},Wf))}function FL(){id||!Nt||(Object.keys(nw).forEach(function(t){var e;return(e=document.getElementById(t))===null||e===void 0?void 0:e.remove()}),Nt.remove(),Nt=void 0)}function LL(t,e){var n=document.createElement("div");return n.id=t,n.innerHTML="<p>".concat(e,"</p>"),n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function Us(t){if(!id){Nt||zf(),Nt.innerHTML="";var e=document.createTextNode(t);Nt.appendChild(e),Nt.style.display="none",Nt.style.display="inline"}}var NL="--any--",$v={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Fn=!1,Hf,ln,Wr="",xr,ci,rr="",Jl=new WeakSet,Gv=new WeakMap,qv=new WeakMap,Vf=new Map,nn=new Map,qn=new Map,Zl;function jL(t,e){qn.size===0&&(Zl=IL(),window.addEventListener("keydown",iw),window.addEventListener("click",rw)),qn.has(e)||qn.set(e,new Set),qn.get(e).has(t)||(qn.get(e).add(t),H0())}function Kv(t,e){ln===t&&la(),qn.get(e).delete(t),V0(),qn.get(e).size===0&&qn.delete(e),qn.size===0&&(window.removeEventListener("keydown",iw),window.removeEventListener("click",rw),Zl=void 0,FL())}function iw(t){if(Fn)switch(t.key){case"Escape":{la();break}}}function rw(){Fn&&(Jl.has(document.activeElement)||la())}function BL(t){if(Fn){var e=t.currentTarget;if(e!==ln){Wr=e.getAttribute("aria-label")||"";var n=nn.get(ln),i=n.items,r=i.find(function(l){return l[Zt]===ci}),o=i.indexOf(r),h=i.splice(o,1)[0],a=nn.get(e),s=a.items,c=a.autoAriaDisabled;e.getBoundingClientRect().top<ln.getBoundingClientRect().top||e.getBoundingClientRect().left<ln.getBoundingClientRect().left?(s.push(h),c||Us("Moved item ".concat(rr," to the end of the list ").concat(Wr))):(s.unshift(h),c||Us("Moved item ".concat(rr," to the beginning of the list ").concat(Wr)));var f=ln;ro(f,i,{trigger:pn.DROPPED_INTO_ANOTHER,id:ci,source:wn.KEYBOARD}),ro(e,s,{trigger:pn.DROPPED_INTO_ZONE,id:ci,source:wn.KEYBOARD}),ln=e}}}function sw(){Vf.forEach(function(t,e){var n=t.update;return n(nn.get(e))})}function la(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;nn.get(ln).autoAriaDisabled||Us("Stopped dragging item ".concat(rr)),Jl.has(document.activeElement)&&document.activeElement.blur(),t&&gr(ln,nn.get(ln).items,{trigger:pn.DRAG_STOPPED,id:ci,source:wn.KEYBOARD}),ql(qn.get(Hf),function(e){return nn.get(e).dropTargetStyle},function(e){return nn.get(e).dropTargetClasses}),xr=null,ci=null,rr="",Hf=null,ln=null,Wr="",Fn=!1,sw()}function UL(t,e){var n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:$v,dropTargetClasses:[],autoAriaDisabled:!1};function i(f,l,u){f.length<=1||f.splice(u,1,f.splice(l,1,f[u])[0])}function r(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!Jl.has(f.target))return;f.preventDefault(),f.stopPropagation(),Fn?la():o(f);break}case"ArrowDown":case"ArrowRight":{if(!Fn)return;f.preventDefault(),f.stopPropagation();var l=nn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f.currentTarget);p<d.length-1&&(n.autoAriaDisabled||Us("Moved item ".concat(rr," to position ").concat(p+2," in the list ").concat(Wr)),i(u,p,p+1),ro(t,u,{trigger:pn.DROPPED_INTO_ZONE,id:ci,source:wn.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Fn)return;f.preventDefault(),f.stopPropagation();var m=nn.get(t),g=m.items,v=Array.from(t.children),_=v.indexOf(f.currentTarget);_>0&&(n.autoAriaDisabled||Us("Moved item ".concat(rr," to position ").concat(_," in the list ").concat(Wr)),i(g,_,_-1),ro(t,g,{trigger:pn.DROPPED_INTO_ZONE,id:ci,source:wn.KEYBOARD}));break}}}function o(f){a(f.currentTarget),ln=t,Hf=n.type,Fn=!0;var l=Array.from(qn.get(n.type)).filter(function(d){return d===ln||!nn.get(d).dropFromOthersDisabled});if(yl(l,function(d){return nn.get(d).dropTargetStyle},function(d){return nn.get(d).dropTargetClasses}),!n.autoAriaDisabled){var u="Started dragging item ".concat(rr,". Use the arrow keys to move it within its list ").concat(Wr);l.length>1&&(u+=", or tab to another list in order to move the item into it"),Us(u)}gr(t,nn.get(t).items,{trigger:pn.DRAG_STARTED,id:ci,source:wn.KEYBOARD}),sw()}function h(f){Fn&&f.currentTarget!==xr&&(f.stopPropagation(),la(!1),o(f))}function a(f){var l=nn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f);xr=f,xr.tabIndex=n.zoneItemTabIndex,ci=u[p][Zt],rr=d[p].getAttribute("aria-label")||""}function s(f){var l=f.items,u=l===void 0?[]:l,d=f.type,p=d===void 0?NL:d,m=f.dragDisabled,g=m===void 0?!1:m,v=f.zoneTabIndex,_=v===void 0?0:v,b=f.zoneItemTabIndex,y=b===void 0?0:b,C=f.dropFromOthersDisabled,w=C===void 0?!1:C,T=f.dropTargetStyle,O=T===void 0?$v:T,A=f.dropTargetClasses,L=A===void 0?[]:A,G=f.autoAriaDisabled,Y=G===void 0?!1:G;n.items=Un(u),n.dragDisabled=g,n.dropFromOthersDisabled=w,n.zoneTabIndex=_,n.zoneItemTabIndex=y,n.dropTargetStyle=O,n.dropTargetClasses=L,n.autoAriaDisabled=Y,n.type&&p!==n.type&&Kv(t,n.type),n.type=p,jL(t,p),Y||(t.setAttribute("aria-disabled",g),t.setAttribute("role","list"),t.setAttribute("aria-describedby",g?Zl.DND_ZONE_DRAG_DISABLED:Zl.DND_ZONE_ACTIVE)),nn.set(t,n),Fn?t.tabIndex=t===ln||xr.contains(t)||n.dropFromOthersDisabled||ln&&n.type!==nn.get(ln).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",BL);for(var te=function(B){var Q=t.children[B];Jl.add(Q),Q.tabIndex=Fn?-1:n.zoneItemTabIndex,Y||Q.setAttribute("role","listitem"),Q.removeEventListener("keydown",Gv.get(Q)),Q.removeEventListener("click",qv.get(Q)),g||(Q.addEventListener("keydown",r),Gv.set(Q,r),Q.addEventListener("click",h),qv.set(Q,h)),Fn&&n.items[B][Zt]===ci&&(xr=Q,xr.tabIndex=n.zoneItemTabIndex,Q.focus())},q=0;q<t.children.length;q++)te(q)}s(e);var c={update:function(l){s(l)},destroy:function(){Kv(t,n.type),nn.delete(t),Vf.delete(t)}};return Vf.set(t,c),c}var YL=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function WL(t,e){if(zL(t))return{update:function(){},destroy:function(){}};Jv(e);var n=ML(t,e),i=UL(t,e);return{update:function(o){Jv(o),n.update(o),i.update(o)},destroy:function(){n.destroy(),i.destroy()}}}function zL(t){return!!t.closest("[".concat(GF,'="true"]'))}function Jv(t){var e=t.items;t.flipDurationMs,t.type,t.dragDisabled,t.morphDisabled,t.dropFromOthersDisabled;var n=t.zoneTabIndex,i=t.zoneItemTabIndex;t.dropTargetStyle;var r=t.dropTargetClasses;t.transformDraggedElement,t.autoAriaDisabled,t.centreDraggedOnCursor;var o=RF(t,YL);if(Object.keys(o).length>0&&console.warn("dndzone will ignore unknown options",o),!e)throw new Error("no 'items' key provided to dndzone");var h=e.find(function(a){return!{}.hasOwnProperty.call(a,Zt)});if(h)throw new Error("missing '".concat(Zt,"' property for item ").concat(nl(h)));if(r&&!Array.isArray(r))throw new Error("dropTargetClasses should be an array but instead it is a ".concat($o(r),", ").concat(nl(r)));if(n&&!Zv(n))throw new Error("zoneTabIndex should be a number but instead it is a ".concat($o(n),", ").concat(nl(n)));if(i&&!Zv(i))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat($o(i),", ").concat(nl(i)))}function Zv(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function HL(t){function e(n){var i=n.target;if(i.matches(t)){var r;switch(n.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;case"touchcancel":r="mouseup";break;default:return}var o=n.changedTouches[0],h=o.clientX,a=o.pageX,s=window.pageXOffset,c=o.clientY,f=o.pageY,l=window.pageYOffset;a===0&&Math.floor(h)>Math.floor(a)||f===0&&Math.floor(c)>Math.floor(f)?(h-=s,c-=l):(h<a-s||c<f-l)&&(h=a-s,c=f-l);var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,screenX:o.screenX,screenY:o.screenY,clientX:h,clientY:c,pageX:a,pageY:f,buttons:1,button:0,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey});o.target.dispatchEvent(u)}}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}function Qv(t,e,n){const i=t.slice();return i[10]=e[n],i}function e_(t){let e,n,i,r,o,h=[],a=new Map,s,c,f,l,u=Le(t[1]);const d=p=>p[10].id;for(let p=0;p<u.length;p+=1){let m=Qv(t,u,p),g=d(m);a.set(g,h[p]=s_(g,m))}return{c(){e=E("div"),n=E("h2"),n.textContent="레이어",i=V(),r=E("div"),o=E("div");for(let p=0;p<h.length;p+=1)h[p].c();S(n,"class","text-xs border-b p-3"),S(o,"class","sortable space-y-2 w-full svelte-tzic9t"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(p,m){U(p,e,m),k(e,n),k(e,i),k(e,r),k(r,o);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(o,null);c=!0,f||(l=[sy(s=WL.call(null,o,{items:t[1],flipDurationMs:Xf})),ne(o,"consider",t[2]),ne(o,"finalize",t[3])],f=!0)},p(p,m){if(m&51){u=Le(p[1]),Oe();for(let g=0;g<h.length;g+=1)h[g].r();h=_y(h,m,d,1,p,u,a,o,C1,s_,null,Qv);for(let g=0;g<h.length;g+=1)h[g].a();Ee()}s&&jn(s.update)&&m&2&&s.update.call(null,{items:p[1],flipDurationMs:Xf})},i(p){if(!c){for(let m=0;m<u.length;m+=1)I(h[m]);c=!0}},o(p){for(let m=0;m<h.length;m+=1)W(h[m]);c=!1},d(p){p&&j(e);for(let m=0;m<h.length;m+=1)h[m].d();f=!1,We(l)}}}function VL(t){let e,n,i,r,o=t[10].type==="ellipse"&&t_(),h=t[10].type==="triangle"&&n_(),a=t[10].type==="rectangle"&&i_();return{c(){o&&o.c(),e=V(),h&&h.c(),n=V(),a&&a.c(),i=et()},m(s,c){o&&o.m(s,c),U(s,e,c),h&&h.m(s,c),U(s,n,c),a&&a.m(s,c),U(s,i,c),r=!0},p(s,c){s[10].type==="ellipse"?o?c&2&&I(o,1):(o=t_(),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(Oe(),W(o,1,1,()=>{o=null}),Ee()),s[10].type==="triangle"?h?c&2&&I(h,1):(h=n_(),h.c(),I(h,1),h.m(n.parentNode,n)):h&&(Oe(),W(h,1,1,()=>{h=null}),Ee()),s[10].type==="rectangle"?a?c&2&&I(a,1):(a=i_(),a.c(),I(a,1),a.m(i.parentNode,i)):a&&(Oe(),W(a,1,1,()=>{a=null}),Ee())},i(s){r||(I(o),I(h),I(a),r=!0)},o(s){W(o),W(h),W(a),r=!1},d(s){s&&(j(e),j(n),j(i)),o&&o.d(s),h&&h.d(s),a&&a.d(s)}}}function XL(t){let e,n,i;return n=new ke({props:{icon:"streamline:hand-held-tablet-drawing"}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ue(n,e,null),i=!0},p:ve,i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){W(n.$$.fragment,r),i=!1},d(r){r&&j(e),fe(n)}}}function $L(t){let e,n=t[10].thumbnail&&r_(t);return{c(){e=E("div"),n&&n.c(),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(i,r){U(i,e,r),n&&n.m(e,null)},p(i,r){i[10].thumbnail?n?n.p(i,r):(n=r_(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:ve,o:ve,d(i){i&&j(e),n&&n.d()}}}function GL(t){let e,n=t[10].text+"",i;return{c(){e=E("div"),i=Te(n),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center truncate ")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&2&&n!==(n=r[10].text+"")&&Ve(i,n)},i:ve,o:ve,d(r){r&&j(e)}}}function qL(t){let e,n,i;return{c(){e=E("div"),n=E("img"),Ze(n.src,i=t[10].convert.url)||S(n,"src",i),S(n,"class","object-contain"),S(n,"alt",""),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),k(e,n)},p(r,o){o&2&&!Ze(n.src,i=r[10].convert.url)&&S(n,"src",i)},i:ve,o:ve,d(r){r&&j(e)}}}function t_(t){let e,n,i;return n=new ke({props:{icon:"material-symbols:circle-outline"}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ue(n,e,null),i=!0},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){W(n.$$.fragment,r),i=!1},d(r){r&&j(e),fe(n)}}}function n_(t){let e,n,i;return n=new ke({props:{icon:"uil:triangle"}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ue(n,e,null),i=!0},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){W(n.$$.fragment,r),i=!1},d(r){r&&j(e),fe(n)}}}function i_(t){let e,n,i;return n=new ke({props:{icon:"material-symbols:rectangle-outline"}}),{c(){e=E("div"),he(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){U(r,e,o),ue(n,e,null),i=!0},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){W(n.$$.fragment,r),i=!1},d(r){r&&j(e),fe(n)}}}function r_(t){let e,n;return{c(){e=E("img"),Ze(e.src,n=t[10].thumbnail.url)||S(e,"src",n),S(e,"class","object-contain"),S(e,"alt","")},m(i,r){U(i,e,r)},p(i,r){r&2&&!Ze(e.src,n=i[10].thumbnail.url)&&S(e,"src",n)},d(i){i&&j(e)}}}function s_(t,e){let n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v=ve,_,b,y;const C=[qL,GL,$L,XL,VL],w=[];function T(L,G){return L[10].objType==="clipart"?0:L[10].objType==="text"?1:L[10].objType==="upload"?2:L[10].type==="path"?3:L[10].objType==="shape"?4:-1}~(i=T(e))&&(r=w[i]=C[i](e)),a=new ke({props:{icon:"fluent:select-object-20-filled",class:"pointer-events-none",height:"30"}});function O(){return e[8](e[10])}f=new ke({props:{icon:"mi:select",class:"pointer-events-none",height:"30"}}),d=new ke({props:{icon:"mi:delete",class:"pointer-events-none",height:"30"}});function A(){return e[9](e[10])}return{key:t,first:null,c(){n=E("div"),r&&r.c(),o=V(),h=E("button"),he(a.$$.fragment),s=V(),c=E("div"),he(f.$$.fragment),l=V(),u=E("button"),he(d.$$.fragment),p=V(),S(h,"class","select-button"),S(c,"class","move-button"),S(u,"class","delete-button"),S(n,"class",m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"),this.first=n},m(L,G){U(L,n,G),~i&&w[i].m(n,null),k(n,o),k(n,h),ue(a,h,null),k(n,s),k(n,c),ue(f,c,null),k(n,l),k(n,u),ue(d,u,null),k(n,p),_=!0,b||(y=[ne(h,"click",O),ne(u,"click",A)],b=!0)},p(L,G){e=L;let Y=i;i=T(e),i===Y?~i&&w[i].p(e,G):(r&&(Oe(),W(w[Y],1,1,()=>{w[Y]=null}),Ee()),~i?(r=w[i],r?r.p(e,G):(r=w[i]=C[i](e),r.c()),I(r,1),r.m(n,o)):r=null),(!_||G&3&&m!==(m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"))&&S(n,"class",m)},r(){g=n.getBoundingClientRect()},f(){p1(n),v()},a(){v(),v=d1(n,g,PF,{duration:Xf})},i(L){_||(I(r),I(a.$$.fragment,L),I(f.$$.fragment,L),I(d.$$.fragment,L),_=!0)},o(L){W(r),W(a.$$.fragment,L),W(f.$$.fragment,L),W(d.$$.fragment,L),_=!1},d(L){L&&j(n),~i&&w[i].d(),fe(a),fe(f),fe(d),b=!1,We(y)}}}function KL(t){var r;let e,n,i=((r=t[1])==null?void 0:r.length)&&e_(t);return{c(){i&&i.c(),e=et()},m(o,h){i&&i.m(o,h),U(o,e,h),n=!0},p(o,[h]){var a;(a=o[1])!=null&&a.length?i?(i.p(o,h),h&2&&I(i,1)):(i=e_(o),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(o){n||(I(i),n=!0)},o(o){W(i),n=!1},d(o){o&&j(e),i&&i.d(o)}}}const Xf=300;function JL(t,e,n){let i,r,o;Ne(t,wy,d=>n(6,r=d)),Ne(t,Qi,d=>n(7,o=d));let h="";function a(d){n(1,i=d.detail.items)}function s(d){R1(d.detail.items.reverse())}function c(d){N1(d)}function f(d){j1(d)}Yi(()=>{HL(".move-button")});const l=d=>c(d),u=d=>f(d);return t.$$.update=()=>{t.$$.dirty&128&&(o?n(0,h=o[0].id):n(0,h="")),t.$$.dirty&64&&n(1,i=r.reverse())},[h,i,a,s,c,f,r,o,l,u]}class ZL extends Ge{constructor(e){super(),$e(this,e,JL,KL,Xe,{})}}function o_(t,e,n){const i=t.slice();return i[18]=e[n],i[19]=e,i[20]=n,i}function a_(t,e,n){const i=t.slice();return i[21]=e[n],i}function l_(t,e,n){const i=t.slice();return i[24]=e[n],i}function c_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;h=new ke({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let _=Le(t[2]),b=[];for(let C=0;C<_.length;C+=1)b[C]=m_(o_(t,_,C));const y=C=>W(b[C],1,1,()=>{b[C]=null});return{c(){e=E("div"),n=E("div"),i=E("h2"),r=Te(`주문하기\r
        `),o=E("button"),he(h.$$.fragment),a=V(),s=E("div");for(let C=0;C<b.length;C+=1)b[C].c();c=V(),f=E("div"),l=E("button"),l.textContent="주문하기",u=V(),d=E("button"),d.textContent="닫기",S(o,"class","absolute right-2"),S(o,"type","button"),S(i,"class","primary-bg rounded font-semibold p-3 text-center relative items-center flex w-full border-b"),S(l,"type","button"),S(l,"class","btn md:btn-lg primary-btn"),S(d,"type","button"),S(d,"class","btn md:btn-lg secondary-btn"),S(f,"class","p-3 flex justify-center gap-2"),S(s,"class","grow overflow-y-hidden h-full flex flex-col mt-3 gap-3"),S(n,"class","max-h-full w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-4668qx")},m(C,w){U(C,e,w),k(e,n),k(n,i),k(i,r),k(i,o),ue(h,o,null),k(n,a),k(n,s);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(s,null);k(s,c),k(s,f),k(f,l),k(f,u),k(f,d),m=!0,g||(v=[ne(o,"click",Wn),ne(l,"click",t[16]),ne(d,"click",Wn),ne(e,"introstart",t[9]),ne(e,"outroend",t[10])],g=!0)},p(C,w){if(w&252){_=Le(C[2]);let T;for(T=0;T<_.length;T+=1){const O=o_(C,_,T);b[T]?(b[T].p(O,w),I(b[T],1)):(b[T]=m_(O),b[T].c(),I(b[T],1),b[T].m(s,c))}for(Oe(),T=_.length;T<b.length;T+=1)y(T);Ee()}},i(C){if(!m){I(h.$$.fragment,C);for(let w=0;w<_.length;w+=1)I(b[w]);C&&Vt(()=>{m&&(p||(p=Qt(e,dr,{y:50},!0)),p.run(1))}),m=!0}},o(C){W(h.$$.fragment,C),b=b.filter(Boolean);for(let w=0;w<b.length;w+=1)W(b[w]);C&&(p||(p=Qt(e,dr,{y:50},!1)),p.run(0)),m=!1},d(C){C&&j(e),fe(h),Ft(b,C),C&&p&&p.end(),g=!1,We(v)}}}function u_(t){let e,n,i;return{c(){e=E("img"),Ze(e.src,n=t[24].url)||S(e,"src",n),S(e,"alt",i=t[18].product.productName),S(e,"class","max-w-16 md:max-w-24 max-h-16 md:max-h-24 object-contain border rounded")},m(r,o){U(r,e,o)},p(r,o){o&4&&!Ze(e.src,n=r[24].url)&&S(e,"src",n),o&4&&i!==(i=r[18].product.productName)&&S(e,"alt",i)},d(r){r&&j(e)}}}function f_(t){let e=t[18].currentOption.optionValue1+"",n;return{c(){n=Te(e)},m(i,r){U(i,n,r)},p(i,r){r&4&&e!==(e=i[18].currentOption.optionValue1+"")&&Ve(n,e)},d(i){i&&j(n)}}}function h_(t){let e,n=t[18].currentOption.optionValue2+"",i;return{c(){e=Te("/ "),i=Te(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&4&&n!==(n=r[18].currentOption.optionValue2+"")&&Ve(i,n)},d(r){r&&(j(e),j(i))}}}function d_(t){let e,n=t[18].currentOption.optionValue3+"",i;return{c(){e=Te("/ "),i=Te(n)},m(r,o){U(r,e,o),U(r,i,o)},p(r,o){o&4&&n!==(n=r[18].currentOption.optionValue3+"")&&Ve(i,n)},d(r){r&&(j(e),j(i))}}}function QL(t){let e,n,i;function r(){return t[11](t[20])}return{c(){e=E("button"),e.textContent="편집하기",S(e,"type","button"),S(e,"class","btn primary-btn")},m(o,h){U(o,e,h),n||(i=ne(e,"click",r),n=!0)},p(o,h){t=o},d(o){o&&j(e),n=!1,i()}}}function eN(t){let e;return{c(){e=E("button"),e.textContent="편집중",S(e,"type","button"),S(e,"class","btn secondary-btn")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function p_(t){let e,n=Le(t[18].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=g_(a_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex items-center gap-2 max-w-full overflow-x-auto")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&4){n=Le(r[18].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=a_(r,n,h);i[h]?i[h].p(a,o):(i[h]=g_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function g_(t){let e,n;return{c(){e=E("img"),Ze(e.src,n=t[21].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","object-contain max-w-16 max-h-16 md:max-w-24 md:max-h-24 rounded border")},m(i,r){U(i,e,r)},p(i,r){r&4&&!Ze(e.src,n=i[21].url)&&S(e,"src",n)},d(i){i&&j(e)}}}function m_(t){var $;let e,n,i,r,o,h,a,s=t[18].product.productName+"",c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,L,G,Y,te,q,N,B,Q=Le(t[18].product.images),ee=[];for(let se=0;se<Q.length;se+=1)ee[se]=u_(l_(t,Q,se));let x=t[18].currentOption.optionValue1&&f_(t),P=t[18].currentOption.optionValue2&&h_(t),R=t[18].currentOption.optionValue3&&d_(t);function F(se,pe){return se[20]===se[3]?eN:QL}let K=F(t),M=K(t);function D(){return t[12](t[20])}function H(){t[13].call(w,t[19],t[20])}function J(){return t[14](t[20])}Y=new ke({props:{icon:"mi:delete",height:15}});function ie(){return t[15](t[20])}let Z=(($=t[18].thumbnails)==null?void 0:$.length)&&p_(t);return{c(){e=E("div"),n=E("div"),i=E("div"),r=E("div");for(let se=0;se<ee.length;se+=1)ee[se].c();o=V(),h=E("div"),a=E("h1"),c=Te(s),f=V(),l=E("h3"),x&&x.c(),u=V(),P&&P.c(),d=V(),R&&R.c(),p=V(),m=E("div"),g=E("div"),M.c(),v=V(),_=E("div"),b=E("div"),y=E("button"),y.textContent="-",C=V(),w=E("input"),T=V(),O=E("button"),O.textContent="+",A=V(),L=E("div"),G=E("button"),he(Y.$$.fragment),te=V(),Z&&Z.c(),S(r,"class","flex"),S(a,"class","text-sm"),S(l,"class","text-xs"),S(h,"class","flex flex-col justify-center grow gap-1"),S(y,"type","button"),S(y,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(w,"type","text"),S(w,"class","border w-12 input-sm rounded-none"),S(O,"type","button"),S(O,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(b,"class","flex"),S(G,"type","button"),S(G,"class","btn secondary-btn"),S(m,"class","flex gap-2 items-center"),S(i,"class","flex gap-3 flex-col sm:flex-row"),S(n,"class","grow flex flex-col gap-3 justify-center w-full"),S(e,"class","flex justify-between items-center border-b p-2")},m(se,pe){U(se,e,pe),k(e,n),k(n,i),k(i,r);for(let z=0;z<ee.length;z+=1)ee[z]&&ee[z].m(r,null);k(i,o),k(i,h),k(h,a),k(a,c),k(h,f),k(h,l),x&&x.m(l,null),k(l,u),P&&P.m(l,null),k(l,d),R&&R.m(l,null),k(i,p),k(i,m),k(m,g),M.m(g,null),k(m,v),k(m,_),k(_,b),k(b,y),k(b,C),k(b,w),Fe(w,t[18].count),k(b,T),k(b,O),k(m,A),k(m,L),k(L,G),ue(Y,G,null),k(n,te),Z&&Z.m(n,null),q=!0,N||(B=[ne(y,"click",D),ne(w,"input",H),ne(O,"click",J),ne(G,"click",ie)],N=!0)},p(se,pe){var z;if(t=se,pe&4){Q=Le(t[18].product.images);let X;for(X=0;X<Q.length;X+=1){const oe=l_(t,Q,X);ee[X]?ee[X].p(oe,pe):(ee[X]=u_(oe),ee[X].c(),ee[X].m(r,null))}for(;X<ee.length;X+=1)ee[X].d(1);ee.length=Q.length}(!q||pe&4)&&s!==(s=t[18].product.productName+"")&&Ve(c,s),t[18].currentOption.optionValue1?x?x.p(t,pe):(x=f_(t),x.c(),x.m(l,u)):x&&(x.d(1),x=null),t[18].currentOption.optionValue2?P?P.p(t,pe):(P=h_(t),P.c(),P.m(l,d)):P&&(P.d(1),P=null),t[18].currentOption.optionValue3?R?R.p(t,pe):(R=d_(t),R.c(),R.m(l,null)):R&&(R.d(1),R=null),K===(K=F(t))&&M?M.p(t,pe):(M.d(1),M=K(t),M&&(M.c(),M.m(g,null))),pe&4&&w.value!==t[18].count&&Fe(w,t[18].count),(z=t[18].thumbnails)!=null&&z.length?Z?Z.p(t,pe):(Z=p_(t),Z.c(),Z.m(n,null)):Z&&(Z.d(1),Z=null)},i(se){q||(I(Y.$$.fragment,se),q=!0)},o(se){W(Y.$$.fragment,se),q=!1},d(se){se&&j(e),Ft(ee,se),x&&x.d(),P&&P.d(),R&&R.d(),M.d(),fe(Y),Z&&Z.d(),N=!1,We(B)}}}function tN(t){let e,n,i=t[0]&&c_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&I(i,1)):(i=c_(r),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(r){n||(I(i),n=!0)},o(r){W(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function nN(t,e,n){let i,r;Ne(t,li,y=>n(2,i=y)),Ne(t,Po,y=>n(3,r=y));let{isOpen:o}=e,{changeEditorDataIndex:h}=e,{sendOrder:a}=e;Yt(),Yi(async()=>{});function s(y){i[y].count>1&&ye(li,i[y].count--,i)}function c(y){ye(li,i[y].count++,i)}function f(y){ye(li,i=i.filter((C,w)=>y!=w),i)}function l(y){h(y),Wn()}function u(y){fr.call(this,t,y)}function d(y){fr.call(this,t,y)}const p=y=>l(y),m=y=>s(y);function g(y,C){y[C].count=this.value,li.set(i)}const v=y=>c(y),_=y=>f(y),b=()=>a();return t.$$set=y=>{"isOpen"in y&&n(0,o=y.isOpen),"changeEditorDataIndex"in y&&n(8,h=y.changeEditorDataIndex),"sendOrder"in y&&n(1,a=y.sendOrder)},[o,a,i,r,s,c,f,l,h,u,d,p,m,g,v,_,b]}class iN extends Ge{constructor(e){super(),$e(this,e,nN,tN,Xe,{isOpen:0,changeEditorDataIndex:8,sendOrder:1})}}function v_(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}function __(t,e,n){const i=t.slice();return i[12]=e[n],i}function y_(t,e,n){const i=t.slice();return i[12]=e[n],i}function b_(t,e,n){const i=t.slice();return i[18]=e[n],i}function w_(t){let e,n,i,r,o=Le(t[2]),h=[];for(let a=0;a<o.length;a+=1)h[a]=E_(v_(t,o,a));return{c(){e=E("div"),n=E("div"),i=E("h1"),i.innerHTML='제작상품 <span class="text-xs font-normal">(해당상품은 옵션별 수량으로 주문상품 수에 추가됩니다.)</span>',r=V();for(let a=0;a<h.length;a+=1)h[a].c();S(i,"class","p-5 bg-gray-50 font-semibold text-lg"),S(n,"class","border rounded relative flex flex-col divide-y"),S(e,"class","flex flex-col gap-3 my-2 bg-white")},m(a,s){U(a,e,s),k(e,n),k(n,i),k(n,r);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(n,null)},p(a,s){if(s&15){o=Le(a[2]);let c;for(c=0;c<o.length;c+=1){const f=v_(a,o,c);h[c]?h[c].p(f,s):(h[c]=E_(f),h[c].c(),h[c].m(n,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}},d(a){a&&j(e),Ft(h,a)}}}function C_(t){let e,n,i;function r(...o){return t[5](t[9],...o)}return{c(){e=E("input"),S(e,"type","checkbox"),S(e,"class","podiz-checkbox")},m(o,h){U(o,e,h),n||(i=ne(e,"change",r),n=!0)},p(o,h){t=o},d(o){o&&j(e),n=!1,i()}}}function rN(t){return{c:ve,m:ve,p:ve,d:ve}}function sN(t){var h;let e,n=t[11],i=((h=t[17].data)==null?void 0:h.thumbnails.length)&&S_(t);const r=()=>t[6](e,n),o=()=>t[6](null,n);return{c(){e=E("div"),i&&i.c(),S(e,"class","flex gap-2 overflow-x-auto")},m(a,s){U(a,e,s),i&&i.m(e,null),r()},p(a,s){var c;t=a,(c=t[17].data)!=null&&c.thumbnails.length?i?i.p(t,s):(i=S_(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),n!==t[11]&&(o(),n=t[11],r())},d(a){a&&j(e),i&&i.d(),o()}}}function S_(t){let e,n=Le(t[17].data.thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=T_(b_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Le(r[17].data.thumbnails);let h;for(h=0;h<n.length;h+=1){const a=b_(r,n,h);i[h]?i[h].p(a,o):(i[h]=T_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function T_(t){let e,n,i;return{c(){e=E("img"),Ze(e.src,n=t[18].url)||S(e,"src",n),S(e,"alt",i=t[18].alt),S(e,"class","max-h-20 max-w-xs border rounded cursor-pointer")},m(r,o){U(r,e,o)},p(r,o){o&4&&!Ze(e.src,n=r[18].url)&&S(e,"src",n),o&4&&i!==(i=r[18].alt)&&S(e,"alt",i)},d(r){r&&j(e)}}}function oN(t){let e;return{c(){e=E("div"),e.innerHTML='<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>',S(e,"class","flex items justify-center")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function aN(t){let e,n=Le(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=k_(__(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Le(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=__(r,n,h);i[h]?i[h].p(a,o):(i[h]=k_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function lN(t){let e,n=Le(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=O_(y_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);U(r,e,o)},p(r,o){if(o&4){n=Le(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=y_(r,n,h);i[h]?i[h].p(a,o):(i[h]=O_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function k_(t){let e=t[12].option_value+"",n,i,r=t[12].price.toLocaleString("ko-KR")+"",o,h;return{c(){n=Te(e),i=Te(" ("),o=Te(r),h=Te("원)  ")},m(a,s){U(a,n,s),U(a,i,s),U(a,o,s),U(a,h,s)},p(a,s){s&4&&e!==(e=a[12].option_value+"")&&Ve(n,e),s&4&&r!==(r=a[12].price.toLocaleString("ko-KR")+"")&&Ve(o,r)},d(a){a&&(j(n),j(i),j(o),j(h))}}}function O_(t){let e,n=t[12].price.toLocaleString("ko-KR")+"",i,r;return{c(){e=Te("("),i=Te(n),r=Te("원)  ")},m(o,h){U(o,e,h),U(o,i,h),U(o,r,h)},p(o,h){h&4&&n!==(n=o[12].price.toLocaleString("ko-KR")+"")&&Ve(i,n)},d(o){o&&(j(e),j(i),j(r))}}}function E_(t){let e,n,i,r,o,h,a,s=t[9].product_name+"",c,f,l,u,d,p,m,g,v,_=t[9].quantity+"",b,y,C,w,T,O,A=t[9].price.toLocaleString("ko-KR")+"",L,G,Y,te,q=t[0]==="cart"&&C_(t),N={ctx:t,current:null,token:null,hasCatch:!1,pending:oN,then:sN,catch:rN,value:17};Hs(r=t[9].editorData,N);function B(x,P){return x[0]==="orderend"?lN:aN}let Q=B(t),ee=Q(t);return{c(){e=E("div"),n=E("div"),q&&q.c(),i=V(),N.block.c(),o=V(),h=E("div"),a=E("h1"),c=Te(s),l=V(),u=E("div"),d=E("p"),ee.c(),p=V(),m=E("p"),g=Te("수량: "),v=E("span"),b=Te(_),y=Te("개"),C=V(),w=E("p"),T=Te("금액: "),O=E("span"),L=Te(A),G=Te("원"),te=V(),S(n,"class","flex w-full gap-2 items-center overflow-x-hidden"),S(a,"class","font-semibold"),S(h,"class",f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":"")),S(v,"class","font-semibold"),S(O,"class","font-semibold"),S(u,"class",Y="flex gap-5 "+(t[0]==="cart"?"pl-8":"")),S(e,"class","p-5")},m(x,P){U(x,e,P),k(e,n),q&&q.m(n,null),k(n,i),N.block.m(n,N.anchor=null),N.mount=()=>n,N.anchor=null,k(e,o),k(e,h),k(h,a),k(a,c),k(e,l),k(e,u),k(u,d),ee.m(d,null),k(u,p),k(u,m),k(m,g),k(m,v),k(v,b),k(m,y),k(u,C),k(u,w),k(w,T),k(w,O),k(O,L),k(w,G),k(e,te)},p(x,P){t=x,t[0]==="cart"?q?q.p(t,P):(q=C_(t),q.c(),q.m(n,i)):q&&(q.d(1),q=null),N.ctx=t,P&4&&r!==(r=t[9].editorData)&&Hs(r,N)||rh(N,t,P),P&4&&s!==(s=t[9].product_name+"")&&Ve(c,s),P&1&&f!==(f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":""))&&S(h,"class",f),Q===(Q=B(t))&&ee?ee.p(t,P):(ee.d(1),ee=Q(t),ee&&(ee.c(),ee.m(d,null))),P&4&&_!==(_=t[9].quantity+"")&&Ve(b,_),P&4&&A!==(A=t[9].price.toLocaleString("ko-KR")+"")&&Ve(L,A),P&1&&Y!==(Y="flex gap-5 "+(t[0]==="cart"?"pl-8":""))&&S(u,"class",Y)},d(x){x&&j(e),q&&q.d(),N.block.d(),N.token=null,N=null,ee.d()}}}function cN(t){var i;let e,n=((i=t[2])==null?void 0:i.length)&&w_(t);return{c(){n&&n.c(),e=et()},m(r,o){n&&n.m(r,o),U(r,e,o)},p(r,[o]){var h;(h=r[2])!=null&&h.length?n?n.p(r,o):(n=w_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ve,o:ve,d(r){r&&j(e),n&&n.d(r)}}}function uN(t,e,n){let{previews:i}=e,{mode:r="cart"}=e,o=[],h=[];console.log({previews:i});function a(u,d){i.items.forEach(p=>{p.uuid===d&&(p.element.querySelector("input[type=checkbox]").checked=u)})}const s=u=>{var d;return(d=u.additional_option_values)!=null&&d.length?u.additional_option_values.map(({custom_option:p,quantity:m})=>{const g=p.find(({key:_})=>_==="item_option_add").value,v=u.option_value[0];return{uuid:g,option_value:v,quantity:m,price:u.discount_price}}):[]},c=u=>{const d={};return u.forEach(p=>{s(p).forEach(g=>{const{uuid:v}=g;if(!d[v]){const _=zy(v);d[v]={uuid:v,editorData:_,items:[]}}d[v].items.push({option_value:g.option_value.replace(/\[|\]|\([+-]?\d{1,3}(,\d{3})*\)/g,""),quantity:g.quantity,price:g.price}),d[v].quantity=g.quantity,d[v].price=d[v].items.reduce((_,b)=>_+b.quantity*b.price,0),d[v].product_name=p.product_name})}),Object.values(d)};Yi(async()=>{var d;(d=i.elements)!=null&&d.length&&i.elements.forEach(p=>{p.style.display="none"});const u=await Mx();console.log({cafe24CartItems:u}),n(2,o=c(u.items)),console.log({cartItems:o}),document.getElementById("product_select_all")&&document.getElementById("product_select_all").addEventListener("click",function(){document.querySelectorAll(".podiz-checkbox").forEach(function(p){p.checked=!p.checked})})});const f=(u,d)=>a(d.target.checked,u.uuid);function l(u,d){it[u?"unshift":"push"](()=>{h[d]=u,n(1,h)})}return t.$$set=u=>{"previews"in u&&n(4,i=u.previews),"mode"in u&&n(0,r=u.mode)},t.$$.update=()=>{t.$$.dirty&2&&(h==null?void 0:h.length)>0&&(console.log({gallerys:h}),h.forEach(u=>{new z0(u,{toolbar:!1,title:!1,navbar:2})}))},[r,h,o,a,i,f,l]}class fN extends Ge{constructor(e){super(),$e(this,e,uN,cN,Xe,{previews:4,mode:0})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ow;function we(){return ow.apply(null,arguments)}function hN(t){ow=t}function ei(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function zr(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ad(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(rt(t,e))return!1;return!0}function mn(t){return t===void 0}function Ui(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Da(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function aw(t,e){var n=[],i,r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function sr(t,e){for(var n in e)rt(e,n)&&(t[n]=e[n]);return rt(e,"toString")&&(t.toString=e.toString),rt(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Ci(t,e,n,i){return Aw(t,e,n,i,!0).utc()}function dN(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ye(t){return t._pf==null&&(t._pf=dN()),t._pf}var $f;Array.prototype.some?$f=Array.prototype.some:$f=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function ld(t){var e=null,n=!1,i=t._d&&!isNaN(t._d.getTime());if(i&&(e=Ye(t),n=$f.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i;return t._isValid}function Mc(t){var e=Ci(NaN);return t!=null?sr(Ye(e),t):Ye(e).userInvalidated=!0,e}var x_=we.momentProperties=[],Uu=!1;function cd(t,e){var n,i,r,o=x_.length;if(mn(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),mn(e._i)||(t._i=e._i),mn(e._f)||(t._f=e._f),mn(e._l)||(t._l=e._l),mn(e._strict)||(t._strict=e._strict),mn(e._tzm)||(t._tzm=e._tzm),mn(e._isUTC)||(t._isUTC=e._isUTC),mn(e._offset)||(t._offset=e._offset),mn(e._pf)||(t._pf=Ye(e)),mn(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)i=x_[n],r=e[i],mn(r)||(t[i]=r);return t}function Aa(t){cd(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Uu===!1&&(Uu=!0,we.updateOffset(this),Uu=!1)}function ti(t){return t instanceof Aa||t!=null&&t._isAMomentObject!=null}function lw(t){we.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function zn(t,e){var n=!0;return sr(function(){if(we.deprecationHandler!=null&&we.deprecationHandler(null,t),n){var i=[],r,o,h,a=arguments.length;for(o=0;o<a;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(h in arguments[0])rt(arguments[0],h)&&(r+=h+": "+arguments[0][h]+", ");r=r.slice(0,-2)}else r=arguments[o];i.push(r)}lw(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var D_={};function cw(t,e){we.deprecationHandler!=null&&we.deprecationHandler(t,e),D_[t]||(lw(e),D_[t]=!0)}we.suppressDeprecationWarnings=!1;we.deprecationHandler=null;function Si(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function pN(t){var e,n;for(n in t)rt(t,n)&&(e=t[n],Si(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Gf(t,e){var n=sr({},t),i;for(i in e)rt(e,i)&&(zr(t[i])&&zr(e[i])?(n[i]={},sr(n[i],t[i]),sr(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)rt(t,i)&&!rt(e,i)&&zr(t[i])&&(n[i]=sr({},n[i]));return n}function ud(t){t!=null&&this.set(t)}var qf;Object.keys?qf=Object.keys:qf=function(t){var e,n=[];for(e in t)rt(t,e)&&n.push(e);return n};var gN={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function mN(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return Si(i)?i.call(e,n):i}function bi(t,e,n){var i=""+Math.abs(t),r=e-i.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var fd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,rl=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yu={},Ys={};function Ae(t,e,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),t&&(Ys[t]=r),e&&(Ys[e[0]]=function(){return bi(r.apply(this,arguments),e[1],e[2])}),n&&(Ys[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function vN(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function _N(t){var e=t.match(fd),n,i;for(n=0,i=e.length;n<i;n++)Ys[e[n]]?e[n]=Ys[e[n]]:e[n]=vN(e[n]);return function(r){var o="",h;for(h=0;h<i;h++)o+=Si(e[h])?e[h].call(r,t):e[h];return o}}function wl(t,e){return t.isValid()?(e=uw(e,t.localeData()),Yu[e]=Yu[e]||_N(e),Yu[e](t)):t.localeData().invalidDate()}function uw(t,e){var n=5;function i(r){return e.longDateFormat(r)||r}for(rl.lastIndex=0;n>=0&&rl.test(t);)t=t.replace(rl,i),rl.lastIndex=0,n-=1;return t}var yN={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function bN(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(fd).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var wN="Invalid date";function CN(){return this._invalidDate}var SN="%d",TN=/\d{1,2}/;function kN(t){return this._ordinal.replace("%d",t)}var ON={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function EN(t,e,n,i){var r=this._relativeTime[n];return Si(r)?r(t,e,n,i):r.replace(/%d/i,t)}function xN(t,e){var n=this._relativeTime[t>0?"future":"past"];return Si(n)?n(e):n.replace(/%s/i,e)}var A_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Hn(t){return typeof t=="string"?A_[t]||A_[t.toLowerCase()]:void 0}function hd(t){var e={},n,i;for(i in t)rt(t,i)&&(n=Hn(i),n&&(e[n]=t[i]));return e}var DN={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function AN(t){var e=[],n;for(n in t)rt(t,n)&&e.push({unit:n,priority:DN[n]});return e.sort(function(i,r){return i.priority-r.priority}),e}var fw=/\d/,An=/\d\d/,hw=/\d{3}/,dd=/\d{4}/,Rc=/[+-]?\d{6}/,_t=/\d\d?/,dw=/\d\d\d\d?/,pw=/\d\d\d\d\d\d?/,Ic=/\d{1,3}/,pd=/\d{1,4}/,Fc=/[+-]?\d{1,6}/,mo=/\d+/,Lc=/[+-]?\d+/,PN=/Z|[+-]\d\d:?\d\d/gi,Nc=/Z|[+-]\d\d(?::?\d\d)?/gi,MN=/[+-]?\d+(\.\d{1,3})?/,Pa=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,vo=/^[1-9]\d?/,gd=/^([1-9]\d|\d)/,Ql;Ql={};function Ce(t,e,n){Ql[t]=Si(e)?e:function(i,r){return i&&n?n:e}}function RN(t,e){return rt(Ql,t)?Ql[t](e._strict,e._locale):new RegExp(IN(t))}function IN(t){return Li(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,r,o){return n||i||r||o}))}function Li(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ln(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Je(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Ln(e)),n}var Kf={};function lt(t,e){var n,i=e,r;for(typeof t=="string"&&(t=[t]),Ui(e)&&(i=function(o,h){h[e]=Je(o)}),r=t.length,n=0;n<r;n++)Kf[t[n]]=i}function Ma(t,e){lt(t,function(n,i,r,o){r._w=r._w||{},e(n,r._w,r,o)})}function FN(t,e,n){e!=null&&rt(Kf,t)&&Kf[t](e,n._a,n,t)}function jc(t){return t%4===0&&t%100!==0||t%400===0}var cn=0,Mi=1,ui=2,Ht=3,Zn=4,Ri=5,Rr=6,LN=7,NN=8;Ae("Y",0,0,function(){var t=this.year();return t<=9999?bi(t,4):"+"+t});Ae(0,["YY",2],0,function(){return this.year()%100});Ae(0,["YYYY",4],0,"year");Ae(0,["YYYYY",5],0,"year");Ae(0,["YYYYYY",6,!0],0,"year");Ce("Y",Lc);Ce("YY",_t,An);Ce("YYYY",pd,dd);Ce("YYYYY",Fc,Rc);Ce("YYYYYY",Fc,Rc);lt(["YYYYY","YYYYYY"],cn);lt("YYYY",function(t,e){e[cn]=t.length===2?we.parseTwoDigitYear(t):Je(t)});lt("YY",function(t,e){e[cn]=we.parseTwoDigitYear(t)});lt("Y",function(t,e){e[cn]=parseInt(t,10)});function Go(t){return jc(t)?366:365}we.parseTwoDigitYear=function(t){return Je(t)+(Je(t)>68?1900:2e3)};var gw=_o("FullYear",!0);function jN(){return jc(this.year())}function _o(t,e){return function(n){return n!=null?(mw(this,t,n),we.updateOffset(this,e),this):ca(this,t)}}function ca(t,e){if(!t.isValid())return NaN;var n=t._d,i=t._isUTC;switch(e){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function mw(t,e,n){var i,r,o,h,a;if(!(!t.isValid()||isNaN(n))){switch(i=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,h=t.month(),a=t.date(),a=a===29&&h===1&&!jc(o)?28:a,r?i.setUTCFullYear(o,h,a):i.setFullYear(o,h,a)}}function BN(t){return t=Hn(t),Si(this[t])?this[t]():this}function UN(t,e){if(typeof t=="object"){t=hd(t);var n=AN(t),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](t[n[i].unit])}else if(t=Hn(t),Si(this[t]))return this[t](e);return this}function YN(t,e){return(t%e+e)%e}var It;Array.prototype.indexOf?It=Array.prototype.indexOf:It=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function md(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=YN(e,12);return t+=(e-n)/12,n===1?jc(t)?29:28:31-n%7%2}Ae("M",["MM",2],"Mo",function(){return this.month()+1});Ae("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Ae("MMMM",0,0,function(t){return this.localeData().months(this,t)});Ce("M",_t,vo);Ce("MM",_t,An);Ce("MMM",function(t,e){return e.monthsShortRegex(t)});Ce("MMMM",function(t,e){return e.monthsRegex(t)});lt(["M","MM"],function(t,e){e[Mi]=Je(t)-1});lt(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);r!=null?e[Mi]=r:Ye(n).invalidMonth=t});var WN="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vw="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_w=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,zN=Pa,HN=Pa;function VN(t,e){return t?ei(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||_w).test(e)?"format":"standalone"][t.month()]:ei(this._months)?this._months:this._months.standalone}function XN(t,e){return t?ei(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[_w.test(e)?"format":"standalone"][t.month()]:ei(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function $N(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=Ci([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(r=It.call(this._shortMonthsParse,h),r!==-1?r:null):(r=It.call(this._longMonthsParse,h),r!==-1?r:null):e==="MMM"?(r=It.call(this._shortMonthsParse,h),r!==-1?r:(r=It.call(this._longMonthsParse,h),r!==-1?r:null)):(r=It.call(this._longMonthsParse,h),r!==-1?r:(r=It.call(this._shortMonthsParse,h),r!==-1?r:null))}function GN(t,e,n){var i,r,o;if(this._monthsParseExact)return $N.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Ci([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function yw(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Je(e);else if(e=t.localeData().monthsParse(e),!Ui(e))return t}var n=e,i=t.date();return i=i<29?i:Math.min(i,md(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,i):t._d.setMonth(n,i),t}function bw(t){return t!=null?(yw(this,t),we.updateOffset(this,!0),this):ca(this,"Month")}function qN(){return md(this.year(),this.month())}function KN(t){return this._monthsParseExact?(rt(this,"_monthsRegex")||ww.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(rt(this,"_monthsShortRegex")||(this._monthsShortRegex=zN),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function JN(t){return this._monthsParseExact?(rt(this,"_monthsRegex")||ww.call(this),t?this._monthsStrictRegex:this._monthsRegex):(rt(this,"_monthsRegex")||(this._monthsRegex=HN),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ww(){function t(s,c){return c.length-s.length}var e=[],n=[],i=[],r,o,h,a;for(r=0;r<12;r++)o=Ci([2e3,r]),h=Li(this.monthsShort(o,"")),a=Li(this.months(o,"")),e.push(h),n.push(a),i.push(a),i.push(h);e.sort(t),n.sort(t),i.sort(t),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ZN(t,e,n,i,r,o,h){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,h),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,h),a}function ua(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ec(t,e,n){var i=7+e-n,r=(7+ua(t,0,i).getUTCDay()-e)%7;return-r+i-1}function Cw(t,e,n,i,r){var o=(7+n-i)%7,h=ec(t,i,r),a=1+7*(e-1)+o+h,s,c;return a<=0?(s=t-1,c=Go(s)+a):a>Go(t)?(s=t+1,c=a-Go(t)):(s=t,c=a),{year:s,dayOfYear:c}}function fa(t,e,n){var i=ec(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,o,h;return r<1?(h=t.year()-1,o=r+Ni(h,e,n)):r>Ni(t.year(),e,n)?(o=r-Ni(t.year(),e,n),h=t.year()+1):(h=t.year(),o=r),{week:o,year:h}}function Ni(t,e,n){var i=ec(t,e,n),r=ec(t+1,e,n);return(Go(t)-i+r)/7}Ae("w",["ww",2],"wo","week");Ae("W",["WW",2],"Wo","isoWeek");Ce("w",_t,vo);Ce("ww",_t,An);Ce("W",_t,vo);Ce("WW",_t,An);Ma(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=Je(t)});function QN(t){return fa(t,this._week.dow,this._week.doy).week}var ej={dow:0,doy:6};function tj(){return this._week.dow}function nj(){return this._week.doy}function ij(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function rj(t){var e=fa(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Ae("d",0,"do","day");Ae("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Ae("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Ae("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Ae("e",0,0,"weekday");Ae("E",0,0,"isoWeekday");Ce("d",_t);Ce("e",_t);Ce("E",_t);Ce("dd",function(t,e){return e.weekdaysMinRegex(t)});Ce("ddd",function(t,e){return e.weekdaysShortRegex(t)});Ce("dddd",function(t,e){return e.weekdaysRegex(t)});Ma(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);r!=null?e.d=r:Ye(n).invalidWeekday=t});Ma(["d","e","E"],function(t,e,n,i){e[i]=Je(t)});function sj(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function oj(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function vd(t,e){return t.slice(e,7).concat(t.slice(0,e))}var aj="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Sw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),lj="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),cj=Pa,uj=Pa,fj=Pa;function hj(t,e){var n=ei(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?vd(n,this._week.dow):t?n[t.day()]:n}function dj(t){return t===!0?vd(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function pj(t){return t===!0?vd(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function gj(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=Ci([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(r=It.call(this._weekdaysParse,h),r!==-1?r:null):e==="ddd"?(r=It.call(this._shortWeekdaysParse,h),r!==-1?r:null):(r=It.call(this._minWeekdaysParse,h),r!==-1?r:null):e==="dddd"?(r=It.call(this._weekdaysParse,h),r!==-1||(r=It.call(this._shortWeekdaysParse,h),r!==-1)?r:(r=It.call(this._minWeekdaysParse,h),r!==-1?r:null)):e==="ddd"?(r=It.call(this._shortWeekdaysParse,h),r!==-1||(r=It.call(this._weekdaysParse,h),r!==-1)?r:(r=It.call(this._minWeekdaysParse,h),r!==-1?r:null)):(r=It.call(this._minWeekdaysParse,h),r!==-1||(r=It.call(this._weekdaysParse,h),r!==-1)?r:(r=It.call(this._shortWeekdaysParse,h),r!==-1?r:null))}function mj(t,e,n){var i,r,o;if(this._weekdaysParseExact)return gj.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=Ci([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function vj(t){if(!this.isValid())return t!=null?this:NaN;var e=ca(this,"Day");return t!=null?(t=sj(t,this.localeData()),this.add(t-e,"d")):e}function _j(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function yj(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=oj(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function bj(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||_d.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(rt(this,"_weekdaysRegex")||(this._weekdaysRegex=cj),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function wj(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||_d.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(rt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=uj),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Cj(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||_d.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(rt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=fj),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _d(){function t(f,l){return l.length-f.length}var e=[],n=[],i=[],r=[],o,h,a,s,c;for(o=0;o<7;o++)h=Ci([2e3,1]).day(o),a=Li(this.weekdaysMin(h,"")),s=Li(this.weekdaysShort(h,"")),c=Li(this.weekdays(h,"")),e.push(a),n.push(s),i.push(c),r.push(a),r.push(s),r.push(c);e.sort(t),n.sort(t),i.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function yd(){return this.hours()%12||12}function Sj(){return this.hours()||24}Ae("H",["HH",2],0,"hour");Ae("h",["hh",2],0,yd);Ae("k",["kk",2],0,Sj);Ae("hmm",0,0,function(){return""+yd.apply(this)+bi(this.minutes(),2)});Ae("hmmss",0,0,function(){return""+yd.apply(this)+bi(this.minutes(),2)+bi(this.seconds(),2)});Ae("Hmm",0,0,function(){return""+this.hours()+bi(this.minutes(),2)});Ae("Hmmss",0,0,function(){return""+this.hours()+bi(this.minutes(),2)+bi(this.seconds(),2)});function Tw(t,e){Ae(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Tw("a",!0);Tw("A",!1);function kw(t,e){return e._meridiemParse}Ce("a",kw);Ce("A",kw);Ce("H",_t,gd);Ce("h",_t,vo);Ce("k",_t,vo);Ce("HH",_t,An);Ce("hh",_t,An);Ce("kk",_t,An);Ce("hmm",dw);Ce("hmmss",pw);Ce("Hmm",dw);Ce("Hmmss",pw);lt(["H","HH"],Ht);lt(["k","kk"],function(t,e,n){var i=Je(t);e[Ht]=i===24?0:i});lt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});lt(["h","hh"],function(t,e,n){e[Ht]=Je(t),Ye(n).bigHour=!0});lt("hmm",function(t,e,n){var i=t.length-2;e[Ht]=Je(t.substr(0,i)),e[Zn]=Je(t.substr(i)),Ye(n).bigHour=!0});lt("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Ht]=Je(t.substr(0,i)),e[Zn]=Je(t.substr(i,2)),e[Ri]=Je(t.substr(r)),Ye(n).bigHour=!0});lt("Hmm",function(t,e,n){var i=t.length-2;e[Ht]=Je(t.substr(0,i)),e[Zn]=Je(t.substr(i))});lt("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Ht]=Je(t.substr(0,i)),e[Zn]=Je(t.substr(i,2)),e[Ri]=Je(t.substr(r))});function Tj(t){return(t+"").toLowerCase().charAt(0)==="p"}var kj=/[ap]\.?m?\.?/i,Oj=_o("Hours",!0);function Ej(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var Ow={calendar:gN,longDateFormat:yN,invalidDate:wN,ordinal:SN,dayOfMonthOrdinalParse:TN,relativeTime:ON,months:WN,monthsShort:vw,week:ej,weekdays:aj,weekdaysMin:lj,weekdaysShort:Sw,meridiemParse:kj},wt={},Do={},ha;function xj(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function P_(t){return t&&t.toLowerCase().replace("_","-")}function Dj(t){for(var e=0,n,i,r,o;e<t.length;){for(o=P_(t[e]).split("-"),n=o.length,i=P_(t[e+1]),i=i?i.split("-"):null;n>0;){if(r=Bc(o.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&xj(o,i)>=n-1)break;n--}e++}return ha}function Aj(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Bc(t){var e=null,n;if(wt[t]===void 0&&typeof Tl<"u"&&Tl&&Tl.exports&&Aj(t))try{e=ha._abbr,n=require,n("./locale/"+t),ur(e)}catch{wt[t]=null}return wt[t]}function ur(t,e){var n;return t&&(mn(e)?n=zi(t):n=bd(t,e),n?ha=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ha._abbr}function bd(t,e){if(e!==null){var n,i=Ow;if(e.abbr=t,wt[t]!=null)cw("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=wt[t]._config;else if(e.parentLocale!=null)if(wt[e.parentLocale]!=null)i=wt[e.parentLocale]._config;else if(n=Bc(e.parentLocale),n!=null)i=n._config;else return Do[e.parentLocale]||(Do[e.parentLocale]=[]),Do[e.parentLocale].push({name:t,config:e}),null;return wt[t]=new ud(Gf(i,e)),Do[t]&&Do[t].forEach(function(r){bd(r.name,r.config)}),ur(t),wt[t]}else return delete wt[t],null}function Pj(t,e){if(e!=null){var n,i,r=Ow;wt[t]!=null&&wt[t].parentLocale!=null?wt[t].set(Gf(wt[t]._config,e)):(i=Bc(t),i!=null&&(r=i._config),e=Gf(r,e),i==null&&(e.abbr=t),n=new ud(e),n.parentLocale=wt[t],wt[t]=n),ur(t)}else wt[t]!=null&&(wt[t].parentLocale!=null?(wt[t]=wt[t].parentLocale,t===ur()&&ur(t)):wt[t]!=null&&delete wt[t]);return wt[t]}function zi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ha;if(!ei(t)){if(e=Bc(t),e)return e;t=[t]}return Dj(t)}function Mj(){return qf(wt)}function wd(t){var e,n=t._a;return n&&Ye(t).overflow===-2&&(e=n[Mi]<0||n[Mi]>11?Mi:n[ui]<1||n[ui]>md(n[cn],n[Mi])?ui:n[Ht]<0||n[Ht]>24||n[Ht]===24&&(n[Zn]!==0||n[Ri]!==0||n[Rr]!==0)?Ht:n[Zn]<0||n[Zn]>59?Zn:n[Ri]<0||n[Ri]>59?Ri:n[Rr]<0||n[Rr]>999?Rr:-1,Ye(t)._overflowDayOfYear&&(e<cn||e>ui)&&(e=ui),Ye(t)._overflowWeeks&&e===-1&&(e=LN),Ye(t)._overflowWeekday&&e===-1&&(e=NN),Ye(t).overflow=e),t}var Rj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ij=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fj=/Z|[+-]\d\d(?::?\d\d)?/,sl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Wu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Lj=/^\/?Date\((-?\d+)/i,Nj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jj={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ew(t){var e,n,i=t._i,r=Rj.exec(i)||Ij.exec(i),o,h,a,s,c=sl.length,f=Wu.length;if(r){for(Ye(t).iso=!0,e=0,n=c;e<n;e++)if(sl[e][1].exec(r[1])){h=sl[e][0],o=sl[e][2]!==!1;break}if(h==null){t._isValid=!1;return}if(r[3]){for(e=0,n=f;e<n;e++)if(Wu[e][1].exec(r[3])){a=(r[2]||" ")+Wu[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(r[4])if(Fj.exec(r[4]))s="Z";else{t._isValid=!1;return}t._f=h+(a||"")+(s||""),Sd(t)}else t._isValid=!1}function Bj(t,e,n,i,r,o){var h=[Uj(t),vw.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&h.push(parseInt(o,10)),h}function Uj(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Yj(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Wj(t,e,n){if(t){var i=Sw.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return Ye(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function zj(t,e,n){if(t)return jj[t];if(e)return 0;var i=parseInt(n,10),r=i%100,o=(i-r)/100;return o*60+r}function xw(t){var e=Nj.exec(Yj(t._i)),n;if(e){if(n=Bj(e[4],e[3],e[2],e[5],e[6],e[7]),!Wj(e[1],n,t))return;t._a=n,t._tzm=zj(e[8],e[9],e[10]),t._d=ua.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Ye(t).rfc2822=!0}else t._isValid=!1}function Hj(t){var e=Lj.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Ew(t),t._isValid===!1)delete t._isValid;else return;if(xw(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:we.createFromInputFallback(t)}we.createFromInputFallback=zn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Cs(t,e,n){return t??e??n}function Vj(t){var e=new Date(we.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Cd(t){var e,n,i=[],r,o,h;if(!t._d){for(r=Vj(t),t._w&&t._a[ui]==null&&t._a[Mi]==null&&Xj(t),t._dayOfYear!=null&&(h=Cs(t._a[cn],r[cn]),(t._dayOfYear>Go(h)||t._dayOfYear===0)&&(Ye(t)._overflowDayOfYear=!0),n=ua(h,0,t._dayOfYear),t._a[Mi]=n.getUTCMonth(),t._a[ui]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ht]===24&&t._a[Zn]===0&&t._a[Ri]===0&&t._a[Rr]===0&&(t._nextDay=!0,t._a[Ht]=0),t._d=(t._useUTC?ua:ZN).apply(null,i),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ht]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(Ye(t).weekdayMismatch=!0)}}function Xj(t){var e,n,i,r,o,h,a,s,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,h=4,n=Cs(e.GG,t._a[cn],fa(vt(),1,4).year),i=Cs(e.W,1),r=Cs(e.E,1),(r<1||r>7)&&(s=!0)):(o=t._locale._week.dow,h=t._locale._week.doy,c=fa(vt(),o,h),n=Cs(e.gg,t._a[cn],c.year),i=Cs(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(s=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(s=!0)):r=o),i<1||i>Ni(n,o,h)?Ye(t)._overflowWeeks=!0:s!=null?Ye(t)._overflowWeekday=!0:(a=Cw(n,i,r,o,h),t._a[cn]=a.year,t._dayOfYear=a.dayOfYear)}we.ISO_8601=function(){};we.RFC_2822=function(){};function Sd(t){if(t._f===we.ISO_8601){Ew(t);return}if(t._f===we.RFC_2822){xw(t);return}t._a=[],Ye(t).empty=!0;var e=""+t._i,n,i,r,o,h,a=e.length,s=0,c,f;for(r=uw(t._f,t._locale).match(fd)||[],f=r.length,n=0;n<f;n++)o=r[n],i=(e.match(RN(o,t))||[])[0],i&&(h=e.substr(0,e.indexOf(i)),h.length>0&&Ye(t).unusedInput.push(h),e=e.slice(e.indexOf(i)+i.length),s+=i.length),Ys[o]?(i?Ye(t).empty=!1:Ye(t).unusedTokens.push(o),FN(o,i,t)):t._strict&&!i&&Ye(t).unusedTokens.push(o);Ye(t).charsLeftOver=a-s,e.length>0&&Ye(t).unusedInput.push(e),t._a[Ht]<=12&&Ye(t).bigHour===!0&&t._a[Ht]>0&&(Ye(t).bigHour=void 0),Ye(t).parsedDateParts=t._a.slice(0),Ye(t).meridiem=t._meridiem,t._a[Ht]=$j(t._locale,t._a[Ht],t._meridiem),c=Ye(t).era,c!==null&&(t._a[cn]=t._locale.erasConvertYear(c,t._a[cn])),Cd(t),wd(t)}function $j(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Gj(t){var e,n,i,r,o,h,a=!1,s=t._f.length;if(s===0){Ye(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<s;r++)o=0,h=!1,e=cd({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],Sd(e),ld(e)&&(h=!0),o+=Ye(e).charsLeftOver,o+=Ye(e).unusedTokens.length*10,Ye(e).score=o,a?o<i&&(i=o,n=e):(i==null||o<i||h)&&(i=o,n=e,h&&(a=!0));sr(t,n||e)}function qj(t){if(!t._d){var e=hd(t._i),n=e.day===void 0?e.date:e.day;t._a=aw([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Cd(t)}}function Kj(t){var e=new Aa(wd(Dw(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Dw(t){var e=t._i,n=t._f;return t._locale=t._locale||zi(t._l),e===null||n===void 0&&e===""?Mc({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ti(e)?new Aa(wd(e)):(Da(e)?t._d=e:ei(n)?Gj(t):n?Sd(t):Jj(t),ld(t)||(t._d=null),t))}function Jj(t){var e=t._i;mn(e)?t._d=new Date(we.now()):Da(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Hj(t):ei(e)?(t._a=aw(e.slice(0),function(n){return parseInt(n,10)}),Cd(t)):zr(e)?qj(t):Ui(e)?t._d=new Date(e):we.createFromInputFallback(t)}function Aw(t,e,n,i,r){var o={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(zr(t)&&ad(t)||ei(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,Kj(o)}function vt(t,e,n,i){return Aw(t,e,n,i,!1)}var Zj=zn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vt.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Mc()}),Qj=zn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Mc()});function Pw(t,e){var n,i;if(e.length===1&&ei(e[0])&&(e=e[0]),!e.length)return vt();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function e3(){var t=[].slice.call(arguments,0);return Pw("isBefore",t)}function t3(){var t=[].slice.call(arguments,0);return Pw("isAfter",t)}var n3=function(){return Date.now?Date.now():+new Date},Ao=["year","quarter","month","week","day","hour","minute","second","millisecond"];function i3(t){var e,n=!1,i,r=Ao.length;for(e in t)if(rt(t,e)&&!(It.call(Ao,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<r;++i)if(t[Ao[i]]){if(n)return!1;parseFloat(t[Ao[i]])!==Je(t[Ao[i]])&&(n=!0)}return!0}function r3(){return this._isValid}function s3(){return ni(NaN)}function Uc(t){var e=hd(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,h=e.day||0,a=e.hour||0,s=e.minute||0,c=e.second||0,f=e.millisecond||0;this._isValid=i3(e),this._milliseconds=+f+c*1e3+s*6e4+a*1e3*60*60,this._days=+h+o*7,this._months=+r+i*3+n*12,this._data={},this._locale=zi(),this._bubble()}function Cl(t){return t instanceof Uc}function Jf(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function o3(t,e,n){var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,h;for(h=0;h<i;h++)(n&&t[h]!==e[h]||!n&&Je(t[h])!==Je(e[h]))&&o++;return o+r}function Mw(t,e){Ae(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+bi(~~(n/60),2)+e+bi(~~n%60,2)})}Mw("Z",":");Mw("ZZ","");Ce("Z",Nc);Ce("ZZ",Nc);lt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Td(Nc,t)});var a3=/([\+\-]|\d\d)/gi;function Td(t,e){var n=(e||"").match(t),i,r,o;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(a3)||["-",0,0],o=+(r[1]*60)+Je(r[2]),o===0?0:r[0]==="+"?o:-o)}function kd(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(ti(t)||Da(t)?t.valueOf():vt(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),we.updateOffset(n,!1),n):vt(t).local()}function Zf(t){return-Math.round(t._d.getTimezoneOffset())}we.updateOffset=function(){};function l3(t,e,n){var i=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Td(Nc,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=Zf(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?Fw(this,ni(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,we.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:Zf(this)}function c3(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function u3(t){return this.utcOffset(0,t)}function f3(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Zf(this),"m")),this}function h3(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Td(PN,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function d3(t){return this.isValid()?(t=t?vt(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function p3(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function g3(){if(!mn(this._isDSTShifted))return this._isDSTShifted;var t={},e;return cd(t,this),t=Dw(t),t._a?(e=t._isUTC?Ci(t._a):vt(t._a),this._isDSTShifted=this.isValid()&&o3(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function m3(){return this.isValid()?!this._isUTC:!1}function v3(){return this.isValid()?this._isUTC:!1}function Rw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _3=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,y3=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ni(t,e){var n=t,i=null,r,o,h;return Cl(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Ui(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=_3.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:Je(i[ui])*r,h:Je(i[Ht])*r,m:Je(i[Zn])*r,s:Je(i[Ri])*r,ms:Je(Jf(i[Rr]*1e3))*r}):(i=y3.exec(t))?(r=i[1]==="-"?-1:1,n={y:Tr(i[2],r),M:Tr(i[3],r),w:Tr(i[4],r),d:Tr(i[5],r),h:Tr(i[6],r),m:Tr(i[7],r),s:Tr(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(h=b3(vt(n.from),vt(n.to)),n={},n.ms=h.milliseconds,n.M=h.months),o=new Uc(n),Cl(t)&&rt(t,"_locale")&&(o._locale=t._locale),Cl(t)&&rt(t,"_isValid")&&(o._isValid=t._isValid),o}ni.fn=Uc.prototype;ni.invalid=s3;function Tr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function M_(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function b3(t,e){var n;return t.isValid()&&e.isValid()?(e=kd(e,t),t.isBefore(e)?n=M_(t,e):(n=M_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Iw(t,e){return function(n,i){var r,o;return i!==null&&!isNaN(+i)&&(cw(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),r=ni(n,i),Fw(this,r,t),this}}function Fw(t,e,n,i){var r=e._milliseconds,o=Jf(e._days),h=Jf(e._months);t.isValid()&&(i=i??!0,h&&yw(t,ca(t,"Month")+h*n),o&&mw(t,"Date",ca(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&we.updateOffset(t,o||h))}var w3=Iw(1,"add"),C3=Iw(-1,"subtract");function Lw(t){return typeof t=="string"||t instanceof String}function S3(t){return ti(t)||Da(t)||Lw(t)||Ui(t)||k3(t)||T3(t)||t===null||t===void 0}function T3(t){var e=zr(t)&&!ad(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,h=i.length;for(r=0;r<h;r+=1)o=i[r],n=n||rt(t,o);return e&&n}function k3(t){var e=ei(t),n=!1;return e&&(n=t.filter(function(i){return!Ui(i)&&Lw(t)}).length===0),e&&n}function O3(t){var e=zr(t)&&!ad(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<i.length;r+=1)o=i[r],n=n||rt(t,o);return e&&n}function E3(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function x3(t,e){arguments.length===1&&(arguments[0]?S3(arguments[0])?(t=arguments[0],e=void 0):O3(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||vt(),i=kd(n,this).startOf("day"),r=we.calendarFormat(this,i)||"sameElse",o=e&&(Si(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,vt(n)))}function D3(){return new Aa(this)}function A3(t,e){var n=ti(t)?t:vt(t);return this.isValid()&&n.isValid()?(e=Hn(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function P3(t,e){var n=ti(t)?t:vt(t);return this.isValid()&&n.isValid()?(e=Hn(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function M3(t,e,n,i){var r=ti(t)?t:vt(t),o=ti(e)?e:vt(e);return this.isValid()&&r.isValid()&&o.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function R3(t,e){var n=ti(t)?t:vt(t),i;return this.isValid()&&n.isValid()?(e=Hn(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function I3(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function F3(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function L3(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(i=kd(t,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=Hn(e),e){case"year":o=Sl(this,i)/12;break;case"month":o=Sl(this,i);break;case"quarter":o=Sl(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:Ln(o)}function Sl(t,e){if(t.date()<e.date())return-Sl(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,o;return e-i<0?(r=t.clone().add(n-1,"months"),o=(e-i)/(i-r)):(r=t.clone().add(n+1,"months"),o=(e-i)/(r-i)),-(n+o)||0}we.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";we.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function N3(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function j3(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?wl(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Si(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",wl(n,"Z")):wl(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function B3(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+i+r+o)}function U3(t){t||(t=this.isUtc()?we.defaultFormatUtc:we.defaultFormat);var e=wl(this,t);return this.localeData().postformat(e)}function Y3(t,e){return this.isValid()&&(ti(t)&&t.isValid()||vt(t).isValid())?ni({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function W3(t){return this.from(vt(),t)}function z3(t,e){return this.isValid()&&(ti(t)&&t.isValid()||vt(t).isValid())?ni({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function H3(t){return this.to(vt(),t)}function Nw(t){var e;return t===void 0?this._locale._abbr:(e=zi(t),e!=null&&(this._locale=e),this)}var jw=zn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Bw(){return this._locale}var tc=1e3,Ws=60*tc,nc=60*Ws,Uw=(365*400+97)*24*nc;function zs(t,e){return(t%e+e)%e}function Yw(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Uw:new Date(t,e,n).valueOf()}function Ww(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Uw:Date.UTC(t,e,n)}function V3(t){var e,n;if(t=Hn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ww:Yw,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=zs(e+(this._isUTC?0:this.utcOffset()*Ws),nc);break;case"minute":e=this._d.valueOf(),e-=zs(e,Ws);break;case"second":e=this._d.valueOf(),e-=zs(e,tc);break}return this._d.setTime(e),we.updateOffset(this,!0),this}function X3(t){var e,n;if(t=Hn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ww:Yw,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=nc-zs(e+(this._isUTC?0:this.utcOffset()*Ws),nc)-1;break;case"minute":e=this._d.valueOf(),e+=Ws-zs(e,Ws)-1;break;case"second":e=this._d.valueOf(),e+=tc-zs(e,tc)-1;break}return this._d.setTime(e),we.updateOffset(this,!0),this}function $3(){return this._d.valueOf()-(this._offset||0)*6e4}function G3(){return Math.floor(this.valueOf()/1e3)}function q3(){return new Date(this.valueOf())}function K3(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function J3(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Z3(){return this.isValid()?this.toISOString():null}function Q3(){return ld(this)}function eB(){return sr({},Ye(this))}function tB(){return Ye(this).overflow}function nB(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ae("N",0,0,"eraAbbr");Ae("NN",0,0,"eraAbbr");Ae("NNN",0,0,"eraAbbr");Ae("NNNN",0,0,"eraName");Ae("NNNNN",0,0,"eraNarrow");Ae("y",["y",1],"yo","eraYear");Ae("y",["yy",2],0,"eraYear");Ae("y",["yyy",3],0,"eraYear");Ae("y",["yyyy",4],0,"eraYear");Ce("N",Od);Ce("NN",Od);Ce("NNN",Od);Ce("NNNN",dB);Ce("NNNNN",pB);lt(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?Ye(n).era=r:Ye(n).invalidEra=t});Ce("y",mo);Ce("yy",mo);Ce("yyy",mo);Ce("yyyy",mo);Ce("yo",gB);lt(["y","yy","yyy","yyyy"],cn);lt(["yo"],function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[cn]=n._locale.eraYearOrdinalParse(t,r):e[cn]=parseInt(t,10)});function iB(t,e){var n,i,r,o=this._eras||zi("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=we(o[n].since).startOf("day"),o[n].since=r.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=we(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf();break}}return o}function rB(t,e,n){var i,r,o=this.eras(),h,a,s;for(t=t.toUpperCase(),i=0,r=o.length;i<r;++i)if(h=o[i].name.toUpperCase(),a=o[i].abbr.toUpperCase(),s=o[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[i];break;case"NNNN":if(h===t)return o[i];break;case"NNNNN":if(s===t)return o[i];break}else if([h,a,s].indexOf(t)>=0)return o[i]}function sB(t,e){var n=t.since<=t.until?1:-1;return e===void 0?we(t.since).year():we(t.since).year()+(e-t.offset)*n}function oB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function aB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function lB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function cB(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.clone().startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-we(r[t].since).year())*n+r[t].offset;return this.year()}function uB(t){return rt(this,"_erasNameRegex")||Ed.call(this),t?this._erasNameRegex:this._erasRegex}function fB(t){return rt(this,"_erasAbbrRegex")||Ed.call(this),t?this._erasAbbrRegex:this._erasRegex}function hB(t){return rt(this,"_erasNarrowRegex")||Ed.call(this),t?this._erasNarrowRegex:this._erasRegex}function Od(t,e){return e.erasAbbrRegex(t)}function dB(t,e){return e.erasNameRegex(t)}function pB(t,e){return e.erasNarrowRegex(t)}function gB(t,e){return e._eraYearOrdinalRegex||mo}function Ed(){var t=[],e=[],n=[],i=[],r,o,h,a,s,c=this.eras();for(r=0,o=c.length;r<o;++r)h=Li(c[r].name),a=Li(c[r].abbr),s=Li(c[r].narrow),e.push(h),t.push(a),n.push(s),i.push(h),i.push(a),i.push(s);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Ae(0,["gg",2],0,function(){return this.weekYear()%100});Ae(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Yc(t,e){Ae(0,[t,t.length],0,e)}Yc("gggg","weekYear");Yc("ggggg","weekYear");Yc("GGGG","isoWeekYear");Yc("GGGGG","isoWeekYear");Ce("G",Lc);Ce("g",Lc);Ce("GG",_t,An);Ce("gg",_t,An);Ce("GGGG",pd,dd);Ce("gggg",pd,dd);Ce("GGGGG",Fc,Rc);Ce("ggggg",Fc,Rc);Ma(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=Je(t)});Ma(["gg","GG"],function(t,e,n,i){e[i]=we.parseTwoDigitYear(t)});function mB(t){return zw.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function vB(t){return zw.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function _B(){return Ni(this.year(),1,4)}function yB(){return Ni(this.isoWeekYear(),1,4)}function bB(){var t=this.localeData()._week;return Ni(this.year(),t.dow,t.doy)}function wB(){var t=this.localeData()._week;return Ni(this.weekYear(),t.dow,t.doy)}function zw(t,e,n,i,r){var o;return t==null?fa(this,i,r).year:(o=Ni(t,i,r),e>o&&(e=o),CB.call(this,t,e,n,i,r))}function CB(t,e,n,i,r){var o=Cw(t,e,n,i,r),h=ua(o.year,0,o.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}Ae("Q",0,"Qo","quarter");Ce("Q",fw);lt("Q",function(t,e){e[Mi]=(Je(t)-1)*3});function SB(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Ae("D",["DD",2],"Do","date");Ce("D",_t,vo);Ce("DD",_t,An);Ce("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});lt(["D","DD"],ui);lt("Do",function(t,e){e[ui]=Je(t.match(_t)[0])});var Hw=_o("Date",!0);Ae("DDD",["DDDD",3],"DDDo","dayOfYear");Ce("DDD",Ic);Ce("DDDD",hw);lt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Je(t)});function TB(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Ae("m",["mm",2],0,"minute");Ce("m",_t,gd);Ce("mm",_t,An);lt(["m","mm"],Zn);var kB=_o("Minutes",!1);Ae("s",["ss",2],0,"second");Ce("s",_t,gd);Ce("ss",_t,An);lt(["s","ss"],Ri);var OB=_o("Seconds",!1);Ae("S",0,0,function(){return~~(this.millisecond()/100)});Ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ae(0,["SSS",3],0,"millisecond");Ae(0,["SSSS",4],0,function(){return this.millisecond()*10});Ae(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ae(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ae(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ae(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ae(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ce("S",Ic,fw);Ce("SS",Ic,An);Ce("SSS",Ic,hw);var or,Vw;for(or="SSSS";or.length<=9;or+="S")Ce(or,mo);function EB(t,e){e[Rr]=Je(("0."+t)*1e3)}for(or="S";or.length<=9;or+="S")lt(or,EB);Vw=_o("Milliseconds",!1);Ae("z",0,0,"zoneAbbr");Ae("zz",0,0,"zoneName");function xB(){return this._isUTC?"UTC":""}function DB(){return this._isUTC?"Coordinated Universal Time":""}var me=Aa.prototype;me.add=w3;me.calendar=x3;me.clone=D3;me.diff=L3;me.endOf=X3;me.format=U3;me.from=Y3;me.fromNow=W3;me.to=z3;me.toNow=H3;me.get=BN;me.invalidAt=tB;me.isAfter=A3;me.isBefore=P3;me.isBetween=M3;me.isSame=R3;me.isSameOrAfter=I3;me.isSameOrBefore=F3;me.isValid=Q3;me.lang=jw;me.locale=Nw;me.localeData=Bw;me.max=Qj;me.min=Zj;me.parsingFlags=eB;me.set=UN;me.startOf=V3;me.subtract=C3;me.toArray=K3;me.toObject=J3;me.toDate=q3;me.toISOString=j3;me.inspect=B3;typeof Symbol<"u"&&Symbol.for!=null&&(me[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});me.toJSON=Z3;me.toString=N3;me.unix=G3;me.valueOf=$3;me.creationData=nB;me.eraName=oB;me.eraNarrow=aB;me.eraAbbr=lB;me.eraYear=cB;me.year=gw;me.isLeapYear=jN;me.weekYear=mB;me.isoWeekYear=vB;me.quarter=me.quarters=SB;me.month=bw;me.daysInMonth=qN;me.week=me.weeks=ij;me.isoWeek=me.isoWeeks=rj;me.weeksInYear=bB;me.weeksInWeekYear=wB;me.isoWeeksInYear=_B;me.isoWeeksInISOWeekYear=yB;me.date=Hw;me.day=me.days=vj;me.weekday=_j;me.isoWeekday=yj;me.dayOfYear=TB;me.hour=me.hours=Oj;me.minute=me.minutes=kB;me.second=me.seconds=OB;me.millisecond=me.milliseconds=Vw;me.utcOffset=l3;me.utc=u3;me.local=f3;me.parseZone=h3;me.hasAlignedHourOffset=d3;me.isDST=p3;me.isLocal=m3;me.isUtcOffset=v3;me.isUtc=Rw;me.isUTC=Rw;me.zoneAbbr=xB;me.zoneName=DB;me.dates=zn("dates accessor is deprecated. Use date instead.",Hw);me.months=zn("months accessor is deprecated. Use month instead",bw);me.years=zn("years accessor is deprecated. Use year instead",gw);me.zone=zn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",c3);me.isDSTShifted=zn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",g3);function AB(t){return vt(t*1e3)}function PB(){return vt.apply(null,arguments).parseZone()}function Xw(t){return t}var st=ud.prototype;st.calendar=mN;st.longDateFormat=bN;st.invalidDate=CN;st.ordinal=kN;st.preparse=Xw;st.postformat=Xw;st.relativeTime=EN;st.pastFuture=xN;st.set=pN;st.eras=iB;st.erasParse=rB;st.erasConvertYear=sB;st.erasAbbrRegex=fB;st.erasNameRegex=uB;st.erasNarrowRegex=hB;st.months=VN;st.monthsShort=XN;st.monthsParse=GN;st.monthsRegex=JN;st.monthsShortRegex=KN;st.week=QN;st.firstDayOfYear=nj;st.firstDayOfWeek=tj;st.weekdays=hj;st.weekdaysMin=pj;st.weekdaysShort=dj;st.weekdaysParse=mj;st.weekdaysRegex=bj;st.weekdaysShortRegex=wj;st.weekdaysMinRegex=Cj;st.isPM=Tj;st.meridiem=Ej;function ic(t,e,n,i){var r=zi(),o=Ci().set(i,e);return r[n](o,t)}function $w(t,e,n){if(Ui(t)&&(e=t,t=void 0),t=t||"",e!=null)return ic(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=ic(t,i,n,"month");return r}function xd(t,e,n,i){typeof t=="boolean"?(Ui(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Ui(e)&&(n=e,e=void 0),e=e||"");var r=zi(),o=t?r._week.dow:0,h,a=[];if(n!=null)return ic(e,(n+o)%7,i,"day");for(h=0;h<7;h++)a[h]=ic(e,(h+o)%7,i,"day");return a}function MB(t,e){return $w(t,e,"months")}function RB(t,e){return $w(t,e,"monthsShort")}function IB(t,e,n){return xd(t,e,n,"weekdays")}function FB(t,e,n){return xd(t,e,n,"weekdaysShort")}function LB(t,e,n){return xd(t,e,n,"weekdaysMin")}ur("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Je(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});we.lang=zn("moment.lang is deprecated. Use moment.locale instead.",ur);we.langData=zn("moment.langData is deprecated. Use moment.localeData instead.",zi);var Oi=Math.abs;function NB(){var t=this._data;return this._milliseconds=Oi(this._milliseconds),this._days=Oi(this._days),this._months=Oi(this._months),t.milliseconds=Oi(t.milliseconds),t.seconds=Oi(t.seconds),t.minutes=Oi(t.minutes),t.hours=Oi(t.hours),t.months=Oi(t.months),t.years=Oi(t.years),this}function Gw(t,e,n,i){var r=ni(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function jB(t,e){return Gw(this,t,e,1)}function BB(t,e){return Gw(this,t,e,-1)}function R_(t){return t<0?Math.floor(t):Math.ceil(t)}function UB(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,r,o,h,a,s;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=R_(Qf(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,r=Ln(t/1e3),i.seconds=r%60,o=Ln(r/60),i.minutes=o%60,h=Ln(o/60),i.hours=h%24,e+=Ln(h/24),s=Ln(qw(e)),n+=s,e-=R_(Qf(s)),a=Ln(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function qw(t){return t*4800/146097}function Qf(t){return t*146097/4800}function YB(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=Hn(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+qw(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Qf(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function Hi(t){return function(){return this.as(t)}}var Kw=Hi("ms"),WB=Hi("s"),zB=Hi("m"),HB=Hi("h"),VB=Hi("d"),XB=Hi("w"),$B=Hi("M"),GB=Hi("Q"),qB=Hi("y"),KB=Kw;function JB(){return ni(this)}function ZB(t){return t=Hn(t),this.isValid()?this[t+"s"]():NaN}function es(t){return function(){return this.isValid()?this._data[t]:NaN}}var QB=es("milliseconds"),e4=es("seconds"),t4=es("minutes"),n4=es("hours"),i4=es("days"),r4=es("months"),s4=es("years");function o4(){return Ln(this.days()/7)}var Ei=Math.round,Ds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function a4(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function l4(t,e,n,i){var r=ni(t).abs(),o=Ei(r.as("s")),h=Ei(r.as("m")),a=Ei(r.as("h")),s=Ei(r.as("d")),c=Ei(r.as("M")),f=Ei(r.as("w")),l=Ei(r.as("y")),u=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||h<=1&&["m"]||h<n.m&&["mm",h]||a<=1&&["h"]||a<n.h&&["hh",a]||s<=1&&["d"]||s<n.d&&["dd",s];return n.w!=null&&(u=u||f<=1&&["w"]||f<n.w&&["ww",f]),u=u||c<=1&&["M"]||c<n.M&&["MM",c]||l<=1&&["y"]||["yy",l],u[2]=e,u[3]=+t>0,u[4]=i,a4.apply(null,u)}function c4(t){return t===void 0?Ei:typeof t=="function"?(Ei=t,!0):!1}function u4(t,e){return Ds[t]===void 0?!1:e===void 0?Ds[t]:(Ds[t]=e,t==="s"&&(Ds.ss=e-1),!0)}function f4(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Ds,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},Ds,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),o=l4(this,!n,i,r),n&&(o=r.pastFuture(+this,o)),r.postformat(o)}var zu=Math.abs;function ps(t){return(t>0)-(t<0)||+t}function Wc(){if(!this.isValid())return this.localeData().invalidDate();var t=zu(this._milliseconds)/1e3,e=zu(this._days),n=zu(this._months),i,r,o,h,a=this.asSeconds(),s,c,f,l;return a?(i=Ln(t/60),r=Ln(i/60),t%=60,i%=60,o=Ln(n/12),n%=12,h=t?t.toFixed(3).replace(/\.?0+$/,""):"",s=a<0?"-":"",c=ps(this._months)!==ps(a)?"-":"",f=ps(this._days)!==ps(a)?"-":"",l=ps(this._milliseconds)!==ps(a)?"-":"",s+"P"+(o?c+o+"Y":"")+(n?c+n+"M":"")+(e?f+e+"D":"")+(r||i||t?"T":"")+(r?l+r+"H":"")+(i?l+i+"M":"")+(t?l+h+"S":"")):"P0D"}var tt=Uc.prototype;tt.isValid=r3;tt.abs=NB;tt.add=jB;tt.subtract=BB;tt.as=YB;tt.asMilliseconds=Kw;tt.asSeconds=WB;tt.asMinutes=zB;tt.asHours=HB;tt.asDays=VB;tt.asWeeks=XB;tt.asMonths=$B;tt.asQuarters=GB;tt.asYears=qB;tt.valueOf=KB;tt._bubble=UB;tt.clone=JB;tt.get=ZB;tt.milliseconds=QB;tt.seconds=e4;tt.minutes=t4;tt.hours=n4;tt.days=i4;tt.weeks=o4;tt.months=r4;tt.years=s4;tt.humanize=f4;tt.toISOString=Wc;tt.toString=Wc;tt.toJSON=Wc;tt.locale=Nw;tt.localeData=Bw;tt.toIsoString=zn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wc);tt.lang=jw;Ae("X",0,0,"unix");Ae("x",0,0,"valueOf");Ce("x",Lc);Ce("X",MN);lt("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});lt("x",function(t,e,n){n._d=new Date(Je(t))});//! moment.js
we.version="2.30.1";hN(vt);we.fn=me;we.min=e3;we.max=t3;we.now=n3;we.utc=Ci;we.unix=AB;we.months=MB;we.isDate=Da;we.locale=ur;we.invalid=Mc;we.duration=ni;we.isMoment=ti;we.weekdays=IB;we.parseZone=PB;we.localeData=zi;we.isDuration=Cl;we.monthsShort=RB;we.weekdaysMin=LB;we.defineLocale=bd;we.updateLocale=Pj;we.locales=Mj;we.weekdaysShort=FB;we.normalizeUnits=Hn;we.relativeTimeRounding=c4;we.relativeTimeThreshold=u4;we.calendarFormat=E3;we.prototype=me;we.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function I_(t,e,n){const i=t.slice();return i[8]=e[n],i}function F_(t,e,n){const i=t.slice();return i[11]=e[n],i}function h4(t){let e;return{c(){e=E("div"),e.innerHTML='<h2 class="flex p-5 justify-center">로그인후 이용가능합니다.</h2> <a href="/member/login.html" class="btn primary-btn btn-lg max-w-lg w-full">로그인 페이지로</a>',S(e,"class","flex flex-col justify-center items-center")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function d4(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m={ctx:t,current:null,token:null,hasCatch:!1,pending:y4,then:g4,catch:p4,value:7};return Hs(u=t[3],m),{c(){e=E("div"),n=E("select"),i=E("option"),i.textContent="최근 1개월",r=E("option"),r.textContent="최근 3개월",o=E("option"),o.textContent="최근 5개월",h=E("option"),h.textContent="최근 6개월",a=E("option"),a.textContent="최근 9개월",s=E("option"),s.textContent="최근 12개월",c=E("option"),c.textContent="최근 2년",f=V(),l=et(),m.block.c(),i.__value=1,Fe(i,i.__value),r.__value=3,Fe(r,r.__value),o.__value=5,Fe(o,o.__value),h.__value=6,Fe(h,h.__value),a.__value=9,Fe(a,a.__value),s.__value=12,Fe(s,s.__value),c.__value=24,Fe(c,c.__value),S(n,"class","block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 select"),t[2]===void 0&&Vt(()=>t[5].call(n)),S(e,"class","mb-4")},m(g,v){U(g,e,v),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(n,s),k(n,c),mi(n,t[2],!0),U(g,f,v),U(g,l,v),m.block.m(g,m.anchor=v),m.mount=()=>l.parentNode,m.anchor=l,d||(p=[ne(n,"change",t[5]),ne(n,"change",t[4])],d=!0)},p(g,v){t=g,v&4&&mi(n,t[2]),m.ctx=t,v&8&&u!==(u=t[3])&&Hs(u,m)||rh(m,t,v)},d(g){g&&(j(e),j(f),j(l)),m.block.d(g),m.token=null,m=null,d=!1,We(p)}}}function p4(t){return{c:ve,m:ve,p:ve,d:ve}}function g4(t){let e=console.log({response:t[7]})+"",n,i,r;function o(s,c){return s[7].error?_4:s[7].count?v4:m4}let h=o(t),a=h(t);return{c(){n=Te(e),i=V(),r=E("div"),a.c()},m(s,c){U(s,n,c),U(s,i,c),U(s,r,c),a.m(r,null)},p(s,c){c&8&&e!==(e=console.log({response:s[7]})+"")&&Ve(n,e),h===(h=o(s))&&a?a.p(s,c):(a.d(1),a=h(s),a&&(a.c(),a.m(r,null)))},d(s){s&&(j(n),j(i),j(r)),a.d()}}}function m4(t){let e;return{c(){e=E("div"),e.textContent="저장된 디자인이 없습니다.",S(e,"class","text-center py-8 text-gray-500")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function v4(t){let e,n=Le(t[7].data),i=[];for(let r=0;r<n.length;r+=1)i[r]=B_(I_(t,n,r));return{c(){e=E("ul");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&10){n=Le(r[7].data);let h;for(h=0;h<n.length;h+=1){const a=I_(r,n,h);i[h]?i[h].p(a,o):(i[h]=B_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function _4(t){let e,n=t[7].error+"",i;return{c(){e=E("div"),i=Te(n),S(e,"class","text-red-500 p-4")},m(r,o){U(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[7].error+"")&&Ve(i,n)},d(r){r&&j(e)}}}function L_(t){var te;let e,n,i,r,o,h,a,s,c,f=t[8].cafe24Product.product.product_name+"",l,u,d,p,m=we(t[8].created_at).format("YYYY-MM-DD")+"",g,v,_,b=jl(t[8].cafe24Product.product.price)+"",y,C,w,T,O,A,L;function G(){return t[6](t[8])}let Y=((te=t[8].thumbnails)==null?void 0:te.length)&&N_(t);return{c(){e=E("li"),n=E("div"),i=E("div"),r=E("img"),a=V(),s=E("div"),c=E("h2"),l=Te(f),u=V(),d=E("div"),p=Te("주문일: "),g=Te(m),v=V(),_=E("div"),y=Te(b),C=V(),w=E("button"),w.textContent="디자인 재주문",T=V(),Y&&Y.c(),O=V(),Ze(r.src,o=t[8].cafe24Product.product.small_image)||S(r,"src",o),S(r,"class","w-24 h-24 object-cover rounded-md"),S(r,"alt",h=t[8].cafe24Product.product.product_name),S(c,"class","text-base font-semibold mb-2 line-clamp-2"),S(d,"class","text-sm font-normal mb-2"),S(_,"class","text-blue-600 font-bold mb-2"),S(w,"type","button"),S(w,"class","btn btn-sm primary-btn w-full"),S(s,"class","flex-1"),S(i,"class","flex items-center gap-4 mb-4"),S(n,"class","p-4"),S(e,"class","bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105")},m(q,N){U(q,e,N),k(e,n),k(n,i),k(i,r),k(i,a),k(i,s),k(s,c),k(c,l),k(s,u),k(s,d),k(d,p),k(d,g),k(s,v),k(s,_),k(_,y),k(s,C),k(s,w),k(n,T),Y&&Y.m(n,null),k(e,O),A||(L=ne(w,"click",G),A=!0)},p(q,N){var B;t=q,N&8&&!Ze(r.src,o=t[8].cafe24Product.product.small_image)&&S(r,"src",o),N&8&&h!==(h=t[8].cafe24Product.product.product_name)&&S(r,"alt",h),N&8&&f!==(f=t[8].cafe24Product.product.product_name+"")&&Ve(l,f),N&8&&m!==(m=we(t[8].created_at).format("YYYY-MM-DD")+"")&&Ve(g,m),N&8&&b!==(b=jl(t[8].cafe24Product.product.price)+"")&&Ve(y,b),(B=t[8].thumbnails)!=null&&B.length?Y?Y.p(t,N):(Y=N_(t),Y.c(),Y.m(n,null)):Y&&(Y.d(1),Y=null)},d(q){q&&j(e),Y&&Y.d(),A=!1,L()}}}function N_(t){let e,n=Le(t[8].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=j_(F_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex overflow-x-auto space-x-2 pb-2")},m(r,o){U(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Le(r[8].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=F_(r,n,h);i[h]?i[h].p(a,o):(i[h]=j_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&j(e),Ft(i,r)}}}function j_(t){let e,n;return{c(){e=E("img"),Ze(e.src,n=t[11].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","w-20 h-20 object-cover rounded-md flex-shrink-0")},m(i,r){U(i,e,r)},p(i,r){r&8&&!Ze(e.src,n=i[11].url)&&S(e,"src",n)},d(i){i&&j(e)}}}function B_(t){var i;let e,n=((i=t[8].cafe24Product)==null?void 0:i.product)&&L_(t);return{c(){n&&n.c(),e=et()},m(r,o){n&&n.m(r,o),U(r,e,o)},p(r,o){var h;(h=r[8].cafe24Product)!=null&&h.product?n?n.p(r,o):(n=L_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&j(e),n&&n.d(r)}}}function y4(t){let e;return{c(){e=E("div"),e.textContent="로딩 중...",S(e,"class","text-center py-4")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function b4(t){let e;function n(o,h){return o[0].cafe24UserType==="member"?d4:h4}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(o,h){r.m(o,h),U(o,e,h)},p(o,[h]){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:ve,o:ve,d(o){o&&j(e),r.d(o)}}}function w4(t,e,n){let{user:i}=e,{handleClick:r}=e,o=3,h;function a(f){n(2,o=parseInt(f.target.value))}function s(){o=Io(this),n(2,o)}const c=f=>r(f.uuid);return t.$$set=f=>{"user"in f&&n(0,i=f.user),"handleClick"in f&&n(1,r=f.handleClick)},t.$$.update=()=>{t.$$.dirty&13&&(n(3,h=zT(i.cafe24MallId,i.cafe24MemberId,o)),console.log({loadCafe24MemberDesign:h}))},[i,r,o,h,a,s,c]}class C4 extends Ge{constructor(e){super(),$e(this,e,w4,b4,Xe,{user:0,handleClick:1})}}function U_(t){let e,n,i,r,o=t[4].printGuide+"",h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C;return c=new ke({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),h=Te(o),a=V(),s=E("button"),he(c.$$.fragment),f=V(),l=E("div"),u=E("textarea"),d=V(),p=E("div"),m=E("button"),m.textContent="주문하기",g=V(),v=E("button"),v.textContent="취소",S(r,"class","font-semibold"),S(s,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(u,"class","textarea"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(w,T){U(w,e,T),k(e,n),k(n,i),k(i,r),k(r,h),k(i,a),k(i,s),ue(c,s,null),k(n,f),k(n,l),k(l,u),Fe(u,t[3]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(C=[ne(s,"click",Wn),ne(u,"input",t[7]),ne(u,"change",t[8]),ne(m,"click",t[9]),ne(v,"click",Wn),ne(e,"introstart",t[5]),ne(e,"outroend",t[6])],y=!0)},p(w,T){(!b||T&16)&&o!==(o=w[4].printGuide+"")&&Ve(h,o),T&8&&Fe(u,w[3])},i(w){b||(I(c.$$.fragment,w),w&&Vt(()=>{b&&(_||(_=Qt(e,dr,{y:50},!0)),_.run(1))}),b=!0)},o(w){W(c.$$.fragment,w),w&&(_||(_=Qt(e,dr,{y:50},!1)),_.run(0)),b=!1},d(w){w&&j(e),fe(c),w&&_&&_.end(),y=!1,We(C)}}}function S4(t){let e,n,i=t[0]&&U_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&I(i,1)):(i=U_(r),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(r){n||(I(i),n=!0)},o(r){W(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function T4(t,e,n){let i;Ne(t,lo,d=>n(4,i=d));let{isOpen:r}=e,{orderAction:o}=e,{setPrintMemo:h}=e,a="";function s(d){fr.call(this,t,d)}function c(d){fr.call(this,t,d)}function f(){a=this.value,n(3,a)}const l=()=>h(a),u=()=>o();return t.$$set=d=>{"isOpen"in d&&n(0,r=d.isOpen),"orderAction"in d&&n(1,o=d.orderAction),"setPrintMemo"in d&&n(2,h=d.setPrintMemo)},[r,o,h,a,i,s,c,f,l,u]}class k4 extends Ge{constructor(e){super(),$e(this,e,T4,S4,Xe,{isOpen:0,orderAction:1,setPrintMemo:2})}}function Y_(t,e,n){const i=t.slice();return i[15]=e[n],i}function W_(t,e,n){const i=t.slice();return i[18]=e[n],i}function z_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,L;a=new ke({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let G=Le(t[1]),Y=[];for(let B=0;B<G.length;B+=1)Y[B]=H_(W_(t,G,B));const te=[E4,O4],q=[];function N(B,Q){return B[5]?0:1}return _=N(t),b=q[_]=te[_](t),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="상품변경",o=V(),h=E("button"),he(a.$$.fragment),s=V(),c=E("div"),f=E("div"),l=E("select"),u=E("option"),u.textContent="모든 카테고리";for(let B=0;B<Y.length;B+=1)Y[B].c();d=V(),p=E("input"),m=V(),g=E("button"),g.textContent="검색",v=V(),b.c(),y=V(),C=E("div"),w=E("button"),w.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),u.__value=null,Fe(u,u.__value),S(l,"class","select w-5/12"),t[2]===void 0&&Vt(()=>t[12].call(l)),S(p,"type","text"),S(p,"placeholder","상품 검색"),S(p,"class","input grow"),S(g,"class","btn primary-btn whitespace-nowrap min-w-24"),S(f,"class","flex space-x-4"),S(c,"class","mt-4 space-y-4"),S(w,"class","btn secondary-btn"),S(C,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(B,Q){U(B,e,Q),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u);for(let ee=0;ee<Y.length;ee+=1)Y[ee]&&Y[ee].m(l,null);mi(l,t[2],!0),k(f,d),k(f,p),Fe(p,t[3]),k(f,m),k(f,g),k(c,v),q[_].m(c,null),k(n,y),k(n,C),k(C,w),O=!0,A||(L=[ne(h,"click",Wn),ne(l,"change",t[12]),ne(l,"change",t[6]),ne(p,"input",t[13]),ne(g,"click",t[7]),ne(w,"click",Wn),ne(e,"introstart",t[10]),ne(e,"outroend",t[11])],A=!0)},p(B,Q){if(Q&2){G=Le(B[1]);let x;for(x=0;x<G.length;x+=1){const P=W_(B,G,x);Y[x]?Y[x].p(P,Q):(Y[x]=H_(P),Y[x].c(),Y[x].m(l,null))}for(;x<Y.length;x+=1)Y[x].d(1);Y.length=G.length}Q&6&&mi(l,B[2]),Q&8&&p.value!==B[3]&&Fe(p,B[3]);let ee=_;_=N(B),_===ee?q[_].p(B,Q):(Oe(),W(q[ee],1,1,()=>{q[ee]=null}),Ee(),b=q[_],b?b.p(B,Q):(b=q[_]=te[_](B),b.c()),I(b,1),b.m(c,null))},i(B){O||(I(a.$$.fragment,B),I(b),B&&Vt(()=>{O&&(T||(T=Qt(e,dr,{y:50},!0)),T.run(1))}),O=!0)},o(B){W(a.$$.fragment,B),W(b),B&&(T||(T=Qt(e,dr,{y:50},!1)),T.run(0)),O=!1},d(B){B&&j(e),fe(a),Ft(Y,B),q[_].d(),B&&T&&T.end(),A=!1,We(L)}}}function H_(t){let e,n=t[18].category_name+"",i,r;return{c(){e=E("option"),i=Te(n),e.__value=r=t[18].category_no,Fe(e,e.__value)},m(o,h){U(o,e,h),k(e,i)},p(o,h){h&2&&n!==(n=o[18].category_name+"")&&Ve(i,n),h&2&&r!==(r=o[18].category_no)&&(e.__value=r,Fe(e,e.__value))},d(o){o&&j(e)}}}function O4(t){let e,n,i=Le(t[4]),r=[];for(let h=0;h<i.length;h+=1)r[h]=V_(Y_(t,i,h));const o=h=>W(r[h],1,1,()=>{r[h]=null});return{c(){e=E("div");for(let h=0;h<r.length;h+=1)r[h].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4")},m(h,a){U(h,e,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);n=!0},p(h,a){if(a&272){i=Le(h[4]);let s;for(s=0;s<i.length;s+=1){const c=Y_(h,i,s);r[s]?(r[s].p(c,a),I(r[s],1)):(r[s]=V_(c),r[s].c(),I(r[s],1),r[s].m(e,null))}for(Oe(),s=i.length;s<r.length;s+=1)o(s);Ee()}},i(h){if(!n){for(let a=0;a<i.length;a+=1)I(r[a]);n=!0}},o(h){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)W(r[a]);n=!1},d(h){h&&j(e),Ft(r,h)}}}function E4(t){let e;return{c(){e=E("p"),e.textContent="로딩 중..."},m(n,i){U(n,e,i)},p:ve,i:ve,o:ve,d(n){n&&j(e)}}}function x4(t){let e,n;return e=new ke({props:{icon:"carbon:no-image",class:"w-full max-h-32 mb-2"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p:ve,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function D4(t){let e,n,i;return{c(){e=E("img"),Ze(e.src,n=t[15].list_image)||S(e,"src",n),S(e,"alt",i=t[15].product_name),S(e,"class","w-full max-h-32 object-contain mb-2")},m(r,o){U(r,e,o)},p(r,o){o&16&&!Ze(e.src,n=r[15].list_image)&&S(e,"src",n),o&16&&i!==(i=r[15].product_name)&&S(e,"alt",i)},i:ve,o:ve,d(r){r&&j(e)}}}function V_(t){let e,n,i,r,o,h=t[15].product_name+"",a,s,c,f=jl(t[15].price)+"",l,u,d,p,m;const g=[D4,x4],v=[];function _(y,C){return y[15].list_image?0:1}n=_(t),i=v[n]=g[n](t);function b(){return t[14](t[15])}return{c(){e=E("button"),i.c(),r=V(),o=E("p"),a=Te(h),s=V(),c=E("p"),l=Te(f),u=V(),S(o,"class","font-semibold"),S(c,"class","text-base font-semibold text-gray-600"),S(e,"class","border p-2 rounded cursor-pointer hover:bg-gray-100")},m(y,C){U(y,e,C),v[n].m(e,null),k(e,r),k(e,o),k(o,a),k(e,s),k(e,c),k(c,l),k(e,u),d=!0,p||(m=ne(e,"click",b),p=!0)},p(y,C){t=y;let w=n;n=_(t),n===w?v[n].p(t,C):(Oe(),W(v[w],1,1,()=>{v[w]=null}),Ee(),i=v[n],i?i.p(t,C):(i=v[n]=g[n](t),i.c()),I(i,1),i.m(e,r)),(!d||C&16)&&h!==(h=t[15].product_name+"")&&Ve(a,h),(!d||C&16)&&f!==(f=jl(t[15].price)+"")&&Ve(l,f)},i(y){d||(I(i),d=!0)},o(y){W(i),d=!1},d(y){y&&j(e),v[n].d(),p=!1,m()}}}function A4(t){let e,n,i=t[0]&&z_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&I(i,1)):(i=z_(r),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(r){n||(I(i),n=!0)},o(r){W(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function P4(t,e,n){let{isOpen:i}=e,{changeProduct:r}=e,o=[],h=null,a="",s=[],c=!1;Yi(async()=>{try{n(1,o=await Rx()),await l()}catch(_){console.error("Failed to load categories:",_)}});async function f(_){n(2,h=_.target.value?Number(_.target.value):null),await l()}async function l(){n(5,c=!0);try{n(4,s=await Ix(h,a)),console.log({products:s})}catch(_){console.error("Failed to search products:",_)}finally{n(5,c=!1)}}async function u(_){n(5,c=!0);try{const{options:b}=await bf(_.product_no);console.log({options:b});const y=b.additional_options.some(C=>C.additional_option_name==="podiz");if(console.log("podiz 옵션 존재 여부:",y),y)r(_),Wn();else{alert("선택하신 상품은 POD 상품이 아닙니다.");return}}catch(b){console.log(b)}finally{n(5,c=!1)}}function d(_){fr.call(this,t,_)}function p(_){fr.call(this,t,_)}function m(){h=Io(this),n(2,h),n(1,o)}function g(){a=this.value,n(3,a)}const v=_=>u(_);return t.$$set=_=>{"isOpen"in _&&n(0,i=_.isOpen),"changeProduct"in _&&n(9,r=_.changeProduct)},[i,o,h,a,s,c,f,l,u,r,d,p,m,g,v]}class M4 extends Ge{constructor(e){super(),$e(this,e,P4,A4,Xe,{isOpen:0,changeProduct:9})}}function X_(t,e,n){const i=t.slice();return i[65]=e[n],i}function $_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C=t[11].length+"",w,T,O,A,L,G,Y,te,q,N,B,Q,ee,x,P,R=t[0],F,K,M,D,H,J,ie,Z,$,se,pe,z,X,oe,ae,re,ce,_e,Pe,Se,le,xe,Me,Ue,ot,Qe,yt,ht,Pn,de=Le(t[13]),be=[];for(let De=0;De<de.length;De+=1)be[De]=G_(X_(t,de,De));function ze(De,on){var ii,ns;return(ns=(ii=De[10])==null?void 0:ii.image)!=null&&ns.url?I4:R4}let dt=ze(t),At=dt(t);p=new ke({props:{icon:"icon-park-outline:preview-open",height:"18"}}),_=new ke({props:{icon:"uil:cart",height:"18"}}),te=new EF({}),B=new ke({props:{icon:"gg:log-off",height:"20"}});let nt=K_(t);function Lt(De){t[27](De)}let ts={};t[0]!==void 0&&(ts.printKey=t[0]),K=new WI({props:ts}),it.push(()=>Et(K,"printKey",Lt));const vr=[L4,F4],_r=[];function Dd(De,on){return De[5]?0:1}Z=Dd(t),$=_r[Z]=vr[Z](t),z=new AF({}),re=new ke({props:{icon:"fa6-solid:plus"}}),Se=new ke({props:{icon:"fa-solid:exchange-alt"}}),Ue=new ZL({});let Xt=t[12].options&&!t[9].currentOption&&J_(t);return{c(){e=E("div");for(let De=0;De<be.length;De+=1)be[De].c();n=V(),i=E("div"),r=E("div"),o=E("div"),h=E("div"),At.c(),a=V(),s=E("div"),c=V(),f=E("div"),l=E("button"),l.textContent="디자인저장",u=V(),d=E("button"),he(p.$$.fragment),m=Te(`\r
                미리보기`),g=V(),v=E("button"),he(_.$$.fragment),b=V(),y=E("div"),w=Te(C),T=V(),O=E("span"),O.textContent="주문하기",A=V(),L=E("div"),G=E("div"),Y=E("div"),he(te.$$.fragment),q=V(),N=E("button"),he(B.$$.fragment),Q=V(),ee=E("span"),ee.textContent="나가기",x=V(),P=E("div"),nt.c(),F=V(),he(K.$$.fragment),D=V(),H=E("div"),J=E("div"),ie=E("button"),$.c(),se=V(),pe=E("div"),he(z.$$.fragment),X=V(),oe=E("div"),ae=E("button"),he(re.$$.fragment),ce=Te(`\r
                      옵션/디자인 변경`),_e=V(),Pe=E("button"),he(Se.$$.fragment),le=Te(`\r
                      상품변경`),xe=V(),Me=E("div"),he(Ue.$$.fragment),Qe=V(),Xt&&Xt.c(),kt(e,"font-size","0.1px"),kt(e,"height","0px"),kt(e,"color","#FFFFFF "),kt(e,"overflow","hidden"),S(s,"class","md:hidden"),S(l,"type","button"),S(l,"class","btn btn-sm md:btn-md primary-btn"),S(d,"type","button"),S(d,"class","btn btn-sm md:btn-md white-btn"),S(y,"class","rounded-full border bg-white px-1 absolute left-8"),S(O,"class","ml-3"),S(v,"type","button"),S(v,"class","btn btn-sm secondary-btn relative gap-0"),S(f,"class","flex items-center gap-3"),S(h,"class","flex justify-between items-center p-4 bg-white h-16 border-b border-b-gray-300"),S(Y,"class","flex flex-col"),S(ee,"class","whitespace-nowrap text-2xs hidden md:block"),S(N,"type","button"),S(N,"class","flex bg-white flex-col items-center border-t py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(G,"class","w-[50px] md:w-[80px] flex flex-col px-1 z-40 h-full justify-between"),S(P,"class","flex-1 bg-gray-200 flex items-center justify-center h-full w-full rounded border relative"),S(ie,"type","button"),S(ie,"class","border border-r-0 bg-white py-5 px-1 rounded-lg rounded-r-none"),S(J,"class","absolute -left-[22px] py-3 top-1/2 transform -translate-y-50 md:hidden"),S(ae,"type","button"),S(ae,"class","btn primary-btn w-full"),S(Pe,"type","button"),S(Pe,"class","btn dark-btn w-full mt-2"),S(oe,"class","mt-3"),S(Me,"class","mt-3"),S(H,"class",ot="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(t[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"),S(L,"class","flex-1 flex mt-2 relative"),S(o,"class","flex-1 flex flex-col"),S(r,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(i,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(De,on){U(De,e,on);for(let ii=0;ii<be.length;ii+=1)be[ii]&&be[ii].m(e,null);U(De,n,on),U(De,i,on),k(i,r),k(r,o),k(o,h),At.m(h,null),k(h,a),k(h,s),k(h,c),k(h,f),k(f,l),k(f,u),k(f,d),ue(p,d,null),k(d,m),k(f,g),k(f,v),ue(_,v,null),k(v,b),k(v,y),k(y,w),k(v,T),k(v,O),k(o,A),k(o,L),k(L,G),k(G,Y),ue(te,Y,null),k(G,q),k(G,N),ue(B,N,null),k(N,Q),k(N,ee),k(L,x),k(L,P),nt.m(P,null),k(P,F),ue(K,P,null),k(L,D),k(L,H),k(H,J),k(J,ie),_r[Z].m(ie,null),k(H,se),k(H,pe),ue(z,pe,null),k(H,X),k(H,oe),k(oe,ae),ue(re,ae,null),k(ae,ce),k(oe,_e),k(oe,Pe),ue(Se,Pe,null),k(Pe,le),k(H,xe),k(H,Me),ue(Ue,Me,null),k(r,Qe),Xt&&Xt.m(r,null),yt=!0,ht||(Pn=[ne(l,"click",t[23]),ne(d,"click",t[24]),ne(v,"click",t[25]),ne(N,"click",t[26]),ne(ie,"click",t[28]),ne(ae,"click",t[29]),ne(Pe,"click",t[30])],ht=!0)},p(De,on){if(on[0]&8192){de=Le(De[13]);let Mn;for(Mn=0;Mn<de.length;Mn+=1){const Ad=X_(De,de,Mn);be[Mn]?be[Mn].p(Ad,on):(be[Mn]=G_(Ad),be[Mn].c(),be[Mn].m(e,null))}for(;Mn<be.length;Mn+=1)be[Mn].d(1);be.length=de.length}dt===(dt=ze(De))&&At?At.p(De,on):(At.d(1),At=dt(De),At&&(At.c(),At.m(h,a))),(!yt||on[0]&2048)&&C!==(C=De[11].length+"")&&Ve(w,C),on[0]&1&&Xe(R,R=De[0])?(Oe(),W(nt,1,1,ve),Ee(),nt=K_(De),nt.c(),I(nt,1),nt.m(P,F)):nt.p(De,on);const ii={};!M&&on[0]&1&&(M=!0,ii.printKey=De[0],Ut(()=>M=!1)),K.$set(ii);let ns=Z;Z=Dd(De),Z!==ns&&(Oe(),W(_r[ns],1,1,()=>{_r[ns]=null}),Ee(),$=_r[Z],$||($=_r[Z]=vr[Z](De),$.c()),I($,1),$.m(ie,null)),(!yt||on[0]&32&&ot!==(ot="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(De[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"))&&S(H,"class",ot),De[12].options&&!De[9].currentOption?Xt?(Xt.p(De,on),on[0]&4608&&I(Xt,1)):(Xt=J_(De),Xt.c(),I(Xt,1),Xt.m(r,null)):Xt&&(Oe(),W(Xt,1,1,()=>{Xt=null}),Ee())},i(De){yt||(I(p.$$.fragment,De),I(_.$$.fragment,De),I(te.$$.fragment,De),I(B.$$.fragment,De),I(nt),I(K.$$.fragment,De),I($),I(z.$$.fragment,De),I(re.$$.fragment,De),I(Se.$$.fragment,De),I(Ue.$$.fragment,De),I(Xt),yt=!0)},o(De){W(p.$$.fragment,De),W(_.$$.fragment,De),W(te.$$.fragment,De),W(B.$$.fragment,De),W(nt),W(K.$$.fragment,De),W($),W(z.$$.fragment,De),W(re.$$.fragment,De),W(Se.$$.fragment,De),W(Ue.$$.fragment,De),W(Xt),yt=!1},d(De){De&&(j(e),j(n),j(i)),Ft(be,De),At.d(),fe(p),fe(_),fe(te),fe(B),nt.d(De),fe(K),_r[Z].d(),fe(z),fe(re),fe(Se),fe(Ue),Xt&&Xt.d(),ht=!1,We(Pn)}}}function G_(t){let e,n,i;return{c(){e=E("div"),n=Te("podiz"),S(e,"style",i=`font-family:${t[65].fontFamily}`)},m(r,o){U(r,e,o),k(e,n)},p(r,o){o[0]&8192&&i!==(i=`font-family:${r[65].fontFamily}`)&&S(e,"style",i)},d(r){r&&j(e)}}}function R4(t){let e;return{c(){e=E("div"),e.textContent="[LOGO]",S(e,"class","hidden md:block")},m(n,i){U(n,e,i)},p:ve,d(n){n&&j(e)}}}function I4(t){let e,n,i,r;return{c(){e=E("div"),n=E("img"),Ze(n.src,i=t[10].image.url)||S(n,"src",i),S(n,"alt",r=t[10].shopName),S(n,"class","max-h-12 object-contain"),S(e,"class","hidden md:block")},m(o,h){U(o,e,h),k(e,n)},p(o,h){h[0]&1024&&!Ze(n.src,i=o[10].image.url)&&S(n,"src",i),h[0]&1024&&r!==(r=o[10].shopName)&&S(n,"alt",r)},d(o){o&&j(e)}}}function q_(t){let e,n;return e=new BI({}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function K_(t){let e,n,i=t[9].prints[t[14]]&&q_();return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),U(r,e,o),n=!0},p(r,o){r[9].prints[r[14]]?i?o[0]&16896&&I(i,1):(i=q_(),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Oe(),W(i,1,1,()=>{i=null}),Ee())},i(r){n||(I(i),n=!0)},o(r){W(i),n=!1},d(r){r&&j(e),i&&i.d(r)}}}function F4(t){let e,n;return e=new ke({props:{icon:"mingcute:right-fill"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function L4(t){let e,n;return e=new ke({props:{icon:"mingcute:left-fill"}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function J_(t){let e,n,i,r;function o(s){t[31](s)}function h(s){t[32](s)}let a={loadPublish:t[17]};return t[6]!==void 0&&(a.publishId=t[6]),t[3]!==void 0&&(a.runEditor=t[3]),e=new TF({props:a}),it.push(()=>Et(e,"publishId",o)),it.push(()=>Et(e,"runEditor",h)),{c(){he(e.$$.fragment)},m(s,c){ue(e,s,c),r=!0},p(s,c){const f={};!n&&c[0]&64&&(n=!0,f.publishId=s[6],Ut(()=>n=!1)),!i&&c[0]&8&&(i=!0,f.runEditor=s[3],Ut(()=>i=!1)),e.$set(f)},i(s){r||(I(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){fe(e,s)}}}function Z_(t){let e,n;return e=new fN({props:{previews:t[7],mode:t[15]}}),{c(){he(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.previews=i[7]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){W(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function Q_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return s=new ke({props:{icon:"lets-icons:close-round",height:"30"}}),f=new C4({props:{user:t[8],handleClick:t[16]}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("h1"),o=E("span"),o.textContent="디자인보관함",h=V(),a=E("button"),he(s.$$.fragment),c=V(),he(f.$$.fragment),S(a,"type","button"),S(a,"class","btn white-btn"),S(r,"class","font-semibold text-lg border-b py-3 flex justify-between"),S(i,"class","flex-1 flex flex-col p-5"),S(n,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-y-auto"),S(e,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(p,m){U(p,e,m),k(e,n),k(n,i),k(i,r),k(r,o),k(r,h),k(r,a),ue(s,a,null),k(i,c),ue(f,i,null),l=!0,u||(d=ne(a,"click",t[33]),u=!0)},p(p,m){const g={};m[0]&256&&(g.user=p[8]),f.$set(g)},i(p){l||(I(s.$$.fragment,p),I(f.$$.fragment,p),l=!0)},o(p){W(s.$$.fragment,p),W(f.$$.fragment,p),l=!1},d(p){p&&j(e),fe(s),fe(f),u=!1,d()}}}function N4(t){let e,n,i,r,o;return{c(){e=E("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-ezfnmf")},m(h,a){U(h,e,a),i=!0,r||(o=ne(e,"click",Wn),r=!0)},p:ve,i(h){i||(h&&Vt(()=>{i&&(n||(n=Qt(e,Ud,{},!0)),n.run(1))}),i=!0)},o(h){h&&(n||(n=Qt(e,Ud,{},!1)),n.run(0)),i=!1},d(h){h&&j(e),h&&n&&n.end(),r=!1,o()}}}function ey(t){let e,n,i;function r(h){t[34](h)}let o={isProgress:!0};return t[2]!==void 0&&(o.progress=t[2]),e=new xb({props:o}),it.push(()=>Et(e,"progress",r)),{c(){he(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};!n&&a[0]&4&&(n=!0,s.progress=h[2],Ut(()=>n=!1)),e.$set(s)},i(h){i||(I(e.$$.fragment,h),i=!0)},o(h){W(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function j4(t){let e,n,i,r,o,h,a,s=t[3]&&$_(t),c=t[7]&&Z_(t),f=t[4]&&Q_(t);r=new _C({props:{$$slots:{backdrop:[N4]},$$scope:{ctx:t}}});let l=t[1]&&ey(t);return{c(){s&&s.c(),e=V(),c&&c.c(),n=V(),f&&f.c(),i=V(),he(r.$$.fragment),o=V(),l&&l.c(),h=et()},m(u,d){s&&s.m(u,d),U(u,e,d),c&&c.m(u,d),U(u,n,d),f&&f.m(u,d),U(u,i,d),ue(r,u,d),U(u,o,d),l&&l.m(u,d),U(u,h,d),a=!0},p(u,d){u[3]?s?(s.p(u,d),d[0]&8&&I(s,1)):(s=$_(u),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(Oe(),W(s,1,1,()=>{s=null}),Ee()),u[7]?c?(c.p(u,d),d[0]&128&&I(c,1)):(c=Z_(u),c.c(),I(c,1),c.m(n.parentNode,n)):c&&(Oe(),W(c,1,1,()=>{c=null}),Ee()),u[4]?f?(f.p(u,d),d[0]&16&&I(f,1)):(f=Q_(u),f.c(),I(f,1),f.m(i.parentNode,i)):f&&(Oe(),W(f,1,1,()=>{f=null}),Ee());const p={};d[2]&64&&(p.$$scope={dirty:d,ctx:u}),r.$set(p),u[1]?l?(l.p(u,d),d[0]&2&&I(l,1)):(l=ey(u),l.c(),I(l,1),l.m(h.parentNode,h)):l&&(Oe(),W(l,1,1,()=>{l=null}),Ee())},i(u){a||(I(s),I(c),I(f),I(r.$$.fragment,u),I(l),a=!0)},o(u){W(s),W(c),W(f),W(r.$$.fragment,u),W(l),a=!1},d(u){u&&(j(e),j(n),j(i),j(o),j(h)),s&&s.d(u),c&&c.d(u),f&&f.d(u),fe(r,u),l&&l.d(u)}}}function ty(t,e){for(const[n,i]of t.entries())for(const[r,o]of e[n].canvasJSON.objects.entries())(o.objType==="clipart"||o.objType==="text"||o.objType==="shape"||o.objType==="draw"||o.objType==="upload")&&t[n].canvasJSON.objects.push(o);return t}function ny(t){console.log({e:t})}function B4(t,e,n){let i,r,o,h,a,s,c,f,l,u;Ne(t,je,de=>n(9,i=de)),Ne(t,lo,de=>n(10,r=de)),Ne(t,li,de=>n(11,o=de)),Ne(t,Po,de=>n(42,h=de)),Ne(t,Ti,de=>n(12,a=de)),Ne(t,mp,de=>n(43,s=de)),Ne(t,Uo,de=>n(13,c=de)),Ne(t,Il,de=>n(44,f=de)),Ne(t,Yo,de=>n(45,l=de)),Ne(t,Ko,de=>n(14,u=de)),ye(je,i.prints=[],i);let d=1,p=!1,m=0,g=!1,v=!1,_=!1,b=null,y=null,C=null,w=null,T=null,O="",{uuid:A,shopid:L,provider:G,productno:Y,previewclass:te,previewitem:q,mode:N}=kx();G&&m1("provider",G),Yi(async()=>{n(8,C=await Px()),console.log({user:C});const de=document.getElementById("podiz-member-design");if(de&&de.addEventListener("click",ce),te){n(7,y=Ax(te,q));return}if(N==="product"){Ox();const ze=document.createElement("button");ze.textContent="상품만들기",ze.addEventListener("click",()=>B());const dt=document.getElementById("podiz-button");dt&&(ze.classList.add("podiz-run-btn"),dt.appendChild(ze))}const be=document.getElementById("podiz-data-uuid");return be&&(w=be.value),()=>{de&&de.removeEventListener("click",ce)}});async function B(de=null){if(n(1,p=!0),n(4,v=!1),de&&(w=de),w){const{data:be,error:ze}=await zy(w);if(ze){console.log(ze);return}be&&(Y=be.cafe24Product.productno,G=be.cafe24Product?"cafe24":null,L=be.publish.shop,T=be)}if(await ee(),await Q(),L&&await HT(L),G==="cafe24"){ye(Ti,a.options={},a),ye(Ti,a.productno=Y,a);{const be=await bf(Y),ze=await gg(Y);ye(Ti,a.options=be.options,a),ye(Ti,a.product=ze.product,a)}}n(1,p=!1),n(3,g=!0)}async function Q(){var ze;n(1,p=!0);const{data:de,error:be}=await IT(b);if(be){console.error(be);return}ye(je,i.id=null,i),ye(je,i.scenes=de.editor.scenes,i),ye(je,i.product=de.editor.product,i),ye(je,i.currentOption=T?T.currentOption:null,i),ye(je,i.count=i.product.minCnt?i.product.minCnt:1,i),ye(je,i.uuid=Er(),i),ye(je,i.uploads=de.uploads?de.uploads:[],i),ye(je,i.publish=de.id,i),ye(je,i.cafe24MallId=C.cafe24MallId,i),ye(je,i.cafe24MemberId=C.cafe24MemberId,i),ye(je,i.cafe24ShopNo=C.cafe24ShopNo,i),ye(je,i.cafe24UserType=C.cafe24UserType,i),ye(je,i.cafe24Product=a,i),await P(i.product.shop),await v1(),ye(je,i.prints=de.editor.prints,i),T&&(T.uploads&&(ye(je,i.uploads=T.uploads,i),ye(Yo,l=T.uploads,l)),ye(je,i.prints=ty(i.prints,T.prints),i)),s&&ye(je,i.prints=ty(i.prints,s),i),(ze=i.scenes)!=null&&ze.length&&x(),n(0,d++,d),n(1,p=!1)}async function ee(){const{data:de,error:be}=await WT({provider:G,productno:Y,shopid:L});if(!de.length||be){alert("잘못된 연결이거나 연결에 오류가있습니다."),n(3,g=!1);return}ye(Il,f=de[0],f);const ze=f.linkOptions;ze.length&&(i!=null&&i.currentOption||(n(6,b=ze[0].publish),ze[0]))}async function x(){ye(je,i.composites=[],i);for(const de of i.prints)if(de.id){const be=await YT(de.id);be.data&&ye(je,i.composites=[...i.composites,be.data],i)}}async function P(de){try{const be=await jT(de);be.data&&ye(Uo,c=be.data.defaultFonts,c);const ze=await NT(de);ze.data&&ye(Uo,c=[...c,...ze.data],c);const dt=c.map(Lt=>Lt.css).join(`
`),At=document.createElement("style");At.textContent=dt,document.head.appendChild(At),await document.fonts.ready;const nt=c.map(Lt=>Lt.fontFamily&&Lt.url?new FontFace(Lt.fontFamily,`url(${Lt.url})`).load().catch(ts=>(console.warn(`Failed to load font: ${Lt.fontFamily}`,ts),null)):Promise.resolve());await Promise.all(nt),document.dispatchEvent(new Event("fontsLoaded"))}catch(be){console.error("Error loading fonts:",be)}}async function R(){var de;try{n(1,p=!0),n(2,m=1);const be=i.prints;for(const[ze,dt]of be.entries())if(n(2,m=100/be.length*(ze+1)),dt.id&&dt.imageDataURL&&dt.isChange){const At=await hx(i,ze,i.currentOption.colorCode);D(At.scenes),(de=At.scenes)!=null&&de.length&&ye(je,i.thumbnails=At.scenes.map(nt=>nt.compositeThumbnail).filter(nt=>nt),i),dt.isChange=!1}}catch(be){console.log({error:be})}finally{n(1,p=!1)}}async function F(){await R(),Fa(wF,{isOpen:!0,message:"미리보기"})}function K(){Fa(iN,{isOpen:!0,message:"주문하기",changeEditorDataIndex:z,sendOrder:oe})}async function M(){await se(),K()}function D(de){for(const[be,ze]of de.entries())ye(je,i.scenes[be].composites=ze.composites,i),ze.compositeThumbnail&&ye(je,i.scenes[be].compositeThumbnail=ze.compositeThumbnail,i)}async function H(de=!0){iC(),await R(),await re();const be=JSON.stringify(i);h!=null&&h>=0&&h<o.length?ye(li,o[h]=JSON.parse(be),o):ye(li,o=[...o,JSON.parse(be)],o),de&&K()}async function J(){for(const de of o){const{id:be}=await ie(de);de.id=be}}async function ie(de){const be={id:de.id?de.id:null,uuid:de.uuid,prints:de.prints,uploads:de.uploads,scenes:de.scenes,thumbnails:de.thumbnails,printImages:de.printImages,currentOption:de.currentOption,provider:G,count:de.count,publish:de.publish,cafe24MallId:de.cafe24MallId,cafe24ShopNo:de.cafe24ShopNo,cafe24UserType:de.cafe24UserType,cafe24MemberId:de.cafe24MemberId,cafe24Product:de.cafe24Product,printMemo:O},{data:ze,error:dt}=await BT(be);if(dt){console.log(dt);return}return console.log("save data",ze),ze}async function Z(){await se(),ye(Po,h++,h),ye(je,i.currentOption=null,i),i.prints.forEach(de=>{de.isChange!==void 0&&de.isChange===!1&&(de.isChange=!0)})}async function $(){await se(),ye(Po,h++,h),Fa(M4,{isOpen:!0,changeProduct:pe})}async function se(){i.prints.filter(be=>be.isChange).length>=1&&(confirm("변경사항이 있습니다. 디자인 저장을 하지않으면 해당 옵션의 편집내용은 저장되지 않습니다. 저장하시겠습니까?")?await H(!1):console.log("사용자가 변경을 취소했습니다."))}async function pe({product_no:de}){T=null,Y=de,ye(mp,s=[...i.prints],s),ye(Ti,a.options={},a),ye(Ti,a.productno=Y,a),await ee(),await Q();const be=await bf(Y),ze=await gg(Y);ye(Ti,a.options=be.options,a),ye(Ti,a.product=ze.product,a)}function z(de){ye(Po,h=de,h);const be=JSON.stringify(o[de]);ye(je,i=JSON.parse(be),i),n(0,d++,d)}function X(de){O=de,console.log({printMemo:O})}async function oe(){if(r.usePrintMemo){Wn(),Fa(k4,{isOpen:!0,orderAction:ae,setPrintMemo:X});return}ae()}async function ae(){n(1,p=!0);try{await J(),await Dx(),n(3,g=!1)}catch(de){alert(de)}finally{n(1,p=!1)}}async function re(){var At;n(1,p=!0);const de=i.prints.length+i.scenes.length;let be=0;n(2,m=0);const ze=`editorData/${i.uuid}`,dt=i;ye(je,i.printImages=[],i);for(let nt=0;nt<dt.prints.length;nt++){const Lt=dt.prints[nt];if(Lt.imageDataURL?Lt.imageDataURL.startsWith("data:image"):null){const vr=await Mr(Lt.imageDataURL,`${ze}/print_${nt}.png`,ny,{extension:"png"});Lt.imageDataURL=vr.url,i.printImages.push(vr)}else i.printImages.push({url:Lt.imageDataURL});be++,n(2,m=be/de*100)}for(let nt=0;nt<dt.scenes.length;nt++){const Lt=dt.scenes[nt];if((At=Lt.compositeThumbnail)!=null&&At.url?Lt.compositeThumbnail.url.startsWith("data:image"):null){const vr=await Mr(Lt.compositeThumbnail.url,`${ze}/scene_${nt}.jpg`,ny,{extension:"jpg"});Lt.compositeThumbnail.url=vr.url}be++,n(2,m=be/de*100)}return ye(je,i.thumbnails=dt.scenes.map(nt=>nt.compositeThumbnail).filter(nt=>nt),i),n(1,p=!1),i}function ce(){console.log("handleOpenMemberDesign"),n(4,v=!0)}const _e=()=>H(),Pe=()=>F(),Se=()=>M(),le=()=>n(3,g=!1);function xe(de){d=de,n(0,d)}const Me=()=>n(5,_=!_),Ue=()=>Z(),ot=()=>$();function Qe(de){b=de,n(6,b)}function yt(de){g=de,n(3,g)}const ht=()=>n(4,v=!1);function Pn(de){m=de,n(2,m)}return[d,p,m,g,v,_,b,y,C,i,r,o,a,c,u,N,B,Q,F,M,H,Z,$,_e,Pe,Se,le,xe,Me,Ue,ot,Qe,yt,ht,Pn]}class U4 extends Ge{constructor(e){super(),$e(this,e,B4,j4,Xe,{},null,[-1,-1,-1])}}let Y4=document.getElementById("podiz-app");new U4({target:Y4})});export default W4();
