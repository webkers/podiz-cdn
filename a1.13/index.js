var s1=Object.defineProperty;var o1=(t,e,n)=>e in t?s1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a1=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Hc=(t,e,n)=>(o1(t,typeof e!="symbol"?e+"":e,n),n);var dU=a1((mU,kl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ge(){}const th=t=>t;function vi(t,e){for(const n in e)t[n]=e[n];return t}function l1(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function fy(t){return t()}function Md(){return Object.create(null)}function We(t){t.forEach(fy)}function Wn(t){return typeof t=="function"}function Ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Fa;function Xe(t,e){return t===e?!0:(Fa||(Fa=document.createElement("a")),Fa.href=e,t===Fa.href)}function c1(t){return Object.keys(t).length===0}function nh(t,...e){if(t==null){for(const i of e)i(void 0);return ge}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function di(t){let e;return nh(t,n=>e=n)(),e}function je(t,e,n){t.$$.on_destroy.push(nh(e,n))}function ga(t,e,n,i){if(t){const r=hy(t,e,n,i);return t[0](r)}}function hy(t,e,n,i){return t[1]&&i?vi(n.ctx.slice(),t[1](i(e))):n.ctx}function ma(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],h=Math.max(e.dirty.length,r.length);for(let a=0;a<h;a+=1)o[a]=e.dirty[a]|r[a];return o}return e.dirty|r}return e.dirty}function va(t,e,n,i,r,o){if(r){const h=hy(e,n,i,o);t.p(h,r)}}function _a(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Id(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ye(t,e,n){return t.set(n),e}function dy(t){return t&&Wn(t.destroy)?t.destroy:ge}function Rd(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const py=typeof window<"u";let gy=py?()=>window.performance.now():()=>Date.now(),ih=py?t=>requestAnimationFrame(t):ge;const Ps=new Set;function my(t){Ps.forEach(e=>{e.c(t)||(Ps.delete(e),e.f())}),Ps.size!==0&&ih(my)}function vy(t){let e;return Ps.size===0&&ih(my),{promise:new Promise(n=>{Ps.add(e={c:t,f:n})}),abort(){Ps.delete(e)}}}function k(t,e){t.appendChild(e)}function _y(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function u1(t){const e=E("style");return e.textContent="/* empty */",f1(_y(t),e),e.sheet}function f1(t,e){return k(t.head||t,e),e.sheet}function j(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function Dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function h1(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function we(t){return document.createTextNode(t)}function V(){return we(" ")}function et(){return we("")}function Q(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Fi(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d1(t){return function(e){e.target===this&&t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const p1=["width","height"];function Ol(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&p1.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function Fd(t,e){for(const n in e)S(t,n,e[n])}function yy(t){let e;return{p(...n){e=n,e.forEach(i=>t.push(i))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function by(t){return t===""?null:+t}function g1(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function mt(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function _i(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Lo(t){const e=t.querySelector(":checked");return e&&e.__value}let La;function m1(){if(La===void 0){La=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{La=!0}}return La}function v1(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=E("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=m1();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Q(window,"message",h=>{h.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=Q(i.contentWindow,"resize",e),e()}),k(t,i),()=>{(r||o&&i.contentWindow)&&o(),N(i)}}function yi(t,e,n){t.classList.toggle(e,!!n)}function wy(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function un(t,e){return new t(e)}const El=new Map;let xl=0;function _1(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function y1(t,e){const n={stylesheet:u1(e),rules:{}};return El.set(t,n),n}function Vu(t,e,n,i,r,o,h,a=0){const s=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=s){const v=e+(n-e)*o(g);c+=g*100+`%{${h(v,1-v)}}
`}const f=c+`100% {${h(n,1-n)}}
}`,l=`__svelte_${_1(f)}_${a}`,u=_y(t),{stylesheet:d,rules:p}=El.get(u)||y1(u,t);p[l]||(p[l]=!0,d.insertRule(`@keyframes ${l} ${f}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${l} ${i}ms linear ${r}ms 1 both`,xl+=1,l}function Cy(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),xl-=r,xl||b1())}function b1(){ih(()=>{xl||(El.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&N(e)}),El.clear())})}function w1(t,e,n,i){if(!e)return ge;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return ge;const{delay:o=0,duration:h=300,easing:a=th,start:s=gy()+o,end:c=s+h,tick:f=ge,css:l}=n(t,{from:e,to:r},i);let u=!0,d=!1,p;function m(){l&&(p=Vu(t,0,1,h,o,a,l)),o||(d=!0)}function g(){l&&Cy(t,p),u=!1}return vy(v=>{if(!d&&v>=s&&(d=!0),d&&v>=c&&(f(1,0),g()),!u)return!1;if(d){const _=v-s,b=0+1*a(_/h);f(b,1-b)}return!0}),m(),f(0,1),g}function C1(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,S1(t,r)}}function S1(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r=i.transform==="none"?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Jo;function Li(t){Jo=t}function ya(){if(!Jo)throw new Error("Function called outside component initialization");return Jo}function ki(t){ya().$$.on_mount.push(t)}function Oi(t){ya().$$.on_destroy.push(t)}function zt(){const t=ya();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=wy(e,n,{cancelable:i});return r.slice().forEach(h=>{h.call(t,o)}),!o.defaultPrevented}return!0}}function T1(t,e){return ya().$$.context.set(t,e),e}function bi(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ms=[],nt=[];let Ms=[];const Xu=[],Sy=Promise.resolve();let $u=!1;function Ty(){$u||($u=!0,Sy.then(rh))}function k1(){return Ty(),Sy}function Ut(t){Ms.push(t)}function Wt(t){Xu.push(t)}const Vc=new Set;let rs=0;function rh(){if(rs!==0)return;const t=Jo;do{try{for(;rs<ms.length;){const e=ms[rs];rs++,Li(e),O1(e.$$)}}catch(e){throw ms.length=0,rs=0,e}for(Li(null),ms.length=0,rs=0;nt.length;)nt.pop()();for(let e=0;e<Ms.length;e+=1){const n=Ms[e];Vc.has(n)||(Vc.add(n),n())}Ms.length=0}while(ms.length);for(;Xu.length;)Xu.pop()();$u=!1,Vc.clear(),Li(t)}function O1(t){if(t.fragment!==null){t.update(),We(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ut)}}function E1(t){const e=[],n=[];Ms.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ms=e}let bo;function x1(){return bo||(bo=Promise.resolve(),bo.then(()=>{bo=null})),bo}function Xc(t,e,n){t.dispatchEvent(wy(`${e?"intro":"outro"}${n}`))}const al=new Set;let Ni;function ke(){Ni={r:0,c:[],p:Ni}}function Oe(){Ni.r||We(Ni.c),Ni=Ni.p}function R(t,e){t&&t.i&&(al.delete(t),t.i(e))}function H(t,e,n,i){if(t&&t.o){if(al.has(t))return;al.add(t),Ni.c.push(()=>{al.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const D1={duration:0};function Yt(t,e,n,i){let o=e(t,n,{direction:"both"}),h=i?0:1,a=null,s=null,c=null,f;function l(){c&&Cy(t,c)}function u(p,m){const g=p.b-h;return m*=Math.abs(g),{a:h,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function d(p){const{delay:m=0,duration:g=300,easing:v=th,tick:_=ge,css:b}=o||D1,y={start:gy()+m,b:p};p||(y.group=Ni,Ni.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),a||s?s=y:(b&&(l(),c=Vu(t,h,p,g,m,v,b)),p&&_(0,1),a=u(y,g),Ut(()=>Xc(t,p,"start")),vy(C=>{if(s&&C>s.start&&(a=u(s,g),s=null,Xc(t,a.b,"start"),b&&(l(),c=Vu(t,h,a.b,a.duration,0,v,o.css))),a){if(C>=a.end)_(h=a.b,1-h),Xc(t,a.b,"end"),s||(a.b?l():--a.group.r||We(a.group.c)),a=null;else if(C>=a.start){const w=C-a.start;h=a.a+a.d*v(w/a.duration),_(h,1-h)}}return!!(a||s)}))}return{run(p){Wn(o)?x1().then(()=>{o=o({direction:p?"in":"out"}),d(p)}):d(p)},end(){l(),a=s=null}}}function Vs(t,e){const n=e.token={};function i(r,o,h,a){if(e.token!==n)return;e.resolved=a;let s=e.ctx;h!==void 0&&(s=s.slice(),s[h]=a);const c=r&&(e.current=r)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((l,u)=>{u!==o&&l&&(ke(),H(l,1,1,()=>{e.blocks[u]===l&&(e.blocks[u]=null)}),Oe())}):e.block.d(1),c.c(),R(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[o]=c),f&&rh()}if(l1(t)){const r=ya();if(t.then(o=>{Li(r),i(e.then,1,e.value,o),Li(null)},o=>{if(Li(r),i(e.catch,2,e.error,o),Li(null),!e.hasCatch)throw o}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function sh(t,e,n){const i=e.slice(),{resolved:r}=t;t.current===t.then&&(i[t.value]=r),t.current===t.catch&&(i[t.error]=r),t.block.p(i,n)}function Me(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ky(t,e){H(t,1,1,()=>{e.delete(t.key)})}function A1(t,e){t.f(),ky(t,e)}function Oy(t,e,n,i,r,o,h,a,s,c,f,l){let u=t.length,d=o.length,p=u;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,_=new Map,b=[];for(p=d;p--;){const T=l(r,o,p),O=n(T);let A=h.get(O);A?i&&b.push(()=>A.p(T,e)):(A=c(O,T),A.c()),v.set(O,g[p]=A),O in m&&_.set(O,Math.abs(p-m[O]))}const y=new Set,C=new Set;function w(T){R(T,1),T.m(a,f),h.set(T.key,T),f=T.first,d--}for(;u&&d;){const T=g[d-1],O=t[u-1],A=T.key,M=O.key;T===O?(f=T.first,u--,d--):v.has(M)?!h.has(A)||y.has(A)?w(T):C.has(M)?u--:_.get(A)>_.get(M)?(C.add(A),w(T)):(y.add(M),u--):(s(O,h),u--)}for(;u--;){const T=t[u];v.has(T.key)||s(T,h)}for(;d;)w(g[d-1]);return We(b),g}function Vr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const h=t[o],a=e[o];if(a){for(const s in h)s in a||(i[s]=1);for(const s in a)r[s]||(n[s]=a[s],r[s]=1);t[o]=a}else for(const s in h)r[s]=1}for(const h in i)h in n||(n[h]=void 0);return n}function Dl(t){return typeof t=="object"&&t!==null?t:{}}function xt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function de(t){t&&t.c()}function ue(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ut(()=>{const o=t.$$.on_mount.map(fy).filter(Wn);t.$$.on_destroy?t.$$.on_destroy.push(...o):We(o),t.$$.on_mount=[]}),r.forEach(Ut)}function fe(t,e){const n=t.$$;n.fragment!==null&&(E1(n.after_update),We(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P1(t,e){t.$$.dirty[0]===-1&&(ms.push(t),Ty(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ge(t,e,n,i,r,o,h=null,a=[-1]){const s=Jo;Li(t);const c=t.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:r,bound:Md(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Md(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};h&&h(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(l,u,...d)=>{const p=d.length?d[0]:u;return c.ctx&&r(c.ctx[l],c.ctx[l]=p)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](p),f&&P1(t,l)),u}):[],c.update(),f=!0,We(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const l=g1(e.target);c.fragment&&c.fragment.l(l),l.forEach(N)}else c.fragment&&c.fragment.c();e.intro&&R(t.$$.fragment),ue(t,e.target,e.anchor),rh()}Li(s)}class qe{constructor(){Hc(this,"$$");Hc(this,"$$set")}$destroy(){fe(this,1),this.$destroy=ge}$on(e,n){if(!Wn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!c1(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const M1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(M1);var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ey(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var ft={};const R1={},F1=Object.freeze(Object.defineProperty({__proto__:null,default:R1},Symbol.toStringTag,{value:"Module"})),Fr=Ey(F1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Fr,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Fr.implForWrapper,e.nodeCanvas=Fr.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function a(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:e.util.array.fill(m,!1)}}function s(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function c(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function f(d,p){if(arguments.length===1)for(var m in d)c.call(this,m,d[m]);else c.call(this,d,p);return this}function l(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)a.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)a.call(this,m,d[m]);else a.call(this,d,p);return this}function u(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(_){return _!==!1}),this}e.Observable={fire:u,on:s,once:f,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,c){var f=this._objects;return c?f[s]=a:f.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,c=!1,f=0,l=arguments.length;f<l;f++)s=a.indexOf(arguments[f]),s!==-1&&(c=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var c=this.getObjects(),f=0,l=c.length;f<l;f++)a.call(s,c[f],f,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},e.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof e.Gradient)&&this.set(s,new e.Gradient(a))},_initPattern:function(a,s,c){a&&a.source&&!(a instanceof e.Pattern)?this.set(s,new e.Pattern(a,c)):c&&c()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,c=Math.atan2,f=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/u;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/u,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*l},radiansToDegrees:function(d){return d/l},rotatePoint:function(d,p,m){var g=new e.Point(d.x-p.x,d.y-p.y),v=e.util.rotateVector(g,m);return new e.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var m=e.util.sin(p),g=e.util.cos(p),v=d.x*g-d.y*m,_=d.x*m+d.y*g;return{x:v,y:_}},createVector:function(d,p){return new e.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new e.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,m){var g=e.util.createVector(d,p),v=e.util.createVector(d,m),_=e.util.calcAngleBetweenVectors(g,v),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,_),v),y=_*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,y)),angle:_}},projectStrokeOnPoints:function(d,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new e.Point(1/p.scaleX,1/p.scaleY):new e.Point(1,1),b=function(y){var C=v/Math.hypot(y.x,y.y);return new e.Point(y.x*C*_.x,y.y*C*_.y)};return d.length<=1||d.forEach(function(y,C){var w=new e.Point(y.x,y.y),T,O;C===0?(O=d[C+1],T=m?b(e.util.createVector(O,w)).addEquals(w):d[d.length-1]):C===d.length-1?(T=d[C-1],O=m?b(e.util.createVector(T,w)).addEquals(w):d[0]):(T=d[C-1],O=d[C+1]);var A=e.util.getBisector(w,T,O),M=A.vector,Y=A.angle,U,K;if(p.strokeLineJoin==="miter"&&(U=-v/Math.sin(Y/2),K=new e.Point(M.x*U*_.x,M.y*U*_.y),Math.hypot(K.x,K.y)/v<=p.strokeMiterLimit)){g.push(w.add(K)),g.push(w.subtract(K));return}U=-v*Math.SQRT2,K=new e.Point(M.x*U*_.x,M.y*U*_.y),g.push(w.add(K)),g.push(w.subtract(K))}),g},transformPoint:function(d,p,m){return m?new e.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new e.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=e.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],v=e.util.array.min(g),_=e.util.array.max(g),b=_-v,y=[d[0].y,d[1].y,d[2].y,d[3].y],C=e.util.array.min(y),w=e.util.array.max(y),T=w-C;return{left:v,top:C,width:b,height:T}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=e.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=e.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),e.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return e;var p=d.split("."),m=p.length,g,v=a||e.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var v=e.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){e.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,_)),v.src=d},loadImageInDom:function(d,p){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),e.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var v=[],_=0,b=d.length;function y(){++_===b&&p&&p(v.filter(function(C){return C}))}if(!b){p&&p(v);return}d.forEach(function(C,w){if(!C||!C.type){y();return}var T=e.util.getKlass(C.type,m);T.fromObject(C,function(O,A){A||(v[w]=O),g&&g(C,O,A),y()})})},enlivenObjectEnlivables:function(d,p,m){var g=e.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});e.util.enlivenObjects(g.map(function(v){return d[v]}),function(v){var _={};g.forEach(function(b,y){_[b]=v[y],p&&(p[b]=v[y])}),m&&m(_)})},enlivenPatterns:function(d,p){d=d||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=d.length;if(!_){p&&p(g);return}d.forEach(function(b,y){b&&b.source?new e.Pattern(b,function(C){g[y]=C,m()}):(g[y]=b,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?(typeof m<"u"&&(d[0].sourcePath=m),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new e.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in d&&(p[m[g]]=d[m[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(d){var p=e.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=c(d[1],d[0]),m=f(d[0],2)+f(d[1],2),g=s(m),v=(d[0]*d[3]-d[2]*d[1])/g,_=c(d[0]*d[2]+d[1]*d[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:_/l,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return e.iMatrix.concat();var p=e.util.degreesToRadians(d.angle),m=e.util.cos(p),g=e.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],v=e.util.multiplyTransformMatrices,_=e.util.degreesToRadians;return d.skewX&&(g=v(g,[1,0,Math.tan(_(d.skewX)),1],!0)),d.skewY&&(g=v(g,[1,Math.tan(_(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=e.util.multiplyTransformMatrices;return d.angle&&(p=m(p,e.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,e.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,b,y=d.getImageData(p,m,g*2||1,g*2||1),C=y.data.length;for(_=3;_<C&&(b=y.data[_],v=b<=0,v!==!1);_+=4);return y=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",v=d.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?e.charWidthsCache[d]&&delete e.charWidthsCache[d]:e.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return e.util.toFixed(p,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=e.util.invertTransform(p),g=e.util.multiplyTransformMatrices(m,d.calcOwnMatrix());e.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){e.util.applyTransformToObject(d,e.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=e.util.qrDecompose(p),g=new e.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=e.util.calcDimensionsMatrix(m),y=e.util.makeBoundingBoxFromPoints(_,b);return{x:y.width,y:y.height}},mergeClipPaths:function(d,p){var m=d,g=p;m.inverted&&!g.inverted&&(m=p,g=d),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new e.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(d,p,m){return m=m||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||m&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=e.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},b=[],y=0;y<g.length;y++){if(!m[y]){v+=g[y].length;continue}for(var C=0;C<g[y].length;C++){v++;var w=m[y][C];if(w&&Object.keys(w).length>0){var T=e.util.hasStyleChanged(_,w,!0);T?b.push({start:v,end:v+1,style:w}):b[b.length-1].end++}_=w||{}}}return b},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var m=p.split(`
`),g=-1,v=0,_={},b=0;b<m.length;b++)for(var y=0;y<m[b].length;y++)g++,d[v]&&d[v].start<=g&&g<d[v].end&&(_[b]=_[b]||{},_[b][y]=Object.assign({},d[v].style),g===d[v].end-1&&v++);return _}}}(t),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function f(x,P,L,I,Z,F,D,X,J,re,te){var $=e.util.cos(x),ae=e.util.sin(x),pe=e.util.cos(P),z=e.util.sin(P),G=L*Z*pe-I*F*z+D,oe=I*Z*pe+L*F*z+X,se=re+J*(-L*Z*ae-I*F*$),ie=te+J*(-I*Z*ae+L*F*$),he=G+J*(L*Z*z+I*F*pe),_e=oe+J*(I*Z*z-L*F*pe);return["C",se,ie,he,_e,G,oe]}function l(x,P,L,I,Z,F,D){var X=Math.PI,J=D*X/180,re=e.util.sin(J),te=e.util.cos(J),$=0,ae=0;L=Math.abs(L),I=Math.abs(I);var pe=-te*x*.5-re*P*.5,z=-te*P*.5+re*x*.5,G=L*L,oe=I*I,se=z*z,ie=pe*pe,he=G*oe-G*se-oe*ie,_e=0;if(he<0){var Ie=Math.sqrt(1-he/(G*oe));L*=Ie,I*=Ie}else _e=(Z===F?-1:1)*Math.sqrt(he/(G*se+oe*ie));var Te=_e*L*z/I,le=-_e*I*pe/L,Ee=te*Te-re*le+x*.5,Fe=re*Te+te*le+P*.5,Ue=u(1,0,(pe-Te)/L,(z-le)/I),lt=u((pe-Te)/L,(z-le)/I,(-pe-Te)/L,(-z-le)/I);F===0&&lt>0?lt-=2*X:F===1&&lt<0&&(lt+=2*X);for(var tt=Math.ceil(Math.abs(lt/X*2)),bt=[],Ke=lt/tt,Mn=8/3*Math.sin(Ke/4)*Math.sin(Ke/4)/Math.sin(Ke/2),In=Ue+Ke,ce=0;ce<tt;ce++)bt[ce]=f(Ue,In,te,re,L,I,Ee,Fe,Mn,$,ae),$=bt[ce][5],ae=bt[ce][6],Ue=In,In+=Ke;return bt}function u(x,P,L,I){var Z=Math.atan2(P,x),F=Math.atan2(I,L);return F>=Z?F-Z:2*Math.PI-(Z-F)}function d(x,P,L,I,Z,F,D,X){var J;if(e.cachesBoundsOfCurve&&(J=a.call(arguments),e.boundsOfCurveCache[J]))return e.boundsOfCurveCache[J];var re=Math.sqrt,te=Math.min,$=Math.max,ae=Math.abs,pe=[],z=[[],[]],G,oe,se,ie,he,_e,Ie,Te;oe=6*x-12*L+6*Z,G=-3*x+9*L-9*Z+3*D,se=3*L-3*x;for(var le=0;le<2;++le){if(le>0&&(oe=6*P-12*I+6*F,G=-3*P+9*I-9*F+3*X,se=3*I-3*P),ae(G)<1e-12){if(ae(oe)<1e-12)continue;ie=-se/oe,0<ie&&ie<1&&pe.push(ie);continue}Ie=oe*oe-4*se*G,!(Ie<0)&&(Te=re(Ie),he=(-oe+Te)/(2*G),0<he&&he<1&&pe.push(he),_e=(-oe-Te)/(2*G),0<_e&&_e<1&&pe.push(_e))}for(var Ee,Fe,Ue=pe.length,lt=Ue,tt;Ue--;)ie=pe[Ue],tt=1-ie,Ee=tt*tt*tt*x+3*tt*tt*ie*L+3*tt*ie*ie*Z+ie*ie*ie*D,z[0][Ue]=Ee,Fe=tt*tt*tt*P+3*tt*tt*ie*I+3*tt*ie*ie*F+ie*ie*ie*X,z[1][Ue]=Fe;z[0][lt]=x,z[1][lt]=P,z[0][lt+1]=D,z[1][lt+1]=X;var bt=[{x:te.apply(null,z[0]),y:te.apply(null,z[1])},{x:$.apply(null,z[0]),y:$.apply(null,z[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[J]=bt),bt}function p(x,P,L){for(var I=L[1],Z=L[2],F=L[3],D=L[4],X=L[5],J=L[6],re=L[7],te=l(J-x,re-P,I,Z,D,X,F),$=0,ae=te.length;$<ae;$++)te[$][1]+=x,te[$][2]+=P,te[$][3]+=x,te[$][4]+=P,te[$][5]+=x,te[$][6]+=P;return te}function m(x){var P=0,L=0,I=x.length,Z=0,F=0,D,X,J,re=[],te,$,ae;for(X=0;X<I;++X){switch(J=!1,D=x[X].slice(0),D[0]){case"l":D[0]="L",D[1]+=P,D[2]+=L;case"L":P=D[1],L=D[2];break;case"h":D[1]+=P;case"H":D[0]="L",D[2]=L,P=D[1];break;case"v":D[1]+=L;case"V":D[0]="L",L=D[1],D[1]=P,D[2]=L;break;case"m":D[0]="M",D[1]+=P,D[2]+=L;case"M":P=D[1],L=D[2],Z=D[1],F=D[2];break;case"c":D[0]="C",D[1]+=P,D[2]+=L,D[3]+=P,D[4]+=L,D[5]+=P,D[6]+=L;case"C":$=D[3],ae=D[4],P=D[5],L=D[6];break;case"s":D[0]="S",D[1]+=P,D[2]+=L,D[3]+=P,D[4]+=L;case"S":te==="C"?($=2*P-$,ae=2*L-ae):($=P,ae=L),P=D[3],L=D[4],D[0]="C",D[5]=D[3],D[6]=D[4],D[3]=D[1],D[4]=D[2],D[1]=$,D[2]=ae,$=D[3],ae=D[4];break;case"q":D[0]="Q",D[1]+=P,D[2]+=L,D[3]+=P,D[4]+=L;case"Q":$=D[1],ae=D[2],P=D[3],L=D[4];break;case"t":D[0]="T",D[1]+=P,D[2]+=L;case"T":te==="Q"?($=2*P-$,ae=2*L-ae):($=P,ae=L),D[0]="Q",P=D[1],L=D[2],D[1]=$,D[2]=ae,D[3]=P,D[4]=L;break;case"a":D[0]="A",D[6]+=P,D[7]+=L;case"A":J=!0,re=re.concat(p(P,L,D)),P=D[6],L=D[7];break;case"z":case"Z":P=Z,L=F;break}J||re.push(D),te=D[0]}return re}function g(x,P,L,I){return Math.sqrt((L-x)*(L-x)+(I-P)*(I-P))}function v(x){return x*x*x}function _(x){return 3*x*x*(1-x)}function b(x){return 3*x*(1-x)*(1-x)}function y(x){return(1-x)*(1-x)*(1-x)}function C(x,P,L,I,Z,F,D,X){return function(J){var re=v(J),te=_(J),$=b(J),ae=y(J);return{x:D*re+Z*te+L*$+x*ae,y:X*re+F*te+I*$+P*ae}}}function w(x,P,L,I,Z,F,D,X){return function(J){var re=1-J,te=3*re*re*(L-x)+6*re*J*(Z-L)+3*J*J*(D-Z),$=3*re*re*(I-P)+6*re*J*(F-I)+3*J*J*(X-F);return Math.atan2($,te)}}function T(x){return x*x}function O(x){return 2*x*(1-x)}function A(x){return(1-x)*(1-x)}function M(x,P,L,I,Z,F){return function(D){var X=T(D),J=O(D),re=A(D);return{x:Z*X+L*J+x*re,y:F*X+I*J+P*re}}}function Y(x,P,L,I,Z,F){return function(D){var X=1-D,J=2*X*(L-x)+2*D*(Z-L),re=2*X*(I-P)+2*D*(F-I);return Math.atan2(re,J)}}function U(x,P,L){var I={x:P,y:L},Z,F=0,D;for(D=1;D<=100;D+=1)Z=x(D/100),F+=g(I.x,I.y,Z.x,Z.y),I=Z;return F}function K(x,P){for(var L=0,I=0,Z=x.iterator,F={x:x.x,y:x.y},D,X,J=.01,re=x.angleFinder,te;I<P&&J>1e-4;)D=Z(L),te=L,X=g(F.x,F.y,D.x,D.y),X+I>P?(L-=J,J/=2):(F=D,L+=J,I+=X);return D.angle=re(te),D}function q(x){for(var P=0,L=x.length,I,Z=0,F=0,D=0,X=0,J=[],re,te,$,ae=0;ae<L;ae++){switch(I=x[ae],te={x:Z,y:F,command:I[0]},I[0]){case"M":te.length=0,D=Z=I[1],X=F=I[2];break;case"L":te.length=g(Z,F,I[1],I[2]),Z=I[1],F=I[2];break;case"C":re=C(Z,F,I[1],I[2],I[3],I[4],I[5],I[6]),$=w(Z,F,I[1],I[2],I[3],I[4],I[5],I[6]),te.iterator=re,te.angleFinder=$,te.length=U(re,Z,F),Z=I[5],F=I[6];break;case"Q":re=M(Z,F,I[1],I[2],I[3],I[4]),$=Y(Z,F,I[1],I[2],I[3],I[4]),te.iterator=re,te.angleFinder=$,te.length=U(re,Z,F),Z=I[3],F=I[4];break;case"Z":case"z":te.destX=D,te.destY=X,te.length=g(Z,F,D,X),Z=D,F=X;break}P+=te.length,J.push(te)}return J.push({length:P,x:Z,y:F}),J}function B(x,P,L){L||(L=q(x));for(var I=0;P-L[I].length>0&&I<L.length-2;)P-=L[I].length,I++;var Z=L[I],F=P/Z.length,D=Z.command,X=x[I],J;switch(D){case"M":return{x:Z.x,y:Z.y,angle:0};case"Z":case"z":return J=new e.Point(Z.x,Z.y).lerp(new e.Point(Z.destX,Z.destY),F),J.angle=Math.atan2(Z.destY-Z.y,Z.destX-Z.x),J;case"L":return J=new e.Point(Z.x,Z.y).lerp(new e.Point(X[1],X[2]),F),J.angle=Math.atan2(X[2]-Z.y,X[1]-Z.x),J;case"C":return K(Z,P);case"Q":return K(Z,P)}}function W(x){var P=[],L=[],I,Z,F=e.rePathCommand,D="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",X="("+D+")"+e.commaWsp,J="([01])"+e.commaWsp+"?",re=X+"?"+X+"?"+X+J+J+X+"?("+D+")",te=new RegExp(re,"g"),$,ae,pe;if(!x||!x.match)return P;pe=x.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var z=0,G,oe=pe.length;z<oe;z++){I=pe[z],ae=I.slice(1).trim(),L.length=0;var se=I.charAt(0);if(G=[se],se.toLowerCase()==="a")for(var ie;ie=te.exec(ae);)for(var he=1;he<ie.length;he++)L.push(ie[he]);else for(;$=F.exec(ae);)L.push($[0]);for(var he=0,_e=L.length;he<_e;he++)Z=parseFloat(L[he]),isNaN(Z)||G.push(Z);var Ie=s[se.toLowerCase()],Te=c[se]||se;if(G.length-1>Ie)for(var le=1,Ee=G.length;le<Ee;le+=Ie)P.push([se].concat(G.slice(le,le+Ie))),se=Te;else P.push(G)}return P}function ee(x,P){var L=[],I,Z=new e.Point(x[0].x,x[0].y),F=new e.Point(x[1].x,x[1].y),D=x.length,X=1,J=0,re=D>2;for(P=P||0,re&&(X=x[2].x<F.x?-1:x[2].x===F.x?0:1,J=x[2].y<F.y?-1:x[2].y===F.y?0:1),L.push(["M",Z.x-X*P,Z.y-J*P]),I=1;I<D;I++){if(!Z.eq(F)){var te=Z.midPointFrom(F);L.push(["Q",Z.x,Z.y,te.x,te.y])}Z=x[I],I+1<x.length&&(F=x[I+1])}return re&&(X=Z.x>x[I-2].x?1:Z.x===x[I-2].x?0:-1,J=Z.y>x[I-2].y?1:Z.y===x[I-2].y?0:-1),L.push(["L",Z.x+X*P,Z.y+J*P]),L}function ne(x,P,L){return L&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-L.x,-L.y])),x.map(function(I){for(var Z=I.slice(0),F={},D=1;D<I.length-1;D+=2)F.x=I[D],F.y=I[D+1],F=e.util.transformPoint(F,P),Z[D]=F.x,Z[D+1]=F.y;return Z})}e.util.joinPath=function(x){return x.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=W,e.util.makePathSimpler=m,e.util.getSmoothPathFromPoints=ee,e.util.getPathSegmentsInfo=q,e.util.getBoundsOfCurve=d,e.util.getPointOnPath=B,e.util.transformPath=ne}(),function(){var a=Array.prototype.slice;function s(d,p){for(var m=a.call(arguments,2),g=[],v=0,_=d.length;v<_;v++)g[v]=m.length?d[v][p].apply(d[v],m):d[v][p].call(d[v]);return g}function c(d,p){return u(d,p,function(m,g){return m>=g})}function f(d,p){return u(d,p,function(m,g){return m<g})}function l(d,p){for(var m=d.length;m--;)d[m]=p;return d}function u(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,v=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],v)&&(v=d[g][p]);else for(;g--;)m(d[g],v)&&(v=d[g]);return v}}e.util.array={fill:l,invoke:s,min:f,max:c}}(),function(){function a(c,f,l){if(l)if(!e.isLikelyNode&&f instanceof Element)c=f;else if(f instanceof Array){c=[];for(var u=0,d=f.length;u<d;u++)c[u]=a({},f[u],l)}else if(f&&typeof f=="object")for(var p in f)p==="canvas"||p==="group"?c[p]=null:f.hasOwnProperty(p)&&(c[p]=a({},f[p],l));else c=f;else for(var p in f)c[p]=f[p];return c}function s(c,f){return a({},c,f)}e.util.object={extend:a,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function a(u){return u.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function s(u,d){return u.charAt(0).toUpperCase()+(d?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(u){var d=0,p,m=[];for(d=0,p;d<u.length;d++)(p=l(u,d))!==!1&&m.push(p);return m}function l(u,d){var p=u.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return u.charAt(d);if(55296<=p&&p<=56319){if(u.length<=d+1)throw"High surrogate without following low surrogate";var m=u.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return u.charAt(d)+u.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=u.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:a,capitalize:s,escapeXml:c,graphemeSplit:f}}(),function(){var a=Array.prototype.slice,s=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),f=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var y=m[_].apply(this,arguments);if(this.constructor.superclass=b,_!=="initialize")return y}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function u(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)f(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=u,g}e.util.createClass=d}(),function(){var a=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,l,u,d){f&&f.addEventListener(l,u,a?!1:d)},e.util.removeListener=function(f,l,u,d){f&&f.removeEventListener(l,u,a?!1:d)};function c(f){var l=f.changedTouches;return l&&l[0]?l[0]:f}e.util.getPointer=function(f){var l=f.target,u=e.util.getScrollLeftTop(l),d=c(f);return{x:d.clientX+u.left,y:d.clientY+u.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function a(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?u(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")u(d,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return d}var s=e.document.createElement("div"),c=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(d){return d};c?u=function(d,p){return d.style.opacity=p,d}:f&&(u=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",d}),e.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(y){return typeof y=="string"?e.document.getElementById(y):y}var c,f=function(y){return a.call(y,0)};try{c=f(e.document.childNodes)instanceof Array}catch{}c||(f=function(y){for(var C=new Array(y.length),w=y.length;w--;)C[w]=y[w];return C});function l(y,C){var w=e.document.createElement(y);for(var T in C)T==="class"?w.className=C[T]:T==="for"?w.htmlFor=C[T]:w.setAttribute(T,C[T]);return w}function u(y,C){y&&(" "+y.className+" ").indexOf(" "+C+" ")===-1&&(y.className+=(y.className?" ":"")+C)}function d(y,C,w){return typeof C=="string"&&(C=l(C,w)),y.parentNode&&y.parentNode.replaceChild(C,y),C.appendChild(y),C}function p(y){for(var C=0,w=0,T=e.document.documentElement,O=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(C=O.scrollLeft||T.scrollLeft||0,w=O.scrollTop||T.scrollTop||0):(C+=y.scrollLeft||0,w+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:C,top:w}}function m(y){var C,w=y&&y.ownerDocument,T={left:0,top:0},O={left:0,top:0},A,M={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return O;for(var Y in M)O[M[Y]]+=parseInt(g(y,Y),10)||0;return C=w.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),A=p(y),{left:T.left+A.left-(C.clientLeft||0)+O.left,top:T.top+A.top-(C.clientTop||0)+O.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(y,C){var w=e.document.defaultView.getComputedStyle(y,null);return w?w[C]:void 0}:g=function(y,C){var w=y.style[C];return!w&&y.currentStyle&&(w=y.currentStyle[C]),w},function(){var y=e.document.documentElement.style,C="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function w(O){return typeof O.onselectstart<"u"&&(O.onselectstart=e.util.falseFunction),C?O.style[C]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function T(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),C?O.style[C]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}e.util.makeElementUnselectable=w,e.util.makeElementSelectable=T}();function v(y){var C=e.jsdomImplForWrapper(y);return C._canvas||C._image}function _(y){if(e.isLikelyNode){var C=e.jsdomImplForWrapper(y);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(y,C){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=C}e.util.setImageSmoothing=b,e.util.getById=s,e.util.toArray=f,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=d,e.util.getScrollLeftTop=p,e.util.getElementOffset=m,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=_}(),function(){function a(f,l){return f+(/\?/.test(f)?"&":"?")+l}function s(){}function c(f,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",d=l.onComplete||function(){},p=new e.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=s)},u==="GET"&&(m=null,typeof l.parameters=="string"&&(f=a(f,l.parameters))),p.open(u,f,!0),(u==="POST"||u==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var a=e.util.object.extend,s=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return _.forEach(function(b){b.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(b){b.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function f(){return!1}function l(v,_,b,y){return-b*Math.cos(v/y*(Math.PI/2))+b+_}function u(v){v||(v={});var _=!1,b,y=function(){var C=e.runningAnimations.indexOf(b);return C>-1&&e.runningAnimations.splice(C,1)[0]};return b=a(s(v),{cancel:function(){return _=!0,y()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),m(function(C){var w=C||+new Date,T=v.duration||500,O=w+T,A,M=v.onChange||f,Y=v.abort||f,U=v.onComplete||f,K=v.easing||l,q="startValue"in v?v.startValue.length>0:!1,B="startValue"in v?v.startValue:0,W="endValue"in v?v.endValue:100,ee=v.byValue||(q?B.map(function(ne,x){return W[x]-B[x]}):W-B);v.onStart&&v.onStart(),function ne(x){A=x||+new Date;var P=A>O?T:A-w,L=P/T,I=q?B.map(function(F,D){return K(P,B[D],ee[D],T)}):K(P,B,ee,T),Z=Math.abs(q?(I[0]-B[0])/ee[0]:(I-B)/ee);if(b.currentValue=q?I.slice():I,b.completionRate=Z,b.durationRate=L,!_){if(Y(I,Z,L)){y();return}if(A>O){b.currentValue=q?W.slice():W,b.completionRate=1,b.durationRate=1,M(q?W.slice():W,1,1),U(W,1,1),y();return}else M(I,Z,L),m(ne)}}(w)}),b.cancel}var d=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},p=e.window.cancelAnimationFrame||e.window.clearTimeout;function m(){return d.apply(e.window,arguments)}function g(){return p.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=m,e.util.cancelAnimFrame=g,e.runningAnimations=c}(),function(){function a(c,f,l){var u="rgba("+parseInt(c[0]+l*(f[0]-c[0]),10)+","+parseInt(c[1]+l*(f[1]-c[1]),10)+","+parseInt(c[2]+l*(f[2]-c[2]),10);return u+=","+(c&&f?parseFloat(c[3]+l*(f[3]-c[3])):1),u+=")",u}function s(c,f,l,u){var d=new e.Color(c).getSource(),p=new e.Color(f).getSource(),m=u.onComplete,g=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:d,endValue:p,byValue:p,easing:function(v,_,b,y){var C=u.colorEasing?u.colorEasing(v,y):1-Math.cos(v/y*(Math.PI/2));return a(_,b,C)},onComplete:function(v,_,b){if(m)return m(a(p,p,0),_,b)},onChange:function(v,_,b){if(g){if(Array.isArray(v))return g(a(v,v,0),_,b);g(v,_,b)}}}))}e.util.animateColor=s}(),function(){function a(x,P,L,I){return x<Math.abs(P)?(x=P,I=L/4):P===0&&x===0?I=L/(2*Math.PI)*Math.asin(1):I=L/(2*Math.PI)*Math.asin(P/x),{a:x,c:P,p:L,s:I}}function s(x,P,L){return x.a*Math.pow(2,10*(P-=1))*Math.sin((P*L-x.s)*(2*Math.PI)/x.p)}function c(x,P,L,I){return L*((x=x/I-1)*x*x+1)+P}function f(x,P,L,I){return x/=I/2,x<1?L/2*x*x*x+P:L/2*((x-=2)*x*x+2)+P}function l(x,P,L,I){return L*(x/=I)*x*x*x+P}function u(x,P,L,I){return-L*((x=x/I-1)*x*x*x-1)+P}function d(x,P,L,I){return x/=I/2,x<1?L/2*x*x*x*x+P:-L/2*((x-=2)*x*x*x-2)+P}function p(x,P,L,I){return L*(x/=I)*x*x*x*x+P}function m(x,P,L,I){return L*((x=x/I-1)*x*x*x*x+1)+P}function g(x,P,L,I){return x/=I/2,x<1?L/2*x*x*x*x*x+P:L/2*((x-=2)*x*x*x*x+2)+P}function v(x,P,L,I){return-L*Math.cos(x/I*(Math.PI/2))+L+P}function _(x,P,L,I){return L*Math.sin(x/I*(Math.PI/2))+P}function b(x,P,L,I){return-L/2*(Math.cos(Math.PI*x/I)-1)+P}function y(x,P,L,I){return x===0?P:L*Math.pow(2,10*(x/I-1))+P}function C(x,P,L,I){return x===I?P+L:L*(-Math.pow(2,-10*x/I)+1)+P}function w(x,P,L,I){return x===0?P:x===I?P+L:(x/=I/2,x<1?L/2*Math.pow(2,10*(x-1))+P:L/2*(-Math.pow(2,-10*--x)+2)+P)}function T(x,P,L,I){return-L*(Math.sqrt(1-(x/=I)*x)-1)+P}function O(x,P,L,I){return L*Math.sqrt(1-(x=x/I-1)*x)+P}function A(x,P,L,I){return x/=I/2,x<1?-L/2*(Math.sqrt(1-x*x)-1)+P:L/2*(Math.sqrt(1-(x-=2)*x)+1)+P}function M(x,P,L,I){var Z=1.70158,F=0,D=L;if(x===0)return P;if(x/=I,x===1)return P+L;F||(F=I*.3);var X=a(D,L,F,Z);return-s(X,x,I)+P}function Y(x,P,L,I){var Z=1.70158,F=0,D=L;if(x===0)return P;if(x/=I,x===1)return P+L;F||(F=I*.3);var X=a(D,L,F,Z);return X.a*Math.pow(2,-10*x)*Math.sin((x*I-X.s)*(2*Math.PI)/X.p)+X.c+P}function U(x,P,L,I){var Z=1.70158,F=0,D=L;if(x===0)return P;if(x/=I/2,x===2)return P+L;F||(F=I*(.3*1.5));var X=a(D,L,F,Z);return x<1?-.5*s(X,x,I)+P:X.a*Math.pow(2,-10*(x-=1))*Math.sin((x*I-X.s)*(2*Math.PI)/X.p)*.5+X.c+P}function K(x,P,L,I,Z){return Z===void 0&&(Z=1.70158),L*(x/=I)*x*((Z+1)*x-Z)+P}function q(x,P,L,I,Z){return Z===void 0&&(Z=1.70158),L*((x=x/I-1)*x*((Z+1)*x+Z)+1)+P}function B(x,P,L,I,Z){return Z===void 0&&(Z=1.70158),x/=I/2,x<1?L/2*(x*x*(((Z*=1.525)+1)*x-Z))+P:L/2*((x-=2)*x*(((Z*=1.525)+1)*x+Z)+2)+P}function W(x,P,L,I){return L-ee(I-x,0,L,I)+P}function ee(x,P,L,I){return(x/=I)<1/2.75?L*(7.5625*x*x)+P:x<2/2.75?L*(7.5625*(x-=1.5/2.75)*x+.75)+P:x<2.5/2.75?L*(7.5625*(x-=2.25/2.75)*x+.9375)+P:L*(7.5625*(x-=2.625/2.75)*x+.984375)+P}function ne(x,P,L,I){return x<I/2?W(x*2,0,L,I)*.5+P:ee(x*2-I,0,L,I)*.5+L*.5+P}e.util.ease={easeInQuad:function(x,P,L,I){return L*(x/=I)*x+P},easeOutQuad:function(x,P,L,I){return-L*(x/=I)*(x-2)+P},easeInOutQuad:function(x,P,L,I){return x/=I/2,x<1?L/2*x*x+P:-L/2*(--x*(x-2)-1)+P},easeInCubic:function(x,P,L,I){return L*(x/=I)*x*x+P},easeOutCubic:c,easeInOutCubic:f,easeInQuart:l,easeOutQuart:u,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:b,easeInExpo:y,easeOutExpo:C,easeInOutExpo:w,easeInCirc:T,easeOutCirc:O,easeInOutCirc:A,easeInElastic:M,easeOutElastic:Y,easeInOutElastic:U,easeInBack:K,easeOutBack:q,easeInOutBack:B,easeInBounce:W,easeOutBounce:ee,easeInOutBounce:ne}}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.parseUnit,d=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",C="clip-path";s.svgValidTagNamesRegEx=O(p),s.svgViewBoxElementsRegEx=O(m),s.svgInvalidAncestorsRegEx=O(g),s.svgValidParentsRegEx=O(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function w(F){return F in _?_[F]:F}function T(F,D,X,J){var re=Array.isArray(D),te;if((F==="fill"||F==="stroke")&&D==="none")D="";else{if(F==="strokeUniform")return D==="non-scaling-stroke";if(F==="strokeDashArray")D==="none"?D=null:D=D.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(F==="transformMatrix")X&&X.transformMatrix?D=d(X.transformMatrix,s.parseTransformAttribute(D)):D=s.parseTransformAttribute(D);else if(F==="visible")D=D!=="none"&&D!=="hidden",X&&X.visible===!1&&(D=!1);else if(F==="opacity")D=parseFloat(D),X&&typeof X.opacity<"u"&&(D*=X.opacity);else if(F==="textAnchor")D=D==="start"?"left":D==="end"?"right":"center";else if(F==="charSpacing")te=u(D,J)/J*1e3;else if(F==="paintFirst"){var $=D.indexOf("fill"),ae=D.indexOf("stroke"),D="fill";($>-1&&ae>-1&&ae<$||$===-1&&ae>-1)&&(D="stroke")}else{if(F==="href"||F==="xlink:href"||F==="font")return D;if(F==="imageSmoothing")return D==="optimizeQuality";te=re?D.map(u):u(D,J)}}return!re&&isNaN(te)?D:te}function O(F){return new RegExp("^("+F.join("|")+")\\b","i")}function A(F){for(var D in b)if(!(typeof F[b[D]]>"u"||F[D]==="")){if(typeof F[D]>"u"){if(!s.Object.prototype[D])continue;F[D]=s.Object.prototype[D]}if(F[D].indexOf("url(")!==0){var X=new s.Color(F[D]);F[D]=X.setAlpha(l(X.getAlpha()*F[b[D]],2)).toRgba()}}return F}function M(F,D){var X,J=[],re,te,$;for(te=0,$=D.length;te<$;te++)X=D[te],re=F.getElementsByTagName(X),J=J.concat(Array.prototype.slice.call(re));return J}s.parseTransformAttribute=function(){function F(le,Ee){var Fe=s.util.cos(Ee[0]),Ue=s.util.sin(Ee[0]),lt=0,tt=0;Ee.length===3&&(lt=Ee[1],tt=Ee[2]),le[0]=Fe,le[1]=Ue,le[2]=-Ue,le[3]=Fe,le[4]=lt-(Fe*lt-Ue*tt),le[5]=tt-(Ue*lt+Fe*tt)}function D(le,Ee){var Fe=Ee[0],Ue=Ee.length===2?Ee[1]:Ee[0];le[0]=Fe,le[3]=Ue}function X(le,Ee,Fe){le[Fe]=Math.tan(s.util.degreesToRadians(Ee[0]))}function J(le,Ee){le[4]=Ee[0],Ee.length===2&&(le[5]=Ee[1])}var re=s.iMatrix,te=s.reNum,$=s.commaWsp,ae="(?:(skewX)\\s*\\(\\s*("+te+")\\s*\\))",pe="(?:(skewY)\\s*\\(\\s*("+te+")\\s*\\))",z="(?:(rotate)\\s*\\(\\s*("+te+")(?:"+$+"("+te+")"+$+"("+te+"))?\\s*\\))",G="(?:(scale)\\s*\\(\\s*("+te+")(?:"+$+"("+te+"))?\\s*\\))",oe="(?:(translate)\\s*\\(\\s*("+te+")(?:"+$+"("+te+"))?\\s*\\))",se="(?:(matrix)\\s*\\(\\s*("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")"+$+"("+te+")\\s*\\))",ie="(?:"+se+"|"+oe+"|"+G+"|"+z+"|"+ae+"|"+pe+")",he="(?:"+ie+"(?:"+$+"*"+ie+")*)",_e="^\\s*(?:"+he+"?)\\s*$",Ie=new RegExp(_e),Te=new RegExp(ie,"g");return function(le){var Ee=re.concat(),Fe=[];if(!le||le&&!Ie.test(le))return Ee;le.replace(Te,function(lt){var tt=new RegExp(ie).exec(lt).filter(function(Mn){return!!Mn}),bt=tt[1],Ke=tt.slice(2).map(parseFloat);switch(bt){case"translate":J(Ee,Ke);break;case"rotate":Ke[0]=s.util.degreesToRadians(Ke[0]),F(Ee,Ke);break;case"scale":D(Ee,Ke);break;case"skewX":X(Ee,Ke,2);break;case"skewY":X(Ee,Ke,1);break;case"matrix":Ee=Ke;break}Fe.push(Ee.concat()),Ee=re.concat()});for(var Ue=Fe[0];Fe.length>1;)Fe.shift(),Ue=s.util.multiplyTransformMatrices(Ue,Fe[0]);return Ue}}();function Y(F,D){var X,J;F.replace(/;\s*$/,"").split(";").forEach(function(re){var te=re.split(":");X=te[0].trim().toLowerCase(),J=te[1].trim(),D[X]=J})}function U(F,D){var X,J;for(var re in F)typeof F[re]>"u"||(X=re.toLowerCase(),J=F[re],D[X]=J)}function K(F,D){var X={};for(var J in s.cssRules[D])if(q(F,J.split(" ")))for(var re in s.cssRules[D][J])X[re]=s.cssRules[D][J][re];return X}function q(F,D){var X,J=!0;return X=W(F,D.pop()),X&&D.length&&(J=B(F,D)),X&&J&&D.length===0}function B(F,D){for(var X,J=!0;F.parentNode&&F.parentNode.nodeType===1&&D.length;)J&&(X=D.pop()),F=F.parentNode,J=W(F,X);return D.length===0}function W(F,D){var X=F.nodeName,J=F.getAttribute("class"),re=F.getAttribute("id"),te,$;if(te=new RegExp("^"+X,"i"),D=D.replace(te,""),re&&D.length&&(te=new RegExp("#"+re+"(?![a-zA-Z\\-]+)","i"),D=D.replace(te,"")),J&&D.length)for(J=J.split(" "),$=J.length;$--;)te=new RegExp("\\."+J[$]+"(?![a-zA-Z\\-]+)","i"),D=D.replace(te,"");return D.length===0}function ee(F,D){var X;if(F.getElementById&&(X=F.getElementById(D)),X)return X;var J,re,te,$=F.getElementsByTagName("*");for(re=0,te=$.length;re<te;re++)if(J=$[re],D===J.getAttribute("id"))return J}function ne(F){for(var D=M(F,["use","svg:use"]),X=0;D.length&&X<D.length;){var J=D[X],re=J.getAttribute("xlink:href")||J.getAttribute("href");if(re===null)return;var te=re.slice(1),$=J.getAttribute("x")||0,ae=J.getAttribute("y")||0,pe=ee(F,te).cloneNode(!0),z=(pe.getAttribute("transform")||"")+" translate("+$+", "+ae+")",G,oe=D.length,se,ie,he,_e,Ie=s.svgNS;if(P(pe),/^svg$/i.test(pe.nodeName)){var Te=pe.ownerDocument.createElementNS(Ie,"g");for(ie=0,he=pe.attributes,_e=he.length;ie<_e;ie++)se=he.item(ie),Te.setAttributeNS(Ie,se.nodeName,se.nodeValue);for(;pe.firstChild;)Te.appendChild(pe.firstChild);pe=Te}for(ie=0,he=J.attributes,_e=he.length;ie<_e;ie++)se=he.item(ie),!(se.nodeName==="x"||se.nodeName==="y"||se.nodeName==="xlink:href"||se.nodeName==="href")&&(se.nodeName==="transform"?z=se.nodeValue+" "+z:pe.setAttribute(se.nodeName,se.nodeValue));pe.setAttribute("transform",z),pe.setAttribute("instantiated_by_use","1"),pe.removeAttribute("id"),G=J.parentNode,G.replaceChild(pe,J),D.length===oe&&X++}}var x=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(F){if(!s.svgViewBoxElementsRegEx.test(F.nodeName))return{};var D=F.getAttribute("viewBox"),X=1,J=1,re=0,te=0,$,ae,pe,z,G=F.getAttribute("width"),oe=F.getAttribute("height"),se=F.getAttribute("x")||0,ie=F.getAttribute("y")||0,he=F.getAttribute("preserveAspectRatio")||"",_e=!D||!(D=D.match(x)),Ie=!G||!oe||G==="100%"||oe==="100%",Te=_e&&Ie,le={},Ee="",Fe=0,Ue=0;if(le.width=0,le.height=0,le.toBeParsed=Te,_e&&(se||ie)&&F.parentNode&&F.parentNode.nodeName!=="#document"&&(Ee=" translate("+u(se)+" "+u(ie)+") ",pe=(F.getAttribute("transform")||"")+Ee,F.setAttribute("transform",pe),F.removeAttribute("x"),F.removeAttribute("y")),Te)return le;if(_e)return le.width=u(G),le.height=u(oe),le;if(re=-parseFloat(D[1]),te=-parseFloat(D[2]),$=parseFloat(D[3]),ae=parseFloat(D[4]),le.minX=re,le.minY=te,le.viewBoxWidth=$,le.viewBoxHeight=ae,Ie?(le.width=$,le.height=ae):(le.width=u(G),le.height=u(oe),X=le.width/$,J=le.height/ae),he=s.util.parsePreserveAspectRatioAttribute(he),he.alignX!=="none"&&(he.meetOrSlice==="meet"&&(J=X=X>J?J:X),he.meetOrSlice==="slice"&&(J=X=X>J?X:J),Fe=le.width-$*X,Ue=le.height-ae*X,he.alignX==="Mid"&&(Fe/=2),he.alignY==="Mid"&&(Ue/=2),he.alignX==="Min"&&(Fe=0),he.alignY==="Min"&&(Ue=0)),X===1&&J===1&&re===0&&te===0&&se===0&&ie===0)return le;if((se||ie)&&F.parentNode.nodeName!=="#document"&&(Ee=" translate("+u(se)+" "+u(ie)+") "),pe=Ee+" matrix("+X+" 0 0 "+J+" "+(re*X+Fe)+" "+(te*J+Ue)+") ",F.nodeName==="svg"){for(z=F.ownerDocument.createElementNS(s.svgNS,"g");F.firstChild;)z.appendChild(F.firstChild);F.appendChild(z)}else z=F,z.removeAttribute("x"),z.removeAttribute("y"),pe=z.getAttribute("transform")+pe;return z.setAttribute("transform",pe),le}function L(F,D){for(;F&&(F=F.parentNode);)if(F.nodeName&&D.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(F,D,X,J){if(F){ne(F);var re=s.Object.__uid++,te,$,ae=P(F),pe=s.util.toArray(F.getElementsByTagName("*"));if(ae.crossOrigin=J&&J.crossOrigin,ae.svgUid=re,pe.length===0&&s.isLikelyNode){pe=F.selectNodes('//*[name(.)!="svg"]');var z=[];for(te=0,$=pe.length;te<$;te++)z[te]=pe[te];pe=z}var G=pe.filter(function(se){return P(se),s.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))&&!L(se,s.svgInvalidAncestorsRegEx)});if(!G||G&&!G.length){D&&D([],{});return}var oe={};pe.filter(function(se){return se.nodeName.replace("svg:","")==="clipPath"}).forEach(function(se){var ie=se.getAttribute("id");oe[ie]=s.util.toArray(se.getElementsByTagName("*")).filter(function(he){return s.svgValidTagNamesRegEx.test(he.nodeName.replace("svg:",""))})}),s.gradientDefs[re]=s.getGradientDefs(F),s.cssRules[re]=s.getCSSRules(F),s.clipPaths[re]=oe,s.parseElements(G,function(se,ie){D&&(D(se,ae,ie,pe),delete s.gradientDefs[re],delete s.cssRules[re],delete s.clipPaths[re])},f(ae),X,J)}};function I(F,D){var X=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],J="xlink:href",re=D.getAttribute(J).slice(1),te=ee(F,re);if(te&&te.getAttribute(J)&&I(F,te),X.forEach(function(ae){te&&!D.hasAttribute(ae)&&te.hasAttribute(ae)&&D.setAttribute(ae,te.getAttribute(ae))}),!D.children.length)for(var $=te.cloneNode(!0);$.firstChild;)D.appendChild($.firstChild);D.removeAttribute(J)}var Z=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");c(s,{parseFontDeclaration:function(F,D){var X=F.match(Z);if(X){var J=X[1],re=X[3],te=X[4],$=X[5],ae=X[6];J&&(D.fontStyle=J),re&&(D.fontWeight=isNaN(parseFloat(re))?re:parseFloat(re)),te&&(D.fontSize=u(te)),ae&&(D.fontFamily=ae),$&&(D.lineHeight=$==="normal"?1:$)}},getGradientDefs:function(F){var D=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],X=M(F,D),J,re=0,te={};for(re=X.length;re--;)J=X[re],J.getAttribute("xlink:href")&&I(F,J),te[J.getAttribute("id")]=J;return te},parseAttributes:function(F,D,X){if(F){var J,re={},te,$;typeof X>"u"&&(X=F.getAttribute("svgUid")),F.parentNode&&s.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(re=s.parseAttributes(F.parentNode,D,X));var ae=D.reduce(function(he,_e){return J=F.getAttribute(_e),J&&(he[_e]=J),he},{}),pe=c(K(F,X),s.parseStyleAttribute(F));ae=c(ae,pe),pe[C]&&F.setAttribute(C,pe[C]),te=$=re.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,ae[y]&&(ae[y]=te=u(ae[y],$));var z,G,oe={};for(var se in ae)z=w(se),G=T(z,ae[se],re,te),oe[z]=G;oe&&oe.font&&s.parseFontDeclaration(oe.font,oe);var ie=c(re,oe);return s.svgValidParentsRegEx.test(F.nodeName)?ie:A(ie)}},parseElements:function(F,D,X,J,re){new s.ElementsParser(F,D,X,J,re).parse()},parseStyleAttribute:function(F){var D={},X=F.getAttribute("style");return X&&(typeof X=="string"?Y(X,D):U(X,D)),D},parsePointsAttribute:function(F){if(!F)return null;F=F.replace(/,/g," ").trim(),F=F.split(/\s+/);var D=[],X,J;for(X=0,J=F.length;X<J;X+=2)D.push({x:parseFloat(F[X]),y:parseFloat(F[X+1])});return D},getCSSRules:function(F){var D=F.getElementsByTagName("style"),X,J,re={},te;for(X=0,J=D.length;X<J;X++){var $=D[X].textContent;$=$.replace(/\/\*[\s\S]*?\*\//g,""),$.trim()!==""&&(te=$.split("}"),te=te.filter(function(ae){return ae.trim()}),te.forEach(function(ae){var pe=ae.split("{"),z={},G=pe[1].trim(),oe=G.split(";").filter(function(_e){return _e.trim()});for(X=0,J=oe.length;X<J;X++){var se=oe[X].split(":"),ie=se[0].trim(),he=se[1].trim();z[ie]=he}ae=pe[0].trim(),ae.split(",").forEach(function(_e){_e=_e.replace(/^svg/i,"").trim(),_e!==""&&(re[_e]?s.util.object.extend(re[_e],z):re[_e]=s.util.object.clone(z))})}))}return re},loadSVGFromURL:function(F,D,X,J){F=F.replace(/^\n\s*/,"").trim(),new s.util.request(F,{method:"get",onComplete:re});function re(te){var $=te.responseXML;if(!$||!$.documentElement)return D&&D(null),!1;s.parseSVGDocument($.documentElement,function(ae,pe,z,G){D&&D(ae,pe,z,G)},X,J)}},loadSVGFromString:function(F,D,X,J){var re=new s.window.DOMParser,te=re.parseFromString(F.trim(),"text/xml");s.parseSVGDocument(te.documentElement,function($,ae,pe,z){D($,ae,pe,z)},X,J)}})}(t),e.ElementsParser=function(a,s,c,f,l,u){this.elements=a,this.callback=s,this.options=c,this.reviver=f,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(c,f){c.setAttribute("svgUid",s.svgUid),s.createObject(c,f)})},a.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,c){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(c,s),this.options)}catch(l){e.log(l)}else this.checkIfDone()},a.createCallback=function(s,c){var f=this;return function(l){var u;f.resolveGradient(l,c,"fill"),f.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),f.resolveClipPath(l,c),f.reviver&&f.reviver(c,l),f.instances[s]=l,f.checkIfDone()}},a.extractPropertyDefinition=function(s,c,f){var l=s[c],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var d=u.exec(l)[1];return u.lastIndex=0,e[f][this.svgUid][d]}},a.resolveGradient=function(s,c,f){var l=this.extractPropertyDefinition(s,f,"gradientDefs");if(l){var u=c.getAttribute(f+"-opacity"),d=e.Gradient.fromElement(l,s,u,this.options);s.set(f,d)}},a.createClipPathCallback=function(s,c){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,c.push(f)}},a.resolveClipPath=function(s,c){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),l,u,d,p,m,g;if(f){p=[],d=e.util.invertTransform(s.calcTransformMatrix());for(var v=f[0].parentNode,_=c;_.parentNode&&_.getAttribute("clip-path")!==s.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var b=0;b<f.length;b++)l=f[b],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(s,p),this.options);p.length===1?f=p[0]:f=new e.Group(p),m=e.util.multiplyTransformMatrices(d,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,_);var g=e.util.qrDecompose(m);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.angle=g.angle,f.skewX=g.skewX,f.skewY=0,f.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=c;function c(f,l){this.x=f,this.y=l}c.prototype={type:"point",constructor:c,add:function(f){return new c(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new c(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new c(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new c(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new c(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new c(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(f.x-this.x)*l,this.y+(f.y-this.y)*l)},distanceFrom:function(f){var l=this.x-f.x,u=this.y-f.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new c(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new c(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,l){return this.x=f,this.y=l,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var l=this.x,u=this.y;this.x=f.x,this.y=f.y,f.x=l,f.y=u},clone:function(){return new c(this.x,this.y)}}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function c(f){this.status=f,this.points=[]}s.Intersection=c,s.Intersection.prototype={constructor:c,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,l,u,d){var p,m=(d.x-u.x)*(f.y-u.y)-(d.y-u.y)*(f.x-u.x),g=(l.x-f.x)*(f.y-u.y)-(l.y-f.y)*(f.x-u.x),v=(d.y-u.y)*(l.x-f.x)-(d.x-u.x)*(l.y-f.y);if(v!==0){var _=m/v,b=g/v;0<=_&&_<=1&&0<=b&&b<=1?(p=new c("Intersection"),p.appendPoint(new s.Point(f.x+_*(l.x-f.x),f.y+_*(l.y-f.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},s.Intersection.intersectLinePolygon=function(f,l,u){var d=new c,p=u.length,m,g,v,_;for(_=0;_<p;_++)m=u[_],g=u[(_+1)%p],v=c.intersectLineLine(f,l,m,g),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},s.Intersection.intersectPolygonPolygon=function(f,l){var u=new c,d=f.length,p;for(p=0;p<d;p++){var m=f[p],g=f[(p+1)%d],v=c.intersectLinePolygon(m,g,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},s.Intersection.intersectPolygonRectangle=function(f,l,u){var d=l.min(u),p=l.max(u),m=new s.Point(p.x,d.y),g=new s.Point(d.x,p.y),v=c.intersectLinePolygon(d,m,f),_=c.intersectLinePolygon(m,p,f),b=c.intersectLinePolygon(p,g,f),y=c.intersectLinePolygon(g,d,f),C=new c;return C.appendPoints(v.points),C.appendPoints(_.points),C.appendPoints(b.points),C.appendPoints(y.points),C.points.length>0&&(C.status="Intersection"),C}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}s.Color=c,s.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,d){l/=255,u/=255,d/=255;var p,m,g,v=s.util.array.max([l,u,d]),_=s.util.array.min([l,u,d]);if(g=(v+_)/2,v===_)p=m=0;else{var b=v-_;switch(m=g>.5?b/(2-v-_):b/(v+_),v){case l:p=(u-d)/b+(u<d?6:0);break;case u:p=(d-l)/b+2;break;case d:p=(l-u)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,d,p;return u=l[0].toString(16),u=u.length===1?"0"+u:u,d=l[1].toString(16),d=d.length===1?"0"+d:d,p=l[2].toString(16),p=p.length===1?"0"+p:p,u.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),d=l[3];return this.setSource([u,u,u,d]),this},toBlackWhite:function(l){var u=this.getSource(),d=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),p=u[3];return l=l||127,d=Number(d)<Number(l)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(m[v]*(1-p)+g[v]*p));return u[3]=d,this.setSource(u),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(l,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(u-l)*6*d:d<1/2?u:d<2/3?l+(u-l)*(2/3-d)*6:l}s.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},s.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var d=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),p=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),m=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),u[4]?parseFloat(u[4]):1]}},s.Color.fromRgba=c.fromRgb,s.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},s.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(u){var d=(parseFloat(u[1])%360+360)%360/360,p=parseFloat(u[2])/(/%$/.test(u[2])?100:1),m=parseFloat(u[3])/(/%$/.test(u[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var b=m<=.5?m*(p+1):m+p-m*p,y=m*2-b;g=f(y,b,d+1/3),v=f(y,b,d),_=f(y,b,d-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),u[4]?parseFloat(u[4]):1]}},s.Color.fromHsla=c.fromHsl,s.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},s.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),d=u.length===3||u.length===4,p=u.length===8||u.length===4,m=d?u.charAt(0)+u.charAt(0):u.substring(0,2),g=d?u.charAt(1)+u.charAt(1):u.substring(2,4),v=d?u.charAt(2)+u.charAt(2):u.substring(4,6),_=p?d?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(t),function(a){var s=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],l={},u="left",d="top",p="right",m="bottom",g="center",v={top:m,bottom:d,left:p,right:u,center:g},_=s.util.radiansToDegrees,b=Math.sign||function(z){return(z>0)-(z<0)||+z};function y(z,G){var oe=z.angle+_(Math.atan2(G.y,G.x))+360;return Math.round(oe%360/45)}function C(z,G){var oe=G.transform.target,se=oe.canvas,ie=s.util.object.clone(G);ie.target=oe,se&&se.fire("object:"+z,ie),oe.fire(z,G)}function w(z,G){var oe=G.canvas,se=oe.uniScaleKey,ie=z[se];return oe.uniformScaling&&!ie||!oe.uniformScaling&&ie}function T(z){return z.originX===g&&z.originY===g}function O(z,G,oe){var se=z.lockScalingX,ie=z.lockScalingY;return!!(se&&ie||!G&&(se||ie)&&oe||se&&G==="x"||ie&&G==="y")}function A(z,G,oe){var se="not-allowed",ie=w(z,oe),he="";if(G.x!==0&&G.y===0?he="x":G.x===0&&G.y!==0&&(he="y"),O(oe,he,ie))return se;var _e=y(oe,G);return c[_e]+"-resize"}function M(z,G,oe){var se="not-allowed";if(G.x!==0&&oe.lockSkewingY||G.y!==0&&oe.lockSkewingX)return se;var ie=y(oe,G)%4;return f[ie]+"-resize"}function Y(z,G,oe){return z[oe.canvas.altActionKey]?l.skewCursorStyleHandler(z,G,oe):l.scaleCursorStyleHandler(z,G,oe)}function U(z,G,oe){var se=z[oe.canvas.altActionKey];if(G.x===0)return se?"skewX":"scaleY";if(G.y===0)return se?"skewY":"scaleX"}function K(z,G,oe){return oe.lockRotation?"not-allowed":G.cursorStyle}function q(z,G,oe,se){return{e:z,transform:G,pointer:{x:oe,y:se}}}function B(z){return function(G,oe,se,ie){var he=oe.target,_e=he.getCenterPoint(),Ie=he.translateToOriginPoint(_e,oe.originX,oe.originY),Te=z(G,oe,se,ie);return he.setPositionByOrigin(Ie,oe.originX,oe.originY),Te}}function W(z,G){return function(oe,se,ie,he){var _e=G(oe,se,ie,he);return _e&&C(z,q(oe,se,ie,he)),_e}}function ee(z,G,oe,se,ie){var he=z.target,_e=he.controls[z.corner],Ie=he.canvas.getZoom(),Te=he.padding/Ie,le=he.toLocalPoint(new s.Point(se,ie),G,oe);return le.x>=Te&&(le.x-=Te),le.x<=-Te&&(le.x+=Te),le.y>=Te&&(le.y-=Te),le.y<=Te&&(le.y+=Te),le.x-=_e.offsetX,le.y-=_e.offsetY,le}function ne(z){return z.flipX!==z.flipY}function x(z,G,oe,se,ie){if(z[G]!==0){var he=z._getTransformedDimensions()[se],_e=ie/he*z[oe];z.set(oe,_e)}}function P(z,G,oe,se){var ie=G.target,he=ie._getTransformedDimensions(0,ie.skewY),_e=ee(G,G.originX,G.originY,oe,se),Ie=Math.abs(_e.x*2)-he.x,Te=ie.skewX,le;Ie<2?le=0:(le=_(Math.atan2(Ie/ie.scaleX,he.y/ie.scaleY)),G.originX===u&&G.originY===m&&(le=-le),G.originX===p&&G.originY===d&&(le=-le),ne(ie)&&(le=-le));var Ee=Te!==le;if(Ee){var Fe=ie._getTransformedDimensions().y;ie.set("skewX",le),x(ie,"skewY","scaleY","y",Fe)}return Ee}function L(z,G,oe,se){var ie=G.target,he=ie._getTransformedDimensions(ie.skewX,0),_e=ee(G,G.originX,G.originY,oe,se),Ie=Math.abs(_e.y*2)-he.y,Te=ie.skewY,le;Ie<2?le=0:(le=_(Math.atan2(Ie/ie.scaleY,he.x/ie.scaleX)),G.originX===u&&G.originY===m&&(le=-le),G.originX===p&&G.originY===d&&(le=-le),ne(ie)&&(le=-le));var Ee=Te!==le;if(Ee){var Fe=ie._getTransformedDimensions().x;ie.set("skewY",le),x(ie,"skewX","scaleX","x",Fe)}return Ee}function I(z,G,oe,se){var ie=G.target,he=ie.skewX,_e,Ie=G.originY;if(ie.lockSkewingX)return!1;if(he===0){var Te=ee(G,g,g,oe,se);Te.x>0?_e=u:_e=p}else he>0&&(_e=Ie===d?u:p),he<0&&(_e=Ie===d?p:u),ne(ie)&&(_e=_e===u?p:u);G.originX=_e;var le=W("skewing",B(P));return le(z,G,oe,se)}function Z(z,G,oe,se){var ie=G.target,he=ie.skewY,_e,Ie=G.originX;if(ie.lockSkewingY)return!1;if(he===0){var Te=ee(G,g,g,oe,se);Te.y>0?_e=d:_e=m}else he>0&&(_e=Ie===u?d:m),he<0&&(_e=Ie===u?m:d),ne(ie)&&(_e=_e===d?m:d);G.originY=_e;var le=W("skewing",B(L));return le(z,G,oe,se)}function F(z,G,oe,se){var ie=G,he=ie.target,_e=he.translateToOriginPoint(he.getCenterPoint(),ie.originX,ie.originY);if(he.lockRotation)return!1;var Ie=Math.atan2(ie.ey-_e.y,ie.ex-_e.x),Te=Math.atan2(se-_e.y,oe-_e.x),le=_(Te-Ie+ie.theta),Ee=!0;if(he.snapAngle>0){var Fe=he.snapAngle,Ue=he.snapThreshold||Fe,lt=Math.ceil(le/Fe)*Fe,tt=Math.floor(le/Fe)*Fe;Math.abs(le-tt)<Ue?le=tt:Math.abs(le-lt)<Ue&&(le=lt)}return le<0&&(le=360+le),le%=360,Ee=he.angle!==le,he.angle=le,Ee}function D(z,G,oe,se,ie){ie=ie||{};var he=G.target,_e=he.lockScalingX,Ie=he.lockScalingY,Te=ie.by,le,Ee,Fe,Ue,lt=w(z,he),tt=O(he,Te,lt),bt,Ke,Mn=G.gestureScale;if(tt)return!1;if(Mn)Ee=G.scaleX*Mn,Fe=G.scaleY*Mn;else{if(le=ee(G,G.originX,G.originY,oe,se),bt=Te!=="y"?b(le.x):1,Ke=Te!=="x"?b(le.y):1,G.signX||(G.signX=bt),G.signY||(G.signY=Ke),he.lockScalingFlip&&(G.signX!==bt||G.signY!==Ke))return!1;if(Ue=he._getTransformedDimensions(),lt&&!Te){var In=Math.abs(le.x)+Math.abs(le.y),ce=G.original,Ae=Math.abs(Ue.x*ce.scaleX/he.scaleX)+Math.abs(Ue.y*ce.scaleY/he.scaleY),Ye=In/Ae;Ee=ce.scaleX*Ye,Fe=ce.scaleY*Ye}else Ee=Math.abs(le.x*he.scaleX/Ue.x),Fe=Math.abs(le.y*he.scaleY/Ue.y);T(G)&&(Ee*=2,Fe*=2),G.signX!==bt&&Te!=="y"&&(G.originX=v[G.originX],Ee*=-1,G.signX=bt),G.signY!==Ke&&Te!=="x"&&(G.originY=v[G.originY],Fe*=-1,G.signY=Ke)}var ot=he.scaleX,dt=he.scaleY;return Te?(Te==="x"&&he.set("scaleX",Ee),Te==="y"&&he.set("scaleY",Fe)):(!_e&&he.set("scaleX",Ee),!Ie&&he.set("scaleY",Fe)),ot!==he.scaleX||dt!==he.scaleY}function X(z,G,oe,se){return D(z,G,oe,se)}function J(z,G,oe,se){return D(z,G,oe,se,{by:"x"})}function re(z,G,oe,se){return D(z,G,oe,se,{by:"y"})}function te(z,G,oe,se){return z[G.target.canvas.altActionKey]?l.skewHandlerX(z,G,oe,se):l.scalingY(z,G,oe,se)}function $(z,G,oe,se){return z[G.target.canvas.altActionKey]?l.skewHandlerY(z,G,oe,se):l.scalingX(z,G,oe,se)}function ae(z,G,oe,se){var ie=G.target,he=ee(G,G.originX,G.originY,oe,se),_e=ie.strokeWidth/(ie.strokeUniform?ie.scaleX:1),Ie=T(G)?2:1,Te=ie.width,le=Math.abs(he.x*Ie/ie.scaleX)-_e;return ie.set("width",Math.max(le,0)),Te!==le}function pe(z,G,oe,se){var ie=G.target,he=oe-G.offsetX,_e=se-G.offsetY,Ie=!ie.get("lockMovementX")&&ie.left!==he,Te=!ie.get("lockMovementY")&&ie.top!==_e;return Ie&&ie.set("left",he),Te&&ie.set("top",_e),(Ie||Te)&&C("moving",q(z,G,oe,se)),Ie||Te}l.scaleCursorStyleHandler=A,l.skewCursorStyleHandler=M,l.scaleSkewCursorStyleHandler=Y,l.rotationWithSnapping=W("rotating",B(F)),l.scalingEqually=W("scaling",B(X)),l.scalingX=W("scaling",B(J)),l.scalingY=W("scaling",B(re)),l.scalingYOrSkewingX=te,l.scalingXOrSkewingY=$,l.changeWidth=W("resizing",B(ae)),l.skewHandlerX=I,l.skewHandlerY=Z,l.dragHandler=pe,l.scaleOrSkewActionName=U,l.rotationStyleHandler=K,l.fireEvent=C,l.wrapWithFixedAnchor=B,l.wrapWithFireEvent=W,l.getLocalPoint=ee,s.controlsUtils=l}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians,f=s.controlsUtils;function l(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=y?"stroke":"fill",w=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=p,O=m,A;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>b?(A=_,d.scale(1,b/_),O=m*_/b):b>_?(A=b,d.scale(_/b,1),T=p*b/_):A=_,d.lineWidth=1,d.beginPath(),d.arc(T,O,A/2,0,2*Math.PI,!1),d[C](),w&&d.stroke(),d.restore()}function u(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,y=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=y?"stroke":"fill",w=!y&&(g.cornerStrokeColor||v.cornerStrokeColor),T=_/2,O=b/2;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(c(v.angle)),d[C+"Rect"](-T,-O,_,b),w&&d.strokeRect(-T,-O,_,b),d.restore()}f.renderCircleControl=l,f.renderSquareControl=u}(t),function(a){var s=a.fabric||(a.fabric={});function c(f){for(var l in f)this[l]=f[l]}s.Control=c,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,l){return l.cursorStyle},getActionName:function(f,l){return l.actionName},getVisibility:function(f,l){var u=f._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,l){var u=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},l);return u},calcCornerCoords:function(f,l,u,d,p){var m,g,v,_,b=p?this.touchSizeX:this.sizeX,y=p?this.touchSizeY:this.sizeY;if(b&&y&&b!==y){var C=Math.atan2(y,b),w=Math.sqrt(b*b+y*y)/2,T=C-s.util.degreesToRadians(f),O=Math.PI/2-C-s.util.degreesToRadians(f);m=w*s.util.cos(T),g=w*s.util.sin(T),v=w*s.util.cos(O),_=w*s.util.sin(O)}else{var A=b&&y?b:l;w=A*.7071067812;var T=s.util.degreesToRadians(45-f);m=v=w*s.util.cos(T),g=_=w*s.util.sin(T)}return{tl:{x:u-_,y:d-v},tr:{x:u+m,y:d-g},bl:{x:u-m,y:d+g},br:{x:u+_,y:d+v}}},render:function(f,l,u,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,l,u,d,p);break;default:s.controlsUtils.renderSquareControl.call(this,f,l,u,d,p)}}}}(t),function(){function a(u,d){var p=u.getAttribute("style"),m=u.getAttribute("offset")||0,g,v,_,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var y=p.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),b=y.length;b--;){var C=y[b].split(/\s*:\s*/),w=C[0].trim(),T=C[1].trim();w==="stop-color"?g=T:w==="stop-opacity"&&(_=T)}}return g||(g=u.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=u.getAttribute("stop-opacity")),g=new e.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*d,{offset:m,color:g.toRgb(),opacity:_}}function s(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var d,p=this;Object.keys(u).forEach(function(m){p[m]=u[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,d={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(d.r1=u.coords.r1||0,d.r2=u.coords.r2||0),this.coords=d,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var d in u){var p=new e.Color(u[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(u){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,d,u),d},toSVG:function(u,v){var p=f(this.coords,!0),m,g,v=v||{},_,b,y=f(this.colorStops,!0),C=p.r1>p.r2,w=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,O=-this.offsetY,A=!!v.additionalTransform,M=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(B,W){return B.offset-W.offset}),M==="objectBoundingBox"?(T/=u.width,O/=u.height):(T+=u.width/2,O+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(T-=u.pathOffset.x,O-=u.pathOffset.y),w[4]-=T,w[5]-=O,b='id="SVGID_'+this.id+'" gradientUnits="'+M+'"',b+=' gradientTransform="'+(A?v.additionalTransform+" ":"")+e.util.matrixToSVG(w)+'" ',this.type==="linear"?_=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",b,' cx="',C?p.x1:p.x2,'" cy="',C?p.y1:p.y2,'" r="',C?p.r1:p.r2,'" fx="',C?p.x2:p.x1,'" fy="',C?p.y2:p.y1,`">
`]),this.type==="radial"){if(C)for(y=y.concat(),y.reverse(),m=0,g=y.length;m<g;m++)y[m].offset=1-y[m].offset;var Y=Math.min(p.r1,p.r2);if(Y>0){var U=Math.max(p.r1,p.r2),K=Y/U;for(m=0,g=y.length;m<g;m++)y[m].offset+=K*(1-y[m].offset)}}for(m=0,g=y.length;m<g;m++){var q=y[m];_.push("<stop ",'offset="',q.offset*100+"%",'" style="stop-color:',q.color,typeof q.opacity<"u"?";stop-opacity: "+q.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(u){var d,p=e.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=u.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=u.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof _<"u"&&(v=new e.Color(v).setAlpha(_).toRgba()),d.addColorStop(b,v)}return d}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=u.getElementsByTagName("stop"),_,b=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=u.getAttribute("gradientTransform")||"",C=[],w,T,O=0,A=0,M;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(_="linear",w=s(u)):(_="radial",w=c(u)),T=v.length;T--;)C.push(a(v[T],g));M=e.parseTransformAttribute(y),l(d,w,m,b),b==="pixels"&&(O=-d.left,A=-d.top);var Y=new e.Gradient({id:u.getAttribute("id"),type:_,coords:w,colorStops:C,gradientUnits:b,gradientTransform:M,offsetX:O,offsetY:A});return Y}});function l(u,d,p,m){var g,v;Object.keys(d).forEach(function(_){g=d[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(d[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[_]=v})}}(),function(){var a=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,c){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){c&&c(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(l,u){f.source=l,c&&c(f,u)},null,this.crossOrigin)}},toObject:function(s){var c=e.Object.NUM_FRACTION_DIGITS,f,l;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),l={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,s),l},toSVG:function(s){var c=typeof this.source=="function"?this.source():this.source,f=c.width/s.width,l=c.height/s.height,u=this.offsetX/s.width,d=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,d&&(l+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,u&&(f+=Math.abs(u))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+d+'" width="'+f+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var c in s)this[c]=s[c]},toLive:function(s){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":s.createPattern(c,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),c=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var l in f)this[l]=f[l];this.id=s.Object.__uid++},_parseShadow:function(f){var l=f.trim(),u=s.Shadow.reOffsetsAndBlur.exec(l)||[],d=l.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var l=40,u=40,d=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),m=20,g=new s.Color(this.color);return f.width&&f.height&&(l=c((Math.abs(p.x)+this.blur)/f.width,d)*100+m,u=c((Math.abs(p.y)+this.blur)/f.height,d)*100+m),f.flipX&&(p.x*=-1),f.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,d)+'" dy="'+c(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},l=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(f[u]=this[u])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var a=e.util.object.extend,s=e.util.getElementOffset,c=e.util.removeFromArray,f=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,d=e.util.getNodeCanvas,p=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,b){return typeof v=="string"?e.util.loadImage(v,function(y,C){if(y){var w=new e.Image(y,b);this[g]=w,w.canvas=this}_&&_(y,C)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var b in g)_=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,b=this.overlayImage,y,C,w;for(this.viewportTransform=g,C=0,w=this._objects.length;C<w;C++)y=this._objects[C],y.group||y.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,b=this.viewportTransform.slice(0);g=l(g,u(this.viewportTransform)),b[0]=v,b[3]=v;var y=l(g,b);return b[4]+=_.x-y.x,b[5]+=_.y-y.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,b=u(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y:_},b),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,b;for(_=0,b=v.length;_<b;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],b=this[v+"Image"],y=this.viewportTransform,C=this[v+"Vpt"];if(!(!_&&!b)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,C&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var w=_.gradientTransform||_.patternTransform;w&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.fill(),g.restore()}b&&(g.save(),C&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=u(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,b={version:e.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),e.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var y=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=b),y},__serializeBgOverlay:function(g,v){var _={},b=this.backgroundImage,y=this.overlayImage,C=this.backgroundColor,w=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(_.background=C.toObject(v)):C&&(_.background=C),w&&w.toObject?w.excludeFromExport||(_.overlay=w.toObject(v)):w&&(_.overlay=w),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,g,v)),y&&!y.excludeFromExport&&(_.overlayImage=this._toObject(y,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,b=v.height||this.height,y,C='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;v.viewBox?C='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,C='viewBox="'+f(-y[4]/y[0],w)+" "+f(-y[5]/y[3],w)+" "+f(this.width/y[0],w)+" "+f(this.height/y[3],w)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var b=g[_+"Color"];if(b&&b.toLive){var y=g[_+"Vpt"],C=g.viewportTransform,w={width:g.width/(y?C[0]:1),height:g.height/(y?C[3]:1)};return b.toSVG(w,{additionalTransform:y?e.util.matrixToSVG(C):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,b,y,C,w,T,O,A,M,Y=e.fontPaths,U=[];for(this._objects.forEach(function q(B){U.push(B),B._objects&&B._objects.forEach(q)}),A=0,M=U.length;A<M;A++)if(_=U[A],b=_.fontFamily,!(_.type.indexOf("text")===-1||v[b]||!Y[b])&&(v[b]=!0,!!_.styles)){y=_.styles;for(w in y){C=y[w];for(O in C)T=C[O],b=T.fontFamily,!v[b]&&Y[b]&&(v[b]=!0)}}for(var K in v)g+=[`		@font-face {
`,"			font-family: '",K,`';
`,"			src: url('",Y[K],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,b,y,C=this._objects;for(b=0,y=C.length;b<y;b++)_=C[b],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],b=this.viewportTransform,y=this.width,C=this.height;if(_)if(_.toLive){var w=_.repeat,T=e.util.invertTransform(b),O=this[v+"Vpt"],A=O?e.util.matrixToSVG(T):"";g.push('<rect transform="'+A+" translate(",y/2,",",C/2,')"',' x="',_.offsetX-y/2,'" y="',_.offsetY-C/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?_.source.width:y,'" height="',w==="repeat-x"||w==="no-repeat"?_.source.height:C,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=y.length;_--;)b=y[_],c(this._objects,b),this._objects.unshift(b);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,b,y;if(g===v&&g.type==="activeSelection")for(y=v._objects,_=0;_<y.length;_++)b=y[_],c(this._objects,b),this._objects.push(b);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,b,y,C,w,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=0;b<T.length;b++)y=T[b],C=this._objects.indexOf(y),C>0+O&&(w=C-1,c(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(g),C!==0&&(w=this._findNewLowerIndex(g,C,v),c(this._objects,g),this._objects.splice(w,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var b,y;if(_)for(b=v,y=v-1;y>=0;--y){var C=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(C){b=y;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,b,y,C,w,T,O=0;if(g===_&&g.type==="activeSelection")for(T=_._objects,b=T.length;b--;)y=T[b],C=this._objects.indexOf(y),C<this._objects.length-1-O&&(w=C+1,c(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(g),C!==this._objects.length-1&&(w=this._findNewUpperIndex(g,C,v),c(this._objects,g),this._objects.splice(w,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var b,y,C;if(_)for(b=v,y=v+1,C=this._objects.length;y<C;++y){var w=g.intersectsWithObject(this._objects[y])||g.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(g);if(w){b=y;break}}else b=v+1;return b},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(e.StaticCanvas.prototype,e.Observable),a(e.StaticCanvas.prototype,e.Collection),a(e.StaticCanvas.prototype,e.DataURLExporter),a(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,c=a.contextTop,f=a.getZoom();a&&a._isRetinaScaling()&&(f*=e.devicePixelRatio),c.shadowColor=s.color,c.shadowBlur=s.blur*f,c.shadowOffsetX=s.offsetX*f,c.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var a=new e.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,c){var f=s.midPointFrom(c);return a.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,f=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[f-2],c[f-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new e.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new e.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,c,f=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&f.x===l.x&&f.y===l.y){var u=this.width/1e3;f=new e.Point(f.x,f.y),l=new e.Point(l.x,l.y),f.x-=u,l.x+=u}for(a.moveTo(f.x,f.y),s=1,c=this._points.length;s<c;s++)this._drawSegment(a,f,l),f=this._points[s],l=this._points[s+1];a.lineTo(f.x,f.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=e.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new e.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var c=this.canvas.getZoom(),f=Math.pow(s/c,2),l,u=a.length-1,d=a[0],p=[d],m;for(l=1;l<u-1;l++)m=Math.pow(d.x-a[l].x,2)+Math.pow(d.y-a[l].y,2),m>=f&&(d=a[l],p.push(d));return p.push(a[u]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var c=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,s),c.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,c,f=this.points;for(this._saveAndTransform(a),s=0,c=f.length;s<c;s++)this.dot(a,f[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,c;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,c=this.points.length;s<c;s++){var l=this.points[s],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),f.push(u)}var d=new e.Group(f);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new e.Point(a.x,a.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=c,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],c=0,f=this.sprayChunks.length;c<f;c++)for(var l=this.sprayChunks[c],u=0,d=l.length;u<d;u++){var p=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new e.Group(s);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},c,f,l;for(f=0,l=a.length;f<l;f++)c=a[f].left+""+a[f].top,s[c]||(s[c]=a[f]);var u=[];for(c in s)u.push(s[c]);return u},render:function(a){var s=this.canvas.contextTop,c,f;for(s.fillStyle=this.color,this._saveAndTransform(s),c=0,f=a.length;c<f;c++){var l=a[c];typeof l.opacity<"u"&&(s.globalAlpha=l.opacity),s.fillRect(l.x,l.y,l.width,l.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,c;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,c=this.sprayChunks.length;s<c;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,c,f,l=this.width/2,u;for(u=0;u<this.density;u++){s=e.util.getRandomInt(a.x-l,a.x+l),c=e.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var d=new e.Point(s,c);d.width=f,this.randomOpacity&&(d.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var a=20,s=5,c=e.util.createCanvasElement(),f=c.getContext("2d");return c.width=c.height=a+s,f.fillStyle=this.color,f.beginPath(),f.arc(a/2,a/2,a/2,0,Math.PI*2,!1),f.closePath(),f.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),c=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),s}}),function(){var a=e.util.getPointer,s=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,d,p;if(l.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)u=this._objects[m],l.indexOf(u)===-1?d.push(u):p.push(u);l.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var d=l.calcTransformMatrix(),p=e.util.invertTransform(d),m=this.restorePointerVpt(u);return e.util.transformPoint(m,p)},isTargetTransparent:function(l,u,d){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:u,y:d}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),y=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return y}var v=this.contextCache,_=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=_;var y=e.util.isTransparent(v,u,d,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(d){return l[d]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var d=this.getActiveObjects(),p=this._activeObject;return!u||u&&p&&d.length>1&&d.indexOf(u)===-1&&p!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&p&&p!==u},_shouldCenterTransform:function(l,u,d){if(l){var p;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?p=this.centeredScaling||l.centeredScaling:u==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!d:d}},_getOriginFromCorner:function(l,u){var d={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?d.x="right":(u==="mr"||u==="tr"||u==="br")&&(d.x="left"),u==="tl"||u==="mt"||u==="tr"?d.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(d.y="top"),d},_getActionFromCorner:function(l,u,d,p){if(!u||!l)return"drag";var m=p.controls[u];return m.getActionName(d,m,p)},_setupCurrentTransform:function(l,u,d){if(u){var p=this.getPointer(l),m=u.__corner,g=u.controls[m],v=d&&m?g.getActionHandler(l,u,g):e.controlsUtils.dragHandler,_=this._getActionFromCorner(d,m,l,u),b=this._getOriginFromCorner(u,m),y=l[this.centeredKey],C={target:u,action:_,actionHandler:v,corner:m,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:p.x-u.left,offsetY:p.y-u.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:y,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,_,y)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,d=new e.Point(u.ex,u.ey),p=e.util.transformPoint(d,this.viewportTransform),m=new e.Point(u.ex+u.left,u.ey+u.top),g=e.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),b=Math.max(p.x,g.x),y=Math.max(p.y,g.y),C=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,_,b-v,y-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=C,_+=C,b-=C,y-=C,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,_,b-v,y-_))},findTarget:function(l,u){if(!this.skipTargetFind){var d=!0,p=this.getPointer(l,d),m=this._activeObject,g=this.getActiveObjects(),v,_,b=c(l),y=g.length>1&&!u||g.length===1;if(this.targets=[],y&&m._findTargetCorner(p,b)||g.length>1&&!u&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&C&&v&&C!==v&&(C=v,this.targets=_),C}},_checkTarget:function(l,u,d){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var p=this.isTargetTransparent(u,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var d,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,u):u;if(this._checkTarget(v,g,u)){d=l[p],d.subTargetCheck&&d instanceof e.Group&&(m=this._searchPossibleTargets(d._objects,u),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var d=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,u||(d=this.restorePointerVpt(d));var b=this.getRetinaScaling();return b!==1&&(d.x/=b,d.y/=b),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:d.x*_.width,y:d.y*_.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),e.util.addClass(d,"upper-canvas "+l),this.wrapperEl.appendChild(d),this._copyCanvasStyle(u,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,d=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=d,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var d=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:u,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:u,target:v}),m.push(v))}),l.length>0&&p.length>0?d&&this.fire("selection:updated",{e:u,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:u,selected:m}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:g})},setActiveObject:function(l,u){var d=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(d,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var d=this._activeObject;if(d){if(d.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),d=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:d,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,u,d);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return u.forEach(function(p){d[p]=l[p]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,d){var p=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,d),this._unwindGroupTransformOnObject(u,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var a=e.util.addListener,s=e.util.removeListener,c=3,f=2,l=1,u={passive:!1};function d(p,m){return p.button&&p.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(e.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,u),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(e.document,p+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,u),s(e.document,p+"move",this._onMouseMove,u),s(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(e.document,"touchend",this._onTouchEnd,u),a(e.document,"touchmove",this._onMouseMove,u),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,u),a(e.document,g+"up",this._onMouseUp),a(e.document,g+"move",this._onMouseMove,u)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,u),s(e.document,"touchmove",this._onMouseMove,u);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,u),a(m,g+"move",this._onMouseMove,u))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,b);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"up",f,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!b){var y=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!y&&m===this._activeObject)}var C,w;if(m){if(C=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var T=m.controls[C],O=T&&T.getMouseUpHandler(p,m,T);O&&(w=this.getPointer(p),O(p,g,w.x,w.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==C)){var A=g.target&&g.target.controls[g.corner],M=A&&A.getMouseUpHandler(p,m,T);w=w||this.getPointer(p),M&&M(p,g,w.x,w.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,b=this.targets||[],y={e:p,target:_,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(y.currentTarget=this.findTarget(p),y.currentSubTargets=this.targets),this.fire("mouse:"+m,y),_&&_.fire("mouse"+m,y);for(var C=0;C<b.length;C++)b[C].fire("mouse"+m,y)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(d(p,f)){this.fireMiddleClick&&this._handleEvent(p,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var y=m._findTargetCorner(this.getPointer(p,!0),e.util.isTouchEvent(p));if(m.__corner=y,m===this._activeObject&&(y||!_)){this._setupCurrentTransform(p,m,b);var C=m.controls[y],g=this.getPointer(p),w=C&&C.getMouseDownHandler(p,m,C);w&&w(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,b=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<b;y++)this.fireSyntheticInOutEvents(_[y],m,{oldTarget:v[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,b=g.oldTarget,y,C,w=b!==p,T=g.canvasEvtIn,O=g.canvasEvtOut;w&&(v={e:m,target:p,previousTarget:b},_={e:m,target:b,nextTarget:p}),C=p&&w,y=b&&w,y&&(O&&this.fire(O,_),b.fire(g.evtOut,_)),C&&(T&&this.fire(T,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,b=m.action,y=!1,C=m.actionHandler;C&&(y=C(p,m,v,_)),b==="drag"&&y&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,f){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&f&&f.selectable&&this.selection&&(l!==f||l.type==="activeSelection")&&!f.onSelect({e:c})},_handleGrouping:function(c,f){var l=this._activeObject;l.__corner||f===l&&(f=this.findTarget(c,!0),!f||!f.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(f,c):this._createActiveSelection(f,c))},_updateActiveSelection:function(c,f){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),f)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,f)},_createActiveSelection:function(c,f){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,f),this._fireSelectionEvents(l,f)},_createGroup:function(c){var f=this._objects,l=f.indexOf(this._activeObject)<f.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var f=this._collectObjects(c),l;f.length===1?this.setActiveObject(f[0],c):f.length>1&&(l=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var f=[],l,u=this._groupSelector.ex,d=this._groupSelector.ey,p=u+this._groupSelector.left,m=d+this._groupSelector.top,g=new e.Point(a(u,p),a(d,m)),v=new e.Point(s(u,p),s(d,m)),_=!this.selectionFullyContained,b=u===p&&d===m,y=this._objects.length;y--&&(l=this._objects[y],!(!(!l||!l.selectable||!l.visible)&&(_&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||_&&l.containsPoint(g,null,!0)||_&&l.containsPoint(v,null,!0))&&(f.push(l),b))););return f.length>1&&(f=f.filter(function(C){return!C.onSelect({e:c})})),f},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",c=a.quality||1,f=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(f,a);return e.util.toDataURL(l,s,c)},toCanvasElement:function(a,s){a=a||1,s=s||{};var c=(s.width||this.width)*a,f=(s.height||this.height)*a,l=this.getZoom(),u=this.width,d=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,_=this.interactive,b=[p,0,0,p,g,v],y=this.enableRetinaScaling,C=e.util.createCanvasElement(),w=this.contextTop;return C.width=c,C.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=c,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=m,this.width=u,this.height=d,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=y,this.contextTop=w,C}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(a,s,c){if(a){var f=typeof a=="string"?JSON.parse(a):e.util.object.clone(a),l=this,u=f.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(p){l.clear(),l._setBgOverlay(f,function(){u?l._enlivenObjects([u],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,f,p,d,s)}):l.__setupCanvas.call(l,f,p,d,s)})},c),this}},__setupCanvas:function(a,s,c,f){var l=this;s.forEach(function(u,d){l.insertAt(u,d)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),f&&f()},_setBgOverlay:function(a,s){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var f=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,f),this.__setBgOverlay("overlayImage",a.overlayImage,c,f),this.__setBgOverlay("backgroundColor",a.background,c,f),this.__setBgOverlay("overlayColor",a.overlay,c,f)},__setBgOverlay:function(a,s,c,f){var l=this;if(!s){c[a]=!0,f&&f();return}a==="backgroundImage"||a==="overlayImage"?e.util.enlivenObjects([s],function(u){l[a]=u[0],c[a]=!0,f&&f()}):this["set"+e.util.string.capitalize(a,!0)](s,function(){c[a]=!0,f&&f()})},_enlivenObjects:function(a,s,c){if(!a||a.length===0){s&&s([]);return}e.util.enlivenObjects(a,function(f){s&&s(f)},null,c)},_toDataURL:function(a,s){this.clone(function(c){s(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,c){this.clone(function(f){c(f.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var c=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(c,function(){a&&a(f)})})},cloneWithoutData:function(a){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var c=new e.Canvas(s);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l=s.util.toFixed,u=s.util.string.capitalize,d=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,_=g.width,b=g.height,y=s.maxCacheSideLimit,C=s.minCacheSideLimit;if(_<=y&&b<=y&&_*b<=v)return _<C&&(g.width=C),b<C&&(g.height=C),g;var w=_/b,T=s.util.limitDimsByArea(w,v),O=s.util.capValue,A=O(C,T.x,y),M=O(C,T.y,y);return _>A&&(g.zoomX/=_/A,g.width=A,g.capped=!0),b>M&&(g.zoomY/=b/M,g.height=M,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:_+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),C=s.minCacheSideLimit,w=y.width,T=y.height,O,A,M=y.zoomX,Y=y.zoomY,U=w!==this.cacheWidth||T!==this.cacheHeight,K=this.zoomX!==M||this.zoomY!==Y,q=U||K,B=0,W=0,ee=!1;if(U){var ne=this._cacheCanvas.width,x=this._cacheCanvas.height,P=w>ne||T>x,L=(w<ne*.9||T<x*.9)&&ne>C&&x>C;ee=P||L,P&&!y.capped&&(w>C||T>C)&&(B=w*.1,W=T*.1)}return this instanceof s.Text&&this.path&&(q=!0,ee=!0,B+=this.getHeightOfLine(0)*this.zoomX,W+=this.getHeightOfLine(0)*this.zoomY),q?(ee?(b.width=Math.ceil(w+B),b.height=Math.ceil(T+W)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),O=y.x/2,A=y.y/2,this.cacheTranslationX=Math.round(b.width/2-O)+O,this.cacheTranslationY=Math.round(b.height/2-A)+A,this.cacheWidth=w,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(M,Y),this.zoomX=M,this.zoomY=Y,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();v*=b*y,_*=b*y}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",b=this[g]!==v,y=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=s.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),b=this.calcTransformMatrix(),y,C,w;v=v||{},C=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,w=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(_,b),y=s.util.qrDecompose(b),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(d(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?C&&this.drawBordersInGroup(g,y,v):C&&this.drawBorders(g,v),w&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,b,y=_&&_.viewportTransform[0]||1,C=_&&_.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),_&&_._isRetinaScaling()&&(y*=s.devicePixelRatio,C*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(y+C)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*y*b.scaleX,g.shadowOffsetY=v.offsetY*C*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,y=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,y):g.transform(1,0,0,1,b,y),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:b,offsetY:y}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),y,C=this.canvas.getRetinaScaling(),w=_.x/this.scaleX/C,T=_.y/this.scaleY/C;b.width=w,b.height=T,y=b.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(w,0),y.lineTo(w,T),y.lineTo(0,T),y.closePath(),y.translate(w/2,T/2),y.scale(_.zoomX/this.scaleX/C,_.zoomY/this.scaleY/C),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(C*this.scaleX/_.zoomX,C*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):s.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new s.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=s.util,_=v.saveObjectTransform(this),b=this.group,y=this.shadow,C=Math.abs,w=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var T=s.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),A=this.shadow,M,Y={x:0,y:0},U,K,q;A&&(U=A.blur,A.nonScaling?M={scaleX:1,scaleY:1}:M=this.getObjectScaling(),Y.x=2*Math.round(C(A.offsetX)+U)*C(M.scaleX),Y.y=2*Math.round(C(A.offsetY)+U)*C(M.scaleY)),K=O.width+Y.x,q=O.height+Y.y,T.width=Math.ceil(K),T.height=Math.ceil(q);var B=new s.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(B.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(B.width/2,B.height/2),"center","center");var W=this.canvas;B.add(this);var ee=B.toCanvasElement(w||1,g);return this.shadow=y,this.set("canvas",W),b&&(this.group=b),this.set(_).setCoords(),B._objects=[],B.dispose(),B=null,ee},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(_=s.util.rotatePoint(_,b,d(-this.angle))),{x:_.x-b.x,y:_.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),c(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,_,b){var y=s[g];v=f(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(C){typeof C[0]<"u"&&(v.fill=C[0]),typeof C[1]<"u"&&(v.stroke=C[1]),s.util.enlivenObjectEnlivables(v,v,function(){var w=b?new y(v[b],v):new y(v);_&&_(w)})})},s.Object.__uid=0)}(t),function(){var a=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,l,u,d,p){var m=f.x,g=f.y,v,_,b;return typeof l=="string"?l=s[l]:l-=.5,typeof d=="string"?d=s[d]:d-=.5,v=d-l,typeof u=="string"?u=c[u]:u-=.5,typeof p=="string"?p=c[p]:p-=.5,_=p-u,(v||_)&&(b=this._getTransformedDimensions(),m=f.x+v*b.x,g=f.y+_*b.y),new e.Point(m,g)},translateToCenterPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,l,u,"center","center");return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},translateToOriginPoint:function(f,l,u){var d=this.translateToGivenOrigin(f,"center","center",l,u);return this.angle?e.util.rotatePoint(d,f,a(this.angle)):d},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,f,l)},toLocalPoint:function(f,l,u){var d=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof u<"u"?p=this.translateToGivenOrigin(d,"center","center",l,u):p=new e.Point(this.left,this.top),m=new e.Point(f.x,f.y),this.angle&&(m=e.util.rotatePoint(m,d,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(f,l,u){var d=this.translateToCenterPoint(f,l,u),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(f){var l=a(this.angle),u=this.getScaledWidth(),d=e.util.cos(l)*u,p=e.util.sin(l)*u,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof f=="string"?g=s[f]:g=f-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var s=e.util,c=s.degreesToRadians,f=s.multiplyTransformMatrices,l=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,d){return d?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,d){return a(this._getCoords(u,d))},intersectsWithRect:function(u,d,p,m){var g=this.getCoords(p,m),v=e.Intersection.intersectPolygonRectangle(g,u,d);return v.status==="Intersection"},intersectsWithObject:function(u,d,p){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(d,p),u.getCoords(d,p));return m.status==="Intersection"||u.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(u,d,p)},isContainedWithinObject:function(u,d,p){for(var m=this.getCoords(d,p),g=d?u.aCoords:u.lineCoords,v=0,_=u._getImageLines(g);v<4;v++)if(!u.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(u,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=u.x&&g.left+g.width<=d.x&&g.top>=u.y&&g.top+g.height<=d.y},containsPoint:function(u,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(u,v);return _!==0&&_%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,u);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,u)?!0:this._containsCenterOfCanvas(d,p,u)},_containsCenterOfCanvas:function(u,d,p){var m={x:(u.x+d.x)/2,y:(u.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,u))return!0;var m=this.getCoords(!0,u).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,u)},_getImageLines:function(u){var d={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return d},_findCrossPoints:function(u,d){var p,m,g,v,_,b=0,y;for(var C in d)if(y=d[C],!(y.o.y<u.y&&y.d.y<u.y)&&!(y.o.y>=u.y&&y.d.y>=u.y)&&(y.o.x===y.d.x&&y.o.x>=u.x?_=y.o.x:(p=0,m=(y.d.y-y.o.y)/(y.d.x-y.o.x),g=u.y-p*u.x,v=y.o.y-m*y.o.x,_=-(g-v)/(p-m)),_>=u.x&&(b+=1),b===2))break;return b},getBoundingRect:function(u,d){var p=this.getCoords(u,d);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(u/this.width/p)},scaleToHeight:function(u,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(u/this.height/p)},calcLineCoords:function(){var u=this.getViewportTransform(),d=this.padding,p=c(this.angle),m=s.cos(p),g=s.sin(p),v=m*d,_=g*d,b=v+_,y=v-_,C=this.calcACoords(),w={tl:l(C.tl,u),tr:l(C.tr,u),bl:l(C.bl,u),br:l(C.br,u)};return d&&(w.tl.x-=y,w.tl.y-=b,w.tr.x+=b,w.tr.y-=y,w.bl.x-=b,w.bl.y+=y,w.br.x+=y,w.br.y+=b),w},calcOCoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=f(p,d),g=f(m,u),g=f(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(b,y,C){_[y]=b.positionHandler(v,g,C)}),_},calcACoords:function(){var u=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=f(d,u),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var d="_",p="";return!u&&this.group&&(p=this.group.transformMatrixKey(u)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var d=this.calcOwnMatrix();if(u||!this.group)return d;var p=this.transformMatrixKey(u),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=f(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===u)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=u,d.value=s.composeMatrix(m),d.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,d=this.width+u,p=this.height+u;return{x:d,y:p}},_getTransformedDimensions:function(u,d){typeof u>"u"&&(u=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,v=u===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:d});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(u,d){return this.strokeUniform?{x:u+this.strokeWidth,y:d+this.strokeWidth}:{x:u,y:d}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),d=this._getTransformedDimensions(),p=l(d,u,!0);return p.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,f){if(f){if(f.toLive)return c+": url(#SVGID_"+f.id+"); ";var l=new e.Color(f),u=c+": "+l.toRgb()+"; ",d=l.getAlpha();return d!==1&&(u+=c+"-opacity: "+d.toString()+"; "),u}else return c+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var f=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=c?"":this.getSvgFilter(),y=a("fill",this.fill),C=a("stroke",this.stroke);return[C,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",y,"fill-rule: ",f,"; ","opacity: ",v,";",b,_].join("")},getSvgSpanStyles:function(c,f){var l="; ",d=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",d=d,p=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",m=c.fontStyle?"font-style: "+c.fontStyle+l:"",g=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?a("fill",c.fill):"",_=c.stroke?a("stroke",c.stroke):"",b=this.getSvgTextDecoration(c),y=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[_,u,d,p,m,g,b,v,y,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(f){return c[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,f){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(f||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,f){f=f||{};var l=f.reviver,u=f.additionalTransform||"",d=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=d,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,f){f=f||{};var l=f.noStyle,u=f.reviver,d=l?"":'style="'+this.getSvgStyles()+'" ',p=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,b=this.fill,y=this.shadow,C,w=[],T,O=c.indexOf("COMMON_PARTS"),A=f.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(u)+`</clipPath>
`),v&&w.push("<g ",p,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),C=[d,g,l?"":this.addPaintOrder()," ",A?'transform="'+A+'" ':""].join(""),c[O]=C,b&&b.toLive&&w.push(b.toSVG(this)),_&&_.toLive&&w.push(_.toSVG(this)),y&&w.push(y.toSVG(this)),m&&w.push(T),w.push(c.join("")),w.push(`</g>
`),v&&w.push(`</g>
`),u?u(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=e.util.object.extend,s="stateProperties";function c(l,u,d){var p={},m=!0;d.forEach(function(g){p[g]=l[g]}),a(l[u],p,m)}function f(l,u,d){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!f(l[p],u[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!u||typeof u!="object"||!d&&g.length!==Object.keys(u).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!f(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||s;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!f(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||s,d="_"+u;return this[d]?(c(this,d,this[u]),l&&l.stateProperties&&c(this,d,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||s;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var a=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,l=s.y,u,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),u=this._findCrossPoints({x:f,y:l},d),u!==0&&u%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var c in this.controls)s(this.controls[c],c,this)},_setCornerCoords:function(){var s=this.oCoords;for(var c in s){var f=this.controls[c];s[c].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[c].x,s[c].y,!1),s[c].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[c].x,s[c].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var c=this.getCenterPoint(),f=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return s.translate(c.x,c.y),s.scale(1/l[0],1/l[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,c){c=c||{};var f=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=f.x+l,d=f.y+l,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(s,c.borderDashArray||this.borderDashArray),s.strokeRect(-u/2,-d/2,u,d),p&&(s.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,s.moveTo(g.x*u,g.y*d),s.lineTo(g.x*u+g.offsetX,g.y*d+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,c,f){f=f||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=l.x+u*(d?this.canvas.getZoom():c.scaleX)+p,g=l.y+u*(d?this.canvas.getZoom():c.scaleY)+p;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,c){c=c||{},s.save();var f=this.canvas.getRetinaScaling(),l,u;return s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){u=m.oCoords[p],d.getVisibility(m,p)&&(l&&(u=e.util.transformPoint(u,l)),d.render(s,u.x,u.y,c,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=c,this},setControlsVisibility:function(s){s||(s={});for(var c in s)this.setControlVisible(c,s[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){a.set("left",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxCenterObjectV:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){a.set("top",d),u.requestRenderAll(),l()},onComplete:function(){a.setCoords(),f()}})},fxRemove:function(a,s){s=s||{};var c=function(){},f=s.onComplete||c,l=s.onChange||c,u=this;return e.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){a.set("opacity",d),u.requestRenderAll(),l()},onComplete:function(){u.remove(a),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,c,f=[];for(s in arguments[0])a.push(s);for(var l=0,u=a.length;l<u;l++)s=a[l],c=l!==u-1,f.push(this._animate(s,arguments[0][s],arguments[1],c));return f}else return this._animate.apply(this,arguments)},_animate:function(a,s,c,f){var l=this,u;s=s.toString(),c?c=e.util.object.clone(c):c={},~a.indexOf(".")&&(u=a.split("."));var d=l.colorProperties.indexOf(a)>-1||u&&l.colorProperties.indexOf(u[1])>-1,p=u?this.get(u[0])[u[1]]:this.get(a);"from"in c||(c.from=p),d||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:c.from,endValue:s,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,_){return c.abort.call(l,g,v,_)},onChange:function(g,v,_){u?l[u[0]][u[1]]=g:l.set(a,g),!f&&c.onChange&&c.onChange(g,v,_)},onComplete:function(g,v,_){f||(l.setCoords(),c.onComplete&&c.onComplete(g,v,_))}};return d?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof l[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return c(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,v=d*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(d,p,m){m=m||{};var g=s.parseAttributes(d,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,c(g,m)))},s.Line.fromObject=function(d,p){function m(v){delete v.points,p&&p(v)}var g=f(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],s.Object._fromObject("Line",g,m,"points")};function u(d,p){var m=d.origin,g=d.axis1,v=d.axis2,_=d.dimension,b=p.nearest,y=p.center,C=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case y:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case C:return Math.max(this.get(g),this.get(v))}}}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,_=s.util.cos(m)*v,b=s.util.sin(m)*v,y=s.util.cos(g)*v,C=s.util.sin(g)*v,w=p>180?"1":"0";l=['<path d="M '+_+" "+b," A "+v+" "+v," 0 ",+w+" 1"," "+y+" "+C,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(l,u){var d=s.parseAttributes(l,s.Circle.ATTRIBUTE_NAMES);if(!f(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,u(new s.Circle(d))};function f(l){return"radius"in l&&l.radius>=0}s.Circle.fromObject=function(l,u){s.Object._fromObject("Circle",l,u)}}(t),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(c){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,l),c.lineTo(0,-l),c.lineTo(f,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,f=this.height/2,l=[-c+" "+f,"0 "+-f,c+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),s.Triangle.fromObject=function(c,f){return s.Object._fromObject("Triangle",c,f)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,l){switch(this.callSuper("_set",f,l),f){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,c,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,l){var u=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new s.Ellipse(u))},s.Ellipse.fromObject=function(f,l){s.Object._fromObject("Ellipse",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||u!==0,_=1-.5522847498;f.beginPath(),f.moveTo(m+l,g),f.lineTo(m+d-l,g),v&&f.bezierCurveTo(m+d-_*l,g,m+d,g+_*u,m+d,g+u),f.lineTo(m+d,g+p-u),v&&f.bezierCurveTo(m+d,g+p-_*u,m+d-_*l,g+p,m+d-l,g+p),f.lineTo(m+l,g+p),v&&f.bezierCurveTo(m+_*l,g+p,m,g+p-_*u,m,g+p-u),f.lineTo(m,g+u),v&&f.bezierCurveTo(m,g+_*u,m+_*l,g,m+l,g),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,l,u){if(!f)return l(null);u=u||{};var d=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new s.Rect(c(u?s.util.object.clone(u):{},d));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},s.Rect.fromObject=function(f,l){return s.Object._fromObject("Rect",f,l)}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.util.array.min,l=s.util.array.max,u=s.util.toFixed,d=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=f(p,"x")||0,g=f(p,"y")||0,v=l(p,"x")||0,_=l(p,"y")||0,b=v-m,y=_-g;return{left:m,top:g,width:b,height:y}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)p.push(u(this.points[_].x-m,v),",",u(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](_,c(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,l){s.Object._fromObject("Polygon",f,l,"points")}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max,l=s.util.object.extend,u=s.util.object.clone,d=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=u(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,b=0,y=0,C=0,w=-this.pathOffset.x,T=-this.pathOffset.y;p.beginPath();for(var O=0,A=this.path.length;O<A;++O)switch(m=this.path[O],m[0]){case"L":_=m[1],b=m[2],p.lineTo(_+w,b+T);break;case"M":_=m[1],b=m[2],g=_,v=b,p.moveTo(_+w,b+T);break;case"C":_=m[5],b=m[6],y=m[3],C=m[4],p.bezierCurveTo(m[1]+w,m[2]+T,y+w,C+T,_+w,b+T);break;case"Q":p.quadraticCurveTo(m[1]+w,m[2]+T,m[3]+w,m[4]+T),_=m[3],b=m[4],y=m[1],C=m[2];break;case"z":case"Z":_=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,b=0,y=0,C,w=0,T=this.path.length;w<T;++w){switch(g=this.path[w],g[0]){case"L":b=g[1],y=g[2],C=[];break;case"M":b=g[1],y=g[2],v=b,_=y,C=[];break;case"C":C=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],y=g[6];break;case"Q":C=s.util.getBoundsOfCurve(b,y,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],y=g[4];break;case"z":case"Z":b=v,y=_;break}C.forEach(function(q){p.push(q.x),m.push(q.y)}),p.push(b),m.push(y)}var O=c(p)||0,A=c(m)||0,M=f(p)||0,Y=f(m)||0,U=M-O,K=Y-A;return{left:O,top:A,width:U,height:K}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){_.clipPath=b[0],m&&m(_)}):m&&m(_)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,l(v,g)))}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,d){u=u||{},this._objects=[],d&&this.callSuper("initialize",u),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],u)},_updateObjectCoords:function(l,u){var d=l.left,p=l.top,m=!0;l.set({left:d-u.x,top:p-u.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),l&&(u&&s.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(l,u);if(l==="canvas")for(;d--;)this._objects[d]._set(l,u);s.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=u;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,l);return p.objects=d,p},toDatalessObject:function(l){var u,d=this.sourcePath;if(d)u=d;else{var p=this.includeDefaultValues;u=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(l);return g.includeDefaultValues=v,_})}var m=s.Object.prototype.toDatalessObject.call(this,l);return m.objects=u,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=s.Object.prototype.shouldCache.call(this);if(l){for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,d=this._objects.length;u<d;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,d=this._objects.length;u<d;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){s.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new s.ActiveSelection([]);return p.set(d),p.type="activeSelection",u.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,u.add(m)}),p.canvas=u,p._objects=l,u._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],d=[],p,m,g,v=["tr","br","bl","tl"],_=0,b=this._objects.length,y,C=v.length;_<b;++_){for(p=this._objects[_],g=p.calcACoords(),y=0;y<C;y++)m=v[y],u.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(u,d,l)},_getBounds:function(l,u,d){var p=new s.Point(c(l),c(u)),m=new s.Point(f(l),f(u)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,b=m.y-p.y||0;this.width=_,this.height=b,d||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)u.push("		",this._objects[d].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],d=0,p=this._objects.length;d<p;d++)u.push("	",this._objects[d].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),s.Group.fromObject=function(l,u){var d=l.objects,p=s.util.object.clone(l,!0);if(delete p.objects,typeof d=="string"){s.loadSVGFromURL(d,function(m){var g=s.util.groupSVGElements(m,l,d),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(_){g.clipPath=_[0],u&&u(g)}):u&&u(g)});return}s.util.enlivenObjects(d,function(m){s.util.enlivenObjectEnlivables(l,p,function(){u&&u(new s.Group(m,p,!0))})})})}(t),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(c,f){f=f||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),l=new s.Group([]);if(delete f.type,l.set(f),c.forEach(function(d){d.canvas.remove(d),d.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,f,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,f),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,d=this._objects.length;u<d;u++)this._objects[u]._renderControls(c,l);c.restore()}}),s.ActiveSelection.fromObject=function(c,f){s.util.enlivenObjects(c.objects,function(l){delete c.objects,f&&f(new s.ActiveSelection(l,c,!0))})})}(t),function(a){var s=e.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(c,f)},getElement:function(){return this._element||{}},setElement:function(c,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-f,-l),c.lineTo(f,-l),c.lineTo(f,l),c.lineTo(-f,l),c.lineTo(-f,-l),c.closePath()}},toObject:function(c){var f=[];this.filters.forEach(function(u){u&&f.push(u.toObject())});var l=s(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],f=[],l,u=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,l=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?c=c.concat(l,f):c=c.concat(f,l),c},getSrc:function(c){var f=c?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(c,f,l){return e.util.loadImage(c,function(u,d){this.setElement(u,l),this._setWidthHeight(),f&&f(this,d)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,f=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,d=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>f&&d>f){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=d;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=d,e.filterBackend.applyFilters([c],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,l=f.naturalWidth||f.width,u=f.naturalHeight||f.height;if(this._element===this._originalElement){var d=e.util.createCanvasElement();d.width=l,d.height=u,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var f=this._element;if(f){var l=this._filterScalingX,u=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),b=f.naturalWidth||f.width,y=f.naturalHeight||f.height,C=v*l,w=_*u,T=m(d*l,b-C),O=m(p*u,y-w),A=-d/2,M=-p/2,Y=m(d,b/l-v),U=m(p,y/u-_);f&&c.drawImage(f,C,w,T,O,A,M,Y,U)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,f){this.setElement(e.util.getById(c),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,f){c&&c.length?e.util.enlivenObjects(c,function(l){f&&f(l)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(c){c||(c={});var f=this.getElement();this.width=c.width||f.naturalWidth||f.width||0,this.height=c.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,l=this._element.height,u=1,d=1,p=0,m=0,g=0,v=0,_,b=this.width,y=this.height,C={width:b,height:y};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=d=e.util.findScaleToFit(this._element,C),_=(b-f*u)/2,c.alignX==="Min"&&(p=-_),c.alignX==="Max"&&(p=_),_=(y-l*d)/2,c.alignY==="Min"&&(m=-_),c.alignY==="Max"&&(m=_)),c.meetOrSlice==="slice"&&(u=d=e.util.findScaleToCover(this._element,C),_=f-b/u,c.alignX==="Mid"&&(g=_/2),c.alignX==="Max"&&(g=_),_=l-y/d,c.alignY==="Mid"&&(v=_/2),c.alignY==="Max"&&(v=_),f=b/u,l=y/d)):(u=b/f,d=y/l),{width:f,height:l,scaleX:u,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,f){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,d){if(d){f&&f(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],e.util.enlivenObjectEnlivables(l,l,function(){var g=new e.Image(u,l);f(g,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,f,l){e.util.loadImage(c,function(u,d){f&&f(new e.Image(u,l),d)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,f,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],f,s(l?e.util.object.clone(l):{},u))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},c=a.onComplete||s,f=a.onChange||s,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),f()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,f){var l="precision "+f+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),l=f.getContext("webgl")||f.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,d[p])){e.webGlPrecision=d[p];break}}return this.isSupported=u,u},e.WebglFilterBackend=s;function s(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(c,f){this.dispose(),this.createWebGLCanvas(c,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,f)},chooseFastestCopyGLTo2DMethod:function(c,f){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&u&&d&&p){var m=e.util.createCanvasElement(),g=new ArrayBuffer(c*f*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=h;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:f,targetCanvas:m},_,b,y;m.width=c,m.height=f,_=window.performance.now(),o.call(v,this.gl,v),b=window.performance.now()-_,_=window.performance.now(),h.call(v,this.gl,v),y=window.performance.now()-_,b>y?(this.imageBuffer=g,this.copyGLTo2D=h):this.copyGLTo2D=o}},createWebGLCanvas:function(c,f){var l=e.util.createCanvasElement();l.width=c,l.height=f;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=l.getContext("webgl",u);d||(d=l.getContext("experimental-webgl",u)),d&&(d.clearColor(0,0,0,0),this.canvas=l,this.gl=d)},applyFilters:function(c,f,l,u,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,f));var v={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:m,sourceTexture:this.createTexture(m,l,u,!g&&f),targetTexture:this.createTexture(m,l,u),originalTexture:g||this.createTexture(m,l,u,!g&&f),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),c.forEach(function(b){b&&b.applyTo(v)}),r(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,f,l,u,d){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,f,l,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,f){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,f={renderer:"",vendor:""};if(!c)return f;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),d=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(f.renderer=u.toLowerCase()),d&&(f.vendor=d.toLowerCase())}return this.gpuInfo=f,f}}}();function r(a){var s=a.targetCanvas,c=s.width,f=s.height,l=a.destinationWidth,u=a.destinationHeight;(c!==l||f!==u)&&(s.width=l,s.height=u)}function o(a,s){var c=a.canvas,f=s.targetCanvas,l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1);var u=c.height-f.height;l.drawImage(c,0,u,f.width,f.height,0,0,f.width,f.height)}function h(a,s){var c=s.targetCanvas,f=c.getContext("2d"),l=s.destinationWidth,u=s.destinationHeight,d=l*u*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);a.readPixels(0,0,l,u,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,u);f.putImageData(g,0,0)}(function(){var a=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,f,l,u,d){var p=d.getContext("2d");p.drawImage(f,0,0,l,u);var m=p.getImageData(0,0,l,u),g=p.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:m,originalEl:f,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return c.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,c){s=s||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(f,c),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(f));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,s),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var u=a.createProgram();if(a.attachShader(u,f),a.attachShader(u,l),a.linkProgram(u),!a.getProgramParameter(u,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(u));var d=this.getAttributeLocations(a,u),p=this.getUniformLocations(a,u)||{};return p.uStepW=a.getUniformLocation(u,"uStepW"),p.uStepH=a.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,c){var f=s.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,c,f;a.passes>1?(c=a.destinationWidth,f=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==f)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,c,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=e.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var c=s[a].length;c--;)if(this[a][c]!==s[a][c])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(c.program),this.sendAttributeData(s,c.attributeLocations,a.aPosition),s.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,c.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(a,s){var c=new e.Image.filters[a.type](a);return s&&s(c),c},function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.ColorMatrix=f(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m=this.matrix,g,v,_,b,y,C=this.colorsOnly;for(y=0;y<p;y+=4)g=d[y],v=d[y+1],_=d[y+2],C?(d[y]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(b=d[y+3],d[y]=g*m[0]+v*m[1]+_*m[2]+b*m[3]+m[4]*255,d[y+1]=g*m[5]+v*m[6]+_*m[7]+b*m[8]+m[9]*255,d[y+2]=g*m[10]+v*m[11]+_*m[12]+b*m[13]+m[14]*255,d[y+3]=g*m[15]+v*m[16]+_*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,p),l.uniform4fv(u.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Brightness=f(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,d=u.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Convolute=l(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return u.programCache.hasOwnProperty(p)||(u.programCache[p]=this.createProgram(u.context,m)),u.programCache[p]},applyTo2d:function(u){var d=u.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=d.width,b=d.height,y=u.ctx.createImageData(_,b),C=y.data,w=this.opaque?1:0,T,O,A,M,Y,U,K,q,B,W,ee,ne,x;for(ee=0;ee<b;ee++)for(W=0;W<_;W++){for(Y=(ee*_+W)*4,T=0,O=0,A=0,M=0,x=0;x<g;x++)for(ne=0;ne<g;ne++)K=ee+x-v,U=W+ne-v,!(K<0||K>=b||U<0||U>=_)&&(q=(K*_+U)*4,B=m[x*g+ne],T+=p[q]*B,O+=p[q+1]*B,A+=p[q+2]*B,w||(M+=p[q+3]*B));C[Y]=T,C[Y+1]=O,C[Y+2]=A,w?C[Y+3]=p[Y+3]:C[Y+3]=M}u.imageData=y},getUniformLocations:function(u,d){return{uMatrix:u.getUniformLocation(d,"uMatrix"),uOpaque:u.getUniformLocation(d,"uOpaque"),uHalfSize:u.getUniformLocation(d,"uHalfSize"),uSize:u.getUniformLocation(d,"uSize")}},sendUniformData:function(u,d){u.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Grayscale=f(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var d=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,d)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var d=1;l.uniform1i(u.uMode,d)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Invert=f(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,d=u.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.Noise=l(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var d=u.imageData,p=d.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(u,d){return{uNoise:u.getUniformLocation(d,"uNoise"),uSeed:u.getUniformLocation(d,"uSeed")}},sendUniformData:function(u,d){u.uniform1f(d.uNoise,this.noise/255),u.uniform1f(d.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Pixelate=f(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,d=u.data,p=u.height,m=u.width,g,v,_,b,y,C,w,T,O,A,M;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,b=d[g],y=d[g+1],C=d[g+2],w=d[g+3],A=Math.min(v+this.blocksize,p),M=Math.min(_+this.blocksize,m),T=v;T<A;T++)for(O=_;O<M;O++)g=T*4*m+O*4,d[g]=b,d[g+1]=y,d[g+2]=C,d[g+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.extend,f=s.Image.filters,l=s.util.createClass;f.RemoveColor=l(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var d=u.imageData,p=d.data,m,g=this.distance*255,v,_,b,y=new s.Color(this.color).getSource(),C=[y[0]-g,y[1]-g,y[2]-g],w=[y[0]+g,y[1]+g,y[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],b=p[m+2],v>C[0]&&_>C[1]&&b>C[2]&&v<w[0]&&_<w[1]&&b<w[2]&&(p[m+3]=0)},getUniformLocations:function(u,d){return{uLow:u.getUniformLocation(d,"uLow"),uHigh:u.getUniformLocation(d,"uHigh")}},sendUniformData:function(u,d){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];u.uniform4fv(d.uLow,g),u.uniform4fv(d.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=f(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),s.Image.filters[u].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendColor=f(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d;return l.programCache.hasOwnProperty(u)||(d=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,d=u.data,p=d.length,m,g,v,_,b,y,C,w=1-this.alpha;C=new s.Color(this.color).getSource(),m=C[0]*this.alpha,g=C[1]*this.alpha,v=C[2]*this.alpha;for(var T=0;T<p;T+=4)switch(_=d[T],b=d[T+1],y=d[T+2],this.mode){case"multiply":d[T]=_*m/255,d[T+1]=b*g/255,d[T+2]=y*v/255;break;case"screen":d[T]=255-(255-_)*(255-m)/255,d[T+1]=255-(255-b)*(255-g)/255,d[T+2]=255-(255-y)*(255-v)/255;break;case"add":d[T]=_+m,d[T+1]=b+g,d[T+2]=y+v;break;case"diff":case"difference":d[T]=Math.abs(_-m),d[T+1]=Math.abs(b-g),d[T+2]=Math.abs(y-v);break;case"subtract":d[T]=_-m,d[T+1]=b-g,d[T+2]=y-v;break;case"darken":d[T]=Math.min(_,m),d[T+1]=Math.min(b,g),d[T+2]=Math.min(y,v);break;case"lighten":d[T]=Math.max(_,m),d[T+1]=Math.max(b,g),d[T+2]=Math.max(y,v);break;case"overlay":d[T]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,d[T+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,d[T+2]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255;break;case"exclusion":d[T]=m+_-2*m*_/255,d[T+1]=g+b-2*g*b/255,d[T+2]=v+y-2*v*y/255;break;case"tint":d[T]=m+_*w,d[T+1]=g+b*w,d[T+2]=v+y*w}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var d=new s.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,l.uniform4fv(u.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric,c=s.Image.filters,f=s.util.createClass;c.BlendImage=f(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,d)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,d=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,d,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,d=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/d,1]},applyTo2d:function(l){var u=l.imageData,d=l.filterBackend.resources,p=u.data,m=p.length,g=u.width,v=u.height,_,b,y,C,w,T,O,A,M,Y,U=this.image,K;d.blendImage||(d.blendImage=s.util.createCanvasElement()),M=d.blendImage,Y=M.getContext("2d"),M.width!==g||M.height!==v?(M.width=g,M.height=v):Y.clearRect(0,0,g,v),Y.setTransform(U.scaleX,0,0,U.scaleY,U.left,U.top),Y.drawImage(U._element,0,0,g,v),K=Y.getImageData(0,0,g,v).data;for(var q=0;q<m;q+=4)switch(w=p[q],T=p[q+1],O=p[q+2],A=p[q+3],_=K[q],b=K[q+1],y=K[q+2],C=K[q+3],this.mode){case"multiply":p[q]=w*_/255,p[q+1]=T*b/255,p[q+2]=O*y/255,p[q+3]=A*C/255;break;case"mask":p[q+3]=C;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var d=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(l,u){s.Image.fromObject(l.image,function(d){var p=s.util.object.clone(l);p.image=d,u(new s.Image.filters.BlendImage(p))})}}(t),function(a){var s=a.fabric||(a.fabric={}),c=Math.pow,f=Math.floor,l=Math.sqrt,u=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),y=this.type+"_"+b;if(!_.programCache.hasOwnProperty(y)){var C=this.generateShader(b);_.programCache[y]=this.createProgram(_.context,C)}return _.programCache[y]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,y=this.getFilterWindow(),C=new Array(y),w=1;w<=y;w++)C[w-1]=_(w*b);return C},generateShader:function(C){for(var b=new Array(C),y=this.fragmentSourceTOP,C,w=1;w<=C;w++)b[w-1]=w+".0 * uDelta";return y+="uniform float uTaps["+C+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,b.forEach(function(T,O){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+O+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+O+`];
`,y+="  sum += 2.0 * uTaps["+O+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(b){if(b>=_||b<=-_)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var y=b/_;return p(b)/b*p(y)/y}},applyTo2d:function(_){var b=_.imageData,y=this.scaleX,C=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/C;var w=b.width,T=b.height,O=d(w*y),A=d(T*C),M;this.resizeType==="sliceHack"?M=this.sliceByTwo(_,w,T,O,A):this.resizeType==="hermite"?M=this.hermiteFastResize(_,w,T,O,A):this.resizeType==="bilinear"?M=this.bilinearFiltering(_,w,T,O,A):this.resizeType==="lanczos"&&(M=this.lanczosResize(_,w,T,O,A)),_.imageData=M},sliceByTwo:function(_,b,y,C,w){var T=_.imageData,O=.5,A=!1,M=!1,Y=b*O,U=y*O,K=s.filterBackend.resources,q,B,W=0,ee=0,ne=b,x=0;for(K.sliceByTwo||(K.sliceByTwo=document.createElement("canvas")),q=K.sliceByTwo,(q.width<b*1.5||q.height<y)&&(q.width=b*1.5,q.height=y),B=q.getContext("2d"),B.clearRect(0,0,b*1.5,y),B.putImageData(T,0,0),C=f(C),w=f(w);!A||!M;)b=Y,y=U,C<f(Y*O)?Y=f(Y*O):(Y=C,A=!0),w<f(U*O)?U=f(U*O):(U=w,M=!0),B.drawImage(q,W,ee,b,y,ne,x,Y,U),W=ne,ee=x,x+=U;return B.getImageData(W,ee,C,w)},lanczosResize:function(_,b,y,C,w){function T(L){var I,Z,F,D,X,J,re,te,$,ae,pe;for(x.x=(L+.5)*U,P.x=f(x.x),I=0;I<w;I++){for(x.y=(I+.5)*K,P.y=f(x.y),X=0,J=0,re=0,te=0,$=0,Z=P.x-W;Z<=P.x+W;Z++)if(!(Z<0||Z>=b)){ae=f(1e3*u(Z-x.x)),ne[ae]||(ne[ae]={});for(var z=P.y-ee;z<=P.y+ee;z++)z<0||z>=y||(pe=f(1e3*u(z-x.y)),ne[ae][pe]||(ne[ae][pe]=Y(l(c(ae*q,2)+c(pe*B,2))/1e3)),F=ne[ae][pe],F>0&&(D=(z*b+Z)*4,X+=F,J+=F*O[D],re+=F*O[D+1],te+=F*O[D+2],$+=F*O[D+3]))}D=(I*C+L)*4,M[D]=J/X,M[D+1]=re/X,M[D+2]=te/X,M[D+3]=$/X}return++L<C?T(L):A}var O=_.imageData.data,A=_.ctx.createImageData(C,w),M=A.data,Y=this.lanczosCreate(this.lanczosLobes),U=this.rcpScaleX,K=this.rcpScaleY,q=2/this.rcpScaleX,B=2/this.rcpScaleY,W=m(U*this.lanczosLobes/2),ee=m(K*this.lanczosLobes/2),ne={},x={},P={};return T(0)},bilinearFiltering:function(_,b,y,C,w){var T,O,A,M,Y,U,K,q,B,W,ee,ne,x=0,P,L=this.rcpScaleX,I=this.rcpScaleY,Z=4*(b-1),F=_.imageData,D=F.data,X=_.ctx.createImageData(C,w),J=X.data;for(K=0;K<w;K++)for(q=0;q<C;q++)for(Y=f(L*q),U=f(I*K),B=L*q-Y,W=I*K-U,P=4*(U*b+Y),ee=0;ee<4;ee++)T=D[P+ee],O=D[P+4+ee],A=D[P+Z+ee],M=D[P+Z+4+ee],ne=T*(1-B)*(1-W)+O*B*(1-W)+A*W*(1-B)+M*B*W,J[x++]=ne;return X},hermiteFastResize:function(_,b,y,C,w){for(var T=this.rcpScaleX,O=this.rcpScaleY,A=m(T/2),M=m(O/2),Y=_.imageData,U=Y.data,K=_.ctx.createImageData(C,w),q=K.data,B=0;B<w;B++)for(var W=0;W<C;W++){for(var ee=(W+B*C)*4,ne=0,x=0,P=0,L=0,I=0,Z=0,F=0,D=(B+.5)*O,X=f(B*O);X<(B+1)*O;X++)for(var J=u(D-(X+.5))/M,re=(W+.5)*T,te=J*J,$=f(W*T);$<(W+1)*T;$++){var ae=u(re-($+.5))/A,pe=l(te+ae*ae);pe>1&&pe<-1||(ne=2*pe*pe*pe-3*pe*pe+1,ne>0&&(ae=4*($+X*b),F+=ne*U[ae+3],P+=ne,U[ae+3]<255&&(ne=ne*U[ae+3]/250),L+=ne*U[ae],I+=ne*U[ae+1],Z+=ne*U[ae+2],x+=ne))}q[ee]=L/x,q[ee+1]=I/x,q[ee+2]=Z/x,q[ee+3]=F/P}return K},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Contrast=f(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,d,m,p=u.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Saturation=f(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),d[g]+=v!==d[g]?(v-d[g])*m:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*m:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*m:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Vibrance=f(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,d=u.data,p=d.length,m=-this.vibrance,g,v,_,b;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),_=(d[g]+d[g+1]+d[g+2])/3,b=Math.abs(v-_)*2/255*m,d[g]+=v!==d[g]?(v-d[g])*b:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*b:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*b:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Blur=f(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,d,p,m=l.imageData.width,g=l.imageData.height;u.blurLayer1||(u.blurLayer1=s.util.createCanvasElement(),u.blurLayer2=s.util.createCanvasElement()),d=u.blurLayer1,p=u.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var v=d.getContext("2d"),_=p.getContext("2d"),b=15,y,C,w,T,O=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),_.clearRect(0,0,m,g),T=-b;T<=b;T++)y=(Math.random()-.5)/4,C=T/b,w=O*C*m+y,_.globalAlpha=1-Math.abs(C),_.drawImage(d,w,y),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(T=-b;T<=b;T++)y=(Math.random()-.5)/4,C=T/b,w=O*C*g+y,_.globalAlpha=1-Math.abs(C),_.drawImage(d,y,w),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);l.ctx.drawImage(d,0,0);var A=l.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),A},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var d=this.chooseRightDelta();l.uniform2fv(u.delta,d)},chooseRightDelta:function(){var l=1,u=[0,0],d;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),d=l*this.blur*.12,this.horizontal?u[0]=d:u[1]=d,u}}),c.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Gamma=f(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,d=u.data,p=this.gamma,m=d.length,g=1/p[0],v=1/p[1],_=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,_)*255;for(b=0,m=d.length;b<m;b+=4)d[b]=this.rVals[d[b]],d[b+1]=this.gVals[d[b+1]],d[b+2]=this.bVals[d[b+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.Composed=f(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(l,u){var d=l.subFilters||[],p=d.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return u&&u(m),m}}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.Image.filters,f=s.util.createClass;c.HueRotation=f(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=s.util.cos(l),d=s.util.sin(l),p=1/3,m=Math.sqrt(p)*d,g=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=u+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=u+p*g},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(a){var s=a.fabric||(a.fabric={}),c=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=s.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,d,p,m,g,v,_=0,b=this._textLines.length;_<b;_++)if(!(this.textAlign!=="justify"&&(_===b-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],u=this.getLineWidth(_),u<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){d=v.length,l=(this.width-u)/d;for(var y=0,C=m.length;y<=C;y++)g=this.__charBounds[_][y],this._reSpaceAndTab.test(m[y])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,d){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,d)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,d=this._textLines.length;u<d;u++){var p=this.getLineWidth(u);p>l&&(l=p)}return l},_renderTextLine:function(l,u,d,p,m,g){this._renderChars(l,u,d,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,d,p=l.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),b=0,y=0,C,w,T=this.path,O,A=0,M=this._textLines.length;A<M;A++){if(u=this.getHeightOfLine(A),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",A)){_+=u;continue}m=this._textLines[A],d=this._getLineLeftOffset(A),y=0,b=0,g=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var Y=0,U=m.length;Y<U;Y++)C=this.__charBounds[A][Y],w=this.getValueOfPropertyAt(A,Y,"textBackgroundColor"),T?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),l.fillStyle=w,w&&l.fillRect(-C.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),C.width,u/this.lineHeight),l.restore()):w!==g?(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=g,g&&l.fillRect(O,_,y,u/this.lineHeight),b=C.left,y=C.width,g=w):y+=C.kernedWidth;w&&!T&&(O=v+d+b,this.direction==="rtl"&&(O=this.width-O-y),l.fillStyle=w,l.fillRect(O,_,y,u/this.lineHeight)),_+=u}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();s.charWidthsCache[u]||(s.charWidthsCache[u]={});var d=s.charWidthsCache[u],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(l,u,d,p){var m=this.getFontCache(u),g=this._getFontDeclaration(u),v=this._getFontDeclaration(p),_=d+l,b=g===v,y,C,w,T=u.fontSize/this.CACHE_FONT_SIZE,O;if(d&&m[d]!==void 0&&(w=m[d]),m[l]!==void 0&&(O=y=m[l]),b&&m[_]!==void 0&&(C=m[_],O=C-w),y===void 0||w===void 0||C===void 0){var A=this.getMeasuringContext();this._setTextStyles(A,u,!0)}return y===void 0&&(O=y=A.measureText(l).width,m[l]=y),w===void 0&&b&&d&&(w=A.measureText(d).width,m[d]=w),b&&C===void 0&&(C=A.measureText(_).width,m[_]=C,O=C-w),{width:y*T,kernedWidth:O*T}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,d,p,m=this._textLines[l],g,v,_=0,b=new Array(m.length),y=0,C,w,T=this.path,O=this.pathSide==="right";for(this.__charBounds[l]=b,d=0;d<m.length;d++)p=m[d],v=this._getGraphemeBox(p,l,d,g),b[d]=v,u+=v.kernedWidth,g=p;if(b[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(w=T.segmentsInfo[T.segmentsInfo.length-1].length,C=s.util.getPointOnPath(T.path,0,T.segmentsInfo),C.x+=T.pathOffset.x,C.y+=T.pathOffset.y,this.textAlign){case"left":y=O?w-u:0;break;case"center":y=(w-u)/2;break;case"right":y=O?0:w-u;break}for(y+=this.pathStartOffset*(O?-1:1),d=O?m.length-1:0;O?d>=0:d<m.length;O?d--:d++)v=b[d],y>w?y%=w:y<0&&(y+=w),this._setGraphemeOnPath(y,v,C),y+=v.kernedWidth}return{width:u,numOfSpaces:_}},_setGraphemeOnPath:function(l,u,d){var p=l+u.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);u.renderLeft=g.x-d.x,u.renderTop=g.y-d.y,u.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,d,p,m){var g=this.getCompleteStyleDeclaration(u,d),v=p?this.getCompleteStyleDeclaration(u,d-1):{},_=this._measureChar(l,g,p,v),b=_.kernedWidth,y=_.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),y+=C,b+=C);var w={width:y,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(d>0&&!m){var T=this.__charBounds[u][d-1];w.left=T.left+T.width+_.kernedWidth-_.width}return w},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],d=this.getHeightOfChar(l,0),p=1,m=u.length;p<m;p++)d=Math.max(this.getHeightOfChar(l,p),d);return this.__lineHeights[l]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,d=0,p=this._textLines.length;d<p;d++)l=this.getHeightOfLine(d),u+=d===p-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),b=_/this.lineHeight,y=this._getLineLeftOffset(g);this._renderTextLine(u,l,this._textLines[g],p+y,m+d+b,g),d+=_}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,d,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,b,y,C="",w,T=0,O,A=this.path,M=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!A,Y=this.direction==="ltr",U=this.direction==="ltr"?1:-1,K,q=u.canvas.getAttribute("dir");if(u.save(),q!==this.direction&&(u.canvas.setAttribute("dir",Y?"ltr":"rtl"),u.direction=Y?"ltr":"rtl",u.textAlign=Y?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,M){this._renderChar(l,u,g,0,d.join(""),p,m,v),u.restore();return}for(var B=0,W=d.length-1;B<=W;B++)O=B===W||this.charSpacing||A,C+=d[B],w=this.__charBounds[g][B],T===0?(p+=U*(w.kernedWidth-w.width),T+=w.width):T+=w.kernedWidth,_&&!O&&this._reSpaceAndTab.test(d[B])&&(O=!0),O||(b=b||this.getCompleteStyleDeclaration(g,B),y=this.getCompleteStyleDeclaration(g,B+1),O=s.util.hasStyleChanged(b,y,!1)),O&&(A?(u.save(),u.translate(w.renderLeft,w.renderTop),u.rotate(w.angle),this._renderChar(l,u,g,B,C,-T/2,0,v),u.restore()):(K=p,this._renderChar(l,u,g,B,C,K,m,v)),C="",b=y,p+=U*T,T=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=s.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return u.width=p,u.height=m,d=u.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=l.toLive(d),this._applyPatternGradientTransform(d,l),d.fill(),d.createPattern(u,"no-repeat")},handleFiller:function(l,u,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[u]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(l[u]=d.toLive(l,this),this._applyPatternGradientTransform(l,d)):(l[u]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,d,p,m,g,v){var _=this._getStyleDeclaration(d,p),b=this.getCompleteStyleDeclaration(d,p),y=l==="fillText"&&b.fill,C=l==="strokeText"&&b.stroke&&b.strokeWidth,w,T;!C&&!y||(u.save(),y&&(w=this._setFillStyles(u,b)),C&&(T=this._setStrokeStyles(u,b)),u.font=this._getFontDeclaration(b),_&&_.textBackgroundColor&&this._removeShadow(u),_&&_.deltaY&&(v+=_.deltaY),y&&u.fillText(m,g-w.offsetX,v-w.offsetY),C&&u.strokeText(m,g-T.offsetX,v-T.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,d){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),d=this.width-u,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),d=u.width;return this.__lineWidths[l]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,d){var p=this._getStyleDeclaration(l,u);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var d,p,m,g,v,_,b,y,C=this._getLeftOffset(),w=this._getTopOffset(),T,O,A,M,Y,U,K,q,B=this.path,W=this._getWidthOfCharSpacing(),ee=this.offsets[u],ne=0,x=this._textLines.length;ne<x;ne++){if(d=this.getHeightOfLine(ne),!this[u]&&!this.styleHas(u,ne)){w+=d;continue}b=this._textLines[ne],U=d/this.lineHeight,g=this._getLineLeftOffset(ne),O=0,A=0,y=this.getValueOfPropertyAt(ne,0,u),q=this.getValueOfPropertyAt(ne,0,"fill"),T=w+U*(1-this._fontSizeFraction),p=this.getHeightOfChar(ne,0),v=this.getValueOfPropertyAt(ne,0,"deltaY");for(var P=0,L=b.length;P<L;P++)if(M=this.__charBounds[ne][P],Y=this.getValueOfPropertyAt(ne,P,u),K=this.getValueOfPropertyAt(ne,P,"fill"),m=this.getHeightOfChar(ne,P),_=this.getValueOfPropertyAt(ne,P,"deltaY"),B&&Y&&K)l.save(),l.fillStyle=q,l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),l.fillRect(-M.kernedWidth/2,ee*m+_,M.kernedWidth,this.fontSize/15),l.restore();else if((Y!==y||K!==q||m!==p||_!==v)&&A>0){var I=C+g+O;this.direction==="rtl"&&(I=this.width-I-A),y&&q&&(l.fillStyle=q,l.fillRect(I,T+ee*p+v,A,this.fontSize/15)),O=M.left,A=M.width,y=Y,q=K,p=m,v=_}else A+=M.kernedWidth;var I=C+g+O;this.direction==="rtl"&&(I=this.width-I-A),l.fillStyle=K,Y&&K&&l.fillRect(I,T+ee*p+v,A-W,this.fontSize/15),w+=d}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var d=l||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[s.isLikelyNode?d.fontWeight:d.fontStyle,s.isLikelyNode?d.fontStyle:d.fontWeight,u?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),d=new Array(u.length),p=[`
`],m=[],g=0;g<u.length;g++)d[g]=s.util.string.graphemeSplit(u[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:u,graphemeText:m,graphemeLines:d}},toObject:function(l){var u=f.concat(l),d=this.callSuper("toObject",u);return d.styles=s.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(l,u){this.callSuper("set",l,u);var d=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(l,u,d){if(!l)return u(null);var p=s.parseAttributes(l,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=s.util.object.extend(d?c(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=d.strokeWidth;d.strokeWidth=0;var b=new s.Text(v,d),y=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,w=C*y,T=b.getScaledHeight()+w,O=0;m==="center"&&(O=b.getScaledWidth()/2),m==="right"&&(O=b.getScaledWidth()),b.set({left:b.left-O,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof _<"u"?_:1}),u(b)},s.Text.fromObject=function(l,u){var d=c(l),p=l.path;return delete d.path,s.Object._fromObject("Text",d,function(m){m.styles=s.util.stylesFromArray(l.styles,l.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),u(m)},"path"):u(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in s)for(var f in s[c])for(var l in s[c][f])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var c=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in c)for(var l in c[f])if(typeof c[f][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,c=0,f,l,u=!0,d=0,p;for(var m in s){f=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);c++,v?(l?p[a]!==l&&(u=!1):l=p[a],p[a]===this[a]&&delete p[a]):u=!1,Object.keys(p).length!==0?f++:delete s[m][g]}f===0&&delete s[m]}for(var _=0;_<this._textLines.length;_++)d+=this._textLines[_].length;u&&c===d&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,c,f,l;for(f in s){c=s[f];for(l in c)delete c[l][a],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete s[f]}}},_extendStyles:function(a,s){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var c=s?this._unwrappedTextLines:this._textLines,f=c.length,l=0;l<f;l++){if(a<=c[l].length)return{lineIndex:l,charIndex:a};a-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<a?c[l-1].length:a}},getSelectionStyles:function(a,s,c){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var f=[],l=a;l<s;l++)f.push(this.getStyleAtPosition(l,c));return f},getStyleAtPosition:function(a,s){var c=this.get2DCursorLocation(a),f=s?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return f||{}},setSelectionStyles:function(a,s,c){typeof s>"u"&&(s=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||s);for(var f=s;f<c;f++)this._extendStyles(f,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var c=this.styles&&this.styles[a];return c?c[s]:null},getCompleteStyleDeclaration:function(a,s){for(var c=this._getStyleDeclaration(a,s)||{},f={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],f[l]=typeof c[l]>"u"?this[l]:c[l];return f},_setStyleDeclaration:function(a,s,c){this.styles[a][s]=c},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,c){this.callSuper("initialize",s,c),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,c){this[s]!==c&&(this._fireSelectionChanged(),this[s]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,f=this.canvas.viewportTransform;c.save(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(c),this._clearTextArea(c),s||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,c):this.renderSelection(s,c),c.restore()}},_clearTextArea:function(s){var c=this.width+4,f=this.height+4;s.clearRect(-c/2,-f/2,c,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var c=this._getLeftOffset(),f=this._getTopOffset(),l=this._getCursorBoundariesOffsets(s);return{left:c,top:f,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,f,l,u=0,d=0,p,m=this.get2DCursorLocation(s);l=m.charIndex,f=m.lineIndex;for(var g=0;g<f;g++)u+=this.getHeightOfLine(g);c=this._getLineLeftOffset(f);var v=this.__charBounds[f][l];return v&&(d=v.left),this.charSpacing!==0&&l===this._textLines[f].length&&(d-=this._getWidthOfCharSpacing()),p={top:u,left:c+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,c){var f=this.get2DCursorLocation(),l=f.lineIndex,u=f.charIndex>0?f.charIndex-1:0,d=this.getValueOfPropertyAt(l,u,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,d)},renderSelection:function(s,c){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(f),p=this.get2DCursorLocation(l),m=d.lineIndex,g=p.lineIndex,v=d.charIndex<0?0:d.charIndex,_=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var y=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),w=0,T=0,O=0;if(b===m&&(T=this.__charBounds[m][v].left),b>=m&&b<g)O=u&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(_===0)O=this.__charBounds[g][_].left;else{var A=this._getWidthOfCharSpacing();O=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-A}w=C,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(C/=this.lineHeight);var M=s.left+y+T,Y=O-T,U=C,K=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",U=1,K=C):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(M=this.width-M-Y),c.fillRect(M,s.top+s.topOffset+K,Y,U),s.topOffset+=w}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),c=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c}}}),e.IText.fromObject=function(s,c){var f=e.util.stylesFromArray(s.styles,s.text),l=Object.assign({},s,{styles:f});if(a(l),l.styles)for(var u in l.styles)for(var d in l.styles[u])a(l.styles[u][d]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var a=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var c=s.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,s._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var c=s.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,s),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,s._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,c,f,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",c,{duration:f,onComplete:function(){u.isAborted||s[l]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var c=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var c=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f--;for(;/\S/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findWordBoundaryRight:function(s){var c=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)c++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},findLineBoundaryLeft:function(s){for(var c=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)c++,f--;return s-c},findLineBoundaryRight:function(s){for(var c=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)c++,f++;return s+c},searchWordBoundary:function(s,c){for(var f=this._text,l=this._reSpace.test(f[s])?s-1:s,u=f[l],d=e.reNonWord;!d.test(u)&&l>0&&l<f.length;)l+=c,u=f[l];return d.test(u)&&(l+=c===1?0:1),l},selectWord:function(s){s=s||this.selectionStart;var c=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var c=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=c,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||f===l)&&(f===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,c,f){var l=f.slice(0,s),u=e.util.string.graphemeSplit(l).length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=e.util.string.graphemeSplit(d).length;return{selectionStart:u,selectionEnd:u+p}},fromGraphemeToStringSelection:function(s,c,f){var l=f.slice(0,s),u=l.join("").length;if(s===c)return{selectionStart:u,selectionEnd:u};var d=f.slice(s,c),p=d.join("").length;return{selectionStart:u,selectionEnd:u+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),l=f.lineIndex,u=f.charIndex,d=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+d},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/v,y=_.height/v,C=b-d,w=y-d,T=_.clientWidth/b,O=_.clientHeight/y;return g=e.util.transformPoint(g,m),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=T,g.y*=O,g.x<0&&(g.x=0),g.x>C&&(g.x=C),g.y<0&&(g.y=0),g.y>w&&(g.y=w),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,c){var f=this.get2DCursorLocation(s,!0),l=this.get2DCursorLocation(c,!0),u=f.lineIndex,d=f.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(u!==p){if(this.styles[u])for(g=d;g<this._unwrappedTextLines[u].length;g++)delete this.styles[u][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][d+g-m]=v);for(g=u+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,u-p)}else if(this.styles[u]){v=this.styles[u];var _=m-d,b,y;for(g=d;g<m;g++)delete v[g];for(y in this.styles[u])b=parseInt(y,10),b>=m&&(v[b-_]=v[y],delete v[y])}},shiftLineStyles:function(s,c){var f=a(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>s&&(this.styles[u+c]=f[u],f[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,c,f,l){var u,d={},p=!1,m=this._unwrappedTextLines[s].length===c;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(u=this.styles[s][c===0?c:c-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=c&&(p=!0,d[v-c]=this.styles[s][g],m&&c===0||delete this.styles[s][g])}var _=!1;for(p&&!m&&(this.styles[s+f]=d,_=!0),_&&f--;f>0;)l&&l[f-1]?this.styles[s+f]={0:a(l[f-1])}:u?this.styles[s+f]={0:a(u)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,c,f,l){this.styles||(this.styles={});var u=this.styles[s],d=u?a(u):{};f||(f=1);for(var p in d){var m=parseInt(p,10);m>=c&&(u[m+f]=d[m],d[m-f]||delete u[m])}if(this._forceClearCache=!0,l){for(;f--;)Object.keys(l[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][c+f]=a(l[f]));return}if(u)for(var g=u[c?c-1:1];g&&f--;)this.styles[s][c+f]=a(g)},insertNewStyleBlock:function(s,c,f){for(var l=this.get2DCursorLocation(c,!0),u=[0],d=0,p=0;p<s.length;p++)s[p]===`
`?(d++,u[d]=0):u[d]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],f),f=f&&f.slice(u[0]+1)),d&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],d);for(var p=1;p<d;p++)u[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,u[p],f):f&&this.styles[l.lineIndex+p]&&f[0]&&(this.styles[l.lineIndex+p][0]=f[0]),f=f&&f.slice(u[p]+1);u[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,u[p],f)},setSelectionStartEndWithShift:function(s,c,f){f<=s?(c===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<c?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(c===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),c=this.selectionStart,f=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),c=0,f=0,l=0,u=0,d=0,p,m,g=0,v=this._textLines.length;g<v&&l<=s.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(u+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),f=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var _=0,b=m.length;_<b&&(c=f,f+=this.__charBounds[d][_].kernedWidth*this.scaleX,f<=s.x);_++)u++;return this._getNewSelectionStartFromOffset(s,c,f,u,b)},_getNewSelectionStartFromOffset:function(a,s,c,f,l){var u=a.x-s,d=c-a.x,p=d>u||d<0?0:1,m=f+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,l=c.length,u,d,p=l-f,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,b,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=m>C.selectionStart;v?(u=this._text.slice(m,g),p+=g-m):l<f&&(w?u=this._text.slice(g+p,g):u=this._text.slice(m,m-p)),d=c.slice(C.selectionEnd-p,C.selectionEnd),u&&u.length&&(d.length&&(_=this.getSelectionStyles(m,m+1,!1),_=d.map(function(){return _[0]})),v?(b=m,y=g):w?(b=g-u.length,y=g):(b=g,y=g+u.length),this.removeStyleFromTo(b,y)),d.length&&(s&&d.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(_=e.copiedTextStyle),this.insertNewStyleBlock(d,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(a,s){var c=this._getLineLeftOffset(a),f;return s>0&&(f=this.__charBounds[a][s-1],c+=f.left+f.width),c},getDownCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l+1,d),m=this._textLines[l].slice(u);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var c=this._getSelectionForOffset(a,s),f=this.get2DCursorLocation(c),l=f.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-c;var u=f.charIndex,d=this._getWidthBeforeCursor(l,u),p=this._getIndexOnLine(l-1,d),m=this._textLines[l].slice(0,u),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var c=this._textLines[a],f=this._getLineLeftOffset(a),l=f,u=0,d,p,m=0,g=c.length;m<g;m++)if(d=this.__charBounds[a][m].width,l+=d,l>s){p=!0;var v=l-d,_=l,b=Math.abs(v-s),y=Math.abs(_-s);u=y<b?m:m-1;break}return p||(u=c.length-1),u},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var c="get"+a+"CursorOffset",f=this[c](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,c){var f;if(a.altKey)f=this["findWordBoundary"+c](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)f=this["findLineBoundary"+c](this[s]);else return this[s]+=c==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?c+="Shift":c+="outShift",this[c](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,c,f){typeof f>"u"&&(f=c),f>c&&this.removeStyleFromTo(c,f);var l=e.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,c,s),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var f=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,f){var l=[],u=[],d=c,p;this._setSVGBg(u);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(u,m,f+p,d),this._setSVGTextLineText(l,m,f+p,d),d+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,f,l,u){var d=c!==c.trim()||c.match(s),p=this.getSvgSpanStyles(f,d),m=p?'style="'+p+'"':"",g=f.deltaY,v="",_=e.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(l,_),'" y="',a(u,_),'" ',v,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,f,l,u){var d=this.getHeightOfLine(f),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,b,y=0,C=this._textLines[f],w;u+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,O=C.length-1;T<=O;T++)w=T===O||this.charSpacing,v+=C[T],_=this.__charBounds[f][T],y===0?(l+=_.kernedWidth-_.width,y+=_.width):y+=_.kernedWidth,p&&!w&&this._reSpaceAndTab.test(C[T])&&(w=!0),w||(m=m||this.getCompleteStyleDeclaration(f,T),g=this.getCompleteStyleDeclaration(f,T+1),w=e.util.hasStyleChanged(m,g,!0)),w&&(b=this._getStyleDeclaration(f,T)||{},c.push(this._createTextCharSpan(v,b,l,u)),v="",m=g,l+=y,y=0)},_pushTextBgRect:function(c,f,l,u,d,p){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(f),' x="',a(l,m),'" y="',a(u,m),'" width="',a(d,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,f,l,u){for(var d=this._textLines[f],p=this.getHeightOfLine(f)/this.lineHeight,m=0,g=0,v,_,b=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),y=0,C=d.length;y<C;y++)v=this.__charBounds[f][y],_=this.getValueOfPropertyAt(f,y,"textBackgroundColor"),_!==b?(b&&this._pushTextBgRect(c,b,l+g,u,m,p),g=v.left,m=v.width,b=_):m+=v.kernedWidth;_&&this._pushTextBgRect(c,_,l+g,u,m,p)},_getFillAttributes:function(c){var f=c&&typeof c=="string"?new e.Color(c):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+c+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var f=0,l=0,u=0;u<c;u++)f+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var f=e.Object.prototype.getSvgStyles.call(this,c);return f+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var f=0,l=0,u=0,d={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[u]===`
`&&p>0?(l=0,u++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&p>0&&(l++,u++),d[p]={line:f,offset:l},u+=c.graphemeLines[p].length,l+=c.graphemeLines[p].length;return d},styleHas:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[f];l&&(f=l.line)}return s.Text.prototype.styleHas.call(this,c,f)},isEmptyStyles:function(c){if(!this.styles)return!0;var f=0,l=c+1,u,d,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,f=m.offset),g&&(l=g.line,p=l===c,u=g.offset),d=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in d)for(var _ in d[v])if(_>=f&&(!p||_<u))for(var b in d[v][_])return!1;return!0},_getStyleDeclaration:function(c,f){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,f=l.offset+f}return this.callSuper("_getStyleDeclaration",c,f)},_setStyleDeclaration:function(c,f,l){var u=this._styleMap[c];c=u.line,f=u.offset+f,this.styles[c][f]=l},_deleteStyleDeclaration:function(c,f){var l=this._styleMap[c];c=l.line,f=l.offset+f,delete this.styles[c][f]},_getLineStyle:function(c){var f=this._styleMap[c];return!!this.styles[f.line]},_setLineStyle:function(c){var f=this._styleMap[c];this.styles[f.line]={}},_wrapText:function(c,f){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,f));return this.isWrapping=!1,l},_measureWord:function(c,f,l){var u=0,d,p=!0;l=l||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],f,m+l,d,p);u+=v.kernedWidth,d=c[m]}return u},_wrapLine:function(c,f,l,M){var d=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(c):c.split(this._wordJoiners),_="",b=0,y=p?"":" ",C=0,w=0,T=0,O=!0,A=this._getWidthOfCharSpacing(),M=M||0;v.length===0&&v.push([]),l-=M;for(var Y=0;Y<v.length;Y++)_=p?v[Y]:s.util.string.graphemeSplit(v[Y]),C=this._measureWord(_,f,b),b+=_.length,d+=w+C-A,d>l&&!O?(m.push(g),g=[],d=C,O=!0):d+=A,!O&&!p&&g.push(y),g=g.concat(_),w=p?0:this._measureWord([y],f,b),b++,O=!1,C>T&&(T=C);return Y&&m.push(g),T+M>this.dynamicMinWidth&&(this.dynamicMinWidth=T-A+M),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var f=s.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(f.lines,this.width),u=new Array(l.length),d=0;d<l.length;d++)u[d]=l[d].join("");return f.lines=u,f.graphemeLines=l,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var f in this._styleMap)this._textLines[f]&&(c[this._styleMap[f].line]=1);for(var f in this.styles)c[f]||delete this.styles[f]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),s.Textbox.fromObject=function(c,f){var l=s.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return s.Object._fromObject("Textbox",u,f,"text")}}(t),function(){var a=e.controlsUtils,s=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,f=a.scalingEqually,l=a.scalingYOrSkewingX,u=a.scalingXOrSkewingY,d=a.scaleOrSkewActionName,p=e.Object.prototype.controls;if(p.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:u,getActionName:d}),p.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:l,getActionName:d}),p.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:f}),p.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:f}),p.mtr=new e.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(ft);const ss=[];function Is(t,e){return{subscribe:At(t,e).subscribe}}function At(t,e=ge){let n;const i=new Set;function r(a){if(Ve(t,a)&&(t=a,n)){const s=!ss.length;for(const c of i)c[1](),ss.push(c,t);if(s){for(let c=0;c<ss.length;c+=2)ss[c][0](ss[c+1]);ss.length=0}}}function o(a){r(a(t))}function h(a,s=ge){const c=[a,s];return i.add(c),i.size===1&&(n=e(r,o)||ge),a(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:h}}function L1(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Is(n,(h,a)=>{let s=!1;const c=[];let f=0,l=ge;const u=()=>{if(f)return;l();const p=e(i?c[0]:c,h,a);o?h(p):l=Wn(p)?p:ge},d=r.map((p,m)=>nh(p,g=>{c[m]=g,f&=~(1<<m),s&&u()},()=>{f|=1<<m}));return s=!0,u(),function(){We(d),l(),s=!1}})}let ll,cl,rr=At(null),N1=At({left:0,top:0});const Ld=10;let me,Gu,xy,No,jo,qu=!1,Or=null,ji=!1,oh=null;const j1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/><path d="M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',vs=["objType","successPosition","lockMovementX","lockMovementY","lockScalingX","lockScalingY","lockRotation","compositeId","imageIndex","printWidth","printHeight","extension","charSpacing","convert","thumbnail","uuid","localFamily","url","printIgnore","printIndex","targetFrame","vector","userEvent","evented","patternSourceCanvas","pattern","patternPadding","patternOffset","patternWidth"],B1=["print","guide","snapW","snapH","frame","guideText"];let Dy=At([]);function U1(t,e,n,i){Or=i,Gu=document.getElementById(t).parentElement,ll=e,cl=n,me=new ft.fabric.Canvas(t,{width:e,height:n,selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0,isDrawingMode:ji,preserveObjectStacking:!0}),ft.fabric.Object.prototype._renderControl=function(h,a,s,c,f){h.actionName==="rotate"?iC(a,c,f,j1):h.render(a,c,f)},ft.fabric.Object.prototype.cornerStyle="circle",ft.fabric.Object.prototype.cornerColor="#2EF2E8",ft.fabric.Object.prototype.borderColor="#0075ff",ft.fabric.Object.prototype.cornerStrokeColor="#0075ff";const r={mtr:!0,ml:!1,mr:!1,mb:!1,mt:!1,tl:!0,tr:!0,bl:!0,br:!0},o={mtr:!0,ml:!0,mr:!0,mb:!0,mt:!0,tl:!0,tr:!0,bl:!0,br:!0};ft.fabric.Image.prototype.setControlsVisibility(r),ft.fabric.Path.prototype.setControlsVisibility(r),ft.fabric.Text.prototype.setControlsVisibility(r),ft.fabric.Rect.prototype.setControlsVisibility(o),ft.fabric.Ellipse.prototype.setControlsVisibility(o),ft.fabric.Triangle.prototype.setControlsVisibility(o),ft.fabric.Object.prototype.cornerSize=20,ft.fabric.Object.prototype.transparentCorners=!1,me.on("object:modified",h=>{Al(),Or(me.toJSON(vs),_s()),h.target.type==="pen"||h.target.type}),me.on("object:added",()=>{Al(),qu||Or(me.toJSON(vs),_s())}),me.on("selection:created",h=>{rr.set(h.selected),Or(me.toJSON(vs),_s())}),me.on("selection:updated",async h=>{rr.set(null),await setTimeout(()=>{Or(me.toJSON(vs),_s())},0),rr.set(h.selected)}),me.on("selection:cleared",()=>{rr.set(null),Or(me.toJSON(vs),_s())}),me.on("mouse:down",h=>{ji&&rC(h.e.clientX,h.e.clientY),Nd()}),me.on("mouse:move",h=>{ji&&sC(h.e.clientX,h.e.clientY),Nd()}),me.on("mouse:up",()=>{ji&&oC()}),me.on("object:moving",function(h){const a=h.target,s=me.getZoom(),c=a.left,f=a.top;if(typeof No<"u"&&typeof jo<"u"){let l=a.left,u=a.top;Math.abs(c-No)<Ld/s&&(l=No),Math.abs(f-jo)<Ld/s&&(u=jo),a.set({left:l,top:u})}me.renderAll()}),me.on("after:render",hC),Ud(),window.addEventListener("resize",Ud,!1)}function Nd(){const t=me.getZoom(),e=me.getActiveObject();if(!e)return;const n=me.getElement().getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top,o=e.oCoords.mb;if(o){const h=(i+o.x)*t;N1.set({left:i+h,top:r})}else console.warn("Bottom-center controller not found")}function Al(){Dy.update(t=>me.getObjects().map((n,i)=>{const r=n;return r.id=`layer_${i}`,r}).filter(n=>!B1.includes(n.objType)))}function W1(t){t.forEach(e=>{const n=me.getObjects().find(i=>i.id===e.id);n&&n.bringToFront()}),Al(),me.renderAll()}function Y1(t){qu=!0,me.loadFromJSON(t,()=>{qu=!1,me.renderAll.bind(me),Or(me.toJSON(vs),_s())},(e,n)=>{const i={selectable:!1,evented:!1};n.objType==="snapW"&&(No=n.left,n.set(i),n.printIgnore=!0),n.objType==="snapH"&&(jo=n.top,n.set(i),n.printIgnore=!0),n.objType==="print"&&(ft.fabric.util.enlivenObjects([e],function(r){r[0].set({absolutePositioned:!0,stroke:"#FFFFFF",strokeWidth:0}),r[0].fill,xy=r[0]}),n.set(i)),n.objType,n.objType==="guide"&&n.set(i),n.objType==="pattern"&&changePattern(n),(n.objType==="clipart"||n.objType==="text"||n.objType==="shape"||n.objType==="draw"||n.objType==="upload")&&ah(n),me.discardActiveObject().renderAll()})}function jd(t,e={}){const{extension:n}=e.origin?e.origin:e.convert;if(n==="svg"){z1(t,e);return}ft.fabric.Image.fromURL(t,i=>{const r=me.getWidth(),o=me.getHeight(),h=me.getZoom(),a=i.width,s=i.height;let c=1;(a>r||s>o)&&(c=Math.min(r/a,o/s));const f={left:r/h/2,top:o/h/2,originX:"center",originY:"center",scaleX:c,scaleY:c,...e};i.set({...f}),ah(i),me.add(i),me.setActiveObject(i),me.renderAll()},{crossOrigin:"anonymous"})}function z1(t,e={}){ft.fabric.loadSVGFromURL(t,(n,i)=>{const r=ft.fabric.util.groupSVGElements(n,i),o=me.getWidth(),h=me.getHeight(),a=me.getZoom(),s=n.length>1?"colors":"color",c={left:o/a/2,top:h/a/2,originX:"center",originY:"center",colorType:s,vector:!0,...e};r.set({...c}),ah(r),me.add(r),me.setActiveObject(r),me.renderAll()})}function ah(t){t.clipPath=xy}function H1(t,e={}){const n=me.getWidth(),i=me.getHeight(),r=me.getZoom(),o=new ft.fabric.Text(t,{left:n/r/2,top:i/r/2,fontSize:50/r,originX:"center",originY:"center",strokeUniform:!0,centeredScaling:!0,perPixelTargetFind:!0,paintFirst:"stroke",...e});me.add(o),me.setActiveObject(o),me.renderAll()}function V1(t){me.setActiveObject(t),me.renderAll()}function X1(t){me.remove(t),Al(),me.renderAll()}function $1(){tC(["print","guide","snapH","snapW"]);const t=me.toDataURL({format:"png",quality:.6,multiplier:1});return nC(["print","guide","snapH","snapW"]),t}function G1(t){me.getActiveObject().rotate(t),me.renderAll()}function q1(t,e){t.set("text",e),me.renderAll()}function K1(t,e,n=""){t.set("fontFamily",e),t.set("localFamily",n),me.renderAll()}function J1(t,e){t.set("textAlign",e),me.renderAll()}function Z1(t,e){t.set("fontStyle",e),me.renderAll()}function Q1(t,e){const{underline:n,linethrough:i,overline:r}=e;n?t.set("underline",n):t.set("underline",!1),i?t.set("linethrough",i):t.set("linethrough",!1),r?t.set("overline",r):t.set("overline",!1),me.renderAll()}function eC(t,e){const{stroke:n,strokeWidth:i}=e;n?t.set("stroke",n):t.set("stroke",null),i?t.set("strokeWidth",i):t.set("strokeWidth",0),me.renderAll()}function Bd(){me.renderAll()}function tC(t){const e=me.getObjects();for(const n of e)t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:"transparent",oriStroke:n.stroke}),n.type==="image"&&n.set({opacity:0})):n.set({opacity:0}))}function nC(t){me.getObjects().forEach(n=>{t.includes(n.objType)&&(n.objType==="print"?(n.set({stroke:n.oriStroke}),n.type==="image"&&n.set({opacity:1})):n.set({opacity:1}))})}function Ud(){const t=Gu.clientWidth,e=Gu.clientHeight,n=t/e,i=ll/cl;let r;n>i?r=e/cl:r=t/ll,me.setZoom(r),me.setWidth(ll*r),me.setHeight(cl*r),me.renderAll()}function iC(t,e,n,i,r){const o=new ft.fabric.Svg(i,null,{strokeWidth:1,stroke:"rgba(0,0,0,0.5)",strokeUniform:!0,scaleX:.5,scaleY:.5});o.set({left:e,top:n}).setCoords(),o.render(t)}function rC(t,e){oh={type:"path",points:[[t,e]]},ji=!0}function sC(t,e){ji&&oh.points.push([t,e])}function oC(){ji=!1;const t=new ft.fabric.Path(oh);t.objType="drawing",me.add(t),me.isDrawingMode=ji,me.renderAll()}function aC(t){const e=me.getWidth(),n=me.getHeight(),i=e*.5,r=me.getZoom(),o=new ft.fabric.Rect({type:"rectangle",left:e/r/2,top:n/r/2,originX:"center",originY:"center",objType:"shape",width:i,height:i,fill:t});me.add(o),me.renderAll()}function lC(t){const e=me.getWidth(),n=me.getHeight(),i=me.getZoom(),r=e*.5,o=new ft.fabric.Ellipse({type:"ellipse",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",objType:"shape",rx:r/2,ry:r/2,fill:t});me.add(o),me.renderAll()}function cC(t){const e=me.getWidth(),n=me.getHeight(),i=me.getZoom(),r=e*.5,o=new ft.fabric.Triangle({type:"triangle",x:r/2,y:r/2,left:e/i/2,top:n/i/2,originX:"center",originY:"center",width:r,height:r,objType:"shape",fill:t});me.add(o),me.renderAll()}function uC(t){ji=t,me.isDrawingMode=t,me.renderAll()}function fC(){me.discardActiveObject(),me.renderAll(),rr.set(null)}function hC(){const t=me.getObjects().find(n=>n.objType==="snapW"),e=me.getObjects().find(n=>n.objType==="snapH");t&&(No=t.left),e&&(jo=e.top)}const _s=()=>{const e=me.getObjects().filter(r=>!r.printIgnore),n=new ft.fabric.Canvas(null,{width:me.width,height:me.height});e.forEach(r=>{n.add(ft.fabric.util.object.clone(r))});const i=n.toSVG();return n.dispose(),i};function lh(t){const e=t-1;return e*e*e+1}function mr(t){return--t*t*t*t*t+1}function Wd(t,{delay:e=0,duration:n=400,easing:i=th}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function wi(t,{delay:e=0,duration:n=400,easing:i=lh,x:r=0,y:o=0,opacity:h=0}={}){const a=getComputedStyle(t),s=+a.opacity,c=a.transform==="none"?"":a.transform,f=s*(1-h),[l,u]=Rd(r),[d,p]=Rd(o);return{delay:e,duration:n,easing:i,css:(m,g)=>`
			transform: ${c} translate(${(1-m)*l}${u}, ${(1-m)*d}${p});
			opacity: ${s-f*g}`}}function vr(t,{delay:e=0,duration:n=400,easing:i=lh,axis:r="y"}={}){const o=getComputedStyle(t),h=+o.opacity,a=r==="y"?"height":"width",s=parseFloat(o[a]),c=r==="y"?["top","bottom"]:["left","right"],f=c.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),l=parseFloat(o[`padding${f[0]}`]),u=parseFloat(o[`padding${f[1]}`]),d=parseFloat(o[`margin${f[0]}`]),p=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),g=parseFloat(o[`border${f[1]}Width`]);return{delay:e,duration:n,easing:i,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*h};${a}: ${v*s}px;padding-${c[0]}: ${v*l}px;padding-${c[1]}: ${v*u}px;margin-${c[0]}: ${v*d}px;margin-${c[1]}: ${v*p}px;border-${c[0]}-width: ${v*m}px;border-${c[1]}-width: ${v*g}px;`}}const Lr=At(!1),Nr=At(null),jr=At([]),Ay=At(null);function dC(t=1){var i,r;const e=di(jr).length,n=di(jr)[e-1];return di(Nr)||(i=n==null?void 0:n.callbacks)!=null&&i.onBeforeClose&&((r=n==null?void 0:n.callbacks)==null?void 0:r.onBeforeClose())===!1?!1:(di(Lr)&&e>0&&Nr.set(!0),Lr.set(!1),Ay.set("pop"),pC(t),!0)}function fn(){return dC(1)}function wo(t,e,n){di(Nr)||(Ay.set("push"),di(Lr)&&di(jr).length&&Nr.set(!0),Lr.set(!1),n!=null&&n.replace?jr.update(i=>[...i.slice(0,i.length-1),{component:t,props:e}]):jr.update(i=>[...i,{component:t,props:e}]))}function pC(t=1){jr.update(e=>e.slice(0,Math.max(0,e.length-t)))}function Yd(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}const gC=t=>({}),zd=t=>({}),mC=t=>({}),Hd=t=>({});function Vd(t){let e;const n=t[4].backdrop,i=ga(n,t,t[3],Hd);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&va(i,n,r,r[3],e?ma(n,r[3],o,mC):_a(r[3]),Hd)},i(r){e||(R(i,r),e=!0)},o(r){H(i,r),e=!1},d(r){i&&i.d(r)}}}function vC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[9].component;function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=vi(c,r[f]);return s!==void 0&&s&3&&(c=vi(c,Vr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Dl(a[9].props)]))),{props:c}}return o&&(e=un(o,h(t)),e.$on("introstart",t[7]),e.$on("outroend",t[8])),{c(){e&&de(e.$$.fragment),n=et()},m(a,s){e&&ue(e,a,s),j(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[9].component)){if(e){ke();const c=e;H(c.$$.fragment,1,0,()=>{fe(c,1)}),Oe()}o?(e=un(o,h(a,s)),e.$on("introstart",a[7]),e.$on("outroend",a[8]),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Vr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Dl(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&R(e.$$.fragment,a),i=!0)},o(a){e&&H(e.$$.fragment,a),i=!1},d(a){a&&N(n),e&&fe(e,a)}}}function _C(t){let e,n,i,r={ctx:t,current:null,token:null,hasCatch:!1,pending:wC,then:bC,catch:yC,value:12,blocks:[,,,]};return Vs(n=$d(t[9].component),r),{c(){e=et(),r.block.c()},m(o,h){j(o,e,h),r.block.m(o,r.anchor=h),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(o,h){t=o,r.ctx=t,h&1&&n!==(n=$d(t[9].component))&&Vs(n,r)||sh(r,t,h)},i(o){i||(R(r.block),i=!0)},o(o){for(let h=0;h<3;h+=1){const a=r.blocks[h];H(a)}i=!1},d(o){o&&N(e),r.block.d(o),r.token=null,r=null}}}function yC(t){return{c:ge,m:ge,p:ge,i:ge,o:ge,d:ge}}function bC(t){let e,n,i;const r=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var o=t[12];function h(a,s){let c={};for(let f=0;f<r.length;f+=1)c=vi(c,r[f]);return s!==void 0&&s&3&&(c=vi(c,Vr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Dl(a[9].props)]))),{props:c}}return o&&(e=un(o,h(t)),e.$on("introstart",t[5]),e.$on("outroend",t[6])),{c(){e&&de(e.$$.fragment),n=V()},m(a,s){e&&ue(e,a,s),j(a,n,s),i=!0},p(a,s){if(s&1&&o!==(o=a[12])){if(e){ke();const c=e;H(c.$$.fragment,1,0,()=>{fe(c,1)}),Oe()}o?(e=un(o,h(a,s)),e.$on("introstart",a[5]),e.$on("outroend",a[6]),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(o){const c=s&3?Vr(r,[{isOpen:a[11]===a[0].length-1&&!a[1]},s&1&&Dl(a[9].props)]):{};e.$set(c)}},i(a){i||(e&&R(e.$$.fragment,a),i=!0)},o(a){e&&H(e.$$.fragment,a),i=!1},d(a){a&&N(n),e&&fe(e,a)}}}function wC(t){let e,n;const i=t[4].loading,r=ga(i,t,t[3],zd);return{c(){r&&r.c(),e=V()},m(o,h){r&&r.m(o,h),j(o,e,h),n=!0},p(o,h){r&&r.p&&(!n||h&8)&&va(r,i,o,o[3],n?ma(i,o[3],h,gC):_a(o[3]),zd)},i(o){n||(R(r,o),n=!0)},o(o){H(r,o),n=!1},d(o){o&&N(e),r&&r.d(o)}}}function Xd(t,e){let n,i,r,o,h,a;const s=[_C,vC],c=[];function f(l,u){return u&1&&(i=null),i==null&&(i=!!TC(l[9].component)),i?0:1}return r=f(e,-1),o=c[r]=s[r](e),{key:t,first:null,c(){n=et(),o.c(),h=et(),this.first=n},m(l,u){j(l,n,u),c[r].m(l,u),j(l,h,u),a=!0},p(l,u){e=l;let d=r;r=f(e,u),r===d?c[r].p(e,u):(ke(),H(c[d],1,1,()=>{c[d]=null}),Oe(),o=c[r],o?o.p(e,u):(o=c[r]=s[r](e),o.c()),R(o,1),o.m(h.parentNode,h))},i(l){a||(R(o),a=!0)},o(l){H(o),a=!1},d(l){l&&(N(n),N(h)),c[r].d(l)}}}function CC(t){let e=[],n=new Map,i,r,o=Me(t[0]);const h=a=>a[11];for(let a=0;a<o.length;a+=1){let s=Yd(t,o,a),c=h(s);n.set(c,e[a]=Xd(c,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=et()},m(a,s){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,s);j(a,i,s),r=!0},p(a,s){s&15&&(o=Me(a[0]),ke(),e=Oy(e,s,h,1,a,o,n,i.parentNode,ky,Xd,i,Yd),Oe())},i(a){if(!r){for(let s=0;s<o.length;s+=1)R(e[s]);r=!0}},o(a){for(let s=0;s<e.length;s+=1)H(e[s]);r=!1},d(a){a&&N(i);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function SC(t){let e,n,i=t[0].length>0&&Vd(t);const r=t[4].default,o=ga(r,t,t[3],null),h=o||CC(t);return{c(){i&&i.c(),e=V(),h&&h.c()},m(a,s){i&&i.m(a,s),j(a,e,s),h&&h.m(a,s),n=!0},p(a,[s]){a[0].length>0?i?(i.p(a,s),s&1&&R(i,1)):(i=Vd(a),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe()),o?o.p&&(!n||s&8)&&va(o,r,a,a[3],n?ma(r,a[3],s,null):_a(a[3]),null):h&&h.p&&(!n||s&15)&&h.p(a,n?s:-1)},i(a){n||(R(i),R(h,a),n=!0)},o(a){H(i),H(h,a),n=!1},d(a){a&&N(e),i&&i.d(a),h&&h.d(a)}}}function TC(t){return typeof t.prototype>"u"}async function $d(t){return t().then(e=>e.default)}function kC(t,e,n){let i,r,o;je(t,jr,u=>n(0,i=u)),je(t,Nr,u=>n(1,r=u)),je(t,Lr,u=>n(2,o=u));let{$$slots:h={},$$scope:a}=e;const s=()=>{ye(Lr,o=!0,o)},c=()=>{ye(Nr,r=!1,r)},f=()=>{ye(Lr,o=!0,o)},l=()=>{ye(Nr,r=!1,r)};return t.$$set=u=>{"$$scope"in u&&n(3,a=u.$$scope)},[i,r,o,a,h,s,c,f,l]}class OC extends qe{constructor(e){super(),Ge(this,e,kC,SC,Ve,{})}}var EC=Error,xC=EvalError,DC=RangeError,AC=ReferenceError,Py=SyntaxError,ba=TypeError,PC=URIError,MC=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[n]=r;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,n);if(h.value!==r||h.enumerable!==!0)return!1}return!0},Gd=typeof Symbol<"u"&&Symbol,IC=MC,RC=function(){return typeof Gd!="function"||typeof Symbol!="function"||typeof Gd("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:IC()},$c={__proto__:null,foo:{}},FC=Object,LC=function(){return{__proto__:$c}.foo===$c.foo&&!($c instanceof FC)},NC="Function.prototype.bind called on incompatible ",jC=Object.prototype.toString,BC=Math.max,UC="[object Function]",qd=function(e,n){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var o=0;o<n.length;o+=1)i[o+e.length]=n[o];return i},WC=function(e,n){for(var i=[],r=n||0,o=0;r<e.length;r+=1,o+=1)i[o]=e[r];return i},YC=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},zC=function(e){var n=this;if(typeof n!="function"||jC.apply(n)!==UC)throw new TypeError(NC+n);for(var i=WC(arguments,1),r,o=function(){if(this instanceof r){var f=n.apply(this,qd(i,arguments));return Object(f)===f?f:this}return n.apply(e,qd(i,arguments))},h=BC(0,n.length-i.length),a=[],s=0;s<h;s++)a[s]="$"+s;if(r=Function("binder","return function ("+YC(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var c=function(){};c.prototype=n.prototype,r.prototype=new c,c.prototype=null}return r},HC=zC,ch=Function.prototype.bind||HC,VC=Function.prototype.call,XC=Object.prototype.hasOwnProperty,$C=ch,GC=$C.call(VC,XC),Je,qC=EC,KC=xC,JC=DC,ZC=AC,Xs=Py,Rs=ba,QC=PC,My=Function,Gc=function(t){try{return My('"use strict"; return ('+t+").constructor;")()}catch{}},Br=Object.getOwnPropertyDescriptor;if(Br)try{Br({},"")}catch{Br=null}var qc=function(){throw new Rs},eS=Br?function(){try{return arguments.callee,qc}catch{try{return Br(arguments,"callee").get}catch{return qc}}}():qc,os=RC(),tS=LC(),qt=Object.getPrototypeOf||(tS?function(t){return t.__proto__}:null),ys={},nS=typeof Uint8Array>"u"||!qt?Je:qt(Uint8Array),Ur={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Je:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Je:ArrayBuffer,"%ArrayIteratorPrototype%":os&&qt?qt([][Symbol.iterator]()):Je,"%AsyncFromSyncIteratorPrototype%":Je,"%AsyncFunction%":ys,"%AsyncGenerator%":ys,"%AsyncGeneratorFunction%":ys,"%AsyncIteratorPrototype%":ys,"%Atomics%":typeof Atomics>"u"?Je:Atomics,"%BigInt%":typeof BigInt>"u"?Je:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Je:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Je:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Je:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":qC,"%eval%":eval,"%EvalError%":KC,"%Float32Array%":typeof Float32Array>"u"?Je:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Je:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Je:FinalizationRegistry,"%Function%":My,"%GeneratorFunction%":ys,"%Int8Array%":typeof Int8Array>"u"?Je:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Je:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Je:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":os&&qt?qt(qt([][Symbol.iterator]())):Je,"%JSON%":typeof JSON=="object"?JSON:Je,"%Map%":typeof Map>"u"?Je:Map,"%MapIteratorPrototype%":typeof Map>"u"||!os||!qt?Je:qt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Je:Promise,"%Proxy%":typeof Proxy>"u"?Je:Proxy,"%RangeError%":JC,"%ReferenceError%":ZC,"%Reflect%":typeof Reflect>"u"?Je:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Je:Set,"%SetIteratorPrototype%":typeof Set>"u"||!os||!qt?Je:qt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Je:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":os&&qt?qt(""[Symbol.iterator]()):Je,"%Symbol%":os?Symbol:Je,"%SyntaxError%":Xs,"%ThrowTypeError%":eS,"%TypedArray%":nS,"%TypeError%":Rs,"%Uint8Array%":typeof Uint8Array>"u"?Je:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Je:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Je:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Je:Uint32Array,"%URIError%":QC,"%WeakMap%":typeof WeakMap>"u"?Je:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Je:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Je:WeakSet};if(qt)try{null.error}catch(t){var iS=qt(qt(t));Ur["%Error.prototype%"]=iS}var rS=function t(e){var n;if(e==="%AsyncFunction%")n=Gc("async function () {}");else if(e==="%GeneratorFunction%")n=Gc("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Gc("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&qt&&(n=qt(r.prototype))}return Ur[e]=n,n},Kd={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},wa=ch,Pl=GC,sS=wa.call(Function.call,Array.prototype.concat),oS=wa.call(Function.apply,Array.prototype.splice),Jd=wa.call(Function.call,String.prototype.replace),Ml=wa.call(Function.call,String.prototype.slice),aS=wa.call(Function.call,RegExp.prototype.exec),lS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cS=/\\(\\)?/g,uS=function(e){var n=Ml(e,0,1),i=Ml(e,-1);if(n==="%"&&i!=="%")throw new Xs("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Xs("invalid intrinsic syntax, expected opening `%`");var r=[];return Jd(e,lS,function(o,h,a,s){r[r.length]=a?Jd(s,cS,"$1"):h||o}),r},fS=function(e,n){var i=e,r;if(Pl(Kd,i)&&(r=Kd[i],i="%"+r[0]+"%"),Pl(Ur,i)){var o=Ur[i];if(o===ys&&(o=rS(i)),typeof o>"u"&&!n)throw new Rs("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new Xs("intrinsic "+e+" does not exist!")},ao=function(e,n){if(typeof e!="string"||e.length===0)throw new Rs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Rs('"allowMissing" argument must be a boolean');if(aS(/^%?[^%]*%?$/,e)===null)throw new Xs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=uS(e),r=i.length>0?i[0]:"",o=fS("%"+r+"%",n),h=o.name,a=o.value,s=!1,c=o.alias;c&&(r=c[0],oS(i,sS([0,1],c)));for(var f=1,l=!0;f<i.length;f+=1){var u=i[f],d=Ml(u,0,1),p=Ml(u,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Xs("property names with quotes must have matching quotes");if((u==="constructor"||!l)&&(s=!0),r+="."+u,h="%"+r+"%",Pl(Ur,h))a=Ur[h];else if(a!=null){if(!(u in a)){if(!n)throw new Rs("base intrinsic for "+e+" exists, but the property is not available.");return}if(Br&&f+1>=i.length){var m=Br(a,u);l=!!m,l&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[u]}else l=Pl(a,u),a=a[u];l&&!s&&(Ur[h]=a)}}return a},Iy={exports:{}},Kc,Zd;function uh(){if(Zd)return Kc;Zd=1;var t=ao,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Kc=e,Kc}var hS=ao,ul=hS("%Object.getOwnPropertyDescriptor%",!0);if(ul)try{ul([],"length")}catch{ul=null}var Ry=ul,Qd=uh(),dS=Py,as=ba,ep=Ry,pS=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new as("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new as("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new as("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new as("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new as("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new as("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!ep&&ep(e,n);if(Qd)Qd(e,n,{configurable:h===null&&s?s.configurable:!h,enumerable:r===null&&s?s.enumerable:!r,value:i,writable:o===null&&s?s.writable:!o});else if(a||!r&&!o&&!h)e[n]=i;else throw new dS("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ku=uh(),Fy=function(){return!!Ku};Fy.hasArrayLengthDefineBug=function(){if(!Ku)return null;try{return Ku([],"length",{value:1}).length!==1}catch{return!0}};var gS=Fy,mS=ao,tp=pS,vS=gS(),np=Ry,ip=ba,_S=mS("%Math.floor%"),yS=function(e,n){if(typeof e!="function")throw new ip("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||_S(n)!==n)throw new ip("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,o=!0;if("length"in e&&np){var h=np(e,"length");h&&!h.configurable&&(r=!1),h&&!h.writable&&(o=!1)}return(r||o||!i)&&(vS?tp(e,"length",n,!0,!0):tp(e,"length",n)),e};(function(t){var e=ch,n=ao,i=yS,r=ba,o=n("%Function.prototype.apply%"),h=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(h,o),s=uh(),c=n("%Math.max%");t.exports=function(u){if(typeof u!="function")throw new r("a function is required");var d=a(e,h,arguments);return i(d,1+c(0,u.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(Iy);var bS=Iy.exports,Ly=ao,Ny=bS,wS=Ny(Ly("String.prototype.indexOf")),CS=function(e,n){var i=Ly(e,!!n);return typeof i=="function"&&wS(e,".prototype.")>-1?Ny(i):i},fh=typeof Map=="function"&&Map.prototype,Jc=Object.getOwnPropertyDescriptor&&fh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Il=fh&&Jc&&typeof Jc.get=="function"?Jc.get:null,rp=fh&&Map.prototype.forEach,hh=typeof Set=="function"&&Set.prototype,Zc=Object.getOwnPropertyDescriptor&&hh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Rl=hh&&Zc&&typeof Zc.get=="function"?Zc.get:null,sp=hh&&Set.prototype.forEach,SS=typeof WeakMap=="function"&&WeakMap.prototype,Bo=SS?WeakMap.prototype.has:null,TS=typeof WeakSet=="function"&&WeakSet.prototype,Uo=TS?WeakSet.prototype.has:null,kS=typeof WeakRef=="function"&&WeakRef.prototype,op=kS?WeakRef.prototype.deref:null,OS=Boolean.prototype.valueOf,ES=Object.prototype.toString,xS=Function.prototype.toString,DS=String.prototype.match,dh=String.prototype.slice,sr=String.prototype.replace,AS=String.prototype.toUpperCase,ap=String.prototype.toLowerCase,jy=RegExp.prototype.test,lp=Array.prototype.concat,ci=Array.prototype.join,PS=Array.prototype.slice,cp=Math.floor,Ju=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Qc=Object.getOwnPropertySymbols,Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,$s=typeof Symbol=="function"&&typeof Symbol.iterator=="object",hn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===$s||!0)?Symbol.toStringTag:null,By=Object.prototype.propertyIsEnumerable,up=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function fp(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||jy.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-cp(-t):cp(t);if(i!==t){var r=String(i),o=dh.call(e,r.length+1);return sr.call(r,n,"$&_")+"."+sr.call(sr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return sr.call(e,n,"$&_")}var Qu=Fr,hp=Qu.custom,dp=Wy(hp)?hp:null,MS=function t(e,n,i,r){var o=n||{};if(Qi(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Qi(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var h=Qi(o,"customInspect")?o.customInspect:!0;if(typeof h!="boolean"&&h!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Qi(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Qi(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return zy(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return a?fp(e,s):s}if(typeof e=="bigint"){var c=String(e)+"n";return a?fp(e,c):c}var f=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return ef(e)?"[Array]":"[Object]";var l=KS(o,i);if(typeof r>"u")r=[];else if(Yy(r,e)>=0)return"[Circular]";function u(K,q,B){if(q&&(r=PS.call(r),r.push(q)),B){var W={depth:o.depth};return Qi(o,"quoteStyle")&&(W.quoteStyle=o.quoteStyle),t(K,W,i+1,r)}return t(K,o,i+1,r)}if(typeof e=="function"&&!pp(e)){var d=WS(e),p=Na(e,u);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+ci.call(p,", ")+" }":"")}if(Wy(e)){var m=$s?sr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Zu.call(e);return typeof e=="object"&&!$s?Co(m):m}if($S(e)){for(var g="<"+ap.call(String(e.nodeName)),v=e.attributes||[],_=0;_<v.length;_++)g+=" "+v[_].name+"="+Uy(IS(v[_].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+ap.call(String(e.nodeName))+">",g}if(ef(e)){if(e.length===0)return"[]";var b=Na(e,u);return l&&!qS(b)?"["+tf(b,l)+"]":"[ "+ci.call(b,", ")+" ]"}if(FS(e)){var y=Na(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!By.call(e,"cause")?"{ ["+String(e)+"] "+ci.call(lp.call("[cause]: "+u(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ci.call(y,", ")+" }"}if(typeof e=="object"&&h){if(dp&&typeof e[dp]=="function"&&Qu)return Qu(e,{depth:f-i});if(h!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(YS(e)){var C=[];return rp&&rp.call(e,function(K,q){C.push(u(q,e,!0)+" => "+u(K,e))}),gp("Map",Il.call(e),C,l)}if(VS(e)){var w=[];return sp&&sp.call(e,function(K){w.push(u(K,e))}),gp("Set",Rl.call(e),w,l)}if(zS(e))return eu("WeakMap");if(XS(e))return eu("WeakSet");if(HS(e))return eu("WeakRef");if(NS(e))return Co(u(Number(e)));if(BS(e))return Co(u(Ju.call(e)));if(jS(e))return Co(OS.call(e));if(LS(e))return Co(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Le)return"{ [object globalThis] }";if(!RS(e)&&!pp(e)){var T=Na(e,u),O=up?up(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",M=!O&&hn&&Object(e)===e&&hn in e?dh.call(yr(e),8,-1):A?"Object":"",Y=O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",U=Y+(M||A?"["+ci.call(lp.call([],M||[],A||[]),": ")+"] ":"");return T.length===0?U+"{}":l?U+"{"+tf(T,l)+"}":U+"{ "+ci.call(T,", ")+" }"}return String(e)};function Uy(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function IS(t){return sr.call(String(t),/"/g,"&quot;")}function ef(t){return yr(t)==="[object Array]"&&(!hn||!(typeof t=="object"&&hn in t))}function RS(t){return yr(t)==="[object Date]"&&(!hn||!(typeof t=="object"&&hn in t))}function pp(t){return yr(t)==="[object RegExp]"&&(!hn||!(typeof t=="object"&&hn in t))}function FS(t){return yr(t)==="[object Error]"&&(!hn||!(typeof t=="object"&&hn in t))}function LS(t){return yr(t)==="[object String]"&&(!hn||!(typeof t=="object"&&hn in t))}function NS(t){return yr(t)==="[object Number]"&&(!hn||!(typeof t=="object"&&hn in t))}function jS(t){return yr(t)==="[object Boolean]"&&(!hn||!(typeof t=="object"&&hn in t))}function Wy(t){if($s)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Zu)return!1;try{return Zu.call(t),!0}catch{}return!1}function BS(t){if(!t||typeof t!="object"||!Ju)return!1;try{return Ju.call(t),!0}catch{}return!1}var US=Object.prototype.hasOwnProperty||function(t){return t in this};function Qi(t,e){return US.call(t,e)}function yr(t){return ES.call(t)}function WS(t){if(t.name)return t.name;var e=DS.call(xS.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Yy(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function YS(t){if(!Il||!t||typeof t!="object")return!1;try{Il.call(t);try{Rl.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function zS(t){if(!Bo||!t||typeof t!="object")return!1;try{Bo.call(t,Bo);try{Uo.call(t,Uo)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function HS(t){if(!op||!t||typeof t!="object")return!1;try{return op.call(t),!0}catch{}return!1}function VS(t){if(!Rl||!t||typeof t!="object")return!1;try{Rl.call(t);try{Il.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function XS(t){if(!Uo||!t||typeof t!="object")return!1;try{Uo.call(t,Uo);try{Bo.call(t,Bo)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function $S(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function zy(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return zy(dh.call(t,0,e.maxStringLength),e)+i}var r=sr.call(sr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,GS);return Uy(r,"single",e)}function GS(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+AS.call(e.toString(16))}function Co(t){return"Object("+t+")"}function eu(t){return t+" { ? }"}function gp(t,e,n,i){var r=i?tf(n,i):ci.call(n,", ");return t+" ("+e+") {"+r+"}"}function qS(t){for(var e=0;e<t.length;e++)if(Yy(t[e],`
`)>=0)return!1;return!0}function KS(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=ci.call(Array(t.indent+1)," ");else return null;return{base:n,prev:ci.call(Array(e+1),n)}}function tf(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+ci.call(t,","+n)+`
`+e.prev}function Na(t,e){var n=ef(t),i=[];if(n){i.length=t.length;for(var r=0;r<t.length;r++)i[r]=Qi(t,r)?e(t[r],t):""}var o=typeof Qc=="function"?Qc(t):[],h;if($s){h={};for(var a=0;a<o.length;a++)h["$"+o[a]]=o[a]}for(var s in t)Qi(t,s)&&(n&&String(Number(s))===s&&s<t.length||$s&&h["$"+s]instanceof Symbol||(jy.call(/[^\w$]/,s)?i.push(e(s,t)+": "+e(t[s],t)):i.push(s+": "+e(t[s],t))));if(typeof Qc=="function")for(var c=0;c<o.length;c++)By.call(t,o[c])&&i.push("["+e(o[c])+"]: "+e(t[o[c]],t));return i}var Hy=ao,lo=CS,JS=MS,ZS=ba,ja=Hy("%WeakMap%",!0),Ba=Hy("%Map%",!0),QS=lo("WeakMap.prototype.get",!0),eT=lo("WeakMap.prototype.set",!0),tT=lo("WeakMap.prototype.has",!0),nT=lo("Map.prototype.get",!0),iT=lo("Map.prototype.set",!0),rT=lo("Map.prototype.has",!0),ph=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},sT=function(t,e){var n=ph(t,e);return n&&n.value},oT=function(t,e,n){var i=ph(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},aT=function(t,e){return!!ph(t,e)},lT=function(){var e,n,i,r={assert:function(o){if(!r.has(o))throw new ZS("Side channel does not contain "+JS(o))},get:function(o){if(ja&&o&&(typeof o=="object"||typeof o=="function")){if(e)return QS(e,o)}else if(Ba){if(n)return nT(n,o)}else if(i)return sT(i,o)},has:function(o){if(ja&&o&&(typeof o=="object"||typeof o=="function")){if(e)return tT(e,o)}else if(Ba){if(n)return rT(n,o)}else if(i)return aT(i,o);return!1},set:function(o,h){ja&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new ja),eT(e,o,h)):Ba?(n||(n=new Ba),iT(n,o,h)):(i||(i={key:{},next:null}),oT(i,o,h))}};return r},cT=String.prototype.replace,uT=/%20/g,tu={RFC1738:"RFC1738",RFC3986:"RFC3986"},gh={default:tu.RFC3986,formatters:{RFC1738:function(t){return cT.call(t,uT,"+")},RFC3986:function(t){return String(t)}},RFC1738:tu.RFC1738,RFC3986:tu.RFC3986},fT=gh,nu=Object.prototype.hasOwnProperty,Ar=Array.isArray,oi=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),hT=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Ar(i)){for(var r=[],o=0;o<i.length;++o)typeof i[o]<"u"&&r.push(i[o]);n.obj[n.prop]=r}}},Vy=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},dT=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Ar(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!nu.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var r=e;return Ar(e)&&!Ar(n)&&(r=Vy(e,i)),Ar(e)&&Ar(n)?(n.forEach(function(o,h){if(nu.call(e,h)){var a=e[h];a&&typeof a=="object"&&o&&typeof o=="object"?e[h]=t(a,o,i):e.push(o)}else e[h]=o}),e):Object.keys(n).reduce(function(o,h){var a=n[h];return nu.call(o,h)?o[h]=t(o[h],a,i):o[h]=a,o},r)},pT=function(e,n){return Object.keys(n).reduce(function(i,r){return i[r]=n[r],i},e)},gT=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},mT=function(e,n,i,r,o){if(e.length===0)return e;var h=e;if(typeof e=="symbol"?h=Symbol.prototype.toString.call(e):typeof e!="string"&&(h=String(e)),i==="iso-8859-1")return escape(h).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",s=0;s<h.length;++s){var c=h.charCodeAt(s);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===fT.RFC1738&&(c===40||c===41)){a+=h.charAt(s);continue}if(c<128){a=a+oi[c];continue}if(c<2048){a=a+(oi[192|c>>6]+oi[128|c&63]);continue}if(c<55296||c>=57344){a=a+(oi[224|c>>12]+oi[128|c>>6&63]+oi[128|c&63]);continue}s+=1,c=65536+((c&1023)<<10|h.charCodeAt(s)&1023),a+=oi[240|c>>18]+oi[128|c>>12&63]+oi[128|c>>6&63]+oi[128|c&63]}return a},vT=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],r=0;r<n.length;++r)for(var o=n[r],h=o.obj[o.prop],a=Object.keys(h),s=0;s<a.length;++s){var c=a[s],f=h[c];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(n.push({obj:h,prop:c}),i.push(f))}return hT(n),e},_T=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},yT=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},bT=function(e,n){return[].concat(e,n)},wT=function(e,n){if(Ar(e)){for(var i=[],r=0;r<e.length;r+=1)i.push(n(e[r]));return i}return n(e)},Xy={arrayToObject:Vy,assign:pT,combine:bT,compact:vT,decode:gT,encode:mT,isBuffer:yT,isRegExp:_T,maybeMap:wT,merge:dT},$y=lT,fl=Xy,Wo=gh,CT=Object.prototype.hasOwnProperty,Gy={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},li=Array.isArray,ST=Array.prototype.push,qy=function(t,e){ST.apply(t,li(e)?e:[e])},TT=Date.prototype.toISOString,mp=Wo.default,Vt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:fl.encode,encodeValuesOnly:!1,format:mp,formatter:Wo.formatters[mp],indices:!1,serializeDate:function(e){return TT.call(e)},skipNulls:!1,strictNullHandling:!1},kT=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},iu={},OT=function t(e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_){for(var b=e,y=_,C=0,w=!1;(y=y.get(iu))!==void 0&&!w;){var T=y.get(e);if(C+=1,typeof T<"u"){if(T===C)throw new RangeError("Cyclic object value");w=!0}typeof y.get(iu)>"u"&&(C=0)}if(typeof f=="function"?b=f(n,b):b instanceof Date?b=d(b):i==="comma"&&li(b)&&(b=fl.maybeMap(b,function(P){return P instanceof Date?d(P):P})),b===null){if(h)return c&&!g?c(n,Vt.encoder,v,"key",p):n;b=""}if(kT(b)||fl.isBuffer(b)){if(c){var O=g?n:c(n,Vt.encoder,v,"key",p);return[m(O)+"="+m(c(b,Vt.encoder,v,"value",p))]}return[m(n)+"="+m(String(b))]}var A=[];if(typeof b>"u")return A;var M;if(i==="comma"&&li(b))g&&c&&(b=fl.maybeMap(b,c)),M=[{value:b.length>0?b.join(",")||null:void 0}];else if(li(f))M=f;else{var Y=Object.keys(b);M=l?Y.sort(l):Y}var U=s?n.replace(/\./g,"%2E"):n,K=r&&li(b)&&b.length===1?U+"[]":U;if(o&&li(b)&&b.length===0)return K+"[]";for(var q=0;q<M.length;++q){var B=M[q],W=typeof B=="object"&&typeof B.value<"u"?B.value:b[B];if(!(a&&W===null)){var ee=u&&s?B.replace(/\./g,"%2E"):B,ne=li(b)?typeof i=="function"?i(K,ee):K:K+(u?"."+ee:"["+ee+"]");_.set(e,C);var x=$y();x.set(iu,_),qy(A,t(W,ne,i,r,o,h,a,s,i==="comma"&&g&&li(b)?null:c,f,l,u,d,p,m,g,v,x))}}return A},ET=function(e){if(!e)return Vt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Vt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Wo.default;if(typeof e.format<"u"){if(!CT.call(Wo.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Wo.formatters[i],o=Vt.filter;(typeof e.filter=="function"||li(e.filter))&&(o=e.filter);var h;if(e.arrayFormat in Gy?h=e.arrayFormat:"indices"in e?h=e.indices?"indices":"repeat":h=Vt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Vt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Vt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Vt.allowEmptyArrays,arrayFormat:h,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Vt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Vt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Vt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Vt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Vt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Vt.encodeValuesOnly,filter:o,format:i,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Vt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Vt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Vt.strictNullHandling}},xT=function(t,e){var n=t,i=ET(e),r,o;typeof i.filter=="function"?(o=i.filter,n=o("",n)):li(i.filter)&&(o=i.filter,r=o);var h=[];if(typeof n!="object"||n===null)return"";var a=Gy[i.arrayFormat],s=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var c=$y(),f=0;f<r.length;++f){var l=r[f];i.skipNulls&&n[l]===null||qy(h,OT(n[l],l,a,s,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var u=h.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""},Gs=Xy,nf=Object.prototype.hasOwnProperty,DT=Array.isArray,Rt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Gs.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},AT=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Ky=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},PT="utf8=%26%2310003%3B",MT="utf8=%E2%9C%93",IT=function(e,n){var i={__proto__:null},r=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=n.parameterLimit===1/0?void 0:n.parameterLimit,h=r.split(n.delimiter,o),a=-1,s,c=n.charset;if(n.charsetSentinel)for(s=0;s<h.length;++s)h[s].indexOf("utf8=")===0&&(h[s]===MT?c="utf-8":h[s]===PT&&(c="iso-8859-1"),a=s,s=h.length);for(s=0;s<h.length;++s)if(s!==a){var f=h[s],l=f.indexOf("]="),u=l===-1?f.indexOf("="):l+1,d,p;u===-1?(d=n.decoder(f,Rt.decoder,c,"key"),p=n.strictNullHandling?null:""):(d=n.decoder(f.slice(0,u),Rt.decoder,c,"key"),p=Gs.maybeMap(Ky(f.slice(u+1),n),function(g){return n.decoder(g,Rt.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=AT(p)),f.indexOf("[]=")>-1&&(p=DT(p)?[p]:p);var m=nf.call(i,d);m&&n.duplicates==="combine"?i[d]=Gs.combine(i[d],p):(!m||n.duplicates==="last")&&(i[d]=p)}return i},RT=function(t,e,n,i){for(var r=i?e:Ky(e,n),o=t.length-1;o>=0;--o){var h,a=t[o];if(a==="[]"&&n.parseArrays)h=n.allowEmptyArrays&&r===""?[]:[].concat(r);else{h=n.plainObjects?Object.create(null):{};var s=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=n.decodeDotInKeys?s.replace(/%2E/g,"."):s,f=parseInt(c,10);!n.parseArrays&&c===""?h={0:r}:!isNaN(f)&&a!==c&&String(f)===c&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(h=[],h[f]=r):c!=="__proto__"&&(h[c]=r)}r=h}return r},FT=function(e,n,i,r){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,h=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,s=i.depth>0&&h.exec(o),c=s?o.slice(0,s.index):o,f=[];if(c){if(!i.plainObjects&&nf.call(Object.prototype,c)&&!i.allowPrototypes)return;f.push(c)}for(var l=0;i.depth>0&&(s=a.exec(o))!==null&&l<i.depth;){if(l+=1,!i.plainObjects&&nf.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+o.slice(s.index)+"]"),RT(f,n,i,r)}},LT=function(e){if(!e)return Rt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Rt.charset:e.charset,i=typeof e.duplicates>"u"?Rt.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Rt.allowDots:!!e.allowDots;return{allowDots:r,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Rt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Rt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Rt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Rt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Rt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Rt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Rt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Rt.decoder,delimiter:typeof e.delimiter=="string"||Gs.isRegExp(e.delimiter)?e.delimiter:Rt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Rt.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Rt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Rt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Rt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Rt.strictNullHandling}},NT=function(t,e){var n=LT(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?IT(t,n):t,r=n.plainObjects?Object.create(null):{},o=Object.keys(i),h=0;h<o.length;++h){var a=o[h],s=FT(a,i[a],n,typeof t=="string");r=Gs.merge(r,s,n)}return n.allowSparse===!0?r:Gs.compact(r)},jT=xT,BT=NT,UT=gh,WT={formats:UT,parse:BT,stringify:jT};const mh=I1(WT);let mn="https://podiz-strapi-uieqvbv3ya-du.a.run.app";async function YT(t){try{return{data:await(await fetch(`${mn}/publishes/${t}`)).json()}}catch(e){return{error:e}}}async function zT(t){try{return{data:await(await fetch(`${mn}/shops/${t}`)).json()}}catch(e){return{error:e}}}async function HT(t,e={perPage:24,current:0,keyword:"",categories:[]}){try{const n=[];if(e.keyword&&n.push({_or:[{name_contains:e.keyword},{tag_contains:e.keyword}]}),n.push({shop:t}),e.categories.length){const s=[];e.categories.forEach(c=>{s.push({categories_contains:c})}),n.push({_or:{...s}})}const i=mh.stringify({_where:{...n},_start:e.perPage*e.current,_sort:"created_at:DESC",_limit:e.perPage}),r=await fetch(`${mn}/cliparts?${i}`),o=await fetch(`${mn}/cliparts/count?${i}`),h=await r.json(),a=await o.json();return{data:h,count:a}}catch(n){return{error:n}}}const VT=async t=>{try{return{data:await(await fetch(`${mn}/fonts?shop=${t}`)).json()}}catch(e){return{error:e}}},XT=async t=>{try{const n=await(await fetch(`${mn}/shop-default-fonts?shop=${t}`)).json();return n.length||n.push({shop:t,defaultFonts:[]}),{data:n[0]}}catch(e){return{error:`기본폰트 조회가 실패하였습니다. ${e}`}}},Jy=async t=>{try{return{data:await(await fetch(`${mn}/editor-data/${t}`)).json()}}catch(e){return{error:e}}},$T=async t=>{try{const e=t.id?"PUT":"POST",n=t.id?`/${t.id}`:"";return{data:await(await fetch(`${mn}/editor-data${n}`,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}}catch{return{error:"데이터 입력 실패."}}},GT=async(t,e=null)=>{try{return{data:await(e?await fetch(`${mn}/colors?shop=${t}&colorGroup=${e}`):await fetch(`${mn}/colors?shop=${t}`)).json()}}catch(n){return{error:n}}},qT=async t=>{try{return{data:await(await fetch(`${mn}/composites?print=${t}`)).json(),error:null}}catch(e){return{error:e}}},KT=async({provider:t,productno:e,shopid:n})=>{try{const i=[];t?i.push({selectApi:t}):i.push({selectApi_null:!0}),e?i.push({productNo:e}):i.push({productNo_null:!0}),n&&i.push({shop:n});const r=mh.stringify({_where:{...i},_sort:"created_at:DESC"});return{data:await(await fetch(`${mn}/editor-product-links?${r}`)).json(),error:null}}catch(i){return{error:i}}};async function JT(t,e,n=null,i={perPage:24,current:0,keyword:""}){try{let r=[{cafe24MallId:t},{cafe24MemberId:e}];if(console.log({selectedPeriod:n}),n){const f=new Date,l=24*60*60*1e3,u=new Date(f.getTime()-n*30*l);r.push({created_at_gte:u.toISOString()})}console.log({where:r});const o=mh.stringify({_where:r,_start:i.perPage*i.current,_sort:"created_at:DESC",_limit:i.perPage}),h=await fetch(`${mn}/editor-data?${o}`),a=await fetch(`${mn}/editor-data/count?${o}`),s=await h.json(),c=await a.json();return{data:s,count:c}}catch(r){return console.log({error:r}),{error:r}}}async function ZT(t){try{return{data:await(await fetch(`${mn}/editor-product-links/templates/${t}`)).json(),error:null}}catch(e){return{error:e}}}const co=At(null),Yo=At([]),ru=At([]),Re=At({}),zo=At([]),ui=At([]),Io=At(0),Zo=At(0),Pi=At({options:null,product:null}),Qt=At(null),Fl=At(null),vp=At(null);async function QT(t){const{data:e,error:n}=await zT(t);if(n){console.error(n);return}co.set(e)}const Ho=/^[a-z0-9]+(-[a-z0-9]+)*$/,sc=(t,e,n,i="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),s=r.pop(),c={provider:r.length>0?r[0]:i,prefix:s,name:a};return e&&!hl(c)?null:c}const o=r[0],h=o.split("-");if(h.length>1){const a={provider:i,prefix:h.shift(),name:h.join("-")};return e&&!hl(a)?null:a}if(n&&i===""){const a={provider:i,prefix:"",name:o};return e&&!hl(a,n)?null:a}return null},hl=(t,e)=>t?!!((t.provider===""||t.provider.match(Ho))&&(e&&t.prefix===""||t.prefix.match(Ho))&&t.name.match(Ho)):!1,Zy=Object.freeze({left:0,top:0,width:16,height:16}),Ll=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),oc=Object.freeze({...Zy,...Ll}),rf=Object.freeze({...oc,body:"",hidden:!1});function ek(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(n.rotate=i),n}function _p(t,e){const n=ek(t,e);for(const i in rf)i in Ll?i in t&&!(i in n)&&(n[i]=Ll[i]):i in e?n[i]=e[i]:i in t&&(n[i]=t[i]);return n}function tk(t,e){const n=t.icons,i=t.aliases||Object.create(null),r=Object.create(null);function o(h){if(n[h])return r[h]=[];if(!(h in r)){r[h]=null;const a=i[h]&&i[h].parent,s=a&&o(a);s&&(r[h]=[a].concat(s))}return r[h]}return(e||Object.keys(n).concat(Object.keys(i))).forEach(o),r}function nk(t,e,n){const i=t.icons,r=t.aliases||Object.create(null);let o={};function h(a){o=_p(i[a]||r[a],o)}return h(e),n.forEach(h),_p(t,o)}function Qy(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(r=>{e(r,null),n.push(r)});const i=tk(t);for(const r in i){const o=i[r];o&&(e(r,nk(t,r,o)),n.push(r))}return n}const ik={provider:"",aliases:{},not_found:{},...Zy};function su(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function eb(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!su(t,ik))return null;const n=e.icons;for(const r in n){const o=n[r];if(!r.match(Ho)||typeof o.body!="string"||!su(o,rf))return null}const i=e.aliases||Object.create(null);for(const r in i){const o=i[r],h=o.parent;if(!r.match(Ho)||typeof h!="string"||!n[h]&&!i[h]||!su(o,rf))return null}return e}const yp=Object.create(null);function rk(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Xr(t,e){const n=yp[t]||(yp[t]=Object.create(null));return n[e]||(n[e]=rk(t,e))}function vh(t,e){return eb(e)?Qy(e,(n,i)=>{i?t.icons[n]=i:t.missing.add(n)}):[]}function sk(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let Qo=!1;function tb(t){return typeof t=="boolean"&&(Qo=t),Qo}function ok(t){const e=typeof t=="string"?sc(t,!0,Qo):t;if(e){const n=Xr(e.provider,e.prefix),i=e.name;return n.icons[i]||(n.missing.has(i)?null:void 0)}}function ak(t,e){const n=sc(t,!0,Qo);if(!n)return!1;const i=Xr(n.provider,n.prefix);return sk(i,n.name,e)}function lk(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Qo&&!e&&!t.prefix){let r=!1;return eb(t)&&(t.prefix="",Qy(t,(o,h)=>{h&&ak(o,h)&&(r=!0)})),r}const n=t.prefix;if(!hl({provider:e,prefix:n,name:"a"}))return!1;const i=Xr(e,n);return!!vh(i,t)}const nb=Object.freeze({width:null,height:null}),ib=Object.freeze({...nb,...Ll}),ck=/(-?[0-9.]*[0-9]+[0-9.]*)/g,uk=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function bp(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const i=t.split(ck);if(i===null||!i.length)return t;const r=[];let o=i.shift(),h=uk.test(o);for(;;){if(h){const a=parseFloat(o);isNaN(a)?r.push(o):r.push(Math.ceil(a*e*n)/n)}else r.push(o);if(o=i.shift(),o===void 0)return r.join("");h=!h}}function fk(t,e="defs"){let n="";const i=t.indexOf("<"+e);for(;i>=0;){const r=t.indexOf(">",i),o=t.indexOf("</"+e);if(r===-1||o===-1)break;const h=t.indexOf(">",o);if(h===-1)break;n+=t.slice(r+1,o).trim(),t=t.slice(0,i).trim()+t.slice(h+1)}return{defs:n,content:t}}function hk(t,e){return t?"<defs>"+t+"</defs>"+e:e}function dk(t,e,n){const i=fk(t);return hk(i.defs,e+i.content+n)}const pk=t=>t==="unset"||t==="undefined"||t==="none";function gk(t,e){const n={...oc,...t},i={...ib,...e},r={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,i].forEach(m=>{const g=[],v=m.hFlip,_=m.vFlip;let b=m.rotate;v?_?b+=2:(g.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),g.push("scale(-1 1)"),r.top=r.left=0):_&&(g.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),g.push("scale(1 -1)"),r.top=r.left=0);let y;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:y=r.height/2+r.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:y=r.width/2+r.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}b%2===1&&(r.left!==r.top&&(y=r.left,r.left=r.top,r.top=y),r.width!==r.height&&(y=r.width,r.width=r.height,r.height=y)),g.length&&(o=dk(o,'<g transform="'+g.join(" ")+'">',"</g>"))});const h=i.width,a=i.height,s=r.width,c=r.height;let f,l;h===null?(l=a===null?"1em":a==="auto"?c:a,f=bp(l,s/c)):(f=h==="auto"?s:h,l=a===null?bp(f,c/s):a==="auto"?c:a);const u={},d=(m,g)=>{pk(g)||(u[m]=g.toString())};d("width",f),d("height",l);const p=[r.left,r.top,s,c];return u.viewBox=p.join(" "),{attributes:u,viewBox:p,body:o}}const mk=/\sid="(\S+)"/g,vk="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let _k=0;function yk(t,e=vk){const n=[];let i;for(;i=mk.exec(t);)n.push(i[1]);if(!n.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const h=typeof e=="function"?e(o):e+(_k++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+h+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const sf=Object.create(null);function bk(t,e){sf[t]=e}function of(t){return sf[t]||sf[""]}function _h(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const yh=Object.create(null),So=["https://api.simplesvg.com","https://api.unisvg.com"],dl=[];for(;So.length>0;)So.length===1||Math.random()>.5?dl.push(So.shift()):dl.push(So.pop());yh[""]=_h({resources:["https://api.iconify.design"].concat(dl)});function wk(t,e){const n=_h(e);return n===null?!1:(yh[t]=n,!0)}function bh(t){return yh[t]}const Ck=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let wp=Ck();function Sk(t,e){const n=bh(t);if(!n)return 0;let i;if(!n.maxURL)i=0;else{let r=0;n.resources.forEach(h=>{r=Math.max(r,h.length)});const o=e+".json?icons=";i=n.maxURL-r-n.path.length-o.length}return i}function Tk(t){return t===404}const kk=(t,e,n)=>{const i=[],r=Sk(t,e),o="icons";let h={type:o,provider:t,prefix:e,icons:[]},a=0;return n.forEach((s,c)=>{a+=s.length+1,a>=r&&c>0&&(i.push(h),h={type:o,provider:t,prefix:e,icons:[]},a=s.length),h.icons.push(s)}),i.push(h),i};function Ok(t){if(typeof t=="string"){const e=bh(t);if(e)return e.path}return"/"}const Ek=(t,e,n)=>{if(!wp){n("abort",424);return}let i=Ok(e.provider);switch(e.type){case"icons":{const o=e.prefix,a=e.icons.join(","),s=new URLSearchParams({icons:a});i+=o+".json?"+s.toString();break}case"custom":{const o=e.uri;i+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let r=503;wp(t+i).then(o=>{const h=o.status;if(h!==200){setTimeout(()=>{n(Tk(h)?"abort":"next",h)});return}return r=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",r)});return}setTimeout(()=>{n("success",o)})}).catch(()=>{n("next",r)})},xk={prepare:kk,send:Ek};function Dk(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((r,o)=>r.provider!==o.provider?r.provider.localeCompare(o.provider):r.prefix!==o.prefix?r.prefix.localeCompare(o.prefix):r.name.localeCompare(o.name));let i={provider:"",prefix:"",name:""};return t.forEach(r=>{if(i.name===r.name&&i.prefix===r.prefix&&i.provider===r.provider)return;i=r;const o=r.provider,h=r.prefix,a=r.name,s=n[o]||(n[o]=Object.create(null)),c=s[h]||(s[h]=Xr(o,h));let f;a in c.icons?f=e.loaded:h===""||c.missing.has(a)?f=e.missing:f=e.pending;const l={provider:o,prefix:h,name:a};f.push(l)}),e}function rb(t,e){t.forEach(n=>{const i=n.loaderCallbacks;i&&(n.loaderCallbacks=i.filter(r=>r.id!==e))})}function Ak(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const i=t.provider,r=t.prefix;e.forEach(o=>{const h=o.icons,a=h.pending.length;h.pending=h.pending.filter(s=>{if(s.prefix!==r)return!0;const c=s.name;if(t.icons[c])h.loaded.push({provider:i,prefix:r,name:c});else if(t.missing.has(c))h.missing.push({provider:i,prefix:r,name:c});else return n=!0,!0;return!1}),h.pending.length!==a&&(n||rb([t],o.id),o.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),o.abort))})}))}let Pk=0;function Mk(t,e,n){const i=Pk++,r=rb.bind(null,n,i);if(!e.pending.length)return r;const o={id:i,icons:e,callback:t,abort:r};return n.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(o)}),r}function Ik(t,e=!0,n=!1){const i=[];return t.forEach(r=>{const o=typeof r=="string"?sc(r,e,n):r;o&&i.push(o)}),i}var Rk={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Fk(t,e,n,i){const r=t.resources.length,o=t.random?Math.floor(Math.random()*r):t.index;let h;if(t.random){let w=t.resources.slice(0);for(h=[];w.length>1;){const T=Math.floor(Math.random()*w.length);h.push(w[T]),w=w.slice(0,T).concat(w.slice(T+1))}h=h.concat(w)}else h=t.resources.slice(o).concat(t.resources.slice(0,o));const a=Date.now();let s="pending",c=0,f,l=null,u=[],d=[];typeof i=="function"&&d.push(i);function p(){l&&(clearTimeout(l),l=null)}function m(){s==="pending"&&(s="aborted"),p(),u.forEach(w=>{w.status==="pending"&&(w.status="aborted")}),u=[]}function g(w,T){T&&(d=[]),typeof w=="function"&&d.push(w)}function v(){return{startTime:a,payload:e,status:s,queriesSent:c,queriesPending:u.length,subscribe:g,abort:m}}function _(){s="failed",d.forEach(w=>{w(void 0,f)})}function b(){u.forEach(w=>{w.status==="pending"&&(w.status="aborted")}),u=[]}function y(w,T,O){const A=T!=="success";switch(u=u.filter(M=>M!==w),s){case"pending":break;case"failed":if(A||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){f=O,_();return}if(A){f=O,u.length||(h.length?C():_());return}if(p(),b(),!t.random){const M=t.resources.indexOf(w.resource);M!==-1&&M!==t.index&&(t.index=M)}s="completed",d.forEach(M=>{M(O)})}function C(){if(s!=="pending")return;p();const w=h.shift();if(w===void 0){if(u.length){l=setTimeout(()=>{p(),s==="pending"&&(b(),_())},t.timeout);return}_();return}const T={status:"pending",resource:w,callback:(O,A)=>{y(T,O,A)}};u.push(T),c++,l=setTimeout(C,t.rotate),n(w,e,T.callback)}return setTimeout(C),v}function sb(t){const e={...Rk,...t};let n=[];function i(){n=n.filter(a=>a().status==="pending")}function r(a,s,c){const f=Fk(e,a,s,(l,u)=>{i(),c&&c(l,u)});return n.push(f),f}function o(a){return n.find(s=>a(s))||null}return{query:r,find:o,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:i}}function Cp(){}const ou=Object.create(null);function Lk(t){if(!ou[t]){const e=bh(t);if(!e)return;const n=sb(e),i={config:e,redundancy:n};ou[t]=i}return ou[t]}function Nk(t,e,n){let i,r;if(typeof t=="string"){const o=of(t);if(!o)return n(void 0,424),Cp;r=o.send;const h=Lk(t);h&&(i=h.redundancy)}else{const o=_h(t);if(o){i=sb(o);const h=t.resources?t.resources[0]:"",a=of(h);a&&(r=a.send)}}return!i||!r?(n(void 0,424),Cp):i.query(e,r,n)().abort}const Sp="iconify2",ea="iconify",ob=ea+"-count",Tp=ea+"-version",ab=36e5,jk=168,Bk=50;function af(t,e){try{return t.getItem(e)}catch{}}function wh(t,e,n){try{return t.setItem(e,n),!0}catch{}}function kp(t,e){try{t.removeItem(e)}catch{}}function lf(t,e){return wh(t,ob,e.toString())}function cf(t){return parseInt(af(t,ob))||0}const ac={local:!0,session:!0},lb={local:new Set,session:new Set};let Ch=!1;function Uk(t){Ch=t}let Ua=typeof window>"u"?{}:window;function cb(t){const e=t+"Storage";try{if(Ua&&Ua[e]&&typeof Ua[e].length=="number")return Ua[e]}catch{}ac[t]=!1}function ub(t,e){const n=cb(t);if(!n)return;const i=af(n,Tp);if(i!==Sp){if(i){const a=cf(n);for(let s=0;s<a;s++)kp(n,ea+s.toString())}wh(n,Tp,Sp),lf(n,0);return}const r=Math.floor(Date.now()/ab)-jk,o=a=>{const s=ea+a.toString(),c=af(n,s);if(typeof c=="string"){try{const f=JSON.parse(c);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>r&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,a))return!0}catch{}kp(n,s)}};let h=cf(n);for(let a=h-1;a>=0;a--)o(a)||(a===h-1?(h--,lf(n,h)):lb[t].add(a))}function fb(){if(!Ch){Uk(!0);for(const t in ac)ub(t,e=>{const n=e.data,i=e.provider,r=n.prefix,o=Xr(i,r);if(!vh(o,n).length)return!1;const h=n.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,h):h,!0})}}function Wk(t,e){const n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(const i in ac)ub(i,r=>{const o=r.data;return r.provider!==t.provider||o.prefix!==t.prefix||o.lastModified===e});return!0}function Yk(t,e){Ch||fb();function n(i){let r;if(!ac[i]||!(r=cb(i)))return;const o=lb[i];let h;if(o.size)o.delete(h=Array.from(o).shift());else if(h=cf(r),h>=Bk||!lf(r,h+1))return;const a={cached:Math.floor(Date.now()/ab),provider:t.provider,data:e};return wh(r,ea+h.toString(),JSON.stringify(a))}e.lastModified&&!Wk(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),n("local")||n("session"))}function Op(){}function zk(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,Ak(t)}))}function Hk(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:i}=t,r=t.iconsToLoad;delete t.iconsToLoad;let o;if(!r||!(o=of(n)))return;o.prepare(n,i,r).forEach(a=>{Nk(n,a,s=>{if(typeof s!="object")a.icons.forEach(c=>{t.missing.add(c)});else try{const c=vh(t,s);if(!c.length)return;const f=t.pendingIcons;f&&c.forEach(l=>{f.delete(l)}),Yk(t,s)}catch(c){console.error(c)}zk(t)})})}))}const Vk=(t,e)=>{const n=Ik(t,!0,tb()),i=Dk(n);if(!i.pending.length){let s=!0;return e&&setTimeout(()=>{s&&e(i.loaded,i.missing,i.pending,Op)}),()=>{s=!1}}const r=Object.create(null),o=[];let h,a;return i.pending.forEach(s=>{const{provider:c,prefix:f}=s;if(f===a&&c===h)return;h=c,a=f,o.push(Xr(c,f));const l=r[c]||(r[c]=Object.create(null));l[f]||(l[f]=[])}),i.pending.forEach(s=>{const{provider:c,prefix:f,name:l}=s,u=Xr(c,f),d=u.pendingIcons||(u.pendingIcons=new Set);d.has(l)||(d.add(l),r[c][f].push(l))}),o.forEach(s=>{const{provider:c,prefix:f}=s;r[c][f].length&&Hk(s,r[c][f])}),e?Mk(e,i,o):Op};function Xk(t,e){const n={...t};for(const i in e){const r=e[i],o=typeof r;i in nb?(r===null||r&&(o==="string"||o==="number"))&&(n[i]=r):o===typeof n[i]&&(n[i]=i==="rotate"?r%4:r)}return n}const $k=/[\s,]+/;function Gk(t,e){e.split($k).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function qk(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function i(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(t);return isNaN(r)?0:i(r)}else if(n!==t){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let o=parseFloat(t.slice(0,t.length-n.length));return isNaN(o)?0:(o=o/r,o%1===0?i(o):0)}}return e}function Kk(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)n+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function Jk(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Zk(t){return"data:image/svg+xml,"+Jk(t)}function Qk(t){return'url("'+Zk(t)+'")'}const Ep={...ib,inline:!1},eO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},tO={display:"inline-block"},uf={"background-color":"currentColor"},hb={"background-color":"transparent"},xp={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Dp={"-webkit-mask":uf,mask:uf,background:hb};for(const t in Dp){const e=Dp[t];for(const n in xp)e[t+"-"+n]=xp[n]}function nO(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function iO(t,e){const n=Xk(Ep,e),i=e.mode||"svg",r=i==="svg"?{...eO}:{};t.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let o=typeof e.style=="string"?e.style:"";for(let v in e){const _=e[v];if(_!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[v]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&Gk(n,_);break;case"color":o=o+(o.length>0&&o.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?n[v]=qk(_):typeof _=="number"&&(n[v]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete r["aria-hidden"];break;default:if(v.slice(0,3)==="on:")break;Ep[v]===void 0&&(r[v]=_)}}const h=gk(t,n),a=h.attributes;if(n.inline&&(o="vertical-align: -0.125em; "+o),i==="svg"){Object.assign(r,a),o!==""&&(r.style=o);let v=0,_=e.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:r,body:yk(h.body,_?()=>_+"ID"+v++:"iconifySvelte")}}const{body:s,width:c,height:f}=t,l=i==="mask"||(i==="bg"?!1:s.indexOf("currentColor")!==-1),u=Kk(s,{...a,width:c+"",height:f+""}),p={"--svg":Qk(u)},m=v=>{const _=a[v];_&&(p[v]=nO(_))};m("width"),m("height"),Object.assign(p,tO,l?uf:hb);let g="";for(const v in p)g+=v+": "+p[v]+";";return r.style=g+o,{svg:!1,attributes:r}}tb(!0);bk("",xk);if(typeof document<"u"&&typeof window<"u"){fb();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!lk(i))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const i="IconifyProviders["+n+"] is invalid.";try{const r=e[n];if(typeof r!="object"||!r||r.resources===void 0)continue;wk(n,r)||console.error(i)}catch{console.error(i)}}}}function rO(t,e,n,i,r){function o(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",o(),{data:{...oc,...t}};let h;if(typeof t!="string"||(h=sc(t,!1,!0))===null)return o(),null;const a=ok(h);if(!a)return n&&(!e.loading||e.loading.name!==t)&&(o(),e.name="",e.loading={name:t,abort:Vk([h],i)}),null;o(),e.name!==t&&(e.name=t,r&&!e.destroyed&&r(t));const s=["iconify"];return h.prefix!==""&&s.push("iconify--"+h.prefix),h.provider!==""&&s.push("iconify--"+h.provider),{data:a,classes:s}}function sO(t,e){return t?iO({...oc,...t},e):null}function Ap(t){let e;function n(o,h){return o[0].svg?aO:oO}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(o,h){r.m(o,h),j(o,e,h)},p(o,h){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&N(e),r.d(o)}}}function oO(t){let e,n=[t[0].attributes],i={};for(let r=0;r<n.length;r+=1)i=vi(i,n[r]);return{c(){e=E("span"),Ol(e,i)},m(r,o){j(r,e,o)},p(r,o){Ol(e,i=Vr(n,[o&1&&r[0].attributes]))},d(r){r&&N(e)}}}function aO(t){let e,n=t[0].body+"",i=[t[0].attributes],r={};for(let o=0;o<i.length;o+=1)r=vi(r,i[o]);return{c(){e=h1("svg"),Fd(e,r)},m(o,h){j(o,e,h),e.innerHTML=n},p(o,h){h&1&&n!==(n=o[0].body+"")&&(e.innerHTML=n),Fd(e,r=Vr(i,[h&1&&o[0].attributes]))},d(o){o&&N(e)}}}function lO(t){let e,n=t[0]&&Ap(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),j(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=Ap(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d(i)}}}function cO(t,e,n){const i={name:"",loading:null,destroyed:!1};let r=!1,o=0,h;const a=c=>{typeof e.onLoad=="function"&&e.onLoad(c),zt()("load",{icon:c})};function s(){n(3,o++,o)}return ki(()=>{n(2,r=!0)}),Oi(()=>{n(1,i.destroyed=!0,i),i.loading&&(i.loading.abort(),n(1,i.loading=null,i))}),t.$$set=c=>{n(6,e=vi(vi({},e),Id(c)))},t.$$.update=()=>{{const c=rO(e.icon,i,r,s,a);n(0,h=c?sO(c.data,e):null),h&&c.classes&&n(0,h.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),h)}},e=Id(e),[h,i,r,o]}class Se extends qe{constructor(e){super(),Ge(this,e,cO,lO,Ve,{})}}function uO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return f=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("div"),a=E("input"),s=V(),c=E("button"),de(f.$$.fragment),S(r,"id","minmax-range"),S(r,"type","range"),S(r,"min","0"),S(r,"max","360"),S(r,"step","1"),S(r,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(i,"class","w-full mt-3"),S(a,"type","text"),S(a,"class","input w-full text-center"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){j(p,e,m),k(e,n),k(n,i),k(i,r),Pe(r,t[1]),k(n,o),k(n,h),k(h,a),Pe(a,t[1]),k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[Q(r,"change",t[3]),Q(r,"input",t[3]),Q(r,"input",t[4]),Q(a,"input",t[5]),Q(a,"input",t[6]),Q(c,"click",t[7])],u=!0)},p(p,[m]){m&2&&Pe(r,p[1]),m&2&&a.value!==p[1]&&Pe(a,p[1])},i(p){l||(R(f.$$.fragment,p),l=!0)},o(p){H(f.$$.fragment,p),l=!1},d(p){p&&N(e),fe(f),u=!1,We(d)}}}function fO(t,e,n){let{selectProperty:i=null}=e,{sliderValue:r=0}=e;const o=zt();function h(){o("onChangeRotate",{value:r})}Oi(()=>{n(0,i=null)});function a(){r=by(this.value),n(1,r)}const s=()=>h();function c(){r=this.value,n(1,r)}const f=()=>h(),l=()=>n(0,i=null);return t.$$set=u=>{"selectProperty"in u&&n(0,i=u.selectProperty),"sliderValue"in u&&n(1,r=u.sliderValue)},[i,r,h,a,s,c,f,l]}class hO extends qe{constructor(e){super(),Ge(this,e,fO,uO,Ve,{selectProperty:0,sliderValue:1})}}var dO={grad:.9,turn:360,rad:360/(2*Math.PI)},Mi=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Zt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Yn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},db=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Pp=function(t){return{r:Yn(t.r,0,255),g:Yn(t.g,0,255),b:Yn(t.b,0,255),a:Yn(t.a)}},au=function(t){return{r:Zt(t.r),g:Zt(t.g),b:Zt(t.b),a:Zt(t.a,3)}},pO=/^#([0-9a-f]{3,8})$/i,Wa=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},pb=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),h=o-Math.min(e,n,i),a=h?o===e?(n-i)/h:o===n?2+(i-e)/h:4+(e-n)/h:0;return{h:60*(a<0?a+6:a),s:o?h/o*100:0,v:o/255*100,a:r}},gb=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),h=i*(1-n),a=i*(1-(e-o)*n),s=i*(1-(1-e+o)*n),c=o%6;return{r:255*[i,a,h,h,s,i][c],g:255*[s,i,i,a,h,h][c],b:255*[h,h,s,i,i,a][c],a:r}},Mp=function(t){return{h:db(t.h),s:Yn(t.s,0,100),l:Yn(t.l,0,100),a:Yn(t.a)}},Ip=function(t){return{h:Zt(t.h),s:Zt(t.s),l:Zt(t.l),a:Zt(t.a,3)}},Rp=function(t){return gb((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},Vo=function(t){return{h:(e=pb(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},gO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_O=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fp={string:[[function(t){var e=pO.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Zt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Zt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=vO.exec(t)||_O.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Pp({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=gO.exec(t)||mO.exec(t);if(!e)return null;var n,i,r=Mp({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(dO[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Rp(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=r===void 0?1:r;return Mi(e)&&Mi(n)&&Mi(i)?Pp({r:Number(e),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,o=r===void 0?1:r;if(!Mi(e)||!Mi(n)||!Mi(i))return null;var h=Mp({h:Number(e),s:Number(n),l:Number(i),a:Number(o)});return Rp(h)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=r===void 0?1:r;if(!Mi(e)||!Mi(n)||!Mi(i))return null;var h=function(a){return{h:db(a.h),s:Yn(a.s,0,100),v:Yn(a.v,0,100),a:Yn(a.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(o)});return gb(h)},"hsv"]]},Lp=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},yO=function(t){return typeof t=="string"?Lp(t.trim(),Fp.string):typeof t=="object"&&t!==null?Lp(t,Fp.object):[null,void 0]},lu=function(t,e){var n=Vo(t);return{h:n.h,s:Yn(n.s+100*e,0,100),l:n.l,a:n.a}},cu=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Np=function(t,e){var n=Vo(t);return{h:n.h,s:n.s,l:Yn(n.l+100*e,0,100),a:n.a}},jp=function(){function t(e){this.parsed=yO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Zt(cu(this.rgba),2)},t.prototype.isDark=function(){return cu(this.rgba)<.5},t.prototype.isLight=function(){return cu(this.rgba)>=.5},t.prototype.toHex=function(){return e=au(this.rgba),n=e.r,i=e.g,r=e.b,h=(o=e.a)<1?Wa(Zt(255*o)):"","#"+Wa(n)+Wa(i)+Wa(r)+h;var e,n,i,r,o,h},t.prototype.toRgb=function(){return au(this.rgba)},t.prototype.toRgbString=function(){return e=au(this.rgba),n=e.r,i=e.g,r=e.b,(o=e.a)<1?"rgba("+n+", "+i+", "+r+", "+o+")":"rgb("+n+", "+i+", "+r+")";var e,n,i,r,o},t.prototype.toHsl=function(){return Ip(Vo(this.rgba))},t.prototype.toHslString=function(){return e=Ip(Vo(this.rgba)),n=e.h,i=e.s,r=e.l,(o=e.a)<1?"hsla("+n+", "+i+"%, "+r+"%, "+o+")":"hsl("+n+", "+i+"%, "+r+"%)";var e,n,i,r,o},t.prototype.toHsv=function(){return e=pb(this.rgba),{h:Zt(e.h),s:Zt(e.s),v:Zt(e.v),a:Zt(e.a,3)};var e},t.prototype.invert=function(){return On({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),On(lu(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),On(lu(this.rgba,-e))},t.prototype.grayscale=function(){return On(lu(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),On(Np(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),On(Np(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?On({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Zt(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Vo(this.rgba);return typeof e=="number"?On({h:e,s:n.s,l:n.l,a:n.a}):Zt(n.h)},t.prototype.isEqual=function(e){return this.toHex()===On(e).toHex()},t}(),On=function(t){return t instanceof jp?t:new jp(t)};function Bp(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),S(e,"name",t[3]),e.value=t[0]},m(n,i){j(n,e,i)},p(n,i){i&8&&S(e,"name",n[3]),i&1&&(e.value=n[0])},d(n){n&&N(e)}}}function bO(t){let e,n,i,r,o,h,a,s,c,f=t[3]&&Bp(t);return{c(){e=E("div"),n=E("div"),i=V(),r=E("div"),h=V(),f&&f.c(),a=et(),S(n,"class","track svelte-x7oaj0"),S(r,"class","thumb svelte-x7oaj0"),S(e,"class","slider svelte-x7oaj0"),S(e,"role","slider"),S(e,"aria-orientation",t[4]),S(e,"aria-valuemax",t[11]),S(e,"aria-valuemin",t[10]),S(e,"aria-valuenow",t[0]),S(e,"aria-valuetext",o=t[2](t[0])),S(e,"aria-label",t[7]),S(e,"aria-labelledby",t[8]),S(e,"aria-controls",t[9]),S(e,"tabindex","0"),yi(e,"reverse",t[5]),mt(e,"--position",t[12])},m(l,u){j(l,e,u),k(e,n),k(e,i),k(e,r),t[22](e),j(l,h,u),f&&f.m(l,u),j(l,a,u),s||(c=[Q(window,"mousemove",t[15]),Q(window,"mouseup",t[16]),Q(e,"keydown",t[13]),Q(e,"mousedown",d1(function(){Wn(t[6]?void 0:t[14])&&(t[6]?void 0:t[14]).apply(this,arguments)})),Q(e,"touchstart",Fi(function(){Wn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Q(e,"touchmove",Fi(function(){Wn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1}),Q(e,"touchend",Fi(function(){Wn(t[6]?void 0:t[17])&&(t[6]?void 0:t[17]).apply(this,arguments)}),{passive:!1})],s=!0)},p(l,[u]){t=l,u&16&&S(e,"aria-orientation",t[4]),u&2048&&S(e,"aria-valuemax",t[11]),u&1024&&S(e,"aria-valuemin",t[10]),u&1&&S(e,"aria-valuenow",t[0]),u&5&&o!==(o=t[2](t[0]))&&S(e,"aria-valuetext",o),u&128&&S(e,"aria-label",t[7]),u&256&&S(e,"aria-labelledby",t[8]),u&512&&S(e,"aria-controls",t[9]),u&32&&yi(e,"reverse",t[5]),u&4096&&mt(e,"--position",t[12]),t[3]?f?f.p(t,u):(f=Bp(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:ge,o:ge,d(l){l&&(N(e),N(h),N(a)),t[22](null),f&&f.d(l),s=!1,We(c)}}}function wO(t,e,n){let i,r,o,h,{min:a=0}=e,{max:s=100}=e,{step:c=1}=e,{value:f=50}=e,{ariaValueText:l=B=>B.toString()}=e,{name:u=void 0}=e,{direction:d="horizontal"}=e,{reverse:p=!1}=e,{keyboardOnly:m=!1}=e,{slider:g=void 0}=e,{ariaLabel:v=void 0}=e,{ariaLabelledBy:_=void 0}=e,{ariaControls:b=void 0}=e,{isDragging:y=!1}=e;const C=zt();function w(B){const W=1/o,ee=Math.round(B*W)/W;return Math.max(i,Math.min(r,ee))}function T(B){const W=B.shiftKey?o*10:o;B.key==="ArrowUp"||B.key==="ArrowRight"?(n(0,f+=W),B.preventDefault()):B.key==="ArrowDown"||B.key==="ArrowLeft"?(n(0,f-=W),B.preventDefault()):B.key==="Home"?(n(0,f=i),B.preventDefault()):B.key==="End"?(n(0,f=r),B.preventDefault()):B.key==="PageUp"?(n(0,f+=o*10),B.preventDefault()):B.key==="PageDown"&&(n(0,f-=o*10),B.preventDefault()),n(0,f=w(f)),C("input",f)}const O={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function A(B){const W=(g==null?void 0:g[O[d].clientSize])||120,ee=(g==null?void 0:g.getBoundingClientRect()[O[d].offset])||0;let ne=B[O[d].client]-ee;d==="vertical"&&(ne=-1*ne+W),p?n(0,f=r-ne/W*(r-i)):n(0,f=ne/W*(r-i)+i),n(0,f=w(f)),C("input",f)}function M(B){A(B),n(18,y=!0)}function Y(B){y&&A(B)}function U(){n(18,y=!1)}function K(B){A({clientX:B.changedTouches[0].clientX,clientY:B.changedTouches[0].clientY})}function q(B){nt[B?"unshift":"push"](()=>{g=B,n(1,g)})}return t.$$set=B=>{"min"in B&&n(19,a=B.min),"max"in B&&n(20,s=B.max),"step"in B&&n(21,c=B.step),"value"in B&&n(0,f=B.value),"ariaValueText"in B&&n(2,l=B.ariaValueText),"name"in B&&n(3,u=B.name),"direction"in B&&n(4,d=B.direction),"reverse"in B&&n(5,p=B.reverse),"keyboardOnly"in B&&n(6,m=B.keyboardOnly),"slider"in B&&n(1,g=B.slider),"ariaLabel"in B&&n(7,v=B.ariaLabel),"ariaLabelledBy"in B&&n(8,_=B.ariaLabelledBy),"ariaControls"in B&&n(9,b=B.ariaControls),"isDragging"in B&&n(18,y=B.isDragging)},t.$$.update=()=>{t.$$.dirty&524288&&n(10,i=typeof a=="string"?parseFloat(a):a),t.$$.dirty&1048576&&n(11,r=typeof s=="string"?parseFloat(s):s),t.$$.dirty&2097152&&(o=typeof c=="string"?parseFloat(c):c),t.$$.dirty&3073&&n(12,h=((f-i)/(r-i)*1).toFixed(4))},[f,g,l,u,d,p,m,v,_,b,i,r,h,T,M,Y,U,K,y,a,s,c,q]}class Nl extends qe{constructor(e){super(),Ge(this,e,wO,bO,Ve,{min:19,max:20,step:21,value:0,ariaValueText:2,name:3,direction:4,reverse:5,keyboardOnly:6,slider:1,ariaLabel:7,ariaLabelledBy:8,ariaControls:9,isDragging:18})}}function CO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;var p=t[2].pickerIndicator;function m(y,C){return{props:{pos:y[6],isDark:y[3]}}}p&&(n=un(p,m(t)));function g(y){t[13](y)}let v={keyboardOnly:!0,ariaValueText:SO,ariaLabel:"saturation color"};t[0]!==void 0&&(v.value=t[0]),o=new Nl({props:v}),nt.push(()=>xt(o,"value",g));function _(y){t[14](y)}let b={keyboardOnly:!0,ariaValueText:TO,direction:"vertical",ariaLabel:"brightness color"};return t[1]!==void 0&&(b.value=t[1]),c=new Nl({props:b}),nt.push(()=>xt(c,"value",_)),{c(){e=E("div"),n&&de(n.$$.fragment),i=V(),r=E("div"),de(o.$$.fragment),a=V(),s=E("div"),de(c.$$.fragment),S(r,"class","s svelte-amfbfx"),mt(r,"--pos-y",t[6].y),S(s,"class","v svelte-amfbfx"),mt(s,"--pos-x",t[6].x),S(e,"class","picker svelte-amfbfx"),mt(e,"--picker-color-bg",t[5])},m(y,C){j(y,e,C),n&&ue(n,e,null),k(e,i),k(e,r),ue(o,r,null),k(e,a),k(e,s),ue(c,s,null),t[15](e),l=!0,u||(d=[Q(window,"mouseup",t[8]),Q(window,"mousedown",t[10]),Q(window,"mousemove",t[9]),Q(e,"mousedown",Fi(t[7])),Q(e,"touchstart",t[11],{passive:!1}),Q(e,"touchmove",Fi(t[11]),{passive:!1}),Q(e,"touchend",t[11],{passive:!1})],u=!0)},p(y,[C]){if(C&4&&p!==(p=y[2].pickerIndicator)){if(n){ke();const O=n;H(O.$$.fragment,1,0,()=>{fe(O,1)}),Oe()}p?(n=un(p,m(y)),de(n.$$.fragment),R(n.$$.fragment,1),ue(n,e,i)):n=null}else if(p){const O={};C&64&&(O.pos=y[6]),C&8&&(O.isDark=y[3]),n.$set(O)}const w={};!h&&C&1&&(h=!0,w.value=y[0],Wt(()=>h=!1)),o.$set(w),C&64&&mt(r,"--pos-y",y[6].y);const T={};!f&&C&2&&(f=!0,T.value=y[1],Wt(()=>f=!1)),c.$set(T),C&64&&mt(s,"--pos-x",y[6].x),C&32&&mt(e,"--picker-color-bg",y[5])},i(y){l||(n&&R(n.$$.fragment,y),R(o.$$.fragment,y),R(c.$$.fragment,y),l=!0)},o(y){n&&H(n.$$.fragment,y),H(o.$$.fragment,y),H(c.$$.fragment,y),l=!1},d(y){y&&N(e),n&&fe(n),fe(o),fe(c),t[15](null),u=!1,We(d)}}}function Ya(t,e,n){return Math.min(Math.max(e,t),n)}const SO=t=>`${t}%`,TO=t=>`${t}%`;function kO(t,e,n){const i=zt();let{components:r}=e,{h:o}=e,{s:h}=e,{v:a}=e,{isDark:s}=e,c,f=!1,l,u={x:100,y:0};function d(w){const{width:T,left:O,height:A,top:M}=c.getBoundingClientRect(),Y={x:Ya(w.clientX-O,0,T),y:Ya(w.clientY-M,0,A)};n(0,h=Ya(Y.x/T,0,1)*100),n(1,a=Ya((A-Y.y)/A,0,1)*100)}function p(w){w.button===0&&(f=!0,d(w))}function m(){f=!1}function g(w){f&&d(w)}function v(w){w.target.isSameNode(c)}function _(w){w.preventDefault(),d(w.changedTouches[0])}function b(w){h=w,n(0,h)}function y(w){a=w,n(1,a)}function C(w){nt[w?"unshift":"push"](()=>{c=w,n(4,c)})}return t.$$set=w=>{"components"in w&&n(2,r=w.components),"h"in w&&n(12,o=w.h),"s"in w&&n(0,h=w.s),"v"in w&&n(1,a=w.v),"isDark"in w&&n(3,s=w.isDark)},t.$$.update=()=>{t.$$.dirty&4096&&typeof o=="number"&&n(5,l=On({h:o,s:100,v:100,a:1}).toHex()),t.$$.dirty&19&&typeof h=="number"&&typeof a=="number"&&c&&n(6,u={x:h,y:100-a}),t.$$.dirty&3&&i("input",{s:h,v:a})},[h,a,r,s,c,l,u,p,m,g,v,_,o,b,y,C]}class OO extends qe{constructor(e){super(),Ge(this,e,kO,CO,Ve,{components:2,h:12,s:0,v:1,isDark:3})}}function EO(t){let e;return{c(){e=E("div"),S(e,"class","picker-indicator svelte-i5mg2p"),yi(e,"is-dark",t[1]),mt(e,"--pos-x",t[0].x),mt(e,"--pos-y",t[0].y)},m(n,i){j(n,e,i)},p(n,[i]){i&2&&yi(e,"is-dark",n[1]),i&1&&mt(e,"--pos-x",n[0].x),i&1&&mt(e,"--pos-y",n[0].y)},i:ge,o:ge,d(n){n&&N(e)}}}function xO(t,e,n){let{pos:i}=e,{isDark:r}=e;return t.$$set=o=>{"pos"in o&&n(0,i=o.pos),"isDark"in o&&n(1,r=o.isDark)},[i,r]}class DO extends qe{constructor(e){super(),Ge(this,e,xO,EO,Ve,{pos:0,isDark:1})}}function AO(t){let e,n,i,r,o,h,a,s,c,f;return{c(){e=E("input"),i=V(),r=E("input"),h=V(),a=E("input"),S(e,"aria-label",n=t[4].label.h),e.value=t[9],S(e,"type","number"),S(e,"min","0"),S(e,"max","360"),S(e,"class","svelte-qtukzs"),S(r,"aria-label",o=t[4].label.s),r.value=t[8],S(r,"type","number"),S(r,"min","0"),S(r,"max","100"),S(r,"class","svelte-qtukzs"),S(a,"aria-label",s=t[4].label.v),a.value=t[7],S(a,"type","number"),S(a,"min","0"),S(a,"max","100"),S(a,"class","svelte-qtukzs")},m(l,u){j(l,e,u),j(l,i,u),j(l,r,u),j(l,h,u),j(l,a,u),c||(f=[Q(e,"input",t[13]("h")),Q(r,"input",t[13]("s")),Q(a,"input",t[13]("v"))],c=!0)},p(l,u){u&16&&n!==(n=l[4].label.h)&&S(e,"aria-label",n),u&512&&e.value!==l[9]&&(e.value=l[9]),u&16&&o!==(o=l[4].label.s)&&S(r,"aria-label",o),u&256&&r.value!==l[8]&&(r.value=l[8]),u&16&&s!==(s=l[4].label.v)&&S(a,"aria-label",s),u&128&&a.value!==l[7]&&(a.value=l[7])},d(l){l&&(N(e),N(i),N(r),N(h),N(a)),c=!1,We(f)}}}function PO(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return{c(){e=E("input"),r=V(),o=E("input"),s=V(),c=E("input"),S(e,"aria-label",n=t[4].label.r),e.value=i=t[0].r,S(e,"type","number"),S(e,"min","0"),S(e,"max","255"),S(e,"class","svelte-qtukzs"),S(o,"aria-label",h=t[4].label.g),o.value=a=t[0].g,S(o,"type","number"),S(o,"min","0"),S(o,"max","255"),S(o,"class","svelte-qtukzs"),S(c,"aria-label",f=t[4].label.b),c.value=l=t[0].b,S(c,"type","number"),S(c,"min","0"),S(c,"max","255"),S(c,"class","svelte-qtukzs")},m(p,m){j(p,e,m),j(p,r,m),j(p,o,m),j(p,s,m),j(p,c,m),u||(d=[Q(e,"input",t[12]("r")),Q(o,"input",t[12]("g")),Q(c,"input",t[12]("b"))],u=!0)},p(p,m){m&16&&n!==(n=p[4].label.r)&&S(e,"aria-label",n),m&1&&i!==(i=p[0].r)&&e.value!==i&&(e.value=i),m&16&&h!==(h=p[4].label.g)&&S(o,"aria-label",h),m&1&&a!==(a=p[0].g)&&o.value!==a&&(o.value=a),m&16&&f!==(f=p[4].label.b)&&S(c,"aria-label",f),m&1&&l!==(l=p[0].b)&&c.value!==l&&(c.value=l)},d(p){p&&(N(e),N(r),N(o),N(s),N(c)),u=!1,We(d)}}}function MO(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.hex),e.value=t[1],S(e,"class","svelte-qtukzs"),mt(e,"flex",3)},m(o,h){j(o,e,h),i||(r=Q(e,"input",t[11]),i=!0)},p(o,h){h&16&&n!==(n=o[4].label.hex)&&S(e,"aria-label",n),h&2&&e.value!==o[1]&&(e.value=o[1])},d(o){o&&N(e),i=!1,r()}}}function Up(t){let e,n,i,r;return{c(){e=E("input"),S(e,"aria-label",n=t[4].label.a),e.value=t[6],S(e,"type","number"),S(e,"min","0"),S(e,"max","1"),S(e,"step","0.01"),S(e,"class","svelte-qtukzs")},m(o,h){j(o,e,h),i||(r=Q(e,"input",function(){Wn(t[5]==="hsv"?t[13]("a"):t[12]("a"))&&(t[5]==="hsv"?t[13]("a"):t[12]("a")).apply(this,arguments)}),i=!0)},p(o,h){t=o,h&16&&n!==(n=t[4].label.a)&&S(e,"aria-label",n),h&64&&e.value!==t[6]&&(e.value=t[6])},d(o){o&&N(e),i=!1,r()}}}function IO(t){let e,n=t[4].color[t[5]]+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","button-like svelte-qtukzs")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&48&&n!==(n=r[4].color[r[5]]+"")&&He(i,n)},d(r){r&&N(e)}}}function RO(t){let e,n,i=t[4].color[t[5]]+"",r,o,h,a=t[4].changeTo+"",s,c,f,l,u;return{c(){e=E("button"),n=E("span"),r=we(i),o=V(),h=E("span"),s=we(a),c=V(),f=we(t[10]),S(n,"class","disappear svelte-qtukzs"),S(n,"aria-hidden","true"),S(h,"class","appear svelte-qtukzs"),S(e,"type","button"),S(e,"class","svelte-qtukzs")},m(d,p){j(d,e,p),k(e,n),k(n,r),k(e,o),k(e,h),k(h,s),k(h,c),k(h,f),l||(u=Q(e,"click",t[15]),l=!0)},p(d,p){p&48&&i!==(i=d[4].color[d[5]]+"")&&He(r,i),p&16&&a!==(a=d[4].changeTo+"")&&He(s,a),p&1024&&He(f,d[10])},d(d){d&&N(e),l=!1,u()}}}function FO(t){let e,n,i,r;function o(u,d){return u[5]==="hex"?MO:u[5]==="rgb"?PO:AO}let h=o(t),a=h(t),s=t[2]&&Up(t);function c(u,d){return u[3].length>1?RO:IO}let f=c(t),l=f(t);return{c(){e=E("div"),n=E("div"),a.c(),i=V(),s&&s.c(),r=V(),l.c(),S(n,"class","input-container svelte-qtukzs"),S(e,"class","text-input svelte-qtukzs")},m(u,d){j(u,e,d),k(e,n),a.m(n,null),k(n,i),s&&s.m(n,null),k(e,r),l.m(e,null)},p(u,[d]){h===(h=o(u))&&a?a.p(u,d):(a.d(1),a=h(u),a&&(a.c(),a.m(n,i))),u[2]?s?s.p(u,d):(s=Up(u),s.c(),s.m(n,null)):s&&(s.d(1),s=null),f===(f=c(u))&&l?l.p(u,d):(l.d(1),l=f(u),l&&(l.c(),l.m(e,null)))},i:ge,o:ge,d(u){u&&N(e),a.d(),s&&s.d(),l.d()}}}const LO=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function NO(t,e,n){let i,r,o,h,a;const s=zt();let{isAlpha:c}=e,{rgb:f}=e,{hsv:l}=e,{hex:u}=e,{textInputModes:d}=e,{texts:p}=e,m=d[0]||"hex";function g(y){const C=y.target;LO.test(C.value)&&(n(1,u=C.value),s("input",{hex:u}))}function v(y){return function(C){n(0,f={...f,[y]:parseFloat(C.target.value)}),s("input",{rgb:f})}}function _(y){return function(C){n(14,l={...l,[y]:parseFloat(C.target.value)}),s("input",{hsv:l})}}const b=()=>n(5,m=i);return t.$$set=y=>{"isAlpha"in y&&n(2,c=y.isAlpha),"rgb"in y&&n(0,f=y.rgb),"hsv"in y&&n(14,l=y.hsv),"hex"in y&&n(1,u=y.hex),"textInputModes"in y&&n(3,d=y.textInputModes),"texts"in y&&n(4,p=y.texts)},t.$$.update=()=>{t.$$.dirty&40&&n(10,i=d[(d.indexOf(m)+1)%d.length]),t.$$.dirty&16384&&n(9,r=Math.round(l.h)),t.$$.dirty&16384&&n(8,o=Math.round(l.s)),t.$$.dirty&16384&&n(7,h=Math.round(l.v)),t.$$.dirty&16384&&n(6,a=l.a===void 0?1:Math.round(l.a*100)/100)},[f,u,c,d,p,m,a,h,o,r,i,g,v,_,l,b]}class jO extends qe{constructor(e){super(),Ge(this,e,NO,FO,Ve,{isAlpha:2,rgb:0,hsv:14,hex:1,textInputModes:3,texts:4})}}function BO(t){let e,n,i,r,o,h,a,s,c,f,l;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("div"),h=V(),a=E("div"),s=V(),c=we(t[2]),S(i,"type","color"),S(i,"name",t[3]),i.value=t[1],S(i,"aria-haspopup","dialog"),S(i,"class","svelte-r4tbal"),S(o,"class","alpha svelte-r4tbal"),S(a,"class","color svelte-r4tbal"),mt(a,"background",t[1]),S(n,"class","container svelte-r4tbal"),S(e,"class","svelte-r4tbal")},m(u,d){j(u,e,d),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(e,s),k(e,c),t[5](e),f||(l=[Q(i,"click",Fi(za)),Q(i,"mousedown",Fi(za)),Q(e,"click",Fi(za)),Q(e,"mousedown",Fi(za))],f=!0)},p(u,[d]){d&8&&S(i,"name",u[3]),d&2&&(i.value=u[1]),d&2&&mt(a,"background",u[1]),d&4&&He(c,u[2])},i:ge,o:ge,d(u){u&&N(e),t[5](null),f=!1,We(l)}}}function za(){}function UO(t,e,n){let{labelElement:i}=e,{hex:r}=e,{label:o}=e,{name:h=void 0}=e,{isOpen:a}=e;function s(c){nt[c?"unshift":"push"](()=>{i=c,n(0,i)})}return t.$$set=c=>{"labelElement"in c&&n(0,i=c.labelElement),"hex"in c&&n(1,r=c.hex),"label"in c&&n(2,o=c.label),"name"in c&&n(3,h=c.name),"isOpen"in c&&n(4,a=c.isOpen)},[i,r,o,h,a,s]}class WO extends qe{constructor(e){super(),Ge(this,e,UO,BO,Ve,{labelElement:0,hex:1,label:2,name:3,isOpen:4})}}function YO(t){let e,n,i;const r=t[4].default,o=ga(r,t,t[3],null);return{c(){e=E("div"),o&&o.c(),S(e,"class","wrapper svelte-1h4o41o"),S(e,"role",n=t[2]?"dialog":void 0),S(e,"aria-label","color picker"),yi(e,"is-open",t[1])},m(h,a){j(h,e,a),o&&o.m(e,null),t[5](e),i=!0},p(h,[a]){o&&o.p&&(!i||a&8)&&va(o,r,h,h[3],i?ma(r,h[3],a,null):_a(h[3]),null),(!i||a&4&&n!==(n=h[2]?"dialog":void 0))&&S(e,"role",n),(!i||a&2)&&yi(e,"is-open",h[1])},i(h){i||(R(o,h),i=!0)},o(h){H(o,h),i=!1},d(h){h&&N(e),o&&o.d(h),t[5](null)}}}function zO(t,e,n){let{$$slots:i={},$$scope:r}=e,{wrapper:o}=e,{isOpen:h}=e,{isDialog:a}=e;function s(c){nt[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$set=c=>{"wrapper"in c&&n(0,o=c.wrapper),"isOpen"in c&&n(1,h=c.isOpen),"isDialog"in c&&n(2,a=c.isDialog),"$$scope"in c&&n(3,r=c.$$scope)},[o,h,a,r,i,s]}class HO extends qe{constructor(e){super(),Ge(this,e,zO,YO,Ve,{wrapper:0,isOpen:1,isDialog:2})}}const uu={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},mb="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function VO(t){return function(e){if(e.target===window)return;const n=e.target;if(!t.contains(n))return;const i=t.querySelectorAll(mb),r=i[0],o=i[i.length-1];function h(s){return s.code==="Tab"&&!s.shiftKey}function a(s){return s.code==="Tab"&&s.shiftKey}h(e)&&e.target===o?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),o.focus())}}const XO=t=>{const e=t.querySelector(mb);e&&e.focus();const n=VO(t);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};function $O(t){let e,n,i,r,o,h,a=t[1].label.withoutColor+"",s,c,f;return{c(){e=E("label"),n=E("div"),i=E("input"),r=V(),o=E("span"),h=V(),s=we(a),S(i,"type","checkbox"),S(i,"class","svelte-pt866j"),S(o,"class","svelte-pt866j"),S(n,"class","svelte-pt866j"),S(e,"class","nullability-checkbox svelte-pt866j")},m(l,u){j(l,e,u),k(e,n),k(n,i),i.checked=t[0],k(n,r),k(n,o),k(e,h),k(e,s),c||(f=Q(i,"change",t[2]),c=!0)},p(l,[u]){u&1&&(i.checked=l[0]),u&2&&a!==(a=l[1].label.withoutColor+"")&&He(s,a)},i:ge,o:ge,d(l){l&&N(e),c=!1,f()}}}function GO(t,e,n){let{isUndefined:i}=e,{texts:r}=e;function o(){i=this.checked,n(0,i)}return t.$$set=h=>{"isUndefined"in h&&n(0,i=h.isUndefined),"texts"in h&&n(1,r=h.texts)},[i,r,o]}class qO extends qe{constructor(e){super(),Ge(this,e,GO,$O,Ve,{isUndefined:0,texts:1})}}function KO(t){let e;return{c(){e=E("input"),S(e,"type","hidden"),e.value=t[2],S(e,"name",t[6])},m(n,i){j(n,e,i)},p(n,i){i[0]&4&&(e.value=n[2]),i[0]&64&&S(e,"name",n[6])},i:ge,o:ge,d(n){n&&N(e)}}}function JO(t){let e,n,i,r;function o(s){t[33](s)}var h=t[23]().input;function a(s,c){let f={isOpen:!0,hex:s[2],label:s[5],name:s[6]};return s[21]!==void 0&&(f.labelElement=s[21]),{props:f}}return h&&(e=un(h,a(t)),nt.push(()=>xt(e,"labelElement",o))),{c(){e&&de(e.$$.fragment),i=et()},m(s,c){e&&ue(e,s,c),j(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().input)){if(e){ke();const f=e;H(f.$$.fragment,1,0,()=>{fe(f,1)}),Oe()}h?(e=un(h,a(s)),nt.push(()=>xt(e,"labelElement",o)),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};c[0]&4&&(f.hex=s[2]),c[0]&32&&(f.label=s[5]),c[0]&64&&(f.name=s[6]),!n&&c[0]&2097152&&(n=!0,f.labelElement=s[21],Wt(()=>n=!1)),e.$set(f)}},i(s){r||(e&&R(e.$$.fragment,s),r=!0)},o(s){e&&H(e.$$.fragment,s),r=!1},d(s){s&&N(i),e&&fe(e,s)}}}function Wp(t){let e,n,i,r;function o(s){t[34](s)}var h=t[23]().nullabilityCheckbox;function a(s,c){let f={texts:s[24]()};return s[16]!==void 0&&(f.isUndefined=s[16]),{props:f}}return h&&(e=un(h,a(t)),nt.push(()=>xt(e,"isUndefined",o))),{c(){e&&de(e.$$.fragment),i=et()},m(s,c){e&&ue(e,s,c),j(s,i,c),r=!0},p(s,c){if(h!==(h=s[23]().nullabilityCheckbox)){if(e){ke();const f=e;H(f.$$.fragment,1,0,()=>{fe(f,1)}),Oe()}h?(e=un(h,a(s)),nt.push(()=>xt(e,"isUndefined",o)),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else if(h){const f={};!n&&c[0]&65536&&(n=!0,f.isUndefined=s[16],Wt(()=>n=!1)),e.$set(f)}},i(s){r||(e&&R(e.$$.fragment,s),r=!0)},o(s){e&&H(e.$$.fragment,s),r=!1},d(s){s&&N(i),e&&fe(e,s)}}}function Yp(t){var r;let e,n,i;return n=new Nl({props:{min:0,max:1,step:.01,value:((r=t[1])==null?void 0:r.a)??t[18].a,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.a}}),n.$on("input",t[27]("a")),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","a svelte-tsvobk"),mt(e,"--alphaless-color",(t[2]?t[2]:t[19]).substring(0,7))},m(o,h){j(o,e,h),ue(n,e,null),i=!0},p(o,h){var s;const a={};h[0]&262146&&(a.value=((s=o[1])==null?void 0:s.a)??o[18].a),h[0]&4096&&(a.direction=o[12]),h[0]&4096&&(a.reverse=o[12]==="vertical"),n.$set(a),h[0]&524292&&mt(e,"--alphaless-color",(o[2]?o[2]:o[19]).substring(0,7))},i(o){i||(R(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&N(e),fe(n)}}}function zp(t){let e,n,i;var r=t[23]().textInput;function o(h,a){return{props:{hex:h[2]??h[19],rgb:h[0]??h[17],hsv:h[1]??h[18],isAlpha:h[8],textInputModes:h[11],texts:h[24]()}}}return r&&(e=un(r,o(t)),e.$on("input",t[35])),{c(){e&&de(e.$$.fragment),n=et()},m(h,a){e&&ue(e,h,a),j(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().textInput)){if(e){ke();const s=e;H(s.$$.fragment,1,0,()=>{fe(s,1)}),Oe()}r?(e=un(r,o(h)),e.$on("input",h[35]),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&524292&&(s.hex=h[2]??h[19]),a[0]&131073&&(s.rgb=h[0]??h[17]),a[0]&262146&&(s.hsv=h[1]??h[18]),a[0]&256&&(s.isAlpha=h[8]),a[0]&2048&&(s.textInputModes=h[11]),e.$set(s)}},i(h){i||(e&&R(e.$$.fragment,h),i=!0)},o(h){e&&H(e.$$.fragment,h),i=!1},d(h){h&&N(n),e&&fe(e,h)}}}function ZO(t){let e,n,i;var r=t[23]().a11yNotice;function o(h,a){return{props:{components:h[23](),a11yColors:h[13],hex:h[2]||"#00000000",a11yTexts:h[15],a11yLevel:h[14]}}}return r&&(e=un(r,o(t))),{c(){e&&de(e.$$.fragment),n=et()},m(h,a){e&&ue(e,h,a),j(h,n,a),i=!0},p(h,a){if(r!==(r=h[23]().a11yNotice)){if(e){ke();const s=e;H(s.$$.fragment,1,0,()=>{fe(s,1)}),Oe()}r?(e=un(r,o(h)),de(e.$$.fragment),R(e.$$.fragment,1),ue(e,n.parentNode,n)):e=null}else if(r){const s={};a[0]&8192&&(s.a11yColors=h[13]),a[0]&4&&(s.hex=h[2]||"#00000000"),a[0]&32768&&(s.a11yTexts=h[15]),a[0]&16384&&(s.a11yLevel=h[14]),e.$set(s)}},i(h){i||(e&&R(e.$$.fragment,h),i=!0)},o(h){e&&H(e.$$.fragment,h),i=!1},d(h){h&&N(n),e&&fe(e,h)}}}function QO(t){var g,v,_,b;let e,n,i,r,o,h,a,s,c=t[23]().a11yNotice,f,l,u=t[7]&&Wp(t);n=new OO({props:{components:t[23](),h:((g=t[1])==null?void 0:g.h)??t[18].h,s:((v=t[1])==null?void 0:v.s)??t[18].s,v:((_=t[1])==null?void 0:_.v)??t[18].v,isDark:t[3]}}),n.$on("input",t[28](["s","v"])),o=new Nl({props:{min:0,max:360,step:1,value:((b=t[1])==null?void 0:b.h)??t[18].h,direction:t[12],reverse:t[12]==="vertical",ariaLabel:t[24]().label.h}}),o.$on("input",t[27]("h"));let d=t[8]&&Yp(t),p=t[10]&&zp(t),m=c&&ZO(t);return{c(){u&&u.c(),e=V(),de(n.$$.fragment),i=V(),r=E("div"),de(o.$$.fragment),h=V(),d&&d.c(),a=V(),p&&p.c(),s=V(),m&&m.c(),f=et(),S(r,"class","h svelte-tsvobk")},m(y,C){u&&u.m(y,C),j(y,e,C),ue(n,y,C),j(y,i,C),j(y,r,C),ue(o,r,null),j(y,h,C),d&&d.m(y,C),j(y,a,C),p&&p.m(y,C),j(y,s,C),m&&m.m(y,C),j(y,f,C),l=!0},p(y,C){var O,A,M,Y;y[7]?u?(u.p(y,C),C[0]&128&&R(u,1)):(u=Wp(y),u.c(),R(u,1),u.m(e.parentNode,e)):u&&(ke(),H(u,1,1,()=>{u=null}),Oe());const w={};C[0]&262146&&(w.h=((O=y[1])==null?void 0:O.h)??y[18].h),C[0]&262146&&(w.s=((A=y[1])==null?void 0:A.s)??y[18].s),C[0]&262146&&(w.v=((M=y[1])==null?void 0:M.v)??y[18].v),C[0]&8&&(w.isDark=y[3]),n.$set(w);const T={};C[0]&262146&&(T.value=((Y=y[1])==null?void 0:Y.h)??y[18].h),C[0]&4096&&(T.direction=y[12]),C[0]&4096&&(T.reverse=y[12]==="vertical"),o.$set(T),y[8]?d?(d.p(y,C),C[0]&256&&R(d,1)):(d=Yp(y),d.c(),R(d,1),d.m(a.parentNode,a)):d&&(ke(),H(d,1,1,()=>{d=null}),Oe()),y[10]?p?(p.p(y,C),C[0]&1024&&R(p,1)):(p=zp(y),p.c(),R(p,1),p.m(s.parentNode,s)):p&&(ke(),H(p,1,1,()=>{p=null}),Oe()),c&&m.p(y,C)},i(y){l||(R(u),R(n.$$.fragment,y),R(o.$$.fragment,y),R(d),R(p),R(m),l=!0)},o(y){H(u),H(n.$$.fragment,y),H(o.$$.fragment,y),H(d),H(p),H(m),l=!1},d(y){y&&(N(e),N(i),N(r),N(h),N(a),N(s),N(f)),u&&u.d(y),fe(n,y),fe(o),d&&d.d(y),p&&p.d(y),m&&m.d(y)}}}function eE(t){let e,n,i,r,o,h,a,s,c,f;const l=[JO,KO],u=[];function d(v,_){return v[9]?0:v[6]?1:-1}~(n=d(t))&&(i=u[n]=l[n](t));function p(v){t[36](v)}var m=t[23]().wrapper;function g(v,_){let b={isOpen:v[4],isDialog:v[9],$$slots:{default:[QO]},$$scope:{ctx:v}};return v[22]!==void 0&&(b.wrapper=v[22]),{props:b}}return m&&(o=un(m,g(t)),nt.push(()=>xt(o,"wrapper",p))),{c(){e=E("span"),i&&i.c(),r=V(),o&&de(o.$$.fragment),S(e,"class",a="color-picker "+t[12]+" svelte-tsvobk")},m(v,_){j(v,e,_),~n&&u[n].m(e,null),k(e,r),o&&ue(o,e,null),t[37](e),s=!0,c||(f=[Q(window,"mousedown",t[25]),Q(window,"keyup",t[26])],c=!0)},p(v,_){let b=n;if(n=d(v),n===b?~n&&u[n].p(v,_):(i&&(ke(),H(u[b],1,1,()=>{u[b]=null}),Oe()),~n?(i=u[n],i?i.p(v,_):(i=u[n]=l[n](v),i.c()),R(i,1),i.m(e,r)):i=null),m!==(m=v[23]().wrapper)){if(o){ke();const y=o;H(y.$$.fragment,1,0,()=>{fe(y,1)}),Oe()}m?(o=un(m,g(v)),nt.push(()=>xt(o,"wrapper",p)),de(o.$$.fragment),R(o.$$.fragment,1),ue(o,e,null)):o=null}else if(m){const y={};_[0]&16&&(y.isOpen=v[4]),_[0]&512&&(y.isDialog=v[9]),_[0]&1047951|_[1]&4096&&(y.$$scope={dirty:_,ctx:v}),!h&&_[0]&4194304&&(h=!0,y.wrapper=v[22],Wt(()=>h=!1)),o.$set(y)}(!s||_[0]&4096&&a!==(a="color-picker "+v[12]+" svelte-tsvobk"))&&S(e,"class",a)},i(v){s||(R(i),o&&R(o.$$.fragment,v),s=!0)},o(v){H(i),o&&H(o.$$.fragment,v),s=!1},d(v){v&&N(e),~n&&u[n].d(),o&&fe(o),t[37](null),c=!1,We(f)}}}function tE(t,e,n){const i=zt();let{components:r={}}=e,{label:o="Choose a color"}=e,{name:h=void 0}=e,{nullable:a=!1}=e,{rgb:s=a?void 0:{r:255,g:0,b:0,a:1}}=e,{hsv:c=a?void 0:{h:0,s:100,v:100,a:1}}=e,{hex:f=a?void 0:"#ff0000"}=e,{color:l=void 0}=e,{isDark:u=!1}=e,{isAlpha:d=!0}=e,{isDialog:p=!0}=e,{isOpen:m=!p}=e,{isTextInput:g=!0}=e,{textInputModes:v=["hex","rgb","hsv"]}=e,{sliderDirection:_="vertical"}=e,{disableCloseClickOutside:b=!1}=e,{a11yColors:y=[{bgHex:"#ffffff"}]}=e,{a11yLevel:C="AA"}=e,{texts:w=void 0}=e,{a11yTexts:T=void 0}=e,O={r:255,g:0,b:0,a:1},A={h:0,s:100,v:100,a:1},M="#ff0000",Y=!1,U=Y,K,q,B,W;const ee={pickerIndicator:DO,textInput:jO,input:WO,nullabilityCheckbox:qO,wrapper:HO};function ne(){return{...ee,...r}}function x(){return{label:{...uu.label,...w==null?void 0:w.label},color:{...uu.color,...w==null?void 0:w.color},changeTo:(w==null?void 0:w.changeTo)??uu.changeTo}}function P({target:$}){p&&(q.contains($)||q.isSameNode($)?n(4,m=!m):m&&!B.contains($)&&!b&&n(4,m=!1))}function L({key:$,target:ae}){if(p)$==="Enter"&&q.contains(ae)?(n(4,m=!m),setTimeout(()=>{W=XO(B)})):$==="Escape"&&m&&(n(4,m=!1),K.contains(ae)&&(q==null||q.focus(),W==null||W.destroy()));else return}function I(){if(Y&&!U){U=!0,n(1,c=n(0,s=n(2,f=void 0))),i("input",{color:l,hsv:c,rgb:s,hex:f});return}else if(U&&!Y){U=!1,n(1,c=A),n(0,s=O),n(2,f=M),i("input",{color:l,hsv:c,rgb:s,hex:f});return}if(!c&&!s&&!f){n(16,Y=!0),U=!0,i("input",{color:void 0,hsv:c,rgb:s,hex:f});return}c&&s&&c.h===A.h&&c.s===A.s&&c.v===A.v&&c.a===A.a&&s.r===O.r&&s.g===O.g&&s.b===O.b&&s.a===O.a&&f===M||(n(16,Y=!1),c&&c.a===void 0&&n(1,c.a=1,c),A.a===void 0&&n(18,A.a=1,A),s&&s.a===void 0&&n(0,s.a=1,s),O.a===void 0&&n(17,O.a=1,O),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),(f==null?void 0:f.substring(7))==="ff"&&n(2,f=f.substring(0,7)),c&&(c.h!==A.h||c.s!==A.s||c.v!==A.v||c.a!==A.a)?(n(29,l=On(c)),n(0,s=l.toRgb()),n(2,f=l.toHex())):s&&(s.r!==O.r||s.g!==O.g||s.b!==O.b||s.a!==O.a)?(n(29,l=On(s)),n(2,f=l.toHex()),n(1,c=l.toHsv())):f&&f!==M&&(n(29,l=On(f)),n(0,s=l.toRgb()),n(1,c=l.toHsv())),l&&n(3,u=l.isDark()),f&&(n(18,A=Object.assign({},c)),n(17,O=Object.assign({},s)),n(19,M=f),U=Y,i("input",{color:l,hsv:c,rgb:s,hex:f})))}function Z($){return ae=>{c||n(1,c={...A}),n(1,c[$]=ae.detail,c)}}function F($){return ae=>{c||n(1,c={...A}),$.forEach(pe=>{c&&n(1,c[pe]=ae.detail[pe],c)})}}function D($){q=$,n(21,q)}function X($){Y=$,n(16,Y)}const J=({detail:$})=>{$.hsv?n(1,c=$.hsv):$.rgb?n(0,s=$.rgb):$.hex&&n(2,f=$.hex)};function re($){B=$,n(22,B)}function te($){nt[$?"unshift":"push"](()=>{K=$,n(20,K)})}return t.$$set=$=>{"components"in $&&n(30,r=$.components),"label"in $&&n(5,o=$.label),"name"in $&&n(6,h=$.name),"nullable"in $&&n(7,a=$.nullable),"rgb"in $&&n(0,s=$.rgb),"hsv"in $&&n(1,c=$.hsv),"hex"in $&&n(2,f=$.hex),"color"in $&&n(29,l=$.color),"isDark"in $&&n(3,u=$.isDark),"isAlpha"in $&&n(8,d=$.isAlpha),"isDialog"in $&&n(9,p=$.isDialog),"isOpen"in $&&n(4,m=$.isOpen),"isTextInput"in $&&n(10,g=$.isTextInput),"textInputModes"in $&&n(11,v=$.textInputModes),"sliderDirection"in $&&n(12,_=$.sliderDirection),"disableCloseClickOutside"in $&&n(31,b=$.disableCloseClickOutside),"a11yColors"in $&&n(13,y=$.a11yColors),"a11yLevel"in $&&n(14,C=$.a11yLevel),"texts"in $&&n(32,w=$.texts),"a11yTexts"in $&&n(15,T=$.a11yTexts)},t.$$.update=()=>{t.$$.dirty[0]&7&&(c||s||f)&&I(),t.$$.dirty[0]&65536&&I()},[s,c,f,u,m,o,h,a,d,p,g,v,_,y,C,T,Y,O,A,M,K,q,B,ne,x,P,L,Z,F,l,r,b,w,D,X,J,re,te]}class Sh extends qe{constructor(e){super(),Ge(this,e,tE,eE,Ve,{components:30,label:5,name:6,nullable:7,rgb:0,hsv:1,hex:2,color:29,isDark:3,isAlpha:8,isDialog:9,isOpen:4,isTextInput:10,textInputModes:11,sliderDirection:12,disableCloseClickOutside:31,a11yColors:13,a11yLevel:14,texts:32,a11yTexts:15},null,[-1,-1])}}function nE(t){let e,n,i,r,o,h,a,s,c,f,l;function u(p){t[4](p)}let d={isAlpha:!1,label:""};return t[2]!==void 0&&(d.hex=t[2]),r=new Sh({props:d}),nt.push(()=>xt(r,"hex",u)),r.$on("input",t[5]),s=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),de(r.$$.fragment),h=V(),a=E("button"),de(s.$$.fragment),S(i,"class","grow flex justify-center color-picker-wrapper"),S(a,"type","button"),S(a,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(p,m){j(p,e,m),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),ue(s,a,null),c=!0,f||(l=Q(a,"click",t[6]),f=!0)},p(p,[m]){const g={};!o&&m&4&&(o=!0,g.hex=p[2],Wt(()=>o=!1)),r.$set(g)},i(p){c||(R(r.$$.fragment,p),R(s.$$.fragment,p),c=!0)},o(p){H(r.$$.fragment,p),H(s.$$.fragment,p),c=!1},d(p){p&&N(e),fe(r),fe(s),f=!1,l()}}}function iE(t){if(typeof t=="object"&&t!==null)return"#000000";const e=typeof t=="string"?t:String(t),i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e);if(i){const[,o,h,a]=i.map(Number),s=o.toString(16).padStart(2,"0"),c=h.toString(16).padStart(2,"0"),f=a.toString(16).padStart(2,"0");return`#${s}${c}${f}`}return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?e:"#000000"}function rE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e,o="#000000";o=iE(r.fill);const h=zt();Oi(()=>{n(0,i=null)});function a(f){o=f,n(2,o)}const s=()=>{r.set("fill",o),h("onChangeColor")},c=()=>n(0,i=null);return t.$$set=f=>{"selectProperty"in f&&n(0,i=f.selectProperty),"object"in f&&n(1,r=f.object)},[i,r,o,h,a,s,c]}class sE extends qe{constructor(e){super(),Ge(this,e,rE,nE,Ve,{selectProperty:0,object:1})}}function Hp(t,e,n){const i=t.slice();return i[7]=e[n],i}function Vp(t){let e,n,i,r,o,h,a,s;function c(){return t[5](t[7])}return{c(){e=E("li"),n=E("button"),i=E("img"),h=V(),Xe(i.src,r=t[7].thumbnail)||S(i,"src",r),S(i,"alt",o=t[7].fontName),S(i,"class","object-contain border rounded"),S(n,"type","button")},m(f,l){j(f,e,l),k(e,n),k(n,i),k(e,h),a||(s=Q(n,"click",c),a=!0)},p(f,l){t=f,l&4&&!Xe(i.src,r=t[7].thumbnail)&&S(i,"src",r),l&4&&o!==(o=t[7].fontName)&&S(i,"alt",o)},d(f){f&&N(e),a=!1,s()}}}function oE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p=Me(t[2]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Vp(Hp(t,p,g));return f=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("textarea"),o=V(),h=E("div"),a=E("ul");for(let g=0;g<m.length;g+=1)m[g].c();s=V(),c=E("button"),de(f.$$.fragment),S(r,"class","textarea"),S(i,"class","w-full flex justify-center"),S(a,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 h-52 overflow-y-auto"),S(c,"type","button"),S(c,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(g,v){j(g,e,v),k(e,n),k(n,i),k(i,r),Pe(r,t[0]),k(n,o),k(n,h),k(h,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(a,null);k(n,s),k(n,c),ue(f,c,null),l=!0,u||(d=[Q(r,"input",t[4]),Q(c,"click",t[6])],u=!0)},p(g,[v]){if(v&1&&Pe(r,g[0]),v&12){p=Me(g[2]);let _;for(_=0;_<p.length;_+=1){const b=Hp(g,p,_);m[_]?m[_].p(b,v):(m[_]=Vp(b),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i(g){l||(R(f.$$.fragment,g),l=!0)},o(g){H(f.$$.fragment,g),l=!1},d(g){g&&N(e),Dt(m,g),fe(f),u=!1,We(d)}}}function aE(t,e,n){let i;je(t,Yo,f=>n(2,i=f));let{selectProperty:r=null}=e,{text:o=""}=e;const h=zt();Oi(()=>{n(1,r=null)});function a(){o=this.value,n(0,o)}const s=f=>h("onChangeFontFamily",{fontFamily:f.fontFamily,localFamily:f.localFamily}),c=()=>n(1,r=null);return t.$$set=f=>{"selectProperty"in f&&n(1,r=f.selectProperty),"text"in f&&n(0,o=f.text)},t.$$.update=()=>{t.$$.dirty&1&&o&&h("onChangeText",{text:o})},[o,r,i,h,a,s,c]}let lE=class extends qe{constructor(e){super(),Ge(this,e,aE,oE,Ve,{selectProperty:1,text:0})}};function cE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O;return a=new Se({props:{icon:"mingcute:align-left-line",height:"20"}}),u=new Se({props:{icon:"mingcute:align-center-line",height:"20"}}),v=new Se({props:{icon:"iconoir:align-right",height:"20"}}),y=new Se({props:{icon:"ion:close"}}),w=yy(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),de(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),de(u.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),de(v.$$.fragment),_=V(),b=E("button"),de(y.$$.fragment),S(r,"id","align-left"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="left",Pe(r,r.__value),S(h,"for","align-left"),S(h,"class","radio-label"),S(c,"id","align-center"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="center",Pe(c,c.__value),S(l,"for","align-center"),S(l,"class","radio-label"),S(p,"id","align-right"),S(p,"class","hidden radio-input"),S(p,"type","radio"),p.__value="right",Pe(p,p.__value),S(g,"for","align-right"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),w.p(r,c,p)},m(A,M){j(A,e,M),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=p.__value===t[0],k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),C=!0,T||(O=[Q(r,"change",t[2]),Q(c,"change",t[4]),Q(p,"change",t[5]),Q(b,"click",t[6])],T=!0)},p(A,[M]){M&1&&(r.checked=r.__value===A[0]),M&1&&(c.checked=c.__value===A[0]),M&1&&(p.checked=p.__value===A[0])},i(A){C||(R(a.$$.fragment,A),R(u.$$.fragment,A),R(v.$$.fragment,A),R(y.$$.fragment,A),C=!0)},o(A){H(a.$$.fragment,A),H(u.$$.fragment,A),H(v.$$.fragment,A),H(y.$$.fragment,A),C=!1},d(A){A&&N(e),fe(a),fe(u),fe(v),fe(y),w.r(),T=!1,We(O)}}}function uE(t,e,n){let{selectProperty:i=null}=e,{align:r="left"}=e;const o=zt();Oi(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}function c(){r=this.__value,n(0,r)}const f=()=>n(1,i=null);return t.$$set=l=>{"selectProperty"in l&&n(1,i=l.selectProperty),"align"in l&&n(0,r=l.align)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeAlign",{align:r})},[r,i,a,h,s,c,f]}class fE extends qe{constructor(e){super(),Ge(this,e,uE,cE,Ve,{selectProperty:1,align:0})}}function hE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;return a=new Se({props:{icon:"ci:text",height:"20"}}),u=new Se({props:{icon:"clarity:italic-line",height:"20"}}),m=new Se({props:{icon:"ion:close"}}),v=yy(t[3][0]),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),de(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),de(u.$$.fragment),d=V(),p=E("button"),de(m.$$.fragment),S(r,"id","align-normal"),S(r,"class","hidden radio-input"),S(r,"type","radio"),r.__value="normal",Pe(r,r.__value),S(h,"for","align-normal"),S(h,"class","radio-label"),S(c,"id","align-italic"),S(c,"class","hidden radio-input"),S(c,"type","radio"),c.__value="italic",Pe(c,c.__value),S(l,"for","align-italic"),S(l,"class","radio-label"),S(i,"class","grow flex justify-center"),S(p,"type","button"),S(p,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]"),v.p(r,c)},m(y,C){j(y,e,C),k(e,n),k(n,i),k(i,r),r.checked=r.__value===t[0],k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=c.__value===t[0],k(i,f),k(i,l),ue(u,l,null),k(n,d),k(n,p),ue(m,p,null),g=!0,_||(b=[Q(r,"change",t[2]),Q(c,"change",t[4]),Q(p,"click",t[5])],_=!0)},p(y,[C]){C&1&&(r.checked=r.__value===y[0]),C&1&&(c.checked=c.__value===y[0])},i(y){g||(R(a.$$.fragment,y),R(u.$$.fragment,y),R(m.$$.fragment,y),g=!0)},o(y){H(a.$$.fragment,y),H(u.$$.fragment,y),H(m.$$.fragment,y),g=!1},d(y){y&&N(e),fe(a),fe(u),fe(m),v.r(),_=!1,We(b)}}}function dE(t,e,n){let{selectProperty:i=null}=e,{style:r="normal"}=e;console.log({style:r});const o=zt();Oi(()=>{n(1,i=null)});const h=[[]];function a(){r=this.__value,n(0,r)}function s(){r=this.__value,n(0,r)}const c=()=>n(1,i=null);return t.$$set=f=>{"selectProperty"in f&&n(1,i=f.selectProperty),"style"in f&&n(0,r=f.style)},t.$$.update=()=>{t.$$.dirty&1&&r&&o("onChangeStyle",{style:r})},[r,i,a,h,s,c]}class pE extends qe{constructor(e){super(),Ge(this,e,dE,hE,Ve,{selectProperty:1,style:0})}}function gE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T;return a=new Se({props:{icon:"radix-icons:underline",height:"20"}}),u=new Se({props:{icon:"radix-icons:overline",height:"20"}}),v=new Se({props:{icon:"radix-icons:strikethrough",height:"20"}}),y=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("input"),o=V(),h=E("label"),de(a.$$.fragment),s=V(),c=E("input"),f=V(),l=E("label"),de(u.$$.fragment),d=V(),p=E("input"),m=V(),g=E("label"),de(v.$$.fragment),_=V(),b=E("button"),de(y.$$.fragment),S(r,"id","decoration-underline"),S(r,"class","hidden radio-input"),S(r,"type","checkbox"),S(h,"for","decoration-underline"),S(h,"class","radio-label"),S(c,"id","decoration-overline"),S(c,"class","hidden radio-input"),S(c,"type","checkbox"),S(l,"for","decoration-overline"),S(l,"class","radio-label"),S(p,"id","decoration-through"),S(p,"class","hidden radio-input"),S(p,"type","checkbox"),S(g,"for","decoration-through"),S(g,"class","radio-label"),S(i,"class","grow flex justify-center"),S(b,"type","button"),S(b,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(O,A){j(O,e,A),k(e,n),k(n,i),k(i,r),r.checked=t[1].underline,k(i,o),k(i,h),ue(a,h,null),k(i,s),k(i,c),c.checked=t[1].overline,k(i,f),k(i,l),ue(u,l,null),k(i,d),k(i,p),p.checked=t[1].linethrough,k(i,m),k(i,g),ue(v,g,null),k(n,_),k(n,b),ue(y,b,null),C=!0,w||(T=[Q(r,"change",t[3]),Q(c,"change",t[4]),Q(p,"change",t[5]),Q(b,"click",t[6])],w=!0)},p(O,[A]){A&2&&(r.checked=O[1].underline),A&2&&(c.checked=O[1].overline),A&2&&(p.checked=O[1].linethrough)},i(O){C||(R(a.$$.fragment,O),R(u.$$.fragment,O),R(v.$$.fragment,O),R(y.$$.fragment,O),C=!0)},o(O){H(a.$$.fragment,O),H(u.$$.fragment,O),H(v.$$.fragment,O),H(y.$$.fragment,O),C=!1},d(O){O&&N(e),fe(a),fe(u),fe(v),fe(y),w=!1,We(T)}}}function mE(t,e,n){let{selectProperty:i=null}=e,{object:r=""}=e,o={underline:r.underline,overline:r.overline,linethrough:r.linethrough};const h=zt();Oi(()=>{n(0,i=null)});function a(){o.underline=this.checked,n(1,o)}function s(){o.overline=this.checked,n(1,o)}function c(){o.linethrough=this.checked,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeDecoration",{decoration:o})},[i,o,r,a,s,c,f]}class vE extends qe{constructor(e){super(),Ge(this,e,mE,gE,Ve,{selectProperty:0,object:2})}}function _E(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;function _(y){t[3](y)}let b={isAlpha:!1,label:""};return t[1].stroke!==void 0&&(b.hex=t[1].stroke),r=new Sh({props:b}),nt.push(()=>xt(r,"hex",_)),p=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div"),de(r.$$.fragment),h=V(),a=E("div"),s=E("input"),c=V(),f=E("div"),l=E("input"),u=V(),d=E("button"),de(p.$$.fragment),S(i,"class","grow flex justify-center"),S(s,"id","minmax-range"),S(s,"type","range"),S(s,"min","0"),S(s,"step","0.5"),S(s,"max","20"),S(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 svelte-a11kw5"),S(a,"class","grow w-full"),S(l,"type","text"),S(l,"class","input w-full"),S(d,"type","button"),S(d,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(y,C){j(y,e,C),k(e,n),k(n,i),ue(r,i,null),k(n,h),k(n,a),k(a,s),Pe(s,t[1].strokeWidth),k(n,c),k(n,f),k(f,l),Pe(l,t[1].strokeWidth),k(n,u),k(n,d),ue(p,d,null),m=!0,g||(v=[Q(s,"change",t[4]),Q(s,"input",t[4]),Q(l,"input",t[5]),Q(d,"click",t[6])],g=!0)},p(y,[C]){const w={};!o&&C&2&&(o=!0,w.hex=y[1].stroke,Wt(()=>o=!1)),r.$set(w),C&2&&Pe(s,y[1].strokeWidth),C&2&&l.value!==y[1].strokeWidth&&Pe(l,y[1].strokeWidth)},i(y){m||(R(r.$$.fragment,y),R(p.$$.fragment,y),m=!0)},o(y){H(r.$$.fragment,y),H(p.$$.fragment,y),m=!1},d(y){y&&N(e),fe(r),fe(p),g=!1,We(v)}}}function yE(t,e,n){let{selectProperty:i=null}=e,{object:r={}}=e,o={strokeWidth:r.strokeWidth?r.strokeWidth:0,stroke:r.stroke?r.stroke:"#000000"};const h=zt();Oi(()=>{n(0,i=null)});function a(l){t.$$.not_equal(o.stroke,l)&&(o.stroke=l,n(1,o))}function s(){o.strokeWidth=by(this.value),n(1,o)}function c(){o.strokeWidth=this.value,n(1,o)}const f=()=>n(0,i=null);return t.$$set=l=>{"selectProperty"in l&&n(0,i=l.selectProperty),"object"in l&&n(2,r=l.object)},t.$$.update=()=>{t.$$.dirty&2&&o&&h("onChangeStroke",{stroke:o})},[i,o,r,a,s,c,f]}class bE extends qe{constructor(e){super(),Ge(this,e,yE,_E,Ve,{selectProperty:0,object:2})}}function Xp(t,e,n){const i=t.slice();return i[6]=e[n],i[7]=e,i[8]=n,i}function $p(t){let e,n,i;function r(a){t[3](a,t[6])}function o(){return t[4](t[6])}let h={isAlpha:!1,label:""};return t[6].fill!==void 0&&(h.hex=t[6].fill),e=new Sh({props:h}),nt.push(()=>xt(e,"hex",r)),e.$on("input",o),{c(){de(e.$$.fragment)},m(a,s){ue(e,a,s),i=!0},p(a,s){t=a;const c={};!n&&s&2&&(n=!0,c.hex=t[6].fill,Wt(()=>n=!1)),e.$set(c)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){H(e.$$.fragment,a),i=!1},d(a){fe(e,a)}}}function wE(t){let e,n,i,r,o,h,a,s,c,f=Me(t[1]._objects),l=[];for(let d=0;d<f.length;d+=1)l[d]=$p(Xp(t,f,d));const u=d=>H(l[d],1,1,()=>{l[d]=null});return h=new Se({props:{icon:"ion:close"}}),{c(){e=E("div"),n=E("div"),i=E("div");for(let d=0;d<l.length;d+=1)l[d].c();r=V(),o=E("button"),de(h.$$.fragment),S(i,"class","grow flex justify-center w-full color-picker-wrapper"),S(o,"type","button"),S(o,"class","btn white-btn absolute -top-2 -right-2"),S(n,"class","bg-white border rounded-lg p-3 w-[93%] -ml-5 md:ml-0 flex flex-col justify-center items-center gap-3 relative"),S(e,"class","absolute w-full top-5 left-0 flex justify-center gap-2 z-[41]")},m(d,p){j(d,e,p),k(e,n),k(n,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);k(n,r),k(n,o),ue(h,o,null),a=!0,s||(c=Q(o,"click",t[5]),s=!0)},p(d,[p]){if(p&6){f=Me(d[1]._objects);let m;for(m=0;m<f.length;m+=1){const g=Xp(d,f,m);l[m]?(l[m].p(g,p),R(l[m],1)):(l[m]=$p(g),l[m].c(),R(l[m],1),l[m].m(i,null))}for(ke(),m=f.length;m<l.length;m+=1)u(m);Oe()}},i(d){if(!a){for(let p=0;p<f.length;p+=1)R(l[p]);R(h.$$.fragment,d),a=!0}},o(d){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)H(l[p]);H(h.$$.fragment,d),a=!1},d(d){d&&N(e),Dt(l,d),fe(h),s=!1,c()}}}function CE(t,e,n){let{selectProperty:i=null}=e,{object:r=null}=e;const o=zt();Oi(()=>{o("onChangeColorEnd"),n(0,i=null)});function h(c,f){t.$$.not_equal(f.fill,c)&&(f.fill=c,n(1,r))}const a=c=>{c.set("fill",c.fill),o("onChangeColors")},s=()=>n(0,i=null);return t.$$set=c=>{"selectProperty"in c&&n(0,i=c.selectProperty),"object"in c&&n(1,r=c.object)},[i,r,o,h,a,s]}class SE extends qe{constructor(e){super(),Ge(this,e,CE,wE,Ve,{selectProperty:0,object:1})}}function Gp(t,e,n){const i=t.slice();return i[16]=e[n],i}function qp(t){let e,n,i,r,o,h,a;function s(){return t[9](t[16])}return{c(){e=E("button"),n=E("img"),o=V(),Xe(n.src,i=t[16].file.url)||S(n,"src",i),S(n,"alt",r=t[16].name),S(n,"class","max-w-full"),S(e,"class","masonry-item flex flex-col justify-center")},m(c,f){j(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f&2&&!Xe(n.src,i=t[16].file.url)&&S(n,"src",i),f&2&&r!==(r=t[16].name)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function TE(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;h=new Se({props:{icon:"mingcute:left-line",height:"30"}});let _=Me(t[1]),b=[];for(let y=0;y<_.length;y+=1)b[y]=qp(Gp(t,_,y));return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="클립아트",r=V(),o=E("button"),de(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("input"),l=V(),u=E("button"),u.textContent="검색",d=V(),p=E("div");for(let y=0;y<b.length;y+=1)b[y].c();S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"type","search"),S(f,"class","border p-2 rounded join-left text-sm grow"),S(f,"placeholder","키워드 검색"),f.required=!0,S(u,"type","submit"),S(u,"class","btn btn-sm primary-btn join-right text-sm"),S(c,"class","flex w-full"),S(s,"class","w-full mt-3"),S(p,"class","grow mt-3 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(y,C){j(y,e,C),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),Pe(f,t[3].keyword),k(c,l),k(c,u),k(e,d),k(e,p);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(p,null);t[10](p),m=!0,g||(v=[Q(o,"click",t[6]),Q(f,"input",t[7]),Q(u,"click",t[8])],g=!0)},p(y,[C]){if(C&8&&f.value!==y[3].keyword&&Pe(f,y[3].keyword),C&3){_=Me(y[1]);let w;for(w=0;w<_.length;w+=1){const T=Gp(y,_,w);b[w]?b[w].p(T,C):(b[w]=qp(T),b[w].c(),b[w].m(p,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=_.length}},i(y){m||(R(h.$$.fragment,y),m=!0)},o(y){H(h.$$.fragment,y),m=!1},d(y){y&&N(e),fe(h),Dt(b,y),t[10](null),g=!1,We(v)}}}function kE(t,e,n){let i,r;je(t,co,_=>n(13,i=_)),je(t,Qt,_=>n(4,r=_));let{handleAddClipArt:o}=e;zt();let h=[],a,s=!1,c=!0,f={perPage:24,current:0,keyword:"",categories:[]};async function l(_=!1){_&&(n(3,f.current=0,f),n(1,h=[])),s=!0;const b=await HT(i.id,f);n(1,h=[...h,...b.data]),c=b.data.length===f.perPage,s=!1}function u(){const _=a.scrollHeight,b=a.scrollTop,y=a.clientHeight;b+y>=_-100&&!s&&c&&(n(3,f.current++,f),l())}ki(()=>{l(),a.addEventListener("scroll",u)});const d=()=>ye(Qt,r=null,r);function p(){f.keyword=this.value,n(3,f)}const m=()=>l(!0),g=_=>o(_);function v(_){nt[_?"unshift":"push"](()=>{a=_,n(2,a)})}return t.$$set=_=>{"handleAddClipArt"in _&&n(0,o=_.handleAddClipArt)},[o,h,a,f,r,l,d,p,m,g,v]}class OE extends qe{constructor(e){super(),Ge(this,e,kE,TE,Ve,{handleAddClipArt:0})}}function EE(t){let e;return{c(){e=E("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function xE(t){let e;return{c(){e=E("p"),e.textContent="여기에 이미지를 드레그 하시거나 버튼을 클릭하여 이미지를 업로드해주세요.",S(e,"class","p-5")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function DE(t){let e,n,i,r,o;function h(c,f){return c[0]?xE:EE}let a=h(t),s=a(t);return{c(){e=E("div"),s.c(),n=V(),i=E("input"),S(i,"type","file"),i.multiple=!0,S(e,"class","dropzone svelte-1xosmac"),S(e,"role","dropzone"),yi(e,"active",t[0])},m(c,f){j(c,e,f),s.m(e,null),k(e,n),k(e,i),r||(o=[Q(i,"change",t[4]),Q(e,"dragover",t[1]),Q(e,"dragleave",t[2]),Q(e,"drop",t[3])],r=!0)},p(c,[f]){a!==(a=h(c))&&(s.d(1),s=a(c),s&&(s.c(),s.m(e,n))),f&1&&yi(e,"active",c[0])},i:ge,o:ge,d(c){c&&N(e),s.d(),r=!1,We(o)}}}function AE(t,e,n){const i=zt();let r=!1;function o(c){c.preventDefault(),n(0,r=!0)}function h(){n(0,r=!1)}function a(c){c.preventDefault(),n(0,r=!1);const f=c.dataTransfer.files;i("drop",f)}function s(c){const f=c.target.files;i("drop",f)}return[r,o,h,a,s]}class PE extends qe{constructor(e){super(),Ge(this,e,AE,DE,Ve,{})}}/*!
* Cropper.js v1.6.1
* https://fengyuanchen.github.io/cropperjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:44:19.860Z
*/function Kp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kp(Object(n),!0).forEach(function(i){RE(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function ME(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jp(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,yb(i.key),i)}}function IE(t,e,n){return e&&Jp(t.prototype,e),n&&Jp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RE(t,e,n){return e=yb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _b(t){return FE(t)||LE(t)||NE(t)||jE()}function FE(t){if(Array.isArray(t))return hf(t)}function LE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NE(t,e){if(t){if(typeof t=="string")return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}}function hf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function jE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BE(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yb(t){var e=BE(t,"string");return typeof e=="symbol"?e:String(e)}var lc=typeof window<"u"&&typeof window.document<"u",Ci=lc?window:{},Th=lc&&Ci.document.documentElement?"ontouchstart"in Ci.document.documentElement:!1,kh=lc?"PointerEvent"in Ci:!1,wt="cropper",Oh="all",bb="crop",wb="move",Cb="zoom",br="e",wr="w",ls="s",Ki="n",To="ne",ko="nw",Oo="se",Eo="sw",df="".concat(wt,"-crop"),Zp="".concat(wt,"-disabled"),wn="".concat(wt,"-hidden"),Qp="".concat(wt,"-hide"),UE="".concat(wt,"-invisible"),jl="".concat(wt,"-modal"),pf="".concat(wt,"-move"),ta="".concat(wt,"Action"),Ha="".concat(wt,"Preview"),Eh="crop",Sb="move",Tb="none",gf="crop",mf="cropend",vf="cropmove",_f="cropstart",eg="dblclick",WE=Th?"touchstart":"mousedown",YE=Th?"touchmove":"mousemove",zE=Th?"touchend touchcancel":"mouseup",tg=kh?"pointerdown":WE,ng=kh?"pointermove":YE,ig=kh?"pointerup pointercancel":zE,rg="ready",sg="resize",og="wheel",yf="zoom",ag="image/jpeg",HE=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,VE=/^data:/,XE=/^data:image\/jpeg;base64,/,$E=/^img|canvas$/i,kb=200,Ob=100,lg={viewMode:0,dragMode:Eh,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:kb,minContainerHeight:Ob,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},GE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',qE=Number.isNaN||Ci.isNaN;function Ze(t){return typeof t=="number"&&!qE(t)}var cg=function(e){return e>0&&e<1/0};function fu(t){return typeof t>"u"}function $r(t){return ff(t)==="object"&&t!==null}var KE=Object.prototype.hasOwnProperty;function Ts(t){if(!$r(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&KE.call(n,"isPrototypeOf")}catch{return!1}}function yn(t){return typeof t=="function"}var JE=Array.prototype.slice;function Eb(t){return Array.from?Array.from(t):JE.call(t)}function Bt(t,e){return t&&yn(e)&&(Array.isArray(t)||Ze(t.length)?Eb(t).forEach(function(n,i){e.call(t,n,i,t)}):$r(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var St=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return $r(e)&&i.length>0&&i.forEach(function(o){$r(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},ZE=/\.\d*(?:0|9){12}\d*$/;function Fs(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ZE.test(t)?Math.round(t*e)/e:t}var QE=/^width|height|left|top|marginLeft|marginTop$/;function or(t,e){var n=t.style;Bt(e,function(i,r){QE.test(r)&&Ze(i)&&(i="".concat(i,"px")),n[r]=i})}function ex(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Jt(t,e){if(e){if(Ze(t.length)){Bt(t,function(i){Jt(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function gi(t,e){if(e){if(Ze(t.length)){Bt(t,function(n){gi(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function ks(t,e,n){if(e){if(Ze(t.length)){Bt(t,function(i){ks(i,e,n)});return}n?Jt(t,e):gi(t,e)}}var tx=/([a-z\d])([A-Z])/g;function xh(t){return t.replace(tx,"$1-$2").toLowerCase()}function bf(t,e){return $r(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(xh(e)))}function na(t,e,n){$r(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(xh(e)),n)}function nx(t,e){if($r(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(xh(e)))}var xb=/\s\s*/,Db=function(){var t=!1;if(lc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});Ci.addEventListener("test",n,i),Ci.removeEventListener("test",n,i)}return t}();function $n(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(xb).forEach(function(o){if(!Db){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Nn(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(xb).forEach(function(o){if(i.once&&!Db){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Ls(t,e,n){var i;return yn(Event)&&yn(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(i)}function Ab(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var hu=Ci.location,ix=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ug(t){var e=t.match(ix);return e!==null&&(e[1]!==hu.protocol||e[2]!==hu.hostname||e[3]!==hu.port)}function fg(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Xo(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Ze(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Ze(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Ze(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Ze(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Ze(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function rx(t){var e=vb({},t),n=0;return Bt(t,function(i,r){delete e[r],Bt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;Math.abs(u)>Math.abs(n)&&(n=u)})}),n}function Va(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:vb({startX:n,startY:i},r)}function sx(t){var e=0,n=0,i=0;return Bt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}function ar(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=cg(i),h=cg(n);if(o&&h){var a=n*e;r==="contain"&&a>i||r==="cover"&&a<i?n=i/e:i=n*e}else o?n=i/e:h&&(i=n*e);return{width:i,height:n}}function ox(t){var e=t.width,n=t.height,i=t.degree;if(i=Math.abs(i)%180,i===90)return{width:n,height:e};var r=i%90*Math.PI/180,o=Math.sin(r),h=Math.cos(r),a=e*h+n*o,s=e*o+n*h;return i>90?{width:s,height:a}:{width:a,height:s}}function ax(t,e,n,i){var r=e.aspectRatio,o=e.naturalWidth,h=e.naturalHeight,a=e.rotate,s=a===void 0?0:a,c=e.scaleX,f=c===void 0?1:c,l=e.scaleY,u=l===void 0?1:l,d=n.aspectRatio,p=n.naturalWidth,m=n.naturalHeight,g=i.fillColor,v=g===void 0?"transparent":g,_=i.imageSmoothingEnabled,b=_===void 0?!0:_,y=i.imageSmoothingQuality,C=y===void 0?"low":y,w=i.maxWidth,T=w===void 0?1/0:w,O=i.maxHeight,A=O===void 0?1/0:O,M=i.minWidth,Y=M===void 0?0:M,U=i.minHeight,K=U===void 0?0:U,q=document.createElement("canvas"),B=q.getContext("2d"),W=ar({aspectRatio:d,width:T,height:A}),ee=ar({aspectRatio:d,width:Y,height:K},"cover"),ne=Math.min(W.width,Math.max(ee.width,p)),x=Math.min(W.height,Math.max(ee.height,m)),P=ar({aspectRatio:r,width:T,height:A}),L=ar({aspectRatio:r,width:Y,height:K},"cover"),I=Math.min(P.width,Math.max(L.width,o)),Z=Math.min(P.height,Math.max(L.height,h)),F=[-I/2,-Z/2,I,Z];return q.width=Fs(ne),q.height=Fs(x),B.fillStyle=v,B.fillRect(0,0,ne,x),B.save(),B.translate(ne/2,x/2),B.rotate(s*Math.PI/180),B.scale(f,u),B.imageSmoothingEnabled=b,B.imageSmoothingQuality=C,B.drawImage.apply(B,[t].concat(_b(F.map(function(D){return Math.floor(Fs(D))})))),B.restore(),q}var Pb=String.fromCharCode;function lx(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=Pb(t.getUint8(r));return i}var cx=/^data:.*,/;function ux(t){var e=t.replace(cx,""),n=atob(e),i=new ArrayBuffer(n.length),r=new Uint8Array(i);return Bt(r,function(o,h){r[h]=n.charCodeAt(h)}),i}function fx(t,e){for(var n=[],i=8192,r=new Uint8Array(t);r.length>0;)n.push(Pb.apply(null,Eb(r.subarray(0,i)))),r=r.subarray(i);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function hx(t){var e=new DataView(t),n;try{var i,r,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,a=2;a+1<h;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){r=a;break}a+=1}if(r){var s=r+4,c=r+10;if(lx(e,s,4)==="Exif"){var f=e.getUint16(c);if(i=f===18761,(i||f===19789)&&e.getUint16(c+2,i)===42){var l=e.getUint32(c+4,i);l>=8&&(o=c+l)}}}if(o){var u=e.getUint16(o,i),d,p;for(p=0;p<u;p+=1)if(d=o+p*12+2,e.getUint16(d,i)===274){d+=8,n=e.getUint16(d,i),e.setUint16(d,1,i);break}}}catch{n=1}return n}function dx(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:i}}var px={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,i=this.container,r=this.cropper,o=Number(n.minContainerWidth),h=Number(n.minContainerHeight);Jt(r,wn),gi(e,wn);var a={width:Math.max(i.offsetWidth,o>=0?o:kb),height:Math.max(i.offsetHeight,h>=0?h:Ob)};this.containerData=a,or(r,{width:a.width,height:a.height}),Jt(e,wn),gi(r,wn)},initCanvas:function(){var e=this.containerData,n=this.imageData,i=this.options.viewMode,r=Math.abs(n.rotate)%180===90,o=r?n.naturalHeight:n.naturalWidth,h=r?n.naturalWidth:n.naturalHeight,a=o/h,s=e.width,c=e.height;e.height*a>e.width?i===3?s=e.height*a:c=e.width/a:i===3?c=e.width/a:s=e.height*a;var f={aspectRatio:a,naturalWidth:o,naturalHeight:h,width:s,height:c};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=St({},f)},limitCanvas:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=i.viewMode,s=o.aspectRatio,c=this.cropped&&h;if(e){var f=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;a>1?(f=Math.max(f,r.width),l=Math.max(l,r.height),a===3&&(l*s>f?f=l*s:l=f/s)):a>0&&(f?f=Math.max(f,c?h.width:0):l?l=Math.max(l,c?h.height:0):c&&(f=h.width,l=h.height,l*s>f?f=l*s:l=f/s));var u=ar({aspectRatio:s,width:f,height:l});f=u.width,l=u.height,o.minWidth=f,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(n)if(a>(c?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),c&&this.limited&&(o.minLeft=Math.min(h.left,h.left+(h.width-o.width)),o.minTop=Math.min(h.top,h.top+(h.height-o.height)),o.maxLeft=h.left,o.maxTop=h.top,a===2&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,n){var i=this.canvasData,r=this.imageData;if(n){var o=ox({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),h=o.width,a=o.height,s=i.width*(h/i.naturalWidth),c=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(c-i.height)/2,i.width=s,i.height=c,i.aspectRatio=h/a,i.naturalWidth=h,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,or(this.canvas,St({width:i.width,height:i.height},Xo({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,i=this.imageData,r=i.naturalWidth*(n.width/n.naturalWidth),o=i.naturalHeight*(n.height/n.naturalHeight);St(i,{width:r,height:o,left:(n.width-r)/2,top:(n.height-o)/2}),or(this.image,St({width:i.width,height:i.height},Xo(St({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:n.width,height:n.height};i&&(n.height*i>n.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=n.left+(n.width-o.width)/2,o.top=n.top+(n.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=St({},o)},limitCropBox:function(e,n){var i=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(e){var c=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,l=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,u=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;c=Math.min(c,r.width),f=Math.min(f,r.height),s&&(c&&f?f*s>c?f=c/s:c=f*s:c?f=c/s:f&&(c=f*s),u*s>l?u=l/s:l=u*s),h.minWidth=Math.min(c,l),h.minHeight=Math.min(f,u),h.maxWidth=l,h.maxHeight=u}n&&(a?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(r.width,o.left+o.width)-h.width,h.maxTop=Math.min(r.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=r.width-h.width,h.maxTop=r.height-h.height))},renderCropBox:function(){var e=this.options,n=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&na(this.face,ta,i.width>=n.width&&i.height>=n.height?wb:Oh),or(this.cropBox,St({width:i.width,height:i.height},Xo({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ls(this.element,gf,this.getData())}},gx={initPreview:function(){var e=this.element,n=this.crossOrigin,i=this.options.preview,r=n?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",h=document.createElement("img");if(n&&(h.crossOrigin=n),h.src=r,h.alt=o,this.viewBox.appendChild(h),this.viewBoxImage=h,!!i){var a=i;typeof i=="string"?a=e.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,Bt(a,function(s){var c=document.createElement("img");na(s,Ha,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),n&&(c.crossOrigin=n),c.src=r,c.alt=o,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(c)})}},resetPreview:function(){Bt(this.previews,function(e){var n=bf(e,Ha);or(e,{width:n.width,height:n.height}),e.innerHTML=n.html,nx(e,Ha)})},preview:function(){var e=this.imageData,n=this.canvasData,i=this.cropBoxData,r=i.width,o=i.height,h=e.width,a=e.height,s=i.left-n.left-e.left,c=i.top-n.top-e.top;!this.cropped||this.disabled||(or(this.viewBoxImage,St({width:h,height:a},Xo(St({translateX:-s,translateY:-c},e)))),Bt(this.previews,function(f){var l=bf(f,Ha),u=l.width,d=l.height,p=u,m=d,g=1;r&&(g=u/r,m=o*g),o&&m>d&&(g=d/o,p=r*g,m=d),or(f,{width:p,height:m}),or(f.getElementsByTagName("img")[0],St({width:h*g,height:a*g},Xo(St({translateX:-s*g,translateY:-c*g},e))))}))}},mx={bind:function(){var e=this.element,n=this.options,i=this.cropper;yn(n.cropstart)&&Nn(e,_f,n.cropstart),yn(n.cropmove)&&Nn(e,vf,n.cropmove),yn(n.cropend)&&Nn(e,mf,n.cropend),yn(n.crop)&&Nn(e,gf,n.crop),yn(n.zoom)&&Nn(e,yf,n.zoom),Nn(i,tg,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Nn(i,og,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Nn(i,eg,this.onDblclick=this.dblclick.bind(this)),Nn(e.ownerDocument,ng,this.onCropMove=this.cropMove.bind(this)),Nn(e.ownerDocument,ig,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Nn(window,sg,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,i=this.cropper;yn(n.cropstart)&&$n(e,_f,n.cropstart),yn(n.cropmove)&&$n(e,vf,n.cropmove),yn(n.cropend)&&$n(e,mf,n.cropend),yn(n.crop)&&$n(e,gf,n.crop),yn(n.zoom)&&$n(e,yf,n.zoom),$n(i,tg,this.onCropStart),n.zoomable&&n.zoomOnWheel&&$n(i,og,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&$n(i,eg,this.onDblclick),$n(e.ownerDocument,ng,this.onCropMove),$n(e.ownerDocument,ig,this.onCropEnd),n.responsive&&$n(window,sg,this.onResize)}},vx={resize:function(){if(!this.disabled){var e=this.options,n=this.container,i=this.containerData,r=n.offsetWidth/i.width,o=n.offsetHeight/i.height,h=Math.abs(r-1)>Math.abs(o-1)?r:o;if(h!==1){var a,s;e.restore&&(a=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Bt(a,function(c,f){a[f]=c*h})),this.setCropBoxData(Bt(s,function(c,f){s[f]=c*h})))}}},dblclick:function(){this.disabled||this.options.dragMode===Tb||this.setDragMode(ex(this.dragBox,df)?Sb:Eh)},wheel:function(e){var n=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,e)))},cropStart:function(e){var n=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Ze(n)&&n!==1||Ze(i)&&i!==0||e.ctrlKey))){var r=this.options,o=this.pointers,h;e.changedTouches?Bt(e.changedTouches,function(a){o[a.identifier]=Va(a)}):o[e.pointerId||0]=Va(e),Object.keys(o).length>1&&r.zoomable&&r.zoomOnTouch?h=Cb:h=bf(e.target,ta),HE.test(h)&&Ls(this.element,_f,{originalEvent:e,action:h})!==!1&&(e.preventDefault(),this.action=h,this.cropping=!1,h===bb&&(this.cropping=!0,Jt(this.dragBox,jl)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var i=this.pointers;e.preventDefault(),Ls(this.element,vf,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Bt(e.changedTouches,function(r){St(i[r.identifier]||{},Va(r,!0))}):St(i[e.pointerId||0]||{},Va(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,i=this.pointers;e.changedTouches?Bt(e.changedTouches,function(r){delete i[r.identifier]}):delete i[e.pointerId||0],n&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,ks(this.dragBox,jl,this.cropped&&this.options.modal)),Ls(this.element,mf,{originalEvent:e,action:n}))}}},_x={change:function(e){var n=this.options,i=this.canvasData,r=this.containerData,o=this.cropBoxData,h=this.pointers,a=this.action,s=n.aspectRatio,c=o.left,f=o.top,l=o.width,u=o.height,d=c+l,p=f+u,m=0,g=0,v=r.width,_=r.height,b=!0,y;!s&&e.shiftKey&&(s=l&&u?l/u:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(r.width,i.width,i.left+i.width),_=g+Math.min(r.height,i.height,i.top+i.height));var C=h[Object.keys(h)[0]],w={x:C.endX-C.startX,y:C.endY-C.startY},T=function(A){switch(A){case br:d+w.x>v&&(w.x=v-d);break;case wr:c+w.x<m&&(w.x=m-c);break;case Ki:f+w.y<g&&(w.y=g-f);break;case ls:p+w.y>_&&(w.y=_-p);break}};switch(a){case Oh:c+=w.x,f+=w.y;break;case br:if(w.x>=0&&(d>=v||s&&(f<=g||p>=_))){b=!1;break}T(br),l+=w.x,l<0&&(a=wr,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case Ki:if(w.y<=0&&(f<=g||s&&(c<=m||d>=v))){b=!1;break}T(Ki),u-=w.y,f+=w.y,u<0&&(a=ls,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case wr:if(w.x<=0&&(c<=m||s&&(f<=g||p>=_))){b=!1;break}T(wr),l-=w.x,c+=w.x,l<0&&(a=br,l=-l,c-=l),s&&(u=l/s,f+=(o.height-u)/2);break;case ls:if(w.y>=0&&(p>=_||s&&(c<=m||d>=v))){b=!1;break}T(ls),u+=w.y,u<0&&(a=Ki,u=-u,f-=u),s&&(l=u*s,c+=(o.width-l)/2);break;case To:if(s){if(w.y<=0&&(f<=g||d>=v)){b=!1;break}T(Ki),u-=w.y,f+=w.y,l=u*s}else T(Ki),T(br),w.x>=0?d<v?l+=w.x:w.y<=0&&f<=g&&(b=!1):l+=w.x,w.y<=0?f>g&&(u-=w.y,f+=w.y):(u-=w.y,f+=w.y);l<0&&u<0?(a=Eo,u=-u,l=-l,f-=u,c-=l):l<0?(a=ko,l=-l,c-=l):u<0&&(a=Oo,u=-u,f-=u);break;case ko:if(s){if(w.y<=0&&(f<=g||c<=m)){b=!1;break}T(Ki),u-=w.y,f+=w.y,l=u*s,c+=o.width-l}else T(Ki),T(wr),w.x<=0?c>m?(l-=w.x,c+=w.x):w.y<=0&&f<=g&&(b=!1):(l-=w.x,c+=w.x),w.y<=0?f>g&&(u-=w.y,f+=w.y):(u-=w.y,f+=w.y);l<0&&u<0?(a=Oo,u=-u,l=-l,f-=u,c-=l):l<0?(a=To,l=-l,c-=l):u<0&&(a=Eo,u=-u,f-=u);break;case Eo:if(s){if(w.x<=0&&(c<=m||p>=_)){b=!1;break}T(wr),l-=w.x,c+=w.x,u=l/s}else T(ls),T(wr),w.x<=0?c>m?(l-=w.x,c+=w.x):w.y>=0&&p>=_&&(b=!1):(l-=w.x,c+=w.x),w.y>=0?p<_&&(u+=w.y):u+=w.y;l<0&&u<0?(a=To,u=-u,l=-l,f-=u,c-=l):l<0?(a=Oo,l=-l,c-=l):u<0&&(a=ko,u=-u,f-=u);break;case Oo:if(s){if(w.x>=0&&(d>=v||p>=_)){b=!1;break}T(br),l+=w.x,u=l/s}else T(ls),T(br),w.x>=0?d<v?l+=w.x:w.y>=0&&p>=_&&(b=!1):l+=w.x,w.y>=0?p<_&&(u+=w.y):u+=w.y;l<0&&u<0?(a=ko,u=-u,l=-l,f-=u,c-=l):l<0?(a=Eo,l=-l,c-=l):u<0&&(a=To,u=-u,f-=u);break;case wb:this.move(w.x,w.y),b=!1;break;case Cb:this.zoom(rx(h),e),b=!1;break;case bb:if(!w.x||!w.y){b=!1;break}y=Ab(this.cropper),c=C.startX-y.left,f=C.startY-y.top,l=o.minWidth,u=o.minHeight,w.x>0?a=w.y>0?Oo:To:w.x<0&&(c-=l,a=w.y>0?Eo:ko),w.y<0&&(f-=u),this.cropped||(gi(this.cropBox,wn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(o.width=l,o.height=u,o.left=c,o.top=f,this.action=a,this.renderCropBox()),Bt(h,function(O){O.startX=O.endX,O.startY=O.endY})}},yx={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Jt(this.dragBox,jl),gi(this.cropBox,wn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=St({},this.initialImageData),this.canvasData=St({},this.initialCanvasData),this.cropBoxData=St({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(St(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),gi(this.dragBox,jl),Jt(this.cropBox,wn)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Bt(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,gi(this.cropper,Zp)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Jt(this.cropper,Zp)),this},destroy:function(){var e=this.element;return e[wt]?(e[wt]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=i.left,o=i.top;return this.moveTo(fu(e)?e:r+Number(e),fu(n)?n:o+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Ze(e)&&(i.left=e,r=!0),Ze(n)&&(i.top=n,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,n){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,n)},zoomTo:function(e,n,i){var r=this.options,o=this.canvasData,h=o.width,a=o.height,s=o.naturalWidth,c=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var f=s*e,l=c*e;if(Ls(this.element,yf,{ratio:e,oldRatio:h/s,originalEvent:i})===!1)return this;if(i){var u=this.pointers,d=Ab(this.cropper),p=u&&Object.keys(u).length?sx(u):{pageX:i.pageX,pageY:i.pageY};o.left-=(f-h)*((p.pageX-d.left-o.left)/h),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else Ts(n)&&Ze(n.x)&&Ze(n.y)?(o.left-=(f-h)*((n.x-o.left)/h),o.top-=(l-a)*((n.y-o.top)/a)):(o.left-=(f-h)/2,o.top-=(l-a)/2);o.width=f,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Ze(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Ze(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Ze(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,r=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Ze(e)&&(i.scaleX=e,r=!0),Ze(n)&&(i.scaleY=n,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,i=this.imageData,r=this.canvasData,o=this.cropBoxData,h;if(this.ready&&this.cropped){h={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height};var a=i.width/i.naturalWidth;if(Bt(h,function(f,l){h[l]=f/a}),e){var s=Math.round(h.y+h.height),c=Math.round(h.x+h.width);h.x=Math.round(h.x),h.y=Math.round(h.y),h.width=c-h.x,h.height=s-h.y}}else h={x:0,y:0,width:0,height:0};return n.rotatable&&(h.rotate=i.rotate||0),n.scalable&&(h.scaleX=i.scaleX||1,h.scaleY=i.scaleY||1),h},setData:function(e){var n=this.options,i=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&Ts(e)){var h=!1;n.rotatable&&Ze(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,h=!0),n.scalable&&(Ze(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,h=!0),Ze(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,h=!0)),h&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;Ze(e.x)&&(o.left=e.x*a+r.left),Ze(e.y)&&(o.top=e.y*a+r.top),Ze(e.width)&&(o.width=e.width*a),Ze(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?St({},this.containerData):{}},getImageData:function(){return this.sized?St({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Bt(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=e[i]}),n},setCanvasData:function(e){var n=this.canvasData,i=n.aspectRatio;return this.ready&&!this.disabled&&Ts(e)&&(Ze(e.left)&&(n.left=e.left),Ze(e.top)&&(n.top=e.top),Ze(e.width)?(n.width=e.width,n.height=e.width/i):Ze(e.height)&&(n.height=e.height,n.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,i=this.options.aspectRatio,r,o;return this.ready&&this.cropped&&!this.disabled&&Ts(e)&&(Ze(e.left)&&(n.left=e.left),Ze(e.top)&&(n.top=e.top),Ze(e.width)&&e.width!==n.width&&(r=!0,n.width=e.width),Ze(e.height)&&e.height!==n.height&&(o=!0,n.height=e.height),i&&(r?n.height=n.width/i:o&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,i=ax(this.image,this.imageData,n,e);if(!this.cropped)return i;var r=this.getData(e.rounded),o=r.x,h=r.y,a=r.width,s=r.height,c=i.width/Math.floor(n.naturalWidth);c!==1&&(o*=c,h*=c,a*=c,s*=c);var f=a/s,l=ar({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),u=ar({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),d=ar({aspectRatio:f,width:e.width||(c!==1?i.width:a),height:e.height||(c!==1?i.height:s)}),p=d.width,m=d.height;p=Math.min(l.width,Math.max(u.width,p)),m=Math.min(l.height,Math.max(u.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Fs(p),g.height=Fs(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,p,m);var _=e.imageSmoothingEnabled,b=_===void 0?!0:_,y=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var C=i.width,w=i.height,T=o,O=h,A,M,Y,U,K,q;T<=-a||T>C?(T=0,A=0,Y=0,K=0):T<=0?(Y=-T,T=0,A=Math.min(C,a+T),K=A):T<=C&&(Y=0,A=Math.min(a,C-T),K=A),A<=0||O<=-s||O>w?(O=0,M=0,U=0,q=0):O<=0?(U=-O,O=0,M=Math.min(w,s+O),q=M):O<=w&&(U=0,M=Math.min(s,w-O),q=M);var B=[T,O,A,M];if(K>0&&q>0){var W=p/a;B.push(Y*W,U*W,K*W,q*W)}return v.drawImage.apply(v,[i].concat(_b(B.map(function(ee){return Math.floor(Fs(ee))})))),g},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!fu(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===Eh,h=n.movable&&e===Sb;e=o||h?e:Tb,n.dragMode=e,na(i,ta,e),ks(i,df,o),ks(i,pf,h),n.cropBoxMovable||(na(r,ta,e),ks(r,df,o),ks(r,pf,h))}return this}},bx=Ci.Cropper,Mb=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ME(this,t),!e||!$E.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=St({},lg,Ts(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return IE(t,[{key:"init",value:function(){var n=this.element,i=n.tagName.toLowerCase(),r;if(!n[wt]){if(n[wt]=this,i==="img"){if(this.isImg=!0,r=n.getAttribute("src")||"",this.originalUrl=r,!r)return;r=n.src}else i==="canvas"&&window.HTMLCanvasElement&&(r=n.toDataURL());this.load(r)}}},{key:"load",value:function(n){var i=this;if(n){this.url=n,this.imageData={};var r=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(VE.test(n)){XE.test(n)?this.read(ux(n)):this.clone();return}var h=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=a,h.onerror=a,h.ontimeout=a,h.onprogress=function(){h.getResponseHeader("content-type")!==ag&&h.abort()},h.onload=function(){i.read(h.response)},h.onloadend=function(){i.reloading=!1,i.xhr=null},o.checkCrossOrigin&&ug(n)&&r.crossOrigin&&(n=fg(n)),h.open("GET",n,!0),h.responseType="arraybuffer",h.withCredentials=r.crossOrigin==="use-credentials",h.send()}}},{key:"read",value:function(n){var i=this.options,r=this.imageData,o=hx(n),h=0,a=1,s=1;if(o>1){this.url=fx(n,ag);var c=dx(o);h=c.rotate,a=c.scaleX,s=c.scaleY}i.rotatable&&(r.rotate=h),i.scalable&&(r.scaleX=a,r.scaleY=s),this.clone()}},{key:"clone",value:function(){var n=this.element,i=this.url,r=n.crossOrigin,o=i;this.options.checkCrossOrigin&&ug(i)&&(r||(r="anonymous"),o=fg(i)),this.crossOrigin=r,this.crossOriginUrl=o;var h=document.createElement("img");r&&(h.crossOrigin=r),h.src=o||i,h.alt=n.alt||"The image to crop",this.image=h,h.onload=this.start.bind(this),h.onerror=this.stop.bind(this),Jt(h,Qp),n.parentNode.insertBefore(h,n.nextSibling)}},{key:"start",value:function(){var n=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var r=Ci.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ci.navigator.userAgent),o=function(c,f){St(n.imageData,{naturalWidth:c,naturalHeight:f,aspectRatio:c/f}),n.initialImageData=St({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(i.naturalWidth&&!r){o(i.naturalWidth,i.naturalHeight);return}var h=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=h,h.onload=function(){o(h.width,h.height),r||a.removeChild(h)},h.src=i.src,r||(h.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(h))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,i=this.options,r=this.image,o=n.parentNode,h=document.createElement("div");h.innerHTML=GE;var a=h.querySelector(".".concat(wt,"-container")),s=a.querySelector(".".concat(wt,"-canvas")),c=a.querySelector(".".concat(wt,"-drag-box")),f=a.querySelector(".".concat(wt,"-crop-box")),l=f.querySelector(".".concat(wt,"-face"));this.container=o,this.cropper=a,this.canvas=s,this.dragBox=c,this.cropBox=f,this.viewBox=a.querySelector(".".concat(wt,"-view-box")),this.face=l,s.appendChild(r),Jt(n,wn),o.insertBefore(a,n.nextSibling),gi(r,Qp),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,Jt(f,wn),i.guides||Jt(f.getElementsByClassName("".concat(wt,"-dashed")),wn),i.center||Jt(f.getElementsByClassName("".concat(wt,"-center")),wn),i.background&&Jt(a,"".concat(wt,"-bg")),i.highlight||Jt(l,UE),i.cropBoxMovable&&(Jt(l,pf),na(l,ta,Oh)),i.cropBoxResizable||(Jt(f.getElementsByClassName("".concat(wt,"-line")),wn),Jt(f.getElementsByClassName("".concat(wt,"-point")),wn)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),yn(i.ready)&&Nn(n,rg,i.ready,{once:!0}),Ls(n,rg)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),gi(this.element,wn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=bx,t}},{key:"setDefaults",value:function(n){St(lg,Ts(n)&&n)}}]),t}();St(Mb.prototype,px,gx,mx,vx,_x,yx);let Dh="https://podiz-convert-uieqvbv3ya-du.a.run.app";const wx=async(t,e,n="#FFFFFF")=>{try{const i={colorCode:n,composites:t.composites,printIndex:e,prints:t.prints,scenes:t.scenes};return await(await fetch(`${Dh}/preview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json()}catch(i){console.log({error:i})}},Cx=async(t,e)=>{try{const n={data:e,shopid:t};return await(await fetch(`${Dh}/background_remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(n){return JSON.stringify(n)}},hg=async t=>{try{return await(await fetch(`${Dh}/thumbnail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}};function Sx(t){return Object.keys(t).reduce((e,n)=>t[n]===void 0?e:e+`${n}:${t[n]};`,"")}Sx({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Ib(t,...e){const n={};for(const i of Object.keys(t))e.includes(i)||(n[i]=t[i]);return n}function Xa(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=i)}return e}function dg(t){function e(n){return n(t),()=>{}}return{subscribe:e}}const $a=t=>new Proxy(t,{get(e,n,i){return Reflect.get(e,n,i)},ownKeys(e){return Reflect.ownKeys(e).filter(n=>n!=="action")}}),pg=t=>typeof t=="function";Rb("empty");function Rb(t,e){const{stores:n,action:i,returned:r}=e??{},o=(()=>{if(n&&r)return L1(n,a=>{const s=r(a);if(pg(s)){const c=(...f)=>$a(Xa({...s(...f),[`data-melt-${t}`]:"",action:i??cs}));return c.action=i??cs,c}return $a(Xa({...s,[`data-melt-${t}`]:"",action:i??cs}))});{const a=r,s=a==null?void 0:a();if(pg(s)){const c=(...f)=>$a(Xa({...s(...f),[`data-melt-${t}`]:"",action:i??cs}));return c.action=i??cs,dg(c)}return dg($a(Xa({...s,[`data-melt-${t}`]:"",action:i??cs})))}})(),h=i??(()=>{});return h.subscribe=o.subscribe,h}function Tx(t){const e=o=>o?`${t}-${o}`:t,n=o=>`data-melt-${t}${o?`-${o}`:""}`,i=o=>`[data-melt-${t}${o?`-${o}`:""}]`;return{name:e,attribute:n,selector:i,getEl:o=>document.querySelector(i(o))}}function cs(){}function Fb(t,e,n,i){const r=Array.isArray(e)?e:[e];return r.forEach(o=>t.addEventListener(o,n,i)),()=>{r.forEach(o=>t.removeEventListener(o,n,i))}}function cc(t){return{...t,get:()=>di(t)}}cc.writable=function(t){const e=At(t);let n=t;return{subscribe:e.subscribe,set(i){e.set(i),n=i},update(i){const r=i(n);e.set(r),n=r},get(){return n}}};cc.derived=function(t,e){const n=new Map,i=()=>{const o=Array.isArray(t)?t.map(h=>h.get()):t.get();return e(o)};return{get:i,subscribe:o=>{const h=[];return(Array.isArray(t)?t:[t]).forEach(s=>{h.push(s.subscribe(()=>{o(i())}))}),o(i()),n.set(o,h),()=>{const s=n.get(o);if(s)for(const c of s)c();n.delete(o)}}}};const kx=(t,e)=>{const n=cc(t),i=(o,h)=>{n.update(a=>{const s=o(a);let c=s;return e&&(c=e({curr:a,next:s})),h==null||h(c),c})};return{...n,update:i,set:o=>{i(()=>o)}}},Ox={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Ex(t){const e={};return Object.keys(t).forEach(n=>{const i=n,r=t[i];e[i]=cc(At(r))}),e}Is(void 0,t=>{function e(i){t(i),t(void 0)}return Fb(document,"pointerup",e,{passive:!1,capture:!0})});Is(void 0,t=>{function e(i){i&&i.key===Ox.ESCAPE&&t(i),t(void 0)}return Fb(document,"keydown",e,{passive:!1})});Is(!1),Is(!1),Is(void 0);const xx={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Ib(xx,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Dx={defaultValue:0,max:100},{name:Ax}=Tx("progress"),Px=t=>{const e={...Dx,...t},n=Ex(Ib(e,"value")),{max:i}=n,r=e.value??At(e.defaultValue),o=kx(r,e==null?void 0:e.onValueChange);return{elements:{root:Rb(Ax(),{stores:[o,i],returned:([a,s])=>({value:a,max:s,role:"meter","aria-valuemin":0,"aria-valuemax":s,"aria-valuenow":a,"data-value":a,"data-state":a===null?"indeterminate":a===s?"complete":"loading","data-max":s})})},states:{value:o},options:n}};function gg(t){let e,n,i,r,o,h=[t[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}],a={};for(let s=0;s<h.length;s+=1)a=vi(a,h[s]);return{c(){e=E("div"),n=E("div"),S(n,"class","h-full w-full bg-black transition-transform duration-[660ms] ease-[cubic-bezier(0.65,0,0.35,1)]"),S(n,"style",i=`transform: translateX(-${100-100*(t[1]??0)/(t[3]??1)}%)`),Ol(e,a),yi(e,"svelte-1p3ocr8",!0)},m(s,c){j(s,e,c),k(e,n),r||(o=dy(t[2].action(e)),r=!0)},p(s,c){c&10&&i!==(i=`transform: translateX(-${100-100*(s[1]??0)/(s[3]??1)}%)`)&&S(n,"style",i),Ol(e,a=Vr(h,[c&4&&s[2],{class:"relative h-4 w-[300px] overflow-hidden rounded-[99999px] bg-black/10"}])),yi(e,"svelte-1p3ocr8",!0)},d(s){s&&N(e),r=!1,o()}}}function Mx(t){let e,n,i,r,o,h;const a=t[7].default,s=ga(a,t,t[6],null);let c=t[0]&&t[1]&&gg(t);return{c(){e=E("div"),n=E("div"),n.innerHTML='<div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div> <div class="circle svelte-1p3ocr8"></div>',i=V(),r=E("div"),s&&s.c(),o=V(),c&&c.c(),S(n,"class","loader svelte-1p3ocr8"),S(r,"class","loader-text svelte-1p3ocr8"),S(e,"class","loader-container svelte-1p3ocr8")},m(f,l){j(f,e,l),k(e,n),k(e,i),k(e,r),s&&s.m(r,null),k(e,o),c&&c.m(e,null),h=!0},p(f,[l]){s&&s.p&&(!h||l&64)&&va(s,a,f,f[6],h?ma(a,f[6],l,null):_a(f[6]),null),f[0]&&f[1]?c?c.p(f,l):(c=gg(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){h||(R(s,f),h=!0)},o(f){H(s,f),h=!1},d(f){f&&N(e),s&&s.d(f),c&&c.d()}}}function Ix(t,e,n){let i,r,{$$slots:o={},$$scope:h}=e,{isProgress:a=!1}=e,{progress:s=0}=e;const{elements:{root:c},options:{max:f}}=Px({max:100});return je(t,c,l=>n(2,i=l)),je(t,f,l=>n(3,r=l)),t.$$set=l=>{"isProgress"in l&&n(0,a=l.isProgress),"progress"in l&&n(1,s=l.progress),"$$scope"in l&&n(6,h=l.$$scope)},[a,s,i,r,c,f,h,o]}class Lb extends qe{constructor(e){super(),Ge(this,e,Ix,Mx,Ve,{isProgress:0,progress:1})}}function Rx(){const t={};return document.getElementById("podiz-publish-uuid")&&(t.uuid=document.getElementById("podiz-publish-uuid").value),document.getElementById("podiz-shop-id")&&(t.shopid=document.getElementById("podiz-shop-id").value),document.getElementById("podiz-provider")&&(t.provider=document.getElementById("podiz-provider").value),document.getElementById("podiz-productno")&&(t.productno=document.getElementById("podiz-productno").value),document.getElementById("podiz-preview-class")&&(t.previewclass=document.getElementById("podiz-preview-class").value),document.getElementById("podiz-preview-item-class")&&(t.previewitem=document.getElementById("podiz-preview-item-class").value),document.getElementById("podiz-mode")&&(t.mode=document.getElementById("podiz-mode").value),t}function Fx(){const t=document.querySelectorAll('input[type="hidden"].podiz-hidden');t.forEach(n=>{const i=n.value;document.querySelectorAll(`.${i}`).forEach(o=>{o.style.display="none"})});const e=new MutationObserver(n=>{n.forEach(i=>{if(i.type==="attributes"&&i.attributeName==="value"){const o=i.target.value;document.querySelectorAll(`.${o}`).forEach(a=>{a.style.display="none"})}})});t.forEach(n=>{e.observe(n,{attributes:!0})})}function Lx(t){const e=t.name,n=e.lastIndexOf(".");return n===-1?"":e.slice(n+1).toLowerCase()}async function Nx(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/variants`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function wf(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}/options`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function mg(t){try{return new Promise(function(e,n){CAFE24API&&CAFE24API.get(`/api/v2/products/${t}`,function(i,r){return i&&(console.log(i),n(i)),e(r)})})}catch(e){reject(e)}}async function vg(t,e){return(await Nx(e)).variants.find(i=>{const r=t.productOptions.map(h=>h.value),o=i.options.map(h=>h.value);return r.join(",")===o.join(",")})}async function jx(){var n;const t="item_option_add",e="podiz";try{const i=di(ui),r=di(Fl),o=await Promise.all(i.map(async h=>{const a=[],s=r.linkOptions.find(l=>{var u,d,p;return((u=l.editorOptions)==null?void 0:u.optionValue1)===h.currentOption.optionValue1&&((d=l.editorOptions)==null?void 0:d.optionValue2)===h.currentOption.optionValue2&&((p=l.editorOptions)==null?void 0:p.optionValue3)===h.currentOption.optionValue3}),c=await vg(s,s.productNo);a.push({product_no:s.productNo,variants_code:c.variant_code,quantity:h.count,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]});const f=await Promise.all(h.prints.filter(l=>l.imageDataURL).map(async l=>{const u=r.linkOptions.find(p=>p.print===l.id);if(!u)return null;const d=await vg(u,u.productNo);return{product_no:u.productNo,quantity:h.count,variants_code:d.variant_code,additional_option_values:[{key:t,type:"text",title:e,value:h.uuid}]}}));return[...a,...f.filter(Boolean)]}));if(CAFE24API){const h=await Promise.all(o.map(s=>new Promise((c,f)=>{CAFE24API.addCart("A0000","P",s,(l,u)=>{c(l?{error:l,product:s}:u)})})));console.log({results:h});let a=[];for(let s=0;s<h.length;s++)(n=h[s].errors)!=null&&n.length&&a.push(...h[s].errors);if(a.length>0){console.error("장바구니 추가 중 다음 오류가 발생했습니다:");for(let s=0;s<a.length;s++)throw a[s]}else{const s="/order/basket.html#none";window.location.pathname.includes("/order/basket.htm")?window.location.reload():window.location.href=s}}}catch(i){throw console.error("Error in addCafe24Cart:",i),i}}function Bx(t,e=null){const n=document.getElementsByClassName(t),i=new Set,r=[],o=/\s*\[\s*podiz\s*:\s*([a-f0-9-]{36})\s*\]\s*/g,h=[];function a(s,c){for(;s&&s.nodeType===Node.TEXT_NODE;)s=s.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE;){if(s.classList.contains(c))return s;s=s.parentNode}return null}for(let s of n){const c=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let f;for(;f=c.nextNode();){let l;for(;(l=o.exec(f.textContent))!==null;){i.add(l[1]);let u;e?u=a(f,e):u=f.parentElement,u&&!r.includes(u)&&r.push(u),h.push({uuid:l[1],element:u})}}}return{uids:Array.from(i),elements:r,items:h}}async function Ux(){try{return new Promise(function(t,e){if(CAFE24API){const n={cafe24MallId:null,cafe24ShopNo:null,cafe24UserType:null,cafe24MemberId:null};n.cafe24MallId=CAFE24API.MALL_ID,n.cafe24ShopNo=CAFE24API.SHOP_NO,CAFE24API.getCustomerIDInfo(function(i,r){if(i)throw i;r.id.member_id?(n.cafe24UserType="member",n.cafe24MemberId=r.id.member_id):(n.cafe24UserType="guest",n.cafe24MemberId=r.id.guest_id)}),t(n)}})}catch(t){reject(t)}}const Wx=()=>new Promise(function(t,e){CAFE24API&&CAFE24API.getCartItemList(async function(n,i){if(n)console.log({err:n});else return t(i)})});function Bl(t){return parseFloat(t).toLocaleString("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0})}async function Yx(){try{return new Promise((t,e)=>{CAFE24API?CAFE24API.get("/api/v2/categories",(n,i)=>{n?(console.error("Error fetching product categories:",n),e(n)):t(i.categories)}):e(new Error("CAFE24API is not available"))})}catch(t){throw console.error("Error in getCafe24ProductCategories:",t),t}}async function zx(t,e,n=10,i=1){try{return new Promise((r,o)=>{if(CAFE24API){let h="/api/v2/products";const a=[];t&&a.push(`category=${encodeURIComponent(t)}`),e&&a.push(`keyword=${encodeURIComponent(e)}`),a.push(`limit=${n}`),a.push(`page=${i}`),a.length>0&&(h+="?"+a.join("&")),CAFE24API.get(h,(s,c)=>{s?(console.error("Error searching products:",s),o(s)):r(c.products)})}else o(new Error("CAFE24API is not available"))})}catch(r){throw console.error("Error in searchProducts:",r),r}}var _g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Hx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],h=t[n++],a=t[n++],s=((r&7)<<18|(o&63)<<12|(h&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(s&1023))}else{const o=t[n++],h=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|h&63)}}return e.join("")},jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],h=r+1<t.length,a=h?t[r+1]:0,s=r+2<t.length,c=s?t[r+2]:0,f=o>>2,l=(o&3)<<4|a>>4;let u=(a&15)<<2|c>>6,d=c&63;s||(d=64,h||(u=64)),i.push(n[f],n[l],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||a==null||c==null||l==null)throw new Vx;const u=o<<2|a>>4;if(i.push(u),c!==64){const d=a<<4&240|c>>2;if(i.push(d),l!==64){const p=c<<6&192|l;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xx=function(t){const e=Nb(t);return jb.encodeByteArray(e,!0)},Ul=function(t){return Xx(t).replace(/\./g,"")},$x=function(t){try{return jb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=()=>Gx().__FIREBASE_DEFAULTS__,Kx=()=>{if(typeof process>"u"||typeof _g>"u")return;const t=_g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$x(t[1]);return e&&JSON.parse(e)},Bb=()=>{try{return qx()||Kx()||Jx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zx=t=>{var e,n;return(n=(e=Bb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Qx=t=>{const e=Zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ub=()=>{var t;return(t=Bb())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ul(JSON.stringify(n)),Ul(JSON.stringify(h)),""].join(".")}function n2(){try{return typeof indexedDB=="object"}catch{return!1}}function i2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="FirebaseError";class uo extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=r2,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wb.prototype.create)}}class Wb{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],h=o?s2(o,i):"Error",a=`${this.serviceName}: ${h} (${r}).`;return new uo(r,a,i)}}function s2(t,e){return t.replace(o2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const o2=/\{\$([^}]+)}/g;function Cf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],h=e[r];if(yg(o)&&yg(h)){if(!Cf(o,h))return!1}else if(o!==h)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function yg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new e2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c2(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,h]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);i===a&&h.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:l2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l2(t){return t===Er?void 0:t}function c2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new a2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const f2={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},h2=gt.INFO,d2={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},p2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=d2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g2{constructor(e){this.name=e,this._logLevel=h2,this._logHandler=p2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const m2=(t,e)=>e.some(n=>t instanceof n);let bg,wg;function v2(){return bg||(bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _2(){return wg||(wg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yb=new WeakMap,Sf=new WeakMap,zb=new WeakMap,du=new WeakMap,Ah=new WeakMap;function y2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",h)},o=()=>{n(hr(t.result)),r()},h=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Yb.set(n,t)}).catch(()=>{}),Ah.set(e,t),e}function b2(t){if(Sf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",h),t.removeEventListener("abort",h)},o=()=>{n(),r()},h=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",h),t.addEventListener("abort",h)});Sf.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w2(t){Tf=t(Tf)}function C2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(pu(this),e,...n);return zb.set(i,e.sort?e.sort():[e]),hr(i)}:_2().includes(t)?function(...e){return t.apply(pu(this),e),hr(Yb.get(this))}:function(...e){return hr(t.apply(pu(this),e))}}function S2(t){return typeof t=="function"?C2(t):(t instanceof IDBTransaction&&b2(t),m2(t,v2())?new Proxy(t,Tf):t)}function hr(t){if(t instanceof IDBRequest)return y2(t);if(du.has(t))return du.get(t);const e=S2(t);return e!==t&&(du.set(t,e),Ah.set(e,t)),e}const pu=t=>Ah.get(t);function T2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const h=indexedDB.open(t,e),a=hr(h);return i&&h.addEventListener("upgradeneeded",s=>{i(hr(h.result),s.oldVersion,s.newVersion,hr(h.transaction),s)}),n&&h.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),a.then(s=>{o&&s.addEventListener("close",()=>o()),r&&s.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const k2=["get","getKey","getAll","getAllKeys","count"],O2=["put","add","delete","clear"],gu=new Map;function Cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gu.get(e))return gu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=O2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||k2.includes(n)))return;const o=async function(h,...a){const s=this.transaction(h,r?"readwrite":"readonly");let c=s.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&s.done]))[0]};return gu.set(e,o),o}w2(t=>({...t,get:(e,n,i)=>Cg(e,n)||t.get(e,n,i),has:(e,n)=>!!Cg(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function x2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kf="@firebase/app",Sg="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new g2("@firebase/app"),D2="@firebase/app-compat",A2="@firebase/analytics-compat",P2="@firebase/analytics",M2="@firebase/app-check-compat",I2="@firebase/app-check",R2="@firebase/auth",F2="@firebase/auth-compat",L2="@firebase/database",N2="@firebase/database-compat",j2="@firebase/functions",B2="@firebase/functions-compat",U2="@firebase/installations",W2="@firebase/installations-compat",Y2="@firebase/messaging",z2="@firebase/messaging-compat",H2="@firebase/performance",V2="@firebase/performance-compat",X2="@firebase/remote-config",$2="@firebase/remote-config-compat",G2="@firebase/storage",q2="@firebase/storage-compat",K2="@firebase/firestore",J2="@firebase/firestore-compat",Z2="firebase",Q2="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",eD={[kf]:"fire-core",[D2]:"fire-core-compat",[P2]:"fire-analytics",[A2]:"fire-analytics-compat",[I2]:"fire-app-check",[M2]:"fire-app-check-compat",[R2]:"fire-auth",[F2]:"fire-auth-compat",[L2]:"fire-rtdb",[N2]:"fire-rtdb-compat",[j2]:"fire-fn",[B2]:"fire-fn-compat",[U2]:"fire-iid",[W2]:"fire-iid-compat",[Y2]:"fire-fcm",[z2]:"fire-fcm-compat",[H2]:"fire-perf",[V2]:"fire-perf-compat",[X2]:"fire-rc",[$2]:"fire-rc-compat",[G2]:"fire-gcs",[q2]:"fire-gcs-compat",[K2]:"fire-fst",[J2]:"fire-fst-compat","fire-js":"fire-js",[Z2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,tD=new Map,Ef=new Map;function Tg(t,e){try{t.container.addComponent(e)}catch(n){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yl(t){const e=t.name;if(Ef.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Ef.set(e,t);for(const n of Wl.values())Tg(n,t);for(const n of tD.values())Tg(n,t);return!0}function nD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Wb("app","Firebase",iD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=Q2;function Hb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Of,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw dr.create("bad-app-name",{appName:String(r)});if(n||(n=Ub()),!n)throw dr.create("no-options");const o=Wl.get(r);if(o){if(Cf(n,o.options)&&Cf(i,o.config))return o;throw dr.create("duplicate-app",{appName:r})}const h=new u2(r);for(const s of Ef.values())h.addComponent(s);const a=new rD(n,i,h);return Wl.set(r,a),a}function oD(t=Of){const e=Wl.get(t);if(!e&&t===Of&&Ub())return Hb();if(!e)throw dr.create("no-app",{appName:t});return e}function Ns(t,e,n){var i;let r=(i=eD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const a=[`Unable to register library "${r}" with version "${e}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&a.push("and"),h&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(a.join(" "));return}Yl(new ia(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="firebase-heartbeat-database",lD=1,ra="firebase-heartbeat-store";let mu=null;function Vb(){return mu||(mu=T2(aD,lD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw dr.create("idb-open",{originalErrorMessage:t.message})})),mu}async function cD(t){try{const n=(await Vb()).transaction(ra),i=await n.objectStore(ra).get(Xb(t));return await n.done,i}catch(e){if(e instanceof uo)Gr.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(n.message)}}}async function kg(t,e){try{const i=(await Vb()).transaction(ra,"readwrite");await i.objectStore(ra).put(e,Xb(t)),await i.done}catch(n){if(n instanceof uo)Gr.warn(n.message);else{const i=dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gr.warn(i.message)}}}function Xb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=1024,fD=30*24*60*60*1e3;class hD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Og();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const a=new Date(h.date).valueOf();return Date.now()-a<=fD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Og(),{heartbeatsToSend:i,unsentEntries:r}=dD(this._heartbeatsCache.heartbeats),o=Ul(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Og(){return new Date().toISOString().substring(0,10)}function dD(t,e=uD){const n=[];let i=t.slice();for(const r of t){const o=n.find(h=>h.agent===r.agent);if(o){if(o.dates.push(r.date),Eg(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Eg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class pD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n2()?i2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return kg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return kg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Eg(t){return Ul(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){Yl(new ia("platform-logger",e=>new E2(e),"PRIVATE")),Yl(new ia("heartbeat",e=>new hD(e),"PRIVATE")),Ns(kf,Sg,t),Ns(kf,Sg,"esm2017"),Ns("fire-js","")}gD("");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $b="firebasestorage.googleapis.com",Gb="storageBucket",mD=2*60*1e3,vD=10*60*1e3,_D=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends uo{constructor(e,n,i=0){super(vu(e),`Firebase Storage: ${n} (${vu(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function vu(t){return"storage/"+t}function Ph(){const t="An unknown error occurred, please check the error payload for server response.";return new Pt(vt.UNKNOWN,t)}function yD(t){return new Pt(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bD(t){return new Pt(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(vt.UNAUTHENTICATED,t)}function CD(){return new Pt(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SD(t){return new Pt(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function qb(){return new Pt(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kb(){return new Pt(vt.CANCELED,"User canceled the upload/download.")}function TD(t){return new Pt(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function kD(t){return new Pt(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OD(){return new Pt(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gb+"' property when initializing the app?")}function Jb(){return new Pt(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ED(){return new Pt(vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function xD(){return new Pt(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DD(t){return new Pt(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xf(t){return new Pt(vt.INVALID_ARGUMENT,t)}function Zb(){return new Pt(vt.APP_DELETED,"The Firebase app was deleted.")}function AD(t){return new Pt(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $o(t,e){return new Pt(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xo(t){throw new Pt(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=xn.makeFromUrl(e,n)}catch{return new xn(e,"")}if(i.path==="")return i;throw kD(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const h="(/(.*))?$",a=new RegExp("^gs://"+r+h,"i"),s={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const f="v[A-Za-z0-9_]+",l=n.replace(/[.]/g,"\\."),u="(/([^?#]*).*)?$",d=new RegExp(`^https?://${l}/${f}/b/${r}/o${u}`,"i"),p={bucket:1,path:3},m=n===$b?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${r}/${g}`,"i"),b=[{regex:a,indices:s,postModify:o},{regex:d,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<b.length;y++){const C=b[y],w=C.regex.exec(e);if(w){const T=w[C.indices.bucket];let O=w[C.indices.path];O||(O=""),i=new xn(T,O),C.postModify(i);break}}if(i==null)throw TD(e);return i}}class PD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e,n){let i=1,r=null,o=null,h=!1,a=0;function s(){return a===2}let c=!1;function f(...g){c||(c=!0,e.apply(null,g))}function l(g){r=setTimeout(()=>{r=null,t(d,s())},g)}function u(){o&&clearTimeout(o)}function d(g,...v){if(c){u();return}if(g){u(),f.call(null,g,...v);return}if(s()||h){u(),f.call(null,g,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,l(b)}let p=!1;function m(g){p||(p=!0,u(),!c&&(r!==null?(g||(a=2),clearTimeout(r),l(0)):g||(a=1)))}return l(0),o=setTimeout(()=>{h=!0,m(!0)},n),m}function ID(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){return t!==void 0}function FD(t){return typeof t=="function"}function LD(t){return typeof t=="object"&&!Array.isArray(t)}function fc(t){return typeof t=="string"||t instanceof String}function xg(t){return Mh()&&t instanceof Blob}function Mh(){return typeof Blob<"u"}function Dg(t,e,n,i){if(i<e)throw xf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw xf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Qb(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wr||(Wr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,i,r,o,h,a,s,c,f,l,u=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=h,this.callback_=a,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=l,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Ga(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const h=a=>{const s=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(s,c)};this.progressCallback_!==null&&o.addUploadProgressListener(h),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(h),this.pendingConnection_=null;const a=o.getErrorCode()===Wr.NO_ERROR,s=o.getStatus();if(!a||e0(s,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Wr.ABORT;i(!1,new Ga(!1,null,f));return}const c=this.successCodes_.indexOf(s)!==-1;i(!0,new Ga(c,o))})},n=(i,r)=>{const o=this.resolve_,h=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const s=this.callback_(a,a.getResponse());RD(s)?o(s):o()}catch(s){h(s)}else if(a!==null){const s=Ph();s.serverResponse=a.getErrorText(),this.errorCallback_?h(this.errorCallback_(a,s)):h(s)}else if(r.canceled){const s=this.appDelete_?Zb():Kb();h(s)}else{const s=qb();h(s)}};this.canceled_?n(!1,new Ga(!1,null,!0)):this.backoffId_=MD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ID(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ga{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function jD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function WD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YD(t,e,n,i,r,o,h=!0){const a=Qb(t.urlParams),s=t.url+a,c=Object.assign({},t.headers);return UD(c,e),jD(c,n),BD(c,o),WD(c,i),new ND(s,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HD(...t){const e=zD();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Mh())return new Blob(t);throw new Pt(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){if(typeof atob>"u")throw DD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _u{constructor(e,n){this.data=e,this.contentType=n||null}}function $D(t,e){switch(t){case pi.RAW:return new _u(t0(e));case pi.BASE64:case pi.BASE64URL:return new _u(n0(t,e));case pi.DATA_URL:return new _u(qD(e),KD(e))}throw Ph()}function t0(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,h=t.charCodeAt(++n);i=65536|(o&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function GD(t){let e;try{e=decodeURIComponent(t)}catch{throw $o(pi.DATA_URL,"Malformed data URL.")}return t0(e)}function n0(t,e){switch(t){case pi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw $o(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw $o(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XD(e)}catch(r){throw r.message.includes("polyfill")?r:$o(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class i0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw $o(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=JD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function qD(t){const e=new i0(t);return e.base64?n0(pi.BASE64,e.rest):GD(e.rest)}function KD(t){return new i0(t).contentType}function JD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){let i=0,r="";xg(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(xg(this.data_)){const i=this.data_,r=VD(i,e,n);return r===null?null:new nr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new nr(i,!0)}}static getBlob(...e){if(Mh()){const n=e.map(i=>i instanceof nr?i.data_:i);return new nr(HD.apply(null,n))}else{const n=e.map(h=>fc(h)?$D(pi.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(h=>{for(let a=0;a<h.length;a++)r[o++]=h[a]}),new nr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){let e;try{e=JSON.parse(t)}catch{return null}return LD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QD(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function s0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e){return e}class dn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||eA}}let qa=null;function tA(t){return!fc(t)||t.length<2?t:s0(t)}function o0(){if(qa)return qa;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(o,h){return tA(h)}const n=new dn("name");n.xform=e,t.push(n);function i(o,h){return h!==void 0?Number(h):h}const r=new dn("size");return r.xform=i,t.push(r),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),qa=t,qa}function nA(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new xn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function iA(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const h=n[o];i[h.local]=h.xform(i,e[h.server])}return nA(i,t),i}function a0(t,e,n){const i=r0(e);return i===null?null:iA(t,i,n)}function rA(t,e,n,i){const r=r0(e);if(r===null||!fc(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const h=encodeURIComponent;return o.split(",").map(c=>{const f=t.bucket,l=t.fullPath,u="/b/"+h(f)+"/o/"+h(l),d=Ca(u,n,i),p=Qb({alt:"media",token:c});return d+p})[0]}function l0(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class fo{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){if(!t)throw Ph()}function Ih(t,e){function n(i,r){const o=a0(t,r,e);return Wi(o!==null),o}return n}function sA(t,e){function n(i,r){const o=a0(t,r,e);return Wi(o!==null),rA(o,r,t.host,t._protocol)}return n}function Sa(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=CD():r=wD():n.getStatus()===402?r=bD(t.bucket):n.getStatus()===403?r=SD(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function c0(t){const e=Sa(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=yD(t.path)),o.serverResponse=r.serverResponse,o}return n}function oA(t,e,n){const i=e.fullServerUrl(),r=Ca(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new fo(r,o,Ih(t,n),h);return a.errorHandler=c0(e),a}function aA(t,e,n){const i=e.fullServerUrl(),r=Ca(i,t.host,t._protocol),o="GET",h=t.maxOperationRetryTime,a=new fo(r,o,sA(t,n),h);return a.errorHandler=c0(e),a}function lA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function u0(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=lA(null,e)),i}function cA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const s=a();h["Content-Type"]="multipart/related; boundary="+s;const c=u0(e,i,r),f=l0(c,n),l="--"+s+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+s+`\r
Content-Type: `+c.contentType+`\r
\r
`,u=`\r
--`+s+"--",d=nr.getBlob(l,i,u);if(d===null)throw Jb();const p={name:c.fullPath},m=Ca(o,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,_=new fo(m,g,Ih(t,n),v);return _.urlParams=p,_.headers=h,_.body=d.uploadData(),_.errorHandler=Sa(e),_}class zl{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Rh(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Wi(!1)}return Wi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function uA(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),h=u0(e,i,r),a={name:h.fullPath},s=Ca(o,t.host,t._protocol),c="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},l=l0(h,n),u=t.maxUploadRetryTime;function d(m){Rh(m);let g;try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{Wi(!1)}return Wi(fc(g)),g}const p=new fo(s,c,d,u);return p.urlParams=a,p.headers=f,p.body=l,p.errorHandler=Sa(e),p}function fA(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(c){const f=Rh(c,["active","final"]);let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wi(!1)}l||Wi(!1);const u=Number(l);return Wi(!isNaN(u)),new zl(u,i.size(),f==="final")}const h="POST",a=t.maxUploadRetryTime,s=new fo(n,h,o,a);return s.headers=r,s.errorHandler=Sa(e),s}const Ag=256*1024;function hA(t,e,n,i,r,o,h,a){const s=new zl(0,0);if(h?(s.current=h.current,s.total=h.total):(s.current=0,s.total=i.size()),i.size()!==s.total)throw ED();const c=s.total-s.current;let f=c;r>0&&(f=Math.min(f,r));const l=s.current,u=l+f;let d="";f===0?d="finalize":c===f?d="upload, finalize":d="upload";const p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${s.current}`},m=i.slice(l,u);if(m===null)throw Jb();function g(y,C){const w=Rh(y,["active","final"]),T=s.current+f,O=i.size();let A;return w==="final"?A=Ih(e,o)(y,C):A=null,new zl(T,O,w==="final",A)}const v="POST",_=e.maxUploadRetryTime,b=new fo(n,v,g,_);return b.headers=p,b.body=m.uploadData(),b.progressCallback=a||null,b.errorHandler=Sa(t),b}const bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yu(t){switch(t){case"running":case"pausing":case"canceling":return bn.RUNNING;case"paused":return bn.PAUSED;case"success":return bn.SUCCESS;case"canceled":return bn.CANCELED;case"error":return bn.ERROR;default:return bn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,i){if(FD(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class pA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw xo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gA extends pA{initXhr(){this.xhr_.responseType="text"}}function bs(){return new gA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=o0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(e0(r.status,[]))if(o)r=qb();else{this.sleepTime=Math.max(this.sleepTime*2,_D),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(vt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=uA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,bs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=fA(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,bs,n,i);this._request=o,o.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ag*this._chunkMultiplier,n=new zl(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let h;try{h=hA(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(s){this._error=s,this._transition("error");return}const a=this._ref.storage._makeRequest(h,bs,r,o,!1);this._request=a,a.getPromise().then(s=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(s.current),s.finalized?(this._metadata=s.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ag*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=oA(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,bs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=cA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,bs,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Kb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=yu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new dA(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(yu(this._state)){case bn.SUCCESS:us(this._resolve.bind(null,this.snapshot))();break;case bn.CANCELED:case bn.ERROR:const n=this._reject;us(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yu(this._state)){case bn.RUNNING:case bn.PAUSED:e.next&&us(e.next.bind(e,this.snapshot))();break;case bn.SUCCESS:e.complete&&us(e.complete.bind(e))();break;case bn.CANCELED:case bn.ERROR:e.error&&us(e.error.bind(e,this._error))();break;default:e.error&&us(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this._service=e,n instanceof xn?this._location=n:this._location=xn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qr(e,n)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s0(this._location.path)}get storage(){return this._service}get parent(){const e=ZD(this._location.path);if(e===null)return null;const n=new xn(this._location.bucket,e);return new qr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AD(e)}}function vA(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new mA(t,new nr(e),n)}function _A(t){t._throwIfRoot("getDownloadURL");const e=aA(t.storage,t._location,o0());return t.storage.makeRequestWithTokens(e,bs).then(n=>{if(n===null)throw xD();return n})}function yA(t,e){const n=QD(t._location.path,e),i=new xn(t._location.bucket,n);return new qr(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return/^[A-Za-z]+:\/\//.test(t)}function wA(t,e){return new qr(t,e)}function f0(t,e){if(t instanceof Fh){const n=t;if(n._bucket==null)throw OD();const i=new qr(n,n._bucket);return e!=null?f0(i,e):i}else return e!==void 0?yA(t,e):t}function CA(t,e){if(e&&bA(e)){if(t instanceof Fh)return wA(t,e);throw xf("To use ref(service, url), the first argument must be a Storage instance.")}else return f0(t,e)}function Pg(t,e){const n=e==null?void 0:e[Gb];return n==null?null:xn.makeFromBucketSpec(n,t)}function SA(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:t2(r,t.app.options.projectId))}class Fh{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=$b,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mD,this._maxUploadRetryTime=vD,this._requests=new Set,r!=null?this._bucket=xn.makeFromBucketSpec(r,this._host):this._bucket=Pg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=Pg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qr(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new PD(Zb());{const h=YD(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Mg="@firebase/storage",Ig="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="storage";function TA(t,e,n){return t=uc(t),vA(t,e,n)}function kA(t){return t=uc(t),_A(t)}function OA(t,e){return t=uc(t),CA(t,e)}function EA(t=oD(),e){t=uc(t);const i=nD(t,h0).getImmediate({identifier:e}),r=Qx("storage");return r&&xA(i,...r),i}function xA(t,e,n,i={}){SA(t,e,n,i)}function DA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Fh(n,i,r,e,sD)}function AA(){Yl(new ia(h0,DA,"PUBLIC").setMultipleInstances(!0)),Ns(Mg,Ig,""),Ns(Mg,Ig,"esm2017")}AA();var PA="firebase",MA="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(PA,MA,"app");const IA={apiKey:"AIzaSyANQCJa2A3rxVz0g-iKS2DnZjDEEc4zcPQ",authDomain:"podiz-22471.firebaseapp.com",databaseURL:"podiz-22471.firebaseio.com",storageBucket:"podiz-22471.appspot.com"},RA=Hb(IA),FA=EA(RA);var d0={},Lh={exports:{}},p0=function(e,n){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(n,r)}},LA=p0,Nh=Object.prototype.toString,jh=function(t){return function(e){var n=Nh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Zr(t){return t=t.toLowerCase(),function(n){return jh(n)===t}}function Bh(t){return Array.isArray(t)}function Hl(t){return typeof t>"u"}function NA(t){return t!==null&&!Hl(t)&&t.constructor!==null&&!Hl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var g0=Zr("ArrayBuffer");function jA(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&g0(t.buffer),e}function BA(t){return typeof t=="string"}function UA(t){return typeof t=="number"}function m0(t){return t!==null&&typeof t=="object"}function pl(t){if(jh(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var WA=Zr("Date"),YA=Zr("File"),zA=Zr("Blob"),HA=Zr("FileList");function Uh(t){return Nh.call(t)==="[object Function]"}function VA(t){return m0(t)&&Uh(t.pipe)}function XA(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Nh.call(t)===e||Uh(t.toString)&&t.toString()===e)}var $A=Zr("URLSearchParams");function GA(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function qA(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Wh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Bh(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Df(){var t={};function e(r,o){pl(t[o])&&pl(r)?t[o]=Df(t[o],r):pl(r)?t[o]=Df({},r):Bh(r)?t[o]=r.slice():t[o]=r}for(var n=0,i=arguments.length;n<i;n++)Wh(arguments[n],e);return t}function KA(t,e,n){return Wh(e,function(r,o){n&&typeof r=="function"?t[o]=LA(r,n):t[o]=r}),t}function JA(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function ZA(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function QA(t,e,n){var i,r,o,h={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],h[o]||(e[o]=t[o],h[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function eP(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function tP(t){if(!t)return null;var e=t.length;if(Hl(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var nP=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),on={isArray:Bh,isArrayBuffer:g0,isBuffer:NA,isFormData:XA,isArrayBufferView:jA,isString:BA,isNumber:UA,isObject:m0,isPlainObject:pl,isUndefined:Hl,isDate:WA,isFile:YA,isBlob:zA,isFunction:Uh,isStream:VA,isURLSearchParams:$A,isStandardBrowserEnv:qA,forEach:Wh,merge:Df,extend:KA,trim:GA,stripBOM:JA,inherits:ZA,toFlatObject:QA,kindOf:jh,kindOfTest:Zr,endsWith:eP,toArray:tP,isTypedArray:nP,isFileList:HA},fs=on;function Rg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var v0=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(fs.isURLSearchParams(n))r=n.toString();else{var o=[];fs.forEach(n,function(s,c){s===null||typeof s>"u"||(fs.isArray(s)?c=c+"[]":s=[s],fs.forEach(s,function(l){fs.isDate(l)?l=l.toISOString():fs.isObject(l)&&(l=JSON.stringify(l)),o.push(Rg(c)+"="+Rg(l))}))}),r=o.join("&")}if(r){var h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},iP=on;function hc(){this.handlers=[]}hc.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};hc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};hc.prototype.forEach=function(e){iP.forEach(this.handlers,function(i){i!==null&&e(i)})};var rP=hc,sP=on,oP=function(e,n){sP.forEach(e,function(r,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[o])})},_0=on;function qs(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}_0.inherits(qs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var y0=qs.prototype,b0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){b0[t]={value:t}});Object.defineProperties(qs,b0);Object.defineProperty(y0,"isAxiosError",{value:!0});qs.from=function(t,e,n,i,r,o){var h=Object.create(y0);return _0.toFlatObject(t,h,function(s){return s!==Error.prototype}),qs.call(h,t.message,e,n,i,r),h.name=t.name,o&&Object.assign(h,o),h};var ho=qs,w0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gn=on;function aP(t,e){e=e||new FormData;var n=[];function i(o){return o===null?"":Gn.isDate(o)?o.toISOString():Gn.isArrayBuffer(o)||Gn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function r(o,h){if(Gn.isPlainObject(o)||Gn.isArray(o)){if(n.indexOf(o)!==-1)throw Error("Circular reference detected in "+h);n.push(o),Gn.forEach(o,function(s,c){if(!Gn.isUndefined(s)){var f=h?h+"."+c:c,l;if(s&&!h&&typeof s=="object"){if(Gn.endsWith(c,"{}"))s=JSON.stringify(s);else if(Gn.endsWith(c,"[]")&&(l=Gn.toArray(s))){l.forEach(function(u){!Gn.isUndefined(u)&&e.append(f,i(u))});return}}r(s,f)}}),n.pop()}else e.append(h,i(o))}return r(t),e}var C0=aP,bu,Fg;function lP(){if(Fg)return bu;Fg=1;var t=ho;return bu=function(n,i,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},bu}var wu,Lg;function cP(){if(Lg)return wu;Lg=1;var t=on;return wu=t.isStandardBrowserEnv()?function(){return{write:function(i,r,o,h,a,s){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),t.isString(h)&&c.push("path="+h),t.isString(a)&&c.push("domain="+a),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),wu}var uP=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},fP=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},hP=uP,dP=fP,S0=function(e,n){return e&&!hP(n)?dP(e,n):n},Cu,Ng;function pP(){if(Ng)return Cu;Ng=1;var t=on,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Cu=function(i){var r={},o,h,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),o=t.trim(c.substr(0,a)).toLowerCase(),h=t.trim(c.substr(a+1)),o){if(r[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([h]):r[o]=r[o]?r[o]+", "+h:h}}),r},Cu}var Su,jg;function gP(){if(jg)return Su;jg=1;var t=on;return Su=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function o(h){var a=h;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=o(window.location.href),function(a){var s=t.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),Su}var Tu,Bg;function dc(){if(Bg)return Tu;Bg=1;var t=ho,e=on;function n(i){t.call(this,i??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),Tu=n,Tu}var ku,Ug;function mP(){return Ug||(Ug=1,ku=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),ku}var Ou,Wg;function Yg(){if(Wg)return Ou;Wg=1;var t=on,e=lP(),n=cP(),i=v0,r=S0,o=pP(),h=gP(),a=w0,s=ho,c=dc(),f=mP();return Ou=function(u){return new Promise(function(p,m){var g=u.data,v=u.headers,_=u.responseType,b;function y(){u.cancelToken&&u.cancelToken.unsubscribe(b),u.signal&&u.signal.removeEventListener("abort",b)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var C=new XMLHttpRequest;if(u.auth){var w=u.auth.username||"",T=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";v.Authorization="Basic "+btoa(w+":"+T)}var O=r(u.baseURL,u.url);C.open(u.method.toUpperCase(),i(O,u.params,u.paramsSerializer),!0),C.timeout=u.timeout;function A(){if(C){var U="getAllResponseHeaders"in C?o(C.getAllResponseHeaders()):null,K=!_||_==="text"||_==="json"?C.responseText:C.response,q={data:K,status:C.status,statusText:C.statusText,headers:U,config:u,request:C};e(function(W){p(W),y()},function(W){m(W),y()},q),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(m(new s("Request aborted",s.ECONNABORTED,u,C)),C=null)},C.onerror=function(){m(new s("Network Error",s.ERR_NETWORK,u,C,C)),C=null},C.ontimeout=function(){var K=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",q=u.transitional||a;u.timeoutErrorMessage&&(K=u.timeoutErrorMessage),m(new s(K,q.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,u,C)),C=null},t.isStandardBrowserEnv()){var M=(u.withCredentials||h(O))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;M&&(v[u.xsrfHeaderName]=M)}"setRequestHeader"in C&&t.forEach(v,function(K,q){typeof g>"u"&&q.toLowerCase()==="content-type"?delete v[q]:C.setRequestHeader(q,K)}),t.isUndefined(u.withCredentials)||(C.withCredentials=!!u.withCredentials),_&&_!=="json"&&(C.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&C.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(b=function(U){C&&(m(!U||U&&U.type?new c:U),C.abort(),C=null)},u.cancelToken&&u.cancelToken.subscribe(b),u.signal&&(u.signal.aborted?b():u.signal.addEventListener("abort",b))),g||(g=null);var Y=f(O);if(Y&&["http","https","file"].indexOf(Y)===-1){m(new s("Unsupported protocol "+Y+":",s.ERR_BAD_REQUEST,u));return}C.send(g)})},Ou}var Eu,zg;function vP(){return zg||(zg=1,Eu=null),Eu}var Kt=on,Hg=oP,Vg=ho,_P=w0,yP=C0,bP={"Content-Type":"application/x-www-form-urlencoded"};function Xg(t,e){!Kt.isUndefined(t)&&Kt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function wP(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Yg()),t}function CP(t,e,n){if(Kt.isString(t))try{return(e||JSON.parse)(t),Kt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var pc={transitional:_P,adapter:wP(),transformRequest:[function(e,n){if(Hg(n,"Accept"),Hg(n,"Content-Type"),Kt.isFormData(e)||Kt.isArrayBuffer(e)||Kt.isBuffer(e)||Kt.isStream(e)||Kt.isFile(e)||Kt.isBlob(e))return e;if(Kt.isArrayBufferView(e))return e.buffer;if(Kt.isURLSearchParams(e))return Xg(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Kt.isObject(e),r=n&&n["Content-Type"],o;if((o=Kt.isFileList(e))||i&&r==="multipart/form-data"){var h=this.env&&this.env.FormData;return yP(o?{"files[]":e}:e,h&&new h)}else if(i||r==="application/json")return Xg(n,"application/json"),CP(e);return e}],transformResponse:[function(e){var n=this.transitional||pc.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||r&&Kt.isString(e)&&e.length)try{return JSON.parse(e)}catch(h){if(o)throw h.name==="SyntaxError"?Vg.from(h,Vg.ERR_BAD_RESPONSE,this,null,this.response):h}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vP()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kt.forEach(["delete","get","head"],function(e){pc.headers[e]={}});Kt.forEach(["post","put","patch"],function(e){pc.headers[e]=Kt.merge(bP)});var Yh=pc,SP=on,TP=Yh,kP=function(e,n,i){var r=this||TP;return SP.forEach(i,function(h){e=h.call(r,e,n)}),e},xu,$g;function T0(){return $g||($g=1,xu=function(e){return!!(e&&e.__CANCEL__)}),xu}var Gg=on,Du=kP,OP=T0(),EP=Yh,xP=dc();function Au(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new xP}var DP=function(e){Au(e),e.headers=e.headers||{},e.data=Du.call(e,e.data,e.headers,e.transformRequest),e.headers=Gg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Gg.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||EP.adapter;return n(e).then(function(r){return Au(e),r.data=Du.call(e,r.data,r.headers,e.transformResponse),r},function(r){return OP(r)||(Au(e),r&&r.response&&(r.response.data=Du.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},kn=on,k0=function(e,n){n=n||{};var i={};function r(f,l){return kn.isPlainObject(f)&&kn.isPlainObject(l)?kn.merge(f,l):kn.isPlainObject(l)?kn.merge({},l):kn.isArray(l)?l.slice():l}function o(f){if(kn.isUndefined(n[f])){if(!kn.isUndefined(e[f]))return r(void 0,e[f])}else return r(e[f],n[f])}function h(f){if(!kn.isUndefined(n[f]))return r(void 0,n[f])}function a(f){if(kn.isUndefined(n[f])){if(!kn.isUndefined(e[f]))return r(void 0,e[f])}else return r(void 0,n[f])}function s(f){if(f in n)return r(e[f],n[f]);if(f in e)return r(void 0,e[f])}var c={url:h,method:h,data:h,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return kn.forEach(Object.keys(e).concat(Object.keys(n)),function(l){var u=c[l]||o,d=u(l);kn.isUndefined(d)&&u!==s||(i[l]=d)}),i},Pu,qg;function O0(){return qg||(qg=1,Pu={version:"0.27.2"}),Pu}var AP=O0().version,er=ho,zh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){zh[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var Kg={};zh.transitional=function(e,n,i){function r(o,h){return"[Axios v"+AP+"] Transitional option '"+o+"'"+h+(i?". "+i:"")}return function(o,h,a){if(e===!1)throw new er(r(h," has been removed"+(n?" in "+n:"")),er.ERR_DEPRECATED);return n&&!Kg[h]&&(Kg[h]=!0,console.warn(r(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,h,a):!0}};function PP(t,e,n){if(typeof t!="object")throw new er("options must be an object",er.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var o=i[r],h=e[o];if(h){var a=t[o],s=a===void 0||h(a,o,t);if(s!==!0)throw new er("option "+o+" must be "+s,er.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new er("Unknown option "+o,er.ERR_BAD_OPTION)}}var MP={assertOptions:PP,validators:zh},E0=on,IP=v0,Jg=rP,Zg=DP,gc=k0,RP=S0,x0=MP,hs=x0.validators;function Ks(t){this.defaults=t,this.interceptors={request:new Jg,response:new Jg}}Ks.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=gc(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&x0.assertOptions(i,{silentJSONParsing:hs.transitional(hs.boolean),forcedJSONParsing:hs.transitional(hs.boolean),clarifyTimeoutError:hs.transitional(hs.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(o=o&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var h=[];this.interceptors.response.forEach(function(d){h.push(d.fulfilled,d.rejected)});var a;if(!o){var s=[Zg,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(h),a=Promise.resolve(n);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=n;r.length;){var f=r.shift(),l=r.shift();try{c=f(c)}catch(u){l(u);break}}try{a=Zg(c)}catch(u){return Promise.reject(u)}for(;h.length;)a=a.then(h.shift(),h.shift());return a};Ks.prototype.getUri=function(e){e=gc(this.defaults,e);var n=RP(e.baseURL,e.url);return IP(n,e.params,e.paramsSerializer)};E0.forEach(["delete","get","head","options"],function(e){Ks.prototype[e]=function(n,i){return this.request(gc(i||{},{method:e,url:n,data:(i||{}).data}))}});E0.forEach(["post","put","patch"],function(e){function n(i){return function(o,h,a){return this.request(gc(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:h}))}}Ks.prototype[e]=n(),Ks.prototype[e+"Form"]=n(!0)});var FP=Ks,Mu,Qg;function LP(){if(Qg)return Mu;Qg=1;var t=dc();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(h){i=h});var r=this;this.promise.then(function(o){if(r._listeners){var h,a=r._listeners.length;for(h=0;h<a;h++)r._listeners[h](o);r._listeners=null}}),this.promise.then=function(o){var h,a=new Promise(function(s){r.subscribe(s),h=s}).then(o);return a.cancel=function(){r.unsubscribe(h)},a},n(function(h){r.reason||(r.reason=new t(h),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(h){i=h});return{token:r,cancel:i}},Mu=e,Mu}var Iu,em;function NP(){return em||(em=1,Iu=function(e){return function(i){return e.apply(null,i)}}),Iu}var Ru,tm;function jP(){if(tm)return Ru;tm=1;var t=on;return Ru=function(n){return t.isObject(n)&&n.isAxiosError===!0},Ru}var nm=on,BP=p0,gl=FP,UP=k0,WP=Yh;function D0(t){var e=new gl(t),n=BP(gl.prototype.request,e);return nm.extend(n,gl.prototype,e),nm.extend(n,e),n.create=function(r){return D0(UP(t,r))},n}var Tn=D0(WP);Tn.Axios=gl;Tn.CanceledError=dc();Tn.CancelToken=LP();Tn.isCancel=T0();Tn.VERSION=O0().version;Tn.toFormData=C0;Tn.AxiosError=ho;Tn.Cancel=Tn.CanceledError;Tn.all=function(e){return Promise.all(e)};Tn.spread=NP();Tn.isAxiosError=jP();Lh.exports=Tn;Lh.exports.default=Tn;var YP=Lh.exports,A0=YP,Af={exports:{}},mc={},Hh={},vc={},Ta={},Js={},Vi={},po={},Zs={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.ERROR_PACKET=mi.PACKET_TYPES_REVERSE=mi.PACKET_TYPES=void 0;const Si=Object.create(null);mi.PACKET_TYPES=Si;Si.open="0";Si.close="1";Si.ping="2";Si.pong="3";Si.message="4";Si.upgrade="5";Si.noop="6";const P0=Object.create(null);mi.PACKET_TYPES_REVERSE=P0;Object.keys(Si).forEach(t=>{P0[Si[t]]=t});const zP={type:"error",data:"parser error"};mi.ERROR_PACKET=zP;Object.defineProperty(Zs,"__esModule",{value:!0});Zs.encodePacket=Zs.encodePacketToBinary=void 0;const HP=mi,M0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",I0=typeof ArrayBuffer=="function",R0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,F0=({type:t,data:e},n,i)=>M0&&e instanceof Blob?n?i(e):im(e,i):I0&&(e instanceof ArrayBuffer||R0(e))?n?i(e):im(new Blob([e]),i):i(HP.PACKET_TYPES[t]+(e||""));Zs.encodePacket=F0;const im=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function rm(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Fu;function VP(t,e){if(M0&&t.data instanceof Blob)return t.data.arrayBuffer().then(rm).then(e);if(I0&&(t.data instanceof ArrayBuffer||R0(t.data)))return e(rm(t.data));F0(t,!1,n=>{Fu||(Fu=new TextEncoder),e(Fu.encode(n))})}Zs.encodePacketToBinary=VP;var _c={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.decode=Qs.encode=void 0;const Os="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ro=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Os.length;t++)Ro[Os.charCodeAt(t)]=t;const XP=t=>{let e=new Uint8Array(t),n,i=e.length,r="";for(n=0;n<i;n+=3)r+=Os[e[n]>>2],r+=Os[(e[n]&3)<<4|e[n+1]>>4],r+=Os[(e[n+1]&15)<<2|e[n+2]>>6],r+=Os[e[n+2]&63];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r};Qs.encode=XP;const $P=t=>{let e=t.length*.75,n=t.length,i,r=0,o,h,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),f=new Uint8Array(c);for(i=0;i<n;i+=4)o=Ro[t.charCodeAt(i)],h=Ro[t.charCodeAt(i+1)],a=Ro[t.charCodeAt(i+2)],s=Ro[t.charCodeAt(i+3)],f[r++]=o<<2|h>>4,f[r++]=(h&15)<<4|a>>2,f[r++]=(a&3)<<6|s&63;return c};Qs.decode=$P;Object.defineProperty(_c,"__esModule",{value:!0});_c.decodePacket=void 0;const Ka=mi,GP=Qs,qP=typeof ArrayBuffer=="function",KP=(t,e)=>{if(typeof t!="string")return{type:"message",data:L0(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:JP(t.substring(1),e)}:Ka.PACKET_TYPES_REVERSE[n]?t.length>1?{type:Ka.PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:Ka.PACKET_TYPES_REVERSE[n]}:Ka.ERROR_PACKET};_c.decodePacket=KP;const JP=(t,e)=>{if(qP){const n=(0,GP.decode)(t);return L0(n,e)}else return{base64:!0,data:t}},L0=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=t.createPacketDecoderStream=t.createPacketEncoderStream=void 0;const e=Zs;Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const n=_c;Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const i=mi,r="",o=(u,d)=>{const p=u.length,m=new Array(p);let g=0;u.forEach((v,_)=>{(0,e.encodePacket)(v,!1,b=>{m[_]=b,++g===p&&d(m.join(r))})})};t.encodePayload=o;const h=(u,d)=>{const p=u.split(r),m=[];for(let g=0;g<p.length;g++){const v=(0,n.decodePacket)(p[g],d);if(m.push(v),v.type==="error")break}return m};t.decodePayload=h;function a(){return new TransformStream({transform(u,d){(0,e.encodePacketToBinary)(u,p=>{const m=p.length;let g;if(m<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,m);else if(m<65536){g=new Uint8Array(3);const v=new DataView(g.buffer);v.setUint8(0,126),v.setUint16(1,m)}else{g=new Uint8Array(9);const v=new DataView(g.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(m))}u.data&&typeof u.data!="string"&&(g[0]|=128),d.enqueue(g),d.enqueue(p)})}})}t.createPacketEncoderStream=a;let s;function c(u){return u.reduce((d,p)=>d+p.length,0)}function f(u,d){if(u[0].length===d)return u.shift();const p=new Uint8Array(d);let m=0;for(let g=0;g<d;g++)p[g]=u[0][m++],m===u[0].length&&(u.shift(),m=0);return u.length&&m<u[0].length&&(u[0]=u[0].slice(m)),p}function l(u,d){s||(s=new TextDecoder);const p=[];let m=0,g=-1,v=!1;return new TransformStream({transform(_,b){for(p.push(_);;){if(m===0){if(c(p)<1)break;const y=f(p,1);v=(y[0]&128)===128,g=y[0]&127,g<126?m=3:g===126?m=1:m=2}else if(m===1){if(c(p)<2)break;const y=f(p,2);g=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),m=3}else if(m===2){if(c(p)<8)break;const y=f(p,8),C=new DataView(y.buffer,y.byteOffset,y.length),w=C.getUint32(0);if(w>Math.pow(2,21)-1){b.enqueue(i.ERROR_PACKET);break}g=w*Math.pow(2,32)+C.getUint32(4),m=3}else{if(c(p)<g)break;const y=f(p,g);b.enqueue((0,n.decodePacket)(v?y:s.decode(y),d)),m=0}if(g===0||g>u){b.enqueue(i.ERROR_PACKET);break}}}})}t.createPacketDecoderStream=l,t.protocol=4})(po);function pn(t){if(t)return ZP(t)}function ZP(t){for(var e in pn.prototype)t[e]=pn.prototype[e];return t}pn.prototype.on=pn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};pn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};pn.prototype.off=pn.prototype.removeListener=pn.prototype.removeAllListeners=pn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};pn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};pn.prototype.emitReserved=pn.prototype.emit;pn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};pn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const QP=Object.freeze(Object.defineProperty({__proto__:null,Emitter:pn},Symbol.toStringTag,{value:"Module"})),go=Ey(QP);var Hn={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.globalThisShim=void 0;Qr.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.byteLength=Hn.installTimerFunctions=Hn.pick=void 0;const tr=Qr;function eM(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}Hn.pick=eM;const tM=tr.globalThisShim.setTimeout,nM=tr.globalThisShim.clearTimeout;function iM(t,e){e.useNativeTimers?(t.setTimeoutFn=tM.bind(tr.globalThisShim),t.clearTimeoutFn=nM.bind(tr.globalThisShim)):(t.setTimeoutFn=tr.globalThisShim.setTimeout.bind(tr.globalThisShim),t.clearTimeoutFn=tr.globalThisShim.clearTimeout.bind(tr.globalThisShim))}Hn.installTimerFunctions=iM;const rM=1.33;function sM(t){return typeof t=="string"?oM(t):Math.ceil((t.byteLength||t.size)*rM)}Hn.byteLength=sM;function oM(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}var Pf={exports:{}},Lu,sm;function aM(){if(sm)return Lu;sm=1;var t=1e3,e=t*60,n=e*60,i=n*24,r=i*7,o=i*365.25;Lu=function(f,l){l=l||{};var u=typeof f;if(u==="string"&&f.length>0)return h(f);if(u==="number"&&isFinite(f))return l.long?s(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function h(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var u=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*r;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*e;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function a(f){var l=Math.abs(f);return l>=i?Math.round(f/i)+"d":l>=n?Math.round(f/n)+"h":l>=e?Math.round(f/e)+"m":l>=t?Math.round(f/t)+"s":f+"ms"}function s(f){var l=Math.abs(f);return l>=i?c(f,l,i,"day"):l>=n?c(f,l,n,"hour"):l>=e?c(f,l,e,"minute"):l>=t?c(f,l,t,"second"):f+" ms"}function c(f,l,u,d){var p=l>=u*1.5;return Math.round(f/u)+" "+d+(p?"s":"")}return Lu}function lM(t){n.debug=n,n.default=n,n.coerce=s,n.disable=o,n.enable=r,n.enabled=h,n.humanize=aM(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let l=0;for(let u=0;u<f.length;u++)l=(l<<5)-l+f.charCodeAt(u),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=e;function n(f){let l,u=null,d,p;function m(...g){if(!m.enabled)return;const v=m,_=Number(new Date),b=_-(l||_);v.diff=b,v.prev=l,v.curr=_,l=_,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,T)=>{if(w==="%%")return"%";y++;const O=n.formatters[T];if(typeof O=="function"){const A=g[y];w=O.call(v,A),g.splice(y,1),y--}return w}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return m.namespace=f,m.useColors=n.useColors(),m.color=n.selectColor(f),m.extend=i,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(f)),p),set:g=>{u=g}}),typeof n.init=="function"&&n.init(m),m}function i(f,l){const u=n(this.namespace+(typeof l>"u"?":":l)+f);return u.log=this.log,u}function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let l;const u=(typeof f=="string"?f:"").split(/[\s,]+/),d=u.length;for(l=0;l<d;l++)u[l]&&(f=u[l].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...n.names.map(a),...n.skips.map(a).map(l=>"-"+l)].join(",");return n.enable(""),f}function h(f){if(f[f.length-1]==="*")return!0;let l,u;for(l=0,u=n.skips.length;l<u;l++)if(n.skips[l].test(f))return!1;for(l=0,u=n.names.length;l<u;l++)if(n.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function s(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var cM=lM;(function(t,e){var n={};e.formatArgs=r,e.save=o,e.load=h,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(u=l))}),c.splice(u,0,f)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function h(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=cM(e);const{formatters:s}=t.exports;s.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(Pf,Pf.exports);var Ei=Pf.exports,Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.decode=Kr.encode=void 0;function uM(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}Kr.encode=uM;function fM(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}Kr.decode=fM;var hM=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.Transport=Vi.TransportError=void 0;const dM=po,pM=go,gM=Hn,mM=hM(Ei),vM=Kr,_M=(0,mM.default)("engine.io-client:transport");class N0 extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}Vi.TransportError=N0;class yM extends pM.Emitter{constructor(e){super(),this.writable=!1,(0,gM.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new N0(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):_M("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=(0,dM.decodePacket)(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=(0,vM.encode)(e);return n.length?"?"+n:""}}Vi.Transport=yM;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.yeast=Yi.decode=Yi.encode=void 0;const j0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Vl=64,B0={};let om=0,lr=0,am;function Mf(t){let e="";do e=j0[t%Vl]+e,t=Math.floor(t/Vl);while(t>0);return e}Yi.encode=Mf;function bM(t){let e=0;for(lr=0;lr<t.length;lr++)e=e*Vl+B0[t.charAt(lr)];return e}Yi.decode=bM;function wM(){const t=Mf(+new Date);return t!==am?(om=0,am=t):t+"."+Mf(om++)}Yi.yeast=wM;for(;lr<Vl;lr++)B0[j0[lr]]=lr;var eo={},yc={};Object.defineProperty(yc,"__esModule",{value:!0});yc.hasCORS=void 0;let U0=!1;try{U0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}yc.hasCORS=U0;Object.defineProperty(eo,"__esModule",{value:!0});eo.createCookieJar=eo.XHR=void 0;const CM=yc,SM=Qr;function TM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||CM.hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new SM.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}eo.XHR=TM;function kM(){}eo.createCookieJar=kM;var OM=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0});Js.Request=Js.Polling=void 0;const EM=Vi,xM=OM(Ei),DM=Yi,lm=po,Vh=eo,AM=go,cm=Hn,PM=Qr,vn=(0,xM.default)("engine.io-client:polling");function MM(){}const IM=function(){return new Vh.XHR({xdomain:!1}).responseType!=null}();class RM extends EM.Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}const n=e&&e.forceBase64;this.supportsBinary=IM&&!n,this.opts.withCredentials&&(this.cookieJar=(0,Vh.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{vn("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(vn("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){vn("pre-pause polling complete"),--i||n()})),this.writable||(vn("we are currently writing - waiting to pause"),i++,this.once("drain",function(){vn("pre-pause writing complete"),--i||n()}))}else n()}poll(){vn("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){vn("polling got data %s",e);const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};(0,lm.decodePayload)(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():vn('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{vn("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(vn("transport open - closing"),e()):(vn("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,lm.encodePayload)(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=(0,DM.yeast)()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ti(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){vn("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}Js.Polling=RM;class ti extends AM.Emitter{constructor(e,n){super(),(0,cm.installTimerFunctions)(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=(0,cm.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new Vh.XHR(n);try{vn("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},vn("xhr data %s",this.data),i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=ti.requestsCount++,ti.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=MM,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ti.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Js.Request=ti;ti.requestsCount=0;ti.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",um);else if(typeof addEventListener=="function"){const t="onpagehide"in PM.globalThisShim?"pagehide":"unload";addEventListener(t,um,!1)}}function um(){for(let t in ti.requests)ti.requests.hasOwnProperty(t)&&ti.requests[t].abort()}var bc={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.defaultBinaryType=Dn.usingBrowserWebSocket=Dn.WebSocket=Dn.nextTick=void 0;const fm=Qr;Dn.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0);Dn.WebSocket=fm.globalThisShim.WebSocket||fm.globalThisShim.MozWebSocket;Dn.usingBrowserWebSocket=!0;Dn.defaultBinaryType="arraybuffer";var FM=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});bc.WS=void 0;const LM=Vi,NM=Yi,jM=Hn,Ji=Dn,BM=FM(Ei),UM=po,WM=(0,BM.default)("engine.io-client:websocket"),hm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class YM extends LM.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=hm?{}:(0,jM.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Ji.usingBrowserWebSocket&&!hm?n?new Ji.WebSocket(e,n):new Ji.WebSocket(e):new Ji.WebSocket(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;(0,UM.encodePacket)(i,this.supportsBinary,o=>{const h={};Ji.usingBrowserWebSocket||(i.options&&(h.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(h.compress=!1));try{Ji.usingBrowserWebSocket?this.ws.send(o):this.ws.send(o,h)}catch{WM("websocket closed before onclose event")}r&&(0,Ji.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=(0,NM.yeast)()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Ji.WebSocket}}bc.WS=YM;var wc={},zM=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wc,"__esModule",{value:!0});wc.WT=void 0;const HM=Vi,VM=Dn,dm=po,XM=zM(Ei),Do=(0,XM.default)("engine.io-client:webtransport");class $M extends HM.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{Do("transport closed gracefully"),this.onClose()}).catch(e=>{Do("transport closed due to %s",e),this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=(0,dm.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=(0,dm.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this.writer=r.writable.getWriter();const o=()=>{i.read().then(({done:a,value:s})=>{if(a){Do("session is closed");return}Do("received chunk: %o",s),this.onPacket(s),o()}).catch(a=>{Do("an error occurred while reading: %s",a)})};o();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this.writer.write(h).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this.writer.write(i).then(()=>{r&&(0,VM.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}wc.WT=$M;Object.defineProperty(Ta,"__esModule",{value:!0});Ta.transports=void 0;const GM=Js,qM=bc,KM=wc;Ta.transports={websocket:qM.WS,webtransport:KM.WT,polling:GM.Polling};var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.parse=void 0;const JM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function QM(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=JM.exec(t||""),o={},h=14;for(;h--;)o[ZM[h]]=r[h]||"";return n!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=eI(o,o.path),o.queryKey=tI(o,o.query),o}ka.parse=QM;function eI(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function tI(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(n[r]=o)}),n}var nI=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vc,"__esModule",{value:!0});vc.Socket=void 0;const iI=Ta,pm=Hn,rI=Kr,gm=ka,sI=nI(Ei),oI=go,W0=po,aI=Dn,kt=(0,sI.default)("engine.io-client:socket");let Y0=class ws extends oI.Emitter{constructor(e,n={}){super(),this.binaryType=aI.defaultBinaryType,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=(0,gm.parse)(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=(0,gm.parse)(n.host).host),(0,pm.installTimerFunctions)(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,rI.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){kt('creating transport "%s"',e);const n=Object.assign({},this.opts.query);n.EIO=W0.protocol,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return kt("options: %j",i),new iI.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&ws.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(n){kt("error while creating transport: %s",n),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){kt("setting transport %s",e.name),this.transport&&(kt("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){kt('probing transport "%s"',e);let n=this.createTransport(e),i=!1;ws.priorWebsocketSuccess=!1;const r=()=>{i||(kt('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",l=>{if(!i)if(l.type==="pong"&&l.data==="probe"){if(kt('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ws.priorWebsocketSuccess=n.name==="websocket",kt('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(kt("changing transport and sending upgrade packet"),f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{kt('probe transport "%s" failed',e);const u=new Error("probe error");u.transport=n.name,this.emitReserved("upgradeError",u)}}))};function o(){i||(i=!0,f(),n.close(),n=null)}const h=l=>{const u=new Error("probe error: "+l);u.transport=n.name,o(),kt('probe transport "%s" failed because of error: %s',e,l),this.emitReserved("upgradeError",u)};function a(){h("transport closed")}function s(){h("socket closed")}function c(l){n&&l.name!==n.name&&(kt('"%s" works - aborting "%s"',l.name,n.name),o())}const f=()=>{n.removeListener("open",r),n.removeListener("error",h),n.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};n.once("open",r),n.once("error",h),n.once("close",a),this.once("close",s),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(kt("socket open"),this.readyState="open",ws.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){kt("starting upgrade probes");let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(kt('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else kt('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();kt("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=(0,pm.byteLength)(r)),i>0&&n>this.maxPayload)return kt("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);n+=2}return kt("payload size is %d (max: %d)",n,this.maxPayload),this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:n,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),kt("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){kt("socket error %j",e),ws.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(kt('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const r=e.length;for(;i<r;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};vc.Socket=Y0;Y0.protocol=W0.protocol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.Socket=void 0;const e=vc;Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return e.Socket}}),t.protocol=e.Socket.protocol;var n=Vi;Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Ta;Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var r=Hn;Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return r.installTimerFunctions}});var o=ka;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}});var h=Dn;Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return h.nextTick}})})(Hh);var lI=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mc,"__esModule",{value:!0});mc.url=void 0;const cI=Hh,uI=lI(Ei),mm=uI.default("socket.io-client:url");function fI(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(mm("protocol-less url %s",t),typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),mm("parse %s",t),i=cI.parse(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}mc.url=fI;var Cc={},Oa={},Sc={},to={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.hasBinary=Jr.isBinary=void 0;const hI=typeof ArrayBuffer=="function",dI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,z0=Object.prototype.toString,pI=typeof Blob=="function"||typeof Blob<"u"&&z0.call(Blob)==="[object BlobConstructor]",gI=typeof File=="function"||typeof File<"u"&&z0.call(File)==="[object FileConstructor]";function H0(t){return hI&&(t instanceof ArrayBuffer||dI(t))||pI&&t instanceof Blob||gI&&t instanceof File}Jr.isBinary=H0;function ml(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(ml(t[n]))return!0;return!1}if(H0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ml(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&ml(t[n]))return!0;return!1}Jr.hasBinary=ml;Object.defineProperty(to,"__esModule",{value:!0});to.reconstructPacket=to.deconstructPacket=void 0;const mI=Jr;function vI(t){const e=[],n=t.data,i=t;return i.data=If(n,e),i.attachments=e.length,{packet:i,buffers:e}}to.deconstructPacket=vI;function If(t,e){if(!t)return t;if((0,mI.isBinary)(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=If(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=If(t[i],e));return n}return t}function _I(t,e){return t.data=Rf(t.data,e),delete t.attachments,t}to.reconstructPacket=_I;function Rf(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Rf(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Rf(t[n],e));return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const e=go,n=to,i=Jr,o=(0,Ei.default)("socket.io-parser"),h=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];t.protocol=5;var a;(function(u){u[u.CONNECT=0]="CONNECT",u[u.DISCONNECT=1]="DISCONNECT",u[u.EVENT=2]="EVENT",u[u.ACK=3]="ACK",u[u.CONNECT_ERROR=4]="CONNECT_ERROR",u[u.BINARY_EVENT=5]="BINARY_EVENT",u[u.BINARY_ACK=6]="BINARY_ACK"})(a=t.PacketType||(t.PacketType={}));class s{constructor(d){this.replacer=d}encode(d){return o("encoding packet %j",d),(d.type===a.EVENT||d.type===a.ACK)&&(0,i.hasBinary)(d)?this.encodeAsBinary({type:d.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:d.nsp,data:d.data,id:d.id}):[this.encodeAsString(d)]}encodeAsString(d){let p=""+d.type;return(d.type===a.BINARY_EVENT||d.type===a.BINARY_ACK)&&(p+=d.attachments+"-"),d.nsp&&d.nsp!=="/"&&(p+=d.nsp+","),d.id!=null&&(p+=d.id),d.data!=null&&(p+=JSON.stringify(d.data,this.replacer)),o("encoded %j as %s",d,p),p}encodeAsBinary(d){const p=(0,n.deconstructPacket)(d),m=this.encodeAsString(p.packet),g=p.buffers;return g.unshift(m),g}}t.Encoder=s;function c(u){return Object.prototype.toString.call(u)==="[object Object]"}class f extends e.Emitter{constructor(d){super(),this.reviver=d}add(d){let p;if(typeof d=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(d);const m=p.type===a.BINARY_EVENT;m||p.type===a.BINARY_ACK?(p.type=m?a.EVENT:a.ACK,this.reconstructor=new l(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,i.isBinary)(d)||d.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(d),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+d)}decodeString(d){let p=0;const m={type:Number(d.charAt(0))};if(a[m.type]===void 0)throw new Error("unknown packet type "+m.type);if(m.type===a.BINARY_EVENT||m.type===a.BINARY_ACK){const v=p+1;for(;d.charAt(++p)!=="-"&&p!=d.length;);const _=d.substring(v,p);if(_!=Number(_)||d.charAt(p)!=="-")throw new Error("Illegal attachments");m.attachments=Number(_)}if(d.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(d.charAt(p)===","||p===d.length););m.nsp=d.substring(v,p)}else m.nsp="/";const g=d.charAt(p+1);if(g!==""&&Number(g)==g){const v=p+1;for(;++p;){const _=d.charAt(p);if(_==null||Number(_)!=_){--p;break}if(p===d.length)break}m.id=Number(d.substring(v,p+1))}if(d.charAt(++p)){const v=this.tryParse(d.substr(p));if(f.isPayloadValid(m.type,v))m.data=v;else throw new Error("invalid payload")}return o("decoded %s as %j",d,m),m}tryParse(d){try{return JSON.parse(d,this.reviver)}catch{return!1}}static isPayloadValid(d,p){switch(d){case a.CONNECT:return c(p);case a.DISCONNECT:return p===void 0;case a.CONNECT_ERROR:return typeof p=="string"||c(p);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&h.indexOf(p[0])===-1);case a.ACK:case a.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=f;class l{constructor(d){this.packet=d,this.buffers=[],this.reconPack=d}takeBinaryData(d){if(this.buffers.push(d),this.buffers.length===this.reconPack.attachments){const p=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(Sc);var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.on=void 0;function yI(t,e,n){return t.on(e,n),function(){t.off(e,n)}}Ea.on=yI;var bI=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Socket=void 0;const qn=Sc,Ja=Ea,wI=go,CI=bI(Ei),Ht=CI.default("socket.io-client:socket"),SI=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class TI extends wI.Emitter{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ja.on(e,"open",this.onopen.bind(this)),Ja.on(e,"packet",this.onpacket.bind(this)),Ja.on(e,"error",this.onerror.bind(this)),Ja.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(SI.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:qn.PacketType.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++;Ht("emitting packet with ack id %d",h);const a=n.pop();this._registerAckCallback(h,a),i.id=h}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?Ht("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&(Ht("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(a,1));Ht("event with ack id %d has timed out after %d ms",e,r),n.call(this,new Error("operation has timed out"))},r),h=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};h.withError=!0,this.acks[e]=h}emitWithAck(e,...n){return new Promise((i,r)=>{const o=(h,a)=>h?r(h):i(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(Ht("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),n&&n(r)):(Ht("packet [%d] was successfully sent",i.id),this._queue.shift(),n&&n(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(Ht("draining queue"),!this.connected||this._queue.length===0)return;const n=this._queue[0];if(n.pending&&!e){Ht("packet [%d] has already been sent and is waiting for an ack",n.id);return}n.pending=!0,n.tryCount++,Ht("sending packet [%d] (try n°%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Ht("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qn.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){Ht("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qn.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qn.PacketType.EVENT:case qn.PacketType.BINARY_EVENT:this.onevent(e);break;case qn.PacketType.ACK:case qn.PacketType.BINARY_ACK:this.onack(e);break;case qn.PacketType.DISCONNECT:this.ondisconnect();break;case qn.PacketType.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];Ht("emitting event %j",n),e.id!=null&&(Ht("attaching ack callback to event"),n.push(this.ack(e.id))),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,Ht("sending ack %j",r),n.packet({type:qn.PacketType.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];if(typeof n!="function"){Ht("bad ack %s",e.id);return}delete this.acks[e.id],Ht("calling ack %s with %j",e.id,e.data),n.withError&&e.data.unshift(null),n.apply(this,e.data)}onconnect(e,n){Ht("socket connected with id %s",e),this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){Ht("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Ht("performing disconnect (%s)",this.nsp),this.packet({type:qn.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}Oa.Socket=TI;var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Backoff=void 0;function mo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Tc.Backoff=mo;mo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};mo.prototype.reset=function(){this.attempts=0};mo.prototype.setMin=function(t){this.ms=t};mo.prototype.setMax=function(t){this.max=t};mo.prototype.setJitter=function(t){this.jitter=t};var kI=Le&&Le.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),OI=Le&&Le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EI=Le&&Le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&kI(e,t,n);return OI(e,t),e},xI=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.Manager=void 0;const Nu=Hh,DI=Oa,AI=EI(Sc),Cr=Ea,PI=Tc,MI=go,II=xI(Ei),tn=II.default("socket.io-client:manager");class RI extends MI.Emitter{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Nu.installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new PI.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||AI;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(tn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;tn("opening %s",this.uri),this.engine=new Nu.Socket(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Cr.on(n,"open",function(){i.onopen(),e&&e()}),o=a=>{tn("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},h=Cr.on(n,"error",o);if(this._timeout!==!1){const a=this._timeout;tn("connect attempt will timeout after %d",a);const s=this.setTimeoutFn(()=>{tn("connect attempt timed out after %d",a),r(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(h),this}connect(e){return this.open(e)}onopen(){tn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Cr.on(e,"ping",this.onping.bind(this)),Cr.on(e,"data",this.ondata.bind(this)),Cr.on(e,"error",this.onerror.bind(this)),Cr.on(e,"close",this.onclose.bind(this)),Cr.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Nu.nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){tn("error",e),this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new DI.Socket(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active){tn("socket %s is still active, skipping close",i);return}this._close()}_packet(e){tn("writing packet %j",e);const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){tn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){tn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){tn("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)tn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();tn("will wait %dms before reconnect attempt",n),this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(tn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(tn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(tn("reconnect success"),e.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}Cc.Manager=RI;(function(t,e){var n=Le&&Le.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const i=mc,r=Cc;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});const o=Oa;Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(Ei).default("socket.io-client"),s={};function c(l,u){typeof l=="object"&&(u=l,l=void 0),u=u||{};const d=i.url(l,u.path||"/socket.io"),p=d.source,m=d.id,g=d.path,v=s[m]&&g in s[m].nsps,_=u.forceNew||u["force new connection"]||u.multiplex===!1||v;let b;return _?(a("ignoring socket cache for %s",p),b=new r.Manager(p,u)):(s[m]||(a("new io instance for %s",p),s[m]=new r.Manager(p,u)),b=s[m]),d.query&&!u.query&&(u.query=d.queryKey),b.socket(d.path,u)}e.io=c,e.connect=c,e.default=c,Object.assign(c,{Manager:r.Manager,Socket:o.Socket,io:c,connect:c});var f=Sc;Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return f.protocol}}),t.exports=c})(Af,Af.exports);var FI=Af.exports,Xh={},Sr=Le&&Le.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(Xh,"__esModule",{value:!0});class LI{constructor(e){this.cloudConvert=e}get(e,n=null){return Sr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{params:n||{}})).data.data})}wait(e){return Sr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`jobs/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}all(e=null){return Sr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Sr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e,{maxBodyLength:1/0})).data.data})}delete(e){return Sr(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`jobs/${e}`)})}subscribeEvent(e,n,i){return Sr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return Sr(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-job.${e}.tasks`,`task.${n}`,i)})}getExportUrls(e){return e.tasks.filter(n=>n.operation==="export/url"&&n.status==="finished").flatMap(n=>{var i,r;return(r=(i=n.result)===null||i===void 0?void 0:i.files)!==null&&r!==void 0?r:[]})}}Xh.default=LI;var $h={},NI=typeof self=="object"?self.FormData:window.FormData,Zi=Le&&Le.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})},V0=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($h,"__esModule",{value:!0});const jI=V0(NI),BI=V0(A0),vm=Fr;class UI{constructor(e){this.cloudConvert=e}get(e,n=null){return Zi(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{params:n||{}})).data.data})}wait(e){return Zi(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get(`tasks/${e}`,{baseURL:this.cloudConvert.useSandbox?"https://sync.api.sandbox.cloudconvert.com/v2/":`https://${this.cloudConvert.region?this.cloudConvert.region+".":""}sync.api.cloudconvert.com/v2/`})).data.data})}cancel(e){return Zi(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(`tasks/${e}/cancel`)).data.data})}all(e=null){return Zi(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,n=null){return Zi(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,n)).data.data})}delete(e){return Zi(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete(`tasks/${e}`)})}upload(e,n,i=null,r=null){return Zi(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const o=new jI.default;for(const a in e.result.form.parameters)o.append(a,e.result.form.parameters[a]);const h={};return i&&(h.filename=i),r?h.knownLength=r:n instanceof vm.ReadStream&&(h.knownLength=(0,vm.statSync)(n.path).size),o.append("file",n,h),yield BI.default.post(e.result.form.url,o,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign(Object.assign({},o.hasKnownLength()?{"Content-Length":o.getLengthSync()}:{}),o.getHeaders())})})}subscribeEvent(e,n,i){return Zi(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-task.${e}`,`task.${n}`,i)})}}$h.default=UI;var Gh={},ju=Le&&Le.__awaiter||function(t,e,n,i){function r(o){return o instanceof n?o:new n(function(h){h(o)})}return new(n||(n=Promise))(function(o,h){function a(f){try{c(i.next(f))}catch(l){h(l)}}function s(f){try{c(i.throw(f))}catch(l){h(l)}}function c(f){f.done?o(f.value):r(f.value).then(a,s)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(Gh,"__esModule",{value:!0});class WI{constructor(e){this.cloudConvert=e}me(){return ju(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,n,i){return ju(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.jobs`,`job.${n}`,i)})}subscribeTaskEvent(e,n,i){return ju(this,void 0,void 0,function*(){this.cloudConvert.subscribe(`private-user.${e}.tasks`,`task.${n}`,i)})}}Gh.default=WI;var qh={},YI=Le&&Le.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),zI=Le&&Le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),HI=Le&&Le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&YI(e,t,n);return zI(e,t),e};Object.defineProperty(qh,"__esModule",{value:!0});const VI=HI(Fr);class XI{verify(e,n,i){const o=VI.createHmac("sha256",i).update(Buffer.from(e,"utf-8")).digest("hex");return n===o}}qh.default=XI;const $I="cloudconvert",GI="2.3.6",qI="MIT",KI="Official Node.js SDK for the CloudConvert API",JI="https://github.com/cloudconvert/cloudconvert-node",ZI="Josias Montag <josias@montag.info>",QI="built/lib/index.js",eR="built/lib/index.d.ts",tR="built/lib/CloudConvert.js",nR={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},iR={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},rR={axios:"^0.27.2","form-data":"^4.0.0","socket.io-client":"^4.6.1"},sR={"@types/node":"^18.14.0","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.53.0",chai:"^4.3.7",eslint:"^8.34.0","eslint-config-prettier":"^8.6.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^4.2.1",esm:"^3.2.25",mocha:"^8.4.0",nock:"^13.3.0",prettier:"^2.8.4",typescript:"^4.9.5"},oR={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."},aR={name:$I,version:GI,license:qI,description:KI,homepage:JI,author:ZI,main:QI,types:eR,module:tR,repository:nR,bugs:iR,dependencies:rR,devDependencies:sR,scripts:oR};var Kh={},lR=Le&&Le.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),cR=Le&&Le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uR=Le&&Le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&lR(e,t,n);return cR(e,t),e};Object.defineProperty(Kh,"__esModule",{value:!0});const fR=uR(Fr);class hR{sign(e,n,i,r){const o=JSON.stringify(i),a=Buffer.from(o||"").toString("base64").replace("+","-").replace("/","_").replace(/=+$/,"");let s=`${e}?job=${a}`;r&&(s+=`&cache_key=${r}`);const f=fR.createHmac("sha256",n).update(Buffer.from(s,"utf-8")).digest("hex");return s+=`&s=${f}`,s}}Kh.default=hR;var es=Le&&Le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d0,"__esModule",{value:!0});const dR=es(A0),pR=es(FI),gR=es(Xh),mR=es($h),vR=es(Gh),_R=es(qh),yR=aR,bR=es(Kh);class wR{constructor(e,n=!1,i=null){this.apiKey=e,this.useSandbox=n,this.region=i,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=dR.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":`https://${this.region?this.region+".":""}api.cloudconvert.com/v2/`,headers:{Authorization:`Bearer ${this.apiKey}`,"User-Agent":`cloudconvert-node/v${yR.version} (https://github.com/cloudconvert/cloudconvert-node)`}})}createResources(){this.tasks=new mR.default(this),this.jobs=new gR.default(this),this.users=new vR.default(this),this.webhooks=new _R.default,this.signedUrls=new bR.default}subscribe(e,n,i){var r,o;this.socket||(this.socket=pR.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),!((r=this.subscribedChannels)===null||r===void 0)&&r.get(e)||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:`Bearer ${this.apiKey}`}}}),(o=this.subscribedChannels)===null||o===void 0||o.set(e,!0)),this.socket.on(n,function(h,a){e===h&&i(a)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var CR=d0.default=wR;const Ir=async(t,e,n,i)=>{const o=await(await fetch(t)).blob();return X0(o,e,n,i)},X0=(t,e,n,i,r="")=>new Promise((o,h)=>{const a=OA(FA,e),s=TA(a,t,i);s.on("state_changed",c=>{const f=c.bytesTransferred/c.totalBytes*100;n({progress:f,uploadMsg:r})},c=>{n({error:c,uploadMsg:r})},()=>{kA(s.snapshot.ref).then(c=>{const f={url:c,metadata:s.snapshot.metadata,fileName:s.snapshot.metadata.fullPath,extension:i.extension,size:s.snapshot.totalBytes};n({success:!0,uploadMsg:r}),o(f)})})});function SR(t,e,n){return new Promise(async(i,r)=>{try{const o=new CR("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMWIzNWRhYTc3MmZkZTI0ZDI1ODBiMTNiNDkyMWMyNDkzMmE5ZDJhYzk1OTQzNGIzMTQwYWM0NDEyNGI4ZDRjMDFkNDQwYmJkMDJlYzZmNzEiLCJpYXQiOjE2NDY2MjM0MTEuMDAxMjg5LCJuYmYiOjE2NDY2MjM0MTEuMDAxMjkyLCJleHAiOjQ4MDIyOTcwMTAuOTk3ODMzLCJzdWIiOiI0MzczODU0NiIsInNjb3BlcyI6WyJ1c2VyLnJlYWQiLCJ1c2VyLndyaXRlIiwidGFzay5yZWFkIiwidGFzay53cml0ZSIsIndlYmhvb2sucmVhZCIsIndlYmhvb2sud3JpdGUiXX0.TLmy-ePeLIxA8VE7TkWuQU1jCUSQ6smRW-tKQjGcU0Z7cwR2fE7p5Jd-7QYVI-f6zM6IUKH6JTFRgE9N_4W9ldwLe6Rx-XyOl8v3Rh1Cp4MUIb5kThF-c2uj5hsMIHj1pmFflmNpHB3jL4Mb7To6CCwpw_5Q7BUVpYOG_eHAXboWCGnfb62hFjjbHTLzm0rfSLH-8eiCikzKovjD1W2xK05Rc4ZTjCKikivHqkKpcQjxuH8bEu2mnoHP-flqknIz8kn3yzp3hc55jd5l-QFG8AZ8fcjsVx8MpoRHW4k1lcDjvgIlatYFfHXnmjXnFm9aUwDiPP0XNbRfUjYUoi0jzt7l004sdnyh8_ZOboz1dB0EoGBg0L9NK4V6BZx_Ne59czgh5LdmbBaByVCc26LGZkA6DnZg_PTz7UYQ924xGtjWwFFYffCjRNH9r7AfmE4656KNNaeVwORygRwzL4QbAnjWYKtQUpOOtSiD3xUSENIF4uYLQRthaqvkdxi92LrF2r9MaeDAWqxPV7nLYPSeOUS_Qc75n1F0Ke3VCuE5Z2n_lYkklhGVPSS4jXJJJ7mAJolwp-zlKMYLHINRmZ08AgjV39tCtA--EJVikinVX7Wg7RLL-nRkWRFfI_UgM7OVirqb4O1OJb8MfqRAwfLhj6lDCNTxA4ycI8s0f6x9lR8");let h=await o.jobs.create({tasks:{"import-1":{operation:"import/url",url:`${t.url}`},"task-1":{operation:"convert",input:["import-1"],output_format:"svg"},"export-1":{operation:"export/url",input:["task-1"],inline:!0,archive_multiple_files:!1}},tag:"jobbuilder"});o.jobs.subscribeTaskEvent(h.id,"finished",async a=>{if(a.task.name==="import-1"&&n({uploadMsg:"원본파일을 분석중 입니다.",progress:30}),a.task.name==="export-1"){const s=await Ir(a.task.result.files[0].url,e,n,{extension:"svg"});i(s)}})}catch(o){r(o)}})}let Za;const TR=new Uint8Array(16);function kR(){if(!Za&&(Za=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Za))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Za(TR)}const nn=[];for(let t=0;t<256;++t)nn.push((t+256).toString(16).slice(1));function OR(t,e=0){return nn[t[e+0]]+nn[t[e+1]]+nn[t[e+2]]+nn[t[e+3]]+"-"+nn[t[e+4]]+nn[t[e+5]]+"-"+nn[t[e+6]]+nn[t[e+7]]+"-"+nn[t[e+8]]+nn[t[e+9]]+"-"+nn[t[e+10]]+nn[t[e+11]]+nn[t[e+12]]+nn[t[e+13]]+nn[t[e+14]]+nn[t[e+15]]}const ER=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_m={randomUUID:ER};function xr(t,e,n){if(_m.randomUUID&&!e&&!t)return _m.randomUUID();t=t||{};const i=t.random||(t.rng||kR)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return OR(i)}function ym(t,e,n){const i=t.slice();return i[8]=e[n],i}function xR(t){let e,n,i,r,o,h,a;n=new PE({}),n.$on("drop",t[9]);let s=Me(t[5]),c=[];for(let f=0;f<s.length;f+=1)c[f]=bm(ym(t,s,f));return{c(){e=E("div"),de(n.$$.fragment),i=V(),r=E("div"),r.innerHTML='<h1 class="font-semibold text-lg">이미지 보관함</h1> <span class="text-xs">사용하실 이미지를 선택해 주세요.</span>',o=V(),h=E("div");for(let f=0;f<c.length;f+=1)c[f].c();S(e,"class","mt-3 overflow-y-auto gap-4"),S(r,"class","flex gap-3 items-center mt-3"),S(h,"class","grid gap-3 grid-cols-2 md:grid-cols-4 mt-5")},m(f,l){j(f,e,l),ue(n,e,null),j(f,i,l),j(f,r,l),j(f,o,l),j(f,h,l);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(h,null);a=!0},p(f,l){if(l[0]&65568){s=Me(f[5]);let u;for(u=0;u<s.length;u+=1){const d=ym(f,s,u);c[u]?c[u].p(d,l):(c[u]=bm(d),c[u].c(),c[u].m(h,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}},i(f){a||(R(n.$$.fragment,f),a=!0)},o(f){H(n.$$.fragment,f),a=!1},d(f){f&&(N(e),N(i),N(r),N(o),N(h)),fe(n),Dt(c,f)}}}function DR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b=t[1]&&wm(t);c=new Se({props:{icon:"fe:crop",height:25}});let y=t[6].usePicWish&&Cm(t);return{c(){e=E("div"),n=E("img"),o=V(),b&&b.c(),h=V(),a=E("div"),s=E("button"),de(c.$$.fragment),f=V(),l=E("span"),l.textContent="자르기",u=V(),y&&y.c(),d=V(),p=E("div"),m=E("button"),m.textContent="이미지 등록",S(n,"id","upload-image-ori"),Xe(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt",r=t[8].name),S(l,"class","text-2xs"),S(s,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(s,"type","button"),S(a,"class","absolute left-0 top-10 flex flex-col gap-2"),S(e,"class","p-1 relative image-container overflow-y-auto svelte-1cs98qz"),S(m,"class","btn primary-btn"),S(p,"class","actions mt-3 flex justify-center gap-2")},m(C,w){j(C,e,w),k(e,n),t[19](n),k(e,o),b&&b.m(e,null),k(e,h),k(e,a),k(a,s),ue(c,s,null),k(s,f),k(s,l),k(a,u),y&&y.m(a,null),j(C,d,w),j(C,p,w),k(p,m),g=!0,v||(_=[Q(s,"click",t[22]),Q(m,"click",t[25])],v=!0)},p(C,w){(!g||w[0]&256&&!Xe(n.src,i=C[8].url))&&S(n,"src",i),(!g||w[0]&256&&r!==(r=C[8].name))&&S(n,"alt",r),C[1]?b?(b.p(C,w),w[0]&2&&R(b,1)):(b=wm(C),b.c(),R(b,1),b.m(e,h)):b&&(ke(),H(b,1,1,()=>{b=null}),Oe()),C[6].usePicWish?y?(y.p(C,w),w[0]&64&&R(y,1)):(y=Cm(C),y.c(),R(y,1),y.m(a,null)):y&&(ke(),H(y,1,1,()=>{y=null}),Oe())},i(C){g||(R(b),R(c.$$.fragment,C),R(y),g=!0)},o(C){H(b),H(c.$$.fragment,C),H(y),g=!1},d(C){C&&(N(e),N(d),N(p)),t[19](null),b&&b.d(),fe(c),y&&y.d(),v=!1,We(_)}}}function bm(t){let e,n,i,r,o,h,a;function s(){return t[26](t[8])}return{c(){e=E("button"),n=E("img"),o=V(),Xe(n.src,i=t[8].thumbnail.url)||S(n,"src",i),S(n,"alt",r=t[8].thumbnail.fileName),S(n,"class","object-contain"),S(e,"class","image-container flex border rounded svelte-1cs98qz")},m(c,f){j(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f[0]&32&&!Xe(n.src,i=t[8].thumbnail.url)&&S(n,"src",i),f[0]&32&&r!==(r=t[8].thumbnail.fileName)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function wm(t){let e,n,i,r,o,h,a,s,c,f,l;return i=new Se({props:{icon:"mdi:success-bold"}}),a=new Se({props:{icon:"mdi:success-bold"}}),{c(){e=E("div"),n=E("button"),de(i.$$.fragment),r=we(" 자르기"),o=V(),h=E("button"),de(a.$$.fragment),s=we(" 취소"),S(n,"type","button"),S(n,"class","btn primary-btn"),S(h,"type","button"),S(h,"class","btn primary-btn"),S(e,"class","sticky bottom-0 flex w-full p-3")},m(u,d){j(u,e,d),k(e,n),ue(i,n,null),k(n,r),k(e,o),k(e,h),ue(a,h,null),k(h,s),c=!0,f||(l=[Q(n,"click",t[20]),Q(h,"click",t[21])],f=!0)},p:ge,i(u){c||(R(i.$$.fragment,u),R(a.$$.fragment,u),c=!0)},o(u){H(i.$$.fragment,u),H(a.$$.fragment,u),c=!1},d(u){u&&N(e),fe(i),fe(a),f=!1,We(l)}}}function Cm(t){let e,n,i,r;const o=[PR,AR],h=[];function a(s,c){return s[0]?0:1}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=et()},m(s,c){h[e].m(s,c),j(s,i,c),r=!0},p(s,c){let f=e;e=a(s),e===f?h[e].p(s,c):(ke(),H(h[f],1,1,()=>{h[f]=null}),Oe(),n=h[e],n?n.p(s,c):(n=h[e]=o[e](s),n.c()),R(n,1),n.m(i.parentNode,i))},i(s){r||(R(n),r=!0)},o(s){H(n),r=!1},d(s){s&&N(i),h[e].d(s)}}}function AR(t){let e,n,i,r,o,h,a;return n=new Se({props:{icon:"material-symbols-light:background-replace-rounded",height:25}}),{c(){e=E("button"),de(n.$$.fragment),i=V(),r=E("span"),r.textContent="배경지우기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){j(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Q(e,"click",t[24]),h=!0)},p:ge,i(s){o||(R(n.$$.fragment,s),o=!0)},o(s){H(n.$$.fragment,s),o=!1},d(s){s&&N(e),fe(n),h=!1,a()}}}function PR(t){let e,n,i,r,o,h,a;return n=new Se({props:{icon:"iconoir:redo",height:25}}),{c(){e=E("button"),de(n.$$.fragment),i=V(),r=E("span"),r.textContent="되돌리기",S(r,"class","text-2xs"),S(e,"class","flex white-btn circle-btn items-center justify-center shadow-lg flex-col gap-1"),S(e,"type","button")},m(s,c){j(s,e,c),ue(n,e,null),k(e,i),k(e,r),o=!0,h||(a=Q(e,"click",t[23]),h=!0)},p:ge,i(s){o||(R(n.$$.fragment,s),o=!0)},o(s){H(n.$$.fragment,s),o=!1},d(s){s&&N(e),fe(n),h=!1,a()}}}function Sm(t){let e,n;return e=new Lb({props:{$$slots:{default:[MR]},$$scope:{ctx:t}}}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&16|r[1]&8&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function MR(t){let e;return{c(){e=we(t[4])},m(n,i){j(n,e,i)},p(n,i){i[0]&16&&He(e,n[4])},d(n){n&&N(e)}}}function IR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;o=new Se({props:{icon:"mingcute:left-line",height:"30"}});const p=[DR,xR],m=[];function g(_,b){return _[8]?0:1}a=g(t),s=m[a]=p[a](t);let v=t[3]&&Sm(t);return{c(){e=E("div"),n=E("h2"),i=we(`이미지 업로드\r
        `),r=E("button"),de(o.$$.fragment),h=V(),s.c(),c=V(),v&&v.c(),f=et(),S(r,"type","button"),S(r,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(_,b){j(_,e,b),k(e,n),k(n,i),k(n,r),ue(o,r,null),k(e,h),m[a].m(e,null),j(_,c,b),v&&v.m(_,b),j(_,f,b),l=!0,u||(d=Q(r,"click",t[18]),u=!0)},p(_,b){let y=a;a=g(_),a===y?m[a].p(_,b):(ke(),H(m[y],1,1,()=>{m[y]=null}),Oe(),s=m[a],s?s.p(_,b):(s=m[a]=p[a](_),s.c()),R(s,1),s.m(e,null)),_[3]?v?(v.p(_,b),b[0]&8&&R(v,1)):(v=Sm(_),v.c(),R(v,1),v.m(f.parentNode,f)):v&&(ke(),H(v,1,1,()=>{v=null}),Oe())},i(_){l||(R(o.$$.fragment,_),R(s),R(v),l=!0)},o(_){H(o.$$.fragment,_),H(s),H(v),l=!1},d(_){_&&(N(e),N(c),N(f)),fe(o),m[a].d(),v&&v.d(_),u=!1,d()}}}function ds(t){console.log({e:t})}function RR(t,e,n){let i,r,o,h,a;je(t,zo,ne=>n(5,i=ne)),je(t,Re,ne=>n(29,r=ne)),je(t,Zo,ne=>n(30,o=ne)),je(t,co,ne=>n(6,h=ne)),je(t,Qt,ne=>n(7,a=ne));let{handleAddUpload:s}=e;zt();let c=null,f=null,l=null,u={},d=null,p=null,m=!1,g="";async function v(ne){n(3,m=!0);try{const x=ne.detail;if(x.length>0){const P=x[0],L=new FileReader,I=Lx(P);if(I==="psd"||I==="svg"||I==="ai"||I==="eps"||I==="pdf"){n(4,g="이미지를 업로드중 입니다.");const Z={},F=`editorData/${r.uuid}/`,D={extension:I},X=await X0(P,`${F}${xr()}.${I}`,ds,D);switch(console.log({uploadFile:X}),Z.origin=X,I){case"svg":Z.thumbnail=X;break;case"ai":case"eps":case"pdf":n(4,g="파일을 이미지로 변환중입니다.");const J=await SR(X,`${F}${xr()}.svg`,ds);Z.thumbnail=J,console.log({covertSVG:J});break;case"psd":n(4,g="썸네일을 생성중 입니다.");const re=await hg({fileName:X.fileName,extension:I,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});if(re.original){const $=await Ir(re.original,`${F}${xr()}.png`,ds,D);Z.convert=$}n(4,g="썸네일을 업로드중 입니다.");const te=await Ir(re.thumbnail,`${F}${xr()}.png`,ds,D);Z.thumbnail=te;break;default:break}console.log({uploaded:Z}),ye(Re,r.uploads=[...r.uploads,Z],r),ye(zo,i=[...i,Z],i),n(3,m=!1);return}if(I!=="png"&&I!=="jpg"&&I!=="jpeg"&&I!=="gif"&&I!=="webp"){alert("지원하지 않는 파일 형식입니다."),n(3,m=!1);return}L.onload=function(Z){const F=Z.target.result,D=new Image;D.src=F,D.onload=function(){const X=D.width,J=D.height;n(8,c={url:F,width:X,height:J,extension:I})},n(3,m=!1)},L.readAsDataURL(P)}}catch(x){console.log({error:x}),n(3,m=!1)}}function _(){n(1,d=new Mb(p,{crop(ne){u=ne.detail}}))}function b(){n(8,c={url:f}),n(0,f=null)}async function y(){if(l){n(0,f=c.url),n(8,c={url:l});return}try{n(3,m=!0),n(4,g="AI 배경제거를 진행중 입니다."),n(8,c.url=c.url.replace(/^data:image\/png;base64,/,""),c),n(8,c.url=c.url.replace(/^data:image\/jpeg;base64,/,""),c),n(8,c.url=c.url.replace(/^data:image\/gif;base64,/,""),c);const ne=await Cx(h.id,c.url);if(ne.status===200)n(0,f=`data:image/png;base64, ${c.url}`),l=`data:image/png;base64, ${ne.data.image}`,n(8,c={url:l});else throw new Error("배경제거에 실패했습니다.")}catch(ne){console.log({error:ne})}finally{n(4,g=""),n(3,m=!1)}}function C(){d&&(d.destroy(),n(1,d=null))}async function w(){try{n(3,m=!0),n(4,g="이미지를 업로드중 입니다.");const ne={},x=`editorData/${r.uuid}/`,P={width:c.width,height:c.height,extension:c.extension},L=await Ir(c.url,`${x}${xr()}.${c.extension}`,ds,P);ne.origin=L,ne.convert=L,console.log({uploadFile:L}),n(4,g="썸네일을 생성중 입니다.");const I=await hg({fileName:L.fileName,width:r.prints[o].canvasWidth,height:r.prints[o].height/r.prints[o].width*r.prints[o].canvasWidth});n(4,g="썸네일을 업로드중 입니다.");const Z=await Ir(I.thumbnail,`${x}${xr()}.png`,ds,P);ne.thumbnail=Z,ye(Re,r.uploads=[...r.uploads,ne],r),ye(zo,i=[...i,ne],i),n(8,c=null)}catch(ne){console.log({error:ne})}finally{n(4,g=""),n(3,m=!1)}}function T(){const ne=document.createElement("canvas"),x=ne.getContext("2d"),{x:P,y:L,width:I,height:Z}=u;ne.width=I,ne.height=Z,x.drawImage(p,-P,-L),n(8,c={url:ne.toDataURL("image/png"),width:I,height:Z,extension:"png"}),C()}function O(ne){s(ne)}const A=()=>ye(Qt,a=null,a);function M(ne){nt[ne?"unshift":"push"](()=>{p=ne,n(2,p)})}const Y=()=>T(),U=()=>C(),K=()=>_(),q=()=>b(),B=()=>y(),W=()=>w(),ee=ne=>O(ne);return t.$$set=ne=>{"handleAddUpload"in ne&&n(17,s=ne.handleAddUpload)},[f,d,p,m,g,i,h,a,c,v,_,b,y,C,w,T,O,s,A,M,Y,U,K,q,B,W,ee]}class FR extends qe{constructor(e){super(),Ge(this,e,RR,IR,Ve,{handleAddUpload:17},null,[-1,-1])}}function LR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;h=new Se({props:{icon:"mingcute:left-line",height:"30"}});let y=NR;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="텍스트",r=V(),o=E("button"),de(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("div"),l=E("textarea"),u=V(),d=E("div"),p=E("button"),p.textContent="입력하기",m=V(),g=et(),S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"class","textarea"),S(l,"rows","5"),S(l,"placeholder","텍스트를 입력해주세요."),S(f,"class","my-3"),S(p,"type","button"),S(p,"class","btn btn-sm md:p-3 md:text-base primary-btn w-full"),S(d,"class","p-3 flex justify-center"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(C,w){j(C,e,w),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),Pe(l,t[1]),k(c,u),k(c,d),k(d,p),j(C,m,w),j(C,g,w),v=!0,_||(b=[Q(o,"click",t[3]),Q(l,"input",t[4]),Q(p,"click",t[5])],_=!0)},p(C,[w]){w&2&&Pe(l,C[1])},i(C){v||(R(h.$$.fragment,C),R(y),v=!0)},o(C){H(h.$$.fragment,C),H(y),v=!1},d(C){C&&(N(e),N(m),N(g)),fe(h),_=!1,We(b)}}}let NR=!1;function jR(t,e,n){let i;je(t,Qt,c=>n(2,i=c));let{handleAddText:r}=e,o="";const h=()=>ye(Qt,i=null,i);function a(){o=this.value,n(1,o)}const s=()=>r(o);return t.$$set=c=>{"handleAddText"in c&&n(0,r=c.handleAddText)},[r,o,i,h,a,s]}class BR extends qe{constructor(e){super(),Ge(this,e,jR,LR,Ve,{handleAddText:0})}}function UR(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,M;h=new Se({props:{icon:"mingcute:left-line",height:"30"}}),u=new Se({props:{icon:"ic:outline-rectangle",width:16}}),m=new Se({props:{icon:"ic:outline-circle",width:16}}),_=new Se({props:{icon:"uil:triangle",width:16}}),C=new Se({props:{icon:"material-symbols-light:draw",width:16}});let Y=WR;return{c(){e=E("div"),n=E("h2"),i=E("span"),i.textContent="도형/그리기",r=V(),o=E("button"),de(h.$$.fragment),a=V(),s=E("div"),c=E("div"),f=E("div"),l=E("button"),de(u.$$.fragment),d=V(),p=E("button"),de(m.$$.fragment),g=V(),v=E("button"),de(_.$$.fragment),b=V(),y=E("button"),de(C.$$.fragment),w=V(),T=et(),S(o,"type","button"),S(o,"class","absolute right-2"),S(n,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(l,"type","button"),S(l,"class","btn white-btn"),S(p,"type","button"),S(p,"class","btn white-btn"),S(v,"type","button"),S(v,"class","btn white-btn"),S(y,"type","button"),S(y,"class","btn white-btn"),S(f,"class","my-3 flex gap-1"),S(c,"class","flex w-full flex-col"),S(s,"class","w-full mt-3"),S(e,"class","flex flex-col w-full h-full bg-white p-3")},m(U,K){j(U,e,K),k(e,n),k(n,i),k(n,r),k(n,o),ue(h,o,null),k(e,a),k(e,s),k(s,c),k(c,f),k(f,l),ue(u,l,null),k(f,d),k(f,p),ue(m,p,null),k(f,g),k(f,v),ue(_,v,null),k(f,b),k(f,y),ue(C,y,null),j(U,w,K),j(U,T,K),O=!0,A||(M=[Q(o,"click",t[2]),Q(l,"click",t[3]),Q(p,"click",t[4]),Q(v,"click",t[5]),Q(y,"click",t[6])],A=!0)},p(U,[K]){},i(U){O||(R(h.$$.fragment,U),R(u.$$.fragment,U),R(m.$$.fragment,U),R(_.$$.fragment,U),R(C.$$.fragment,U),R(Y),O=!0)},o(U){H(h.$$.fragment,U),H(u.$$.fragment,U),H(m.$$.fragment,U),H(_.$$.fragment,U),H(C.$$.fragment,U),H(Y),O=!1},d(U){U&&(N(e),N(w),N(T)),fe(h),fe(u),fe(m),fe(_),fe(C),A=!1,We(M)}}}let WR=!1;function YR(t,e,n){let i;je(t,Qt,f=>n(1,i=f));let{handleAddShape:r}=e;const o=()=>ye(Qt,i=null,i),h=()=>r("rect"),a=()=>r("circle"),s=()=>r("triangle"),c=()=>r("draw");return t.$$set=f=>{"handleAddShape"in f&&n(0,r=f.handleAddShape)},[r,i,o,h,a,s,c]}class zR extends qe{constructor(e){super(),Ge(this,e,YR,UR,Ve,{handleAddShape:0})}}function HR(t){let e;return{c(){e=E("canvas"),e.innerHTML="",S(e,"id","print"),S(e,"class","svelte-d96o53")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function VR(t){let e,n,i,r,o;return{c(){var h,a,s;e=E("div"),n=E("div"),i=E("canvas"),i.innerHTML="",S(i,"id","print"),S(i,"class","svelte-d96o53"),S(n,"class","print-container absolute"),S(n,"style",`left:${t[6].background.canvasLeft}%; top:${t[6].background.canvasTop}%; width:${t[6].background.canvasPer}%; height:${t[6].background.canvasPer*t[8]}%;`),S(e,"style",r=`max-width: ${t[7]}px; max-height: ${t[9]}px; width: 100%; height: ${t[2]}px; background-image:url(${(a=(h=t[6].background)==null?void 0:h.image)==null?void 0:a.url}); background-color:${(s=t[5].currentOption)!=null&&s.colorCode?t[5].currentOption.colorCode:"#ffffff"}`),S(e,"class","flex flex-col justify-center background-container svelte-d96o53"),Ut(()=>t[21].call(e))},m(h,a){j(h,e,a),k(e,n),k(n,i),o=v1(e,t[21].bind(e))},p(h,a){var s,c,f;a[0]&36&&r!==(r=`max-width: ${h[7]}px; max-height: ${h[9]}px; width: 100%; height: ${h[2]}px; background-image:url(${(c=(s=h[6].background)==null?void 0:s.image)==null?void 0:c.url}); background-color:${(f=h[5].currentOption)!=null&&f.colorCode?h[5].currentOption.colorCode:"#ffffff"}`)&&S(e,"style",r)},d(h){h&&N(e),o()}}}function Tm(t){let e,n,i,r;return n=new OE({props:{handleAddClipArt:t[10]}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){j(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(R(n.$$.fragment,o),o&&Ut(()=>{r&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!0)),i.run(1))}),r=!0)},o(o){H(n.$$.fragment,o),o&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function km(t){let e,n,i,r;return n=new FR({props:{handleAddUpload:t[11]}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-full max-w-2xl h-full z-50")},m(o,h){j(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(R(n.$$.fragment,o),o&&Ut(()=>{r&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!0)),i.run(1))}),r=!0)},o(o){H(n.$$.fragment,o),o&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Om(t){let e,n,i,r;return n=new BR({props:{handleAddText:t[12]}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){j(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(R(n.$$.fragment,o),o&&Ut(()=>{r&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!0)),i.run(1))}),r=!0)},o(o){H(n.$$.fragment,o),o&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function Em(t){let e,n,i,r;return n=new zR({props:{handleAddShape:t[13]}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","absolute top-0 left-0 w-80 h-full z-50")},m(o,h){j(o,e,h),ue(n,e,null),r=!0},p:ge,i(o){r||(R(n.$$.fragment,o),o&&Ut(()=>{r&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!0)),i.run(1))}),r=!0)},o(o){H(n.$$.fragment,o),o&&(i||(i=Yt(e,vr,{delay:10,duration:200,axis:"x",opacity:.5,easing:mr},!1)),i.run(0)),r=!1},d(o){o&&N(e),fe(n),o&&i&&i.end()}}}function xm(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b;i=new Se({props:{icon:"ph:angle",height:"18"}});let y=(t[3][0].colorType==="color"||t[3][0].objType==="text"||t[3][0].objType==="shape"||t[3][0].type==="path")&&Dm(t),C=t[3][0].colorType==="colors"&&Am(t),w=t[3][0].objType==="text"&&Pm(t),T=(t[3][0].type==="path"||t[3][0].objType==="text"||t[3][0].objType==="shape")&&Mm(t),O=t[1]==="rotate"&&Im(t),A=t[1]==="color"&&Rm(t),M=t[1]==="text"&&Fm(t),Y=t[1]==="align"&&Lm(t),U=t[1]==="style"&&Nm(t),K=t[1]==="decoration"&&jm(t),q=t[1]==="stroke"&&Bm(t),B=t[1]==="colors"&&Um(t);return{c(){e=E("div"),n=E("button"),de(i.$$.fragment),r=V(),y&&y.c(),o=V(),C&&C.c(),h=V(),w&&w.c(),a=V(),T&&T.c(),s=V(),O&&O.c(),c=V(),A&&A.c(),f=V(),M&&M.c(),l=V(),Y&&Y.c(),u=V(),U&&U.c(),d=V(),K&&K.c(),p=V(),q&&q.c(),m=V(),B&&B.c(),g=et(),S(n,"class","btn white-btn circle-btn"),S(e,"class","absolute flex justify-center gap-0.5 z-40 top-10")},m(W,ee){j(W,e,ee),k(e,n),ue(i,n,null),k(e,r),y&&y.m(e,null),k(e,o),C&&C.m(e,null),k(e,h),w&&w.m(e,null),k(e,a),T&&T.m(e,null),j(W,s,ee),O&&O.m(W,ee),j(W,c,ee),A&&A.m(W,ee),j(W,f,ee),M&&M.m(W,ee),j(W,l,ee),Y&&Y.m(W,ee),j(W,u,ee),U&&U.m(W,ee),j(W,d,ee),K&&K.m(W,ee),j(W,p,ee),q&&q.m(W,ee),j(W,m,ee),B&&B.m(W,ee),j(W,g,ee),v=!0,_||(b=Q(n,"click",t[22]),_=!0)},p(W,ee){W[3][0].colorType==="color"||W[3][0].objType==="text"||W[3][0].objType==="shape"||W[3][0].type==="path"?y?(y.p(W,ee),ee[0]&8&&R(y,1)):(y=Dm(W),y.c(),R(y,1),y.m(e,o)):y&&(ke(),H(y,1,1,()=>{y=null}),Oe()),W[3][0].colorType==="colors"?C?(C.p(W,ee),ee[0]&8&&R(C,1)):(C=Am(W),C.c(),R(C,1),C.m(e,h)):C&&(ke(),H(C,1,1,()=>{C=null}),Oe()),W[3][0].objType==="text"?w?(w.p(W,ee),ee[0]&8&&R(w,1)):(w=Pm(W),w.c(),R(w,1),w.m(e,a)):w&&(ke(),H(w,1,1,()=>{w=null}),Oe()),W[3][0].type==="path"||W[3][0].objType==="text"||W[3][0].objType==="shape"?T?(T.p(W,ee),ee[0]&8&&R(T,1)):(T=Mm(W),T.c(),R(T,1),T.m(e,null)):T&&(ke(),H(T,1,1,()=>{T=null}),Oe()),W[1]==="rotate"?O?(O.p(W,ee),ee[0]&2&&R(O,1)):(O=Im(W),O.c(),R(O,1),O.m(c.parentNode,c)):O&&(ke(),H(O,1,1,()=>{O=null}),Oe()),W[1]==="color"?A?(A.p(W,ee),ee[0]&2&&R(A,1)):(A=Rm(W),A.c(),R(A,1),A.m(f.parentNode,f)):A&&(ke(),H(A,1,1,()=>{A=null}),Oe()),W[1]==="text"?M?(M.p(W,ee),ee[0]&2&&R(M,1)):(M=Fm(W),M.c(),R(M,1),M.m(l.parentNode,l)):M&&(ke(),H(M,1,1,()=>{M=null}),Oe()),W[1]==="align"?Y?(Y.p(W,ee),ee[0]&2&&R(Y,1)):(Y=Lm(W),Y.c(),R(Y,1),Y.m(u.parentNode,u)):Y&&(ke(),H(Y,1,1,()=>{Y=null}),Oe()),W[1]==="style"?U?(U.p(W,ee),ee[0]&2&&R(U,1)):(U=Nm(W),U.c(),R(U,1),U.m(d.parentNode,d)):U&&(ke(),H(U,1,1,()=>{U=null}),Oe()),W[1]==="decoration"?K?(K.p(W,ee),ee[0]&2&&R(K,1)):(K=jm(W),K.c(),R(K,1),K.m(p.parentNode,p)):K&&(ke(),H(K,1,1,()=>{K=null}),Oe()),W[1]==="stroke"?q?(q.p(W,ee),ee[0]&2&&R(q,1)):(q=Bm(W),q.c(),R(q,1),q.m(m.parentNode,m)):q&&(ke(),H(q,1,1,()=>{q=null}),Oe()),W[1]==="colors"?B?(B.p(W,ee),ee[0]&2&&R(B,1)):(B=Um(W),B.c(),R(B,1),B.m(g.parentNode,g)):B&&(ke(),H(B,1,1,()=>{B=null}),Oe())},i(W){v||(R(i.$$.fragment,W),R(y),R(C),R(w),R(T),R(O),R(A),R(M),R(Y),R(U),R(K),R(q),R(B),v=!0)},o(W){H(i.$$.fragment,W),H(y),H(C),H(w),H(T),H(O),H(A),H(M),H(Y),H(U),H(K),H(q),H(B),v=!1},d(W){W&&(N(e),N(s),N(c),N(f),N(l),N(u),N(d),N(p),N(m),N(g)),fe(i),y&&y.d(),C&&C.d(),w&&w.d(),T&&T.d(),O&&O.d(W),A&&A.d(W),M&&M.d(W),Y&&Y.d(W),U&&U.d(W),K&&K.d(W),q&&q.d(W),B&&B.d(W),_=!1,b()}}}function Dm(t){let e,n,i,r,o;return n=new Se({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),de(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){j(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[23]),r=!0)},p:ge,i(h){i||(R(n.$$.fragment,h),i=!0)},o(h){H(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Am(t){let e,n,i,r,o;return n=new Se({props:{icon:"ic:outline-color-lens",height:"18"}}),{c(){e=E("button"),de(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){j(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[24]),r=!0)},p:ge,i(h){i||(R(n.$$.fragment,h),i=!0)},o(h){H(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Pm(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p;return n=new Se({props:{icon:"cil:text",height:"18"}}),o=new Se({props:{icon:"uim:align-left",height:"18"}}),s=new Se({props:{icon:"pajamas:italic",height:"18"}}),l=new Se({props:{icon:"fluent:text-underline-24-filled",height:"18"}}),{c(){e=E("button"),de(n.$$.fragment),i=V(),r=E("button"),de(o.$$.fragment),h=V(),a=E("button"),de(s.$$.fragment),c=V(),f=E("button"),de(l.$$.fragment),S(e,"class","btn white-btn circle-btn"),S(r,"class","btn white-btn circle-btn"),S(a,"class","btn white-btn circle-btn"),S(f,"class","btn white-btn circle-btn")},m(m,g){j(m,e,g),ue(n,e,null),j(m,i,g),j(m,r,g),ue(o,r,null),j(m,h,g),j(m,a,g),ue(s,a,null),j(m,c,g),j(m,f,g),ue(l,f,null),u=!0,d||(p=[Q(e,"click",t[25]),Q(r,"click",t[26]),Q(a,"click",t[27]),Q(f,"click",t[28])],d=!0)},p:ge,i(m){u||(R(n.$$.fragment,m),R(o.$$.fragment,m),R(s.$$.fragment,m),R(l.$$.fragment,m),u=!0)},o(m){H(n.$$.fragment,m),H(o.$$.fragment,m),H(s.$$.fragment,m),H(l.$$.fragment,m),u=!1},d(m){m&&(N(e),N(i),N(r),N(h),N(a),N(c),N(f)),fe(n),fe(o),fe(s),fe(l),d=!1,We(p)}}}function Mm(t){let e,n,i,r,o;return n=new Se({props:{icon:"maki:square-stroked",height:"18"}}),{c(){e=E("button"),de(n.$$.fragment),S(e,"class","btn white-btn circle-btn")},m(h,a){j(h,e,a),ue(n,e,null),i=!0,r||(o=Q(e,"click",t[29]),r=!0)},p:ge,i(h){i||(R(n.$$.fragment,h),i=!0)},o(h){H(n.$$.fragment,h),i=!1},d(h){h&&N(e),fe(n),r=!1,o()}}}function Im(t){let e,n,i;function r(h){t[30](h)}let o={sliderValue:t[3][0].angle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new hO({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeRotate",t[14]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.sliderValue=h[3][0].angle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Rm(t){let e,n,i;function r(h){t[31](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new sE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeColor",t[32]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Fm(t){let e,n,i;function r(h){t[33](h)}let o={text:t[3][0].text};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new lE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeText",t[15]),e.$on("onChangeFontFamily",t[16]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.text=h[3][0].text),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Lm(t){let e,n,i;function r(h){t[34](h)}let o={align:t[3][0].textAlign};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new fE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeAlign",t[17]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.align=h[3][0].textAlign),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Nm(t){let e,n,i;function r(h){t[35](h)}let o={style:t[3][0].fontStyle};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new pE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeStyle",t[18]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.style=h[3][0].fontStyle),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function jm(t){let e,n,i;function r(h){t[36](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new vE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeDecoration",t[19]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Bm(t){let e,n,i;function r(h){t[37](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new bE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeStroke",t[20]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function Um(t){let e,n,i;function r(h){t[38](h)}let o={object:t[3][0]};return t[1]!==void 0&&(o.selectProperty=t[1]),e=new SE({props:o}),nt.push(()=>xt(e,"selectProperty",r)),e.$on("onChangeColors",t[39]),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};a[0]&8&&(s.object=h[3][0]),!n&&a[0]&2&&(n=!0,s.selectProperty=h[1],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function XR(t){let e,n,i,r,o,h,a;function s(g,v){return g[6].background?VR:HR}let f=s(t)(t),l=t[4]==="clipart"&&Tm(t),u=t[4]==="upload"&&km(t),d=t[4]==="text"&&Om(t),p=t[4]==="draw"&&Em(t),m=t[3]&&xm(t);return{c(){e=E("div"),f.c(),n=V(),l&&l.c(),i=V(),u&&u.c(),r=V(),d&&d.c(),o=V(),p&&p.c(),h=V(),m&&m.c(),S(e,"class","flex justify-center items-center h-full w-full relative flex-col")},m(g,v){j(g,e,v),f.m(e,null),k(e,n),l&&l.m(e,null),k(e,i),u&&u.m(e,null),k(e,r),d&&d.m(e,null),k(e,o),p&&p.m(e,null),k(e,h),m&&m.m(e,null),a=!0},p(g,v){f.p(g,v),g[4]==="clipart"?l?(l.p(g,v),v[0]&16&&R(l,1)):(l=Tm(g),l.c(),R(l,1),l.m(e,i)):l&&(ke(),H(l,1,1,()=>{l=null}),Oe()),g[4]==="upload"?u?(u.p(g,v),v[0]&16&&R(u,1)):(u=km(g),u.c(),R(u,1),u.m(e,r)):u&&(ke(),H(u,1,1,()=>{u=null}),Oe()),g[4]==="text"?d?(d.p(g,v),v[0]&16&&R(d,1)):(d=Om(g),d.c(),R(d,1),d.m(e,o)):d&&(ke(),H(d,1,1,()=>{d=null}),Oe()),g[4]==="draw"?p?(p.p(g,v),v[0]&16&&R(p,1)):(p=Em(g),p.c(),R(p,1),p.m(e,h)):p&&(ke(),H(p,1,1,()=>{p=null}),Oe()),g[3]?m?(m.p(g,v),v[0]&8&&R(m,1)):(m=xm(g),m.c(),R(m,1),m.m(e,null)):m&&(ke(),H(m,1,1,()=>{m=null}),Oe())},i(g){a||(R(l),R(u),R(d),R(p),R(m),a=!0)},o(g){H(l),H(u),H(d),H(p),H(m),a=!1},d(g){g&&N(e),f.d(),l&&l.d(),u&&u.d(),d&&d.d(),p&&p.d(),m&&m.d()}}}function $R(t,e,n){let i,r,o,h,a,s,c,f;je(t,rr,z=>n(3,r=z)),je(t,Qt,z=>n(4,o=z)),je(t,ru,z=>n(40,h=z)),je(t,Yo,z=>n(41,a=z)),je(t,co,z=>n(42,s=z)),je(t,Zo,z=>n(43,c=z)),je(t,Re,z=>n(5,f=z));let l=f.prints[c],u,d=l.canvasWidth,p=l.height/l.width,m=d*p,g=l.canvasJSON,v=null;zt();function _(z,G=null){ye(Re,f.prints[c].isChange=!0,f),z&&ye(Re,f.prints[c].canvasJSON=z,f),ye(Re,f.prints[c].imageDataURL=$1(),f),G&&ye(Re,f.prints[c].svg=G,f)}ki(async()=>{var z,G;if(ye(rr,r=null,r),U1("print",d,m,_),g&&Y1(g),((z=l.colorGroup)==null?void 0:z.value)!=="palette"){const oe=await GT(s.id);oe.error?console.log("컬러 데이터 로드 실패"):((G=l.colorGroup)==null?void 0:G.value)==="shopColor"?ye(ru,h=oe.data,h):ye(ru,h=oe.data.filter(se=>se.colorGroup===l.colorGroup.value),h)}});function b(z){const G={url:z.file.url,convertUrl:z.file.convert.url,originUrl:z.file.origin.url};jd(z.file.url,{convert:G,objType:"clipart"}),ye(Qt,o=null,o)}function y(z){const G={url:z.thumbnail.url,convertUrl:z.convert.url,originUrl:z.origin.url};console.log({convert:G}),jd(z.thumbnail.url,{convert:G,origin:z.origin,thumbnail:z.thumbnail,objType:"upload"}),ye(Qt,o=null,o)}function C(z){console.log("$fonts[0]",a[0]);const G=h!=null&&h.length?h[0].hex:"#000000";H1(z,{objType:"text",fontFamily:a[0].fontFamily,localFamily:a[0].localFamily,fill:G}),ye(Qt,o=null,o)}function w(z){const G=h[0]?h[0].hex:"#000000";switch(z){case"rect":aC(G);break;case"triangle":cC(G);break;case"circle":lC(G);break;case"draw":uC(!0);break}ye(Qt,o=null,o)}function T({detail:z}){G1(z.value)}function O({detail:z}){q1(r[0],z.text)}function A({detail:z}){K1(r[0],z.fontFamily,z.localFamily)}function M({detail:z}){J1(r[0],z.align)}function Y({detail:z}){Z1(r[0],z.style)}function U({detail:z}){Q1(r[0],z.decoration)}function K({detail:z}){eC(r[0],z.stroke)}function q(){u=this.clientWidth,n(0,u)}const B=()=>n(1,v="rotate"),W=()=>n(1,v="color"),ee=()=>n(1,v="colors"),ne=()=>n(1,v="text"),x=()=>n(1,v="align"),P=()=>n(1,v="style"),L=()=>n(1,v="decoration"),I=()=>n(1,v="stroke");function Z(z){v=z,n(1,v)}function F(z){v=z,n(1,v)}const D=()=>Bd();function X(z){v=z,n(1,v)}function J(z){v=z,n(1,v)}function re(z){v=z,n(1,v)}function te(z){v=z,n(1,v)}function $(z){v=z,n(1,v)}function ae(z){v=z,n(1,v)}const pe=()=>Bd();return t.$$.update=()=>{var z;t.$$.dirty[0]&1&&n(2,i=u*((z=l.background)!=null&&z.ratio?l.background.ratio:1))},[u,v,i,r,o,f,l,d,p,m,b,y,C,w,T,O,A,M,Y,U,K,q,B,W,ee,ne,x,P,L,I,Z,F,D,X,J,re,te,$,ae,pe]}class GR extends qe{constructor(e){super(),Ge(this,e,$R,XR,Ve,{},null,[-1,-1])}}function Wm(t,e,n){const i=t.slice();return i[6]=e[n],i[8]=n,i}function Ym(t){let e,n,i;return{c(){var r;e=E("img"),Xe(e.src,n=(r=t[6].background.image)==null?void 0:r.url)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class","max-h-full")},m(r,o){j(r,e,o)},p(r,o){var h;o&1&&!Xe(e.src,n=(h=r[6].background.image)==null?void 0:h.url)&&S(e,"src",n),o&1&&i!==(i=r[6].title)&&S(e,"alt",i)},d(r){r&&N(e)}}}function zm(t){let e,n,i,r,o;return{c(){var h,a,s,c,f;e=E("img"),Xe(e.src,n=t[6].imageDataURL)||S(e,"src",n),S(e,"alt",i=t[6].title),S(e,"class",r=(a=(h=t[6].background)==null?void 0:h.image)!=null&&a.url?"absolute":""),S(e,"style",o=`left:${(s=t[6].background)!=null&&s.canvasLeft?t[6].background.canvasLeft:0}%; top:${(c=t[6].background)!=null&&c.canvasTop?t[6].background.canvasTop:0}%; width:${(f=t[6].background)!=null&&f.canvasPer?t[6].background.canvasPer:100}%; height:auto;`)},m(h,a){j(h,e,a)},p(h,a){var s,c,f,l,u;a&1&&!Xe(e.src,n=h[6].imageDataURL)&&S(e,"src",n),a&1&&i!==(i=h[6].title)&&S(e,"alt",i),a&1&&r!==(r=(c=(s=h[6].background)==null?void 0:s.image)!=null&&c.url?"absolute":"")&&S(e,"class",r),a&1&&o!==(o=`left:${(f=h[6].background)!=null&&f.canvasLeft?h[6].background.canvasLeft:0}%; top:${(l=h[6].background)!=null&&l.canvasTop?h[6].background.canvasTop:0}%; width:${(u=h[6].background)!=null&&u.canvasPer?h[6].background.canvasPer:100}%; height:auto;`)&&S(e,"style",o)},d(h){h&&N(e)}}}function Hm(t){var p,m;let e,n,i,r,o,h=t[6].title+"",a,s,c,f,l=((m=(p=t[6].background)==null?void 0:p.image)==null?void 0:m.url)&&Ym(t),u=t[6].imageDataURL&&zm(t);function d(){return t[3](t[8])}return{c(){var g;e=E("div"),n=E("button"),l&&l.c(),i=V(),u&&u.c(),r=V(),o=E("span"),a=we(h),s=V(),S(n,"class","max-w-24 max-h-24 min-w-14 min-h-14 relative bg-no-repeat border rounded-lg overflow-hidden"),mt(n,"background-color",(g=t[0].currentOption)!=null&&g.colorCode?t[0].currentOption.colorCode:"#ffffff"),S(o,"class","w-full flex justify-center text-xs py-0.5"),S(e,"class","p-1 bg-white rounded-lg flex flex-col")},m(g,v){j(g,e,v),k(e,n),l&&l.m(n,null),k(n,i),u&&u.m(n,null),k(e,r),k(e,o),k(o,a),k(e,s),c||(f=Q(n,"click",d),c=!0)},p(g,v){var _,b,y;t=g,(b=(_=t[6].background)==null?void 0:_.image)!=null&&b.url?l?l.p(t,v):(l=Ym(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null),t[6].imageDataURL?u?u.p(t,v):(u=zm(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),v&1&&mt(n,"background-color",(y=t[0].currentOption)!=null&&y.colorCode?t[0].currentOption.colorCode:"#ffffff"),v&1&&h!==(h=t[6].title+"")&&He(a,h)},d(g){g&&N(e),l&&l.d(),u&&u.d(),c=!1,f()}}}function qR(t){let e,n,i=Me(t[0].prints),r=[];for(let o=0;o<i.length;o+=1)r[o]=Hm(Wm(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","flex flex-row max-w-full space-x-4 overflow-x-auto overflow-y-hidden p-5"),S(e,"class","absolute bottom-2")},m(o,h){j(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,[h]){if(h&3){i=Me(o[0].prints);let a;for(a=0;a<i.length;a+=1){const s=Wm(o,i,a);r[a]?r[a].p(s,h):(r[a]=Hm(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:ge,o:ge,d(o){o&&N(e),Dt(r,o)}}}function KR(t,e,n){let i,r;je(t,Zo,s=>n(4,i=s)),je(t,Re,s=>n(0,r=s));let{printKey:o}=e;zt();function h(s){ye(Zo,i=s,i),n(2,o++,o)}const a=s=>h(s);return t.$$set=s=>{"printKey"in s&&n(2,o=s.printKey)},[r,h,o,a]}class JR extends qe{constructor(e){super(),Ge(this,e,KR,qR,Ve,{printKey:2})}}/*!
* Viewer.js v1.11.6
* https://fengyuanchen.github.io/viewerjs
*
* Copyright 2015-present Chen Fengyuan
* Released under the MIT license
*
* Date: 2023-09-17T03:16:38.052Z
*/function Vm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vm(Object(n),!0).forEach(function(i){eF(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function ZR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xm(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$0(i.key),i)}}function QR(t,e,n){return e&&Xm(t.prototype,e),n&&Xm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eF(t,e,n){return e=$0(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tF(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $0(t){var e=tF(t,"string");return typeof e=="symbol"?e:String(e)}var $m={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},nF='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',kc=typeof window<"u"&&typeof window.document<"u",Xi=kc?window:{},js=kc&&Xi.document.documentElement?"ontouchstart"in Xi.document.documentElement:!1,Zh=kc?"PointerEvent"in Xi:!1,$e="viewer",vl="move",G0="switch",Fo="zoom",Qa="".concat($e,"-active"),iF="".concat($e,"-close"),_l="".concat($e,"-fade"),Lf="".concat($e,"-fixed"),rF="".concat($e,"-fullscreen"),Gm="".concat($e,"-fullscreen-exit"),Pr="".concat($e,"-hide"),sF="".concat($e,"-hide-md-down"),oF="".concat($e,"-hide-sm-down"),aF="".concat($e,"-hide-xs-down"),Ln="".concat($e,"-in"),Go="".concat($e,"-invisible"),Bs="".concat($e,"-loading"),lF="".concat($e,"-move"),qm="".concat($e,"-open"),ps="".concat($e,"-show"),It="".concat($e,"-transition"),no="click",Nf="dblclick",Km="dragstart",Jm="focusin",Zm="keydown",Un="load",Yr="error",cF=js?"touchend touchcancel":"mouseup",uF=js?"touchmove":"mousemove",fF=js?"touchstart":"mousedown",Qm=Zh?"pointerdown":fF,ev=Zh?"pointermove":uF,tv=Zh?"pointerup pointercancel":cF,nv="resize",Kn="transitionend",iv="wheel",rv="ready",sv="show",ov="shown",av="hide",lv="hidden",cv="view",sa="viewed",uv="move",fv="moved",hv="rotate",dv="rotated",pv="scale",gv="scaled",mv="zoom",vv="zoomed",_v="play",yv="stop",Xl="".concat($e,"Action"),Qh=/\s\s*/,el=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function oa(t){return typeof t=="string"}var hF=Number.isNaN||Xi.isNaN;function Ot(t){return typeof t=="number"&&!hF(t)}function Es(t){return typeof t>"u"}function io(t){return Ff(t)==="object"&&t!==null}var dF=Object.prototype.hasOwnProperty;function xs(t){if(!io(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&dF.call(n,"isPrototypeOf")}catch{return!1}}function ut(t){return typeof t=="function"}function pt(t,e){if(t&&ut(e))if(Array.isArray(t)||Ot(t.length)){var n=t.length,i;for(i=0;i<n&&e.call(t,t[i],i,t)!==!1;i+=1);}else io(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)});return t}var An=Object.assign||function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return io(e)&&i.length>0&&i.forEach(function(o){io(o)&&Object.keys(o).forEach(function(h){e[h]=o[h]})}),e},pF=/^(?:width|height|left|top|marginLeft|marginTop)$/;function Zn(t,e){var n=t.style;pt(e,function(i,r){pF.test(r)&&Ot(i)&&(i+="px"),n[r]=i})}function gF(t){return oa(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Cs(t,e){return!t||!e?!1:t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Ne(t,e){if(!(!t||!e)){if(Ot(t.length)){pt(t,function(i){Ne(i,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function at(t,e){if(!(!t||!e)){if(Ot(t.length)){pt(t,function(n){at(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function aa(t,e,n){if(e){if(Ot(t.length)){pt(t,function(i){aa(i,e,n)});return}n?Ne(t,e):at(t,e)}}var mF=/([a-z\d])([A-Z])/g;function ed(t){return t.replace(mF,"$1-$2").toLowerCase()}function Ds(t,e){return io(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(ed(e)))}function jf(t,e,n){io(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(ed(e)),n)}var q0=function(){var t=!1;if(kc){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(o){e=o}});Xi.addEventListener("test",n,i),Xi.removeEventListener("test",n,i)}return t}();function ht(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Qh).forEach(function(o){if(!q0){var h=t.listeners;h&&h[o]&&h[o][n]&&(r=h[o][n],delete h[o][n],Object.keys(h[o]).length===0&&delete h[o],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(o,r,i)})}function Be(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n;e.trim().split(Qh).forEach(function(o){if(i.once&&!q0){var h=t.listeners,a=h===void 0?{}:h;r=function(){delete a[o][n],t.removeEventListener(o,r,i);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];n.apply(t,f)},a[o]||(a[o]={}),a[o][n]&&t.removeEventListener(o,a[o][n],i),a[o][n]=r,t.listeners=a}t.addEventListener(o,r,i)})}function Ft(t,e,n,i){var r;return ut(Event)&&ut(CustomEvent)?r=new CustomEvent(e,Jh({bubbles:!0,cancelable:!0,detail:n},i)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function vF(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function yl(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,o=t.translateY,h=[];Ot(r)&&r!==0&&h.push("translateX(".concat(r,"px)")),Ot(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),Ot(e)&&e!==0&&h.push("rotate(".concat(e,"deg)")),Ot(n)&&n!==1&&h.push("scaleX(".concat(n,")")),Ot(i)&&i!==1&&h.push("scaleY(".concat(i,")"));var a=h.length?h.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function _F(t){return oa(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var Bu=Xi.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(Xi.navigator.userAgent);function K0(t,e,n){var i=document.createElement("img");if(t.naturalWidth&&!Bu)return n(t.naturalWidth,t.naturalHeight),i;var r=document.body||document.documentElement;return i.onload=function(){n(i.width,i.height),Bu||r.removeChild(i)},pt(e.inheritedAttributes,function(o){var h=t.getAttribute(o);h!==null&&i.setAttribute(o,h)}),i.src=t.src,Bu||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i)),i}function tl(t){switch(t){case 2:return aF;case 3:return oF;case 4:return sF;default:return""}}function yF(t){var e=Jh({},t),n=[];return pt(t,function(i,r){delete e[r],pt(e,function(o){var h=Math.abs(i.startX-o.startX),a=Math.abs(i.startY-o.startY),s=Math.abs(i.endX-o.endX),c=Math.abs(i.endY-o.endY),f=Math.sqrt(h*h+a*a),l=Math.sqrt(s*s+c*c),u=(l-f)/f;n.push(u)})}),n.sort(function(i,r){return Math.abs(i)<Math.abs(r)}),n[0]}function nl(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:Jh({timeStamp:Date.now(),startX:n,startY:i},r)}function bF(t){var e=0,n=0,i=0;return pt(t,function(r){var o=r.startX,h=r.startY;e+=o,n+=h,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}var wF={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,n=e.body||e.documentElement;this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=n.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(n).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,n=this.parent,i;e.inline&&(i={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=i),(this.fulled||!i)&&(i=this.containerData),this.viewerData=An({},i)},renderViewer:function(){this.options.inline&&!this.fulled&&Zn(this.viewer,this.viewerData)},initList:function(){var e=this,n=this.element,i=this.options,r=this.list,o=[];r.innerHTML="",pt(this.images,function(h,a){var s=h.src,c=h.alt||_F(s),f=e.getImageURL(h);if(s||f){var l=document.createElement("li"),u=document.createElement("img");pt(i.inheritedAttributes,function(d){var p=h.getAttribute(d);p!==null&&u.setAttribute(d,p)}),i.navbar&&(u.src=s||f),u.alt=c,u.setAttribute("data-original-url",f||s),l.setAttribute("data-index",a),l.setAttribute("data-viewer-action","view"),l.setAttribute("role","button"),i.keyboard&&l.setAttribute("tabindex",0),l.appendChild(u),r.appendChild(l),o.push(l)}}),this.items=o,pt(o,function(h){var a=h.firstElementChild,s,c;jf(a,"filled",!0),i.loading&&Ne(h,Bs),Be(a,Un,s=function(l){ht(a,Yr,c),i.loading&&at(h,Bs),e.loadImage(l)},{once:!0}),Be(a,Yr,c=function(){ht(a,Un,s),i.loading&&at(h,Bs)},{once:!0})}),i.transition&&Be(n,sa,function(){Ne(r,It)},{once:!0})},renderList:function(){var e=this.index,n=this.items[e];if(n){var i=n.nextElementSibling,r=parseInt(window.getComputedStyle(i||n).marginLeft,10),o=n.offsetWidth,h=o+r;Zn(this.list,An({width:h*this.length-r},yl({translateX:(this.viewerData.width-o)/2-h*e})))}},resetList:function(){var e=this.list;e.innerHTML="",at(e,It),Zn(e,yl({translateX:0}))},initImage:function(e){var n=this,i=this.options,r=this.image,o=this.viewerData,h=this.footer.offsetHeight,a=o.width,s=Math.max(o.height-h,h),c=this.imageData||{},f;this.imageInitializing={abort:function(){f.onload=null}},f=K0(r,i,function(l,u){var d=l/u,p=Math.max(0,Math.min(1,i.initialCoverage)),m=a,g=s;n.imageInitializing=!1,s*d>a?g=a/d:m=s*d,p=Ot(p)?p:.9,m=Math.min(m*p,l),g=Math.min(g*p,u);var v=(a-m)/2,_=(s-g)/2,b={left:v,top:_,x:v,y:_,width:m,height:g,oldRatio:1,ratio:m/l,aspectRatio:d,naturalWidth:l,naturalHeight:u},y=An({},b);i.rotatable&&(b.rotate=c.rotate||0,y.rotate=0),i.scalable&&(b.scaleX=c.scaleX||1,b.scaleY=c.scaleY||1,y.scaleX=1,y.scaleY=1),n.imageData=b,n.initialImageData=y,e&&e()})},renderImage:function(e){var n=this,i=this.image,r=this.imageData;if(Zn(i,An({width:r.width,height:r.height,marginLeft:r.x,marginTop:r.y},yl(r))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&Cs(i,It)){var o=function(){n.imageRendering=!1,e()};this.imageRendering={abort:function(){ht(i,Kn,o)}},Be(i,Kn,o,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},CF={bind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;Be(n,no,this.onClick=this.click.bind(this)),Be(n,Km,this.onDragStart=this.dragstart.bind(this)),Be(i,Qm,this.onPointerDown=this.pointerdown.bind(this)),Be(r,ev,this.onPointerMove=this.pointermove.bind(this)),Be(r,tv,this.onPointerUp=this.pointerup.bind(this)),Be(r,Zm,this.onKeyDown=this.keydown.bind(this)),Be(window,nv,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&Be(n,iv,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&Be(i,Nf,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,n=this.viewer,i=this.canvas,r=this.element.ownerDocument;ht(n,no,this.onClick),ht(n,Km,this.onDragStart),ht(i,Qm,this.onPointerDown),ht(r,ev,this.onPointerMove),ht(r,tv,this.onPointerUp),ht(r,Zm,this.onKeyDown),ht(window,nv,this.onResize),e.zoomable&&e.zoomOnWheel&&ht(n,iv,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&ht(i,Nf,this.onDblclick)}},SF={click:function(e){var n=this.options,i=this.imageData,r=e.target,o=Ds(r,Xl);switch(!o&&r.localName==="img"&&r.parentElement.localName==="li"&&(r=r.parentElement,o=Ds(r,Xl)),js&&e.isTrusted&&r===this.canvas&&clearTimeout(this.clickCanvasTimeout),o){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(Ds(r,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-i.scaleX||-1);break;case"flip-vertical":this.scaleY(-i.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(js&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var n=this.element,i=this.options,r=this.image,o=this.index,h=this.viewerData;at(r,Go),i.loading&&at(this.canvas,Bs),r.style.cssText="height:0;"+"margin-left:".concat(h.width/2,"px;")+"margin-top:".concat(h.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){aa(r,lF,i.movable),aa(r,It,i.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,ut(i.viewed)&&Be(n,sa,i.viewed,{once:!0}),Ft(n,sa,{originalImage:e.images[o],index:o,image:r},{cancelable:!1})})})},loadImage:function(e){var n=e.target,i=n.parentNode,r=i.offsetWidth||30,o=i.offsetHeight||50,h=!!Ds(n,"filled");K0(n,this.options,function(a,s){var c=a/s,f=r,l=o;o*c>r?h?f=o*c:l=r/c:h?l=r/c:f=o*c,Zn(n,An({width:f,height:l},yl({translateX:(r-f)/2,translateY:(o-l)/2})))})},keydown:function(e){var n=this.options;if(n.keyboard){var i=e.keyCode||e.which||e.charCode;switch(i){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(i){case 27:this.played?this.stop():n.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(n.loop);break;case 38:e.preventDefault(),this.zoom(n.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(n.loop);break;case 40:e.preventDefault(),this.zoom(-n.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var n=this.options,i=this.pointers,r=e.buttons,o=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Ot(r)&&r!==1||Ot(o)&&o!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?pt(e.changedTouches,function(a){i[a.identifier]=nl(a)}):i[e.pointerId||0]=nl(e);var h=n.movable?vl:!1;n.zoomOnTouch&&n.zoomable&&Object.keys(i).length>1?h=Fo:n.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(h=G0),n.transition&&(h===vl||h===Fo)&&at(this.image,It),this.action=h}},pointermove:function(e){var n=this.pointers,i=this.action;!this.viewed||!i||(e.preventDefault(),e.changedTouches?pt(e.changedTouches,function(r){An(n[r.identifier]||{},nl(r,!0))}):An(n[e.pointerId||0]||{},nl(e,!0)),this.change(e))},pointerup:function(e){var n=this,i=this.options,r=this.action,o=this.pointers,h;e.changedTouches?pt(e.changedTouches,function(a){h=o[a.identifier],delete o[a.identifier]}):(h=o[e.pointerId||0],delete o[e.pointerId||0]),r&&(e.preventDefault(),i.transition&&(r===vl||r===Fo)&&Ne(this.image,It),this.action=!1,js&&r!==Fo&&h&&Date.now()-h.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),i.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){Ft(n.image,Nf,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){n.imageClicked=!1},500)):(this.imageClicked=!1,i.backdrop&&i.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){Ft(n.canvas,no,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}pt(this.player.getElementsByTagName("img"),function(n){Be(n,Un,e.loadImage.bind(e),{once:!0}),Ft(n,Un)})}},wheel:function(e){var n=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50);var i=Number(this.options.zoomRatio)||.1,r=1;e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*i,!0,null,e)}}},TF={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(ut(i.show)&&Be(n,sv,i.show,{once:!0}),Ft(n,sv)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var r=this.viewer;if(at(r,Pr),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby",this.title.id),r.setAttribute("aria-modal",!0),r.removeAttribute("aria-hidden"),i.transition&&!e){var o=this.shown.bind(this);this.transitioning={abort:function(){ht(r,Kn,o),at(r,Ln)}},Ne(r,It),r.initialOffsetWidth=r.offsetWidth,Be(r,Kn,o,{once:!0}),Ne(r,Ln)}else Ne(r,Ln),this.shown();return this},hide:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,r=this.options;if(r.inline||this.hiding||!(this.isShown||this.showing))return this;if(ut(r.hide)&&Be(i,av,r.hide,{once:!0}),Ft(i,av)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var o=this.viewer,h=this.image,a=function(){at(o,Ln),e.hidden()};if(r.transition&&!n){var s=function f(l){l&&l.target===o&&(ht(o,Kn,f),e.hidden())},c=function(){Cs(o,It)?(Be(o,Kn,s),at(o,Ln)):a()};this.transitioning={abort:function(){e.viewed&&Cs(h,It)?ht(h,Kn,c):Cs(o,It)&&ht(o,Kn,s)}},this.viewed&&Cs(h,It)?(Be(h,Kn,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else a();return this},view:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(n=Number(n)||0,this.hiding||this.played||n<0||n>=this.length||this.viewed&&n===this.index)return this;if(!this.isShown)return this.index=n,this.show();this.viewing&&this.viewing.abort();var i=this.element,r=this.options,o=this.title,h=this.canvas,a=this.items[n],s=a.querySelector("img"),c=Ds(s,"originalUrl"),f=s.getAttribute("alt"),l=document.createElement("img");if(pt(r.inheritedAttributes,function(g){var v=s.getAttribute(g);v!==null&&l.setAttribute(g,v)}),l.src=c,l.alt=f,ut(r.view)&&Be(i,cv,r.view,{once:!0}),Ft(i,cv,{originalImage:this.images[n],index:n,image:l})===!1||!this.isShown||this.hiding||this.played)return this;var u=this.items[this.index];u&&(at(u,Qa),u.removeAttribute("aria-selected")),Ne(a,Qa),a.setAttribute("aria-selected",!0),r.focus&&a.focus(),this.image=l,this.viewed=!1,this.index=n,this.imageData={},Ne(l,Go),r.loading&&Ne(h,Bs),h.innerHTML="",h.appendChild(l),this.renderList(),o.innerHTML="";var d=function(){var v=e.imageData,_=Array.isArray(r.title)?r.title[1]:r.title;o.innerHTML=gF(ut(_)?_.call(e,l,v):"".concat(f," (").concat(v.naturalWidth," × ").concat(v.naturalHeight,")"))},p,m;return Be(i,sa,d,{once:!0}),this.viewing={abort:function(){ht(i,sa,d),l.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(l.src="",ht(l,Un,p),e.timeout&&clearTimeout(e.timeout))}},l.complete?this.load():(Be(l,Un,p=function(){ht(l,Yr,m),e.load()},{once:!0}),Be(l,Yr,m=function(){ht(l,Un,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),at(l,Go),r.loading&&at(e.canvas,Bs)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){at(l,Go),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.index-1;return n<0&&(n=e?this.length-1:0),this.view(n),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.length-1,i=this.index+1;return i>n&&(i=e?0:n),this.view(i),this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData;return this.moveTo(Es(e)?e:i.x+Number(e),Es(n)?n:i.y+Number(n)),this},moveTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=this.element,h=this.options,a=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&h.movable){var s=a.x,c=a.y,f=!1;if(Ot(e)?f=!0:e=s,Ot(i)?f=!0:i=c,f){if(ut(h.move)&&Be(o,uv,h.move,{once:!0}),Ft(o,uv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r})===!1)return this;a.x=e,a.y=i,a.left=e,a.top=i,this.moving=!0,this.renderImage(function(){n.moving=!1,ut(h.moved)&&Be(o,fv,h.moved,{once:!0}),Ft(o,fv,{x:e,y:i,oldX:s,oldY:c,originalEvent:r},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var n=this,i=this.element,r=this.options,o=this.imageData;if(e=Number(e),Ot(e)&&this.viewed&&!this.played&&r.rotatable){var h=o.rotate;if(ut(r.rotate)&&Be(i,hv,r.rotate,{once:!0}),Ft(i,hv,{degree:e,oldDegree:h})===!1)return this;o.rotate=e,this.rotating=!0,this.renderImage(function(){n.rotating=!1,ut(r.rotated)&&Be(i,dv,r.rotated,{once:!0}),Ft(i,dv,{degree:e,oldDegree:h},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.element,o=this.options,h=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&o.scalable){var a=h.scaleX,s=h.scaleY,c=!1;if(Ot(e)?c=!0:e=a,Ot(i)?c=!0:i=s,c){if(ut(o.scale)&&Be(r,pv,o.scale,{once:!0}),Ft(r,pv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s})===!1)return this;h.scaleX=e,h.scaleY=i,this.scaling=!0,this.renderImage(function(){n.scaling=!1,ut(o.scaled)&&Be(r,gv,o.scaled,{once:!0}),Ft(r,gv,{scaleX:e,scaleY:i,oldScaleX:a,oldScaleY:s},{cancelable:!1})})}}return this},zoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(o.width*e/o.naturalWidth,n,i,r),this},zoomTo:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,s=this.options,c=this.pointers,f=this.imageData,l=f.x,u=f.y,d=f.width,p=f.height,m=f.naturalWidth,g=f.naturalHeight;if(e=Math.max(0,e),Ot(e)&&this.viewed&&!this.played&&(h||s.zoomable)){if(!h){var v=Math.max(.01,s.minZoomRatio),_=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),_)}if(o)switch(o.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var b=m*e,y=g*e,C=b-d,w=y-p,T=f.ratio;if(ut(s.zoom)&&Be(a,mv,s.zoom,{once:!0}),Ft(a,mv,{ratio:e,oldRatio:T,originalEvent:o})===!1)return this;if(this.zooming=!0,o){var O=vF(this.viewer),A=c&&Object.keys(c).length>0?bF(c):{pageX:o.pageX,pageY:o.pageY};f.x-=C*((A.pageX-O.left-l)/d),f.y-=w*((A.pageY-O.top-u)/p)}else xs(r)&&Ot(r.x)&&Ot(r.y)?(f.x-=C*((r.x-l)/d),f.y-=w*((r.y-u)/p)):(f.x-=C/2,f.y-=w/2);f.left=f.x,f.top=f.y,f.width=b,f.height=y,f.oldRatio=T,f.ratio=e,this.renderImage(function(){n.zooming=!1,ut(s.zoomed)&&Be(a,vv,s.zoomed,{once:!0}),Ft(a,vv,{ratio:e,oldRatio:T,originalEvent:o},{cancelable:!1})}),i&&this.tooltip()}return this},play:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var i=this.element,r=this.options;if(ut(r.play)&&Be(i,_v,r.play,{once:!0}),Ft(i,_v)===!1)return this;var o=this.player,h=this.loadImage.bind(this),a=[],s=0,c=0;if(this.played=!0,this.onLoadWhenPlay=h,n&&this.requestFullscreen(n),Ne(o,ps),pt(this.items,function(u,d){var p=u.querySelector("img"),m=document.createElement("img");m.src=Ds(p,"originalUrl"),m.alt=p.getAttribute("alt"),m.referrerPolicy=p.referrerPolicy,s+=1,Ne(m,_l),aa(m,It,r.transition),Cs(u,Qa)&&(Ne(m,Ln),c=d),a.push(m),Be(m,Un,h,{once:!0}),o.appendChild(m)}),Ot(r.interval)&&r.interval>0){var f=function u(){clearTimeout(e.playing.timeout),at(a[c],Ln),c-=1,c=c>=0?c:s-1,Ne(a[c],Ln),e.playing.timeout=setTimeout(u,r.interval)},l=function u(){clearTimeout(e.playing.timeout),at(a[c],Ln),c+=1,c=c<s?c:0,Ne(a[c],Ln),e.playing.timeout=setTimeout(u,r.interval)};s>1&&(this.playing={prev:f,next:l,timeout:setTimeout(l,r.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var n=this.element,i=this.options;if(ut(i.stop)&&Be(n,yv,i.stop,{once:!0}),Ft(n,yv)===!1)return this;var r=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,pt(r.getElementsByTagName("img"),function(o){ht(o,Un,e.onLoadWhenPlay)}),at(r,ps),r.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||this.fulled||!n.inline?this:(this.fulled=!0,this.open(),Ne(this.button,Gm),n.transition&&(at(o,It),this.viewed&&at(r,It)),Ne(i,Lf),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("style"),Zn(i,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=An({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){Ne(r,It),Ne(o,It)},0)})}),this)},exit:function(){var e=this,n=this.options,i=this.viewer,r=this.image,o=this.list;return!this.isShown||this.played||!this.fulled||!n.inline?this:(this.fulled=!1,this.close(),at(this.button,Gm),n.transition&&(at(o,It),this.viewed&&at(r,It)),n.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),at(i,Lf),Zn(i,{zIndex:n.zIndexInline}),this.viewerData=An({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){n.transition&&setTimeout(function(){Ne(r,It),Ne(o,It)},0)})}),this)},tooltip:function(){var e=this,n=this.options,i=this.tooltipBox,r=this.imageData;return!this.viewed||this.played||!n.tooltip?this:(i.textContent="".concat(Math.round(r.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):n.transition?(this.fading&&Ft(i,Kn),Ne(i,ps),Ne(i,_l),Ne(i,It),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,Ne(i,Ln)):(Ne(i,ps),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){n.transition?(Be(i,Kn,function(){at(i,ps),at(i,_l),at(i,It),i.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),at(i,Ln),e.fading=!0):(at(i,ps),i.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=An({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,n=this.element,i=this.options,r=this.isImg;if(r&&!n.parentNode)return this.destroy();var o=[];if(pt(r?[n]:n.querySelectorAll("img"),function(c){ut(i.filter)?i.filter.call(e,c)&&o.push(c):e.getImageURL(c)&&o.push(c)}),!o.length)return this;if(this.images=o,this.length=o.length,this.ready){var h=[];if(pt(this.items,function(c,f){var l=c.querySelector("img"),u=o[f];u&&l?(u.src!==l.src||u.alt!==l.alt)&&h.push(f):h.push(f)}),Zn(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=h.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var s=this.items[this.index];Ne(s,Qa),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,n=this.options;return e[$e]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),n.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):n.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),n.inline||ht(e,no,this.onStart),e[$e]=void 0,this):this}},kF={getImageURL:function(e){var n=this.options.url;return oa(n)?n=e.getAttribute(n):ut(n)?n=n.call(this,e):n="",n},enforceFocus:function(){var e=this;this.clearEnforceFocus(),Be(document,Jm,this.onFocusin=function(n){var i=e.viewer,r=n.target;if(!(r===document||r===i||i.contains(r))){for(;r;){if(r.getAttribute("tabindex")!==null||r.getAttribute("aria-modal")==="true")return;r=r.parentElement}i.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(ht(document,Jm,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;Ne(e,qm),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;at(e,qm),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,n=this.options,i=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,n.focus&&(i.focus(),this.enforceFocus()),ut(n.shown)&&Be(e,ov,n.shown,{once:!0}),Ft(e,ov)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,n=this.options,i=this.viewer;n.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),Ne(i,Pr),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),i.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(ut(n.hidden)&&Be(e,lv,n.hidden,{once:!0}),Ft(e,lv,null,{cancelable:!1}))},requestFullscreen:function(e){var n=this.element.ownerDocument;if(this.fulled&&!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var i=n.documentElement;i.requestFullscreen?xs(e)?i.requestFullscreen(e):i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var n=this.options,i=this.pointers,r=i[Object.keys(i)[0]];if(r){var o=r.endX-r.startX,h=r.endY-r.startY;switch(this.action){case vl:(o!==0||h!==0)&&(this.pointerMoved=!0,this.move(o,h,e));break;case Fo:this.zoom(yF(i),!1,null,e);break;case G0:{this.action="switched";var a=Math.abs(o);a>1&&a>Math.abs(h)&&(this.pointers={},o>1?this.prev(n.loop):o<-1&&this.next(n.loop));break}}pt(i,function(s){s.startX=s.endX,s.startY=s.endY})}},isSwitchable:function(){var e=this.imageData,n=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=n.width&&e.height<=n.height}},OF=Xi.Viewer,EF=function(t){return function(){return t+=1,t}}(-1),J0=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ZR(this,t),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=An({},$m,xs(n)&&n),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=EF(),this.init()}return QR(t,[{key:"init",value:function(){var n=this,i=this.element,r=this.options;if(!i[$e]){i[$e]=this,r.focus&&!r.keyboard&&(r.focus=!1);var o=i.localName==="img",h=[];if(pt(o?[i]:i.querySelectorAll("img"),function(c){ut(r.filter)?r.filter.call(n,c)&&h.push(c):n.getImageURL(c)&&h.push(c)}),this.isImg=o,this.length=h.length,this.images=h,this.initBody(),Es(document.createElement($e).style.transition)&&(r.transition=!1),r.inline){var a=0,s=function(){if(a+=1,a===n.length){var f;n.initializing=!1,n.delaying={abort:function(){clearTimeout(f)}},f=setTimeout(function(){n.delaying=!1,n.build()},0)}};this.initializing={abort:function(){pt(h,function(f){f.complete||(ht(f,Un,s),ht(f,Yr,s))})}},pt(h,function(c){if(c.complete)s();else{var f,l;Be(c,Un,f=function(){ht(c,Yr,l),s()},{once:!0}),Be(c,Yr,l=function(){ht(c,Un,f),s()},{once:!0})}})}else Be(i,no,this.onStart=function(c){var f=c.target;f.localName==="img"&&(!ut(r.filter)||r.filter.call(n,f))&&n.view(n.images.indexOf(f))})}}},{key:"build",value:function(){if(!this.ready){var n=this.element,i=this.options,r=n.parentNode,o=document.createElement("div");o.innerHTML=nF;var h=o.querySelector(".".concat($e,"-container")),a=h.querySelector(".".concat($e,"-title")),s=h.querySelector(".".concat($e,"-toolbar")),c=h.querySelector(".".concat($e,"-navbar")),f=h.querySelector(".".concat($e,"-button")),l=h.querySelector(".".concat($e,"-canvas"));if(this.parent=r,this.viewer=h,this.title=a,this.toolbar=s,this.navbar=c,this.button=f,this.canvas=l,this.footer=h.querySelector(".".concat($e,"-footer")),this.tooltipBox=h.querySelector(".".concat($e,"-tooltip")),this.player=h.querySelector(".".concat($e,"-player")),this.list=h.querySelector(".".concat($e,"-list")),h.id="".concat($e).concat(this.id),a.id="".concat($e,"Title").concat(this.id),Ne(a,i.title?tl(Array.isArray(i.title)?i.title[0]:i.title):Pr),Ne(c,i.navbar?tl(i.navbar):Pr),aa(f,Pr,!i.button),i.keyboard&&f.setAttribute("tabindex",0),i.backdrop&&(Ne(h,"".concat($e,"-backdrop")),!i.inline&&i.backdrop!=="static"&&jf(l,Xl,"hide")),oa(i.className)&&i.className&&i.className.split(Qh).forEach(function(b){Ne(h,b)}),i.toolbar){var u=document.createElement("ul"),d=xs(i.toolbar),p=el.slice(0,3),m=el.slice(7,9),g=el.slice(9);d||Ne(s,tl(i.toolbar)),pt(d?i.toolbar:el,function(b,y){var C=d&&xs(b),w=d?ed(y):b,T=C&&!Es(b.show)?b.show:b;if(!(!T||!i.zoomable&&p.indexOf(w)!==-1||!i.rotatable&&m.indexOf(w)!==-1||!i.scalable&&g.indexOf(w)!==-1)){var O=C&&!Es(b.size)?b.size:b,A=C&&!Es(b.click)?b.click:b,M=document.createElement("li");i.keyboard&&M.setAttribute("tabindex",0),M.setAttribute("role","button"),Ne(M,"".concat($e,"-").concat(w)),ut(A)||jf(M,Xl,w),Ot(T)&&Ne(M,tl(T)),["small","large"].indexOf(O)!==-1?Ne(M,"".concat($e,"-").concat(O)):w==="play"&&Ne(M,"".concat($e,"-large")),ut(A)&&Be(M,no,A),u.appendChild(M)}}),s.appendChild(u)}else Ne(s,Pr);if(!i.rotatable){var v=s.querySelectorAll('li[class*="rotate"]');Ne(v,Go),pt(v,function(b){s.appendChild(b)})}if(i.inline)Ne(f,rF),Zn(h,{zIndex:i.zIndexInline}),window.getComputedStyle(r).position==="static"&&Zn(r,{position:"relative"}),r.insertBefore(h,n.nextSibling);else{Ne(f,iF),Ne(h,Lf),Ne(h,_l),Ne(h,Pr),Zn(h,{zIndex:i.zIndex});var _=i.container;oa(_)&&(_=n.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(h)}if(i.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,ut(i.ready)&&Be(n,rv,i.ready,{once:!0}),Ft(n,rv)===!1){this.ready=!1;return}this.ready&&i.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=OF,t}},{key:"setDefaults",value:function(n){An($m,xs(n)&&n)}}]),t}();An(J0.prototype,wF,CF,SF,TF,kF);function bv(t,e,n){const i=t.slice();return i[8]=e[n],i}function wv(t){var T;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C;a=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let w=((T=t[2].thumbnails)==null?void 0:T.length)&&Cv(t);return{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="미리보기",o=V(),h=E("button"),de(a.$$.fragment),s=V(),c=E("div"),f=E("div"),l=E("div"),u=E("img"),p=V(),w&&w.c(),m=V(),g=E("div"),v=E("button"),v.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),Xe(u.src,d=t[1])||S(u,"src",d),S(u,"alt",""),S(u,"class","object-contain max-h-full max-w-full"),S(l,"class","h-[50vh] flex justify-center items-center"),S(f,"class","flex-grow overflow-y-auto"),S(c,"class","flex flex-col flex-grow overflow-hidden"),S(v,"class","btn secondary-btn"),S(g,"class","mt-3 flex justify-center"),S(n,"class","flex flex-col h-full max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(O,A){j(O,e,A),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u),k(f,p),w&&w.m(f,null),k(n,m),k(n,g),k(g,v),b=!0,y||(C=[Q(h,"click",fn),Q(v,"click",fn),Q(e,"introstart",t[3]),Q(e,"outroend",t[4])],y=!0)},p(O,A){var M;(!b||A&2&&!Xe(u.src,d=O[1]))&&S(u,"src",d),(M=O[2].thumbnails)!=null&&M.length?w?w.p(O,A):(w=Cv(O),w.c(),w.m(f,null)):w&&(w.d(1),w=null)},i(O){b||(R(a.$$.fragment,O),O&&Ut(()=>{b&&(_||(_=Yt(e,wi,{y:50},!0)),_.run(1))}),b=!0)},o(O){H(a.$$.fragment,O),O&&(_||(_=Yt(e,wi,{y:50},!1)),_.run(0)),b=!1},d(O){O&&N(e),fe(a),w&&w.d(),O&&_&&_.end(),y=!1,We(C)}}}function Cv(t){let e,n,i=Me(t[2].thumbnails),r=[];for(let o=0;o<i.length;o+=1)r[o]=Sv(bv(t,i,o));return{c(){e=E("div"),n=E("div");for(let o=0;o<r.length;o+=1)r[o].c();S(n,"class","grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 w-full"),S(e,"class","mt-3")},m(o,h){j(o,e,h),k(e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(o,h){if(h&6){i=Me(o[2].thumbnails);let a;for(a=0;a<i.length;a+=1){const s=bv(o,i,a);r[a]?r[a].p(s,h):(r[a]=Sv(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(o){o&&N(e),Dt(r,o)}}}function Sv(t){let e,n,i,r,o,h;function a(){return t[5](t[8])}return{c(){e=E("button"),n=E("img"),r=V(),Xe(n.src,i=t[8].url)||S(n,"src",i),S(n,"alt","미리보기"),S(n,"class","rounded-lg object-contain h-full"),S(e,"type","button")},m(s,c){j(s,e,c),k(e,n),k(e,r),o||(h=Q(e,"click",a),o=!0)},p(s,c){t=s,c&4&&!Xe(n.src,i=t[8].url)&&S(n,"src",i)},d(s){s&&N(e),o=!1,h()}}}function xF(t){let e,n,i=t[0]&&wv(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&R(i,1)):(i=wv(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function DF(t,e,n){let i;je(t,Re,c=>n(2,i=c));let{isOpen:r}=e,o=i.thumbnails[0].url;zt(),ki(async()=>{});function h(c){bi.call(this,t,c)}function a(c){bi.call(this,t,c)}const s=c=>n(1,o=c.url);return t.$$set=c=>{"isOpen"in c&&n(0,r=c.isOpen)},[r,o,i,h,a,s]}class AF extends qe{constructor(e){super(),Ge(this,e,DF,xF,Ve,{isOpen:0})}}function Tv(t,e,n){const i=t.slice();return i[20]=e[n],i}function kv(t,e,n){const i=t.slice();return i[20]=e[n],i}function Ov(t,e,n){const i=t.slice();return i[20]=e[n],i}function Ev(t){let e,n=t[3].product.optionNames[0]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","color"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[0]+"")&&He(i,n)},d(r){r&&N(e)}}}function xv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Pe(e,e.__value)},m(o,h){j(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Pe(e,e.__value))},d(o){o&&N(e)}}}function Dv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[1]&&Av(t),s=Me(t[2].optionValue2),c=[];for(let f=0;f<s.length;f+=1)c[f]=Pv(kv(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Pe(r,r.__value),S(i,"id","size"),S(i,"class","select w-full"),t[1].optionValue2===void 0&&Ut(()=>t[11].call(i))},m(f,l){j(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);_i(i,t[1].optionValue2,!0),o||(h=[Q(i,"change",t[11]),Q(i,"change",t[12])],o=!0)},p(f,l){if(f[3].product.optionNames[1]?a?a.p(f,l):(a=Av(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Me(f[2].optionValue2);let u;for(u=0;u<s.length;u+=1){const d=kv(f,s,u);c[u]?c[u].p(d,l):(c[u]=Pv(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&_i(i,f[1].optionValue2)},d(f){f&&N(e),a&&a.d(),Dt(c,f),o=!1,We(h)}}}function Av(t){let e,n=t[3].product.optionNames[1]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","size"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[1]+"")&&He(i,n)},d(r){r&&N(e)}}}function Pv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Pe(e,e.__value)},m(o,h){j(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Pe(e,e.__value))},d(o){o&&N(e)}}}function Mv(t){let e,n,i,r,o,h,a=t[3].product.optionNames[2]&&Iv(t),s=Me(t[2].optionValue3),c=[];for(let f=0;f<s.length;f+=1)c[f]=Rv(Tv(t,s,f));return{c(){e=E("div"),a&&a.c(),n=V(),i=E("select"),r=E("option"),r.textContent="선택하세요";for(let f=0;f<c.length;f+=1)c[f].c();r.__value="",Pe(r,r.__value),S(i,"id","option3"),S(i,"class","select w-full"),t[1].optionValue3===void 0&&Ut(()=>t[13].call(i))},m(f,l){j(f,e,l),a&&a.m(e,null),k(e,n),k(e,i),k(i,r);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(i,null);_i(i,t[1].optionValue3,!0),o||(h=[Q(i,"change",t[13]),Q(i,"change",t[14])],o=!0)},p(f,l){if(f[3].product.optionNames[2]?a?a.p(f,l):(a=Iv(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4){s=Me(f[2].optionValue3);let u;for(u=0;u<s.length;u+=1){const d=Tv(f,s,u);c[u]?c[u].p(d,l):(c[u]=Rv(d),c[u].c(),c[u].m(i,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=s.length}l&6&&_i(i,f[1].optionValue3)},d(f){f&&N(e),a&&a.d(),Dt(c,f),o=!1,We(h)}}}function Iv(t){let e,n=t[3].product.optionNames[2]+"",i;return{c(){e=E("label"),i=we(n),S(e,"for","option3"),S(e,"class","block text-sm font-medium text-gray-700")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[3].product.optionNames[2]+"")&&He(i,n)},d(r){r&&N(e)}}}function Rv(t){let e,n=t[20]+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[20],Pe(e,e.__value)},m(o,h){j(o,e,h),k(e,i)},p(o,h){h&4&&n!==(n=o[20]+"")&&He(i,n),h&4&&r!==(r=o[20])&&(e.__value=r,Pe(e,e.__value))},d(o){o&&N(e)}}}function Fv(t){let e,n,i,r;return{c(){e=E("div"),n=E("button"),n.textContent="취소",S(n,"type","button"),S(n,"class","btn dark-btn w-full")},m(o,h){j(o,e,h),k(e,n),i||(r=Q(n,"click",t[16]),i=!0)},p:ge,d(o){o&&N(e),i=!1,r()}}}function PF(t){var C;let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m=t[3].product.optionNames[0]&&Ev(t),g=Me(t[2].optionValue1),v=[];for(let w=0;w<g.length;w+=1)v[w]=xv(Ov(t,g,w));let _=t[1].optionValue1&&Dv(t),b=t[1].optionValue2&&t[2].optionValue3.length>0&&Mv(t),y=!((C=t[4])!=null&&C.length)&&Fv(t);return{c(){e=E("div"),n=E("div"),i=E("div"),m&&m.c(),r=V(),o=E("select"),h=E("option"),h.textContent="선택하세요";for(let w=0;w<v.length;w+=1)v[w].c();a=V(),_&&_.c(),s=V(),b&&b.c(),c=V(),f=E("div"),l=E("button"),l.textContent="선택완료",u=V(),y&&y.c(),h.__value="",Pe(h,h.__value),S(o,"id","color"),S(o,"class","select w-full"),t[1].optionValue1===void 0&&Ut(()=>t[9].call(o)),S(l,"type","button"),S(l,"class","btn primary-btn w-full"),S(n,"class","flex flex-col absolute top-1/2 left-1/2 transform -translate-xy-50 bg-white border w-full max-h-[400px] max-w-[400px] drop-shadow-lg h-full rounded-lg p-5 gap-3"),S(e,"class","flex absolute h-full w-full max-h-[100%] max-w-[100%] grow flex-col bg-white rounded bg-opacity-95 z-50 border")},m(w,T){j(w,e,T),k(e,n),k(n,i),m&&m.m(i,null),k(i,r),k(i,o),k(o,h);for(let O=0;O<v.length;O+=1)v[O]&&v[O].m(o,null);_i(o,t[1].optionValue1,!0),k(n,a),_&&_.m(n,null),k(n,s),b&&b.m(n,null),k(n,c),k(n,f),k(f,l),k(n,u),y&&y.m(n,null),d||(p=[Q(o,"change",t[9]),Q(o,"change",t[10]),Q(l,"click",t[15])],d=!0)},p(w,[T]){var O;if(w[3].product.optionNames[0]?m?m.p(w,T):(m=Ev(w),m.c(),m.m(i,r)):m&&(m.d(1),m=null),T&4){g=Me(w[2].optionValue1);let A;for(A=0;A<g.length;A+=1){const M=Ov(w,g,A);v[A]?v[A].p(M,T):(v[A]=xv(M),v[A].c(),v[A].m(o,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=g.length}T&6&&_i(o,w[1].optionValue1),w[1].optionValue1?_?_.p(w,T):(_=Dv(w),_.c(),_.m(n,s)):_&&(_.d(1),_=null),w[1].optionValue2&&w[2].optionValue3.length>0?b?b.p(w,T):(b=Mv(w),b.c(),b.m(n,c)):b&&(b.d(1),b=null),(O=w[4])!=null&&O.length?y&&(y.d(1),y=null):y?y.p(w,T):(y=Fv(w),y.c(),y.m(n,null))},i:ge,o:ge,d(w){w&&N(e),m&&m.d(),Dt(v,w),_&&_.d(),b&&b.d(),y&&y.d(),d=!1,We(p)}}}function MF(t,e,n){let i,r,o,h;je(t,Re,T=>n(3,r=T)),je(t,Fl,T=>n(18,o=T)),je(t,ui,T=>n(4,h=T));let{publishId:a}=e,{loadPublish:s}=e,{runEditor:c}=e;const f=o.linkOptions.reduce((T,O,A)=>{if(O.editorOptions){const M={...O.editorOptions,productNo:O.productNo,productOption:O.productOptions,publish:O.publish};T=[...T,M]}return T},[]);let l={optionValue1:[],optionValue2:[],optionValue3:[]},u={optionValue1:"",optionValue2:"",optionValue3:""};function d(T,O){const A=O.target.value;if(n(1,u[T]=A,u),T!=="optionValue3")for(let M=parseInt(T.slice(-1))+1;M<=3;M++)n(1,u[`optionValue${M}`]="",u);n(1,u={...u})}async function p(){n(7,a=i.publish),await s(),ye(Re,r.currentOption=i,r)}function m(){u.optionValue1=Lo(this),n(1,u),n(2,l),n(1,u)}const g=T=>d("optionValue1",T);function v(){u.optionValue2=Lo(this),n(1,u),n(2,l),n(1,u)}const _=T=>d("optionValue2",T);function b(){u.optionValue3=Lo(this),n(1,u),n(2,l),n(1,u)}const y=T=>d("optionValue3",T),C=()=>p(),w=()=>n(0,c=!1);return t.$$set=T=>{"publishId"in T&&n(7,a=T.publishId),"loadPublish"in T&&n(8,s=T.loadPublish),"runEditor"in T&&n(0,c=T.runEditor)},t.$$.update=()=>{t.$$.dirty&2&&(u.optionValue1?n(2,l.optionValue2=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1).map(T=>T.optionValue2))],l):n(2,l.optionValue2=[],l)),t.$$.dirty&2&&(u.optionValue1&&u.optionValue2?n(2,l.optionValue3=[...new Set(f.filter(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2).map(T=>T.optionValue3).filter(Boolean))],l):n(2,l.optionValue3=[],l)),t.$$.dirty&2&&(i=f.find(T=>T.optionValue1===u.optionValue1&&T.optionValue2===u.optionValue2&&(T.optionValue3===u.optionValue3||!T.optionValue3)))},n(2,l.optionValue1=[...new Set(f.map(T=>T.optionValue1))],l),[c,u,l,r,h,d,p,a,s,m,g,v,_,b,y,C,w]}class IF extends qe{constructor(e){super(),Ge(this,e,MF,PF,Ve,{publishId:7,loadPublish:8,runEditor:0})}}function RF(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w;return n=new Se({props:{icon:"file-icons:arttext4",height:"20"}}),a=new Se({props:{icon:"ph:upload-bold",height:"20"}}),u=new Se({props:{icon:"mingcute:text-2-fill",height:"20"}}),v=new Se({props:{icon:"ic:outline-draw",height:"20"}}),{c(){e=E("button"),de(n.$$.fragment),i=V(),r=E("span"),r.textContent="클립아트",o=V(),h=E("button"),de(a.$$.fragment),s=V(),c=E("span"),c.textContent="업로드",f=V(),l=E("button"),de(u.$$.fragment),d=V(),p=E("span"),p.textContent="텍스트",m=V(),g=E("button"),de(v.$$.fragment),_=V(),b=E("span"),b.textContent="도형/그리기",S(r,"class","whitespace-nowrap text-2xs hidden md:block"),S(e,"type","button"),S(e,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(c,"class","whitespace-nowrap text-2xs hidden md:block"),S(h,"type","button"),S(h,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(p,"class","whitespace-nowrap text-2xs hidden md:block"),S(l,"type","button"),S(l,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(b,"class","whitespace-nowrap text-2xs hidden md:block"),S(g,"type","button"),S(g,"class","flex flex-col items-center bg-white left-menu border-b py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded")},m(T,O){j(T,e,O),ue(n,e,null),k(e,i),k(e,r),j(T,o,O),j(T,h,O),ue(a,h,null),k(h,s),k(h,c),j(T,f,O),j(T,l,O),ue(u,l,null),k(l,d),k(l,p),j(T,m,O),j(T,g,O),ue(v,g,null),k(g,_),k(g,b),y=!0,C||(w=[Q(e,"click",t[1]),Q(h,"click",t[2]),Q(l,"click",t[3]),Q(g,"click",t[4])],C=!0)},p:ge,i(T){y||(R(n.$$.fragment,T),R(a.$$.fragment,T),R(u.$$.fragment,T),R(v.$$.fragment,T),y=!0)},o(T){H(n.$$.fragment,T),H(a.$$.fragment,T),H(u.$$.fragment,T),H(v.$$.fragment,T),y=!1},d(T){T&&(N(e),N(o),N(h),N(f),N(l),N(m),N(g)),fe(n),fe(a),fe(u),fe(v),C=!1,We(w)}}}function FF(t,e,n){let i;return je(t,Qt,s=>n(0,i=s)),[i,()=>ye(Qt,i="clipart",i),()=>ye(Qt,i="upload",i),()=>ye(Qt,i="text",i),()=>ye(Qt,i="draw",i)]}class LF extends qe{constructor(e){super(),Ge(this,e,FF,RF,Ve,{})}}function Lv(t){let e,n,i,r,o,h,a,s,c,f=t[0].product.productName+"",l,u,d,p,m,g,v,_,b,y,C,w=t[0].currentOption&&Nv(t);return{c(){e=E("div"),n=E("h2"),n.textContent="선택상품",i=V(),r=E("div"),o=E("img"),a=V(),s=E("div"),c=E("p"),l=we(f),u=V(),w&&w.c(),d=V(),p=E("div"),m=E("button"),m.textContent="-",g=V(),v=E("input"),_=V(),b=E("button"),b.textContent="+",S(n,"class","text-xs border-b p-3"),Xe(o.src,h=t[0].product.images[0].url)||S(o,"src",h),S(o,"alt","thumbnail"),S(o,"class","max-h-12 max-w-12 object-contain"),S(c,"class","text-xs grow"),S(s,"class","flex flex-col"),S(m,"type","button"),S(m,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(v,"type","text"),S(v,"class","border w-12 input-sm rounded-none"),S(b,"type","button"),S(b,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(p,"class","flex"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(T,O){j(T,e,O),k(e,n),k(e,i),k(e,r),k(r,o),k(r,a),k(r,s),k(s,c),k(c,l),k(s,u),w&&w.m(s,null),k(r,d),k(r,p),k(p,m),k(p,g),k(p,v),Pe(v,t[0].count),k(p,_),k(p,b),y||(C=[Q(m,"click",t[3]),Q(v,"input",t[4]),Q(b,"click",t[5])],y=!0)},p(T,O){O&1&&!Xe(o.src,h=T[0].product.images[0].url)&&S(o,"src",h),O&1&&f!==(f=T[0].product.productName+"")&&He(l,f),T[0].currentOption?w?w.p(T,O):(w=Nv(T),w.c(),w.m(s,null)):w&&(w.d(1),w=null),O&1&&v.value!==T[0].count&&Pe(v,T[0].count)},d(T){T&&N(e),w&&w.d(),y=!1,We(C)}}}function Nv(t){let e,n,i,r=t[0].currentOption.optionValue1&&jv(t),o=t[0].currentOption.optionValue2&&Bv(t),h=t[0].currentOption.optionValue3&&Uv(t);return{c(){e=E("p"),r&&r.c(),n=V(),o&&o.c(),i=V(),h&&h.c(),S(e,"class","text-xs grow mt-1 text-gray-500")},m(a,s){j(a,e,s),r&&r.m(e,null),k(e,n),o&&o.m(e,null),k(e,i),h&&h.m(e,null)},p(a,s){a[0].currentOption.optionValue1?r?r.p(a,s):(r=jv(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),a[0].currentOption.optionValue2?o?o.p(a,s):(o=Bv(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null),a[0].currentOption.optionValue3?h?h.p(a,s):(h=Uv(a),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(a){a&&N(e),r&&r.d(),o&&o.d(),h&&h.d()}}}function jv(t){let e=t[0].currentOption.optionValue1+"",n;return{c(){n=we(e)},m(i,r){j(i,n,r)},p(i,r){r&1&&e!==(e=i[0].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&N(n)}}}function Bv(t){let e,n=t[0].currentOption.optionValue2+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){j(r,e,o),j(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function Uv(t){let e,n=t[0].currentOption.optionValue3+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){j(r,e,o),j(r,i,o)},p(r,o){o&1&&n!==(n=r[0].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function NF(t){let e,n=t[0].product&&Lv(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),j(i,e,r)},p(i,[r]){i[0].product?n?n.p(i,r):(n=Lv(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d(i)}}}function jF(t,e,n){let i;je(t,Re,c=>n(0,i=c));function r(){ye(Re,i.count++,i)}function o(){i.count>1&&ye(Re,i.count--,i)}const h=()=>o();function a(){i.count=this.value,Re.set(i)}return[i,r,o,h,a,()=>r()]}class BF extends qe{constructor(e){super(),Ge(this,e,jF,NF,Ve,{})}}function UF(t,{from:e,to:n},i={}){const r=getComputedStyle(t),o=r.transform==="none"?"":r.transform,[h,a]=r.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*h/n.width-(n.left+h),c=e.top+e.height*a/n.height-(n.top+a),{delay:f=0,duration:l=d=>Math.sqrt(d)*120,easing:u=lh}=i;return{delay:f,duration:Wn(l)?l(Math.sqrt(s*s+c*c)):l,easing:u,css:(d,p)=>{const m=p*s,g=p*c,v=d+p*e.width/n.width,_=d+p*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${_});`}}}function Wv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wv(Object(n),!0).forEach(function(i){ro(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qo(t){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(t)}function ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WF(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function YF(t,e){if(t==null)return{};var n=WF(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function zF(t,e){return VF(t)||$F(t,e)||td(t,e)||qF()}function zn(t){return HF(t)||XF(t)||td(t)||GF()}function HF(t){if(Array.isArray(t))return Bf(t)}function VF(t){if(Array.isArray(t))return t}function XF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $F(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,o=!1,h,a;try{for(n=n.call(t);!(r=(h=n.next()).done)&&(i.push(h.value),!(e&&i.length===e));r=!0);}catch(s){o=!0,a=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw a}}return i}}function td(t,e){if(t){if(typeof t=="string")return Bf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bf(t,e)}}function Bf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function GF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xa(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=td(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,h=!1,a;return{s:function(){n=n.call(t)},n:function(){var s=n.next();return o=s.done,s},e:function(s){h=!0,a=s},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(h)throw a}}}}var KF="finalize",JF="consider";function so(t,e,n){t.dispatchEvent(new CustomEvent(KF,{detail:{items:e,info:n}}))}function _r(t,e,n){t.dispatchEvent(new CustomEvent(JF,{detail:{items:e,info:n}}))}var Oc="draggedEntered",Da="draggedLeft",Ec="draggedOverIndex",nd="draggedLeftDocument",Gl={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function ZF(t,e,n){t.dispatchEvent(new CustomEvent(Oc,{detail:{indexObj:e,draggedEl:n}}))}function QF(t,e,n){t.dispatchEvent(new CustomEvent(Da,{detail:{draggedEl:e,type:Gl.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function eL(t,e){t.dispatchEvent(new CustomEvent(Da,{detail:{draggedEl:e,type:Gl.OUTSIDE_OF_ANY}}))}function tL(t,e,n){t.dispatchEvent(new CustomEvent(Ec,{detail:{indexObj:e,draggedEl:n}}))}function nL(t){window.dispatchEvent(new CustomEvent(nd,{detail:{draggedEl:t}}))}var gn={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Oc,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ec,DRAGGED_LEFT:Da,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Sn={POINTER:"pointer",KEYBOARD:"keyboard"},xc="isDndShadowItem",id="data-is-dnd-shadow-item-internal",iL="data-is-dnd-shadow-item-hint",rL="id:dnd-shadow-placeholder-0000",sL="dnd-action-dragged-el",en="id",Uf=0;function Z0(){Uf++}function Q0(){if(Uf===0)throw new Error("Bug! trying to decrement when there are no dropzones");Uf--}var rd=typeof window>"u";function Wf(t){var e,n=t.getBoundingClientRect(),i=getComputedStyle(t),r=i.transform;if(r){var o,h,a,s;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),o=+e[0],h=+e[5],a=+e[12],s=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),o=+e[0],h=+e[3],a=+e[4],s=+e[5];else return n;var c=i.transformOrigin,f=n.x-a-(1-o)*parseFloat(c),l=n.y-s-(1-h)*parseFloat(c.slice(c.indexOf(" ")+1)),u=o?n.width/o:t.offsetWidth,d=h?n.height/h:t.offsetHeight;return{x:f,y:l,width:u,height:d,top:l,right:f+u,bottom:l+d,left:f}}else return n}function ew(t){var e=Wf(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function tw(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function nw(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function oL(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Dc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function la(t){return nw(tw(t))}function Yv(t,e){var n=la(t),i=ew(e);return Dc(n,i)}function aL(t,e){var n=la(t),i=la(e);return oL(n,i)}function lL(t){var e=tw(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}var Us;function sd(){Us=new Map}sd();function cL(t){var e=Array.from(t.children).findIndex(function(n){return n.getAttribute(id)});if(e>=0)return Us.has(t)||Us.set(t,new Map),Us.get(t).set(e,ew(t.children[e])),e}function uL(t,e){if(!Yv(t,e))return null;var n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};for(var i=cL(e),r=0;r<n.length;r++)if(Yv(t,n[r])){var o=Us.has(e)&&Us.get(e).get(r);return o&&!Dc(la(t),o)?{index:i,isProximityBased:!1}:{index:r,isProximityBased:!1}}for(var h=Number.MAX_VALUE,a=void 0,s=0;s<n.length;s++){var c=aL(t,n[s]);c<h&&(h=c,a=s)}return{index:a,isProximityBased:!0}}function il(t){return JSON.stringify(t,null,2)}function ql(t){if(!t)throw new Error("cannot get depth of a falsy node");return iw(t,0)}function iw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.parentElement?iw(t.parentElement,e+1):e-1}function fL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function hL(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var dL=200,zv=10,Yf;function pL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dL,i=arguments.length>3?arguments[3]:void 0,r,o,h=!1,a,s=Array.from(e).sort(function(f,l){return ql(l)-ql(f)});function c(){var f=la(t),l=i.multiScrollIfNeeded();if(!l&&a&&Math.abs(a.x-f.x)<zv&&Math.abs(a.y-f.y)<zv){Yf=window.setTimeout(c,n);return}if(lL(t)){nL(t);return}a=f;var u=!1,d=xa(s),p;try{for(d.s();!(p=d.n()).done;){var m=p.value;l&&sd();var g=uL(t,m);if(g!==null){var v=g.index;u=!0,m!==r?(r&&QF(r,t,m),ZF(m,g,t),r=m):v!==o&&(tL(m,g,t),o=v);break}}}catch(_){d.e(_)}finally{d.f()}!u&&h&&r?(eL(r,t),r=void 0,o=void 0,h=!1):h=!0,Yf=window.setTimeout(c,n)}c()}function gL(){clearTimeout(Yf),sd()}var Ao=30;function mL(){var t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(o){var h=t,a=h.directionObj,s=h.stepPx;a&&(o.scrollBy(a.x*s,a.y*s),window.requestAnimationFrame(function(){return n(o)}))}function i(o){return Ao-o}function r(o,h){if(!h)return!1;var a=vL(o,h);if(a===null)return e(),!1;var s=!!t.directionObj,c=!1,f=!1;return h.scrollHeight>h.clientHeight&&(a.bottom<Ao?(c=!0,t.directionObj={x:0,y:1},t.stepPx=i(a.bottom)):a.top<Ao&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=i(a.top)),!s&&c)||h.scrollWidth>h.clientWidth&&(a.right<Ao?(f=!0,t.directionObj={x:1,y:0},t.stepPx=i(a.right)):a.left<Ao&&(f=!0,t.directionObj={x:-1,y:0},t.stepPx=i(a.left)),!s&&f)?(n(h),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function vL(t,e){var n=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return Dc(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:n.right-t.x}:null}function _L(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=bL(t),i=Array.from(n).sort(function(a,s){return ql(s)-ql(a)}),r=mL(),o=r.scrollIfNeeded;function h(){var a=e();if(!a||!i)return!1;for(var s=i.filter(function(l){return Dc(a,l.getBoundingClientRect())||l===document.scrollingElement}),c=0;c<s.length;c++){var f=o(a,s[c]);if(f)return!0}return!1}return{multiScrollIfNeeded:n.size>0?h:function(){return!1}}}function yL(t){if(!t)return[];for(var e=[],n=t;n;){var i=window.getComputedStyle(n),r=i.overflow;r.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&e.push(n),n=n.parentElement}return e}function bL(t){var e=new Set,n=xa(t),i;try{for(n.s();!(i=n.n()).done;){var r=i.value;yL(r).forEach(function(o){return e.add(o)})}}catch(o){n.e(o)}finally{n.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function wL(t){var e=t.cloneNode(!0),n=[],i=t.tagName==="SELECT",r=i?[t]:zn(t.querySelectorAll("select")),o=xa(r),h;try{for(o.s();!(h=o.n()).done;){var a=h.value;n.push(a.value)}}catch(b){o.e(b)}finally{o.f()}if(r.length>0)for(var s=i?[e]:zn(e.querySelectorAll("select")),c=0;c<s.length;c++){var f=s[c],l=n[c],u=f.querySelector('option[value="'.concat(l,'"'));u&&u.setAttribute("selected",!0)}var d=t.tagName==="CANVAS",p=d?[t]:zn(t.querySelectorAll("canvas"));if(p.length>0)for(var m=d?[e]:zn(e.querySelectorAll("canvas")),g=0;g<m.length;g++){var v=p[g],_=m[g];_.width=v.width,_.height=v.height,_.getContext("2d").drawImage(v,0,0)}return e}var ca=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),CL=ro({},ca.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function rw(t){if(!ca[t])throw new Error("Can't get non existing feature flag ".concat(t,"! Supported flags: ").concat(Object.keys(ca)));return CL[t]}var SL=.2;function Tr(t){return"".concat(t," ").concat(SL,"s ease")}function TL(t,e){var n=t.getBoundingClientRect(),i=wL(t);sw(t,i),i.id=sL,i.style.position="fixed";var r=n.top,o=n.left;if(i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px"),e){var h=nw(n);r-=h.y-e.y,o-=h.x-e.x,window.setTimeout(function(){i.style.top="".concat(r,"px"),i.style.left="".concat(o,"px")},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height="".concat(n.height,"px"),i.style.width="".concat(n.width,"px"),i.style.transition="".concat(Tr("top"),", ").concat(Tr("left"),", ").concat(Tr("background-color"),", ").concat(Tr("opacity"),", ").concat(Tr("color")," "),window.setTimeout(function(){return i.style.transition+=", ".concat(Tr("width"),", ").concat(Tr("height"))},0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function kL(t){t.style.cursor="grab"}function OL(t,e,n,i){sw(e,t);var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),h=r.width-o.width,a=r.height-o.height;if(h||a){var s={left:(n-o.left)/o.width,top:(i-o.top)/o.height};rw(ca.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height="".concat(r.height,"px"),t.style.width="".concat(r.width,"px")),t.style.left="".concat(parseFloat(t.style.left)-s.left*h,"px"),t.style.top="".concat(parseFloat(t.style.top)-s.top*a,"px")}}function sw(t,e){var n=window.getComputedStyle(t);Array.from(n).filter(function(i){return i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||rw(ca.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")}).forEach(function(i){return e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))})}function EL(t,e){t.draggable=!1,t.ondragstart=function(){return!1},e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function ow(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function xL(t){t.style.visibility="hidden",t.setAttribute(id,"true")}function DL(t){t.style.visibility="",t.removeAttribute(id)}function bl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=r[o]}),n(i).forEach(function(o){return i.classList.add(o)})})}function Kl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};t.forEach(function(i){var r=e(i);Object.keys(r).forEach(function(o){i.style[o]=""}),n(i).forEach(function(o){return i.classList.contains(o)&&i.classList.remove(o)})})}function AL(t){var e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");var n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}var PL="--any--",ML=100,IL=20,Hv=3,Vv={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Xv="data-is-dnd-original-dragged-item",ai,sn,Cn,Ac,Et,Pc,pr,an,ir,En,Mr=!1,od=!1,ad,Aa=!1,wl=[],Qn=new Map,jt=new Map,Uu=new WeakMap;function RL(t,e){Qn.has(e)||Qn.set(e,new Set),Qn.get(e).has(t)||(Qn.get(e).add(t),Z0())}function $v(t,e){Qn.get(e).delete(t),Q0(),Qn.get(e).size===0&&Qn.delete(e)}function FL(){var t=Qn.get(Ac),e=xa(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.addEventListener(Oc,aw),i.addEventListener(Da,lw),i.addEventListener(Ec,cw)}}catch(a){e.e(a)}finally{e.f()}window.addEventListener(nd,oo);var r=Math.max.apply(Math,zn(Array.from(t.keys()).map(function(a){return jt.get(a).dropAnimationDurationMs}))),o=r===0?IL:Math.max(r,ML),h=_L(t,function(){return En});pL(sn,t,o*1.07,h)}function LL(){var t=Qn.get(Ac),e=xa(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.removeEventListener(Oc,aw),i.removeEventListener(Da,lw),i.removeEventListener(Ec,cw)}}catch(r){e.e(r)}finally{e.f()}window.removeEventListener(nd,oo),gL()}function Mc(t){return t.findIndex(function(e){return!!e[xc]})}function NL(t){var e;return $l($l({},t),{},(e={},ro(e,xc,!0),ro(e,en,rL),e))}function aw(t){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Et)){if(Aa=!1,n=n.filter(function(f){return f[en]!==pr[en]}),Et!==t.currentTarget){var r=jt.get(Et).items,o=r.filter(function(f){return!f[xc]});_r(Et,o,{trigger:gn.DRAGGED_ENTERED_ANOTHER,id:Cn[en],source:Sn.POINTER})}var h=t.detail.indexObj,a=h.index,s=h.isProximityBased,c=s&&a===t.currentTarget.children.length-1?a+1:a;an=t.currentTarget,n.splice(c,0,pr),_r(t.currentTarget,n,{trigger:gn.DRAGGED_ENTERED,id:Cn[en],source:Sn.POINTER})}}function lw(t){if(Mr){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Et&&t.currentTarget!==an)){var r=zn(n),o=Mc(r);o!==-1&&r.splice(o,1);var h=an;an=void 0;var a=t.detail,s=a.type,c=a.theOtherDz;if(s===Gl.OUTSIDE_OF_ANY||s===Gl.LEFT_FOR_ANOTHER&&c!==Et&&jt.get(c).dropFromOthersDisabled){Aa=!0,an=Et;var f=h===Et?r:zn(jt.get(Et).items);f.splice(Pc,0,pr),_r(Et,f,{trigger:gn.DRAGGED_LEFT_ALL,id:Cn[en],source:Sn.POINTER})}_r(t.currentTarget,r,{trigger:gn.DRAGGED_LEFT,id:Cn[en],source:Sn.POINTER})}}}function cw(t){var e=jt.get(t.currentTarget),n=e.items,i=e.dropFromOthersDisabled;if(!(i&&t.currentTarget!==Et)){var r=zn(n);Aa=!1;var o=t.detail.indexObj.index,h=Mc(r);h!==-1&&r.splice(h,1),r.splice(o,0,pr),_r(t.currentTarget,r,{trigger:gn.DRAGGED_OVER_INDEX,id:Cn[en],source:Sn.POINTER})}}function Jl(t){t.preventDefault();var e=t.touches?t.touches[0]:t;En={x:e.clientX,y:e.clientY},sn.style.transform="translate3d(".concat(En.x-ir.x,"px, ").concat(En.y-ir.y,"px, 0)")}function oo(){od=!0,window.removeEventListener("mousemove",Jl),window.removeEventListener("touchmove",Jl),window.removeEventListener("mouseup",oo),window.removeEventListener("touchend",oo),LL(),kL(sn),an||(an=Et);var t=jt.get(an),e=t.items,n=t.type;Kl(Qn.get(n),function(o){return jt.get(o).dropTargetStyle},function(o){return jt.get(o).dropTargetClasses});var i=Mc(e);i===-1&&an===Et&&(i=Pc),e=e.map(function(o){return o[xc]?Cn:o});function r(){ad(),so(an,e,{trigger:Aa?gn.DROPPED_OUTSIDE_OF_ANY:gn.DROPPED_INTO_ZONE,id:Cn[en],source:Sn.POINTER}),an!==Et&&so(Et,jt.get(Et).items,{trigger:gn.DROPPED_INTO_ANOTHER,id:Cn[en],source:Sn.POINTER}),i!==-1&&DL(an.children[i]),UL()}jL(i,r)}function jL(t,e){var n=t>-1?Wf(an.children[t]):Wf(an),i={x:n.left-parseFloat(sn.style.left),y:n.top-parseFloat(sn.style.top)},r=jt.get(an),o=r.dropAnimationDurationMs,h="transform ".concat(o,"ms ease");sn.style.transition=sn.style.transition?sn.style.transition+","+h:h,sn.style.transform="translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)"),window.setTimeout(e,o)}function BL(t,e){wl.push({dz:t,destroy:e}),window.requestAnimationFrame(function(){ow(t),document.body.appendChild(t)})}function UL(){sn.remove(),ai.remove(),wl.length&&(wl.forEach(function(t){var e=t.dz,n=t.destroy;n(),e.remove()}),wl=[]),sn=void 0,ai=void 0,Cn=void 0,Ac=void 0,Et=void 0,Pc=void 0,pr=void 0,an=void 0,ir=void 0,En=void 0,Mr=!1,od=!1,ad=void 0,Aa=!1}function WL(t,e){var n=!1,i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Vv,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1},r=new Map;function o(){window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",a,{passive:!1}),window.addEventListener("touchend",a,{passive:!1})}function h(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}function a(){h(),ai=void 0,ir=void 0,En=void 0}function s(u){u.preventDefault();var d=u.touches?u.touches[0]:u;En={x:d.clientX,y:d.clientY},(Math.abs(En.x-ir.x)>=Hv||Math.abs(En.y-ir.y)>=Hv)&&(h(),f())}function c(u){if(!(u.target!==u.currentTarget&&(u.target.value!==void 0||u.target.isContentEditable))&&!u.button&&!Mr){u.stopPropagation();var d=u.touches?u.touches[0]:u;ir={x:d.clientX,y:d.clientY},En=$l({},ir),ai=u.currentTarget,o()}}function f(){Mr=!0;var u=r.get(ai);Pc=u,Et=ai.parentElement;var d=Et.closest("dialog")||Et.getRootNode(),p=d.body||d,m=i.items,g=i.type,v=i.centreDraggedOnCursor,_=zn(m);Cn=_[u],Ac=g,pr=NL(Cn),sn=TL(ai,v&&En),ai.setAttribute(Xv,!0);function b(){sn.parentElement?window.requestAnimationFrame(b):(p.appendChild(sn),sn.focus(),FL(),ow(ai),p.appendChild(ai),pr[en]=Cn[en])}window.requestAnimationFrame(b),bl(Array.from(Qn.get(i.type)).filter(function(y){return y===Et||!jt.get(y).dropFromOthersDisabled}),function(y){return jt.get(y).dropTargetStyle},function(y){return jt.get(y).dropTargetClasses}),_.splice(u,1,pr),ad=AL(Et),_r(Et,_,{trigger:gn.DRAG_STARTED,id:Cn[en],source:Sn.POINTER}),window.addEventListener("mousemove",Jl,{passive:!1}),window.addEventListener("touchmove",Jl,{passive:!1,capture:!1}),window.addEventListener("mouseup",oo,{passive:!1}),window.addEventListener("touchend",oo,{passive:!1})}function l(u){var d=u.items,p=d===void 0?void 0:d,m=u.flipDurationMs,g=m===void 0?0:m,v=u.type,_=v===void 0?PL:v,b=u.dragDisabled,y=b===void 0?!1:b,C=u.morphDisabled,w=C===void 0?!1:C,T=u.dropFromOthersDisabled,O=T===void 0?!1:T,A=u.dropTargetStyle,M=A===void 0?Vv:A,Y=u.dropTargetClasses,U=Y===void 0?[]:Y,K=u.transformDraggedElement,q=K===void 0?function(){}:K,B=u.centreDraggedOnCursor,W=B===void 0?!1:B;i.dropAnimationDurationMs=g,i.type&&_!==i.type&&$v(t,i.type),i.type=_,i.items=zn(p),i.dragDisabled=y,i.morphDisabled=w,i.transformDraggedElement=q,i.centreDraggedOnCursor=W,n&&Mr&&!od&&(!fL(M,i.dropTargetStyle)||!hL(U,i.dropTargetClasses))&&(Kl([t],function(){return i.dropTargetStyle},function(){return U}),bl([t],function(){return M},function(){return U})),i.dropTargetStyle=M,i.dropTargetClasses=zn(U);function ee(L,I){return jt.get(L)?jt.get(L)[I]:i[I]}n&&Mr&&i.dropFromOthersDisabled!==O&&(O?Kl([t],function(L){return ee(L,"dropTargetStyle")},function(L){return ee(L,"dropTargetClasses")}):bl([t],function(L){return ee(L,"dropTargetStyle")},function(L){return ee(L,"dropTargetClasses")})),i.dropFromOthersDisabled=O,jt.set(t,i),RL(t,_);for(var ne=Mc(i.items),x=0;x<t.children.length;x++){var P=t.children[x];if(EL(P,y),x===ne){i.transformDraggedElement(sn,Cn,x),w||OL(sn,P,En.x,En.y),xL(P);continue}P.removeEventListener("mousedown",Uu.get(P)),P.removeEventListener("touchstart",Uu.get(P)),y||(P.addEventListener("mousedown",c),P.addEventListener("touchstart",c),Uu.set(P,c)),r.set(P,x),n||(n=!0)}}return l(e),{update:function(d){l(d)},destroy:function(){function d(){$v(t,jt.get(t).type),jt.delete(t)}Mr&&!t.closest("[".concat(Xv,"]"))?BL(t,d):d()}}}var rl,zf={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},uw=(rl={},ro(rl,zf.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),ro(rl,zf.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),rl),YL="dnd-action-aria-alert",Nt;function Hf(){Nt||(Nt=document.createElement("div"),function(){Nt.id=YL,Nt.style.position="fixed",Nt.style.bottom="0",Nt.style.left="0",Nt.style.zIndex="-5",Nt.style.opacity="0",Nt.style.height="0",Nt.style.width="0",Nt.setAttribute("role","alert")}(),document.body.prepend(Nt),Object.entries(uw).forEach(function(t){var e=zF(t,2),n=e[0],i=e[1];return document.body.prepend(VL(n,i))}))}function zL(){return rd?null:(document.readyState==="complete"?Hf():window.addEventListener("DOMContentLoaded",Hf),$l({},zf))}function HL(){rd||!Nt||(Object.keys(uw).forEach(function(t){var e;return(e=document.getElementById(t))===null||e===void 0?void 0:e.remove()}),Nt.remove(),Nt=void 0)}function VL(t,e){var n=document.createElement("div");return n.id=t,n.innerHTML="<p>".concat(e,"</p>"),n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function Ws(t){if(!rd){Nt||Hf(),Nt.innerHTML="";var e=document.createTextNode(t);Nt.appendChild(e),Nt.style.display="none",Nt.style.display="inline"}}var XL="--any--",Gv={outline:"rgba(255, 255, 102, 0.7) solid 2px"},jn=!1,Vf,ln,zr="",Dr,fi,cr="",Zl=new WeakSet,qv=new WeakMap,Kv=new WeakMap,Xf=new Map,rn=new Map,Jn=new Map,Ql;function $L(t,e){Jn.size===0&&(Ql=zL(),window.addEventListener("keydown",fw),window.addEventListener("click",hw)),Jn.has(e)||Jn.set(e,new Set),Jn.get(e).has(t)||(Jn.get(e).add(t),Z0())}function Jv(t,e){ln===t&&ua(),Jn.get(e).delete(t),Q0(),Jn.get(e).size===0&&Jn.delete(e),Jn.size===0&&(window.removeEventListener("keydown",fw),window.removeEventListener("click",hw),Ql=void 0,HL())}function fw(t){if(jn)switch(t.key){case"Escape":{ua();break}}}function hw(){jn&&(Zl.has(document.activeElement)||ua())}function GL(t){if(jn){var e=t.currentTarget;if(e!==ln){zr=e.getAttribute("aria-label")||"";var n=rn.get(ln),i=n.items,r=i.find(function(l){return l[en]===fi}),o=i.indexOf(r),h=i.splice(o,1)[0],a=rn.get(e),s=a.items,c=a.autoAriaDisabled;e.getBoundingClientRect().top<ln.getBoundingClientRect().top||e.getBoundingClientRect().left<ln.getBoundingClientRect().left?(s.push(h),c||Ws("Moved item ".concat(cr," to the end of the list ").concat(zr))):(s.unshift(h),c||Ws("Moved item ".concat(cr," to the beginning of the list ").concat(zr)));var f=ln;so(f,i,{trigger:gn.DROPPED_INTO_ANOTHER,id:fi,source:Sn.KEYBOARD}),so(e,s,{trigger:gn.DROPPED_INTO_ZONE,id:fi,source:Sn.KEYBOARD}),ln=e}}}function dw(){Xf.forEach(function(t,e){var n=t.update;return n(rn.get(e))})}function ua(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;rn.get(ln).autoAriaDisabled||Ws("Stopped dragging item ".concat(cr)),Zl.has(document.activeElement)&&document.activeElement.blur(),t&&_r(ln,rn.get(ln).items,{trigger:gn.DRAG_STOPPED,id:fi,source:Sn.KEYBOARD}),Kl(Jn.get(Vf),function(e){return rn.get(e).dropTargetStyle},function(e){return rn.get(e).dropTargetClasses}),Dr=null,fi=null,cr="",Vf=null,ln=null,zr="",jn=!1,dw()}function qL(t,e){var n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Gv,dropTargetClasses:[],autoAriaDisabled:!1};function i(f,l,u){f.length<=1||f.splice(u,1,f.splice(l,1,f[u])[0])}function r(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!Zl.has(f.target))return;f.preventDefault(),f.stopPropagation(),jn?ua():o(f);break}case"ArrowDown":case"ArrowRight":{if(!jn)return;f.preventDefault(),f.stopPropagation();var l=rn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f.currentTarget);p<d.length-1&&(n.autoAriaDisabled||Ws("Moved item ".concat(cr," to position ").concat(p+2," in the list ").concat(zr)),i(u,p,p+1),so(t,u,{trigger:gn.DROPPED_INTO_ZONE,id:fi,source:Sn.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!jn)return;f.preventDefault(),f.stopPropagation();var m=rn.get(t),g=m.items,v=Array.from(t.children),_=v.indexOf(f.currentTarget);_>0&&(n.autoAriaDisabled||Ws("Moved item ".concat(cr," to position ").concat(_," in the list ").concat(zr)),i(g,_,_-1),so(t,g,{trigger:gn.DROPPED_INTO_ZONE,id:fi,source:Sn.KEYBOARD}));break}}}function o(f){a(f.currentTarget),ln=t,Vf=n.type,jn=!0;var l=Array.from(Jn.get(n.type)).filter(function(d){return d===ln||!rn.get(d).dropFromOthersDisabled});if(bl(l,function(d){return rn.get(d).dropTargetStyle},function(d){return rn.get(d).dropTargetClasses}),!n.autoAriaDisabled){var u="Started dragging item ".concat(cr,". Use the arrow keys to move it within its list ").concat(zr);l.length>1&&(u+=", or tab to another list in order to move the item into it"),Ws(u)}_r(t,rn.get(t).items,{trigger:gn.DRAG_STARTED,id:fi,source:Sn.KEYBOARD}),dw()}function h(f){jn&&f.currentTarget!==Dr&&(f.stopPropagation(),ua(!1),o(f))}function a(f){var l=rn.get(t),u=l.items,d=Array.from(t.children),p=d.indexOf(f);Dr=f,Dr.tabIndex=n.zoneItemTabIndex,fi=u[p][en],cr=d[p].getAttribute("aria-label")||""}function s(f){var l=f.items,u=l===void 0?[]:l,d=f.type,p=d===void 0?XL:d,m=f.dragDisabled,g=m===void 0?!1:m,v=f.zoneTabIndex,_=v===void 0?0:v,b=f.zoneItemTabIndex,y=b===void 0?0:b,C=f.dropFromOthersDisabled,w=C===void 0?!1:C,T=f.dropTargetStyle,O=T===void 0?Gv:T,A=f.dropTargetClasses,M=A===void 0?[]:A,Y=f.autoAriaDisabled,U=Y===void 0?!1:Y;n.items=zn(u),n.dragDisabled=g,n.dropFromOthersDisabled=w,n.zoneTabIndex=_,n.zoneItemTabIndex=y,n.dropTargetStyle=O,n.dropTargetClasses=M,n.autoAriaDisabled=U,n.type&&p!==n.type&&Jv(t,n.type),n.type=p,$L(t,p),U||(t.setAttribute("aria-disabled",g),t.setAttribute("role","list"),t.setAttribute("aria-describedby",g?Ql.DND_ZONE_DRAG_DISABLED:Ql.DND_ZONE_ACTIVE)),rn.set(t,n),jn?t.tabIndex=t===ln||Dr.contains(t)||n.dropFromOthersDisabled||ln&&n.type!==rn.get(ln).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",GL);for(var K=function(W){var ee=t.children[W];Zl.add(ee),ee.tabIndex=jn?-1:n.zoneItemTabIndex,U||ee.setAttribute("role","listitem"),ee.removeEventListener("keydown",qv.get(ee)),ee.removeEventListener("click",Kv.get(ee)),g||(ee.addEventListener("keydown",r),qv.set(ee,r),ee.addEventListener("click",h),Kv.set(ee,h)),jn&&n.items[W][en]===fi&&(Dr=ee,Dr.tabIndex=n.zoneItemTabIndex,ee.focus())},q=0;q<t.children.length;q++)K(q)}s(e);var c={update:function(l){s(l)},destroy:function(){Jv(t,n.type),rn.delete(t),Xf.delete(t)}};return Xf.set(t,c),c}var KL=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"];function JL(t,e){if(ZL(t))return{update:function(){},destroy:function(){}};Zv(e);var n=WL(t,e),i=qL(t,e);return{update:function(o){Zv(o),n.update(o),i.update(o)},destroy:function(){n.destroy(),i.destroy()}}}function ZL(t){return!!t.closest("[".concat(iL,'="true"]'))}function Zv(t){var e=t.items;t.flipDurationMs,t.type,t.dragDisabled,t.morphDisabled,t.dropFromOthersDisabled;var n=t.zoneTabIndex,i=t.zoneItemTabIndex;t.dropTargetStyle;var r=t.dropTargetClasses;t.transformDraggedElement,t.autoAriaDisabled,t.centreDraggedOnCursor;var o=YF(t,KL);if(Object.keys(o).length>0&&console.warn("dndzone will ignore unknown options",o),!e)throw new Error("no 'items' key provided to dndzone");var h=e.find(function(a){return!{}.hasOwnProperty.call(a,en)});if(h)throw new Error("missing '".concat(en,"' property for item ").concat(il(h)));if(r&&!Array.isArray(r))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(qo(r),", ").concat(il(r)));if(n&&!Qv(n))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(qo(n),", ").concat(il(n)));if(i&&!Qv(i))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(qo(i),", ").concat(il(i)))}function Qv(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function QL(t){function e(n){var i=n.target;if(i.matches(t)){var r;switch(n.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;case"touchcancel":r="mouseup";break;default:return}var o=n.changedTouches[0],h=o.clientX,a=o.pageX,s=window.pageXOffset,c=o.clientY,f=o.pageY,l=window.pageYOffset;a===0&&Math.floor(h)>Math.floor(a)||f===0&&Math.floor(c)>Math.floor(f)?(h-=s,c-=l):(h<a-s||c<f-l)&&(h=a-s,c=f-l);var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,screenX:o.screenX,screenY:o.screenY,clientX:h,clientY:c,pageX:a,pageY:f,buttons:1,button:0,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey});o.target.dispatchEvent(u)}}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}function e_(t,e,n){const i=t.slice();return i[10]=e[n],i}function t_(t){let e,n,i,r,o,h=[],a=new Map,s,c,f,l,u=Me(t[1]);const d=p=>p[10].id;for(let p=0;p<u.length;p+=1){let m=e_(t,u,p),g=d(m);a.set(g,h[p]=o_(g,m))}return{c(){e=E("div"),n=E("h2"),n.textContent="레이어",i=V(),r=E("div"),o=E("div");for(let p=0;p<h.length;p+=1)h[p].c();S(n,"class","text-xs border-b p-3"),S(o,"class","sortable space-y-2 w-full svelte-tzic9t"),S(r,"class","p-3 flex items-center gap-2 justify-between"),S(e,"class","border rounded-lg")},m(p,m){j(p,e,m),k(e,n),k(e,i),k(e,r),k(r,o);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(o,null);c=!0,f||(l=[dy(s=JL.call(null,o,{items:t[1],flipDurationMs:$f})),Q(o,"consider",t[2]),Q(o,"finalize",t[3])],f=!0)},p(p,m){if(m&51){u=Me(p[1]),ke();for(let g=0;g<h.length;g+=1)h[g].r();h=Oy(h,m,d,1,p,u,a,o,A1,o_,null,e_);for(let g=0;g<h.length;g+=1)h[g].a();Oe()}s&&Wn(s.update)&&m&2&&s.update.call(null,{items:p[1],flipDurationMs:$f})},i(p){if(!c){for(let m=0;m<u.length;m+=1)R(h[m]);c=!0}},o(p){for(let m=0;m<h.length;m+=1)H(h[m]);c=!1},d(p){p&&N(e);for(let m=0;m<h.length;m+=1)h[m].d();f=!1,We(l)}}}function eN(t){let e,n,i,r,o=t[10].type==="ellipse"&&n_(),h=t[10].type==="triangle"&&i_(),a=t[10].type==="rectangle"&&r_();return{c(){o&&o.c(),e=V(),h&&h.c(),n=V(),a&&a.c(),i=et()},m(s,c){o&&o.m(s,c),j(s,e,c),h&&h.m(s,c),j(s,n,c),a&&a.m(s,c),j(s,i,c),r=!0},p(s,c){s[10].type==="ellipse"?o?c&2&&R(o,1):(o=n_(),o.c(),R(o,1),o.m(e.parentNode,e)):o&&(ke(),H(o,1,1,()=>{o=null}),Oe()),s[10].type==="triangle"?h?c&2&&R(h,1):(h=i_(),h.c(),R(h,1),h.m(n.parentNode,n)):h&&(ke(),H(h,1,1,()=>{h=null}),Oe()),s[10].type==="rectangle"?a?c&2&&R(a,1):(a=r_(),a.c(),R(a,1),a.m(i.parentNode,i)):a&&(ke(),H(a,1,1,()=>{a=null}),Oe())},i(s){r||(R(o),R(h),R(a),r=!0)},o(s){H(o),H(h),H(a),r=!1},d(s){s&&(N(e),N(n),N(i)),o&&o.d(s),h&&h.d(s),a&&a.d(s)}}}function tN(t){let e,n,i;return n=new Se({props:{icon:"streamline:hand-held-tablet-drawing"}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){j(r,e,o),ue(n,e,null),i=!0},p:ge,i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function nN(t){let e,n=t[10].thumbnail&&s_(t);return{c(){e=E("div"),n&&n.c(),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(i,r){j(i,e,r),n&&n.m(e,null)},p(i,r){i[10].thumbnail?n?n.p(i,r):(n=s_(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&N(e),n&&n.d()}}}function iN(t){let e,n=t[10].text+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center truncate ")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&2&&n!==(n=r[10].text+"")&&He(i,n)},i:ge,o:ge,d(r){r&&N(e)}}}function rN(t){let e,n,i;return{c(){e=E("div"),n=E("img"),Xe(n.src,i=t[10].convert.url)||S(n,"src",i),S(n,"class","object-contain"),S(n,"alt",""),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){j(r,e,o),k(e,n)},p(r,o){o&2&&!Xe(n.src,i=r[10].convert.url)&&S(n,"src",i)},i:ge,o:ge,d(r){r&&N(e)}}}function n_(t){let e,n,i;return n=new Se({props:{icon:"material-symbols:circle-outline"}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){j(r,e,o),ue(n,e,null),i=!0},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function i_(t){let e,n,i;return n=new Se({props:{icon:"uil:triangle"}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){j(r,e,o),ue(n,e,null),i=!0},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function r_(t){let e,n,i;return n=new Se({props:{icon:"material-symbols:rectangle-outline"}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","w-10 h-10 rounded-full flex flex-col items-center justify-center ")},m(r,o){j(r,e,o),ue(n,e,null),i=!0},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function s_(t){let e,n;return{c(){e=E("img"),Xe(e.src,n=t[10].thumbnail.url)||S(e,"src",n),S(e,"class","object-contain"),S(e,"alt","")},m(i,r){j(i,e,r)},p(i,r){r&2&&!Xe(e.src,n=i[10].thumbnail.url)&&S(e,"src",n)},d(i){i&&N(e)}}}function o_(t,e){let n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v=ge,_,b,y;const C=[rN,iN,nN,tN,eN],w=[];function T(M,Y){return M[10].objType==="clipart"?0:M[10].objType==="text"?1:M[10].objType==="upload"?2:M[10].type==="path"?3:M[10].objType==="shape"?4:-1}~(i=T(e))&&(r=w[i]=C[i](e)),a=new Se({props:{icon:"fluent:select-object-20-filled",class:"pointer-events-none",height:"30"}});function O(){return e[8](e[10])}f=new Se({props:{icon:"mi:select",class:"pointer-events-none",height:"30"}}),d=new Se({props:{icon:"mi:delete",class:"pointer-events-none",height:"30"}});function A(){return e[9](e[10])}return{key:t,first:null,c(){n=E("div"),r&&r.c(),o=V(),h=E("button"),de(a.$$.fragment),s=V(),c=E("div"),de(f.$$.fragment),l=V(),u=E("button"),de(d.$$.fragment),p=V(),S(h,"class","select-button"),S(c,"class","move-button"),S(u,"class","delete-button"),S(n,"class",m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"),this.first=n},m(M,Y){j(M,n,Y),~i&&w[i].m(n,null),k(n,o),k(n,h),ue(a,h,null),k(n,s),k(n,c),ue(f,c,null),k(n,l),k(n,u),ue(d,u,null),k(n,p),_=!0,b||(y=[Q(h,"click",O),Q(u,"click",A)],b=!0)},p(M,Y){e=M;let U=i;i=T(e),i===U?~i&&w[i].p(e,Y):(r&&(ke(),H(w[U],1,1,()=>{w[U]=null}),Oe()),~i?(r=w[i],r?r.p(e,Y):(r=w[i]=C[i](e),r.c()),R(r,1),r.m(n,o)):r=null),(!_||Y&3&&m!==(m="flex items-center justify-between space-x-2 p-2 rounded gap-3 w-full "+(e[0]===e[10].id?"border-2 border-black":"border")+" svelte-tzic9t"))&&S(n,"class",m)},r(){g=n.getBoundingClientRect()},f(){C1(n),v()},a(){v(),v=w1(n,g,UF,{duration:$f})},i(M){_||(R(r),R(a.$$.fragment,M),R(f.$$.fragment,M),R(d.$$.fragment,M),_=!0)},o(M){H(r),H(a.$$.fragment,M),H(f.$$.fragment,M),H(d.$$.fragment,M),_=!1},d(M){M&&N(n),~i&&w[i].d(),fe(a),fe(f),fe(d),b=!1,We(y)}}}function sN(t){var r;let e,n,i=((r=t[1])==null?void 0:r.length)&&t_(t);return{c(){i&&i.c(),e=et()},m(o,h){i&&i.m(o,h),j(o,e,h),n=!0},p(o,[h]){var a;(a=o[1])!=null&&a.length?i?(i.p(o,h),h&2&&R(i,1)):(i=t_(o),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(o){n||(R(i),n=!0)},o(o){H(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}const $f=300;function oN(t,e,n){let i,r,o;je(t,Dy,d=>n(6,r=d)),je(t,rr,d=>n(7,o=d));let h="";function a(d){n(1,i=d.detail.items)}function s(d){W1(d.detail.items.reverse())}function c(d){V1(d)}function f(d){X1(d)}ki(()=>{QL(".move-button")});const l=d=>c(d),u=d=>f(d);return t.$$.update=()=>{t.$$.dirty&128&&(o?n(0,h=o[0].id):n(0,h="")),t.$$.dirty&64&&n(1,i=r.reverse())},[h,i,a,s,c,f,r,o,l,u]}class aN extends qe{constructor(e){super(),Ge(this,e,oN,sN,Ve,{})}}function a_(t,e,n){const i=t.slice();return i[19]=e[n],i[20]=e,i[21]=n,i}function l_(t,e,n){const i=t.slice();return i[22]=e[n],i}function c_(t,e,n){const i=t.slice();return i[25]=e[n],i}function u_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v;function _(Y,U){return Y[2]==="design"?cN:lN}let b=_(t),y=b(t);h=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let C=Me(t[3]),w=[];for(let Y=0;Y<C.length;Y+=1)w[Y]=__(a_(t,C,Y));const T=Y=>H(w[Y],1,1,()=>{w[Y]=null});function O(Y,U){return Y[2]==="design"?dN:hN}let A=O(t),M=A(t);return{c(){e=E("div"),n=E("div"),i=E("h2"),y.c(),r=V(),o=E("button"),de(h.$$.fragment),a=V(),s=E("div");for(let Y=0;Y<w.length;Y+=1)w[Y].c();c=V(),f=E("div"),l=E("button"),M.c(),u=V(),d=E("button"),d.textContent="닫기",S(o,"class","absolute right-2"),S(o,"type","button"),S(i,"class","primary-bg rounded font-semibold p-3 text-center relative items-center flex w-full border-b"),S(l,"type","button"),S(l,"class","btn md:btn-lg primary-btn"),S(d,"type","button"),S(d,"class","btn md:btn-lg secondary-btn"),S(f,"class","p-3 flex justify-center gap-2"),S(s,"class","grow overflow-y-hidden h-full flex flex-col mt-3 gap-3"),S(n,"class","max-h-full w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center z-[9999]")},m(Y,U){j(Y,e,U),k(e,n),k(n,i),y.m(i,null),k(i,r),k(i,o),ue(h,o,null),k(n,a),k(n,s);for(let K=0;K<w.length;K+=1)w[K]&&w[K].m(s,null);k(s,c),k(s,f),k(f,l),M.m(l,null),k(f,u),k(f,d),m=!0,g||(v=[Q(o,"click",fn),Q(l,"click",t[17]),Q(d,"click",fn),Q(e,"introstart",t[10]),Q(e,"outroend",t[11])],g=!0)},p(Y,U){if(b!==(b=_(Y))&&(y.d(1),y=b(Y),y&&(y.c(),y.m(i,r))),U&504){C=Me(Y[3]);let K;for(K=0;K<C.length;K+=1){const q=a_(Y,C,K);w[K]?(w[K].p(q,U),R(w[K],1)):(w[K]=__(q),w[K].c(),R(w[K],1),w[K].m(s,c))}for(ke(),K=C.length;K<w.length;K+=1)T(K);Oe()}A!==(A=O(Y))&&(M.d(1),M=A(Y),M&&(M.c(),M.m(l,null)))},i(Y){if(!m){R(h.$$.fragment,Y);for(let U=0;U<C.length;U+=1)R(w[U]);Y&&Ut(()=>{m&&(p||(p=Yt(e,wi,{y:50},!0)),p.run(1))}),m=!0}},o(Y){H(h.$$.fragment,Y),w=w.filter(Boolean);for(let U=0;U<w.length;U+=1)H(w[U]);Y&&(p||(p=Yt(e,wi,{y:50},!1)),p.run(0)),m=!1},d(Y){Y&&N(e),y.d(),fe(h),Dt(w,Y),M.d(),Y&&p&&p.end(),g=!1,We(v)}}}function lN(t){let e;return{c(){e=we("주문하기")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function cN(t){let e;return{c(){e=we("디자인 등록")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function f_(t){let e,n,i;return{c(){e=E("img"),Xe(e.src,n=t[25].url)||S(e,"src",n),S(e,"alt",i=t[19].product.productName),S(e,"class","max-w-16 md:max-w-24 max-h-16 md:max-h-24 object-contain border rounded")},m(r,o){j(r,e,o)},p(r,o){o&8&&!Xe(e.src,n=r[25].url)&&S(e,"src",n),o&8&&i!==(i=r[19].product.productName)&&S(e,"alt",i)},d(r){r&&N(e)}}}function h_(t){let e=t[19].currentOption.optionValue1+"",n;return{c(){n=we(e)},m(i,r){j(i,n,r)},p(i,r){r&8&&e!==(e=i[19].currentOption.optionValue1+"")&&He(n,e)},d(i){i&&N(n)}}}function d_(t){let e,n=t[19].currentOption.optionValue2+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){j(r,e,o),j(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue2+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function p_(t){let e,n=t[19].currentOption.optionValue3+"",i;return{c(){e=we("/ "),i=we(n)},m(r,o){j(r,e,o),j(r,i,o)},p(r,o){o&8&&n!==(n=r[19].currentOption.optionValue3+"")&&He(i,n)},d(r){r&&(N(e),N(i))}}}function uN(t){let e,n,i;function r(){return t[12](t[21])}return{c(){e=E("button"),e.textContent="편집하기",S(e,"type","button"),S(e,"class","btn primary-btn")},m(o,h){j(o,e,h),n||(i=Q(e,"click",r),n=!0)},p(o,h){t=o},d(o){o&&N(e),n=!1,i()}}}function fN(t){let e;return{c(){e=E("button"),e.textContent="편집중",S(e,"type","button"),S(e,"class","btn secondary-btn")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function g_(t){let e,n=t[19].templateTitle+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","text-sm font-semibold")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[19].templateTitle+"")&&He(i,n)},d(r){r&&N(e)}}}function m_(t){let e,n=Me(t[19].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=v_(l_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex items-center gap-2 max-w-full overflow-x-auto")},m(r,o){j(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Me(r[19].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=l_(r,n,h);i[h]?i[h].p(a,o):(i[h]=v_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function v_(t){let e,n;return{c(){e=E("img"),Xe(e.src,n=t[22].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","object-contain max-w-16 max-h-16 md:max-w-24 md:max-h-24 rounded border")},m(i,r){j(i,e,r)},p(i,r){r&8&&!Xe(e.src,n=i[22].url)&&S(e,"src",n)},d(i){i&&N(e)}}}function __(t){var pe;let e,n,i,r,o,h,a,s=t[19].product.productName+"",c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,M,Y,U,K,q,B,W,ee,ne=Me(t[19].product.images),x=[];for(let z=0;z<ne.length;z+=1)x[z]=f_(c_(t,ne,z));let P=t[19].currentOption.optionValue1&&h_(t),L=t[19].currentOption.optionValue2&&d_(t),I=t[19].currentOption.optionValue3&&p_(t);function Z(z,G){return z[21]===z[4]?fN:uN}let F=Z(t),D=F(t);function X(){return t[13](t[21])}function J(){t[14].call(w,t[20],t[21])}function re(){return t[15](t[21])}U=new Se({props:{icon:"mi:delete",height:15}});function te(){return t[16](t[21])}let $=t[19].templateTitle&&g_(t),ae=((pe=t[19].thumbnails)==null?void 0:pe.length)&&m_(t);return{c(){e=E("div"),n=E("div"),i=E("div"),r=E("div");for(let z=0;z<x.length;z+=1)x[z].c();o=V(),h=E("div"),a=E("h1"),c=we(s),f=V(),l=E("h3"),P&&P.c(),u=V(),L&&L.c(),d=V(),I&&I.c(),p=V(),m=E("div"),g=E("div"),D.c(),v=V(),_=E("div"),b=E("div"),y=E("button"),y.textContent="-",C=V(),w=E("input"),T=V(),O=E("button"),O.textContent="+",A=V(),M=E("div"),Y=E("button"),de(U.$$.fragment),K=V(),$&&$.c(),q=V(),ae&&ae.c(),S(r,"class","flex"),S(a,"class","text-sm"),S(l,"class","text-xs"),S(h,"class","flex flex-col justify-center grow gap-1"),S(y,"type","button"),S(y,"class","btn-sm secondary-btn join-left px-3 rounded-lg"),S(w,"type","text"),S(w,"class","border w-12 input-sm rounded-none"),S(O,"type","button"),S(O,"class","btn-sm secondary-btn join-right px-3 rounded-lg"),S(b,"class","flex"),S(Y,"type","button"),S(Y,"class","btn secondary-btn"),S(m,"class","flex gap-2 items-center"),S(i,"class","flex gap-3 flex-col sm:flex-row"),S(n,"class","grow flex flex-col gap-3 justify-center w-full"),S(e,"class","flex justify-between items-center border-b p-2")},m(z,G){j(z,e,G),k(e,n),k(n,i),k(i,r);for(let oe=0;oe<x.length;oe+=1)x[oe]&&x[oe].m(r,null);k(i,o),k(i,h),k(h,a),k(a,c),k(h,f),k(h,l),P&&P.m(l,null),k(l,u),L&&L.m(l,null),k(l,d),I&&I.m(l,null),k(i,p),k(i,m),k(m,g),D.m(g,null),k(m,v),k(m,_),k(_,b),k(b,y),k(b,C),k(b,w),Pe(w,t[19].count),k(b,T),k(b,O),k(m,A),k(m,M),k(M,Y),ue(U,Y,null),k(n,K),$&&$.m(n,null),k(n,q),ae&&ae.m(n,null),B=!0,W||(ee=[Q(y,"click",X),Q(w,"input",J),Q(O,"click",re),Q(Y,"click",te)],W=!0)},p(z,G){var oe;if(t=z,G&8){ne=Me(t[19].product.images);let se;for(se=0;se<ne.length;se+=1){const ie=c_(t,ne,se);x[se]?x[se].p(ie,G):(x[se]=f_(ie),x[se].c(),x[se].m(r,null))}for(;se<x.length;se+=1)x[se].d(1);x.length=ne.length}(!B||G&8)&&s!==(s=t[19].product.productName+"")&&He(c,s),t[19].currentOption.optionValue1?P?P.p(t,G):(P=h_(t),P.c(),P.m(l,u)):P&&(P.d(1),P=null),t[19].currentOption.optionValue2?L?L.p(t,G):(L=d_(t),L.c(),L.m(l,d)):L&&(L.d(1),L=null),t[19].currentOption.optionValue3?I?I.p(t,G):(I=p_(t),I.c(),I.m(l,null)):I&&(I.d(1),I=null),F===(F=Z(t))&&D?D.p(t,G):(D.d(1),D=F(t),D&&(D.c(),D.m(g,null))),G&8&&w.value!==t[19].count&&Pe(w,t[19].count),t[19].templateTitle?$?$.p(t,G):($=g_(t),$.c(),$.m(n,q)):$&&($.d(1),$=null),(oe=t[19].thumbnails)!=null&&oe.length?ae?ae.p(t,G):(ae=m_(t),ae.c(),ae.m(n,null)):ae&&(ae.d(1),ae=null)},i(z){B||(R(U.$$.fragment,z),B=!0)},o(z){H(U.$$.fragment,z),B=!1},d(z){z&&N(e),Dt(x,z),P&&P.d(),L&&L.d(),I&&I.d(),D.d(),fe(U),$&&$.d(),ae&&ae.d(),W=!1,We(ee)}}}function hN(t){let e;return{c(){e=we("주문하기")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function dN(t){let e;return{c(){e=we("디자인 등록")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function pN(t){let e,n,i=t[0]&&u_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&R(i,1)):(i=u_(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function gN(t,e,n){let i,r;je(t,ui,C=>n(3,i=C)),je(t,Io,C=>n(4,r=C));let{isOpen:o}=e,{changeEditorDataIndex:h}=e,{sendOrder:a}=e,{mode:s}=e;zt(),ki(async()=>{});function c(C){i[C].count>1&&ye(ui,i[C].count--,i)}function f(C){ye(ui,i[C].count++,i)}function l(C){ye(ui,i=i.filter((w,T)=>C!=T),i)}function u(C){h(C),fn()}function d(C){bi.call(this,t,C)}function p(C){bi.call(this,t,C)}const m=C=>u(C),g=C=>c(C);function v(C,w){C[w].count=this.value,ui.set(i)}const _=C=>f(C),b=C=>l(C),y=()=>a();return t.$$set=C=>{"isOpen"in C&&n(0,o=C.isOpen),"changeEditorDataIndex"in C&&n(9,h=C.changeEditorDataIndex),"sendOrder"in C&&n(1,a=C.sendOrder),"mode"in C&&n(2,s=C.mode)},[o,a,s,i,r,c,f,l,u,h,d,p,m,g,v,_,b,y]}class mN extends qe{constructor(e){super(),Ge(this,e,gN,pN,Ve,{isOpen:0,changeEditorDataIndex:9,sendOrder:1,mode:2})}}function y_(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}function b_(t,e,n){const i=t.slice();return i[12]=e[n],i}function w_(t,e,n){const i=t.slice();return i[12]=e[n],i}function C_(t,e,n){const i=t.slice();return i[18]=e[n],i}function S_(t){let e,n,i,r,o=Me(t[2]),h=[];for(let a=0;a<o.length;a+=1)h[a]=D_(y_(t,o,a));return{c(){e=E("div"),n=E("div"),i=E("h1"),i.innerHTML='제작상품 <span class="text-xs font-normal">(해당상품은 옵션별 수량으로 주문상품 수에 추가됩니다.)</span>',r=V();for(let a=0;a<h.length;a+=1)h[a].c();S(i,"class","p-5 bg-gray-50 font-semibold text-lg"),S(n,"class","border rounded relative flex flex-col divide-y"),S(e,"class","flex flex-col gap-3 my-2 bg-white")},m(a,s){j(a,e,s),k(e,n),k(n,i),k(n,r);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(n,null)},p(a,s){if(s&15){o=Me(a[2]);let c;for(c=0;c<o.length;c+=1){const f=y_(a,o,c);h[c]?h[c].p(f,s):(h[c]=D_(f),h[c].c(),h[c].m(n,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}},d(a){a&&N(e),Dt(h,a)}}}function T_(t){let e,n,i;function r(...o){return t[5](t[9],...o)}return{c(){e=E("input"),S(e,"type","checkbox"),S(e,"class","podiz-checkbox")},m(o,h){j(o,e,h),n||(i=Q(e,"change",r),n=!0)},p(o,h){t=o},d(o){o&&N(e),n=!1,i()}}}function vN(t){return{c:ge,m:ge,p:ge,d:ge}}function _N(t){var h;let e,n=t[11],i=((h=t[17].data)==null?void 0:h.thumbnails.length)&&k_(t);const r=()=>t[6](e,n),o=()=>t[6](null,n);return{c(){e=E("div"),i&&i.c(),S(e,"class","flex gap-2 overflow-x-auto")},m(a,s){j(a,e,s),i&&i.m(e,null),r()},p(a,s){var c;t=a,(c=t[17].data)!=null&&c.thumbnails.length?i?i.p(t,s):(i=k_(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),n!==t[11]&&(o(),n=t[11],r())},d(a){a&&N(e),i&&i.d(),o()}}}function k_(t){let e,n=Me(t[17].data.thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=O_(C_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);j(r,e,o)},p(r,o){if(o&4){n=Me(r[17].data.thumbnails);let h;for(h=0;h<n.length;h+=1){const a=C_(r,n,h);i[h]?i[h].p(a,o):(i[h]=O_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function O_(t){let e,n,i;return{c(){e=E("img"),Xe(e.src,n=t[18].url)||S(e,"src",n),S(e,"alt",i=t[18].alt),S(e,"class","max-h-20 max-w-xs border rounded cursor-pointer")},m(r,o){j(r,e,o)},p(r,o){o&4&&!Xe(e.src,n=r[18].url)&&S(e,"src",n),o&4&&i!==(i=r[18].alt)&&S(e,"alt",i)},d(r){r&&N(e)}}}function yN(t){let e;return{c(){e=E("div"),e.innerHTML='<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>',S(e,"class","flex items justify-center")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function bN(t){let e,n=Me(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=E_(b_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);j(r,e,o)},p(r,o){if(o&4){n=Me(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=b_(r,n,h);i[h]?i[h].p(a,o):(i[h]=E_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function wN(t){let e,n=Me(t[9].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=x_(w_(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=et()},m(r,o){for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(r,o);j(r,e,o)},p(r,o){if(o&4){n=Me(r[9].items);let h;for(h=0;h<n.length;h+=1){const a=w_(r,n,h);i[h]?i[h].p(a,o):(i[h]=x_(a),i[h].c(),i[h].m(e.parentNode,e))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function E_(t){let e=t[12].option_value+"",n,i,r=t[12].price.toLocaleString("ko-KR")+"",o,h;return{c(){n=we(e),i=we(" ("),o=we(r),h=we("원)  ")},m(a,s){j(a,n,s),j(a,i,s),j(a,o,s),j(a,h,s)},p(a,s){s&4&&e!==(e=a[12].option_value+"")&&He(n,e),s&4&&r!==(r=a[12].price.toLocaleString("ko-KR")+"")&&He(o,r)},d(a){a&&(N(n),N(i),N(o),N(h))}}}function x_(t){let e,n=t[12].price.toLocaleString("ko-KR")+"",i,r;return{c(){e=we("("),i=we(n),r=we("원)  ")},m(o,h){j(o,e,h),j(o,i,h),j(o,r,h)},p(o,h){h&4&&n!==(n=o[12].price.toLocaleString("ko-KR")+"")&&He(i,n)},d(o){o&&(N(e),N(i),N(r))}}}function D_(t){let e,n,i,r,o,h,a,s=t[9].product_name+"",c,f,l,u,d,p,m,g,v,_=t[9].quantity+"",b,y,C,w,T,O,A=t[9].price.toLocaleString("ko-KR")+"",M,Y,U,K,q=t[0]==="cart"&&T_(t),B={ctx:t,current:null,token:null,hasCatch:!1,pending:yN,then:_N,catch:vN,value:17};Vs(r=t[9].editorData,B);function W(x,P){return x[0]==="orderend"?wN:bN}let ee=W(t),ne=ee(t);return{c(){e=E("div"),n=E("div"),q&&q.c(),i=V(),B.block.c(),o=V(),h=E("div"),a=E("h1"),c=we(s),l=V(),u=E("div"),d=E("p"),ne.c(),p=V(),m=E("p"),g=we("수량: "),v=E("span"),b=we(_),y=we("개"),C=V(),w=E("p"),T=we("금액: "),O=E("span"),M=we(A),Y=we("원"),K=V(),S(n,"class","flex w-full gap-2 items-center overflow-x-hidden"),S(a,"class","font-semibold"),S(h,"class",f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":"")),S(v,"class","font-semibold"),S(O,"class","font-semibold"),S(u,"class",U="flex gap-5 "+(t[0]==="cart"?"pl-8":"")),S(e,"class","p-5")},m(x,P){j(x,e,P),k(e,n),q&&q.m(n,null),k(n,i),B.block.m(n,B.anchor=null),B.mount=()=>n,B.anchor=null,k(e,o),k(e,h),k(h,a),k(a,c),k(e,l),k(e,u),k(u,d),ne.m(d,null),k(u,p),k(u,m),k(m,g),k(m,v),k(v,b),k(m,y),k(u,C),k(u,w),k(w,T),k(w,O),k(O,M),k(w,Y),k(e,K)},p(x,P){t=x,t[0]==="cart"?q?q.p(t,P):(q=T_(t),q.c(),q.m(n,i)):q&&(q.d(1),q=null),B.ctx=t,P&4&&r!==(r=t[9].editorData)&&Vs(r,B)||sh(B,t,P),P&4&&s!==(s=t[9].product_name+"")&&He(c,s),P&1&&f!==(f="py-2 flex items-center gap-2 "+(t[0]==="cart"?"pl-8":""))&&S(h,"class",f),ee===(ee=W(t))&&ne?ne.p(t,P):(ne.d(1),ne=ee(t),ne&&(ne.c(),ne.m(d,null))),P&4&&_!==(_=t[9].quantity+"")&&He(b,_),P&4&&A!==(A=t[9].price.toLocaleString("ko-KR")+"")&&He(M,A),P&1&&U!==(U="flex gap-5 "+(t[0]==="cart"?"pl-8":""))&&S(u,"class",U)},d(x){x&&N(e),q&&q.d(),B.block.d(),B.token=null,B=null,ne.d()}}}function CN(t){var i;let e,n=((i=t[2])==null?void 0:i.length)&&S_(t);return{c(){n&&n.c(),e=et()},m(r,o){n&&n.m(r,o),j(r,e,o)},p(r,[o]){var h;(h=r[2])!=null&&h.length?n?n.p(r,o):(n=S_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(r){r&&N(e),n&&n.d(r)}}}function SN(t,e,n){let{previews:i}=e,{mode:r="cart"}=e,o=[],h=[];console.log({previews:i});function a(u,d){i.items.forEach(p=>{p.uuid===d&&(p.element.querySelector("input[type=checkbox]").checked=u)})}const s=u=>{var d;return(d=u.additional_option_values)!=null&&d.length?u.additional_option_values.map(({custom_option:p,quantity:m})=>{const g=p.find(({key:_})=>_==="item_option_add").value,v=u.option_value[0];return{uuid:g,option_value:v,quantity:m,price:u.discount_price}}):[]},c=u=>{const d={};return u.forEach(p=>{s(p).forEach(g=>{const{uuid:v}=g;if(!d[v]){const _=Jy(v);d[v]={uuid:v,editorData:_,items:[]}}d[v].items.push({option_value:g.option_value.replace(/\[|\]|\([+-]?\d{1,3}(,\d{3})*\)/g,""),quantity:g.quantity,price:g.price}),d[v].quantity=g.quantity,d[v].price=d[v].items.reduce((_,b)=>_+b.quantity*b.price,0),d[v].product_name=p.product_name})}),Object.values(d)};ki(async()=>{var d;(d=i.elements)!=null&&d.length&&i.elements.forEach(p=>{p.style.display="none"});const u=await Wx();n(2,o=c(u.items)),document.getElementById("product_select_all")&&document.getElementById("product_select_all").addEventListener("click",function(){document.querySelectorAll(".podiz-checkbox").forEach(function(p){p.checked=!p.checked})})});const f=(u,d)=>a(d.target.checked,u.uuid);function l(u,d){nt[u?"unshift":"push"](()=>{h[d]=u,n(1,h)})}return t.$$set=u=>{"previews"in u&&n(4,i=u.previews),"mode"in u&&n(0,r=u.mode)},t.$$.update=()=>{t.$$.dirty&2&&(h==null?void 0:h.length)>0&&h.forEach(u=>{new J0(u,{toolbar:!1,title:!1,navbar:2})})},[r,h,o,a,i,f,l]}class TN extends qe{constructor(e){super(),Ge(this,e,SN,CN,Ve,{previews:4,mode:0})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var pw;function be(){return pw.apply(null,arguments)}function kN(t){pw=t}function ni(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Hr(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ld(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(rt(t,e))return!1;return!0}function _n(t){return t===void 0}function $i(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Pa(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function gw(t,e){var n=[],i,r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function ur(t,e){for(var n in e)rt(e,n)&&(t[n]=e[n]);return rt(e,"toString")&&(t.toString=e.toString),rt(e,"valueOf")&&(t.valueOf=e.valueOf),t}function xi(t,e,n,i){return jw(t,e,n,i,!0).utc()}function ON(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ze(t){return t._pf==null&&(t._pf=ON()),t._pf}var Gf;Array.prototype.some?Gf=Array.prototype.some:Gf=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function cd(t){var e=null,n=!1,i=t._d&&!isNaN(t._d.getTime());if(i&&(e=ze(t),n=Gf.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i;return t._isValid}function Ic(t){var e=xi(NaN);return t!=null?ur(ze(e),t):ze(e).userInvalidated=!0,e}var A_=be.momentProperties=[],Wu=!1;function ud(t,e){var n,i,r,o=A_.length;if(_n(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),_n(e._i)||(t._i=e._i),_n(e._f)||(t._f=e._f),_n(e._l)||(t._l=e._l),_n(e._strict)||(t._strict=e._strict),_n(e._tzm)||(t._tzm=e._tzm),_n(e._isUTC)||(t._isUTC=e._isUTC),_n(e._offset)||(t._offset=e._offset),_n(e._pf)||(t._pf=ze(e)),_n(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)i=A_[n],r=e[i],_n(r)||(t[i]=r);return t}function Ma(t){ud(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Wu===!1&&(Wu=!0,be.updateOffset(this),Wu=!1)}function ii(t){return t instanceof Ma||t!=null&&t._isAMomentObject!=null}function mw(t){be.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Vn(t,e){var n=!0;return ur(function(){if(be.deprecationHandler!=null&&be.deprecationHandler(null,t),n){var i=[],r,o,h,a=arguments.length;for(o=0;o<a;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(h in arguments[0])rt(arguments[0],h)&&(r+=h+": "+arguments[0][h]+", ");r=r.slice(0,-2)}else r=arguments[o];i.push(r)}mw(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var P_={};function vw(t,e){be.deprecationHandler!=null&&be.deprecationHandler(t,e),P_[t]||(mw(e),P_[t]=!0)}be.suppressDeprecationWarnings=!1;be.deprecationHandler=null;function Di(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function EN(t){var e,n;for(n in t)rt(t,n)&&(e=t[n],Di(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function qf(t,e){var n=ur({},t),i;for(i in e)rt(e,i)&&(Hr(t[i])&&Hr(e[i])?(n[i]={},ur(n[i],t[i]),ur(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)rt(t,i)&&!rt(e,i)&&Hr(t[i])&&(n[i]=ur({},n[i]));return n}function fd(t){t!=null&&this.set(t)}var Kf;Object.keys?Kf=Object.keys:Kf=function(t){var e,n=[];for(e in t)rt(t,e)&&n.push(e);return n};var xN={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function DN(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return Di(i)?i.call(e,n):i}function Ti(t,e,n){var i=""+Math.abs(t),r=e-i.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var hd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,sl=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yu={},Ys={};function De(t,e,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),t&&(Ys[t]=r),e&&(Ys[e[0]]=function(){return Ti(r.apply(this,arguments),e[1],e[2])}),n&&(Ys[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function AN(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function PN(t){var e=t.match(hd),n,i;for(n=0,i=e.length;n<i;n++)Ys[e[n]]?e[n]=Ys[e[n]]:e[n]=AN(e[n]);return function(r){var o="",h;for(h=0;h<i;h++)o+=Di(e[h])?e[h].call(r,t):e[h];return o}}function Cl(t,e){return t.isValid()?(e=_w(e,t.localeData()),Yu[e]=Yu[e]||PN(e),Yu[e](t)):t.localeData().invalidDate()}function _w(t,e){var n=5;function i(r){return e.longDateFormat(r)||r}for(sl.lastIndex=0;n>=0&&sl.test(t);)t=t.replace(sl,i),sl.lastIndex=0,n-=1;return t}var MN={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function IN(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(hd).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var RN="Invalid date";function FN(){return this._invalidDate}var LN="%d",NN=/\d{1,2}/;function jN(t){return this._ordinal.replace("%d",t)}var BN={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function UN(t,e,n,i){var r=this._relativeTime[n];return Di(r)?r(t,e,n,i):r.replace(/%d/i,t)}function WN(t,e){var n=this._relativeTime[t>0?"future":"past"];return Di(n)?n(e):n.replace(/%s/i,e)}var M_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xn(t){return typeof t=="string"?M_[t]||M_[t.toLowerCase()]:void 0}function dd(t){var e={},n,i;for(i in t)rt(t,i)&&(n=Xn(i),n&&(e[n]=t[i]));return e}var YN={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function zN(t){var e=[],n;for(n in t)rt(t,n)&&e.push({unit:n,priority:YN[n]});return e.sort(function(i,r){return i.priority-r.priority}),e}var yw=/\d/,Pn=/\d\d/,bw=/\d{3}/,pd=/\d{4}/,Rc=/[+-]?\d{6}/,yt=/\d\d?/,ww=/\d\d\d\d?/,Cw=/\d\d\d\d\d\d?/,Fc=/\d{1,3}/,gd=/\d{1,4}/,Lc=/[+-]?\d{1,6}/,vo=/\d+/,Nc=/[+-]?\d+/,HN=/Z|[+-]\d\d:?\d\d/gi,jc=/Z|[+-]\d\d(?::?\d\d)?/gi,VN=/[+-]?\d+(\.\d{1,3})?/,Ia=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_o=/^[1-9]\d?/,md=/^([1-9]\d|\d)/,ec;ec={};function Ce(t,e,n){ec[t]=Di(e)?e:function(i,r){return i&&n?n:e}}function XN(t,e){return rt(ec,t)?ec[t](e._strict,e._locale):new RegExp($N(t))}function $N(t){return zi(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,r,o){return n||i||r||o}))}function zi(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Bn(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Qe(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Bn(e)),n}var Jf={};function ct(t,e){var n,i=e,r;for(typeof t=="string"&&(t=[t]),$i(e)&&(i=function(o,h){h[e]=Qe(o)}),r=t.length,n=0;n<r;n++)Jf[t[n]]=i}function Ra(t,e){ct(t,function(n,i,r,o){r._w=r._w||{},e(n,r._w,r,o)})}function GN(t,e,n){e!=null&&rt(Jf,t)&&Jf[t](e,n._a,n,t)}function Bc(t){return t%4===0&&t%100!==0||t%400===0}var cn=0,Bi=1,hi=2,Xt=3,ei=4,Ui=5,Rr=6,qN=7,KN=8;De("Y",0,0,function(){var t=this.year();return t<=9999?Ti(t,4):"+"+t});De(0,["YY",2],0,function(){return this.year()%100});De(0,["YYYY",4],0,"year");De(0,["YYYYY",5],0,"year");De(0,["YYYYYY",6,!0],0,"year");Ce("Y",Nc);Ce("YY",yt,Pn);Ce("YYYY",gd,pd);Ce("YYYYY",Lc,Rc);Ce("YYYYYY",Lc,Rc);ct(["YYYYY","YYYYYY"],cn);ct("YYYY",function(t,e){e[cn]=t.length===2?be.parseTwoDigitYear(t):Qe(t)});ct("YY",function(t,e){e[cn]=be.parseTwoDigitYear(t)});ct("Y",function(t,e){e[cn]=parseInt(t,10)});function Ko(t){return Bc(t)?366:365}be.parseTwoDigitYear=function(t){return Qe(t)+(Qe(t)>68?1900:2e3)};var Sw=yo("FullYear",!0);function JN(){return Bc(this.year())}function yo(t,e){return function(n){return n!=null?(Tw(this,t,n),be.updateOffset(this,e),this):fa(this,t)}}function fa(t,e){if(!t.isValid())return NaN;var n=t._d,i=t._isUTC;switch(e){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Tw(t,e,n){var i,r,o,h,a;if(!(!t.isValid()||isNaN(n))){switch(i=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,h=t.month(),a=t.date(),a=a===29&&h===1&&!Bc(o)?28:a,r?i.setUTCFullYear(o,h,a):i.setFullYear(o,h,a)}}function ZN(t){return t=Xn(t),Di(this[t])?this[t]():this}function QN(t,e){if(typeof t=="object"){t=dd(t);var n=zN(t),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](t[n[i].unit])}else if(t=Xn(t),Di(this[t]))return this[t](e);return this}function e3(t,e){return(t%e+e)%e}var Lt;Array.prototype.indexOf?Lt=Array.prototype.indexOf:Lt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function vd(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=e3(e,12);return t+=(e-n)/12,n===1?Bc(t)?29:28:31-n%7%2}De("M",["MM",2],"Mo",function(){return this.month()+1});De("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});De("MMMM",0,0,function(t){return this.localeData().months(this,t)});Ce("M",yt,_o);Ce("MM",yt,Pn);Ce("MMM",function(t,e){return e.monthsShortRegex(t)});Ce("MMMM",function(t,e){return e.monthsRegex(t)});ct(["M","MM"],function(t,e){e[Bi]=Qe(t)-1});ct(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);r!=null?e[Bi]=r:ze(n).invalidMonth=t});var t3="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kw="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ow=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,n3=Ia,i3=Ia;function r3(t,e){return t?ni(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ow).test(e)?"format":"standalone"][t.month()]:ni(this._months)?this._months:this._months.standalone}function s3(t,e){return t?ni(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ow.test(e)?"format":"standalone"][t.month()]:ni(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function o3(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=xi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(r=Lt.call(this._shortMonthsParse,h),r!==-1?r:null):(r=Lt.call(this._longMonthsParse,h),r!==-1?r:null):e==="MMM"?(r=Lt.call(this._shortMonthsParse,h),r!==-1?r:(r=Lt.call(this._longMonthsParse,h),r!==-1?r:null)):(r=Lt.call(this._longMonthsParse,h),r!==-1?r:(r=Lt.call(this._shortMonthsParse,h),r!==-1?r:null))}function a3(t,e,n){var i,r,o;if(this._monthsParseExact)return o3.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=xi([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function Ew(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Qe(e);else if(e=t.localeData().monthsParse(e),!$i(e))return t}var n=e,i=t.date();return i=i<29?i:Math.min(i,vd(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,i):t._d.setMonth(n,i),t}function xw(t){return t!=null?(Ew(this,t),be.updateOffset(this,!0),this):fa(this,"Month")}function l3(){return vd(this.year(),this.month())}function c3(t){return this._monthsParseExact?(rt(this,"_monthsRegex")||Dw.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(rt(this,"_monthsShortRegex")||(this._monthsShortRegex=n3),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function u3(t){return this._monthsParseExact?(rt(this,"_monthsRegex")||Dw.call(this),t?this._monthsStrictRegex:this._monthsRegex):(rt(this,"_monthsRegex")||(this._monthsRegex=i3),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Dw(){function t(s,c){return c.length-s.length}var e=[],n=[],i=[],r,o,h,a;for(r=0;r<12;r++)o=xi([2e3,r]),h=zi(this.monthsShort(o,"")),a=zi(this.months(o,"")),e.push(h),n.push(a),i.push(a),i.push(h);e.sort(t),n.sort(t),i.sort(t),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function f3(t,e,n,i,r,o,h){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,h),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,h),a}function ha(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function tc(t,e,n){var i=7+e-n,r=(7+ha(t,0,i).getUTCDay()-e)%7;return-r+i-1}function Aw(t,e,n,i,r){var o=(7+n-i)%7,h=tc(t,i,r),a=1+7*(e-1)+o+h,s,c;return a<=0?(s=t-1,c=Ko(s)+a):a>Ko(t)?(s=t+1,c=a-Ko(t)):(s=t,c=a),{year:s,dayOfYear:c}}function da(t,e,n){var i=tc(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,o,h;return r<1?(h=t.year()-1,o=r+Hi(h,e,n)):r>Hi(t.year(),e,n)?(o=r-Hi(t.year(),e,n),h=t.year()+1):(h=t.year(),o=r),{week:o,year:h}}function Hi(t,e,n){var i=tc(t,e,n),r=tc(t+1,e,n);return(Ko(t)-i+r)/7}De("w",["ww",2],"wo","week");De("W",["WW",2],"Wo","isoWeek");Ce("w",yt,_o);Ce("ww",yt,Pn);Ce("W",yt,_o);Ce("WW",yt,Pn);Ra(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=Qe(t)});function h3(t){return da(t,this._week.dow,this._week.doy).week}var d3={dow:0,doy:6};function p3(){return this._week.dow}function g3(){return this._week.doy}function m3(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function v3(t){var e=da(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}De("d",0,"do","day");De("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});De("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});De("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});De("e",0,0,"weekday");De("E",0,0,"isoWeekday");Ce("d",yt);Ce("e",yt);Ce("E",yt);Ce("dd",function(t,e){return e.weekdaysMinRegex(t)});Ce("ddd",function(t,e){return e.weekdaysShortRegex(t)});Ce("dddd",function(t,e){return e.weekdaysRegex(t)});Ra(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);r!=null?e.d=r:ze(n).invalidWeekday=t});Ra(["d","e","E"],function(t,e,n,i){e[i]=Qe(t)});function _3(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function y3(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function _d(t,e){return t.slice(e,7).concat(t.slice(0,e))}var b3="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),w3="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),C3=Ia,S3=Ia,T3=Ia;function k3(t,e){var n=ni(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?_d(n,this._week.dow):t?n[t.day()]:n}function O3(t){return t===!0?_d(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function E3(t){return t===!0?_d(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function x3(t,e,n){var i,r,o,h=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=xi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(r=Lt.call(this._weekdaysParse,h),r!==-1?r:null):e==="ddd"?(r=Lt.call(this._shortWeekdaysParse,h),r!==-1?r:null):(r=Lt.call(this._minWeekdaysParse,h),r!==-1?r:null):e==="dddd"?(r=Lt.call(this._weekdaysParse,h),r!==-1||(r=Lt.call(this._shortWeekdaysParse,h),r!==-1)?r:(r=Lt.call(this._minWeekdaysParse,h),r!==-1?r:null)):e==="ddd"?(r=Lt.call(this._shortWeekdaysParse,h),r!==-1||(r=Lt.call(this._weekdaysParse,h),r!==-1)?r:(r=Lt.call(this._minWeekdaysParse,h),r!==-1?r:null)):(r=Lt.call(this._minWeekdaysParse,h),r!==-1||(r=Lt.call(this._weekdaysParse,h),r!==-1)?r:(r=Lt.call(this._shortWeekdaysParse,h),r!==-1?r:null))}function D3(t,e,n){var i,r,o;if(this._weekdaysParseExact)return x3.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=xi([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function A3(t){if(!this.isValid())return t!=null?this:NaN;var e=fa(this,"Day");return t!=null?(t=_3(t,this.localeData()),this.add(t-e,"d")):e}function P3(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function M3(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=y3(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function I3(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||yd.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(rt(this,"_weekdaysRegex")||(this._weekdaysRegex=C3),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function R3(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||yd.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(rt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=S3),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function F3(t){return this._weekdaysParseExact?(rt(this,"_weekdaysRegex")||yd.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(rt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=T3),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function yd(){function t(f,l){return l.length-f.length}var e=[],n=[],i=[],r=[],o,h,a,s,c;for(o=0;o<7;o++)h=xi([2e3,1]).day(o),a=zi(this.weekdaysMin(h,"")),s=zi(this.weekdaysShort(h,"")),c=zi(this.weekdays(h,"")),e.push(a),n.push(s),i.push(c),r.push(a),r.push(s),r.push(c);e.sort(t),n.sort(t),i.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function bd(){return this.hours()%12||12}function L3(){return this.hours()||24}De("H",["HH",2],0,"hour");De("h",["hh",2],0,bd);De("k",["kk",2],0,L3);De("hmm",0,0,function(){return""+bd.apply(this)+Ti(this.minutes(),2)});De("hmmss",0,0,function(){return""+bd.apply(this)+Ti(this.minutes(),2)+Ti(this.seconds(),2)});De("Hmm",0,0,function(){return""+this.hours()+Ti(this.minutes(),2)});De("Hmmss",0,0,function(){return""+this.hours()+Ti(this.minutes(),2)+Ti(this.seconds(),2)});function Mw(t,e){De(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Mw("a",!0);Mw("A",!1);function Iw(t,e){return e._meridiemParse}Ce("a",Iw);Ce("A",Iw);Ce("H",yt,md);Ce("h",yt,_o);Ce("k",yt,_o);Ce("HH",yt,Pn);Ce("hh",yt,Pn);Ce("kk",yt,Pn);Ce("hmm",ww);Ce("hmmss",Cw);Ce("Hmm",ww);Ce("Hmmss",Cw);ct(["H","HH"],Xt);ct(["k","kk"],function(t,e,n){var i=Qe(t);e[Xt]=i===24?0:i});ct(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});ct(["h","hh"],function(t,e,n){e[Xt]=Qe(t),ze(n).bigHour=!0});ct("hmm",function(t,e,n){var i=t.length-2;e[Xt]=Qe(t.substr(0,i)),e[ei]=Qe(t.substr(i)),ze(n).bigHour=!0});ct("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Xt]=Qe(t.substr(0,i)),e[ei]=Qe(t.substr(i,2)),e[Ui]=Qe(t.substr(r)),ze(n).bigHour=!0});ct("Hmm",function(t,e,n){var i=t.length-2;e[Xt]=Qe(t.substr(0,i)),e[ei]=Qe(t.substr(i))});ct("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Xt]=Qe(t.substr(0,i)),e[ei]=Qe(t.substr(i,2)),e[Ui]=Qe(t.substr(r))});function N3(t){return(t+"").toLowerCase().charAt(0)==="p"}var j3=/[ap]\.?m?\.?/i,B3=yo("Hours",!0);function U3(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var Rw={calendar:xN,longDateFormat:MN,invalidDate:RN,ordinal:LN,dayOfMonthOrdinalParse:NN,relativeTime:BN,months:t3,monthsShort:kw,week:d3,weekdays:b3,weekdaysMin:w3,weekdaysShort:Pw,meridiemParse:j3},Ct={},Po={},pa;function W3(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function I_(t){return t&&t.toLowerCase().replace("_","-")}function Y3(t){for(var e=0,n,i,r,o;e<t.length;){for(o=I_(t[e]).split("-"),n=o.length,i=I_(t[e+1]),i=i?i.split("-"):null;n>0;){if(r=Uc(o.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&W3(o,i)>=n-1)break;n--}e++}return pa}function z3(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Uc(t){var e=null,n;if(Ct[t]===void 0&&typeof kl<"u"&&kl&&kl.exports&&z3(t))try{e=pa._abbr,n=require,n("./locale/"+t),gr(e)}catch{Ct[t]=null}return Ct[t]}function gr(t,e){var n;return t&&(_n(e)?n=Gi(t):n=wd(t,e),n?pa=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),pa._abbr}function wd(t,e){if(e!==null){var n,i=Rw;if(e.abbr=t,Ct[t]!=null)vw("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ct[t]._config;else if(e.parentLocale!=null)if(Ct[e.parentLocale]!=null)i=Ct[e.parentLocale]._config;else if(n=Uc(e.parentLocale),n!=null)i=n._config;else return Po[e.parentLocale]||(Po[e.parentLocale]=[]),Po[e.parentLocale].push({name:t,config:e}),null;return Ct[t]=new fd(qf(i,e)),Po[t]&&Po[t].forEach(function(r){wd(r.name,r.config)}),gr(t),Ct[t]}else return delete Ct[t],null}function H3(t,e){if(e!=null){var n,i,r=Rw;Ct[t]!=null&&Ct[t].parentLocale!=null?Ct[t].set(qf(Ct[t]._config,e)):(i=Uc(t),i!=null&&(r=i._config),e=qf(r,e),i==null&&(e.abbr=t),n=new fd(e),n.parentLocale=Ct[t],Ct[t]=n),gr(t)}else Ct[t]!=null&&(Ct[t].parentLocale!=null?(Ct[t]=Ct[t].parentLocale,t===gr()&&gr(t)):Ct[t]!=null&&delete Ct[t]);return Ct[t]}function Gi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return pa;if(!ni(t)){if(e=Uc(t),e)return e;t=[t]}return Y3(t)}function V3(){return Kf(Ct)}function Cd(t){var e,n=t._a;return n&&ze(t).overflow===-2&&(e=n[Bi]<0||n[Bi]>11?Bi:n[hi]<1||n[hi]>vd(n[cn],n[Bi])?hi:n[Xt]<0||n[Xt]>24||n[Xt]===24&&(n[ei]!==0||n[Ui]!==0||n[Rr]!==0)?Xt:n[ei]<0||n[ei]>59?ei:n[Ui]<0||n[Ui]>59?Ui:n[Rr]<0||n[Rr]>999?Rr:-1,ze(t)._overflowDayOfYear&&(e<cn||e>hi)&&(e=hi),ze(t)._overflowWeeks&&e===-1&&(e=qN),ze(t)._overflowWeekday&&e===-1&&(e=KN),ze(t).overflow=e),t}var X3=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$3=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,G3=/Z|[+-]\d\d(?::?\d\d)?/,ol=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],zu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],q3=/^\/?Date\((-?\d+)/i,K3=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,J3={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Fw(t){var e,n,i=t._i,r=X3.exec(i)||$3.exec(i),o,h,a,s,c=ol.length,f=zu.length;if(r){for(ze(t).iso=!0,e=0,n=c;e<n;e++)if(ol[e][1].exec(r[1])){h=ol[e][0],o=ol[e][2]!==!1;break}if(h==null){t._isValid=!1;return}if(r[3]){for(e=0,n=f;e<n;e++)if(zu[e][1].exec(r[3])){a=(r[2]||" ")+zu[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(r[4])if(G3.exec(r[4]))s="Z";else{t._isValid=!1;return}t._f=h+(a||"")+(s||""),Td(t)}else t._isValid=!1}function Z3(t,e,n,i,r,o){var h=[Q3(t),kw.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&h.push(parseInt(o,10)),h}function Q3(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ej(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function tj(t,e,n){if(t){var i=Pw.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return ze(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function nj(t,e,n){if(t)return J3[t];if(e)return 0;var i=parseInt(n,10),r=i%100,o=(i-r)/100;return o*60+r}function Lw(t){var e=K3.exec(ej(t._i)),n;if(e){if(n=Z3(e[4],e[3],e[2],e[5],e[6],e[7]),!tj(e[1],n,t))return;t._a=n,t._tzm=nj(e[8],e[9],e[10]),t._d=ha.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ze(t).rfc2822=!0}else t._isValid=!1}function ij(t){var e=q3.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Fw(t),t._isValid===!1)delete t._isValid;else return;if(Lw(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:be.createFromInputFallback(t)}be.createFromInputFallback=Vn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ss(t,e,n){return t??e??n}function rj(t){var e=new Date(be.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Sd(t){var e,n,i=[],r,o,h;if(!t._d){for(r=rj(t),t._w&&t._a[hi]==null&&t._a[Bi]==null&&sj(t),t._dayOfYear!=null&&(h=Ss(t._a[cn],r[cn]),(t._dayOfYear>Ko(h)||t._dayOfYear===0)&&(ze(t)._overflowDayOfYear=!0),n=ha(h,0,t._dayOfYear),t._a[Bi]=n.getUTCMonth(),t._a[hi]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Xt]===24&&t._a[ei]===0&&t._a[Ui]===0&&t._a[Rr]===0&&(t._nextDay=!0,t._a[Xt]=0),t._d=(t._useUTC?ha:f3).apply(null,i),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Xt]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(ze(t).weekdayMismatch=!0)}}function sj(t){var e,n,i,r,o,h,a,s,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,h=4,n=Ss(e.GG,t._a[cn],da(_t(),1,4).year),i=Ss(e.W,1),r=Ss(e.E,1),(r<1||r>7)&&(s=!0)):(o=t._locale._week.dow,h=t._locale._week.doy,c=da(_t(),o,h),n=Ss(e.gg,t._a[cn],c.year),i=Ss(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(s=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(s=!0)):r=o),i<1||i>Hi(n,o,h)?ze(t)._overflowWeeks=!0:s!=null?ze(t)._overflowWeekday=!0:(a=Aw(n,i,r,o,h),t._a[cn]=a.year,t._dayOfYear=a.dayOfYear)}be.ISO_8601=function(){};be.RFC_2822=function(){};function Td(t){if(t._f===be.ISO_8601){Fw(t);return}if(t._f===be.RFC_2822){Lw(t);return}t._a=[],ze(t).empty=!0;var e=""+t._i,n,i,r,o,h,a=e.length,s=0,c,f;for(r=_w(t._f,t._locale).match(hd)||[],f=r.length,n=0;n<f;n++)o=r[n],i=(e.match(XN(o,t))||[])[0],i&&(h=e.substr(0,e.indexOf(i)),h.length>0&&ze(t).unusedInput.push(h),e=e.slice(e.indexOf(i)+i.length),s+=i.length),Ys[o]?(i?ze(t).empty=!1:ze(t).unusedTokens.push(o),GN(o,i,t)):t._strict&&!i&&ze(t).unusedTokens.push(o);ze(t).charsLeftOver=a-s,e.length>0&&ze(t).unusedInput.push(e),t._a[Xt]<=12&&ze(t).bigHour===!0&&t._a[Xt]>0&&(ze(t).bigHour=void 0),ze(t).parsedDateParts=t._a.slice(0),ze(t).meridiem=t._meridiem,t._a[Xt]=oj(t._locale,t._a[Xt],t._meridiem),c=ze(t).era,c!==null&&(t._a[cn]=t._locale.erasConvertYear(c,t._a[cn])),Sd(t),Cd(t)}function oj(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function aj(t){var e,n,i,r,o,h,a=!1,s=t._f.length;if(s===0){ze(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<s;r++)o=0,h=!1,e=ud({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],Td(e),cd(e)&&(h=!0),o+=ze(e).charsLeftOver,o+=ze(e).unusedTokens.length*10,ze(e).score=o,a?o<i&&(i=o,n=e):(i==null||o<i||h)&&(i=o,n=e,h&&(a=!0));ur(t,n||e)}function lj(t){if(!t._d){var e=dd(t._i),n=e.day===void 0?e.date:e.day;t._a=gw([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Sd(t)}}function cj(t){var e=new Ma(Cd(Nw(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Nw(t){var e=t._i,n=t._f;return t._locale=t._locale||Gi(t._l),e===null||n===void 0&&e===""?Ic({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ii(e)?new Ma(Cd(e)):(Pa(e)?t._d=e:ni(n)?aj(t):n?Td(t):uj(t),cd(t)||(t._d=null),t))}function uj(t){var e=t._i;_n(e)?t._d=new Date(be.now()):Pa(e)?t._d=new Date(e.valueOf()):typeof e=="string"?ij(t):ni(e)?(t._a=gw(e.slice(0),function(n){return parseInt(n,10)}),Sd(t)):Hr(e)?lj(t):$i(e)?t._d=new Date(e):be.createFromInputFallback(t)}function jw(t,e,n,i,r){var o={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(Hr(t)&&ld(t)||ni(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,cj(o)}function _t(t,e,n,i){return jw(t,e,n,i,!1)}var fj=Vn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Ic()}),hj=Vn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_t.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Ic()});function Bw(t,e){var n,i;if(e.length===1&&ni(e[0])&&(e=e[0]),!e.length)return _t();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function dj(){var t=[].slice.call(arguments,0);return Bw("isBefore",t)}function pj(){var t=[].slice.call(arguments,0);return Bw("isAfter",t)}var gj=function(){return Date.now?Date.now():+new Date},Mo=["year","quarter","month","week","day","hour","minute","second","millisecond"];function mj(t){var e,n=!1,i,r=Mo.length;for(e in t)if(rt(t,e)&&!(Lt.call(Mo,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<r;++i)if(t[Mo[i]]){if(n)return!1;parseFloat(t[Mo[i]])!==Qe(t[Mo[i]])&&(n=!0)}return!0}function vj(){return this._isValid}function _j(){return ri(NaN)}function Wc(t){var e=dd(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,h=e.day||0,a=e.hour||0,s=e.minute||0,c=e.second||0,f=e.millisecond||0;this._isValid=mj(e),this._milliseconds=+f+c*1e3+s*6e4+a*1e3*60*60,this._days=+h+o*7,this._months=+r+i*3+n*12,this._data={},this._locale=Gi(),this._bubble()}function Sl(t){return t instanceof Wc}function Zf(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function yj(t,e,n){var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,h;for(h=0;h<i;h++)(n&&t[h]!==e[h]||!n&&Qe(t[h])!==Qe(e[h]))&&o++;return o+r}function Uw(t,e){De(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Ti(~~(n/60),2)+e+Ti(~~n%60,2)})}Uw("Z",":");Uw("ZZ","");Ce("Z",jc);Ce("ZZ",jc);ct(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=kd(jc,t)});var bj=/([\+\-]|\d\d)/gi;function kd(t,e){var n=(e||"").match(t),i,r,o;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(bj)||["-",0,0],o=+(r[1]*60)+Qe(r[2]),o===0?0:r[0]==="+"?o:-o)}function Od(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(ii(t)||Pa(t)?t.valueOf():_t(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),be.updateOffset(n,!1),n):_t(t).local()}function Qf(t){return-Math.round(t._d.getTimezoneOffset())}be.updateOffset=function(){};function wj(t,e,n){var i=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=kd(jc,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=Qf(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?zw(this,ri(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:Qf(this)}function Cj(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Sj(t){return this.utcOffset(0,t)}function Tj(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Qf(this),"m")),this}function kj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=kd(HN,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Oj(t){return this.isValid()?(t=t?_t(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Ej(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xj(){if(!_n(this._isDSTShifted))return this._isDSTShifted;var t={},e;return ud(t,this),t=Nw(t),t._a?(e=t._isUTC?xi(t._a):_t(t._a),this._isDSTShifted=this.isValid()&&yj(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Dj(){return this.isValid()?!this._isUTC:!1}function Aj(){return this.isValid()?this._isUTC:!1}function Ww(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Pj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Mj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ri(t,e){var n=t,i=null,r,o,h;return Sl(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:$i(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=Pj.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:Qe(i[hi])*r,h:Qe(i[Xt])*r,m:Qe(i[ei])*r,s:Qe(i[Ui])*r,ms:Qe(Zf(i[Rr]*1e3))*r}):(i=Mj.exec(t))?(r=i[1]==="-"?-1:1,n={y:kr(i[2],r),M:kr(i[3],r),w:kr(i[4],r),d:kr(i[5],r),h:kr(i[6],r),m:kr(i[7],r),s:kr(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(h=Ij(_t(n.from),_t(n.to)),n={},n.ms=h.milliseconds,n.M=h.months),o=new Wc(n),Sl(t)&&rt(t,"_locale")&&(o._locale=t._locale),Sl(t)&&rt(t,"_isValid")&&(o._isValid=t._isValid),o}ri.fn=Wc.prototype;ri.invalid=_j;function kr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function R_(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ij(t,e){var n;return t.isValid()&&e.isValid()?(e=Od(e,t),t.isBefore(e)?n=R_(t,e):(n=R_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Yw(t,e){return function(n,i){var r,o;return i!==null&&!isNaN(+i)&&(vw(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),r=ri(n,i),zw(this,r,t),this}}function zw(t,e,n,i){var r=e._milliseconds,o=Zf(e._days),h=Zf(e._months);t.isValid()&&(i=i??!0,h&&Ew(t,fa(t,"Month")+h*n),o&&Tw(t,"Date",fa(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&be.updateOffset(t,o||h))}var Rj=Yw(1,"add"),Fj=Yw(-1,"subtract");function Hw(t){return typeof t=="string"||t instanceof String}function Lj(t){return ii(t)||Pa(t)||Hw(t)||$i(t)||jj(t)||Nj(t)||t===null||t===void 0}function Nj(t){var e=Hr(t)&&!ld(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,h=i.length;for(r=0;r<h;r+=1)o=i[r],n=n||rt(t,o);return e&&n}function jj(t){var e=ni(t),n=!1;return e&&(n=t.filter(function(i){return!$i(i)&&Hw(t)}).length===0),e&&n}function Bj(t){var e=Hr(t)&&!ld(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<i.length;r+=1)o=i[r],n=n||rt(t,o);return e&&n}function Uj(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Wj(t,e){arguments.length===1&&(arguments[0]?Lj(arguments[0])?(t=arguments[0],e=void 0):Bj(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||_t(),i=Od(n,this).startOf("day"),r=be.calendarFormat(this,i)||"sameElse",o=e&&(Di(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,_t(n)))}function Yj(){return new Ma(this)}function zj(t,e){var n=ii(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=Xn(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function Hj(t,e){var n=ii(t)?t:_t(t);return this.isValid()&&n.isValid()?(e=Xn(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function Vj(t,e,n,i){var r=ii(t)?t:_t(t),o=ii(e)?e:_t(e);return this.isValid()&&r.isValid()&&o.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function Xj(t,e){var n=ii(t)?t:_t(t),i;return this.isValid()&&n.isValid()?(e=Xn(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function $j(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Gj(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function qj(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(i=Od(t,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=Xn(e),e){case"year":o=Tl(this,i)/12;break;case"month":o=Tl(this,i);break;case"quarter":o=Tl(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:Bn(o)}function Tl(t,e){if(t.date()<e.date())return-Tl(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,o;return e-i<0?(r=t.clone().add(n-1,"months"),o=(e-i)/(i-r)):(r=t.clone().add(n+1,"months"),o=(e-i)/(r-i)),-(n+o)||0}be.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";be.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Kj(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Jj(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Cl(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Di(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Cl(n,"Z")):Cl(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Zj(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+i+r+o)}function Qj(t){t||(t=this.isUtc()?be.defaultFormatUtc:be.defaultFormat);var e=Cl(this,t);return this.localeData().postformat(e)}function eB(t,e){return this.isValid()&&(ii(t)&&t.isValid()||_t(t).isValid())?ri({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function tB(t){return this.from(_t(),t)}function nB(t,e){return this.isValid()&&(ii(t)&&t.isValid()||_t(t).isValid())?ri({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function iB(t){return this.to(_t(),t)}function Vw(t){var e;return t===void 0?this._locale._abbr:(e=Gi(t),e!=null&&(this._locale=e),this)}var Xw=Vn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function $w(){return this._locale}var nc=1e3,zs=60*nc,ic=60*zs,Gw=(365*400+97)*24*ic;function Hs(t,e){return(t%e+e)%e}function qw(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Gw:new Date(t,e,n).valueOf()}function Kw(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Gw:Date.UTC(t,e,n)}function rB(t){var e,n;if(t=Xn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Kw:qw,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Hs(e+(this._isUTC?0:this.utcOffset()*zs),ic);break;case"minute":e=this._d.valueOf(),e-=Hs(e,zs);break;case"second":e=this._d.valueOf(),e-=Hs(e,nc);break}return this._d.setTime(e),be.updateOffset(this,!0),this}function sB(t){var e,n;if(t=Xn(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Kw:qw,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ic-Hs(e+(this._isUTC?0:this.utcOffset()*zs),ic)-1;break;case"minute":e=this._d.valueOf(),e+=zs-Hs(e,zs)-1;break;case"second":e=this._d.valueOf(),e+=nc-Hs(e,nc)-1;break}return this._d.setTime(e),be.updateOffset(this,!0),this}function oB(){return this._d.valueOf()-(this._offset||0)*6e4}function aB(){return Math.floor(this.valueOf()/1e3)}function lB(){return new Date(this.valueOf())}function cB(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function uB(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function fB(){return this.isValid()?this.toISOString():null}function hB(){return cd(this)}function dB(){return ur({},ze(this))}function pB(){return ze(this).overflow}function gB(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}De("N",0,0,"eraAbbr");De("NN",0,0,"eraAbbr");De("NNN",0,0,"eraAbbr");De("NNNN",0,0,"eraName");De("NNNNN",0,0,"eraNarrow");De("y",["y",1],"yo","eraYear");De("y",["yy",2],0,"eraYear");De("y",["yyy",3],0,"eraYear");De("y",["yyyy",4],0,"eraYear");Ce("N",Ed);Ce("NN",Ed);Ce("NNN",Ed);Ce("NNNN",OB);Ce("NNNNN",EB);ct(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?ze(n).era=r:ze(n).invalidEra=t});Ce("y",vo);Ce("yy",vo);Ce("yyy",vo);Ce("yyyy",vo);Ce("yo",xB);ct(["y","yy","yyy","yyyy"],cn);ct(["yo"],function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[cn]=n._locale.eraYearOrdinalParse(t,r):e[cn]=parseInt(t,10)});function mB(t,e){var n,i,r,o=this._eras||Gi("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=be(o[n].since).startOf("day"),o[n].since=r.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=be(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf();break}}return o}function vB(t,e,n){var i,r,o=this.eras(),h,a,s;for(t=t.toUpperCase(),i=0,r=o.length;i<r;++i)if(h=o[i].name.toUpperCase(),a=o[i].abbr.toUpperCase(),s=o[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[i];break;case"NNNN":if(h===t)return o[i];break;case"NNNNN":if(s===t)return o[i];break}else if([h,a,s].indexOf(t)>=0)return o[i]}function _B(t,e){var n=t.since<=t.until?1:-1;return e===void 0?be(t.since).year():be(t.since).year()+(e-t.offset)*n}function yB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function bB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function wB(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function CB(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.clone().startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-be(r[t].since).year())*n+r[t].offset;return this.year()}function SB(t){return rt(this,"_erasNameRegex")||xd.call(this),t?this._erasNameRegex:this._erasRegex}function TB(t){return rt(this,"_erasAbbrRegex")||xd.call(this),t?this._erasAbbrRegex:this._erasRegex}function kB(t){return rt(this,"_erasNarrowRegex")||xd.call(this),t?this._erasNarrowRegex:this._erasRegex}function Ed(t,e){return e.erasAbbrRegex(t)}function OB(t,e){return e.erasNameRegex(t)}function EB(t,e){return e.erasNarrowRegex(t)}function xB(t,e){return e._eraYearOrdinalRegex||vo}function xd(){var t=[],e=[],n=[],i=[],r,o,h,a,s,c=this.eras();for(r=0,o=c.length;r<o;++r)h=zi(c[r].name),a=zi(c[r].abbr),s=zi(c[r].narrow),e.push(h),t.push(a),n.push(s),i.push(h),i.push(a),i.push(s);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}De(0,["gg",2],0,function(){return this.weekYear()%100});De(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Yc(t,e){De(0,[t,t.length],0,e)}Yc("gggg","weekYear");Yc("ggggg","weekYear");Yc("GGGG","isoWeekYear");Yc("GGGGG","isoWeekYear");Ce("G",Nc);Ce("g",Nc);Ce("GG",yt,Pn);Ce("gg",yt,Pn);Ce("GGGG",gd,pd);Ce("gggg",gd,pd);Ce("GGGGG",Lc,Rc);Ce("ggggg",Lc,Rc);Ra(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=Qe(t)});Ra(["gg","GG"],function(t,e,n,i){e[i]=be.parseTwoDigitYear(t)});function DB(t){return Jw.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function AB(t){return Jw.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function PB(){return Hi(this.year(),1,4)}function MB(){return Hi(this.isoWeekYear(),1,4)}function IB(){var t=this.localeData()._week;return Hi(this.year(),t.dow,t.doy)}function RB(){var t=this.localeData()._week;return Hi(this.weekYear(),t.dow,t.doy)}function Jw(t,e,n,i,r){var o;return t==null?da(this,i,r).year:(o=Hi(t,i,r),e>o&&(e=o),FB.call(this,t,e,n,i,r))}function FB(t,e,n,i,r){var o=Aw(t,e,n,i,r),h=ha(o.year,0,o.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}De("Q",0,"Qo","quarter");Ce("Q",yw);ct("Q",function(t,e){e[Bi]=(Qe(t)-1)*3});function LB(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}De("D",["DD",2],"Do","date");Ce("D",yt,_o);Ce("DD",yt,Pn);Ce("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ct(["D","DD"],hi);ct("Do",function(t,e){e[hi]=Qe(t.match(yt)[0])});var Zw=yo("Date",!0);De("DDD",["DDDD",3],"DDDo","dayOfYear");Ce("DDD",Fc);Ce("DDDD",bw);ct(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Qe(t)});function NB(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}De("m",["mm",2],0,"minute");Ce("m",yt,md);Ce("mm",yt,Pn);ct(["m","mm"],ei);var jB=yo("Minutes",!1);De("s",["ss",2],0,"second");Ce("s",yt,md);Ce("ss",yt,Pn);ct(["s","ss"],Ui);var BB=yo("Seconds",!1);De("S",0,0,function(){return~~(this.millisecond()/100)});De(0,["SS",2],0,function(){return~~(this.millisecond()/10)});De(0,["SSS",3],0,"millisecond");De(0,["SSSS",4],0,function(){return this.millisecond()*10});De(0,["SSSSS",5],0,function(){return this.millisecond()*100});De(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});De(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});De(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});De(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ce("S",Fc,yw);Ce("SS",Fc,Pn);Ce("SSS",Fc,bw);var fr,Qw;for(fr="SSSS";fr.length<=9;fr+="S")Ce(fr,vo);function UB(t,e){e[Rr]=Qe(("0."+t)*1e3)}for(fr="S";fr.length<=9;fr+="S")ct(fr,UB);Qw=yo("Milliseconds",!1);De("z",0,0,"zoneAbbr");De("zz",0,0,"zoneName");function WB(){return this._isUTC?"UTC":""}function YB(){return this._isUTC?"Coordinated Universal Time":""}var ve=Ma.prototype;ve.add=Rj;ve.calendar=Wj;ve.clone=Yj;ve.diff=qj;ve.endOf=sB;ve.format=Qj;ve.from=eB;ve.fromNow=tB;ve.to=nB;ve.toNow=iB;ve.get=ZN;ve.invalidAt=pB;ve.isAfter=zj;ve.isBefore=Hj;ve.isBetween=Vj;ve.isSame=Xj;ve.isSameOrAfter=$j;ve.isSameOrBefore=Gj;ve.isValid=hB;ve.lang=Xw;ve.locale=Vw;ve.localeData=$w;ve.max=hj;ve.min=fj;ve.parsingFlags=dB;ve.set=QN;ve.startOf=rB;ve.subtract=Fj;ve.toArray=cB;ve.toObject=uB;ve.toDate=lB;ve.toISOString=Jj;ve.inspect=Zj;typeof Symbol<"u"&&Symbol.for!=null&&(ve[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ve.toJSON=fB;ve.toString=Kj;ve.unix=aB;ve.valueOf=oB;ve.creationData=gB;ve.eraName=yB;ve.eraNarrow=bB;ve.eraAbbr=wB;ve.eraYear=CB;ve.year=Sw;ve.isLeapYear=JN;ve.weekYear=DB;ve.isoWeekYear=AB;ve.quarter=ve.quarters=LB;ve.month=xw;ve.daysInMonth=l3;ve.week=ve.weeks=m3;ve.isoWeek=ve.isoWeeks=v3;ve.weeksInYear=IB;ve.weeksInWeekYear=RB;ve.isoWeeksInYear=PB;ve.isoWeeksInISOWeekYear=MB;ve.date=Zw;ve.day=ve.days=A3;ve.weekday=P3;ve.isoWeekday=M3;ve.dayOfYear=NB;ve.hour=ve.hours=B3;ve.minute=ve.minutes=jB;ve.second=ve.seconds=BB;ve.millisecond=ve.milliseconds=Qw;ve.utcOffset=wj;ve.utc=Sj;ve.local=Tj;ve.parseZone=kj;ve.hasAlignedHourOffset=Oj;ve.isDST=Ej;ve.isLocal=Dj;ve.isUtcOffset=Aj;ve.isUtc=Ww;ve.isUTC=Ww;ve.zoneAbbr=WB;ve.zoneName=YB;ve.dates=Vn("dates accessor is deprecated. Use date instead.",Zw);ve.months=Vn("months accessor is deprecated. Use month instead",xw);ve.years=Vn("years accessor is deprecated. Use year instead",Sw);ve.zone=Vn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Cj);ve.isDSTShifted=Vn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xj);function zB(t){return _t(t*1e3)}function HB(){return _t.apply(null,arguments).parseZone()}function e1(t){return t}var st=fd.prototype;st.calendar=DN;st.longDateFormat=IN;st.invalidDate=FN;st.ordinal=jN;st.preparse=e1;st.postformat=e1;st.relativeTime=UN;st.pastFuture=WN;st.set=EN;st.eras=mB;st.erasParse=vB;st.erasConvertYear=_B;st.erasAbbrRegex=TB;st.erasNameRegex=SB;st.erasNarrowRegex=kB;st.months=r3;st.monthsShort=s3;st.monthsParse=a3;st.monthsRegex=u3;st.monthsShortRegex=c3;st.week=h3;st.firstDayOfYear=g3;st.firstDayOfWeek=p3;st.weekdays=k3;st.weekdaysMin=E3;st.weekdaysShort=O3;st.weekdaysParse=D3;st.weekdaysRegex=I3;st.weekdaysShortRegex=R3;st.weekdaysMinRegex=F3;st.isPM=N3;st.meridiem=U3;function rc(t,e,n,i){var r=Gi(),o=xi().set(i,e);return r[n](o,t)}function t1(t,e,n){if($i(t)&&(e=t,t=void 0),t=t||"",e!=null)return rc(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=rc(t,i,n,"month");return r}function Dd(t,e,n,i){typeof t=="boolean"?($i(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,$i(e)&&(n=e,e=void 0),e=e||"");var r=Gi(),o=t?r._week.dow:0,h,a=[];if(n!=null)return rc(e,(n+o)%7,i,"day");for(h=0;h<7;h++)a[h]=rc(e,(h+o)%7,i,"day");return a}function VB(t,e){return t1(t,e,"months")}function XB(t,e){return t1(t,e,"monthsShort")}function $B(t,e,n){return Dd(t,e,n,"weekdays")}function GB(t,e,n){return Dd(t,e,n,"weekdaysShort")}function qB(t,e,n){return Dd(t,e,n,"weekdaysMin")}gr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Qe(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});be.lang=Vn("moment.lang is deprecated. Use moment.locale instead.",gr);be.langData=Vn("moment.langData is deprecated. Use moment.localeData instead.",Gi);var Ii=Math.abs;function KB(){var t=this._data;return this._milliseconds=Ii(this._milliseconds),this._days=Ii(this._days),this._months=Ii(this._months),t.milliseconds=Ii(t.milliseconds),t.seconds=Ii(t.seconds),t.minutes=Ii(t.minutes),t.hours=Ii(t.hours),t.months=Ii(t.months),t.years=Ii(t.years),this}function n1(t,e,n,i){var r=ri(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function JB(t,e){return n1(this,t,e,1)}function ZB(t,e){return n1(this,t,e,-1)}function F_(t){return t<0?Math.floor(t):Math.ceil(t)}function QB(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,r,o,h,a,s;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=F_(eh(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,r=Bn(t/1e3),i.seconds=r%60,o=Bn(r/60),i.minutes=o%60,h=Bn(o/60),i.hours=h%24,e+=Bn(h/24),s=Bn(i1(e)),n+=s,e-=F_(eh(s)),a=Bn(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function i1(t){return t*4800/146097}function eh(t){return t*146097/4800}function e4(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=Xn(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+i1(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(eh(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function qi(t){return function(){return this.as(t)}}var r1=qi("ms"),t4=qi("s"),n4=qi("m"),i4=qi("h"),r4=qi("d"),s4=qi("w"),o4=qi("M"),a4=qi("Q"),l4=qi("y"),c4=r1;function u4(){return ri(this)}function f4(t){return t=Xn(t),this.isValid()?this[t+"s"]():NaN}function ts(t){return function(){return this.isValid()?this._data[t]:NaN}}var h4=ts("milliseconds"),d4=ts("seconds"),p4=ts("minutes"),g4=ts("hours"),m4=ts("days"),v4=ts("months"),_4=ts("years");function y4(){return Bn(this.days()/7)}var Ri=Math.round,As={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function b4(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function w4(t,e,n,i){var r=ri(t).abs(),o=Ri(r.as("s")),h=Ri(r.as("m")),a=Ri(r.as("h")),s=Ri(r.as("d")),c=Ri(r.as("M")),f=Ri(r.as("w")),l=Ri(r.as("y")),u=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||h<=1&&["m"]||h<n.m&&["mm",h]||a<=1&&["h"]||a<n.h&&["hh",a]||s<=1&&["d"]||s<n.d&&["dd",s];return n.w!=null&&(u=u||f<=1&&["w"]||f<n.w&&["ww",f]),u=u||c<=1&&["M"]||c<n.M&&["MM",c]||l<=1&&["y"]||["yy",l],u[2]=e,u[3]=+t>0,u[4]=i,b4.apply(null,u)}function C4(t){return t===void 0?Ri:typeof t=="function"?(Ri=t,!0):!1}function S4(t,e){return As[t]===void 0?!1:e===void 0?As[t]:(As[t]=e,t==="s"&&(As.ss=e-1),!0)}function T4(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=As,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},As,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),o=w4(this,!n,i,r),n&&(o=r.pastFuture(+this,o)),r.postformat(o)}var Hu=Math.abs;function gs(t){return(t>0)-(t<0)||+t}function zc(){if(!this.isValid())return this.localeData().invalidDate();var t=Hu(this._milliseconds)/1e3,e=Hu(this._days),n=Hu(this._months),i,r,o,h,a=this.asSeconds(),s,c,f,l;return a?(i=Bn(t/60),r=Bn(i/60),t%=60,i%=60,o=Bn(n/12),n%=12,h=t?t.toFixed(3).replace(/\.?0+$/,""):"",s=a<0?"-":"",c=gs(this._months)!==gs(a)?"-":"",f=gs(this._days)!==gs(a)?"-":"",l=gs(this._milliseconds)!==gs(a)?"-":"",s+"P"+(o?c+o+"Y":"")+(n?c+n+"M":"")+(e?f+e+"D":"")+(r||i||t?"T":"")+(r?l+r+"H":"")+(i?l+i+"M":"")+(t?l+h+"S":"")):"P0D"}var it=Wc.prototype;it.isValid=vj;it.abs=KB;it.add=JB;it.subtract=ZB;it.as=e4;it.asMilliseconds=r1;it.asSeconds=t4;it.asMinutes=n4;it.asHours=i4;it.asDays=r4;it.asWeeks=s4;it.asMonths=o4;it.asQuarters=a4;it.asYears=l4;it.valueOf=c4;it._bubble=QB;it.clone=u4;it.get=f4;it.milliseconds=h4;it.seconds=d4;it.minutes=p4;it.hours=g4;it.days=m4;it.weeks=y4;it.months=v4;it.years=_4;it.humanize=T4;it.toISOString=zc;it.toString=zc;it.toJSON=zc;it.locale=Vw;it.localeData=$w;it.toIsoString=Vn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zc);it.lang=Xw;De("X",0,0,"unix");De("x",0,0,"valueOf");Ce("x",Nc);Ce("X",VN);ct("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});ct("x",function(t,e,n){n._d=new Date(Qe(t))});//! moment.js
be.version="2.30.1";kN(_t);be.fn=ve;be.min=dj;be.max=pj;be.now=gj;be.utc=xi;be.unix=zB;be.months=VB;be.isDate=Pa;be.locale=gr;be.invalid=Ic;be.duration=ri;be.isMoment=ii;be.weekdays=$B;be.parseZone=HB;be.localeData=Gi;be.isDuration=Sl;be.monthsShort=XB;be.weekdaysMin=qB;be.defineLocale=wd;be.updateLocale=H3;be.locales=V3;be.weekdaysShort=GB;be.normalizeUnits=Xn;be.relativeTimeRounding=C4;be.relativeTimeThreshold=S4;be.calendarFormat=Uj;be.prototype=ve;be.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function L_(t,e,n){const i=t.slice();return i[8]=e[n],i}function N_(t,e,n){const i=t.slice();return i[11]=e[n],i}function k4(t){let e;return{c(){e=E("div"),e.innerHTML='<h2 class="flex p-5 justify-center">로그인후 이용가능합니다.</h2> <a href="/member/login.html" class="btn primary-btn btn-lg max-w-lg w-full">로그인 페이지로</a>',S(e,"class","flex flex-col justify-center items-center")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function O4(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m={ctx:t,current:null,token:null,hasCatch:!1,pending:M4,then:x4,catch:E4,value:7};return Vs(u=t[3],m),{c(){e=E("div"),n=E("select"),i=E("option"),i.textContent="최근 1개월",r=E("option"),r.textContent="최근 3개월",o=E("option"),o.textContent="최근 5개월",h=E("option"),h.textContent="최근 6개월",a=E("option"),a.textContent="최근 9개월",s=E("option"),s.textContent="최근 12개월",c=E("option"),c.textContent="최근 2년",f=V(),l=et(),m.block.c(),i.__value=1,Pe(i,i.__value),r.__value=3,Pe(r,r.__value),o.__value=5,Pe(o,o.__value),h.__value=6,Pe(h,h.__value),a.__value=9,Pe(a,a.__value),s.__value=12,Pe(s,s.__value),c.__value=24,Pe(c,c.__value),S(n,"class","block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 select"),t[2]===void 0&&Ut(()=>t[5].call(n)),S(e,"class","mb-4")},m(g,v){j(g,e,v),k(e,n),k(n,i),k(n,r),k(n,o),k(n,h),k(n,a),k(n,s),k(n,c),_i(n,t[2],!0),j(g,f,v),j(g,l,v),m.block.m(g,m.anchor=v),m.mount=()=>l.parentNode,m.anchor=l,d||(p=[Q(n,"change",t[5]),Q(n,"change",t[4])],d=!0)},p(g,v){t=g,v&4&&_i(n,t[2]),m.ctx=t,v&8&&u!==(u=t[3])&&Vs(u,m)||sh(m,t,v)},d(g){g&&(N(e),N(f),N(l)),m.block.d(g),m.token=null,m=null,d=!1,We(p)}}}function E4(t){return{c:ge,m:ge,p:ge,d:ge}}function x4(t){let e=console.log({response:t[7]})+"",n,i,r;function o(s,c){return s[7].error?P4:s[7].count?A4:D4}let h=o(t),a=h(t);return{c(){n=we(e),i=V(),r=E("div"),a.c()},m(s,c){j(s,n,c),j(s,i,c),j(s,r,c),a.m(r,null)},p(s,c){c&8&&e!==(e=console.log({response:s[7]})+"")&&He(n,e),h===(h=o(s))&&a?a.p(s,c):(a.d(1),a=h(s),a&&(a.c(),a.m(r,null)))},d(s){s&&(N(n),N(i),N(r)),a.d()}}}function D4(t){let e;return{c(){e=E("div"),e.textContent="저장된 디자인이 없습니다.",S(e,"class","text-center py-8 text-gray-500")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function A4(t){let e,n=Me(t[7].data),i=[];for(let r=0;r<n.length;r+=1)i[r]=W_(L_(t,n,r));return{c(){e=E("ul");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,o){j(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&10){n=Me(r[7].data);let h;for(h=0;h<n.length;h+=1){const a=L_(r,n,h);i[h]?i[h].p(a,o):(i[h]=W_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function P4(t){let e,n=t[7].error+"",i;return{c(){e=E("div"),i=we(n),S(e,"class","text-red-500 p-4")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&8&&n!==(n=r[7].error+"")&&He(i,n)},d(r){r&&N(e)}}}function j_(t){var K;let e,n,i,r,o,h,a,s,c,f=t[8].cafe24Product.product.product_name+"",l,u,d,p,m=be(t[8].created_at).format("YYYY-MM-DD")+"",g,v,_,b=Bl(t[8].cafe24Product.product.price)+"",y,C,w,T,O,A,M;function Y(){return t[6](t[8])}let U=((K=t[8].thumbnails)==null?void 0:K.length)&&B_(t);return{c(){e=E("li"),n=E("div"),i=E("div"),r=E("img"),a=V(),s=E("div"),c=E("h2"),l=we(f),u=V(),d=E("div"),p=we("주문일: "),g=we(m),v=V(),_=E("div"),y=we(b),C=V(),w=E("button"),w.textContent="디자인 재주문",T=V(),U&&U.c(),O=V(),Xe(r.src,o=t[8].cafe24Product.product.small_image)||S(r,"src",o),S(r,"class","w-24 h-24 object-cover rounded-md"),S(r,"alt",h=t[8].cafe24Product.product.product_name),S(c,"class","text-base font-semibold mb-2 line-clamp-2"),S(d,"class","text-sm font-normal mb-2"),S(_,"class","text-blue-600 font-bold mb-2"),S(w,"type","button"),S(w,"class","btn btn-sm primary-btn w-full"),S(s,"class","flex-1"),S(i,"class","flex items-center gap-4 mb-4"),S(n,"class","p-4"),S(e,"class","bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105")},m(q,B){j(q,e,B),k(e,n),k(n,i),k(i,r),k(i,a),k(i,s),k(s,c),k(c,l),k(s,u),k(s,d),k(d,p),k(d,g),k(s,v),k(s,_),k(_,y),k(s,C),k(s,w),k(n,T),U&&U.m(n,null),k(e,O),A||(M=Q(w,"click",Y),A=!0)},p(q,B){var W;t=q,B&8&&!Xe(r.src,o=t[8].cafe24Product.product.small_image)&&S(r,"src",o),B&8&&h!==(h=t[8].cafe24Product.product.product_name)&&S(r,"alt",h),B&8&&f!==(f=t[8].cafe24Product.product.product_name+"")&&He(l,f),B&8&&m!==(m=be(t[8].created_at).format("YYYY-MM-DD")+"")&&He(g,m),B&8&&b!==(b=Bl(t[8].cafe24Product.product.price)+"")&&He(y,b),(W=t[8].thumbnails)!=null&&W.length?U?U.p(t,B):(U=B_(t),U.c(),U.m(n,null)):U&&(U.d(1),U=null)},d(q){q&&N(e),U&&U.d(),A=!1,M()}}}function B_(t){let e,n=Me(t[8].thumbnails),i=[];for(let r=0;r<n.length;r+=1)i[r]=U_(N_(t,n,r));return{c(){e=E("div");for(let r=0;r<i.length;r+=1)i[r].c();S(e,"class","flex overflow-x-auto space-x-2 pb-2")},m(r,o){j(r,e,o);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null)},p(r,o){if(o&8){n=Me(r[8].thumbnails);let h;for(h=0;h<n.length;h+=1){const a=N_(r,n,h);i[h]?i[h].p(a,o):(i[h]=U_(a),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=n.length}},d(r){r&&N(e),Dt(i,r)}}}function U_(t){let e,n;return{c(){e=E("img"),Xe(e.src,n=t[11].url)||S(e,"src",n),S(e,"alt",""),S(e,"class","w-20 h-20 object-cover rounded-md flex-shrink-0")},m(i,r){j(i,e,r)},p(i,r){r&8&&!Xe(e.src,n=i[11].url)&&S(e,"src",n)},d(i){i&&N(e)}}}function W_(t){var i;let e,n=((i=t[8].cafe24Product)==null?void 0:i.product)&&j_(t);return{c(){n&&n.c(),e=et()},m(r,o){n&&n.m(r,o),j(r,e,o)},p(r,o){var h;(h=r[8].cafe24Product)!=null&&h.product?n?n.p(r,o):(n=j_(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&N(e),n&&n.d(r)}}}function M4(t){let e;return{c(){e=E("div"),e.textContent="로딩 중...",S(e,"class","text-center py-4")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function I4(t){let e;function n(o,h){return o[0].cafe24UserType==="member"?O4:k4}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(o,h){r.m(o,h),j(o,e,h)},p(o,[h]){i===(i=n(o))&&r?r.p(o,h):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:ge,o:ge,d(o){o&&N(e),r.d(o)}}}function R4(t,e,n){let{user:i}=e,{handleClick:r}=e,o=3,h;function a(f){n(2,o=parseInt(f.target.value))}function s(){o=Lo(this),n(2,o)}const c=f=>r(f.uuid);return t.$$set=f=>{"user"in f&&n(0,i=f.user),"handleClick"in f&&n(1,r=f.handleClick)},t.$$.update=()=>{t.$$.dirty&13&&(n(3,h=JT(i.cafe24MallId,i.cafe24MemberId,o)),console.log({loadCafe24MemberDesign:h}))},[i,r,o,h,a,s,c]}class F4 extends qe{constructor(e){super(),Ge(this,e,R4,I4,Ve,{user:0,handleClick:1})}}function Y_(t){let e,n,i,r,o=t[4].printGuide+"",h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C;return c=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),h=we(o),a=V(),s=E("button"),de(c.$$.fragment),f=V(),l=E("div"),u=E("textarea"),d=V(),p=E("div"),m=E("button"),m.textContent="주문하기",g=V(),v=E("button"),v.textContent="취소",S(r,"class","font-semibold"),S(s,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(u,"class","textarea"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(w,T){j(w,e,T),k(e,n),k(n,i),k(i,r),k(r,h),k(i,a),k(i,s),ue(c,s,null),k(n,f),k(n,l),k(l,u),Pe(u,t[3]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(C=[Q(s,"click",fn),Q(u,"input",t[7]),Q(u,"change",t[8]),Q(m,"click",t[9]),Q(v,"click",fn),Q(e,"introstart",t[5]),Q(e,"outroend",t[6])],y=!0)},p(w,T){(!b||T&16)&&o!==(o=w[4].printGuide+"")&&He(h,o),T&8&&Pe(u,w[3])},i(w){b||(R(c.$$.fragment,w),w&&Ut(()=>{b&&(_||(_=Yt(e,wi,{y:50},!0)),_.run(1))}),b=!0)},o(w){H(c.$$.fragment,w),w&&(_||(_=Yt(e,wi,{y:50},!1)),_.run(0)),b=!1},d(w){w&&N(e),fe(c),w&&_&&_.end(),y=!1,We(C)}}}function L4(t){let e,n,i=t[0]&&Y_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&R(i,1)):(i=Y_(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function N4(t,e,n){let i;je(t,co,d=>n(4,i=d));let{isOpen:r}=e,{orderAction:o}=e,{setPrintMemo:h}=e,a="";function s(d){bi.call(this,t,d)}function c(d){bi.call(this,t,d)}function f(){a=this.value,n(3,a)}const l=()=>h(a),u=()=>o();return t.$$set=d=>{"isOpen"in d&&n(0,r=d.isOpen),"orderAction"in d&&n(1,o=d.orderAction),"setPrintMemo"in d&&n(2,h=d.setPrintMemo)},[r,o,h,a,i,s,c,f,l,u]}class j4 extends qe{constructor(e){super(),Ge(this,e,N4,L4,Ve,{isOpen:0,orderAction:1,setPrintMemo:2})}}function z_(t,e,n){const i=t.slice();return i[15]=e[n],i}function H_(t,e,n){const i=t.slice();return i[18]=e[n],i}function V_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C,w,T,O,A,M;a=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}});let Y=Me(t[1]),U=[];for(let W=0;W<Y.length;W+=1)U[W]=X_(H_(t,Y,W));const K=[U4,B4],q=[];function B(W,ee){return W[5]?0:1}return _=B(t),b=q[_]=K[_](t),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="상품변경",o=V(),h=E("button"),de(a.$$.fragment),s=V(),c=E("div"),f=E("div"),l=E("select"),u=E("option"),u.textContent="모든 카테고리";for(let W=0;W<U.length;W+=1)U[W].c();d=V(),p=E("input"),m=V(),g=E("button"),g.textContent="검색",v=V(),b.c(),y=V(),C=E("div"),w=E("button"),w.textContent="닫기",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),u.__value=null,Pe(u,u.__value),S(l,"class","select w-5/12"),t[2]===void 0&&Ut(()=>t[12].call(l)),S(p,"type","text"),S(p,"placeholder","상품 검색"),S(p,"class","input grow"),S(g,"class","btn primary-btn whitespace-nowrap min-w-24"),S(f,"class","flex space-x-4"),S(c,"class","mt-4 space-y-4"),S(w,"class","btn secondary-btn"),S(C,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[90%] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","modal svelte-12h0zwj")},m(W,ee){j(W,e,ee),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),k(f,l),k(l,u);for(let ne=0;ne<U.length;ne+=1)U[ne]&&U[ne].m(l,null);_i(l,t[2],!0),k(f,d),k(f,p),Pe(p,t[3]),k(f,m),k(f,g),k(c,v),q[_].m(c,null),k(n,y),k(n,C),k(C,w),O=!0,A||(M=[Q(h,"click",fn),Q(l,"change",t[12]),Q(l,"change",t[6]),Q(p,"input",t[13]),Q(g,"click",t[7]),Q(w,"click",fn),Q(e,"introstart",t[10]),Q(e,"outroend",t[11])],A=!0)},p(W,ee){if(ee&2){Y=Me(W[1]);let x;for(x=0;x<Y.length;x+=1){const P=H_(W,Y,x);U[x]?U[x].p(P,ee):(U[x]=X_(P),U[x].c(),U[x].m(l,null))}for(;x<U.length;x+=1)U[x].d(1);U.length=Y.length}ee&6&&_i(l,W[2]),ee&8&&p.value!==W[3]&&Pe(p,W[3]);let ne=_;_=B(W),_===ne?q[_].p(W,ee):(ke(),H(q[ne],1,1,()=>{q[ne]=null}),Oe(),b=q[_],b?b.p(W,ee):(b=q[_]=K[_](W),b.c()),R(b,1),b.m(c,null))},i(W){O||(R(a.$$.fragment,W),R(b),W&&Ut(()=>{O&&(T||(T=Yt(e,wi,{y:50},!0)),T.run(1))}),O=!0)},o(W){H(a.$$.fragment,W),H(b),W&&(T||(T=Yt(e,wi,{y:50},!1)),T.run(0)),O=!1},d(W){W&&N(e),fe(a),Dt(U,W),q[_].d(),W&&T&&T.end(),A=!1,We(M)}}}function X_(t){let e,n=t[18].category_name+"",i,r;return{c(){e=E("option"),i=we(n),e.__value=r=t[18].category_no,Pe(e,e.__value)},m(o,h){j(o,e,h),k(e,i)},p(o,h){h&2&&n!==(n=o[18].category_name+"")&&He(i,n),h&2&&r!==(r=o[18].category_no)&&(e.__value=r,Pe(e,e.__value))},d(o){o&&N(e)}}}function B4(t){let e,n,i=Me(t[4]),r=[];for(let h=0;h<i.length;h+=1)r[h]=$_(z_(t,i,h));const o=h=>H(r[h],1,1,()=>{r[h]=null});return{c(){e=E("div");for(let h=0;h<r.length;h+=1)r[h].c();S(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4")},m(h,a){j(h,e,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);n=!0},p(h,a){if(a&272){i=Me(h[4]);let s;for(s=0;s<i.length;s+=1){const c=z_(h,i,s);r[s]?(r[s].p(c,a),R(r[s],1)):(r[s]=$_(c),r[s].c(),R(r[s],1),r[s].m(e,null))}for(ke(),s=i.length;s<r.length;s+=1)o(s);Oe()}},i(h){if(!n){for(let a=0;a<i.length;a+=1)R(r[a]);n=!0}},o(h){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)H(r[a]);n=!1},d(h){h&&N(e),Dt(r,h)}}}function U4(t){let e;return{c(){e=E("p"),e.textContent="로딩 중..."},m(n,i){j(n,e,i)},p:ge,i:ge,o:ge,d(n){n&&N(e)}}}function W4(t){let e,n;return e=new Se({props:{icon:"carbon:no-image",class:"w-full max-h-32 mb-2"}}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p:ge,i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function Y4(t){let e,n,i;return{c(){e=E("img"),Xe(e.src,n=t[15].list_image)||S(e,"src",n),S(e,"alt",i=t[15].product_name),S(e,"class","w-full max-h-32 object-contain mb-2")},m(r,o){j(r,e,o)},p(r,o){o&16&&!Xe(e.src,n=r[15].list_image)&&S(e,"src",n),o&16&&i!==(i=r[15].product_name)&&S(e,"alt",i)},i:ge,o:ge,d(r){r&&N(e)}}}function $_(t){let e,n,i,r,o,h=t[15].product_name+"",a,s,c,f=Bl(t[15].price)+"",l,u,d,p,m;const g=[Y4,W4],v=[];function _(y,C){return y[15].list_image?0:1}n=_(t),i=v[n]=g[n](t);function b(){return t[14](t[15])}return{c(){e=E("button"),i.c(),r=V(),o=E("p"),a=we(h),s=V(),c=E("p"),l=we(f),u=V(),S(o,"class","font-semibold"),S(c,"class","text-base font-semibold text-gray-600"),S(e,"class","border p-2 rounded cursor-pointer hover:bg-gray-100")},m(y,C){j(y,e,C),v[n].m(e,null),k(e,r),k(e,o),k(o,a),k(e,s),k(e,c),k(c,l),k(e,u),d=!0,p||(m=Q(e,"click",b),p=!0)},p(y,C){t=y;let w=n;n=_(t),n===w?v[n].p(t,C):(ke(),H(v[w],1,1,()=>{v[w]=null}),Oe(),i=v[n],i?i.p(t,C):(i=v[n]=g[n](t),i.c()),R(i,1),i.m(e,r)),(!d||C&16)&&h!==(h=t[15].product_name+"")&&He(a,h),(!d||C&16)&&f!==(f=Bl(t[15].price)+"")&&He(l,f)},i(y){d||(R(i),d=!0)},o(y){H(i),d=!1},d(y){y&&N(e),v[n].d(),p=!1,m()}}}function z4(t){let e,n,i=t[0]&&V_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&R(i,1)):(i=V_(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function H4(t,e,n){let{isOpen:i}=e,{changeProduct:r}=e,o=[],h=null,a="",s=[],c=!1;ki(async()=>{try{n(1,o=await Yx()),await l()}catch(_){console.error("Failed to load categories:",_)}});async function f(_){n(2,h=_.target.value?Number(_.target.value):null),await l()}async function l(){n(5,c=!0);try{n(4,s=await zx(h,a)),console.log({products:s})}catch(_){console.error("Failed to search products:",_)}finally{n(5,c=!1)}}async function u(_){n(5,c=!0);try{const{options:b}=await wf(_.product_no);console.log({options:b});const y=b.additional_options.some(C=>C.additional_option_name==="podiz");if(console.log("podiz 옵션 존재 여부:",y),y)r(_),fn();else{alert("선택하신 상품은 POD 상품이 아닙니다.");return}}catch(b){console.log(b)}finally{n(5,c=!1)}}function d(_){bi.call(this,t,_)}function p(_){bi.call(this,t,_)}function m(){h=Lo(this),n(2,h),n(1,o)}function g(){a=this.value,n(3,a)}const v=_=>u(_);return t.$$set=_=>{"isOpen"in _&&n(0,i=_.isOpen),"changeProduct"in _&&n(9,r=_.changeProduct)},[i,o,h,a,s,c,f,l,u,r,d,p,m,g,v]}class V4 extends qe{constructor(e){super(),Ge(this,e,H4,z4,Ve,{isOpen:0,changeProduct:9})}}function G_(t,e,n){const i=t.slice();return i[23]=e[n],i[25]=n,i}function q_(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}function X4(t){let e;return{c(){e=E("p"),e.textContent="템플릿이 없습니다."},m(n,i){j(n,e,i)},p:ge,i:ge,o:ge,d(n){n&&N(e)}}}function $4(t){let e,n,i,r,o,h,a,s,c,f,l;i=new Se({props:{icon:"mdi:chevron-left",height:"24"}});let u=Me(t[0]),d=[];for(let p=0;p<u.length;p+=1)d[p]=Z_(G_(t,u,p));return s=new Se({props:{icon:"mdi:chevron-right",height:"24"}}),{c(){e=E("div"),n=E("button"),de(i.$$.fragment),r=V(),o=E("div");for(let p=0;p<d.length;p+=1)d[p].c();h=V(),a=E("button"),de(s.$$.fragment),S(n,"class","nav-button prev svelte-10gxpzb"),n.disabled=t[5],S(o,"class","carousel-container svelte-10gxpzb"),S(a,"class","nav-button next svelte-10gxpzb"),a.disabled=t[6],S(e,"class","carousel svelte-10gxpzb")},m(p,m){j(p,e,m),k(e,n),ue(i,n,null),k(e,r),k(e,o);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(o,null);t[17](o),k(e,h),k(e,a),ue(s,a,null),c=!0,f||(l=[Q(n,"click",t[10]),Q(a,"click",t[9])],f=!0)},p(p,m){if((!c||m&32)&&(n.disabled=p[5]),m&403){u=Me(p[0]);let g;for(g=0;g<u.length;g+=1){const v=G_(p,u,g);d[g]?d[g].p(v,m):(d[g]=Z_(v),d[g].c(),d[g].m(o,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=u.length}(!c||m&64)&&(a.disabled=p[6])},i(p){c||(R(i.$$.fragment,p),R(s.$$.fragment,p),c=!0)},o(p){H(i.$$.fragment,p),H(s.$$.fragment,p),c=!1},d(p){p&&N(e),fe(i),Dt(d,p),t[17](null),fe(s),f=!1,We(l)}}}function G4(t){let e,n,i;return n=new Se({props:{icon:"eos-icons:loading",height:"50"}}),{c(){e=E("div"),de(n.$$.fragment),S(e,"class","loading svelte-10gxpzb")},m(r,o){j(r,e,o),ue(n,e,null),i=!0},p:ge,i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&N(e),fe(n)}}}function K_(t){let e,n=t[23].templateTitle+"",i;return{c(){e=E("h3"),i=we(n),S(e,"class","template-title svelte-10gxpzb")},m(r,o){j(r,e,o),k(e,i)},p(r,o){o&1&&n!==(n=r[23].templateTitle+"")&&He(i,n)},d(r){r&&N(e)}}}function J_(t){let e,n,i,r,o,h,a;function s(){return t[16](t[25],t[28])}return{c(){e=E("button"),n=E("img"),o=V(),Xe(n.src,i=t[26].url)||S(n,"src",i),S(n,"alt",r=`${t[23].name} thumbnail ${t[28]+1}`),S(n,"class","svelte-10gxpzb"),S(e,"type","button"),S(e,"class","svelte-10gxpzb")},m(c,f){j(c,e,f),k(e,n),k(e,o),h||(a=Q(e,"click",s),h=!0)},p(c,f){t=c,f&1&&!Xe(n.src,i=t[26].url)&&S(n,"src",i),f&1&&r!==(r=`${t[23].name} thumbnail ${t[28]+1}`)&&S(n,"alt",r)},d(c){c&&N(e),h=!1,a()}}}function Z_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;function p(){return t[15](t[23])}let m=t[23].templateTitle&&K_(t),g=Me(t[23].thumbnails),v=[];for(let _=0;_<g.length;_+=1)v[_]=J_(q_(t,g,_));return{c(){e=E("div"),n=E("div"),i=E("button"),r=E("img"),a=V(),s=E("div"),m&&m.c(),c=V(),f=E("div");for(let _=0;_<v.length;_+=1)v[_].c();l=V(),Xe(r.src,o=t[23].thumbnails[t[1][t[25]]].url)||S(r,"src",o),S(r,"alt",h=t[23].name),S(r,"class","svelte-10gxpzb"),S(i,"type","button"),S(i,"class","svelte-10gxpzb"),S(n,"class","main-image svelte-10gxpzb"),mt(n,"height",t[4]),S(f,"class","thumbnails svelte-10gxpzb"),S(s,"class","card-body svelte-10gxpzb"),S(e,"class","template-card svelte-10gxpzb")},m(_,b){j(_,e,b),k(e,n),k(n,i),k(i,r),k(e,a),k(e,s),m&&m.m(s,null),k(s,c),k(s,f);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(f,null);k(e,l),u||(d=Q(i,"click",p),u=!0)},p(_,b){if(t=_,b&3&&!Xe(r.src,o=t[23].thumbnails[t[1][t[25]]].url)&&S(r,"src",o),b&1&&h!==(h=t[23].name)&&S(r,"alt",h),b&16&&mt(n,"height",t[4]),t[23].templateTitle?m?m.p(t,b):(m=K_(t),m.c(),m.m(s,c)):m&&(m.d(1),m=null),b&129){g=Me(t[23].thumbnails);let y;for(y=0;y<g.length;y+=1){const C=q_(t,g,y);v[y]?v[y].p(C,b):(v[y]=J_(C),v[y].c(),v[y].m(f,null))}for(;y<v.length;y+=1)v[y].d(1);v.length=g.length}},d(_){_&&N(e),m&&m.d(),Dt(v,_),u=!1,d()}}}function q4(t){let e,n,i,r;const o=[G4,$4,X4],h=[];function a(s,c){return s[2]?0:s[0].length?1:2}return e=a(t),n=h[e]=o[e](t),{c(){n.c(),i=et()},m(s,c){h[e].m(s,c),j(s,i,c),r=!0},p(s,[c]){let f=e;e=a(s),e===f?h[e].p(s,c):(ke(),H(h[f],1,1,()=>{h[f]=null}),Oe(),n=h[e],n?n.p(s,c):(n=h[e]=o[e](s),n.c()),R(n,1),n.m(i.parentNode,i))},i(s){r||(R(n),r=!0)},o(s){H(n),r=!1},d(s){s&&N(i),h[e].d(s)}}}function K4(t,e,n){let i,r,{handleClick:o=()=>{}}=e,{editorProductLink:h=""}=e,a=[],s={},c=!0,f=0,l,u=1,d;async function p(M){n(2,c=!0);const{data:Y,error:U}=await ZT(M);if(U){console.log({error:U}),n(2,c=!1);return}n(0,a=Y.templateDatas),n(1,s=a.reduce((K,q,B)=>(K[B]=0,K),{})),a!=null&&a.length&&n(0,a=a.sort((K,q)=>new Date(K.templateSort)-new Date(q.templateSort))),console.log({templates:a}),n(2,c=!1)}ki(async()=>{await p(h),g(),v(),window.addEventListener("resize",m)});function m(){g(),v()}function g(){if(l){const M=l.offsetWidth;n(14,u=Math.floor(M/320))}}function v(){const M=window.innerWidth;M<640?n(4,d="200px"):M<1024?n(4,d="250px"):n(4,d="300px")}function _(M,Y){n(1,s[M]=Y,s),n(1,s)}function b(M){o(M)}function y(){f<a.length-u&&(n(13,f++,f),w())}function C(){f>0&&(n(13,f--,f),w())}function w(){l&&n(3,l.style.transform=`translateX(-${f*320}px)`,l)}const T=M=>b(M.uuid),O=(M,Y)=>_(M,Y);function A(M){nt[M?"unshift":"push"](()=>{l=M,n(3,l)})}return t.$$set=M=>{"handleClick"in M&&n(11,o=M.handleClick),"editorProductLink"in M&&n(12,h=M.editorProductLink)},t.$$.update=()=>{t.$$.dirty&24577&&n(6,i=f>=a.length-u),t.$$.dirty&8192&&n(5,r=f===0)},[a,s,c,l,d,r,i,_,b,y,C,o,h,f,u,T,O,A]}class J4 extends qe{constructor(e){super(),Ge(this,e,K4,q4,Ve,{handleClick:11,editorProductLink:12})}}function Q_(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C;return a=new Se({props:{icon:"uil:times",color:"#FFFFFF",height:"30"}}),{c(){e=E("div"),n=E("div"),i=E("h2"),r=E("span"),r.textContent="템플릿 정보 입력",o=V(),h=E("button"),de(a.$$.fragment),s=V(),c=E("div"),f=E("input"),l=V(),u=E("input"),d=V(),p=E("div"),m=E("button"),m.textContent="디자인 저장",g=V(),v=E("button"),v.textContent="취소",S(r,"class","font-semibold"),S(h,"class","absolute right-2"),S(i,"class","primary-bg rounded p-3 text-center relative items-center flex"),S(f,"class","input w-full"),S(f,"type","text"),S(f,"placeholder","템플릿 이름을 입력해주세요."),S(u,"class","input w-full"),S(u,"type","text"),S(u,"placeholder","키워드/태그 ( 콤마, 또는 스페이스로 구분)"),S(c,"class","flex flex-col gap-3"),S(m,"type","button"),S(m,"class","btn primary-btn"),S(v,"class","btn secondary-btn"),S(p,"class","mt-3 flex justify-center gap-3"),S(n,"class","flex flex-col max-h-[90vh] w-full max-w-[400px] bg-white rounded-lg p-3"),S(e,"role","dialog"),S(e,"class","fixed top-0 bottom-0 right-0 left-0 flex justify-center items-center z-[9999]")},m(w,T){j(w,e,T),k(e,n),k(n,i),k(i,r),k(i,o),k(i,h),ue(a,h,null),k(n,s),k(n,c),k(c,f),Pe(f,t[1]),k(c,l),k(c,u),Pe(u,t[2]),k(n,d),k(n,p),k(p,m),k(p,g),k(p,v),b=!0,y||(C=[Q(h,"click",fn),Q(f,"input",t[8]),Q(f,"change",t[9]),Q(u,"input",t[10]),Q(u,"change",t[11]),Q(m,"click",t[12]),Q(v,"click",fn),Q(e,"introstart",t[6]),Q(e,"outroend",t[7])],y=!0)},p(w,T){T&2&&f.value!==w[1]&&Pe(f,w[1]),T&4&&u.value!==w[2]&&Pe(u,w[2])},i(w){b||(R(a.$$.fragment,w),w&&Ut(()=>{b&&(_||(_=Yt(e,wi,{y:50},!0)),_.run(1))}),b=!0)},o(w){H(a.$$.fragment,w),w&&(_||(_=Yt(e,wi,{y:50},!1)),_.run(0)),b=!1},d(w){w&&N(e),fe(a),w&&_&&_.end(),y=!1,We(C)}}}function Z4(t){let e,n,i=t[0]&&Q_(t);return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&R(i,1)):(i=Q_(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function Q4(t,e,n){let i;je(t,Re,v=>n(13,i=v));let{isOpen:r}=e,{handleAddEditorData:o}=e,h="",a="";function s(){ye(Re,i.templateTitle=h,i),ye(Re,i.templateKeyword=a,i)}function c(){o(),fn()}function f(v){bi.call(this,t,v)}function l(v){bi.call(this,t,v)}function u(){h=this.value,n(1,h)}const d=()=>s();function p(){a=this.value,n(2,a)}const m=()=>s(),g=()=>c();return t.$$set=v=>{"isOpen"in v&&n(0,r=v.isOpen),"handleAddEditorData"in v&&n(5,o=v.handleAddEditorData)},[r,h,a,s,c,o,f,l,u,d,p,m,g]}class eU extends qe{constructor(e){super(),Ge(this,e,Q4,Z4,Ve,{isOpen:0,handleAddEditorData:5})}}function ey(t,e,n){const i=t.slice();return i[65]=e[n],i}function ty(t){let e,n,i,r,o,h,a,s,c,f,l,u,d,p,m,g,v,_,b,y,C=t[10].length+"",w,T,O,A,M,Y,U,K,q,B,W,ee,ne,x,P,L=t[0],I,Z,F,D,X,J,re,te,$,ae,pe,z,G,oe,se,ie,he,_e,Ie,Te,le,Ee,Fe,Ue,lt,tt,bt=Me(t[13]),Ke=[];for(let xe=0;xe<bt.length;xe+=1)Ke[xe]=ny(ey(t,bt,xe));function Mn(xe,Gt){var si,is;return(is=(si=xe[11])==null?void 0:si.image)!=null&&is.url?nU:tU}let In=Mn(t),ce=In(t);p=new Se({props:{icon:"icon-park-outline:preview-open",height:"18"}}),_=new Se({props:{icon:"uil:cart",height:"18"}});function Ae(xe,Gt){return xe[15]==="design"?rU:iU}let ot=Ae(t)(t);K=new LF({}),W=new Se({props:{icon:"gg:log-off",height:"20"}});let dt=ry(t);function Mt(xe){t[27](xe)}let Tt={};t[0]!==void 0&&(Tt.printKey=t[0]),Z=new JR({props:Tt}),nt.push(()=>xt(Z,"printKey",Mt));const ns=[oU,sU],Rn=[];function Ad(xe,Gt){return xe[5]?0:1}te=Ad(t),$=Rn[te]=ns[te](t),z=new BF({}),ie=new Se({props:{icon:"fa6-solid:plus"}});let Ai=t[15]!=="design"&&aU(t);le=new aN({});let $t=t[12].options&&!t[9].currentOption&&sy(t);return{c(){e=E("div");for(let xe=0;xe<Ke.length;xe+=1)Ke[xe].c();n=V(),i=E("div"),r=E("div"),o=E("div"),h=E("div"),ce.c(),a=V(),s=E("div"),c=V(),f=E("div"),l=E("button"),l.textContent="디자인저장",u=V(),d=E("button"),de(p.$$.fragment),m=we(`\r
                미리보기`),g=V(),v=E("button"),de(_.$$.fragment),b=V(),y=E("div"),w=we(C),T=V(),O=E("span"),ot.c(),A=V(),M=E("div"),Y=E("div"),U=E("div"),de(K.$$.fragment),q=V(),B=E("button"),de(W.$$.fragment),ee=V(),ne=E("span"),ne.textContent="나가기",x=V(),P=E("div"),dt.c(),I=V(),de(Z.$$.fragment),D=V(),X=E("div"),J=E("div"),re=E("button"),$.c(),ae=V(),pe=E("div"),de(z.$$.fragment),G=V(),oe=E("div"),se=E("button"),de(ie.$$.fragment),he=we(`\r
                      옵션/디자인 변경`),_e=V(),Ai&&Ai.c(),Ie=V(),Te=E("div"),de(le.$$.fragment),Fe=V(),$t&&$t.c(),mt(e,"font-size","0.1px"),mt(e,"height","0px"),mt(e,"color","#FFFFFF "),mt(e,"overflow","hidden"),S(s,"class","md:hidden"),S(l,"type","button"),S(l,"class","btn btn-sm md:btn-md primary-btn"),S(d,"type","button"),S(d,"class","btn btn-sm md:btn-md white-btn"),S(y,"class","rounded-full border bg-white px-1 absolute left-8"),S(O,"class","ml-3"),S(v,"type","button"),S(v,"class","btn btn-sm secondary-btn relative gap-0"),S(f,"class","flex items-center gap-3"),S(h,"class","flex justify-between items-center p-4 bg-white h-16 border-b border-b-gray-300"),S(U,"class","flex flex-col"),S(ne,"class","whitespace-nowrap text-2xs hidden md:block"),S(B,"type","button"),S(B,"class","flex bg-white flex-col items-center border-t py-3 gap-2 w-full text-gray-700 hover:bg-gray-100 rounded"),S(Y,"class","w-[50px] md:w-[80px] flex flex-col px-1 z-40 h-full justify-between"),S(P,"class","flex-1 bg-gray-200 flex items-center justify-center h-full w-full rounded border relative"),S(re,"type","button"),S(re,"class","border border-r-0 bg-white py-5 px-1 rounded-lg rounded-r-none"),S(J,"class","absolute -left-[22px] py-3 top-1/2 transform -translate-y-50 md:hidden"),S(se,"type","button"),S(se,"class","btn primary-btn w-full"),S(oe,"class","mt-3"),S(Te,"class","mt-3"),S(X,"class",Ee="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(t[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"),S(M,"class","flex-1 flex mt-2 relative"),S(o,"class","flex-1 flex flex-col"),S(r,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-hidden"),S(i,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[1000] left-0 top-0")},m(xe,Gt){j(xe,e,Gt);for(let si=0;si<Ke.length;si+=1)Ke[si]&&Ke[si].m(e,null);j(xe,n,Gt),j(xe,i,Gt),k(i,r),k(r,o),k(o,h),ce.m(h,null),k(h,a),k(h,s),k(h,c),k(h,f),k(f,l),k(f,u),k(f,d),ue(p,d,null),k(d,m),k(f,g),k(f,v),ue(_,v,null),k(v,b),k(v,y),k(y,w),k(v,T),k(v,O),ot.m(O,null),k(o,A),k(o,M),k(M,Y),k(Y,U),ue(K,U,null),k(Y,q),k(Y,B),ue(W,B,null),k(B,ee),k(B,ne),k(M,x),k(M,P),dt.m(P,null),k(P,I),ue(Z,P,null),k(M,D),k(M,X),k(X,J),k(J,re),Rn[te].m(re,null),k(X,ae),k(X,pe),ue(z,pe,null),k(X,G),k(X,oe),k(oe,se),ue(ie,se,null),k(se,he),k(oe,_e),Ai&&Ai.m(oe,null),k(X,Ie),k(X,Te),ue(le,Te,null),k(r,Fe),$t&&$t.m(r,null),Ue=!0,lt||(tt=[Q(l,"click",t[23]),Q(d,"click",t[24]),Q(v,"click",t[25]),Q(B,"click",t[26]),Q(re,"click",t[28]),Q(se,"click",t[29])],lt=!0)},p(xe,Gt){if(Gt[0]&8192){bt=Me(xe[13]);let Fn;for(Fn=0;Fn<bt.length;Fn+=1){const Pd=ey(xe,bt,Fn);Ke[Fn]?Ke[Fn].p(Pd,Gt):(Ke[Fn]=ny(Pd),Ke[Fn].c(),Ke[Fn].m(e,null))}for(;Fn<Ke.length;Fn+=1)Ke[Fn].d(1);Ke.length=bt.length}In===(In=Mn(xe))&&ce?ce.p(xe,Gt):(ce.d(1),ce=In(xe),ce&&(ce.c(),ce.m(h,a))),(!Ue||Gt[0]&1024)&&C!==(C=xe[10].length+"")&&He(w,C),Gt[0]&1&&Ve(L,L=xe[0])?(ke(),H(dt,1,1,ge),Oe(),dt=ry(xe),dt.c(),R(dt,1),dt.m(P,I)):dt.p(xe,Gt);const si={};!F&&Gt[0]&1&&(F=!0,si.printKey=xe[0],Wt(()=>F=!1)),Z.$set(si);let is=te;te=Ad(xe),te!==is&&(ke(),H(Rn[is],1,1,()=>{Rn[is]=null}),Oe(),$=Rn[te],$||($=Rn[te]=ns[te](xe),$.c()),R($,1),$.m(re,null)),xe[15]!=="design"&&Ai.p(xe,Gt),(!Ue||Gt[0]&32&&Ee!==(Ee="w-[300px] sm:w-[400px] flex flex-col px-3 absolute md:static "+(xe[5]?"-right-[280px] sm:-right-[380px]":"right-0")+" top-0 bg-white h-full border-l md:border-l-0 transition-all duration-500 ease-in-out z-50 svelte-ezfnmf"))&&S(X,"class",Ee),xe[12].options&&!xe[9].currentOption?$t?($t.p(xe,Gt),Gt[0]&4608&&R($t,1)):($t=sy(xe),$t.c(),R($t,1),$t.m(r,null)):$t&&(ke(),H($t,1,1,()=>{$t=null}),Oe())},i(xe){Ue||(R(p.$$.fragment,xe),R(_.$$.fragment,xe),R(K.$$.fragment,xe),R(W.$$.fragment,xe),R(dt),R(Z.$$.fragment,xe),R($),R(z.$$.fragment,xe),R(ie.$$.fragment,xe),R(Ai),R(le.$$.fragment,xe),R($t),Ue=!0)},o(xe){H(p.$$.fragment,xe),H(_.$$.fragment,xe),H(K.$$.fragment,xe),H(W.$$.fragment,xe),H(dt),H(Z.$$.fragment,xe),H($),H(z.$$.fragment,xe),H(ie.$$.fragment,xe),H(Ai),H(le.$$.fragment,xe),H($t),Ue=!1},d(xe){xe&&(N(e),N(n),N(i)),Dt(Ke,xe),ce.d(),fe(p),fe(_),ot.d(),fe(K),fe(W),dt.d(xe),fe(Z),Rn[te].d(),fe(z),fe(ie),Ai&&Ai.d(),fe(le),$t&&$t.d(),lt=!1,We(tt)}}}function ny(t){let e,n,i;return{c(){e=E("div"),n=we("podiz"),S(e,"style",i=`font-family:${t[65].fontFamily}`)},m(r,o){j(r,e,o),k(e,n)},p(r,o){o[0]&8192&&i!==(i=`font-family:${r[65].fontFamily}`)&&S(e,"style",i)},d(r){r&&N(e)}}}function tU(t){let e;return{c(){e=E("div"),e.textContent="[LOGO]",S(e,"class","hidden md:block")},m(n,i){j(n,e,i)},p:ge,d(n){n&&N(e)}}}function nU(t){let e,n,i,r;return{c(){e=E("div"),n=E("img"),Xe(n.src,i=t[11].image.url)||S(n,"src",i),S(n,"alt",r=t[11].shopName),S(n,"class","max-h-12 object-contain"),S(e,"class","hidden md:block")},m(o,h){j(o,e,h),k(e,n)},p(o,h){h[0]&2048&&!Xe(n.src,i=o[11].image.url)&&S(n,"src",i),h[0]&2048&&r!==(r=o[11].shopName)&&S(n,"alt",r)},d(o){o&&N(e)}}}function iU(t){let e;return{c(){e=we("주문하기")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function rU(t){let e;return{c(){e=we("디자인 등록")},m(n,i){j(n,e,i)},d(n){n&&N(e)}}}function iy(t){let e,n;return e=new GR({}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function ry(t){let e,n,i=t[9].prints[t[14]]&&iy();return{c(){i&&i.c(),e=et()},m(r,o){i&&i.m(r,o),j(r,e,o),n=!0},p(r,o){r[9].prints[r[14]]?i?o[0]&16896&&R(i,1):(i=iy(),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(ke(),H(i,1,1,()=>{i=null}),Oe())},i(r){n||(R(i),n=!0)},o(r){H(i),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function sU(t){let e,n;return e=new Se({props:{icon:"mingcute:right-fill"}}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function oU(t){let e,n;return e=new Se({props:{icon:"mingcute:left-fill"}}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function aU(t){let e,n,i,r,o,h;return n=new Se({props:{icon:"fa-solid:exchange-alt"}}),{c(){e=E("button"),de(n.$$.fragment),i=we(`\r
                      상품변경`),S(e,"type","button"),S(e,"class","btn dark-btn w-full mt-2")},m(a,s){j(a,e,s),ue(n,e,null),k(e,i),r=!0,o||(h=Q(e,"click",t[30]),o=!0)},p:ge,i(a){r||(R(n.$$.fragment,a),r=!0)},o(a){H(n.$$.fragment,a),r=!1},d(a){a&&N(e),fe(n),o=!1,h()}}}function sy(t){let e,n,i,r;function o(s){t[31](s)}function h(s){t[32](s)}let a={loadPublish:t[17]};return t[6]!==void 0&&(a.publishId=t[6]),t[3]!==void 0&&(a.runEditor=t[3]),e=new IF({props:a}),nt.push(()=>xt(e,"publishId",o)),nt.push(()=>xt(e,"runEditor",h)),{c(){de(e.$$.fragment)},m(s,c){ue(e,s,c),r=!0},p(s,c){const f={};!n&&c[0]&64&&(n=!0,f.publishId=s[6],Wt(()=>n=!1)),!i&&c[0]&8&&(i=!0,f.runEditor=s[3],Wt(()=>i=!1)),e.$set(f)},i(s){r||(R(e.$$.fragment,s),r=!0)},o(s){H(e.$$.fragment,s),r=!1},d(s){fe(e,s)}}}function oy(t){let e,n;return e=new TN({props:{previews:t[7],mode:t[15]}}),{c(){de(e.$$.fragment)},m(i,r){ue(e,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.previews=i[7]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){fe(e,i)}}}function ay(t){let e,n,i,r,o,h,a,s,c,f,l,u,d;return s=new Se({props:{icon:"lets-icons:close-round",height:"30"}}),f=new F4({props:{user:t[8],handleClick:t[16]}}),{c(){e=E("div"),n=E("div"),i=E("div"),r=E("h1"),o=E("span"),o.textContent="디자인보관함",h=V(),a=E("button"),de(s.$$.fragment),c=V(),de(f.$$.fragment),S(a,"type","button"),S(a,"class","btn white-btn"),S(r,"class","font-semibold text-lg border-b py-3 flex justify-between"),S(i,"class","flex-1 flex flex-col p-5"),S(n,"class","flex h-full w-full max-h-[98%] max-w-[98%] grow flex-col relative bg-white rounded-lg overflow-y-auto"),S(e,"class","flex flex-col h-screen w-full overflow-hidden justify-center items-center bg-black/40 fixed z-[999] left-0 top-0")},m(p,m){j(p,e,m),k(e,n),k(n,i),k(i,r),k(r,o),k(r,h),k(r,a),ue(s,a,null),k(i,c),ue(f,i,null),l=!0,u||(d=Q(a,"click",t[33]),u=!0)},p(p,m){const g={};m[0]&256&&(g.user=p[8]),f.$set(g)},i(p){l||(R(s.$$.fragment,p),R(f.$$.fragment,p),l=!0)},o(p){H(s.$$.fragment,p),H(f.$$.fragment,p),l=!1},d(p){p&&N(e),fe(s),fe(f),u=!1,d()}}}function lU(t){let e,n,i,r,o;return{c(){e=E("div"),S(e,"slot","backdrop"),S(e,"class","backdrop svelte-ezfnmf")},m(h,a){j(h,e,a),i=!0,r||(o=Q(e,"click",fn),r=!0)},p:ge,i(h){i||(h&&Ut(()=>{i&&(n||(n=Yt(e,Wd,{},!0)),n.run(1))}),i=!0)},o(h){h&&(n||(n=Yt(e,Wd,{},!1)),n.run(0)),i=!1},d(h){h&&N(e),h&&n&&n.end(),r=!1,o()}}}function ly(t){let e,n,i;function r(h){t[34](h)}let o={isProgress:!0};return t[2]!==void 0&&(o.progress=t[2]),e=new Lb({props:o}),nt.push(()=>xt(e,"progress",r)),{c(){de(e.$$.fragment)},m(h,a){ue(e,h,a),i=!0},p(h,a){const s={};!n&&a[0]&4&&(n=!0,s.progress=h[2],Wt(()=>n=!1)),e.$set(s)},i(h){i||(R(e.$$.fragment,h),i=!0)},o(h){H(e.$$.fragment,h),i=!1},d(h){fe(e,h)}}}function cU(t){let e,n,i,r,o,h,a,s=t[3]&&ty(t),c=t[7]&&oy(t),f=t[4]&&ay(t);r=new OC({props:{$$slots:{backdrop:[lU]},$$scope:{ctx:t}}});let l=t[1]&&ly(t);return{c(){s&&s.c(),e=V(),c&&c.c(),n=V(),f&&f.c(),i=V(),de(r.$$.fragment),o=V(),l&&l.c(),h=et()},m(u,d){s&&s.m(u,d),j(u,e,d),c&&c.m(u,d),j(u,n,d),f&&f.m(u,d),j(u,i,d),ue(r,u,d),j(u,o,d),l&&l.m(u,d),j(u,h,d),a=!0},p(u,d){u[3]?s?(s.p(u,d),d[0]&8&&R(s,1)):(s=ty(u),s.c(),R(s,1),s.m(e.parentNode,e)):s&&(ke(),H(s,1,1,()=>{s=null}),Oe()),u[7]?c?(c.p(u,d),d[0]&128&&R(c,1)):(c=oy(u),c.c(),R(c,1),c.m(n.parentNode,n)):c&&(ke(),H(c,1,1,()=>{c=null}),Oe()),u[4]?f?(f.p(u,d),d[0]&16&&R(f,1)):(f=ay(u),f.c(),R(f,1),f.m(i.parentNode,i)):f&&(ke(),H(f,1,1,()=>{f=null}),Oe());const p={};d[2]&64&&(p.$$scope={dirty:d,ctx:u}),r.$set(p),u[1]?l?(l.p(u,d),d[0]&2&&R(l,1)):(l=ly(u),l.c(),R(l,1),l.m(h.parentNode,h)):l&&(ke(),H(l,1,1,()=>{l=null}),Oe())},i(u){a||(R(s),R(c),R(f),R(r.$$.fragment,u),R(l),a=!0)},o(u){H(s),H(c),H(f),H(r.$$.fragment,u),H(l),a=!1},d(u){u&&(N(e),N(n),N(i),N(o),N(h)),s&&s.d(u),c&&c.d(u),f&&f.d(u),fe(r,u),l&&l.d(u)}}}function cy(t,e){for(const[n,i]of t.entries())for(const[r,o]of e[n].canvasJSON.objects.entries())(o.objType==="clipart"||o.objType==="text"||o.objType==="shape"||o.objType==="draw"||o.objType==="upload")&&t[n].canvasJSON.objects.push(o);return t}function uy(t){console.log({e:t})}function uU(t,e,n){let i,r,o,h,a,s,c,f,l,u;je(t,Re,ce=>n(9,i=ce)),je(t,ui,ce=>n(10,r=ce)),je(t,co,ce=>n(11,o=ce)),je(t,Io,ce=>n(42,h=ce)),je(t,Pi,ce=>n(12,a=ce)),je(t,vp,ce=>n(43,s=ce)),je(t,Yo,ce=>n(13,c=ce)),je(t,Fl,ce=>n(44,f=ce)),je(t,zo,ce=>n(45,l=ce)),je(t,Zo,ce=>n(14,u=ce)),ye(Re,i.prints=[],i);let d=1,p=!1,m=0,g=!1,v=!1,_=!1,b=null,y=null,C=null,w=null,T=null,O=null,A="",{uuid:M,shopid:Y,provider:U,productno:K,previewclass:q,previewitem:B,mode:W}=Rx();U&&T1("provider",U),ki(async()=>{if(W==="design"){const Ye=document.getElementById("podiz-button");if(Ye){const ot=document.createElement("button");ot.textContent="상품만들기",ot.addEventListener("click",()=>ee()),ot.classList.add("podiz-run-btn"),Ye.appendChild(ot)}else window.runPodizEditor=function(ot=null){ee(ot)};return}n(8,w=await Ux());const ce=document.getElementById("podiz-member-design");if(ce&&ce.addEventListener("click",_e),q){n(7,C=Bx(q,B));return}if(W==="product"){Fx(),await x();const Ye=document.createElement("button");Ye.textContent="상품만들기",Ye.addEventListener("click",()=>ee());const ot=document.getElementById("podiz-button");ot&&(Ye.classList.add("podiz-run-btn"),ot.appendChild(Ye)),document.getElementById("podiz-template")&&new J4({target:document.getElementById("podiz-template"),props:{editorProductLink:y.editorProductLink,handleClick:ee}})}const Ae=document.getElementById("podiz-data-uuid");return Ae&&(T=Ae.value),()=>{ce&&ce.removeEventListener("click",_e)}});async function ee(ce=null){if(n(1,p=!0),n(4,v=!1),ce?T=ce:(T=null,O=null),T){const{data:Ae,error:Ye}=await Jy(T);if(Ye){console.log(Ye);return}Ae&&(K=Ae.cafe24Product.productno,U=Ae.cafe24Product?"cafe24":null,Y=Ae.publish.shop,O=Ae,console.log({loadEditorData:O}))}if(console.log({uuid:ce}),b||await x(),await ne(),Y&&await QT(Y),U==="cafe24"&&(ye(Pi,a.options={},a),ye(Pi,a.productno=K,a),W==="product")){const Ae=await wf(K),Ye=await mg(K);ye(Pi,a.options=Ae.options,a),ye(Pi,a.product=Ye.product,a)}n(1,p=!1),n(3,g=!0)}async function ne(){var Ye;n(1,p=!0);const{data:ce,error:Ae}=await YT(b);if(Ae){console.error(Ae);return}ye(Re,i.id=null,i),ye(Re,i.scenes=ce.editor.scenes,i),ye(Re,i.product=ce.editor.product,i),ye(Re,i.currentOption=O?O.currentOption:null,i),ye(Re,i.count=i.product.minCnt?i.product.minCnt:1,i),ye(Re,i.uuid=xr(),i),ye(Re,i.uploads=ce.uploads?ce.uploads:[],i),ye(Re,i.publish=ce.id,i),ye(Re,i.cafe24MallId=w?w.cafe24MallId:null,i),ye(Re,i.cafe24MemberId=w?w.cafe24MemberId:null,i),ye(Re,i.cafe24ShopNo=w?w.cafe24ShopNo:null,i),ye(Re,i.cafe24UserType=w?w.cafe24UserType:null,i),ye(Re,i.templateTitle=O?O.templateTitle:"",i),ye(Re,i.templateKeyword=O?O.templateKeyword:"",i),ye(Re,i.cafe24Product=a,i),await L(i.product.shop),await k1(),ye(Re,i.prints=ce.editor.prints,i),O&&(O.uploads&&(ye(Re,i.uploads=O.uploads,i),ye(zo,l=O.uploads,l)),ye(Re,i.prints=cy(i.prints,O.prints),i)),s&&ye(Re,i.prints=cy(i.prints,s),i),(Ye=i.scenes)!=null&&Ye.length&&P(),n(0,d++,d),n(1,p=!1)}async function x(){const{data:ce,error:Ae}=await KT({provider:U,productno:K,shopid:Y});if(!ce.length||Ae){alert("잘못된 연결이거나 연결에 오류가있습니다."),n(3,g=!1);return}ye(Fl,f=ce[0],f);const Ye=f.linkOptions;Ye.length&&(i!=null&&i.currentOption||(n(6,b=Ye[0].publish),y=Ye[0]))}async function P(){ye(Re,i.composites=[],i);for(const ce of i.prints)if(ce.id){const Ae=await qT(ce.id);Ae.data&&ye(Re,i.composites=[...i.composites,Ae.data],i)}}async function L(ce){try{const Ae=await XT(ce);Ae.data&&ye(Yo,c=Ae.data.defaultFonts,c);const Ye=await VT(ce);Ye.data&&ye(Yo,c=[...c,...Ye.data],c);const ot=c.map(Tt=>Tt.css).join(`
`),dt=document.createElement("style");dt.textContent=ot,document.head.appendChild(dt),await document.fonts.ready;const Mt=c.map(Tt=>Tt.fontFamily&&Tt.url?new FontFace(Tt.fontFamily,`url(${Tt.url})`).load().catch(ns=>(console.warn(`Failed to load font: ${Tt.fontFamily}`,ns),null)):Promise.resolve());await Promise.all(Mt),document.dispatchEvent(new Event("fontsLoaded"))}catch(Ae){console.error("Error loading fonts:",Ae)}}async function I(){var ce;try{n(1,p=!0),n(2,m=1);const Ae=i.prints;for(const[Ye,ot]of Ae.entries())if(n(2,m=100/Ae.length*(Ye+1)),ot.id&&ot.imageDataURL&&ot.isChange){const dt=await wx(i,Ye,i.currentOption.colorCode);X(dt.scenes),(ce=dt.scenes)!=null&&ce.length&&ye(Re,i.thumbnails=dt.scenes.map(Mt=>Mt.compositeThumbnail).filter(Mt=>Mt),i),ot.isChange=!1}}catch(Ae){console.log({error:Ae})}finally{n(1,p=!1)}}async function Z(){await I(),wo(AF,{isOpen:!0,message:"미리보기"})}function F(){wo(mN,{isOpen:!0,message:"주문하기",changeEditorDataIndex:G,sendOrder:se,mode:W})}async function D(){await pe(),F()}function X(ce){console.log({compositeScenes:ce});for(const[Ae,Ye]of ce.entries())ye(Re,i.scenes[Ae].composites=Ye.composites,i),Ye.compositeThumbnail&&ye(Re,i.scenes[Ae].compositeThumbnail=Ye.compositeThumbnail,i)}async function J(ce=!0){if(fC(),console.log({$editorData:i}),console.log({mode:W}),W==="design"&&!i.templateTitle){wo(eU,{isOpen:!0,handleAddEditorData:J});return}await I(),await he();const Ae=JSON.stringify(i);h!=null&&h>=0&&h<r.length?ye(ui,r[h]=JSON.parse(Ae),r):ye(ui,r=[...r,JSON.parse(Ae)],r),ce&&F()}async function re(){for(const ce of r){const{id:Ae}=await te(ce);ce.id=Ae}}async function te(ce){const Ae={id:ce.id?ce.id:null,uuid:ce.uuid,prints:ce.prints,uploads:ce.uploads,scenes:ce.scenes.map(dt=>{const{composites:Mt,...Tt}=dt;return Tt}),thumbnails:ce.thumbnails,printImages:ce.printImages,currentOption:ce.currentOption,provider:U,count:ce.count,publish:ce.publish,cafe24MallId:ce.cafe24MallId,cafe24ShopNo:ce.cafe24ShopNo,cafe24UserType:ce.cafe24UserType,cafe24MemberId:ce.cafe24MemberId,cafe24Product:ce.cafe24Product,printMemo:A,templateTitle:ce.templateTitle,templateKeyword:ce.templateKeyword};W==="design"&&(Ae.currentOption=null);const{data:Ye,error:ot}=await $T(Ae);if(ot){console.log(ot);return}return console.log("save data",Ye),Ye}async function $(){await pe(),ye(Io,h++,h),ye(Re,i.currentOption=null,i),i.prints.forEach(ce=>{ce.isChange!==void 0&&ce.isChange===!1&&(ce.isChange=!0)})}async function ae(){await pe(),ye(Io,h++,h),wo(V4,{isOpen:!0,changeProduct:z})}async function pe(){i.prints.filter(Ae=>Ae.isChange).length>=1&&(confirm("변경사항이 있습니다. 디자인 저장을 하지않으면 해당 옵션의 편집내용은 저장되지 않습니다. 저장하시겠습니까?")?await J(!1):console.log("사용자가 변경을 취소했습니다."))}async function z({product_no:ce}){O=null,K=ce,ye(vp,s=[...i.prints],s),ye(Pi,a.options={},a),ye(Pi,a.productno=K,a),await x(),await ne();const Ae=await wf(K),Ye=await mg(K);ye(Pi,a.options=Ae.options,a),ye(Pi,a.product=Ye.product,a)}function G(ce){ye(Io,h=ce,h);const Ae=JSON.stringify(r[ce]);ye(Re,i=JSON.parse(Ae),i),n(0,d++,d)}function oe(ce){A=ce,console.log({printMemo:A})}async function se(){if(o.usePrintMemo&&W!=="design"){fn(),wo(j4,{isOpen:!0,orderAction:ie,setPrintMemo:oe});return}ie()}async function ie(){n(1,p=!0);try{if(await re(),W==="design"){typeof podizCallBack=="function"&&podizCallBack(JSON.parse(JSON.stringify(r))),fn(),n(3,g=!1);return}await jx(),n(3,g=!1)}catch(ce){alert(ce)}finally{n(1,p=!1)}}async function he(){var dt;n(1,p=!0);const ce=i.prints.length+i.scenes.length;let Ae=0;n(2,m=0);const Ye=`editorData/${i.uuid}`,ot=i;ye(Re,i.printImages=[],i);for(let Mt=0;Mt<ot.prints.length;Mt++){const Tt=ot.prints[Mt];if(Tt.imageDataURL?Tt.imageDataURL.startsWith("data:image"):null){const Rn=await Ir(Tt.imageDataURL,`${Ye}/print_${Mt}.png`,uy,{extension:"png"});Tt.imageDataURL=Rn.url,i.printImages.push(Rn)}else i.printImages.push({url:Tt.imageDataURL});Ae++,n(2,m=Ae/ce*100)}for(let Mt=0;Mt<ot.scenes.length;Mt++){const Tt=ot.scenes[Mt];if((dt=Tt.compositeThumbnail)!=null&&dt.url?Tt.compositeThumbnail.url.startsWith("data:image"):null){const Rn=await Ir(Tt.compositeThumbnail.url,`${Ye}/scene_${Mt}.jpg`,uy,{extension:"jpg"});Tt.compositeThumbnail.url=Rn.url}Ae++,n(2,m=Ae/ce*100)}return ye(Re,i.thumbnails=ot.scenes.map(Mt=>Mt.compositeThumbnail).filter(Mt=>Mt),i),n(1,p=!1),i}function _e(){console.log("handleOpenMemberDesign"),n(4,v=!0)}Oi(()=>{delete window.runPodizEditor});const Ie=()=>J(),Te=()=>Z(),le=()=>D(),Ee=()=>n(3,g=!1);function Fe(ce){d=ce,n(0,d)}const Ue=()=>n(5,_=!_),lt=()=>$(),tt=()=>ae();function bt(ce){b=ce,n(6,b)}function Ke(ce){g=ce,n(3,g)}const Mn=()=>n(4,v=!1);function In(ce){m=ce,n(2,m)}return[d,p,m,g,v,_,b,C,w,i,r,o,a,c,u,W,ee,ne,Z,D,J,$,ae,Ie,Te,le,Ee,Fe,Ue,lt,tt,bt,Ke,Mn,In]}class fU extends qe{constructor(e){super(),Ge(this,e,uU,cU,Ve,{},null,[-1,-1,-1])}}let hU=document.getElementById("podiz-app");new fU({target:hU})});export default dU();
