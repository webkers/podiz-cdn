var _d=Object.defineProperty,bd=Object.defineProperties;var Cd=Object.getOwnPropertyDescriptors;var ts=Object.getOwnPropertySymbols;var vc=Object.prototype.hasOwnProperty,yc=Object.prototype.propertyIsEnumerable;var mc=(t,e,o)=>e in t?_d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,_t=(t,e)=>{for(var o in e||(e={}))vc.call(e,o)&&mc(t,o,e[o]);if(ts)for(var o of ts(e))yc.call(e,o)&&mc(t,o,e[o]);return t},ti=(t,e)=>bd(t,Cd(e));var _c=(t,e)=>{var o={};for(var f in t)vc.call(t,f)&&e.indexOf(f)<0&&(o[f]=t[f]);if(t!=null&&ts)for(var f of ts(t))e.indexOf(f)<0&&yc.call(t,f)&&(o[f]=t[f]);return o};function Fe(){}const fl=t=>t;function wd(t,e){for(const o in e)t[o]=e[o];return t}function Sd(t){return t&&typeof t=="object"&&typeof t.then=="function"}function $u(t){return t()}function bc(){return Object.create(null)}function Or(t){t.forEach($u)}function tr(t){return typeof t=="function"}function lr(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let rs;function ns(t,e){return rs||(rs=document.createElement("a")),rs.href=e,t===rs.href}function xd(t){return Object.keys(t).length===0}function Td(t,...e){if(t==null)return Fe;const o=t.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}function Fx(t,e,o){t.$$.on_destroy.push(Td(e,o))}function Fi(t,e,o,f){if(t){const p=Zu(t,e,o,f);return t[0](p)}}function Zu(t,e,o,f){return t[1]&&f?wd(o.ctx.slice(),t[1](f(e))):o.ctx}function Ri(t,e,o,f){if(t[2]&&f){const p=t[2](f(o));if(e.dirty===void 0)return p;if(typeof p=="object"){const m=[],b=Math.max(e.dirty.length,p.length);for(let h=0;h<b;h+=1)m[h]=e.dirty[h]|p[h];return m}return e.dirty|p}return e.dirty}function Mi(t,e,o,f,p,m){if(p){const b=Zu(e,o,f,m);t.p(b,p)}}function Ii(t){if(t.ctx.length>32){const e=[],o=t.ctx.length/32;for(let f=0;f<o;f++)e[f]=-1;return e}return-1}function Ht(t){return t==null?"":t}function Rx(t,e,o){return t.set(o),e}function ea(t){return t&&tr(t.destroy)?t.destroy:Fe}const ef=typeof window!="undefined";let tf=ef?()=>window.performance.now():()=>Date.now(),hl=ef?t=>requestAnimationFrame(t):Fe;const vn=new Set;function rf(t){vn.forEach(e=>{e.c(t)||(vn.delete(e),e.f())}),vn.size!==0&&hl(rf)}function nf(t){let e;return vn.size===0&&hl(rf),{promise:new Promise(o=>{vn.add(e={c:t,f:o})}),abort(){vn.delete(e)}}}function Ne(t,e){t.appendChild(e)}function sf(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ed(t){const e=De("style");return Od(sf(t),e),e.sheet}function Od(t,e){Ne(t.head||t,e)}function Xe(t,e,o){t.insertBefore(e,o||null)}function Be(t){t.parentNode.removeChild(t)}function Mx(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}function De(t){return document.createElement(t)}function Ix(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function pn(t){return document.createTextNode(t)}function rr(){return pn(" ")}function of(){return pn("")}function Ye(t,e,o,f){return t.addEventListener(e,o,f),()=>t.removeEventListener(e,o,f)}function Lx(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Bx(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function jx(t){return function(e){e.target===this&&t.call(this,e)}}function he(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function Nx(t,e,o){const f=new Set;for(let p=0;p<t.length;p+=1)t[p].checked&&f.add(t[p].__value);return o||f.delete(e),Array.from(f)}function Ux(t){return t===""?null:+t}function Ad(t){return Array.from(t.childNodes)}function Cc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Hx(t,e){t.value=e==null?"":e}function gr(t,e,o,f){o===null?t.style.removeProperty(e):t.style.setProperty(e,o,f?"important":"")}function Wx(t,e){for(let o=0;o<t.options.length;o+=1){const f=t.options[o];if(f.__value===e){f.selected=!0;return}}t.selectedIndex=-1}function zx(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let is;function Pd(){if(is===void 0){is=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{is=!0}}return is}function Xx(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const f=De("iframe");f.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),f.setAttribute("aria-hidden","true"),f.tabIndex=-1;const p=Pd();let m;return p?(f.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",m=Ye(window,"message",b=>{b.source===f.contentWindow&&e()})):(f.src="about:blank",f.onload=()=>{m=Ye(f.contentWindow,"resize",e)}),Ne(t,f),()=>{(p||m&&f.contentWindow)&&m(),Be(f)}}function Je(t,e,o){t.classList[o?"add":"remove"](e)}function af(t,e,o=!1){const f=document.createEvent("CustomEvent");return f.initCustomEvent(t,o,!1,e),f}const As=new Map;let Ps=0;function Dd(t){let e=5381,o=t.length;for(;o--;)e=(e<<5)-e^t.charCodeAt(o);return e>>>0}function kd(t,e){const o={stylesheet:Ed(e),rules:{}};return As.set(t,o),o}function Da(t,e,o,f,p,m,b,h=0){const i=16.666/f;let a=`{
`;for(let l=0;l<=1;l+=i){const g=e+(o-e)*m(l);a+=l*100+`%{${b(g,1-g)}}
`}const c=a+`100% {${b(o,1-o)}}
}`,n=`__svelte_${Dd(c)}_${h}`,s=sf(t),{stylesheet:r,rules:u}=As.get(s)||kd(s,t);u[n]||(u[n]=!0,r.insertRule(`@keyframes ${n} ${c}`,r.cssRules.length));const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${n} ${f}ms linear ${p}ms 1 both`,Ps+=1,n}function lf(t,e){const o=(t.style.animation||"").split(", "),f=o.filter(e?m=>m.indexOf(e)<0:m=>m.indexOf("__svelte")===-1),p=o.length-f.length;p&&(t.style.animation=f.join(", "),Ps-=p,Ps||Fd())}function Fd(){hl(()=>{Ps||(As.forEach(t=>{const{stylesheet:e}=t;let o=e.cssRules.length;for(;o--;)e.deleteRule(o);t.rules={}}),As.clear())})}function Gx(t,e,o,f){if(!e)return Fe;const p=t.getBoundingClientRect();if(e.left===p.left&&e.right===p.right&&e.top===p.top&&e.bottom===p.bottom)return Fe;const{delay:m=0,duration:b=300,easing:h=fl,start:i=tf()+m,end:a=i+b,tick:c=Fe,css:n}=o(t,{from:e,to:p},f);let s=!0,r=!1,u;function d(){n&&(u=Da(t,0,1,b,m,h,n)),m||(r=!0)}function l(){n&&lf(t,u),s=!1}return nf(g=>{if(!r&&g>=i&&(r=!0),r&&g>=a&&(c(1,0),l()),!s)return!1;if(r){const v=g-i,_=0+1*h(v/b);c(_,1-_)}return!0}),d(),c(0,1),l}function Yx(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:o,height:f}=e,p=t.getBoundingClientRect();t.style.position="absolute",t.style.width=o,t.style.height=f,Rd(t,p)}}function Rd(t,e){const o=t.getBoundingClientRect();if(e.left!==o.left||e.top!==o.top){const f=getComputedStyle(t),p=f.transform==="none"?"":f.transform;t.style.transform=`${p} translate(${e.left-o.left}px, ${e.top-o.top}px)`}}let pi;function nr(t){pi=t}function Mn(){if(!pi)throw new Error("Function called outside component initialization");return pi}function dl(t){Mn().$$.on_mount.push(t)}function cf(t){Mn().$$.on_destroy.push(t)}function Li(){const t=Mn();return(e,o)=>{const f=t.$$.callbacks[e];if(f){const p=af(e,o);f.slice().forEach(m=>{m.call(t,p)})}}}function Md(t,e){Mn().$$.context.set(t,e)}function Vx(t){return Mn().$$.context.get(t)}function uf(t,e){const o=t.$$.callbacks[e.type];o&&o.slice().forEach(f=>f.call(this,e))}const ai=[],sr=[],ws=[],ka=[],ff=Promise.resolve();let Fa=!1;function hf(){Fa||(Fa=!0,ff.then(gl))}function wc(){return hf(),ff}function Tn(t){ws.push(t)}function qx(t){ka.push(t)}const ta=new Set;let ss=0;function gl(){const t=pi;do{for(;ss<ai.length;){const e=ai[ss];ss++,nr(e),Id(e.$$)}for(nr(null),ai.length=0,ss=0;sr.length;)sr.pop()();for(let e=0;e<ws.length;e+=1){const o=ws[e];ta.has(o)||(ta.add(o),o())}ws.length=0}while(ai.length);for(;ka.length;)ka.pop()();Fa=!1,ta.clear(),nr(t)}function Id(t){if(t.fragment!==null){t.update(),Or(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Tn)}}let ri;function Ld(){return ri||(ri=Promise.resolve(),ri.then(()=>{ri=null})),ri}function ra(t,e,o){t.dispatchEvent(af(`${e?"intro":"outro"}${o}`))}const Ss=new Set;let ir;function Rt(){ir={r:0,c:[],p:ir}}function Mt(){ir.r||Or(ir.c),ir=ir.p}function ye(t,e){t&&t.i&&(Ss.delete(t),t.i(e))}function Ee(t,e,o,f){if(t&&t.o){if(Ss.has(t))return;Ss.add(t),ir.c.push(()=>{Ss.delete(t),f&&(o&&t.d(1),f())}),t.o(e)}}const Bd={duration:0};function os(t,e,o,f){let p=e(t,o),m=f?0:1,b=null,h=null,i=null;function a(){i&&lf(t,i)}function c(s,r){const u=s.b-m;return r*=Math.abs(u),{a:m,b:s.b,d:u,duration:r,start:s.start,end:s.start+r,group:s.group}}function n(s){const{delay:r=0,duration:u=300,easing:d=fl,tick:l=Fe,css:g}=p||Bd,v={start:tf()+r,b:s};s||(v.group=ir,ir.r+=1),b||h?h=v:(g&&(a(),i=Da(t,m,s,u,r,d,g)),s&&l(0,1),b=c(v,u),Tn(()=>ra(t,s,"start")),nf(_=>{if(h&&_>h.start&&(b=c(h,u),h=null,ra(t,b.b,"start"),g&&(a(),i=Da(t,m,b.b,b.duration,0,d,p.css))),b){if(_>=b.end)l(m=b.b,1-m),ra(t,b.b,"end"),h||(b.b?a():--b.group.r||Or(b.group.c)),b=null;else if(_>=b.start){const y=_-b.start;m=b.a+b.d*d(y/b.duration),l(m,1-m)}}return!!(b||h)}))}return{run(s){tr(p)?Ld().then(()=>{p=p(),n(s)}):n(s)},end(){a(),b=h=null}}}function Kx(t,e){const o=e.token={};function f(p,m,b,h){if(e.token!==o)return;e.resolved=h;let i=e.ctx;b!==void 0&&(i=i.slice(),i[b]=h);const a=p&&(e.current=p)(i);let c=!1;e.block&&(e.blocks?e.blocks.forEach((n,s)=>{s!==m&&n&&(Rt(),Ee(n,1,1,()=>{e.blocks[s]===n&&(e.blocks[s]=null)}),Mt())}):e.block.d(1),a.c(),ye(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[m]=a),c&&gl()}if(Sd(t)){const p=Mn();if(t.then(m=>{nr(p),f(e.then,1,e.value,m),nr(null)},m=>{if(nr(p),f(e.catch,2,e.error,m),nr(null),!e.hasCatch)throw m}),e.current!==e.pending)return f(e.pending,0),!0}else{if(e.current!==e.then)return f(e.then,1,e.value,t),!0;e.resolved=t}}function Jx(t,e,o){const f=e.slice(),{resolved:p}=t;t.current===t.then&&(f[t.value]=p),t.current===t.catch&&(f[t.error]=p),t.block.p(f,o)}const jd=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Qx(t,e){t.d(1),e.delete(t.key)}function df(t,e){Ee(t,1,1,()=>{e.delete(t.key)})}function $x(t,e){t.f(),df(t,e)}function Nd(t,e,o,f,p,m,b,h,i,a,c,n){let s=t.length,r=m.length,u=s;const d={};for(;u--;)d[t[u].key]=u;const l=[],g=new Map,v=new Map;for(u=r;u--;){const S=n(p,m,u),x=o(S);let T=b.get(x);T?f&&T.p(S,e):(T=a(x,S),T.c()),g.set(x,l[u]=T),x in d&&v.set(x,Math.abs(u-d[x]))}const _=new Set,y=new Set;function C(S){ye(S,1),S.m(h,c),b.set(S.key,S),c=S.first,r--}for(;s&&r;){const S=l[r-1],x=t[s-1],T=S.key,D=x.key;S===x?(c=S.first,s--,r--):g.has(D)?!b.has(T)||_.has(T)?C(S):y.has(D)?s--:v.get(T)>v.get(D)?(y.add(T),C(S)):(_.add(D),s--):(i(x,b),s--)}for(;s--;){const S=t[s];g.has(S.key)||i(S,b)}for(;r;)C(l[r-1]);return l}function Zx(t,e,o){const f=t.$$.props[e];f!==void 0&&(t.$$.bound[f]=o,o(t.$$.ctx[f]))}function ar(t){t&&t.c()}function Gt(t,e,o,f){const{fragment:p,on_mount:m,on_destroy:b,after_update:h}=t.$$;p&&p.m(e,o),f||Tn(()=>{const i=m.map($u).filter(tr);b?b.push(...i):Or(i),t.$$.on_mount=[]}),h.forEach(Tn)}function Yt(t,e){const o=t.$$;o.fragment!==null&&(Or(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function Ud(t,e){t.$$.dirty[0]===-1&&(ai.push(t),hf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ar(t,e,o,f,p,m,b,h=[-1]){const i=pi;nr(t);const a=t.$$={fragment:null,ctx:null,props:m,update:Fe,not_equal:p,bound:bc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:bc(),dirty:h,skip_bound:!1,root:e.target||i.$$.root};b&&b(a.root);let c=!1;if(a.ctx=o?o(t,e.props||{},(n,s,...r)=>{const u=r.length?r[0]:s;return a.ctx&&p(a.ctx[n],a.ctx[n]=u)&&(!a.skip_bound&&a.bound[n]&&a.bound[n](u),c&&Ud(t,n)),s}):[],a.update(),c=!0,Or(a.before_update),a.fragment=f?f(a.ctx):!1,e.target){if(e.hydrate){const n=Ad(e.target);a.fragment&&a.fragment.l(n),n.forEach(Be)}else a.fragment&&a.fragment.c();e.intro&&ye(t.$$.fragment),Gt(t,e.target,e.anchor,e.customElement),gl()}nr(i)}class Pr{$destroy(){Yt(this,1),this.$destroy=Fe}$on(e,o){const f=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return f.push(o),()=>{const p=f.indexOf(o);p!==-1&&f.splice(p,1)}}$set(e){this.$$set&&!xd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function pl(t){const e=t-1;return e*e*e+1}function Hd(t,{delay:e=0,duration:o=400,easing:f=fl}={}){const p=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:f,css:m=>`opacity: ${m*p}`}}function e1(t,{delay:e=0,duration:o=400,easing:f=pl,x:p=0,y:m=0,opacity:b=0}={}){const h=getComputedStyle(t),i=+h.opacity,a=h.transform==="none"?"":h.transform,c=i*(1-b);return{delay:e,duration:o,easing:f,css:(n,s)=>`
			transform: ${a} translate(${(1-n)*p}px, ${(1-n)*m}px);
			opacity: ${i-c*s}`}}function t1(t,{delay:e=0,duration:o=400,easing:f=pl}={}){const p=getComputedStyle(t),m=+p.opacity,b=parseFloat(p.height),h=parseFloat(p.paddingTop),i=parseFloat(p.paddingBottom),a=parseFloat(p.marginTop),c=parseFloat(p.marginBottom),n=parseFloat(p.borderTopWidth),s=parseFloat(p.borderBottomWidth);return{delay:e,duration:o,easing:f,css:r=>`overflow: hidden;opacity: ${Math.min(r*20,1)*m};height: ${r*b}px;padding-top: ${r*h}px;padding-bottom: ${r*i}px;margin-top: ${r*a}px;margin-bottom: ${r*c}px;border-top-width: ${r*n}px;border-bottom-width: ${r*s}px;`}}const{window:Wd}=jd;function Sc(t){let e,o,f,p,m,b,h,i,a,c,n,s,r,u,d,l,g,v=t[1].closeButton&&xc(t);var _=t[2];function y(C){return{}}return _&&(b=new _(y())),{c(){e=De("div"),o=De("div"),f=De("div"),v&&v.c(),p=rr(),m=De("div"),b&&ar(b.$$.fragment),he(m,"class",h=Ht(t[1].classContent)+" svelte-g4wg3a"),he(m,"style",t[9]),Je(m,"content",!t[0]),he(f,"class",i=Ht(t[1].classWindow)+" svelte-g4wg3a"),he(f,"role","dialog"),he(f,"aria-modal","true"),he(f,"aria-label",a=t[1].ariaLabelledBy?null:t[1].ariaLabel||null),he(f,"aria-labelledby",c=t[1].ariaLabelledBy||null),he(f,"style",t[8]),Je(f,"window",!t[0]),he(o,"class",s=Ht(t[1].classWindowWrap)+" svelte-g4wg3a"),he(o,"style",t[7]),Je(o,"wrap",!t[0]),he(e,"class",r=Ht(t[1].classBg)+" svelte-g4wg3a"),he(e,"style",t[6]),Je(e,"bg",!t[0])},m(C,S){Xe(C,e,S),Ne(e,o),Ne(o,f),v&&v.m(f,null),Ne(f,p),Ne(f,m),b&&Gt(b,m,null),t[48](f),t[49](o),t[50](e),d=!0,l||(g=[Ye(f,"introstart",function(){tr(t[13])&&t[13].apply(this,arguments)}),Ye(f,"outrostart",function(){tr(t[14])&&t[14].apply(this,arguments)}),Ye(f,"introend",function(){tr(t[15])&&t[15].apply(this,arguments)}),Ye(f,"outroend",function(){tr(t[16])&&t[16].apply(this,arguments)}),Ye(e,"mousedown",t[20]),Ye(e,"mouseup",t[21])],l=!0)},p(C,S){if(t=C,t[1].closeButton?v?(v.p(t,S),S[0]&2&&ye(v,1)):(v=xc(t),v.c(),ye(v,1),v.m(f,p)):v&&(Rt(),Ee(v,1,1,()=>{v=null}),Mt()),_!==(_=t[2])){if(b){Rt();const x=b;Ee(x.$$.fragment,1,0,()=>{Yt(x,1)}),Mt()}_?(b=new _(y()),ar(b.$$.fragment),ye(b.$$.fragment,1),Gt(b,m,null)):b=null}(!d||S[0]&2&&h!==(h=Ht(t[1].classContent)+" svelte-g4wg3a"))&&he(m,"class",h),(!d||S[0]&512)&&he(m,"style",t[9]),S[0]&3&&Je(m,"content",!t[0]),(!d||S[0]&2&&i!==(i=Ht(t[1].classWindow)+" svelte-g4wg3a"))&&he(f,"class",i),(!d||S[0]&2&&a!==(a=t[1].ariaLabelledBy?null:t[1].ariaLabel||null))&&he(f,"aria-label",a),(!d||S[0]&2&&c!==(c=t[1].ariaLabelledBy||null))&&he(f,"aria-labelledby",c),(!d||S[0]&256)&&he(f,"style",t[8]),S[0]&3&&Je(f,"window",!t[0]),(!d||S[0]&2&&s!==(s=Ht(t[1].classWindowWrap)+" svelte-g4wg3a"))&&he(o,"class",s),(!d||S[0]&128)&&he(o,"style",t[7]),S[0]&3&&Je(o,"wrap",!t[0]),(!d||S[0]&2&&r!==(r=Ht(t[1].classBg)+" svelte-g4wg3a"))&&he(e,"class",r),(!d||S[0]&64)&&he(e,"style",t[6]),S[0]&3&&Je(e,"bg",!t[0])},i(C){d||(ye(v),b&&ye(b.$$.fragment,C),Tn(()=>{n||(n=os(f,t[12],t[1].transitionWindowProps,!0)),n.run(1)}),Tn(()=>{u||(u=os(e,t[11],t[1].transitionBgProps,!0)),u.run(1)}),d=!0)},o(C){Ee(v),b&&Ee(b.$$.fragment,C),n||(n=os(f,t[12],t[1].transitionWindowProps,!1)),n.run(0),u||(u=os(e,t[11],t[1].transitionBgProps,!1)),u.run(0),d=!1},d(C){C&&Be(e),v&&v.d(),b&&Yt(b),t[48](null),C&&n&&n.end(),t[49](null),t[50](null),C&&u&&u.end(),l=!1,Or(g)}}}function xc(t){let e,o,f,p,m;const b=[Xd,zd],h=[];function i(a,c){return c[0]&2&&(e=null),e==null&&(e=!!a[17](a[1].closeButton)),e?0:1}return o=i(t,[-1,-1,-1]),f=h[o]=b[o](t),{c(){f.c(),p=of()},m(a,c){h[o].m(a,c),Xe(a,p,c),m=!0},p(a,c){let n=o;o=i(a,c),o===n?h[o].p(a,c):(Rt(),Ee(h[n],1,1,()=>{h[n]=null}),Mt(),f=h[o],f?f.p(a,c):(f=h[o]=b[o](a),f.c()),ye(f,1),f.m(p.parentNode,p))},i(a){m||(ye(f),m=!0)},o(a){Ee(f),m=!1},d(a){h[o].d(a),a&&Be(p)}}}function zd(t){let e,o,f,p;return{c(){e=De("button"),he(e,"class",o=Ht(t[1].classCloseButton)+" svelte-g4wg3a"),he(e,"aria-label","Close modal"),he(e,"style",t[10]),Je(e,"close",!t[0])},m(m,b){Xe(m,e,b),f||(p=Ye(e,"click",t[18]),f=!0)},p(m,b){b[0]&2&&o!==(o=Ht(m[1].classCloseButton)+" svelte-g4wg3a")&&he(e,"class",o),b[0]&1024&&he(e,"style",m[10]),b[0]&3&&Je(e,"close",!m[0])},i:Fe,o:Fe,d(m){m&&Be(e),f=!1,p()}}}function Xd(t){let e,o,f;var p=t[1].closeButton;function m(b){return{props:{onClose:b[18]}}}return p&&(e=new p(m(t))),{c(){e&&ar(e.$$.fragment),o=of()},m(b,h){e&&Gt(e,b,h),Xe(b,o,h),f=!0},p(b,h){if(p!==(p=b[1].closeButton)){if(e){Rt();const i=e;Ee(i.$$.fragment,1,0,()=>{Yt(i,1)}),Mt()}p?(e=new p(m(b)),ar(e.$$.fragment),ye(e.$$.fragment,1),Gt(e,o.parentNode,o)):e=null}},i(b){f||(e&&ye(e.$$.fragment,b),f=!0)},o(b){e&&Ee(e.$$.fragment,b),f=!1},d(b){b&&Be(o),e&&Yt(e,b)}}}function Gd(t){let e,o,f,p,m=t[2]&&Sc(t);const b=t[47].default,h=Fi(b,t,t[46],null);return{c(){m&&m.c(),e=rr(),h&&h.c()},m(i,a){m&&m.m(i,a),Xe(i,e,a),h&&h.m(i,a),o=!0,f||(p=Ye(Wd,"keydown",t[19]),f=!0)},p(i,a){i[2]?m?(m.p(i,a),a[0]&4&&ye(m,1)):(m=Sc(i),m.c(),ye(m,1),m.m(e.parentNode,e)):m&&(Rt(),Ee(m,1,1,()=>{m=null}),Mt()),h&&h.p&&(!o||a[1]&32768)&&Mi(h,b,i,i[46],o?Ri(b,i[46],a,null):Ii(i[46]),null)},i(i){o||(ye(m),ye(h,i),o=!0)},o(i){Ee(m),Ee(h,i),o=!1},d(i){m&&m.d(i),i&&Be(e),h&&h.d(i),f=!1,p()}}}function Yd(t,e={}){return function(f){return new t(ti(_t({},f),{props:_t(_t({},e),f.props)}))}}function Vd(t,e,o){let{$$slots:f={},$$scope:p}=e;const m=Li(),b=Md;let{show:h=null}=e,{key:i="simple-modal"}=e,{ariaLabel:a=null}=e,{ariaLabelledBy:c=null}=e,{closeButton:n=!0}=e,{closeOnEsc:s=!0}=e,{closeOnOuterClick:r=!0}=e,{styleBg:u={}}=e,{styleWindowWrap:d={}}=e,{styleWindow:l={}}=e,{styleContent:g={}}=e,{styleCloseButton:v={}}=e,{classBg:_=null}=e,{classWindowWrap:y=null}=e,{classWindow:C=null}=e,{classContent:S=null}=e,{classCloseButton:x=null}=e,{unstyled:T=!1}=e,{setContext:D=b}=e,{transitionBg:j=Hd}=e,{transitionBgProps:U={duration:250}}=e,{transitionWindow:H=j}=e,{transitionWindowProps:Q=U}=e,{disableFocusTrap:K=!1}=e;const re={ariaLabel:a,ariaLabelledBy:c,closeButton:n,closeOnEsc:s,closeOnOuterClick:r,styleBg:u,styleWindowWrap:d,styleWindow:l,styleContent:g,styleCloseButton:v,classBg:_,classWindowWrap:y,classWindow:C,classContent:S,classCloseButton:x,transitionBg:j,transitionBgProps:U,transitionWindow:H,transitionWindowProps:Q,disableFocusTrap:K,unstyled:T};let se=_t({},re),oe=null,ae,R,W,P,B,N,A,O,M,F,q,L,Y,V,$;const G=ie=>ie.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),k=ie=>ie?Object.keys(ie).reduce((Ie,Le)=>`${Ie}; ${G(Le)}: ${ie[Le]}`,""):"",z=ie=>!!(ie&&ie.constructor&&ie.call&&ie.apply),J=()=>{o(6,B=k(Object.assign({},{width:window.innerWidth,height:window.innerHeight},se.styleBg))),o(7,N=k(se.styleWindowWrap)),o(8,A=k(se.styleWindow)),o(9,O=k(se.styleContent)),o(10,M=k(se.styleCloseButton)),o(11,F=se.transitionBg),o(12,q=se.transitionWindow)},X=()=>{};let ee=X,ne=X,ue=X,le=X;const Z=(ie,Ie={},Le={},Re={})=>{o(2,oe=Yd(ie,Ie)),o(1,se=_t(_t({},re),Le)),J(),_e(),o(13,ee=st=>{Re.onOpen&&Re.onOpen(st),m("open"),m("opening")}),o(14,ne=st=>{Re.onClose&&Re.onClose(st),m("close"),m("closing")}),o(15,ue=st=>{Re.onOpened&&Re.onOpened(st),m("opened")}),o(16,le=st=>{Re.onClosed&&Re.onClosed(st),m("closed")})},ce=(ie={})=>{!oe||(o(14,ne=ie.onClose||ne),o(16,le=ie.onClosed||le),o(2,oe=null),pe())},fe=ie=>{if(se.closeOnEsc&&oe&&ie.key==="Escape"&&(ie.preventDefault(),ce()),oe&&ie.key==="Tab"&&!se.disableFocusTrap){const Ie=W.querySelectorAll("*"),Le=Array.from(Ie).filter(st=>st.tabIndex>=0);let Re=Le.indexOf(document.activeElement);Re===-1&&ie.shiftKey&&(Re=0),Re+=Le.length+(ie.shiftKey?-1:1),Re%=Le.length,Le[Re].focus(),ie.preventDefault()}},ve=ie=>{se.closeOnOuterClick&&(ie.target===ae||ie.target===R)&&($=ie.target)},Pe=ie=>{se.closeOnOuterClick&&ie.target===$&&(ie.preventDefault(),ce())},_e=()=>{P=window.scrollY,L=document.body.style.position,Y=document.body.style.overflow,V=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${P}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},pe=()=>{document.body.style.position=L||"",document.body.style.top="",document.body.style.overflow=Y||"",document.body.style.width=V||"",window.scrollTo(0,P)};D(i,{open:Z,close:ce});let ge=!1;cf(()=>{ge&&ce()}),dl(()=>{o(45,ge=!0)});function be(ie){sr[ie?"unshift":"push"](()=>{W=ie,o(5,W)})}function Me(ie){sr[ie?"unshift":"push"](()=>{R=ie,o(4,R)})}function dt(ie){sr[ie?"unshift":"push"](()=>{ae=ie,o(3,ae)})}return t.$$set=ie=>{"show"in ie&&o(22,h=ie.show),"key"in ie&&o(23,i=ie.key),"ariaLabel"in ie&&o(24,a=ie.ariaLabel),"ariaLabelledBy"in ie&&o(25,c=ie.ariaLabelledBy),"closeButton"in ie&&o(26,n=ie.closeButton),"closeOnEsc"in ie&&o(27,s=ie.closeOnEsc),"closeOnOuterClick"in ie&&o(28,r=ie.closeOnOuterClick),"styleBg"in ie&&o(29,u=ie.styleBg),"styleWindowWrap"in ie&&o(30,d=ie.styleWindowWrap),"styleWindow"in ie&&o(31,l=ie.styleWindow),"styleContent"in ie&&o(32,g=ie.styleContent),"styleCloseButton"in ie&&o(33,v=ie.styleCloseButton),"classBg"in ie&&o(34,_=ie.classBg),"classWindowWrap"in ie&&o(35,y=ie.classWindowWrap),"classWindow"in ie&&o(36,C=ie.classWindow),"classContent"in ie&&o(37,S=ie.classContent),"classCloseButton"in ie&&o(38,x=ie.classCloseButton),"unstyled"in ie&&o(0,T=ie.unstyled),"setContext"in ie&&o(39,D=ie.setContext),"transitionBg"in ie&&o(40,j=ie.transitionBg),"transitionBgProps"in ie&&o(41,U=ie.transitionBgProps),"transitionWindow"in ie&&o(42,H=ie.transitionWindow),"transitionWindowProps"in ie&&o(43,Q=ie.transitionWindowProps),"disableFocusTrap"in ie&&o(44,K=ie.disableFocusTrap),"$$scope"in ie&&o(46,p=ie.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4194304|t.$$.dirty[1]&16384&&ge&&(z(h)?Z(h):ce())},[T,se,oe,ae,R,W,B,N,A,O,M,F,q,ee,ne,ue,le,z,ce,fe,ve,Pe,h,i,a,c,n,s,r,u,d,l,g,v,_,y,C,S,x,D,j,U,H,Q,K,ge,p,f,be,Me,dt]}class r1 extends Pr{constructor(e){super();Ar(this,e,Vd,Gd,lr,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}var Ae=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function qd(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(o){var f=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,f.get?f:{enumerable:!0,get:function(){return t[o]}})}),e}var Kd={},Jd={},Qd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jd}),ci=qd(Qd);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"4.6.0"};if(t.fabric=e,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var o=ci,f=new o.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=f.document,e.jsdomImplForWrapper=ci.implForWrapper,e.nodeCanvas=ci.Canvas,e.window=f,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=e),function(){function h(r,u){if(!!this.__eventListeners[r]){var d=this.__eventListeners[r];u?d[d.indexOf(u)]=!1:e.util.array.fill(d,!1)}}function i(r,u){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var d in r)this.on(d,r[d]);else this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(u);return this}function a(r,u){var d=function(){u.apply(this,arguments),this.off(r,d)}.bind(this);this.on(r,d)}function c(r,u){if(arguments.length===1)for(var d in r)a.call(this,d,r[d]);else a.call(this,r,u);return this}function n(r,u){if(!this.__eventListeners)return this;if(arguments.length===0)for(r in this.__eventListeners)h.call(this,r);else if(arguments.length===1&&typeof arguments[0]=="object")for(var d in r)h.call(this,d,r[d]);else h.call(this,r,u);return this}function s(r,u){if(!this.__eventListeners)return this;var d=this.__eventListeners[r];if(!d)return this;for(var l=0,g=d.length;l<g;l++)d[l]&&d[l].call(this,u||{});return this.__eventListeners[r]=d.filter(function(v){return v!==!1}),this}e.Observable={fire:s,on:i,once:c,off:n}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,i=arguments.length;h<i;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,i,a){var c=this._objects;return a?c[i]=h:c.splice(i,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,i,a=!1,c=0,n=arguments.length;c<n;c++)i=h.indexOf(arguments[c]),i!==-1&&(a=!0,h.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,i){for(var a=this.getObjects(),c=0,n=a.length;c<n;c++)h.call(i,a[c],c,a);return this},getObjects:function(h){return typeof h=="undefined"?this._objects.concat():this._objects.filter(function(i){return i.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,i){return this._objects.indexOf(h)>-1?!0:i?this._objects.some(function(a){return typeof a.contains=="function"&&a.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,i){return h+=i.complexity?i.complexity():0,h},0)}},e.CommonMethods={_setOptions:function(h){for(var i in h)this.set(i,h[i])},_initGradient:function(h,i){h&&h.colorStops&&!(h instanceof e.Gradient)&&this.set(i,new e.Gradient(h))},_initPattern:function(h,i,a){h&&h.source&&!(h instanceof e.Pattern)?this.set(i,new e.Pattern(h,a)):a&&a()},_setObject:function(h){for(var i in h)this._set(i,h[i])},set:function(h,i){return typeof h=="object"?this._setObject(h):this._set(h,i),this},_set:function(h,i){this[h]=i},toggle:function(h){var i=this.get(h);return typeof i=="boolean"&&this.set(h,!i),this},get:function(h){return this[h]}},function(h){var i=Math.sqrt,a=Math.atan2,c=Math.pow,n=Math.PI/180,s=Math.PI/2;e.util={cos:function(r){if(r===0)return 1;r<0&&(r=-r);var u=r/s;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},sin:function(r){if(r===0)return 0;var u=r/s,d=1;switch(r<0&&(d=-1),u){case 1:return d;case 2:return 0;case 3:return-d}return Math.sin(r)},removeFromArray:function(r,u){var d=r.indexOf(u);return d!==-1&&r.splice(d,1),r},getRandomInt:function(r,u){return Math.floor(Math.random()*(u-r+1))+r},degreesToRadians:function(r){return r*n},radiansToDegrees:function(r){return r/n},rotatePoint:function(r,u,d){var l=new e.Point(r.x-u.x,r.y-u.y),g=e.util.rotateVector(l,d);return new e.Point(g.x,g.y).addEquals(u)},rotateVector:function(r,u){var d=e.util.sin(u),l=e.util.cos(u),g=r.x*l-r.y*d,v=r.x*d+r.y*l;return{x:g,y:v}},transformPoint:function(r,u,d){return d?new e.Point(u[0]*r.x+u[2]*r.y,u[1]*r.x+u[3]*r.y):new e.Point(u[0]*r.x+u[2]*r.y+u[4],u[1]*r.x+u[3]*r.y+u[5])},makeBoundingBoxFromPoints:function(r,u){if(u)for(var d=0;d<r.length;d++)r[d]=e.util.transformPoint(r[d],u);var l=[r[0].x,r[1].x,r[2].x,r[3].x],g=e.util.array.min(l),v=e.util.array.max(l),_=v-g,y=[r[0].y,r[1].y,r[2].y,r[3].y],C=e.util.array.min(y),S=e.util.array.max(y),x=S-C;return{left:g,top:C,width:_,height:x}},invertTransform:function(r){var u=1/(r[0]*r[3]-r[1]*r[2]),d=[u*r[3],-u*r[1],-u*r[2],u*r[0]],l=e.util.transformPoint({x:r[4],y:r[5]},d,!0);return d[4]=-l.x,d[5]=-l.y,d},toFixed:function(r,u){return parseFloat(Number(r).toFixed(u))},parseUnit:function(r,u){var d=/\D{0,2}$/.exec(r),l=parseFloat(r);switch(u||(u=e.Text.DEFAULT_SVG_FONT_SIZE),d[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*u;default:return l}},falseFunction:function(){return!1},getKlass:function(r,u){return r=e.util.string.camelize(r.charAt(0).toUpperCase()+r.slice(1)),e.util.resolveNamespace(u)[r]},getSvgAttributes:function(r){var u=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(r){if(!r)return e;var u=r.split("."),d=u.length,l,g=h||e.window;for(l=0;l<d;++l)g=g[u[l]];return g},loadImage:function(r,u,d,l){if(!r){u&&u.call(d,r);return}var g=e.util.createImage(),v=function(){u&&u.call(d,g,!1),g=g.onload=g.onerror=null};g.onload=v,g.onerror=function(){e.log("Error loading "+g.src),u&&u.call(d,null,!0),g=g.onload=g.onerror=null},r.indexOf("data")!==0&&l!==void 0&&l!==null&&(g.crossOrigin=l),r.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,v)),g.src=r},loadImageInDom:function(r,u){var d=e.document.createElement("div");d.style.width=d.style.height="1px",d.style.left=d.style.top="-100%",d.style.position="absolute",d.appendChild(r),e.document.querySelector("body").appendChild(d),r.onload=function(){u(),d.parentNode.removeChild(d),d=null}},enlivenObjects:function(r,u,d,l){r=r||[];var g=[],v=0,_=r.length;function y(){++v===_&&u&&u(g.filter(function(C){return C}))}if(!_){u&&u(g);return}r.forEach(function(C,S){if(!C||!C.type){y();return}var x=e.util.getKlass(C.type,d);x.fromObject(C,function(T,D){D||(g[S]=T),l&&l(C,T,D),y()})})},enlivenPatterns:function(r,u){r=r||[];function d(){++g===v&&u&&u(l)}var l=[],g=0,v=r.length;if(!v){u&&u(l);return}r.forEach(function(_,y){_&&_.source?new e.Pattern(_,function(C){l[y]=C,d()}):(l[y]=_,d())})},groupSVGElements:function(r,u,d){var l;return r&&r.length===1?r[0]:(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),l=new e.Group(r,u),typeof d!="undefined"&&(l.sourcePath=d),l)},populateWithProperties:function(r,u,d){if(d&&Object.prototype.toString.call(d)==="[object Array]")for(var l=0,g=d.length;l<g;l++)d[l]in r&&(u[d[l]]=r[d[l]])},drawDashedLine:function(r,u,d,l,g,v){var _=l-u,y=g-d,C=i(_*_+y*y),S=a(y,_),x=v.length,T=0,D=!0;for(r.save(),r.translate(u,d),r.moveTo(0,0),r.rotate(S),u=0;C>u;)u+=v[T++%x],u>C&&(u=C),r[D?"lineTo":"moveTo"](u,0),D=!D;r.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(r){var u=e.util.createCanvasElement();return u.width=r.width,u.height=r.height,u.getContext("2d").drawImage(r,0,0),u},toDataURL:function(r,u,d){return r.toDataURL("image/"+u,d)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(r,u,d){return[r[0]*u[0]+r[2]*u[1],r[1]*u[0]+r[3]*u[1],r[0]*u[2]+r[2]*u[3],r[1]*u[2]+r[3]*u[3],d?0:r[0]*u[4]+r[2]*u[5]+r[4],d?0:r[1]*u[4]+r[3]*u[5]+r[5]]},qrDecompose:function(r){var u=a(r[1],r[0]),d=c(r[0],2)+c(r[1],2),l=i(d),g=(r[0]*r[3]-r[2]*r[1])/l,v=a(r[0]*r[2]+r[1]*r[3],d);return{angle:u/n,scaleX:l,scaleY:g,skewX:v/n,skewY:0,translateX:r[4],translateY:r[5]}},calcRotateMatrix:function(r){if(!r.angle)return e.iMatrix.concat();var u=e.util.degreesToRadians(r.angle),d=e.util.cos(u),l=e.util.sin(u);return[d,l,-l,d,0,0]},calcDimensionsMatrix:function(r){var u=typeof r.scaleX=="undefined"?1:r.scaleX,d=typeof r.scaleY=="undefined"?1:r.scaleY,l=[r.flipX?-u:u,0,0,r.flipY?-d:d,0,0],g=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return r.skewX&&(l=g(l,[1,0,Math.tan(v(r.skewX)),1],!0)),r.skewY&&(l=g(l,[1,Math.tan(v(r.skewY)),0,1],!0)),l},composeMatrix:function(r){var u=[1,0,0,1,r.translateX||0,r.translateY||0],d=e.util.multiplyTransformMatrices;return r.angle&&(u=d(u,e.util.calcRotateMatrix(r))),(r.scaleX!==1||r.scaleY!==1||r.skewX||r.skewY||r.flipX||r.flipY)&&(u=d(u,e.util.calcDimensionsMatrix(r))),u},resetObjectTransform:function(r){r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},saveObjectTransform:function(r){return{scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}},isTransparent:function(r,u,d,l){l>0&&(u>l?u-=l:u=0,d>l?d-=l:d=0);var g=!0,v,_,y=r.getImageData(u,d,l*2||1,l*2||1),C=y.data.length;for(v=3;v<C&&(_=y.data[v],g=_<=0,g!==!1);v+=4);return y=null,g},parsePreserveAspectRatioAttribute:function(r){var u="meet",d="Mid",l="Mid",g=r.split(" "),v;return g&&g.length&&(u=g.pop(),u!=="meet"&&u!=="slice"?(v=u,u="meet"):g.length&&(v=g.pop())),d=v!=="none"?v.slice(1,4):"none",l=v!=="none"?v.slice(5,8):"none",{meetOrSlice:u,alignX:d,alignY:l}},clearFabricFontCache:function(r){r=(r||"").toLowerCase(),r?e.charWidthsCache[r]&&delete e.charWidthsCache[r]:e.charWidthsCache={}},limitDimsByArea:function(r,u){var d=Math.sqrt(u*r),l=Math.floor(u/d);return{x:Math.floor(d),y:l}},capValue:function(r,u,d){return Math.max(r,Math.min(u,d))},findScaleToFit:function(r,u){return Math.min(u.width/r.width,u.height/r.height)},findScaleToCover:function(r,u){return Math.max(u.width/r.width,u.height/r.height)},matrixToSVG:function(r){return"matrix("+r.map(function(u){return e.util.toFixed(u,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(r,u){var d=e.util.invertTransform(u),l=e.util.multiplyTransformMatrices(d,r.calcOwnMatrix());e.util.applyTransformToObject(r,l)},addTransformToObject:function(r,u){e.util.applyTransformToObject(r,e.util.multiplyTransformMatrices(u,r.calcOwnMatrix()))},applyTransformToObject:function(r,u){var d=e.util.qrDecompose(u),l=new e.Point(d.translateX,d.translateY);r.flipX=!1,r.flipY=!1,r.set("scaleX",d.scaleX),r.set("scaleY",d.scaleY),r.skewX=d.skewX,r.skewY=d.skewY,r.angle=d.angle,r.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(r,u,d){var l=r/2,g=u/2,v=[{x:-l,y:-g},{x:l,y:-g},{x:-l,y:g},{x:l,y:g}],_=e.util.calcDimensionsMatrix(d),y=e.util.makeBoundingBoxFromPoints(v,_);return{x:y.width,y:y.height}}}}(t),function(){var h=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function c(P,B,N,A,O,M,F,q,L,Y,V){var $=e.util.cos(P),G=e.util.sin(P),k=e.util.cos(B),z=e.util.sin(B),J=N*O*k-A*M*z+F,X=A*O*k+N*M*z+q,ee=Y+L*(-N*O*G-A*M*$),ne=V+L*(-A*O*G+N*M*$),ue=J+L*(N*O*z+A*M*k),le=X+L*(A*O*z-N*M*k);return["C",ee,ne,ue,le,J,X]}function n(P,B,N,A,O,M,F){var q=Math.PI,L=F*q/180,Y=e.util.sin(L),V=e.util.cos(L),$=0,G=0;N=Math.abs(N),A=Math.abs(A);var k=-V*P*.5-Y*B*.5,z=-V*B*.5+Y*P*.5,J=N*N,X=A*A,ee=z*z,ne=k*k,ue=J*X-J*ee-X*ne,le=0;if(ue<0){var Z=Math.sqrt(1-ue/(J*X));N*=Z,A*=Z}else le=(O===M?-1:1)*Math.sqrt(ue/(J*ee+X*ne));var ce=le*N*z/A,fe=-le*A*k/N,ve=V*ce-Y*fe+P*.5,Pe=Y*ce+V*fe+B*.5,_e=s(1,0,(k-ce)/N,(z-fe)/A),pe=s((k-ce)/N,(z-fe)/A,(-k-ce)/N,(-z-fe)/A);M===0&&pe>0?pe-=2*q:M===1&&pe<0&&(pe+=2*q);for(var ge=Math.ceil(Math.abs(pe/q*2)),be=[],Me=pe/ge,dt=8/3*Math.sin(Me/4)*Math.sin(Me/4)/Math.sin(Me/2),ie=_e+Me,Ie=0;Ie<ge;Ie++)be[Ie]=c(_e,ie,V,Y,N,A,ve,Pe,dt,$,G),$=be[Ie][5],G=be[Ie][6],_e=ie,ie+=Me;return be}function s(P,B,N,A){var O=Math.atan2(B,P),M=Math.atan2(A,N);return M>=O?M-O:2*Math.PI-(O-M)}function r(P,B,N,A,O,M,F,q){var L;if(e.cachesBoundsOfCurve&&(L=h.call(arguments),e.boundsOfCurveCache[L]))return e.boundsOfCurveCache[L];var Y=Math.sqrt,V=Math.min,$=Math.max,G=Math.abs,k=[],z=[[],[]],J,X,ee,ne,ue,le,Z,ce;X=6*P-12*N+6*O,J=-3*P+9*N-9*O+3*F,ee=3*N-3*P;for(var fe=0;fe<2;++fe){if(fe>0&&(X=6*B-12*A+6*M,J=-3*B+9*A-9*M+3*q,ee=3*A-3*B),G(J)<1e-12){if(G(X)<1e-12)continue;ne=-ee/X,0<ne&&ne<1&&k.push(ne);continue}Z=X*X-4*ee*J,!(Z<0)&&(ce=Y(Z),ue=(-X+ce)/(2*J),0<ue&&ue<1&&k.push(ue),le=(-X-ce)/(2*J),0<le&&le<1&&k.push(le))}for(var ve,Pe,_e=k.length,pe=_e,ge;_e--;)ne=k[_e],ge=1-ne,ve=ge*ge*ge*P+3*ge*ge*ne*N+3*ge*ne*ne*O+ne*ne*ne*F,z[0][_e]=ve,Pe=ge*ge*ge*B+3*ge*ge*ne*A+3*ge*ne*ne*M+ne*ne*ne*q,z[1][_e]=Pe;z[0][pe]=P,z[1][pe]=B,z[0][pe+1]=F,z[1][pe+1]=q;var be=[{x:V.apply(null,z[0]),y:V.apply(null,z[1])},{x:$.apply(null,z[0]),y:$.apply(null,z[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[L]=be),be}function u(P,B,N){for(var A=N[1],O=N[2],M=N[3],F=N[4],q=N[5],L=N[6],Y=N[7],V=n(L-P,Y-B,A,O,F,q,M),$=0,G=V.length;$<G;$++)V[$][1]+=P,V[$][2]+=B,V[$][3]+=P,V[$][4]+=B,V[$][5]+=P,V[$][6]+=B;return V}function d(P){var B=0,N=0,A=P.length,O=0,M=0,F,q,L,Y=[],V,$,G;for(q=0;q<A;++q){switch(L=!1,F=P[q].slice(0),F[0]){case"l":F[0]="L",F[1]+=B,F[2]+=N;case"L":B=F[1],N=F[2];break;case"h":F[1]+=B;case"H":F[0]="L",F[2]=N,B=F[1];break;case"v":F[1]+=N;case"V":F[0]="L",N=F[1],F[1]=B,F[2]=N;break;case"m":F[0]="M",F[1]+=B,F[2]+=N;case"M":B=F[1],N=F[2],O=F[1],M=F[2];break;case"c":F[0]="C",F[1]+=B,F[2]+=N,F[3]+=B,F[4]+=N,F[5]+=B,F[6]+=N;case"C":$=F[3],G=F[4],B=F[5],N=F[6];break;case"s":F[0]="S",F[1]+=B,F[2]+=N,F[3]+=B,F[4]+=N;case"S":V==="C"?($=2*B-$,G=2*N-G):($=B,G=N),B=F[3],N=F[4],F[0]="C",F[5]=F[3],F[6]=F[4],F[3]=F[1],F[4]=F[2],F[1]=$,F[2]=G,$=F[3],G=F[4];break;case"q":F[0]="Q",F[1]+=B,F[2]+=N,F[3]+=B,F[4]+=N;case"Q":$=F[1],G=F[2],B=F[3],N=F[4];break;case"t":F[0]="T",F[1]+=B,F[2]+=N;case"T":V==="Q"?($=2*B-$,G=2*N-G):($=B,G=N),F[0]="Q",B=F[1],N=F[2],F[1]=$,F[2]=G,F[3]=B,F[4]=N;break;case"a":F[0]="A",F[6]+=B,F[7]+=N;case"A":L=!0,Y=Y.concat(u(B,N,F)),B=F[6],N=F[7];break;case"z":case"Z":B=O,N=M;break}L||Y.push(F),V=F[0]}return Y}function l(P,B,N,A){return Math.sqrt((N-P)*(N-P)+(A-B)*(A-B))}function g(P){return P*P*P}function v(P){return 3*P*P*(1-P)}function _(P){return 3*P*(1-P)*(1-P)}function y(P){return(1-P)*(1-P)*(1-P)}function C(P,B,N,A,O,M,F,q){return function(L){var Y=g(L),V=v(L),$=_(L),G=y(L);return{x:F*Y+O*V+N*$+P*G,y:q*Y+M*V+A*$+B*G}}}function S(P,B,N,A,O,M,F,q){return function(L){var Y=1-L,V=3*Y*Y*(N-P)+6*Y*L*(O-N)+3*L*L*(F-O),$=3*Y*Y*(A-B)+6*Y*L*(M-A)+3*L*L*(q-M);return Math.atan2($,V)}}function x(P){return P*P}function T(P){return 2*P*(1-P)}function D(P){return(1-P)*(1-P)}function j(P,B,N,A,O,M){return function(F){var q=x(F),L=T(F),Y=D(F);return{x:O*q+N*L+P*Y,y:M*q+A*L+B*Y}}}function U(P,B,N,A,O,M){return function(F){var q=1-F,L=2*q*(N-P)+2*F*(O-N),Y=2*q*(A-B)+2*F*(M-A);return Math.atan2(Y,L)}}function H(P,B,N){var A={x:B,y:N},O,M=0,F;for(F=1;F<=100;F+=1)O=P(F/100),M+=l(A.x,A.y,O.x,O.y),A=O;return M}function Q(P,B){for(var N=0,A=0,O=P.iterator,M={x:P.x,y:P.y},F,q,L=.01,Y=P.angleFinder,V;A<B&&N<=1&&L>1e-4;)F=O(N),V=N,q=l(M.x,M.y,F.x,F.y),q+A>B?(L/=2,N-=L):(M=F,N+=L,A+=q);return F.angle=Y(V),F}function K(P){for(var B=0,N=P.length,A,O=0,M=0,F=0,q=0,L=[],Y,V,$,G=0;G<N;G++){switch(A=P[G],V={x:O,y:M,command:A[0]},A[0]){case"M":V.length=0,F=O=A[1],q=M=A[2];break;case"L":V.length=l(O,M,A[1],A[2]),O=A[1],M=A[2];break;case"C":Y=C(O,M,A[1],A[2],A[3],A[4],A[5],A[6]),$=S(O,M,A[1],A[2],A[3],A[4],A[5],A[6]),V.iterator=Y,V.angleFinder=$,V.length=H(Y,O,M),O=A[5],M=A[6];break;case"Q":Y=j(O,M,A[1],A[2],A[3],A[4]),$=U(O,M,A[1],A[2],A[3],A[4]),V.iterator=Y,V.angleFinder=$,V.length=H(Y,O,M),O=A[3],M=A[4];break;case"Z":case"z":V.destX=F,V.destY=q,V.length=l(O,M,F,q),O=F,M=q;break}B+=V.length,L.push(V)}return L.push({length:B,x:O,y:M}),L}function re(P,B,N){N||(N=K(P));for(var A=0;B-N[A].length>0&&A<N.length-2;)B-=N[A].length,A++;var O=N[A],M=B/O.length,F=O.command,q=P[A],L;switch(F){case"M":return{x:O.x,y:O.y,angle:0};case"Z":case"z":return L=new e.Point(O.x,O.y).lerp(new e.Point(O.destX,O.destY),M),L.angle=Math.atan2(O.destY-O.y,O.destX-O.x),L;case"L":return L=new e.Point(O.x,O.y).lerp(new e.Point(q[1],q[2]),M),L.angle=Math.atan2(q[2]-O.y,q[1]-O.x),L;case"C":return Q(O,B);case"Q":return Q(O,B)}}function se(P){var B=[],N=[],A,O,M=e.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",q="("+F+")"+e.commaWsp,L="([01])"+e.commaWsp+"?",Y=q+"?"+q+"?"+q+L+L+q+"?("+F+")",V=new RegExp(Y,"g"),$,G,k;if(!P||!P.match)return B;k=P.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var z=0,J,X=k.length;z<X;z++){A=k[z],G=A.slice(1).trim(),N.length=0;var ee=A.charAt(0);if(J=[ee],ee.toLowerCase()==="a")for(var ne;ne=V.exec(G);)for(var ue=1;ue<ne.length;ue++)N.push(ne[ue]);else for(;$=M.exec(G);)N.push($[0]);for(var ue=0,le=N.length;ue<le;ue++)O=parseFloat(N[ue]),isNaN(O)||J.push(O);var Z=i[ee.toLowerCase()],ce=a[ee]||ee;if(J.length-1>Z)for(var fe=1,ve=J.length;fe<ve;fe+=Z)B.push([ee].concat(J.slice(fe,fe+Z))),ee=ce;else B.push(J)}return B}function oe(P,B){var N=[],A,O=new e.Point(P[0].x,P[0].y),M=new e.Point(P[1].x,P[1].y),F=P.length,q=1,L=0,Y=F>2;for(B=B||0,Y&&(q=P[2].x<M.x?-1:P[2].x===M.x?0:1,L=P[2].y<M.y?-1:P[2].y===M.y?0:1),N.push(["M",O.x-q*B,O.y-L*B]),A=1;A<F;A++){if(!O.eq(M)){var V=O.midPointFrom(M);N.push(["Q",O.x,O.y,V.x,V.y])}O=P[A],A+1<P.length&&(M=P[A+1])}return Y&&(q=O.x>P[A-2].x?1:O.x===P[A-2].x?0:-1,L=O.y>P[A-2].y?1:O.y===P[A-2].y?0:-1),N.push(["L",O.x+q*B,O.y+L*B]),N}function ae(P,B,N){return N&&(B=e.util.multiplyTransformMatrices(B,[1,0,0,1,-N.x,-N.y])),P.map(function(A){for(var O=A.slice(0),M={},F=1;F<A.length-1;F+=2)M.x=A[F],M.y=A[F+1],M=e.util.transformPoint(M,B),O[F]=M.x,O[F+1]=M.y;return O})}function R(P,B,N,A,O,M,F,q,L){for(var Y=0,V=0,$,G=[],k=n(q-P,L-B,N,A,M,F,O),z=0,J=k.length;z<J;z++)$=r(Y,V,k[z][1],k[z][2],k[z][3],k[z][4],k[z][5],k[z][6]),G.push({x:$[0].x+P,y:$[0].y+B}),G.push({x:$[1].x+P,y:$[1].y+B}),Y=k[z][5],V=k[z][6];return G}function W(P,B,N,A){A=A.slice(0).unshift("X");var O=u(B,N,A);O.forEach(function(M){P.bezierCurveTo.apply(P,M.slice(1))})}e.util.joinPath=function(P){return P.map(function(B){return B.join(" ")}).join(" ")},e.util.parsePath=se,e.util.makePathSimpler=d,e.util.getSmoothPathFromPoints=oe,e.util.getPathSegmentsInfo=K,e.util.getBoundsOfCurve=r,e.util.getPointOnPath=re,e.util.transformPath=ae,e.util.fromArcToBeizers=u,e.util.getBoundsOfArc=R,e.util.drawArc=W}(),function(){var h=Array.prototype.slice;function i(r,u){for(var d=h.call(arguments,2),l=[],g=0,v=r.length;g<v;g++)l[g]=d.length?r[g][u].apply(r[g],d):r[g][u].call(r[g]);return l}function a(r,u){return s(r,u,function(d,l){return d>=l})}function c(r,u){return s(r,u,function(d,l){return d<l})}function n(r,u){for(var d=r.length;d--;)r[d]=u;return r}function s(r,u,d){if(!(!r||r.length===0)){var l=r.length-1,g=u?r[l][u]:r[l];if(u)for(;l--;)d(r[l][u],g)&&(g=r[l][u]);else for(;l--;)d(r[l],g)&&(g=r[l]);return g}}e.util.array={fill:n,invoke:i,min:c,max:a}}(),function(){function h(a,c,n){if(n)if(!e.isLikelyNode&&c instanceof Element)a=c;else if(c instanceof Array){a=[];for(var s=0,r=c.length;s<r;s++)a[s]=h({},c[s],n)}else if(c&&typeof c=="object")for(var u in c)u==="canvas"||u==="group"?a[u]=null:c.hasOwnProperty(u)&&(a[u]=h({},c[u],n));else a=c;else for(var u in c)a[u]=c[u];return a}function i(a,c){return h({},a,c)}e.util.object={extend:h,clone:i},e.util.object.extend(e.util,e.Observable)}(),function(){function h(s){return s.replace(/-+(.)?/g,function(r,u){return u?u.toUpperCase():""})}function i(s,r){return s.charAt(0).toUpperCase()+(r?s.slice(1):s.slice(1).toLowerCase())}function a(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(s){var r=0,u,d=[];for(r=0,u;r<s.length;r++)(u=n(s,r))!==!1&&d.push(u);return d}function n(s,r){var u=s.charCodeAt(r);if(isNaN(u))return"";if(u<55296||u>57343)return s.charAt(r);if(55296<=u&&u<=56319){if(s.length<=r+1)throw"High surrogate without following low surrogate";var d=s.charCodeAt(r+1);if(56320>d||d>57343)throw"High surrogate without following low surrogate";return s.charAt(r)+s.charAt(r+1)}if(r===0)throw"Low surrogate without preceding high surrogate";var l=s.charCodeAt(r-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:h,capitalize:i,escapeXml:a,graphemeSplit:c}}(),function(){var h=Array.prototype.slice,i=function(){},a=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),c=function(u,d,l){for(var g in d)g in u.prototype&&typeof u.prototype[g]=="function"&&(d[g]+"").indexOf("callSuper")>-1?u.prototype[g]=function(v){return function(){var _=this.constructor.superclass;this.constructor.superclass=l;var y=d[v].apply(this,arguments);if(this.constructor.superclass=_,v!=="initialize")return y}}(g):u.prototype[g]=d[g],a&&(d.toString!==Object.prototype.toString&&(u.prototype.toString=d.toString),d.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=d.valueOf))};function n(){}function s(u){for(var d=null,l=this;l.constructor.superclass;){var g=l.constructor.superclass.prototype[u];if(l[u]!==g){d=g;break}l=l.constructor.superclass.prototype}return d?arguments.length>1?d.apply(this,h.call(arguments,1)):d.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function r(){var u=null,d=h.call(arguments,0);typeof d[0]=="function"&&(u=d.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=u,l.subclasses=[],u&&(n.prototype=u.prototype,l.prototype=new n,u.subclasses.push(l));for(var g=0,v=d.length;g<v;g++)c(l,d[g],u);return l.prototype.initialize||(l.prototype.initialize=i),l.prototype.constructor=l,l.prototype.callSuper=s,l}e.util.createClass=r}(),function(){var h=!!e.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];e.util.addListener=function(c,n,s,r){c&&c.addEventListener(n,s,h?!1:r)},e.util.removeListener=function(c,n,s,r){c&&c.removeEventListener(n,s,h?!1:r)};function a(c){var n=c.changedTouches;return n&&n[0]?n[0]:c}e.util.getPointer=function(c){var n=c.target,s=e.util.getScrollLeftTop(n),r=a(c);return{x:r.clientX+s.left,y:r.clientY+s.top}},e.util.isTouchEvent=function(c){return i.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function h(r,u){var d=r.style;if(!d)return r;if(typeof u=="string")return r.style.cssText+=";"+u,u.indexOf("opacity")>-1?s(r,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):r;for(var l in u)if(l==="opacity")s(r,u[l]);else{var g=l==="float"||l==="cssFloat"?typeof d.styleFloat=="undefined"?"cssFloat":"styleFloat":l;d[g]=u[l]}return r}var i=e.document.createElement("div"),a=typeof i.style.opacity=="string",c=typeof i.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(r){return r};a?s=function(r,u){return r.style.opacity=u,r}:c&&(s=function(r,u){var d=r.style;return r.currentStyle&&!r.currentStyle.hasLayout&&(d.zoom=1),n.test(d.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",d.filter=d.filter.replace(n,u)):d.filter+=" alpha(opacity="+u*100+")",r}),e.util.setStyle=h}(),function(){var h=Array.prototype.slice;function i(y){return typeof y=="string"?e.document.getElementById(y):y}var a,c=function(y){return h.call(y,0)};try{a=c(e.document.childNodes)instanceof Array}catch{}a||(c=function(y){for(var C=new Array(y.length),S=y.length;S--;)C[S]=y[S];return C});function n(y,C){var S=e.document.createElement(y);for(var x in C)x==="class"?S.className=C[x]:x==="for"?S.htmlFor=C[x]:S.setAttribute(x,C[x]);return S}function s(y,C){y&&(" "+y.className+" ").indexOf(" "+C+" ")===-1&&(y.className+=(y.className?" ":"")+C)}function r(y,C,S){return typeof C=="string"&&(C=n(C,S)),y.parentNode&&y.parentNode.replaceChild(C,y),C.appendChild(y),C}function u(y){for(var C=0,S=0,x=e.document.documentElement,T=e.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===e.document?(C=T.scrollLeft||x.scrollLeft||0,S=T.scrollTop||x.scrollTop||0):(C+=y.scrollLeft||0,S+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:C,top:S}}function d(y){var C,S=y&&y.ownerDocument,x={left:0,top:0},T={left:0,top:0},D,j={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return T;for(var U in j)T[j[U]]+=parseInt(l(y,U),10)||0;return C=S.documentElement,typeof y.getBoundingClientRect!="undefined"&&(x=y.getBoundingClientRect()),D=u(y),{left:x.left+D.left-(C.clientLeft||0)+T.left,top:x.top+D.top-(C.clientTop||0)+T.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(y,C){var S=e.document.defaultView.getComputedStyle(y,null);return S?S[C]:void 0}:l=function(y,C){var S=y.style[C];return!S&&y.currentStyle&&(S=y.currentStyle[C]),S},function(){var y=e.document.documentElement.style,C="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function S(T){return typeof T.onselectstart!="undefined"&&(T.onselectstart=e.util.falseFunction),C?T.style[C]="none":typeof T.unselectable=="string"&&(T.unselectable="on"),T}function x(T){return typeof T.onselectstart!="undefined"&&(T.onselectstart=null),C?T.style[C]="":typeof T.unselectable=="string"&&(T.unselectable=""),T}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=x}();function g(y){var C=e.jsdomImplForWrapper(y);return C._canvas||C._image}function v(y){if(!!e.isLikelyNode){var C=e.jsdomImplForWrapper(y);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function _(y,C){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=C}e.util.setImageSmoothing=_,e.util.getById=i,e.util.toArray=c,e.util.addClass=s,e.util.makeElement=n,e.util.wrapElement=r,e.util.getScrollLeftTop=u,e.util.getElementOffset=d,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=v}(),function(){function h(c,n){return c+(/\?/.test(c)?"&":"?")+n}function i(){}function a(c,n){n||(n={});var s=n.method?n.method.toUpperCase():"GET",r=n.onComplete||function(){},u=new e.window.XMLHttpRequest,d=n.body||n.parameters;return u.onreadystatechange=function(){u.readyState===4&&(r(u),u.onreadystatechange=i)},s==="GET"&&(d=null,typeof n.parameters=="string"&&(c=h(c,n.parameters))),u.open(s,c,!0),(s==="POST"||s==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(d),u}e.util.request=a}(),e.log=console.log,e.warn=console.warn,function(){function h(){return!1}function i(u,d,l,g){return-l*Math.cos(u/g*(Math.PI/2))+l+d}function a(u){var d=!1;return s(function(l){u||(u={});var g=l||+new Date,v=u.duration||500,_=g+v,y,C=u.onChange||h,S=u.abort||h,x=u.onComplete||h,T=u.easing||i,D="startValue"in u?u.startValue:0,j="endValue"in u?u.endValue:100,U=u.byValue||j-D;u.onStart&&u.onStart(),function H(Q){y=Q||+new Date;var K=y>_?v:y-g,re=K/v,se=T(K,D,U,v),oe=Math.abs((se-D)/U);if(!d){if(S(se,oe,re)){x(j,1,1);return}if(y>_){C(j,1,1),x(j,1,1);return}else C(se,oe,re),s(H)}}(g)}),function(){d=!0}}var c=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(u){return e.window.setTimeout(u,1e3/60)},n=e.window.cancelAnimationFrame||e.window.clearTimeout;function s(){return c.apply(e.window,arguments)}function r(){return n.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=s,e.util.cancelAnimFrame=r}(),function(){function h(a,c,n){var s="rgba("+parseInt(a[0]+n*(c[0]-a[0]),10)+","+parseInt(a[1]+n*(c[1]-a[1]),10)+","+parseInt(a[2]+n*(c[2]-a[2]),10);return s+=","+(a&&c?parseFloat(a[3]+n*(c[3]-a[3])):1),s+=")",s}function i(a,c,n,s){var r=new e.Color(a).getSource(),u=new e.Color(c).getSource(),d=s.onComplete,l=s.onChange;return s=s||{},e.util.animate(e.util.object.extend(s,{duration:n||500,startValue:r,endValue:u,byValue:u,easing:function(g,v,_,y){var C=s.colorEasing?s.colorEasing(g,y):1-Math.cos(g/y*(Math.PI/2));return h(v,_,C)},onComplete:function(g,v,_){if(d)return d(h(u,u,0),v,_)},onChange:function(g,v,_){if(l){if(Array.isArray(g))return l(h(g,g,0),v,_);l(g,v,_)}}}))}e.util.animateColor=i}(),function(){function h(R,W,P,B){return R<Math.abs(W)?(R=W,B=P/4):W===0&&R===0?B=P/(2*Math.PI)*Math.asin(1):B=P/(2*Math.PI)*Math.asin(W/R),{a:R,c:W,p:P,s:B}}function i(R,W,P){return R.a*Math.pow(2,10*(W-=1))*Math.sin((W*P-R.s)*(2*Math.PI)/R.p)}function a(R,W,P,B){return P*((R=R/B-1)*R*R+1)+W}function c(R,W,P,B){return R/=B/2,R<1?P/2*R*R*R+W:P/2*((R-=2)*R*R+2)+W}function n(R,W,P,B){return P*(R/=B)*R*R*R+W}function s(R,W,P,B){return-P*((R=R/B-1)*R*R*R-1)+W}function r(R,W,P,B){return R/=B/2,R<1?P/2*R*R*R*R+W:-P/2*((R-=2)*R*R*R-2)+W}function u(R,W,P,B){return P*(R/=B)*R*R*R*R+W}function d(R,W,P,B){return P*((R=R/B-1)*R*R*R*R+1)+W}function l(R,W,P,B){return R/=B/2,R<1?P/2*R*R*R*R*R+W:P/2*((R-=2)*R*R*R*R+2)+W}function g(R,W,P,B){return-P*Math.cos(R/B*(Math.PI/2))+P+W}function v(R,W,P,B){return P*Math.sin(R/B*(Math.PI/2))+W}function _(R,W,P,B){return-P/2*(Math.cos(Math.PI*R/B)-1)+W}function y(R,W,P,B){return R===0?W:P*Math.pow(2,10*(R/B-1))+W}function C(R,W,P,B){return R===B?W+P:P*(-Math.pow(2,-10*R/B)+1)+W}function S(R,W,P,B){return R===0?W:R===B?W+P:(R/=B/2,R<1?P/2*Math.pow(2,10*(R-1))+W:P/2*(-Math.pow(2,-10*--R)+2)+W)}function x(R,W,P,B){return-P*(Math.sqrt(1-(R/=B)*R)-1)+W}function T(R,W,P,B){return P*Math.sqrt(1-(R=R/B-1)*R)+W}function D(R,W,P,B){return R/=B/2,R<1?-P/2*(Math.sqrt(1-R*R)-1)+W:P/2*(Math.sqrt(1-(R-=2)*R)+1)+W}function j(R,W,P,B){var N=1.70158,A=0,O=P;if(R===0)return W;if(R/=B,R===1)return W+P;A||(A=B*.3);var M=h(O,P,A,N);return-i(M,R,B)+W}function U(R,W,P,B){var N=1.70158,A=0,O=P;if(R===0)return W;if(R/=B,R===1)return W+P;A||(A=B*.3);var M=h(O,P,A,N);return M.a*Math.pow(2,-10*R)*Math.sin((R*B-M.s)*(2*Math.PI)/M.p)+M.c+W}function H(R,W,P,B){var N=1.70158,A=0,O=P;if(R===0)return W;if(R/=B/2,R===2)return W+P;A||(A=B*(.3*1.5));var M=h(O,P,A,N);return R<1?-.5*i(M,R,B)+W:M.a*Math.pow(2,-10*(R-=1))*Math.sin((R*B-M.s)*(2*Math.PI)/M.p)*.5+M.c+W}function Q(R,W,P,B,N){return N===void 0&&(N=1.70158),P*(R/=B)*R*((N+1)*R-N)+W}function K(R,W,P,B,N){return N===void 0&&(N=1.70158),P*((R=R/B-1)*R*((N+1)*R+N)+1)+W}function re(R,W,P,B,N){return N===void 0&&(N=1.70158),R/=B/2,R<1?P/2*(R*R*(((N*=1.525)+1)*R-N))+W:P/2*((R-=2)*R*(((N*=1.525)+1)*R+N)+2)+W}function se(R,W,P,B){return P-oe(B-R,0,P,B)+W}function oe(R,W,P,B){return(R/=B)<1/2.75?P*(7.5625*R*R)+W:R<2/2.75?P*(7.5625*(R-=1.5/2.75)*R+.75)+W:R<2.5/2.75?P*(7.5625*(R-=2.25/2.75)*R+.9375)+W:P*(7.5625*(R-=2.625/2.75)*R+.984375)+W}function ae(R,W,P,B){return R<B/2?se(R*2,0,P,B)*.5+W:oe(R*2-B,0,P,B)*.5+P*.5+W}e.util.ease={easeInQuad:function(R,W,P,B){return P*(R/=B)*R+W},easeOutQuad:function(R,W,P,B){return-P*(R/=B)*(R-2)+W},easeInOutQuad:function(R,W,P,B){return R/=B/2,R<1?P/2*R*R+W:-P/2*(--R*(R-2)-1)+W},easeInCubic:function(R,W,P,B){return P*(R/=B)*R*R+W},easeOutCubic:a,easeInOutCubic:c,easeInQuart:n,easeOutQuart:s,easeInOutQuart:r,easeInQuint:u,easeOutQuint:d,easeInOutQuint:l,easeInSine:g,easeOutSine:v,easeInOutSine:_,easeInExpo:y,easeOutExpo:C,easeInOutExpo:S,easeInCirc:x,easeOutCirc:T,easeInOutCirc:D,easeInElastic:j,easeOutElastic:U,easeInOutElastic:H,easeInBack:Q,easeOutBack:K,easeInOutBack:re,easeInBounce:se,easeOutBounce:oe,easeInOutBounce:ae}}(),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.util.object.clone,n=i.util.toFixed,s=i.util.parseUnit,r=i.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],d=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",C="clip-path";i.svgValidTagNamesRegEx=T(u),i.svgViewBoxElementsRegEx=T(d),i.svgInvalidAncestorsRegEx=T(l),i.svgValidParentsRegEx=T(g),i.cssRules={},i.gradientDefs={},i.clipPaths={};function S(A){return A in v?v[A]:A}function x(A,O,M,F){var q=Object.prototype.toString.call(O)==="[object Array]",L;if((A==="fill"||A==="stroke")&&O==="none")O="";else{if(A==="strokeUniform")return O==="non-scaling-stroke";if(A==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(A==="transformMatrix")M&&M.transformMatrix?O=r(M.transformMatrix,i.parseTransformAttribute(O)):O=i.parseTransformAttribute(O);else if(A==="visible")O=O!=="none"&&O!=="hidden",M&&M.visible===!1&&(O=!1);else if(A==="opacity")O=parseFloat(O),M&&typeof M.opacity!="undefined"&&(O*=M.opacity);else if(A==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(A==="charSpacing")L=s(O,F)/F*1e3;else if(A==="paintFirst"){var Y=O.indexOf("fill"),V=O.indexOf("stroke"),O="fill";(Y>-1&&V>-1&&V<Y||Y===-1&&V>-1)&&(O="stroke")}else{if(A==="href"||A==="xlink:href"||A==="font")return O;if(A==="imageSmoothing")return O==="optimizeQuality";L=q?O.map(s):s(O,F)}}return!q&&isNaN(L)?O:L}function T(A){return new RegExp("^("+A.join("|")+")\\b","i")}function D(A){for(var O in _)if(!(typeof A[_[O]]=="undefined"||A[O]==="")){if(typeof A[O]=="undefined"){if(!i.Object.prototype[O])continue;A[O]=i.Object.prototype[O]}if(A[O].indexOf("url(")!==0){var M=new i.Color(A[O]);A[O]=M.setAlpha(n(M.getAlpha()*A[_[O]],2)).toRgba()}}return A}function j(A,O){var M,F=[],q,L,Y;for(L=0,Y=O.length;L<Y;L++)M=O[L],q=A.getElementsByTagName(M),F=F.concat(Array.prototype.slice.call(q));return F}i.parseTransformAttribute=function(){function A(Z,ce){var fe=i.util.cos(ce[0]),ve=i.util.sin(ce[0]),Pe=0,_e=0;ce.length===3&&(Pe=ce[1],_e=ce[2]),Z[0]=fe,Z[1]=ve,Z[2]=-ve,Z[3]=fe,Z[4]=Pe-(fe*Pe-ve*_e),Z[5]=_e-(ve*Pe+fe*_e)}function O(Z,ce){var fe=ce[0],ve=ce.length===2?ce[1]:ce[0];Z[0]=fe,Z[3]=ve}function M(Z,ce,fe){Z[fe]=Math.tan(i.util.degreesToRadians(ce[0]))}function F(Z,ce){Z[4]=ce[0],ce.length===2&&(Z[5]=ce[1])}var q=i.iMatrix,L=i.reNum,Y=i.commaWsp,V="(?:(skewX)\\s*\\(\\s*("+L+")\\s*\\))",$="(?:(skewY)\\s*\\(\\s*("+L+")\\s*\\))",G="(?:(rotate)\\s*\\(\\s*("+L+")(?:"+Y+"("+L+")"+Y+"("+L+"))?\\s*\\))",k="(?:(scale)\\s*\\(\\s*("+L+")(?:"+Y+"("+L+"))?\\s*\\))",z="(?:(translate)\\s*\\(\\s*("+L+")(?:"+Y+"("+L+"))?\\s*\\))",J="(?:(matrix)\\s*\\(\\s*("+L+")"+Y+"("+L+")"+Y+"("+L+")"+Y+"("+L+")"+Y+"("+L+")"+Y+"("+L+")\\s*\\))",X="(?:"+J+"|"+z+"|"+k+"|"+G+"|"+V+"|"+$+")",ee="(?:"+X+"(?:"+Y+"*"+X+")*)",ne="^\\s*(?:"+ee+"?)\\s*$",ue=new RegExp(ne),le=new RegExp(X,"g");return function(Z){var ce=q.concat(),fe=[];if(!Z||Z&&!ue.test(Z))return ce;Z.replace(le,function(Pe){var _e=new RegExp(X).exec(Pe).filter(function(be){return!!be}),pe=_e[1],ge=_e.slice(2).map(parseFloat);switch(pe){case"translate":F(ce,ge);break;case"rotate":ge[0]=i.util.degreesToRadians(ge[0]),A(ce,ge);break;case"scale":O(ce,ge);break;case"skewX":M(ce,ge,2);break;case"skewY":M(ce,ge,1);break;case"matrix":ce=ge;break}fe.push(ce.concat()),ce=q.concat()});for(var ve=fe[0];fe.length>1;)fe.shift(),ve=i.util.multiplyTransformMatrices(ve,fe[0]);return ve}}();function U(A,O){var M,F;A.replace(/;\s*$/,"").split(";").forEach(function(q){var L=q.split(":");M=L[0].trim().toLowerCase(),F=L[1].trim(),O[M]=F})}function H(A,O){var M,F;for(var q in A)typeof A[q]!="undefined"&&(M=q.toLowerCase(),F=A[q],O[M]=F)}function Q(A,O){var M={};for(var F in i.cssRules[O])if(K(A,F.split(" ")))for(var q in i.cssRules[O][F])M[q]=i.cssRules[O][F][q];return M}function K(A,O){var M,F=!0;return M=se(A,O.pop()),M&&O.length&&(F=re(A,O)),M&&F&&O.length===0}function re(A,O){for(var M,F=!0;A.parentNode&&A.parentNode.nodeType===1&&O.length;)F&&(M=O.pop()),A=A.parentNode,F=se(A,M);return O.length===0}function se(A,O){var M=A.nodeName,F=A.getAttribute("class"),q=A.getAttribute("id"),L,Y;if(L=new RegExp("^"+M,"i"),O=O.replace(L,""),q&&O.length&&(L=new RegExp("#"+q+"(?![a-zA-Z\\-]+)","i"),O=O.replace(L,"")),F&&O.length)for(F=F.split(" "),Y=F.length;Y--;)L=new RegExp("\\."+F[Y]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(L,"");return O.length===0}function oe(A,O){var M;if(A.getElementById&&(M=A.getElementById(O)),M)return M;var F,q,L,Y=A.getElementsByTagName("*");for(q=0,L=Y.length;q<L;q++)if(F=Y[q],O===F.getAttribute("id"))return F}function ae(A){for(var O=j(A,["use","svg:use"]),M=0;O.length&&M<O.length;){var F=O[M],q=F.getAttribute("xlink:href")||F.getAttribute("href");if(q===null)return;var L=q.substr(1),Y=F.getAttribute("x")||0,V=F.getAttribute("y")||0,$=oe(A,L).cloneNode(!0),G=($.getAttribute("transform")||"")+" translate("+Y+", "+V+")",k,z=O.length,J,X,ee,ne,ue=i.svgNS;if(W($),/^svg$/i.test($.nodeName)){var le=$.ownerDocument.createElementNS(ue,"g");for(X=0,ee=$.attributes,ne=ee.length;X<ne;X++)J=ee.item(X),le.setAttributeNS(ue,J.nodeName,J.nodeValue);for(;$.firstChild;)le.appendChild($.firstChild);$=le}for(X=0,ee=F.attributes,ne=ee.length;X<ne;X++)J=ee.item(X),!(J.nodeName==="x"||J.nodeName==="y"||J.nodeName==="xlink:href"||J.nodeName==="href")&&(J.nodeName==="transform"?G=J.nodeValue+" "+G:$.setAttribute(J.nodeName,J.nodeValue));$.setAttribute("transform",G),$.setAttribute("instantiated_by_use","1"),$.removeAttribute("id"),k=F.parentNode,k.replaceChild($,F),O.length===z&&M++}}var R=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function W(A){if(!i.svgViewBoxElementsRegEx.test(A.nodeName))return{};var O=A.getAttribute("viewBox"),M=1,F=1,q=0,L=0,Y,V,$,G,k=A.getAttribute("width"),z=A.getAttribute("height"),J=A.getAttribute("x")||0,X=A.getAttribute("y")||0,ee=A.getAttribute("preserveAspectRatio")||"",ne=!O||!(O=O.match(R)),ue=!k||!z||k==="100%"||z==="100%",le=ne&&ue,Z={},ce="",fe=0,ve=0;if(Z.width=0,Z.height=0,Z.toBeParsed=le,ne&&(J||X)&&A.parentNode&&A.parentNode.nodeName!=="#document"&&(ce=" translate("+s(J)+" "+s(X)+") ",$=(A.getAttribute("transform")||"")+ce,A.setAttribute("transform",$),A.removeAttribute("x"),A.removeAttribute("y")),le)return Z;if(ne)return Z.width=s(k),Z.height=s(z),Z;if(q=-parseFloat(O[1]),L=-parseFloat(O[2]),Y=parseFloat(O[3]),V=parseFloat(O[4]),Z.minX=q,Z.minY=L,Z.viewBoxWidth=Y,Z.viewBoxHeight=V,ue?(Z.width=Y,Z.height=V):(Z.width=s(k),Z.height=s(z),M=Z.width/Y,F=Z.height/V),ee=i.util.parsePreserveAspectRatioAttribute(ee),ee.alignX!=="none"&&(ee.meetOrSlice==="meet"&&(F=M=M>F?F:M),ee.meetOrSlice==="slice"&&(F=M=M>F?M:F),fe=Z.width-Y*M,ve=Z.height-V*M,ee.alignX==="Mid"&&(fe/=2),ee.alignY==="Mid"&&(ve/=2),ee.alignX==="Min"&&(fe=0),ee.alignY==="Min"&&(ve=0)),M===1&&F===1&&q===0&&L===0&&J===0&&X===0)return Z;if((J||X)&&A.parentNode.nodeName!=="#document"&&(ce=" translate("+s(J)+" "+s(X)+") "),$=ce+" matrix("+M+" 0 0 "+F+" "+(q*M+fe)+" "+(L*F+ve)+") ",A.nodeName==="svg"){for(G=A.ownerDocument.createElementNS(i.svgNS,"g");A.firstChild;)G.appendChild(A.firstChild);A.appendChild(G)}else G=A,G.removeAttribute("x"),G.removeAttribute("y"),$=G.getAttribute("transform")+$;return G.setAttribute("transform",$),Z}function P(A,O){for(;A&&(A=A.parentNode);)if(A.nodeName&&O.test(A.nodeName.replace("svg:",""))&&!A.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(A,O,M,F){if(!!A){ae(A);var q=i.Object.__uid++,L,Y,V=W(A),$=i.util.toArray(A.getElementsByTagName("*"));if(V.crossOrigin=F&&F.crossOrigin,V.svgUid=q,$.length===0&&i.isLikelyNode){$=A.selectNodes('//*[name(.)!="svg"]');var G=[];for(L=0,Y=$.length;L<Y;L++)G[L]=$[L];$=G}var k=$.filter(function(J){return W(J),i.svgValidTagNamesRegEx.test(J.nodeName.replace("svg:",""))&&!P(J,i.svgInvalidAncestorsRegEx)});if(!k||k&&!k.length){O&&O([],{});return}var z={};$.filter(function(J){return J.nodeName.replace("svg:","")==="clipPath"}).forEach(function(J){var X=J.getAttribute("id");z[X]=i.util.toArray(J.getElementsByTagName("*")).filter(function(ee){return i.svgValidTagNamesRegEx.test(ee.nodeName.replace("svg:",""))})}),i.gradientDefs[q]=i.getGradientDefs(A),i.cssRules[q]=i.getCSSRules(A),i.clipPaths[q]=z,i.parseElements(k,function(J,X){O&&(O(J,V,X,$),delete i.gradientDefs[q],delete i.cssRules[q],delete i.clipPaths[q])},c(V),M,F)}};function B(A,O){var M=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],F="xlink:href",q=O.getAttribute(F).substr(1),L=oe(A,q);if(L&&L.getAttribute(F)&&B(A,L),M.forEach(function(V){L&&!O.hasAttribute(V)&&L.hasAttribute(V)&&O.setAttribute(V,L.getAttribute(V))}),!O.children.length)for(var Y=L.cloneNode(!0);Y.firstChild;)O.appendChild(Y.firstChild);O.removeAttribute(F)}var N=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");a(i,{parseFontDeclaration:function(A,O){var M=A.match(N);if(!!M){var F=M[1],q=M[3],L=M[4],Y=M[5],V=M[6];F&&(O.fontStyle=F),q&&(O.fontWeight=isNaN(parseFloat(q))?q:parseFloat(q)),L&&(O.fontSize=s(L)),V&&(O.fontFamily=V),Y&&(O.lineHeight=Y==="normal"?1:Y)}},getGradientDefs:function(A){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],M=j(A,O),F,q=0,L={};for(q=M.length;q--;)F=M[q],F.getAttribute("xlink:href")&&B(A,F),L[F.getAttribute("id")]=F;return L},parseAttributes:function(A,O,M){if(!!A){var F,q={},L,Y;typeof M=="undefined"&&(M=A.getAttribute("svgUid")),A.parentNode&&i.svgValidParentsRegEx.test(A.parentNode.nodeName)&&(q=i.parseAttributes(A.parentNode,O,M));var V=O.reduce(function(ee,ne){return F=A.getAttribute(ne),F&&(ee[ne]=F),ee},{}),$=a(Q(A,M),i.parseStyleAttribute(A));V=a(V,$),$[C]&&A.setAttribute(C,$[C]),L=Y=q.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,V[y]&&(V[y]=L=s(V[y],Y));var G,k,z={};for(var J in V)G=S(J),k=x(G,V[J],q,L),z[G]=k;z&&z.font&&i.parseFontDeclaration(z.font,z);var X=a(q,z);return i.svgValidParentsRegEx.test(A.nodeName)?X:D(X)}},parseElements:function(A,O,M,F,q){new i.ElementsParser(A,O,M,F,q).parse()},parseStyleAttribute:function(A){var O={},M=A.getAttribute("style");return M&&(typeof M=="string"?U(M,O):H(M,O)),O},parsePointsAttribute:function(A){if(!A)return null;A=A.replace(/,/g," ").trim(),A=A.split(/\s+/);var O=[],M,F;for(M=0,F=A.length;M<F;M+=2)O.push({x:parseFloat(A[M]),y:parseFloat(A[M+1])});return O},getCSSRules:function(A){var O=A.getElementsByTagName("style"),M,F,q={},L;for(M=0,F=O.length;M<F;M++){var Y=O[M].textContent;Y=Y.replace(/\/\*[\s\S]*?\*\//g,""),Y.trim()!==""&&(L=Y.match(/[^{]*\{[\s\S]*?\}/g),L=L.map(function(V){return V.trim()}),L.forEach(function(V){var $=V.match(/([\s\S]*?)\s*\{([^}]*)\}/),G={},k=$[2].trim(),z=k.replace(/;$/,"").split(/\s*;\s*/);for(M=0,F=z.length;M<F;M++){var J=z[M].split(/\s*:\s*/),X=J[0],ee=J[1];G[X]=ee}V=$[1],V.split(",").forEach(function(ne){ne=ne.replace(/^svg/i,"").trim(),ne!==""&&(q[ne]?i.util.object.extend(q[ne],G):q[ne]=i.util.object.clone(G))})}))}return q},loadSVGFromURL:function(A,O,M,F){A=A.replace(/^\n\s*/,"").trim(),new i.util.request(A,{method:"get",onComplete:q});function q(L){var Y=L.responseXML;if(!Y||!Y.documentElement)return O&&O(null),!1;i.parseSVGDocument(Y.documentElement,function(V,$,G,k){O&&O(V,$,G,k)},M,F)}},loadSVGFromString:function(A,O,M,F){var q=new i.window.DOMParser,L=q.parseFromString(A.trim(),"text/xml");i.parseSVGDocument(L.documentElement,function(Y,V,$,G){O(Y,V,$,G)},M,F)}})}(t),e.ElementsParser=function(h,i,a,c,n,s){this.elements=h,this.callback=i,this.options=a,this.reviver=c,this.svgUid=a&&a.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var i=this;this.elements.forEach(function(a,c){a.setAttribute("svgUid",i.svgUid),i.createObject(a,c)})},h.findTag=function(i){return e[e.util.string.capitalize(i.tagName.replace("svg:",""))]},h.createObject=function(i,a){var c=this.findTag(i);if(c&&c.fromElement)try{c.fromElement(i,this.createCallback(a,i),this.options)}catch(n){e.log(n)}else this.checkIfDone()},h.createCallback=function(i,a){var c=this;return function(n){var s;c.resolveGradient(n,a,"fill"),c.resolveGradient(n,a,"stroke"),n instanceof e.Image&&n._originalElement&&(s=n.parsePreserveAspectRatioAttribute(a)),n._removeTransformMatrix(s),c.resolveClipPath(n,a),c.reviver&&c.reviver(a,n),c.instances[i]=n,c.checkIfDone()}},h.extractPropertyDefinition=function(i,a,c){var n=i[a],s=this.regexUrl;if(!!s.test(n)){s.lastIndex=0;var r=s.exec(n)[1];return s.lastIndex=0,e[c][this.svgUid][r]}},h.resolveGradient=function(i,a,c){var n=this.extractPropertyDefinition(i,c,"gradientDefs");if(n){var s=a.getAttribute(c+"-opacity"),r=e.Gradient.fromElement(n,i,s,this.options);i.set(c,r)}},h.createClipPathCallback=function(i,a){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,a.push(c)}},h.resolveClipPath=function(i,a){var c=this.extractPropertyDefinition(i,"clipPath","clipPaths"),n,s,r,u,d,l;if(c){u=[],r=e.util.invertTransform(i.calcTransformMatrix());for(var g=c[0].parentNode,v=a;v.parentNode&&v.getAttribute("clip-path")!==i.clipPath;)v=v.parentNode;v.parentNode.appendChild(g);for(var _=0;_<c.length;_++)n=c[_],s=this.findTag(n),s.fromElement(n,this.createClipPathCallback(i,u),this.options);u.length===1?c=u[0]:c=new e.Group(u),d=e.util.multiplyTransformMatrices(r,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,v);var l=e.util.qrDecompose(d);c.flipX=!1,c.flipY=!1,c.set("scaleX",l.scaleX),c.set("scaleY",l.scaleY),c.angle=l.angle,c.skewX=l.skewX,c.skewY=0,c.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),i.clipPath=c}else delete i.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(h){var i=h.fabric||(h.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=a;function a(c,n){this.x=c,this.y=n}a.prototype={type:"point",constructor:a,add:function(c){return new a(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new a(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new a(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new a(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new a(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new a(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,n){return typeof n=="undefined"&&(n=.5),n=Math.max(Math.min(1,n),0),new a(this.x+(c.x-this.x)*n,this.y+(c.y-this.y)*n)},distanceFrom:function(c){var n=this.x-c.x,s=this.y-c.y;return Math.sqrt(n*n+s*s)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new a(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new a(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,n){return this.x=c,this.y=n,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var n=this.x,s=this.y;this.x=c.x,this.y=c.y,c.x=n,c.y=s},clone:function(){return new a(this.x,this.y)}}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function a(c){this.status=c,this.points=[]}i.Intersection=a,i.Intersection.prototype={constructor:a,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},i.Intersection.intersectLineLine=function(c,n,s,r){var u,d=(r.x-s.x)*(c.y-s.y)-(r.y-s.y)*(c.x-s.x),l=(n.x-c.x)*(c.y-s.y)-(n.y-c.y)*(c.x-s.x),g=(r.y-s.y)*(n.x-c.x)-(r.x-s.x)*(n.y-c.y);if(g!==0){var v=d/g,_=l/g;0<=v&&v<=1&&0<=_&&_<=1?(u=new a("Intersection"),u.appendPoint(new i.Point(c.x+v*(n.x-c.x),c.y+v*(n.y-c.y)))):u=new a}else d===0||l===0?u=new a("Coincident"):u=new a("Parallel");return u},i.Intersection.intersectLinePolygon=function(c,n,s){var r=new a,u=s.length,d,l,g,v;for(v=0;v<u;v++)d=s[v],l=s[(v+1)%u],g=a.intersectLineLine(c,n,d,l),r.appendPoints(g.points);return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonPolygon=function(c,n){var s=new a,r=c.length,u;for(u=0;u<r;u++){var d=c[u],l=c[(u+1)%r],g=a.intersectLinePolygon(d,l,n);s.appendPoints(g.points)}return s.points.length>0&&(s.status="Intersection"),s},i.Intersection.intersectPolygonRectangle=function(c,n,s){var r=n.min(s),u=n.max(s),d=new i.Point(u.x,r.y),l=new i.Point(r.x,u.y),g=a.intersectLinePolygon(r,d,c),v=a.intersectLinePolygon(d,u,c),_=a.intersectLinePolygon(u,l,c),y=a.intersectLinePolygon(l,r,c),C=new a;return C.appendPoints(g.points),C.appendPoints(v.points),C.appendPoints(_.points),C.appendPoints(y.points),C.points.length>0&&(C.status="Intersection"),C}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function a(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}i.Color=a,i.Color.prototype={_tryParsingColor:function(n){var s;n in a.colorNameMap&&(n=a.colorNameMap[n]),n==="transparent"&&(s=[255,255,255,0]),s||(s=a.sourceFromHex(n)),s||(s=a.sourceFromRgb(n)),s||(s=a.sourceFromHsl(n)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(n,s,r){n/=255,s/=255,r/=255;var u,d,l,g=i.util.array.max([n,s,r]),v=i.util.array.min([n,s,r]);if(l=(g+v)/2,g===v)u=d=0;else{var _=g-v;switch(d=l>.5?_/(2-g-v):_/(g+v),g){case n:u=(s-r)/_+(s<r?6:0);break;case s:u=(r-n)/_+2;break;case r:u=(n-s)/_+4;break}u/=6}return[Math.round(u*360),Math.round(d*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),s=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var n=this.getSource(),s=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),s,r,u;return s=n[0].toString(16),s=s.length===1?"0"+s:s,r=n[1].toString(16),r=r.length===1?"0"+r:r,u=n[2].toString(16),u=u.length===1?"0"+u:u,s.toUpperCase()+r.toUpperCase()+u.toUpperCase()},toHexa:function(){var n=this.getSource(),s;return s=Math.round(n[3]*255),s=s.toString(16),s=s.length===1?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var s=this.getSource();return s[3]=n,this.setSource(s),this},toGrayscale:function(){var n=this.getSource(),s=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),r=n[3];return this.setSource([s,s,s,r]),this},toBlackWhite:function(n){var s=this.getSource(),r=(s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),u=s[3];return n=n||127,r=Number(r)<Number(n)?0:255,this.setSource([r,r,r,u]),this},overlayWith:function(n){n instanceof a||(n=new a(n));var s=[],r=this.getAlpha(),u=.5,d=this.getSource(),l=n.getSource(),g;for(g=0;g<3;g++)s.push(Math.round(d[g]*(1-u)+l[g]*u));return s[3]=r,this.setSource(s),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(n,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(s-n)*6*r:r<1/2?s:r<2/3?n+(s-n)*(2/3-r)*6:n}i.Color.fromRgb=function(n){return a.fromSource(a.sourceFromRgb(n))},i.Color.sourceFromRgb=function(n){var s=n.match(a.reRGBa);if(s){var r=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),u=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),d=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(r,10),parseInt(u,10),parseInt(d,10),s[4]?parseFloat(s[4]):1]}},i.Color.fromRgba=a.fromRgb,i.Color.fromHsl=function(n){return a.fromSource(a.sourceFromHsl(n))},i.Color.sourceFromHsl=function(n){var s=n.match(a.reHSLa);if(!!s){var r=(parseFloat(s[1])%360+360)%360/360,u=parseFloat(s[2])/(/%$/.test(s[2])?100:1),d=parseFloat(s[3])/(/%$/.test(s[3])?100:1),l,g,v;if(u===0)l=g=v=d;else{var _=d<=.5?d*(u+1):d+u-d*u,y=d*2-_;l=c(y,_,r+1/3),g=c(y,_,r),v=c(y,_,r-1/3)}return[Math.round(l*255),Math.round(g*255),Math.round(v*255),s[4]?parseFloat(s[4]):1]}},i.Color.fromHsla=a.fromHsl,i.Color.fromHex=function(n){return a.fromSource(a.sourceFromHex(n))},i.Color.sourceFromHex=function(n){if(n.match(a.reHex)){var s=n.slice(n.indexOf("#")+1),r=s.length===3||s.length===4,u=s.length===8||s.length===4,d=r?s.charAt(0)+s.charAt(0):s.substring(0,2),l=r?s.charAt(1)+s.charAt(1):s.substring(2,4),g=r?s.charAt(2)+s.charAt(2):s.substring(4,6),v=u?r?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(d,16),parseInt(l,16),parseInt(g,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},i.Color.fromSource=function(n){var s=new a;return s.setSource(n),s}}(t),function(h){var i=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],n={},s="left",r="top",u="right",d="bottom",l="center",g={top:d,bottom:r,left:u,right:s,center:l},v=i.util.radiansToDegrees,_=Math.sign||function(G){return(G>0)-(G<0)||+G};function y(G,k){var z=G.angle+v(Math.atan2(k.y,k.x))+360;return Math.round(z%360/45)}function C(G,k){var z=k.transform.target,J=z.canvas,X=i.util.object.clone(k);X.target=z,J&&J.fire("object:"+G,X),z.fire(G,k)}function S(G,k){var z=k.canvas,J=z.uniScaleKey,X=G[J];return z.uniformScaling&&!X||!z.uniformScaling&&X}function x(G){return G.originX===l&&G.originY===l}function T(G,k,z){var J=G.lockScalingX,X=G.lockScalingY;return!!(J&&X||!k&&(J||X)&&z||J&&k==="x"||X&&k==="y")}function D(G,k,z){var J="not-allowed",X=S(G,z),ee="";if(k.x!==0&&k.y===0?ee="x":k.x===0&&k.y!==0&&(ee="y"),T(z,ee,X))return J;var ne=y(z,k);return a[ne]+"-resize"}function j(G,k,z){var J="not-allowed";if(k.x!==0&&z.lockSkewingY||k.y!==0&&z.lockSkewingX)return J;var X=y(z,k)%4;return c[X]+"-resize"}function U(G,k,z){return G[z.canvas.altActionKey]?n.skewCursorStyleHandler(G,k,z):n.scaleCursorStyleHandler(G,k,z)}function H(G,k,z){var J=G[z.canvas.altActionKey];if(k.x===0)return J?"skewX":"scaleY";if(k.y===0)return J?"skewY":"scaleX"}function Q(G,k,z){return z.lockRotation?"not-allowed":k.cursorStyle}function K(G,k,z,J){return{e:G,transform:k,pointer:{x:z,y:J}}}function re(G){return function(k,z,J,X){var ee=z.target,ne=ee.getCenterPoint(),ue=ee.translateToOriginPoint(ne,z.originX,z.originY),le=G(k,z,J,X);return ee.setPositionByOrigin(ue,z.originX,z.originY),le}}function se(G,k){return function(z,J,X,ee){var ne=k(z,J,X,ee);return ne&&C(G,K(z,J,X,ee)),ne}}function oe(G,k,z,J,X){var ee=G.target,ne=ee.controls[G.corner],ue=ee.canvas.getZoom(),le=ee.padding/ue,Z=ee.toLocalPoint(new i.Point(J,X),k,z);return Z.x>=le&&(Z.x-=le),Z.x<=-le&&(Z.x+=le),Z.y>=le&&(Z.y-=le),Z.y<=le&&(Z.y+=le),Z.x-=ne.offsetX,Z.y-=ne.offsetY,Z}function ae(G){return G.flipX!==G.flipY}function R(G,k,z,J,X){if(G[k]!==0){var ee=G._getTransformedDimensions()[J],ne=X/ee*G[z];G.set(z,ne)}}function W(G,k,z,J){var X=k.target,ee=X._getTransformedDimensions(0,X.skewY),ne=oe(k,k.originX,k.originY,z,J),ue=Math.abs(ne.x*2)-ee.x,le=X.skewX,Z;ue<2?Z=0:(Z=v(Math.atan2(ue/X.scaleX,ee.y/X.scaleY)),k.originX===s&&k.originY===d&&(Z=-Z),k.originX===u&&k.originY===r&&(Z=-Z),ae(X)&&(Z=-Z));var ce=le!==Z;if(ce){var fe=X._getTransformedDimensions().y;X.set("skewX",Z),R(X,"skewY","scaleY","y",fe)}return ce}function P(G,k,z,J){var X=k.target,ee=X._getTransformedDimensions(X.skewX,0),ne=oe(k,k.originX,k.originY,z,J),ue=Math.abs(ne.y*2)-ee.y,le=X.skewY,Z;ue<2?Z=0:(Z=v(Math.atan2(ue/X.scaleY,ee.x/X.scaleX)),k.originX===s&&k.originY===d&&(Z=-Z),k.originX===u&&k.originY===r&&(Z=-Z),ae(X)&&(Z=-Z));var ce=le!==Z;if(ce){var fe=X._getTransformedDimensions().x;X.set("skewY",Z),R(X,"skewX","scaleX","x",fe)}return ce}function B(G,k,z,J){var X=k.target,ee=X.skewX,ne,ue=k.originY;if(X.lockSkewingX)return!1;if(ee===0){var le=oe(k,l,l,z,J);le.x>0?ne=s:ne=u}else ee>0&&(ne=ue===r?s:u),ee<0&&(ne=ue===r?u:s),ae(X)&&(ne=ne===s?u:s);k.originX=ne;var Z=se("skewing",re(W));return Z(G,k,z,J)}function N(G,k,z,J){var X=k.target,ee=X.skewY,ne,ue=k.originX;if(X.lockSkewingY)return!1;if(ee===0){var le=oe(k,l,l,z,J);le.y>0?ne=r:ne=d}else ee>0&&(ne=ue===s?r:d),ee<0&&(ne=ue===s?d:r),ae(X)&&(ne=ne===r?d:r);k.originY=ne;var Z=se("skewing",re(P));return Z(G,k,z,J)}function A(G,k,z,J){var X=k,ee=X.target,ne=ee.translateToOriginPoint(ee.getCenterPoint(),X.originX,X.originY);if(ee.lockRotation)return!1;var ue=Math.atan2(X.ey-ne.y,X.ex-ne.x),le=Math.atan2(J-ne.y,z-ne.x),Z=v(le-ue+X.theta),ce=!0;if(ee.snapAngle>0){var fe=ee.snapAngle,ve=ee.snapThreshold||fe,Pe=Math.ceil(Z/fe)*fe,_e=Math.floor(Z/fe)*fe;Math.abs(Z-_e)<ve?Z=_e:Math.abs(Z-Pe)<ve&&(Z=Pe)}return Z<0&&(Z=360+Z),Z%=360,ce=ee.angle!==Z,ee.angle=Z,ce}function O(G,k,z,J,X){X=X||{};var ee=k.target,ne=ee.lockScalingX,ue=ee.lockScalingY,le=X.by,Z,ce,fe,ve,Pe=S(G,ee),_e=T(ee,le,Pe),pe,ge,be=k.gestureScale;if(_e)return!1;if(be)ce=k.scaleX*be,fe=k.scaleY*be;else{if(Z=oe(k,k.originX,k.originY,z,J),pe=le!=="y"?_(Z.x):1,ge=le!=="x"?_(Z.y):1,k.signX||(k.signX=pe),k.signY||(k.signY=ge),ee.lockScalingFlip&&(k.signX!==pe||k.signY!==ge))return!1;if(ve=ee._getTransformedDimensions(),Pe&&!le){var Me=Math.abs(Z.x)+Math.abs(Z.y),dt=k.original,ie=Math.abs(ve.x*dt.scaleX/ee.scaleX)+Math.abs(ve.y*dt.scaleY/ee.scaleY),Ie=Me/ie;ce=dt.scaleX*Ie,fe=dt.scaleY*Ie}else ce=Math.abs(Z.x*ee.scaleX/ve.x),fe=Math.abs(Z.y*ee.scaleY/ve.y);x(k)&&(ce*=2,fe*=2),k.signX!==pe&&le!=="y"&&(k.originX=g[k.originX],ce*=-1,k.signX=pe),k.signY!==ge&&le!=="x"&&(k.originY=g[k.originY],fe*=-1,k.signY=ge)}var Le=ee.scaleX,Re=ee.scaleY;return le?(le==="x"&&ee.set("scaleX",ce),le==="y"&&ee.set("scaleY",fe)):(!ne&&ee.set("scaleX",ce),!ue&&ee.set("scaleY",fe)),Le!==ee.scaleX||Re!==ee.scaleY}function M(G,k,z,J){return O(G,k,z,J)}function F(G,k,z,J){return O(G,k,z,J,{by:"x"})}function q(G,k,z,J){return O(G,k,z,J,{by:"y"})}function L(G,k,z,J){return G[k.target.canvas.altActionKey]?n.skewHandlerX(G,k,z,J):n.scalingY(G,k,z,J)}function Y(G,k,z,J){return G[k.target.canvas.altActionKey]?n.skewHandlerY(G,k,z,J):n.scalingX(G,k,z,J)}function V(G,k,z,J){var X=k.target,ee=oe(k,k.originX,k.originY,z,J),ne=X.strokeWidth/(X.strokeUniform?X.scaleX:1),ue=x(k)?2:1,le=X.width,Z=Math.abs(ee.x*ue/X.scaleX)-ne;return X.set("width",Math.max(Z,0)),le!==Z}function $(G,k,z,J){var X=k.target,ee=z-k.offsetX,ne=J-k.offsetY,ue=!X.get("lockMovementX")&&X.left!==ee,le=!X.get("lockMovementY")&&X.top!==ne;return ue&&X.set("left",ee),le&&X.set("top",ne),(ue||le)&&C("moving",K(G,k,z,J)),ue||le}n.scaleCursorStyleHandler=D,n.skewCursorStyleHandler=j,n.scaleSkewCursorStyleHandler=U,n.rotationWithSnapping=se("rotating",re(A)),n.scalingEqually=se("scaling",re(M)),n.scalingX=se("scaling",re(F)),n.scalingY=se("scaling",re(q)),n.scalingYOrSkewingX=L,n.scalingXOrSkewingY=Y,n.changeWidth=se("resizing",re(V)),n.skewHandlerX=B,n.skewHandlerY=N,n.dragHandler=$,n.scaleOrSkewActionName=H,n.rotationStyleHandler=Q,n.fireEvent=C,n.wrapWithFixedAnchor=re,n.wrapWithFireEvent=se,n.getLocalPoint=oe,i.controlsUtils=n}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.degreesToRadians,c=i.controlsUtils;function n(r,u,d,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,_=this.sizeY||l.cornerSize||g.cornerSize,y=typeof l.transparentCorners!="undefined"?l.transparentCorners:g.transparentCorners,C=y?"stroke":"fill",S=!y&&(l.cornerStrokeColor||g.cornerStrokeColor),x=u,T=d,D;r.save(),r.fillStyle=l.cornerColor||g.cornerColor,r.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,v>_?(D=v,r.scale(1,_/v),T=d*v/_):_>v?(D=_,r.scale(v/_,1),x=u*_/v):D=v,r.lineWidth=1,r.beginPath(),r.arc(x,T,D/2,0,2*Math.PI,!1),r[C](),S&&r.stroke(),r.restore()}function s(r,u,d,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,_=this.sizeY||l.cornerSize||g.cornerSize,y=typeof l.transparentCorners!="undefined"?l.transparentCorners:g.transparentCorners,C=y?"stroke":"fill",S=!y&&(l.cornerStrokeColor||g.cornerStrokeColor),x=v/2,T=_/2;r.save(),r.fillStyle=l.cornerColor||g.cornerColor,r.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,r.lineWidth=1,r.translate(u,d),r.rotate(a(g.angle)),r[C+"Rect"](-x,-T,v,_),S&&r.strokeRect(-x,-T,v,_),r.restore()}c.renderCircleControl=n,c.renderSquareControl=s}(t),function(h){var i=h.fabric||(h.fabric={});function a(c){for(var n in c)this[n]=c[n]}i.Control=a,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,n){return n.cursorStyle},getActionName:function(c,n){return n.actionName},getVisibility:function(c,n){var s=c._controlsVisibility;return s&&typeof s[n]!="undefined"?s[n]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,n){var s=i.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},n);return s},calcCornerCoords:function(c,n,s,r,u){var d,l,g,v,_=u?this.touchSizeX:this.sizeX,y=u?this.touchSizeY:this.sizeY;if(_&&y&&_!==y){var C=Math.atan2(y,_),S=Math.sqrt(_*_+y*y)/2,x=C-i.util.degreesToRadians(c),T=Math.PI/2-C-i.util.degreesToRadians(c);d=S*i.util.cos(x),l=S*i.util.sin(x),g=S*i.util.cos(T),v=S*i.util.sin(T)}else{var D=_&&y?_:n;S=D*.7071067812;var x=i.util.degreesToRadians(45-c);d=g=S*i.util.cos(x),l=v=S*i.util.sin(x)}return{tl:{x:s-v,y:r-g},tr:{x:s+d,y:r-l},bl:{x:s-d,y:r+l},br:{x:s+v,y:r+g}}},render:function(c,n,s,r,u){switch(r=r||{},r.cornerStyle||u.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,c,n,s,r,u);break;default:i.controlsUtils.renderSquareControl.call(this,c,n,s,r,u)}}}}(t),function(){function h(s,r){var u=s.getAttribute("style"),d=s.getAttribute("offset")||0,l,g,v,_;if(d=parseFloat(d)/(/%$/.test(d)?100:1),d=d<0?0:d>1?1:d,u){var y=u.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),_=y.length;_--;){var C=y[_].split(/\s*:\s*/),S=C[0].trim(),x=C[1].trim();S==="stop-color"?l=x:S==="stop-opacity"&&(v=x)}}return l||(l=s.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=s.getAttribute("stop-opacity")),l=new e.Color(l),g=l.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=g*r,{offset:d,color:l.toRgb(),opacity:v}}function i(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}function a(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}var c=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var r,u=this;Object.keys(s).forEach(function(d){u[d]=s[d]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,r={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},this.type==="radial"&&(r.r1=s.coords.r1||0,r.r2=s.coords.r2||0),this.coords=r,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var r in s){var u=new e.Color(s[r]);this.colorStops.push({offset:parseFloat(r),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(s){var r={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,r,s),r},toSVG:function(s,g){var u=c(this.coords,!0),d,l,g=g||{},v,_,y=c(this.colorStops,!0),C=u.r1>u.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),x=-this.offsetX,T=-this.offsetY,D=!!g.additionalTransform,j=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(re,se){return re.offset-se.offset}),j==="objectBoundingBox"?(x/=s.width,T/=s.height):(x+=s.width/2,T+=s.height/2),s.type==="path"&&this.gradientUnits!=="percentage"&&(x-=s.pathOffset.x,T-=s.pathOffset.y),S[4]-=x,S[5]-=T,_='id="SVGID_'+this.id+'" gradientUnits="'+j+'"',_+=' gradientTransform="'+(D?g.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",_,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",_,' cx="',C?u.x1:u.x2,'" cy="',C?u.y1:u.y2,'" r="',C?u.r1:u.r2,'" fx="',C?u.x2:u.x1,'" fy="',C?u.y2:u.y1,`">
`]),this.type==="radial"){if(C)for(y=y.concat(),y.reverse(),d=0,l=y.length;d<l;d++)y[d].offset=1-y[d].offset;var U=Math.min(u.r1,u.r2);if(U>0){var H=Math.max(u.r1,u.r2),Q=U/H;for(d=0,l=y.length;d<l;d++)y[d].offset+=Q*(1-y[d].offset)}}for(d=0,l=y.length;d<l;d++){var K=y[d];v.push("<stop ",'offset="',K.offset*100+"%",'" style="stop-color:',K.color,typeof K.opacity!="undefined"?";stop-opacity: "+K.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(s){var r,u=e.util.object.clone(this.coords),d,l;if(!!this.type){for(this.type==="linear"?r=s.createLinearGradient(u.x1,u.y1,u.x2,u.y2):this.type==="radial"&&(r=s.createRadialGradient(u.x1,u.y1,u.r1,u.x2,u.y2,u.r2)),d=0,l=this.colorStops.length;d<l;d++){var g=this.colorStops[d].color,v=this.colorStops[d].opacity,_=this.colorStops[d].offset;typeof v!="undefined"&&(g=new e.Color(g).setAlpha(v).toRgba()),r.addColorStop(_,g)}return r}}}),e.util.object.extend(e.Gradient,{fromElement:function(s,r,u,d){var l=parseFloat(u)/(/%$/.test(u)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var g=s.getElementsByTagName("stop"),v,_=s.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=s.getAttribute("gradientTransform")||"",C=[],S,x,T=0,D=0,j;for(s.nodeName==="linearGradient"||s.nodeName==="LINEARGRADIENT"?(v="linear",S=i(s)):(v="radial",S=a(s)),x=g.length;x--;)C.push(h(g[x],l));j=e.parseTransformAttribute(y),n(r,S,d,_),_==="pixels"&&(T=-r.left,D=-r.top);var U=new e.Gradient({id:s.getAttribute("id"),type:v,coords:S,colorStops:C,gradientUnits:_,gradientTransform:j,offsetX:T,offsetY:D});return U}});function n(s,r,u,d){var l,g;Object.keys(r).forEach(function(v){l=r[v],l==="Infinity"?g=1:l==="-Infinity"?g=0:(g=parseFloat(r[v],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(g*=.01,d==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(g*=u.viewBoxWidth||u.width),(v==="y1"||v==="y2")&&(g*=u.viewBoxHeight||u.height)))),r[v]=g})}}(),function(){var h=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,a){if(i||(i={}),this.id=e.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){a&&a(this);return}else{var c=this;this.source=e.util.createImage(),e.util.loadImage(i.source,function(n,s){c.source=n,a&&a(c,s)},null,this.crossOrigin)}},toObject:function(i){var a=e.Object.NUM_FRACTION_DIGITS,c,n;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),n={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,a),offsetY:h(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,n,i),n},toSVG:function(i){var a=typeof this.source=="function"?this.source():this.source,c=a.width/i.width,n=a.height/i.height,s=this.offsetX/i.width,r=this.offsetY/i.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,r&&(n+=Math.abs(r))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,s&&(c+=Math.abs(s))),a.src?u=a.src:a.toDataURL&&(u=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+r+'" width="'+c+'" height="'+n+`">
<image x="0" y="0" width="`+a.width+'" height="'+a.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(i){for(var a in i)this[a]=i[a]},toLive:function(i){var a=this.source;return!a||typeof a.src!="undefined"&&(!a.complete||a.naturalWidth===0||a.naturalHeight===0)?"":i.createPattern(a,this.repeat)}})}(),function(h){var i=h.fabric||(h.fabric={}),a=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var n in c)this[n]=c[n];this.id=i.Object.__uid++},_parseShadow:function(c){var n=c.trim(),s=i.Shadow.reOffsetsAndBlur.exec(n)||[],r=n.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var n=40,s=40,r=i.Object.NUM_FRACTION_DIGITS,u=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-c.angle)),d=20,l=new i.Color(this.color);return c.width&&c.height&&(n=a((Math.abs(u.x)+this.blur)/c.width,r)*100+d,s=a((Math.abs(u.y)+this.blur)/c.height,r)*100+d),c.flipX&&(u.x*=-1),c.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+a(this.blur?this.blur/2:0,r)+`"></feGaussianBlur>
	<feOffset dx="`+a(u.x,r)+'" dy="'+a(u.y,r)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},n=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==n[s]&&(c[s]=this[s])},this),c}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var h=e.util.object.extend,i=e.util.getElementOffset,a=e.util.removeFromArray,c=e.util.toFixed,n=e.util.transformPoint,s=e.util.invertTransform,r=e.util.getNodeCanvas,u=e.util.createCanvasElement,d=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,g){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,v),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,v),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,v),g.overlayColor&&this.setOverlayColor(g.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,g,v){g.setAttribute("width",this.width*l),g.setAttribute("height",this.height*l),v.scale(l,l)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(l,g,v){return this.__setBgOverlayImage("overlayImage",l,g,v)},setBackgroundImage:function(l,g,v){return this.__setBgOverlayImage("backgroundImage",l,g,v)},setOverlayColor:function(l,g){return this.__setBgOverlayColor("overlayColor",l,g)},setBackgroundColor:function(l,g){return this.__setBgOverlayColor("backgroundColor",l,g)},__setBgOverlayImage:function(l,g,v,_){return typeof g=="string"?e.util.loadImage(g,function(y,C){if(y){var S=new e.Image(y,_);this[l]=S,S.canvas=this}v&&v(y,C)},this,_&&_.crossOrigin):(_&&g.setOptions(_),this[l]=g,g&&(g.canvas=this),v&&v(g,!1)),this},__setBgOverlayColor:function(l,g,v){return this[l]=g,this._initGradient(g,l),this._initPattern(g,l,v),this},_createCanvasElement:function(){var l=u();if(!l||(l.style||(l.style={}),typeof l.getContext=="undefined"))throw d;return l},_initOptions:function(l){var g=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,!!this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,g){return this.setDimensions({width:l},g)},setHeight:function(l,g){return this.setDimensions({height:l},g)},setDimensions:function(l,g){var v;g=g||{};for(var _ in l)v=l[_],g.cssOnly||(this._setBackstoreDimension(_,l[_]),v+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(_,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,g){return this.lowerCanvasEl[l]=g,this.upperCanvasEl&&(this.upperCanvasEl[l]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=g),this[l]=g,this},_setCssDimension:function(l,g){return this.lowerCanvasEl.style[l]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=g),this.wrapperEl&&(this.wrapperEl.style[l]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var g=this._activeObject,v=this.backgroundImage,_=this.overlayImage,y,C,S;for(this.viewportTransform=l,C=0,S=this._objects.length;C<S;C++)y=this._objects[C],y.group||y.setCoords(!0);return g&&g.setCoords(),v&&v.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,g){var v=l,_=this.viewportTransform.slice(0);l=n(l,s(this.viewportTransform)),_[0]=g,_[3]=g;var y=n(l,_);return _[4]+=v.x-y.x,_[5]+=v.y-y.y,this.setViewportTransform(_)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var g=this.viewportTransform.slice(0);return g[4]=-l.x,g[5]=-l.y,this.setViewportTransform(g)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},g=this.width,v=this.height,_=s(this.viewportTransform);return l.tl=n({x:0,y:0},_),l.br=n({x:g,y:v},_),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,g){var v=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(l,g),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var g=this.viewportTransform,v=this.clipPath;l.save(),l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.globalCompositeOperation="destination-in",v.transform(l),l.scale(1/v.zoomX,1/v.zoomY),l.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),l.restore()},_renderObjects:function(l,g){var v,_;for(v=0,_=g.length;v<_;++v)g[v]&&g[v].render(l)},_renderBackgroundOrOverlay:function(l,g){var v=this[g+"Color"],_=this[g+"Image"],y=this.viewportTransform,C=this[g+"Vpt"];if(!(!v&&!_)){if(v){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=v.toLive?v.toLive(l,this):v,C&&l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),l.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),l.fill(),l.restore()}_&&(l.save(),C&&l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),_.render(l),l.restore())}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenter().left,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenter().top))},centerObject:function(l){var g=this.getCenter();return this._centerObject(l,new e.Point(g.left,g.top))},viewportCenterObject:function(l){var g=this.getVpCenter();return this._centerObject(l,g)},viewportCenterObjectH:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(g.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,g.y))},getVpCenter:function(){var l=this.getCenter(),g=s(this.viewportTransform);return n({x:l.left,y:l.top},g)},_centerObject:function(l,g){return l.setPositionByOrigin(g,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,g){var v=this.clipPath,_={version:e.version,objects:this._toObjects(l,g)};return v&&!v.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,l,g)),h(_,this.__serializeBgOverlay(l,g)),e.util.populateWithProperties(this,_,g),_},_toObjects:function(l,g){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,l,g)},this)},_toObject:function(l,g,v){var _;this.includeDefaultValues||(_=l.includeDefaultValues,l.includeDefaultValues=!1);var y=l[g](v);return this.includeDefaultValues||(l.includeDefaultValues=_),y},__serializeBgOverlay:function(l,g){var v={},_=this.backgroundImage,y=this.overlayImage,C=this.backgroundColor,S=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(v.background=C.toObject(g)):C&&(v.background=C),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(g)):S&&(v.overlay=S),_&&!_.excludeFromExport&&(v.backgroundImage=this._toObject(_,l,g)),y&&!y.excludeFromExport&&(v.overlayImage=this._toObject(y,l,g)),v},svgViewportTransformation:!0,toSVG:function(l,g){l||(l={}),l.reviver=g;var v=[];return this._setSVGPreamble(v,l),this._setSVGHeader(v,l),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",g),this._setSVGObjects(v,g),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",g),v.push("</svg>"),v.join("")},_setSVGPreamble:function(l,g){g.suppressPreamble||l.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,g){var v=g.width||this.width,_=g.height||this.height,y,C='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;g.viewBox?C='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,C='viewBox="'+c(-y[4]/y[0],S)+" "+c(-y[5]/y[3],S)+" "+c(this.width/y[0],S)+" "+c(this.height/y[3],S)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',_,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(l){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,g=["background","overlay"].map(function(v){var _=l[v+"Color"];if(_&&_.toLive){var y=l[v+"Vpt"],C=l.viewportTransform,S={width:l.width/(y?C[0]:1),height:l.height/(y?C[3]:1)};return _.toSVG(S,{additionalTransform:y?e.util.matrixToSVG(C):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var l="",g={},v,_,y,C,S,x,T,D,j,U=e.fontPaths,H=[];for(this._objects.forEach(function K(re){H.push(re),re._objects&&re._objects.forEach(K)}),D=0,j=H.length;D<j;D++)if(v=H[D],_=v.fontFamily,!(v.type.indexOf("text")===-1||g[_]||!U[_])&&(g[_]=!0,!!v.styles)){y=v.styles;for(S in y){C=y[S];for(T in C)x=C[T],_=x.fontFamily,!g[_]&&U[_]&&(g[_]=!0)}}for(var Q in g)l+=[`		@font-face {
`,"			font-family: '",Q,`';
`,"			src: url('",U[Q],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,g){var v,_,y,C=this._objects;for(_=0,y=C.length;_<y;_++)v=C[_],!v.excludeFromExport&&this._setSVGObject(l,v,g)},_setSVGObject:function(l,g,v){l.push(g.toSVG(v))},_setSVGBgOverlayImage:function(l,g,v){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&l.push(this[g].toSVG(v))},_setSVGBgOverlayColor:function(l,g){var v=this[g+"Color"],_=this.viewportTransform,y=this.width,C=this.height;if(!!v)if(v.toLive){var S=v.repeat,x=e.util.invertTransform(_),T=this[g+"Vpt"],D=T?e.util.matrixToSVG(x):"";l.push('<rect transform="'+D+" translate(",y/2,",",C/2,')"',' x="',v.offsetX-y/2,'" y="',v.offsetY-C/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:y,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:C,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var g=this._activeObject,v,_,y;if(l===g&&l.type==="activeSelection")for(y=g._objects,v=y.length;v--;)_=y[v],a(this._objects,_),this._objects.unshift(_);else a(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var g=this._activeObject,v,_,y;if(l===g&&l.type==="activeSelection")for(y=g._objects,v=0;v<y.length;v++)_=y[v],a(this._objects,_),this._objects.push(_);else a(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,g){if(!l)return this;var v=this._activeObject,_,y,C,S,x,T=0;if(l===v&&l.type==="activeSelection")for(x=v._objects,_=0;_<x.length;_++)y=x[_],C=this._objects.indexOf(y),C>0+T&&(S=C-1,a(this._objects,y),this._objects.splice(S,0,y)),T++;else C=this._objects.indexOf(l),C!==0&&(S=this._findNewLowerIndex(l,C,g),a(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,g,v){var _,y;if(v)for(_=g,y=g-1;y>=0;--y){var C=l.intersectsWithObject(this._objects[y])||l.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(l);if(C){_=y;break}}else _=g-1;return _},bringForward:function(l,g){if(!l)return this;var v=this._activeObject,_,y,C,S,x,T=0;if(l===v&&l.type==="activeSelection")for(x=v._objects,_=x.length;_--;)y=x[_],C=this._objects.indexOf(y),C<this._objects.length-1-T&&(S=C+1,a(this._objects,y),this._objects.splice(S,0,y)),T++;else C=this._objects.indexOf(l),C!==this._objects.length-1&&(S=this._findNewUpperIndex(l,C,g),a(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,g,v){var _,y,C;if(v)for(_=g,y=g+1,C=this._objects.length;y<C;++y){var S=l.intersectsWithObject(this._objects[y])||l.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(l);if(S){_=y;break}}else _=g+1;return _},moveTo:function(l,g){return a(this._objects,l),this._objects.splice(g,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(e.StaticCanvas.prototype,e.Observable),h(e.StaticCanvas.prototype,e.Collection),h(e.StaticCanvas.prototype,e.DataURLExporter),h(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var g=u();if(!g||!g.getContext)return null;var v=g.getContext("2d");if(!v)return null;switch(l){case"setLineDash":return typeof v.setLineDash!="undefined";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=r(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var g=r(this.lowerCanvasEl);return g&&g.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var h=this.canvas.contextTop;h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var i=this.canvas.viewportTransform;h.save(),h.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(!!this.shadow){var h=this.canvas,i=this.shadow,a=h.contextTop,c=h.getZoom();h&&h._isRetinaScaling()&&(c*=e.devicePixelRatio),a.shadowColor=i.color,a.shadowBlur=i.blur*c,a.shadowOffsetX=i.offsetX*c,a.shadowOffsetY=i.offsetY*c}},needsFullRender:function(){var h=new e.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(h){this.canvas=h,this._points=[]},_drawSegment:function(h,i,a){var c=i.midPointFrom(a);return h.quadraticCurveTo(i.x,i.y,c.x,c.y),c},onMouseDown:function(h,i){!this.canvas._isMainEvent(i.e)||(this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,i){if(!!this.canvas._isMainEvent(i.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,c=a.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,a[c-2],a[c-1],!0),n.stroke(),n.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var i=new e.Point(h.x,h.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(h){var i=new e.Point(h.x,h.y);return this._addPoint(i)},_render:function(){var h=this.canvas.contextTop,i,a,c=this._points[0],n=this._points[1];if(this._saveAndTransform(h),h.beginPath(),this._points.length===2&&c.x===n.x&&c.y===n.y){var s=this.width/1e3;c=new e.Point(c.x,c.y),n=new e.Point(n.x,n.y),c.x-=s,n.x+=s}for(h.moveTo(c.x,c.y),i=1,a=this._points.length;i<a;i++)this._drawSegment(h,c,n),c=this._points[i],n=this._points[i+1];h.lineTo(c.x,c.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var i=this.width/1e3;return e.util.getSmoothPathFromPoints(h,i)},_isEmptySVGPath:function(h){var i=e.util.joinPath(h);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var i=new e.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new e.Shadow(this.shadow)),i},decimatePoints:function(h,i){if(h.length<=2)return h;var a=this.canvas.getZoom(),c=Math.pow(i/a,2),n,s=h.length-1,r=h[0],u=[r],d;for(n=1;n<s-1;n++)d=Math.pow(r.x-h[n].x,2)+Math.pow(r.y-h[n].y,2),d>=c&&(r=h[n],u.push(r));return u.push(h[s]),u},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var a=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.requestRenderAll(),a.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:a})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var i=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,i),a.restore()},dot:function(h,i){h.fillStyle=i.fill,h.beginPath(),h.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,i,a,c=this.points;for(this._saveAndTransform(h),i=0,a=c.length;i<a;i++)this.dot(h,c[i]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,i,a;this.canvas.renderOnAddRemove=!1;var c=[];for(i=0,a=this.points.length;i<a;i++){var n=this.points[i],s=new e.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(s.shadow=new e.Shadow(this.shadow)),c.push(s)}var r=new e.Group(c);r.canvas=this.canvas,this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var i=new e.Point(h.x,h.y),a=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return i.radius=a,i.fill=c,this.points.push(i),i}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],a=0,c=this.sprayChunks.length;a<c;a++)for(var n=this.sprayChunks[a],s=0,r=n.length;s<r;s++){var u=new e.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:"center",originY:"center",fill:this.color});i.push(u)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var d=new e.Group(i);this.shadow&&d.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var i={},a,c,n;for(c=0,n=h.length;c<n;c++)a=h[c].left+""+h[c].top,i[a]||(i[a]=h[c]);var s=[];for(a in i)s.push(i[a]);return s},render:function(h){var i=this.canvas.contextTop,a,c;for(i.fillStyle=this.color,this._saveAndTransform(i),a=0,c=h.length;a<c;a++){var n=h[a];typeof n.opacity!="undefined"&&(i.globalAlpha=n.opacity),i.fillRect(n.x,n.y,n.width,n.width)}i.restore()},_render:function(){var h=this.canvas.contextTop,i,a;for(h.fillStyle=this.color,this._saveAndTransform(h),i=0,a=this.sprayChunks.length;i<a;i++)this.render(this.sprayChunks[i]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var i,a,c,n=this.width/2,s;for(s=0;s<this.density;s++){i=e.util.getRandomInt(h.x-n,h.x+n),a=e.util.getRandomInt(h.y-n,h.y+n),this.dotWidthVariance?c=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var r=new e.Point(i,a);r.width=c,this.randomOpacity&&(r.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var h=20,i=5,a=e.util.createCanvasElement(),c=a.getContext("2d");return a.width=a.height=h+i,c.fillStyle=this.color,c.beginPath(),c.arc(h/2,h/2,h/2,0,Math.PI*2,!1),c.closePath(),c.fill(),a},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(h){var i=this.callSuper("createPath",h),a=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),i}}),function(){var h=e.util.getPointer,i=e.util.degreesToRadians,a=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(n,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,s),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),s,r,u;if(n.length>0&&!this.preserveObjectStacking){r=[],u=[];for(var d=0,l=this._objects.length;d<l;d++)s=this._objects[d],n.indexOf(s)===-1?r.push(s):u.push(s);n.length>1&&(this._activeObject._objects=u),r.push.apply(r,u)}else r=this._objects;return r},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,s){var r=n.calcTransformMatrix(),u=e.util.invertTransform(r),d=this.restorePointerVpt(s);return e.util.transformPoint(d,u)},isTargetTransparent:function(n,s,r){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var u=this._normalizePointer(n,{x:s,y:r}),d=Math.max(n.cacheTranslationX+u.x*n.zoomX,0),l=Math.max(n.cacheTranslationY+u.y*n.zoomY,0),y=e.util.isTransparent(n._cacheContext,Math.round(d),Math.round(l),this.targetFindTolerance);return y}var g=this.contextCache,v=n.selectionBackgroundColor,_=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),n.render(g),g.restore(),n.selectionBackgroundColor=v;var y=e.util.isTransparent(g,s,r,this.targetFindTolerance);return y},_isSelectionKeyPressed:function(n){var s=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?s=!!this.selectionKey.find(function(r){return n[r]===!0}):s=n[this.selectionKey],s},_shouldClearSelection:function(n,s){var r=this.getActiveObjects(),u=this._activeObject;return!s||s&&u&&r.length>1&&r.indexOf(s)===-1&&u!==s&&!this._isSelectionKeyPressed(n)||s&&!s.evented||s&&!s.selectable&&u&&u!==s},_shouldCenterTransform:function(n,s,r){if(!!n){var u;return s==="scale"||s==="scaleX"||s==="scaleY"||s==="resizing"?u=this.centeredScaling||n.centeredScaling:s==="rotate"&&(u=this.centeredRotation||n.centeredRotation),u?!r:r}},_getOriginFromCorner:function(n,s){var r={x:n.originX,y:n.originY};return s==="ml"||s==="tl"||s==="bl"?r.x="right":(s==="mr"||s==="tr"||s==="br")&&(r.x="left"),s==="tl"||s==="mt"||s==="tr"?r.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(r.y="top"),r},_getActionFromCorner:function(n,s,r,u){if(!s||!n)return"drag";var d=u.controls[s];return d.getActionName(r,d,u)},_setupCurrentTransform:function(n,s,r){if(!!s){var u=this.getPointer(n),d=s.__corner,l=s.controls[d],g=r&&d?l.getActionHandler(n,s,l):e.controlsUtils.dragHandler,v=this._getActionFromCorner(r,d,n,s),_=this._getOriginFromCorner(s,d),y=n[this.centeredKey],C={target:s,action:v,actionHandler:g,corner:d,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:u.x-s.left,offsetY:u.y-s.top,originX:_.x,originY:_.y,ex:u.x,ey:u.y,lastX:u.x,lastY:u.y,theta:i(s.angle),width:s.width*s.scaleX,shiftKey:n.shiftKey,altKey:y,original:e.util.saveObjectTransform(s)};this._shouldCenterTransform(s,v,y)&&(C.originX="center",C.originY="center"),C.original.originX=_.x,C.original.originY=_.y,this._currentTransform=C,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var s=this._groupSelector,r=new e.Point(s.ex,s.ey),u=e.util.transformPoint(r,this.viewportTransform),d=new e.Point(s.ex+s.left,s.ey+s.top),l=e.util.transformPoint(d,this.viewportTransform),g=Math.min(u.x,l.x),v=Math.min(u.y,l.y),_=Math.max(u.x,l.x),y=Math.max(u.y,l.y),C=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(g,v,_-g,y-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,g+=C,v+=C,_-=C,y-=C,e.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(g,v,_-g,y-v))},findTarget:function(n,s){if(!this.skipTargetFind){var r=!0,u=this.getPointer(n,r),d=this._activeObject,l=this.getActiveObjects(),g,v,_=a(n),y=l.length>1&&!s||l.length===1;if(this.targets=[],y&&d._findTargetCorner(u,_)||l.length>1&&!s&&d===this._searchPossibleTargets([d],u))return d;if(l.length===1&&d===this._searchPossibleTargets([d],u))if(this.preserveObjectStacking)g=d,v=this.targets,this.targets=[];else return d;var C=this._searchPossibleTargets(this._objects,u);return n[this.altSelectionKey]&&C&&g&&C!==g&&(C=g,this.targets=v),C}},_checkTarget:function(n,s,r){if(s&&s.visible&&s.evented&&s.containsPoint(n))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var u=this.isTargetTransparent(s,r.x,r.y);if(!u)return!0}else return!0},_searchPossibleTargets:function(n,s){for(var r,u=n.length,d;u--;){var l=n[u],g=l.group?this._normalizePointer(l.group,s):s;if(this._checkTarget(g,l,s)){r=n[u],r.subTargetCheck&&r instanceof e.Group&&(d=this._searchPossibleTargets(r._objects,s),d&&this.targets.push(d));break}}return r},restorePointerVpt:function(n){return e.util.transformPoint(n,e.util.invertTransform(this.viewportTransform))},getPointer:function(n,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var r=h(n),u=this.upperCanvasEl,d=u.getBoundingClientRect(),l=d.width||0,g=d.height||0,v;(!l||!g)&&("top"in d&&"bottom"in d&&(g=Math.abs(d.top-d.bottom)),"right"in d&&"left"in d&&(l=Math.abs(d.right-d.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,s||(r=this.restorePointerVpt(r));var _=this.getRetinaScaling();return _!==1&&(r.x/=_,r.y/=_),l===0||g===0?v={width:1,height:1}:v={width:u.width/l,height:u.height/g},{x:r.x*v.width,y:r.y*v.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),e.util.addClass(r,"upper-canvas "+n),this.wrapperEl.appendChild(r),this._copyCanvasStyle(s,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var s=this.width||n.width,r=this.height||n.height;e.util.setStyle(n,{position:"absolute",width:s+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=s,n.height=r,e.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,s){s.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,s){var r=!1,u=this.getActiveObjects(),d=[],l=[];n.forEach(function(g){u.indexOf(g)===-1&&(r=!0,g.fire("deselected",{e:s,target:g}),l.push(g))}),u.forEach(function(g){n.indexOf(g)===-1&&(r=!0,g.fire("selected",{e:s,target:g}),d.push(g))}),n.length>0&&u.length>0?r&&this.fire("selection:updated",{e:s,selected:d,deselected:l,updated:d[0]||l[0],target:this._activeObject}):u.length>0?this.fire("selection:created",{e:s,selected:d,target:this._activeObject}):n.length>0&&this.fire("selection:cleared",{e:s,deselected:l})},setActiveObject:function(n,s){var r=this.getActiveObjects();return this._setActiveObject(n,s),this._fireSelectionEvents(r,s),this},_setActiveObject:function(n,s){return this._activeObject===n||!this._discardActiveObject(s,n)||n.onSelect({e:s})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,s){var r=this._activeObject;if(r){if(r.onDeselect({e:n,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var s=this.getActiveObjects(),r=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:r,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(s,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){e.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var s=this._activeObject;s&&s._renderControls(n)},_toObject:function(n,s,r){var u=this._realizeGroupTransformOnObject(n),d=this.callSuper("_toObject",n,s,r);return this._unwindGroupTransformOnObject(n,u),d},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],r={};return s.forEach(function(u){r[u]=n[u]}),e.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),r}else return null},_unwindGroupTransformOnObject:function(n,s){s&&n.set(s)},_setSVGObject:function(n,s,r){var u=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",n,s,r),this._unwindGroupTransformOnObject(s,u)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var c in e.StaticCanvas)c!=="prototype"&&(e.Canvas[c]=e.StaticCanvas[c])}(),function(){var h=e.util.addListener,i=e.util.removeListener,a=3,c=2,n=1,s={passive:!1};function r(u,d){return u.button&&u.button===d-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(u,d){var l=this.upperCanvasEl,g=this._getEventPrefix();u(e.window,"resize",this._onResize),u(l,g+"down",this._onMouseDown),u(l,g+"move",this._onMouseMove,s),u(l,g+"out",this._onMouseOut),u(l,g+"enter",this._onMouseEnter),u(l,"wheel",this._onMouseWheel),u(l,"contextmenu",this._onContextMenu),u(l,"dblclick",this._onDoubleClick),u(l,"dragover",this._onDragOver),u(l,"dragenter",this._onDragEnter),u(l,"dragleave",this._onDragLeave),u(l,"drop",this._onDrop),this.enablePointerEvents||u(l,"touchstart",this._onTouchStart,s),typeof eventjs!="undefined"&&d in eventjs&&(eventjs[d](l,"gesture",this._onGesture),eventjs[d](l,"drag",this._onDrag),eventjs[d](l,"orientation",this._onOrientationChange),eventjs[d](l,"shake",this._onShake),eventjs[d](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var u=this._getEventPrefix();i(e.document,u+"up",this._onMouseUp),i(e.document,"touchend",this._onTouchEnd,s),i(e.document,u+"move",this._onMouseMove,s),i(e.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(u,d){this.__onTransformGesture&&this.__onTransformGesture(u,d)},_onDrag:function(u,d){this.__onDrag&&this.__onDrag(u,d)},_onMouseWheel:function(u){this.__onMouseWheel(u)},_onMouseOut:function(u){var d=this._hoveredTarget;this.fire("mouse:out",{target:d,e:u}),this._hoveredTarget=null,d&&d.fire("mouseout",{e:u});var l=this;this._hoveredTargets.forEach(function(g){l.fire("mouse:out",{target:d,e:u}),g&&d.fire("mouseout",{e:u})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(g){g.isEditing&&g.hiddenTextarea.focus()})},_onMouseEnter:function(u){!this._currentTransform&&!this.findTarget(u)&&(this.fire("mouse:over",{target:null,e:u}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(u,d){this.__onOrientationChange&&this.__onOrientationChange(u,d)},_onShake:function(u,d){this.__onShake&&this.__onShake(u,d)},_onLongPress:function(u,d){this.__onLongPress&&this.__onLongPress(u,d)},_onDragOver:function(u){u.preventDefault();var d=this._simpleEventHandler("dragover",u);this._fireEnterLeaveEvents(d,u)},_onContextMenu:function(u){return this.stopContextMenu&&(u.stopPropagation(),u.preventDefault()),!1},_onDoubleClick:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"dblclick"),this._resetTransformEventData(u)},getPointerId:function(u){var d=u.changedTouches;return d?d[0]&&d[0].identifier:this.enablePointerEvents?u.pointerId:-1},_isMainEvent:function(u){return u.isPrimary===!0?!0:u.isPrimary===!1?!1:u.type==="touchend"&&u.touches.length===0?!0:u.changedTouches?u.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(u){u.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(u)),this.__onMouseDown(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();h(e.document,"touchend",this._onTouchEnd,s),h(e.document,"touchmove",this._onMouseMove,s),i(d,l+"down",this._onMouseDown)},_onMouseDown:function(u){this.__onMouseDown(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();i(d,l+"move",this._onMouseMove,s),h(e.document,l+"up",this._onMouseUp),h(e.document,l+"move",this._onMouseMove,s)},_onTouchEnd:function(u){if(!(u.touches.length>0)){this.__onMouseUp(u),this._resetTransformEventData(),this.mainTouchId=null;var d=this._getEventPrefix();i(e.document,"touchend",this._onTouchEnd,s),i(e.document,"touchmove",this._onMouseMove,s);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(l.upperCanvasEl,d+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(u){this.__onMouseUp(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(u)&&(i(e.document,l+"up",this._onMouseUp),i(e.document,l+"move",this._onMouseMove,s),h(d,l+"move",this._onMouseMove,s))},_onMouseMove:function(u){!this.allowTouchScrolling&&u.preventDefault&&u.preventDefault(),this.__onMouseMove(u)},_onResize:function(){this.calcOffset()},_shouldRender:function(u){var d=this._activeObject;return!!d!=!!u||d&&u&&d!==u?!0:(d&&d.isEditing,!1)},__onMouseUp:function(u){var d,l=this._currentTransform,g=this._groupSelector,v=!1,_=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(u),d=this._target,this._handleEvent(u,"up:before"),r(u,a)){this.fireRightClick&&this._handleEvent(u,"up",a,_);return}if(r(u,c)){this.fireMiddleClick&&this._handleEvent(u,"up",c,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(u);return}if(!!this._isMainEvent(u)){if(l&&(this._finalizeCurrentTransform(u),v=l.actionPerformed),!_){var y=d===this._activeObject;this._maybeGroupObjects(u),v||(v=this._shouldRender(d)||!y&&d===this._activeObject)}if(d){if(d.selectable&&d!==this._activeObject&&d.activeOn==="up")this.setActiveObject(d,u),v=!0;else{var C=d._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u)),S=d.controls[C],x=S&&S.getMouseUpHandler(u,d,S);if(x){var T=this.getPointer(u);x(u,l,T.x,T.y)}}d.isMoving=!1}this._setCursorFromEvent(u,d),this._handleEvent(u,"up",n,_),this._groupSelector=null,this._currentTransform=null,d&&(d.__corner=0),v?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(u,d){var l=this.findTarget(d),g=this.targets,v={e:d,target:l,subTargets:g};if(this.fire(u,v),l&&l.fire(u,v),!g)return l;for(var _=0;_<g.length;_++)g[_].fire(u,v);return l},_handleEvent:function(u,d,l,g){var v=this._target,_=this.targets||[],y={e:u,target:v,subTargets:_,button:l||n,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};d==="up"&&(y.currentTarget=this.findTarget(u),y.currentSubTargets=this.targets),this.fire("mouse:"+d,y),v&&v.fire("mouse"+d,y);for(var C=0;C<_.length;C++)_[C].fire("mouse"+d,y)},_finalizeCurrentTransform:function(u){var d=this._currentTransform,l=d.target,g,v={e:u,target:l,transform:d,action:d.action};l._scaling&&(l._scaling=!1),l.setCoords(),(d.actionPerformed||this.stateful&&l.hasStateChanged())&&(d.actionPerformed&&(g=this._addEventOptions(v,d),this._fire(g,v)),this._fire("modified",v))},_addEventOptions:function(u,d){var l,g;switch(d.action){case"scaleX":l="scaled",g="x";break;case"scaleY":l="scaled",g="y";break;case"skewX":l="skewed",g="x";break;case"skewY":l="skewed",g="y";break;case"scale":l="scaled",g="equally";break;case"rotate":l="rotated";break;case"drag":l="moved";break}return u.by=g,l},_onMouseDownInDrawingMode:function(u){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(u).requestRenderAll();var d=this.getPointer(u);this.freeDrawingBrush.onMouseDown(d,{e:u,pointer:d}),this._handleEvent(u,"down")},_onMouseMoveInDrawingMode:function(u){if(this._isCurrentlyDrawing){var d=this.getPointer(u);this.freeDrawingBrush.onMouseMove(d,{e:u,pointer:d})}this.setCursor(this.freeDrawingCursor),this._handleEvent(u,"move")},_onMouseUpInDrawingMode:function(u){var d=this.getPointer(u);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:u,pointer:d}),this._handleEvent(u,"up")},__onMouseDown:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"down:before");var d=this._target;if(r(u,a)){this.fireRightClick&&this._handleEvent(u,"down",a);return}if(r(u,c)){this.fireMiddleClick&&this._handleEvent(u,"down",c);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(u);return}if(!!this._isMainEvent(u)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var g=this._shouldRender(d),v=this._shouldGroup(u,d);if(this._shouldClearSelection(u,d)?this.discardActiveObject(u):v&&(this._handleGrouping(u,d),d=this._activeObject),this.selection&&(!d||!d.selectable&&!d.isEditing&&d!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),d){var _=d===this._activeObject;d.selectable&&d.activeOn==="down"&&this.setActiveObject(d,u);var y=d._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u));if(d.__corner=y,d===this._activeObject&&(y||!v)){this._setupCurrentTransform(u,d,_);var C=d.controls[y],l=this.getPointer(u),S=C&&C.getMouseDownHandler(u,d,C);S&&S(u,this._currentTransform,l.x,l.y)}}this._handleEvent(u,"down"),(g||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(u){this._resetTransformEventData(),this._pointer=this.getPointer(u,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(u)||null},_beforeTransform:function(u){var d=this._currentTransform;this.stateful&&d.target.saveState(),this.fire("before:transform",{e:u,transform:d})},__onMouseMove:function(u){this._handleEvent(u,"move:before"),this._cacheTransformEventData(u);var d,l;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(u);return}if(!!this._isMainEvent(u)){var g=this._groupSelector;g?(l=this._absolutePointer,g.left=l.x-g.ex,g.top=l.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(u):(d=this.findTarget(u)||null,this._setCursorFromEvent(u,d),this._fireOverOutEvents(d,u)),this._handleEvent(u,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(u,d){var l=this._hoveredTarget,g=this._hoveredTargets,v=this.targets,_=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(u,d,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<_;y++)this.fireSyntheticInOutEvents(v[y],d,{oldTarget:g[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(u,d){var l=this._draggedoverTarget,g=this._hoveredTargets,v=this.targets,_=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(u,d,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<_;y++)this.fireSyntheticInOutEvents(v[y],d,{oldTarget:g[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=u},fireSyntheticInOutEvents:function(u,d,l){var g,v,_=l.oldTarget,y,C,S=_!==u,x=l.canvasEvtIn,T=l.canvasEvtOut;S&&(g={e:d,target:u,previousTarget:_},v={e:d,target:_,nextTarget:u}),C=u&&S,y=_&&S,y&&(T&&this.fire(T,v),_.fire(l.evtOut,v)),C&&(x&&this.fire(x,g),u.fire(l.evtIn,g))},__onMouseWheel:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"wheel"),this._resetTransformEventData()},_transformObject:function(u){var d=this.getPointer(u),l=this._currentTransform;l.reset=!1,l.shiftKey=u.shiftKey,l.altKey=u[this.centeredKey],this._performTransformAction(u,l,d),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(u,d,l){var g=l.x,v=l.y,_=d.action,y=!1,C=d.actionHandler;C&&(y=C(u,d,g,v)),_==="drag"&&y&&(d.target.isMoving=!0,this.setCursor(d.target.moveCursor||this.moveCursor)),d.actionPerformed=d.actionPerformed||y},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(u,d){if(!d)return this.setCursor(this.defaultCursor),!1;var l=d.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!g||!g.contains(d))&&d._findTargetCorner(this.getPointer(u,!0));v?this.setCursor(this.getCornerCursor(v,d,u)):(d.subTargetCheck&&this.targets.concat().reverse().map(function(_){l=_.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(u,d,l){var g=d.controls[u];return g.cursorStyleHandler(l,g,d)}})}(),function(){var h=Math.min,i=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(a,c){var n=this._activeObject;return n&&this._isSelectionKeyPressed(a)&&c&&c.selectable&&this.selection&&(n!==c||n.type==="activeSelection")&&!c.onSelect({e:a})},_handleGrouping:function(a,c){var n=this._activeObject;n.__corner||c===n&&(c=this.findTarget(a,!0),!c||!c.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(c,a):this._createActiveSelection(c,a))},_updateActiveSelection:function(a,c){var n=this._activeObject,s=n._objects.slice(0);n.contains(a)?(n.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),c)):(n.addWithUpdate(a),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,c)},_createActiveSelection:function(a,c){var n=this.getActiveObjects(),s=this._createGroup(a);this._hoveredTarget=s,this._setActiveObject(s,c),this._fireSelectionEvents(n,c)},_createGroup:function(a){var c=this._objects,n=c.indexOf(this._activeObject)<c.indexOf(a),s=n?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(a){var c=this._collectObjects(a),n;c.length===1?this.setActiveObject(c[0],a):c.length>1&&(n=new e.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(n,a))},_collectObjects:function(a){for(var c=[],n,s=this._groupSelector.ex,r=this._groupSelector.ey,u=s+this._groupSelector.left,d=r+this._groupSelector.top,l=new e.Point(h(s,u),h(r,d)),g=new e.Point(i(s,u),i(r,d)),v=!this.selectionFullyContained,_=s===u&&r===d,y=this._objects.length;y--&&(n=this._objects[y],!(!(!n||!n.selectable||!n.visible)&&(v&&n.intersectsWithRect(l,g,!0)||n.isContainedWithinRect(l,g,!0)||v&&n.containsPoint(l,null,!0)||v&&n.containsPoint(g,null,!0))&&(c.push(n),_))););return c.length>1&&(c=c.filter(function(C){return!C.onSelect({e:a})})),c},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var i=h.format||"png",a=h.quality||1,c=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(c,h);return e.util.toDataURL(n,i,a)},toCanvasElement:function(h,i){h=h||1,i=i||{};var a=(i.width||this.width)*h,c=(i.height||this.height)*h,n=this.getZoom(),s=this.width,r=this.height,u=n*h,d=this.viewportTransform,l=(d[4]-(i.left||0))*h,g=(d[5]-(i.top||0))*h,v=this.interactive,_=[u,0,0,u,l,g],y=this.enableRetinaScaling,C=e.util.createCanvasElement(),S=this.contextTop;return C.width=a,C.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=a,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=d,this.width=s,this.height=r,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=y,this.contextTop=S,C}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(h,i,a){if(!!h){var c=typeof h=="string"?JSON.parse(h):e.util.object.clone(h),n=this,s=c.clipPath,r=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(u){n.clear(),n._setBgOverlay(c,function(){s?n._enlivenObjects([s],function(d){n.clipPath=d[0],n.__setupCanvas.call(n,c,u,r,i)}):n.__setupCanvas.call(n,c,u,r,i)})},a),this}},__setupCanvas:function(h,i,a,c){var n=this;i.forEach(function(s,r){n.insertAt(s,r)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),c&&c()},_setBgOverlay:function(h,i){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){i&&i();return}var c=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,c),this.__setBgOverlay("overlayImage",h.overlayImage,a,c),this.__setBgOverlay("backgroundColor",h.background,a,c),this.__setBgOverlay("overlayColor",h.overlay,a,c)},__setBgOverlay:function(h,i,a,c){var n=this;if(!i){a[h]=!0,c&&c();return}h==="backgroundImage"||h==="overlayImage"?e.util.enlivenObjects([i],function(s){n[h]=s[0],a[h]=!0,c&&c()}):this["set"+e.util.string.capitalize(h,!0)](i,function(){a[h]=!0,c&&c()})},_enlivenObjects:function(h,i,a){if(!h||h.length===0){i&&i([]);return}e.util.enlivenObjects(h,function(c){i&&i(c)},null,a)},_toDataURL:function(h,i){this.clone(function(a){i(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,i,a){this.clone(function(c){a(c.toDataURLWithMultiplier(h,i))})},clone:function(h,i){var a=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(c){c.loadFromJSON(a,function(){h&&h(c)})})},cloneWithoutData:function(h){var i=e.util.createCanvasElement();i.width=this.width,i.height=this.height;var a=new e.Canvas(i);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.util.object.clone,n=i.util.toFixed,s=i.util.string.capitalize,r=i.util.degreesToRadians,u=!i.isLikelyNode,d=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:u,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var g=i.perfLimitSizeTotal,v=l.width,_=l.height,y=i.maxCacheSideLimit,C=i.minCacheSideLimit;if(v<=y&&_<=y&&v*_<=g)return v<C&&(l.width=C),_<C&&(l.height=C),l;var S=v/_,x=i.util.limitDimsByArea(S,g),T=i.util.capValue,D=T(C,x.x,y),j=T(C,x.y,y);return v>D&&(l.zoomX/=v/D,l.width=D,l.capped=!0),_>j&&(l.zoomY/=_/j,l.height=j,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),v=g.x*l.scaleX/this.scaleX,_=g.y*l.scaleY/this.scaleY;return{width:v+d,height:_+d,zoomX:l.scaleX,zoomY:l.scaleY,x:v,y:_}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var g=l._currentTransform.target,v=l._currentTransform.action;if(this===g&&v.slice&&v.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,y=this._limitCacheSize(this._getCacheCanvasDimensions()),C=i.minCacheSideLimit,S=y.width,x=y.height,T,D,j=y.zoomX,U=y.zoomY,H=S!==this.cacheWidth||x!==this.cacheHeight,Q=this.zoomX!==j||this.zoomY!==U,K=H||Q,re=0,se=0,oe=!1;if(H){var ae=this._cacheCanvas.width,R=this._cacheCanvas.height,W=S>ae||x>R,P=(S<ae*.9||x<R*.9)&&ae>C&&R>C;oe=W||P,W&&!y.capped&&(S>C||x>C)&&(re=S*.1,se=x*.1)}return this instanceof i.Text&&this.path&&(K=!0,oe=!0,re+=this.getHeightOfLine(0)*this.zoomX,se+=this.getHeightOfLine(0)*this.zoomY),K?(oe?(_.width=Math.ceil(S+re),_.height=Math.ceil(x+se)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),T=y.x/2,D=y.y/2,this.cacheTranslationX=Math.round(_.width/2-T)+T,this.cacheTranslationY=Math.round(_.height/2-D)+D,this.cacheWidth=S,this.cacheHeight=x,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(j,U),this.zoomX=j,this.zoomY=U,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,v=this.calcTransformMatrix(!g);l.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(l){var g=i.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:n(this.left,g),top:n(this.top,g),width:n(this.width,g),height:n(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,g),scaleX:n(this.scaleX,g),scaleY:n(this.scaleY,g),angle:n(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,g),skewY:n(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(l),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,v,l),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var g=i.util.getKlass(l.type).prototype,v=g.stateProperties;return v.forEach(function(_){if(!(_==="left"||_==="top")){l[_]===g[_]&&delete l[_];var y=Object.prototype.toString.call(l[_])==="[object Array]"&&Object.prototype.toString.call(g[_])==="[object Array]";y&&l[_].length===0&&g[_].length===0&&delete l[_]}}),l},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),g=l.scaleX,v=l.scaleY;if(this.canvas){var _=this.canvas.getZoom(),y=this.canvas.getRetinaScaling();g*=_*y,v*=_*y}return{scaleX:g,scaleY:v}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,g){var v=l==="scaleX"||l==="scaleY",_=this[l]!==g,y=!1;return v&&(g=this._constrainScale(g)),l==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):l==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):l==="shadow"&&g&&!(g instanceof i.Shadow)?g=new i.Shadow(g):l==="dirty"&&this.group&&this.group.set("dirty",g),this[l]=g,_&&(y=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,y&&this.group.set("dirty",!0)):y&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l){var g=this.clipPath;if(l.save(),g.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",g.absolutePositioned){var v=i.util.invertTransform(this.calcTransformMatrix());l.transform(v[0],v[1],v[2],v[3],v[4],v[5])}g.transform(l),l.scale(1/g.zoomX,1/g.zoomY),l.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),l.restore()},drawObject:function(l,g){var v=this.fill,_=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l),this.fill=v,this.stroke=_},_drawClipPath:function(l){var g=this.clipPath;!g||(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(l))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!l){var g=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-v/2,g,v)}return!0}return!1},_renderBackground:function(l){if(!!this.backgroundColor){var g=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,g){var v=g.stroke;v&&(l.lineWidth=g.strokeWidth,l.lineCap=g.strokeLineCap,l.lineDashOffset=g.strokeDashOffset,l.lineJoin=g.strokeLineJoin,l.miterLimit=g.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(l,v):(l.strokeStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,v)):l.strokeStyle=g.stroke)},_setFillStyles:function(l,g){var v=g.fill;v&&(v.toLive?(l.fillStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,g.fill)):l.fillStyle=v)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),l.setLineDash(g))},_renderControls:function(l,g){var v=this.getViewportTransform(),_=this.calcTransformMatrix(),y,C,S;g=g||{},C=typeof g.hasBorders!="undefined"?g.hasBorders:this.hasBorders,S=typeof g.hasControls!="undefined"?g.hasControls:this.hasControls,_=i.util.multiplyTransformMatrices(v,_),y=i.util.qrDecompose(_),l.save(),l.translate(y.translateX,y.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),l.rotate(r(y.angle)),g.forActiveSelection||this.group?C&&this.drawBordersInGroup(l,y,g):C&&this.drawBorders(l,g),S&&this.drawControls(l,g),l.restore()},_setShadow:function(l){if(!!this.shadow){var g=this.shadow,v=this.canvas,_,y=v&&v.viewportTransform[0]||1,C=v&&v.viewportTransform[3]||1;g.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),v&&v._isRetinaScaling()&&(y*=i.devicePixelRatio,C*=i.devicePixelRatio),l.shadowColor=g.color,l.shadowBlur=g.blur*i.browserShadowBlurConstant*(y+C)*(_.scaleX+_.scaleY)/4,l.shadowOffsetX=g.offsetX*y*_.scaleX,l.shadowOffsetY=g.offsetY*C*_.scaleY}},_removeShadow:function(l){!this.shadow||(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var v=g.gradientTransform||g.patternTransform,_=-this.width/2+g.offsetX||0,y=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,_,y):l.transform(1,0,0,1,_,y),v&&l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:_,offsetY:y}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){!this.fill||(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();l.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,g){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),_=i.util.createCanvasElement(),y,C=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/C,x=v.y/this.scaleY/C;_.width=S,_.height=x,y=_.getContext("2d"),y.beginPath(),y.moveTo(0,0),y.lineTo(S,0),y.lineTo(S,x),y.lineTo(0,x),y.closePath(),y.translate(S/2,x/2),y.scale(v.zoomX/this.scaleX/C,v.zoomY/this.scaleY/C),this._applyPatternGradientTransform(y,g),y.fillStyle=g.toLive(l),y.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(C*this.scaleX/v.zoomX,C*this.scaleY/v.zoomY),l.strokeStyle=y.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=i.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,g.x+=l.offsetLeft,g.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(g,"center","center")},clone:function(l,g){var v=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(v,l):i.Object._fromObject("Object",v,l)},cloneAsImage:function(l,g){var v=this.toCanvasElement(g);return l&&l(new i.Image(v)),this},toCanvasElement:function(l){l||(l={});var g=i.util,v=g.saveObjectTransform(this),_=this.group,y=this.shadow,C=Math.abs,S=(l.multiplier||1)*(l.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,l.withoutTransform&&g.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var x=i.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),D=this.shadow,j,U={x:0,y:0},H,Q,K;D&&(H=D.blur,D.nonScaling?j={scaleX:1,scaleY:1}:j=this.getObjectScaling(),U.x=2*Math.round(C(D.offsetX)+H)*C(j.scaleX),U.y=2*Math.round(C(D.offsetY)+H)*C(j.scaleY)),Q=T.width+U.x,K=T.height+U.y,x.width=Math.ceil(Q),x.height=Math.ceil(K);var re=new i.StaticCanvas(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(re.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(re.width/2,re.height/2),"center","center");var se=this.canvas;re.add(this);var oe=re.toCanvasElement(S||1,l);return this.shadow=y,this.set("canvas",se),_&&(this.group=_),this.set(v).setCoords(),re._objects=[],re.dispose(),re=null,oe},toDataURL:function(l){return l||(l={}),i.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",l),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,g){g=g||this.canvas.getPointer(l);var v=new i.Point(g.x,g.y),_=this._getLeftTopCoords();return this.angle&&(v=i.util.rotatePoint(v,_,r(-this.angle))),{x:v.x-_.x,y:v.y-_.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),a(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(l,g,v,_){var y=i[l];g=c(g,!0),i.util.enlivenPatterns([g.fill,g.stroke],function(C){typeof C[0]!="undefined"&&(g.fill=C[0]),typeof C[1]!="undefined"&&(g.stroke=C[1]),i.util.enlivenObjects([g.clipPath],function(S){g.clipPath=S[0];var x=_?new y(g[_],g):new y(g);v&&v(x)})})},i.Object.__uid=0)}(t),function(){var h=e.util.degreesToRadians,i={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(c,n,s,r,u){var d=c.x,l=c.y,g,v,_;return typeof n=="string"?n=i[n]:n-=.5,typeof r=="string"?r=i[r]:r-=.5,g=r-n,typeof s=="string"?s=a[s]:s-=.5,typeof u=="string"?u=a[u]:u-=.5,v=u-s,(g||v)&&(_=this._getTransformedDimensions(),d=c.x+g*_.x,l=c.y+v*_.y),new e.Point(d,l)},translateToCenterPoint:function(c,n,s){var r=this.translateToGivenOrigin(c,n,s,"center","center");return this.angle?e.util.rotatePoint(r,c,h(this.angle)):r},translateToOriginPoint:function(c,n,s){var r=this.translateToGivenOrigin(c,"center","center",n,s);return this.angle?e.util.rotatePoint(r,c,h(this.angle)):r},getCenterPoint:function(){var c=new e.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,n){var s=this.getCenterPoint();return this.translateToOriginPoint(s,c,n)},toLocalPoint:function(c,n,s){var r=this.getCenterPoint(),u,d;return typeof n!="undefined"&&typeof s!="undefined"?u=this.translateToGivenOrigin(r,"center","center",n,s):u=new e.Point(this.left,this.top),d=new e.Point(c.x,c.y),this.angle&&(d=e.util.rotatePoint(d,r,-h(this.angle))),d.subtractEquals(u)},setPositionByOrigin:function(c,n,s){var r=this.translateToCenterPoint(c,n,s),u=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(c){var n=h(this.angle),s=this.getScaledWidth(),r=e.util.cos(n)*s,u=e.util.sin(n)*s,d,l;typeof this.originX=="string"?d=i[this.originX]:d=this.originX-.5,typeof c=="string"?l=i[c]:l=c-.5,this.left+=r*(l-d),this.top+=u*(l-d),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(s){return[new e.Point(s.tl.x,s.tl.y),new e.Point(s.tr.x,s.tr.y),new e.Point(s.br.x,s.br.y),new e.Point(s.bl.x,s.bl.y)]}var i=e.util,a=i.degreesToRadians,c=i.multiplyTransformMatrices,n=i.transformPoint;i.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,r){return r?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,r){return h(this._getCoords(s,r))},intersectsWithRect:function(s,r,u,d){var l=this.getCoords(u,d),g=e.Intersection.intersectPolygonRectangle(l,s,r);return g.status==="Intersection"},intersectsWithObject:function(s,r,u){var d=e.Intersection.intersectPolygonPolygon(this.getCoords(r,u),s.getCoords(r,u));return d.status==="Intersection"||s.isContainedWithinObject(this,r,u)||this.isContainedWithinObject(s,r,u)},isContainedWithinObject:function(s,r,u){for(var d=this.getCoords(r,u),l=r?s.aCoords:s.lineCoords,g=0,v=s._getImageLines(l);g<4;g++)if(!s.containsPoint(d[g],v))return!1;return!0},isContainedWithinRect:function(s,r,u,d){var l=this.getBoundingRect(u,d);return l.left>=s.x&&l.left+l.width<=r.x&&l.top>=s.y&&l.top+l.height<=r.y},containsPoint:function(s,g,u,d){var l=this._getCoords(u,d),g=g||this._getImageLines(l),v=this._findCrossPoints(s,g);return v!==0&&v%2===1},isOnScreen:function(s){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br,d=this.getCoords(!0,s);return d.some(function(l){return l.x<=u.x&&l.x>=r.x&&l.y<=u.y&&l.y>=r.y})||this.intersectsWithRect(r,u,!0,s)?!0:this._containsCenterOfCanvas(r,u,s)},_containsCenterOfCanvas:function(s,r,u){var d={x:(s.x+r.x)/2,y:(s.y+r.y)/2};return!!this.containsPoint(d,null,!0,u)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;if(this.intersectsWithRect(r,u,!0,s))return!0;var d=this.getCoords(!0,s).every(function(l){return(l.x>=u.x||l.x<=r.x)&&(l.y>=u.y||l.y<=r.y)});return d&&this._containsCenterOfCanvas(r,u,s)},_getImageLines:function(s){var r={topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}};return r},_findCrossPoints:function(s,r){var u,d,l,g,v,_=0,y;for(var C in r)if(y=r[C],!(y.o.y<s.y&&y.d.y<s.y)&&!(y.o.y>=s.y&&y.d.y>=s.y)&&(y.o.x===y.d.x&&y.o.x>=s.x?v=y.o.x:(u=0,d=(y.d.y-y.o.y)/(y.d.x-y.o.x),l=s.y-u*s.x,g=y.o.y-d*y.o.x,v=-(l-g)/(u-d)),v>=s.x&&(_+=1),_===2))break;return _},getBoundingRect:function(s,r){var u=this.getCoords(s,r);return i.makeBoundingBoxFromPoints(u)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:s===0?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,r){var u=this.getBoundingRect(r).width/this.getScaledWidth();return this.scale(s/this.width/u)},scaleToHeight:function(s,r){var u=this.getBoundingRect(r).height/this.getScaledHeight();return this.scale(s/this.height/u)},calcCoords:function(s){return s?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var s=this.getViewportTransform(),r=this.padding,u=a(this.angle),d=i.cos(u),l=i.sin(u),g=d*r,v=l*r,_=g+v,y=g-v,C=this.calcACoords(),S={tl:n(C.tl,s),tr:n(C.tr,s),bl:n(C.bl,s),br:n(C.br,s)};return r&&(S.tl.x-=y,S.tl.y-=_,S.tr.x+=_,S.tr.y-=y,S.bl.x-=_,S.bl.y+=y,S.br.x+=y,S.br.y+=_),S},calcOCoords:function(){var s=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),u=this.getViewportTransform(),d=c(u,r),l=c(d,s),l=c(l,[1/u[0],0,0,1/u[3],0,0]),g=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(_,y,C){v[y]=_.positionHandler(g,l,C)}),v},calcACoords:function(){var s=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),u=c(r,s),d=this._getTransformedDimensions(),l=d.x/2,g=d.y/2;return{tl:n({x:-l,y:-g},u),tr:n({x:l,y:-g},u),bl:n({x:-l,y:g},u),br:n({x:l,y:g},u)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var r="_",u="";return!s&&this.group&&(u=this.group.transformMatrixKey(s)+r),u+this.top+r+this.left+r+this.scaleX+r+this.scaleY+r+this.skewX+r+this.skewY+r+this.angle+r+this.originX+r+this.originY+r+this.width+r+this.height+r+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var r=this.calcOwnMatrix();if(s||!this.group)return r;var u=this.transformMatrixKey(s),d=this.matrixCache||(this.matrixCache={});return d.key===u?d.value:(this.group&&(r=c(this.group.calcTransformMatrix(!1),r)),d.key=u,d.value=r,r)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),r=this.ownMatrixCache||(this.ownMatrixCache={});if(r.key===s)return r.value;var u=this._calcTranslateMatrix(),d={angle:this.angle,translateX:u[4],translateY:u[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return r.key=s,r.value=i.composeMatrix(d),r.value},_calcDimensionsTransformMatrix:function(s,r,u){return i.calcDimensionsMatrix({skewX:s,skewY:r,scaleX:this.scaleX*(u&&this.flipX?-1:1),scaleY:this.scaleY*(u&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var s=this.strokeWidth,r=this.width+s,u=this.height+s;return{x:r,y:u}},_getTransformedDimensions:function(s,r){typeof s=="undefined"&&(s=this.skewX),typeof r=="undefined"&&(r=this.skewY);var u,d,l,g=s===0&&r===0;if(this.strokeUniform?(d=this.width,l=this.height):(u=this._getNonTransformedDimensions(),d=u.x,l=u.y),g)return this._finalizeDimensions(d*this.scaleX,l*this.scaleY);var v=i.sizeAfterTransform(d,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:r});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(s,r){return this.strokeUniform?{x:s+this.strokeWidth,y:r+this.strokeWidth}:{x:s,y:r}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),r=this._getTransformedDimensions(),u=n(r,s,!0);return u.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,c){if(c){if(c.toLive)return a+": url(#SVGID_"+c.id+"); ";var n=new e.Color(c),s=a+": "+n.toRgb()+"; ",r=n.getAlpha();return r!==1&&(s+=a+"-opacity: "+r.toString()+"; "),s}else return a+": none; "}var i=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(a){var c=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity!="undefined"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",_=a?"":this.getSvgFilter(),y=h("fill",this.fill),C=h("stroke",this.stroke);return[C,"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",l,"; ",y,"fill-rule: ",c,"; ","opacity: ",g,";",_,v].join("")},getSvgSpanStyles:function(a,c){var n="; ",r=a.fontFamily?"font-family: "+(a.fontFamily.indexOf("'")===-1&&a.fontFamily.indexOf('"')===-1?"'"+a.fontFamily+"'":a.fontFamily)+n:"",s=a.strokeWidth?"stroke-width: "+a.strokeWidth+n:"",r=r,u=a.fontSize?"font-size: "+a.fontSize+"px"+n:"",d=a.fontStyle?"font-style: "+a.fontStyle+n:"",l=a.fontWeight?"font-weight: "+a.fontWeight+n:"",g=a.fill?h("fill",a.fill):"",v=a.stroke?h("stroke",a.stroke):"",_=this.getSvgTextDecoration(a),y=a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"";return _&&(_="text-decoration: "+_+n),[v,s,r,u,d,l,_,g,y,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(c){return a[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,c){var n=a?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'+e.util.matrixToSVG(n);return s+(c||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var c=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,c),'" y="',i(-this.height/2,c),'" width="',i(this.width,c),'" height="',i(this.height,c),`"></rect>
`)}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,c){c=c||{};var n=c.reviver,s=c.additionalTransform||"",r=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),u=a.indexOf("COMMON_PARTS");return a[u]=r,n?n(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,c){c=c||{};var n=c.noStyle,s=c.reviver,r=n?"":'style="'+this.getSvgStyles()+'" ',u=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",d=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,v=this.stroke,_=this.fill,y=this.shadow,C,S=[],x,T=a.indexOf("COMMON_PARTS"),D=c.additionalTransform;return d&&(d.clipPathId="CLIPPATH_"+e.Object.__uid++,x='<clipPath id="'+d.clipPathId+`" >
`+d.toClipPathSVG(s)+`</clipPath>
`),g&&S.push("<g ",u,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`),C=[r,l,n?"":this.addPaintOrder()," ",D?'transform="'+D+'" ':""].join(""),a[T]=C,_&&_.toLive&&S.push(_.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),y&&S.push(y.toSVG(this)),d&&S.push(x),S.push(a.join("")),S.push(`</g>
`),g&&S.push(`</g>
`),s?s(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=e.util.object.extend,i="stateProperties";function a(n,s,r){var u={},d=!0;r.forEach(function(l){u[l]=n[l]}),h(n[s],u,d)}function c(n,s,r){if(n===s)return!0;if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(var u=0,d=n.length;u<d;u++)if(!c(n[u],s[u]))return!1;return!0}else if(n&&typeof n=="object"){var l=Object.keys(n),g;if(!s||typeof s!="object"||!r&&l.length!==Object.keys(s).length)return!1;for(var u=0,d=l.length;u<d;u++)if(g=l[u],!(g==="canvas"||g==="group")&&!c(n[g],s[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(n){n=n||i;var s="_"+n;return Object.keys(this[s]).length<this[n].length?!0:!c(this[s],this,!0)},saveState:function(n){var s=n&&n.propertySet||i,r="_"+s;return this[r]?(a(this,r,this[s]),n&&n.stateProperties&&a(this,r,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var s=n.propertySet||i;return n.propertySet=s,this["_"+s]={},this.saveState(n),this}})}(),function(){var h=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(i,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,n=i.y,s,r,u=Object.keys(this.oCoords),d=u.length-1,l;for(this.__corner=0;d>=0;d--)if(l=u[d],!!this.isControlVisible(l)&&(r=this._getImageLines(a?this.oCoords[l].touchCorner:this.oCoords[l].corner),s=this._findCrossPoints({x:c,y:n},r),s!==0&&s%2===1))return this.__corner=l,l;return!1},forEachControl:function(i){for(var a in this.controls)i(this.controls[a],a,this)},_setCornerCoords:function(){var i=this.oCoords;for(var a in i){var c=this.controls[a];i[a].corner=c.calcCornerCoords(this.angle,this.cornerSize,i[a].x,i[a].y,!1),i[a].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,i[a].x,i[a].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var a=this.getCenterPoint(),c=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return i.translate(a.x,a.y),i.scale(1/n[0],1/n[3]),i.rotate(h(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-c.x/2,-c.y/2,c.x,c.y),i.restore(),this},drawBorders:function(i,a){a=a||{};var c=this._calculateCurrentDimensions(),n=this.borderScaleFactor,s=c.x+n,r=c.y+n,u=typeof a.hasControls!="undefined"?a.hasControls:this.hasControls,d=!1;return i.save(),i.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(i,a.borderDashArray||this.borderDashArray),i.strokeRect(-s/2,-r/2,s,r),u&&(i.beginPath(),this.forEachControl(function(l,g,v){l.withConnection&&l.getVisibility(v,g)&&(d=!0,i.moveTo(l.x*s,l.y*r),i.lineTo(l.x*s+l.offsetX,l.y*r+l.offsetY))}),d&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,a,c){c=c||{};var n=e.util.sizeAfterTransform(this.width,this.height,a),s=this.strokeWidth,r=this.strokeUniform,u=this.borderScaleFactor,d=n.x+s*(r?this.canvas.getZoom():a.scaleX)+u,l=n.y+s*(r?this.canvas.getZoom():a.scaleY)+u;return i.save(),this._setLineDash(i,c.borderDashArray||this.borderDashArray),i.strokeStyle=c.borderColor||this.borderColor,i.strokeRect(-d/2,-l/2,d,l),i.restore(),this},drawControls:function(i,a){a=a||{},i.save();var c=this.canvas.getRetinaScaling(),n,s;return i.setTransform(c,0,0,c,0,0),i.strokeStyle=i.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(r,u,d){s=d.oCoords[u],r.getVisibility(d,u)&&(n&&(s=e.util.transformPoint(s,n)),r.render(i,s.x,s.y,a,d))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=a,this},setControlsVisibility:function(i){i||(i={});for(var a in i)this.setControlVisible(a,i[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,i){i=i||{};var a=function(){},c=i.onComplete||a,n=i.onChange||a,s=this;return e.util.animate({startValue:h.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(r){h.set("left",r),s.requestRenderAll(),n()},onComplete:function(){h.setCoords(),c()}}),this},fxCenterObjectV:function(h,i){i=i||{};var a=function(){},c=i.onComplete||a,n=i.onChange||a,s=this;return e.util.animate({startValue:h.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(r){h.set("top",r),s.requestRenderAll(),n()},onComplete:function(){h.setCoords(),c()}}),this},fxRemove:function(h,i){i=i||{};var a=function(){},c=i.onComplete||a,n=i.onChange||a,s=this;return e.util.animate({startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(r){h.set("opacity",r),s.requestRenderAll(),n()},onComplete:function(){s.remove(h),c()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],i,a;for(i in arguments[0])h.push(i);for(var c=0,n=h.length;c<n;c++)i=h[c],a=c!==n-1,this._animate(i,arguments[0][i],arguments[1],a)}else this._animate.apply(this,arguments);return this},_animate:function(h,i,a,c){var n=this,s;i=i.toString(),a?a=e.util.object.clone(a):a={},~h.indexOf(".")&&(s=h.split("."));var r=n.colorProperties.indexOf(h)>-1||s&&n.colorProperties.indexOf(s[1])>-1,u=s?this.get(s[0])[s[1]]:this.get(h);"from"in a||(a.from=u),r||(~i.indexOf("=")?i=u+parseFloat(i.replace("=","")):i=parseFloat(i));var d={startValue:a.from,endValue:i,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(l,g,v){return a.abort.call(n,l,g,v)},onChange:function(l,g,v){s?n[s[0]][s[1]]=l:n.set(h,l),!c&&a.onChange&&a.onChange(l,g,v)},onComplete:function(l,g,v){c||(n.setCoords(),a.onComplete&&a.onComplete(l,g,v))}};return r?e.util.animateColor(d.startValue,d.endValue,d.duration,d):e.util.animate(d)}}),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(r,u){r||(r=[0,0,0,0]),this.callSuper("initialize",u),this.set("x1",r[0]),this.set("y1",r[1]),this.set("x2",r[2]),this.set("y2",r[3]),this._setWidthHeight(u)},_setWidthHeight:function(r){r||(r={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in r?r.left:this._getLeftToOriginX(),this.top="top"in r?r.top:this._getTopToOriginY()},_set:function(r,u){return this.callSuper("_set",r,u),typeof n[r]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(r){r.beginPath();var u=this.calcLinePoints();r.moveTo(u.x1,u.y1),r.lineTo(u.x2,u.y2),r.lineWidth=this.strokeWidth;var d=r.strokeStyle;r.strokeStyle=this.stroke||r.fillStyle,this.stroke&&this._renderStroke(r),r.strokeStyle=d},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(r){return a(this.callSuper("toObject",r),this.calcLinePoints())},_getNonTransformedDimensions:function(){var r=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(r.y-=this.strokeWidth),this.height===0&&(r.x-=this.strokeWidth)),r},calcLinePoints:function(){var r=this.x1<=this.x2?-1:1,u=this.y1<=this.y2?-1:1,d=r*this.width*.5,l=u*this.height*.5,g=r*this.width*-.5,v=u*this.height*-.5;return{x1:d,x2:g,y1:l,y2:v}},_toSVG:function(){var r=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(r,u,d){d=d||{};var l=i.parseAttributes(r,i.Line.ATTRIBUTE_NAMES),g=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];u(new i.Line(g,a(l,d)))},i.Line.fromObject=function(r,u){function d(g){delete g.points,u&&u(g)}var l=c(r,!0);l.points=[r.x1,r.y1,r.x2,r.y2],i.Object._fromObject("Line",l,d,"points")};function s(r,u){var d=r.origin,l=r.axis1,g=r.axis2,v=r.dimension,_=u.nearest,y=u.center,C=u.farthest;return function(){switch(this.get(d)){case _:return Math.min(this.get(l),this.get(g));case y:return Math.min(this.get(l),this.get(g))+.5*this.get(v);case C:return Math.max(this.get(l),this.get(g))}}}}(t),function(h){var i=h.fabric||(h.fabric={}),a=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:a*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,s){return this.callSuper("_set",n,s),n==="radius"&&this.setRadius(s),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,s=0,r=0,u=(this.endAngle-this.startAngle)%(2*a);if(u===0)n=["<circle ","COMMON_PARTS",'cx="'+s+'" cy="'+r+'" ','r="',this.radius,`" />
`];else{var d=i.util.cos(this.startAngle)*this.radius,l=i.util.sin(this.startAngle)*this.radius,g=i.util.cos(this.endAngle)*this.radius,v=i.util.sin(this.endAngle)*this.radius,_=u>a?"1":"0";n=['<path d="M '+d+" "+l," A "+this.radius+" "+this.radius," 0 ",+_+" 1"," "+g+" "+v,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(n,s){var r=i.parseAttributes(n,i.Circle.ATTRIBUTE_NAMES);if(!c(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,s(new i.Circle(r))};function c(n){return"radius"in n&&n.radius>=0}i.Circle.fromObject=function(n,s){i.Object._fromObject("Circle",n,s)}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(a){var c=this.width/2,n=this.height/2;a.beginPath(),a.moveTo(-c,n),a.lineTo(0,-n),a.lineTo(c,n),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,c=this.height/2,n=[-a+" "+c,"0 "+-c,a+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),i.Triangle.fromObject=function(a,c){return i.Object._fromObject("Triangle",a,c)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,n){switch(this.callSuper("_set",c,n),c){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,a,!1),c.restore(),this._renderPaintInOrder(c)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(c,n){var s=i.parseAttributes(c,i.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,n(new i.Ellipse(s))},i.Ellipse.fromObject=function(c,n){i.Object._fromObject("Ellipse",c,n)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var n=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,u=this.height,d=-this.width/2,l=-this.height/2,g=n!==0||s!==0,v=1-.5522847498;c.beginPath(),c.moveTo(d+n,l),c.lineTo(d+r-n,l),g&&c.bezierCurveTo(d+r-v*n,l,d+r,l+v*s,d+r,l+s),c.lineTo(d+r,l+u-s),g&&c.bezierCurveTo(d+r,l+u-v*s,d+r-v*n,l+u,d+r-n,l+u),c.lineTo(d+n,l+u),g&&c.bezierCurveTo(d+v*n,l+u,d,l+u-v*s,d,l+u-s),c.lineTo(d,l+s),g&&c.bezierCurveTo(d,l+v*s,d+v*n,l,d+n,l),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(c,n,s){if(!c)return n(null);s=s||{};var r=i.parseAttributes(c,i.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var u=new i.Rect(a(s?i.util.object.clone(s):{},r));u.visible=u.visible&&u.width>0&&u.height>0,n(u)},i.Rect.fromObject=function(c,n){return i.Object._fromObject("Rect",c,n)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.util.array.min,n=i.util.array.max,s=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(r,u){u=u||{},this.points=r||[],this.callSuper("initialize",u),this._setPositionDimensions(u)},_setPositionDimensions:function(r){var u=this._calcDimensions(r),d;this.width=u.width,this.height=u.height,r.fromSVG||(d=this.translateToGivenOrigin({x:u.left-this.strokeWidth/2,y:u.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof r.left=="undefined"&&(this.left=r.fromSVG?u.left:d.x),typeof r.top=="undefined"&&(this.top=r.fromSVG?u.top:d.y),this.pathOffset={x:u.left+this.width/2,y:u.top+this.height/2}},_calcDimensions:function(){var r=this.points,u=c(r,"x")||0,d=c(r,"y")||0,l=n(r,"x")||0,g=n(r,"y")||0,v=l-u,_=g-d;return{left:u,top:d,width:v,height:_}},toObject:function(r){return a(this.callSuper("toObject",r),{points:this.points.concat()})},_toSVG:function(){for(var r=[],u=this.pathOffset.x,d=this.pathOffset.y,l=i.Object.NUM_FRACTION_DIGITS,g=0,v=this.points.length;g<v;g++)r.push(s(this.points[g].x-u,l),",",s(this.points[g].y-d,l)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',r.join(""),`" />
`]},commonRender:function(r){var u,d=this.points.length,l=this.pathOffset.x,g=this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;r.beginPath(),r.moveTo(this.points[0].x-l,this.points[0].y-g);for(var v=0;v<d;v++)u=this.points[v],r.lineTo(u.x-l,u.y-g);return!0},_render:function(r){!this.commonRender(r)||this._renderPaintInOrder(r)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(r){return function(u,d,l){if(!u)return d(null);l||(l={});var g=i.parsePointsAttribute(u.getAttribute("points")),v=i.parseAttributes(u,i[r].ATTRIBUTE_NAMES);v.fromSVG=!0,d(new i[r](g,a(v,l)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(r,u){return i.Object._fromObject("Polyline",r,u,"points")}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(a){!this.commonRender(a)||(a.closePath(),this._renderPaintInOrder(a))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(a,c){i.Object._fromObject("Polygon",a,c,"points")}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.array.min,c=i.util.array.max,n=i.util.object.extend,s=Object.prototype.toString,r=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(u,d){d=d||{},this.callSuper("initialize",d),u||(u=[]);var l=s.call(u)==="[object Array]";this.path=i.util.makePathSimpler(l?u:i.util.parsePath(u)),!!this.path&&i.Polyline.prototype._setPositionDimensions.call(this,d)},_renderPathCommands:function(u){var d,l=0,g=0,v=0,_=0,y=0,C=0,S=-this.pathOffset.x,x=-this.pathOffset.y;u.beginPath();for(var T=0,D=this.path.length;T<D;++T)switch(d=this.path[T],d[0]){case"L":v=d[1],_=d[2],u.lineTo(v+S,_+x);break;case"M":v=d[1],_=d[2],l=v,g=_,u.moveTo(v+S,_+x);break;case"C":v=d[5],_=d[6],y=d[3],C=d[4],u.bezierCurveTo(d[1]+S,d[2]+x,y+S,C+x,v+S,_+x);break;case"Q":u.quadraticCurveTo(d[1]+S,d[2]+x,d[3]+S,d[4]+x),v=d[3],_=d[4],y=d[1],C=d[2];break;case"z":case"Z":v=l,_=g,u.closePath();break}},_render:function(u){this._renderPathCommands(u),this._renderPaintInOrder(u)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(u){return n(this.callSuper("toObject",u),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(u){var d=this.toObject(["sourcePath"].concat(u));return d.sourcePath&&delete d.path,d},_toSVG:function(){var u=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',u,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var u=i.Object.NUM_FRACTION_DIGITS;return" translate("+r(-this.pathOffset.x,u)+", "+r(-this.pathOffset.y,u)+")"},toClipPathSVG:function(u){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:d})},toSVG:function(u){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:d})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var u=[],d=[],l,g=0,v=0,_=0,y=0,C,S=0,x=this.path.length;S<x;++S){switch(l=this.path[S],l[0]){case"L":_=l[1],y=l[2],C=[];break;case"M":_=l[1],y=l[2],g=_,v=y,C=[];break;case"C":C=i.util.getBoundsOfCurve(_,y,l[1],l[2],l[3],l[4],l[5],l[6]),_=l[5],y=l[6];break;case"Q":C=i.util.getBoundsOfCurve(_,y,l[1],l[2],l[1],l[2],l[3],l[4]),_=l[3],y=l[4];break;case"z":case"Z":_=g,y=v;break}C.forEach(function(K){u.push(K.x),d.push(K.y)}),u.push(_),d.push(y)}var T=a(u)||0,D=a(d)||0,j=c(u)||0,U=c(d)||0,H=j-T,Q=U-D;return{left:T,top:D,width:H,height:Q}}}),i.Path.fromObject=function(u,d){if(typeof u.sourcePath=="string"){var l=u.sourcePath;i.loadSVGFromURL(l,function(g){var v=g[0];v.setOptions(u),d&&d(v)})}else i.Object._fromObject("Path",u,d,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(u,d,l){var g=i.parseAttributes(u,i.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,d(new i.Path(g.d,n(g,l)))}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.array.min,c=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,s,r){s=s||{},this._objects=[],r&&this.callSuper("initialize",s),this._objects=n||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(r)this._updateObjectsACoords();else{var d=s&&s.centerPoint;s.originX!==void 0&&(this.originX=s.originX),s.originY!==void 0&&(this.originY=s.originY),d||this._calcBounds(),this._updateObjectsCoords(d),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,s=this._objects.length;s--;)this._objects[s].setCoords(n)},_updateObjectsCoords:function(s){for(var s=s||this.getCenterPoint(),r=this._objects.length;r--;)this._updateObjectCoords(this._objects[r],s)},_updateObjectCoords:function(n,s){var r=n.left,u=n.top,d=!0;n.set({left:r-s.x,top:u-s.y}),n.group=this,n.setCoords(d)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var s=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),n&&(s&&i.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,s){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(n,s);if(n==="canvas")for(;r--;)this._objects[r]._set(n,s);i.Object.prototype._set.call(this,n,s)},toObject:function(n){var s=this.includeDefaultValues,r=this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){var l=d.includeDefaultValues;d.includeDefaultValues=s;var g=d.toObject(n);return d.includeDefaultValues=l,g}),u=i.Object.prototype.toObject.call(this,n);return u.objects=r,u},toDatalessObject:function(n){var s,r=this.sourcePath;if(r)s=r;else{var u=this.includeDefaultValues;s=this._objects.map(function(l){var g=l.includeDefaultValues;l.includeDefaultValues=u;var v=l.toDatalessObject(n);return l.includeDefaultValues=g,v})}var d=i.Object.prototype.toDatalessObject.call(this,n);return d.objects=s,d},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=i.Object.prototype.shouldCache.call(this);if(n){for(var s=0,r=this._objects.length;s<r;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,s=this._objects.length;n<s;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var s=0,r=this._objects.length;s<r;s++)this._objects[s].render(n);this._drawClipPath(n)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var s=0,r=this._objects.length;s<r;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-d/2,u,d)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(s){i.util.addTransformToObject(s,n),delete s.group,s.setCoords()}),this},realizeTransform:function(n,s){return i.util.addTransformToObject(n,s),n},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var n=this._objects,s=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var u=new i.ActiveSelection([]);return u.set(r),u.type="activeSelection",s.remove(this),n.forEach(function(d){d.group=u,d.dirty=!0,s.add(d)}),u.canvas=s,u._objects=n,s._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0;return this.forEachObject(function(s){s.setCoords(n)}),this},_calcBounds:function(n){for(var s=[],r=[],u,d,l,g=["tr","br","bl","tl"],v=0,_=this._objects.length,y,C=g.length;v<_;++v){for(u=this._objects[v],l=u.calcACoords(),y=0;y<C;y++)d=g[y],s.push(l[d].x),r.push(l[d].y);u.aCoords=l}this._getBounds(s,r,n)},_getBounds:function(n,s,r){var u=new i.Point(a(n),a(s)),d=new i.Point(c(n),c(s)),l=u.y||0,g=u.x||0,v=d.x-u.x||0,_=d.y-u.y||0;this.width=v,this.height=_,r||this.setPositionByOrigin({x:g,y:l},"left","top")},_toSVG:function(n){for(var s=["<g ","COMMON_PARTS",` >
`],r=0,u=this._objects.length;r<u;r++)s.push("		",this._objects[r].toSVG(n));return s.push(`</g>
`),s},getSvgStyles:function(){var n=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",s=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),s].join("")},toClipPathSVG:function(n){for(var s=[],r=0,u=this._objects.length;r<u;r++)s.push("	",this._objects[r].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(s,{reviver:n})}}),i.Group.fromObject=function(n,s){var r=n.objects,u=i.util.object.clone(n,!0);if(delete u.objects,typeof r=="string"){i.loadSVGFromURL(r,function(d){var l=i.util.groupSVGElements(d,n,r);l.set(u),s&&s(l)});return}i.util.enlivenObjects(r,function(d){i.util.enlivenObjects([n.clipPath],function(l){var g=i.util.object.clone(n,!0);g.clipPath=l[0],delete g.objects,s&&s(new i.Group(d,g,!0))})})})}(t),function(h){var i=h.fabric||(h.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(a,c){c=c||{},this._objects=a||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var c=i.Object.prototype.toObject.call(this),n=new i.Group([]);if(delete c.type,n.set(c),a.forEach(function(r){r.canvas.remove(r),r.group=n}),n._objects=a,!this.canvas)return n;var s=this.canvas;return s.add(n),s._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,c,n){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,c),n=n||{},typeof n.hasControls=="undefined"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var s=0,r=this._objects.length;s<r;s++)this._objects[s]._renderControls(a,n);a.restore()}}),i.ActiveSelection.fromObject=function(a,c){i.util.enlivenObjects(a.objects,function(n){delete a.objects,c&&c(new i.ActiveSelection(n,a,!0))})})}(t),function(h){var i=e.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,c){c||(c={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",c),this._initElement(a,c)},getElement:function(){return this._element||{}},setElement:function(a,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var c=e.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(a)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,n=this.height/2;a.beginPath(),a.moveTo(-c,-n),a.lineTo(c,-n),a.lineTo(c,n),a.lineTo(-c,n),a.lineTo(-c,-n),a.closePath()}},toObject:function(a){var c=[];this.filters.forEach(function(s){s&&c.push(s.toObject())});var n=i(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a=[],c=[],n,s=this._element,r=-this.width/2,u=-this.height/2,d="",l="";if(!s)return[];if(this.hasCrop()){var g=e.Object.__uid++;a.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+r+'" y="'+u+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',u-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,l,'"',d,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,n=["	<rect ",'x="',r,'" y="',u,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?a=a.concat(n,c):a=a.concat(c,n),a},getSrc:function(a){var c=a?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(a,c,n){return e.util.loadImage(a,function(s,r){this.setElement(s,n),this._setWidthHeight(),c&&c(this,r)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,c=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.scaleX,r=n.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||s>c&&r>c){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,this._lastScaleY=r;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var d=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=u.width,v=u.height;d.width=g,d.height=v,this._element=d,this._lastScaleX=a.scaleX=s,this._lastScaleY=a.scaleY=r,e.filterBackend.applyFilters([a],u,g,v,this._element,l),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height},applyFilters:function(a){if(a=a||this.filters||[],a=a.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),a.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,n=c.naturalWidth||c.width,s=c.naturalHeight||c.height;if(this._element===this._originalElement){var r=e.util.createCanvasElement();r.width=n,r.height=s,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(a,this._originalElement,n,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var c=this._element;if(!!c){var n=this._filterScalingX,s=this._filterScalingY,r=this.width,u=this.height,d=Math.min,l=Math.max,g=l(this.cropX,0),v=l(this.cropY,0),_=c.naturalWidth||c.width,y=c.naturalHeight||c.height,C=g*n,S=v*s,x=d(r*n,_-C),T=d(u*s,y-S),D=-r/2,j=-u/2,U=d(r,_/n-g),H=d(u,y/s-v);c&&a.drawImage(c,C,S,x,T,D,j,U,H)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,c){this.setElement(e.util.getById(a),c),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,c){a&&a.length?e.util.enlivenObjects(a,function(n){c&&c(n)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(a){a||(a={});var c=this.getElement();this.width=a.width||c.naturalWidth||c.width||0,this.height=a.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var a=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,n=this._element.height,s=1,r=1,u=0,d=0,l=0,g=0,v,_=this.width,y=this.height,C={width:_,height:y};return a&&(a.alignX!=="none"||a.alignY!=="none")?(a.meetOrSlice==="meet"&&(s=r=e.util.findScaleToFit(this._element,C),v=(_-c*s)/2,a.alignX==="Min"&&(u=-v),a.alignX==="Max"&&(u=v),v=(y-n*r)/2,a.alignY==="Min"&&(d=-v),a.alignY==="Max"&&(d=v)),a.meetOrSlice==="slice"&&(s=r=e.util.findScaleToCover(this._element,C),v=c-_/s,a.alignX==="Mid"&&(l=v/2),a.alignX==="Max"&&(l=v),v=n-y/r,a.alignY==="Mid"&&(g=v/2),a.alignY==="Max"&&(g=v),c=_/s,n=y/r)):(s=_/c,r=y/n),{width:c,height:n,scaleX:s,scaleY:r,offsetLeft:u,offsetTop:d,cropX:l,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(a,c){var n=e.util.object.clone(a);e.util.loadImage(n.src,function(s,r){if(r){c&&c(null,!0);return}e.Image.prototype._initFilters.call(n,n.filters,function(u){n.filters=u||[],e.Image.prototype._initFilters.call(n,[n.resizeFilter],function(d){n.resizeFilter=d[0],e.util.enlivenObjects([n.clipPath],function(l){n.clipPath=l[0];var g=new e.Image(s,n);c(g,!1)})})})},null,n.crossOrigin)},e.Image.fromURL=function(a,c,n){e.util.loadImage(a,function(s,r){c&&c(new e.Image(s,n),r)},null,n&&n.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(a,c,n){var s=e.parseAttributes(a,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(s["xlink:href"],c,i(n?e.util.object.clone(n):{},s))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(h){h=h||{};var i=function(){},a=h.onComplete||i,c=h.onChange||i,n=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){n.rotate(s),c()},onComplete:function(){n.setCoords(),a()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function h(a,c){var n="precision "+c+` float;
void main(){}`,s=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(s,n),a.compileShader(s),!!a.getShaderParameter(s,a.COMPILE_STATUS)}e.isWebglSupported=function(a){if(e.isLikelyNode)return!1;a=a||e.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),n=c.getContext("webgl")||c.getContext("experimental-webgl"),s=!1;if(n){e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),s=e.maxTextureSize>=a;for(var r=["highp","mediump","lowp"],u=0;u<3;u++)if(h(n,r[u])){e.webGlPrecision=r[u];break}}return this.isSupported=s,s},e.WebglFilterBackend=i;function i(a){a&&a.tileSize&&(this.tileSize=a.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(a,c){this.dispose(),this.createWebGLCanvas(a,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(a,c)},chooseFastestCopyGLTo2DMethod:function(a,c){var n=typeof window.performance!="undefined",s;try{new ImageData(1,1),s=!0}catch{s=!1}var r=typeof ArrayBuffer!="undefined",u=typeof Uint8ClampedArray!="undefined";if(!!(n&&s&&r&&u)){var d=e.util.createCanvasElement(),l=new ArrayBuffer(a*c*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=b;return}var g={imageBuffer:l,destinationWidth:a,destinationHeight:c,targetCanvas:d},v,_,y;d.width=a,d.height=c,v=window.performance.now(),m.call(g,this.gl,g),_=window.performance.now()-v,v=window.performance.now(),b.call(g,this.gl,g),y=window.performance.now()-v,_>y?(this.imageBuffer=l,this.copyGLTo2D=b):this.copyGLTo2D=m}},createWebGLCanvas:function(a,c){var n=e.util.createCanvasElement();n.width=a,n.height=c;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=n.getContext("webgl",s);r||(r=n.getContext("experimental-webgl",s)),!!r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)},applyFilters:function(a,c,n,s,r,u){var d=this.gl,l;u&&(l=this.getCachedTexture(u,c));var g={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:d,sourceTexture:this.createTexture(d,n,s,!l&&c),targetTexture:this.createTexture(d,n,s),originalTexture:l||this.createTexture(d,n,s,!l&&c),passes:a.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},v=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,v),a.forEach(function(_){_&&_.applyTo(g)}),p(g),this.copyGLTo2D(d,g),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(g.sourceTexture),d.deleteTexture(g.targetTexture),d.deleteFramebuffer(v),r.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(a,c,n,s){var r=a.createTexture();return a.bindTexture(a.TEXTURE_2D,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),s?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s):a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c,n,0,a.RGBA,a.UNSIGNED_BYTE,null),r},getCachedTexture:function(a,c){if(this.textureCache[a])return this.textureCache[a];var n=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[a]=n,n},evictCachesForKey:function(a){this.textureCache[a]&&(this.gl.deleteTexture(this.textureCache[a]),delete this.textureCache[a])},copyGLTo2D:m,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var a=this.gl,c={renderer:"",vendor:""};if(!a)return c;var n=a.getExtension("WEBGL_debug_renderer_info");if(n){var s=a.getParameter(n.UNMASKED_RENDERER_WEBGL),r=a.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(c.renderer=s.toLowerCase()),r&&(c.vendor=r.toLowerCase())}return this.gpuInfo=c,c}}}();function p(h){var i=h.targetCanvas,a=i.width,c=i.height,n=h.destinationWidth,s=h.destinationHeight;(a!==n||c!==s)&&(i.width=n,i.height=s)}function m(h,i){var a=h.canvas,c=i.targetCanvas,n=c.getContext("2d");n.translate(0,c.height),n.scale(1,-1);var s=a.height-c.height;n.drawImage(a,0,s,c.width,c.height,0,0,c.width,c.height)}function b(h,i){var a=i.targetCanvas,c=a.getContext("2d"),n=i.destinationWidth,s=i.destinationHeight,r=n*s*4,u=new Uint8Array(this.imageBuffer,0,r),d=new Uint8ClampedArray(this.imageBuffer,0,r);h.readPixels(0,0,n,s,h.RGBA,h.UNSIGNED_BYTE,u);var l=new ImageData(d,n,s);c.putImageData(l,0,0)}(function(){var h=function(){};e.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,c,n,s,r){var u=r.getContext("2d");u.drawImage(c,0,0,n,s);var d=u.getImageData(0,0,n,s),l=u.getImageData(0,0,n,s),g={sourceWidth:n,sourceHeight:s,imageData:d,originalEl:c,originalImageData:l,canvasEl:r,ctx:u,filterBackend:this};return a.forEach(function(v){v.applyTo(g)}),(g.imageData.width!==n||g.imageData.height!==s)&&(r.width=g.imageData.width,r.height=g.imageData.height),u.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var i in h)this[i]=h[i]},createProgram:function(h,i,a){i=i||this.fragmentSource,a=a||this.vertexSource,e.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var c=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(c,a),h.compileShader(c),!h.getShaderParameter(c,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(c));var n=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(n,i),h.compileShader(n),!h.getShaderParameter(n,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(n));var s=h.createProgram();if(h.attachShader(s,c),h.attachShader(s,n),h.linkProgram(s),!h.getProgramParameter(s,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(s));var r=this.getAttributeLocations(h,s),u=this.getUniformLocations(h,s)||{};return u.uStepW=h.getUniformLocation(s,"uStepW"),u.uStepH=h.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:r,uniformLocations:u}},getAttributeLocations:function(h,i){return{aPosition:h.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,i,a){var c=i.aPosition,n=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,n),h.enableVertexAttribArray(c),h.vertexAttribPointer(c,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var i=h.context,a,c;h.passes>1?(a=h.destinationWidth,c=h.destinationHeight,(h.sourceWidth!==a||h.sourceHeight!==c)&&(i.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(i,a,c)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,h.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(h){h.passes--,h.pass++;var i=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=i},isNeutralState:function(){var h=this.mainParameter,i=e.Image.filters[this.type].prototype;if(h)if(Array.isArray(i[h])){for(var a=i[h].length;a--;)if(this[h][a]!==i[h][a])return!1;return!0}else return i[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var i=h.context,a=this.retrieveShader(h);h.pass===0&&h.originalTexture?i.bindTexture(i.TEXTURE_2D,h.originalTexture):i.bindTexture(i.TEXTURE_2D,h.sourceTexture),i.useProgram(a.program),this.sendAttributeData(i,a.attributeLocations,h.aPosition),i.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),i.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(i,a.uniformLocations),i.viewport(0,0,h.destinationWidth,h.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,i,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,i),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,i){h.activeTexture(i),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var i=document.createElement("canvas");i.width=h.sourceWidth,i.height=h.sourceHeight,h.helpLayer=i}},toObject:function(){var h={type:this.type},i=this.mainParameter;return i&&(h[i]=this[i]),h},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(h,i){var a=new e.Image.filters[h.type](h);return i&&i(a),a},function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.ColorMatrix=c(a.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var s=n.imageData,r=s.data,u=r.length,d=this.matrix,l,g,v,_,y,C=this.colorsOnly;for(y=0;y<u;y+=4)l=r[y],g=r[y+1],v=r[y+2],C?(r[y]=l*d[0]+g*d[1]+v*d[2]+d[4]*255,r[y+1]=l*d[5]+g*d[6]+v*d[7]+d[9]*255,r[y+2]=l*d[10]+g*d[11]+v*d[12]+d[14]*255):(_=r[y+3],r[y]=l*d[0]+g*d[1]+v*d[2]+_*d[3]+d[4]*255,r[y+1]=l*d[5]+g*d[6]+v*d[7]+_*d[8]+d[9]*255,r[y+2]=l*d[10]+g*d[11]+v*d[12]+_*d[13]+d[14]*255,r[y+3]=l*d[15]+g*d[16]+v*d[17]+_*d[18]+d[19]*255)},getUniformLocations:function(n,s){return{uColorMatrix:n.getUniformLocation(s,"uColorMatrix"),uConstants:n.getUniformLocation(s,"uConstants")}},sendUniformData:function(n,s){var r=this.matrix,u=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],d=[r[4],r[9],r[14],r[19]];n.uniformMatrix4fv(s.uColorMatrix,!1,u),n.uniform4fv(s.uConstants,d)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Brightness=c(a.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var s=n.imageData,r=s.data,u,d=r.length,l=Math.round(this.brightness*255);for(u=0;u<d;u+=4)r[u]=r[u]+l,r[u+1]=r[u+1]+l,r[u+2]=r[u+2]+l}},getUniformLocations:function(n,s){return{uBrightness:n.getUniformLocation(s,"uBrightness")}},sendUniformData:function(n,s){n.uniform1f(s.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.Convolute=n(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(s){var r=Math.sqrt(this.matrix.length),u=this.type+"_"+r+"_"+(this.opaque?1:0),d=this.fragmentSource[u];return s.programCache.hasOwnProperty(u)||(s.programCache[u]=this.createProgram(s.context,d)),s.programCache[u]},applyTo2d:function(s){var r=s.imageData,u=r.data,d=this.matrix,l=Math.round(Math.sqrt(d.length)),g=Math.floor(l/2),v=r.width,_=r.height,y=s.ctx.createImageData(v,_),C=y.data,S=this.opaque?1:0,x,T,D,j,U,H,Q,K,re,se,oe,ae,R;for(oe=0;oe<_;oe++)for(se=0;se<v;se++){for(U=(oe*v+se)*4,x=0,T=0,D=0,j=0,R=0;R<l;R++)for(ae=0;ae<l;ae++)Q=oe+R-g,H=se+ae-g,!(Q<0||Q>=_||H<0||H>=v)&&(K=(Q*v+H)*4,re=d[R*l+ae],x+=u[K]*re,T+=u[K+1]*re,D+=u[K+2]*re,S||(j+=u[K+3]*re));C[U]=x,C[U+1]=T,C[U+2]=D,S?C[U+3]=u[U+3]:C[U+3]=j}s.imageData=y},getUniformLocations:function(s,r){return{uMatrix:s.getUniformLocation(r,"uMatrix"),uOpaque:s.getUniformLocation(r,"uOpaque"),uHalfSize:s.getUniformLocation(r,"uHalfSize"),uSize:s.getUniformLocation(r,"uSize")}},sendUniformData:function(s,r){s.uniform1fv(r.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Grayscale=c(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var s=n.imageData,r=s.data,u,d=r.length,l,g=this.mode;for(u=0;u<d;u+=4)g==="average"?l=(r[u]+r[u+1]+r[u+2])/3:g==="lightness"?l=(Math.min(r[u],r[u+1],r[u+2])+Math.max(r[u],r[u+1],r[u+2]))/2:g==="luminosity"&&(l=.21*r[u]+.72*r[u+1]+.07*r[u+2]),r[u]=l,r[u+1]=l,r[u+2]=l},retrieveShader:function(n){var s=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(s)){var r=this.fragmentSource[this.mode];n.programCache[s]=this.createProgram(n.context,r)}return n.programCache[s]},getUniformLocations:function(n,s){return{uMode:n.getUniformLocation(s,"uMode")}},sendUniformData:function(n,s){var r=1;n.uniform1i(s.uMode,r)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Invert=c(a.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var s=n.imageData,r=s.data,u,d=r.length;for(u=0;u<d;u+=4)r[u]=255-r[u],r[u+1]=255-r[u+1],r[u+2]=255-r[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,s){return{uInvert:n.getUniformLocation(s,"uInvert")}},sendUniformData:function(n,s){n.uniform1i(s.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.Noise=n(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(s){if(this.noise!==0){var r=s.imageData,u=r.data,d,l=u.length,g=this.noise,v;for(d=0,l=u.length;d<l;d+=4)v=(.5-Math.random())*g,u[d]+=v,u[d+1]+=v,u[d+2]+=v}},getUniformLocations:function(s,r){return{uNoise:s.getUniformLocation(r,"uNoise"),uSeed:s.getUniformLocation(r,"uSeed")}},sendUniformData:function(s,r){s.uniform1f(r.uNoise,this.noise/255),s.uniform1f(r.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Pixelate=c(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var s=n.imageData,r=s.data,u=s.height,d=s.width,l,g,v,_,y,C,S,x,T,D,j;for(g=0;g<u;g+=this.blocksize)for(v=0;v<d;v+=this.blocksize)for(l=g*4*d+v*4,_=r[l],y=r[l+1],C=r[l+2],S=r[l+3],D=Math.min(g+this.blocksize,u),j=Math.min(v+this.blocksize,d),x=g;x<D;x++)for(T=v;T<j;T++)l=x*4*d+T*4,r[l]=_,r[l+1]=y,r[l+2]=C,r[l+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,s){return{uBlocksize:n.getUniformLocation(s,"uBlocksize"),uStepW:n.getUniformLocation(s,"uStepW"),uStepH:n.getUniformLocation(s,"uStepH")}},sendUniformData:function(n,s){n.uniform1f(s.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.RemoveColor=n(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(s){var r=s.imageData,u=r.data,d,l=this.distance*255,g,v,_,y=new i.Color(this.color).getSource(),C=[y[0]-l,y[1]-l,y[2]-l],S=[y[0]+l,y[1]+l,y[2]+l];for(d=0;d<u.length;d+=4)g=u[d],v=u[d+1],_=u[d+2],g>C[0]&&v>C[1]&&_>C[2]&&g<S[0]&&v<S[1]&&_<S[2]&&(u[d+3]=0)},getUniformLocations:function(s,r){return{uLow:s.getUniformLocation(r,"uLow"),uHigh:s.getUniformLocation(r,"uHigh")}},sendUniformData:function(s,r){var u=new i.Color(this.color).getSource(),d=parseFloat(this.distance),l=[0+u[0]/255-d,0+u[1]/255-d,0+u[2]/255-d,1],g=[u[0]/255+d,u[1]/255+d,u[2]/255+d,1];s.uniform4fv(r.uLow,l),s.uniform4fv(r.uHigh,g)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in n)a[s]=c(a.ColorMatrix,{type:s,matrix:n[s],mainParameter:!1,colorsOnly:!0}),i.Image.filters[s].fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric,a=i.Image.filters,c=i.util.createClass;a.BlendColor=c(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var s=this.type+"_"+this.mode,r;return n.programCache.hasOwnProperty(s)||(r=this.buildSource(this.mode),n.programCache[s]=this.createProgram(n.context,r)),n.programCache[s]},applyTo2d:function(n){var s=n.imageData,r=s.data,u=r.length,d,l,g,v,_,y,C,S=1-this.alpha;C=new i.Color(this.color).getSource(),d=C[0]*this.alpha,l=C[1]*this.alpha,g=C[2]*this.alpha;for(var x=0;x<u;x+=4)switch(v=r[x],_=r[x+1],y=r[x+2],this.mode){case"multiply":r[x]=v*d/255,r[x+1]=_*l/255,r[x+2]=y*g/255;break;case"screen":r[x]=255-(255-v)*(255-d)/255,r[x+1]=255-(255-_)*(255-l)/255,r[x+2]=255-(255-y)*(255-g)/255;break;case"add":r[x]=v+d,r[x+1]=_+l,r[x+2]=y+g;break;case"diff":case"difference":r[x]=Math.abs(v-d),r[x+1]=Math.abs(_-l),r[x+2]=Math.abs(y-g);break;case"subtract":r[x]=v-d,r[x+1]=_-l,r[x+2]=y-g;break;case"darken":r[x]=Math.min(v,d),r[x+1]=Math.min(_,l),r[x+2]=Math.min(y,g);break;case"lighten":r[x]=Math.max(v,d),r[x+1]=Math.max(_,l),r[x+2]=Math.max(y,g);break;case"overlay":r[x]=d<128?2*v*d/255:255-2*(255-v)*(255-d)/255,r[x+1]=l<128?2*_*l/255:255-2*(255-_)*(255-l)/255,r[x+2]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255;break;case"exclusion":r[x]=d+v-2*d*v/255,r[x+1]=l+_-2*l*_/255,r[x+2]=g+y-2*g*y/255;break;case"tint":r[x]=d+v*S,r[x+1]=l+_*S,r[x+2]=g+y*S}},getUniformLocations:function(n,s){return{uColor:n.getUniformLocation(s,"uColor")}},sendUniformData:function(n,s){var r=new i.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,n.uniform4fv(s.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric,a=i.Image.filters,c=i.util.createClass;a.BlendImage=c(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var s=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,r)),n.programCache[s]},applyToWebGL:function(n){var s=n.context,r=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(s,r,s.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(n,s){return n.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var n=this.image,s=n._element.width,r=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/s,-n.top/r,1]},applyTo2d:function(n){var s=n.imageData,r=n.filterBackend.resources,u=s.data,d=u.length,l=s.width,g=s.height,v,_,y,C,S,x,T,D,j,U,H=this.image,Q;r.blendImage||(r.blendImage=i.util.createCanvasElement()),j=r.blendImage,U=j.getContext("2d"),j.width!==l||j.height!==g?(j.width=l,j.height=g):U.clearRect(0,0,l,g),U.setTransform(H.scaleX,0,0,H.scaleY,H.left,H.top),U.drawImage(H._element,0,0,l,g),Q=U.getImageData(0,0,l,g).data;for(var K=0;K<d;K+=4)switch(S=u[K],x=u[K+1],T=u[K+2],D=u[K+3],v=Q[K],_=Q[K+1],y=Q[K+2],C=Q[K+3],this.mode){case"multiply":u[K]=S*v/255,u[K+1]=x*_/255,u[K+2]=T*y/255,u[K+3]=D*C/255;break;case"mask":u[K+3]=C;break}},getUniformLocations:function(n,s){return{uTransformMatrix:n.getUniformLocation(s,"uTransformMatrix"),uImage:n.getUniformLocation(s,"uImage")}},sendUniformData:function(n,s){var r=this.calculateMatrix();n.uniform1i(s.uImage,1),n.uniformMatrix3fv(s.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(n,s){i.Image.fromObject(n.image,function(r){var u=i.util.object.clone(n);u.image=r,s(new i.Image.filters.BlendImage(u))})}}(t),function(h){var i=h.fabric||(h.fabric={}),a=Math.pow,c=Math.floor,n=Math.sqrt,s=Math.abs,r=Math.round,u=Math.sin,d=Math.ceil,l=i.Image.filters,g=i.util.createClass;l.Resize=g(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,_){return{uDelta:v.getUniformLocation(_,"uDelta"),uTaps:v.getUniformLocation(_,"uTaps")}},sendUniformData:function(v,_){v.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(v){var _=this.getFilterWindow(),y=this.type+"_"+_;if(!v.programCache.hasOwnProperty(y)){var C=this.generateShader(_);v.programCache[y]=this.createProgram(v.context,C)}return v.programCache[y]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,y=this.getFilterWindow(),C=new Array(y),S=1;S<=y;S++)C[S-1]=v(S*_);return C},generateShader:function(C){for(var _=new Array(C),y=this.fragmentSourceTOP,C,S=1;S<=C;S++)_[S-1]=S+".0 * uDelta";return y+="uniform float uTaps["+C+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,_.forEach(function(x,T){y+="  color += texture2D(uTexture, vTexCoord + "+x+") * uTaps["+T+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+x+") * uTaps["+T+`];
`,y+="  sum += 2.0 * uTaps["+T+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(_){if(_>=v||_<=-v)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var y=_/v;return u(_)/_*u(y)/y}},applyTo2d:function(v){var _=v.imageData,y=this.scaleX,C=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/C;var S=_.width,x=_.height,T=r(S*y),D=r(x*C),j;this.resizeType==="sliceHack"?j=this.sliceByTwo(v,S,x,T,D):this.resizeType==="hermite"?j=this.hermiteFastResize(v,S,x,T,D):this.resizeType==="bilinear"?j=this.bilinearFiltering(v,S,x,T,D):this.resizeType==="lanczos"&&(j=this.lanczosResize(v,S,x,T,D)),v.imageData=j},sliceByTwo:function(v,_,y,C,S){var x=v.imageData,T=.5,D=!1,j=!1,U=_*T,H=y*T,Q=i.filterBackend.resources,K,re,se=0,oe=0,ae=_,R=0;for(Q.sliceByTwo||(Q.sliceByTwo=document.createElement("canvas")),K=Q.sliceByTwo,(K.width<_*1.5||K.height<y)&&(K.width=_*1.5,K.height=y),re=K.getContext("2d"),re.clearRect(0,0,_*1.5,y),re.putImageData(x,0,0),C=c(C),S=c(S);!D||!j;)_=U,y=H,C<c(U*T)?U=c(U*T):(U=C,D=!0),S<c(H*T)?H=c(H*T):(H=S,j=!0),re.drawImage(K,se,oe,_,y,ae,R,U,H),se=ae,oe=R,R+=H;return re.getImageData(se,oe,C,S)},lanczosResize:function(v,_,y,C,S){function x(P){var B,N,A,O,M,F,q,L,Y,V,$;for(R.x=(P+.5)*H,W.x=c(R.x),B=0;B<S;B++){for(R.y=(B+.5)*Q,W.y=c(R.y),M=0,F=0,q=0,L=0,Y=0,N=W.x-se;N<=W.x+se;N++)if(!(N<0||N>=_)){V=c(1e3*s(N-R.x)),ae[V]||(ae[V]={});for(var G=W.y-oe;G<=W.y+oe;G++)G<0||G>=y||($=c(1e3*s(G-R.y)),ae[V][$]||(ae[V][$]=U(n(a(V*K,2)+a($*re,2))/1e3)),A=ae[V][$],A>0&&(O=(G*_+N)*4,M+=A,F+=A*T[O],q+=A*T[O+1],L+=A*T[O+2],Y+=A*T[O+3]))}O=(B*C+P)*4,j[O]=F/M,j[O+1]=q/M,j[O+2]=L/M,j[O+3]=Y/M}return++P<C?x(P):D}var T=v.imageData.data,D=v.ctx.createImageData(C,S),j=D.data,U=this.lanczosCreate(this.lanczosLobes),H=this.rcpScaleX,Q=this.rcpScaleY,K=2/this.rcpScaleX,re=2/this.rcpScaleY,se=d(H*this.lanczosLobes/2),oe=d(Q*this.lanczosLobes/2),ae={},R={},W={};return x(0)},bilinearFiltering:function(v,_,y,C,S){var x,T,D,j,U,H,Q,K,re,se,oe,ae,R=0,W,P=this.rcpScaleX,B=this.rcpScaleY,N=4*(_-1),A=v.imageData,O=A.data,M=v.ctx.createImageData(C,S),F=M.data;for(Q=0;Q<S;Q++)for(K=0;K<C;K++)for(U=c(P*K),H=c(B*Q),re=P*K-U,se=B*Q-H,W=4*(H*_+U),oe=0;oe<4;oe++)x=O[W+oe],T=O[W+4+oe],D=O[W+N+oe],j=O[W+N+4+oe],ae=x*(1-re)*(1-se)+T*re*(1-se)+D*se*(1-re)+j*re*se,F[R++]=ae;return M},hermiteFastResize:function(v,_,y,C,S){for(var x=this.rcpScaleX,T=this.rcpScaleY,D=d(x/2),j=d(T/2),U=v.imageData,H=U.data,Q=v.ctx.createImageData(C,S),K=Q.data,re=0;re<S;re++)for(var se=0;se<C;se++){for(var oe=(se+re*C)*4,ae=0,R=0,W=0,P=0,B=0,N=0,A=0,O=(re+.5)*T,M=c(re*T);M<(re+1)*T;M++)for(var F=s(O-(M+.5))/j,q=(se+.5)*x,L=F*F,Y=c(se*x);Y<(se+1)*x;Y++){var V=s(q-(Y+.5))/D,$=n(L+V*V);$>1&&$<-1||(ae=2*$*$*$-3*$*$+1,ae>0&&(V=4*(Y+M*_),A+=ae*H[V+3],W+=ae,H[V+3]<255&&(ae=ae*H[V+3]/250),P+=ae*H[V],B+=ae*H[V+1],N+=ae*H[V+2],R+=ae))}K[oe]=P/R,K[oe+1]=B/R,K[oe+2]=N/R,K[oe+3]=A/W}return Q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Contrast=c(a.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var s=n.imageData,r,d,u=s.data,d=u.length,l=Math.floor(this.contrast*255),g=259*(l+255)/(255*(259-l));for(r=0;r<d;r+=4)u[r]=g*(u[r]-128)+128,u[r+1]=g*(u[r+1]-128)+128,u[r+2]=g*(u[r+2]-128)+128}},getUniformLocations:function(n,s){return{uContrast:n.getUniformLocation(s,"uContrast")}},sendUniformData:function(n,s){n.uniform1f(s.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Saturation=c(a.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var s=n.imageData,r=s.data,u=r.length,d=-this.saturation,l,g;for(l=0;l<u;l+=4)g=Math.max(r[l],r[l+1],r[l+2]),r[l]+=g!==r[l]?(g-r[l])*d:0,r[l+1]+=g!==r[l+1]?(g-r[l+1])*d:0,r[l+2]+=g!==r[l+2]?(g-r[l+2])*d:0}},getUniformLocations:function(n,s){return{uSaturation:n.getUniformLocation(s,"uSaturation")}},sendUniformData:function(n,s){n.uniform1f(s.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Vibrance=c(a.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(this.vibrance!==0){var s=n.imageData,r=s.data,u=r.length,d=-this.vibrance,l,g,v,_;for(l=0;l<u;l+=4)g=Math.max(r[l],r[l+1],r[l+2]),v=(r[l]+r[l+1]+r[l+2])/3,_=Math.abs(g-v)*2/255*d,r[l]+=g!==r[l]?(g-r[l])*_:0,r[l+1]+=g!==r[l+1]?(g-r[l+1])*_:0,r[l+2]+=g!==r[l+2]?(g-r[l+2])*_:0}},getUniformLocations:function(n,s){return{uVibrance:n.getUniformLocation(s,"uVibrance")}},sendUniformData:function(n,s){n.uniform1f(s.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Blur=c(a.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var s=n.filterBackend.resources,r,u,d=n.imageData.width,l=n.imageData.height;s.blurLayer1||(s.blurLayer1=i.util.createCanvasElement(),s.blurLayer2=i.util.createCanvasElement()),r=s.blurLayer1,u=s.blurLayer2,(r.width!==d||r.height!==l)&&(u.width=r.width=d,u.height=r.height=l);var g=r.getContext("2d"),v=u.getContext("2d"),_=15,y,C,S,x,T=this.blur*.06*.5;for(g.putImageData(n.imageData,0,0),v.clearRect(0,0,d,l),x=-_;x<=_;x++)y=(Math.random()-.5)/4,C=x/_,S=T*C*d+y,v.globalAlpha=1-Math.abs(C),v.drawImage(r,S,y),g.drawImage(u,0,0),v.globalAlpha=1,v.clearRect(0,0,u.width,u.height);for(x=-_;x<=_;x++)y=(Math.random()-.5)/4,C=x/_,S=T*C*l+y,v.globalAlpha=1-Math.abs(C),v.drawImage(r,y,S),g.drawImage(u,0,0),v.globalAlpha=1,v.clearRect(0,0,u.width,u.height);n.ctx.drawImage(r,0,0);var D=n.ctx.getImageData(0,0,r.width,r.height);return g.globalAlpha=1,g.clearRect(0,0,r.width,r.height),D},getUniformLocations:function(n,s){return{delta:n.getUniformLocation(s,"uDelta")}},sendUniformData:function(n,s){var r=this.chooseRightDelta();n.uniform2fv(s.delta,r)},chooseRightDelta:function(){var n=1,s=[0,0],r;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),r=n*this.blur*.12,this.horizontal?s[0]=r:s[1]=r,s}}),a.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Gamma=c(a.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var s=n.imageData,r=s.data,u=this.gamma,d=r.length,l=1/u[0],g=1/u[1],v=1/u[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,d=256;_<d;_++)this.rVals[_]=Math.pow(_/255,l)*255,this.gVals[_]=Math.pow(_/255,g)*255,this.bVals[_]=Math.pow(_/255,v)*255;for(_=0,d=r.length;_<d;_+=4)r[_]=this.rVals[r[_]],r[_+1]=this.gVals[r[_+1]],r[_+2]=this.bVals[r[_+2]]},getUniformLocations:function(n,s){return{uGamma:n.getUniformLocation(s,"uGamma")}},sendUniformData:function(n,s){n.uniform3fv(s.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.Composed=c(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(n)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(n,s){var r=n.subFilters||[],u=r.map(function(l){return new i.Image.filters[l.type](l)}),d=new i.Image.filters.Composed({subFilters:u});return s&&s(d),d}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,c=i.util.createClass;a.HueRotation=c(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,s=i.util.cos(n),r=i.util.sin(n),u=1/3,d=Math.sqrt(u)*r,l=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+l/3,this.matrix[1]=u*l-d,this.matrix[2]=u*l+d,this.matrix[5]=u*l+d,this.matrix[6]=s+u*l,this.matrix[7]=u*l-d,this.matrix[10]=u*l-d,this.matrix[11]=u*l+d,this.matrix[12]=s+u*l},isNeutralState:function(n){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,n)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(c),cacheProperties:i.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,s){this.styles=s?s.styles||{}:{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=i.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,s,r,u,d,l,g,v=0,_=this._textLines.length;v<_;v++)if(!(this.textAlign!=="justify"&&(v===_-1||this.isEndOfWrapping(v)))&&(u=0,d=this._textLines[v],s=this.getLineWidth(v),s<this.width&&(g=this.textLines[v].match(this._reSpacesAndTabs)))){r=g.length,n=(this.width-s)/r;for(var y=0,C=d.length;y<=C;y++)l=this.__charBounds[v][y],this._reSpaceAndTab.test(d[y])?(l.width+=n,l.kernedWidth+=n,l.left+=u,u+=n):l.left+=u}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return n.width+=s*n.zoomX,n.height+=s*n.zoomY,n},_render:function(n){var s=this.path;s&&!s.isNotVisible()&&s._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){this.paintFirst==="stroke"?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,s,r){n.textBaseline="alphabetic",n.font=this._getFontDeclaration(s,r)},calcTextWidth:function(){for(var n=this.getLineWidth(0),s=1,r=this._textLines.length;s<r;s++){var u=this.getLineWidth(s);u>n&&(n=u)}return n},_renderTextLine:function(n,s,r,u,d,l){this._renderChars(n,s,r,u,d,l)},_renderTextLinesBackground:function(n){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var s,r,u=n.fillStyle,d,l,g=this._getLeftOffset(),v=this._getTopOffset(),_=0,y=0,C,S,x=this.path,T,D=0,j=this._textLines.length;D<j;D++){if(s=this.getHeightOfLine(D),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",D)){v+=s;continue}d=this._textLines[D],r=this._getLineLeftOffset(D),y=0,_=0,l=this.getValueOfPropertyAt(D,0,"textBackgroundColor");for(var U=0,H=d.length;U<H;U++)C=this.__charBounds[D][U],S=this.getValueOfPropertyAt(D,U,"textBackgroundColor"),x?(n.save(),n.translate(C.renderLeft,C.renderTop),n.rotate(C.angle),n.fillStyle=S,S&&n.fillRect(-C.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),C.width,s/this.lineHeight),n.restore()):S!==l?(T=g+r+_,this.direction==="rtl"&&(T=this.width-T-y),n.fillStyle=l,l&&n.fillRect(T,v,y,s/this.lineHeight),_=C.left,y=C.width,l=S):y+=C.kernedWidth;S&&!x&&(T=g+r+_,this.direction==="rtl"&&(T=this.width-T-y),n.fillStyle=S,n.fillRect(T,v,y,s/this.lineHeight)),v+=s}n.fillStyle=u,this._removeShadow(n)}},getFontCache:function(n){var s=n.fontFamily.toLowerCase();i.charWidthsCache[s]||(i.charWidthsCache[s]={});var r=i.charWidthsCache[s],u=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return r[u]||(r[u]={}),r[u]},_measureChar:function(n,s,r,u){var d=this.getFontCache(s),l=this._getFontDeclaration(s),g=this._getFontDeclaration(u),v=r+n,_=l===g,y,C,S,x=s.fontSize/this.CACHE_FONT_SIZE,T;if(r&&d[r]!==void 0&&(S=d[r]),d[n]!==void 0&&(T=y=d[n]),_&&d[v]!==void 0&&(C=d[v],T=C-S),y===void 0||S===void 0||C===void 0){var D=this.getMeasuringContext();this._setTextStyles(D,s,!0)}return y===void 0&&(T=y=D.measureText(n).width,d[n]=y),S===void 0&&_&&r&&(S=D.measureText(r).width,d[r]=S),_&&C===void 0&&(C=D.measureText(v).width,d[v]=C,T=C-S),{width:y*x,kernedWidth:T*x}},getHeightOfChar:function(n,s){return this.getValueOfPropertyAt(n,s,"fontSize")},measureLine:function(n){var s=this._measureLine(n);return this.charSpacing!==0&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(n){var s=0,r,u,d=this._textLines[n],l,g,v=0,_=new Array(d.length),y=0,C,S,x=this.path,T=this.pathSide==="right";for(this.__charBounds[n]=_,r=0;r<d.length;r++)u=d[r],g=this._getGraphemeBox(u,n,r,l),_[r]=g,s+=g.kernedWidth,l=u;if(_[r]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},x){switch(S=x.segmentsInfo[x.segmentsInfo.length-1].length,C=i.util.getPointOnPath(x.path,0,x.segmentsInfo),C.x+=x.pathOffset.x,C.y+=x.pathOffset.y,this.textAlign){case"left":y=T?S-s:0;break;case"center":y=(S-s)/2;break;case"right":y=T?0:S-s;break}for(y+=this.pathStartOffset*(T?-1:1),r=T?d.length-1:0;T?r>=0:r<d.length;T?r--:r++)g=_[r],y>S?y%=S:y<0&&(y+=S),this._setGraphemeOnPath(y,g,C),y+=g.kernedWidth}return{width:s,numOfSpaces:v}},_setGraphemeOnPath:function(n,s,r){var u=n+s.kernedWidth/2,d=this.path,l=i.util.getPointOnPath(d.path,u,d.segmentsInfo);s.renderLeft=l.x-r.x,s.renderTop=l.y-r.y,s.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(n,s,r,u,d){var l=this.getCompleteStyleDeclaration(s,r),g=u?this.getCompleteStyleDeclaration(s,r-1):{},v=this._measureChar(n,l,u,g),_=v.kernedWidth,y=v.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),y+=C,_+=C);var S={width:y,left:0,height:l.fontSize,kernedWidth:_,deltaY:l.deltaY};if(r>0&&!d){var x=this.__charBounds[s][r-1];S.left=x.left+x.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var s=this._textLines[n],r=this.getHeightOfChar(n,0),u=1,d=s.length;u<d;u++)r=Math.max(this.getHeightOfChar(n,u),r);return this.__lineHeights[n]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,s=0,r=0,u=this._textLines.length;r<u;r++)n=this.getHeightOfLine(r),s+=r===u-1?n/this.lineHeight:n;return s},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,s){n.save();for(var r=0,u=this._getLeftOffset(),d=this._getTopOffset(),l=0,g=this._textLines.length;l<g;l++){var v=this.getHeightOfLine(l),_=v/this.lineHeight,y=this._getLineLeftOffset(l);this._renderTextLine(s,n,this._textLines[l],u+y,d+r+_,l),r+=v}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,s,r,u,d,l){var g=this.getHeightOfLine(l),v=this.textAlign.indexOf("justify")!==-1,_,y,C="",S,x=0,T,D=this.path,j=!v&&this.charSpacing===0&&this.isEmptyStyles(l)&&!D,U=this.direction==="ltr",H=this.direction==="ltr"?1:-1,Q;if(s.save(),d-=g*this._fontSizeFraction/this.lineHeight,j){s.canvas.setAttribute("dir",U?"ltr":"rtl"),s.direction=U?"ltr":"rtl",s.textAlign=U?"left":"right",this._renderChar(n,s,l,0,r.join(""),u,d,g),s.restore();return}for(var K=0,re=r.length-1;K<=re;K++)T=K===re||this.charSpacing||D,C+=r[K],S=this.__charBounds[l][K],x===0?(u+=H*(S.kernedWidth-S.width),x+=S.width):x+=S.kernedWidth,v&&!T&&this._reSpaceAndTab.test(r[K])&&(T=!0),T||(_=_||this.getCompleteStyleDeclaration(l,K),y=this.getCompleteStyleDeclaration(l,K+1),T=this._hasStyleChanged(_,y)),T&&(D?(s.save(),s.translate(S.renderLeft,S.renderTop),s.rotate(S.angle),this._renderChar(n,s,l,K,C,-x/2,0,g),s.restore()):(Q=u,s.canvas.setAttribute("dir",U?"ltr":"rtl"),s.direction=U?"ltr":"rtl",s.textAlign=U?"left":"right",this._renderChar(n,s,l,K,C,Q,d,g)),C="",_=y,u+=H*x,x=0);s.restore()},_applyPatternGradientTransformText:function(n){var s=i.util.createCanvasElement(),r,u=this.width+this.strokeWidth,d=this.height+this.strokeWidth;return s.width=u,s.height=d,r=s.getContext("2d"),r.beginPath(),r.moveTo(0,0),r.lineTo(u,0),r.lineTo(u,d),r.lineTo(0,d),r.closePath(),r.translate(u/2,d/2),r.fillStyle=n.toLive(r),this._applyPatternGradientTransform(r,n),r.fill(),r.createPattern(s,"no-repeat")},handleFiller:function(n,s,r){var u,d;return r.toLive?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(u=-this.width/2,d=-this.height/2,n.translate(u,d),n[s]=this._applyPatternGradientTransformText(r),{offsetX:u,offsetY:d}):(n[s]=r.toLive(n,this),this._applyPatternGradientTransform(n,r)):(n[s]=r,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,s){return n.lineWidth=s.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",s.stroke)},_setFillStyles:function(n,s){return this.handleFiller(n,"fillStyle",s.fill)},_renderChar:function(n,s,r,u,d,l,g){var v=this._getStyleDeclaration(r,u),_=this.getCompleteStyleDeclaration(r,u),y=n==="fillText"&&_.fill,C=n==="strokeText"&&_.stroke&&_.strokeWidth,S,x;!C&&!y||(s.save(),y&&(S=this._setFillStyles(s,_)),C&&(x=this._setStrokeStyles(s,_)),s.font=this._getFontDeclaration(_),v&&v.textBackgroundColor&&this._removeShadow(s),v&&v.deltaY&&(g+=v.deltaY),y&&s.fillText(d,l-S.offsetX,g-S.offsetY),C&&s.strokeText(d,l-x.offsetX,g-x.offsetY),s.restore())},setSuperscript:function(n,s){return this._setScript(n,s,this.superscript)},setSubscript:function(n,s){return this._setScript(n,s,this.subscript)},_setScript:function(n,s,r){var u=this.get2DCursorLocation(n,!0),d=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"fontSize"),l=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"deltaY"),g={fontSize:d*r.size,deltaY:l+d*r.baseline};return this.setSelectionStyles(g,n,s),this},_hasStyleChanged:function(n,s){return n.fill!==s.fill||n.stroke!==s.stroke||n.strokeWidth!==s.strokeWidth||n.fontSize!==s.fontSize||n.fontFamily!==s.fontFamily||n.fontWeight!==s.fontWeight||n.fontStyle!==s.fontStyle||n.deltaY!==s.deltaY},_hasStyleChangedForSvg:function(n,s){return this._hasStyleChanged(n,s)||n.overline!==s.overline||n.underline!==s.underline||n.linethrough!==s.linethrough},_getLineLeftOffset:function(n){var s=this.getLineWidth(n),r=this.width-s,u=this.textAlign,d=this.direction,g,l=0,g=this.isEndOfWrapping(n);return u==="justify"||u==="justify-center"&&!g||u==="justify-right"&&!g||u==="justify-left"&&!g?0:(u==="center"&&(l=r/2),u==="right"&&(l=r),u==="justify-center"&&(l=r/2),u==="justify-right"&&(l=r),d==="rtl"&&(l-=r),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(this.__lineWidths[n])return this.__lineWidths[n];var s,r=this._textLines[n],u;return r===""?s=0:(u=this.measureLine(n),s=u.width),this.__lineWidths[n]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,s,r){var u=this._getStyleDeclaration(n,s);return u&&typeof u[r]!="undefined"?u[r]:this[r]},_renderTextDecoration:function(n,s){if(!(!this[s]&&!this.styleHas(s))){for(var r,u,d,l,g,v,_,y,C=this._getLeftOffset(),S=this._getTopOffset(),x,T,D,j,U,H,Q,K,re=this.path,se=this._getWidthOfCharSpacing(),oe=this.offsets[s],ae=0,R=this._textLines.length;ae<R;ae++){if(r=this.getHeightOfLine(ae),!this[s]&&!this.styleHas(s,ae)){S+=r;continue}_=this._textLines[ae],H=r/this.lineHeight,l=this._getLineLeftOffset(ae),T=0,D=0,y=this.getValueOfPropertyAt(ae,0,s),K=this.getValueOfPropertyAt(ae,0,"fill"),x=S+H*(1-this._fontSizeFraction),u=this.getHeightOfChar(ae,0),g=this.getValueOfPropertyAt(ae,0,"deltaY");for(var W=0,P=_.length;W<P;W++)if(j=this.__charBounds[ae][W],U=this.getValueOfPropertyAt(ae,W,s),Q=this.getValueOfPropertyAt(ae,W,"fill"),d=this.getHeightOfChar(ae,W),v=this.getValueOfPropertyAt(ae,W,"deltaY"),re&&U&&Q)n.save(),n.fillStyle=K,n.translate(j.renderLeft,j.renderTop),n.rotate(j.angle),n.fillRect(-j.kernedWidth/2,oe*d+v,j.kernedWidth,this.fontSize/15),n.restore();else if((U!==y||Q!==K||d!==u||v!==g)&&D>0){var B=C+l+T;this.direction==="rtl"&&(B=this.width-B-D),y&&K&&(n.fillStyle=K,n.fillRect(B,x+oe*u+g,D,this.fontSize/15)),T=j.left,D=j.width,y=U,K=Q,u=d,g=v}else D+=j.kernedWidth;var B=C+l+T;this.direction==="rtl"&&(B=this.width-B-D),n.fillStyle=Q,U&&Q&&n.fillRect(B,x+oe*u+g,D-se,this.fontSize/15),S+=r}this._removeShadow(n)}},_getFontDeclaration:function(n,s){var r=n||this,u=this.fontFamily,d=i.Text.genericFonts.indexOf(u.toLowerCase())>-1,l=u===void 0||u.indexOf("'")>-1||u.indexOf(",")>-1||u.indexOf('"')>-1||d?r.fontFamily:'"'+r.fontFamily+'"';return[i.isLikelyNode?r.fontWeight:r.fontStyle,i.isLikelyNode?r.fontStyle:r.fontWeight,s?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",l].join(" ")},render:function(n){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n))},_splitTextIntoLines:function(n){for(var s=n.split(this._reNewline),r=new Array(s.length),u=[`
`],d=[],l=0;l<s.length;l++)r[l]=i.util.string.graphemeSplit(s[l]),d=d.concat(r[l],u);return d.pop(),{_unwrappedLines:r,lines:s,graphemeText:d,graphemeLines:r}},toObject:function(n){var s=c.concat(n),r=this.callSuper("toObject",s);return r.styles=a(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(n,s){this.callSuper("set",n,s);var r=!1,u=!1;if(typeof n=="object")for(var d in n)d==="path"&&this.setPathInfo(),r=r||this._dimensionAffectingProps.indexOf(d)!==-1,u=u||d==="path";else r=this._dimensionAffectingProps.indexOf(n)!==-1,u=n==="path";return u&&this.setPathInfo(),r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(n,s,r){if(!n)return s(null);var u=i.parseAttributes(n,i.Text.ATTRIBUTE_NAMES),d=u.textAnchor||"left";if(r=i.util.object.extend(r?a(r):{},u),r.top=r.top||0,r.left=r.left||0,u.textDecoration){var l=u.textDecoration;l.indexOf("underline")!==-1&&(r.underline=!0),l.indexOf("overline")!==-1&&(r.overline=!0),l.indexOf("line-through")!==-1&&(r.linethrough=!0),delete r.textDecoration}"dx"in u&&(r.left+=u.dx),"dy"in u&&(r.top+=u.dy),"fontSize"in r||(r.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in n?g=n.textContent:"firstChild"in n&&n.firstChild!==null&&"data"in n.firstChild&&n.firstChild.data!==null&&(g=n.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=r.strokeWidth;r.strokeWidth=0;var _=new i.Text(g,r),y=_.getScaledHeight()/_.height,C=(_.height+_.strokeWidth)*_.lineHeight-_.height,S=C*y,x=_.getScaledHeight()+S,T=0;d==="center"&&(T=_.getScaledWidth()/2),d==="right"&&(T=_.getScaledWidth()),_.set({left:_.left-T,top:_.top-(x-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof v!="undefined"?v:1}),s(_)},i.Text.fromObject=function(n,s){var r=a(n),u=n.path;return delete r.path,i.Object._fromObject("Text",r,function(d){u?i.Object._fromObject("Path",u,function(l){d.set("path",l),s(d)},"path"):s(d)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h!="undefined"&&!this.styles[h])return!0;var i=typeof h=="undefined"?this.styles:{line:this.styles[h]};for(var a in i)for(var c in i[a])for(var n in i[a][c])return!1;return!0},styleHas:function(h,i){if(!this.styles||!h||h===""||typeof i!="undefined"&&!this.styles[i])return!1;var a=typeof i=="undefined"?this.styles:{0:this.styles[i]};for(var c in a)for(var n in a[c])if(typeof a[c][n][h]!="undefined")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var i=this.styles,a=0,c,n,s=!0,r=0,u;for(var d in i){c=0;for(var l in i[d]){var u=i[d][l],g=u.hasOwnProperty(h);a++,g?(n?u[h]!==n&&(s=!1):n=u[h],u[h]===this[h]&&delete u[h]):s=!1,Object.keys(u).length!==0?c++:delete i[d][l]}c===0&&delete i[d]}for(var v=0;v<this._textLines.length;v++)r+=this._textLines[v].length;s&&a===r&&(this[h]=n,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var i=this.styles,a,c,n;for(c in i){a=i[c];for(n in a)delete a[n][h],Object.keys(a[n]).length===0&&delete a[n];Object.keys(a).length===0&&delete i[c]}}},_extendStyles:function(h,i){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),i)},get2DCursorLocation:function(h,i){typeof h=="undefined"&&(h=this.selectionStart);for(var a=i?this._unwrappedTextLines:this._textLines,c=a.length,n=0;n<c;n++){if(h<=a[n].length)return{lineIndex:n,charIndex:h};h-=a[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:a[n-1].length<h?a[n-1].length:h}},getSelectionStyles:function(h,i,a){typeof h=="undefined"&&(h=this.selectionStart||0),typeof i=="undefined"&&(i=this.selectionEnd||h);for(var c=[],n=h;n<i;n++)c.push(this.getStyleAtPosition(n,a));return c},getStyleAtPosition:function(h,i){var a=this.get2DCursorLocation(h),c=i?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex);return c||{}},setSelectionStyles:function(h,i,a){typeof i=="undefined"&&(i=this.selectionStart||0),typeof a=="undefined"&&(a=this.selectionEnd||i);for(var c=i;c<a;c++)this._extendStyles(c,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,i){var a=this.styles&&this.styles[h];return a?a[i]:null},getCompleteStyleDeclaration:function(h,i){for(var a=this._getStyleDeclaration(h,i)||{},c={},n,s=0;s<this._styleProperties.length;s++)n=this._styleProperties[s],c[n]=typeof a[n]=="undefined"?this[n]:a[n];return c},_setStyleDeclaration:function(h,i,a){this.styles[h][i]=a},_deleteStyleDeclaration:function(h,i){delete this.styles[h][i]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,a){this.callSuper("initialize",i,a),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,a){this[i]!==a&&(this._fireSelectionChanged(),this[i]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this.canvas.contextTop,c=this.canvas.viewportTransform;a.save(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(a),this._clearTextArea(a),i||a.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,a):this.renderSelection(i,a),a.restore()}},_clearTextArea:function(i){var a=this.width+4,c=this.height+4;i.clearRect(-a/2,-c/2,a,c)},_getCursorBoundaries:function(i){typeof i=="undefined"&&(i=this.selectionStart);var a=this._getLeftOffset(),c=this._getTopOffset(),n=this._getCursorBoundariesOffsets(i);return{left:a,top:c,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,c,n,s=0,r=0,u,d=this.get2DCursorLocation(i);n=d.charIndex,c=d.lineIndex;for(var l=0;l<c;l++)s+=this.getHeightOfLine(l);a=this._getLineLeftOffset(c);var g=this.__charBounds[c][n];return g&&(r=g.left),this.charSpacing!==0&&n===this._textLines[c].length&&(r-=this._getWidthOfCharSpacing()),u={top:s,left:a+(r>0?r:0)},this.direction==="rtl"&&(u.left*=-1),this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(i,a){var c=this.get2DCursorLocation(),n=c.lineIndex,s=c.charIndex>0?c.charIndex-1:0,r=this.getValueOfPropertyAt(n,s,"fontSize"),u=this.scaleX*this.canvas.getZoom(),d=this.cursorWidth/u,l=i.topOffset,g=this.getValueOfPropertyAt(n,s,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,s,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(i.left+i.leftOffset-d/2,l+i.top+g,d,r)},renderSelection:function(i,a){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=this.textAlign.indexOf("justify")!==-1,r=this.get2DCursorLocation(c),u=this.get2DCursorLocation(n),d=r.lineIndex,l=u.lineIndex,g=r.charIndex<0?0:r.charIndex,v=u.charIndex<0?0:u.charIndex,_=d;_<=l;_++){var y=this._getLineLeftOffset(_)||0,C=this.getHeightOfLine(_),S=0,x=0,T=0;if(_===d&&(x=this.__charBounds[d][g].left),_>=d&&_<l)T=s&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===l)if(v===0)T=this.__charBounds[l][v].left;else{var D=this._getWidthOfCharSpacing();T=this.__charBounds[l][v-1].left+this.__charBounds[l][v-1].width-D}S=C,(this.lineHeight<1||_===l&&this.lineHeight>1)&&(C/=this.lineHeight);var j=i.left+y+x,U=T-x,H=C,Q=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",H=1,Q=C):a.fillStyle=this.selectionColor,this.direction==="rtl"&&(j=this.width-j-U),a.fillRect(j,i.top+i.topOffset+Q,U,H),i.topOffset+=S}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),a=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:a}}}),e.IText.fromObject=function(i,a){if(h(i),i.styles)for(var c in i.styles)for(var n in i.styles[c])h(i.styles[c][n]);e.Object._fromObject("IText",i,a,"text")}}(),function(){var h=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var a=i.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,i._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var a=i.canvas;a&&(a._iTextInstances=a._iTextInstances||[],e.util.removeFromArray(a._iTextInstances,i),a._iTextInstances.length===0&&(a._hasITextHandlers=!1,i._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(a){a.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,a,c,n){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",a,{duration:c,onComplete:function(){s.isAborted||i[n]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var a=this,c=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},c)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var a=0,c=i-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)a++,c--;for(;/\S/.test(this._text[c])&&c>-1;)a++,c--;return i-a},findWordBoundaryRight:function(i){var a=0,c=i;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)a++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)a++,c++;return i+a},findLineBoundaryLeft:function(i){for(var a=0,c=i-1;!/\n/.test(this._text[c])&&c>-1;)a++,c--;return i-a},findLineBoundaryRight:function(i){for(var a=0,c=i;!/\n/.test(this._text[c])&&c<this._text.length;)a++,c++;return i+a},searchWordBoundary:function(i,a){for(var c=this._text,n=this._reSpace.test(c[i])?i-1:i,s=c[n],r=e.reNonWord;!r.test(s)&&n>0&&n<c.length;)n+=a,s=c[n];return r.test(s)&&(n+=a===1?0:1),n},selectWord:function(i){i=i||this.selectionStart;var a=this.searchWordBoundary(i,-1),c=this.searchWordBoundary(i,1);this.selectionStart=a,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var a=this.findLineBoundaryLeft(i),c=this.findLineBoundaryRight(i);return this.selectionStart=a,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var a=this.getSelectionStartFromPointer(i.e),c=this.selectionStart,n=this.selectionEnd;(a!==this.__selectionStartOnMouseDown||c===n)&&(c===a||n===a)||(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,a,c){var n=c.slice(0,i),s=e.util.string.graphemeSplit(n).length;if(i===a)return{selectionStart:s,selectionEnd:s};var r=c.slice(i,a),u=e.util.string.graphemeSplit(r).length;return{selectionStart:s,selectionEnd:s+u}},fromGraphemeToStringSelection:function(i,a,c){var n=c.slice(0,i),s=n.join("").length;if(i===a)return{selectionStart:s,selectionEnd:s};var r=c.slice(i,a),u=r.join("").length;return{selectionStart:s,selectionEnd:s+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(i),c=this.get2DCursorLocation(i),n=c.lineIndex,s=c.charIndex,r=this.getValueOfPropertyAt(n,s,"fontSize")*this.lineHeight,u=a.leftOffset,d=this.calcTransformMatrix(),l={x:a.left+u,y:a.top+a.topOffset+r},g=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,_=v.width/g,y=v.height/g,C=_-r,S=y-r,x=v.clientWidth/_,T=v.clientHeight/y;return l=e.util.transformPoint(l,d),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=x,l.y*=T,l.x<0&&(l.x=0),l.x>C&&(l.x=C),l.y<0&&(l.y=0),l.y>S&&(l.y=S),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:r+"px",charHeight:r}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,a){var c=this.get2DCursorLocation(i,!0),n=this.get2DCursorLocation(a,!0),s=c.lineIndex,r=c.charIndex,u=n.lineIndex,d=n.charIndex,l,g;if(s!==u){if(this.styles[s])for(l=r;l<this._unwrappedTextLines[s].length;l++)delete this.styles[s][l];if(this.styles[u])for(l=d;l<this._unwrappedTextLines[u].length;l++)g=this.styles[u][l],g&&(this.styles[s]||(this.styles[s]={}),this.styles[s][r+l-d]=g);for(l=s+1;l<=u;l++)delete this.styles[l];this.shiftLineStyles(u,s-u)}else if(this.styles[s]){g=this.styles[s];var v=d-r,_,y;for(l=r;l<d;l++)delete g[l];for(y in this.styles[s])_=parseInt(y,10),_>=d&&(g[_-v]=g[y],delete g[y])}},shiftLineStyles:function(i,a){var c=h(this.styles);for(var n in this.styles){var s=parseInt(n,10);s>i&&(this.styles[s+a]=c[s],c[s-a]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,a,c,n){var s,r={},u=!1,d=this._unwrappedTextLines[i].length===a;c||(c=1),this.shiftLineStyles(i,c),this.styles[i]&&(s=this.styles[i][a===0?a:a-1]);for(var l in this.styles[i]){var g=parseInt(l,10);g>=a&&(u=!0,r[g-a]=this.styles[i][l],d&&a===0||delete this.styles[i][l])}var v=!1;for(u&&!d&&(this.styles[i+c]=r,v=!0),v&&c--;c>0;)n&&n[c-1]?this.styles[i+c]={0:h(n[c-1])}:s?this.styles[i+c]={0:h(s)}:delete this.styles[i+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(i,a,c,n){this.styles||(this.styles={});var s=this.styles[i],r=s?h(s):{};c||(c=1);for(var u in r){var d=parseInt(u,10);d>=a&&(s[d+c]=r[d],r[d-c]||delete s[d])}if(this._forceClearCache=!0,n){for(;c--;)!Object.keys(n[c]).length||(this.styles[i]||(this.styles[i]={}),this.styles[i][a+c]=h(n[c]));return}if(!!s)for(var l=s[a?a-1:1];l&&c--;)this.styles[i][a+c]=h(l)},insertNewStyleBlock:function(i,a,c){for(var n=this.get2DCursorLocation(a,!0),s=[0],r=0,u=0;u<i.length;u++)i[u]===`
`?(r++,s[r]=0):s[r]++;s[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,s[0],c),c=c&&c.slice(s[0]+1)),r&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+s[0],r);for(var u=1;u<r;u++)s[u]>0?this.insertCharStyleObject(n.lineIndex+u,0,s[u],c):c&&(this.styles[n.lineIndex+u][0]=c[0]),c=c&&c.slice(s[u]+1);s[u]>0&&this.insertCharStyleObject(n.lineIndex+u,0,s[u],c)},setSelectionStartEndWithShift:function(i,a,c){c<=i?(a===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=c):c>i&&c<a?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(a===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=c)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(!!this.canvas){this.__newClickTime=+new Date;var i=h.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var i=this.getSelectionStartFromPointer(h),a=this.selectionStart,c=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(a,c,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var i=this.getLocalPointer(h),a=0,c=0,n=0,s=0,r=0,u,d,l=0,g=this._textLines.length;l<g&&n<=i.y;l++)n+=this.getHeightOfLine(l)*this.scaleY,r=l,l>0&&(s+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));u=this._getLineLeftOffset(r),c=u*this.scaleX,d=this._textLines[r],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+c);for(var v=0,_=d.length;v<_&&(a=c,c+=this.__charBounds[r][v].kernedWidth*this.scaleX,c<=i.x);v++)s++;return this._getNewSelectionStartFromOffset(i,a,c,s,_)},_getNewSelectionStartFromOffset:function(h,i,a,c,n){var s=h.x-i,r=a-h.x,u=r>s||r<0?0:1,d=c+u;return this.flipX&&(d=n-d),d>this._text.length&&(d=this._text.length),d}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(!!this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in i)this[i[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var i=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,n=a.length,s,r,u=n-c,d=this.selectionStart,l=this.selectionEnd,g=d!==l,v,_,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=d>C.selectionStart;g?(s=this._text.slice(d,l),u+=l-d):n<c&&(S?s=this._text.slice(l+u,l):s=this._text.slice(d,d-u)),r=a.slice(C.selectionEnd-u,C.selectionEnd),s&&s.length&&(r.length&&(v=this.getSelectionStyles(d,d+1,!1),v=r.map(function(){return v[0]})),g?(_=d,y=l):S?(_=l-s.length,y=l):(_=l,y=l+s.length),this.removeStyleFromTo(_,y)),r.length&&(i&&r.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(r,d,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(h,i){var a=this._getLineLeftOffset(h),c;return i>0&&(c=this.__charBounds[h][i-1],a+=c.left+c.width),a},getDownCursorOffset:function(h,i){var a=this._getSelectionForOffset(h,i),c=this.get2DCursorLocation(a),n=c.lineIndex;if(n===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-a;var s=c.charIndex,r=this._getWidthBeforeCursor(n,s),u=this._getIndexOnLine(n+1,r),d=this._textLines[n].slice(s);return d.length+u+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(h,i){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,i){var a=this._getSelectionForOffset(h,i),c=this.get2DCursorLocation(a),n=c.lineIndex;if(n===0||h.metaKey||h.keyCode===33)return-a;var s=c.charIndex,r=this._getWidthBeforeCursor(n,s),u=this._getIndexOnLine(n-1,r),d=this._textLines[n].slice(0,s),l=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+u-d.length+(1-l)},_getIndexOnLine:function(h,i){for(var a=this._textLines[h],c=this._getLineLeftOffset(h),n=c,s=0,r,u,d=0,l=a.length;d<l;d++)if(r=this.__charBounds[h][d].width,n+=r,n>i){u=!0;var g=n-r,v=n,_=Math.abs(g-i),y=Math.abs(v-i);s=y<_?d:d-1;break}return u||(s=a.length-1),s},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,i){var a="get"+h+"CursorOffset",c=this[a](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var i=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,i,a){var c;if(h.altKey)c=this["findWordBoundary"+a](this[i]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)c=this["findLineBoundary"+a](this[i]);else return this[i]+=a==="Left"?-1:1,!0;if(typeof c!==void 0&&this[i]!==c)return this[i]=c,!0},_moveLeft:function(h,i){return this._move(h,i,"Left")},_moveRight:function(h,i){return this._move(h,i,"Right")},moveCursorLeftWithoutShift:function(h){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,i){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,i.shiftKey?a+="Shift":a+="outShift",this[a](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(h,i){typeof i=="undefined"&&(i=h+1),this.removeStyleFromTo(h,i),this._text.splice(h,i-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,i,a,c){typeof c=="undefined"&&(c=a),c>a&&this.removeStyleFromTo(a,c);var n=e.util.string.graphemeSplit(h);this.insertNewStyleBlock(n,a,i),this._text=[].concat(this._text.slice(0,a),n,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=e.util.toFixed,i=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var c=!0,n=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",a.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(a,c){var n=[],s=[],r=a,u;this._setSVGBg(s);for(var d=0,l=this._textLines.length;d<l;d++)u=this._getLineLeftOffset(d),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(s,d,c+u,r),this._setSVGTextLineText(n,d,c+u,r),r+=this.getHeightOfLine(d);return{textSpans:n,textBgRects:s}},_createTextCharSpan:function(a,c,n,s){var r=a!==a.trim()||a.match(i),u=this.getSvgSpanStyles(c,r),d=u?'style="'+u+'"':"",l=c.deltaY,g="",v=e.Object.NUM_FRACTION_DIGITS;return l&&(g=' dy="'+h(l,v)+'" '),['<tspan x="',h(n,v),'" y="',h(s,v),'" ',g,d,">",e.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,c,n,s){var r=this.getHeightOfLine(c),u=this.textAlign.indexOf("justify")!==-1,d,l,g="",v,_,y=0,C=this._textLines[c],S;s+=r*(1-this._fontSizeFraction)/this.lineHeight;for(var x=0,T=C.length-1;x<=T;x++)S=x===T||this.charSpacing,g+=C[x],v=this.__charBounds[c][x],y===0?(n+=v.kernedWidth-v.width,y+=v.width):y+=v.kernedWidth,u&&!S&&this._reSpaceAndTab.test(C[x])&&(S=!0),S||(d=d||this.getCompleteStyleDeclaration(c,x),l=this.getCompleteStyleDeclaration(c,x+1),S=this._hasStyleChangedForSvg(d,l)),S&&(_=this._getStyleDeclaration(c,x)||{},a.push(this._createTextCharSpan(g,_,n,s)),g="",d=l,n+=y,y=0)},_pushTextBgRect:function(a,c,n,s,r,u){var d=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(c),' x="',h(n,d),'" y="',h(s,d),'" width="',h(r,d),'" height="',h(u,d),`"></rect>
`)},_setSVGTextLineBg:function(a,c,n,s){for(var r=this._textLines[c],u=this.getHeightOfLine(c)/this.lineHeight,d=0,l=0,g,v,_=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),y=0,C=r.length;y<C;y++)g=this.__charBounds[c][y],v=this.getValueOfPropertyAt(c,y,"textBackgroundColor"),v!==_?(_&&this._pushTextBgRect(a,_,n+l,s,d,u),l=g.left,d=g.width,_=v):d+=g.kernedWidth;v&&this._pushTextBgRect(a,v,n+l,s,d,u)},_getFillAttributes:function(a){var c=a&&typeof a=="string"?new e.Color(a):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+a+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(a){for(var c=0,n=0,s=0;s<a;s++)c+=this.getHeightOfLine(s);return n=this.getHeightOfLine(s),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){var c=e.Object.prototype.getSvgStyles.call(this,a);return c+" white-space: pre;"}})}(),function(h){var i=h.fabric||(h.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var c=0,n=0,s=0,r={},u=0;u<a.graphemeLines.length;u++)a.graphemeText[s]===`
`&&u>0?(n=0,s++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[s])&&u>0&&(n++,s++),r[u]={line:c,offset:n},s+=a.graphemeLines[u].length,n+=a.graphemeLines[u].length;return r},styleHas:function(a,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];n&&(c=n.line)}return i.Text.prototype.styleHas.call(this,a,c)},isEmptyStyles:function(a){if(!this.styles)return!0;var c=0,n=a+1,s,r,u=!1,d=this._styleMap[a],l=this._styleMap[a+1];d&&(a=d.line,c=d.offset),l&&(n=l.line,u=n===a,s=l.offset),r=typeof a=="undefined"?this.styles:{line:this.styles[a]};for(var g in r)for(var v in r[g])if(v>=c&&(!u||v<s))for(var _ in r[g][v])return!1;return!0},_getStyleDeclaration:function(a,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[a];if(!n)return null;a=n.line,c=n.offset+c}return this.callSuper("_getStyleDeclaration",a,c)},_setStyleDeclaration:function(a,c,n){var s=this._styleMap[a];a=s.line,c=s.offset+c,this.styles[a][c]=n},_deleteStyleDeclaration:function(a,c){var n=this._styleMap[a];a=n.line,c=n.offset+c,delete this.styles[a][c]},_getLineStyle:function(a){var c=this._styleMap[a];return!!this.styles[c.line]},_setLineStyle:function(a){var c=this._styleMap[a];this.styles[c.line]={}},_wrapText:function(a,c){var n=[],s;for(this.isWrapping=!0,s=0;s<a.length;s++)n=n.concat(this._wrapLine(a[s],s,c));return this.isWrapping=!1,n},_measureWord:function(a,c,n){var s=0,r,u=!0;n=n||0;for(var d=0,l=a.length;d<l;d++){var g=this._getGraphemeBox(a[d],c,d+n,r,u);s+=g.kernedWidth,r=a[d]}return s},_wrapLine:function(a,c,n,j){var r=0,u=this.splitByGrapheme,d=[],l=[],g=u?i.util.string.graphemeSplit(a):a.split(this._wordJoiners),v="",_=0,y=u?"":" ",C=0,S=0,x=0,T=!0,D=this._getWidthOfCharSpacing(),j=j||0;g.length===0&&g.push([]),n-=j;for(var U=0;U<g.length;U++)v=u?g[U]:i.util.string.graphemeSplit(g[U]),C=this._measureWord(v,c,_),_+=v.length,r+=S+C-D,r>n&&!T?(d.push(l),l=[],r=C,T=!0):r+=D,!T&&!u&&l.push(y),l=l.concat(v),S=u?0:this._measureWord([y],c,_),_++,T=!1,C>x&&(x=C);return U&&d.push(l),x+j>this.dynamicMinWidth&&(this.dynamicMinWidth=x-D+j),d},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a){return this.splitByGrapheme?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var c=i.Text.prototype._splitTextIntoLines.call(this,a),n=this._wrapText(c.lines,this.width),s=new Array(n.length),r=0;r<n.length;r++)s[r]=n[r].join("");return c.lines=s,c.graphemeLines=n,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var c in this._styleMap)this._textLines[c]&&(a[this._styleMap[c].line]=1);for(var c in this.styles)a[c]||delete this.styles[c]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),i.Textbox.fromObject=function(a,c){return i.Object._fromObject("Textbox",a,c,"text")}}(t),function(){var h=e.controlsUtils,i=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,c=h.scalingEqually,n=h.scalingYOrSkewingX,s=h.scalingXOrSkewingY,r=h.scaleOrSkewActionName,u=e.Object.prototype.controls;if(u.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:r}),u.mr=new e.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:r}),u.mb=new e.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:n,getActionName:r}),u.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:n,getActionName:r}),u.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:c}),u.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:c}),u.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:c}),u.br=new e.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:c}),u.mtr=new e.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var d=e.Textbox.prototype.controls={};d.mtr=u.mtr,d.tr=u.tr,d.br=u.br,d.tl=u.tl,d.bl=u.bl,d.mt=u.mt,d.mb=u.mb,d.mr=new e.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),d.ml=new e.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(Kd);var ml={exports:{}},$d=ml.exports={};$d.forEach=function(t,e){for(var o=0;o<t.length;o++){var f=e(t[o]);if(f)return f}};var Zd=function(t){var e=t.stateHandler.getState;function o(b){var h=e(b);return h&&!!h.isDetectable}function f(b){e(b).isDetectable=!0}function p(b){return!!e(b).busy}function m(b,h){e(b).busy=!!h}return{isDetectable:o,markAsDetectable:f,isBusy:p,markBusy:m}},eg=function(t){var e={};function o(b){var h=t.get(b);return h===void 0?[]:e[h]||[]}function f(b,h){var i=t.get(b);e[i]||(e[i]=[]),e[i].push(h)}function p(b,h){for(var i=o(b),a=0,c=i.length;a<c;++a)if(i[a]===h){i.splice(a,1);break}}function m(b){var h=o(b);!h||(h.length=0)}return{get:o,add:f,removeListener:p,removeAllListeners:m}},tg=function(){var t=1;function e(){return t++}return{generate:e}},rg=function(t){var e=t.idGenerator,o=t.stateHandler.getState;function f(m){var b=o(m);return b&&b.id!==void 0?b.id:null}function p(m){var b=o(m);if(!b)throw new Error("setId required the element to have a resize detection state.");var h=e.generate();return b.id=h,h}return{get:f,set:p}},ng=function(t){function e(){}var o={log:e,warn:e,error:e};if(!t&&window.console){var f=function(p,m){p[m]=function(){var h=console[m];if(h.apply)h.apply(console,arguments);else for(var i=0;i<arguments.length;i++)h(arguments[i])}};f(o,"log"),f(o,"warn"),f(o,"error")}return o},vl={exports:{}},gf=vl.exports={};gf.isIE=function(t){function e(){var f=navigator.userAgent.toLowerCase();return f.indexOf("msie")!==-1||f.indexOf("trident")!==-1||f.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var o=function(){var f,p=3,m=document.createElement("div"),b=m.getElementsByTagName("i");do m.innerHTML="<!--[if gt IE "+ ++p+"]><i></i><![endif]-->";while(b[0]);return p>4?p:f}();return t===o};gf.isLegacyOpera=function(){return!!window.opera};var pf={exports:{}},ig=pf.exports={};ig.getOption=sg;function sg(t,e,o){var f=t[e];return f==null&&o!==void 0?o:f}var Tc=pf.exports,og=function(e){e=e||{};var o=e.reporter,f=Tc.getOption(e,"async",!0),p=Tc.getOption(e,"auto",!0);p&&!f&&(o&&o.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),f=!0);var m=Ec(),b,h=!1;function i(u,d){!h&&p&&f&&m.size()===0&&n(),m.add(u,d)}function a(){for(h=!0;m.size();){var u=m;m=Ec(),u.process()}h=!1}function c(u){h||(u===void 0&&(u=f),b&&(s(b),b=null),u?n():a())}function n(){b=r(a)}function s(u){var d=clearTimeout;return d(u)}function r(u){var d=function(l){return setTimeout(l,0)};return d(u)}return{add:i,force:c}};function Ec(){var t={},e=0,o=0,f=0;function p(h,i){i||(i=h,h=0),h>o?o=h:h<f&&(f=h),t[h]||(t[h]=[]),t[h].push(i),e++}function m(){for(var h=f;h<=o;h++)for(var i=t[h],a=0;a<i.length;a++){var c=i[a];c()}}function b(){return e}return{add:p,process:m,size:b}}var yl="_erd";function ag(t){return t[yl]={},mf(t)}function mf(t){return t[yl]}function lg(t){delete t[yl]}var cg={initState:ag,getState:mf,cleanState:lg},ni=vl.exports,ug=function(t){t=t||{};var e=t.reporter,o=t.batchProcessor,f=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function p(a,c){function n(){c(a)}if(ni.isIE(8))f(a).object={proxy:n},a.attachEvent("onresize",n);else{var s=h(a);if(!s)throw new Error("Element is not detectable by this strategy.");s.contentDocument.defaultView.addEventListener("resize",n)}}function m(a){var c=t.important?" !important; ":"; ";return(a.join(c)+c).trim()}function b(a,c,n){n||(n=c,c=a,a=null),a=a||{},a.debug;function s(r,u){var d=m(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),l=!1,g=window.getComputedStyle(r),v=r.offsetWidth,_=r.offsetHeight;f(r).startSize={width:v,height:_};function y(){function C(){if(g.position==="static"){r.style.setProperty("position","relative",a.important?"important":"");var T=function(D,j,U,H){function Q(re){return re.replace(/[^-\d\.]/g,"")}var K=U[H];K!=="auto"&&Q(K)!=="0"&&(D.warn("An element that is positioned static has style."+H+"="+K+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+H+" will be set to 0. Element: ",j),j.style.setProperty(H,"0",a.important?"important":""))};T(e,r,g,"top"),T(e,r,g,"right"),T(e,r,g,"bottom"),T(e,r,g,"left")}}function S(){l||C();function T(j,U){if(!j.contentDocument){var H=f(j);H.checkForObjectDocumentTimeoutId&&window.clearTimeout(H.checkForObjectDocumentTimeoutId),H.checkForObjectDocumentTimeoutId=setTimeout(function(){H.checkForObjectDocumentTimeoutId=0,T(j,U)},100);return}U(j.contentDocument)}var D=this;T(D,function(U){u(r)})}g.position!==""&&(C(),l=!0);var x=document.createElement("object");x.style.cssText=d,x.tabIndex=-1,x.type="text/html",x.setAttribute("aria-hidden","true"),x.onload=S,ni.isIE()||(x.data="about:blank"),!!f(r)&&(r.appendChild(x),f(r).object=x,ni.isIE()&&(x.data="about:blank"))}o?o.add(y):y()}ni.isIE(8)?n(c):s(c,n)}function h(a){return f(a).object}function i(a){if(!!f(a)){var c=h(a);!c||(ni.isIE(8)?a.detachEvent("onresize",c.proxy):a.removeChild(c),f(a).checkForObjectDocumentTimeoutId&&window.clearTimeout(f(a).checkForObjectDocumentTimeoutId),delete f(a).object)}}return{makeDetectable:b,addListener:p,uninstall:i}},fg=ml.exports.forEach,hg=function(t){t=t||{};var e=t.reporter,o=t.batchProcessor,f=t.stateHandler.getState;t.stateHandler.hasState;var p=t.idHandler;if(!o)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var m=c(),b="erd_scroll_detection_scrollbar_style",h="erd_scroll_detection_container";function i(y){n(y,b,h)}i(window.document);function a(y){var C=t.important?" !important; ":"; ";return(y.join(C)+C).trim()}function c(){var y=500,C=500,S=document.createElement("div");S.style.cssText=a(["position: absolute","width: "+y*2+"px","height: "+C*2+"px","visibility: hidden","margin: 0","padding: 0"]);var x=document.createElement("div");x.style.cssText=a(["position: absolute","width: "+y+"px","height: "+C+"px","overflow: scroll","visibility: none","top: "+-y*3+"px","left: "+-C*3+"px","visibility: hidden","margin: 0","padding: 0"]),x.appendChild(S),document.body.insertBefore(x,document.body.firstChild);var T=y-x.clientWidth,D=C-x.clientHeight;return document.body.removeChild(x),{width:T,height:D}}function n(y,C,S){function x(U,H){H=H||function(K){y.head.appendChild(K)};var Q=y.createElement("style");return Q.innerHTML=U,Q.id=C,H(Q),Q}if(!y.getElementById(C)){var T=S+"_animation",D=S+"_animation_active",j=`/* Created by the element-resize-detector library. */
`;j+="."+S+" > div::-webkit-scrollbar { "+a(["display: none"])+` }

`,j+="."+D+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+T,"animation-name: "+T])+` }
`,j+="@-webkit-keyframes "+T+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,j+="@keyframes "+T+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",x(j)}}function s(y){y.className+=" "+h+"_animation_active"}function r(y,C,S){if(y.addEventListener)y.addEventListener(C,S);else if(y.attachEvent)y.attachEvent("on"+C,S);else return e.error("[scroll] Don't know how to add event listeners.")}function u(y,C,S){if(y.removeEventListener)y.removeEventListener(C,S);else if(y.detachEvent)y.detachEvent("on"+C,S);else return e.error("[scroll] Don't know how to remove event listeners.")}function d(y){return f(y).container.childNodes[0].childNodes[0].childNodes[0]}function l(y){return f(y).container.childNodes[0].childNodes[0].childNodes[1]}function g(y,C){var S=f(y).listeners;if(!S.push)throw new Error("Cannot add listener to an element that is not detectable.");f(y).listeners.push(C)}function v(y,C,S){S||(S=C,C=y,y=null),y=y||{};function x(){if(y.debug){var L=Array.prototype.slice.call(arguments);if(L.unshift(p.get(C),"Scroll: "),e.log.apply)e.log.apply(null,L);else for(var Y=0;Y<L.length;Y++)e.log(L[Y])}}function T(L){function Y(V){var $=V.getRootNode&&V.getRootNode().contains(V);return V===V.ownerDocument.body||V.ownerDocument.body.contains(V)||$}return!Y(L)||window.getComputedStyle(L)===null}function D(L){var Y=f(L).container.childNodes[0],V=window.getComputedStyle(Y);return!V.width||V.width.indexOf("px")===-1}function j(){var L=window.getComputedStyle(C),Y={};return Y.position=L.position,Y.width=C.offsetWidth,Y.height=C.offsetHeight,Y.top=L.top,Y.right=L.right,Y.bottom=L.bottom,Y.left=L.left,Y.widthCSS=L.width,Y.heightCSS=L.height,Y}function U(){var L=j();f(C).startSize={width:L.width,height:L.height},x("Element start size",f(C).startSize)}function H(){f(C).listeners=[]}function Q(){if(x("storeStyle invoked."),!f(C)){x("Aborting because element has been uninstalled");return}var L=j();f(C).style=L}function K(L,Y,V){f(L).lastWidth=Y,f(L).lastHeight=V}function re(L){return d(L).childNodes[0]}function se(){return 2*m.width+1}function oe(){return 2*m.height+1}function ae(L){return L+10+se()}function R(L){return L+10+oe()}function W(L){return L*2+se()}function P(L){return L*2+oe()}function B(L,Y,V){var $=d(L),G=l(L),k=ae(Y),z=R(V),J=W(Y),X=P(V);$.scrollLeft=k,$.scrollTop=z,G.scrollLeft=J,G.scrollTop=X}function N(){var L=f(C).container;if(!L){L=document.createElement("div"),L.className=h,L.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),f(C).container=L,s(L),C.appendChild(L);var Y=function(){f(C).onRendered&&f(C).onRendered()};r(L,"animationstart",Y),f(C).onAnimationStart=Y}return L}function A(){function L(){var pe=f(C).style;if(pe.position==="static"){C.style.setProperty("position","relative",y.important?"important":"");var ge=function(be,Me,dt,ie){function Ie(Re){return Re.replace(/[^-\d\.]/g,"")}var Le=dt[ie];Le!=="auto"&&Ie(Le)!=="0"&&(be.warn("An element that is positioned static has style."+ie+"="+Le+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ie+" will be set to 0. Element: ",Me),Me.style[ie]=0)};ge(e,C,pe,"top"),ge(e,C,pe,"right"),ge(e,C,pe,"bottom"),ge(e,C,pe,"left")}}function Y(pe,ge,be,Me){return pe=pe?pe+"px":"0",ge=ge?ge+"px":"0",be=be?be+"px":"0",Me=Me?Me+"px":"0",["left: "+pe,"top: "+ge,"right: "+Me,"bottom: "+be]}if(x("Injecting elements"),!f(C)){x("Aborting because element has been uninstalled");return}L();var V=f(C).container;V||(V=N());var $=m.width,G=m.height,k=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),z=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Y(-(1+$),-(1+G),-G,-$))),J=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),X=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ee=a(["position: absolute","left: 0","top: 0"]),ne=a(["position: absolute","width: 200%","height: 200%"]),ue=document.createElement("div"),le=document.createElement("div"),Z=document.createElement("div"),ce=document.createElement("div"),fe=document.createElement("div"),ve=document.createElement("div");ue.dir="ltr",ue.style.cssText=k,ue.className=h,le.className=h,le.style.cssText=z,Z.style.cssText=J,ce.style.cssText=ee,fe.style.cssText=X,ve.style.cssText=ne,Z.appendChild(ce),fe.appendChild(ve),le.appendChild(Z),le.appendChild(fe),ue.appendChild(le),V.appendChild(ue);function Pe(){var pe=f(C);pe&&pe.onExpand?pe.onExpand():x("Aborting expand scroll handler: element has been uninstalled")}function _e(){var pe=f(C);pe&&pe.onShrink?pe.onShrink():x("Aborting shrink scroll handler: element has been uninstalled")}r(Z,"scroll",Pe),r(fe,"scroll",_e),f(C).onExpandScroll=Pe,f(C).onShrinkScroll=_e}function O(){function L(J,X,ee){var ne=re(J),ue=ae(X),le=R(ee);ne.style.setProperty("width",ue+"px",y.important?"important":""),ne.style.setProperty("height",le+"px",y.important?"important":"")}function Y(J){var X=C.offsetWidth,ee=C.offsetHeight,ne=X!==f(C).lastWidth||ee!==f(C).lastHeight;x("Storing current size",X,ee),K(C,X,ee),o.add(0,function(){if(!!ne){if(!f(C)){x("Aborting because element has been uninstalled");return}if(!V()){x("Aborting because element container has not been initialized");return}if(y.debug){var le=C.offsetWidth,Z=C.offsetHeight;(le!==X||Z!==ee)&&e.warn(p.get(C),"Scroll: Size changed before updating detector elements.")}L(C,X,ee)}}),o.add(1,function(){if(!f(C)){x("Aborting because element has been uninstalled");return}if(!V()){x("Aborting because element container has not been initialized");return}B(C,X,ee)}),ne&&J&&o.add(2,function(){if(!f(C)){x("Aborting because element has been uninstalled");return}if(!V()){x("Aborting because element container has not been initialized");return}J()})}function V(){return!!f(C).container}function $(){function J(){return f(C).lastNotifiedWidth===void 0}x("notifyListenersIfNeeded invoked");var X=f(C);if(J()&&X.lastWidth===X.startSize.width&&X.lastHeight===X.startSize.height)return x("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(X.lastWidth===X.lastNotifiedWidth&&X.lastHeight===X.lastNotifiedHeight)return x("Not notifying: Size already notified");x("Current size not notified, notifying..."),X.lastNotifiedWidth=X.lastWidth,X.lastNotifiedHeight=X.lastHeight,fg(f(C).listeners,function(ee){ee(C)})}function G(){if(x("startanimation triggered."),D(C)){x("Ignoring since element is still unrendered...");return}x("Element rendered.");var J=d(C),X=l(C);(J.scrollLeft===0||J.scrollTop===0||X.scrollLeft===0||X.scrollTop===0)&&(x("Scrollbars out of sync. Updating detector elements..."),Y($))}function k(){if(x("Scroll detected."),D(C)){x("Scroll event fired while unrendered. Ignoring...");return}Y($)}if(x("registerListenersAndPositionElements invoked."),!f(C)){x("Aborting because element has been uninstalled");return}f(C).onRendered=G,f(C).onExpand=k,f(C).onShrink=k;var z=f(C).style;L(C,z.width,z.height)}function M(){if(x("finalizeDomMutation invoked."),!f(C)){x("Aborting because element has been uninstalled");return}var L=f(C).style;K(C,L.width,L.height),B(C,L.width,L.height)}function F(){S(C)}function q(){x("Installing..."),H(),U(),o.add(0,Q),o.add(1,A),o.add(2,O),o.add(3,M),o.add(4,F)}x("Making detectable..."),T(C)?(x("Element is detached"),N(),x("Waiting until element is attached..."),f(C).onRendered=function(){x("Element is now attached"),q()}):q()}function _(y){var C=f(y);!C||(C.onExpandScroll&&u(d(y),"scroll",C.onExpandScroll),C.onShrinkScroll&&u(l(y),"scroll",C.onShrinkScroll),C.onAnimationStart&&u(C.container,"animationstart",C.onAnimationStart),C.container&&y.removeChild(C.container))}return{makeDetectable:v,addListener:g,uninstall:_,initDocument:i}},li=ml.exports.forEach,dg=Zd,gg=eg,pg=tg,mg=rg,vg=ng,Oc=vl.exports,yg=og,fr=cg,_g=ug,bg=hg;function Ac(t){return Array.isArray(t)||t.length!==void 0}function Pc(t){if(Array.isArray(t))return t;var e=[];return li(t,function(o){e.push(o)}),e}function Dc(t){return t&&t.nodeType===1}var Cg=function(t){t=t||{};var e;if(t.idHandler)e={get:function(v){return t.idHandler.get(v,!0)},set:t.idHandler.set};else{var o=pg(),f=mg({idGenerator:o,stateHandler:fr});e=f}var p=t.reporter;if(!p){var m=p===!1;p=vg(m)}var b=hr(t,"batchProcessor",yg({reporter:p})),h={};h.callOnAdd=!!hr(t,"callOnAdd",!0),h.debug=!!hr(t,"debug",!1);var i=gg(e),a=dg({stateHandler:fr}),c,n=hr(t,"strategy","object"),s=hr(t,"important",!1),r={reporter:p,batchProcessor:b,stateHandler:fr,idHandler:e,important:s};if(n==="scroll"&&(Oc.isLegacyOpera()?(p.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),n="object"):Oc.isIE(9)&&(p.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),n="object")),n==="scroll")c=bg(r);else if(n==="object")c=_g(r);else throw new Error("Invalid strategy name: "+n);var u={};function d(v,_,y){function C(U){var H=i.get(U);li(H,function(K){K(U)})}function S(U,H,Q){i.add(H,Q),U&&Q(H)}if(y||(y=_,_=v,v={}),!_)throw new Error("At least one element required.");if(!y)throw new Error("Listener required.");if(Dc(_))_=[_];else if(Ac(_))_=Pc(_);else return p.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var x=0,T=hr(v,"callOnAdd",h.callOnAdd),D=hr(v,"onReady",function(){}),j=hr(v,"debug",h.debug);li(_,function(H){fr.getState(H)||(fr.initState(H),e.set(H));var Q=e.get(H);if(j&&p.log("Attaching listener to element",Q,H),!a.isDetectable(H)){if(j&&p.log(Q,"Not detectable."),a.isBusy(H)){j&&p.log(Q,"System busy making it detectable"),S(T,H,y),u[Q]=u[Q]||[],u[Q].push(function(){x++,x===_.length&&D()});return}return j&&p.log(Q,"Making detectable..."),a.markBusy(H,!0),c.makeDetectable({debug:j,important:s},H,function(re){if(j&&p.log(Q,"onElementDetectable"),fr.getState(re)){a.markAsDetectable(re),a.markBusy(re,!1),c.addListener(re,C),S(T,re,y);var se=fr.getState(re);if(se&&se.startSize){var oe=re.offsetWidth,ae=re.offsetHeight;(se.startSize.width!==oe||se.startSize.height!==ae)&&C(re)}u[Q]&&li(u[Q],function(R){R()})}else j&&p.log(Q,"Element uninstalled before being detectable.");delete u[Q],x++,x===_.length&&D()})}j&&p.log(Q,"Already detecable, adding listener."),S(T,H,y),x++}),x===_.length&&D()}function l(v){if(!v)return p.error("At least one element is required.");if(Dc(v))v=[v];else if(Ac(v))v=Pc(v);else return p.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");li(v,function(_){i.removeAllListeners(_),c.uninstall(_),fr.cleanState(_)})}function g(v){c.initDocument&&c.initDocument(v)}return{listenTo:d,removeListener:i.removeListener,removeAllListeners:i.removeAllListeners,uninstall:l,initDocument:g}};function hr(t,e,o){var f=t[e];return f==null&&o!==void 0?o:f}var as=Cg({strategy:"scroll"});function n1(t,e){as.listenTo(t,e);var o=e;return{update:function(f){as.removeListener(t,o),as.listenTo(t,f),o=f},destroy:function(){as.removeListener(t,o)}}}const on=[];function i1(t,e=Fe){let o;const f=new Set;function p(h){if(lr(t,h)&&(t=h,o)){const i=!on.length;for(const a of f)a[1](),on.push(a,t);if(i){for(let a=0;a<on.length;a+=2)on[a][0](on[a+1]);on.length=0}}}function m(h){p(h(t))}function b(h,i=Fe){const a=[h,i];return f.add(a),f.size===1&&(o=e(p)||Fe),h(t),()=>{f.delete(a),f.size===0&&(o(),o=null)}}return{set:p,update:m,subscribe:b}}var wg=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},o=Symbol("test"),f=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(f)!=="[object Symbol]")return!1;var p=42;e[o]=p;for(o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var m=Object.getOwnPropertySymbols(e);if(m.length!==1||m[0]!==o||!Object.prototype.propertyIsEnumerable.call(e,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var b=Object.getOwnPropertyDescriptor(e,o);if(b.value!==p||b.enumerable!==!0)return!1}return!0},kc=typeof Symbol!="undefined"&&Symbol,Sg=wg,xg=function(){return typeof kc!="function"||typeof Symbol!="function"||typeof kc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Sg()},Tg="Function.prototype.bind called on incompatible ",na=Array.prototype.slice,Eg=Object.prototype.toString,Og="[object Function]",Ag=function(e){var o=this;if(typeof o!="function"||Eg.call(o)!==Og)throw new TypeError(Tg+o);for(var f=na.call(arguments,1),p,m=function(){if(this instanceof p){var c=o.apply(this,f.concat(na.call(arguments)));return Object(c)===c?c:this}else return o.apply(e,f.concat(na.call(arguments)))},b=Math.max(0,o.length-f.length),h=[],i=0;i<b;i++)h.push("$"+i);if(p=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(m),o.prototype){var a=function(){};a.prototype=o.prototype,p.prototype=new a,a.prototype=null}return p},Pg=Ag,_l=Function.prototype.bind||Pg,Dg=_l,kg=Dg.call(Function.call,Object.prototype.hasOwnProperty),Se,mi=SyntaxError,vf=Function,yn=TypeError,ia=function(t){try{return vf('"use strict"; return ('+t+").constructor;")()}catch{}},zr=Object.getOwnPropertyDescriptor;if(zr)try{zr({},"")}catch{zr=null}var sa=function(){throw new yn},Fg=zr?function(){try{return arguments.callee,sa}catch{try{return zr(arguments,"callee").get}catch{return sa}}}():sa,an=xg(),pr=Object.getPrototypeOf||function(t){return t.__proto__},dn={},Rg=typeof Uint8Array=="undefined"?Se:pr(Uint8Array),_n={"%AggregateError%":typeof AggregateError=="undefined"?Se:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Se:ArrayBuffer,"%ArrayIteratorPrototype%":an?pr([][Symbol.iterator]()):Se,"%AsyncFromSyncIteratorPrototype%":Se,"%AsyncFunction%":dn,"%AsyncGenerator%":dn,"%AsyncGeneratorFunction%":dn,"%AsyncIteratorPrototype%":dn,"%Atomics%":typeof Atomics=="undefined"?Se:Atomics,"%BigInt%":typeof BigInt=="undefined"?Se:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Se:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?Se:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Se:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Se:FinalizationRegistry,"%Function%":vf,"%GeneratorFunction%":dn,"%Int8Array%":typeof Int8Array=="undefined"?Se:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Se:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Se:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":an?pr(pr([][Symbol.iterator]())):Se,"%JSON%":typeof JSON=="object"?JSON:Se,"%Map%":typeof Map=="undefined"?Se:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!an?Se:pr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Se:Promise,"%Proxy%":typeof Proxy=="undefined"?Se:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?Se:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Se:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!an?Se:pr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Se:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":an?pr(""[Symbol.iterator]()):Se,"%Symbol%":an?Symbol:Se,"%SyntaxError%":mi,"%ThrowTypeError%":Fg,"%TypedArray%":Rg,"%TypeError%":yn,"%Uint8Array%":typeof Uint8Array=="undefined"?Se:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Se:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Se:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Se:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?Se:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Se:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Se:WeakSet},Mg=function t(e){var o;if(e==="%AsyncFunction%")o=ia("async function () {}");else if(e==="%GeneratorFunction%")o=ia("function* () {}");else if(e==="%AsyncGeneratorFunction%")o=ia("async function* () {}");else if(e==="%AsyncGenerator%"){var f=t("%AsyncGeneratorFunction%");f&&(o=f.prototype)}else if(e==="%AsyncIteratorPrototype%"){var p=t("%AsyncGenerator%");p&&(o=pr(p.prototype))}return _n[e]=o,o},Fc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ks=_l,Ds=kg,Ig=Ks.call(Function.call,Array.prototype.concat),Lg=Ks.call(Function.apply,Array.prototype.splice),Rc=Ks.call(Function.call,String.prototype.replace),ks=Ks.call(Function.call,String.prototype.slice),Bg=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,jg=/\\(\\)?/g,Ng=function(e){var o=ks(e,0,1),f=ks(e,-1);if(o==="%"&&f!=="%")throw new mi("invalid intrinsic syntax, expected closing `%`");if(f==="%"&&o!=="%")throw new mi("invalid intrinsic syntax, expected opening `%`");var p=[];return Rc(e,Bg,function(m,b,h,i){p[p.length]=h?Rc(i,jg,"$1"):b||m}),p},Ug=function(e,o){var f=e,p;if(Ds(Fc,f)&&(p=Fc[f],f="%"+p[0]+"%"),Ds(_n,f)){var m=_n[f];if(m===dn&&(m=Mg(f)),typeof m=="undefined"&&!o)throw new yn("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:p,name:f,value:m}}throw new mi("intrinsic "+e+" does not exist!")},bl=function(e,o){if(typeof e!="string"||e.length===0)throw new yn("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof o!="boolean")throw new yn('"allowMissing" argument must be a boolean');var f=Ng(e),p=f.length>0?f[0]:"",m=Ug("%"+p+"%",o),b=m.name,h=m.value,i=!1,a=m.alias;a&&(p=a[0],Lg(f,Ig([0,1],a)));for(var c=1,n=!0;c<f.length;c+=1){var s=f[c],r=ks(s,0,1),u=ks(s,-1);if((r==='"'||r==="'"||r==="`"||u==='"'||u==="'"||u==="`")&&r!==u)throw new mi("property names with quotes must have matching quotes");if((s==="constructor"||!n)&&(i=!0),p+="."+s,b="%"+p+"%",Ds(_n,b))h=_n[b];else if(h!=null){if(!(s in h)){if(!o)throw new yn("base intrinsic for "+e+" exists, but the property is not available.");return}if(zr&&c+1>=f.length){var d=zr(h,s);n=!!d,n&&"get"in d&&!("originalValue"in d.get)?h=d.get:h=h[s]}else n=Ds(h,s),h=h[s];n&&!i&&(_n[b]=h)}}return h},yf={exports:{}};(function(t){var e=_l,o=bl,f=o("%Function.prototype.apply%"),p=o("%Function.prototype.call%"),m=o("%Reflect.apply%",!0)||e.call(p,f),b=o("%Object.getOwnPropertyDescriptor%",!0),h=o("%Object.defineProperty%",!0),i=o("%Math.max%");if(h)try{h({},"a",{value:1})}catch{h=null}t.exports=function(n){var s=m(e,p,arguments);if(b&&h){var r=b(s,"length");r.configurable&&h(s,"length",{value:1+i(0,n.length-(arguments.length-1))})}return s};var a=function(){return m(e,f,arguments)};h?h(t.exports,"apply",{value:a}):t.exports.apply=a})(yf);var _f=bl,bf=yf.exports,Hg=bf(_f("String.prototype.indexOf")),Wg=function(e,o){var f=_f(e,!!o);return typeof f=="function"&&Hg(e,".prototype.")>-1?bf(f):f},Cl=typeof Map=="function"&&Map.prototype,oa=Object.getOwnPropertyDescriptor&&Cl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Fs=Cl&&oa&&typeof oa.get=="function"?oa.get:null,zg=Cl&&Map.prototype.forEach,wl=typeof Set=="function"&&Set.prototype,aa=Object.getOwnPropertyDescriptor&&wl?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Rs=wl&&aa&&typeof aa.get=="function"?aa.get:null,Xg=wl&&Set.prototype.forEach,Gg=typeof WeakMap=="function"&&WeakMap.prototype,ui=Gg?WeakMap.prototype.has:null,Yg=typeof WeakSet=="function"&&WeakSet.prototype,fi=Yg?WeakSet.prototype.has:null,Vg=typeof WeakRef=="function"&&WeakRef.prototype,Mc=Vg?WeakRef.prototype.deref:null,qg=Boolean.prototype.valueOf,Kg=Object.prototype.toString,Jg=Function.prototype.toString,Qg=String.prototype.match,Sl=String.prototype.slice,Cr=String.prototype.replace,$g=String.prototype.toUpperCase,Ic=String.prototype.toLowerCase,Cf=RegExp.prototype.test,Lc=Array.prototype.concat,Wt=Array.prototype.join,Zg=Array.prototype.slice,Bc=Math.floor,Ra=typeof BigInt=="function"?BigInt.prototype.valueOf:null,la=Object.getOwnPropertySymbols,Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,En=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ht=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===En?"object":"symbol")?Symbol.toStringTag:null,wf=Object.prototype.propertyIsEnumerable,jc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Nc(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Cf.call(/e/,e))return e;var o=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var f=t<0?-Bc(-t):Bc(t);if(f!==t){var p=String(f),m=Sl.call(e,p.length+1);return Cr.call(p,o,"$&_")+"."+Cr.call(Cr.call(m,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Cr.call(e,o,"$&_")}var ca=ci.custom,ua=ca&&xf(ca)?ca:null,ep=function t(e,o,f,p){var m=o||{};if(mr(m,"quoteStyle")&&m.quoteStyle!=="single"&&m.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mr(m,"maxStringLength")&&(typeof m.maxStringLength=="number"?m.maxStringLength<0&&m.maxStringLength!==1/0:m.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var b=mr(m,"customInspect")?m.customInspect:!0;if(typeof b!="boolean"&&b!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mr(m,"indent")&&m.indent!==null&&m.indent!=="	"&&!(parseInt(m.indent,10)===m.indent&&m.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mr(m,"numericSeparator")&&typeof m.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=m.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ef(e,m);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var i=String(e);return h?Nc(e,i):i}if(typeof e=="bigint"){var a=String(e)+"n";return h?Nc(e,a):a}var c=typeof m.depth=="undefined"?5:m.depth;if(typeof f=="undefined"&&(f=0),f>=c&&c>0&&typeof e=="object")return Ia(e)?"[Array]":"[Object]";var n=_p(m,f);if(typeof p=="undefined")p=[];else if(Tf(p,e)>=0)return"[Circular]";function s(Q,K,re){if(K&&(p=Zg.call(p),p.push(K)),re){var se={depth:m.depth};return mr(m,"quoteStyle")&&(se.quoteStyle=m.quoteStyle),t(Q,se,f+1,p)}return t(Q,m,f+1,p)}if(typeof e=="function"){var r=up(e),u=ls(e,s);return"[Function"+(r?": "+r:" (anonymous)")+"]"+(u.length>0?" { "+Wt.call(u,", ")+" }":"")}if(xf(e)){var d=En?Cr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ma.call(e);return typeof e=="object"&&!En?ii(d):d}if(mp(e)){for(var l="<"+Ic.call(String(e.nodeName)),g=e.attributes||[],v=0;v<g.length;v++)l+=" "+g[v].name+"="+Sf(tp(g[v].value),"double",m);return l+=">",e.childNodes&&e.childNodes.length&&(l+="..."),l+="</"+Ic.call(String(e.nodeName))+">",l}if(Ia(e)){if(e.length===0)return"[]";var _=ls(e,s);return n&&!yp(_)?"["+La(_,n)+"]":"[ "+Wt.call(_,", ")+" ]"}if(ip(e)){var y=ls(e,s);return"cause"in e&&!wf.call(e,"cause")?"{ ["+String(e)+"] "+Wt.call(Lc.call("[cause]: "+s(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wt.call(y,", ")+" }"}if(typeof e=="object"&&b){if(ua&&typeof e[ua]=="function")return e[ua]();if(b!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(fp(e)){var C=[];return zg.call(e,function(Q,K){C.push(s(K,e,!0)+" => "+s(Q,e))}),Uc("Map",Fs.call(e),C,n)}if(gp(e)){var S=[];return Xg.call(e,function(Q){S.push(s(Q,e))}),Uc("Set",Rs.call(e),S,n)}if(hp(e))return fa("WeakMap");if(pp(e))return fa("WeakSet");if(dp(e))return fa("WeakRef");if(op(e))return ii(s(Number(e)));if(lp(e))return ii(s(Ra.call(e)));if(ap(e))return ii(qg.call(e));if(sp(e))return ii(s(String(e)));if(!rp(e)&&!np(e)){var x=ls(e,s),T=jc?jc(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",j=!T&&ht&&Object(e)===e&&ht in e?Sl.call(Dr(e),8,-1):D?"Object":"",U=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",H=U+(j||D?"["+Wt.call(Lc.call([],j||[],D||[]),": ")+"] ":"");return x.length===0?H+"{}":n?H+"{"+La(x,n)+"}":H+"{ "+Wt.call(x,", ")+" }"}return String(e)};function Sf(t,e,o){var f=(o.quoteStyle||e)==="double"?'"':"'";return f+t+f}function tp(t){return Cr.call(String(t),/"/g,"&quot;")}function Ia(t){return Dr(t)==="[object Array]"&&(!ht||!(typeof t=="object"&&ht in t))}function rp(t){return Dr(t)==="[object Date]"&&(!ht||!(typeof t=="object"&&ht in t))}function np(t){return Dr(t)==="[object RegExp]"&&(!ht||!(typeof t=="object"&&ht in t))}function ip(t){return Dr(t)==="[object Error]"&&(!ht||!(typeof t=="object"&&ht in t))}function sp(t){return Dr(t)==="[object String]"&&(!ht||!(typeof t=="object"&&ht in t))}function op(t){return Dr(t)==="[object Number]"&&(!ht||!(typeof t=="object"&&ht in t))}function ap(t){return Dr(t)==="[object Boolean]"&&(!ht||!(typeof t=="object"&&ht in t))}function xf(t){if(En)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Ma)return!1;try{return Ma.call(t),!0}catch{}return!1}function lp(t){if(!t||typeof t!="object"||!Ra)return!1;try{return Ra.call(t),!0}catch{}return!1}var cp=Object.prototype.hasOwnProperty||function(t){return t in this};function mr(t,e){return cp.call(t,e)}function Dr(t){return Kg.call(t)}function up(t){if(t.name)return t.name;var e=Qg.call(Jg.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Tf(t,e){if(t.indexOf)return t.indexOf(e);for(var o=0,f=t.length;o<f;o++)if(t[o]===e)return o;return-1}function fp(t){if(!Fs||!t||typeof t!="object")return!1;try{Fs.call(t);try{Rs.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function hp(t){if(!ui||!t||typeof t!="object")return!1;try{ui.call(t,ui);try{fi.call(t,fi)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function dp(t){if(!Mc||!t||typeof t!="object")return!1;try{return Mc.call(t),!0}catch{}return!1}function gp(t){if(!Rs||!t||typeof t!="object")return!1;try{Rs.call(t);try{Fs.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function pp(t){if(!fi||!t||typeof t!="object")return!1;try{fi.call(t,fi);try{ui.call(t,ui)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function mp(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ef(t,e){if(t.length>e.maxStringLength){var o=t.length-e.maxStringLength,f="... "+o+" more character"+(o>1?"s":"");return Ef(Sl.call(t,0,e.maxStringLength),e)+f}var p=Cr.call(Cr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,vp);return Sf(p,"single",e)}function vp(t){var e=t.charCodeAt(0),o={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return o?"\\"+o:"\\x"+(e<16?"0":"")+$g.call(e.toString(16))}function ii(t){return"Object("+t+")"}function fa(t){return t+" { ? }"}function Uc(t,e,o,f){var p=f?La(o,f):Wt.call(o,", ");return t+" ("+e+") {"+p+"}"}function yp(t){for(var e=0;e<t.length;e++)if(Tf(t[e],`
`)>=0)return!1;return!0}function _p(t,e){var o;if(t.indent==="	")o="	";else if(typeof t.indent=="number"&&t.indent>0)o=Wt.call(Array(t.indent+1)," ");else return null;return{base:o,prev:Wt.call(Array(e+1),o)}}function La(t,e){if(t.length===0)return"";var o=`
`+e.prev+e.base;return o+Wt.call(t,","+o)+`
`+e.prev}function ls(t,e){var o=Ia(t),f=[];if(o){f.length=t.length;for(var p=0;p<t.length;p++)f[p]=mr(t,p)?e(t[p],t):""}var m=typeof la=="function"?la(t):[],b;if(En){b={};for(var h=0;h<m.length;h++)b["$"+m[h]]=m[h]}for(var i in t)!mr(t,i)||o&&String(Number(i))===i&&i<t.length||En&&b["$"+i]instanceof Symbol||(Cf.call(/[^\w$]/,i)?f.push(e(i,t)+": "+e(t[i],t)):f.push(i+": "+e(t[i],t)));if(typeof la=="function")for(var a=0;a<m.length;a++)wf.call(t,m[a])&&f.push("["+e(m[a])+"]: "+e(t[m[a]],t));return f}var xl=bl,In=Wg,bp=ep,Cp=xl("%TypeError%"),cs=xl("%WeakMap%",!0),us=xl("%Map%",!0),wp=In("WeakMap.prototype.get",!0),Sp=In("WeakMap.prototype.set",!0),xp=In("WeakMap.prototype.has",!0),Tp=In("Map.prototype.get",!0),Ep=In("Map.prototype.set",!0),Op=In("Map.prototype.has",!0),Tl=function(t,e){for(var o=t,f;(f=o.next)!==null;o=f)if(f.key===e)return o.next=f.next,f.next=t.next,t.next=f,f},Ap=function(t,e){var o=Tl(t,e);return o&&o.value},Pp=function(t,e,o){var f=Tl(t,e);f?f.value=o:t.next={key:e,next:t.next,value:o}},Dp=function(t,e){return!!Tl(t,e)},kp=function(){var e,o,f,p={assert:function(m){if(!p.has(m))throw new Cp("Side channel does not contain "+bp(m))},get:function(m){if(cs&&m&&(typeof m=="object"||typeof m=="function")){if(e)return wp(e,m)}else if(us){if(o)return Tp(o,m)}else if(f)return Ap(f,m)},has:function(m){if(cs&&m&&(typeof m=="object"||typeof m=="function")){if(e)return xp(e,m)}else if(us){if(o)return Op(o,m)}else if(f)return Dp(f,m);return!1},set:function(m,b){cs&&m&&(typeof m=="object"||typeof m=="function")?(e||(e=new cs),Sp(e,m,b)):us?(o||(o=new us),Ep(o,m,b)):(f||(f={key:{},next:null}),Pp(f,m,b))}};return p},Fp=String.prototype.replace,Rp=/%20/g,ha={RFC1738:"RFC1738",RFC3986:"RFC3986"},El={default:ha.RFC3986,formatters:{RFC1738:function(t){return Fp.call(t,Rp,"+")},RFC3986:function(t){return String(t)}},RFC1738:ha.RFC1738,RFC3986:ha.RFC3986},Mp=El,da=Object.prototype.hasOwnProperty,Hr=Array.isArray,Ut=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ip=function(e){for(;e.length>1;){var o=e.pop(),f=o.obj[o.prop];if(Hr(f)){for(var p=[],m=0;m<f.length;++m)typeof f[m]!="undefined"&&p.push(f[m]);o.obj[o.prop]=p}}},Of=function(e,o){for(var f=o&&o.plainObjects?Object.create(null):{},p=0;p<e.length;++p)typeof e[p]!="undefined"&&(f[p]=e[p]);return f},Lp=function t(e,o,f){if(!o)return e;if(typeof o!="object"){if(Hr(e))e.push(o);else if(e&&typeof e=="object")(f&&(f.plainObjects||f.allowPrototypes)||!da.call(Object.prototype,o))&&(e[o]=!0);else return[e,o];return e}if(!e||typeof e!="object")return[e].concat(o);var p=e;return Hr(e)&&!Hr(o)&&(p=Of(e,f)),Hr(e)&&Hr(o)?(o.forEach(function(m,b){if(da.call(e,b)){var h=e[b];h&&typeof h=="object"&&m&&typeof m=="object"?e[b]=t(h,m,f):e.push(m)}else e[b]=m}),e):Object.keys(o).reduce(function(m,b){var h=o[b];return da.call(m,b)?m[b]=t(m[b],h,f):m[b]=h,m},p)},Bp=function(e,o){return Object.keys(o).reduce(function(f,p){return f[p]=o[p],f},e)},jp=function(t,e,o){var f=t.replace(/\+/g," ");if(o==="iso-8859-1")return f.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(f)}catch{return f}},Np=function(e,o,f,p,m){if(e.length===0)return e;var b=e;if(typeof e=="symbol"?b=Symbol.prototype.toString.call(e):typeof e!="string"&&(b=String(e)),f==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var h="",i=0;i<b.length;++i){var a=b.charCodeAt(i);if(a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||m===Mp.RFC1738&&(a===40||a===41)){h+=b.charAt(i);continue}if(a<128){h=h+Ut[a];continue}if(a<2048){h=h+(Ut[192|a>>6]+Ut[128|a&63]);continue}if(a<55296||a>=57344){h=h+(Ut[224|a>>12]+Ut[128|a>>6&63]+Ut[128|a&63]);continue}i+=1,a=65536+((a&1023)<<10|b.charCodeAt(i)&1023),h+=Ut[240|a>>18]+Ut[128|a>>12&63]+Ut[128|a>>6&63]+Ut[128|a&63]}return h},Up=function(e){for(var o=[{obj:{o:e},prop:"o"}],f=[],p=0;p<o.length;++p)for(var m=o[p],b=m.obj[m.prop],h=Object.keys(b),i=0;i<h.length;++i){var a=h[i],c=b[a];typeof c=="object"&&c!==null&&f.indexOf(c)===-1&&(o.push({obj:b,prop:a}),f.push(c))}return Ip(o),e},Hp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Wp=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},zp=function(e,o){return[].concat(e,o)},Xp=function(e,o){if(Hr(e)){for(var f=[],p=0;p<e.length;p+=1)f.push(o(e[p]));return f}return o(e)},Af={arrayToObject:Of,assign:Bp,combine:zp,compact:Up,decode:jp,encode:Np,isBuffer:Wp,isRegExp:Hp,maybeMap:Xp,merge:Lp},Pf=kp,Ba=Af,hi=El,Gp=Object.prototype.hasOwnProperty,Hc={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,o){return e+"["+o+"]"},repeat:function(e){return e}},Wr=Array.isArray,Yp=String.prototype.split,Vp=Array.prototype.push,Df=function(t,e){Vp.apply(t,Wr(e)?e:[e])},qp=Date.prototype.toISOString,Wc=hi.default,tt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ba.encode,encodeValuesOnly:!1,format:Wc,formatter:hi.formatters[Wc],indices:!1,serializeDate:function(e){return qp.call(e)},skipNulls:!1,strictNullHandling:!1},Kp=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ga={},Jp=function t(e,o,f,p,m,b,h,i,a,c,n,s,r,u,d){for(var l=e,g=d,v=0,_=!1;(g=g.get(ga))!==void 0&&!_;){var y=g.get(e);if(v+=1,typeof y!="undefined"){if(y===v)throw new RangeError("Cyclic object value");_=!0}typeof g.get(ga)=="undefined"&&(v=0)}if(typeof h=="function"?l=h(o,l):l instanceof Date?l=c(l):f==="comma"&&Wr(l)&&(l=Ba.maybeMap(l,function(oe){return oe instanceof Date?c(oe):oe})),l===null){if(p)return b&&!r?b(o,tt.encoder,u,"key",n):o;l=""}if(Kp(l)||Ba.isBuffer(l)){if(b){var C=r?o:b(o,tt.encoder,u,"key",n);if(f==="comma"&&r){for(var S=Yp.call(String(l),","),x="",T=0;T<S.length;++T)x+=(T===0?"":",")+s(b(S[T],tt.encoder,u,"value",n));return[s(C)+"="+x]}return[s(C)+"="+s(b(l,tt.encoder,u,"value",n))]}return[s(o)+"="+s(String(l))]}var D=[];if(typeof l=="undefined")return D;var j;if(f==="comma"&&Wr(l))j=[{value:l.length>0?l.join(",")||null:void 0}];else if(Wr(h))j=h;else{var U=Object.keys(l);j=i?U.sort(i):U}for(var H=0;H<j.length;++H){var Q=j[H],K=typeof Q=="object"&&typeof Q.value!="undefined"?Q.value:l[Q];if(!(m&&K===null)){var re=Wr(l)?typeof f=="function"?f(o,Q):o:o+(a?"."+Q:"["+Q+"]");d.set(e,v);var se=Pf();se.set(ga,d),Df(D,t(K,re,f,p,m,b,h,i,a,c,n,s,r,u,se))}}return D},Qp=function(e){if(!e)return tt;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var o=e.charset||tt.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var f=hi.default;if(typeof e.format!="undefined"){if(!Gp.call(hi.formatters,e.format))throw new TypeError("Unknown format option provided.");f=e.format}var p=hi.formatters[f],m=tt.filter;return(typeof e.filter=="function"||Wr(e.filter))&&(m=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:tt.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?tt.allowDots:!!e.allowDots,charset:o,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:tt.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?tt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:tt.encode,encoder:typeof e.encoder=="function"?e.encoder:tt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:tt.encodeValuesOnly,filter:m,format:f,formatter:p,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:tt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:tt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:tt.strictNullHandling}},$p=function(t,e){var o=t,f=Qp(e),p,m;typeof f.filter=="function"?(m=f.filter,o=m("",o)):Wr(f.filter)&&(m=f.filter,p=m);var b=[];if(typeof o!="object"||o===null)return"";var h;e&&e.arrayFormat in Hc?h=e.arrayFormat:e&&"indices"in e?h=e.indices?"indices":"repeat":h="indices";var i=Hc[h];p||(p=Object.keys(o)),f.sort&&p.sort(f.sort);for(var a=Pf(),c=0;c<p.length;++c){var n=p[c];f.skipNulls&&o[n]===null||Df(b,Jp(o[n],n,i,f.strictNullHandling,f.skipNulls,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,a))}var s=b.join(f.delimiter),r=f.addQueryPrefix===!0?"?":"";return f.charsetSentinel&&(f.charset==="iso-8859-1"?r+="utf8=%26%2310003%3B&":r+="utf8=%E2%9C%93&"),s.length>0?r+s:""},On=Af,ja=Object.prototype.hasOwnProperty,Zp=Array.isArray,Ke={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:On.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},em=function(t){return t.replace(/&#(\d+);/g,function(e,o){return String.fromCharCode(parseInt(o,10))})},kf=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},tm="utf8=%26%2310003%3B",rm="utf8=%E2%9C%93",nm=function(e,o){var f={},p=o.ignoreQueryPrefix?e.replace(/^\?/,""):e,m=o.parameterLimit===1/0?void 0:o.parameterLimit,b=p.split(o.delimiter,m),h=-1,i,a=o.charset;if(o.charsetSentinel)for(i=0;i<b.length;++i)b[i].indexOf("utf8=")===0&&(b[i]===rm?a="utf-8":b[i]===tm&&(a="iso-8859-1"),h=i,i=b.length);for(i=0;i<b.length;++i)if(i!==h){var c=b[i],n=c.indexOf("]="),s=n===-1?c.indexOf("="):n+1,r,u;s===-1?(r=o.decoder(c,Ke.decoder,a,"key"),u=o.strictNullHandling?null:""):(r=o.decoder(c.slice(0,s),Ke.decoder,a,"key"),u=On.maybeMap(kf(c.slice(s+1),o),function(d){return o.decoder(d,Ke.decoder,a,"value")})),u&&o.interpretNumericEntities&&a==="iso-8859-1"&&(u=em(u)),c.indexOf("[]=")>-1&&(u=Zp(u)?[u]:u),ja.call(f,r)?f[r]=On.combine(f[r],u):f[r]=u}return f},im=function(t,e,o,f){for(var p=f?e:kf(e,o),m=t.length-1;m>=0;--m){var b,h=t[m];if(h==="[]"&&o.parseArrays)b=[].concat(p);else{b=o.plainObjects?Object.create(null):{};var i=h.charAt(0)==="["&&h.charAt(h.length-1)==="]"?h.slice(1,-1):h,a=parseInt(i,10);!o.parseArrays&&i===""?b={0:p}:!isNaN(a)&&h!==i&&String(a)===i&&a>=0&&o.parseArrays&&a<=o.arrayLimit?(b=[],b[a]=p):i!=="__proto__"&&(b[i]=p)}p=b}return p},sm=function(e,o,f,p){if(!!e){var m=f.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,b=/(\[[^[\]]*])/,h=/(\[[^[\]]*])/g,i=f.depth>0&&b.exec(m),a=i?m.slice(0,i.index):m,c=[];if(a){if(!f.plainObjects&&ja.call(Object.prototype,a)&&!f.allowPrototypes)return;c.push(a)}for(var n=0;f.depth>0&&(i=h.exec(m))!==null&&n<f.depth;){if(n+=1,!f.plainObjects&&ja.call(Object.prototype,i[1].slice(1,-1))&&!f.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+m.slice(i.index)+"]"),im(c,o,f,p)}},om=function(e){if(!e)return Ke;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=typeof e.charset=="undefined"?Ke.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?Ke.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ke.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ke.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ke.arrayLimit,charset:o,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ke.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ke.comma,decoder:typeof e.decoder=="function"?e.decoder:Ke.decoder,delimiter:typeof e.delimiter=="string"||On.isRegExp(e.delimiter)?e.delimiter:Ke.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ke.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ke.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ke.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ke.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ke.strictNullHandling}},am=function(t,e){var o=om(e);if(t===""||t===null||typeof t=="undefined")return o.plainObjects?Object.create(null):{};for(var f=typeof t=="string"?nm(t,o):t,p=o.plainObjects?Object.create(null):{},m=Object.keys(f),b=0;b<m.length;++b){var h=m[b],i=sm(h,f[h],o,typeof t=="string");p=On.merge(p,i,o)}return o.allowSparse===!0?p:On.compact(p)},lm=$p,cm=am,um=El,s1={formats:um,parse:cm,stringify:lm},fs,fm=new Uint8Array(16);function hm(){if(!fs&&(fs=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!fs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fs(fm)}var dm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gm(t){return typeof t=="string"&&dm.test(t)}var et=[];for(var pa=0;pa<256;++pa)et.push((pa+256).toString(16).substr(1));function pm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(et[t[e+0]]+et[t[e+1]]+et[t[e+2]]+et[t[e+3]]+"-"+et[t[e+4]]+et[t[e+5]]+"-"+et[t[e+6]]+et[t[e+7]]+"-"+et[t[e+8]]+et[t[e+9]]+"-"+et[t[e+10]]+et[t[e+11]]+et[t[e+12]]+et[t[e+13]]+et[t[e+14]]+et[t[e+15]]).toLowerCase();if(!gm(o))throw TypeError("Stringified UUID is invalid");return o}function o1(t,e,o){t=t||{};var f=t.random||(t.rng||hm)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,e){o=o||0;for(var p=0;p<16;++p)e[o+p]=f[p];return e}return pm(f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o})}wrapCallback(e){return(o,f)=>{o?this.reject(o):this.resolve(f),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(o):e(o,f))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="FirebaseError";class Js extends Error{constructor(e,o,f){super(o);this.code=e,this.customData=f,this.name=vm,Object.setPrototypeOf(this,Js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ff.prototype.create)}}class Ff{constructor(e,o,f){this.service=e,this.serviceName=o,this.errors=f}create(e,...o){const f=o[0]||{},p=`${this.service}/${e}`,m=this.errors[e],b=m?ym(m,f):"Error",h=`${this.serviceName}: ${b} (${p}).`;return new Js(p,h,f)}}function ym(t,e){return t.replace(_m,(o,f)=>{const p=e[f];return p!=null?String(p):`<${f}?>`})}const _m=/\{\$([^}]+)}/g;function Na(t,e){if(t===e)return!0;const o=Object.keys(t),f=Object.keys(e);for(const p of o){if(!f.includes(p))return!1;const m=t[p],b=e[p];if(zc(m)&&zc(b)){if(!Na(m,b))return!1}else if(m!==b)return!1}for(const p of f)if(!o.includes(p))return!1;return!0}function zc(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){return t&&t._delegate?t._delegate:t}class $s{constructor(e,o,f){this.name=e,this.instanceFactory=o,this.type=f,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,o){this.name=e,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const o=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(o)){const f=new mm;if(this.instancesDeferred.set(o,f),this.isInitialized(o)||this.shouldAutoInitialize())try{const p=this.getOrInitializeService({instanceIdentifier:o});p&&f.resolve(p)}catch{}}return this.instancesDeferred.get(o).promise}getImmediate(e){var o;const f=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),p=(o=e==null?void 0:e.optional)!==null&&o!==void 0?o:!1;if(this.isInitialized(f)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:f})}catch(m){if(p)return null;throw m}else{if(p)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wm(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[o,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(o);try{const m=this.getOrInitializeService({instanceIdentifier:p});f.resolve(m)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(o=>"INTERNAL"in o).map(o=>o.INTERNAL.delete()),...e.filter(o=>"_delete"in o).map(o=>o._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:o={}}=e,f=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(f))throw Error(`${this.name}(${f}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const p=this.getOrInitializeService({instanceIdentifier:f,options:o});for(const[m,b]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(m);f===h&&b.resolve(p)}return p}onInit(e,o){var f;const p=this.normalizeInstanceIdentifier(o),m=(f=this.onInitCallbacks.get(p))!==null&&f!==void 0?f:new Set;m.add(e),this.onInitCallbacks.set(p,m);const b=this.instances.get(p);return b&&e(b,p),()=>{m.delete(e)}}invokeOnInitCallbacks(e,o){const f=this.onInitCallbacks.get(o);if(!!f)for(const p of f)try{p(e,o)}catch{}}getOrInitializeService({instanceIdentifier:e,options:o={}}){let f=this.instances.get(e);if(!f&&this.component&&(f=this.component.instanceFactory(this.container,{instanceIdentifier:Cm(e),options:o}),this.instances.set(e,f),this.instancesOptions.set(e,o),this.invokeOnInitCallbacks(f,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,f)}catch{}return f||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cm(t){return t===Nr?void 0:t}function wm(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const o=this.getProvider(e.name);if(o.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);o.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const o=new bm(e,this);return this.providers.set(e,o),o}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const xm={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Tm=ke.INFO,Em={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Om=(t,e,...o)=>{if(e<t.logLevel)return;const f=new Date().toISOString(),p=Em[e];if(p)console[p](`[${f}]  ${t.name}:`,...o);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=Tm,this._logHandler=Om,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(o=>{if(Dm(o)){const f=o.getImmediate();return`${f.library}/${f.version}`}else return null}).filter(o=>o).join(" ")}}function Dm(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ua="@firebase/app",Xc="0.7.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Am("@firebase/app"),km="@firebase/app-compat",Fm="@firebase/analytics-compat",Rm="@firebase/analytics",Mm="@firebase/app-check-compat",Im="@firebase/app-check",Lm="@firebase/auth",Bm="@firebase/auth-compat",jm="@firebase/database",Nm="@firebase/database-compat",Um="@firebase/functions",Hm="@firebase/functions-compat",Wm="@firebase/installations",zm="@firebase/installations-compat",Xm="@firebase/messaging",Gm="@firebase/messaging-compat",Ym="@firebase/performance",Vm="@firebase/performance-compat",qm="@firebase/remote-config",Km="@firebase/remote-config-compat",Jm="@firebase/storage",Qm="@firebase/storage-compat",$m="@firebase/firestore",Zm="@firebase/firestore-compat",ev="firebase",tv="9.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="[DEFAULT]",rv={[Ua]:"fire-core",[km]:"fire-core-compat",[Rm]:"fire-analytics",[Fm]:"fire-analytics-compat",[Im]:"fire-app-check",[Mm]:"fire-app-check-compat",[Lm]:"fire-auth",[Bm]:"fire-auth-compat",[jm]:"fire-rtdb",[Nm]:"fire-rtdb-compat",[Um]:"fire-fn",[Hm]:"fire-fn-compat",[Wm]:"fire-iid",[zm]:"fire-iid-compat",[Xm]:"fire-fcm",[Gm]:"fire-fcm-compat",[Ym]:"fire-perf",[Vm]:"fire-perf-compat",[qm]:"fire-rc",[Km]:"fire-rc-compat",[Jm]:"fire-gcs",[Qm]:"fire-gcs-compat",[$m]:"fire-fst",[Zm]:"fire-fst-compat","fire-js":"fire-js",[ev]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Map,Ha=new Map;function nv(t,e){try{t.container.addComponent(e)}catch(o){Ol.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,o)}}function Al(t){const e=t.name;if(Ha.has(e))return Ol.debug(`There were multiple attempts to register component ${e}.`),!1;Ha.set(e,t);for(const o of Ms.values())nv(o,t);return!0}function iv(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Is=new Ff("app","Firebase",sv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,o,f){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},o),this._name=o.name,this._automaticDataCollectionEnabled=o.automaticDataCollectionEnabled,this._container=f,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=tv;function a1(t,e={}){typeof e!="object"&&(e={name:e});const o=Object.assign({name:Rf,automaticDataCollectionEnabled:!1},e),f=o.name;if(typeof f!="string"||!f)throw Is.create("bad-app-name",{appName:String(f)});const p=Ms.get(f);if(p){if(Na(t,p.options)&&Na(o,p.config))return p;throw Is.create("duplicate-app",{appName:f})}const m=new Sm(f);for(const h of Ha.values())m.addComponent(h);const b=new ov(t,o,m);return Ms.set(f,b),b}function lv(t=Rf){const e=Ms.get(t);if(!e)throw Is.create("no-app",{appName:t});return e}function bn(t,e,o){var f;let p=(f=rv[t])!==null&&f!==void 0?f:t;o&&(p+=`-${o}`);const m=p.match(/\s|\//),b=e.match(/\s|\//);if(m||b){const h=[`Unable to register library "${p}" with version "${e}":`];m&&h.push(`library name "${p}" contains illegal characters (whitespace or "/")`),m&&b&&h.push("and"),b&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ol.warn(h.join(" "));return}Al(new $s(`${p}-version`,()=>({library:p,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){Al(new $s("platform-logger",e=>new Pm(e),"PRIVATE")),bn(Ua,Xc,t),bn(Ua,Xc,"esm2017"),bn("fire-js","")}cv("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="firebasestorage.googleapis.com",If="storageBucket",uv=2*60*1e3,fv=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends Js{constructor(e,o){super(ma(e),`Firebase Storage: ${o} (${ma(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}_codeEquals(e){return ma(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function ma(t){return"storage/"+t}function Pl(){const t="An unknown error occurred, please check the error payload for server response.";return new je("unknown",t)}function hv(t){return new je("object-not-found","Object '"+t+"' does not exist.")}function dv(t){return new je("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gv(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je("unauthenticated",t)}function pv(){return new je("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function mv(t){return new je("unauthorized","User does not have permission to access '"+t+"'.")}function vv(){return new je("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Lf(){return new je("canceled","User canceled the upload/download.")}function yv(t){return new je("invalid-url","Invalid URL '"+t+"'.")}function _v(t){return new je("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function bv(){return new je("no-default-bucket","No default bucket found. Did you set the '"+If+"' property when initializing the app?")}function Bf(){return new je("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cv(){return new je("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function wv(){return new je("no-download-url","The given file does not have any download URLs.")}function Wa(t){return new je("invalid-argument",t)}function jf(){return new je("app-deleted","The Firebase app was deleted.")}function Sv(t){return new je("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function di(t,e){return new je("invalid-format","String does not match format '"+t+"': "+e)}function si(t){throw new je("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,o){this.bucket=e,this.path_=o}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,o){let f;try{f=St.makeFromUrl(e,o)}catch{return new St(e,"")}if(f.path==="")return f;throw _v(e)}static makeFromUrl(e,o){let f=null;const p="([A-Za-z0-9.\\-_]+)";function m(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const b="(/(.*))?$",h=new RegExp("^gs://"+p+b,"i"),i={bucket:1,path:3};function a(y){y.path_=decodeURIComponent(y.path)}const c="v[A-Za-z0-9_]+",n=o.replace(/[.]/g,"\\."),s="(/([^?#]*).*)?$",r=new RegExp(`^https?://${n}/${c}/b/${p}/o${s}`,"i"),u={bucket:1,path:3},d=o===Mf?"(?:storage.googleapis.com|storage.cloud.google.com)":o,l="([^?#]*)",g=new RegExp(`^https?://${d}/${p}/${l}`,"i"),_=[{regex:h,indices:i,postModify:m},{regex:r,indices:u,postModify:a},{regex:g,indices:{bucket:1,path:2},postModify:a}];for(let y=0;y<_.length;y++){const C=_[y],S=C.regex.exec(e);if(S){const x=S[C.indices.bucket];let T=S[C.indices.path];T||(T=""),f=new St(x,T),C.postModify(f);break}}if(f==null)throw yv(e);return f}}class xv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e,o){let f=1,p=null,m=null,b=!1,h=0;function i(){return h===2}let a=!1;function c(...l){a||(a=!0,e.apply(null,l))}function n(l){p=setTimeout(()=>{p=null,t(r,i())},l)}function s(){m&&clearTimeout(m)}function r(l,...g){if(a){s();return}if(l){s(),c.call(null,l,...g);return}if(i()||b){s(),c.call(null,l,...g);return}f<64&&(f*=2);let _;h===1?(h=2,_=0):_=(f+Math.random())*1e3,n(_)}let u=!1;function d(l){u||(u=!0,s(),!a&&(p!==null?(l||(h=2),clearTimeout(p),n(0)):l||(h=1)))}return n(0),m=setTimeout(()=>{b=!0,d(!0)},o),d}function Ev(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){return t!==void 0}function Av(t){return typeof t=="function"}function Pv(t){return typeof t=="object"&&!Array.isArray(t)}function Zs(t){return typeof t=="string"||t instanceof String}function Gc(t){return Dl()&&t instanceof Blob}function Dl(){return typeof Blob!="undefined"}function Yc(t,e,o,f){if(f<e)throw Wa(`Invalid value for '${t}'. Expected ${e} or greater.`);if(f>o)throw Wa(`Invalid value for '${t}'. Expected ${o} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e,o){let f=e;return o==null&&(f=`https://${e}`),`${o}://${f}/v0${t}`}function Nf(t){const e=encodeURIComponent;let o="?";for(const f in t)if(t.hasOwnProperty(f)){const p=e(f)+"="+e(t[f]);o=o+p+"&"}return o=o.slice(0,-1),o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xr||(Xr={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,o,f,p,m,b,h,i,a,c,n){this.url_=e,this.method_=o,this.headers_=f,this.body_=p,this.successCodes_=m,this.additionalRetryCodes_=b,this.callback_=h,this.errorCallback_=i,this.timeout_=a,this.progressCallback_=c,this.connectionFactory_=n,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((s,r)=>{this.resolve_=s,this.reject_=r,this.start_()})}start_(){const e=(f,p)=>{if(p){f(!1,new hs(!1,null,!0));return}const m=this.connectionFactory_();this.pendingConnection_=m;const b=h=>{const i=h.loaded,a=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(i,a)};this.progressCallback_!==null&&m.addUploadProgressListener(b),m.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&m.removeUploadProgressListener(b),this.pendingConnection_=null;const h=m.getErrorCode()===Xr.NO_ERROR,i=m.getStatus();if(!h||this.isRetryStatusCode_(i)){const c=m.getErrorCode()===Xr.ABORT;f(!1,new hs(!1,null,c));return}const a=this.successCodes_.indexOf(i)!==-1;f(!0,new hs(a,m))})},o=(f,p)=>{const m=this.resolve_,b=this.reject_,h=p.connection;if(p.wasSuccessCode)try{const i=this.callback_(h,h.getResponse());Ov(i)?m(i):m()}catch(i){b(i)}else if(h!==null){const i=Pl();i.serverResponse=h.getErrorText(),this.errorCallback_?b(this.errorCallback_(h,i)):b(i)}else if(p.canceled){const i=this.appDelete_?jf():Lf();b(i)}else{const i=vv();b(i)}};this.canceled_?o(!1,new hs(!1,null,!0)):this.backoffId_=Tv(e,o,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ev(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const o=e>=500&&e<600,p=[408,429].indexOf(e)!==-1,m=this.additionalRetryCodes_.indexOf(e)!==-1;return o||p||m}}class hs{constructor(e,o,f){this.wasSuccessCode=e,this.connection=o,this.canceled=!!f}}function kv(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Fv(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function Rv(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Mv(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Iv(t,e,o,f,p,m){const b=Nf(t.urlParams),h=t.url+b,i=Object.assign({},t.headers);return Rv(i,e),kv(i,o),Fv(i,m),Mv(i,f),new Dv(h,t.method,i,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function Bv(...t){const e=Lv();if(e!==void 0){const o=new e;for(let f=0;f<t.length;f++)o.append(t[f]);return o.getBlob()}else{if(Dl())return new Blob(t);throw new je("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function jv(t,e,o){return t.webkitSlice?t.webkitSlice(e,o):t.mozSlice?t.mozSlice(e,o):t.slice?t.slice(e,o):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class va{constructor(e,o){this.data=e,this.contentType=o||null}}function Uv(t,e){switch(t){case Xt.RAW:return new va(Uf(e));case Xt.BASE64:case Xt.BASE64URL:return new va(Hf(t,e));case Xt.DATA_URL:return new va(Wv(e),zv(e))}throw Pl()}function Uf(t){const e=[];for(let o=0;o<t.length;o++){let f=t.charCodeAt(o);if(f<=127)e.push(f);else if(f<=2047)e.push(192|f>>6,128|f&63);else if((f&64512)===55296)if(!(o<t.length-1&&(t.charCodeAt(o+1)&64512)===56320))e.push(239,191,189);else{const m=f,b=t.charCodeAt(++o);f=65536|(m&1023)<<10|b&1023,e.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|f&63)}else(f&64512)===56320?e.push(239,191,189):e.push(224|f>>12,128|f>>6&63,128|f&63)}return new Uint8Array(e)}function Hv(t){let e;try{e=decodeURIComponent(t)}catch{throw di(Xt.DATA_URL,"Malformed data URL.")}return Uf(e)}function Hf(t,e){switch(t){case Xt.BASE64:{const p=e.indexOf("-")!==-1,m=e.indexOf("_")!==-1;if(p||m)throw di(t,"Invalid character '"+(p?"-":"_")+"' found: is it base64url encoded?");break}case Xt.BASE64URL:{const p=e.indexOf("+")!==-1,m=e.indexOf("/")!==-1;if(p||m)throw di(t,"Invalid character '"+(p?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=Nv(e)}catch{throw di(t,"Invalid character found")}const f=new Uint8Array(o.length);for(let p=0;p<o.length;p++)f[p]=o.charCodeAt(p);return f}class Wf{constructor(e){this.base64=!1,this.contentType=null;const o=e.match(/^data:([^,]+)?,/);if(o===null)throw di(Xt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=o[1]||null;f!=null&&(this.base64=Xv(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-7):f),this.rest=e.substring(e.indexOf(",")+1)}}function Wv(t){const e=new Wf(t);return e.base64?Hf(Xt.BASE64,e.rest):Hv(e.rest)}function zv(t){return new Wf(t).contentType}function Xv(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,o){let f=0,p="";Gc(e)?(this.data_=e,f=e.size,p=e.type):e instanceof ArrayBuffer?(o?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),f=this.data_.length):e instanceof Uint8Array&&(o?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),f=e.length),this.size_=f,this.type_=p}size(){return this.size_}type(){return this.type_}slice(e,o){if(Gc(this.data_)){const f=this.data_,p=jv(f,e,o);return p===null?null:new yr(p)}else{const f=new Uint8Array(this.data_.buffer,e,o-e);return new yr(f,!0)}}static getBlob(...e){if(Dl()){const o=e.map(f=>f instanceof yr?f.data_:f);return new yr(Bv.apply(null,o))}else{const o=e.map(b=>Zs(b)?Uv(Xt.RAW,b).data:b.data_);let f=0;o.forEach(b=>{f+=b.byteLength});const p=new Uint8Array(f);let m=0;return o.forEach(b=>{for(let h=0;h<b.length;h++)p[m++]=b[h]}),new yr(p,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){let e;try{e=JSON.parse(t)}catch{return null}return Pv(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Yv(t,e){const o=e.split("/").filter(f=>f.length>0).join("/");return t.length===0?o:t+"/"+o}function Xf(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){return e}class pt{constructor(e,o,f,p){this.server=e,this.local=o||e,this.writable=!!f,this.xform=p||Vv}}let ds=null;function qv(t){return!Zs(t)||t.length<2?t:Xf(t)}function Gf(){if(ds)return ds;const t=[];t.push(new pt("bucket")),t.push(new pt("generation")),t.push(new pt("metageneration")),t.push(new pt("name","fullPath",!0));function e(m,b){return qv(b)}const o=new pt("name");o.xform=e,t.push(o);function f(m,b){return b!==void 0?Number(b):b}const p=new pt("size");return p.xform=f,t.push(p),t.push(new pt("timeCreated")),t.push(new pt("updated")),t.push(new pt("md5Hash",null,!0)),t.push(new pt("cacheControl",null,!0)),t.push(new pt("contentDisposition",null,!0)),t.push(new pt("contentEncoding",null,!0)),t.push(new pt("contentLanguage",null,!0)),t.push(new pt("contentType",null,!0)),t.push(new pt("metadata","customMetadata",!0)),ds=t,ds}function Kv(t,e){function o(){const f=t.bucket,p=t.fullPath,m=new St(f,p);return e._makeStorageReference(m)}Object.defineProperty(t,"ref",{get:o})}function Jv(t,e,o){const f={};f.type="file";const p=o.length;for(let m=0;m<p;m++){const b=o[m];f[b.local]=b.xform(f,e[b.server])}return Kv(f,t),f}function Yf(t,e,o){const f=zf(e);return f===null?null:Jv(t,f,o)}function Qv(t,e,o,f){const p=zf(e);if(p===null||!Zs(p.downloadTokens))return null;const m=p.downloadTokens;if(m.length===0)return null;const b=encodeURIComponent;return m.split(",").map(a=>{const c=t.bucket,n=t.fullPath,s="/b/"+b(c)+"/o/"+b(n),r=Bi(s,o,f),u=Nf({alt:"media",token:a});return r+u})[0]}function Vf(t,e){const o={},f=e.length;for(let p=0;p<f;p++){const m=e[p];m.writable&&(o[m.server]=t[m.local])}return JSON.stringify(o)}class Ln{constructor(e,o,f,p){this.url=e,this.method=o,this.handler=f,this.timeout=p,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){if(!t)throw Pl()}function kl(t,e){function o(f,p){const m=Yf(t,p,e);return or(m!==null),m}return o}function $v(t,e){function o(f,p){const m=Yf(t,p,e);return or(m!==null),Qv(m,p,t.host,t._protocol)}return o}function ji(t){function e(o,f){let p;return o.getStatus()===401?o.getErrorText().includes("Firebase App Check token is invalid")?p=pv():p=gv():o.getStatus()===402?p=dv(t.bucket):o.getStatus()===403?p=mv(t.path):p=f,p.serverResponse=f.serverResponse,p}return e}function qf(t){const e=ji(t);function o(f,p){let m=e(f,p);return f.getStatus()===404&&(m=hv(t.path)),m.serverResponse=p.serverResponse,m}return o}function Zv(t,e,o){const f=e.fullServerUrl(),p=Bi(f,t.host,t._protocol),m="GET",b=t.maxOperationRetryTime,h=new Ln(p,m,kl(t,o),b);return h.errorHandler=qf(e),h}function ey(t,e,o){const f=e.fullServerUrl(),p=Bi(f,t.host,t._protocol),m="GET",b=t.maxOperationRetryTime,h=new Ln(p,m,$v(t,o),b);return h.errorHandler=qf(e),h}function ty(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kf(t,e,o){const f=Object.assign({},o);return f.fullPath=t.path,f.size=e.size(),f.contentType||(f.contentType=ty(null,e)),f}function ry(t,e,o,f,p){const m=e.bucketOnlyServerUrl(),b={"X-Goog-Upload-Protocol":"multipart"};function h(){let _="";for(let y=0;y<2;y++)_=_+Math.random().toString().slice(2);return _}const i=h();b["Content-Type"]="multipart/related; boundary="+i;const a=Kf(e,f,p),c=Vf(a,o),n="--"+i+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+i+`\r
Content-Type: `+a.contentType+`\r
\r
`,s=`\r
--`+i+"--",r=yr.getBlob(n,f,s);if(r===null)throw Bf();const u={name:a.fullPath},d=Bi(m,t.host,t._protocol),l="POST",g=t.maxUploadRetryTime,v=new Ln(d,l,kl(t,o),g);return v.urlParams=u,v.headers=b,v.body=r.uploadData(),v.errorHandler=ji(e),v}class Ls{constructor(e,o,f,p){this.current=e,this.total=o,this.finalized=!!f,this.metadata=p||null}}function Fl(t,e){let o=null;try{o=t.getResponseHeader("X-Goog-Upload-Status")}catch{or(!1)}return or(!!o&&(e||["active"]).indexOf(o)!==-1),o}function ny(t,e,o,f,p){const m=e.bucketOnlyServerUrl(),b=Kf(e,f,p),h={name:b.fullPath},i=Bi(m,t.host,t._protocol),a="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":b.contentType,"Content-Type":"application/json; charset=utf-8"},n=Vf(b,o),s=t.maxUploadRetryTime;function r(d){Fl(d);let l;try{l=d.getResponseHeader("X-Goog-Upload-URL")}catch{or(!1)}return or(Zs(l)),l}const u=new Ln(i,a,r,s);return u.urlParams=h,u.headers=c,u.body=n,u.errorHandler=ji(e),u}function iy(t,e,o,f){const p={"X-Goog-Upload-Command":"query"};function m(a){const c=Fl(a,["active","final"]);let n=null;try{n=a.getResponseHeader("X-Goog-Upload-Size-Received")}catch{or(!1)}n||or(!1);const s=Number(n);return or(!isNaN(s)),new Ls(s,f.size(),c==="final")}const b="POST",h=t.maxUploadRetryTime,i=new Ln(o,b,m,h);return i.headers=p,i.errorHandler=ji(e),i}const Vc=256*1024;function sy(t,e,o,f,p,m,b,h){const i=new Ls(0,0);if(b?(i.current=b.current,i.total=b.total):(i.current=0,i.total=f.size()),f.size()!==i.total)throw Cv();const a=i.total-i.current;let c=a;p>0&&(c=Math.min(c,p));const n=i.current,s=n+c,u={"X-Goog-Upload-Command":c===a?"upload, finalize":"upload","X-Goog-Upload-Offset":`${i.current}`},d=f.slice(n,s);if(d===null)throw Bf();function l(y,C){const S=Fl(y,["active","final"]),x=i.current+c,T=f.size();let D;return S==="final"?D=kl(e,m)(y,C):D=null,new Ls(x,T,S==="final",D)}const g="POST",v=e.maxUploadRetryTime,_=new Ln(o,g,l,v);return _.headers=u,_.body=d.uploadData(),_.progressCallback=h||null,_.errorHandler=ji(t),_}const bt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ya(t){switch(t){case"running":case"pausing":case"canceling":return bt.RUNNING;case"paused":return bt.PAUSED;case"success":return bt.SUCCESS;case"canceled":return bt.CANCELED;case"error":return bt.ERROR;default:return bt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,o,f){if(Av(e)||o!=null||f!=null)this.next=e,this.error=o!=null?o:void 0,this.complete=f!=null?f:void 0;else{const m=e;this.next=m.next,this.error=m.error,this.complete=m.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class ay{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,o,f,p){if(this.sent_)throw si("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,e,!0),p!==void 0)for(const m in p)p.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,p[m].toString());return f!==void 0?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw si("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw si("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw si("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw si("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ly extends ay{initXhr(){this.xhr_.responseType="text"}}function gn(){return new ly}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,o,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=o,this._metadata=f,this._mappings=Gf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=p=>{this._request=void 0,this._chunkMultiplier=1,p._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=p,this._transition("error"))},this._metadataErrorHandler=p=>{this._request=void 0,p._codeEquals("canceled")?this.completeTransitions_():(this._error=p,this._transition("error"))},this._promise=new Promise((p,m)=>{this._resolve=p,this._reject=m,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return o=>this._updateProgress(e+o)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,f])=>{switch(this._state){case"running":e(o,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,o)=>{const f=ny(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(f,gn,e,o);this._request=p,p.getPromise().then(m=>{this._request=void 0,this._uploadUrl=m,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((o,f)=>{const p=iy(this._ref.storage,this._ref._location,e,this._blob),m=this._ref.storage._makeRequest(p,gn,o,f);this._request=m,m.getPromise().then(b=>{b=b,this._request=void 0,this._updateProgress(b.current),this._needToFetchStatus=!1,b.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Vc*this._chunkMultiplier,o=new Ls(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((p,m)=>{let b;try{b=sy(this._ref._location,this._ref.storage,f,this._blob,e,this._mappings,o,this._makeProgressCallback())}catch(i){this._error=i,this._transition("error");return}const h=this._ref.storage._makeRequest(b,gn,p,m);this._request=h,h.getPromise().then(i=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(i.current),i.finalized?(this._metadata=i.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Vc*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,o)=>{const f=Zv(this._ref.storage,this._ref._location,this._mappings),p=this._ref.storage._makeRequest(f,gn,e,o);this._request=p,p.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,o)=>{const f=ry(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(f,gn,e,o);this._request=p,p.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const o=this._transferred;this._transferred=e,this._transferred!==o&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const o=this._state==="paused";this._state=e,o&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Lf(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ya(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,o,f,p){const m=new oy(o||void 0,f||void 0,p||void 0);return this._addObserver(m),()=>{this._removeObserver(m)}}then(e,o){return this._promise.then(e,o)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const o=this._observers.indexOf(e);o!==-1&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ya(this._state)){case bt.SUCCESS:ln(this._resolve.bind(null,this.snapshot))();break;case bt.CANCELED:case bt.ERROR:const o=this._reject;ln(o.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ya(this._state)){case bt.RUNNING:case bt.PAUSED:e.next&&ln(e.next.bind(e,this.snapshot))();break;case bt.SUCCESS:e.complete&&ln(e.complete.bind(e))();break;case bt.CANCELED:case bt.ERROR:e.error&&ln(e.error.bind(e,this._error))();break;default:e.error&&ln(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,o){this._service=e,o instanceof St?this._location=o:this._location=St.makeFromUrl(o,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,o){return new Vr(e,o)}get root(){const e=new St(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xf(this._location.path)}get storage(){return this._service}get parent(){const e=Gv(this._location.path);if(e===null)return null;const o=new St(this._location.bucket,e);return new Vr(this._service,o)}_throwIfRoot(e){if(this._location.path==="")throw Sv(e)}}function uy(t,e,o){return t._throwIfRoot("uploadBytesResumable"),new cy(t,new yr(e),o)}function fy(t){t._throwIfRoot("getDownloadURL");const e=ey(t.storage,t._location,Gf());return t.storage.makeRequestWithTokens(e,gn).then(o=>{if(o===null)throw wv();return o})}function hy(t,e){const o=Yv(t._location.path,e),f=new St(t._location.bucket,o);return new Vr(t.storage,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){return/^[A-Za-z]+:\/\//.test(t)}function gy(t,e){return new Vr(t,e)}function Jf(t,e){if(t instanceof Rl){const o=t;if(o._bucket==null)throw bv();const f=new Vr(o,o._bucket);return e!=null?Jf(f,e):f}else return e!==void 0?hy(t,e):t}function py(t,e){if(e&&dy(e)){if(t instanceof Rl)return gy(t,e);throw Wa("To use ref(service, url), the first argument must be a Storage instance.")}else return Jf(t,e)}function qc(t,e){const o=e==null?void 0:e[If];return o==null?null:St.makeFromBucketSpec(o,t)}class Rl{constructor(e,o,f,p,m){this.app=e,this._authProvider=o,this._appCheckProvider=f,this._url=p,this._firebaseVersion=m,this._bucket=null,this._host=Mf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uv,this._maxUploadRetryTime=fv,this._requests=new Set,p!=null?this._bucket=St.makeFromBucketSpec(p,this._host):this._bucket=qc(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=St.makeFromBucketSpec(this._url,e):this._bucket=qc(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Yc("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Yc("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const o=await e.getToken();if(o!==null)return o.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vr(this,e)}_makeRequest(e,o,f,p){if(this._deleted)return new xv(jf());{const m=Iv(e,this._appId,f,p,o,this._firebaseVersion);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(e,o){const[f,p]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,o,f,p).getPromise()}}const Kc="@firebase/storage",Jc="0.9.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="storage";function l1(t,e,o){return t=Qs(t),uy(t,e,o)}function c1(t){return t=Qs(t),fy(t)}function u1(t,e){return t=Qs(t),py(t,e)}function f1(t=lv(),e){return t=Qs(t),iv(t,Qf).getImmediate({identifier:e})}function my(t,{instanceIdentifier:e}){const o=t.getProvider("app").getImmediate(),f=t.getProvider("auth-internal"),p=t.getProvider("app-check-internal");return new Rl(o,f,p,e,av)}function vy(){Al(new $s(Qf,my,"PUBLIC").setMultipleInstances(!0)),bn(Kc,Jc,""),bn(Kc,Jc,"esm2017")}vy();var yy="firebase",_y="9.6.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(yy,_y,"app");var $f={},Ml={exports:{}},Zf=function(e,o){return function(){for(var p=new Array(arguments.length),m=0;m<p.length;m++)p[m]=arguments[m];return e.apply(o,p)}},by=Zf,Kr=Object.prototype.toString;function Il(t){return Kr.call(t)==="[object Array]"}function za(t){return typeof t=="undefined"}function Cy(t){return t!==null&&!za(t)&&t.constructor!==null&&!za(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function wy(t){return Kr.call(t)==="[object ArrayBuffer]"}function Sy(t){return typeof FormData!="undefined"&&t instanceof FormData}function xy(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Ty(t){return typeof t=="string"}function Ey(t){return typeof t=="number"}function eh(t){return t!==null&&typeof t=="object"}function xs(t){if(Kr.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Oy(t){return Kr.call(t)==="[object Date]"}function Ay(t){return Kr.call(t)==="[object File]"}function Py(t){return Kr.call(t)==="[object Blob]"}function th(t){return Kr.call(t)==="[object Function]"}function Dy(t){return eh(t)&&th(t.pipe)}function ky(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Fy(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ry(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Ll(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Il(t))for(var o=0,f=t.length;o<f;o++)e.call(null,t[o],o,t);else for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&e.call(null,t[p],p,t)}function Xa(){var t={};function e(p,m){xs(t[m])&&xs(p)?t[m]=Xa(t[m],p):xs(p)?t[m]=Xa({},p):Il(p)?t[m]=p.slice():t[m]=p}for(var o=0,f=arguments.length;o<f;o++)Ll(arguments[o],e);return t}function My(t,e,o){return Ll(e,function(p,m){o&&typeof p=="function"?t[m]=by(p,o):t[m]=p}),t}function Iy(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Tt={isArray:Il,isArrayBuffer:wy,isBuffer:Cy,isFormData:Sy,isArrayBufferView:xy,isString:Ty,isNumber:Ey,isObject:eh,isPlainObject:xs,isUndefined:za,isDate:Oy,isFile:Ay,isBlob:Py,isFunction:th,isStream:Dy,isURLSearchParams:ky,isStandardBrowserEnv:Ry,forEach:Ll,merge:Xa,extend:My,trim:Fy,stripBOM:Iy},cn=Tt;function Qc(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var rh=function(e,o,f){if(!o)return e;var p;if(f)p=f(o);else if(cn.isURLSearchParams(o))p=o.toString();else{var m=[];cn.forEach(o,function(i,a){i===null||typeof i=="undefined"||(cn.isArray(i)?a=a+"[]":i=[i],cn.forEach(i,function(n){cn.isDate(n)?n=n.toISOString():cn.isObject(n)&&(n=JSON.stringify(n)),m.push(Qc(a)+"="+Qc(n))}))}),p=m.join("&")}if(p){var b=e.indexOf("#");b!==-1&&(e=e.slice(0,b)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e},Ly=Tt;function eo(){this.handlers=[]}eo.prototype.use=function(e,o,f){return this.handlers.push({fulfilled:e,rejected:o,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1};eo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};eo.prototype.forEach=function(e){Ly.forEach(this.handlers,function(f){f!==null&&e(f)})};var By=eo,jy=Tt,Ny=function(e,o){jy.forEach(e,function(p,m){m!==o&&m.toUpperCase()===o.toUpperCase()&&(e[o]=p,delete e[m])})},nh=function(e,o,f,p,m){return e.config=o,f&&(e.code=f),e.request=p,e.response=m,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Uy=nh,ih=function(e,o,f,p,m){var b=new Error(e);return Uy(b,o,f,p,m)},Hy=ih,Wy=function(e,o,f){var p=f.config.validateStatus;!f.status||!p||p(f.status)?e(f):o(Hy("Request failed with status code "+f.status,f.config,null,f.request,f))},gs=Tt,zy=gs.isStandardBrowserEnv()?function(){return{write:function(o,f,p,m,b,h){var i=[];i.push(o+"="+encodeURIComponent(f)),gs.isNumber(p)&&i.push("expires="+new Date(p).toGMTString()),gs.isString(m)&&i.push("path="+m),gs.isString(b)&&i.push("domain="+b),h===!0&&i.push("secure"),document.cookie=i.join("; ")},read:function(o){var f=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Xy=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},Gy=function(e,o){return o?e.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):e},Yy=Xy,Vy=Gy,qy=function(e,o){return e&&!Yy(o)?Vy(e,o):o},_a=Tt,Ky=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Jy=function(e){var o={},f,p,m;return e&&_a.forEach(e.split(`
`),function(h){if(m=h.indexOf(":"),f=_a.trim(h.substr(0,m)).toLowerCase(),p=_a.trim(h.substr(m+1)),f){if(o[f]&&Ky.indexOf(f)>=0)return;f==="set-cookie"?o[f]=(o[f]?o[f]:[]).concat([p]):o[f]=o[f]?o[f]+", "+p:p}}),o},$c=Tt,Qy=$c.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),f;function p(m){var b=m;return e&&(o.setAttribute("href",b),b=o.href),o.setAttribute("href",b),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return f=p(window.location.href),function(b){var h=$c.isString(b)?p(b):b;return h.protocol===f.protocol&&h.host===f.host}}():function(){return function(){return!0}}(),ps=Tt,$y=Wy,Zy=zy,e0=rh,t0=qy,r0=Jy,n0=Qy,ba=ih,Zc=function(e){return new Promise(function(f,p){var m=e.data,b=e.headers,h=e.responseType;ps.isFormData(m)&&delete b["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";b.Authorization="Basic "+btoa(a+":"+c)}var n=t0(e.baseURL,e.url);i.open(e.method.toUpperCase(),e0(n,e.params,e.paramsSerializer),!0),i.timeout=e.timeout;function s(){if(!!i){var u="getAllResponseHeaders"in i?r0(i.getAllResponseHeaders()):null,d=!h||h==="text"||h==="json"?i.responseText:i.response,l={data:d,status:i.status,statusText:i.statusText,headers:u,config:e,request:i};$y(f,p,l),i=null}}if("onloadend"in i?i.onloadend=s:i.onreadystatechange=function(){!i||i.readyState!==4||i.status===0&&!(i.responseURL&&i.responseURL.indexOf("file:")===0)||setTimeout(s)},i.onabort=function(){!i||(p(ba("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){p(ba("Network Error",e,null,i)),i=null},i.ontimeout=function(){var d="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),p(ba(d,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",i)),i=null},ps.isStandardBrowserEnv()){var r=(e.withCredentials||n0(n))&&e.xsrfCookieName?Zy.read(e.xsrfCookieName):void 0;r&&(b[e.xsrfHeaderName]=r)}"setRequestHeader"in i&&ps.forEach(b,function(d,l){typeof m=="undefined"&&l.toLowerCase()==="content-type"?delete b[l]:i.setRequestHeader(l,d)}),ps.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),h&&h!=="json"&&(i.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&i.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(d){!i||(i.abort(),p(d),i=null)}),m||(m=null),i.send(m)})},rt=Tt,eu=Ny,i0=nh,s0={"Content-Type":"application/x-www-form-urlencoded"};function tu(t,e){!rt.isUndefined(t)&&rt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function o0(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Zc),t}function a0(t,e,o){if(rt.isString(t))try{return(e||JSON.parse)(t),rt.trim(t)}catch(f){if(f.name!=="SyntaxError")throw f}return(o||JSON.stringify)(t)}var to={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:o0(),transformRequest:[function(e,o){return eu(o,"Accept"),eu(o,"Content-Type"),rt.isFormData(e)||rt.isArrayBuffer(e)||rt.isBuffer(e)||rt.isStream(e)||rt.isFile(e)||rt.isBlob(e)?e:rt.isArrayBufferView(e)?e.buffer:rt.isURLSearchParams(e)?(tu(o,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):rt.isObject(e)||o&&o["Content-Type"]==="application/json"?(tu(o,"application/json"),a0(e)):e}],transformResponse:[function(e){var o=this.transitional,f=o&&o.silentJSONParsing,p=o&&o.forcedJSONParsing,m=!f&&this.responseType==="json";if(m||p&&rt.isString(e)&&e.length)try{return JSON.parse(e)}catch(b){if(m)throw b.name==="SyntaxError"?i0(b,this,"E_JSON_PARSE"):b}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};to.headers={common:{Accept:"application/json, text/plain, */*"}};rt.forEach(["delete","get","head"],function(e){to.headers[e]={}});rt.forEach(["post","put","patch"],function(e){to.headers[e]=rt.merge(s0)});var Bl=to,l0=Tt,c0=Bl,u0=function(e,o,f){var p=this||c0;return l0.forEach(f,function(b){e=b.call(p,e,o)}),e},sh=function(e){return!!(e&&e.__CANCEL__)},ru=Tt,Ca=u0,f0=sh,h0=Bl;function wa(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var d0=function(e){wa(e),e.headers=e.headers||{},e.data=Ca.call(e,e.data,e.headers,e.transformRequest),e.headers=ru.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ru.forEach(["delete","get","head","post","put","patch","common"],function(p){delete e.headers[p]});var o=e.adapter||h0.adapter;return o(e).then(function(p){return wa(e),p.data=Ca.call(e,p.data,p.headers,e.transformResponse),p},function(p){return f0(p)||(wa(e),p&&p.response&&(p.response.data=Ca.call(e,p.response.data,p.response.headers,e.transformResponse))),Promise.reject(p)})},ct=Tt,oh=function(e,o){o=o||{};var f={},p=["url","method","data"],m=["headers","auth","proxy","params"],b=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function i(s,r){return ct.isPlainObject(s)&&ct.isPlainObject(r)?ct.merge(s,r):ct.isPlainObject(r)?ct.merge({},r):ct.isArray(r)?r.slice():r}function a(s){ct.isUndefined(o[s])?ct.isUndefined(e[s])||(f[s]=i(void 0,e[s])):f[s]=i(e[s],o[s])}ct.forEach(p,function(r){ct.isUndefined(o[r])||(f[r]=i(void 0,o[r]))}),ct.forEach(m,a),ct.forEach(b,function(r){ct.isUndefined(o[r])?ct.isUndefined(e[r])||(f[r]=i(void 0,e[r])):f[r]=i(void 0,o[r])}),ct.forEach(h,function(r){r in o?f[r]=i(e[r],o[r]):r in e&&(f[r]=i(void 0,e[r]))});var c=p.concat(m).concat(b).concat(h),n=Object.keys(e).concat(Object.keys(o)).filter(function(r){return c.indexOf(r)===-1});return ct.forEach(n,a),f};const g0="axios",p0="0.21.4",m0="Promise based HTTP client for the browser and node.js",v0="index.js",y0={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},_0={type:"git",url:"https://github.com/axios/axios.git"},b0=["xhr","http","ajax","promise","node"],C0="Matt Zabriskie",w0="MIT",S0={url:"https://github.com/axios/axios/issues"},x0="https://axios-http.com",T0={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},E0={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},O0="dist/axios.min.js",A0="dist/axios.min.js",P0="./index.d.ts",D0={"follow-redirects":"^1.14.0"},k0=[{path:"./dist/axios.min.js",threshold:"5kB"}];var F0={name:g0,version:p0,description:m0,main:v0,scripts:y0,repository:_0,keywords:b0,author:C0,license:w0,bugs:S0,homepage:x0,devDependencies:T0,browser:E0,jsdelivr:O0,unpkg:A0,typings:P0,dependencies:D0,bundlesize:k0},ah=F0,jl={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){jl[t]=function(f){return typeof f===t||"a"+(e<1?"n ":" ")+t}});var nu={},R0=ah.version.split(".");function lh(t,e){for(var o=e?e.split("."):R0,f=t.split("."),p=0;p<3;p++){if(o[p]>f[p])return!0;if(o[p]<f[p])return!1}return!1}jl.transitional=function(e,o,f){var p=o&&lh(o);function m(b,h){return"[Axios v"+ah.version+"] Transitional option '"+b+"'"+h+(f?". "+f:"")}return function(b,h,i){if(e===!1)throw new Error(m(h," has been removed in "+o));return p&&!nu[h]&&(nu[h]=!0,console.warn(m(h," has been deprecated since v"+o+" and will be removed in the near future"))),e?e(b,h,i):!0}};function M0(t,e,o){if(typeof t!="object")throw new TypeError("options must be an object");for(var f=Object.keys(t),p=f.length;p-- >0;){var m=f[p],b=e[m];if(b){var h=t[m],i=h===void 0||b(h,m,t);if(i!==!0)throw new TypeError("option "+m+" must be "+i);continue}if(o!==!0)throw Error("Unknown option "+m)}}var I0={isOlderVersion:lh,assertOptions:M0,validators:jl},ch=Tt,L0=rh,iu=By,su=d0,ro=oh,uh=I0,un=uh.validators;function Ni(t){this.defaults=t,this.interceptors={request:new iu,response:new iu}}Ni.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=ro(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var o=e.transitional;o!==void 0&&uh.assertOptions(o,{silentJSONParsing:un.transitional(un.boolean,"1.0.0"),forcedJSONParsing:un.transitional(un.boolean,"1.0.0"),clarifyTimeoutError:un.transitional(un.boolean,"1.0.0")},!1);var f=[],p=!0;this.interceptors.request.forEach(function(s){typeof s.runWhen=="function"&&s.runWhen(e)===!1||(p=p&&s.synchronous,f.unshift(s.fulfilled,s.rejected))});var m=[];this.interceptors.response.forEach(function(s){m.push(s.fulfilled,s.rejected)});var b;if(!p){var h=[su,void 0];for(Array.prototype.unshift.apply(h,f),h=h.concat(m),b=Promise.resolve(e);h.length;)b=b.then(h.shift(),h.shift());return b}for(var i=e;f.length;){var a=f.shift(),c=f.shift();try{i=a(i)}catch(n){c(n);break}}try{b=su(i)}catch(n){return Promise.reject(n)}for(;m.length;)b=b.then(m.shift(),m.shift());return b};Ni.prototype.getUri=function(e){return e=ro(this.defaults,e),L0(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ch.forEach(["delete","get","head","options"],function(e){Ni.prototype[e]=function(o,f){return this.request(ro(f||{},{method:e,url:o,data:(f||{}).data}))}});ch.forEach(["post","put","patch"],function(e){Ni.prototype[e]=function(o,f,p){return this.request(ro(p||{},{method:e,url:o,data:f}))}});var B0=Ni;function Nl(t){this.message=t}Nl.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Nl.prototype.__CANCEL__=!0;var fh=Nl,j0=fh;function Bs(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(p){e=p});var o=this;t(function(p){o.reason||(o.reason=new j0(p),e(o.reason))})}Bs.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Bs.source=function(){var e,o=new Bs(function(p){e=p});return{token:o,cancel:e}};var N0=Bs,U0=function(e){return function(f){return e.apply(null,f)}},H0=function(e){return typeof e=="object"&&e.isAxiosError===!0},ou=Tt,W0=Zf,Ts=B0,z0=oh,X0=Bl;function hh(t){var e=new Ts(t),o=W0(Ts.prototype.request,e);return ou.extend(o,Ts.prototype,e),ou.extend(o,e),o}var Lt=hh(X0);Lt.Axios=Ts;Lt.create=function(e){return hh(z0(Lt.defaults,e))};Lt.Cancel=fh;Lt.CancelToken=N0;Lt.isCancel=sh;Lt.all=function(e){return Promise.all(e)};Lt.spread=U0;Lt.isAxiosError=H0;Ml.exports=Lt;Ml.exports.default=Lt;var dh=Ml.exports,Ga={exports:{}},G0=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Y0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],gh=function(e){var o=e,f=e.indexOf("["),p=e.indexOf("]");f!=-1&&p!=-1&&(e=e.substring(0,f)+e.substring(f,p).replace(/:/g,";")+e.substring(p,e.length));for(var m=G0.exec(e||""),b={},h=14;h--;)b[Y0[h]]=m[h]||"";return f!=-1&&p!=-1&&(b.source=o,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=!0),b.pathNames=V0(b,b.path),b.queryKey=q0(b,b.query),b};function V0(t,e){var o=/\/{2,9}/g,f=e.replace(o,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&f.splice(0,1),e.substr(e.length-1,1)=="/"&&f.splice(f.length-1,1),f}function q0(t,e){var o={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,p,m){p&&(o[p]=m)}),o}var An={exports:{}},Ya={exports:{}},vi=1e3,yi=vi*60,_i=yi*60,bi=_i*24,K0=bi*365.25,J0=function(t,e){e=e||{};var o=typeof t;if(o==="string"&&t.length>0)return Q0(t);if(o==="number"&&isNaN(t)===!1)return e.long?Z0(t):$0(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Q0(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var o=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return o*K0;case"days":case"day":case"d":return o*bi;case"hours":case"hour":case"hrs":case"hr":case"h":return o*_i;case"minutes":case"minute":case"mins":case"min":case"m":return o*yi;case"seconds":case"second":case"secs":case"sec":case"s":return o*vi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function $0(t){return t>=bi?Math.round(t/bi)+"d":t>=_i?Math.round(t/_i)+"h":t>=yi?Math.round(t/yi)+"m":t>=vi?Math.round(t/vi)+"s":t+"ms"}function Z0(t){return ms(t,bi,"day")||ms(t,_i,"hour")||ms(t,yi,"minute")||ms(t,vi,"second")||t+" ms"}function ms(t,e,o){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=i,e.disable=b,e.enable=m,e.enabled=h,e.humanize=J0,e.instances=[],e.names=[],e.skips=[],e.formatters={};function o(a){var c=0,n;for(n in a)c=(c<<5)-c+a.charCodeAt(n),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function n(){if(!!n.enabled){var s=n,r=+new Date,u=r-(c||r);s.diff=u,s.prev=c,s.curr=r,c=r;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(_,y){if(_==="%%")return _;g++;var C=e.formatters[y];if(typeof C=="function"){var S=d[g];_=C.call(s,S),d.splice(g,1),g--}return _}),e.formatArgs.call(s,d);var v=n.log||e.log||console.log.bind(console);v.apply(s,d)}}return n.namespace=a,n.enabled=e.enabled(a),n.useColors=e.useColors(),n.color=o(a),n.destroy=p,typeof e.init=="function"&&e.init(n),e.instances.push(n),n}function p(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function m(a){e.save(a),e.names=[],e.skips=[];var c,n=(typeof a=="string"?a:"").split(/[\s,]+/),s=n.length;for(c=0;c<s;c++)!n[c]||(a=n[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var r=e.instances[c];r.enabled=e.enabled(r.namespace)}}function b(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,n;for(c=0,n=e.skips.length;c<n;c++)if(e.skips[c].test(a))return!1;for(c=0,n=e.names.length;c<n;c++)if(e.names[c].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}})(Ya,Ya.exports);(function(t,e){e=t.exports=Ya.exports,e.log=p,e.formatArgs=f,e.save=m,e.load=b,e.useColors=o,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(i){try{return JSON.stringify(i)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(i){var a=this.useColors;if(i[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+i[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;i.splice(1,0,c,"color: inherit");var n=0,s=0;i[0].replace(/%[a-zA-Z%]/g,function(r){r!=="%%"&&(n++,r==="%c"&&(s=n))}),i.splice(s,0,c)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function m(i){try{i==null?e.storage.removeItem("debug"):e.storage.debug=i}catch{}}function b(){var i;try{i=e.storage.debug}catch{}return!i&&typeof process!="undefined"&&"env"in process&&(i={}.DEBUG),i}e.enable(b());function h(){try{return window.localStorage}catch{}}})(An,An.exports);var e_=gh,au=An.exports("socket.io-client:url"),t_=r_;function r_(t,e){var o=t;e=e||typeof location!="undefined"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(au("protocol-less url %s",t),typeof e!="undefined"?t=e.protocol+"//"+t:t="https://"+t),au("parse %s",t),o=e_(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var f=o.host.indexOf(":")!==-1,p=f?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+p+":"+o.port,o.href=o.protocol+"://"+p+(e&&e.port===o.port?"":":"+o.port),o}var no={},Va={exports:{}},qa={exports:{}},Ci=1e3,wi=Ci*60,Si=wi*60,xi=Si*24,n_=xi*365.25,i_=function(t,e){e=e||{};var o=typeof t;if(o==="string"&&t.length>0)return s_(t);if(o==="number"&&isNaN(t)===!1)return e.long?a_(t):o_(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function s_(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var o=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return o*n_;case"days":case"day":case"d":return o*xi;case"hours":case"hour":case"hrs":case"hr":case"h":return o*Si;case"minutes":case"minute":case"mins":case"min":case"m":return o*wi;case"seconds":case"second":case"secs":case"sec":case"s":return o*Ci;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function o_(t){return t>=xi?Math.round(t/xi)+"d":t>=Si?Math.round(t/Si)+"h":t>=wi?Math.round(t/wi)+"m":t>=Ci?Math.round(t/Ci)+"s":t+"ms"}function a_(t){return vs(t,xi,"day")||vs(t,Si,"hour")||vs(t,wi,"minute")||vs(t,Ci,"second")||t+" ms"}function vs(t,e,o){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=i,e.disable=b,e.enable=m,e.enabled=h,e.humanize=i_,e.instances=[],e.names=[],e.skips=[],e.formatters={};function o(a){var c=0,n;for(n in a)c=(c<<5)-c+a.charCodeAt(n),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function n(){if(!!n.enabled){var s=n,r=+new Date,u=r-(c||r);s.diff=u,s.prev=c,s.curr=r,c=r;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(_,y){if(_==="%%")return _;g++;var C=e.formatters[y];if(typeof C=="function"){var S=d[g];_=C.call(s,S),d.splice(g,1),g--}return _}),e.formatArgs.call(s,d);var v=n.log||e.log||console.log.bind(console);v.apply(s,d)}}return n.namespace=a,n.enabled=e.enabled(a),n.useColors=e.useColors(),n.color=o(a),n.destroy=p,typeof e.init=="function"&&e.init(n),e.instances.push(n),n}function p(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function m(a){e.save(a),e.names=[],e.skips=[];var c,n=(typeof a=="string"?a:"").split(/[\s,]+/),s=n.length;for(c=0;c<s;c++)!n[c]||(a=n[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var r=e.instances[c];r.enabled=e.enabled(r.namespace)}}function b(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,n;for(c=0,n=e.skips.length;c<n;c++)if(e.skips[c].test(a))return!1;for(c=0,n=e.names.length;c<n;c++)if(e.names[c].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}})(qa,qa.exports);(function(t,e){e=t.exports=qa.exports,e.log=p,e.formatArgs=f,e.save=m,e.load=b,e.useColors=o,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(i){try{return JSON.stringify(i)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(i){var a=this.useColors;if(i[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+i[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;i.splice(1,0,c,"color: inherit");var n=0,s=0;i[0].replace(/%[a-zA-Z%]/g,function(r){r!=="%%"&&(n++,r==="%c"&&(s=n))}),i.splice(s,0,c)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function m(i){try{i==null?e.storage.removeItem("debug"):e.storage.debug=i}catch{}}function b(){var i;try{i=e.storage.debug}catch{}return!i&&typeof process!="undefined"&&"env"in process&&(i={}.DEBUG),i}e.enable(b());function h(){try{return window.localStorage}catch{}}})(Va,Va.exports);var Jr={exports:{}};(function(t){t.exports=e;function e(f){if(f)return o(f)}function o(f){for(var p in e.prototype)f[p]=e.prototype[p];return f}e.prototype.on=e.prototype.addEventListener=function(f,p){return this._callbacks=this._callbacks||{},(this._callbacks["$"+f]=this._callbacks["$"+f]||[]).push(p),this},e.prototype.once=function(f,p){function m(){this.off(f,m),p.apply(this,arguments)}return m.fn=p,this.on(f,m),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(f,p){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var m=this._callbacks["$"+f];if(!m)return this;if(arguments.length==1)return delete this._callbacks["$"+f],this;for(var b,h=0;h<m.length;h++)if(b=m[h],b===p||b.fn===p){m.splice(h,1);break}return m.length===0&&delete this._callbacks["$"+f],this},e.prototype.emit=function(f){this._callbacks=this._callbacks||{};for(var p=new Array(arguments.length-1),m=this._callbacks["$"+f],b=1;b<arguments.length;b++)p[b-1]=arguments[b];if(m){m=m.slice(0);for(var b=0,h=m.length;b<h;++b)m[b].apply(this,p)}return this},e.prototype.listeners=function(f){return this._callbacks=this._callbacks||{},this._callbacks["$"+f]||[]},e.prototype.hasListeners=function(f){return!!this.listeners(f).length}})(Jr);var io={},l_={}.toString,ph=Array.isArray||function(t){return l_.call(t)=="[object Array]"},mh=h_,c_=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",u_=typeof ArrayBuffer=="function",f_=function(t){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function h_(t){return c_&&Buffer.isBuffer(t)||u_&&(t instanceof ArrayBuffer||f_(t))}var Ul=ph,vh=mh,yh=Object.prototype.toString,d_=typeof Blob=="function"||typeof Blob!="undefined"&&yh.call(Blob)==="[object BlobConstructor]",g_=typeof File=="function"||typeof File!="undefined"&&yh.call(File)==="[object FileConstructor]";io.deconstructPacket=function(t){var e=[],o=t.data,f=t;return f.data=Ka(o,e),f.attachments=e.length,{packet:f,buffers:e}};function Ka(t,e){if(!t)return t;if(vh(t)){var o={_placeholder:!0,num:e.length};return e.push(t),o}else if(Ul(t)){for(var f=new Array(t.length),p=0;p<t.length;p++)f[p]=Ka(t[p],e);return f}else if(typeof t=="object"&&!(t instanceof Date)){var f={};for(var m in t)f[m]=Ka(t[m],e);return f}return t}io.reconstructPacket=function(t,e){return t.data=Ja(t.data,e),t.attachments=void 0,t};function Ja(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Ul(t))for(var o=0;o<t.length;o++)t[o]=Ja(t[o],e);else if(typeof t=="object")for(var f in t)t[f]=Ja(t[f],e);return t}io.removeBlobs=function(t,e){function o(m,b,h){if(!m)return m;if(d_&&m instanceof Blob||g_&&m instanceof File){f++;var i=new FileReader;i.onload=function(){h?h[b]=this.result:p=this.result,--f||e(p)},i.readAsArrayBuffer(m)}else if(Ul(m))for(var a=0;a<m.length;a++)o(m[a],a,m);else if(typeof m=="object"&&!vh(m))for(var c in m)o(m[c],c,m)}var f=0,p=t;o(p),f||e(p)};(function(t){var e=Va.exports("socket.io-parser"),o=Jr.exports,f=io,p=ph,m=mh;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=b,t.Decoder=n;function b(){}var h=t.ERROR+'"encode error"';b.prototype.encode=function(l,g){if(e("encoding packet %j",l),t.BINARY_EVENT===l.type||t.BINARY_ACK===l.type)c(l,g);else{var v=i(l);g([v])}};function i(l){var g=""+l.type;if((t.BINARY_EVENT===l.type||t.BINARY_ACK===l.type)&&(g+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(g+=l.nsp+","),l.id!=null&&(g+=l.id),l.data!=null){var v=a(l.data);if(v!==!1)g+=v;else return h}return e("encoded %j as %s",l,g),g}function a(l){try{return JSON.stringify(l)}catch{return!1}}function c(l,g){function v(_){var y=f.deconstructPacket(_),C=i(y.packet),S=y.buffers;S.unshift(C),g(S)}f.removeBlobs(l,v)}function n(){this.reconstructor=null}o(n.prototype),n.prototype.add=function(l){var g;if(typeof l=="string")g=s(l),t.BINARY_EVENT===g.type||t.BINARY_ACK===g.type?(this.reconstructor=new u(g),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",g)):this.emit("decoded",g);else if(m(l)||l.base64)if(this.reconstructor)g=this.reconstructor.takeBinaryData(l),g&&(this.reconstructor=null,this.emit("decoded",g));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+l)};function s(l){var g=0,v={type:Number(l.charAt(0))};if(t.types[v.type]==null)return d("unknown packet type "+v.type);if(t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type){for(var _=g+1;l.charAt(++g)!=="-"&&g!=l.length;);var y=l.substring(_,g);if(y!=Number(y)||l.charAt(g)!=="-")throw new Error("Illegal attachments");v.attachments=Number(y)}if(l.charAt(g+1)==="/"){for(var _=g+1;++g;){var C=l.charAt(g);if(C===","||g===l.length)break}v.nsp=l.substring(_,g)}else v.nsp="/";var S=l.charAt(g+1);if(S!==""&&Number(S)==S){for(var _=g+1;++g;){var C=l.charAt(g);if(C==null||Number(C)!=C){--g;break}if(g===l.length)break}v.id=Number(l.substring(_,g+1))}if(l.charAt(++g)){var x=r(l.substr(g)),T=x!==!1&&(v.type===t.ERROR||p(x));if(T)v.data=x;else return d("invalid payload")}return e("decoded %s as %j",l,v),v}function r(l){try{return JSON.parse(l)}catch{return!1}}n.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function u(l){this.reconPack=l,this.buffers=[]}u.prototype.takeBinaryData=function(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){var g=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),g}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function d(l){return{type:t.ERROR,data:"parser error: "+l}}})(no);var Hl={exports:{}},so={},Qa={exports:{}};try{Qa.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{Qa.exports=!1}var Wl=function(){return typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")()}(),p_=Qa.exports,m_=Wl,zl=function(t){var e=t.xdomain,o=t.xscheme,f=t.enablesXDR;try{if(typeof XMLHttpRequest!="undefined"&&(!e||p_))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest!="undefined"&&!o&&f)return new XDomainRequest}catch{}if(!e)try{return new m_[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Xl={exports:{}},Qr={},v_=Object.keys||function(e){var o=[],f=Object.prototype.hasOwnProperty;for(var p in e)f.call(e,p)&&o.push(p);return o},y_={}.toString,__=Array.isArray||function(t){return y_.call(t)=="[object Array]"},b_=__,_h=Object.prototype.toString,C_=typeof Blob=="function"||typeof Blob!="undefined"&&_h.call(Blob)==="[object BlobConstructor]",w_=typeof File=="function"||typeof File!="undefined"&&_h.call(File)==="[object FileConstructor]",bh=Es;function Es(t){if(!t||typeof t!="object")return!1;if(b_(t)){for(var e=0,o=t.length;e<o;e++)if(Es(t[e]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(t)||typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||C_&&t instanceof Blob||w_&&t instanceof File)return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Es(t.toJSON(),!0);for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f)&&Es(t[f]))return!0;return!1}var S_=function(t,e,o){var f=t.byteLength;if(e=e||0,o=o||f,t.slice)return t.slice(e,o);if(e<0&&(e+=f),o<0&&(o+=f),o>f&&(o=f),e>=f||e>=o||f===0)return new ArrayBuffer(0);for(var p=new Uint8Array(t),m=new Uint8Array(o-e),b=e,h=0;b<o;b++,h++)m[h]=p[b];return m.buffer},x_=T_;function T_(t,e,o){var f=!1;return o=o||E_,p.count=t,t===0?e():p;function p(m,b){if(p.count<=0)throw new Error("after called too many times");--p.count,m?(f=!0,e(m),e=o):p.count===0&&!f&&e(null,b)}}function E_(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var _r=String.fromCharCode;function Ch(t){for(var e=[],o=0,f=t.length,p,m;o<f;)p=t.charCodeAt(o++),p>=55296&&p<=56319&&o<f?(m=t.charCodeAt(o++),(m&64512)==56320?e.push(((p&1023)<<10)+(m&1023)+65536):(e.push(p),o--)):e.push(p);return e}function O_(t){for(var e=t.length,o=-1,f,p="";++o<e;)f=t[o],f>65535&&(f-=65536,p+=_r(f>>>10&1023|55296),f=56320|f&1023),p+=_r(f);return p}function wh(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Sa(t,e){return _r(t>>e&63|128)}function A_(t,e){if((t&4294967168)==0)return _r(t);var o="";return(t&4294965248)==0?o=_r(t>>6&31|192):(t&4294901760)==0?(wh(t,e)||(t=65533),o=_r(t>>12&15|224),o+=Sa(t,6)):(t&4292870144)==0&&(o=_r(t>>18&7|240),o+=Sa(t,12),o+=Sa(t,6)),o+=_r(t&63|128),o}function P_(t,e){e=e||{};for(var o=e.strict!==!1,f=Ch(t),p=f.length,m=-1,b,h="";++m<p;)b=f[m],h+=A_(b,o);return h}function fn(){if(wr>=Ns)throw Error("Invalid byte index");var t=js[wr]&255;if(wr++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function D_(t){var e,o,f,p,m;if(wr>Ns)throw Error("Invalid byte index");if(wr==Ns)return!1;if(e=js[wr]&255,wr++,(e&128)==0)return e;if((e&224)==192){if(o=fn(),m=(e&31)<<6|o,m>=128)return m;throw Error("Invalid continuation byte")}if((e&240)==224){if(o=fn(),f=fn(),m=(e&15)<<12|o<<6|f,m>=2048)return wh(m,t)?m:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(o=fn(),f=fn(),p=fn(),m=(e&7)<<18|o<<12|f<<6|p,m>=65536&&m<=1114111))return m;throw Error("Invalid UTF-8 detected")}var js,Ns,wr;function k_(t,e){e=e||{};var o=e.strict!==!1;js=Ch(t),Ns=js.length,wr=0;for(var f=[],p;(p=D_(o))!==!1;)f.push(p);return O_(f)}var F_={version:"2.1.2",encode:P_,decode:k_},$a={};(function(t){$a.encode=function(e){var o=new Uint8Array(e),f,p=o.length,m="";for(f=0;f<p;f+=3)m+=t[o[f]>>2],m+=t[(o[f]&3)<<4|o[f+1]>>4],m+=t[(o[f+1]&15)<<2|o[f+2]>>6],m+=t[o[f+2]&63];return p%3===2?m=m.substring(0,m.length-1)+"=":p%3===1&&(m=m.substring(0,m.length-2)+"=="),m},$a.decode=function(e){var o=e.length*.75,f=e.length,p,m=0,b,h,i,a;e[e.length-1]==="="&&(o--,e[e.length-2]==="="&&o--);var c=new ArrayBuffer(o),n=new Uint8Array(c);for(p=0;p<f;p+=4)b=t.indexOf(e[p]),h=t.indexOf(e[p+1]),i=t.indexOf(e[p+2]),a=t.indexOf(e[p+3]),n[m++]=b<<2|h>>4,n[m++]=(h&15)<<4|i>>2,n[m++]=(i&3)<<6|a&63;return c}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var Cn=typeof Cn!="undefined"?Cn:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:!1,Sh=function(){try{var t=new Blob(["hi"]);return t.size===2}catch{return!1}}(),R_=Sh&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return t.size===2}catch{return!1}}(),M_=Cn&&Cn.prototype.append&&Cn.prototype.getBlob;function xh(t){return t.map(function(e){if(e.buffer instanceof ArrayBuffer){var o=e.buffer;if(e.byteLength!==o.byteLength){var f=new Uint8Array(e.byteLength);f.set(new Uint8Array(o,e.byteOffset,e.byteLength)),o=f.buffer}return o}return e})}function Th(t,e){e=e||{};var o=new Cn;return xh(t).forEach(function(f){o.append(f)}),e.type?o.getBlob(e.type):o.getBlob()}function Eh(t,e){return new Blob(xh(t),e||{})}typeof Blob!="undefined"&&(Th.prototype=Blob.prototype,Eh.prototype=Blob.prototype);var I_=function(){return Sh?R_?Blob:Eh:M_?Th:void 0}();(function(t){var e=v_,o=bh,f=S_,p=x_,m=F_,b;typeof ArrayBuffer!="undefined"&&(b=$a);var h=typeof navigator!="undefined"&&/Android/i.test(navigator.userAgent),i=typeof navigator!="undefined"&&/PhantomJS/i.test(navigator.userAgent),a=h||i;t.protocol=3;var c=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},n=e(c),s={type:"error",data:"parser error"},r=I_;t.encodePacket=function(y,C,S,x){typeof C=="function"&&(x=C,C=!1),typeof S=="function"&&(x=S,S=null);var T=y.data===void 0?void 0:y.data.buffer||y.data;if(typeof ArrayBuffer!="undefined"&&T instanceof ArrayBuffer)return d(y,C,x);if(typeof r!="undefined"&&T instanceof r)return g(y,C,x);if(T&&T.base64)return u(y,x);var D=c[y.type];return y.data!==void 0&&(D+=S?m.encode(String(y.data),{strict:!1}):String(y.data)),x(""+D)};function u(y,C){var S="b"+t.packets[y.type]+y.data.data;return C(S)}function d(y,C,S){if(!C)return t.encodeBase64Packet(y,S);var x=y.data,T=new Uint8Array(x),D=new Uint8Array(1+x.byteLength);D[0]=c[y.type];for(var j=0;j<T.length;j++)D[j+1]=T[j];return S(D.buffer)}function l(y,C,S){if(!C)return t.encodeBase64Packet(y,S);var x=new FileReader;return x.onload=function(){t.encodePacket({type:y.type,data:x.result},C,!0,S)},x.readAsArrayBuffer(y.data)}function g(y,C,S){if(!C)return t.encodeBase64Packet(y,S);if(a)return l(y,C,S);var x=new Uint8Array(1);x[0]=c[y.type];var T=new r([x.buffer,y.data]);return S(T)}t.encodeBase64Packet=function(y,C){var S="b"+t.packets[y.type];if(typeof r!="undefined"&&y.data instanceof r){var x=new FileReader;return x.onload=function(){var H=x.result.split(",")[1];C(S+H)},x.readAsDataURL(y.data)}var T;try{T=String.fromCharCode.apply(null,new Uint8Array(y.data))}catch{for(var D=new Uint8Array(y.data),j=new Array(D.length),U=0;U<D.length;U++)j[U]=D[U];T=String.fromCharCode.apply(null,j)}return S+=btoa(T),C(S)},t.decodePacket=function(y,C,S){if(y===void 0)return s;if(typeof y=="string"){if(y.charAt(0)==="b")return t.decodeBase64Packet(y.substr(1),C);if(S&&(y=v(y),y===!1))return s;var T=y.charAt(0);return Number(T)!=T||!n[T]?s:y.length>1?{type:n[T],data:y.substring(1)}:{type:n[T]}}var x=new Uint8Array(y),T=x[0],D=f(y,1);return r&&C==="blob"&&(D=new r([D])),{type:n[T],data:D}};function v(y){try{y=m.decode(y,{strict:!1})}catch{return!1}return y}t.decodeBase64Packet=function(y,C){var S=n[y.charAt(0)];if(!b)return{type:S,data:{base64:!0,data:y.substr(1)}};var x=b.decode(y.substr(1));return C==="blob"&&r&&(x=new r([x])),{type:S,data:x}},t.encodePayload=function(y,C,S){typeof C=="function"&&(S=C,C=null);var x=o(y);if(C&&x)return r&&!a?t.encodePayloadAsBlob(y,S):t.encodePayloadAsArrayBuffer(y,S);if(!y.length)return S("0:");function T(j){return j.length+":"+j}function D(j,U){t.encodePacket(j,x?C:!1,!1,function(H){U(null,T(H))})}_(y,D,function(j,U){return S(U.join(""))})};function _(y,C,S){for(var x=new Array(y.length),T=p(y.length,S),D=function(U,H,Q){C(H,function(K,re){x[U]=re,Q(K,x)})},j=0;j<y.length;j++)D(j,y[j],T)}t.decodePayload=function(y,C,S){if(typeof y!="string")return t.decodePayloadAsBinary(y,C,S);typeof C=="function"&&(S=C,C=null);var x;if(y==="")return S(s,0,1);for(var T="",D,j,U=0,H=y.length;U<H;U++){var Q=y.charAt(U);if(Q!==":"){T+=Q;continue}if(T===""||T!=(D=Number(T))||(j=y.substr(U+1,D),T!=j.length))return S(s,0,1);if(j.length){if(x=t.decodePacket(j,C,!1),s.type===x.type&&s.data===x.data)return S(s,0,1);var K=S(x,U+D,H);if(K===!1)return}U+=D,T=""}if(T!=="")return S(s,0,1)},t.encodePayloadAsArrayBuffer=function(y,C){if(!y.length)return C(new ArrayBuffer(0));function S(x,T){t.encodePacket(x,!0,!0,function(D){return T(null,D)})}_(y,S,function(x,T){var D=T.reduce(function(H,Q){var K;return typeof Q=="string"?K=Q.length:K=Q.byteLength,H+K.toString().length+K+2},0),j=new Uint8Array(D),U=0;return T.forEach(function(H){var Q=typeof H=="string",K=H;if(Q){for(var oe=new Uint8Array(H.length),re=0;re<H.length;re++)oe[re]=H.charCodeAt(re);K=oe.buffer}Q?j[U++]=0:j[U++]=1;for(var se=K.byteLength.toString(),re=0;re<se.length;re++)j[U++]=parseInt(se[re]);j[U++]=255;for(var oe=new Uint8Array(K),re=0;re<oe.length;re++)j[U++]=oe[re]}),C(j.buffer)})},t.encodePayloadAsBlob=function(y,C){function S(x,T){t.encodePacket(x,!0,!0,function(D){var j=new Uint8Array(1);if(j[0]=1,typeof D=="string"){for(var U=new Uint8Array(D.length),H=0;H<D.length;H++)U[H]=D.charCodeAt(H);D=U.buffer,j[0]=0}for(var Q=D instanceof ArrayBuffer?D.byteLength:D.size,K=Q.toString(),re=new Uint8Array(K.length+1),H=0;H<K.length;H++)re[H]=parseInt(K[H]);if(re[K.length]=255,r){var se=new r([j.buffer,re.buffer,D]);T(null,se)}})}_(y,S,function(x,T){return C(new r(T))})},t.decodePayloadAsBinary=function(y,C,S){typeof C=="function"&&(S=C,C=null);for(var x=y,T=[];x.byteLength>0;){for(var D=new Uint8Array(x),j=D[0]===0,U="",H=1;D[H]!==255;H++){if(U.length>310)return S(s,0,1);U+=D[H]}x=f(x,2+U.length),U=parseInt(U);var Q=f(x,0,U);if(j)try{Q=String.fromCharCode.apply(null,new Uint8Array(Q))}catch{var K=new Uint8Array(Q);Q="";for(var H=0;H<K.length;H++)Q+=String.fromCharCode(K[H])}T.push(Q),x=f(x,U)}var re=T.length;T.forEach(function(se,oe){S(t.decodePacket(se,C,!0),oe,re)})}})(Qr);var L_=Qr,B_=Jr.exports,Gl=Vt;function Vt(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}B_(Vt.prototype);Vt.prototype.onError=function(t,e){var o=new Error(t);return o.type="TransportError",o.description=e,this.emit("error",o),this};Vt.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this};Vt.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this};Vt.prototype.send=function(t){if(this.readyState==="open")this.write(t);else throw new Error("Transport not open")};Vt.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")};Vt.prototype.onData=function(t){var e=L_.decodePacket(t,this.socket.binaryType);this.onPacket(e)};Vt.prototype.onPacket=function(t){this.emit("packet",t)};Vt.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var Bn={};Bn.encode=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length&&(e+="&"),e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e};Bn.decode=function(t){for(var e={},o=t.split("&"),f=0,p=o.length;f<p;f++){var m=o[f].split("=");e[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return e};var oo=function(t,e){var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t},Oh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Us=64,Ah={},lu=0,Sr=0,cu;function Za(t){var e="";do e=Oh[t%Us]+e,t=Math.floor(t/Us);while(t>0);return e}function j_(t){var e=0;for(Sr=0;Sr<t.length;Sr++)e=e*Us+Ah[t.charAt(Sr)];return e}function Yl(){var t=Za(+new Date);return t!==cu?(lu=0,cu=t):t+"."+Za(lu++)}for(;Sr<Us;Sr++)Ah[Oh[Sr]]=Sr;Yl.encode=Za;Yl.decode=j_;var Ph=Yl,Pn={exports:{}},el={exports:{}},Ti=1e3,Ei=Ti*60,Oi=Ei*60,Ai=Oi*24,N_=Ai*365.25,U_=function(t,e){e=e||{};var o=typeof t;if(o==="string"&&t.length>0)return H_(t);if(o==="number"&&isNaN(t)===!1)return e.long?z_(t):W_(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function H_(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var o=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return o*N_;case"days":case"day":case"d":return o*Ai;case"hours":case"hour":case"hrs":case"hr":case"h":return o*Oi;case"minutes":case"minute":case"mins":case"min":case"m":return o*Ei;case"seconds":case"second":case"secs":case"sec":case"s":return o*Ti;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function W_(t){return t>=Ai?Math.round(t/Ai)+"d":t>=Oi?Math.round(t/Oi)+"h":t>=Ei?Math.round(t/Ei)+"m":t>=Ti?Math.round(t/Ti)+"s":t+"ms"}function z_(t){return ys(t,Ai,"day")||ys(t,Oi,"hour")||ys(t,Ei,"minute")||ys(t,Ti,"second")||t+" ms"}function ys(t,e,o){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=i,e.disable=b,e.enable=m,e.enabled=h,e.humanize=U_,e.instances=[],e.names=[],e.skips=[],e.formatters={};function o(a){var c=0,n;for(n in a)c=(c<<5)-c+a.charCodeAt(n),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function n(){if(!!n.enabled){var s=n,r=+new Date,u=r-(c||r);s.diff=u,s.prev=c,s.curr=r,c=r;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(_,y){if(_==="%%")return _;g++;var C=e.formatters[y];if(typeof C=="function"){var S=d[g];_=C.call(s,S),d.splice(g,1),g--}return _}),e.formatArgs.call(s,d);var v=n.log||e.log||console.log.bind(console);v.apply(s,d)}}return n.namespace=a,n.enabled=e.enabled(a),n.useColors=e.useColors(),n.color=o(a),n.destroy=p,typeof e.init=="function"&&e.init(n),e.instances.push(n),n}function p(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function m(a){e.save(a),e.names=[],e.skips=[];var c,n=(typeof a=="string"?a:"").split(/[\s,]+/),s=n.length;for(c=0;c<s;c++)!n[c]||(a=n[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var r=e.instances[c];r.enabled=e.enabled(r.namespace)}}function b(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,n;for(c=0,n=e.skips.length;c<n;c++)if(e.skips[c].test(a))return!1;for(c=0,n=e.names.length;c<n;c++)if(e.names[c].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}})(el,el.exports);(function(t,e){e=t.exports=el.exports,e.log=p,e.formatArgs=f,e.save=m,e.load=b,e.useColors=o,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(i){try{return JSON.stringify(i)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(i){var a=this.useColors;if(i[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+i[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;i.splice(1,0,c,"color: inherit");var n=0,s=0;i[0].replace(/%[a-zA-Z%]/g,function(r){r!=="%%"&&(n++,r==="%c"&&(s=n))}),i.splice(s,0,c)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function m(i){try{i==null?e.storage.removeItem("debug"):e.storage.debug=i}catch{}}function b(){var i;try{i=e.storage.debug}catch{}return!i&&typeof process!="undefined"&&"env"in process&&(i={}.DEBUG),i}e.enable(b());function h(){try{return window.localStorage}catch{}}})(Pn,Pn.exports);var Dh=Gl,X_=Bn,kh=Qr,G_=oo,Y_=Ph,kt=Pn.exports("engine.io-client:polling"),Fh=qt,V_=function(){var t=zl,e=new t({xdomain:!1});return e.responseType!=null}();function qt(t){var e=t&&t.forceBase64;(!V_||e)&&(this.supportsBinary=!1),Dh.call(this,t)}G_(qt,Dh);qt.prototype.name="polling";qt.prototype.doOpen=function(){this.poll()};qt.prototype.pause=function(t){var e=this;this.readyState="pausing";function o(){kt("paused"),e.readyState="paused",t()}if(this.polling||!this.writable){var f=0;this.polling&&(kt("we are currently polling - waiting to pause"),f++,this.once("pollComplete",function(){kt("pre-pause polling complete"),--f||o()})),this.writable||(kt("we are currently writing - waiting to pause"),f++,this.once("drain",function(){kt("pre-pause writing complete"),--f||o()}))}else o()};qt.prototype.poll=function(){kt("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};qt.prototype.onData=function(t){var e=this;kt("polling got data %s",t);var o=function(f,p,m){if(e.readyState==="opening"&&f.type==="open"&&e.onOpen(),f.type==="close")return e.onClose(),!1;e.onPacket(f)};kh.decodePayload(t,this.socket.binaryType,o),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():kt('ignoring poll - transport state "%s"',this.readyState))};qt.prototype.doClose=function(){var t=this;function e(){kt("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(kt("transport open - closing"),e()):(kt("transport not open - deferring close"),this.once("open",e))};qt.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};kh.encodePayload(t,this.supportsBinary,function(f){e.doWrite(f,o)})};qt.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",o="";this.timestampRequests!==!1&&(t[this.timestampParam]=Y_()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=X_.encode(t),this.port&&(e==="https"&&Number(this.port)!==443||e==="http"&&Number(this.port)!==80)&&(o=":"+this.port),t.length&&(t="?"+t);var f=this.hostname.indexOf(":")!==-1;return e+"://"+(f?"["+this.hostname+"]":this.hostname)+o+this.path+t};var q_=zl,Rh=Fh,K_=Jr.exports,J_=oo,tl=Pn.exports("engine.io-client:polling-xhr"),Q_=Wl;Xl.exports=jn;Xl.exports.Request=qe;function uu(){}function jn(t){if(Rh.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location!="undefined"){var e=location.protocol==="https:",o=location.port;o||(o=e?443:80),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||o!==t.port,this.xs=t.secure!==e}}J_(jn,Rh);jn.prototype.supportsBinary=!0;jn.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new qe(t)};jn.prototype.doWrite=function(t,e){var o=typeof t!="string"&&t!==void 0,f=this.request({method:"POST",data:t,isBinary:o}),p=this;f.on("success",e),f.on("error",function(m){p.onError("xhr post error",m)}),this.sendXhr=f};jn.prototype.doPoll=function(){tl("xhr poll");var t=this.request(),e=this;t.on("data",function(o){e.onData(o)}),t.on("error",function(o){e.onError("xhr poll error",o)}),this.pollXhr=t};function qe(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}K_(qe.prototype);qe.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new q_(t),o=this;try{tl("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var f in this.extraHeaders)this.extraHeaders.hasOwnProperty(f)&&e.setRequestHeader(f,this.extraHeaders[f])}}catch{}if(this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){o.onLoad()},e.onerror=function(){o.onError(e.responseText)}):e.onreadystatechange=function(){if(e.readyState===2)try{var p=e.getResponseHeader("Content-Type");(o.supportsBinary&&p==="application/octet-stream"||p==="application/octet-stream; charset=UTF-8")&&(e.responseType="arraybuffer")}catch{}e.readyState===4&&(e.status===200||e.status===1223?o.onLoad():setTimeout(function(){o.onError(typeof e.status=="number"?e.status:0)},0))},tl("xhr data %s",this.data),e.send(this.data)}catch(p){setTimeout(function(){o.onError(p)},0);return}typeof document!="undefined"&&(this.index=qe.requestsCount++,qe.requests[this.index]=this)};qe.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};qe.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};qe.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};qe.prototype.cleanup=function(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=uu:this.xhr.onreadystatechange=uu,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete qe.requests[this.index],this.xhr=null}};qe.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch{}e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(o){this.onError(o)}t!=null&&this.onData(t)};qe.prototype.hasXDR=function(){return typeof XDomainRequest!="undefined"&&!this.xs&&this.enablesXDR};qe.prototype.abort=function(){this.cleanup()};qe.requestsCount=0;qe.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",fu);else if(typeof addEventListener=="function"){var $_="onpagehide"in Q_?"pagehide":"unload";addEventListener($_,fu,!1)}}function fu(){for(var t in qe.requests)qe.requests.hasOwnProperty(t)&&qe.requests[t].abort()}var Vl=Fh,Z_=oo,hu=Wl,eb=Nn,tb=/\n/g,rb=/\\n/g,_s;function nb(){}function Nn(t){Vl.call(this,t),this.query=this.query||{},_s||(_s=hu.___eio=hu.___eio||[]),this.index=_s.length;var e=this;_s.push(function(o){e.onData(o)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=nb)},!1)}Z_(Nn,Vl);Nn.prototype.supportsBinary=!1;Nn.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Vl.prototype.doClose.call(this)};Nn.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(p){t.onError("jsonp poll error",p)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e;var f=typeof navigator!="undefined"&&/gecko/i.test(navigator.userAgent);f&&setTimeout(function(){var p=document.createElement("iframe");document.body.appendChild(p),document.body.removeChild(p)},100)};Nn.prototype.doWrite=function(t,e){var o=this;if(!this.form){var f=document.createElement("form"),p=document.createElement("textarea"),m=this.iframeId="eio_iframe_"+this.index,b;f.className="socketio",f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.target=m,f.method="POST",f.setAttribute("accept-charset","utf-8"),p.name="d",f.appendChild(p),document.body.appendChild(f),this.form=f,this.area=p}this.form.action=this.uri();function h(){i(),e()}function i(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(c){o.onError("jsonp polling iframe removal error",c)}try{var a='<iframe src="javascript:0" name="'+o.iframeId+'">';b=document.createElement(a)}catch{b=document.createElement("iframe"),b.name=o.iframeId,b.src="javascript:0"}b.id=o.iframeId,o.form.appendChild(b),o.iframe=b}i(),t=t.replace(rb,`\\
`),this.area.value=t.replace(tb,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){o.iframe.readyState==="complete"&&h()}:this.iframe.onload=h};var ql=Gl,ib=Qr,sb=Bn,ob=oo,ab=Ph,lb=Pn.exports("engine.io-client:websocket"),Hs,Kl;typeof WebSocket!="undefined"?Hs=WebSocket:typeof self!="undefined"&&(Hs=self.WebSocket||self.MozWebSocket);if(typeof window=="undefined")try{Kl=require("ws")}catch{}var wn=Hs||Kl,cb=At;function At(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=Hs&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(wn=Kl),ql.call(this,t)}ob(At,ql);At.prototype.name="websocket";At.prototype.supportsBinary=!0;At.prototype.doOpen=function(){if(!!this.check()){var t=this.uri(),e=this.protocols,o={};this.isReactNative||(o.agent=this.agent,o.perMessageDeflate=this.perMessageDeflate,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new wn(t,e):new wn(t):new wn(t,e,o)}catch(f){return this.emit("error",f)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};At.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}};At.prototype.write=function(t){var e=this;this.writable=!1;for(var o=t.length,f=0,p=o;f<p;f++)(function(b){ib.encodePacket(b,e.supportsBinary,function(h){if(!e.usingBrowserWebSocket){var i={};if(b.options&&(i.compress=b.options.compress),e.perMessageDeflate){var a=typeof h=="string"?Buffer.byteLength(h):h.length;a<e.perMessageDeflate.threshold&&(i.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(h):e.ws.send(h,i)}catch{lb("websocket closed before onclose event")}--o||m()})})(t[f]);function m(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}};At.prototype.onClose=function(){ql.prototype.onClose.call(this)};At.prototype.doClose=function(){typeof this.ws!="undefined"&&this.ws.close()};At.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",o="";this.port&&(e==="wss"&&Number(this.port)!==443||e==="ws"&&Number(this.port)!==80)&&(o=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=ab()),this.supportsBinary||(t.b64=1),t=sb.encode(t),t.length&&(t="?"+t);var f=this.hostname.indexOf(":")!==-1;return e+"://"+(f?"["+this.hostname+"]":this.hostname)+o+this.path+t};At.prototype.check=function(){return!!wn&&!("__initialize"in wn&&this.name===At.prototype.name)};var ub=zl,fb=Xl.exports,hb=eb,db=cb;so.polling=gb;so.websocket=db;function gb(t){var e,o=!1,f=!1,p=t.jsonp!==!1;if(typeof location!="undefined"){var m=location.protocol==="https:",b=location.port;b||(b=m?443:80),o=t.hostname!==location.hostname||b!==t.port,f=t.secure!==m}if(t.xdomain=o,t.xscheme=f,e=new ub(t),"open"in e&&!t.forceJSONP)return new fb(t);if(!p)throw new Error("JSONP disabled");return new hb(t)}var pb=[].indexOf,Mh=function(t,e){if(pb)return t.indexOf(e);for(var o=0;o<t.length;++o)if(t[o]===e)return o;return-1},mb=so,vb=Jr.exports,We=Pn.exports("engine.io-client:socket"),yb=Mh,Ih=Qr,du=gh,_b=Bn,bb=we;function we(t,e){if(!(this instanceof we))return new we(t,e);e=e||{},t&&typeof t=="object"&&(e=t,t=null),t?(t=du(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=du(e.host).host),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?443:80),this.query=e.query||{},typeof this.query=="string"&&(this.query=_b.decode(this.query)),this.upgrade=e.upgrade!==!1,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=e.jsonp!==!1,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=e.withCredentials!==!1,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=e.perMessageDeflate!==!1?e.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=e.rejectUnauthorized===void 0?!0:e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self=="undefined"||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}we.priorWebsocketSuccess=!1;vb(we.prototype);we.protocol=Ih.protocol;we.Socket=we;we.Transport=Gl;we.transports=so;we.parser=Qr;we.prototype.createTransport=function(t){We('creating transport "%s"',t);var e=Cb(this.query);e.EIO=Ih.protocol,e.transport=t;var o=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var f=new mb[t]({query:e,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,withCredentials:o.withCredentials||this.withCredentials,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0,isReactNative:this.isReactNative});return f};function Cb(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}we.prototype.open=function(){var t;if(this.rememberUpgrade&&we.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var e=this;setTimeout(function(){e.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};we.prototype.setTransport=function(t){We("setting transport %s",t.name);var e=this;this.transport&&(We("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(o){e.onPacket(o)}).on("error",function(o){e.onError(o)}).on("close",function(){e.onClose("transport close")})};we.prototype.probe=function(t){We('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),o=!1,f=this;we.priorWebsocketSuccess=!1;function p(){if(f.onlyBinaryUpgrades){var n=!this.supportsBinary&&f.transport.supportsBinary;o=o||n}o||(We('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(s){if(!o)if(s.type==="pong"&&s.data==="probe"){if(We('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",e),!e)return;we.priorWebsocketSuccess=e.name==="websocket",We('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){o||f.readyState!=="closed"&&(We("changing transport and sending upgrade packet"),c(),f.setTransport(e),e.send([{type:"upgrade"}]),f.emit("upgrade",e),e=null,f.upgrading=!1,f.flush())})}else{We('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=e.name,f.emit("upgradeError",r)}}))}function m(){o||(o=!0,c(),e.close(),e=null)}function b(n){var s=new Error("probe error: "+n);s.transport=e.name,m(),We('probe transport "%s" failed because of error: %s',t,n),f.emit("upgradeError",s)}function h(){b("transport closed")}function i(){b("socket closed")}function a(n){e&&n.name!==e.name&&(We('"%s" works - aborting "%s"',n.name,e.name),m())}function c(){e.removeListener("open",p),e.removeListener("error",b),e.removeListener("close",h),f.removeListener("close",i),f.removeListener("upgrading",a)}e.once("open",p),e.once("error",b),e.once("close",h),this.once("close",i),this.once("upgrading",a),e.open()};we.prototype.onOpen=function(){if(We("socket open"),this.readyState="open",we.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){We("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}};we.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(We('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else We('packet received with socket readyState "%s"',this.readyState)};we.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};we.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){e.readyState!=="closed"&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)};we.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){We("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};we.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};we.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};we.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(We("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};we.prototype.write=we.prototype.send=function(t,e,o){return this.sendPacket("message",t,e,o),this};we.prototype.sendPacket=function(t,e,o,f){if(typeof e=="function"&&(f=e,e=void 0),typeof o=="function"&&(f=o,o=null),!(this.readyState==="closing"||this.readyState==="closed")){o=o||{},o.compress=o.compress!==!1;var p={type:t,data:e,options:o};this.emit("packetCreate",p),this.writeBuffer.push(p),f&&this.once("flush",f),this.flush()}};we.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?f():e()}):this.upgrading?f():e()}function e(){t.onClose("forced close"),We("socket closing - telling transport to close"),t.transport.close()}function o(){t.removeListener("upgrade",o),t.removeListener("upgradeError",o),e()}function f(){t.once("upgrade",o),t.once("upgradeError",o)}return this};we.prototype.onError=function(t){We("socket error %j",t),we.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};we.prototype.onClose=function(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){We('socket close with reason: "%s"',t);var o=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),o.writeBuffer=[],o.prevBufferLen=0}};we.prototype.filterUpgrades=function(t){for(var e=[],o=0,f=t.length;o<f;o++)~yb(this.transports,t[o])&&e.push(t[o]);return e};Hl.exports=bb;Hl.exports.parser=Qr;var Jl={exports:{}},wb=Sb;function Sb(t,e){var o=[];e=e||0;for(var f=e||0;f<t.length;f++)o[f-e]=t[f];return o}var Lh=xb;function xb(t,e,o){return t.on(e,o),{destroy:function(){t.removeListener(e,o)}}}var gu=[].slice,Bh=function(t,e){if(typeof e=="string"&&(e=t[e]),typeof e!="function")throw new Error("bind() requires a function");var o=gu.call(arguments,2);return function(){return e.apply(t,o.concat(gu.call(arguments)))}};(function(t,e){var o=no,f=Jr.exports,p=wb,m=Lh,b=Bh,h=An.exports("socket.io-client:socket"),i=Bn,a=bh;t.exports=s;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},n=f.prototype.emit;function s(r,u,d){this.io=r,this.nsp=u,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},d&&d.query&&(this.query=d.query),this.io.autoConnect&&this.open()}f(s.prototype),s.prototype.subEvents=function(){if(!this.subs){var r=this.io;this.subs=[m(r,"open",b(this,"onopen")),m(r,"packet",b(this,"onpacket")),m(r,"close",b(this,"onclose"))]}},s.prototype.open=s.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},s.prototype.send=function(){var r=p(arguments);return r.unshift("message"),this.emit.apply(this,r),this},s.prototype.emit=function(r){if(c.hasOwnProperty(r))return n.apply(this,arguments),this;var u=p(arguments),d={type:(this.flags.binary!==void 0?this.flags.binary:a(u))?o.BINARY_EVENT:o.EVENT,data:u};return d.options={},d.options.compress=!this.flags||this.flags.compress!==!1,typeof u[u.length-1]=="function"&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=u.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this},s.prototype.packet=function(r){r.nsp=this.nsp,this.io.packet(r)},s.prototype.onopen=function(){if(h("transport is open - connecting"),this.nsp!=="/")if(this.query){var r=typeof this.query=="object"?i.encode(this.query):this.query;h("sending connect packet with query %s",r),this.packet({type:o.CONNECT,query:r})}else this.packet({type:o.CONNECT})},s.prototype.onclose=function(r){h("close (%s)",r),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",r)},s.prototype.onpacket=function(r){var u=r.nsp===this.nsp,d=r.type===o.ERROR&&r.nsp==="/";if(!(!u&&!d))switch(r.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(r);break;case o.BINARY_EVENT:this.onevent(r);break;case o.ACK:this.onack(r);break;case o.BINARY_ACK:this.onack(r);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",r.data);break}},s.prototype.onevent=function(r){var u=r.data||[];h("emitting event %j",u),r.id!=null&&(h("attaching ack callback to event"),u.push(this.ack(r.id))),this.connected?n.apply(this,u):this.receiveBuffer.push(u)},s.prototype.ack=function(r){var u=this,d=!1;return function(){if(!d){d=!0;var l=p(arguments);h("sending ack %j",l),u.packet({type:a(l)?o.BINARY_ACK:o.ACK,id:r,data:l})}}},s.prototype.onack=function(r){var u=this.acks[r.id];typeof u=="function"?(h("calling ack %s with %j",r.id,r.data),u.apply(this,r.data),delete this.acks[r.id]):h("bad ack %s",r.id)},s.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},s.prototype.emitBuffered=function(){var r;for(r=0;r<this.receiveBuffer.length;r++)n.apply(this,this.receiveBuffer[r]);for(this.receiveBuffer=[],r=0;r<this.sendBuffer.length;r++)this.packet(this.sendBuffer[r]);this.sendBuffer=[]},s.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},s.prototype.destroy=function(){if(this.subs){for(var r=0;r<this.subs.length;r++)this.subs[r].destroy();this.subs=null}this.io.destroy(this)},s.prototype.close=s.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},s.prototype.compress=function(r){return this.flags.compress=r,this},s.prototype.binary=function(r){return this.flags.binary=r,this}})(Jl);var Tb=Un;function Un(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Un.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),o=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-o:t+o}return Math.min(t,this.max)|0};Un.prototype.reset=function(){this.attempts=0};Un.prototype.setMin=function(t){this.ms=t};Un.prototype.setMax=function(t){this.max=t};Un.prototype.setJitter=function(t){this.jitter=t};var Eb=Hl.exports,Ob=Jl.exports,Ab=Jr.exports,Pb=no,vr=Lh,hn=Bh,ft=An.exports("socket.io-client:manager"),jh=Mh,Db=Tb,Nh=Object.prototype.hasOwnProperty,pu=Te;function Te(t,e){if(!(this instanceof Te))return new Te(t,e);t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Db({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=e.parser||Pb;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}Te.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)Nh.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};Te.prototype.updateSocketIds=function(){for(var t in this.nsps)Nh.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))};Te.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id};Ab(Te.prototype);Te.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};Te.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};Te.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};Te.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};Te.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};Te.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};Te.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};Te.prototype.open=Te.prototype.connect=function(t,e){if(ft("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;ft("opening %s",this.uri),this.engine=Eb(this.uri,this.opts);var o=this.engine,f=this;this.readyState="opening",this.skipReconnect=!1;var p=vr(o,"open",function(){f.onopen(),t&&t()}),m=vr(o,"error",function(i){if(ft("connect_error"),f.cleanup(),f.readyState="closed",f.emitAll("connect_error",i),t){var a=new Error("Connection error");a.data=i,t(a)}else f.maybeReconnectOnOpen()});if(this._timeout!==!1){var b=this._timeout;ft("connect attempt will timeout after %d",b),b===0&&p.destroy();var h=setTimeout(function(){ft("connect attempt timed out after %d",b),p.destroy(),o.close(),o.emit("error","timeout"),f.emitAll("connect_timeout",b)},b);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(p),this.subs.push(m),this};Te.prototype.onopen=function(){ft("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(vr(t,"data",hn(this,"ondata"))),this.subs.push(vr(t,"ping",hn(this,"onping"))),this.subs.push(vr(t,"pong",hn(this,"onpong"))),this.subs.push(vr(t,"error",hn(this,"onerror"))),this.subs.push(vr(t,"close",hn(this,"onclose"))),this.subs.push(vr(this.decoder,"decoded",hn(this,"ondecoded")))};Te.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};Te.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Te.prototype.ondata=function(t){this.decoder.add(t)};Te.prototype.ondecoded=function(t){this.emit("packet",t)};Te.prototype.onerror=function(t){ft("error",t),this.emitAll("error",t)};Te.prototype.socket=function(t,e){var o=this.nsps[t];if(!o){o=new Ob(this,t,e),this.nsps[t]=o;var f=this;o.on("connecting",p),o.on("connect",function(){o.id=f.generateId(t)}),this.autoConnect&&p()}function p(){~jh(f.connecting,o)||f.connecting.push(o)}return o};Te.prototype.destroy=function(t){var e=jh(this.connecting,t);~e&&this.connecting.splice(e,1),!this.connecting.length&&this.close()};Te.prototype.packet=function(t){ft("writing packet %j",t);var e=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(o){for(var f=0;f<o.length;f++)e.engine.write(o[f],t.options);e.encoding=!1,e.processPacketQueue()}))};Te.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};Te.prototype.cleanup=function(){ft("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var o=this.subs.shift();o.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};Te.prototype.close=Te.prototype.disconnect=function(){ft("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};Te.prototype.onclose=function(t){ft("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};Te.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)ft("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();ft("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var o=setTimeout(function(){t.skipReconnect||(ft("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(f){f?(ft("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",f.data)):(ft("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(o)}})}};Te.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};(function(t,e){var o=t_,f=no,p=pu,m=An.exports("socket.io-client");t.exports=e=h;var b=e.managers={};function h(i,a){typeof i=="object"&&(a=i,i=void 0),a=a||{};var c=o(i),n=c.source,s=c.id,r=c.path,u=b[s]&&r in b[s].nsps,d=a.forceNew||a["force new connection"]||a.multiplex===!1||u,l;return d?(m("ignoring socket cache for %s",n),l=p(n,a)):(b[s]||(m("new io instance for %s",n),b[s]=p(n,a)),l=b[s]),c.query&&!a.query&&(a.query=c.query),l.socket(c.path,a)}e.protocol=f.protocol,e.connect=h,e.Manager=pu,e.Socket=Jl.exports})(Ga,Ga.exports);var Ql={},Br=Ae&&Ae.__awaiter||function(t,e,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function h(c){try{a(f.next(c))}catch(n){b(n)}}function i(c){try{a(f.throw(c))}catch(n){b(n)}}function a(c){c.done?m(c.value):p(c.value).then(h,i)}a((f=f.apply(t,e||[])).next())})};Object.defineProperty(Ql,"__esModule",{value:!0});class kb{constructor(e){this.cloudConvert=e}get(e,o=null){return Br(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs/"+e,{params:o||{}})).data.data})}wait(e){return Br(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs/"+e+"/wait")).data.data})}all(e=null){return Br(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Br(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e)).data.data})}delete(e){return Br(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete("jobs/"+e)})}subscribeEvent(e,o,f){return Br(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-job."+e,"job."+o,f)})}subscribeTaskEvent(e,o,f){return Br(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-job."+e+".tasks","task."+o,f)})}}Ql.default=kb;var $l={},Fb=typeof self=="object"?self.FormData:window.FormData,dr=Ae&&Ae.__awaiter||function(t,e,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function h(c){try{a(f.next(c))}catch(n){b(n)}}function i(c){try{a(f.throw(c))}catch(n){b(n)}}function a(c){c.done?m(c.value):p(c.value).then(h,i)}a((f=f.apply(t,e||[])).next())})},Uh=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($l,"__esModule",{value:!0});const Rb=Uh(Fb),Mb=Uh(dh);class Ib{constructor(e){this.cloudConvert=e}get(e,o=null){return dr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks/"+e,{params:o||{}})).data.data})}wait(e){return dr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks/"+e+"/wait")).data.data})}cancel(e){return dr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("tasks/"+e+"/cancel")).data.data})}all(e=null){return dr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,o=null){return dr(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,o)).data.data})}delete(e){return dr(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete("tasks/"+e)})}upload(e,o,f=null){return dr(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const p=new Rb.default;for(const b in e.result.form.parameters)p.append(b,e.result.form.parameters[b]);let m={};return f&&(m={filename:f}),p.append("file",o,m),yield Mb.default.post(e.result.form.url,p,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign({},p.getHeaders())})})}subscribeEvent(e,o,f){return dr(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-task."+e,"task."+o,f)})}}$l.default=Ib;var Zl={},xa=Ae&&Ae.__awaiter||function(t,e,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function h(c){try{a(f.next(c))}catch(n){b(n)}}function i(c){try{a(f.throw(c))}catch(n){b(n)}}function a(c){c.done?m(c.value):p(c.value).then(h,i)}a((f=f.apply(t,e||[])).next())})};Object.defineProperty(Zl,"__esModule",{value:!0});class Lb{constructor(e){this.cloudConvert=e}me(){return xa(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,o,f){return xa(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-user."+e+".jobs","job."+o,f)})}subscribeTaskEvent(e,o,f){return xa(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-user."+e+".tasks","task."+o,f)})}}Zl.default=Lb;var ec={},Bb=Ae&&Ae.__createBinding||(Object.create?function(t,e,o,f){f===void 0&&(f=o),Object.defineProperty(t,f,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,f){f===void 0&&(f=o),t[f]=e[o]}),jb=Ae&&Ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Nb=Ae&&Ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var o in t)o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)&&Bb(e,t,o);return jb(e,t),e};Object.defineProperty(ec,"__esModule",{value:!0});const Ub=Nb(ci);class Hb{constructor(e){this.cloudConvert=e}verify(e,o,f){const m=Ub.createHmac("sha256",f).update(Buffer.from(e,"utf-8")).digest("hex");return o===m}}ec.default=Hb;const Wb="cloudconvert",zb="2.2.4",Xb="MIT",Gb="Official Node.js SDK for the CloudConvert API",Yb="https://github.com/cloudconvert/cloudconvert-node",Vb="Josias Montag <josias@montag.info>",qb="built/lib/index.js",Kb="built/lib/index.d.ts",Jb="built/lib/CloudConvert.js",Qb={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},$b={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},Zb={axios:"^0.21.1",esm:"^3.2.25","form-data":"^4.0.0","socket.io-client":"^2.4.0"},eC={"@types/node":"^15.3.1","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^4.24.0","@typescript-eslint/parser":"^4.24.0",chai:"^4.3.4",eslint:"^7.26.0","eslint-config-prettier":"^8.3.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^3.4.0",mocha:"^8.4.0",nock:"^13.0.11",prettier:"^2.3.0",typescript:"^4.2.4"},tC={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."};var rC={name:Wb,version:zb,license:Xb,description:Gb,homepage:Yb,author:Vb,main:qb,types:Kb,module:Jb,repository:Qb,bugs:$b,dependencies:Zb,devDependencies:eC,scripts:tC},Hn=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($f,"__esModule",{value:!0});const nC=Hn(dh),iC=Hn(Ga.exports),sC=Hn(Ql),oC=Hn($l),aC=Hn(Zl),lC=Hn(ec),cC=rC;class uC{constructor(e,o=!1){this.apiKey=e,this.useSandbox=o,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=nC.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":"https://api.cloudconvert.com/v2/",headers:{Authorization:"Bearer "+this.apiKey,"User-Agent":"cloudconvert-node/v"+cC.version+" (https://github.com/cloudconvert/cloudconvert-node)"}})}createResources(){this.tasks=new oC.default(this),this.jobs=new sC.default(this),this.users=new aC.default(this),this.webhooks=new lC.default(this)}subscribe(e,o,f){var p,m;this.socket||(this.socket=iC.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),((p=this.subscribedChannels)===null||p===void 0?void 0:p.get(e))||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:"Bearer "+this.apiKey}}}),(m=this.subscribedChannels)===null||m===void 0||m.set(e,!0)),this.socket.on(o,function(b,h){e===b&&f(h)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var h1=$f.default=uC;function fC(t,e={}){let{on_end:o,on_start:f,on_update:p}=e,m=!1;function b(n){if(n.type==="touchmove"||n.type==="touchstart"){const s=t.getBoundingClientRect(),r=n.touches[0];return{x:r.clientX-s.x,y:r.clientY-s.y}}return{x:n.offsetX,y:n.offsetY}}function h(n){n.preventDefault(),m=!0,f&&f(b(n))}function i(n){n.preventDefault(),m=!1,o&&o()}function a(n){n.preventDefault(),m&&p&&p(b(n))}function c(n){m=!1}return t.addEventListener("touchstart",h),t.addEventListener("mousedown",h),t.addEventListener("touchend",i),t.addEventListener("mouseup",i),t.addEventListener("touchmove",a),t.addEventListener("mousemove",a),t.addEventListener("mouseleave",c),{destroy(){t.removeEventListener("touchstart",h),t.removeEventListener("mousedown",h),t.removeEventListener("touchend",i),t.removeEventListener("mouseup",i),t.removeEventListener("touchmove",a),t.removeEventListener("mousemove",a),t.removeEventListener("mouseleave",c)},update(n={}){({on_end:o,on_start:f,on_update:p}=n)}}}function hC(t,e,o=1){return new Promise((f,p)=>{const m=document.createElement("canvas"),b=m.getContext("bitmaprenderer");if(!b){p(new Error("bad dispatch to 'to_blob' (context of 'bitmaprenderer' unavailable)"));return}m.width=t.width,m.height=t.height,b.transferFromImageBitmap(t),m.toBlob(h=>{h?f(h):p(new Error("bad dispatch to 'to_blob' (failed to convert to blob)")),m.remove()},e,o)})}async function dC(t,e){const{x:o,y:f,width:p,height:m}=e,b=await createImageBitmap(t,o,f,p,m);return t=await hC(b,t.type),b.close(),t}function mu(t,e){const{left:o,right:f,top:p,bottom:m}=e?Hh(t,e):t;return{x:o,y:p,width:f-o,height:m-p}}function Hh(t,e){const{x:o,y:f}=t,{x:p,y:m}=e;return{left:Math.min(o,p),right:Math.max(o,p),top:Math.min(f,m),bottom:Math.max(f,m)}}function vu(t,e,o){const f=o.x/t.width,p=o.y/t.height;return{x:e.width*f,y:e.height*p}}function yu(t){let e=t[4].width.toFixed()+"",o,f,p=t[4].height.toFixed()+"",m,b;return{c(){o=pn(e),f=pn("x"),m=pn(p),b=pn("px")},m(h,i){Xe(h,o,i),Xe(h,f,i),Xe(h,m,i),Xe(h,b,i)},p(h,i){i&16&&e!==(e=h[4].width.toFixed()+"")&&Cc(o,e),i&16&&p!==(p=h[4].height.toFixed()+"")&&Cc(m,p)},d(h){h&&Be(o),h&&Be(f),h&&Be(m),h&&Be(b)}}}function gC(t){let e,o,f,p,m,b,h,i,a,c,n,s=t[4]&&yu(t);return{c(){e=De("div"),o=De("img"),p=rr(),m=De("div"),b=De("img"),i=rr(),a=De("div"),s&&s.c(),he(o,"class","image-crop-background svelte-3axw2x"),ns(o.src,f=t[0])||he(o,"src",f),he(b,"style",t[7]),ns(b.src,h=t[0])||he(b,"src",h),he(b,"class","svelte-3axw2x"),he(a,"class","image-crop-selection svelte-3axw2x"),he(a,"style",t[6]),he(m,"class","image-crop-preview svelte-3axw2x"),he(e,"class","image-crop svelte-3axw2x"),he(e,"data-cropping",c=t[2]?!0:void 0),he(e,"data-dragging",n=t[3]?!0:void 0),he(e,"style",t[5])},m(r,u){Xe(r,e,u),Ne(e,o),t[17](o),Ne(e,p),Ne(e,m),Ne(m,b),Ne(m,i),Ne(m,a),s&&s.m(a,null)},p(r,[u]){u&1&&!ns(o.src,f=r[0])&&he(o,"src",f),u&128&&he(b,"style",r[7]),u&1&&!ns(b.src,h=r[0])&&he(b,"src",h),r[4]?s?s.p(r,u):(s=yu(r),s.c(),s.m(a,null)):s&&(s.d(1),s=null),u&64&&he(a,"style",r[6]),u&4&&c!==(c=r[2]?!0:void 0)&&he(e,"data-cropping",c),u&8&&n!==(n=r[3]?!0:void 0)&&he(e,"data-dragging",n),u&32&&he(e,"style",r[5])},i:Fe,o:Fe,d(r){r&&Be(e),t[17](null),s&&s.d()}}}const _u={cropped:"STATE_CROPPED",default:"STATE_DEFAULT"},pC=t=>`left:${t.x}px;top:${t.y}px;width:${t.width}px;height:${t.height}px;`,bs=t=>`${t.x}px ${t.y}px`,mC=t=>{const{bottom:e,left:o,right:f,top:p}=t,m=bs({x:o,y:p}),b=bs({x:f,y:p}),h=bs({x:o,y:e}),i=bs({x:f,y:e});return`clip-path: polygon(${m}, ${h}, ${i}, ${b});`};function vC(t,e,o){let f,p,m,b;const h=Li();let i,a=!1,c=null,n=null,{src:s}=e;function r(){o(3,a=!1),!(!c||!n)&&n.x===c.x&&n.y===c.y&&(o(13,n=null),o(12,c=null))}function u(D){o(3,a=!0),o(13,n=D),o(12,c=D)}function d(D){o(12,c=D)}async function l(){const j=await(await fetch(s)).blob();return f?dC(j,C):j}function g(){return C?_t({},C):null}function v(){return f}function _(){o(12,c=null),o(13,n=null)}let y,C,S,x;function T(D){sr[D?"unshift":"push"](()=>{i=D,o(1,i)})}return t.$$set=D=>{"src"in D&&o(0,s=D.src)},t.$$.update=()=>{if(t.$$.dirty&12288&&o(2,f=!!(c&&n)),t.$$.dirty&28676){const D=y;o(14,y=f?Hh(n,c):null),(typeof D!=typeof y||(D==null?void 0:D.bottom)!==(y==null?void 0:y.bottom)||(D==null?void 0:D.left)!==(y==null?void 0:y.left)||(D==null?void 0:D.right)!==(y==null?void 0:y.right)||(D==null?void 0:D.top)!==(y==null?void 0:y.top))&&h("state",{state:y===null?_u.default:_u.cropped})}if(t.$$.dirty&16384&&o(16,p=y?mu(y):null),t.$$.dirty&16384&&o(7,m=y?mC(y):""),t.$$.dirty&65536&&o(6,b=p?pC(p):""),t.$$.dirty&12290)if(i&&c&&n){const D={width:i.width,height:i.height},j={width:i.naturalWidth,height:i.naturalHeight};o(4,C=mu(vu(D,j,n),vu(D,j,c)))}else o(4,C=null);t.$$.dirty&32770&&i&&(S&&(S.destroy(),o(15,S=null)),o(15,S=fC(i,{on_end:r,on_start:u,on_update:d}))),t.$$.dirty&2&&(i?i.addEventListener("load",()=>o(5,x=i?`max-height:${i.height}px;`:"")):o(5,x=""))},[s,i,f,a,C,x,b,m,l,g,v,_,c,n,y,S,p,T]}class d1 extends Pr{constructor(e){super();Ar(this,e,vC,gC,lr,{src:0,get_cropped_blob:8,get_cropped_bounds:9,is_cropping:10,reset:11})}get get_cropped_blob(){return this.$$.ctx[8]}get get_cropped_bounds(){return this.$$.ctx[9]}get is_cropping(){return this.$$.ctx[10]}get reset(){return this.$$.ctx[11]}}var Kt={exports:{}};(function(t){(function(e){var o=e.URL||e.webkitURL;function f(a){return o?o.createObjectURL(a):!1}function p(a){return o?o.revokeObjectURL(a):!1}function m(a,c){a&&a.slice(0,5)==="blob:"&&!(c&&c.noRevoke)&&p(a)}function b(a,c,n,s){if(!e.FileReader)return!1;var r=new FileReader;r.onload=function(){c.call(r,this.result)},n&&(r.onabort=r.onerror=function(){n.call(r,this.error)});var u=r[s||"readAsDataURL"];if(u)return u.call(r,a),r}function h(a,c){return Object.prototype.toString.call(c)==="[object "+a+"]"}function i(a,c,n){function s(r,u){var d=document.createElement("img"),l;function g(_,y){if(r===u){r&&r(_,y);return}else if(_ instanceof Error){u(_);return}y=y||{},y.image=_,r(y)}function v(_,y){y&&e.console&&console.log(y),_&&h("Blob",_)?(a=_,l=f(a)):(l=a,n&&n.crossOrigin&&(d.crossOrigin=n.crossOrigin)),d.src=l}if(d.onerror=function(_){m(l,n),u&&u.call(d,_)},d.onload=function(){m(l,n);var _={originalWidth:d.naturalWidth||d.width,originalHeight:d.naturalHeight||d.height};try{i.transform(d,n,g,a,_)}catch(y){u&&u(y)}},typeof a=="string")return i.requiresMetaData(n)?i.fetchBlob(a,v,n):v(),d;if(h("Blob",a)||h("File",a))return l=f(a),l?(d.src=l,d):b(a,function(_){d.src=_},u)}return e.Promise&&typeof c!="function"?(n=c,new Promise(s)):s(c,c)}i.requiresMetaData=function(a){return a&&a.meta},i.fetchBlob=function(a,c){c()},i.transform=function(a,c,n,s,r){n(a,r)},i.global=e,i.readFile=b,i.isInstanceOf=h,i.createObjectURL=f,i.revokeObjectURL=p,t.exports?t.exports=i:e.loadImage=i})(typeof window!="undefined"&&window||Ae)})(Kt);var Wh={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports):e(window.loadImage)})(function(e){var o=e.transform;e.createCanvas=function(f,p,m){if(m&&e.global.OffscreenCanvas)return new OffscreenCanvas(f,p);var b=document.createElement("canvas");return b.width=f,b.height=p,b},e.transform=function(f,p,m,b,h){o.call(e,e.scale(f,p,h),p,m,b,h)},e.transformCoordinates=function(){},e.getTransformedOptions=function(f,p){var m=p.aspectRatio,b,h,i,a;if(!m)return p;b={};for(h in p)Object.prototype.hasOwnProperty.call(p,h)&&(b[h]=p[h]);return b.crop=!0,i=f.naturalWidth||f.width,a=f.naturalHeight||f.height,i/a>m?(b.maxWidth=a*m,b.maxHeight=a):(b.maxWidth=i,b.maxHeight=i/m),b},e.drawImage=function(f,p,m,b,h,i,a,c,n){var s=p.getContext("2d");return n.imageSmoothingEnabled===!1?(s.msImageSmoothingEnabled=!1,s.imageSmoothingEnabled=!1):n.imageSmoothingQuality&&(s.imageSmoothingQuality=n.imageSmoothingQuality),s.drawImage(f,m,b,h,i,0,0,a,c),s},e.requiresCanvas=function(f){return f.canvas||f.crop||!!f.aspectRatio},e.scale=function(f,p,m){p=p||{},m=m||{};var b=f.getContext||e.requiresCanvas(p)&&!!e.global.HTMLCanvasElement,h=f.naturalWidth||f.width,i=f.naturalHeight||f.height,a=h,c=i,n,s,r,u,d,l,g,v,_,y,C,S;function x(){var D=Math.max((r||a)/a,(u||c)/c);D>1&&(a*=D,c*=D)}function T(){var D=Math.min((n||a)/a,(s||c)/c);D<1&&(a*=D,c*=D)}if(b&&(p=e.getTransformedOptions(f,p,m),g=p.left||0,v=p.top||0,p.sourceWidth?(d=p.sourceWidth,p.right!==void 0&&p.left===void 0&&(g=h-d-p.right)):d=h-g-(p.right||0),p.sourceHeight?(l=p.sourceHeight,p.bottom!==void 0&&p.top===void 0&&(v=i-l-p.bottom)):l=i-v-(p.bottom||0),a=d,c=l),n=p.maxWidth,s=p.maxHeight,r=p.minWidth,u=p.minHeight,b&&n&&s&&p.crop?(a=n,c=s,C=d/l-n/s,C<0?(l=s*d/n,p.top===void 0&&p.bottom===void 0&&(v=(i-l)/2)):C>0&&(d=n*l/s,p.left===void 0&&p.right===void 0&&(g=(h-d)/2))):((p.contain||p.cover)&&(r=n=n||r,u=s=s||u),p.cover?(T(),x()):(x(),T())),b){if(_=p.pixelRatio,_>1&&!(f.style.width&&Math.floor(parseFloat(f.style.width,10))===Math.floor(h/_))&&(a*=_,c*=_),e.orientationCropBug&&!f.getContext&&(g||v||d!==h||l!==i)&&(C=f,f=e.createCanvas(h,i,!0),e.drawImage(C,f,0,0,h,i,h,i,p)),y=p.downsamplingRatio,y>0&&y<1&&a<d&&c<l)for(;d*y>a;)S=e.createCanvas(d*y,l*y,!0),e.drawImage(f,S,g,v,d,l,S.width,S.height,p),g=0,v=0,d=S.width,l=S.height,f=S;return S=e.createCanvas(a,c),e.transformCoordinates(S,p,m),_>1&&(S.style.width=S.width/_+"px"),e.drawImage(f,S,g,v,d,l,a,c,p).setTransform(1,0,0,1,0,0),S}return f.width=a,f.height=c,f}})})(Wh);var ao={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports):e(window.loadImage)})(function(e){var o=e.global,f=e.transform,p=o.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),m=o.ArrayBuffer&&ArrayBuffer.prototype.slice||function(c,n){n=n||this.byteLength-c;var s=new Uint8Array(this,c,n),r=new Uint8Array(n);return r.set(s),r.buffer},b={jpeg:{65505:[],65517:[]}};function h(c,n,s,r){var u=this;function d(l,g){if(!(o.DataView&&p&&c&&c.size>=12&&c.type==="image/jpeg"))return l(r);var v=s.maxMetaDataSize||262144;e.readFile(p.call(c,0,v),function(_){var y=new DataView(_);if(y.getUint16(0)!==65496)return g(new Error("Invalid JPEG file: Missing JPEG marker."));for(var C=2,S=y.byteLength-4,x=C,T,D,j,U;C<S&&(T=y.getUint16(C),T>=65504&&T<=65519||T===65534);){if(D=y.getUint16(C+2)+2,C+D>y.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(j=b.jpeg[T],j&&!s.disableMetaDataParsers)for(U=0;U<j.length;U+=1)j[U].call(u,y,C,D,r,s);C+=D,x=C}!s.disableImageHead&&x>6&&(r.imageHead=m.call(_,0,x)),l(r)},g,"readAsArrayBuffer")||l(r)}return s=s||{},o.Promise&&typeof n!="function"?(s=n||{},r=s,new Promise(d)):(r=r||{},d(n,n))}function i(c,n,s){return!c||!n||!s?null:new Blob([s,p.call(c,n.byteLength)],{type:"image/jpeg"})}function a(c,n,s){var r={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!s&&o.Promise)return h(c,r).then(function(u){return i(c,u.imageHead,n)});h(c,function(u){s(i(c,u.imageHead,n))},r)}e.transform=function(c,n,s,r,u){e.requiresMetaData(n)?(u=u||{},h(r,function(d){d!==u&&(o.console&&console.log(d),d=u),f.call(e,c,n,s,r,d)},n,u)):f.apply(e,arguments)},e.blobSlice=p,e.bufferSlice=m,e.replaceHead=a,e.parseMetaData=h,e.metaDataParsers=b})})(ao);var yC={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports):e(window.loadImage)})(function(e){var o=e.global;o.fetch&&o.Request&&o.Response&&o.Response.prototype.blob?e.fetchBlob=function(f,p,m){function b(h){return h.blob()}if(o.Promise&&typeof p!="function")return fetch(new Request(f,p)).then(b);fetch(new Request(f,m)).then(b).then(p).catch(function(h){p(null,h)})}:o.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(e.fetchBlob=function(f,p,m){function b(h,i){m=m||{};var a=new XMLHttpRequest;a.open(m.method||"GET",f),m.headers&&Object.keys(m.headers).forEach(function(c){a.setRequestHeader(c,m.headers[c])}),a.withCredentials=m.credentials==="include",a.responseType="blob",a.onload=function(){h(a.response)},a.onerror=a.onabort=a.ontimeout=function(c){h===i?i(null,c):i(c)},a.send(m.body)}return o.Promise&&typeof p!="function"?(m=p,new Promise(b)):b(p,p)})})})(yC);var zh={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports,ao.exports):e(window.loadImage)})(function(e){function o(a){a&&(Object.defineProperty(this,"map",{value:this.ifds[a].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[a]||{}}))}o.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},o.prototype.ifds={ifd1:{name:"Thumbnail",map:o.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},o.prototype.get=function(a){return this[a]||this[this.map[a]]};function f(a,c,n){if(!!n){if(c+n>a.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return new Blob([e.bufferSlice.call(a.buffer,c,c+n)],{type:"image/jpeg"})}}var p={1:{getValue:function(a,c){return a.getUint8(c)},size:1},2:{getValue:function(a,c){return String.fromCharCode(a.getUint8(c))},size:1,ascii:!0},3:{getValue:function(a,c,n){return a.getUint16(c,n)},size:2},4:{getValue:function(a,c,n){return a.getUint32(c,n)},size:4},5:{getValue:function(a,c,n){return a.getUint32(c,n)/a.getUint32(c+4,n)},size:8},9:{getValue:function(a,c,n){return a.getInt32(c,n)},size:4},10:{getValue:function(a,c,n){return a.getInt32(c,n)/a.getInt32(c+4,n)},size:8}};p[7]=p[1];function m(a,c,n,s,r,u){var d=p[s],l,g,v,_,y,C;if(!d){console.log("Invalid Exif data: Invalid tag type.");return}if(l=d.size*r,g=l>4?c+a.getUint32(n+8,u):n+8,g+l>a.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(r===1)return d.getValue(a,g,u);for(v=[],_=0;_<r;_+=1)v[_]=d.getValue(a,g+_*d.size,u);if(d.ascii){for(y="",_=0;_<v.length&&(C=v[_],C!=="\0");_+=1)y+=C;return y}return v}function b(a,c,n){return(!a||a[n])&&(!c||c[n]!==!0)}function h(a,c,n,s,r,u,d,l){var g,v,_,y,C,S;if(n+6>a.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(g=a.getUint16(n,s),v=n+2+12*g,v+4>a.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(_=0;_<g;_+=1)y=n+2+12*_,C=a.getUint16(y,s),!!b(d,l,C)&&(S=m(a,c,y,a.getUint16(y+2,s),a.getUint32(y+4,s),s),r[C]=S,u&&(u[C]=y));return a.getUint32(v,s)}function i(a,c,n,s,r,u,d){var l=a.exif[c];l&&(a.exif[c]=new o(c),a.exifOffsets&&(a.exifOffsets[c]=new o(c)),h(n,s,s+l,r,a.exif[c],a.exifOffsets&&a.exifOffsets[c],u&&u[c],d&&d[c]))}e.parseExifData=function(a,c,n,s,r){if(!r.disableExif){var u=r.includeExifTags,d=r.excludeExifTags||{34665:{37500:!0}},l=c+10,g,v,_;if(a.getUint32(c+4)===1165519206){if(l+8>a.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(a.getUint16(c+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(a.getUint16(l)){case 18761:g=!0;break;case 19789:g=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(a.getUint16(l+2,g)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}v=a.getUint32(l+4,g),s.exif=new o,r.disableExifOffsets||(s.exifOffsets=new o,s.exifTiffOffset=l,s.exifLittleEndian=g),v=h(a,l,l+v,g,s.exif,s.exifOffsets,u,d),v&&b(u,d,"ifd1")&&(s.exif.ifd1=v,s.exifOffsets&&(s.exifOffsets.ifd1=l+v)),Object.keys(s.exif.ifds).forEach(function(y){i(s,y,a,l,g,u,d)}),_=s.exif.ifd1,_&&_[513]&&(_[513]=f(a,l+_[513],_[514]))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(a,c,n){var s=c.exifOffsets[274];if(!s)return a;var r=new DataView(a,s+8,2);return r.setUint16(0,n,c.exifLittleEndian),a}},e.writeExifData=function(a,c,n,s){return e.exifWriters[c.exif.map[n]](a,c,s)},e.ExifMap=o})})(zh);var _C={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports,zh.exports):e(window.loadImage)})(function(e){var o=e.ExifMap.prototype;o.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},o.tags.ifd1=o.tags,o.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180\xB0 CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90\xB0 CW",6:"Rotate 90\xB0 CW",7:"Horizontal flip + Rotate 90\xB0 CW",8:"Rotate 90\xB0 CCW"}},o.getText=function(f){var p=this.get(f);switch(f){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[f][p];case"ExifVersion":case"FlashpixVersion":return p?String.fromCharCode(p[0],p[1],p[2],p[3]):void 0;case"ComponentsConfiguration":return p?this.stringValues[f][p[0]]+this.stringValues[f][p[1]]+this.stringValues[f][p[2]]+this.stringValues[f][p[3]]:void 0;case"GPSVersionID":return p?p[0]+"."+p[1]+"."+p[2]+"."+p[3]:void 0}return String(p)},o.getAll=function(){var f={},p,m,b;for(p in this)Object.prototype.hasOwnProperty.call(this,p)&&(m=this[p],m&&m.getAll?f[this.ifds[p].name]=m.getAll():(b=this.tags[p],b&&(f[b]=this.getText(b))));return f},o.getName=function(f){var p=this.tags[f];return typeof p=="object"?this.ifds[f].name:p},function(){var f=o.tags,p,m,b;for(p in f)if(Object.prototype.hasOwnProperty.call(f,p))if(m=o.ifds[p],m){b=f[p];for(p in b)Object.prototype.hasOwnProperty.call(b,p)&&(m.map[b[p]]=Number(p))}else o.map[f[p]]=Number(p)}()})})(_C);var Xh={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports,ao.exports):e(window.loadImage)})(function(e){function o(){}o.prototype.map={ObjectName:5},o.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},o.prototype.get=function(a){return this[a]||this[this.map[a]]};function f(a,c,n){for(var s="",r=c+n,u=c;u<r;u+=1)s+=String.fromCharCode(a.getUint8(u));return s}function p(a,c,n,s,r){return c.types[a]==="binary"?new Blob([n.buffer.slice(s,s+r)]):c.types[a]==="Uint16"?n.getUint16(s):f(n,s,r)}function m(a,c){return a===void 0?c:a instanceof Array?(a.push(c),a):[a,c]}function b(a,c,n,s,r,u){for(var d,l,g,v=c+n,_=c;_<v;)a.getUint8(_)===28&&a.getUint8(_+1)===2&&(g=a.getUint8(_+2),(!r||r[g])&&(!u||!u[g])&&(l=a.getInt16(_+3),d=p(g,s.iptc,a,_+5,l),s.iptc[g]=m(s.iptc[g],d),s.iptcOffsets&&(s.iptcOffsets[g]=_))),_+=1}function h(a,c){return a.getUint32(c)===943868237&&a.getUint16(c+4)===1028}function i(a,c){var n=a.getUint8(c+7);return n%2!==0&&(n+=1),n===0&&(n=4),n}e.parseIptcData=function(a,c,n,s,r){if(!r.disableIptc)for(var u=c+n;c+8<u;){if(h(a,c)){var d=i(a,c),l=c+8+d;if(l>u){console.log("Invalid IPTC data: Invalid segment offset.");break}var g=a.getUint16(c+6+d);if(c+g>u){console.log("Invalid IPTC data: Invalid segment size.");break}s.iptc=new o,r.disableIptcOffsets||(s.iptcOffsets=new o),b(a,l,g,s,r.includeIptcTags,r.excludeIptcTags||{202:!0});return}c+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=o})})(Xh);var bC={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports,Xh.exports):e(window.loadImage)})(function(e){var o=e.IptcMap.prototype;o.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},o.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},o.getText=function(f){var p=this.get(f),m=this.map[f],b=this.stringValues[m];return b?b[p]:String(p)},o.getAll=function(){var f={},p,m;for(p in this)Object.prototype.hasOwnProperty.call(this,p)&&(m=this.tags[p],m&&(f[m]=this.getText(m)));return f},o.getName=function(f){return this.tags[f]},function(){var f=o.tags,p=o.map||{},m;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&(p[f[m]]=Number(m))}()})})(bC);var CC={exports:{}};(function(t){(function(e){t.exports?e(Kt.exports,Wh.exports,ao.exports):e(window.loadImage)})(function(e){var o=e.transform,f=e.requiresCanvas,p=e.requiresMetaData,m=e.transformCoordinates,b=e.getTransformedOptions;(function(c){if(!!c.global.document){var n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",s=document.createElement("img");s.onload=function(){if(c.orientation=s.width===2&&s.height===3,c.orientation){var r=c.createCanvas(1,1,!0),u=r.getContext("2d");u.drawImage(s,1,1,1,1,0,0,1,1),c.orientationCropBug=u.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},s.src=n}})(e);function h(c,n){var s=c&&c.orientation;return s===!0&&!e.orientation||s===1&&e.orientation||(!n||e.orientation)&&s>1&&s<9}function i(c,n){return c!==n&&(c===1&&n>1&&n<9||c>1&&c<9)}function a(c,n){if(n>1&&n<9)switch(c){case 2:case 4:return n>4;case 5:case 7:return n%2===0;case 6:case 8:return n===2||n===4||n===5||n===7}return!1}e.requiresCanvas=function(c){return h(c)||f.call(e,c)},e.requiresMetaData=function(c){return h(c,!0)||p.call(e,c)},e.transform=function(c,n,s,r,u){o.call(e,c,n,function(d,l){if(l){var g=e.orientation&&l.exif&&l.exif.get("Orientation");if(g>4&&g<9){var v=l.originalWidth,_=l.originalHeight;l.originalWidth=_,l.originalHeight=v}}s(d,l)},r,u)},e.getTransformedOptions=function(c,n,s){var r=b.call(e,c,n),u=s.exif&&s.exif.get("Orientation"),d=r.orientation,l=e.orientation&&u;if(d===!0&&(d=u),!i(d,l))return r;var g=r.top,v=r.right,_=r.bottom,y=r.left,C={};for(var S in r)Object.prototype.hasOwnProperty.call(r,S)&&(C[S]=r[S]);if(C.orientation=d,(d>4&&!(l>4)||d<5&&l>4)&&(C.maxWidth=r.maxHeight,C.maxHeight=r.maxWidth,C.minWidth=r.minHeight,C.minHeight=r.minWidth,C.sourceWidth=r.sourceHeight,C.sourceHeight=r.sourceWidth),l>1){switch(l){case 2:v=r.left,y=r.right;break;case 3:g=r.bottom,v=r.left,_=r.top,y=r.right;break;case 4:g=r.bottom,_=r.top;break;case 5:g=r.left,v=r.bottom,_=r.right,y=r.top;break;case 6:g=r.left,v=r.top,_=r.right,y=r.bottom;break;case 7:g=r.right,v=r.top,_=r.left,y=r.bottom;break;case 8:g=r.right,v=r.bottom,_=r.left,y=r.top;break}if(a(d,l)){var x=g,T=v;g=_,v=y,_=x,y=T}}switch(C.top=g,C.right=v,C.bottom=_,C.left=y,d){case 2:C.right=y,C.left=v;break;case 3:C.top=_,C.right=y,C.bottom=g,C.left=v;break;case 4:C.top=_,C.bottom=g;break;case 5:C.top=y,C.right=_,C.bottom=v,C.left=g;break;case 6:C.top=v,C.right=_,C.bottom=y,C.left=g;break;case 7:C.top=v,C.right=g,C.bottom=y,C.left=_;break;case 8:C.top=y,C.right=g,C.bottom=v,C.left=_;break}return C},e.transformCoordinates=function(c,n,s){m.call(e,c,n,s);var r=n.orientation,u=e.orientation&&s.exif&&s.exif.get("Orientation");if(!!i(r,u)){var d=c.getContext("2d"),l=c.width,g=c.height,v=l,_=g;switch((r>4&&!(u>4)||r<5&&u>4)&&(c.width=g,c.height=l),r>4&&(v=g,_=l),u){case 2:d.translate(v,0),d.scale(-1,1);break;case 3:d.translate(v,_),d.rotate(Math.PI);break;case 4:d.translate(0,_),d.scale(1,-1);break;case 5:d.rotate(-.5*Math.PI),d.scale(-1,1);break;case 6:d.rotate(-.5*Math.PI),d.translate(-v,0);break;case 7:d.rotate(-.5*Math.PI),d.translate(-v,_),d.scale(1,-1);break;case 8:d.rotate(.5*Math.PI),d.translate(0,-_);break}switch(a(r,u)&&(d.translate(v,_),d.rotate(Math.PI)),r){case 2:d.translate(l,0),d.scale(-1,1);break;case 3:d.translate(l,g),d.rotate(Math.PI);break;case 4:d.translate(0,g),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-g);break;case 7:d.rotate(.5*Math.PI),d.translate(l,-g),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-l,0);break}}}})})(CC);var g1=Kt.exports;function p1(t,{from:e,to:o},f={}){const p=getComputedStyle(t),m=p.transform==="none"?"":p.transform,[b,h]=p.transformOrigin.split(" ").map(parseFloat),i=e.left+e.width*b/o.width-(o.left+b),a=e.top+e.height*h/o.height-(o.top+h),{delay:c=0,duration:n=r=>Math.sqrt(r)*120,easing:s=pl}=f;return{delay:c,duration:tr(n)?n(Math.sqrt(i*i+a*a)):n,easing:s,css:(r,u)=>{const d=u*i,l=u*a,g=r+u*e.width/o.width,v=r+u*e.height/o.height;return`transform: ${m} translate(${d}px, ${l}px) scale(${g}, ${v});`}}}const wC="finalize",SC="consider";function Dn(t,e,o){t.dispatchEvent(new CustomEvent(wC,{detail:{items:e,info:o}}))}function Tr(t,e,o){t.dispatchEvent(new CustomEvent(SC,{detail:{items:e,info:o}}))}const lo="draggedEntered",Ui="draggedLeft",co="draggedOverIndex",tc="draggedLeftDocument",Ws={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function xC(t,e,o){t.dispatchEvent(new CustomEvent(lo,{detail:{indexObj:e,draggedEl:o}}))}function TC(t,e,o){t.dispatchEvent(new CustomEvent(Ui,{detail:{draggedEl:e,type:Ws.LEFT_FOR_ANOTHER,theOtherDz:o}}))}function EC(t,e){t.dispatchEvent(new CustomEvent(Ui,{detail:{draggedEl:e,type:Ws.OUTSIDE_OF_ANY}}))}function OC(t,e,o){t.dispatchEvent(new CustomEvent(co,{detail:{indexObj:e,draggedEl:o}}))}function AC(t){window.dispatchEvent(new CustomEvent(tc,{detail:{draggedEl:t}}))}const mt={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:lo,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:co,DRAGGED_LEFT:Ui,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ct={POINTER:"pointer",KEYBOARD:"keyboard"},uo="isDndShadowItem",rc="data-is-dnd-shadow-item",nc="id:dnd-shadow-placeholder-0000",PC="dnd-action-dragged-el";let Qe="id",rl=0;function Gh(){rl++}function Yh(){if(rl===0)throw new Error("Bug! trying to decrement when there are no dropzones");rl--}const ic=typeof window=="undefined";function Vh(t){let e;const o=t.getBoundingClientRect(),f=getComputedStyle(t),p=f.transform;if(p){let m,b,h,i;if(p.startsWith("matrix3d("))e=p.slice(9,-1).split(/, /),m=+e[0],b=+e[5],h=+e[12],i=+e[13];else if(p.startsWith("matrix("))e=p.slice(7,-1).split(/, /),m=+e[0],b=+e[3],h=+e[4],i=+e[5];else return o;const a=f.transformOrigin,c=o.x-h-(1-m)*parseFloat(a),n=o.y-i-(1-b)*parseFloat(a.slice(a.indexOf(" ")+1)),s=m?o.width/m:t.offsetWidth,r=b?o.height/b:t.offsetHeight;return{x:c,y:n,width:s,height:r,top:n,right:c+s,bottom:n+r,left:c}}else return o}function qh(t){const e=Vh(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function sc(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Kh(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function DC(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Pi(t){return Kh(sc(t))}function bu(t,e){const o=Pi(t),f=qh(e);return oc(o,f)}function kC(t,e){const o=Pi(t),f=Pi(e);return DC(o,f)}function FC(t){const e=sc(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function RC(t,e){const o=sc(e);return oc(t,o)?{top:t.y-o.top,bottom:o.bottom-t.y,left:t.x-o.left,right:Math.min(o.right,document.documentElement.clientWidth)-t.x}:null}let Gr;function ac(){Gr=new Map}ac();function MC(t){Gr.delete(t)}function IC(t){const e=Array.from(t.children).findIndex(o=>o.getAttribute(rc));if(e>=0)return Gr.has(t)||Gr.set(t,new Map),Gr.get(t).set(e,qh(t.children[e])),e}function LC(t,e){if(!bu(t,e))return null;const o=e.children;if(o.length===0)return{index:0,isProximityBased:!0};const f=IC(e);for(let b=0;b<o.length;b++)if(bu(t,o[b])){const h=Gr.has(e)&&Gr.get(e).get(b);return h&&!oc(Pi(t),h)?{index:f,isProximityBased:!1}:{index:b,isProximityBased:!1}}let p=Number.MAX_VALUE,m;for(let b=0;b<o.length;b++){const h=kC(t,o[b]);h<p&&(p=h,m=b)}return{index:m,isProximityBased:!0}}const oi=25;function Jh(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function o(m){const{directionObj:b,stepPx:h}=t;b&&(m.scrollBy(b.x*h,b.y*h),window.requestAnimationFrame(()=>o(m)))}function f(m){return oi-m}function p(m,b){if(!b)return!1;const h=RC(m,b);if(h===null)return e(),!1;const i=!!t.directionObj;let[a,c]=[!1,!1];return b.scrollHeight>b.clientHeight&&(h.bottom<oi?(a=!0,t.directionObj={x:0,y:1},t.stepPx=f(h.bottom)):h.top<oi&&(a=!0,t.directionObj={x:0,y:-1},t.stepPx=f(h.top)),!i&&a)||b.scrollWidth>b.clientWidth&&(h.right<oi?(c=!0,t.directionObj={x:1,y:0},t.stepPx=f(h.right)):h.left<oi&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=f(h.left)),!i&&c)?(o(b),!0):(e(),!1)}return{scrollIfNeeded:p,resetScrolling:e}}function Ta(t){return JSON.stringify(t,null,2)}function Cu(t){if(!t)throw new Error("cannot get depth of a falsy node");return Qh(t,0)}function Qh(t,e=0){return t.parentElement?Qh(t.parentElement,e+1):e-1}function BC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const o in t)if(!{}.hasOwnProperty.call(e,o)||e[o]!==t[o])return!1;return!0}function jC(t,e){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}const NC=200,wu=10,{scrollIfNeeded:UC,resetScrolling:HC}=Jh();let nl;function WC(t,e,o=NC){let f,p,m=!1,b;const h=Array.from(e).sort((a,c)=>Cu(c)-Cu(a));function i(){const a=Pi(t),c=UC(a,f);if(!c&&b&&Math.abs(b.x-a.x)<wu&&Math.abs(b.y-a.y)<wu){nl=window.setTimeout(i,o);return}if(FC(t)){AC(t);return}b=a;let n=!1;for(const s of h){c&&MC(f);const r=LC(t,s);if(r===null)continue;const{index:u}=r;n=!0,s!==f?(f&&TC(f,t,s),xC(s,r,t),f=s):u!==p&&(OC(s,r,t),p=u);break}!n&&m&&f?(EC(f,t),f=void 0,p=void 0,m=!1):m=!0,nl=window.setTimeout(i,o)}i()}function zC(){clearTimeout(nl),HC(),ac()}const XC=300;let zs;function Xs(t){const e=t.touches?t.touches[0]:t;zs={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:GC,resetScrolling:YC}=Jh();let $h;function Zh(){zs&&GC(zs,document.documentElement)&&ac(),$h=window.setTimeout(Zh,XC)}function VC(){window.addEventListener("mousemove",Xs),window.addEventListener("touchmove",Xs),Zh()}function qC(){window.removeEventListener("mousemove",Xs),window.removeEventListener("touchmove",Xs),zs=void 0,window.clearTimeout($h),YC()}function KC(t){const e=t.cloneNode(!0),o=[],f=t.tagName==="SELECT",p=f?[t]:[...t.querySelectorAll("select")];for(const b of p)o.push(b.value);if(p.length<=0)return e;const m=f?[e]:[...e.querySelectorAll("select")];for(let b=0;b<m.length;b++){const h=m[b],i=o[b],a=h.querySelector(`option[value="${i}"`);a&&a.setAttribute("selected",!0)}return e}const JC=.2;function jr(t){return`${t} ${JC}s ease`}function QC(t,e){const o=t.getBoundingClientRect(),f=KC(t);ed(t,f),f.id=PC,f.style.position="fixed";let p=o.top,m=o.left;if(f.style.top=`${p}px`,f.style.left=`${m}px`,e){const b=Kh(o);p-=b.y-e.y,m-=b.x-e.x,window.setTimeout(()=>{f.style.top=`${p}px`,f.style.left=`${m}px`},0)}return f.style.margin="0",f.style.boxSizing="border-box",f.style.height=`${o.height}px`,f.style.width=`${o.width}px`,f.style.transition=`${jr("top")}, ${jr("left")}, ${jr("background-color")}, ${jr("opacity")}, ${jr("color")} `,window.setTimeout(()=>f.style.transition+=`, ${jr("width")}, ${jr("height")}`,0),f.style.zIndex="9999",f.style.cursor="grabbing",f}function $C(t){t.style.cursor="grab"}function ZC(t,e,o,f,p){const m=e.getBoundingClientRect(),b=t.getBoundingClientRect(),h=m.width-b.width,i=m.height-b.height;if(h||i){const a={left:(o-b.left)/b.width,top:(f-b.top)/b.height};t.style.height=`${m.height}px`,t.style.width=`${m.width}px`,t.style.left=`${parseFloat(t.style.left)-a.left*h}px`,t.style.top=`${parseFloat(t.style.top)-a.top*i}px`}ed(e,t),p()}function ed(t,e){const o=window.getComputedStyle(t);Array.from(o).filter(f=>f.startsWith("background")||f.startsWith("padding")||f.startsWith("font")||f.startsWith("text")||f.startsWith("align")||f.startsWith("justify")||f.startsWith("display")||f.startsWith("flex")||f.startsWith("border")||f==="opacity"||f==="color"||f==="list-style-type").forEach(f=>e.style.setProperty(f,o.getPropertyValue(f),o.getPropertyPriority(f)))}function ew(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function tw(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function rw(t){t.style.visibility="hidden",t.setAttribute(rc,"true")}function nw(t){t.style.visibility="",t.removeAttribute(rc)}function Os(t,e=()=>{},o=()=>[]){t.forEach(f=>{const p=e(f);Object.keys(p).forEach(m=>{f.style[m]=p[m]}),o(f).forEach(m=>f.classList.add(m))})}function Gs(t,e=()=>{},o=()=>[]){t.forEach(f=>{const p=e(f);Object.keys(p).forEach(m=>{f.style[m]=""}),o(f).forEach(m=>f.classList.contains(m)&&f.classList.remove(m))})}function iw(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const o=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=o}}const sw="--any--",ow=100,Su=3,xu={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let er,it,xt,fo,ze,ho,kn,wt,br,Et,mn=!1,lc=!1,cc,Hi=!1;const It=new Map,Ve=new Map,Ea=new WeakMap;function aw(t,e){It.has(e)||It.set(e,new Set),It.get(e).has(t)||(It.get(e).add(t),Gh())}function Tu(t,e){It.get(e).delete(t),Yh(),It.get(e).size===0&&It.delete(e)}function lw(){VC();const t=It.get(fo);for(const o of t)o.addEventListener(lo,td),o.addEventListener(Ui,rd),o.addEventListener(co,nd);window.addEventListener(tc,Fn);const e=Math.max(ow,...Array.from(t.keys()).map(o=>Ve.get(o).dropAnimationDurationMs));WC(it,t,e*1.07)}function cw(){qC();const t=It.get(fo);for(const e of t)e.removeEventListener(lo,td),e.removeEventListener(Ui,rd),e.removeEventListener(co,nd);window.removeEventListener(tc,Fn),zC()}function uw(t){return t.findIndex(e=>e[Qe]===nc)}function go(t){return t.findIndex(e=>!!e[uo]&&e[Qe]!==nc)}function td(t){let{items:e,dropFromOthersDisabled:o}=Ve.get(t.currentTarget);if(o&&t.currentTarget!==ze)return;if(Hi=!1,e=e.filter(b=>b[Qe]!==kn[Qe]),ze!==t.currentTarget){const h=Ve.get(ze).items.filter(i=>!i[uo]);Tr(ze,h,{trigger:mt.DRAGGED_ENTERED_ANOTHER,id:xt[Qe],source:Ct.POINTER})}else{const b=uw(e);b!==-1&&e.splice(b,1)}const{index:f,isProximityBased:p}=t.detail.indexObj,m=p&&f===t.currentTarget.children.length-1?f+1:f;wt=t.currentTarget,e.splice(m,0,kn),Tr(t.currentTarget,e,{trigger:mt.DRAGGED_ENTERED,id:xt[Qe],source:Ct.POINTER})}function rd(t){if(!mn)return;const{items:e,dropFromOthersDisabled:o}=Ve.get(t.currentTarget);if(o&&t.currentTarget!==ze&&t.currentTarget!==wt)return;const f=go(e),p=e.splice(f,1)[0];wt=void 0;const{type:m,theOtherDz:b}=t.detail;if(m===Ws.OUTSIDE_OF_ANY||m===Ws.LEFT_FOR_ANOTHER&&b!==ze&&Ve.get(b).dropFromOthersDisabled){Hi=!0,wt=ze;const h=Ve.get(ze).items;h.splice(ho,0,p),Tr(ze,h,{trigger:mt.DRAGGED_LEFT_ALL,id:xt[Qe],source:Ct.POINTER})}Tr(t.currentTarget,e,{trigger:mt.DRAGGED_LEFT,id:xt[Qe],source:Ct.POINTER})}function nd(t){const{items:e,dropFromOthersDisabled:o}=Ve.get(t.currentTarget);if(o&&t.currentTarget!==ze)return;Hi=!1;const{index:f}=t.detail.indexObj,p=go(e);e.splice(p,1),e.splice(f,0,kn),Tr(t.currentTarget,e,{trigger:mt.DRAGGED_OVER_INDEX,id:xt[Qe],source:Ct.POINTER})}function Ys(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Et={x:e.clientX,y:e.clientY},it.style.transform=`translate3d(${Et.x-br.x}px, ${Et.y-br.y}px, 0)`}function Fn(){lc=!0,window.removeEventListener("mousemove",Ys),window.removeEventListener("touchmove",Ys),window.removeEventListener("mouseup",Fn),window.removeEventListener("touchend",Fn),cw(),$C(it),wt||(wt=ze);let{items:t,type:e}=Ve.get(wt);Gs(It.get(e),p=>Ve.get(p).dropTargetStyle,p=>Ve.get(p).dropTargetClasses);let o=go(t);o===-1&&(o=ho),t=t.map(p=>p[uo]?xt:p);function f(){cc(),Dn(wt,t,{trigger:Hi?mt.DROPPED_OUTSIDE_OF_ANY:mt.DROPPED_INTO_ZONE,id:xt[Qe],source:Ct.POINTER}),wt!==ze&&Dn(ze,Ve.get(ze).items,{trigger:mt.DROPPED_INTO_ANOTHER,id:xt[Qe],source:Ct.POINTER}),nw(wt.children[o]),hw()}fw(o,f)}function fw(t,e){const o=Vh(wt.children[t]),f={x:o.left-parseFloat(it.style.left),y:o.top-parseFloat(it.style.top)},{dropAnimationDurationMs:p}=Ve.get(wt),m=`transform ${p}ms ease`;it.style.transition=it.style.transition?it.style.transition+","+m:m,it.style.transform=`translate3d(${f.x}px, ${f.y}px, 0)`,window.setTimeout(e,p)}function hw(){it.remove(),er.remove(),it=void 0,er=void 0,xt=void 0,fo=void 0,ze=void 0,ho=void 0,kn=void 0,wt=void 0,br=void 0,Et=void 0,mn=!1,lc=!1,cc=void 0,Hi=!1}function dw(t,e){let o=!1;const f={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:xu,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let p=new Map;function m(){window.addEventListener("mousemove",i,{passive:!1}),window.addEventListener("touchmove",i,{passive:!1,capture:!1}),window.addEventListener("mouseup",h,{passive:!1}),window.addEventListener("touchend",h,{passive:!1})}function b(){window.removeEventListener("mousemove",i),window.removeEventListener("touchmove",i),window.removeEventListener("mouseup",h),window.removeEventListener("touchend",h)}function h(){b(),er=void 0,br=void 0,Et=void 0}function i(s){s.preventDefault();const r=s.touches?s.touches[0]:s;Et={x:r.clientX,y:r.clientY},(Math.abs(Et.x-br.x)>=Su||Math.abs(Et.y-br.y)>=Su)&&(b(),c())}function a(s){if(s.target!==s.currentTarget&&(s.target.value!==void 0||s.target.isContentEditable)||s.button||mn)return;s.stopPropagation();const r=s.touches?s.touches[0]:s;br={x:r.clientX,y:r.clientY},Et=_t({},br),er=s.currentTarget,m()}function c(){mn=!0;const s=p.get(er);ho=s,ze=er.parentElement;const r=ze.getRootNode(),u=r.body||r,{items:d,type:l,centreDraggedOnCursor:g}=f;xt=_t({},d[s]),fo=l,kn=ti(_t({},xt),{[uo]:!0});const v=ti(_t({},kn),{[Qe]:nc});it=QC(er,g&&Et);function _(){it.parentElement?window.requestAnimationFrame(_):(u.appendChild(it),it.focus(),lw(),tw(er),u.appendChild(er))}window.requestAnimationFrame(_),Os(Array.from(It.get(f.type)).filter(y=>y===ze||!Ve.get(y).dropFromOthersDisabled),y=>Ve.get(y).dropTargetStyle,y=>Ve.get(y).dropTargetClasses),d.splice(s,1,v),cc=iw(ze),Tr(ze,d,{trigger:mt.DRAG_STARTED,id:xt[Qe],source:Ct.POINTER}),window.addEventListener("mousemove",Ys,{passive:!1}),window.addEventListener("touchmove",Ys,{passive:!1,capture:!1}),window.addEventListener("mouseup",Fn,{passive:!1}),window.addEventListener("touchend",Fn,{passive:!1})}function n({items:s=void 0,flipDurationMs:r=0,type:u=sw,dragDisabled:d=!1,morphDisabled:l=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:v=xu,dropTargetClasses:_=[],transformDraggedElement:y=()=>{},centreDraggedOnCursor:C=!1}){f.dropAnimationDurationMs=r,f.type&&u!==f.type&&Tu(t,f.type),f.type=u,aw(t,u),f.items=[...s],f.dragDisabled=d,f.morphDisabled=l,f.transformDraggedElement=y,f.centreDraggedOnCursor=C,o&&mn&&!lc&&(!BC(v,f.dropTargetStyle)||!jC(_,f.dropTargetClasses))&&(Gs([t],()=>f.dropTargetStyle,()=>_),Os([t],()=>v,()=>_)),f.dropTargetStyle=v,f.dropTargetClasses=[..._];function S(T,D){return Ve.get(T)?Ve.get(T)[D]:f[D]}o&&mn&&f.dropFromOthersDisabled!==g&&(g?Gs([t],T=>S(T,"dropTargetStyle"),T=>S(T,"dropTargetClasses")):Os([t],T=>S(T,"dropTargetStyle"),T=>S(T,"dropTargetClasses"))),f.dropFromOthersDisabled=g,Ve.set(t,f);const x=go(f.items);for(let T=0;T<t.children.length;T++){const D=t.children[T];if(ew(D,d),T===x){l||ZC(it,D,Et.x,Et.y,()=>f.transformDraggedElement(it,xt,T)),rw(D);continue}D.removeEventListener("mousedown",Ea.get(D)),D.removeEventListener("touchstart",Ea.get(D)),d||(D.addEventListener("mousedown",a),D.addEventListener("touchstart",a),Ea.set(D,a)),p.set(D,T),o||(o=!0)}}return n(e),{update:s=>{n(s)},destroy:()=>{Tu(t,f.type),Ve.delete(t)}}}const il={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},id={[il.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[il.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},gw="dnd-action-aria-alert";let He;function sl(){He||(He=document.createElement("div"),function(){He.id=gw,He.style.position="fixed",He.style.bottom="0",He.style.left="0",He.style.zIndex="-5",He.style.opacity="0",He.style.height="0",He.style.width="0",He.setAttribute("role","alert")}(),document.body.prepend(He),Object.entries(id).forEach(([t,e])=>document.body.prepend(vw(t,e))))}function pw(){return ic?null:(document.readyState==="complete"?sl():window.addEventListener("DOMContentLoaded",sl),_t({},il))}function mw(){ic||!He||(Object.keys(id).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),He.remove(),He=void 0)}function vw(t,e){const o=document.createElement("div");return o.id=t,o.innerHTML=`<p>${e}</p>`,o.style.display="none",o.style.position="fixed",o.style.zIndex="-5",o}function Sn(t){if(ic)return;He||sl(),He.innerHTML="";const e=document.createTextNode(t);He.appendChild(e),He.style.display="none",He.style.display="inline"}const yw="--any--",Eu={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Ot=!1,ol,ut,Yr="",Ur,zt,xr="";const Vs=new WeakSet,Ou=new WeakMap,Au=new WeakMap,al=new Map,nt=new Map,Ft=new Map;let qs;function _w(t,e){Ft.size===0&&(qs=pw(),window.addEventListener("keydown",sd),window.addEventListener("click",od)),Ft.has(e)||Ft.set(e,new Set),Ft.get(e).has(t)||(Ft.get(e).add(t),Gh())}function Pu(t,e){ut===t&&Di(),Ft.get(e).delete(t),Yh(),Ft.get(e).size===0&&Ft.delete(e),Ft.size===0&&(window.removeEventListener("keydown",sd),window.removeEventListener("click",od),qs=void 0,mw())}function sd(t){if(!!Ot)switch(t.key){case"Escape":{Di();break}}}function od(){!Ot||Vs.has(document.activeElement)||Di()}function bw(t){if(!Ot)return;const e=t.currentTarget;if(e===ut)return;Yr=e.getAttribute("aria-label")||"";const{items:o}=nt.get(ut),f=o.find(a=>a[Qe]===zt),p=o.indexOf(f),m=o.splice(p,1)[0],{items:b,autoAriaDisabled:h}=nt.get(e);e.getBoundingClientRect().top<ut.getBoundingClientRect().top||e.getBoundingClientRect().left<ut.getBoundingClientRect().left?(b.push(m),h||Sn(`Moved item ${xr} to the end of the list ${Yr}`)):(b.unshift(m),h||Sn(`Moved item ${xr} to the beginning of the list ${Yr}`)),Dn(ut,o,{trigger:mt.DROPPED_INTO_ANOTHER,id:zt,source:Ct.KEYBOARD}),Dn(e,b,{trigger:mt.DROPPED_INTO_ZONE,id:zt,source:Ct.KEYBOARD}),ut=e}function ad(){al.forEach(({update:t},e)=>t(nt.get(e)))}function Di(t=!0){nt.get(ut).autoAriaDisabled||Sn(`Stopped dragging item ${xr}`),Vs.has(document.activeElement)&&document.activeElement.blur(),t&&Tr(ut,nt.get(ut).items,{trigger:mt.DRAG_STOPPED,id:zt,source:Ct.KEYBOARD}),Gs(Ft.get(ol),e=>nt.get(e).dropTargetStyle,e=>nt.get(e).dropTargetClasses),Ur=null,zt=null,xr="",ol=null,ut=null,Yr="",Ot=!1,ad()}function Cw(t,e){const o={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Eu,dropTargetClasses:[],autoAriaDisabled:!1};function f(c,n,s){c.length<=1||c.splice(s,1,c.splice(n,1,c[s])[0])}function p(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!Vs.has(c.target))return;c.preventDefault(),c.stopPropagation(),Ot?Di():m(c);break}case"ArrowDown":case"ArrowRight":{if(!Ot)return;c.preventDefault(),c.stopPropagation();const{items:n}=nt.get(t),s=Array.from(t.children),r=s.indexOf(c.currentTarget);r<s.length-1&&(o.autoAriaDisabled||Sn(`Moved item ${xr} to position ${r+2} in the list ${Yr}`),f(n,r,r+1),Dn(t,n,{trigger:mt.DROPPED_INTO_ZONE,id:zt,source:Ct.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Ot)return;c.preventDefault(),c.stopPropagation();const{items:n}=nt.get(t),r=Array.from(t.children).indexOf(c.currentTarget);r>0&&(o.autoAriaDisabled||Sn(`Moved item ${xr} to position ${r} in the list ${Yr}`),f(n,r,r-1),Dn(t,n,{trigger:mt.DROPPED_INTO_ZONE,id:zt,source:Ct.KEYBOARD}));break}}}function m(c){h(c.currentTarget),ut=t,ol=o.type,Ot=!0;const n=Array.from(Ft.get(o.type)).filter(s=>s===ut||!nt.get(s).dropFromOthersDisabled);if(Os(n,s=>nt.get(s).dropTargetStyle,s=>nt.get(s).dropTargetClasses),!o.autoAriaDisabled){let s=`Started dragging item ${xr}. Use the arrow keys to move it within its list ${Yr}`;n.length>1&&(s+=", or tab to another list in order to move the item into it"),Sn(s)}Tr(t,nt.get(t).items,{trigger:mt.DRAG_STARTED,id:zt,source:Ct.KEYBOARD}),ad()}function b(c){!Ot||c.currentTarget!==Ur&&(c.stopPropagation(),Di(!1),m(c))}function h(c){const{items:n}=nt.get(t),s=Array.from(t.children),r=s.indexOf(c);Ur=c,Ur.tabIndex=0,zt=n[r][Qe],xr=s[r].getAttribute("aria-label")||""}function i({items:c=[],type:n=yw,dragDisabled:s=!1,zoneTabIndex:r=0,dropFromOthersDisabled:u=!1,dropTargetStyle:d=Eu,dropTargetClasses:l=[],autoAriaDisabled:g=!1}){o.items=[...c],o.dragDisabled=s,o.dropFromOthersDisabled=u,o.zoneTabIndex=r,o.dropTargetStyle=d,o.dropTargetClasses=l,o.autoAriaDisabled=g,o.type&&n!==o.type&&Pu(t,o.type),o.type=n,_w(t,n),g||(t.setAttribute("aria-disabled",s),t.setAttribute("role","list"),t.setAttribute("aria-describedby",s?qs.DND_ZONE_DRAG_DISABLED:qs.DND_ZONE_ACTIVE)),nt.set(t,o),Ot?t.tabIndex=t===ut||Ur.contains(t)||o.dropFromOthersDisabled||ut&&o.type!==nt.get(ut).type?-1:0:t.tabIndex=o.zoneTabIndex,t.addEventListener("focus",bw);for(let v=0;v<t.children.length;v++){const _=t.children[v];Vs.add(_),_.tabIndex=Ot?-1:0,g||_.setAttribute("role","listitem"),_.removeEventListener("keydown",Ou.get(_)),_.removeEventListener("click",Au.get(_)),s||(_.addEventListener("keydown",p),Ou.set(_,p),_.addEventListener("click",b),Au.set(_,b)),Ot&&o.items[v][Qe]===zt&&(Ur=_,Ur.tabIndex=0,_.focus())}}i(e);const a={update:c=>{i(c)},destroy:()=>{Pu(t,o.type),nt.delete(t),al.delete(t)}};return al.set(t,a),a}function m1(t,e){Du(e);const o=dw(t,e),f=Cw(t,e);return{update:p=>{Du(p),o.update(p),f.update(p)},destroy:()=>{o.destroy(),f.destroy()}}}function Du(t){const d=t,{items:e,flipDurationMs:o,type:f,dragDisabled:p,morphDisabled:m,dropFromOthersDisabled:b,zoneTabIndex:h,dropTargetStyle:i,dropTargetClasses:a,transformDraggedElement:c,autoAriaDisabled:n,centreDraggedOnCursor:s}=d,r=_c(d,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(r).length>0&&console.warn("dndzone will ignore unknown options",r),!e)throw new Error("no 'items' key provided to dndzone");const u=e.find(l=>!{}.hasOwnProperty.call(l,Qe));if(u)throw new Error(`missing '${Qe}' property for item ${Ta(u)}`);if(a&&!Array.isArray(a))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof a}, ${Ta(a)}`);if(h&&!ww(h))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof h}, ${Ta(h)}`)}function ww(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function Sw(t){let e,o;return{c(){e=De("div"),he(e,"style",o=`
    display: ${ku};
    width: ${t[4]};
    height: ${t[3]};
    ${t[1]}
  `)},m(f,p){Xe(f,e,p),t[27](e)},p(f,p){p[0]&26&&o!==(o=`
    display: ${ku};
    width: ${f[4]};
    height: ${f[3]};
    ${f[1]}
  `)&&he(e,"style",o)},i:Fe,o:Fe,d(f){f&&Be(e),t[27](null)}}}let ku="block";function xw(t,e,o){let f,p,{alwaysShowEngAddr:m=!1}=e,{animation:b=!1}=e,{autoClose:h=!1}=e,{autoMapping:i=!0}=e,{autoResize:a=!1}=e,{defaultQuery:c=null}=e,{errorMessage:n="<p>\uD604\uC7AC Daum \uC6B0\uD3B8\uBC88\uD638 \uC11C\uBE44\uC2A4\uB97C \uC774\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.</p>"}=e,{height:s="400px"}=e,{hideEngBtn:r=!1}=e,{hideMapBtn:u=!1}=e,{maxSuggestItems:d=10}=e,{pleaseReadGuide:l=0}=e,{pleaseReadGuideTimer:g=1.5}=e,{scriptUrl:v="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"}=e,{shorthand:_=!0}=e,{showMoreHName:y=!1}=e,{style:C=""}=e,{submitMode:S=!0}=e,{theme:x=null}=e,{useSuggest:T=!0}=e,{useBannerLink:D=!0}=e,{width:j="100%"}=e,{focusInput:U=!0}=e,{focusContent:H=!0}=e,Q=null;const K=Li();dl(()=>{const P="daum_postcode";if(!!document.getElementById(P))re();else{const N=document.createElement("script");N.src=v,N.onload=()=>re(),N.onerror=A=>se(A),N.id=P,document.body.appendChild(N)}});const re=()=>{window.daum.postcode.load(()=>{new window.daum.Postcode({oncomplete:oe,onsearch:ae,onresize:R,alwaysShowEngAddr:m,animation:b,autoMapping:i,autoResize:a,height:"100%",hideEngBtn:r,hideMapBtn:u,maxSuggestItems:d,pleaseReadGuide:l,pleaseReadGuideTimer:g,shorthand:_,showMoreHName:y,submitMode:S,theme:x,useSuggest:T,useBannerLink:D,width:"100%",focusInput:U,focusContent:H}).embed(Q,{q:c,autoClose:h})})},se=P=>{P.target.remove(),P=!0,K("error")},oe=P=>{K("complete",{data:P})},ae=P=>{K("search",{data:P})},R=P=>{a&&o(5,s=P.height)};function W(P){sr[P?"unshift":"push"](()=>{Q=P,o(2,Q)})}return t.$$set=P=>{"alwaysShowEngAddr"in P&&o(6,m=P.alwaysShowEngAddr),"animation"in P&&o(7,b=P.animation),"autoClose"in P&&o(8,h=P.autoClose),"autoMapping"in P&&o(9,i=P.autoMapping),"autoResize"in P&&o(10,a=P.autoResize),"defaultQuery"in P&&o(11,c=P.defaultQuery),"errorMessage"in P&&o(0,n=P.errorMessage),"height"in P&&o(5,s=P.height),"hideEngBtn"in P&&o(12,r=P.hideEngBtn),"hideMapBtn"in P&&o(13,u=P.hideMapBtn),"maxSuggestItems"in P&&o(14,d=P.maxSuggestItems),"pleaseReadGuide"in P&&o(15,l=P.pleaseReadGuide),"pleaseReadGuideTimer"in P&&o(16,g=P.pleaseReadGuideTimer),"scriptUrl"in P&&o(17,v=P.scriptUrl),"shorthand"in P&&o(18,_=P.shorthand),"showMoreHName"in P&&o(19,y=P.showMoreHName),"style"in P&&o(1,C=P.style),"submitMode"in P&&o(20,S=P.submitMode),"theme"in P&&o(21,x=P.theme),"useSuggest"in P&&o(22,T=P.useSuggest),"useBannerLink"in P&&o(23,D=P.useBannerLink),"width"in P&&o(24,j=P.width),"focusInput"in P&&o(25,U=P.focusInput),"focusContent"in P&&o(26,H=P.focusContent)},t.$$.update=()=>{t.$$.dirty[0]&16777216&&o(4,f=j),t.$$.dirty[0]&32&&o(3,p=s)},[n,C,Q,p,f,s,m,b,h,i,a,c,r,u,d,l,g,v,_,y,S,x,T,D,j,U,H,W]}class v1 extends Pr{constructor(e){super();Ar(this,e,xw,Sw,lr,{alwaysShowEngAddr:6,animation:7,autoClose:8,autoMapping:9,autoResize:10,defaultQuery:11,errorMessage:0,height:5,hideEngBtn:12,hideMapBtn:13,maxSuggestItems:14,pleaseReadGuide:15,pleaseReadGuideTimer:16,scriptUrl:17,shorthand:18,showMoreHName:19,style:1,submitMode:20,theme:21,useSuggest:22,useBannerLink:23,width:24,focusInput:25,focusContent:26},null,[-1,-1])}}function Tw(t){let e,o,f;return{c(){e=De("div"),he(e,"class","sc-carousel-dot__dot svelte-1uelw0b"),Je(e,"sc-carousel-dot__dot_active",t[0])},m(p,m){Xe(p,e,m),o||(f=Ye(e,"click",t[1]),o=!0)},p(p,[m]){m&1&&Je(e,"sc-carousel-dot__dot_active",p[0])},i:Fe,o:Fe,d(p){p&&Be(e),o=!1,f()}}}function Ew(t,e,o){let{active:f=!1}=e;function p(m){uf.call(this,t,m)}return t.$$set=m=>{"active"in m&&o(0,f=m.active)},[f,p]}class Ow extends Pr{constructor(e){super();Ar(this,e,Ew,Tw,lr,{active:0})}}function Fu(t,e,o){const f=t.slice();return f[5]=e[o],f[7]=o,f}function Ru(t,e){let o,f,p,m;function b(){return e[3](e[7])}return f=new Ow({props:{active:e[1]===e[7]}}),f.$on("click",b),{key:t,first:null,c(){o=De("div"),ar(f.$$.fragment),p=rr(),he(o,"class","sc-carousel-dots__dot-container svelte-1oj5bge"),this.first=o},m(h,i){Xe(h,o,i),Gt(f,o,null),Ne(o,p),m=!0},p(h,i){e=h;const a={};i&3&&(a.active=e[1]===e[7]),f.$set(a)},i(h){m||(ye(f.$$.fragment,h),m=!0)},o(h){Ee(f.$$.fragment,h),m=!1},d(h){h&&Be(o),Yt(f)}}}function Aw(t){let e,o=[],f=new Map,p,m=Array(t[0]);const b=h=>h[7];for(let h=0;h<m.length;h+=1){let i=Fu(t,m,h),a=b(i);f.set(a,o[h]=Ru(a,i))}return{c(){e=De("div");for(let h=0;h<o.length;h+=1)o[h].c();he(e,"class","sc-carousel-dots__container svelte-1oj5bge")},m(h,i){Xe(h,e,i);for(let a=0;a<o.length;a+=1)o[a].m(e,null);p=!0},p(h,[i]){i&7&&(m=Array(h[0]),Rt(),o=Nd(o,i,b,1,h,m,f,e,df,Ru,null,Fu),Mt())},i(h){if(!p){for(let i=0;i<m.length;i+=1)ye(o[i]);p=!0}},o(h){for(let i=0;i<o.length;i+=1)Ee(o[i]);p=!1},d(h){h&&Be(e);for(let i=0;i<o.length;i+=1)o[i].d()}}}function Pw(t,e,o){const f=Li();let{pagesCount:p=1}=e,{currentPageIndex:m=0}=e;function b(i){f("pageChange",i)}const h=i=>b(i);return t.$$set=i=>{"pagesCount"in i&&o(0,p=i.pagesCount),"currentPageIndex"in i&&o(1,m=i.currentPageIndex)},[p,m,b,h]}class Dw extends Pr{constructor(e){super();Ar(this,e,Pw,Aw,lr,{pagesCount:0,currentPageIndex:1})}}const Rn="prev",Er="next";function kw(t){let e,o,f,p;return{c(){e=De("div"),o=De("i"),he(o,"class","sc-carousel-arrow__arrow svelte-9ztt4p"),Je(o,"sc-carousel-arrow__arrow-next",t[0]===Er),Je(o,"sc-carousel-arrow__arrow-prev",t[0]===Rn),he(e,"class","sc-carousel-arrow__circle svelte-9ztt4p"),Je(e,"sc-carousel-arrow__circle_disabled",t[1])},m(m,b){Xe(m,e,b),Ne(e,o),f||(p=Ye(e,"click",t[2]),f=!0)},p(m,[b]){b&1&&Je(o,"sc-carousel-arrow__arrow-next",m[0]===Er),b&1&&Je(o,"sc-carousel-arrow__arrow-prev",m[0]===Rn),b&2&&Je(e,"sc-carousel-arrow__circle_disabled",m[1])},i:Fe,o:Fe,d(m){m&&Be(e),f=!1,p()}}}function Fw(t,e,o){let{direction:f=Er}=e,{disabled:p=!1}=e;function m(b){uf.call(this,t,b)}return t.$$set=b=>{"direction"in b&&o(0,f=b.direction),"disabled"in b&&o(1,p=b.disabled)},[f,p,m]}class ld extends Pr{constructor(e){super();Ar(this,e,Fw,kw,lr,{direction:0,disabled:1})}}function Rw(t){let e;return{c(){e=De("div"),he(e,"class","sc-carousel-progress__indicator svelte-nuyenl"),gr(e,"width",t[0]+"%")},m(o,f){Xe(o,e,f)},p(o,[f]){f&1&&gr(e,"width",o[0]+"%")},i:Fe,o:Fe,d(o){o&&Be(e)}}}const Mu=100;function Mw(t,e,o){let f,{value:p=0}=e;return t.$$set=m=>{"value"in m&&o(1,p=m.value)},t.$$.update=()=>{t.$$.dirty&2&&o(0,f=Math.min(Math.max(p*Mu,0),Mu))},[f,p]}class Iw extends Pr{constructor(e){super();Ar(this,e,Mw,Rw,lr,{value:1})}}function Lw(t,e){t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}function Bw(t,e){t.removeEventListener("mousedown",e),t.removeEventListener("touchstart",e)}function jw(t,e){t.addEventListener("mouseup",e),t.addEventListener("touchend",e)}function Iu(t,e){t.removeEventListener("mouseup",e),t.removeEventListener("touchend",e)}function Nw(t,e){t.addEventListener("mousemove",e),t.addEventListener("touchmove",e)}function Lu(t,e){t.removeEventListener("mousemove",e),t.removeEventListener("touchmove",e)}function uc(t){return function(e,o){t.dispatchEvent(new CustomEvent(e,{detail:o}))}}const Uw=110,Hw=9,Ww=111,zw=20;function Oa(t){if("TouchEvent"in window&&t instanceof TouchEvent){const e=t.touches[0];return{x:e?e.clientX:0,y:e?e.clientY:0}}return{x:t.clientX,y:t.clientY}}function Xw(t,{thresholdProvider:e}){const o=uc(t);let f,p,m=0,b,h=!1;function i(){return Date.now()-b>=Ww&&Math.abs(m)>=zw}function a(s){b=Date.now(),m=0,h=!0;const r=Oa(s);f=r.x,p=r.y,o("swipeStart",{x:f,y:p}),Nw(window,c),jw(window,n)}function c(s){if(!h)return;const r=Oa(s),u=r.x-f,d=r.y-p;f=r.x,p=r.y,o("swipeMove",{x:f,y:p,dx:u,dy:d}),u!==0&&Math.sign(u)!==Math.sign(m)&&(m=0),m+=u,Math.abs(m)>e()&&(o("swipeThresholdReached",{direction:m>0?Rn:Er}),Iu(window,n),Lu(window,c))}function n(s){if(s.preventDefault(),Iu(window,n),Lu(window,c),h=!1,!i()){o("swipeFailed");return}const r=Oa(s);o("swipeEnd",{x:r.x,y:r.y})}return Lw(t,a),{destroy(){Bw(t,a)}}}function Gw(t,e){t.addEventListener("mouseenter",e)}function Yw(t,e){t.removeEventListener("mouseenter",e)}function Vw(t,e){t.addEventListener("mouseleave",e)}function Bu(t,e){t.removeEventListener("mouseleave",e)}function qw(t){const e=uc(t);function o(){Vw(t,f),e("hovered",{value:!0})}function f(){e("hovered",{value:!1}),Bu(t,f)}return Gw(t,o),{destroy(){Yw(t,o),Bu(t,f)}}}const Kw=(t,e)=>{const o=e.x-t.x,f=e.y-t.y;return Math.sqrt(o*o+f*f)};function xn(t,e,o){return Math.max(t,Math.min(e,o))}function Jw(t,e){t.addEventListener("touchstart",e,{passive:!0})}function Qw(t,e){t.removeEventListener("touchstart",e)}function $w(t,e){t.addEventListener("touchend",e)}function ju(t,e){t.removeEventListener("touchend",e)}function Zw(t){const e=uc(t);let o=0,f={x:0,y:0};function p({tapEndedAt:h,tapEndedPos:i}){const a=h-o,c=Kw(f,i);return a<=Uw&&c<=Hw}function m(h){o=Date.now();const i=h.touches[0];f={x:i.clientX,y:i.clientY},$w(t,b)}function b(h){h.preventDefault(),ju(t,b);const i=h.changedTouches[0];p({tapEndedAt:Date.now(),tapEndedPos:{x:i.clientX,y:i.clientY}})&&e("tapped")}return Jw(t,m),{destroy(){Qw(t,m),ju(t,b)}}}function eS({currentParticleIndex:t,particlesCount:e,clonesCountHead:o,clonesCountTotal:f,particlesToScroll:p}){return t===e-o?0:t===0?cd({particlesCountWithoutClones:e-f,particlesToScroll:p})-1:Math.floor((t-o)/p)}function tS({currentParticleIndex:t,particlesToScroll:e}){return Math.ceil(t/e)}function rS({currentParticleIndex:t,particlesCount:e,clonesCountHead:o,clonesCountTotal:f,infinite:p,particlesToScroll:m}){return p?eS({currentParticleIndex:t,particlesCount:e,clonesCountHead:o,clonesCountTotal:f,particlesToScroll:m}):tS({currentParticleIndex:t,particlesToScroll:m})}function cd({particlesCountWithoutClones:t,particlesToScroll:e}){return Math.ceil(t/e)}function nS({particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:o}){const f=ud({particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:o});return Math.ceil(t/e)-f}function iS({infinite:t,particlesCountWithoutClones:e,particlesToScroll:o,particlesToShow:f}){return t?cd({particlesCountWithoutClones:e,particlesToScroll:o}):nS({particlesCountWithoutClones:e,particlesToScroll:o,particlesToShow:f})}function sS({pageIndex:t,clonesCountHead:e,clonesCountTail:o,particlesToScroll:f,particlesCount:p}){return xn(0,Math.min(e+t*f,p-o),p-1)}function oS({pageIndex:t,particlesToScroll:e,particlesCount:o,particlesToShow:f}){return xn(0,Math.min(t*e,o-f),o-1)}function Aa({infinite:t,pageIndex:e,clonesCountHead:o,clonesCountTail:f,particlesToScroll:p,particlesCount:m,particlesToShow:b}){return t?sS({pageIndex:e,clonesCountHead:o,clonesCountTail:f,particlesToScroll:p,particlesCount:m}):oS({pageIndex:e,particlesToScroll:p,particlesCount:m,particlesToShow:b})}function aS({particlesContainerChildren:t,particleWidth:e}){for(let o=0;o<t.length;o++)t[o].style.minWidth=`${e}px`,t[o].style.maxWidth=`${e}px`}function ud({particlesToScroll:t,particlesToShow:e,particlesCountWithoutClones:o}){const f=t-e;let p=e;for(;;){const m=o-p-f;if(m<e)return Math.max(m,0);p+=e+f}}function lS(t){return new ResizeObserver(e=>{t({width:e[0].contentRect.width})})}function cS({clonesCountHead:t,clonesCountTail:e,particlesContainerChildren:o}){const f=[];for(let b=0;b<e;b++)f.push(o[b].cloneNode(!0));const p=[],m=o.length;for(let b=m-1;b>m-1-t;b--)p.push(o[b].cloneNode(!0));return{clonesToAppend:f,clonesToPrepend:p}}function uS({particlesContainer:t,clonesToAppend:e,clonesToPrepend:o}){for(let f=0;f<e.length;f++)t.append(e[f]);for(let f=0;f<o.length;f++)t.prepend(o[f])}function fS({infinite:t,particlesToShow:e,partialPageSize:o}){const f=t?{head:Math.ceil(o||e),tail:Math.ceil(e)}:{head:0,tail:0};return ti(_t({},f),{total:f.head+f.tail})}const gi=(t,e,o)=>{if(t&&t.hasOwnProperty(e))return t[e];if(o===void 0)throw new Error(`Required arg "${e}" was not provided`);return o},ll=t=>e=>{t[e]&&t[e]()};var hS="Expected a function",fd="__lodash_hash_undefined__",hd=1/0,dS="[object Function]",gS="[object GeneratorFunction]",pS="[object Symbol]",mS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vS=/^\w*$/,yS=/^\./,_S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bS=/[\\^$.*+?()[\]{}|]/g,CS=/\\(\\)?/g,wS=/^\[object .+?Constructor\]$/,SS=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,xS=typeof self=="object"&&self&&self.Object===Object&&self,fc=SS||xS||Function("return this")();function TS(t,e){return t==null?void 0:t[e]}function ES(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var OS=Array.prototype,AS=Function.prototype,dd=Object.prototype,Pa=fc["__core-js_shared__"],Nu=function(){var t=/[^.]+$/.exec(Pa&&Pa.keys&&Pa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gd=AS.toString,hc=dd.hasOwnProperty,pd=dd.toString,PS=RegExp("^"+gd.call(hc).replace(bS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uu=fc.Symbol,DS=OS.splice,kS=md(fc,"Map"),ki=md(Object,"create"),Hu=Uu?Uu.prototype:void 0,Wu=Hu?Hu.toString:void 0;function qr(t){var e=-1,o=t?t.length:0;for(this.clear();++e<o;){var f=t[e];this.set(f[0],f[1])}}function FS(){this.__data__=ki?ki(null):{}}function RS(t){return this.has(t)&&delete this.__data__[t]}function MS(t){var e=this.__data__;if(ki){var o=e[t];return o===fd?void 0:o}return hc.call(e,t)?e[t]:void 0}function IS(t){var e=this.__data__;return ki?e[t]!==void 0:hc.call(e,t)}function LS(t,e){var o=this.__data__;return o[t]=ki&&e===void 0?fd:e,this}qr.prototype.clear=FS;qr.prototype.delete=RS;qr.prototype.get=MS;qr.prototype.has=IS;qr.prototype.set=LS;function Wn(t){var e=-1,o=t?t.length:0;for(this.clear();++e<o;){var f=t[e];this.set(f[0],f[1])}}function BS(){this.__data__=[]}function jS(t){var e=this.__data__,o=po(e,t);if(o<0)return!1;var f=e.length-1;return o==f?e.pop():DS.call(e,o,1),!0}function NS(t){var e=this.__data__,o=po(e,t);return o<0?void 0:e[o][1]}function US(t){return po(this.__data__,t)>-1}function HS(t,e){var o=this.__data__,f=po(o,t);return f<0?o.push([t,e]):o[f][1]=e,this}Wn.prototype.clear=BS;Wn.prototype.delete=jS;Wn.prototype.get=NS;Wn.prototype.has=US;Wn.prototype.set=HS;function $r(t){var e=-1,o=t?t.length:0;for(this.clear();++e<o;){var f=t[e];this.set(f[0],f[1])}}function WS(){this.__data__={hash:new qr,map:new(kS||Wn),string:new qr}}function zS(t){return mo(this,t).delete(t)}function XS(t){return mo(this,t).get(t)}function GS(t){return mo(this,t).has(t)}function YS(t,e){return mo(this,t).set(t,e),this}$r.prototype.clear=WS;$r.prototype.delete=zS;$r.prototype.get=XS;$r.prototype.has=GS;$r.prototype.set=YS;function po(t,e){for(var o=t.length;o--;)if(nx(t[o][0],e))return o;return-1}function VS(t,e){e=QS(e,t)?[e]:JS(e);for(var o=0,f=e.length;t!=null&&o<f;)t=t[tx(e[o++])];return o&&o==f?t:void 0}function qS(t){if(!yd(t)||ZS(t))return!1;var e=ix(t)||ES(t)?PS:wS;return e.test(rx(t))}function KS(t){if(typeof t=="string")return t;if(gc(t))return Wu?Wu.call(t):"";var e=t+"";return e=="0"&&1/t==-hd?"-0":e}function JS(t){return vd(t)?t:ex(t)}function mo(t,e){var o=t.__data__;return $S(e)?o[typeof e=="string"?"string":"hash"]:o.map}function md(t,e){var o=TS(t,e);return qS(o)?o:void 0}function QS(t,e){if(vd(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||gc(t)?!0:vS.test(t)||!mS.test(t)||e!=null&&t in Object(e)}function $S(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ZS(t){return!!Nu&&Nu in t}var ex=dc(function(t){t=ox(t);var e=[];return yS.test(t)&&e.push(""),t.replace(_S,function(o,f,p,m){e.push(p?m.replace(CS,"$1"):f||o)}),e});function tx(t){if(typeof t=="string"||gc(t))return t;var e=t+"";return e=="0"&&1/t==-hd?"-0":e}function rx(t){if(t!=null){try{return gd.call(t)}catch{}try{return t+""}catch{}}return""}function dc(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(hS);var o=function(){var f=arguments,p=e?e.apply(this,f):f[0],m=o.cache;if(m.has(p))return m.get(p);var b=t.apply(this,f);return o.cache=m.set(p,b),b};return o.cache=new(dc.Cache||$r),o}dc.Cache=$r;function nx(t,e){return t===e||t!==t&&e!==e}var vd=Array.isArray;function ix(t){var e=yd(t)?pd.call(t):"";return e==dS||e==gS}function yd(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function sx(t){return!!t&&typeof t=="object"}function gc(t){return typeof t=="symbol"||sx(t)&&pd.call(t)==pS}function ox(t){return t==null?"":KS(t)}function ax(t,e,o){var f=t==null?void 0:VS(t,e);return f===void 0?o:f}var Cs=ax,cl={exports:{}};(function(t,e){var o=200,f="__lodash_hash_undefined__",p=9007199254740991,m="[object Arguments]",b="[object Array]",h="[object Boolean]",i="[object Date]",a="[object Error]",c="[object Function]",n="[object GeneratorFunction]",s="[object Map]",r="[object Number]",u="[object Object]",d="[object Promise]",l="[object RegExp]",g="[object Set]",v="[object String]",_="[object Symbol]",y="[object WeakMap]",C="[object ArrayBuffer]",S="[object DataView]",x="[object Float32Array]",T="[object Float64Array]",D="[object Int8Array]",j="[object Int16Array]",U="[object Int32Array]",H="[object Uint8Array]",Q="[object Uint8ClampedArray]",K="[object Uint16Array]",re="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,oe=/\w*$/,ae=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,W={};W[m]=W[b]=W[C]=W[S]=W[h]=W[i]=W[x]=W[T]=W[D]=W[j]=W[U]=W[s]=W[r]=W[u]=W[l]=W[g]=W[v]=W[_]=W[H]=W[Q]=W[K]=W[re]=!0,W[a]=W[c]=W[y]=!1;var P=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,B=typeof self=="object"&&self&&self.Object===Object&&self,N=P||B||Function("return this")(),A=e&&!e.nodeType&&e,O=A&&!0&&t&&!t.nodeType&&t,M=O&&O.exports===A;function F(w,E){return w.set(E[0],E[1]),w}function q(w,E){return w.add(E),w}function L(w,E){for(var I=-1,te=w?w.length:0;++I<te&&E(w[I],I,w)!==!1;);return w}function Y(w,E){for(var I=-1,te=E.length,me=w.length;++I<te;)w[me+I]=E[I];return w}function V(w,E,I,te){var me=-1,de=w?w.length:0;for(te&&de&&(I=w[++me]);++me<de;)I=E(I,w[me],me,w);return I}function $(w,E){for(var I=-1,te=Array(w);++I<w;)te[I]=E(I);return te}function G(w,E){return w==null?void 0:w[E]}function k(w){var E=!1;if(w!=null&&typeof w.toString!="function")try{E=!!(w+"")}catch{}return E}function z(w){var E=-1,I=Array(w.size);return w.forEach(function(te,me){I[++E]=[me,te]}),I}function J(w,E){return function(I){return w(E(I))}}function X(w){var E=-1,I=Array(w.size);return w.forEach(function(te){I[++E]=te}),I}var ee=Array.prototype,ne=Function.prototype,ue=Object.prototype,le=N["__core-js_shared__"],Z=function(){var w=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),ce=ne.toString,fe=ue.hasOwnProperty,ve=ue.toString,Pe=RegExp("^"+ce.call(fe).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=M?N.Buffer:void 0,pe=N.Symbol,ge=N.Uint8Array,be=J(Object.getPrototypeOf,Object),Me=Object.create,dt=ue.propertyIsEnumerable,ie=ee.splice,Ie=Object.getOwnPropertySymbols,Le=_e?_e.isBuffer:void 0,Re=J(Object.keys,Object),st=Dt(N,"DataView"),kr=Dt(N,"Map"),Pt=Dt(N,"Promise"),Zr=Dt(N,"Set"),zn=Dt(N,"WeakMap"),Fr=Dt(Object,"create"),Xn=gt(st),Rr=gt(kr),Gn=gt(Pt),Yn=gt(Zr),Vn=gt(zn),cr=pe?pe.prototype:void 0,Wi=cr?cr.valueOf:void 0;function Jt(w){var E=-1,I=w?w.length:0;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function vo(){this.__data__=Fr?Fr(null):{}}function yo(w){return this.has(w)&&delete this.__data__[w]}function _o(w){var E=this.__data__;if(Fr){var I=E[w];return I===f?void 0:I}return fe.call(E,w)?E[w]:void 0}function zi(w){var E=this.__data__;return Fr?E[w]!==void 0:fe.call(E,w)}function qn(w,E){var I=this.__data__;return I[w]=Fr&&E===void 0?f:E,this}Jt.prototype.clear=vo,Jt.prototype.delete=yo,Jt.prototype.get=_o,Jt.prototype.has=zi,Jt.prototype.set=qn;function $e(w){var E=-1,I=w?w.length:0;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function bo(){this.__data__=[]}function Co(w){var E=this.__data__,I=tn(E,w);if(I<0)return!1;var te=E.length-1;return I==te?E.pop():ie.call(E,I,1),!0}function wo(w){var E=this.__data__,I=tn(E,w);return I<0?void 0:E[I][1]}function So(w){return tn(this.__data__,w)>-1}function xo(w,E){var I=this.__data__,te=tn(I,w);return te<0?I.push([w,E]):I[te][1]=E,this}$e.prototype.clear=bo,$e.prototype.delete=Co,$e.prototype.get=wo,$e.prototype.has=So,$e.prototype.set=xo;function ot(w){var E=-1,I=w?w.length:0;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function To(){this.__data__={hash:new Jt,map:new(kr||$e),string:new Jt}}function Eo(w){return Ir(this,w).delete(w)}function Oo(w){return Ir(this,w).get(w)}function Ao(w){return Ir(this,w).has(w)}function Po(w,E){return Ir(this,w).set(w,E),this}ot.prototype.clear=To,ot.prototype.delete=Eo,ot.prototype.get=Oo,ot.prototype.has=Ao,ot.prototype.set=Po;function vt(w){this.__data__=new $e(w)}function Do(){this.__data__=new $e}function ko(w){return this.__data__.delete(w)}function Fo(w){return this.__data__.get(w)}function Ro(w){return this.__data__.has(w)}function Mo(w,E){var I=this.__data__;if(I instanceof $e){var te=I.__data__;if(!kr||te.length<o-1)return te.push([w,E]),this;I=this.__data__=new ot(te)}return I.set(w,E),this}vt.prototype.clear=Do,vt.prototype.delete=ko,vt.prototype.get=Fo,vt.prototype.has=Ro,vt.prototype.set=Mo;function en(w,E){var I=$n(w)||nn(w)?$(w.length,String):[],te=I.length,me=!!te;for(var de in w)(E||fe.call(w,de))&&!(me&&(de=="length"||qo(de,te)))&&I.push(de);return I}function Xi(w,E,I){var te=w[E];(!(fe.call(w,E)&&Ki(te,I))||I===void 0&&!(E in w))&&(w[E]=I)}function tn(w,E){for(var I=w.length;I--;)if(Ki(w[I][0],E))return I;return-1}function Bt(w,E){return w&&Qn(E,ei(E),w)}function Kn(w,E,I,te,me,de,Ce){var xe;if(te&&(xe=de?te(w,me,de,Ce):te(w)),xe!==void 0)return xe;if(!Nt(w))return w;var Ue=$n(w);if(Ue){if(xe=Yo(w),!E)return zo(w,xe)}else{var Oe=$t(w),at=Oe==c||Oe==n;if(Ji(w))return rn(w,E);if(Oe==u||Oe==m||at&&!de){if(k(w))return de?w:{};if(xe=jt(at?{}:w),!E)return Xo(w,Bt(xe,w))}else{if(!W[Oe])return de?w:{};xe=Vo(w,Oe,Kn,E)}}Ce||(Ce=new vt);var yt=Ce.get(w);if(yt)return yt;if(Ce.set(w,xe),!Ue)var Ge=I?Go(w):ei(w);return L(Ge||w,function(lt,Ze){Ge&&(Ze=lt,lt=w[Ze]),Xi(xe,Ze,Kn(lt,E,I,te,Ze,w,Ce))}),xe}function Io(w){return Nt(w)?Me(w):{}}function Lo(w,E,I){var te=E(w);return $n(w)?te:Y(te,I(w))}function Bo(w){return ve.call(w)}function jo(w){if(!Nt(w)||Jo(w))return!1;var E=Zn(w)||k(w)?Pe:ae;return E.test(gt(w))}function No(w){if(!Vi(w))return Re(w);var E=[];for(var I in Object(w))fe.call(w,I)&&I!="constructor"&&E.push(I);return E}function rn(w,E){if(E)return w.slice();var I=new w.constructor(w.length);return w.copy(I),I}function Jn(w){var E=new w.constructor(w.byteLength);return new ge(E).set(new ge(w)),E}function Mr(w,E){var I=E?Jn(w.buffer):w.buffer;return new w.constructor(I,w.byteOffset,w.byteLength)}function Gi(w,E,I){var te=E?I(z(w),!0):z(w);return V(te,F,new w.constructor)}function Yi(w){var E=new w.constructor(w.source,oe.exec(w));return E.lastIndex=w.lastIndex,E}function Uo(w,E,I){var te=E?I(X(w),!0):X(w);return V(te,q,new w.constructor)}function Ho(w){return Wi?Object(Wi.call(w)):{}}function Wo(w,E){var I=E?Jn(w.buffer):w.buffer;return new w.constructor(I,w.byteOffset,w.length)}function zo(w,E){var I=-1,te=w.length;for(E||(E=Array(te));++I<te;)E[I]=w[I];return E}function Qn(w,E,I,te){I||(I={});for(var me=-1,de=E.length;++me<de;){var Ce=E[me],xe=te?te(I[Ce],w[Ce],Ce,I,w):void 0;Xi(I,Ce,xe===void 0?w[Ce]:xe)}return I}function Xo(w,E){return Qn(w,Qt(w),E)}function Go(w){return Lo(w,ei,Qt)}function Ir(w,E){var I=w.__data__;return Ko(E)?I[typeof E=="string"?"string":"hash"]:I.map}function Dt(w,E){var I=G(w,E);return jo(I)?I:void 0}var Qt=Ie?J(Ie,Object):$o,$t=Bo;(st&&$t(new st(new ArrayBuffer(1)))!=S||kr&&$t(new kr)!=s||Pt&&$t(Pt.resolve())!=d||Zr&&$t(new Zr)!=g||zn&&$t(new zn)!=y)&&($t=function(w){var E=ve.call(w),I=E==u?w.constructor:void 0,te=I?gt(I):void 0;if(te)switch(te){case Xn:return S;case Rr:return s;case Gn:return d;case Yn:return g;case Vn:return y}return E});function Yo(w){var E=w.length,I=w.constructor(E);return E&&typeof w[0]=="string"&&fe.call(w,"index")&&(I.index=w.index,I.input=w.input),I}function jt(w){return typeof w.constructor=="function"&&!Vi(w)?Io(be(w)):{}}function Vo(w,E,I,te){var me=w.constructor;switch(E){case C:return Jn(w);case h:case i:return new me(+w);case S:return Mr(w,te);case x:case T:case D:case j:case U:case H:case Q:case K:case re:return Wo(w,te);case s:return Gi(w,te,I);case r:case v:return new me(w);case l:return Yi(w);case g:return Uo(w,te,I);case _:return Ho(w)}}function qo(w,E){return E=E==null?p:E,!!E&&(typeof w=="number"||R.test(w))&&w>-1&&w%1==0&&w<E}function Ko(w){var E=typeof w;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?w!=="__proto__":w===null}function Jo(w){return!!Z&&Z in w}function Vi(w){var E=w&&w.constructor,I=typeof E=="function"&&E.prototype||ue;return w===I}function gt(w){if(w!=null){try{return ce.call(w)}catch{}try{return w+""}catch{}}return""}function qi(w){return Kn(w,!0,!0)}function Ki(w,E){return w===E||w!==w&&E!==E}function nn(w){return Qo(w)&&fe.call(w,"callee")&&(!dt.call(w,"callee")||ve.call(w)==m)}var $n=Array.isArray;function sn(w){return w!=null&&Qi(w.length)&&!Zn(w)}function Qo(w){return $i(w)&&sn(w)}var Ji=Le||Zo;function Zn(w){var E=Nt(w)?ve.call(w):"";return E==c||E==n}function Qi(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=p}function Nt(w){var E=typeof w;return!!w&&(E=="object"||E=="function")}function $i(w){return!!w&&typeof w=="object"}function ei(w){return sn(w)?en(w):No(w)}function $o(){return[]}function Zo(){return!1}t.exports=qi})(cl,cl.exports);var lx=cl.exports,ul={exports:{}};(function(t,e){var o=200,f="__lodash_hash_undefined__",p=1,m=2,b=9007199254740991,h="[object Arguments]",i="[object Array]",a="[object AsyncFunction]",c="[object Boolean]",n="[object Date]",s="[object Error]",r="[object Function]",u="[object GeneratorFunction]",d="[object Map]",l="[object Number]",g="[object Null]",v="[object Object]",_="[object Promise]",y="[object Proxy]",C="[object RegExp]",S="[object Set]",x="[object String]",T="[object Symbol]",D="[object Undefined]",j="[object WeakMap]",U="[object ArrayBuffer]",H="[object DataView]",Q="[object Float32Array]",K="[object Float64Array]",re="[object Int8Array]",se="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",R="[object Uint8ClampedArray]",W="[object Uint16Array]",P="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,N=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,O={};O[Q]=O[K]=O[re]=O[se]=O[oe]=O[ae]=O[R]=O[W]=O[P]=!0,O[h]=O[i]=O[U]=O[c]=O[H]=O[n]=O[s]=O[r]=O[d]=O[l]=O[v]=O[C]=O[S]=O[x]=O[j]=!1;var M=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,F=typeof self=="object"&&self&&self.Object===Object&&self,q=M||F||Function("return this")(),L=e&&!e.nodeType&&e,Y=L&&!0&&t&&!t.nodeType&&t,V=Y&&Y.exports===L,$=V&&M.process,G=function(){try{return $&&$.binding&&$.binding("util")}catch{}}(),k=G&&G.isTypedArray;function z(w,E){for(var I=-1,te=w==null?0:w.length,me=0,de=[];++I<te;){var Ce=w[I];E(Ce,I,w)&&(de[me++]=Ce)}return de}function J(w,E){for(var I=-1,te=E.length,me=w.length;++I<te;)w[me+I]=E[I];return w}function X(w,E){for(var I=-1,te=w==null?0:w.length;++I<te;)if(E(w[I],I,w))return!0;return!1}function ee(w,E){for(var I=-1,te=Array(w);++I<w;)te[I]=E(I);return te}function ne(w){return function(E){return w(E)}}function ue(w,E){return w.has(E)}function le(w,E){return w==null?void 0:w[E]}function Z(w){var E=-1,I=Array(w.size);return w.forEach(function(te,me){I[++E]=[me,te]}),I}function ce(w,E){return function(I){return w(E(I))}}function fe(w){var E=-1,I=Array(w.size);return w.forEach(function(te){I[++E]=te}),I}var ve=Array.prototype,Pe=Function.prototype,_e=Object.prototype,pe=q["__core-js_shared__"],ge=Pe.toString,be=_e.hasOwnProperty,Me=function(){var w=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),dt=_e.toString,ie=RegExp("^"+ge.call(be).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=V?q.Buffer:void 0,Le=q.Symbol,Re=q.Uint8Array,st=_e.propertyIsEnumerable,kr=ve.splice,Pt=Le?Le.toStringTag:void 0,Zr=Object.getOwnPropertySymbols,zn=Ie?Ie.isBuffer:void 0,Fr=ce(Object.keys,Object),Xn=Qt(q,"DataView"),Rr=Qt(q,"Map"),Gn=Qt(q,"Promise"),Yn=Qt(q,"Set"),Vn=Qt(q,"WeakMap"),cr=Qt(Object,"create"),Wi=gt(Xn),Jt=gt(Rr),vo=gt(Gn),yo=gt(Yn),_o=gt(Vn),zi=Le?Le.prototype:void 0,qn=zi?zi.valueOf:void 0;function $e(w){var E=-1,I=w==null?0:w.length;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function bo(){this.__data__=cr?cr(null):{},this.size=0}function Co(w){var E=this.has(w)&&delete this.__data__[w];return this.size-=E?1:0,E}function wo(w){var E=this.__data__;if(cr){var I=E[w];return I===f?void 0:I}return be.call(E,w)?E[w]:void 0}function So(w){var E=this.__data__;return cr?E[w]!==void 0:be.call(E,w)}function xo(w,E){var I=this.__data__;return this.size+=this.has(w)?0:1,I[w]=cr&&E===void 0?f:E,this}$e.prototype.clear=bo,$e.prototype.delete=Co,$e.prototype.get=wo,$e.prototype.has=So,$e.prototype.set=xo;function ot(w){var E=-1,I=w==null?0:w.length;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function To(){this.__data__=[],this.size=0}function Eo(w){var E=this.__data__,I=rn(E,w);if(I<0)return!1;var te=E.length-1;return I==te?E.pop():kr.call(E,I,1),--this.size,!0}function Oo(w){var E=this.__data__,I=rn(E,w);return I<0?void 0:E[I][1]}function Ao(w){return rn(this.__data__,w)>-1}function Po(w,E){var I=this.__data__,te=rn(I,w);return te<0?(++this.size,I.push([w,E])):I[te][1]=E,this}ot.prototype.clear=To,ot.prototype.delete=Eo,ot.prototype.get=Oo,ot.prototype.has=Ao,ot.prototype.set=Po;function vt(w){var E=-1,I=w==null?0:w.length;for(this.clear();++E<I;){var te=w[E];this.set(te[0],te[1])}}function Do(){this.size=0,this.__data__={hash:new $e,map:new(Rr||ot),string:new $e}}function ko(w){var E=Dt(this,w).delete(w);return this.size-=E?1:0,E}function Fo(w){return Dt(this,w).get(w)}function Ro(w){return Dt(this,w).has(w)}function Mo(w,E){var I=Dt(this,w),te=I.size;return I.set(w,E),this.size+=I.size==te?0:1,this}vt.prototype.clear=Do,vt.prototype.delete=ko,vt.prototype.get=Fo,vt.prototype.has=Ro,vt.prototype.set=Mo;function en(w){var E=-1,I=w==null?0:w.length;for(this.__data__=new vt;++E<I;)this.add(w[E])}function Xi(w){return this.__data__.set(w,f),this}function tn(w){return this.__data__.has(w)}en.prototype.add=en.prototype.push=Xi,en.prototype.has=tn;function Bt(w){var E=this.__data__=new ot(w);this.size=E.size}function Kn(){this.__data__=new ot,this.size=0}function Io(w){var E=this.__data__,I=E.delete(w);return this.size=E.size,I}function Lo(w){return this.__data__.get(w)}function Bo(w){return this.__data__.has(w)}function jo(w,E){var I=this.__data__;if(I instanceof ot){var te=I.__data__;if(!Rr||te.length<o-1)return te.push([w,E]),this.size=++I.size,this;I=this.__data__=new vt(te)}return I.set(w,E),this.size=I.size,this}Bt.prototype.clear=Kn,Bt.prototype.delete=Io,Bt.prototype.get=Lo,Bt.prototype.has=Bo,Bt.prototype.set=jo;function No(w,E){var I=nn(w),te=!I&&Ki(w),me=!I&&!te&&sn(w),de=!I&&!te&&!me&&$i(w),Ce=I||te||me||de,xe=Ce?ee(w.length,String):[],Ue=xe.length;for(var Oe in w)(E||be.call(w,Oe))&&!(Ce&&(Oe=="length"||me&&(Oe=="offset"||Oe=="parent")||de&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||Vo(Oe,Ue)))&&xe.push(Oe);return xe}function rn(w,E){for(var I=w.length;I--;)if(qi(w[I][0],E))return I;return-1}function Jn(w,E,I){var te=E(w);return nn(w)?te:J(te,I(w))}function Mr(w){return w==null?w===void 0?D:g:Pt&&Pt in Object(w)?$t(w):Vi(w)}function Gi(w){return Nt(w)&&Mr(w)==h}function Yi(w,E,I,te,me){return w===E?!0:w==null||E==null||!Nt(w)&&!Nt(E)?w!==w&&E!==E:Uo(w,E,I,te,Yi,me)}function Uo(w,E,I,te,me,de){var Ce=nn(w),xe=nn(E),Ue=Ce?i:jt(w),Oe=xe?i:jt(E);Ue=Ue==h?v:Ue,Oe=Oe==h?v:Oe;var at=Ue==v,yt=Oe==v,Ge=Ue==Oe;if(Ge&&sn(w)){if(!sn(E))return!1;Ce=!0,at=!1}if(Ge&&!at)return de||(de=new Bt),Ce||$i(w)?Qn(w,E,I,te,me,de):Xo(w,E,Ue,I,te,me,de);if(!(I&p)){var lt=at&&be.call(w,"__wrapped__"),Ze=yt&&be.call(E,"__wrapped__");if(lt||Ze){var ur=lt?w.value():w,Zt=Ze?E.value():E;return de||(de=new Bt),me(ur,Zt,I,te,de)}}return Ge?(de||(de=new Bt),Go(w,E,I,te,me,de)):!1}function Ho(w){if(!Qi(w)||Ko(w))return!1;var E=Ji(w)?ie:N;return E.test(gt(w))}function Wo(w){return Nt(w)&&Zn(w.length)&&!!O[Mr(w)]}function zo(w){if(!Jo(w))return Fr(w);var E=[];for(var I in Object(w))be.call(w,I)&&I!="constructor"&&E.push(I);return E}function Qn(w,E,I,te,me,de){var Ce=I&p,xe=w.length,Ue=E.length;if(xe!=Ue&&!(Ce&&Ue>xe))return!1;var Oe=de.get(w);if(Oe&&de.get(E))return Oe==E;var at=-1,yt=!0,Ge=I&m?new en:void 0;for(de.set(w,E),de.set(E,w);++at<xe;){var lt=w[at],Ze=E[at];if(te)var ur=Ce?te(Ze,lt,at,E,w,de):te(lt,Ze,at,w,E,de);if(ur!==void 0){if(ur)continue;yt=!1;break}if(Ge){if(!X(E,function(Zt,Lr){if(!ue(Ge,Lr)&&(lt===Zt||me(lt,Zt,I,te,de)))return Ge.push(Lr)})){yt=!1;break}}else if(!(lt===Ze||me(lt,Ze,I,te,de))){yt=!1;break}}return de.delete(w),de.delete(E),yt}function Xo(w,E,I,te,me,de,Ce){switch(I){case H:if(w.byteLength!=E.byteLength||w.byteOffset!=E.byteOffset)return!1;w=w.buffer,E=E.buffer;case U:return!(w.byteLength!=E.byteLength||!de(new Re(w),new Re(E)));case c:case n:case l:return qi(+w,+E);case s:return w.name==E.name&&w.message==E.message;case C:case x:return w==E+"";case d:var xe=Z;case S:var Ue=te&p;if(xe||(xe=fe),w.size!=E.size&&!Ue)return!1;var Oe=Ce.get(w);if(Oe)return Oe==E;te|=m,Ce.set(w,E);var at=Qn(xe(w),xe(E),te,me,de,Ce);return Ce.delete(w),at;case T:if(qn)return qn.call(w)==qn.call(E)}return!1}function Go(w,E,I,te,me,de){var Ce=I&p,xe=Ir(w),Ue=xe.length,Oe=Ir(E),at=Oe.length;if(Ue!=at&&!Ce)return!1;for(var yt=Ue;yt--;){var Ge=xe[yt];if(!(Ce?Ge in E:be.call(E,Ge)))return!1}var lt=de.get(w);if(lt&&de.get(E))return lt==E;var Ze=!0;de.set(w,E),de.set(E,w);for(var ur=Ce;++yt<Ue;){Ge=xe[yt];var Zt=w[Ge],Lr=E[Ge];if(te)var pc=Ce?te(Lr,Zt,Ge,E,w,de):te(Zt,Lr,Ge,w,E,de);if(!(pc===void 0?Zt===Lr||me(Zt,Lr,I,te,de):pc)){Ze=!1;break}ur||(ur=Ge=="constructor")}if(Ze&&!ur){var Zi=w.constructor,es=E.constructor;Zi!=es&&"constructor"in w&&"constructor"in E&&!(typeof Zi=="function"&&Zi instanceof Zi&&typeof es=="function"&&es instanceof es)&&(Ze=!1)}return de.delete(w),de.delete(E),Ze}function Ir(w){return Jn(w,ei,Yo)}function Dt(w,E){var I=w.__data__;return qo(E)?I[typeof E=="string"?"string":"hash"]:I.map}function Qt(w,E){var I=le(w,E);return Ho(I)?I:void 0}function $t(w){var E=be.call(w,Pt),I=w[Pt];try{w[Pt]=void 0;var te=!0}catch{}var me=dt.call(w);return te&&(E?w[Pt]=I:delete w[Pt]),me}var Yo=Zr?function(w){return w==null?[]:(w=Object(w),z(Zr(w),function(E){return st.call(w,E)}))}:$o,jt=Mr;(Xn&&jt(new Xn(new ArrayBuffer(1)))!=H||Rr&&jt(new Rr)!=d||Gn&&jt(Gn.resolve())!=_||Yn&&jt(new Yn)!=S||Vn&&jt(new Vn)!=j)&&(jt=function(w){var E=Mr(w),I=E==v?w.constructor:void 0,te=I?gt(I):"";if(te)switch(te){case Wi:return H;case Jt:return d;case vo:return _;case yo:return S;case _o:return j}return E});function Vo(w,E){return E=E==null?b:E,!!E&&(typeof w=="number"||A.test(w))&&w>-1&&w%1==0&&w<E}function qo(w){var E=typeof w;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?w!=="__proto__":w===null}function Ko(w){return!!Me&&Me in w}function Jo(w){var E=w&&w.constructor,I=typeof E=="function"&&E.prototype||_e;return w===I}function Vi(w){return dt.call(w)}function gt(w){if(w!=null){try{return ge.call(w)}catch{}try{return w+""}catch{}}return""}function qi(w,E){return w===E||w!==w&&E!==E}var Ki=Gi(function(){return arguments}())?Gi:function(w){return Nt(w)&&be.call(w,"callee")&&!st.call(w,"callee")},nn=Array.isArray;function $n(w){return w!=null&&Zn(w.length)&&!Ji(w)}var sn=zn||Zo;function Qo(w,E){return Yi(w,E)}function Ji(w){if(!Qi(w))return!1;var E=Mr(w);return E==r||E==u||E==a||E==y}function Zn(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=b}function Qi(w){var E=typeof w;return w!=null&&(E=="object"||E=="function")}function Nt(w){return w!=null&&typeof w=="object"}var $i=k?ne(k):Wo;function ei(w){return $n(w)?No(w):zo(w)}function $o(){return[]}function Zo(){return!1}t.exports=Qo})(ul,ul.exports);var cx=ul.exports;const ux=(t,e)=>cx(t,e),fx=t=>Object.keys(t||{}),hx=(t,e)=>{const o={};return t.forEach(f=>{o[f]=e[f]}),o},dx=()=>{const t={},e=(o,f)=>{const{watcherName:p,fn:m}=o,{prop:b,value:h}=f;t[p]||(t[p]={deps:{},fn:m}),t[p].deps[b]=h};return{subscribers:t,subscribe(o,f){o&&e(o,f)},notify(o,f){Object.entries(t).forEach(([p,{deps:m,fn:b}])=>{const h=fx(m);if(h.includes(f)){const i=hx(h,o);ux(m,i)||(t[p].deps=i,b())}})}}},gx=()=>{let t=null;return{targetWatcher(e,o){t={watcherName:e,fn:o},t.fn(),t=null},getTarget(){return t}}};function px(t,e){const o=Cs(t,"data",{}),f=Cs(t,"watch",{}),p=Cs(t,"methods",{}),m=Cs(e,"onChange",()=>{}),{subscribe:b,notify:h,subscribers:i}=dx(),{targetWatcher:a,getTarget:c}=gx();let n;const s={},r=()=>({data:n,methods:s});let u=!1;const d=g=>(...v)=>{u=!0;const _=g(...v);return u=!1,_};Object.entries(p).forEach(([g,v])=>{s[g]=d((..._)=>v(r(),..._)),Object.defineProperty(s[g],"name",{value:g})}),n=new Proxy(lx(o),{get(g,v){return c()&&!u&&b(c(),{prop:v,value:g[v]}),Reflect.get(...arguments)},set(g,v,_){return g[v]===_||(Reflect.set(...arguments),c()||(m&&m(v,_),h(n,v))),!0}}),Object.entries(f).forEach(([g,v])=>{a(g,()=>{v(r())})});const l=[n,s];return l._internal={_getSubscribers(){return i}},l}function mx({pageIndex:t,particlesToShow:e,particlesToScroll:o,particlesCount:f}){const p=t===0?0:e-o,m=t*e-t*p,b=m+Math.max(e,o)-1,h=[];for(let i=m;i<=Math.min(f-1,b);i++)h.push(i);return h}function vx({infinite:t,pageIndex:e,pagesCount:o,particlesCount:f,particlesToShow:p,particlesToScroll:m}){const b=xn(0,e,o-1);let h=b-1,i=b+1;h=t?h<0?o-1:h:Math.max(0,h),i=t?i>o-1?0:i:Math.min(o-1,i);const a=[...new Set([h,b,i,0,o-1])].sort((n,s)=>n-s),c=a.flatMap(n=>mx({pageIndex:n,particlesToShow:p,particlesToScroll:m,particlesCount:f}));return{pageIndexes:a,particleIndexes:[...new Set(c)].sort((n,s)=>n-s)}}const yx=(t,e)=>(t(),setInterval(t,e)),_x=35,zu=1;class bx{constructor({onProgressValueChange:e}){this._onProgressValueChange=e,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(e){this._autoplayDuration=e}start(e){return new Promise(o=>{this.reset();const f=Math.min(_x,this._autoplayDuration);let p=-f;this._interval=yx(async()=>{if(this._paused)return;p+=f;const m=p/this._autoplayDuration;this._onProgressValueChange(m),m>zu&&(this.reset(),await e(),o())},f)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(zu)}}function Cx(t){const e=new bx({onProgressValueChange:m=>{t("progressValue",1-m)}}),o=px({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:m}){m.loaded=vx({infinite:m.infinite,pageIndex:m.currentPageIndex,pagesCount:m.pagesCount,particlesCount:m.particlesCountWithoutClones,particlesToShow:m.particlesToShow,particlesToScroll:m.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:m}){m.currentPageIndex=rS({currentParticleIndex:m.currentParticleIndex,particlesCount:m.particlesCount,clonesCountHead:m.clonesCountHead,clonesCountTotal:m.clonesCountTotal,infinite:m.infinite,particlesToScroll:m.particlesToScroll})},setPartialPageSize({data:m}){m.partialPageSize=ud({particlesToScroll:m.particlesToScroll,particlesToShow:m.particlesToShow,particlesCountWithoutClones:m.particlesCountWithoutClones})},setClonesCount({data:m}){const{head:b,tail:h}=fS({infinite:m.infinite,particlesToShow:m.particlesToShow,partialPageSize:m.partialPageSize});m.clonesCountHead=b,m.clonesCountTail=h,m.clonesCountTotal=b+h},setProgressManagerAutoplayDuration({data:m}){e.setAutoplayDuration(m.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:m,focused:b}}){m&&(b?e.pause():e.resume())},initDuration({data:m}){m.durationMs=m.durationMsInit},applyAutoplay({data:m,methods:{_applyAutoplayIfNeeded:b}}){m.autoplay&&b(m.autoplay)},setPagesCount({data:m}){m.pagesCount=iS({infinite:m.infinite,particlesCountWithoutClones:m.particlesCountWithoutClones,particlesToScroll:m.particlesToScroll,particlesToShow:m.particlesToShow})},setParticlesToShow({data:m}){m.particlesToShow=xn(1,m.particlesToShowInit,m.particlesCountWithoutClones)},setParticlesToScroll({data:m}){m.particlesToScroll=xn(1,m.particlesToScrollInit,m.particlesCountWithoutClones)}},methods:{_prev({data:m}){m.currentParticleIndex=Aa({infinite:m.infinite,pageIndex:m.currentPageIndex-1,clonesCountHead:m.clonesCountHead,clonesCountTail:m.clonesCountTail,particlesToScroll:m.particlesToScroll,particlesCount:m.particlesCount,particlesToShow:m.particlesToShow})},_next({data:m}){m.currentParticleIndex=Aa({infinite:m.infinite,pageIndex:m.currentPageIndex+1,clonesCountHead:m.clonesCountHead,clonesCountTail:m.clonesCountTail,particlesToScroll:m.particlesToScroll,particlesCount:m.particlesCount,particlesToShow:m.particlesToShow})},_moveToParticle({data:m},b){m.currentParticleIndex=xn(0,b,m.particlesCount-1)},toggleFocused({data:m}){m.focused=!m.focused},async _applyAutoplayIfNeeded({data:m,methods:b}){if(!m.infinite&&(m.autoplayDirection===Er&&m.currentParticleIndex===m.particlesCount-1||m.autoplayDirection===Rn&&m.currentParticleIndex===0)){e.reset();return}if(m.autoplay){const h=()=>ll({[Er]:async()=>b.showNextPage(),[Rn]:async()=>b.showPrevPage()})(m.autoplayDirection);await e.start(h)}},async _jumpIfNeeded({data:m,methods:b}){let h=!1;return m.infinite&&(m.currentParticleIndex===0?(await b.showParticle(m.particlesCount-m.clonesCountTotal,{animated:!1}),h=!0):m.currentParticleIndex===m.particlesCount-m.clonesCountTail&&(await b.showParticle(m.clonesCountHead,{animated:!1}),h=!0)),h},async changePage({data:m,methods:b},h,i){if(e.reset(),m.disabled)return;m.disabled=!0,h(),await b.offsetPage({animated:gi(i,"animated",!0)}),m.disabled=!1,!await b._jumpIfNeeded()&&b._applyAutoplayIfNeeded()},async showNextPage({data:m,methods:b},h){m.disabled||await b.changePage(b._next,h)},async showPrevPage({data:m,methods:b},h){m.disabled||await b.changePage(b._prev,h)},async showParticle({methods:m},b,h){await m.changePage(()=>m._moveToParticle(b),h)},_getParticleIndexByPageIndex({data:m},b){return Aa({infinite:m.infinite,pageIndex:b,clonesCountHead:m.clonesCountHead,clonesCountTail:m.clonesCountTail,particlesToScroll:m.particlesToScroll,particlesCount:m.particlesCount,particlesToShow:m.particlesToShow})},async showPage({methods:m},b,h){const i=m._getParticleIndexByPageIndex(b);await m.showParticle(i,h)},offsetPage({data:m},b){const h=gi(b,"animated",!0);return new Promise(i=>{m.durationMs=h?m.durationMsInit:0,m.offset=-m.currentParticleIndex*m.particleWidth,setTimeout(()=>{i()},m.durationMs)})}}},{onChange:t}),[f,p]=o;return[{data:f,progressManager:e},p,o._internal]}const wx=t=>({currentPageIndex:t[0]&64,pagesCount:t[0]&1024,loaded:t[0]&32}),Xu=t=>({currentPageIndex:t[6],pagesCount:t[10],showPage:t[15],loaded:t[5]}),Sx=t=>({loaded:t[0]&32}),Gu=t=>({showNextPage:t[14].showNextPage,loaded:t[5]}),xx=t=>({loaded:t[0]&32}),Yu=t=>({loaded:t[5]}),Tx=t=>({loaded:t[0]&32}),Vu=t=>({showPrevPage:t[14].showPrevPage,loaded:t[5]});function qu(t){let e;const o=t[37].prev,f=Fi(o,t,t[36],Vu),p=f||Ex(t);return{c(){p&&p.c()},m(m,b){p&&p.m(m,b),e=!0},p(m,b){f?f.p&&(!e||b[0]&32|b[1]&32)&&Mi(f,o,m,m[36],e?Ri(o,m[36],b,Tx):Ii(m[36]),Vu):p&&p.p&&(!e||b[0]&68)&&p.p(m,e?b:[-1,-1])},i(m){e||(ye(p,m),e=!0)},o(m){Ee(p,m),e=!1},d(m){p&&p.d(m)}}}function Ex(t){let e,o,f;return o=new ld({props:{direction:"prev",disabled:!t[2]&&t[6]===0}}),o.$on("click",t[23]),{c(){e=De("div"),ar(o.$$.fragment),he(e,"class","sc-carousel__arrow-container svelte-h7bw08")},m(p,m){Xe(p,e,m),Gt(o,e,null),f=!0},p(p,m){const b={};m[0]&68&&(b.disabled=!p[2]&&p[6]===0),o.$set(b)},i(p){f||(ye(o.$$.fragment,p),f=!0)},o(p){Ee(o.$$.fragment,p),f=!1},d(p){p&&Be(e),Yt(o)}}}function Ku(t){let e,o,f;return o=new Iw({props:{value:t[7]}}),{c(){e=De("div"),ar(o.$$.fragment),he(e,"class","sc-carousel-progress__container svelte-h7bw08")},m(p,m){Xe(p,e,m),Gt(o,e,null),f=!0},p(p,m){const b={};m[0]&128&&(b.value=p[7]),o.$set(b)},i(p){f||(ye(o.$$.fragment,p),f=!0)},o(p){Ee(o.$$.fragment,p),f=!1},d(p){p&&Be(e),Yt(o)}}}function Ju(t){let e;const o=t[37].next,f=Fi(o,t,t[36],Gu),p=f||Ox(t);return{c(){p&&p.c()},m(m,b){p&&p.m(m,b),e=!0},p(m,b){f?f.p&&(!e||b[0]&32|b[1]&32)&&Mi(f,o,m,m[36],e?Ri(o,m[36],b,Sx):Ii(m[36]),Gu):p&&p.p&&(!e||b[0]&1092)&&p.p(m,e?b:[-1,-1])},i(m){e||(ye(p,m),e=!0)},o(m){Ee(p,m),e=!1},d(m){p&&p.d(m)}}}function Ox(t){let e,o,f;return o=new ld({props:{direction:"next",disabled:!t[2]&&t[6]===t[10]-1}}),o.$on("click",t[14].showNextPage),{c(){e=De("div"),ar(o.$$.fragment),he(e,"class","sc-carousel__arrow-container svelte-h7bw08")},m(p,m){Xe(p,e,m),Gt(o,e,null),f=!0},p(p,m){const b={};m[0]&1092&&(b.disabled=!p[2]&&p[6]===p[10]-1),o.$set(b)},i(p){f||(ye(o.$$.fragment,p),f=!0)},o(p){Ee(o.$$.fragment,p),f=!1},d(p){p&&Be(e),Yt(o)}}}function Qu(t){let e;const o=t[37].dots,f=Fi(o,t,t[36],Xu),p=f||Ax(t);return{c(){p&&p.c()},m(m,b){p&&p.m(m,b),e=!0},p(m,b){f?f.p&&(!e||b[0]&1120|b[1]&32)&&Mi(f,o,m,m[36],e?Ri(o,m[36],b,wx):Ii(m[36]),Xu):p&&p.p&&(!e||b[0]&1088)&&p.p(m,e?b:[-1,-1])},i(m){e||(ye(p,m),e=!0)},o(m){Ee(p,m),e=!1},d(m){p&&p.d(m)}}}function Ax(t){let e,o;return e=new Dw({props:{pagesCount:t[10],currentPageIndex:t[6]}}),e.$on("pageChange",t[41]),{c(){ar(e.$$.fragment)},m(f,p){Gt(e,f,p),o=!0},p(f,p){const m={};p[0]&1024&&(m.pagesCount=f[10]),p[0]&64&&(m.currentPageIndex=f[6]),e.$set(m)},i(f){o||(ye(e.$$.fragment,f),o=!0)},o(f){Ee(e.$$.fragment,f),o=!1},d(f){Yt(e,f)}}}function Px(t){let e,o,f,p,m,b,h,i,a,c,n,s,r=t[1]&&qu(t);const u=t[37].default,d=Fi(u,t,t[36],Yu);let l=t[3]&&Ku(t),g=t[1]&&Ju(t),v=t[4]&&Qu(t);return{c(){e=De("div"),o=De("div"),r&&r.c(),f=rr(),p=De("div"),m=De("div"),d&&d.c(),h=rr(),l&&l.c(),i=rr(),g&&g.c(),a=rr(),v&&v.c(),he(m,"class","sc-carousel__pages-container svelte-h7bw08"),gr(m,"transform","translateX("+t[8]+"px)"),gr(m,"transition-duration",t[9]+"ms"),gr(m,"transition-timing-function",t[0]),he(p,"class","sc-carousel__pages-window svelte-h7bw08"),he(o,"class","sc-carousel__content-container svelte-h7bw08"),he(e,"class","sc-carousel__carousel-container svelte-h7bw08")},m(_,y){Xe(_,e,y),Ne(e,o),r&&r.m(o,null),Ne(o,f),Ne(o,p),Ne(p,m),d&&d.m(m,null),t[39](m),Ne(p,h),l&&l.m(p,null),t[40](p),Ne(o,i),g&&g.m(o,null),Ne(e,a),v&&v.m(e,null),c=!0,n||(s=[ea(b=Xw.call(null,m,{thresholdProvider:t[38]})),Ye(m,"swipeStart",t[16]),Ye(m,"swipeMove",t[18]),Ye(m,"swipeEnd",t[19]),Ye(m,"swipeFailed",t[20]),Ye(m,"swipeThresholdReached",t[17]),ea(qw.call(null,p)),Ye(p,"hovered",t[21]),ea(Zw.call(null,p)),Ye(p,"tapped",t[22])],n=!0)},p(_,y){_[1]?r?(r.p(_,y),y[0]&2&&ye(r,1)):(r=qu(_),r.c(),ye(r,1),r.m(o,f)):r&&(Rt(),Ee(r,1,1,()=>{r=null}),Mt()),d&&d.p&&(!c||y[0]&32|y[1]&32)&&Mi(d,u,_,_[36],c?Ri(u,_[36],y,xx):Ii(_[36]),Yu),(!c||y[0]&256)&&gr(m,"transform","translateX("+_[8]+"px)"),(!c||y[0]&512)&&gr(m,"transition-duration",_[9]+"ms"),(!c||y[0]&1)&&gr(m,"transition-timing-function",_[0]),b&&tr(b.update)&&y[0]&2048&&b.update.call(null,{thresholdProvider:_[38]}),_[3]?l?(l.p(_,y),y[0]&8&&ye(l,1)):(l=Ku(_),l.c(),ye(l,1),l.m(p,null)):l&&(Rt(),Ee(l,1,1,()=>{l=null}),Mt()),_[1]?g?(g.p(_,y),y[0]&2&&ye(g,1)):(g=Ju(_),g.c(),ye(g,1),g.m(o,null)):g&&(Rt(),Ee(g,1,1,()=>{g=null}),Mt()),_[4]?v?(v.p(_,y),y[0]&16&&ye(v,1)):(v=Qu(_),v.c(),ye(v,1),v.m(e,null)):v&&(Rt(),Ee(v,1,1,()=>{v=null}),Mt())},i(_){c||(ye(r),ye(d,_),ye(l),ye(g),ye(v),c=!0)},o(_){Ee(r),Ee(d,_),Ee(l),Ee(g),Ee(v),c=!1},d(_){_&&Be(e),r&&r.d(),d&&d.d(_),t[39](null),l&&l.d(),t[40](null),g&&g.d(),v&&v.d(),n=!1,Or(s)}}}function Dx(t,e,o){let{$$slots:f={},$$scope:p}=e,m=[],b,h,i=0,a=0,c=1;const[{data:n,progressManager:s},r,u]=Cx((k,z)=>{ll({currentPageIndex:()=>o(6,b=z),progressValue:()=>o(7,h=z),offset:()=>o(8,i=z),durationMs:()=>o(9,a=z),pagesCount:()=>o(10,c=z),loaded:()=>o(5,m=z)})(k)});Li();let{timingFunction:d="ease-in-out"}=e,{arrows:l=!0}=e,{infinite:g=!0}=e,{initialPageIndex:v=0}=e,{duration:_=500}=e,{autoplay:y=!1}=e,{autoplayDuration:C=3e3}=e,{autoplayDirection:S=Er}=e,{pauseOnFocus:x=!1}=e,{autoplayProgressVisible:T=!1}=e,{dots:D=!0}=e,{swiping:j=!0}=e,{particlesToShow:U=1}=e,{particlesToScroll:H=1}=e;async function Q(k,z){const J=gi(z,"animated",!0);if(typeof k!="number")throw new Error("pageIndex should be a number");await r.showPage(k,{animated:J})}async function K(k){const z=gi(k,"animated",!0);await r.showPrevPage({animated:z})}async function re(k){const z=gi(k,"animated",!0);await r.showNextPage({animated:z})}let se=0,oe,ae;const R=lS(({width:k})=>{o(11,se=k),n.particleWidth=se/n.particlesToShow,aS({particlesContainerChildren:ae.children,particleWidth:n.particleWidth}),r.offsetPage({animated:!1})});function W(){const{clonesToAppend:k,clonesToPrepend:z}=cS({clonesCountHead:n.clonesCountHead,clonesCountTail:n.clonesCountTail,particlesContainerChildren:ae.children});uS({particlesContainer:ae,clonesToAppend:k,clonesToPrepend:z})}dl(()=>{(async()=>(await wc(),ae&&oe&&(n.particlesCountWithoutClones=ae.children.length,await wc(),n.infinite&&W(),n.particlesCount=ae.children.length,r.showPage(v,{animated:!1}),R.observe(oe))))()}),cf(()=>{R.disconnect(),s.reset()});async function P(k){await r.showPage(k,{animated:!0})}function B(){!j||(n.durationMs=0)}async function N(k){!j||await ll({[Er]:r.showNextPage,[Rn]:r.showPrevPage})(k.detail.direction)}function A(k){!j||(n.offset+=k.detail.dx)}function O(){!j||r.showParticle(n.currentParticleIndex)}async function M(){!j||await r.offsetPage({animated:!0})}function F(k){n.focused=k.detail.value}function q(){r.toggleFocused()}function L(){r.showPrevPage()}const Y=()=>se/3;function V(k){sr[k?"unshift":"push"](()=>{ae=k,o(13,ae)})}function $(k){sr[k?"unshift":"push"](()=>{oe=k,o(12,oe)})}const G=k=>P(k.detail);return t.$$set=k=>{"timingFunction"in k&&o(0,d=k.timingFunction),"arrows"in k&&o(1,l=k.arrows),"infinite"in k&&o(2,g=k.infinite),"initialPageIndex"in k&&o(24,v=k.initialPageIndex),"duration"in k&&o(25,_=k.duration),"autoplay"in k&&o(26,y=k.autoplay),"autoplayDuration"in k&&o(27,C=k.autoplayDuration),"autoplayDirection"in k&&o(28,S=k.autoplayDirection),"pauseOnFocus"in k&&o(29,x=k.pauseOnFocus),"autoplayProgressVisible"in k&&o(3,T=k.autoplayProgressVisible),"dots"in k&&o(4,D=k.dots),"swiping"in k&&o(30,j=k.swiping),"particlesToShow"in k&&o(31,U=k.particlesToShow),"particlesToScroll"in k&&o(32,H=k.particlesToScroll),"$$scope"in k&&o(36,p=k.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4&&(n.infinite=g),t.$$.dirty[0]&33554432&&(n.durationMsInit=_),t.$$.dirty[0]&67108864&&(n.autoplay=y),t.$$.dirty[0]&134217728&&(n.autoplayDuration=C),t.$$.dirty[0]&268435456&&(n.autoplayDirection=S),t.$$.dirty[0]&536870912&&(n.pauseOnFocus=x),t.$$.dirty[1]&1&&(n.particlesToShowInit=U),t.$$.dirty[1]&2&&(n.particlesToScrollInit=H)},[d,l,g,T,D,m,b,h,i,a,c,se,oe,ae,r,P,B,N,A,O,M,F,q,L,v,_,y,C,S,x,j,U,H,Q,K,re,p,f,Y,V,$,G]}class y1 extends Pr{constructor(e){super();Ar(this,e,Dx,Px,lr,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},null,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}export{Rx as $,ye as A,Or as B,Tn as C,os as D,t1 as E,Mx as F,uf as G,Nx as H,ar as I,Gt as J,Yt as K,Zx as L,ns as M,Hx as N,qx as O,Fx as P,a1 as Q,f1 as R,Pr as S,u1 as T,l1 as U,c1 as V,o1 as W,d1 as X,_u as Y,g1 as Z,h1 as _,he as a,jx as a0,tr as a1,Yx as a2,Gx as a3,ea as a4,m1 as a5,Nd as a6,$x as a7,p1 as a8,e1 as a9,n1 as aa,Ux as ab,Vx as ac,v1 as ad,Hd as ae,Lx as af,Kx as ag,Jx as ah,Wx as ai,zx as aj,Xx as ak,df as al,y1 as am,Qx as an,Md as ao,r1 as ap,Xe as b,Ne as c,Be as d,De as e,Li as f,Kd as g,sr as h,Ar as i,Ix as j,gr as k,s1 as l,cf as m,Fe as n,dl as o,rr as p,of as q,Ye as r,lr as s,pn as t,Bx as u,Cc as v,i1 as w,Rt as x,Ee as y,Mt as z};
