var Rd=Object.defineProperty,Id=Object.defineProperties;var Md=Object.getOwnPropertyDescriptors;var as=Object.getOwnPropertySymbols;var Tc=Object.prototype.hasOwnProperty,xc=Object.prototype.propertyIsEnumerable;var Sc=(t,e,n)=>e in t?Rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,He=(t,e)=>{for(var n in e||(e={}))Tc.call(e,n)&&Sc(t,n,e[n]);if(as)for(var n of as(e))xc.call(e,n)&&Sc(t,n,e[n]);return t},un=(t,e)=>Id(t,Md(e));var Oc=(t,e)=>{var n={};for(var f in t)Tc.call(t,f)&&e.indexOf(f)<0&&(n[f]=t[f]);if(t!=null&&as)for(var f of as(t))e.indexOf(f)<0&&xc.call(t,f)&&(n[f]=t[f]);return n};function xe(){}const ml=t=>t;function Ld(t,e){for(const n in e)t[n]=e[n];return t}function Bd(t){return t&&typeof t=="object"&&typeof t.then=="function"}function hf(t){return t()}function Ec(){return Object.create(null)}function Tt(t){t.forEach(hf)}function tn(t){return typeof t=="function"}function tt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ls;function cs(t,e){return ls||(ls=document.createElement("a")),ls.href=e,t===ls.href}function jd(t){return Object.keys(t).length===0}function df(t,...e){if(t==null)return xe;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ir(t,e,n){t.$$.on_destroy.push(df(e,n))}function Mn(t,e,n,f){if(t){const m=gf(t,e,n,f);return t[0](m)}}function gf(t,e,n,f){return t[1]&&f?Ld(n.ctx.slice(),t[1](f(e))):n.ctx}function Ln(t,e,n,f){if(t[2]&&f){const m=t[2](f(n));if(e.dirty===void 0)return m;if(typeof m=="object"){const p=[],y=Math.max(e.dirty.length,m.length);for(let h=0;h<y;h+=1)p[h]=e.dirty[h]|m[h];return p}return e.dirty|m}return e.dirty}function Bn(t,e,n,f,m,p){if(m){const y=gf(e,n,f,p);t.p(y,m)}}function jn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let f=0;f<n;f++)e[f]=-1;return e}return-1}function Qt(t){return t==null?"":t}function Ac(t,e,n){return t.set(n),e}function sa(t){return t&&tn(t.destroy)?t.destroy:xe}const pf=typeof window!="undefined";let mf=pf?()=>window.performance.now():()=>Date.now(),vl=pf?t=>requestAnimationFrame(t):xe;const Ar=new Set;function vf(t){Ar.forEach(e=>{e.c(t)||(Ar.delete(e),e.f())}),Ar.size!==0&&vl(vf)}function yf(t){let e;return Ar.size===0&&vl(vf),{promise:new Promise(n=>{Ar.add(e={c:t,f:n})}),abort(){Ar.delete(e)}}}function ze(t,e){t.appendChild(e)}function _f(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Nd(t){const e=Te("style");return Ud(_f(t),e),e.sheet}function Ud(t,e){ze(t.head||t,e)}function Ce(t,e,n){t.insertBefore(e,n||null)}function we(t){t.parentNode.removeChild(t)}function RT(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Te(t){return document.createElement(t)}function IT(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Qn(t){return document.createTextNode(t)}function Ft(){return Qn(" ")}function Nn(){return Qn("")}function ve(t,e,n,f){return t.addEventListener(e,n,f),()=>t.removeEventListener(e,n,f)}function MT(t){return function(e){return e.preventDefault(),t.call(this,e)}}function LT(t){return function(e){e.target===this&&t.call(this,e)}}function ce(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function BT(t){return t===""?null:+t}function Wd(t){return Array.from(t.childNodes)}function Pc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function jT(t,e){t.value=e==null?"":e}function $e(t,e,n,f){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,f?"important":"")}function NT(t,e){for(let n=0;n<t.options.length;n+=1){const f=t.options[n];if(f.__value===e){f.selected=!0;return}}t.selectedIndex=-1}function UT(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let us;function Hd(){if(us===void 0){us=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{us=!0}}return us}function WT(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const f=Te("iframe");f.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),f.setAttribute("aria-hidden","true"),f.tabIndex=-1;const m=Hd();let p;return m?(f.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",p=ve(window,"message",y=>{y.source===f.contentWindow&&e()})):(f.src="about:blank",f.onload=()=>{p=ve(f.contentWindow,"resize",e)}),ze(t,f),()=>{(m||p&&f.contentWindow)&&p(),we(f)}}function Se(t,e,n){t.classList[n?"add":"remove"](e)}function bf(t,e,n=!1){const f=document.createEvent("CustomEvent");return f.initCustomEvent(t,n,!1,e),f}const Is=new Map;let Ms=0;function zd(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Xd(t,e){const n={stylesheet:Nd(e),rules:{}};return Is.set(t,n),n}function Ma(t,e,n,f,m,p,y,h=0){const r=16.666/f;let a=`{
`;for(let l=0;l<=1;l+=r){const g=e+(n-e)*p(l);a+=l*100+`%{${y(g,1-g)}}
`}const c=a+`100% {${y(n,1-n)}}
}`,i=`__svelte_${zd(c)}_${h}`,o=_f(t),{stylesheet:s,rules:u}=Is.get(o)||Xd(o,t);u[i]||(u[i]=!0,s.insertRule(`@keyframes ${i} ${c}`,s.cssRules.length));const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${i} ${f}ms linear ${m}ms 1 both`,Ms+=1,i}function wf(t,e){const n=(t.style.animation||"").split(", "),f=n.filter(e?p=>p.indexOf(e)<0:p=>p.indexOf("__svelte")===-1),m=n.length-f.length;m&&(t.style.animation=f.join(", "),Ms-=m,Ms||Yd())}function Yd(){vl(()=>{Ms||(Is.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),Is.clear())})}function HT(t,e,n,f){if(!e)return xe;const m=t.getBoundingClientRect();if(e.left===m.left&&e.right===m.right&&e.top===m.top&&e.bottom===m.bottom)return xe;const{delay:p=0,duration:y=300,easing:h=ml,start:r=mf()+p,end:a=r+y,tick:c=xe,css:i}=n(t,{from:e,to:m},f);let o=!0,s=!1,u;function d(){i&&(u=Ma(t,0,1,y,p,h,i)),p||(s=!0)}function l(){i&&wf(t,u),o=!1}return yf(g=>{if(!s&&g>=r&&(s=!0),s&&g>=a&&(c(1,0),l()),!o)return!1;if(s){const v=g-r,b=0+1*h(v/y);c(b,1-b)}return!0}),d(),c(0,1),l}function zT(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:f}=e,m=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=f,Gd(t,m)}}function Gd(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const f=getComputedStyle(t),m=f.transform==="none"?"":f.transform;t.style.transform=`${m} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let xi;function dn(t){xi=t}function Yr(){if(!xi)throw new Error("Function called outside component initialization");return xi}function yl(t){Yr().$$.on_mount.push(t)}function Cf(t){Yr().$$.on_destroy.push(t)}function Hi(){const t=Yr();return(e,n)=>{const f=t.$$.callbacks[e];if(f){const m=bf(e,n);f.slice().forEach(p=>{p.call(t,m)})}}}function Vd(t,e){Yr().$$.context.set(t,e)}function XT(t){return Yr().$$.context.get(t)}function Sf(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(f=>f.call(this,e))}const vi=[],Ne=[],As=[],La=[],Tf=Promise.resolve();let Ba=!1;function xf(){Ba||(Ba=!0,Tf.then(_l))}function Dc(){return xf(),Tf}function Lr(t){As.push(t)}function gn(t){La.push(t)}const oa=new Set;let fs=0;function _l(){const t=xi;do{for(;fs<vi.length;){const e=vi[fs];fs++,dn(e),qd(e.$$)}for(dn(null),vi.length=0,fs=0;Ne.length;)Ne.pop()();for(let e=0;e<As.length;e+=1){const n=As[e];oa.has(n)||(oa.add(n),n())}As.length=0}while(vi.length);for(;La.length;)La.pop()();Ba=!1,oa.clear(),dn(t)}function qd(t){if(t.fragment!==null){t.update(),Tt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Lr)}}let hi;function Kd(){return hi||(hi=Promise.resolve(),hi.then(()=>{hi=null})),hi}function aa(t,e,n){t.dispatchEvent(bf(`${e?"intro":"outro"}${n}`))}const Ps=new Set;let pn;function qe(){pn={r:0,c:[],p:pn}}function Ke(){pn.r||Tt(pn.c),pn=pn.p}function de(t,e){t&&t.i&&(Ps.delete(t),t.i(e))}function ge(t,e,n,f){if(t&&t.o){if(Ps.has(t))return;Ps.add(t),pn.c.push(()=>{Ps.delete(t),f&&(n&&t.d(1),f())}),t.o(e)}}const Jd={duration:0};function hs(t,e,n,f){let m=e(t,n),p=f?0:1,y=null,h=null,r=null;function a(){r&&wf(t,r)}function c(o,s){const u=o.b-p;return s*=Math.abs(u),{a:p,b:o.b,d:u,duration:s,start:o.start,end:o.start+s,group:o.group}}function i(o){const{delay:s=0,duration:u=300,easing:d=ml,tick:l=xe,css:g}=m||Jd,v={start:mf()+s,b:o};o||(v.group=pn,pn.r+=1),y||h?h=v:(g&&(a(),r=Ma(t,p,o,u,s,d,g)),o&&l(0,1),y=c(v,u),Lr(()=>aa(t,o,"start")),yf(b=>{if(h&&b>h.start&&(y=c(h,u),h=null,aa(t,y.b,"start"),g&&(a(),r=Ma(t,p,y.b,y.duration,0,d,m.css))),y){if(b>=y.end)l(p=y.b,1-p),aa(t,y.b,"end"),h||(y.b?a():--y.group.r||Tt(y.group.c)),y=null;else if(b>=y.start){const _=b-y.start;p=y.a+y.d*d(_/y.duration),l(p,1-p)}}return!!(y||h)}))}return{run(o){tn(m)?Kd().then(()=>{m=m(),i(o)}):i(o)},end(){a(),y=h=null}}}function YT(t,e){const n=e.token={};function f(m,p,y,h){if(e.token!==n)return;e.resolved=h;let r=e.ctx;y!==void 0&&(r=r.slice(),r[y]=h);const a=m&&(e.current=m)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach((i,o)=>{o!==p&&i&&(qe(),ge(i,1,1,()=>{e.blocks[o]===i&&(e.blocks[o]=null)}),Ke())}):e.block.d(1),a.c(),de(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[p]=a),c&&_l()}if(Bd(t)){const m=Yr();if(t.then(p=>{dn(m),f(e.then,1,e.value,p),dn(null)},p=>{if(dn(m),f(e.catch,2,e.error,p),dn(null),!e.hasCatch)throw p}),e.current!==e.pending)return f(e.pending,0),!0}else{if(e.current!==e.then)return f(e.then,1,e.value,t),!0;e.resolved=t}}function GT(t,e,n){const f=e.slice(),{resolved:m}=t;t.current===t.then&&(f[t.value]=m),t.current===t.catch&&(f[t.error]=m),t.block.p(f,n)}const Of=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function VT(t,e){t.d(1),e.delete(t.key)}function Ef(t,e){ge(t,1,1,()=>{e.delete(t.key)})}function qT(t,e){t.f(),Ef(t,e)}function Zd(t,e,n,f,m,p,y,h,r,a,c,i){let o=t.length,s=p.length,u=o;const d={};for(;u--;)d[t[u].key]=u;const l=[],g=new Map,v=new Map;for(u=s;u--;){const S=i(m,p,u),T=n(S);let x=y.get(T);x?f&&x.p(S,e):(x=a(T,S),x.c()),g.set(T,l[u]=x),T in d&&v.set(T,Math.abs(u-d[T]))}const b=new Set,_=new Set;function w(S){de(S,1),S.m(h,c),y.set(S.key,S),c=S.first,s--}for(;o&&s;){const S=l[s-1],T=t[o-1],x=S.key,D=T.key;S===T?(c=S.first,o--,s--):g.has(D)?!y.has(x)||b.has(x)?w(S):_.has(D)?o--:v.get(x)>v.get(D)?(_.add(x),w(S)):(b.add(D),o--):(r(T,y),o--)}for(;o--;){const S=t[o];g.has(S.key)||r(S,y)}for(;s;)w(l[s-1]);return l}function Ut(t,e,n){const f=t.$$.props[e];f!==void 0&&(t.$$.bound[f]=n,n(t.$$.ctx[f]))}function Le(t){t&&t.c()}function Ie(t,e,n,f){const{fragment:m,on_mount:p,on_destroy:y,after_update:h}=t.$$;m&&m.m(e,n),f||Lr(()=>{const r=p.map(hf).filter(tn);y?y.push(...r):Tt(r),t.$$.on_mount=[]}),h.forEach(Lr)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Tt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Qd(t,e){t.$$.dirty[0]===-1&&(vi.push(t),xf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function st(t,e,n,f,m,p,y,h=[-1]){const r=xi;dn(t);const a=t.$$={fragment:null,ctx:null,props:p,update:xe,not_equal:m,bound:Ec(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Ec(),dirty:h,skip_bound:!1,root:e.target||r.$$.root};y&&y(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(i,o,...s)=>{const u=s.length?s[0]:o;return a.ctx&&m(a.ctx[i],a.ctx[i]=u)&&(!a.skip_bound&&a.bound[i]&&a.bound[i](u),c&&Qd(t,i)),o}):[],a.update(),c=!0,Tt(a.before_update),a.fragment=f?f(a.ctx):!1,e.target){if(e.hydrate){const i=Wd(e.target);a.fragment&&a.fragment.l(i),i.forEach(we)}else a.fragment&&a.fragment.c();e.intro&&de(t.$$.fragment),Ie(t,e.target,e.anchor,e.customElement),_l()}dn(r)}class ot{$destroy(){Me(this,1),this.$destroy=xe}$on(e,n){const f=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return f.push(n),()=>{const m=f.indexOf(n);m!==-1&&f.splice(m,1)}}$set(e){this.$$set&&!jd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function bl(t){const e=t-1;return e*e*e+1}function $d(t,{delay:e=0,duration:n=400,easing:f=ml}={}){const m=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:f,css:p=>`opacity: ${p*m}`}}function KT(t,{delay:e=0,duration:n=400,easing:f=bl,x:m=0,y:p=0,opacity:y=0}={}){const h=getComputedStyle(t),r=+h.opacity,a=h.transform==="none"?"":h.transform,c=r*(1-y);return{delay:e,duration:n,easing:f,css:(i,o)=>`
			transform: ${a} translate(${(1-i)*m}px, ${(1-i)*p}px);
			opacity: ${r-c*o}`}}function JT(t,{delay:e=0,duration:n=400,easing:f=bl}={}){const m=getComputedStyle(t),p=+m.opacity,y=parseFloat(m.height),h=parseFloat(m.paddingTop),r=parseFloat(m.paddingBottom),a=parseFloat(m.marginTop),c=parseFloat(m.marginBottom),i=parseFloat(m.borderTopWidth),o=parseFloat(m.borderBottomWidth);return{delay:e,duration:n,easing:f,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*p};height: ${s*y}px;padding-top: ${s*h}px;padding-bottom: ${s*r}px;margin-top: ${s*a}px;margin-bottom: ${s*c}px;border-top-width: ${s*i}px;border-bottom-width: ${s*o}px;`}}const{window:eg}=Of;function kc(t){let e,n,f,m,p,y,h,r,a,c,i,o,s,u,d,l,g,v=t[1].closeButton&&Fc(t);var b=t[2];function _(w){return{}}return b&&(y=new b(_())),{c(){e=Te("div"),n=Te("div"),f=Te("div"),v&&v.c(),m=Ft(),p=Te("div"),y&&Le(y.$$.fragment),ce(p,"class",h=Qt(t[1].classContent)+" svelte-g4wg3a"),ce(p,"style",t[9]),Se(p,"content",!t[0]),ce(f,"class",r=Qt(t[1].classWindow)+" svelte-g4wg3a"),ce(f,"role","dialog"),ce(f,"aria-modal","true"),ce(f,"aria-label",a=t[1].ariaLabelledBy?null:t[1].ariaLabel||null),ce(f,"aria-labelledby",c=t[1].ariaLabelledBy||null),ce(f,"style",t[8]),Se(f,"window",!t[0]),ce(n,"class",o=Qt(t[1].classWindowWrap)+" svelte-g4wg3a"),ce(n,"style",t[7]),Se(n,"wrap",!t[0]),ce(e,"class",s=Qt(t[1].classBg)+" svelte-g4wg3a"),ce(e,"style",t[6]),Se(e,"bg",!t[0])},m(w,S){Ce(w,e,S),ze(e,n),ze(n,f),v&&v.m(f,null),ze(f,m),ze(f,p),y&&Ie(y,p,null),t[48](f),t[49](n),t[50](e),d=!0,l||(g=[ve(f,"introstart",function(){tn(t[13])&&t[13].apply(this,arguments)}),ve(f,"outrostart",function(){tn(t[14])&&t[14].apply(this,arguments)}),ve(f,"introend",function(){tn(t[15])&&t[15].apply(this,arguments)}),ve(f,"outroend",function(){tn(t[16])&&t[16].apply(this,arguments)}),ve(e,"mousedown",t[20]),ve(e,"mouseup",t[21])],l=!0)},p(w,S){if(t=w,t[1].closeButton?v?(v.p(t,S),S[0]&2&&de(v,1)):(v=Fc(t),v.c(),de(v,1),v.m(f,m)):v&&(qe(),ge(v,1,1,()=>{v=null}),Ke()),b!==(b=t[2])){if(y){qe();const T=y;ge(T.$$.fragment,1,0,()=>{Me(T,1)}),Ke()}b?(y=new b(_()),Le(y.$$.fragment),de(y.$$.fragment,1),Ie(y,p,null)):y=null}(!d||S[0]&2&&h!==(h=Qt(t[1].classContent)+" svelte-g4wg3a"))&&ce(p,"class",h),(!d||S[0]&512)&&ce(p,"style",t[9]),S[0]&3&&Se(p,"content",!t[0]),(!d||S[0]&2&&r!==(r=Qt(t[1].classWindow)+" svelte-g4wg3a"))&&ce(f,"class",r),(!d||S[0]&2&&a!==(a=t[1].ariaLabelledBy?null:t[1].ariaLabel||null))&&ce(f,"aria-label",a),(!d||S[0]&2&&c!==(c=t[1].ariaLabelledBy||null))&&ce(f,"aria-labelledby",c),(!d||S[0]&256)&&ce(f,"style",t[8]),S[0]&3&&Se(f,"window",!t[0]),(!d||S[0]&2&&o!==(o=Qt(t[1].classWindowWrap)+" svelte-g4wg3a"))&&ce(n,"class",o),(!d||S[0]&128)&&ce(n,"style",t[7]),S[0]&3&&Se(n,"wrap",!t[0]),(!d||S[0]&2&&s!==(s=Qt(t[1].classBg)+" svelte-g4wg3a"))&&ce(e,"class",s),(!d||S[0]&64)&&ce(e,"style",t[6]),S[0]&3&&Se(e,"bg",!t[0])},i(w){d||(de(v),y&&de(y.$$.fragment,w),Lr(()=>{i||(i=hs(f,t[12],t[1].transitionWindowProps,!0)),i.run(1)}),Lr(()=>{u||(u=hs(e,t[11],t[1].transitionBgProps,!0)),u.run(1)}),d=!0)},o(w){ge(v),y&&ge(y.$$.fragment,w),i||(i=hs(f,t[12],t[1].transitionWindowProps,!1)),i.run(0),u||(u=hs(e,t[11],t[1].transitionBgProps,!1)),u.run(0),d=!1},d(w){w&&we(e),v&&v.d(),y&&Me(y),t[48](null),w&&i&&i.end(),t[49](null),t[50](null),w&&u&&u.end(),l=!1,Tt(g)}}}function Fc(t){let e,n,f,m,p;const y=[ng,tg],h=[];function r(a,c){return c[0]&2&&(e=null),e==null&&(e=!!a[17](a[1].closeButton)),e?0:1}return n=r(t,[-1,-1,-1]),f=h[n]=y[n](t),{c(){f.c(),m=Nn()},m(a,c){h[n].m(a,c),Ce(a,m,c),p=!0},p(a,c){let i=n;n=r(a,c),n===i?h[n].p(a,c):(qe(),ge(h[i],1,1,()=>{h[i]=null}),Ke(),f=h[n],f?f.p(a,c):(f=h[n]=y[n](a),f.c()),de(f,1),f.m(m.parentNode,m))},i(a){p||(de(f),p=!0)},o(a){ge(f),p=!1},d(a){h[n].d(a),a&&we(m)}}}function tg(t){let e,n,f,m;return{c(){e=Te("button"),ce(e,"class",n=Qt(t[1].classCloseButton)+" svelte-g4wg3a"),ce(e,"aria-label","Close modal"),ce(e,"style",t[10]),Se(e,"close",!t[0])},m(p,y){Ce(p,e,y),f||(m=ve(e,"click",t[18]),f=!0)},p(p,y){y[0]&2&&n!==(n=Qt(p[1].classCloseButton)+" svelte-g4wg3a")&&ce(e,"class",n),y[0]&1024&&ce(e,"style",p[10]),y[0]&3&&Se(e,"close",!p[0])},i:xe,o:xe,d(p){p&&we(e),f=!1,m()}}}function ng(t){let e,n,f;var m=t[1].closeButton;function p(y){return{props:{onClose:y[18]}}}return m&&(e=new m(p(t))),{c(){e&&Le(e.$$.fragment),n=Nn()},m(y,h){e&&Ie(e,y,h),Ce(y,n,h),f=!0},p(y,h){if(m!==(m=y[1].closeButton)){if(e){qe();const r=e;ge(r.$$.fragment,1,0,()=>{Me(r,1)}),Ke()}m?(e=new m(p(y)),Le(e.$$.fragment),de(e.$$.fragment,1),Ie(e,n.parentNode,n)):e=null}},i(y){f||(e&&de(e.$$.fragment,y),f=!0)},o(y){e&&ge(e.$$.fragment,y),f=!1},d(y){y&&we(n),e&&Me(e,y)}}}function rg(t){let e,n,f,m,p=t[2]&&kc(t);const y=t[47].default,h=Mn(y,t,t[46],null);return{c(){p&&p.c(),e=Ft(),h&&h.c()},m(r,a){p&&p.m(r,a),Ce(r,e,a),h&&h.m(r,a),n=!0,f||(m=ve(eg,"keydown",t[19]),f=!0)},p(r,a){r[2]?p?(p.p(r,a),a[0]&4&&de(p,1)):(p=kc(r),p.c(),de(p,1),p.m(e.parentNode,e)):p&&(qe(),ge(p,1,1,()=>{p=null}),Ke()),h&&h.p&&(!n||a[1]&32768)&&Bn(h,y,r,r[46],n?Ln(y,r[46],a,null):jn(r[46]),null)},i(r){n||(de(p),de(h,r),n=!0)},o(r){ge(p),ge(h,r),n=!1},d(r){p&&p.d(r),r&&we(e),h&&h.d(r),f=!1,m()}}}function ig(t,e={}){return function(f){return new t(un(He({},f),{props:He(He({},e),f.props)}))}}function sg(t,e,n){let{$$slots:f={},$$scope:m}=e;const p=Hi(),y=Vd;let{show:h=null}=e,{key:r="simple-modal"}=e,{ariaLabel:a=null}=e,{ariaLabelledBy:c=null}=e,{closeButton:i=!0}=e,{closeOnEsc:o=!0}=e,{closeOnOuterClick:s=!0}=e,{styleBg:u={}}=e,{styleWindowWrap:d={}}=e,{styleWindow:l={}}=e,{styleContent:g={}}=e,{styleCloseButton:v={}}=e,{classBg:b=null}=e,{classWindowWrap:_=null}=e,{classWindow:w=null}=e,{classContent:S=null}=e,{classCloseButton:T=null}=e,{unstyled:x=!1}=e,{setContext:D=y}=e,{transitionBg:N=$d}=e,{transitionBgProps:W={duration:250}}=e,{transitionWindow:k=N}=e,{transitionWindowProps:q=W}=e,{disableFocusTrap:K=!1}=e;const ne={ariaLabel:a,ariaLabelledBy:c,closeButton:i,closeOnEsc:o,closeOnOuterClick:s,styleBg:u,styleWindowWrap:d,styleWindow:l,styleContent:g,styleCloseButton:v,classBg:b,classWindowWrap:_,classWindow:w,classContent:S,classCloseButton:T,transitionBg:N,transitionBgProps:W,transitionWindow:k,transitionWindowProps:q,disableFocusTrap:K,unstyled:x};let se=He({},ne),oe=null,ae,I,H,P,j,U,A,E,M,R,J,B,G,V,Q;const Y=ie=>ie.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),F=ie=>ie?Object.keys(ie).reduce((Ye,Ge)=>`${Ye}; ${Y(Ge)}: ${ie[Ge]}`,""):"",z=ie=>!!(ie&&ie.constructor&&ie.call&&ie.apply),Z=()=>{n(6,j=F(Object.assign({},{width:window.innerWidth,height:window.innerHeight},se.styleBg))),n(7,U=F(se.styleWindowWrap)),n(8,A=F(se.styleWindow)),n(9,E=F(se.styleContent)),n(10,M=F(se.styleCloseButton)),n(11,R=se.transitionBg),n(12,J=se.transitionWindow)},X=()=>{};let ee=X,re=X,fe=X,le=X;const $=(ie,Ye={},Ge={},We={})=>{n(2,oe=ig(ie,Ye)),n(1,se=He(He({},ne),Ge)),Z(),Oe(),n(13,ee=mt=>{We.onOpen&&We.onOpen(mt),p("open"),p("opening")}),n(14,re=mt=>{We.onClose&&We.onClose(mt),p("close"),p("closing")}),n(15,fe=mt=>{We.onOpened&&We.onOpened(mt),p("opened")}),n(16,le=mt=>{We.onClosed&&We.onClosed(mt),p("closed")})},ue=(ie={})=>{!oe||(n(14,re=ie.onClose||re),n(16,le=ie.onClosed||le),n(2,oe=null),ye())},he=ie=>{if(se.closeOnEsc&&oe&&ie.key==="Escape"&&(ie.preventDefault(),ue()),oe&&ie.key==="Tab"&&!se.disableFocusTrap){const Ye=H.querySelectorAll("*"),Ge=Array.from(Ye).filter(mt=>mt.tabIndex>=0);let We=Ge.indexOf(document.activeElement);We===-1&&ie.shiftKey&&(We=0),We+=Ge.length+(ie.shiftKey?-1:1),We%=Ge.length,Ge[We].focus(),ie.preventDefault()}},be=ie=>{se.closeOnOuterClick&&(ie.target===ae||ie.target===I)&&(Q=ie.target)},je=ie=>{se.closeOnOuterClick&&ie.target===Q&&(ie.preventDefault(),ue())},Oe=()=>{P=window.scrollY,B=document.body.style.position,G=document.body.style.overflow,V=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${P}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},ye=()=>{document.body.style.position=B||"",document.body.style.top="",document.body.style.overflow=G||"",document.body.style.width=V||"",window.scrollTo(0,P)};D(r,{open:$,close:ue});let me=!1;Cf(()=>{me&&ue()}),yl(()=>{n(45,me=!0)});function Ee(ie){Ne[ie?"unshift":"push"](()=>{H=ie,n(5,H)})}function Xe(ie){Ne[ie?"unshift":"push"](()=>{I=ie,n(4,I)})}function xt(ie){Ne[ie?"unshift":"push"](()=>{ae=ie,n(3,ae)})}return t.$$set=ie=>{"show"in ie&&n(22,h=ie.show),"key"in ie&&n(23,r=ie.key),"ariaLabel"in ie&&n(24,a=ie.ariaLabel),"ariaLabelledBy"in ie&&n(25,c=ie.ariaLabelledBy),"closeButton"in ie&&n(26,i=ie.closeButton),"closeOnEsc"in ie&&n(27,o=ie.closeOnEsc),"closeOnOuterClick"in ie&&n(28,s=ie.closeOnOuterClick),"styleBg"in ie&&n(29,u=ie.styleBg),"styleWindowWrap"in ie&&n(30,d=ie.styleWindowWrap),"styleWindow"in ie&&n(31,l=ie.styleWindow),"styleContent"in ie&&n(32,g=ie.styleContent),"styleCloseButton"in ie&&n(33,v=ie.styleCloseButton),"classBg"in ie&&n(34,b=ie.classBg),"classWindowWrap"in ie&&n(35,_=ie.classWindowWrap),"classWindow"in ie&&n(36,w=ie.classWindow),"classContent"in ie&&n(37,S=ie.classContent),"classCloseButton"in ie&&n(38,T=ie.classCloseButton),"unstyled"in ie&&n(0,x=ie.unstyled),"setContext"in ie&&n(39,D=ie.setContext),"transitionBg"in ie&&n(40,N=ie.transitionBg),"transitionBgProps"in ie&&n(41,W=ie.transitionBgProps),"transitionWindow"in ie&&n(42,k=ie.transitionWindow),"transitionWindowProps"in ie&&n(43,q=ie.transitionWindowProps),"disableFocusTrap"in ie&&n(44,K=ie.disableFocusTrap),"$$scope"in ie&&n(46,m=ie.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4194304|t.$$.dirty[1]&16384&&me&&(z(h)?$(h):ue())},[x,se,oe,ae,I,H,j,U,A,E,M,R,J,ee,re,fe,le,z,ue,he,be,je,h,r,a,c,i,o,s,u,d,l,g,v,b,_,w,S,T,D,N,W,k,q,K,me,m,f,Ee,Xe,xt]}class ZT extends ot{constructor(e){super();st(this,e,sg,rg,tt,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}var Be=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function og(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var f=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,f.get?f:{enumerable:!0,get:function(){return t[n]}})}),e}var ag={},lg={},cg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:lg}),_i=og(cg);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"4.6.0"};if(t.fabric=e,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=_i,f=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=f.document,e.jsdomImplForWrapper=_i.implForWrapper,e.nodeCanvas=_i.Canvas,e.window=f,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=e),function(){function h(s,u){if(!!this.__eventListeners[s]){var d=this.__eventListeners[s];u?d[d.indexOf(u)]=!1:e.util.array.fill(d,!1)}}function r(s,u){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var d in s)this.on(d,s[d]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(u);return this}function a(s,u){var d=function(){u.apply(this,arguments),this.off(s,d)}.bind(this);this.on(s,d)}function c(s,u){if(arguments.length===1)for(var d in s)a.call(this,d,s[d]);else a.call(this,s,u);return this}function i(s,u){if(!this.__eventListeners)return this;if(arguments.length===0)for(s in this.__eventListeners)h.call(this,s);else if(arguments.length===1&&typeof arguments[0]=="object")for(var d in s)h.call(this,d,s[d]);else h.call(this,s,u);return this}function o(s,u){if(!this.__eventListeners)return this;var d=this.__eventListeners[s];if(!d)return this;for(var l=0,g=d.length;l<g;l++)d[l]&&d[l].call(this,u||{});return this.__eventListeners[s]=d.filter(function(v){return v!==!1}),this}e.Observable={fire:o,on:r,once:c,off:i}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,r=arguments.length;h<r;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,r,a){var c=this._objects;return a?c[r]=h:c.splice(r,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,r,a=!1,c=0,i=arguments.length;c<i;c++)r=h.indexOf(arguments[c]),r!==-1&&(a=!0,h.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,r){for(var a=this.getObjects(),c=0,i=a.length;c<i;c++)h.call(r,a[c],c,a);return this},getObjects:function(h){return typeof h=="undefined"?this._objects.concat():this._objects.filter(function(r){return r.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,r){return this._objects.indexOf(h)>-1?!0:r?this._objects.some(function(a){return typeof a.contains=="function"&&a.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,r){return h+=r.complexity?r.complexity():0,h},0)}},e.CommonMethods={_setOptions:function(h){for(var r in h)this.set(r,h[r])},_initGradient:function(h,r){h&&h.colorStops&&!(h instanceof e.Gradient)&&this.set(r,new e.Gradient(h))},_initPattern:function(h,r,a){h&&h.source&&!(h instanceof e.Pattern)?this.set(r,new e.Pattern(h,a)):a&&a()},_setObject:function(h){for(var r in h)this._set(r,h[r])},set:function(h,r){return typeof h=="object"?this._setObject(h):this._set(h,r),this},_set:function(h,r){this[h]=r},toggle:function(h){var r=this.get(h);return typeof r=="boolean"&&this.set(h,!r),this},get:function(h){return this[h]}},function(h){var r=Math.sqrt,a=Math.atan2,c=Math.pow,i=Math.PI/180,o=Math.PI/2;e.util={cos:function(s){if(s===0)return 1;s<0&&(s=-s);var u=s/o;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(s===0)return 0;var u=s/o,d=1;switch(s<0&&(d=-1),u){case 1:return d;case 2:return 0;case 3:return-d}return Math.sin(s)},removeFromArray:function(s,u){var d=s.indexOf(u);return d!==-1&&s.splice(d,1),s},getRandomInt:function(s,u){return Math.floor(Math.random()*(u-s+1))+s},degreesToRadians:function(s){return s*i},radiansToDegrees:function(s){return s/i},rotatePoint:function(s,u,d){var l=new e.Point(s.x-u.x,s.y-u.y),g=e.util.rotateVector(l,d);return new e.Point(g.x,g.y).addEquals(u)},rotateVector:function(s,u){var d=e.util.sin(u),l=e.util.cos(u),g=s.x*l-s.y*d,v=s.x*d+s.y*l;return{x:g,y:v}},transformPoint:function(s,u,d){return d?new e.Point(u[0]*s.x+u[2]*s.y,u[1]*s.x+u[3]*s.y):new e.Point(u[0]*s.x+u[2]*s.y+u[4],u[1]*s.x+u[3]*s.y+u[5])},makeBoundingBoxFromPoints:function(s,u){if(u)for(var d=0;d<s.length;d++)s[d]=e.util.transformPoint(s[d],u);var l=[s[0].x,s[1].x,s[2].x,s[3].x],g=e.util.array.min(l),v=e.util.array.max(l),b=v-g,_=[s[0].y,s[1].y,s[2].y,s[3].y],w=e.util.array.min(_),S=e.util.array.max(_),T=S-w;return{left:g,top:w,width:b,height:T}},invertTransform:function(s){var u=1/(s[0]*s[3]-s[1]*s[2]),d=[u*s[3],-u*s[1],-u*s[2],u*s[0]],l=e.util.transformPoint({x:s[4],y:s[5]},d,!0);return d[4]=-l.x,d[5]=-l.y,d},toFixed:function(s,u){return parseFloat(Number(s).toFixed(u))},parseUnit:function(s,u){var d=/\D{0,2}$/.exec(s),l=parseFloat(s);switch(u||(u=e.Text.DEFAULT_SVG_FONT_SIZE),d[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*u;default:return l}},falseFunction:function(){return!1},getKlass:function(s,u){return s=e.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),e.util.resolveNamespace(u)[s]},getSvgAttributes:function(s){var u=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(s){if(!s)return e;var u=s.split("."),d=u.length,l,g=h||e.window;for(l=0;l<d;++l)g=g[u[l]];return g},loadImage:function(s,u,d,l){if(!s){u&&u.call(d,s);return}var g=e.util.createImage(),v=function(){u&&u.call(d,g,!1),g=g.onload=g.onerror=null};g.onload=v,g.onerror=function(){e.log("Error loading "+g.src),u&&u.call(d,null,!0),g=g.onload=g.onerror=null},s.indexOf("data")!==0&&l!==void 0&&l!==null&&(g.crossOrigin=l),s.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,v)),g.src=s},loadImageInDom:function(s,u){var d=e.document.createElement("div");d.style.width=d.style.height="1px",d.style.left=d.style.top="-100%",d.style.position="absolute",d.appendChild(s),e.document.querySelector("body").appendChild(d),s.onload=function(){u(),d.parentNode.removeChild(d),d=null}},enlivenObjects:function(s,u,d,l){s=s||[];var g=[],v=0,b=s.length;function _(){++v===b&&u&&u(g.filter(function(w){return w}))}if(!b){u&&u(g);return}s.forEach(function(w,S){if(!w||!w.type){_();return}var T=e.util.getKlass(w.type,d);T.fromObject(w,function(x,D){D||(g[S]=x),l&&l(w,x,D),_()})})},enlivenPatterns:function(s,u){s=s||[];function d(){++g===v&&u&&u(l)}var l=[],g=0,v=s.length;if(!v){u&&u(l);return}s.forEach(function(b,_){b&&b.source?new e.Pattern(b,function(w){l[_]=w,d()}):(l[_]=b,d())})},groupSVGElements:function(s,u,d){var l;return s&&s.length===1?s[0]:(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),l=new e.Group(s,u),typeof d!="undefined"&&(l.sourcePath=d),l)},populateWithProperties:function(s,u,d){if(d&&Object.prototype.toString.call(d)==="[object Array]")for(var l=0,g=d.length;l<g;l++)d[l]in s&&(u[d[l]]=s[d[l]])},drawDashedLine:function(s,u,d,l,g,v){var b=l-u,_=g-d,w=r(b*b+_*_),S=a(_,b),T=v.length,x=0,D=!0;for(s.save(),s.translate(u,d),s.moveTo(0,0),s.rotate(S),u=0;w>u;)u+=v[x++%T],u>w&&(u=w),s[D?"lineTo":"moveTo"](u,0),D=!D;s.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(s){var u=e.util.createCanvasElement();return u.width=s.width,u.height=s.height,u.getContext("2d").drawImage(s,0,0),u},toDataURL:function(s,u,d){return s.toDataURL("image/"+u,d)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(s,u,d){return[s[0]*u[0]+s[2]*u[1],s[1]*u[0]+s[3]*u[1],s[0]*u[2]+s[2]*u[3],s[1]*u[2]+s[3]*u[3],d?0:s[0]*u[4]+s[2]*u[5]+s[4],d?0:s[1]*u[4]+s[3]*u[5]+s[5]]},qrDecompose:function(s){var u=a(s[1],s[0]),d=c(s[0],2)+c(s[1],2),l=r(d),g=(s[0]*s[3]-s[2]*s[1])/l,v=a(s[0]*s[2]+s[1]*s[3],d);return{angle:u/i,scaleX:l,scaleY:g,skewX:v/i,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return e.iMatrix.concat();var u=e.util.degreesToRadians(s.angle),d=e.util.cos(u),l=e.util.sin(u);return[d,l,-l,d,0,0]},calcDimensionsMatrix:function(s){var u=typeof s.scaleX=="undefined"?1:s.scaleX,d=typeof s.scaleY=="undefined"?1:s.scaleY,l=[s.flipX?-u:u,0,0,s.flipY?-d:d,0,0],g=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return s.skewX&&(l=g(l,[1,0,Math.tan(v(s.skewX)),1],!0)),s.skewY&&(l=g(l,[1,Math.tan(v(s.skewY)),0,1],!0)),l},composeMatrix:function(s){var u=[1,0,0,1,s.translateX||0,s.translateY||0],d=e.util.multiplyTransformMatrices;return s.angle&&(u=d(u,e.util.calcRotateMatrix(s))),(s.scaleX!==1||s.scaleY!==1||s.skewX||s.skewY||s.flipX||s.flipY)&&(u=d(u,e.util.calcDimensionsMatrix(s))),u},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,u,d,l){l>0&&(u>l?u-=l:u=0,d>l?d-=l:d=0);var g=!0,v,b,_=s.getImageData(u,d,l*2||1,l*2||1),w=_.data.length;for(v=3;v<w&&(b=_.data[v],g=b<=0,g!==!1);v+=4);return _=null,g},parsePreserveAspectRatioAttribute:function(s){var u="meet",d="Mid",l="Mid",g=s.split(" "),v;return g&&g.length&&(u=g.pop(),u!=="meet"&&u!=="slice"?(v=u,u="meet"):g.length&&(v=g.pop())),d=v!=="none"?v.slice(1,4):"none",l=v!=="none"?v.slice(5,8):"none",{meetOrSlice:u,alignX:d,alignY:l}},clearFabricFontCache:function(s){s=(s||"").toLowerCase(),s?e.charWidthsCache[s]&&delete e.charWidthsCache[s]:e.charWidthsCache={}},limitDimsByArea:function(s,u){var d=Math.sqrt(u*s),l=Math.floor(u/d);return{x:Math.floor(d),y:l}},capValue:function(s,u,d){return Math.max(s,Math.min(u,d))},findScaleToFit:function(s,u){return Math.min(u.width/s.width,u.height/s.height)},findScaleToCover:function(s,u){return Math.max(u.width/s.width,u.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(u){return e.util.toFixed(u,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,u){var d=e.util.invertTransform(u),l=e.util.multiplyTransformMatrices(d,s.calcOwnMatrix());e.util.applyTransformToObject(s,l)},addTransformToObject:function(s,u){e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(u,s.calcOwnMatrix()))},applyTransformToObject:function(s,u){var d=e.util.qrDecompose(u),l=new e.Point(d.translateX,d.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",d.scaleX),s.set("scaleY",d.scaleY),s.skewX=d.skewX,s.skewY=d.skewY,s.angle=d.angle,s.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(s,u,d){var l=s/2,g=u/2,v=[{x:-l,y:-g},{x:l,y:-g},{x:-l,y:g},{x:l,y:g}],b=e.util.calcDimensionsMatrix(d),_=e.util.makeBoundingBoxFromPoints(v,b);return{x:_.width,y:_.height}}}}(t),function(){var h=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function c(P,j,U,A,E,M,R,J,B,G,V){var Q=e.util.cos(P),Y=e.util.sin(P),F=e.util.cos(j),z=e.util.sin(j),Z=U*E*F-A*M*z+R,X=A*E*F+U*M*z+J,ee=G+B*(-U*E*Y-A*M*Q),re=V+B*(-A*E*Y+U*M*Q),fe=Z+B*(U*E*z+A*M*F),le=X+B*(A*E*z-U*M*F);return["C",ee,re,fe,le,Z,X]}function i(P,j,U,A,E,M,R){var J=Math.PI,B=R*J/180,G=e.util.sin(B),V=e.util.cos(B),Q=0,Y=0;U=Math.abs(U),A=Math.abs(A);var F=-V*P*.5-G*j*.5,z=-V*j*.5+G*P*.5,Z=U*U,X=A*A,ee=z*z,re=F*F,fe=Z*X-Z*ee-X*re,le=0;if(fe<0){var $=Math.sqrt(1-fe/(Z*X));U*=$,A*=$}else le=(E===M?-1:1)*Math.sqrt(fe/(Z*ee+X*re));var ue=le*U*z/A,he=-le*A*F/U,be=V*ue-G*he+P*.5,je=G*ue+V*he+j*.5,Oe=o(1,0,(F-ue)/U,(z-he)/A),ye=o((F-ue)/U,(z-he)/A,(-F-ue)/U,(-z-he)/A);M===0&&ye>0?ye-=2*J:M===1&&ye<0&&(ye+=2*J);for(var me=Math.ceil(Math.abs(ye/J*2)),Ee=[],Xe=ye/me,xt=8/3*Math.sin(Xe/4)*Math.sin(Xe/4)/Math.sin(Xe/2),ie=Oe+Xe,Ye=0;Ye<me;Ye++)Ee[Ye]=c(Oe,ie,V,G,U,A,be,je,xt,Q,Y),Q=Ee[Ye][5],Y=Ee[Ye][6],Oe=ie,ie+=Xe;return Ee}function o(P,j,U,A){var E=Math.atan2(j,P),M=Math.atan2(A,U);return M>=E?M-E:2*Math.PI-(E-M)}function s(P,j,U,A,E,M,R,J){var B;if(e.cachesBoundsOfCurve&&(B=h.call(arguments),e.boundsOfCurveCache[B]))return e.boundsOfCurveCache[B];var G=Math.sqrt,V=Math.min,Q=Math.max,Y=Math.abs,F=[],z=[[],[]],Z,X,ee,re,fe,le,$,ue;X=6*P-12*U+6*E,Z=-3*P+9*U-9*E+3*R,ee=3*U-3*P;for(var he=0;he<2;++he){if(he>0&&(X=6*j-12*A+6*M,Z=-3*j+9*A-9*M+3*J,ee=3*A-3*j),Y(Z)<1e-12){if(Y(X)<1e-12)continue;re=-ee/X,0<re&&re<1&&F.push(re);continue}$=X*X-4*ee*Z,!($<0)&&(ue=G($),fe=(-X+ue)/(2*Z),0<fe&&fe<1&&F.push(fe),le=(-X-ue)/(2*Z),0<le&&le<1&&F.push(le))}for(var be,je,Oe=F.length,ye=Oe,me;Oe--;)re=F[Oe],me=1-re,be=me*me*me*P+3*me*me*re*U+3*me*re*re*E+re*re*re*R,z[0][Oe]=be,je=me*me*me*j+3*me*me*re*A+3*me*re*re*M+re*re*re*J,z[1][Oe]=je;z[0][ye]=P,z[1][ye]=j,z[0][ye+1]=R,z[1][ye+1]=J;var Ee=[{x:V.apply(null,z[0]),y:V.apply(null,z[1])},{x:Q.apply(null,z[0]),y:Q.apply(null,z[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[B]=Ee),Ee}function u(P,j,U){for(var A=U[1],E=U[2],M=U[3],R=U[4],J=U[5],B=U[6],G=U[7],V=i(B-P,G-j,A,E,R,J,M),Q=0,Y=V.length;Q<Y;Q++)V[Q][1]+=P,V[Q][2]+=j,V[Q][3]+=P,V[Q][4]+=j,V[Q][5]+=P,V[Q][6]+=j;return V}function d(P){var j=0,U=0,A=P.length,E=0,M=0,R,J,B,G=[],V,Q,Y;for(J=0;J<A;++J){switch(B=!1,R=P[J].slice(0),R[0]){case"l":R[0]="L",R[1]+=j,R[2]+=U;case"L":j=R[1],U=R[2];break;case"h":R[1]+=j;case"H":R[0]="L",R[2]=U,j=R[1];break;case"v":R[1]+=U;case"V":R[0]="L",U=R[1],R[1]=j,R[2]=U;break;case"m":R[0]="M",R[1]+=j,R[2]+=U;case"M":j=R[1],U=R[2],E=R[1],M=R[2];break;case"c":R[0]="C",R[1]+=j,R[2]+=U,R[3]+=j,R[4]+=U,R[5]+=j,R[6]+=U;case"C":Q=R[3],Y=R[4],j=R[5],U=R[6];break;case"s":R[0]="S",R[1]+=j,R[2]+=U,R[3]+=j,R[4]+=U;case"S":V==="C"?(Q=2*j-Q,Y=2*U-Y):(Q=j,Y=U),j=R[3],U=R[4],R[0]="C",R[5]=R[3],R[6]=R[4],R[3]=R[1],R[4]=R[2],R[1]=Q,R[2]=Y,Q=R[3],Y=R[4];break;case"q":R[0]="Q",R[1]+=j,R[2]+=U,R[3]+=j,R[4]+=U;case"Q":Q=R[1],Y=R[2],j=R[3],U=R[4];break;case"t":R[0]="T",R[1]+=j,R[2]+=U;case"T":V==="Q"?(Q=2*j-Q,Y=2*U-Y):(Q=j,Y=U),R[0]="Q",j=R[1],U=R[2],R[1]=Q,R[2]=Y,R[3]=j,R[4]=U;break;case"a":R[0]="A",R[6]+=j,R[7]+=U;case"A":B=!0,G=G.concat(u(j,U,R)),j=R[6],U=R[7];break;case"z":case"Z":j=E,U=M;break}B||G.push(R),V=R[0]}return G}function l(P,j,U,A){return Math.sqrt((U-P)*(U-P)+(A-j)*(A-j))}function g(P){return P*P*P}function v(P){return 3*P*P*(1-P)}function b(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}function w(P,j,U,A,E,M,R,J){return function(B){var G=g(B),V=v(B),Q=b(B),Y=_(B);return{x:R*G+E*V+U*Q+P*Y,y:J*G+M*V+A*Q+j*Y}}}function S(P,j,U,A,E,M,R,J){return function(B){var G=1-B,V=3*G*G*(U-P)+6*G*B*(E-U)+3*B*B*(R-E),Q=3*G*G*(A-j)+6*G*B*(M-A)+3*B*B*(J-M);return Math.atan2(Q,V)}}function T(P){return P*P}function x(P){return 2*P*(1-P)}function D(P){return(1-P)*(1-P)}function N(P,j,U,A,E,M){return function(R){var J=T(R),B=x(R),G=D(R);return{x:E*J+U*B+P*G,y:M*J+A*B+j*G}}}function W(P,j,U,A,E,M){return function(R){var J=1-R,B=2*J*(U-P)+2*R*(E-U),G=2*J*(A-j)+2*R*(M-A);return Math.atan2(G,B)}}function k(P,j,U){var A={x:j,y:U},E,M=0,R;for(R=1;R<=100;R+=1)E=P(R/100),M+=l(A.x,A.y,E.x,E.y),A=E;return M}function q(P,j){for(var U=0,A=0,E=P.iterator,M={x:P.x,y:P.y},R,J,B=.01,G=P.angleFinder,V;A<j&&U<=1&&B>1e-4;)R=E(U),V=U,J=l(M.x,M.y,R.x,R.y),J+A>j?(B/=2,U-=B):(M=R,U+=B,A+=J);return R.angle=G(V),R}function K(P){for(var j=0,U=P.length,A,E=0,M=0,R=0,J=0,B=[],G,V,Q,Y=0;Y<U;Y++){switch(A=P[Y],V={x:E,y:M,command:A[0]},A[0]){case"M":V.length=0,R=E=A[1],J=M=A[2];break;case"L":V.length=l(E,M,A[1],A[2]),E=A[1],M=A[2];break;case"C":G=w(E,M,A[1],A[2],A[3],A[4],A[5],A[6]),Q=S(E,M,A[1],A[2],A[3],A[4],A[5],A[6]),V.iterator=G,V.angleFinder=Q,V.length=k(G,E,M),E=A[5],M=A[6];break;case"Q":G=N(E,M,A[1],A[2],A[3],A[4]),Q=W(E,M,A[1],A[2],A[3],A[4]),V.iterator=G,V.angleFinder=Q,V.length=k(G,E,M),E=A[3],M=A[4];break;case"Z":case"z":V.destX=R,V.destY=J,V.length=l(E,M,R,J),E=R,M=J;break}j+=V.length,B.push(V)}return B.push({length:j,x:E,y:M}),B}function ne(P,j,U){U||(U=K(P));for(var A=0;j-U[A].length>0&&A<U.length-2;)j-=U[A].length,A++;var E=U[A],M=j/E.length,R=E.command,J=P[A],B;switch(R){case"M":return{x:E.x,y:E.y,angle:0};case"Z":case"z":return B=new e.Point(E.x,E.y).lerp(new e.Point(E.destX,E.destY),M),B.angle=Math.atan2(E.destY-E.y,E.destX-E.x),B;case"L":return B=new e.Point(E.x,E.y).lerp(new e.Point(J[1],J[2]),M),B.angle=Math.atan2(J[2]-E.y,J[1]-E.x),B;case"C":return q(E,j);case"Q":return q(E,j)}}function se(P){var j=[],U=[],A,E,M=e.rePathCommand,R="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",J="("+R+")"+e.commaWsp,B="([01])"+e.commaWsp+"?",G=J+"?"+J+"?"+J+B+B+J+"?("+R+")",V=new RegExp(G,"g"),Q,Y,F;if(!P||!P.match)return j;F=P.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var z=0,Z,X=F.length;z<X;z++){A=F[z],Y=A.slice(1).trim(),U.length=0;var ee=A.charAt(0);if(Z=[ee],ee.toLowerCase()==="a")for(var re;re=V.exec(Y);)for(var fe=1;fe<re.length;fe++)U.push(re[fe]);else for(;Q=M.exec(Y);)U.push(Q[0]);for(var fe=0,le=U.length;fe<le;fe++)E=parseFloat(U[fe]),isNaN(E)||Z.push(E);var $=r[ee.toLowerCase()],ue=a[ee]||ee;if(Z.length-1>$)for(var he=1,be=Z.length;he<be;he+=$)j.push([ee].concat(Z.slice(he,he+$))),ee=ue;else j.push(Z)}return j}function oe(P,j){var U=[],A,E=new e.Point(P[0].x,P[0].y),M=new e.Point(P[1].x,P[1].y),R=P.length,J=1,B=0,G=R>2;for(j=j||0,G&&(J=P[2].x<M.x?-1:P[2].x===M.x?0:1,B=P[2].y<M.y?-1:P[2].y===M.y?0:1),U.push(["M",E.x-J*j,E.y-B*j]),A=1;A<R;A++){if(!E.eq(M)){var V=E.midPointFrom(M);U.push(["Q",E.x,E.y,V.x,V.y])}E=P[A],A+1<P.length&&(M=P[A+1])}return G&&(J=E.x>P[A-2].x?1:E.x===P[A-2].x?0:-1,B=E.y>P[A-2].y?1:E.y===P[A-2].y?0:-1),U.push(["L",E.x+J*j,E.y+B*j]),U}function ae(P,j,U){return U&&(j=e.util.multiplyTransformMatrices(j,[1,0,0,1,-U.x,-U.y])),P.map(function(A){for(var E=A.slice(0),M={},R=1;R<A.length-1;R+=2)M.x=A[R],M.y=A[R+1],M=e.util.transformPoint(M,j),E[R]=M.x,E[R+1]=M.y;return E})}function I(P,j,U,A,E,M,R,J,B){for(var G=0,V=0,Q,Y=[],F=i(J-P,B-j,U,A,M,R,E),z=0,Z=F.length;z<Z;z++)Q=s(G,V,F[z][1],F[z][2],F[z][3],F[z][4],F[z][5],F[z][6]),Y.push({x:Q[0].x+P,y:Q[0].y+j}),Y.push({x:Q[1].x+P,y:Q[1].y+j}),G=F[z][5],V=F[z][6];return Y}function H(P,j,U,A){A=A.slice(0).unshift("X");var E=u(j,U,A);E.forEach(function(M){P.bezierCurveTo.apply(P,M.slice(1))})}e.util.joinPath=function(P){return P.map(function(j){return j.join(" ")}).join(" ")},e.util.parsePath=se,e.util.makePathSimpler=d,e.util.getSmoothPathFromPoints=oe,e.util.getPathSegmentsInfo=K,e.util.getBoundsOfCurve=s,e.util.getPointOnPath=ne,e.util.transformPath=ae,e.util.fromArcToBeizers=u,e.util.getBoundsOfArc=I,e.util.drawArc=H}(),function(){var h=Array.prototype.slice;function r(s,u){for(var d=h.call(arguments,2),l=[],g=0,v=s.length;g<v;g++)l[g]=d.length?s[g][u].apply(s[g],d):s[g][u].call(s[g]);return l}function a(s,u){return o(s,u,function(d,l){return d>=l})}function c(s,u){return o(s,u,function(d,l){return d<l})}function i(s,u){for(var d=s.length;d--;)s[d]=u;return s}function o(s,u,d){if(!(!s||s.length===0)){var l=s.length-1,g=u?s[l][u]:s[l];if(u)for(;l--;)d(s[l][u],g)&&(g=s[l][u]);else for(;l--;)d(s[l],g)&&(g=s[l]);return g}}e.util.array={fill:i,invoke:r,min:c,max:a}}(),function(){function h(a,c,i){if(i)if(!e.isLikelyNode&&c instanceof Element)a=c;else if(c instanceof Array){a=[];for(var o=0,s=c.length;o<s;o++)a[o]=h({},c[o],i)}else if(c&&typeof c=="object")for(var u in c)u==="canvas"||u==="group"?a[u]=null:c.hasOwnProperty(u)&&(a[u]=h({},c[u],i));else a=c;else for(var u in c)a[u]=c[u];return a}function r(a,c){return h({},a,c)}e.util.object={extend:h,clone:r},e.util.object.extend(e.util,e.Observable)}(),function(){function h(o){return o.replace(/-+(.)?/g,function(s,u){return u?u.toUpperCase():""})}function r(o,s){return o.charAt(0).toUpperCase()+(s?o.slice(1):o.slice(1).toLowerCase())}function a(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(o){var s=0,u,d=[];for(s=0,u;s<o.length;s++)(u=i(o,s))!==!1&&d.push(u);return d}function i(o,s){var u=o.charCodeAt(s);if(isNaN(u))return"";if(u<55296||u>57343)return o.charAt(s);if(55296<=u&&u<=56319){if(o.length<=s+1)throw"High surrogate without following low surrogate";var d=o.charCodeAt(s+1);if(56320>d||d>57343)throw"High surrogate without following low surrogate";return o.charAt(s)+o.charAt(s+1)}if(s===0)throw"Low surrogate without preceding high surrogate";var l=o.charCodeAt(s-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:h,capitalize:r,escapeXml:a,graphemeSplit:c}}(),function(){var h=Array.prototype.slice,r=function(){},a=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),c=function(u,d,l){for(var g in d)g in u.prototype&&typeof u.prototype[g]=="function"&&(d[g]+"").indexOf("callSuper")>-1?u.prototype[g]=function(v){return function(){var b=this.constructor.superclass;this.constructor.superclass=l;var _=d[v].apply(this,arguments);if(this.constructor.superclass=b,v!=="initialize")return _}}(g):u.prototype[g]=d[g],a&&(d.toString!==Object.prototype.toString&&(u.prototype.toString=d.toString),d.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=d.valueOf))};function i(){}function o(u){for(var d=null,l=this;l.constructor.superclass;){var g=l.constructor.superclass.prototype[u];if(l[u]!==g){d=g;break}l=l.constructor.superclass.prototype}return d?arguments.length>1?d.apply(this,h.call(arguments,1)):d.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function s(){var u=null,d=h.call(arguments,0);typeof d[0]=="function"&&(u=d.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=u,l.subclasses=[],u&&(i.prototype=u.prototype,l.prototype=new i,u.subclasses.push(l));for(var g=0,v=d.length;g<v;g++)c(l,d[g],u);return l.prototype.initialize||(l.prototype.initialize=r),l.prototype.constructor=l,l.prototype.callSuper=o,l}e.util.createClass=s}(),function(){var h=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(c,i,o,s){c&&c.addEventListener(i,o,h?!1:s)},e.util.removeListener=function(c,i,o,s){c&&c.removeEventListener(i,o,h?!1:s)};function a(c){var i=c.changedTouches;return i&&i[0]?i[0]:c}e.util.getPointer=function(c){var i=c.target,o=e.util.getScrollLeftTop(i),s=a(c);return{x:s.clientX+o.left,y:s.clientY+o.top}},e.util.isTouchEvent=function(c){return r.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function h(s,u){var d=s.style;if(!d)return s;if(typeof u=="string")return s.style.cssText+=";"+u,u.indexOf("opacity")>-1?o(s,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var l in u)if(l==="opacity")o(s,u[l]);else{var g=l==="float"||l==="cssFloat"?typeof d.styleFloat=="undefined"?"cssFloat":"styleFloat":l;d[g]=u[l]}return s}var r=e.document.createElement("div"),a=typeof r.style.opacity=="string",c=typeof r.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(s){return s};a?o=function(s,u){return s.style.opacity=u,s}:c&&(o=function(s,u){var d=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(d.zoom=1),i.test(d.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",d.filter=d.filter.replace(i,u)):d.filter+=" alpha(opacity="+u*100+")",s}),e.util.setStyle=h}(),function(){var h=Array.prototype.slice;function r(_){return typeof _=="string"?e.document.getElementById(_):_}var a,c=function(_){return h.call(_,0)};try{a=c(e.document.childNodes)instanceof Array}catch{}a||(c=function(_){for(var w=new Array(_.length),S=_.length;S--;)w[S]=_[S];return w});function i(_,w){var S=e.document.createElement(_);for(var T in w)T==="class"?S.className=w[T]:T==="for"?S.htmlFor=w[T]:S.setAttribute(T,w[T]);return S}function o(_,w){_&&(" "+_.className+" ").indexOf(" "+w+" ")===-1&&(_.className+=(_.className?" ":"")+w)}function s(_,w,S){return typeof w=="string"&&(w=i(w,S)),_.parentNode&&_.parentNode.replaceChild(w,_),w.appendChild(_),w}function u(_){for(var w=0,S=0,T=e.document.documentElement,x=e.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===e.document?(w=x.scrollLeft||T.scrollLeft||0,S=x.scrollTop||T.scrollTop||0):(w+=_.scrollLeft||0,S+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:w,top:S}}function d(_){var w,S=_&&_.ownerDocument,T={left:0,top:0},x={left:0,top:0},D,N={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return x;for(var W in N)x[N[W]]+=parseInt(l(_,W),10)||0;return w=S.documentElement,typeof _.getBoundingClientRect!="undefined"&&(T=_.getBoundingClientRect()),D=u(_),{left:T.left+D.left-(w.clientLeft||0)+x.left,top:T.top+D.top-(w.clientTop||0)+x.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(_,w){var S=e.document.defaultView.getComputedStyle(_,null);return S?S[w]:void 0}:l=function(_,w){var S=_.style[w];return!S&&_.currentStyle&&(S=_.currentStyle[w]),S},function(){var _=e.document.documentElement.style,w="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function S(x){return typeof x.onselectstart!="undefined"&&(x.onselectstart=e.util.falseFunction),w?x.style[w]="none":typeof x.unselectable=="string"&&(x.unselectable="on"),x}function T(x){return typeof x.onselectstart!="undefined"&&(x.onselectstart=null),w?x.style[w]="":typeof x.unselectable=="string"&&(x.unselectable=""),x}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=T}();function g(_){var w=e.jsdomImplForWrapper(_);return w._canvas||w._image}function v(_){if(!!e.isLikelyNode){var w=e.jsdomImplForWrapper(_);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function b(_,w){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=w}e.util.setImageSmoothing=b,e.util.getById=r,e.util.toArray=c,e.util.addClass=o,e.util.makeElement=i,e.util.wrapElement=s,e.util.getScrollLeftTop=u,e.util.getElementOffset=d,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=v}(),function(){function h(c,i){return c+(/\?/.test(c)?"&":"?")+i}function r(){}function a(c,i){i||(i={});var o=i.method?i.method.toUpperCase():"GET",s=i.onComplete||function(){},u=new e.window.XMLHttpRequest,d=i.body||i.parameters;return u.onreadystatechange=function(){u.readyState===4&&(s(u),u.onreadystatechange=r)},o==="GET"&&(d=null,typeof i.parameters=="string"&&(c=h(c,i.parameters))),u.open(o,c,!0),(o==="POST"||o==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(d),u}e.util.request=a}(),e.log=console.log,e.warn=console.warn,function(){function h(){return!1}function r(u,d,l,g){return-l*Math.cos(u/g*(Math.PI/2))+l+d}function a(u){var d=!1;return o(function(l){u||(u={});var g=l||+new Date,v=u.duration||500,b=g+v,_,w=u.onChange||h,S=u.abort||h,T=u.onComplete||h,x=u.easing||r,D="startValue"in u?u.startValue:0,N="endValue"in u?u.endValue:100,W=u.byValue||N-D;u.onStart&&u.onStart(),function k(q){_=q||+new Date;var K=_>b?v:_-g,ne=K/v,se=x(K,D,W,v),oe=Math.abs((se-D)/W);if(!d){if(S(se,oe,ne)){T(N,1,1);return}if(_>b){w(N,1,1),T(N,1,1);return}else w(se,oe,ne),o(k)}}(g)}),function(){d=!0}}var c=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(u){return e.window.setTimeout(u,1e3/60)},i=e.window.cancelAnimationFrame||e.window.clearTimeout;function o(){return c.apply(e.window,arguments)}function s(){return i.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=o,e.util.cancelAnimFrame=s}(),function(){function h(a,c,i){var o="rgba("+parseInt(a[0]+i*(c[0]-a[0]),10)+","+parseInt(a[1]+i*(c[1]-a[1]),10)+","+parseInt(a[2]+i*(c[2]-a[2]),10);return o+=","+(a&&c?parseFloat(a[3]+i*(c[3]-a[3])):1),o+=")",o}function r(a,c,i,o){var s=new e.Color(a).getSource(),u=new e.Color(c).getSource(),d=o.onComplete,l=o.onChange;return o=o||{},e.util.animate(e.util.object.extend(o,{duration:i||500,startValue:s,endValue:u,byValue:u,easing:function(g,v,b,_){var w=o.colorEasing?o.colorEasing(g,_):1-Math.cos(g/_*(Math.PI/2));return h(v,b,w)},onComplete:function(g,v,b){if(d)return d(h(u,u,0),v,b)},onChange:function(g,v,b){if(l){if(Array.isArray(g))return l(h(g,g,0),v,b);l(g,v,b)}}}))}e.util.animateColor=r}(),function(){function h(I,H,P,j){return I<Math.abs(H)?(I=H,j=P/4):H===0&&I===0?j=P/(2*Math.PI)*Math.asin(1):j=P/(2*Math.PI)*Math.asin(H/I),{a:I,c:H,p:P,s:j}}function r(I,H,P){return I.a*Math.pow(2,10*(H-=1))*Math.sin((H*P-I.s)*(2*Math.PI)/I.p)}function a(I,H,P,j){return P*((I=I/j-1)*I*I+1)+H}function c(I,H,P,j){return I/=j/2,I<1?P/2*I*I*I+H:P/2*((I-=2)*I*I+2)+H}function i(I,H,P,j){return P*(I/=j)*I*I*I+H}function o(I,H,P,j){return-P*((I=I/j-1)*I*I*I-1)+H}function s(I,H,P,j){return I/=j/2,I<1?P/2*I*I*I*I+H:-P/2*((I-=2)*I*I*I-2)+H}function u(I,H,P,j){return P*(I/=j)*I*I*I*I+H}function d(I,H,P,j){return P*((I=I/j-1)*I*I*I*I+1)+H}function l(I,H,P,j){return I/=j/2,I<1?P/2*I*I*I*I*I+H:P/2*((I-=2)*I*I*I*I+2)+H}function g(I,H,P,j){return-P*Math.cos(I/j*(Math.PI/2))+P+H}function v(I,H,P,j){return P*Math.sin(I/j*(Math.PI/2))+H}function b(I,H,P,j){return-P/2*(Math.cos(Math.PI*I/j)-1)+H}function _(I,H,P,j){return I===0?H:P*Math.pow(2,10*(I/j-1))+H}function w(I,H,P,j){return I===j?H+P:P*(-Math.pow(2,-10*I/j)+1)+H}function S(I,H,P,j){return I===0?H:I===j?H+P:(I/=j/2,I<1?P/2*Math.pow(2,10*(I-1))+H:P/2*(-Math.pow(2,-10*--I)+2)+H)}function T(I,H,P,j){return-P*(Math.sqrt(1-(I/=j)*I)-1)+H}function x(I,H,P,j){return P*Math.sqrt(1-(I=I/j-1)*I)+H}function D(I,H,P,j){return I/=j/2,I<1?-P/2*(Math.sqrt(1-I*I)-1)+H:P/2*(Math.sqrt(1-(I-=2)*I)+1)+H}function N(I,H,P,j){var U=1.70158,A=0,E=P;if(I===0)return H;if(I/=j,I===1)return H+P;A||(A=j*.3);var M=h(E,P,A,U);return-r(M,I,j)+H}function W(I,H,P,j){var U=1.70158,A=0,E=P;if(I===0)return H;if(I/=j,I===1)return H+P;A||(A=j*.3);var M=h(E,P,A,U);return M.a*Math.pow(2,-10*I)*Math.sin((I*j-M.s)*(2*Math.PI)/M.p)+M.c+H}function k(I,H,P,j){var U=1.70158,A=0,E=P;if(I===0)return H;if(I/=j/2,I===2)return H+P;A||(A=j*(.3*1.5));var M=h(E,P,A,U);return I<1?-.5*r(M,I,j)+H:M.a*Math.pow(2,-10*(I-=1))*Math.sin((I*j-M.s)*(2*Math.PI)/M.p)*.5+M.c+H}function q(I,H,P,j,U){return U===void 0&&(U=1.70158),P*(I/=j)*I*((U+1)*I-U)+H}function K(I,H,P,j,U){return U===void 0&&(U=1.70158),P*((I=I/j-1)*I*((U+1)*I+U)+1)+H}function ne(I,H,P,j,U){return U===void 0&&(U=1.70158),I/=j/2,I<1?P/2*(I*I*(((U*=1.525)+1)*I-U))+H:P/2*((I-=2)*I*(((U*=1.525)+1)*I+U)+2)+H}function se(I,H,P,j){return P-oe(j-I,0,P,j)+H}function oe(I,H,P,j){return(I/=j)<1/2.75?P*(7.5625*I*I)+H:I<2/2.75?P*(7.5625*(I-=1.5/2.75)*I+.75)+H:I<2.5/2.75?P*(7.5625*(I-=2.25/2.75)*I+.9375)+H:P*(7.5625*(I-=2.625/2.75)*I+.984375)+H}function ae(I,H,P,j){return I<j/2?se(I*2,0,P,j)*.5+H:oe(I*2-j,0,P,j)*.5+P*.5+H}e.util.ease={easeInQuad:function(I,H,P,j){return P*(I/=j)*I+H},easeOutQuad:function(I,H,P,j){return-P*(I/=j)*(I-2)+H},easeInOutQuad:function(I,H,P,j){return I/=j/2,I<1?P/2*I*I+H:-P/2*(--I*(I-2)-1)+H},easeInCubic:function(I,H,P,j){return P*(I/=j)*I*I+H},easeOutCubic:a,easeInOutCubic:c,easeInQuart:i,easeOutQuart:o,easeInOutQuart:s,easeInQuint:u,easeOutQuint:d,easeInOutQuint:l,easeInSine:g,easeOutSine:v,easeInOutSine:b,easeInExpo:_,easeOutExpo:w,easeInOutExpo:S,easeInCirc:T,easeOutCirc:x,easeInOutCirc:D,easeInElastic:N,easeOutElastic:W,easeInOutElastic:k,easeInBack:q,easeOutBack:K,easeInOutBack:ne,easeInBounce:se,easeOutBounce:oe,easeInOutBounce:ae}}(),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.util.object.clone,i=r.util.toFixed,o=r.util.parseUnit,s=r.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],d=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",w="clip-path";r.svgValidTagNamesRegEx=x(u),r.svgViewBoxElementsRegEx=x(d),r.svgInvalidAncestorsRegEx=x(l),r.svgValidParentsRegEx=x(g),r.cssRules={},r.gradientDefs={},r.clipPaths={};function S(A){return A in v?v[A]:A}function T(A,E,M,R){var J=Object.prototype.toString.call(E)==="[object Array]",B;if((A==="fill"||A==="stroke")&&E==="none")E="";else{if(A==="strokeUniform")return E==="non-scaling-stroke";if(A==="strokeDashArray")E==="none"?E=null:E=E.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(A==="transformMatrix")M&&M.transformMatrix?E=s(M.transformMatrix,r.parseTransformAttribute(E)):E=r.parseTransformAttribute(E);else if(A==="visible")E=E!=="none"&&E!=="hidden",M&&M.visible===!1&&(E=!1);else if(A==="opacity")E=parseFloat(E),M&&typeof M.opacity!="undefined"&&(E*=M.opacity);else if(A==="textAnchor")E=E==="start"?"left":E==="end"?"right":"center";else if(A==="charSpacing")B=o(E,R)/R*1e3;else if(A==="paintFirst"){var G=E.indexOf("fill"),V=E.indexOf("stroke"),E="fill";(G>-1&&V>-1&&V<G||G===-1&&V>-1)&&(E="stroke")}else{if(A==="href"||A==="xlink:href"||A==="font")return E;if(A==="imageSmoothing")return E==="optimizeQuality";B=J?E.map(o):o(E,R)}}return!J&&isNaN(B)?E:B}function x(A){return new RegExp("^("+A.join("|")+")\\b","i")}function D(A){for(var E in b)if(!(typeof A[b[E]]=="undefined"||A[E]==="")){if(typeof A[E]=="undefined"){if(!r.Object.prototype[E])continue;A[E]=r.Object.prototype[E]}if(A[E].indexOf("url(")!==0){var M=new r.Color(A[E]);A[E]=M.setAlpha(i(M.getAlpha()*A[b[E]],2)).toRgba()}}return A}function N(A,E){var M,R=[],J,B,G;for(B=0,G=E.length;B<G;B++)M=E[B],J=A.getElementsByTagName(M),R=R.concat(Array.prototype.slice.call(J));return R}r.parseTransformAttribute=function(){function A($,ue){var he=r.util.cos(ue[0]),be=r.util.sin(ue[0]),je=0,Oe=0;ue.length===3&&(je=ue[1],Oe=ue[2]),$[0]=he,$[1]=be,$[2]=-be,$[3]=he,$[4]=je-(he*je-be*Oe),$[5]=Oe-(be*je+he*Oe)}function E($,ue){var he=ue[0],be=ue.length===2?ue[1]:ue[0];$[0]=he,$[3]=be}function M($,ue,he){$[he]=Math.tan(r.util.degreesToRadians(ue[0]))}function R($,ue){$[4]=ue[0],ue.length===2&&($[5]=ue[1])}var J=r.iMatrix,B=r.reNum,G=r.commaWsp,V="(?:(skewX)\\s*\\(\\s*("+B+")\\s*\\))",Q="(?:(skewY)\\s*\\(\\s*("+B+")\\s*\\))",Y="(?:(rotate)\\s*\\(\\s*("+B+")(?:"+G+"("+B+")"+G+"("+B+"))?\\s*\\))",F="(?:(scale)\\s*\\(\\s*("+B+")(?:"+G+"("+B+"))?\\s*\\))",z="(?:(translate)\\s*\\(\\s*("+B+")(?:"+G+"("+B+"))?\\s*\\))",Z="(?:(matrix)\\s*\\(\\s*("+B+")"+G+"("+B+")"+G+"("+B+")"+G+"("+B+")"+G+"("+B+")"+G+"("+B+")\\s*\\))",X="(?:"+Z+"|"+z+"|"+F+"|"+Y+"|"+V+"|"+Q+")",ee="(?:"+X+"(?:"+G+"*"+X+")*)",re="^\\s*(?:"+ee+"?)\\s*$",fe=new RegExp(re),le=new RegExp(X,"g");return function($){var ue=J.concat(),he=[];if(!$||$&&!fe.test($))return ue;$.replace(le,function(je){var Oe=new RegExp(X).exec(je).filter(function(Ee){return!!Ee}),ye=Oe[1],me=Oe.slice(2).map(parseFloat);switch(ye){case"translate":R(ue,me);break;case"rotate":me[0]=r.util.degreesToRadians(me[0]),A(ue,me);break;case"scale":E(ue,me);break;case"skewX":M(ue,me,2);break;case"skewY":M(ue,me,1);break;case"matrix":ue=me;break}he.push(ue.concat()),ue=J.concat()});for(var be=he[0];he.length>1;)he.shift(),be=r.util.multiplyTransformMatrices(be,he[0]);return be}}();function W(A,E){var M,R;A.replace(/;\s*$/,"").split(";").forEach(function(J){var B=J.split(":");M=B[0].trim().toLowerCase(),R=B[1].trim(),E[M]=R})}function k(A,E){var M,R;for(var J in A)typeof A[J]!="undefined"&&(M=J.toLowerCase(),R=A[J],E[M]=R)}function q(A,E){var M={};for(var R in r.cssRules[E])if(K(A,R.split(" ")))for(var J in r.cssRules[E][R])M[J]=r.cssRules[E][R][J];return M}function K(A,E){var M,R=!0;return M=se(A,E.pop()),M&&E.length&&(R=ne(A,E)),M&&R&&E.length===0}function ne(A,E){for(var M,R=!0;A.parentNode&&A.parentNode.nodeType===1&&E.length;)R&&(M=E.pop()),A=A.parentNode,R=se(A,M);return E.length===0}function se(A,E){var M=A.nodeName,R=A.getAttribute("class"),J=A.getAttribute("id"),B,G;if(B=new RegExp("^"+M,"i"),E=E.replace(B,""),J&&E.length&&(B=new RegExp("#"+J+"(?![a-zA-Z\\-]+)","i"),E=E.replace(B,"")),R&&E.length)for(R=R.split(" "),G=R.length;G--;)B=new RegExp("\\."+R[G]+"(?![a-zA-Z\\-]+)","i"),E=E.replace(B,"");return E.length===0}function oe(A,E){var M;if(A.getElementById&&(M=A.getElementById(E)),M)return M;var R,J,B,G=A.getElementsByTagName("*");for(J=0,B=G.length;J<B;J++)if(R=G[J],E===R.getAttribute("id"))return R}function ae(A){for(var E=N(A,["use","svg:use"]),M=0;E.length&&M<E.length;){var R=E[M],J=R.getAttribute("xlink:href")||R.getAttribute("href");if(J===null)return;var B=J.substr(1),G=R.getAttribute("x")||0,V=R.getAttribute("y")||0,Q=oe(A,B).cloneNode(!0),Y=(Q.getAttribute("transform")||"")+" translate("+G+", "+V+")",F,z=E.length,Z,X,ee,re,fe=r.svgNS;if(H(Q),/^svg$/i.test(Q.nodeName)){var le=Q.ownerDocument.createElementNS(fe,"g");for(X=0,ee=Q.attributes,re=ee.length;X<re;X++)Z=ee.item(X),le.setAttributeNS(fe,Z.nodeName,Z.nodeValue);for(;Q.firstChild;)le.appendChild(Q.firstChild);Q=le}for(X=0,ee=R.attributes,re=ee.length;X<re;X++)Z=ee.item(X),!(Z.nodeName==="x"||Z.nodeName==="y"||Z.nodeName==="xlink:href"||Z.nodeName==="href")&&(Z.nodeName==="transform"?Y=Z.nodeValue+" "+Y:Q.setAttribute(Z.nodeName,Z.nodeValue));Q.setAttribute("transform",Y),Q.setAttribute("instantiated_by_use","1"),Q.removeAttribute("id"),F=R.parentNode,F.replaceChild(Q,R),E.length===z&&M++}}var I=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function H(A){if(!r.svgViewBoxElementsRegEx.test(A.nodeName))return{};var E=A.getAttribute("viewBox"),M=1,R=1,J=0,B=0,G,V,Q,Y,F=A.getAttribute("width"),z=A.getAttribute("height"),Z=A.getAttribute("x")||0,X=A.getAttribute("y")||0,ee=A.getAttribute("preserveAspectRatio")||"",re=!E||!(E=E.match(I)),fe=!F||!z||F==="100%"||z==="100%",le=re&&fe,$={},ue="",he=0,be=0;if($.width=0,$.height=0,$.toBeParsed=le,re&&(Z||X)&&A.parentNode&&A.parentNode.nodeName!=="#document"&&(ue=" translate("+o(Z)+" "+o(X)+") ",Q=(A.getAttribute("transform")||"")+ue,A.setAttribute("transform",Q),A.removeAttribute("x"),A.removeAttribute("y")),le)return $;if(re)return $.width=o(F),$.height=o(z),$;if(J=-parseFloat(E[1]),B=-parseFloat(E[2]),G=parseFloat(E[3]),V=parseFloat(E[4]),$.minX=J,$.minY=B,$.viewBoxWidth=G,$.viewBoxHeight=V,fe?($.width=G,$.height=V):($.width=o(F),$.height=o(z),M=$.width/G,R=$.height/V),ee=r.util.parsePreserveAspectRatioAttribute(ee),ee.alignX!=="none"&&(ee.meetOrSlice==="meet"&&(R=M=M>R?R:M),ee.meetOrSlice==="slice"&&(R=M=M>R?M:R),he=$.width-G*M,be=$.height-V*M,ee.alignX==="Mid"&&(he/=2),ee.alignY==="Mid"&&(be/=2),ee.alignX==="Min"&&(he=0),ee.alignY==="Min"&&(be=0)),M===1&&R===1&&J===0&&B===0&&Z===0&&X===0)return $;if((Z||X)&&A.parentNode.nodeName!=="#document"&&(ue=" translate("+o(Z)+" "+o(X)+") "),Q=ue+" matrix("+M+" 0 0 "+R+" "+(J*M+he)+" "+(B*R+be)+") ",A.nodeName==="svg"){for(Y=A.ownerDocument.createElementNS(r.svgNS,"g");A.firstChild;)Y.appendChild(A.firstChild);A.appendChild(Y)}else Y=A,Y.removeAttribute("x"),Y.removeAttribute("y"),Q=Y.getAttribute("transform")+Q;return Y.setAttribute("transform",Q),$}function P(A,E){for(;A&&(A=A.parentNode);)if(A.nodeName&&E.test(A.nodeName.replace("svg:",""))&&!A.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(A,E,M,R){if(!!A){ae(A);var J=r.Object.__uid++,B,G,V=H(A),Q=r.util.toArray(A.getElementsByTagName("*"));if(V.crossOrigin=R&&R.crossOrigin,V.svgUid=J,Q.length===0&&r.isLikelyNode){Q=A.selectNodes('//*[name(.)!="svg"]');var Y=[];for(B=0,G=Q.length;B<G;B++)Y[B]=Q[B];Q=Y}var F=Q.filter(function(Z){return H(Z),r.svgValidTagNamesRegEx.test(Z.nodeName.replace("svg:",""))&&!P(Z,r.svgInvalidAncestorsRegEx)});if(!F||F&&!F.length){E&&E([],{});return}var z={};Q.filter(function(Z){return Z.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Z){var X=Z.getAttribute("id");z[X]=r.util.toArray(Z.getElementsByTagName("*")).filter(function(ee){return r.svgValidTagNamesRegEx.test(ee.nodeName.replace("svg:",""))})}),r.gradientDefs[J]=r.getGradientDefs(A),r.cssRules[J]=r.getCSSRules(A),r.clipPaths[J]=z,r.parseElements(F,function(Z,X){E&&(E(Z,V,X,Q),delete r.gradientDefs[J],delete r.cssRules[J],delete r.clipPaths[J])},c(V),M,R)}};function j(A,E){var M=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],R="xlink:href",J=E.getAttribute(R).substr(1),B=oe(A,J);if(B&&B.getAttribute(R)&&j(A,B),M.forEach(function(V){B&&!E.hasAttribute(V)&&B.hasAttribute(V)&&E.setAttribute(V,B.getAttribute(V))}),!E.children.length)for(var G=B.cloneNode(!0);G.firstChild;)E.appendChild(G.firstChild);E.removeAttribute(R)}var U=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");a(r,{parseFontDeclaration:function(A,E){var M=A.match(U);if(!!M){var R=M[1],J=M[3],B=M[4],G=M[5],V=M[6];R&&(E.fontStyle=R),J&&(E.fontWeight=isNaN(parseFloat(J))?J:parseFloat(J)),B&&(E.fontSize=o(B)),V&&(E.fontFamily=V),G&&(E.lineHeight=G==="normal"?1:G)}},getGradientDefs:function(A){var E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],M=N(A,E),R,J=0,B={};for(J=M.length;J--;)R=M[J],R.getAttribute("xlink:href")&&j(A,R),B[R.getAttribute("id")]=R;return B},parseAttributes:function(A,E,M){if(!!A){var R,J={},B,G;typeof M=="undefined"&&(M=A.getAttribute("svgUid")),A.parentNode&&r.svgValidParentsRegEx.test(A.parentNode.nodeName)&&(J=r.parseAttributes(A.parentNode,E,M));var V=E.reduce(function(ee,re){return R=A.getAttribute(re),R&&(ee[re]=R),ee},{}),Q=a(q(A,M),r.parseStyleAttribute(A));V=a(V,Q),Q[w]&&A.setAttribute(w,Q[w]),B=G=J.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,V[_]&&(V[_]=B=o(V[_],G));var Y,F,z={};for(var Z in V)Y=S(Z),F=T(Y,V[Z],J,B),z[Y]=F;z&&z.font&&r.parseFontDeclaration(z.font,z);var X=a(J,z);return r.svgValidParentsRegEx.test(A.nodeName)?X:D(X)}},parseElements:function(A,E,M,R,J){new r.ElementsParser(A,E,M,R,J).parse()},parseStyleAttribute:function(A){var E={},M=A.getAttribute("style");return M&&(typeof M=="string"?W(M,E):k(M,E)),E},parsePointsAttribute:function(A){if(!A)return null;A=A.replace(/,/g," ").trim(),A=A.split(/\s+/);var E=[],M,R;for(M=0,R=A.length;M<R;M+=2)E.push({x:parseFloat(A[M]),y:parseFloat(A[M+1])});return E},getCSSRules:function(A){var E=A.getElementsByTagName("style"),M,R,J={},B;for(M=0,R=E.length;M<R;M++){var G=E[M].textContent;G=G.replace(/\/\*[\s\S]*?\*\//g,""),G.trim()!==""&&(B=G.match(/[^{]*\{[\s\S]*?\}/g),B=B.map(function(V){return V.trim()}),B.forEach(function(V){var Q=V.match(/([\s\S]*?)\s*\{([^}]*)\}/),Y={},F=Q[2].trim(),z=F.replace(/;$/,"").split(/\s*;\s*/);for(M=0,R=z.length;M<R;M++){var Z=z[M].split(/\s*:\s*/),X=Z[0],ee=Z[1];Y[X]=ee}V=Q[1],V.split(",").forEach(function(re){re=re.replace(/^svg/i,"").trim(),re!==""&&(J[re]?r.util.object.extend(J[re],Y):J[re]=r.util.object.clone(Y))})}))}return J},loadSVGFromURL:function(A,E,M,R){A=A.replace(/^\n\s*/,"").trim(),new r.util.request(A,{method:"get",onComplete:J});function J(B){var G=B.responseXML;if(!G||!G.documentElement)return E&&E(null),!1;r.parseSVGDocument(G.documentElement,function(V,Q,Y,F){E&&E(V,Q,Y,F)},M,R)}},loadSVGFromString:function(A,E,M,R){var J=new r.window.DOMParser,B=J.parseFromString(A.trim(),"text/xml");r.parseSVGDocument(B.documentElement,function(G,V,Q,Y){E(G,V,Q,Y)},M,R)}})}(t),e.ElementsParser=function(h,r,a,c,i,o){this.elements=h,this.callback=r,this.options=a,this.reviver=c,this.svgUid=a&&a.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var r=this;this.elements.forEach(function(a,c){a.setAttribute("svgUid",r.svgUid),r.createObject(a,c)})},h.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},h.createObject=function(r,a){var c=this.findTag(r);if(c&&c.fromElement)try{c.fromElement(r,this.createCallback(a,r),this.options)}catch(i){e.log(i)}else this.checkIfDone()},h.createCallback=function(r,a){var c=this;return function(i){var o;c.resolveGradient(i,a,"fill"),c.resolveGradient(i,a,"stroke"),i instanceof e.Image&&i._originalElement&&(o=i.parsePreserveAspectRatioAttribute(a)),i._removeTransformMatrix(o),c.resolveClipPath(i,a),c.reviver&&c.reviver(a,i),c.instances[r]=i,c.checkIfDone()}},h.extractPropertyDefinition=function(r,a,c){var i=r[a],o=this.regexUrl;if(!!o.test(i)){o.lastIndex=0;var s=o.exec(i)[1];return o.lastIndex=0,e[c][this.svgUid][s]}},h.resolveGradient=function(r,a,c){var i=this.extractPropertyDefinition(r,c,"gradientDefs");if(i){var o=a.getAttribute(c+"-opacity"),s=e.Gradient.fromElement(i,r,o,this.options);r.set(c,s)}},h.createClipPathCallback=function(r,a){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,a.push(c)}},h.resolveClipPath=function(r,a){var c=this.extractPropertyDefinition(r,"clipPath","clipPaths"),i,o,s,u,d,l;if(c){u=[],s=e.util.invertTransform(r.calcTransformMatrix());for(var g=c[0].parentNode,v=a;v.parentNode&&v.getAttribute("clip-path")!==r.clipPath;)v=v.parentNode;v.parentNode.appendChild(g);for(var b=0;b<c.length;b++)i=c[b],o=this.findTag(i),o.fromElement(i,this.createClipPathCallback(r,u),this.options);u.length===1?c=u[0]:c=new e.Group(u),d=e.util.multiplyTransformMatrices(s,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,v);var l=e.util.qrDecompose(d);c.flipX=!1,c.flipY=!1,c.set("scaleX",l.scaleX),c.set("scaleY",l.scaleY),c.angle=l.angle,c.skewX=l.skewX,c.skewY=0,c.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),r.clipPath=c}else delete r.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(h){var r=h.fabric||(h.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=a;function a(c,i){this.x=c,this.y=i}a.prototype={type:"point",constructor:a,add:function(c){return new a(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new a(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new a(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new a(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new a(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new a(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,i){return typeof i=="undefined"&&(i=.5),i=Math.max(Math.min(1,i),0),new a(this.x+(c.x-this.x)*i,this.y+(c.y-this.y)*i)},distanceFrom:function(c){var i=this.x-c.x,o=this.y-c.y;return Math.sqrt(i*i+o*o)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new a(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new a(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,i){return this.x=c,this.y=i,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var i=this.x,o=this.y;this.x=c.x,this.y=c.y,c.x=i,c.y=o},clone:function(){return new a(this.x,this.y)}}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function a(c){this.status=c,this.points=[]}r.Intersection=a,r.Intersection.prototype={constructor:a,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},r.Intersection.intersectLineLine=function(c,i,o,s){var u,d=(s.x-o.x)*(c.y-o.y)-(s.y-o.y)*(c.x-o.x),l=(i.x-c.x)*(c.y-o.y)-(i.y-c.y)*(c.x-o.x),g=(s.y-o.y)*(i.x-c.x)-(s.x-o.x)*(i.y-c.y);if(g!==0){var v=d/g,b=l/g;0<=v&&v<=1&&0<=b&&b<=1?(u=new a("Intersection"),u.appendPoint(new r.Point(c.x+v*(i.x-c.x),c.y+v*(i.y-c.y)))):u=new a}else d===0||l===0?u=new a("Coincident"):u=new a("Parallel");return u},r.Intersection.intersectLinePolygon=function(c,i,o){var s=new a,u=o.length,d,l,g,v;for(v=0;v<u;v++)d=o[v],l=o[(v+1)%u],g=a.intersectLineLine(c,i,d,l),s.appendPoints(g.points);return s.points.length>0&&(s.status="Intersection"),s},r.Intersection.intersectPolygonPolygon=function(c,i){var o=new a,s=c.length,u;for(u=0;u<s;u++){var d=c[u],l=c[(u+1)%s],g=a.intersectLinePolygon(d,l,i);o.appendPoints(g.points)}return o.points.length>0&&(o.status="Intersection"),o},r.Intersection.intersectPolygonRectangle=function(c,i,o){var s=i.min(o),u=i.max(o),d=new r.Point(u.x,s.y),l=new r.Point(s.x,u.y),g=a.intersectLinePolygon(s,d,c),v=a.intersectLinePolygon(d,u,c),b=a.intersectLinePolygon(u,l,c),_=a.intersectLinePolygon(l,s,c),w=new a;return w.appendPoints(g.points),w.appendPoints(v.points),w.appendPoints(b.points),w.appendPoints(_.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function a(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}r.Color=a,r.Color.prototype={_tryParsingColor:function(i){var o;i in a.colorNameMap&&(i=a.colorNameMap[i]),i==="transparent"&&(o=[255,255,255,0]),o||(o=a.sourceFromHex(i)),o||(o=a.sourceFromRgb(i)),o||(o=a.sourceFromHsl(i)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(i,o,s){i/=255,o/=255,s/=255;var u,d,l,g=r.util.array.max([i,o,s]),v=r.util.array.min([i,o,s]);if(l=(g+v)/2,g===v)u=d=0;else{var b=g-v;switch(d=l>.5?b/(2-g-v):b/(g+v),g){case i:u=(o-s)/b+(o<s?6:0);break;case o:u=(s-i)/b+2;break;case s:u=(i-o)/b+4;break}u/=6}return[Math.round(u*360),Math.round(d*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),o=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var i=this.getSource(),o=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),o,s,u;return o=i[0].toString(16),o=o.length===1?"0"+o:o,s=i[1].toString(16),s=s.length===1?"0"+s:s,u=i[2].toString(16),u=u.length===1?"0"+u:u,o.toUpperCase()+s.toUpperCase()+u.toUpperCase()},toHexa:function(){var i=this.getSource(),o;return o=Math.round(i[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var o=this.getSource();return o[3]=i,this.setSource(o),this},toGrayscale:function(){var i=this.getSource(),o=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),s=i[3];return this.setSource([o,o,o,s]),this},toBlackWhite:function(i){var o=this.getSource(),s=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),u=o[3];return i=i||127,s=Number(s)<Number(i)?0:255,this.setSource([s,s,s,u]),this},overlayWith:function(i){i instanceof a||(i=new a(i));var o=[],s=this.getAlpha(),u=.5,d=this.getSource(),l=i.getSource(),g;for(g=0;g<3;g++)o.push(Math.round(d[g]*(1-u)+l[g]*u));return o[3]=s,this.setSource(o),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(i,o,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+(o-i)*6*s:s<1/2?o:s<2/3?i+(o-i)*(2/3-s)*6:i}r.Color.fromRgb=function(i){return a.fromSource(a.sourceFromRgb(i))},r.Color.sourceFromRgb=function(i){var o=i.match(a.reRGBa);if(o){var s=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),u=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),d=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(s,10),parseInt(u,10),parseInt(d,10),o[4]?parseFloat(o[4]):1]}},r.Color.fromRgba=a.fromRgb,r.Color.fromHsl=function(i){return a.fromSource(a.sourceFromHsl(i))},r.Color.sourceFromHsl=function(i){var o=i.match(a.reHSLa);if(!!o){var s=(parseFloat(o[1])%360+360)%360/360,u=parseFloat(o[2])/(/%$/.test(o[2])?100:1),d=parseFloat(o[3])/(/%$/.test(o[3])?100:1),l,g,v;if(u===0)l=g=v=d;else{var b=d<=.5?d*(u+1):d+u-d*u,_=d*2-b;l=c(_,b,s+1/3),g=c(_,b,s),v=c(_,b,s-1/3)}return[Math.round(l*255),Math.round(g*255),Math.round(v*255),o[4]?parseFloat(o[4]):1]}},r.Color.fromHsla=a.fromHsl,r.Color.fromHex=function(i){return a.fromSource(a.sourceFromHex(i))},r.Color.sourceFromHex=function(i){if(i.match(a.reHex)){var o=i.slice(i.indexOf("#")+1),s=o.length===3||o.length===4,u=o.length===8||o.length===4,d=s?o.charAt(0)+o.charAt(0):o.substring(0,2),l=s?o.charAt(1)+o.charAt(1):o.substring(2,4),g=s?o.charAt(2)+o.charAt(2):o.substring(4,6),v=u?s?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(d,16),parseInt(l,16),parseInt(g,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},r.Color.fromSource=function(i){var o=new a;return o.setSource(i),o}}(t),function(h){var r=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],i={},o="left",s="top",u="right",d="bottom",l="center",g={top:d,bottom:s,left:u,right:o,center:l},v=r.util.radiansToDegrees,b=Math.sign||function(Y){return(Y>0)-(Y<0)||+Y};function _(Y,F){var z=Y.angle+v(Math.atan2(F.y,F.x))+360;return Math.round(z%360/45)}function w(Y,F){var z=F.transform.target,Z=z.canvas,X=r.util.object.clone(F);X.target=z,Z&&Z.fire("object:"+Y,X),z.fire(Y,F)}function S(Y,F){var z=F.canvas,Z=z.uniScaleKey,X=Y[Z];return z.uniformScaling&&!X||!z.uniformScaling&&X}function T(Y){return Y.originX===l&&Y.originY===l}function x(Y,F,z){var Z=Y.lockScalingX,X=Y.lockScalingY;return!!(Z&&X||!F&&(Z||X)&&z||Z&&F==="x"||X&&F==="y")}function D(Y,F,z){var Z="not-allowed",X=S(Y,z),ee="";if(F.x!==0&&F.y===0?ee="x":F.x===0&&F.y!==0&&(ee="y"),x(z,ee,X))return Z;var re=_(z,F);return a[re]+"-resize"}function N(Y,F,z){var Z="not-allowed";if(F.x!==0&&z.lockSkewingY||F.y!==0&&z.lockSkewingX)return Z;var X=_(z,F)%4;return c[X]+"-resize"}function W(Y,F,z){return Y[z.canvas.altActionKey]?i.skewCursorStyleHandler(Y,F,z):i.scaleCursorStyleHandler(Y,F,z)}function k(Y,F,z){var Z=Y[z.canvas.altActionKey];if(F.x===0)return Z?"skewX":"scaleY";if(F.y===0)return Z?"skewY":"scaleX"}function q(Y,F,z){return z.lockRotation?"not-allowed":F.cursorStyle}function K(Y,F,z,Z){return{e:Y,transform:F,pointer:{x:z,y:Z}}}function ne(Y){return function(F,z,Z,X){var ee=z.target,re=ee.getCenterPoint(),fe=ee.translateToOriginPoint(re,z.originX,z.originY),le=Y(F,z,Z,X);return ee.setPositionByOrigin(fe,z.originX,z.originY),le}}function se(Y,F){return function(z,Z,X,ee){var re=F(z,Z,X,ee);return re&&w(Y,K(z,Z,X,ee)),re}}function oe(Y,F,z,Z,X){var ee=Y.target,re=ee.controls[Y.corner],fe=ee.canvas.getZoom(),le=ee.padding/fe,$=ee.toLocalPoint(new r.Point(Z,X),F,z);return $.x>=le&&($.x-=le),$.x<=-le&&($.x+=le),$.y>=le&&($.y-=le),$.y<=le&&($.y+=le),$.x-=re.offsetX,$.y-=re.offsetY,$}function ae(Y){return Y.flipX!==Y.flipY}function I(Y,F,z,Z,X){if(Y[F]!==0){var ee=Y._getTransformedDimensions()[Z],re=X/ee*Y[z];Y.set(z,re)}}function H(Y,F,z,Z){var X=F.target,ee=X._getTransformedDimensions(0,X.skewY),re=oe(F,F.originX,F.originY,z,Z),fe=Math.abs(re.x*2)-ee.x,le=X.skewX,$;fe<2?$=0:($=v(Math.atan2(fe/X.scaleX,ee.y/X.scaleY)),F.originX===o&&F.originY===d&&($=-$),F.originX===u&&F.originY===s&&($=-$),ae(X)&&($=-$));var ue=le!==$;if(ue){var he=X._getTransformedDimensions().y;X.set("skewX",$),I(X,"skewY","scaleY","y",he)}return ue}function P(Y,F,z,Z){var X=F.target,ee=X._getTransformedDimensions(X.skewX,0),re=oe(F,F.originX,F.originY,z,Z),fe=Math.abs(re.y*2)-ee.y,le=X.skewY,$;fe<2?$=0:($=v(Math.atan2(fe/X.scaleY,ee.x/X.scaleX)),F.originX===o&&F.originY===d&&($=-$),F.originX===u&&F.originY===s&&($=-$),ae(X)&&($=-$));var ue=le!==$;if(ue){var he=X._getTransformedDimensions().x;X.set("skewY",$),I(X,"skewX","scaleX","x",he)}return ue}function j(Y,F,z,Z){var X=F.target,ee=X.skewX,re,fe=F.originY;if(X.lockSkewingX)return!1;if(ee===0){var le=oe(F,l,l,z,Z);le.x>0?re=o:re=u}else ee>0&&(re=fe===s?o:u),ee<0&&(re=fe===s?u:o),ae(X)&&(re=re===o?u:o);F.originX=re;var $=se("skewing",ne(H));return $(Y,F,z,Z)}function U(Y,F,z,Z){var X=F.target,ee=X.skewY,re,fe=F.originX;if(X.lockSkewingY)return!1;if(ee===0){var le=oe(F,l,l,z,Z);le.y>0?re=s:re=d}else ee>0&&(re=fe===o?s:d),ee<0&&(re=fe===o?d:s),ae(X)&&(re=re===s?d:s);F.originY=re;var $=se("skewing",ne(P));return $(Y,F,z,Z)}function A(Y,F,z,Z){var X=F,ee=X.target,re=ee.translateToOriginPoint(ee.getCenterPoint(),X.originX,X.originY);if(ee.lockRotation)return!1;var fe=Math.atan2(X.ey-re.y,X.ex-re.x),le=Math.atan2(Z-re.y,z-re.x),$=v(le-fe+X.theta),ue=!0;if(ee.snapAngle>0){var he=ee.snapAngle,be=ee.snapThreshold||he,je=Math.ceil($/he)*he,Oe=Math.floor($/he)*he;Math.abs($-Oe)<be?$=Oe:Math.abs($-je)<be&&($=je)}return $<0&&($=360+$),$%=360,ue=ee.angle!==$,ee.angle=$,ue}function E(Y,F,z,Z,X){X=X||{};var ee=F.target,re=ee.lockScalingX,fe=ee.lockScalingY,le=X.by,$,ue,he,be,je=S(Y,ee),Oe=x(ee,le,je),ye,me,Ee=F.gestureScale;if(Oe)return!1;if(Ee)ue=F.scaleX*Ee,he=F.scaleY*Ee;else{if($=oe(F,F.originX,F.originY,z,Z),ye=le!=="y"?b($.x):1,me=le!=="x"?b($.y):1,F.signX||(F.signX=ye),F.signY||(F.signY=me),ee.lockScalingFlip&&(F.signX!==ye||F.signY!==me))return!1;if(be=ee._getTransformedDimensions(),je&&!le){var Xe=Math.abs($.x)+Math.abs($.y),xt=F.original,ie=Math.abs(be.x*xt.scaleX/ee.scaleX)+Math.abs(be.y*xt.scaleY/ee.scaleY),Ye=Xe/ie;ue=xt.scaleX*Ye,he=xt.scaleY*Ye}else ue=Math.abs($.x*ee.scaleX/be.x),he=Math.abs($.y*ee.scaleY/be.y);T(F)&&(ue*=2,he*=2),F.signX!==ye&&le!=="y"&&(F.originX=g[F.originX],ue*=-1,F.signX=ye),F.signY!==me&&le!=="x"&&(F.originY=g[F.originY],he*=-1,F.signY=me)}var Ge=ee.scaleX,We=ee.scaleY;return le?(le==="x"&&ee.set("scaleX",ue),le==="y"&&ee.set("scaleY",he)):(!re&&ee.set("scaleX",ue),!fe&&ee.set("scaleY",he)),Ge!==ee.scaleX||We!==ee.scaleY}function M(Y,F,z,Z){return E(Y,F,z,Z)}function R(Y,F,z,Z){return E(Y,F,z,Z,{by:"x"})}function J(Y,F,z,Z){return E(Y,F,z,Z,{by:"y"})}function B(Y,F,z,Z){return Y[F.target.canvas.altActionKey]?i.skewHandlerX(Y,F,z,Z):i.scalingY(Y,F,z,Z)}function G(Y,F,z,Z){return Y[F.target.canvas.altActionKey]?i.skewHandlerY(Y,F,z,Z):i.scalingX(Y,F,z,Z)}function V(Y,F,z,Z){var X=F.target,ee=oe(F,F.originX,F.originY,z,Z),re=X.strokeWidth/(X.strokeUniform?X.scaleX:1),fe=T(F)?2:1,le=X.width,$=Math.abs(ee.x*fe/X.scaleX)-re;return X.set("width",Math.max($,0)),le!==$}function Q(Y,F,z,Z){var X=F.target,ee=z-F.offsetX,re=Z-F.offsetY,fe=!X.get("lockMovementX")&&X.left!==ee,le=!X.get("lockMovementY")&&X.top!==re;return fe&&X.set("left",ee),le&&X.set("top",re),(fe||le)&&w("moving",K(Y,F,z,Z)),fe||le}i.scaleCursorStyleHandler=D,i.skewCursorStyleHandler=N,i.scaleSkewCursorStyleHandler=W,i.rotationWithSnapping=se("rotating",ne(A)),i.scalingEqually=se("scaling",ne(M)),i.scalingX=se("scaling",ne(R)),i.scalingY=se("scaling",ne(J)),i.scalingYOrSkewingX=B,i.scalingXOrSkewingY=G,i.changeWidth=se("resizing",ne(V)),i.skewHandlerX=j,i.skewHandlerY=U,i.dragHandler=Q,i.scaleOrSkewActionName=k,i.rotationStyleHandler=q,i.fireEvent=w,i.wrapWithFixedAnchor=ne,i.wrapWithFireEvent=se,i.getLocalPoint=oe,r.controlsUtils=i}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.degreesToRadians,c=r.controlsUtils;function i(s,u,d,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,b=this.sizeY||l.cornerSize||g.cornerSize,_=typeof l.transparentCorners!="undefined"?l.transparentCorners:g.transparentCorners,w=_?"stroke":"fill",S=!_&&(l.cornerStrokeColor||g.cornerStrokeColor),T=u,x=d,D;s.save(),s.fillStyle=l.cornerColor||g.cornerColor,s.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,v>b?(D=v,s.scale(1,b/v),x=d*v/b):b>v?(D=b,s.scale(v/b,1),T=u*b/v):D=v,s.lineWidth=1,s.beginPath(),s.arc(T,x,D/2,0,2*Math.PI,!1),s[w](),S&&s.stroke(),s.restore()}function o(s,u,d,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,b=this.sizeY||l.cornerSize||g.cornerSize,_=typeof l.transparentCorners!="undefined"?l.transparentCorners:g.transparentCorners,w=_?"stroke":"fill",S=!_&&(l.cornerStrokeColor||g.cornerStrokeColor),T=v/2,x=b/2;s.save(),s.fillStyle=l.cornerColor||g.cornerColor,s.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,s.lineWidth=1,s.translate(u,d),s.rotate(a(g.angle)),s[w+"Rect"](-T,-x,v,b),S&&s.strokeRect(-T,-x,v,b),s.restore()}c.renderCircleControl=i,c.renderSquareControl=o}(t),function(h){var r=h.fabric||(h.fabric={});function a(c){for(var i in c)this[i]=c[i]}r.Control=a,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,i){return i.cursorStyle},getActionName:function(c,i){return i.actionName},getVisibility:function(c,i){var o=c._controlsVisibility;return o&&typeof o[i]!="undefined"?o[i]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,i){var o=r.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},i);return o},calcCornerCoords:function(c,i,o,s,u){var d,l,g,v,b=u?this.touchSizeX:this.sizeX,_=u?this.touchSizeY:this.sizeY;if(b&&_&&b!==_){var w=Math.atan2(_,b),S=Math.sqrt(b*b+_*_)/2,T=w-r.util.degreesToRadians(c),x=Math.PI/2-w-r.util.degreesToRadians(c);d=S*r.util.cos(T),l=S*r.util.sin(T),g=S*r.util.cos(x),v=S*r.util.sin(x)}else{var D=b&&_?b:i;S=D*.7071067812;var T=r.util.degreesToRadians(45-c);d=g=S*r.util.cos(T),l=v=S*r.util.sin(T)}return{tl:{x:o-v,y:s-g},tr:{x:o+d,y:s-l},bl:{x:o-d,y:s+l},br:{x:o+v,y:s+g}}},render:function(c,i,o,s,u){switch(s=s||{},s.cornerStyle||u.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,c,i,o,s,u);break;default:r.controlsUtils.renderSquareControl.call(this,c,i,o,s,u)}}}}(t),function(){function h(o,s){var u=o.getAttribute("style"),d=o.getAttribute("offset")||0,l,g,v,b;if(d=parseFloat(d)/(/%$/.test(d)?100:1),d=d<0?0:d>1?1:d,u){var _=u.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),b=_.length;b--;){var w=_[b].split(/\s*:\s*/),S=w[0].trim(),T=w[1].trim();S==="stop-color"?l=T:S==="stop-opacity"&&(v=T)}}return l||(l=o.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=o.getAttribute("stop-opacity")),l=new e.Color(l),g=l.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=g*s,{offset:d,color:l.toRgb(),opacity:v}}function r(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function a(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var c=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var s,u=this;Object.keys(o).forEach(function(d){u[d]=o[d]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,s={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(s.r1=o.coords.r1||0,s.r2=o.coords.r2||0),this.coords=s,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var s in o){var u=new e.Color(o[s]);this.colorStops.push({offset:parseFloat(s),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(o){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,s,o),s},toSVG:function(o,g){var u=c(this.coords,!0),d,l,g=g||{},v,b,_=c(this.colorStops,!0),w=u.r1>u.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),T=-this.offsetX,x=-this.offsetY,D=!!g.additionalTransform,N=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(ne,se){return ne.offset-se.offset}),N==="objectBoundingBox"?(T/=o.width,x/=o.height):(T+=o.width/2,x+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(T-=o.pathOffset.x,x-=o.pathOffset.y),S[4]-=T,S[5]-=x,b='id="SVGID_'+this.id+'" gradientUnits="'+N+'"',b+=' gradientTransform="'+(D?g.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",b,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",b,' cx="',w?u.x1:u.x2,'" cy="',w?u.y1:u.y2,'" r="',w?u.r1:u.r2,'" fx="',w?u.x2:u.x1,'" fy="',w?u.y2:u.y1,`">
`]),this.type==="radial"){if(w)for(_=_.concat(),_.reverse(),d=0,l=_.length;d<l;d++)_[d].offset=1-_[d].offset;var W=Math.min(u.r1,u.r2);if(W>0){var k=Math.max(u.r1,u.r2),q=W/k;for(d=0,l=_.length;d<l;d++)_[d].offset+=q*(1-_[d].offset)}}for(d=0,l=_.length;d<l;d++){var K=_[d];v.push("<stop ",'offset="',K.offset*100+"%",'" style="stop-color:',K.color,typeof K.opacity!="undefined"?";stop-opacity: "+K.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(o){var s,u=e.util.object.clone(this.coords),d,l;if(!!this.type){for(this.type==="linear"?s=o.createLinearGradient(u.x1,u.y1,u.x2,u.y2):this.type==="radial"&&(s=o.createRadialGradient(u.x1,u.y1,u.r1,u.x2,u.y2,u.r2)),d=0,l=this.colorStops.length;d<l;d++){var g=this.colorStops[d].color,v=this.colorStops[d].opacity,b=this.colorStops[d].offset;typeof v!="undefined"&&(g=new e.Color(g).setAlpha(v).toRgba()),s.addColorStop(b,g)}return s}}}),e.util.object.extend(e.Gradient,{fromElement:function(o,s,u,d){var l=parseFloat(u)/(/%$/.test(u)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var g=o.getElementsByTagName("stop"),v,b=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=o.getAttribute("gradientTransform")||"",w=[],S,T,x=0,D=0,N;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(v="linear",S=r(o)):(v="radial",S=a(o)),T=g.length;T--;)w.push(h(g[T],l));N=e.parseTransformAttribute(_),i(s,S,d,b),b==="pixels"&&(x=-s.left,D=-s.top);var W=new e.Gradient({id:o.getAttribute("id"),type:v,coords:S,colorStops:w,gradientUnits:b,gradientTransform:N,offsetX:x,offsetY:D});return W}});function i(o,s,u,d){var l,g;Object.keys(s).forEach(function(v){l=s[v],l==="Infinity"?g=1:l==="-Infinity"?g=0:(g=parseFloat(s[v],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(g*=.01,d==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(g*=u.viewBoxWidth||u.width),(v==="y1"||v==="y2")&&(g*=u.viewBoxHeight||u.height)))),s[v]=g})}}(),function(){var h=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,a){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){a&&a(this);return}else{var c=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(i,o){c.source=i,a&&a(c,o)},null,this.crossOrigin)}},toObject:function(r){var a=e.Object.NUM_FRACTION_DIGITS,c,i;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),i={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,a),offsetY:h(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,i,r),i},toSVG:function(r){var a=typeof this.source=="function"?this.source():this.source,c=a.width/r.width,i=a.height/r.height,o=this.offsetX/r.width,s=this.offsetY/r.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,s&&(i+=Math.abs(s))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,o&&(c+=Math.abs(o))),a.src?u=a.src:a.toDataURL&&(u=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+s+'" width="'+c+'" height="'+i+`">
<image x="0" y="0" width="`+a.width+'" height="'+a.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(r){for(var a in r)this[a]=r[a]},toLive:function(r){var a=this.source;return!a||typeof a.src!="undefined"&&(!a.complete||a.naturalWidth===0||a.naturalHeight===0)?"":r.createPattern(a,this.repeat)}})}(),function(h){var r=h.fabric||(h.fabric={}),a=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var i in c)this[i]=c[i];this.id=r.Object.__uid++},_parseShadow:function(c){var i=c.trim(),o=r.Shadow.reOffsetsAndBlur.exec(i)||[],s=i.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var i=40,o=40,s=r.Object.NUM_FRACTION_DIGITS,u=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-c.angle)),d=20,l=new r.Color(this.color);return c.width&&c.height&&(i=a((Math.abs(u.x)+this.blur)/c.width,s)*100+d,o=a((Math.abs(u.y)+this.blur)/c.height,s)*100+d),c.flipX&&(u.x*=-1),c.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+a(this.blur?this.blur/2:0,s)+`"></feGaussianBlur>
	<feOffset dx="`+a(u.x,s)+'" dy="'+a(u.y,s)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},i=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==i[o]&&(c[o]=this[o])},this),c}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var h=e.util.object.extend,r=e.util.getElementOffset,a=e.util.removeFromArray,c=e.util.toFixed,i=e.util.transformPoint,o=e.util.invertTransform,s=e.util.getNodeCanvas,u=e.util.createCanvasElement,d=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,g){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,v),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,v),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,v),g.overlayColor&&this.setOverlayColor(g.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,g,v){g.setAttribute("width",this.width*l),g.setAttribute("height",this.height*l),v.scale(l,l)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(l,g,v){return this.__setBgOverlayImage("overlayImage",l,g,v)},setBackgroundImage:function(l,g,v){return this.__setBgOverlayImage("backgroundImage",l,g,v)},setOverlayColor:function(l,g){return this.__setBgOverlayColor("overlayColor",l,g)},setBackgroundColor:function(l,g){return this.__setBgOverlayColor("backgroundColor",l,g)},__setBgOverlayImage:function(l,g,v,b){return typeof g=="string"?e.util.loadImage(g,function(_,w){if(_){var S=new e.Image(_,b);this[l]=S,S.canvas=this}v&&v(_,w)},this,b&&b.crossOrigin):(b&&g.setOptions(b),this[l]=g,g&&(g.canvas=this),v&&v(g,!1)),this},__setBgOverlayColor:function(l,g,v){return this[l]=g,this._initGradient(g,l),this._initPattern(g,l,v),this},_createCanvasElement:function(){var l=u();if(!l||(l.style||(l.style={}),typeof l.getContext=="undefined"))throw d;return l},_initOptions:function(l){var g=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,!!this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,g){return this.setDimensions({width:l},g)},setHeight:function(l,g){return this.setDimensions({height:l},g)},setDimensions:function(l,g){var v;g=g||{};for(var b in l)v=l[b],g.cssOnly||(this._setBackstoreDimension(b,l[b]),v+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(b,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,g){return this.lowerCanvasEl[l]=g,this.upperCanvasEl&&(this.upperCanvasEl[l]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=g),this[l]=g,this},_setCssDimension:function(l,g){return this.lowerCanvasEl.style[l]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=g),this.wrapperEl&&(this.wrapperEl.style[l]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var g=this._activeObject,v=this.backgroundImage,b=this.overlayImage,_,w,S;for(this.viewportTransform=l,w=0,S=this._objects.length;w<S;w++)_=this._objects[w],_.group||_.setCoords(!0);return g&&g.setCoords(),v&&v.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,g){var v=l,b=this.viewportTransform.slice(0);l=i(l,o(this.viewportTransform)),b[0]=g,b[3]=g;var _=i(l,b);return b[4]+=v.x-_.x,b[5]+=v.y-_.y,this.setViewportTransform(b)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var g=this.viewportTransform.slice(0);return g[4]=-l.x,g[5]=-l.y,this.setViewportTransform(g)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},g=this.width,v=this.height,b=o(this.viewportTransform);return l.tl=i({x:0,y:0},b),l.br=i({x:g,y:v},b),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,g){var v=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(l,g),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var g=this.viewportTransform,v=this.clipPath;l.save(),l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.globalCompositeOperation="destination-in",v.transform(l),l.scale(1/v.zoomX,1/v.zoomY),l.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),l.restore()},_renderObjects:function(l,g){var v,b;for(v=0,b=g.length;v<b;++v)g[v]&&g[v].render(l)},_renderBackgroundOrOverlay:function(l,g){var v=this[g+"Color"],b=this[g+"Image"],_=this.viewportTransform,w=this[g+"Vpt"];if(!(!v&&!b)){if(v){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=v.toLive?v.toLive(l,this):v,w&&l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),l.fill(),l.restore()}b&&(l.save(),w&&l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),b.render(l),l.restore())}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenter().left,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenter().top))},centerObject:function(l){var g=this.getCenter();return this._centerObject(l,new e.Point(g.left,g.top))},viewportCenterObject:function(l){var g=this.getVpCenter();return this._centerObject(l,g)},viewportCenterObjectH:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(g.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,g.y))},getVpCenter:function(){var l=this.getCenter(),g=o(this.viewportTransform);return i({x:l.left,y:l.top},g)},_centerObject:function(l,g){return l.setPositionByOrigin(g,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,g){var v=this.clipPath,b={version:e.version,objects:this._toObjects(l,g)};return v&&!v.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,l,g)),h(b,this.__serializeBgOverlay(l,g)),e.util.populateWithProperties(this,b,g),b},_toObjects:function(l,g){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,l,g)},this)},_toObject:function(l,g,v){var b;this.includeDefaultValues||(b=l.includeDefaultValues,l.includeDefaultValues=!1);var _=l[g](v);return this.includeDefaultValues||(l.includeDefaultValues=b),_},__serializeBgOverlay:function(l,g){var v={},b=this.backgroundImage,_=this.overlayImage,w=this.backgroundColor,S=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(v.background=w.toObject(g)):w&&(v.background=w),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(g)):S&&(v.overlay=S),b&&!b.excludeFromExport&&(v.backgroundImage=this._toObject(b,l,g)),_&&!_.excludeFromExport&&(v.overlayImage=this._toObject(_,l,g)),v},svgViewportTransformation:!0,toSVG:function(l,g){l||(l={}),l.reviver=g;var v=[];return this._setSVGPreamble(v,l),this._setSVGHeader(v,l),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",g),this._setSVGObjects(v,g),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",g),v.push("</svg>"),v.join("")},_setSVGPreamble:function(l,g){g.suppressPreamble||l.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,g){var v=g.width||this.width,b=g.height||this.height,_,w='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;g.viewBox?w='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,w='viewBox="'+c(-_[4]/_[0],S)+" "+c(-_[5]/_[3],S)+" "+c(this.width/_[0],S)+" "+c(this.height/_[3],S)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',b,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(l){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,g=["background","overlay"].map(function(v){var b=l[v+"Color"];if(b&&b.toLive){var _=l[v+"Vpt"],w=l.viewportTransform,S={width:l.width/(_?w[0]:1),height:l.height/(_?w[3]:1)};return b.toSVG(S,{additionalTransform:_?e.util.matrixToSVG(w):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var l="",g={},v,b,_,w,S,T,x,D,N,W=e.fontPaths,k=[];for(this._objects.forEach(function K(ne){k.push(ne),ne._objects&&ne._objects.forEach(K)}),D=0,N=k.length;D<N;D++)if(v=k[D],b=v.fontFamily,!(v.type.indexOf("text")===-1||g[b]||!W[b])&&(g[b]=!0,!!v.styles)){_=v.styles;for(S in _){w=_[S];for(x in w)T=w[x],b=T.fontFamily,!g[b]&&W[b]&&(g[b]=!0)}}for(var q in g)l+=[`		@font-face {
`,"			font-family: '",q,`';
`,"			src: url('",W[q],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,g){var v,b,_,w=this._objects;for(b=0,_=w.length;b<_;b++)v=w[b],!v.excludeFromExport&&this._setSVGObject(l,v,g)},_setSVGObject:function(l,g,v){l.push(g.toSVG(v))},_setSVGBgOverlayImage:function(l,g,v){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&l.push(this[g].toSVG(v))},_setSVGBgOverlayColor:function(l,g){var v=this[g+"Color"],b=this.viewportTransform,_=this.width,w=this.height;if(!!v)if(v.toLive){var S=v.repeat,T=e.util.invertTransform(b),x=this[g+"Vpt"],D=x?e.util.matrixToSVG(T):"";l.push('<rect transform="'+D+" translate(",_/2,",",w/2,')"',' x="',v.offsetX-_/2,'" y="',v.offsetY-w/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:_,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:w,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var g=this._activeObject,v,b,_;if(l===g&&l.type==="activeSelection")for(_=g._objects,v=_.length;v--;)b=_[v],a(this._objects,b),this._objects.unshift(b);else a(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var g=this._activeObject,v,b,_;if(l===g&&l.type==="activeSelection")for(_=g._objects,v=0;v<_.length;v++)b=_[v],a(this._objects,b),this._objects.push(b);else a(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,g){if(!l)return this;var v=this._activeObject,b,_,w,S,T,x=0;if(l===v&&l.type==="activeSelection")for(T=v._objects,b=0;b<T.length;b++)_=T[b],w=this._objects.indexOf(_),w>0+x&&(S=w-1,a(this._objects,_),this._objects.splice(S,0,_)),x++;else w=this._objects.indexOf(l),w!==0&&(S=this._findNewLowerIndex(l,w,g),a(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,g,v){var b,_;if(v)for(b=g,_=g-1;_>=0;--_){var w=l.intersectsWithObject(this._objects[_])||l.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(l);if(w){b=_;break}}else b=g-1;return b},bringForward:function(l,g){if(!l)return this;var v=this._activeObject,b,_,w,S,T,x=0;if(l===v&&l.type==="activeSelection")for(T=v._objects,b=T.length;b--;)_=T[b],w=this._objects.indexOf(_),w<this._objects.length-1-x&&(S=w+1,a(this._objects,_),this._objects.splice(S,0,_)),x++;else w=this._objects.indexOf(l),w!==this._objects.length-1&&(S=this._findNewUpperIndex(l,w,g),a(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,g,v){var b,_,w;if(v)for(b=g,_=g+1,w=this._objects.length;_<w;++_){var S=l.intersectsWithObject(this._objects[_])||l.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(l);if(S){b=_;break}}else b=g+1;return b},moveTo:function(l,g){return a(this._objects,l),this._objects.splice(g,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(e.StaticCanvas.prototype,e.Observable),h(e.StaticCanvas.prototype,e.Collection),h(e.StaticCanvas.prototype,e.DataURLExporter),h(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var g=u();if(!g||!g.getContext)return null;var v=g.getContext("2d");if(!v)return null;switch(l){case"setLineDash":return typeof v.setLineDash!="undefined";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=s(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var g=s(this.lowerCanvasEl);return g&&g.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var h=this.canvas.contextTop;h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var r=this.canvas.viewportTransform;h.save(),h.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(!!this.shadow){var h=this.canvas,r=this.shadow,a=h.contextTop,c=h.getZoom();h&&h._isRetinaScaling()&&(c*=e.devicePixelRatio),a.shadowColor=r.color,a.shadowBlur=r.blur*c,a.shadowOffsetX=r.offsetX*c,a.shadowOffsetY=r.offsetY*c}},needsFullRender:function(){var h=new e.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(h){this.canvas=h,this._points=[]},_drawSegment:function(h,r,a){var c=r.midPointFrom(a);return h.quadraticCurveTo(r.x,r.y,c.x,c.y),c},onMouseDown:function(h,r){!this.canvas._isMainEvent(r.e)||(this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,r){if(!!this.canvas._isMainEvent(r.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,c=a.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,a[c-2],a[c-1],!0),i.stroke(),i.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var r=new e.Point(h.x,h.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(h){var r=new e.Point(h.x,h.y);return this._addPoint(r)},_render:function(){var h=this.canvas.contextTop,r,a,c=this._points[0],i=this._points[1];if(this._saveAndTransform(h),h.beginPath(),this._points.length===2&&c.x===i.x&&c.y===i.y){var o=this.width/1e3;c=new e.Point(c.x,c.y),i=new e.Point(i.x,i.y),c.x-=o,i.x+=o}for(h.moveTo(c.x,c.y),r=1,a=this._points.length;r<a;r++)this._drawSegment(h,c,i),c=this._points[r],i=this._points[r+1];h.lineTo(c.x,c.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var r=this.width/1e3;return e.util.getSmoothPathFromPoints(h,r)},_isEmptySVGPath:function(h){var r=e.util.joinPath(h);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var r=new e.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(h,r){if(h.length<=2)return h;var a=this.canvas.getZoom(),c=Math.pow(r/a,2),i,o=h.length-1,s=h[0],u=[s],d;for(i=1;i<o-1;i++)d=Math.pow(s.x-h[i].x,2)+Math.pow(s.y-h[i].y,2),d>=c&&(s=h[i],u.push(s));return u.push(h[o]),u},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var a=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.requestRenderAll(),a.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:a})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var r=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,r),a.restore()},dot:function(h,r){h.fillStyle=r.fill,h.beginPath(),h.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,r,a,c=this.points;for(this._saveAndTransform(h),r=0,a=c.length;r<a;r++)this.dot(h,c[r]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,r,a;this.canvas.renderOnAddRemove=!1;var c=[];for(r=0,a=this.points.length;r<a;r++){var i=this.points[r],o=new e.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(o.shadow=new e.Shadow(this.shadow)),c.push(o)}var s=new e.Group(c);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var r=new e.Point(h.x,h.y),a=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=a,r.fill=c,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],a=0,c=this.sprayChunks.length;a<c;a++)for(var i=this.sprayChunks[a],o=0,s=i.length;o<s;o++){var u=new e.Rect({width:i[o].width,height:i[o].width,left:i[o].x+1,top:i[o].y+1,originX:"center",originY:"center",fill:this.color});r.push(u)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var d=new e.Group(r);this.shadow&&d.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var r={},a,c,i;for(c=0,i=h.length;c<i;c++)a=h[c].left+""+h[c].top,r[a]||(r[a]=h[c]);var o=[];for(a in r)o.push(r[a]);return o},render:function(h){var r=this.canvas.contextTop,a,c;for(r.fillStyle=this.color,this._saveAndTransform(r),a=0,c=h.length;a<c;a++){var i=h[a];typeof i.opacity!="undefined"&&(r.globalAlpha=i.opacity),r.fillRect(i.x,i.y,i.width,i.width)}r.restore()},_render:function(){var h=this.canvas.contextTop,r,a;for(h.fillStyle=this.color,this._saveAndTransform(h),r=0,a=this.sprayChunks.length;r<a;r++)this.render(this.sprayChunks[r]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var r,a,c,i=this.width/2,o;for(o=0;o<this.density;o++){r=e.util.getRandomInt(h.x-i,h.x+i),a=e.util.getRandomInt(h.y-i,h.y+i),this.dotWidthVariance?c=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var s=new e.Point(r,a);s.width=c,this.randomOpacity&&(s.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var h=20,r=5,a=e.util.createCanvasElement(),c=a.getContext("2d");return a.width=a.height=h+r,c.fillStyle=this.color,c.beginPath(),c.arc(h/2,h/2,h/2,0,Math.PI*2,!1),c.closePath(),c.fill(),a},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(h){var r=this.callSuper("createPath",h),a=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),r}}),function(){var h=e.util.getPointer,r=e.util.degreesToRadians,a=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(i,o){o||(o={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,o),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var i=this.getActiveObjects(),o,s,u;if(i.length>0&&!this.preserveObjectStacking){s=[],u=[];for(var d=0,l=this._objects.length;d<l;d++)o=this._objects[d],i.indexOf(o)===-1?s.push(o):u.push(o);i.length>1&&(this._activeObject._objects=u),s.push.apply(s,u)}else s=this._objects;return s},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var i=this.contextContainer;return this.renderCanvas(i,this._chooseObjectsToRender()),this},renderTopLayer:function(i){i.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(i),this.contextTopDirty=!0),i.restore()},renderTop:function(){var i=this.contextTop;return this.clearContext(i),this.renderTopLayer(i),this.fire("after:render"),this},_normalizePointer:function(i,o){var s=i.calcTransformMatrix(),u=e.util.invertTransform(s),d=this.restorePointerVpt(o);return e.util.transformPoint(d,u)},isTargetTransparent:function(i,o,s){if(i.shouldCache()&&i._cacheCanvas&&i!==this._activeObject){var u=this._normalizePointer(i,{x:o,y:s}),d=Math.max(i.cacheTranslationX+u.x*i.zoomX,0),l=Math.max(i.cacheTranslationY+u.y*i.zoomY,0),_=e.util.isTransparent(i._cacheContext,Math.round(d),Math.round(l),this.targetFindTolerance);return _}var g=this.contextCache,v=i.selectionBackgroundColor,b=this.viewportTransform;i.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),i.render(g),g.restore(),i.selectionBackgroundColor=v;var _=e.util.isTransparent(g,o,s,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(i){var o=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?o=!!this.selectionKey.find(function(s){return i[s]===!0}):o=i[this.selectionKey],o},_shouldClearSelection:function(i,o){var s=this.getActiveObjects(),u=this._activeObject;return!o||o&&u&&s.length>1&&s.indexOf(o)===-1&&u!==o&&!this._isSelectionKeyPressed(i)||o&&!o.evented||o&&!o.selectable&&u&&u!==o},_shouldCenterTransform:function(i,o,s){if(!!i){var u;return o==="scale"||o==="scaleX"||o==="scaleY"||o==="resizing"?u=this.centeredScaling||i.centeredScaling:o==="rotate"&&(u=this.centeredRotation||i.centeredRotation),u?!s:s}},_getOriginFromCorner:function(i,o){var s={x:i.originX,y:i.originY};return o==="ml"||o==="tl"||o==="bl"?s.x="right":(o==="mr"||o==="tr"||o==="br")&&(s.x="left"),o==="tl"||o==="mt"||o==="tr"?s.y="bottom":(o==="bl"||o==="mb"||o==="br")&&(s.y="top"),s},_getActionFromCorner:function(i,o,s,u){if(!o||!i)return"drag";var d=u.controls[o];return d.getActionName(s,d,u)},_setupCurrentTransform:function(i,o,s){if(!!o){var u=this.getPointer(i),d=o.__corner,l=o.controls[d],g=s&&d?l.getActionHandler(i,o,l):e.controlsUtils.dragHandler,v=this._getActionFromCorner(s,d,i,o),b=this._getOriginFromCorner(o,d),_=i[this.centeredKey],w={target:o,action:v,actionHandler:g,corner:d,scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,offsetX:u.x-o.left,offsetY:u.y-o.top,originX:b.x,originY:b.y,ex:u.x,ey:u.y,lastX:u.x,lastY:u.y,theta:r(o.angle),width:o.width*o.scaleX,shiftKey:i.shiftKey,altKey:_,original:e.util.saveObjectTransform(o)};this._shouldCenterTransform(o,v,_)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(i)}},setCursor:function(i){this.upperCanvasEl.style.cursor=i},_drawSelection:function(i){var o=this._groupSelector,s=new e.Point(o.ex,o.ey),u=e.util.transformPoint(s,this.viewportTransform),d=new e.Point(o.ex+o.left,o.ey+o.top),l=e.util.transformPoint(d,this.viewportTransform),g=Math.min(u.x,l.x),v=Math.min(u.y,l.y),b=Math.max(u.x,l.x),_=Math.max(u.y,l.y),w=this.selectionLineWidth/2;this.selectionColor&&(i.fillStyle=this.selectionColor,i.fillRect(g,v,b-g,_-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(i.lineWidth=this.selectionLineWidth,i.strokeStyle=this.selectionBorderColor,g+=w,v+=w,b-=w,_-=w,e.Object.prototype._setLineDash.call(this,i,this.selectionDashArray),i.strokeRect(g,v,b-g,_-v))},findTarget:function(i,o){if(!this.skipTargetFind){var s=!0,u=this.getPointer(i,s),d=this._activeObject,l=this.getActiveObjects(),g,v,b=a(i),_=l.length>1&&!o||l.length===1;if(this.targets=[],_&&d._findTargetCorner(u,b)||l.length>1&&!o&&d===this._searchPossibleTargets([d],u))return d;if(l.length===1&&d===this._searchPossibleTargets([d],u))if(this.preserveObjectStacking)g=d,v=this.targets,this.targets=[];else return d;var w=this._searchPossibleTargets(this._objects,u);return i[this.altSelectionKey]&&w&&g&&w!==g&&(w=g,this.targets=v),w}},_checkTarget:function(i,o,s){if(o&&o.visible&&o.evented&&o.containsPoint(i))if((this.perPixelTargetFind||o.perPixelTargetFind)&&!o.isEditing){var u=this.isTargetTransparent(o,s.x,s.y);if(!u)return!0}else return!0},_searchPossibleTargets:function(i,o){for(var s,u=i.length,d;u--;){var l=i[u],g=l.group?this._normalizePointer(l.group,o):o;if(this._checkTarget(g,l,o)){s=i[u],s.subTargetCheck&&s instanceof e.Group&&(d=this._searchPossibleTargets(s._objects,o),d&&this.targets.push(d));break}}return s},restorePointerVpt:function(i){return e.util.transformPoint(i,e.util.invertTransform(this.viewportTransform))},getPointer:function(i,o){if(this._absolutePointer&&!o)return this._absolutePointer;if(this._pointer&&o)return this._pointer;var s=h(i),u=this.upperCanvasEl,d=u.getBoundingClientRect(),l=d.width||0,g=d.height||0,v;(!l||!g)&&("top"in d&&"bottom"in d&&(g=Math.abs(d.top-d.bottom)),"right"in d&&"left"in d&&(l=Math.abs(d.right-d.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,o||(s=this.restorePointerVpt(s));var b=this.getRetinaScaling();return b!==1&&(s.x/=b,s.y/=b),l===0||g===0?v={width:1,height:1}:v={width:u.width/l,height:u.height/g},{x:s.x*v.width,y:s.y*v.height}},_createUpperCanvas:function(){var i=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),o=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),e.util.addClass(s,"upper-canvas "+i),this.wrapperEl.appendChild(s),this._copyCanvasStyle(o,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(i){var o=this.width||i.width,s=this.height||i.height;e.util.setStyle(i,{position:"absolute",width:o+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),i.width=o,i.height=s,e.util.makeElementUnselectable(i)},_copyCanvasStyle:function(i,o){o.style.cssText=i.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var i=this._activeObject;return i?i.type==="activeSelection"&&i._objects?i._objects.slice(0):[i]:[]},_onObjectRemoved:function(i){i===this._activeObject&&(this.fire("before:selection:cleared",{target:i}),this._discardActiveObject(),this.fire("selection:cleared",{target:i}),i.fire("deselected")),i===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",i)},_fireSelectionEvents:function(i,o){var s=!1,u=this.getActiveObjects(),d=[],l=[];i.forEach(function(g){u.indexOf(g)===-1&&(s=!0,g.fire("deselected",{e:o,target:g}),l.push(g))}),u.forEach(function(g){i.indexOf(g)===-1&&(s=!0,g.fire("selected",{e:o,target:g}),d.push(g))}),i.length>0&&u.length>0?s&&this.fire("selection:updated",{e:o,selected:d,deselected:l,updated:d[0]||l[0],target:this._activeObject}):u.length>0?this.fire("selection:created",{e:o,selected:d,target:this._activeObject}):i.length>0&&this.fire("selection:cleared",{e:o,deselected:l})},setActiveObject:function(i,o){var s=this.getActiveObjects();return this._setActiveObject(i,o),this._fireSelectionEvents(s,o),this},_setActiveObject:function(i,o){return this._activeObject===i||!this._discardActiveObject(o,i)||i.onSelect({e:o})?!1:(this._activeObject=i,!0)},_discardActiveObject:function(i,o){var s=this._activeObject;if(s){if(s.onDeselect({e:i,object:o}))return!1;this._activeObject=null}return!0},discardActiveObject:function(i){var o=this.getActiveObjects(),s=this.getActiveObject();return o.length&&this.fire("before:selection:cleared",{target:s,e:i}),this._discardActiveObject(i),this._fireSelectionEvents(o,i),this},dispose:function(){var i=this.wrapperEl;return this.removeListeners(),i.removeChild(this.upperCanvasEl),i.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(o){e.util.cleanUpJsdomNode(this[o]),this[o]=void 0}.bind(this)),i.parentNode&&i.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(i){var o=this._activeObject;o&&o._renderControls(i)},_toObject:function(i,o,s){var u=this._realizeGroupTransformOnObject(i),d=this.callSuper("_toObject",i,o,s);return this._unwindGroupTransformOnObject(i,u),d},_realizeGroupTransformOnObject:function(i){if(i.group&&i.group.type==="activeSelection"&&this._activeObject===i.group){var o=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],s={};return o.forEach(function(u){s[u]=i[u]}),e.util.addTransformToObject(i,this._activeObject.calcOwnMatrix()),s}else return null},_unwindGroupTransformOnObject:function(i,o){o&&i.set(o)},_setSVGObject:function(i,o,s){var u=this._realizeGroupTransformOnObject(o);this.callSuper("_setSVGObject",i,o,s),this._unwindGroupTransformOnObject(o,u)},setViewportTransform:function(i){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,i)}});for(var c in e.StaticCanvas)c!=="prototype"&&(e.Canvas[c]=e.StaticCanvas[c])}(),function(){var h=e.util.addListener,r=e.util.removeListener,a=3,c=2,i=1,o={passive:!1};function s(u,d){return u.button&&u.button===d-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(u,d){var l=this.upperCanvasEl,g=this._getEventPrefix();u(e.window,"resize",this._onResize),u(l,g+"down",this._onMouseDown),u(l,g+"move",this._onMouseMove,o),u(l,g+"out",this._onMouseOut),u(l,g+"enter",this._onMouseEnter),u(l,"wheel",this._onMouseWheel),u(l,"contextmenu",this._onContextMenu),u(l,"dblclick",this._onDoubleClick),u(l,"dragover",this._onDragOver),u(l,"dragenter",this._onDragEnter),u(l,"dragleave",this._onDragLeave),u(l,"drop",this._onDrop),this.enablePointerEvents||u(l,"touchstart",this._onTouchStart,o),typeof eventjs!="undefined"&&d in eventjs&&(eventjs[d](l,"gesture",this._onGesture),eventjs[d](l,"drag",this._onDrag),eventjs[d](l,"orientation",this._onOrientationChange),eventjs[d](l,"shake",this._onShake),eventjs[d](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var u=this._getEventPrefix();r(e.document,u+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,o),r(e.document,u+"move",this._onMouseMove,o),r(e.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(u,d){this.__onTransformGesture&&this.__onTransformGesture(u,d)},_onDrag:function(u,d){this.__onDrag&&this.__onDrag(u,d)},_onMouseWheel:function(u){this.__onMouseWheel(u)},_onMouseOut:function(u){var d=this._hoveredTarget;this.fire("mouse:out",{target:d,e:u}),this._hoveredTarget=null,d&&d.fire("mouseout",{e:u});var l=this;this._hoveredTargets.forEach(function(g){l.fire("mouse:out",{target:d,e:u}),g&&d.fire("mouseout",{e:u})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(g){g.isEditing&&g.hiddenTextarea.focus()})},_onMouseEnter:function(u){!this._currentTransform&&!this.findTarget(u)&&(this.fire("mouse:over",{target:null,e:u}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(u,d){this.__onOrientationChange&&this.__onOrientationChange(u,d)},_onShake:function(u,d){this.__onShake&&this.__onShake(u,d)},_onLongPress:function(u,d){this.__onLongPress&&this.__onLongPress(u,d)},_onDragOver:function(u){u.preventDefault();var d=this._simpleEventHandler("dragover",u);this._fireEnterLeaveEvents(d,u)},_onContextMenu:function(u){return this.stopContextMenu&&(u.stopPropagation(),u.preventDefault()),!1},_onDoubleClick:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"dblclick"),this._resetTransformEventData(u)},getPointerId:function(u){var d=u.changedTouches;return d?d[0]&&d[0].identifier:this.enablePointerEvents?u.pointerId:-1},_isMainEvent:function(u){return u.isPrimary===!0?!0:u.isPrimary===!1?!1:u.type==="touchend"&&u.touches.length===0?!0:u.changedTouches?u.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(u){u.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(u)),this.__onMouseDown(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();h(e.document,"touchend",this._onTouchEnd,o),h(e.document,"touchmove",this._onMouseMove,o),r(d,l+"down",this._onMouseDown)},_onMouseDown:function(u){this.__onMouseDown(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();r(d,l+"move",this._onMouseMove,o),h(e.document,l+"up",this._onMouseUp),h(e.document,l+"move",this._onMouseMove,o)},_onTouchEnd:function(u){if(!(u.touches.length>0)){this.__onMouseUp(u),this._resetTransformEventData(),this.mainTouchId=null;var d=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,o),r(e.document,"touchmove",this._onMouseMove,o);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(l.upperCanvasEl,d+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(u){this.__onMouseUp(u),this._resetTransformEventData();var d=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(u)&&(r(e.document,l+"up",this._onMouseUp),r(e.document,l+"move",this._onMouseMove,o),h(d,l+"move",this._onMouseMove,o))},_onMouseMove:function(u){!this.allowTouchScrolling&&u.preventDefault&&u.preventDefault(),this.__onMouseMove(u)},_onResize:function(){this.calcOffset()},_shouldRender:function(u){var d=this._activeObject;return!!d!=!!u||d&&u&&d!==u?!0:(d&&d.isEditing,!1)},__onMouseUp:function(u){var d,l=this._currentTransform,g=this._groupSelector,v=!1,b=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(u),d=this._target,this._handleEvent(u,"up:before"),s(u,a)){this.fireRightClick&&this._handleEvent(u,"up",a,b);return}if(s(u,c)){this.fireMiddleClick&&this._handleEvent(u,"up",c,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(u);return}if(!!this._isMainEvent(u)){if(l&&(this._finalizeCurrentTransform(u),v=l.actionPerformed),!b){var _=d===this._activeObject;this._maybeGroupObjects(u),v||(v=this._shouldRender(d)||!_&&d===this._activeObject)}if(d){if(d.selectable&&d!==this._activeObject&&d.activeOn==="up")this.setActiveObject(d,u),v=!0;else{var w=d._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u)),S=d.controls[w],T=S&&S.getMouseUpHandler(u,d,S);if(T){var x=this.getPointer(u);T(u,l,x.x,x.y)}}d.isMoving=!1}this._setCursorFromEvent(u,d),this._handleEvent(u,"up",i,b),this._groupSelector=null,this._currentTransform=null,d&&(d.__corner=0),v?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(u,d){var l=this.findTarget(d),g=this.targets,v={e:d,target:l,subTargets:g};if(this.fire(u,v),l&&l.fire(u,v),!g)return l;for(var b=0;b<g.length;b++)g[b].fire(u,v);return l},_handleEvent:function(u,d,l,g){var v=this._target,b=this.targets||[],_={e:u,target:v,subTargets:b,button:l||i,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};d==="up"&&(_.currentTarget=this.findTarget(u),_.currentSubTargets=this.targets),this.fire("mouse:"+d,_),v&&v.fire("mouse"+d,_);for(var w=0;w<b.length;w++)b[w].fire("mouse"+d,_)},_finalizeCurrentTransform:function(u){var d=this._currentTransform,l=d.target,g,v={e:u,target:l,transform:d,action:d.action};l._scaling&&(l._scaling=!1),l.setCoords(),(d.actionPerformed||this.stateful&&l.hasStateChanged())&&(d.actionPerformed&&(g=this._addEventOptions(v,d),this._fire(g,v)),this._fire("modified",v))},_addEventOptions:function(u,d){var l,g;switch(d.action){case"scaleX":l="scaled",g="x";break;case"scaleY":l="scaled",g="y";break;case"skewX":l="skewed",g="x";break;case"skewY":l="skewed",g="y";break;case"scale":l="scaled",g="equally";break;case"rotate":l="rotated";break;case"drag":l="moved";break}return u.by=g,l},_onMouseDownInDrawingMode:function(u){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(u).requestRenderAll();var d=this.getPointer(u);this.freeDrawingBrush.onMouseDown(d,{e:u,pointer:d}),this._handleEvent(u,"down")},_onMouseMoveInDrawingMode:function(u){if(this._isCurrentlyDrawing){var d=this.getPointer(u);this.freeDrawingBrush.onMouseMove(d,{e:u,pointer:d})}this.setCursor(this.freeDrawingCursor),this._handleEvent(u,"move")},_onMouseUpInDrawingMode:function(u){var d=this.getPointer(u);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:u,pointer:d}),this._handleEvent(u,"up")},__onMouseDown:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"down:before");var d=this._target;if(s(u,a)){this.fireRightClick&&this._handleEvent(u,"down",a);return}if(s(u,c)){this.fireMiddleClick&&this._handleEvent(u,"down",c);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(u);return}if(!!this._isMainEvent(u)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var g=this._shouldRender(d),v=this._shouldGroup(u,d);if(this._shouldClearSelection(u,d)?this.discardActiveObject(u):v&&(this._handleGrouping(u,d),d=this._activeObject),this.selection&&(!d||!d.selectable&&!d.isEditing&&d!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),d){var b=d===this._activeObject;d.selectable&&d.activeOn==="down"&&this.setActiveObject(d,u);var _=d._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u));if(d.__corner=_,d===this._activeObject&&(_||!v)){this._setupCurrentTransform(u,d,b);var w=d.controls[_],l=this.getPointer(u),S=w&&w.getMouseDownHandler(u,d,w);S&&S(u,this._currentTransform,l.x,l.y)}}this._handleEvent(u,"down"),(g||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(u){this._resetTransformEventData(),this._pointer=this.getPointer(u,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(u)||null},_beforeTransform:function(u){var d=this._currentTransform;this.stateful&&d.target.saveState(),this.fire("before:transform",{e:u,transform:d})},__onMouseMove:function(u){this._handleEvent(u,"move:before"),this._cacheTransformEventData(u);var d,l;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(u);return}if(!!this._isMainEvent(u)){var g=this._groupSelector;g?(l=this._absolutePointer,g.left=l.x-g.ex,g.top=l.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(u):(d=this.findTarget(u)||null,this._setCursorFromEvent(u,d),this._fireOverOutEvents(d,u)),this._handleEvent(u,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(u,d){var l=this._hoveredTarget,g=this._hoveredTargets,v=this.targets,b=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(u,d,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<b;_++)this.fireSyntheticInOutEvents(v[_],d,{oldTarget:g[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(u,d){var l=this._draggedoverTarget,g=this._hoveredTargets,v=this.targets,b=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(u,d,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<b;_++)this.fireSyntheticInOutEvents(v[_],d,{oldTarget:g[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=u},fireSyntheticInOutEvents:function(u,d,l){var g,v,b=l.oldTarget,_,w,S=b!==u,T=l.canvasEvtIn,x=l.canvasEvtOut;S&&(g={e:d,target:u,previousTarget:b},v={e:d,target:b,nextTarget:u}),w=u&&S,_=b&&S,_&&(x&&this.fire(x,v),b.fire(l.evtOut,v)),w&&(T&&this.fire(T,g),u.fire(l.evtIn,g))},__onMouseWheel:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"wheel"),this._resetTransformEventData()},_transformObject:function(u){var d=this.getPointer(u),l=this._currentTransform;l.reset=!1,l.shiftKey=u.shiftKey,l.altKey=u[this.centeredKey],this._performTransformAction(u,l,d),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(u,d,l){var g=l.x,v=l.y,b=d.action,_=!1,w=d.actionHandler;w&&(_=w(u,d,g,v)),b==="drag"&&_&&(d.target.isMoving=!0,this.setCursor(d.target.moveCursor||this.moveCursor)),d.actionPerformed=d.actionPerformed||_},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(u,d){if(!d)return this.setCursor(this.defaultCursor),!1;var l=d.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!g||!g.contains(d))&&d._findTargetCorner(this.getPointer(u,!0));v?this.setCursor(this.getCornerCursor(v,d,u)):(d.subTargetCheck&&this.targets.concat().reverse().map(function(b){l=b.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(u,d,l){var g=d.controls[u];return g.cursorStyleHandler(l,g,d)}})}(),function(){var h=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(a,c){var i=this._activeObject;return i&&this._isSelectionKeyPressed(a)&&c&&c.selectable&&this.selection&&(i!==c||i.type==="activeSelection")&&!c.onSelect({e:a})},_handleGrouping:function(a,c){var i=this._activeObject;i.__corner||c===i&&(c=this.findTarget(a,!0),!c||!c.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(c,a):this._createActiveSelection(c,a))},_updateActiveSelection:function(a,c){var i=this._activeObject,o=i._objects.slice(0);i.contains(a)?(i.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),c)):(i.addWithUpdate(a),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,c)},_createActiveSelection:function(a,c){var i=this.getActiveObjects(),o=this._createGroup(a);this._hoveredTarget=o,this._setActiveObject(o,c),this._fireSelectionEvents(i,c)},_createGroup:function(a){var c=this._objects,i=c.indexOf(this._activeObject)<c.indexOf(a),o=i?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(a){var c=this._collectObjects(a),i;c.length===1?this.setActiveObject(c[0],a):c.length>1&&(i=new e.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(i,a))},_collectObjects:function(a){for(var c=[],i,o=this._groupSelector.ex,s=this._groupSelector.ey,u=o+this._groupSelector.left,d=s+this._groupSelector.top,l=new e.Point(h(o,u),h(s,d)),g=new e.Point(r(o,u),r(s,d)),v=!this.selectionFullyContained,b=o===u&&s===d,_=this._objects.length;_--&&(i=this._objects[_],!(!(!i||!i.selectable||!i.visible)&&(v&&i.intersectsWithRect(l,g,!0)||i.isContainedWithinRect(l,g,!0)||v&&i.containsPoint(l,null,!0)||v&&i.containsPoint(g,null,!0))&&(c.push(i),b))););return c.length>1&&(c=c.filter(function(w){return!w.onSelect({e:a})})),c},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var r=h.format||"png",a=h.quality||1,c=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(c,h);return e.util.toDataURL(i,r,a)},toCanvasElement:function(h,r){h=h||1,r=r||{};var a=(r.width||this.width)*h,c=(r.height||this.height)*h,i=this.getZoom(),o=this.width,s=this.height,u=i*h,d=this.viewportTransform,l=(d[4]-(r.left||0))*h,g=(d[5]-(r.top||0))*h,v=this.interactive,b=[u,0,0,u,l,g],_=this.enableRetinaScaling,w=e.util.createCanvasElement(),S=this.contextTop;return w.width=a,w.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=a,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=d,this.width=o,this.height=s,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=_,this.contextTop=S,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(h,r,a){if(!!h){var c=typeof h=="string"?JSON.parse(h):e.util.object.clone(h),i=this,o=c.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(u){i.clear(),i._setBgOverlay(c,function(){o?i._enlivenObjects([o],function(d){i.clipPath=d[0],i.__setupCanvas.call(i,c,u,s,r)}):i.__setupCanvas.call(i,c,u,s,r)})},a),this}},__setupCanvas:function(h,r,a,c){var i=this;r.forEach(function(o,s){i.insertAt(o,s)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),c&&c()},_setBgOverlay:function(h,r){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){r&&r();return}var c=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,c),this.__setBgOverlay("overlayImage",h.overlayImage,a,c),this.__setBgOverlay("backgroundColor",h.background,a,c),this.__setBgOverlay("overlayColor",h.overlay,a,c)},__setBgOverlay:function(h,r,a,c){var i=this;if(!r){a[h]=!0,c&&c();return}h==="backgroundImage"||h==="overlayImage"?e.util.enlivenObjects([r],function(o){i[h]=o[0],a[h]=!0,c&&c()}):this["set"+e.util.string.capitalize(h,!0)](r,function(){a[h]=!0,c&&c()})},_enlivenObjects:function(h,r,a){if(!h||h.length===0){r&&r([]);return}e.util.enlivenObjects(h,function(c){r&&r(c)},null,a)},_toDataURL:function(h,r){this.clone(function(a){r(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,r,a){this.clone(function(c){a(c.toDataURLWithMultiplier(h,r))})},clone:function(h,r){var a=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(c){c.loadFromJSON(a,function(){h&&h(c)})})},cloneWithoutData:function(h){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var a=new e.Canvas(r);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.util.object.clone,i=r.util.toFixed,o=r.util.string.capitalize,s=r.util.degreesToRadians,u=!r.isLikelyNode,d=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:u,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var g=r.perfLimitSizeTotal,v=l.width,b=l.height,_=r.maxCacheSideLimit,w=r.minCacheSideLimit;if(v<=_&&b<=_&&v*b<=g)return v<w&&(l.width=w),b<w&&(l.height=w),l;var S=v/b,T=r.util.limitDimsByArea(S,g),x=r.util.capValue,D=x(w,T.x,_),N=x(w,T.y,_);return v>D&&(l.zoomX/=v/D,l.width=D,l.capped=!0),b>N&&(l.zoomY/=b/N,l.height=N,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),v=g.x*l.scaleX/this.scaleX,b=g.y*l.scaleY/this.scaleY;return{width:v+d,height:b+d,zoomX:l.scaleX,zoomY:l.scaleY,x:v,y:b}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var g=l._currentTransform.target,v=l._currentTransform.action;if(this===g&&v.slice&&v.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),w=r.minCacheSideLimit,S=_.width,T=_.height,x,D,N=_.zoomX,W=_.zoomY,k=S!==this.cacheWidth||T!==this.cacheHeight,q=this.zoomX!==N||this.zoomY!==W,K=k||q,ne=0,se=0,oe=!1;if(k){var ae=this._cacheCanvas.width,I=this._cacheCanvas.height,H=S>ae||T>I,P=(S<ae*.9||T<I*.9)&&ae>w&&I>w;oe=H||P,H&&!_.capped&&(S>w||T>w)&&(ne=S*.1,se=T*.1)}return this instanceof r.Text&&this.path&&(K=!0,oe=!0,ne+=this.getHeightOfLine(0)*this.zoomX,se+=this.getHeightOfLine(0)*this.zoomY),K?(oe?(b.width=Math.ceil(S+ne),b.height=Math.ceil(T+se)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),x=_.x/2,D=_.y/2,this.cacheTranslationX=Math.round(b.width/2-x)+x,this.cacheTranslationY=Math.round(b.height/2-D)+D,this.cacheWidth=S,this.cacheHeight=T,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(N,W),this.zoomX=N,this.zoomY=W,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,v=this.calcTransformMatrix(!g);l.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(l){var g=r.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:i(this.left,g),top:i(this.top,g),width:i(this.width,g),height:i(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,g),scaleX:i(this.scaleX,g),scaleY:i(this.scaleY,g),angle:i(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,g),skewY:i(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(l),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,v,l),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var g=r.util.getKlass(l.type).prototype,v=g.stateProperties;return v.forEach(function(b){if(!(b==="left"||b==="top")){l[b]===g[b]&&delete l[b];var _=Object.prototype.toString.call(l[b])==="[object Array]"&&Object.prototype.toString.call(g[b])==="[object Array]";_&&l[b].length===0&&g[b].length===0&&delete l[b]}}),l},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),g=l.scaleX,v=l.scaleY;if(this.canvas){var b=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();g*=b*_,v*=b*_}return{scaleX:g,scaleY:v}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,g){var v=l==="scaleX"||l==="scaleY",b=this[l]!==g,_=!1;return v&&(g=this._constrainScale(g)),l==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):l==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):l==="shadow"&&g&&!(g instanceof r.Shadow)?g=new r.Shadow(g):l==="dirty"&&this.group&&this.group.set("dirty",g),this[l]=g,b&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l){var g=this.clipPath;if(l.save(),g.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",g.absolutePositioned){var v=r.util.invertTransform(this.calcTransformMatrix());l.transform(v[0],v[1],v[2],v[3],v[4],v[5])}g.transform(l),l.scale(1/g.zoomX,1/g.zoomY),l.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),l.restore()},drawObject:function(l,g){var v=this.fill,b=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l),this.fill=v,this.stroke=b},_drawClipPath:function(l){var g=this.clipPath;!g||(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(l))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!l){var g=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-v/2,g,v)}return!0}return!1},_renderBackground:function(l){if(!!this.backgroundColor){var g=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,g){var v=g.stroke;v&&(l.lineWidth=g.strokeWidth,l.lineCap=g.strokeLineCap,l.lineDashOffset=g.strokeDashOffset,l.lineJoin=g.strokeLineJoin,l.miterLimit=g.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(l,v):(l.strokeStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,v)):l.strokeStyle=g.stroke)},_setFillStyles:function(l,g){var v=g.fill;v&&(v.toLive?(l.fillStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,g.fill)):l.fillStyle=v)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),l.setLineDash(g))},_renderControls:function(l,g){var v=this.getViewportTransform(),b=this.calcTransformMatrix(),_,w,S;g=g||{},w=typeof g.hasBorders!="undefined"?g.hasBorders:this.hasBorders,S=typeof g.hasControls!="undefined"?g.hasControls:this.hasControls,b=r.util.multiplyTransformMatrices(v,b),_=r.util.qrDecompose(b),l.save(),l.translate(_.translateX,_.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),l.rotate(s(_.angle)),g.forActiveSelection||this.group?w&&this.drawBordersInGroup(l,_,g):w&&this.drawBorders(l,g),S&&this.drawControls(l,g),l.restore()},_setShadow:function(l){if(!!this.shadow){var g=this.shadow,v=this.canvas,b,_=v&&v.viewportTransform[0]||1,w=v&&v.viewportTransform[3]||1;g.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),v&&v._isRetinaScaling()&&(_*=r.devicePixelRatio,w*=r.devicePixelRatio),l.shadowColor=g.color,l.shadowBlur=g.blur*r.browserShadowBlurConstant*(_+w)*(b.scaleX+b.scaleY)/4,l.shadowOffsetX=g.offsetX*_*b.scaleX,l.shadowOffsetY=g.offsetY*w*b.scaleY}},_removeShadow:function(l){!this.shadow||(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var v=g.gradientTransform||g.patternTransform,b=-this.width/2+g.offsetX||0,_=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,b,_):l.transform(1,0,0,1,b,_),v&&l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:b,offsetY:_}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){!this.fill||(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();l.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,g){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),b=r.util.createCanvasElement(),_,w=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/w,T=v.y/this.scaleY/w;b.width=S,b.height=T,_=b.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(S,0),_.lineTo(S,T),_.lineTo(0,T),_.closePath(),_.translate(S/2,T/2),_.scale(v.zoomX/this.scaleX/w,v.zoomY/this.scaleY/w),this._applyPatternGradientTransform(_,g),_.fillStyle=g.toLive(l),_.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(w*this.scaleX/v.zoomX,w*this.scaleY/v.zoomY),l.strokeStyle=_.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=r.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,g.x+=l.offsetLeft,g.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(g,"center","center")},clone:function(l,g){var v=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(v,l):r.Object._fromObject("Object",v,l)},cloneAsImage:function(l,g){var v=this.toCanvasElement(g);return l&&l(new r.Image(v)),this},toCanvasElement:function(l){l||(l={});var g=r.util,v=g.saveObjectTransform(this),b=this.group,_=this.shadow,w=Math.abs,S=(l.multiplier||1)*(l.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,l.withoutTransform&&g.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var T=r.util.createCanvasElement(),x=this.getBoundingRect(!0,!0),D=this.shadow,N,W={x:0,y:0},k,q,K;D&&(k=D.blur,D.nonScaling?N={scaleX:1,scaleY:1}:N=this.getObjectScaling(),W.x=2*Math.round(w(D.offsetX)+k)*w(N.scaleX),W.y=2*Math.round(w(D.offsetY)+k)*w(N.scaleY)),q=x.width+W.x,K=x.height+W.y,T.width=Math.ceil(q),T.height=Math.ceil(K);var ne=new r.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(ne.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(ne.width/2,ne.height/2),"center","center");var se=this.canvas;ne.add(this);var oe=ne.toCanvasElement(S||1,l);return this.shadow=_,this.set("canvas",se),b&&(this.group=b),this.set(v).setCoords(),ne._objects=[],ne.dispose(),ne=null,oe},toDataURL:function(l){return l||(l={}),r.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",l),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,g){g=g||this.canvas.getPointer(l);var v=new r.Point(g.x,g.y),b=this._getLeftTopCoords();return this.angle&&(v=r.util.rotatePoint(v,b,s(-this.angle))),{x:v.x-b.x,y:v.y-b.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),a(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object._fromObject=function(l,g,v,b){var _=r[l];g=c(g,!0),r.util.enlivenPatterns([g.fill,g.stroke],function(w){typeof w[0]!="undefined"&&(g.fill=w[0]),typeof w[1]!="undefined"&&(g.stroke=w[1]),r.util.enlivenObjects([g.clipPath],function(S){g.clipPath=S[0];var T=b?new _(g[b],g):new _(g);v&&v(T)})})},r.Object.__uid=0)}(t),function(){var h=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(c,i,o,s,u){var d=c.x,l=c.y,g,v,b;return typeof i=="string"?i=r[i]:i-=.5,typeof s=="string"?s=r[s]:s-=.5,g=s-i,typeof o=="string"?o=a[o]:o-=.5,typeof u=="string"?u=a[u]:u-=.5,v=u-o,(g||v)&&(b=this._getTransformedDimensions(),d=c.x+g*b.x,l=c.y+v*b.y),new e.Point(d,l)},translateToCenterPoint:function(c,i,o){var s=this.translateToGivenOrigin(c,i,o,"center","center");return this.angle?e.util.rotatePoint(s,c,h(this.angle)):s},translateToOriginPoint:function(c,i,o){var s=this.translateToGivenOrigin(c,"center","center",i,o);return this.angle?e.util.rotatePoint(s,c,h(this.angle)):s},getCenterPoint:function(){var c=new e.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,i){var o=this.getCenterPoint();return this.translateToOriginPoint(o,c,i)},toLocalPoint:function(c,i,o){var s=this.getCenterPoint(),u,d;return typeof i!="undefined"&&typeof o!="undefined"?u=this.translateToGivenOrigin(s,"center","center",i,o):u=new e.Point(this.left,this.top),d=new e.Point(c.x,c.y),this.angle&&(d=e.util.rotatePoint(d,s,-h(this.angle))),d.subtractEquals(u)},setPositionByOrigin:function(c,i,o){var s=this.translateToCenterPoint(c,i,o),u=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(c){var i=h(this.angle),o=this.getScaledWidth(),s=e.util.cos(i)*o,u=e.util.sin(i)*o,d,l;typeof this.originX=="string"?d=r[this.originX]:d=this.originX-.5,typeof c=="string"?l=r[c]:l=c-.5,this.left+=s*(l-d),this.top+=u*(l-d),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(o){return[new e.Point(o.tl.x,o.tl.y),new e.Point(o.tr.x,o.tr.y),new e.Point(o.br.x,o.br.y),new e.Point(o.bl.x,o.bl.y)]}var r=e.util,a=r.degreesToRadians,c=r.multiplyTransformMatrices,i=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,s){return s?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,s){return h(this._getCoords(o,s))},intersectsWithRect:function(o,s,u,d){var l=this.getCoords(u,d),g=e.Intersection.intersectPolygonRectangle(l,o,s);return g.status==="Intersection"},intersectsWithObject:function(o,s,u){var d=e.Intersection.intersectPolygonPolygon(this.getCoords(s,u),o.getCoords(s,u));return d.status==="Intersection"||o.isContainedWithinObject(this,s,u)||this.isContainedWithinObject(o,s,u)},isContainedWithinObject:function(o,s,u){for(var d=this.getCoords(s,u),l=s?o.aCoords:o.lineCoords,g=0,v=o._getImageLines(l);g<4;g++)if(!o.containsPoint(d[g],v))return!1;return!0},isContainedWithinRect:function(o,s,u,d){var l=this.getBoundingRect(u,d);return l.left>=o.x&&l.left+l.width<=s.x&&l.top>=o.y&&l.top+l.height<=s.y},containsPoint:function(o,g,u,d){var l=this._getCoords(u,d),g=g||this._getImageLines(l),v=this._findCrossPoints(o,g);return v!==0&&v%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br,d=this.getCoords(!0,o);return d.some(function(l){return l.x<=u.x&&l.x>=s.x&&l.y<=u.y&&l.y>=s.y})||this.intersectsWithRect(s,u,!0,o)?!0:this._containsCenterOfCanvas(s,u,o)},_containsCenterOfCanvas:function(o,s,u){var d={x:(o.x+s.x)/2,y:(o.y+s.y)/2};return!!this.containsPoint(d,null,!0,u)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;if(this.intersectsWithRect(s,u,!0,o))return!0;var d=this.getCoords(!0,o).every(function(l){return(l.x>=u.x||l.x<=s.x)&&(l.y>=u.y||l.y<=s.y)});return d&&this._containsCenterOfCanvas(s,u,o)},_getImageLines:function(o){var s={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return s},_findCrossPoints:function(o,s){var u,d,l,g,v,b=0,_;for(var w in s)if(_=s[w],!(_.o.y<o.y&&_.d.y<o.y)&&!(_.o.y>=o.y&&_.d.y>=o.y)&&(_.o.x===_.d.x&&_.o.x>=o.x?v=_.o.x:(u=0,d=(_.d.y-_.o.y)/(_.d.x-_.o.x),l=o.y-u*o.x,g=_.o.y-d*_.o.x,v=-(l-g)/(u-d)),v>=o.x&&(b+=1),b===2))break;return b},getBoundingRect:function(o,s){var u=this.getCoords(o,s);return r.makeBoundingBoxFromPoints(u)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,s){var u=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(o/this.width/u)},scaleToHeight:function(o,s){var u=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(o/this.height/u)},calcCoords:function(o){return o?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var o=this.getViewportTransform(),s=this.padding,u=a(this.angle),d=r.cos(u),l=r.sin(u),g=d*s,v=l*s,b=g+v,_=g-v,w=this.calcACoords(),S={tl:i(w.tl,o),tr:i(w.tr,o),bl:i(w.bl,o),br:i(w.br,o)};return s&&(S.tl.x-=_,S.tl.y-=b,S.tr.x+=b,S.tr.y-=_,S.bl.x-=b,S.bl.y+=_,S.br.x+=_,S.br.y+=b),S},calcOCoords:function(){var o=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=this.getViewportTransform(),d=c(u,s),l=c(d,o),l=c(l,[1/u[0],0,0,1/u[3],0,0]),g=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(b,_,w){v[_]=b.positionHandler(g,l,w)}),v},calcACoords:function(){var o=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=c(s,o),d=this._getTransformedDimensions(),l=d.x/2,g=d.y/2;return{tl:i({x:-l,y:-g},u),tr:i({x:l,y:-g},u),bl:i({x:-l,y:g},u),br:i({x:l,y:g},u)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var s="_",u="";return!o&&this.group&&(u=this.group.transformMatrixKey(o)+s),u+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var s=this.calcOwnMatrix();if(o||!this.group)return s;var u=this.transformMatrixKey(o),d=this.matrixCache||(this.matrixCache={});return d.key===u?d.value:(this.group&&(s=c(this.group.calcTransformMatrix(!1),s)),d.key=u,d.value=s,s)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===o)return s.value;var u=this._calcTranslateMatrix(),d={angle:this.angle,translateX:u[4],translateY:u[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=o,s.value=r.composeMatrix(d),s.value},_calcDimensionsTransformMatrix:function(o,s,u){return r.calcDimensionsMatrix({skewX:o,skewY:s,scaleX:this.scaleX*(u&&this.flipX?-1:1),scaleY:this.scaleY*(u&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var o=this.strokeWidth,s=this.width+o,u=this.height+o;return{x:s,y:u}},_getTransformedDimensions:function(o,s){typeof o=="undefined"&&(o=this.skewX),typeof s=="undefined"&&(s=this.skewY);var u,d,l,g=o===0&&s===0;if(this.strokeUniform?(d=this.width,l=this.height):(u=this._getNonTransformedDimensions(),d=u.x,l=u.y),g)return this._finalizeDimensions(d*this.scaleX,l*this.scaleY);var v=r.sizeAfterTransform(d,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:s});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(o,s){return this.strokeUniform?{x:o+this.strokeWidth,y:s+this.strokeWidth}:{x:o,y:s}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),s=this._getTransformedDimensions(),u=i(s,o,!0);return u.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,c){if(c){if(c.toLive)return a+": url(#SVGID_"+c.id+"); ";var i=new e.Color(c),o=a+": "+i.toRgb()+"; ",s=i.getAlpha();return s!==1&&(o+=a+"-opacity: "+s.toString()+"; "),o}else return a+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(a){var c=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity!="undefined"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",b=a?"":this.getSvgFilter(),_=h("fill",this.fill),w=h("stroke",this.stroke);return[w,"stroke-width: ",i,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",l,"; ",_,"fill-rule: ",c,"; ","opacity: ",g,";",b,v].join("")},getSvgSpanStyles:function(a,c){var i="; ",s=a.fontFamily?"font-family: "+(a.fontFamily.indexOf("'")===-1&&a.fontFamily.indexOf('"')===-1?"'"+a.fontFamily+"'":a.fontFamily)+i:"",o=a.strokeWidth?"stroke-width: "+a.strokeWidth+i:"",s=s,u=a.fontSize?"font-size: "+a.fontSize+"px"+i:"",d=a.fontStyle?"font-style: "+a.fontStyle+i:"",l=a.fontWeight?"font-weight: "+a.fontWeight+i:"",g=a.fill?h("fill",a.fill):"",v=a.stroke?h("stroke",a.stroke):"",b=this.getSvgTextDecoration(a),_=a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"";return b&&(b="text-decoration: "+b+i),[v,o,s,u,d,l,b,g,_,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(c){return a[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,c){var i=a?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+e.util.matrixToSVG(i);return o+(c||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var c=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,c),'" y="',r(-this.height/2,c),'" width="',r(this.width,c),'" height="',r(this.height,c),`"></rect>
`)}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,c){c=c||{};var i=c.reviver,o=c.additionalTransform||"",s=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),u=a.indexOf("COMMON_PARTS");return a[u]=s,i?i(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,c){c=c||{};var i=c.noStyle,o=c.reviver,s=i?"":'style="'+this.getSvgStyles()+'" ',u=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",d=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,v=this.stroke,b=this.fill,_=this.shadow,w,S=[],T,x=a.indexOf("COMMON_PARTS"),D=c.additionalTransform;return d&&(d.clipPathId="CLIPPATH_"+e.Object.__uid++,T='<clipPath id="'+d.clipPathId+`" >
`+d.toClipPathSVG(o)+`</clipPath>
`),g&&S.push("<g ",u,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`),w=[s,l,i?"":this.addPaintOrder()," ",D?'transform="'+D+'" ':""].join(""),a[x]=w,b&&b.toLive&&S.push(b.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),_&&S.push(_.toSVG(this)),d&&S.push(T),S.push(a.join("")),S.push(`</g>
`),g&&S.push(`</g>
`),o?o(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=e.util.object.extend,r="stateProperties";function a(i,o,s){var u={},d=!0;s.forEach(function(l){u[l]=i[l]}),h(i[o],u,d)}function c(i,o,s){if(i===o)return!0;if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(var u=0,d=i.length;u<d;u++)if(!c(i[u],o[u]))return!1;return!0}else if(i&&typeof i=="object"){var l=Object.keys(i),g;if(!o||typeof o!="object"||!s&&l.length!==Object.keys(o).length)return!1;for(var u=0,d=l.length;u<d;u++)if(g=l[u],!(g==="canvas"||g==="group")&&!c(i[g],o[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(i){i=i||r;var o="_"+i;return Object.keys(this[o]).length<this[i].length?!0:!c(this[o],this,!0)},saveState:function(i){var o=i&&i.propertySet||r,s="_"+o;return this[s]?(a(this,s,this[o]),i&&i.stateProperties&&a(this,s,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var o=i.propertySet||r;return i.propertySet=o,this["_"+o]={},this.saveState(i),this}})}(),function(){var h=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=r.x,i=r.y,o,s,u=Object.keys(this.oCoords),d=u.length-1,l;for(this.__corner=0;d>=0;d--)if(l=u[d],!!this.isControlVisible(l)&&(s=this._getImageLines(a?this.oCoords[l].touchCorner:this.oCoords[l].corner),o=this._findCrossPoints({x:c,y:i},s),o!==0&&o%2===1))return this.__corner=l,l;return!1},forEachControl:function(r){for(var a in this.controls)r(this.controls[a],a,this)},_setCornerCoords:function(){var r=this.oCoords;for(var a in r){var c=this.controls[a];r[a].corner=c.calcCornerCoords(this.angle,this.cornerSize,r[a].x,r[a].y,!1),r[a].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,r[a].x,r[a].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var a=this.getCenterPoint(),c=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return r.translate(a.x,a.y),r.scale(1/i[0],1/i[3]),r.rotate(h(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-c.x/2,-c.y/2,c.x,c.y),r.restore(),this},drawBorders:function(r,a){a=a||{};var c=this._calculateCurrentDimensions(),i=this.borderScaleFactor,o=c.x+i,s=c.y+i,u=typeof a.hasControls!="undefined"?a.hasControls:this.hasControls,d=!1;return r.save(),r.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(r,a.borderDashArray||this.borderDashArray),r.strokeRect(-o/2,-s/2,o,s),u&&(r.beginPath(),this.forEachControl(function(l,g,v){l.withConnection&&l.getVisibility(v,g)&&(d=!0,r.moveTo(l.x*o,l.y*s),r.lineTo(l.x*o+l.offsetX,l.y*s+l.offsetY))}),d&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,a,c){c=c||{};var i=e.util.sizeAfterTransform(this.width,this.height,a),o=this.strokeWidth,s=this.strokeUniform,u=this.borderScaleFactor,d=i.x+o*(s?this.canvas.getZoom():a.scaleX)+u,l=i.y+o*(s?this.canvas.getZoom():a.scaleY)+u;return r.save(),this._setLineDash(r,c.borderDashArray||this.borderDashArray),r.strokeStyle=c.borderColor||this.borderColor,r.strokeRect(-d/2,-l/2,d,l),r.restore(),this},drawControls:function(r,a){a=a||{},r.save();var c=this.canvas.getRetinaScaling(),i,o;return r.setTransform(c,0,0,c,0,0),r.strokeStyle=r.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl(function(s,u,d){o=d.oCoords[u],s.getVisibility(d,u)&&(i&&(o=e.util.transformPoint(o,i)),s.render(r,o.x,o.y,a,d))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=a,this},setControlsVisibility:function(r){r||(r={});for(var a in r)this.setControlVisible(a,r[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,r){r=r||{};var a=function(){},c=r.onComplete||a,i=r.onChange||a,o=this;return e.util.animate({startValue:h.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(s){h.set("left",s),o.requestRenderAll(),i()},onComplete:function(){h.setCoords(),c()}}),this},fxCenterObjectV:function(h,r){r=r||{};var a=function(){},c=r.onComplete||a,i=r.onChange||a,o=this;return e.util.animate({startValue:h.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(s){h.set("top",s),o.requestRenderAll(),i()},onComplete:function(){h.setCoords(),c()}}),this},fxRemove:function(h,r){r=r||{};var a=function(){},c=r.onComplete||a,i=r.onChange||a,o=this;return e.util.animate({startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){h.set("opacity",s),o.requestRenderAll(),i()},onComplete:function(){o.remove(h),c()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],r,a;for(r in arguments[0])h.push(r);for(var c=0,i=h.length;c<i;c++)r=h[c],a=c!==i-1,this._animate(r,arguments[0][r],arguments[1],a)}else this._animate.apply(this,arguments);return this},_animate:function(h,r,a,c){var i=this,o;r=r.toString(),a?a=e.util.object.clone(a):a={},~h.indexOf(".")&&(o=h.split("."));var s=i.colorProperties.indexOf(h)>-1||o&&i.colorProperties.indexOf(o[1])>-1,u=o?this.get(o[0])[o[1]]:this.get(h);"from"in a||(a.from=u),s||(~r.indexOf("=")?r=u+parseFloat(r.replace("=","")):r=parseFloat(r));var d={startValue:a.from,endValue:r,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(l,g,v){return a.abort.call(i,l,g,v)},onChange:function(l,g,v){o?i[o[0]][o[1]]=l:i.set(h,l),!c&&a.onChange&&a.onChange(l,g,v)},onComplete:function(l,g,v){c||(i.setCoords(),a.onComplete&&a.onComplete(l,g,v))}};return s?e.util.animateColor(d.startValue,d.endValue,d.duration,d):e.util.animate(d)}}),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,u){s||(s=[0,0,0,0]),this.callSuper("initialize",u),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(u)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,u){return this.callSuper("_set",s,u),typeof i[s]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var u=this.calcLinePoints();s.moveTo(u.x1,u.y1),s.lineTo(u.x2,u.y2),s.lineWidth=this.strokeWidth;var d=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=d},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return a(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(s.y-=this.strokeWidth),this.height===0&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,u=this.y1<=this.y2?-1:1,d=s*this.width*.5,l=u*this.height*.5,g=s*this.width*-.5,v=u*this.height*-.5;return{x1:d,x2:g,y1:l,y2:v}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(s,u,d){d=d||{};var l=r.parseAttributes(s,r.Line.ATTRIBUTE_NAMES),g=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];u(new r.Line(g,a(l,d)))},r.Line.fromObject=function(s,u){function d(g){delete g.points,u&&u(g)}var l=c(s,!0);l.points=[s.x1,s.y1,s.x2,s.y2],r.Object._fromObject("Line",l,d,"points")};function o(s,u){var d=s.origin,l=s.axis1,g=s.axis2,v=s.dimension,b=u.nearest,_=u.center,w=u.farthest;return function(){switch(this.get(d)){case b:return Math.min(this.get(l),this.get(g));case _:return Math.min(this.get(l),this.get(g))+.5*this.get(v);case w:return Math.max(this.get(l),this.get(g))}}}}(t),function(h){var r=h.fabric||(h.fabric={}),a=Math.PI;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:a*2,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,o){return this.callSuper("_set",i,o),i==="radius"&&this.setRadius(o),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,o=0,s=0,u=(this.endAngle-this.startAngle)%(2*a);if(u===0)i=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+s+'" ','r="',this.radius,`" />
`];else{var d=r.util.cos(this.startAngle)*this.radius,l=r.util.sin(this.startAngle)*this.radius,g=r.util.cos(this.endAngle)*this.radius,v=r.util.sin(this.endAngle)*this.radius,b=u>a?"1":"0";i=['<path d="M '+d+" "+l," A "+this.radius+" "+this.radius," 0 ",+b+" 1"," "+g+" "+v,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(i,o){var s=r.parseAttributes(i,r.Circle.ATTRIBUTE_NAMES);if(!c(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,o(new r.Circle(s))};function c(i){return"radius"in i&&i.radius>=0}r.Circle.fromObject=function(i,o){r.Object._fromObject("Circle",i,o)}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(a){var c=this.width/2,i=this.height/2;a.beginPath(),a.moveTo(-c,i),a.lineTo(0,-i),a.lineTo(c,i),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,c=this.height/2,i=[-a+" "+c,"0 "+-c,a+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),r.Triangle.fromObject=function(a,c){return r.Object._fromObject("Triangle",a,c)}}(t),function(h){var r=h.fabric||(h.fabric={}),a=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,i){switch(this.callSuper("_set",c,i),c){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,a,!1),c.restore(),this._renderPaintInOrder(c)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(c,i){var o=r.parseAttributes(c,r.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,i(new r.Ellipse(o))},r.Ellipse.fromObject=function(c,i){r.Object._fromObject("Ellipse",c,i)}}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var i=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,u=this.height,d=-this.width/2,l=-this.height/2,g=i!==0||o!==0,v=1-.5522847498;c.beginPath(),c.moveTo(d+i,l),c.lineTo(d+s-i,l),g&&c.bezierCurveTo(d+s-v*i,l,d+s,l+v*o,d+s,l+o),c.lineTo(d+s,l+u-o),g&&c.bezierCurveTo(d+s,l+u-v*o,d+s-v*i,l+u,d+s-i,l+u),c.lineTo(d+i,l+u),g&&c.bezierCurveTo(d+v*i,l+u,d,l+u-v*o,d,l+u-o),c.lineTo(d,l+o),g&&c.bezierCurveTo(d,l+v*o,d+v*i,l,d+i,l),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(c,i,o){if(!c)return i(null);o=o||{};var s=r.parseAttributes(c,r.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var u=new r.Rect(a(o?r.util.object.clone(o):{},s));u.visible=u.visible&&u.width>0&&u.height>0,i(u)},r.Rect.fromObject=function(c,i){return r.Object._fromObject("Rect",c,i)}}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.util.array.min,i=r.util.array.max,o=r.util.toFixed;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(s,u){u=u||{},this.points=s||[],this.callSuper("initialize",u),this._setPositionDimensions(u)},_setPositionDimensions:function(s){var u=this._calcDimensions(s),d;this.width=u.width,this.height=u.height,s.fromSVG||(d=this.translateToGivenOrigin({x:u.left-this.strokeWidth/2,y:u.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof s.left=="undefined"&&(this.left=s.fromSVG?u.left:d.x),typeof s.top=="undefined"&&(this.top=s.fromSVG?u.top:d.y),this.pathOffset={x:u.left+this.width/2,y:u.top+this.height/2}},_calcDimensions:function(){var s=this.points,u=c(s,"x")||0,d=c(s,"y")||0,l=i(s,"x")||0,g=i(s,"y")||0,v=l-u,b=g-d;return{left:u,top:d,width:v,height:b}},toObject:function(s){return a(this.callSuper("toObject",s),{points:this.points.concat()})},_toSVG:function(){for(var s=[],u=this.pathOffset.x,d=this.pathOffset.y,l=r.Object.NUM_FRACTION_DIGITS,g=0,v=this.points.length;g<v;g++)s.push(o(this.points[g].x-u,l),",",o(this.points[g].y-d,l)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',s.join(""),`" />
`]},commonRender:function(s){var u,d=this.points.length,l=this.pathOffset.x,g=this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;s.beginPath(),s.moveTo(this.points[0].x-l,this.points[0].y-g);for(var v=0;v<d;v++)u=this.points[v],s.lineTo(u.x-l,u.y-g);return!0},_render:function(s){!this.commonRender(s)||this._renderPaintInOrder(s)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(s){return function(u,d,l){if(!u)return d(null);l||(l={});var g=r.parsePointsAttribute(u.getAttribute("points")),v=r.parseAttributes(u,r[s].ATTRIBUTE_NAMES);v.fromSVG=!0,d(new r[s](g,a(v,l)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(s,u){return r.Object._fromObject("Polyline",s,u,"points")}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(a){!this.commonRender(a)||(a.closePath(),this._renderPaintInOrder(a))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(a,c){r.Object._fromObject("Polygon",a,c,"points")}}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.array.min,c=r.util.array.max,i=r.util.object.extend,o=Object.prototype.toString,s=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(u,d){d=d||{},this.callSuper("initialize",d),u||(u=[]);var l=o.call(u)==="[object Array]";this.path=r.util.makePathSimpler(l?u:r.util.parsePath(u)),!!this.path&&r.Polyline.prototype._setPositionDimensions.call(this,d)},_renderPathCommands:function(u){var d,l=0,g=0,v=0,b=0,_=0,w=0,S=-this.pathOffset.x,T=-this.pathOffset.y;u.beginPath();for(var x=0,D=this.path.length;x<D;++x)switch(d=this.path[x],d[0]){case"L":v=d[1],b=d[2],u.lineTo(v+S,b+T);break;case"M":v=d[1],b=d[2],l=v,g=b,u.moveTo(v+S,b+T);break;case"C":v=d[5],b=d[6],_=d[3],w=d[4],u.bezierCurveTo(d[1]+S,d[2]+T,_+S,w+T,v+S,b+T);break;case"Q":u.quadraticCurveTo(d[1]+S,d[2]+T,d[3]+S,d[4]+T),v=d[3],b=d[4],_=d[1],w=d[2];break;case"z":case"Z":v=l,b=g,u.closePath();break}},_render:function(u){this._renderPathCommands(u),this._renderPaintInOrder(u)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(u){return i(this.callSuper("toObject",u),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(u){var d=this.toObject(["sourcePath"].concat(u));return d.sourcePath&&delete d.path,d},_toSVG:function(){var u=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',u,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var u=r.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,u)+", "+s(-this.pathOffset.y,u)+")"},toClipPathSVG:function(u){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:d})},toSVG:function(u){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:d})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var u=[],d=[],l,g=0,v=0,b=0,_=0,w,S=0,T=this.path.length;S<T;++S){switch(l=this.path[S],l[0]){case"L":b=l[1],_=l[2],w=[];break;case"M":b=l[1],_=l[2],g=b,v=_,w=[];break;case"C":w=r.util.getBoundsOfCurve(b,_,l[1],l[2],l[3],l[4],l[5],l[6]),b=l[5],_=l[6];break;case"Q":w=r.util.getBoundsOfCurve(b,_,l[1],l[2],l[1],l[2],l[3],l[4]),b=l[3],_=l[4];break;case"z":case"Z":b=g,_=v;break}w.forEach(function(K){u.push(K.x),d.push(K.y)}),u.push(b),d.push(_)}var x=a(u)||0,D=a(d)||0,N=c(u)||0,W=c(d)||0,k=N-x,q=W-D;return{left:x,top:D,width:k,height:q}}}),r.Path.fromObject=function(u,d){if(typeof u.sourcePath=="string"){var l=u.sourcePath;r.loadSVGFromURL(l,function(g){var v=g[0];v.setOptions(u),d&&d(v)})}else r.Object._fromObject("Path",u,d,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(u,d,l){var g=r.parseAttributes(u,r.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,d(new r.Path(g.d,i(g,l)))}}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.array.min,c=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,o,s){o=o||{},this._objects=[],s&&this.callSuper("initialize",o),this._objects=i||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(s)this._updateObjectsACoords();else{var d=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),d||this._calcBounds(),this._updateObjectsCoords(d),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,o=this._objects.length;o--;)this._objects[o].setCoords(i)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),s=this._objects.length;s--;)this._updateObjectCoords(this._objects[s],o)},_updateObjectCoords:function(i,o){var s=i.left,u=i.top,d=!0;i.set({left:s-o.x,top:u-o.y}),i.group=this,i.setCoords(d)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var o=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),i&&(o&&r.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,o){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(i,o);if(i==="canvas")for(;s--;)this._objects[s]._set(i,o);r.Object.prototype._set.call(this,i,o)},toObject:function(i){var o=this.includeDefaultValues,s=this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){var l=d.includeDefaultValues;d.includeDefaultValues=o;var g=d.toObject(i);return d.includeDefaultValues=l,g}),u=r.Object.prototype.toObject.call(this,i);return u.objects=s,u},toDatalessObject:function(i){var o,s=this.sourcePath;if(s)o=s;else{var u=this.includeDefaultValues;o=this._objects.map(function(l){var g=l.includeDefaultValues;l.includeDefaultValues=u;var v=l.toDatalessObject(i);return l.includeDefaultValues=g,v})}var d=r.Object.prototype.toDatalessObject.call(this,i);return d.objects=o,d},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=r.Object.prototype.shouldCache.call(this);if(i){for(var o=0,s=this._objects.length;o<s;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,o=this._objects.length;i<o;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var o=0,s=this._objects.length;o<s;o++)this._objects[o].render(i);this._drawClipPath(i)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var o=0,s=this._objects.length;o<s;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-d/2,u,d)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(o){r.util.addTransformToObject(o,i),delete o.group,o.setCoords()}),this},realizeTransform:function(i,o){return r.util.addTransformToObject(i,o),i},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var i=this._objects,o=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var u=new r.ActiveSelection([]);return u.set(s),u.type="activeSelection",o.remove(this),i.forEach(function(d){d.group=u,d.dirty=!0,o.add(d)}),u.canvas=o,u._objects=i,o._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(o){o.setCoords(i)}),this},_calcBounds:function(i){for(var o=[],s=[],u,d,l,g=["tr","br","bl","tl"],v=0,b=this._objects.length,_,w=g.length;v<b;++v){for(u=this._objects[v],l=u.calcACoords(),_=0;_<w;_++)d=g[_],o.push(l[d].x),s.push(l[d].y);u.aCoords=l}this._getBounds(o,s,i)},_getBounds:function(i,o,s){var u=new r.Point(a(i),a(o)),d=new r.Point(c(i),c(o)),l=u.y||0,g=u.x||0,v=d.x-u.x||0,b=d.y-u.y||0;this.width=v,this.height=b,s||this.setPositionByOrigin({x:g,y:l},"left","top")},_toSVG:function(i){for(var o=["<g ","COMMON_PARTS",` >
`],s=0,u=this._objects.length;s<u;s++)o.push("		",this._objects[s].toSVG(i));return o.push(`</g>
`),o},getSvgStyles:function(){var i=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),o].join("")},toClipPathSVG:function(i){for(var o=[],s=0,u=this._objects.length;s<u;s++)o.push("	",this._objects[s].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(o,{reviver:i})}}),r.Group.fromObject=function(i,o){var s=i.objects,u=r.util.object.clone(i,!0);if(delete u.objects,typeof s=="string"){r.loadSVGFromURL(s,function(d){var l=r.util.groupSVGElements(d,i,s);l.set(u),o&&o(l)});return}r.util.enlivenObjects(s,function(d){r.util.enlivenObjects([i.clipPath],function(l){var g=r.util.object.clone(i,!0);g.clipPath=l[0],delete g.objects,o&&o(new r.Group(d,g,!0))})})})}(t),function(h){var r=h.fabric||(h.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(a,c){c=c||{},this._objects=a||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var c=r.Object.prototype.toObject.call(this),i=new r.Group([]);if(delete c.type,i.set(c),a.forEach(function(s){s.canvas.remove(s),s.group=i}),i._objects=a,!this.canvas)return i;var o=this.canvas;return o.add(i),o._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,c,i){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,c),i=i||{},typeof i.hasControls=="undefined"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var o=0,s=this._objects.length;o<s;o++)this._objects[o]._renderControls(a,i);a.restore()}}),r.ActiveSelection.fromObject=function(a,c){r.util.enlivenObjects(a.objects,function(i){delete a.objects,c&&c(new r.ActiveSelection(i,a,!0))})})}(t),function(h){var r=e.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,c){c||(c={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",c),this._initElement(a,c)},getElement:function(){return this._element||{}},setElement:function(a,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var c=e.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(a)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,i=this.height/2;a.beginPath(),a.moveTo(-c,-i),a.lineTo(c,-i),a.lineTo(c,i),a.lineTo(-c,i),a.lineTo(-c,-i),a.closePath()}},toObject:function(a){var c=[];this.filters.forEach(function(o){o&&c.push(o.toObject())});var i=r(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a=[],c=[],i,o=this._element,s=-this.width/2,u=-this.height/2,d="",l="";if(!o)return[];if(this.hasCrop()){var g=e.Object.__uid++;a.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+s+'" y="'+u+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',u-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,l,'"',d,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,i=["	<rect ",'x="',s,'" y="',u,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?a=a.concat(i,c):a=a.concat(c,i),a},getSrc:function(a){var c=a?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(a,c,i){return e.util.loadImage(a,function(o,s){this.setElement(o,i),this._setWidthHeight(),c&&c(this,s)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,c=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),o=i.scaleX,s=i.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||o>c&&s>c){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=s;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var d=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=u.width,v=u.height;d.width=g,d.height=v,this._element=d,this._lastScaleX=a.scaleX=o,this._lastScaleY=a.scaleY=s,e.filterBackend.applyFilters([a],u,g,v,this._element,l),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height},applyFilters:function(a){if(a=a||this.filters||[],a=a.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),a.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,i=c.naturalWidth||c.width,o=c.naturalHeight||c.height;if(this._element===this._originalElement){var s=e.util.createCanvasElement();s.width=i,s.height=o,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,o),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(a,this._originalElement,i,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var c=this._element;if(!!c){var i=this._filterScalingX,o=this._filterScalingY,s=this.width,u=this.height,d=Math.min,l=Math.max,g=l(this.cropX,0),v=l(this.cropY,0),b=c.naturalWidth||c.width,_=c.naturalHeight||c.height,w=g*i,S=v*o,T=d(s*i,b-w),x=d(u*o,_-S),D=-s/2,N=-u/2,W=d(s,b/i-g),k=d(u,_/o-v);c&&a.drawImage(c,w,S,T,x,D,N,W,k)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,c){this.setElement(e.util.getById(a),c),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,c){a&&a.length?e.util.enlivenObjects(a,function(i){c&&c(i)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(a){a||(a={});var c=this.getElement();this.width=a.width||c.naturalWidth||c.width||0,this.height=a.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var a=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,i=this._element.height,o=1,s=1,u=0,d=0,l=0,g=0,v,b=this.width,_=this.height,w={width:b,height:_};return a&&(a.alignX!=="none"||a.alignY!=="none")?(a.meetOrSlice==="meet"&&(o=s=e.util.findScaleToFit(this._element,w),v=(b-c*o)/2,a.alignX==="Min"&&(u=-v),a.alignX==="Max"&&(u=v),v=(_-i*s)/2,a.alignY==="Min"&&(d=-v),a.alignY==="Max"&&(d=v)),a.meetOrSlice==="slice"&&(o=s=e.util.findScaleToCover(this._element,w),v=c-b/o,a.alignX==="Mid"&&(l=v/2),a.alignX==="Max"&&(l=v),v=i-_/s,a.alignY==="Mid"&&(g=v/2),a.alignY==="Max"&&(g=v),c=b/o,i=_/s)):(o=b/c,s=_/i),{width:c,height:i,scaleX:o,scaleY:s,offsetLeft:u,offsetTop:d,cropX:l,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(a,c){var i=e.util.object.clone(a);e.util.loadImage(i.src,function(o,s){if(s){c&&c(null,!0);return}e.Image.prototype._initFilters.call(i,i.filters,function(u){i.filters=u||[],e.Image.prototype._initFilters.call(i,[i.resizeFilter],function(d){i.resizeFilter=d[0],e.util.enlivenObjects([i.clipPath],function(l){i.clipPath=l[0];var g=new e.Image(o,i);c(g,!1)})})})},null,i.crossOrigin)},e.Image.fromURL=function(a,c,i){e.util.loadImage(a,function(o,s){c&&c(new e.Image(o,i),s)},null,i&&i.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(a,c,i){var o=e.parseAttributes(a,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(o["xlink:href"],c,r(i?e.util.object.clone(i):{},o))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(h){h=h||{};var r=function(){},a=h.onComplete||r,c=h.onChange||r,i=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){i.rotate(o),c()},onComplete:function(){i.setCoords(),a()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function h(a,c){var i="precision "+c+` float;
void main(){}`,o=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(o,i),a.compileShader(o),!!a.getShaderParameter(o,a.COMPILE_STATUS)}e.isWebglSupported=function(a){if(e.isLikelyNode)return!1;a=a||e.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),i=c.getContext("webgl")||c.getContext("experimental-webgl"),o=!1;if(i){e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),o=e.maxTextureSize>=a;for(var s=["highp","mediump","lowp"],u=0;u<3;u++)if(h(i,s[u])){e.webGlPrecision=s[u];break}}return this.isSupported=o,o},e.WebglFilterBackend=r;function r(a){a&&a.tileSize&&(this.tileSize=a.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(a,c){this.dispose(),this.createWebGLCanvas(a,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(a,c)},chooseFastestCopyGLTo2DMethod:function(a,c){var i=typeof window.performance!="undefined",o;try{new ImageData(1,1),o=!0}catch{o=!1}var s=typeof ArrayBuffer!="undefined",u=typeof Uint8ClampedArray!="undefined";if(!!(i&&o&&s&&u)){var d=e.util.createCanvasElement(),l=new ArrayBuffer(a*c*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=y;return}var g={imageBuffer:l,destinationWidth:a,destinationHeight:c,targetCanvas:d},v,b,_;d.width=a,d.height=c,v=window.performance.now(),p.call(g,this.gl,g),b=window.performance.now()-v,v=window.performance.now(),y.call(g,this.gl,g),_=window.performance.now()-v,b>_?(this.imageBuffer=l,this.copyGLTo2D=y):this.copyGLTo2D=p}},createWebGLCanvas:function(a,c){var i=e.util.createCanvasElement();i.width=a,i.height=c;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=i.getContext("webgl",o);s||(s=i.getContext("experimental-webgl",o)),!!s&&(s.clearColor(0,0,0,0),this.canvas=i,this.gl=s)},applyFilters:function(a,c,i,o,s,u){var d=this.gl,l;u&&(l=this.getCachedTexture(u,c));var g={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:i,sourceHeight:o,destinationWidth:i,destinationHeight:o,context:d,sourceTexture:this.createTexture(d,i,o,!l&&c),targetTexture:this.createTexture(d,i,o),originalTexture:l||this.createTexture(d,i,o,!l&&c),passes:a.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},v=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,v),a.forEach(function(b){b&&b.applyTo(g)}),m(g),this.copyGLTo2D(d,g),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(g.sourceTexture),d.deleteTexture(g.targetTexture),d.deleteFramebuffer(v),s.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(a,c,i,o){var s=a.createTexture();return a.bindTexture(a.TEXTURE_2D,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),o?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o):a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c,i,0,a.RGBA,a.UNSIGNED_BYTE,null),s},getCachedTexture:function(a,c){if(this.textureCache[a])return this.textureCache[a];var i=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[a]=i,i},evictCachesForKey:function(a){this.textureCache[a]&&(this.gl.deleteTexture(this.textureCache[a]),delete this.textureCache[a])},copyGLTo2D:p,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var a=this.gl,c={renderer:"",vendor:""};if(!a)return c;var i=a.getExtension("WEBGL_debug_renderer_info");if(i){var o=a.getParameter(i.UNMASKED_RENDERER_WEBGL),s=a.getParameter(i.UNMASKED_VENDOR_WEBGL);o&&(c.renderer=o.toLowerCase()),s&&(c.vendor=s.toLowerCase())}return this.gpuInfo=c,c}}}();function m(h){var r=h.targetCanvas,a=r.width,c=r.height,i=h.destinationWidth,o=h.destinationHeight;(a!==i||c!==o)&&(r.width=i,r.height=o)}function p(h,r){var a=h.canvas,c=r.targetCanvas,i=c.getContext("2d");i.translate(0,c.height),i.scale(1,-1);var o=a.height-c.height;i.drawImage(a,0,o,c.width,c.height,0,0,c.width,c.height)}function y(h,r){var a=r.targetCanvas,c=a.getContext("2d"),i=r.destinationWidth,o=r.destinationHeight,s=i*o*4,u=new Uint8Array(this.imageBuffer,0,s),d=new Uint8ClampedArray(this.imageBuffer,0,s);h.readPixels(0,0,i,o,h.RGBA,h.UNSIGNED_BYTE,u);var l=new ImageData(d,i,o);c.putImageData(l,0,0)}(function(){var h=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,c,i,o,s){var u=s.getContext("2d");u.drawImage(c,0,0,i,o);var d=u.getImageData(0,0,i,o),l=u.getImageData(0,0,i,o),g={sourceWidth:i,sourceHeight:o,imageData:d,originalEl:c,originalImageData:l,canvasEl:s,ctx:u,filterBackend:this};return a.forEach(function(v){v.applyTo(g)}),(g.imageData.width!==i||g.imageData.height!==o)&&(s.width=g.imageData.width,s.height=g.imageData.height),u.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var r in h)this[r]=h[r]},createProgram:function(h,r,a){r=r||this.fragmentSource,a=a||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var c=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(c,a),h.compileShader(c),!h.getShaderParameter(c,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(c));var i=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(i,r),h.compileShader(i),!h.getShaderParameter(i,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(i));var o=h.createProgram();if(h.attachShader(o,c),h.attachShader(o,i),h.linkProgram(o),!h.getProgramParameter(o,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(o));var s=this.getAttributeLocations(h,o),u=this.getUniformLocations(h,o)||{};return u.uStepW=h.getUniformLocation(o,"uStepW"),u.uStepH=h.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:s,uniformLocations:u}},getAttributeLocations:function(h,r){return{aPosition:h.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,r,a){var c=r.aPosition,i=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,i),h.enableVertexAttribArray(c),h.vertexAttribPointer(c,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var r=h.context,a,c;h.passes>1?(a=h.destinationWidth,c=h.destinationHeight,(h.sourceWidth!==a||h.sourceHeight!==c)&&(r.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(r,a,c)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(h){h.passes--,h.pass++;var r=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=r},isNeutralState:function(){var h=this.mainParameter,r=e.Image.filters[this.type].prototype;if(h)if(Array.isArray(r[h])){for(var a=r[h].length;a--;)if(this[h][a]!==r[h][a])return!1;return!0}else return r[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var r=h.context,a=this.retrieveShader(h);h.pass===0&&h.originalTexture?r.bindTexture(r.TEXTURE_2D,h.originalTexture):r.bindTexture(r.TEXTURE_2D,h.sourceTexture),r.useProgram(a.program),this.sendAttributeData(r,a.attributeLocations,h.aPosition),r.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),r.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(r,a.uniformLocations),r.viewport(0,0,h.destinationWidth,h.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,r,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,r),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,r){h.activeTexture(r),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var r=document.createElement("canvas");r.width=h.sourceWidth,r.height=h.sourceHeight,h.helpLayer=r}},toObject:function(){var h={type:this.type},r=this.mainParameter;return r&&(h[r]=this[r]),h},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(h,r){var a=new e.Image.filters[h.type](h);return r&&r(a),a},function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.ColorMatrix=c(a.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var o=i.imageData,s=o.data,u=s.length,d=this.matrix,l,g,v,b,_,w=this.colorsOnly;for(_=0;_<u;_+=4)l=s[_],g=s[_+1],v=s[_+2],w?(s[_]=l*d[0]+g*d[1]+v*d[2]+d[4]*255,s[_+1]=l*d[5]+g*d[6]+v*d[7]+d[9]*255,s[_+2]=l*d[10]+g*d[11]+v*d[12]+d[14]*255):(b=s[_+3],s[_]=l*d[0]+g*d[1]+v*d[2]+b*d[3]+d[4]*255,s[_+1]=l*d[5]+g*d[6]+v*d[7]+b*d[8]+d[9]*255,s[_+2]=l*d[10]+g*d[11]+v*d[12]+b*d[13]+d[14]*255,s[_+3]=l*d[15]+g*d[16]+v*d[17]+b*d[18]+d[19]*255)},getUniformLocations:function(i,o){return{uColorMatrix:i.getUniformLocation(o,"uColorMatrix"),uConstants:i.getUniformLocation(o,"uConstants")}},sendUniformData:function(i,o){var s=this.matrix,u=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],d=[s[4],s[9],s[14],s[19]];i.uniformMatrix4fv(o.uColorMatrix,!1,u),i.uniform4fv(o.uConstants,d)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Brightness=c(a.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var o=i.imageData,s=o.data,u,d=s.length,l=Math.round(this.brightness*255);for(u=0;u<d;u+=4)s[u]=s[u]+l,s[u+1]=s[u+1]+l,s[u+2]=s[u+2]+l}},getUniformLocations:function(i,o){return{uBrightness:i.getUniformLocation(o,"uBrightness")}},sendUniformData:function(i,o){i.uniform1f(o.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.Image.filters,i=r.util.createClass;c.Convolute=i(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var s=Math.sqrt(this.matrix.length),u=this.type+"_"+s+"_"+(this.opaque?1:0),d=this.fragmentSource[u];return o.programCache.hasOwnProperty(u)||(o.programCache[u]=this.createProgram(o.context,d)),o.programCache[u]},applyTo2d:function(o){var s=o.imageData,u=s.data,d=this.matrix,l=Math.round(Math.sqrt(d.length)),g=Math.floor(l/2),v=s.width,b=s.height,_=o.ctx.createImageData(v,b),w=_.data,S=this.opaque?1:0,T,x,D,N,W,k,q,K,ne,se,oe,ae,I;for(oe=0;oe<b;oe++)for(se=0;se<v;se++){for(W=(oe*v+se)*4,T=0,x=0,D=0,N=0,I=0;I<l;I++)for(ae=0;ae<l;ae++)q=oe+I-g,k=se+ae-g,!(q<0||q>=b||k<0||k>=v)&&(K=(q*v+k)*4,ne=d[I*l+ae],T+=u[K]*ne,x+=u[K+1]*ne,D+=u[K+2]*ne,S||(N+=u[K+3]*ne));w[W]=T,w[W+1]=x,w[W+2]=D,S?w[W+3]=u[W+3]:w[W+3]=N}o.imageData=_},getUniformLocations:function(o,s){return{uMatrix:o.getUniformLocation(s,"uMatrix"),uOpaque:o.getUniformLocation(s,"uOpaque"),uHalfSize:o.getUniformLocation(s,"uHalfSize"),uSize:o.getUniformLocation(s,"uSize")}},sendUniformData:function(o,s){o.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Grayscale=c(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var o=i.imageData,s=o.data,u,d=s.length,l,g=this.mode;for(u=0;u<d;u+=4)g==="average"?l=(s[u]+s[u+1]+s[u+2])/3:g==="lightness"?l=(Math.min(s[u],s[u+1],s[u+2])+Math.max(s[u],s[u+1],s[u+2]))/2:g==="luminosity"&&(l=.21*s[u]+.72*s[u+1]+.07*s[u+2]),s[u]=l,s[u+1]=l,s[u+2]=l},retrieveShader:function(i){var o=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(o)){var s=this.fragmentSource[this.mode];i.programCache[o]=this.createProgram(i.context,s)}return i.programCache[o]},getUniformLocations:function(i,o){return{uMode:i.getUniformLocation(o,"uMode")}},sendUniformData:function(i,o){var s=1;i.uniform1i(o.uMode,s)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Invert=c(a.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var o=i.imageData,s=o.data,u,d=s.length;for(u=0;u<d;u+=4)s[u]=255-s[u],s[u+1]=255-s[u+1],s[u+2]=255-s[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,o){return{uInvert:i.getUniformLocation(o,"uInvert")}},sendUniformData:function(i,o){i.uniform1i(o.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.Image.filters,i=r.util.createClass;c.Noise=i(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var s=o.imageData,u=s.data,d,l=u.length,g=this.noise,v;for(d=0,l=u.length;d<l;d+=4)v=(.5-Math.random())*g,u[d]+=v,u[d+1]+=v,u[d+2]+=v}},getUniformLocations:function(o,s){return{uNoise:o.getUniformLocation(s,"uNoise"),uSeed:o.getUniformLocation(s,"uSeed")}},sendUniformData:function(o,s){o.uniform1f(s.uNoise,this.noise/255),o.uniform1f(s.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Pixelate=c(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var o=i.imageData,s=o.data,u=o.height,d=o.width,l,g,v,b,_,w,S,T,x,D,N;for(g=0;g<u;g+=this.blocksize)for(v=0;v<d;v+=this.blocksize)for(l=g*4*d+v*4,b=s[l],_=s[l+1],w=s[l+2],S=s[l+3],D=Math.min(g+this.blocksize,u),N=Math.min(v+this.blocksize,d),T=g;T<D;T++)for(x=v;x<N;x++)l=T*4*d+x*4,s[l]=b,s[l+1]=_,s[l+2]=w,s[l+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,o){return{uBlocksize:i.getUniformLocation(o,"uBlocksize"),uStepW:i.getUniformLocation(o,"uStepW"),uStepH:i.getUniformLocation(o,"uStepH")}},sendUniformData:function(i,o){i.uniform1f(o.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.extend,c=r.Image.filters,i=r.util.createClass;c.RemoveColor=i(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var s=o.imageData,u=s.data,d,l=this.distance*255,g,v,b,_=new r.Color(this.color).getSource(),w=[_[0]-l,_[1]-l,_[2]-l],S=[_[0]+l,_[1]+l,_[2]+l];for(d=0;d<u.length;d+=4)g=u[d],v=u[d+1],b=u[d+2],g>w[0]&&v>w[1]&&b>w[2]&&g<S[0]&&v<S[1]&&b<S[2]&&(u[d+3]=0)},getUniformLocations:function(o,s){return{uLow:o.getUniformLocation(s,"uLow"),uHigh:o.getUniformLocation(s,"uHigh")}},sendUniformData:function(o,s){var u=new r.Color(this.color).getSource(),d=parseFloat(this.distance),l=[0+u[0]/255-d,0+u[1]/255-d,0+u[2]/255-d,1],g=[u[0]/255+d,u[1]/255+d,u[2]/255+d,1];o.uniform4fv(s.uLow,l),o.uniform4fv(s.uHigh,g)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in i)a[o]=c(a.ColorMatrix,{type:o,matrix:i[o],mainParameter:!1,colorsOnly:!0}),r.Image.filters[o].fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric,a=r.Image.filters,c=r.util.createClass;a.BlendColor=c(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var o=this.type+"_"+this.mode,s;return i.programCache.hasOwnProperty(o)||(s=this.buildSource(this.mode),i.programCache[o]=this.createProgram(i.context,s)),i.programCache[o]},applyTo2d:function(i){var o=i.imageData,s=o.data,u=s.length,d,l,g,v,b,_,w,S=1-this.alpha;w=new r.Color(this.color).getSource(),d=w[0]*this.alpha,l=w[1]*this.alpha,g=w[2]*this.alpha;for(var T=0;T<u;T+=4)switch(v=s[T],b=s[T+1],_=s[T+2],this.mode){case"multiply":s[T]=v*d/255,s[T+1]=b*l/255,s[T+2]=_*g/255;break;case"screen":s[T]=255-(255-v)*(255-d)/255,s[T+1]=255-(255-b)*(255-l)/255,s[T+2]=255-(255-_)*(255-g)/255;break;case"add":s[T]=v+d,s[T+1]=b+l,s[T+2]=_+g;break;case"diff":case"difference":s[T]=Math.abs(v-d),s[T+1]=Math.abs(b-l),s[T+2]=Math.abs(_-g);break;case"subtract":s[T]=v-d,s[T+1]=b-l,s[T+2]=_-g;break;case"darken":s[T]=Math.min(v,d),s[T+1]=Math.min(b,l),s[T+2]=Math.min(_,g);break;case"lighten":s[T]=Math.max(v,d),s[T+1]=Math.max(b,l),s[T+2]=Math.max(_,g);break;case"overlay":s[T]=d<128?2*v*d/255:255-2*(255-v)*(255-d)/255,s[T+1]=l<128?2*b*l/255:255-2*(255-b)*(255-l)/255,s[T+2]=g<128?2*_*g/255:255-2*(255-_)*(255-g)/255;break;case"exclusion":s[T]=d+v-2*d*v/255,s[T+1]=l+b-2*l*b/255,s[T+2]=g+_-2*g*_/255;break;case"tint":s[T]=d+v*S,s[T+1]=l+b*S,s[T+2]=g+_*S}},getUniformLocations:function(i,o){return{uColor:i.getUniformLocation(o,"uColor")}},sendUniformData:function(i,o){var s=new r.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,i.uniform4fv(o.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric,a=r.Image.filters,c=r.util.createClass;a.BlendImage=c(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var o=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(o)||(i.programCache[o]=this.createProgram(i.context,s)),i.programCache[o]},applyToWebGL:function(i){var o=i.context,s=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(o,s,o.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(i,o){return i.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var i=this.image,o=i._element.width,s=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/o,-i.top/s,1]},applyTo2d:function(i){var o=i.imageData,s=i.filterBackend.resources,u=o.data,d=u.length,l=o.width,g=o.height,v,b,_,w,S,T,x,D,N,W,k=this.image,q;s.blendImage||(s.blendImage=r.util.createCanvasElement()),N=s.blendImage,W=N.getContext("2d"),N.width!==l||N.height!==g?(N.width=l,N.height=g):W.clearRect(0,0,l,g),W.setTransform(k.scaleX,0,0,k.scaleY,k.left,k.top),W.drawImage(k._element,0,0,l,g),q=W.getImageData(0,0,l,g).data;for(var K=0;K<d;K+=4)switch(S=u[K],T=u[K+1],x=u[K+2],D=u[K+3],v=q[K],b=q[K+1],_=q[K+2],w=q[K+3],this.mode){case"multiply":u[K]=S*v/255,u[K+1]=T*b/255,u[K+2]=x*_/255,u[K+3]=D*w/255;break;case"mask":u[K+3]=w;break}},getUniformLocations:function(i,o){return{uTransformMatrix:i.getUniformLocation(o,"uTransformMatrix"),uImage:i.getUniformLocation(o,"uImage")}},sendUniformData:function(i,o){var s=this.calculateMatrix();i.uniform1i(o.uImage,1),i.uniformMatrix3fv(o.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(i,o){r.Image.fromObject(i.image,function(s){var u=r.util.object.clone(i);u.image=s,o(new r.Image.filters.BlendImage(u))})}}(t),function(h){var r=h.fabric||(h.fabric={}),a=Math.pow,c=Math.floor,i=Math.sqrt,o=Math.abs,s=Math.round,u=Math.sin,d=Math.ceil,l=r.Image.filters,g=r.util.createClass;l.Resize=g(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,b){return{uDelta:v.getUniformLocation(b,"uDelta"),uTaps:v.getUniformLocation(b,"uTaps")}},sendUniformData:function(v,b){v.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(v){var b=this.getFilterWindow(),_=this.type+"_"+b;if(!v.programCache.hasOwnProperty(_)){var w=this.generateShader(b);v.programCache[_]=this.createProgram(v.context,w)}return v.programCache[_]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,_=this.getFilterWindow(),w=new Array(_),S=1;S<=_;S++)w[S-1]=v(S*b);return w},generateShader:function(w){for(var b=new Array(w),_=this.fragmentSourceTOP,w,S=1;S<=w;S++)b[S-1]=S+".0 * uDelta";return _+="uniform float uTaps["+w+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,b.forEach(function(T,x){_+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+x+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+x+`];
`,_+="  sum += 2.0 * uTaps["+x+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(b){if(b>=v||b<=-v)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var _=b/v;return u(b)/b*u(_)/_}},applyTo2d:function(v){var b=v.imageData,_=this.scaleX,w=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/w;var S=b.width,T=b.height,x=s(S*_),D=s(T*w),N;this.resizeType==="sliceHack"?N=this.sliceByTwo(v,S,T,x,D):this.resizeType==="hermite"?N=this.hermiteFastResize(v,S,T,x,D):this.resizeType==="bilinear"?N=this.bilinearFiltering(v,S,T,x,D):this.resizeType==="lanczos"&&(N=this.lanczosResize(v,S,T,x,D)),v.imageData=N},sliceByTwo:function(v,b,_,w,S){var T=v.imageData,x=.5,D=!1,N=!1,W=b*x,k=_*x,q=r.filterBackend.resources,K,ne,se=0,oe=0,ae=b,I=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),K=q.sliceByTwo,(K.width<b*1.5||K.height<_)&&(K.width=b*1.5,K.height=_),ne=K.getContext("2d"),ne.clearRect(0,0,b*1.5,_),ne.putImageData(T,0,0),w=c(w),S=c(S);!D||!N;)b=W,_=k,w<c(W*x)?W=c(W*x):(W=w,D=!0),S<c(k*x)?k=c(k*x):(k=S,N=!0),ne.drawImage(K,se,oe,b,_,ae,I,W,k),se=ae,oe=I,I+=k;return ne.getImageData(se,oe,w,S)},lanczosResize:function(v,b,_,w,S){function T(P){var j,U,A,E,M,R,J,B,G,V,Q;for(I.x=(P+.5)*k,H.x=c(I.x),j=0;j<S;j++){for(I.y=(j+.5)*q,H.y=c(I.y),M=0,R=0,J=0,B=0,G=0,U=H.x-se;U<=H.x+se;U++)if(!(U<0||U>=b)){V=c(1e3*o(U-I.x)),ae[V]||(ae[V]={});for(var Y=H.y-oe;Y<=H.y+oe;Y++)Y<0||Y>=_||(Q=c(1e3*o(Y-I.y)),ae[V][Q]||(ae[V][Q]=W(i(a(V*K,2)+a(Q*ne,2))/1e3)),A=ae[V][Q],A>0&&(E=(Y*b+U)*4,M+=A,R+=A*x[E],J+=A*x[E+1],B+=A*x[E+2],G+=A*x[E+3]))}E=(j*w+P)*4,N[E]=R/M,N[E+1]=J/M,N[E+2]=B/M,N[E+3]=G/M}return++P<w?T(P):D}var x=v.imageData.data,D=v.ctx.createImageData(w,S),N=D.data,W=this.lanczosCreate(this.lanczosLobes),k=this.rcpScaleX,q=this.rcpScaleY,K=2/this.rcpScaleX,ne=2/this.rcpScaleY,se=d(k*this.lanczosLobes/2),oe=d(q*this.lanczosLobes/2),ae={},I={},H={};return T(0)},bilinearFiltering:function(v,b,_,w,S){var T,x,D,N,W,k,q,K,ne,se,oe,ae,I=0,H,P=this.rcpScaleX,j=this.rcpScaleY,U=4*(b-1),A=v.imageData,E=A.data,M=v.ctx.createImageData(w,S),R=M.data;for(q=0;q<S;q++)for(K=0;K<w;K++)for(W=c(P*K),k=c(j*q),ne=P*K-W,se=j*q-k,H=4*(k*b+W),oe=0;oe<4;oe++)T=E[H+oe],x=E[H+4+oe],D=E[H+U+oe],N=E[H+U+4+oe],ae=T*(1-ne)*(1-se)+x*ne*(1-se)+D*se*(1-ne)+N*ne*se,R[I++]=ae;return M},hermiteFastResize:function(v,b,_,w,S){for(var T=this.rcpScaleX,x=this.rcpScaleY,D=d(T/2),N=d(x/2),W=v.imageData,k=W.data,q=v.ctx.createImageData(w,S),K=q.data,ne=0;ne<S;ne++)for(var se=0;se<w;se++){for(var oe=(se+ne*w)*4,ae=0,I=0,H=0,P=0,j=0,U=0,A=0,E=(ne+.5)*x,M=c(ne*x);M<(ne+1)*x;M++)for(var R=o(E-(M+.5))/N,J=(se+.5)*T,B=R*R,G=c(se*T);G<(se+1)*T;G++){var V=o(J-(G+.5))/D,Q=i(B+V*V);Q>1&&Q<-1||(ae=2*Q*Q*Q-3*Q*Q+1,ae>0&&(V=4*(G+M*b),A+=ae*k[V+3],H+=ae,k[V+3]<255&&(ae=ae*k[V+3]/250),P+=ae*k[V],j+=ae*k[V+1],U+=ae*k[V+2],I+=ae))}K[oe]=P/I,K[oe+1]=j/I,K[oe+2]=U/I,K[oe+3]=A/H}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Contrast=c(a.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var o=i.imageData,s,d,u=o.data,d=u.length,l=Math.floor(this.contrast*255),g=259*(l+255)/(255*(259-l));for(s=0;s<d;s+=4)u[s]=g*(u[s]-128)+128,u[s+1]=g*(u[s+1]-128)+128,u[s+2]=g*(u[s+2]-128)+128}},getUniformLocations:function(i,o){return{uContrast:i.getUniformLocation(o,"uContrast")}},sendUniformData:function(i,o){i.uniform1f(o.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Saturation=c(a.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var o=i.imageData,s=o.data,u=s.length,d=-this.saturation,l,g;for(l=0;l<u;l+=4)g=Math.max(s[l],s[l+1],s[l+2]),s[l]+=g!==s[l]?(g-s[l])*d:0,s[l+1]+=g!==s[l+1]?(g-s[l+1])*d:0,s[l+2]+=g!==s[l+2]?(g-s[l+2])*d:0}},getUniformLocations:function(i,o){return{uSaturation:i.getUniformLocation(o,"uSaturation")}},sendUniformData:function(i,o){i.uniform1f(o.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Vibrance=c(a.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(i){if(this.vibrance!==0){var o=i.imageData,s=o.data,u=s.length,d=-this.vibrance,l,g,v,b;for(l=0;l<u;l+=4)g=Math.max(s[l],s[l+1],s[l+2]),v=(s[l]+s[l+1]+s[l+2])/3,b=Math.abs(g-v)*2/255*d,s[l]+=g!==s[l]?(g-s[l])*b:0,s[l+1]+=g!==s[l+1]?(g-s[l+1])*b:0,s[l+2]+=g!==s[l+2]?(g-s[l+2])*b:0}},getUniformLocations:function(i,o){return{uVibrance:i.getUniformLocation(o,"uVibrance")}},sendUniformData:function(i,o){i.uniform1f(o.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Blur=c(a.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var o=i.filterBackend.resources,s,u,d=i.imageData.width,l=i.imageData.height;o.blurLayer1||(o.blurLayer1=r.util.createCanvasElement(),o.blurLayer2=r.util.createCanvasElement()),s=o.blurLayer1,u=o.blurLayer2,(s.width!==d||s.height!==l)&&(u.width=s.width=d,u.height=s.height=l);var g=s.getContext("2d"),v=u.getContext("2d"),b=15,_,w,S,T,x=this.blur*.06*.5;for(g.putImageData(i.imageData,0,0),v.clearRect(0,0,d,l),T=-b;T<=b;T++)_=(Math.random()-.5)/4,w=T/b,S=x*w*d+_,v.globalAlpha=1-Math.abs(w),v.drawImage(s,S,_),g.drawImage(u,0,0),v.globalAlpha=1,v.clearRect(0,0,u.width,u.height);for(T=-b;T<=b;T++)_=(Math.random()-.5)/4,w=T/b,S=x*w*l+_,v.globalAlpha=1-Math.abs(w),v.drawImage(s,_,S),g.drawImage(u,0,0),v.globalAlpha=1,v.clearRect(0,0,u.width,u.height);i.ctx.drawImage(s,0,0);var D=i.ctx.getImageData(0,0,s.width,s.height);return g.globalAlpha=1,g.clearRect(0,0,s.width,s.height),D},getUniformLocations:function(i,o){return{delta:i.getUniformLocation(o,"uDelta")}},sendUniformData:function(i,o){var s=this.chooseRightDelta();i.uniform2fv(o.delta,s)},chooseRightDelta:function(){var i=1,o=[0,0],s;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),s=i*this.blur*.12,this.horizontal?o[0]=s:o[1]=s,o}}),a.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Gamma=c(a.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var o=i.imageData,s=o.data,u=this.gamma,d=s.length,l=1/u[0],g=1/u[1],v=1/u[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,d=256;b<d;b++)this.rVals[b]=Math.pow(b/255,l)*255,this.gVals[b]=Math.pow(b/255,g)*255,this.bVals[b]=Math.pow(b/255,v)*255;for(b=0,d=s.length;b<d;b+=4)s[b]=this.rVals[s[b]],s[b+1]=this.gVals[s[b+1]],s[b+2]=this.bVals[s[b+2]]},getUniformLocations:function(i,o){return{uGamma:i.getUniformLocation(o,"uGamma")}},sendUniformData:function(i,o){i.uniform3fv(o.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.Composed=c(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(i)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(i,o){var s=i.subFilters||[],u=s.map(function(l){return new r.Image.filters[l.type](l)}),d=new r.Image.filters.Composed({subFilters:u});return o&&o(d),d}}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.Image.filters,c=r.util.createClass;a.HueRotation=c(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,o=r.util.cos(i),s=r.util.sin(i),u=1/3,d=Math.sqrt(u)*s,l=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+l/3,this.matrix[1]=u*l-d,this.matrix[2]=u*l+d,this.matrix[5]=u*l+d,this.matrix[6]=o+u*l,this.matrix[7]=u*l-d,this.matrix[10]=u*l-d,this.matrix[11]=u*l+d,this.matrix[12]=o+u*l},isNeutralState:function(i){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,i)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),a=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(c),cacheProperties:r.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,o){this.styles=o?o.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=r.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,o,s,u,d,l,g,v=0,b=this._textLines.length;v<b;v++)if(!(this.textAlign!=="justify"&&(v===b-1||this.isEndOfWrapping(v)))&&(u=0,d=this._textLines[v],o=this.getLineWidth(v),o<this.width&&(g=this.textLines[v].match(this._reSpacesAndTabs)))){s=g.length,i=(this.width-o)/s;for(var _=0,w=d.length;_<=w;_++)l=this.__charBounds[v][_],this._reSpaceAndTab.test(d[_])?(l.width+=i,l.kernedWidth+=i,l.left+=u,u+=i):l.left+=u}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return i.width+=o*i.zoomX,i.height+=o*i.zoomY,i},_render:function(i){var o=this.path;o&&!o.isNotVisible()&&o._render(i),this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,o,s){i.textBaseline="alphabetic",i.font=this._getFontDeclaration(o,s)},calcTextWidth:function(){for(var i=this.getLineWidth(0),o=1,s=this._textLines.length;o<s;o++){var u=this.getLineWidth(o);u>i&&(i=u)}return i},_renderTextLine:function(i,o,s,u,d,l){this._renderChars(i,o,s,u,d,l)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,s,u=i.fillStyle,d,l,g=this._getLeftOffset(),v=this._getTopOffset(),b=0,_=0,w,S,T=this.path,x,D=0,N=this._textLines.length;D<N;D++){if(o=this.getHeightOfLine(D),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",D)){v+=o;continue}d=this._textLines[D],s=this._getLineLeftOffset(D),_=0,b=0,l=this.getValueOfPropertyAt(D,0,"textBackgroundColor");for(var W=0,k=d.length;W<k;W++)w=this.__charBounds[D][W],S=this.getValueOfPropertyAt(D,W,"textBackgroundColor"),T?(i.save(),i.translate(w.renderLeft,w.renderTop),i.rotate(w.angle),i.fillStyle=S,S&&i.fillRect(-w.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),w.width,o/this.lineHeight),i.restore()):S!==l?(x=g+s+b,this.direction==="rtl"&&(x=this.width-x-_),i.fillStyle=l,l&&i.fillRect(x,v,_,o/this.lineHeight),b=w.left,_=w.width,l=S):_+=w.kernedWidth;S&&!T&&(x=g+s+b,this.direction==="rtl"&&(x=this.width-x-_),i.fillStyle=S,i.fillRect(x,v,_,o/this.lineHeight)),v+=o}i.fillStyle=u,this._removeShadow(i)}},getFontCache:function(i){var o=i.fontFamily.toLowerCase();r.charWidthsCache[o]||(r.charWidthsCache[o]={});var s=r.charWidthsCache[o],u=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return s[u]||(s[u]={}),s[u]},_measureChar:function(i,o,s,u){var d=this.getFontCache(o),l=this._getFontDeclaration(o),g=this._getFontDeclaration(u),v=s+i,b=l===g,_,w,S,T=o.fontSize/this.CACHE_FONT_SIZE,x;if(s&&d[s]!==void 0&&(S=d[s]),d[i]!==void 0&&(x=_=d[i]),b&&d[v]!==void 0&&(w=d[v],x=w-S),_===void 0||S===void 0||w===void 0){var D=this.getMeasuringContext();this._setTextStyles(D,o,!0)}return _===void 0&&(x=_=D.measureText(i).width,d[i]=_),S===void 0&&b&&s&&(S=D.measureText(s).width,d[s]=S),b&&w===void 0&&(w=D.measureText(v).width,d[v]=w,x=w-S),{width:_*T,kernedWidth:x*T}},getHeightOfChar:function(i,o){return this.getValueOfPropertyAt(i,o,"fontSize")},measureLine:function(i){var o=this._measureLine(i);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(i){var o=0,s,u,d=this._textLines[i],l,g,v=0,b=new Array(d.length),_=0,w,S,T=this.path,x=this.pathSide==="right";for(this.__charBounds[i]=b,s=0;s<d.length;s++)u=d[s],g=this._getGraphemeBox(u,i,s,l),b[s]=g,o+=g.kernedWidth,l=u;if(b[s]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(S=T.segmentsInfo[T.segmentsInfo.length-1].length,w=r.util.getPointOnPath(T.path,0,T.segmentsInfo),w.x+=T.pathOffset.x,w.y+=T.pathOffset.y,this.textAlign){case"left":_=x?S-o:0;break;case"center":_=(S-o)/2;break;case"right":_=x?0:S-o;break}for(_+=this.pathStartOffset*(x?-1:1),s=x?d.length-1:0;x?s>=0:s<d.length;x?s--:s++)g=b[s],_>S?_%=S:_<0&&(_+=S),this._setGraphemeOnPath(_,g,w),_+=g.kernedWidth}return{width:o,numOfSpaces:v}},_setGraphemeOnPath:function(i,o,s){var u=i+o.kernedWidth/2,d=this.path,l=r.util.getPointOnPath(d.path,u,d.segmentsInfo);o.renderLeft=l.x-s.x,o.renderTop=l.y-s.y,o.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(i,o,s,u,d){var l=this.getCompleteStyleDeclaration(o,s),g=u?this.getCompleteStyleDeclaration(o,s-1):{},v=this._measureChar(i,l,u,g),b=v.kernedWidth,_=v.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),_+=w,b+=w);var S={width:_,left:0,height:l.fontSize,kernedWidth:b,deltaY:l.deltaY};if(s>0&&!d){var T=this.__charBounds[o][s-1];S.left=T.left+T.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var o=this._textLines[i],s=this.getHeightOfChar(i,0),u=1,d=o.length;u<d;u++)s=Math.max(this.getHeightOfChar(i,u),s);return this.__lineHeights[i]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,o=0,s=0,u=this._textLines.length;s<u;s++)i=this.getHeightOfLine(s),o+=s===u-1?i/this.lineHeight:i;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,o){i.save();for(var s=0,u=this._getLeftOffset(),d=this._getTopOffset(),l=0,g=this._textLines.length;l<g;l++){var v=this.getHeightOfLine(l),b=v/this.lineHeight,_=this._getLineLeftOffset(l);this._renderTextLine(o,i,this._textLines[l],u+_,d+s+b,l),s+=v}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,o,s,u,d,l){var g=this.getHeightOfLine(l),v=this.textAlign.indexOf("justify")!==-1,b,_,w="",S,T=0,x,D=this.path,N=!v&&this.charSpacing===0&&this.isEmptyStyles(l)&&!D,W=this.direction==="ltr",k=this.direction==="ltr"?1:-1,q;if(o.save(),d-=g*this._fontSizeFraction/this.lineHeight,N){o.canvas.setAttribute("dir",W?"ltr":"rtl"),o.direction=W?"ltr":"rtl",o.textAlign=W?"left":"right",this._renderChar(i,o,l,0,s.join(""),u,d,g),o.restore();return}for(var K=0,ne=s.length-1;K<=ne;K++)x=K===ne||this.charSpacing||D,w+=s[K],S=this.__charBounds[l][K],T===0?(u+=k*(S.kernedWidth-S.width),T+=S.width):T+=S.kernedWidth,v&&!x&&this._reSpaceAndTab.test(s[K])&&(x=!0),x||(b=b||this.getCompleteStyleDeclaration(l,K),_=this.getCompleteStyleDeclaration(l,K+1),x=this._hasStyleChanged(b,_)),x&&(D?(o.save(),o.translate(S.renderLeft,S.renderTop),o.rotate(S.angle),this._renderChar(i,o,l,K,w,-T/2,0,g),o.restore()):(q=u,o.canvas.setAttribute("dir",W?"ltr":"rtl"),o.direction=W?"ltr":"rtl",o.textAlign=W?"left":"right",this._renderChar(i,o,l,K,w,q,d,g)),w="",b=_,u+=k*T,T=0);o.restore()},_applyPatternGradientTransformText:function(i){var o=r.util.createCanvasElement(),s,u=this.width+this.strokeWidth,d=this.height+this.strokeWidth;return o.width=u,o.height=d,s=o.getContext("2d"),s.beginPath(),s.moveTo(0,0),s.lineTo(u,0),s.lineTo(u,d),s.lineTo(0,d),s.closePath(),s.translate(u/2,d/2),s.fillStyle=i.toLive(s),this._applyPatternGradientTransform(s,i),s.fill(),s.createPattern(o,"no-repeat")},handleFiller:function(i,o,s){var u,d;return s.toLive?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(u=-this.width/2,d=-this.height/2,i.translate(u,d),i[o]=this._applyPatternGradientTransformText(s),{offsetX:u,offsetY:d}):(i[o]=s.toLive(i,this),this._applyPatternGradientTransform(i,s)):(i[o]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,o){return i.lineWidth=o.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",o.stroke)},_setFillStyles:function(i,o){return this.handleFiller(i,"fillStyle",o.fill)},_renderChar:function(i,o,s,u,d,l,g){var v=this._getStyleDeclaration(s,u),b=this.getCompleteStyleDeclaration(s,u),_=i==="fillText"&&b.fill,w=i==="strokeText"&&b.stroke&&b.strokeWidth,S,T;!w&&!_||(o.save(),_&&(S=this._setFillStyles(o,b)),w&&(T=this._setStrokeStyles(o,b)),o.font=this._getFontDeclaration(b),v&&v.textBackgroundColor&&this._removeShadow(o),v&&v.deltaY&&(g+=v.deltaY),_&&o.fillText(d,l-S.offsetX,g-S.offsetY),w&&o.strokeText(d,l-T.offsetX,g-T.offsetY),o.restore())},setSuperscript:function(i,o){return this._setScript(i,o,this.superscript)},setSubscript:function(i,o){return this._setScript(i,o,this.subscript)},_setScript:function(i,o,s){var u=this.get2DCursorLocation(i,!0),d=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"fontSize"),l=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"deltaY"),g={fontSize:d*s.size,deltaY:l+d*s.baseline};return this.setSelectionStyles(g,i,o),this},_hasStyleChanged:function(i,o){return i.fill!==o.fill||i.stroke!==o.stroke||i.strokeWidth!==o.strokeWidth||i.fontSize!==o.fontSize||i.fontFamily!==o.fontFamily||i.fontWeight!==o.fontWeight||i.fontStyle!==o.fontStyle||i.deltaY!==o.deltaY},_hasStyleChangedForSvg:function(i,o){return this._hasStyleChanged(i,o)||i.overline!==o.overline||i.underline!==o.underline||i.linethrough!==o.linethrough},_getLineLeftOffset:function(i){var o=this.getLineWidth(i),s=this.width-o,u=this.textAlign,d=this.direction,g,l=0,g=this.isEndOfWrapping(i);return u==="justify"||u==="justify-center"&&!g||u==="justify-right"&&!g||u==="justify-left"&&!g?0:(u==="center"&&(l=s/2),u==="right"&&(l=s),u==="justify-center"&&(l=s/2),u==="justify-right"&&(l=s),d==="rtl"&&(l-=s),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i])return this.__lineWidths[i];var o,s=this._textLines[i],u;return s===""?o=0:(u=this.measureLine(i),o=u.width),this.__lineWidths[i]=o,o},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,o,s){var u=this._getStyleDeclaration(i,o);return u&&typeof u[s]!="undefined"?u[s]:this[s]},_renderTextDecoration:function(i,o){if(!(!this[o]&&!this.styleHas(o))){for(var s,u,d,l,g,v,b,_,w=this._getLeftOffset(),S=this._getTopOffset(),T,x,D,N,W,k,q,K,ne=this.path,se=this._getWidthOfCharSpacing(),oe=this.offsets[o],ae=0,I=this._textLines.length;ae<I;ae++){if(s=this.getHeightOfLine(ae),!this[o]&&!this.styleHas(o,ae)){S+=s;continue}b=this._textLines[ae],k=s/this.lineHeight,l=this._getLineLeftOffset(ae),x=0,D=0,_=this.getValueOfPropertyAt(ae,0,o),K=this.getValueOfPropertyAt(ae,0,"fill"),T=S+k*(1-this._fontSizeFraction),u=this.getHeightOfChar(ae,0),g=this.getValueOfPropertyAt(ae,0,"deltaY");for(var H=0,P=b.length;H<P;H++)if(N=this.__charBounds[ae][H],W=this.getValueOfPropertyAt(ae,H,o),q=this.getValueOfPropertyAt(ae,H,"fill"),d=this.getHeightOfChar(ae,H),v=this.getValueOfPropertyAt(ae,H,"deltaY"),ne&&W&&q)i.save(),i.fillStyle=K,i.translate(N.renderLeft,N.renderTop),i.rotate(N.angle),i.fillRect(-N.kernedWidth/2,oe*d+v,N.kernedWidth,this.fontSize/15),i.restore();else if((W!==_||q!==K||d!==u||v!==g)&&D>0){var j=w+l+x;this.direction==="rtl"&&(j=this.width-j-D),_&&K&&(i.fillStyle=K,i.fillRect(j,T+oe*u+g,D,this.fontSize/15)),x=N.left,D=N.width,_=W,K=q,u=d,g=v}else D+=N.kernedWidth;var j=w+l+x;this.direction==="rtl"&&(j=this.width-j-D),i.fillStyle=q,W&&q&&i.fillRect(j,T+oe*u+g,D-se,this.fontSize/15),S+=s}this._removeShadow(i)}},_getFontDeclaration:function(i,o){var s=i||this,u=this.fontFamily,d=r.Text.genericFonts.indexOf(u.toLowerCase())>-1,l=u===void 0||u.indexOf("'")>-1||u.indexOf(",")>-1||u.indexOf('"')>-1||d?s.fontFamily:'"'+s.fontFamily+'"';return[r.isLikelyNode?s.fontWeight:s.fontStyle,r.isLikelyNode?s.fontStyle:s.fontWeight,o?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",l].join(" ")},render:function(i){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i))},_splitTextIntoLines:function(i){for(var o=i.split(this._reNewline),s=new Array(o.length),u=[`
`],d=[],l=0;l<o.length;l++)s[l]=r.util.string.graphemeSplit(o[l]),d=d.concat(s[l],u);return d.pop(),{_unwrappedLines:s,lines:o,graphemeText:d,graphemeLines:s}},toObject:function(i){var o=c.concat(i),s=this.callSuper("toObject",o);return s.styles=a(this.styles,!0),s.path&&(s.path=this.path.toObject()),s},set:function(i,o){this.callSuper("set",i,o);var s=!1,u=!1;if(typeof i=="object")for(var d in i)d==="path"&&this.setPathInfo(),s=s||this._dimensionAffectingProps.indexOf(d)!==-1,u=u||d==="path";else s=this._dimensionAffectingProps.indexOf(i)!==-1,u=i==="path";return u&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(i,o,s){if(!i)return o(null);var u=r.parseAttributes(i,r.Text.ATTRIBUTE_NAMES),d=u.textAnchor||"left";if(s=r.util.object.extend(s?a(s):{},u),s.top=s.top||0,s.left=s.left||0,u.textDecoration){var l=u.textDecoration;l.indexOf("underline")!==-1&&(s.underline=!0),l.indexOf("overline")!==-1&&(s.overline=!0),l.indexOf("line-through")!==-1&&(s.linethrough=!0),delete s.textDecoration}"dx"in u&&(s.left+=u.dx),"dy"in u&&(s.top+=u.dy),"fontSize"in s||(s.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in i?g=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(g=i.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=s.strokeWidth;s.strokeWidth=0;var b=new r.Text(g,s),_=b.getScaledHeight()/b.height,w=(b.height+b.strokeWidth)*b.lineHeight-b.height,S=w*_,T=b.getScaledHeight()+S,x=0;d==="center"&&(x=b.getScaledWidth()/2),d==="right"&&(x=b.getScaledWidth()),b.set({left:b.left-x,top:b.top-(T-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof v!="undefined"?v:1}),o(b)},r.Text.fromObject=function(i,o){var s=a(i),u=i.path;return delete s.path,r.Object._fromObject("Text",s,function(d){u?r.Object._fromObject("Path",u,function(l){d.set("path",l),o(d)},"path"):o(d)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h!="undefined"&&!this.styles[h])return!0;var r=typeof h=="undefined"?this.styles:{line:this.styles[h]};for(var a in r)for(var c in r[a])for(var i in r[a][c])return!1;return!0},styleHas:function(h,r){if(!this.styles||!h||h===""||typeof r!="undefined"&&!this.styles[r])return!1;var a=typeof r=="undefined"?this.styles:{0:this.styles[r]};for(var c in a)for(var i in a[c])if(typeof a[c][i][h]!="undefined")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var r=this.styles,a=0,c,i,o=!0,s=0,u;for(var d in r){c=0;for(var l in r[d]){var u=r[d][l],g=u.hasOwnProperty(h);a++,g?(i?u[h]!==i&&(o=!1):i=u[h],u[h]===this[h]&&delete u[h]):o=!1,Object.keys(u).length!==0?c++:delete r[d][l]}c===0&&delete r[d]}for(var v=0;v<this._textLines.length;v++)s+=this._textLines[v].length;o&&a===s&&(this[h]=i,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var r=this.styles,a,c,i;for(c in r){a=r[c];for(i in a)delete a[i][h],Object.keys(a[i]).length===0&&delete a[i];Object.keys(a).length===0&&delete r[c]}}},_extendStyles:function(h,r){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),r)},get2DCursorLocation:function(h,r){typeof h=="undefined"&&(h=this.selectionStart);for(var a=r?this._unwrappedTextLines:this._textLines,c=a.length,i=0;i<c;i++){if(h<=a[i].length)return{lineIndex:i,charIndex:h};h-=a[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:a[i-1].length<h?a[i-1].length:h}},getSelectionStyles:function(h,r,a){typeof h=="undefined"&&(h=this.selectionStart||0),typeof r=="undefined"&&(r=this.selectionEnd||h);for(var c=[],i=h;i<r;i++)c.push(this.getStyleAtPosition(i,a));return c},getStyleAtPosition:function(h,r){var a=this.get2DCursorLocation(h),c=r?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex);return c||{}},setSelectionStyles:function(h,r,a){typeof r=="undefined"&&(r=this.selectionStart||0),typeof a=="undefined"&&(a=this.selectionEnd||r);for(var c=r;c<a;c++)this._extendStyles(c,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,r){var a=this.styles&&this.styles[h];return a?a[r]:null},getCompleteStyleDeclaration:function(h,r){for(var a=this._getStyleDeclaration(h,r)||{},c={},i,o=0;o<this._styleProperties.length;o++)i=this._styleProperties[o],c[i]=typeof a[i]=="undefined"?this[i]:a[i];return c},_setStyleDeclaration:function(h,r,a){this.styles[h][r]=a},_deleteStyleDeclaration:function(h,r){delete this.styles[h][r]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,a){this.callSuper("initialize",r,a),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,a){this[r]!==a&&(this._fireSelectionChanged(),this[r]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this.canvas.contextTop,c=this.canvas.viewportTransform;a.save(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(a),this._clearTextArea(a),r||a.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,a):this.renderSelection(r,a),a.restore()}},_clearTextArea:function(r){var a=this.width+4,c=this.height+4;r.clearRect(-a/2,-c/2,a,c)},_getCursorBoundaries:function(r){typeof r=="undefined"&&(r=this.selectionStart);var a=this._getLeftOffset(),c=this._getTopOffset(),i=this._getCursorBoundariesOffsets(r);return{left:a,top:c,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,c,i,o=0,s=0,u,d=this.get2DCursorLocation(r);i=d.charIndex,c=d.lineIndex;for(var l=0;l<c;l++)o+=this.getHeightOfLine(l);a=this._getLineLeftOffset(c);var g=this.__charBounds[c][i];return g&&(s=g.left),this.charSpacing!==0&&i===this._textLines[c].length&&(s-=this._getWidthOfCharSpacing()),u={top:o,left:a+(s>0?s:0)},this.direction==="rtl"&&(u.left*=-1),this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(r,a){var c=this.get2DCursorLocation(),i=c.lineIndex,o=c.charIndex>0?c.charIndex-1:0,s=this.getValueOfPropertyAt(i,o,"fontSize"),u=this.scaleX*this.canvas.getZoom(),d=this.cursorWidth/u,l=r.topOffset,g=this.getValueOfPropertyAt(i,o,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,o,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(r.left+r.leftOffset-d/2,l+r.top+g,d,s)},renderSelection:function(r,a){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,s=this.get2DCursorLocation(c),u=this.get2DCursorLocation(i),d=s.lineIndex,l=u.lineIndex,g=s.charIndex<0?0:s.charIndex,v=u.charIndex<0?0:u.charIndex,b=d;b<=l;b++){var _=this._getLineLeftOffset(b)||0,w=this.getHeightOfLine(b),S=0,T=0,x=0;if(b===d&&(T=this.__charBounds[d][g].left),b>=d&&b<l)x=o&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===l)if(v===0)x=this.__charBounds[l][v].left;else{var D=this._getWidthOfCharSpacing();x=this.__charBounds[l][v-1].left+this.__charBounds[l][v-1].width-D}S=w,(this.lineHeight<1||b===l&&this.lineHeight>1)&&(w/=this.lineHeight);var N=r.left+_+T,W=x-T,k=w,q=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",k=1,q=w):a.fillStyle=this.selectionColor,this.direction==="rtl"&&(N=this.width-N-W),a.fillRect(N,r.top+r.topOffset+q,W,k),r.topOffset+=S}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),a=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:a}}}),e.IText.fromObject=function(r,a){if(h(r),r.styles)for(var c in r.styles)for(var i in r.styles[c])h(r.styles[c][i]);e.Object._fromObject("IText",r,a,"text")}}(),function(){var h=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var a=r.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,r._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var a=r.canvas;a&&(a._iTextInstances=a._iTextInstances||[],e.util.removeFromArray(a._iTextInstances,r),a._iTextInstances.length===0&&(a._hasITextHandlers=!1,r._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(a){a.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,a,c,i){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",a,{duration:c,onComplete:function(){o.isAborted||r[i]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var a=this,c=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},c)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var a=0,c=r-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)a++,c--;for(;/\S/.test(this._text[c])&&c>-1;)a++,c--;return r-a},findWordBoundaryRight:function(r){var a=0,c=r;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)a++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)a++,c++;return r+a},findLineBoundaryLeft:function(r){for(var a=0,c=r-1;!/\n/.test(this._text[c])&&c>-1;)a++,c--;return r-a},findLineBoundaryRight:function(r){for(var a=0,c=r;!/\n/.test(this._text[c])&&c<this._text.length;)a++,c++;return r+a},searchWordBoundary:function(r,a){for(var c=this._text,i=this._reSpace.test(c[r])?r-1:r,o=c[i],s=e.reNonWord;!s.test(o)&&i>0&&i<c.length;)i+=a,o=c[i];return s.test(o)&&(i+=a===1?0:1),i},selectWord:function(r){r=r||this.selectionStart;var a=this.searchWordBoundary(r,-1),c=this.searchWordBoundary(r,1);this.selectionStart=a,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var a=this.findLineBoundaryLeft(r),c=this.findLineBoundaryRight(r);return this.selectionStart=a,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){var a=this.getSelectionStartFromPointer(r.e),c=this.selectionStart,i=this.selectionEnd;(a!==this.__selectionStartOnMouseDown||c===i)&&(c===a||i===a)||(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,a,c){var i=c.slice(0,r),o=e.util.string.graphemeSplit(i).length;if(r===a)return{selectionStart:o,selectionEnd:o};var s=c.slice(r,a),u=e.util.string.graphemeSplit(s).length;return{selectionStart:o,selectionEnd:o+u}},fromGraphemeToStringSelection:function(r,a,c){var i=c.slice(0,r),o=i.join("").length;if(r===a)return{selectionStart:o,selectionEnd:o};var s=c.slice(r,a),u=s.join("").length;return{selectionStart:o,selectionEnd:o+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(r),c=this.get2DCursorLocation(r),i=c.lineIndex,o=c.charIndex,s=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,u=a.leftOffset,d=this.calcTransformMatrix(),l={x:a.left+u,y:a.top+a.topOffset+s},g=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,b=v.width/g,_=v.height/g,w=b-s,S=_-s,T=v.clientWidth/b,x=v.clientHeight/_;return l=e.util.transformPoint(l,d),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=T,l.y*=x,l.x<0&&(l.x=0),l.x>w&&(l.x=w),l.y<0&&(l.y=0),l.y>S&&(l.y=S),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,a){var c=this.get2DCursorLocation(r,!0),i=this.get2DCursorLocation(a,!0),o=c.lineIndex,s=c.charIndex,u=i.lineIndex,d=i.charIndex,l,g;if(o!==u){if(this.styles[o])for(l=s;l<this._unwrappedTextLines[o].length;l++)delete this.styles[o][l];if(this.styles[u])for(l=d;l<this._unwrappedTextLines[u].length;l++)g=this.styles[u][l],g&&(this.styles[o]||(this.styles[o]={}),this.styles[o][s+l-d]=g);for(l=o+1;l<=u;l++)delete this.styles[l];this.shiftLineStyles(u,o-u)}else if(this.styles[o]){g=this.styles[o];var v=d-s,b,_;for(l=s;l<d;l++)delete g[l];for(_ in this.styles[o])b=parseInt(_,10),b>=d&&(g[b-v]=g[_],delete g[_])}},shiftLineStyles:function(r,a){var c=h(this.styles);for(var i in this.styles){var o=parseInt(i,10);o>r&&(this.styles[o+a]=c[o],c[o-a]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,a,c,i){var o,s={},u=!1,d=this._unwrappedTextLines[r].length===a;c||(c=1),this.shiftLineStyles(r,c),this.styles[r]&&(o=this.styles[r][a===0?a:a-1]);for(var l in this.styles[r]){var g=parseInt(l,10);g>=a&&(u=!0,s[g-a]=this.styles[r][l],d&&a===0||delete this.styles[r][l])}var v=!1;for(u&&!d&&(this.styles[r+c]=s,v=!0),v&&c--;c>0;)i&&i[c-1]?this.styles[r+c]={0:h(i[c-1])}:o?this.styles[r+c]={0:h(o)}:delete this.styles[r+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(r,a,c,i){this.styles||(this.styles={});var o=this.styles[r],s=o?h(o):{};c||(c=1);for(var u in s){var d=parseInt(u,10);d>=a&&(o[d+c]=s[d],s[d-c]||delete o[d])}if(this._forceClearCache=!0,i){for(;c--;)!Object.keys(i[c]).length||(this.styles[r]||(this.styles[r]={}),this.styles[r][a+c]=h(i[c]));return}if(!!o)for(var l=o[a?a-1:1];l&&c--;)this.styles[r][a+c]=h(l)},insertNewStyleBlock:function(r,a,c){for(var i=this.get2DCursorLocation(a,!0),o=[0],s=0,u=0;u<r.length;u++)r[u]===`
`?(s++,o[s]=0):o[s]++;o[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,o[0],c),c=c&&c.slice(o[0]+1)),s&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+o[0],s);for(var u=1;u<s;u++)o[u]>0?this.insertCharStyleObject(i.lineIndex+u,0,o[u],c):c&&(this.styles[i.lineIndex+u][0]=c[0]),c=c&&c.slice(o[u]+1);o[u]>0&&this.insertCharStyleObject(i.lineIndex+u,0,o[u],c)},setSelectionStartEndWithShift:function(r,a,c){c<=r?(a===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=c):c>r&&c<a?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(a===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=c)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(!!this.canvas){this.__newClickTime=+new Date;var r=h.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var r=this.getSelectionStartFromPointer(h),a=this.selectionStart,c=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(a,c,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var r=this.getLocalPointer(h),a=0,c=0,i=0,o=0,s=0,u,d,l=0,g=this._textLines.length;l<g&&i<=r.y;l++)i+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));u=this._getLineLeftOffset(s),c=u*this.scaleX,d=this._textLines[s],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+c);for(var v=0,b=d.length;v<b&&(a=c,c+=this.__charBounds[s][v].kernedWidth*this.scaleX,c<=r.x);v++)o++;return this._getNewSelectionStartFromOffset(r,a,c,o,b)},_getNewSelectionStartFromOffset:function(h,r,a,c,i){var o=h.x-r,s=a-h.x,u=s>o||s<0?0:1,d=c+u;return this.flipX&&(d=i-d),d>this._text.length&&(d=this._text.length),d}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(!!this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in r)this[r[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var r=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,i=a.length,o,s,u=i-c,d=this.selectionStart,l=this.selectionEnd,g=d!==l,v,b,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=d>w.selectionStart;g?(o=this._text.slice(d,l),u+=l-d):i<c&&(S?o=this._text.slice(l+u,l):o=this._text.slice(d,d-u)),s=a.slice(w.selectionEnd-u,w.selectionEnd),o&&o.length&&(s.length&&(v=this.getSelectionStyles(d,d+1,!1),v=s.map(function(){return v[0]})),g?(b=d,_=l):S?(b=l-o.length,_=l):(b=l,_=l+o.length),this.removeStyleFromTo(b,_)),s.length&&(r&&s.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(s,d,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(h,r){var a=this._getLineLeftOffset(h),c;return r>0&&(c=this.__charBounds[h][r-1],a+=c.left+c.width),a},getDownCursorOffset:function(h,r){var a=this._getSelectionForOffset(h,r),c=this.get2DCursorLocation(a),i=c.lineIndex;if(i===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-a;var o=c.charIndex,s=this._getWidthBeforeCursor(i,o),u=this._getIndexOnLine(i+1,s),d=this._textLines[i].slice(o);return d.length+u+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(h,r){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,r){var a=this._getSelectionForOffset(h,r),c=this.get2DCursorLocation(a),i=c.lineIndex;if(i===0||h.metaKey||h.keyCode===33)return-a;var o=c.charIndex,s=this._getWidthBeforeCursor(i,o),u=this._getIndexOnLine(i-1,s),d=this._textLines[i].slice(0,o),l=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+u-d.length+(1-l)},_getIndexOnLine:function(h,r){for(var a=this._textLines[h],c=this._getLineLeftOffset(h),i=c,o=0,s,u,d=0,l=a.length;d<l;d++)if(s=this.__charBounds[h][d].width,i+=s,i>r){u=!0;var g=i-s,v=i,b=Math.abs(g-r),_=Math.abs(v-r);o=_<b?d:d-1;break}return u||(o=a.length-1),o},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,r){var a="get"+h+"CursorOffset",c=this[a](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var r=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,r,a){var c;if(h.altKey)c=this["findWordBoundary"+a](this[r]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)c=this["findLineBoundary"+a](this[r]);else return this[r]+=a==="Left"?-1:1,!0;if(typeof c!==void 0&&this[r]!==c)return this[r]=c,!0},_moveLeft:function(h,r){return this._move(h,r,"Left")},_moveRight:function(h,r){return this._move(h,r,"Right")},moveCursorLeftWithoutShift:function(h){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,r){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,r.shiftKey?a+="Shift":a+="outShift",this[a](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(h,r){typeof r=="undefined"&&(r=h+1),this.removeStyleFromTo(h,r),this._text.splice(h,r-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,r,a,c){typeof c=="undefined"&&(c=a),c>a&&this.removeStyleFromTo(a,c);var i=e.util.string.graphemeSplit(h);this.insertNewStyleBlock(i,a,r),this._text=[].concat(this._text.slice(0,a),i,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=e.util.toFixed,r=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var c=!0,i=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",a.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(a,c){var i=[],o=[],s=a,u;this._setSVGBg(o);for(var d=0,l=this._textLines.length;d<l;d++)u=this._getLineLeftOffset(d),(this.textBackgroundColor||this.styleHas("textBackgroundColor",d))&&this._setSVGTextLineBg(o,d,c+u,s),this._setSVGTextLineText(i,d,c+u,s),s+=this.getHeightOfLine(d);return{textSpans:i,textBgRects:o}},_createTextCharSpan:function(a,c,i,o){var s=a!==a.trim()||a.match(r),u=this.getSvgSpanStyles(c,s),d=u?'style="'+u+'"':"",l=c.deltaY,g="",v=e.Object.NUM_FRACTION_DIGITS;return l&&(g=' dy="'+h(l,v)+'" '),['<tspan x="',h(i,v),'" y="',h(o,v),'" ',g,d,">",e.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,c,i,o){var s=this.getHeightOfLine(c),u=this.textAlign.indexOf("justify")!==-1,d,l,g="",v,b,_=0,w=this._textLines[c],S;o+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,x=w.length-1;T<=x;T++)S=T===x||this.charSpacing,g+=w[T],v=this.__charBounds[c][T],_===0?(i+=v.kernedWidth-v.width,_+=v.width):_+=v.kernedWidth,u&&!S&&this._reSpaceAndTab.test(w[T])&&(S=!0),S||(d=d||this.getCompleteStyleDeclaration(c,T),l=this.getCompleteStyleDeclaration(c,T+1),S=this._hasStyleChangedForSvg(d,l)),S&&(b=this._getStyleDeclaration(c,T)||{},a.push(this._createTextCharSpan(g,b,i,o)),g="",d=l,i+=_,_=0)},_pushTextBgRect:function(a,c,i,o,s,u){var d=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(c),' x="',h(i,d),'" y="',h(o,d),'" width="',h(s,d),'" height="',h(u,d),`"></rect>
`)},_setSVGTextLineBg:function(a,c,i,o){for(var s=this._textLines[c],u=this.getHeightOfLine(c)/this.lineHeight,d=0,l=0,g,v,b=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),_=0,w=s.length;_<w;_++)g=this.__charBounds[c][_],v=this.getValueOfPropertyAt(c,_,"textBackgroundColor"),v!==b?(b&&this._pushTextBgRect(a,b,i+l,o,d,u),l=g.left,d=g.width,b=v):d+=g.kernedWidth;v&&this._pushTextBgRect(a,v,i+l,o,d,u)},_getFillAttributes:function(a){var c=a&&typeof a=="string"?new e.Color(a):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+a+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(a){for(var c=0,i=0,o=0;o<a;o++)c+=this.getHeightOfLine(o);return i=this.getHeightOfLine(o),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){var c=e.Object.prototype.getSvgStyles.call(this,a);return c+" white-space: pre;"}})}(),function(h){var r=h.fabric||(h.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var c=0,i=0,o=0,s={},u=0;u<a.graphemeLines.length;u++)a.graphemeText[o]===`
`&&u>0?(i=0,o++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[o])&&u>0&&(i++,o++),s[u]={line:c,offset:i},o+=a.graphemeLines[u].length,i+=a.graphemeLines[u].length;return s},styleHas:function(a,c){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[c];i&&(c=i.line)}return r.Text.prototype.styleHas.call(this,a,c)},isEmptyStyles:function(a){if(!this.styles)return!0;var c=0,i=a+1,o,s,u=!1,d=this._styleMap[a],l=this._styleMap[a+1];d&&(a=d.line,c=d.offset),l&&(i=l.line,u=i===a,o=l.offset),s=typeof a=="undefined"?this.styles:{line:this.styles[a]};for(var g in s)for(var v in s[g])if(v>=c&&(!u||v<o))for(var b in s[g][v])return!1;return!0},_getStyleDeclaration:function(a,c){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[a];if(!i)return null;a=i.line,c=i.offset+c}return this.callSuper("_getStyleDeclaration",a,c)},_setStyleDeclaration:function(a,c,i){var o=this._styleMap[a];a=o.line,c=o.offset+c,this.styles[a][c]=i},_deleteStyleDeclaration:function(a,c){var i=this._styleMap[a];a=i.line,c=i.offset+c,delete this.styles[a][c]},_getLineStyle:function(a){var c=this._styleMap[a];return!!this.styles[c.line]},_setLineStyle:function(a){var c=this._styleMap[a];this.styles[c.line]={}},_wrapText:function(a,c){var i=[],o;for(this.isWrapping=!0,o=0;o<a.length;o++)i=i.concat(this._wrapLine(a[o],o,c));return this.isWrapping=!1,i},_measureWord:function(a,c,i){var o=0,s,u=!0;i=i||0;for(var d=0,l=a.length;d<l;d++){var g=this._getGraphemeBox(a[d],c,d+i,s,u);o+=g.kernedWidth,s=a[d]}return o},_wrapLine:function(a,c,i,N){var s=0,u=this.splitByGrapheme,d=[],l=[],g=u?r.util.string.graphemeSplit(a):a.split(this._wordJoiners),v="",b=0,_=u?"":" ",w=0,S=0,T=0,x=!0,D=this._getWidthOfCharSpacing(),N=N||0;g.length===0&&g.push([]),i-=N;for(var W=0;W<g.length;W++)v=u?g[W]:r.util.string.graphemeSplit(g[W]),w=this._measureWord(v,c,b),b+=v.length,s+=S+w-D,s>i&&!x?(d.push(l),l=[],s=w,x=!0):s+=D,!x&&!u&&l.push(_),l=l.concat(v),S=u?0:this._measureWord([_],c,b),b++,x=!1,w>T&&(T=w);return W&&d.push(l),T+N>this.dynamicMinWidth&&(this.dynamicMinWidth=T-D+N),d},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a){return this.splitByGrapheme?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var c=r.Text.prototype._splitTextIntoLines.call(this,a),i=this._wrapText(c.lines,this.width),o=new Array(i.length),s=0;s<i.length;s++)o[s]=i[s].join("");return c.lines=o,c.graphemeLines=i,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var c in this._styleMap)this._textLines[c]&&(a[this._styleMap[c].line]=1);for(var c in this.styles)a[c]||delete this.styles[c]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),r.Textbox.fromObject=function(a,c){return r.Object._fromObject("Textbox",a,c,"text")}}(t),function(){var h=e.controlsUtils,r=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,c=h.scalingEqually,i=h.scalingYOrSkewingX,o=h.scalingXOrSkewingY,s=h.scaleOrSkewActionName,u=e.Object.prototype.controls;if(u.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:o,getActionName:s}),u.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:o,getActionName:s}),u.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:i,getActionName:s}),u.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:i,getActionName:s}),u.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:c}),u.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:c}),u.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:c}),u.br=new e.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:c}),u.mtr=new e.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var d=e.Textbox.prototype.controls={};d.mtr=u.mtr,d.tr=u.tr,d.br=u.br,d.tl=u.tl,d.bl=u.bl,d.mt=u.mt,d.mb=u.mb,d.mr=new e.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),d.ml=new e.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(ag);var wl={exports:{}},ug=wl.exports={};ug.forEach=function(t,e){for(var n=0;n<t.length;n++){var f=e(t[n]);if(f)return f}};var fg=function(t){var e=t.stateHandler.getState;function n(y){var h=e(y);return h&&!!h.isDetectable}function f(y){e(y).isDetectable=!0}function m(y){return!!e(y).busy}function p(y,h){e(y).busy=!!h}return{isDetectable:n,markAsDetectable:f,isBusy:m,markBusy:p}},hg=function(t){var e={};function n(y){var h=t.get(y);return h===void 0?[]:e[h]||[]}function f(y,h){var r=t.get(y);e[r]||(e[r]=[]),e[r].push(h)}function m(y,h){for(var r=n(y),a=0,c=r.length;a<c;++a)if(r[a]===h){r.splice(a,1);break}}function p(y){var h=n(y);!h||(h.length=0)}return{get:n,add:f,removeListener:m,removeAllListeners:p}},dg=function(){var t=1;function e(){return t++}return{generate:e}},gg=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function f(p){var y=n(p);return y&&y.id!==void 0?y.id:null}function m(p){var y=n(p);if(!y)throw new Error("setId required the element to have a resize detection state.");var h=e.generate();return y.id=h,h}return{get:f,set:m}},pg=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var f=function(m,p){m[p]=function(){var h=console[p];if(h.apply)h.apply(console,arguments);else for(var r=0;r<arguments.length;r++)h(arguments[r])}};f(n,"log"),f(n,"warn"),f(n,"error")}return n},Cl={exports:{}},Af=Cl.exports={};Af.isIE=function(t){function e(){var f=navigator.userAgent.toLowerCase();return f.indexOf("msie")!==-1||f.indexOf("trident")!==-1||f.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var n=function(){var f,m=3,p=document.createElement("div"),y=p.getElementsByTagName("i");do p.innerHTML="<!--[if gt IE "+ ++m+"]><i></i><![endif]-->";while(y[0]);return m>4?m:f}();return t===n};Af.isLegacyOpera=function(){return!!window.opera};var Pf={exports:{}},mg=Pf.exports={};mg.getOption=vg;function vg(t,e,n){var f=t[e];return f==null&&n!==void 0?n:f}var Rc=Pf.exports,yg=function(e){e=e||{};var n=e.reporter,f=Rc.getOption(e,"async",!0),m=Rc.getOption(e,"auto",!0);m&&!f&&(n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),f=!0);var p=Ic(),y,h=!1;function r(u,d){!h&&m&&f&&p.size()===0&&i(),p.add(u,d)}function a(){for(h=!0;p.size();){var u=p;p=Ic(),u.process()}h=!1}function c(u){h||(u===void 0&&(u=f),y&&(o(y),y=null),u?i():a())}function i(){y=s(a)}function o(u){var d=clearTimeout;return d(u)}function s(u){var d=function(l){return setTimeout(l,0)};return d(u)}return{add:r,force:c}};function Ic(){var t={},e=0,n=0,f=0;function m(h,r){r||(r=h,h=0),h>n?n=h:h<f&&(f=h),t[h]||(t[h]=[]),t[h].push(r),e++}function p(){for(var h=f;h<=n;h++)for(var r=t[h],a=0;a<r.length;a++){var c=r[a];c()}}function y(){return e}return{add:m,process:p,size:y}}var Sl="_erd";function _g(t){return t[Sl]={},Df(t)}function Df(t){return t[Sl]}function bg(t){delete t[Sl]}var wg={initState:_g,getState:Df,cleanState:bg},di=Cl.exports,Cg=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,f=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function m(a,c){function i(){c(a)}if(di.isIE(8))f(a).object={proxy:i},a.attachEvent("onresize",i);else{var o=h(a);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",i)}}function p(a){var c=t.important?" !important; ":"; ";return(a.join(c)+c).trim()}function y(a,c,i){i||(i=c,c=a,a=null),a=a||{},a.debug;function o(s,u){var d=p(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),l=!1,g=window.getComputedStyle(s),v=s.offsetWidth,b=s.offsetHeight;f(s).startSize={width:v,height:b};function _(){function w(){if(g.position==="static"){s.style.setProperty("position","relative",a.important?"important":"");var x=function(D,N,W,k){function q(ne){return ne.replace(/[^-\d\.]/g,"")}var K=W[k];K!=="auto"&&q(K)!=="0"&&(D.warn("An element that is positioned static has style."+k+"="+K+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+k+" will be set to 0. Element: ",N),N.style.setProperty(k,"0",a.important?"important":""))};x(e,s,g,"top"),x(e,s,g,"right"),x(e,s,g,"bottom"),x(e,s,g,"left")}}function S(){l||w();function x(N,W){if(!N.contentDocument){var k=f(N);k.checkForObjectDocumentTimeoutId&&window.clearTimeout(k.checkForObjectDocumentTimeoutId),k.checkForObjectDocumentTimeoutId=setTimeout(function(){k.checkForObjectDocumentTimeoutId=0,x(N,W)},100);return}W(N.contentDocument)}var D=this;x(D,function(W){u(s)})}g.position!==""&&(w(),l=!0);var T=document.createElement("object");T.style.cssText=d,T.tabIndex=-1,T.type="text/html",T.setAttribute("aria-hidden","true"),T.onload=S,di.isIE()||(T.data="about:blank"),!!f(s)&&(s.appendChild(T),f(s).object=T,di.isIE()&&(T.data="about:blank"))}n?n.add(_):_()}di.isIE(8)?i(c):o(c,i)}function h(a){return f(a).object}function r(a){if(!!f(a)){var c=h(a);!c||(di.isIE(8)?a.detachEvent("onresize",c.proxy):a.removeChild(c),f(a).checkForObjectDocumentTimeoutId&&window.clearTimeout(f(a).checkForObjectDocumentTimeoutId),delete f(a).object)}}return{makeDetectable:y,addListener:m,uninstall:r}},Sg=wl.exports.forEach,Tg=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,f=t.stateHandler.getState;t.stateHandler.hasState;var m=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var p=c(),y="erd_scroll_detection_scrollbar_style",h="erd_scroll_detection_container";function r(_){i(_,y,h)}r(window.document);function a(_){var w=t.important?" !important; ":"; ";return(_.join(w)+w).trim()}function c(){var _=500,w=500,S=document.createElement("div");S.style.cssText=a(["position: absolute","width: "+_*2+"px","height: "+w*2+"px","visibility: hidden","margin: 0","padding: 0"]);var T=document.createElement("div");T.style.cssText=a(["position: absolute","width: "+_+"px","height: "+w+"px","overflow: scroll","visibility: none","top: "+-_*3+"px","left: "+-w*3+"px","visibility: hidden","margin: 0","padding: 0"]),T.appendChild(S),document.body.insertBefore(T,document.body.firstChild);var x=_-T.clientWidth,D=w-T.clientHeight;return document.body.removeChild(T),{width:x,height:D}}function i(_,w,S){function T(W,k){k=k||function(K){_.head.appendChild(K)};var q=_.createElement("style");return q.innerHTML=W,q.id=w,k(q),q}if(!_.getElementById(w)){var x=S+"_animation",D=S+"_animation_active",N=`/* Created by the element-resize-detector library. */
`;N+="."+S+" > div::-webkit-scrollbar { "+a(["display: none"])+` }

`,N+="."+D+" { "+a(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+x,"animation-name: "+x])+` }
`,N+="@-webkit-keyframes "+x+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,N+="@keyframes "+x+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",T(N)}}function o(_){_.className+=" "+h+"_animation_active"}function s(_,w,S){if(_.addEventListener)_.addEventListener(w,S);else if(_.attachEvent)_.attachEvent("on"+w,S);else return e.error("[scroll] Don't know how to add event listeners.")}function u(_,w,S){if(_.removeEventListener)_.removeEventListener(w,S);else if(_.detachEvent)_.detachEvent("on"+w,S);else return e.error("[scroll] Don't know how to remove event listeners.")}function d(_){return f(_).container.childNodes[0].childNodes[0].childNodes[0]}function l(_){return f(_).container.childNodes[0].childNodes[0].childNodes[1]}function g(_,w){var S=f(_).listeners;if(!S.push)throw new Error("Cannot add listener to an element that is not detectable.");f(_).listeners.push(w)}function v(_,w,S){S||(S=w,w=_,_=null),_=_||{};function T(){if(_.debug){var B=Array.prototype.slice.call(arguments);if(B.unshift(m.get(w),"Scroll: "),e.log.apply)e.log.apply(null,B);else for(var G=0;G<B.length;G++)e.log(B[G])}}function x(B){function G(V){var Q=V.getRootNode&&V.getRootNode().contains(V);return V===V.ownerDocument.body||V.ownerDocument.body.contains(V)||Q}return!G(B)||window.getComputedStyle(B)===null}function D(B){var G=f(B).container.childNodes[0],V=window.getComputedStyle(G);return!V.width||V.width.indexOf("px")===-1}function N(){var B=window.getComputedStyle(w),G={};return G.position=B.position,G.width=w.offsetWidth,G.height=w.offsetHeight,G.top=B.top,G.right=B.right,G.bottom=B.bottom,G.left=B.left,G.widthCSS=B.width,G.heightCSS=B.height,G}function W(){var B=N();f(w).startSize={width:B.width,height:B.height},T("Element start size",f(w).startSize)}function k(){f(w).listeners=[]}function q(){if(T("storeStyle invoked."),!f(w)){T("Aborting because element has been uninstalled");return}var B=N();f(w).style=B}function K(B,G,V){f(B).lastWidth=G,f(B).lastHeight=V}function ne(B){return d(B).childNodes[0]}function se(){return 2*p.width+1}function oe(){return 2*p.height+1}function ae(B){return B+10+se()}function I(B){return B+10+oe()}function H(B){return B*2+se()}function P(B){return B*2+oe()}function j(B,G,V){var Q=d(B),Y=l(B),F=ae(G),z=I(V),Z=H(G),X=P(V);Q.scrollLeft=F,Q.scrollTop=z,Y.scrollLeft=Z,Y.scrollTop=X}function U(){var B=f(w).container;if(!B){B=document.createElement("div"),B.className=h,B.style.cssText=a(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),f(w).container=B,o(B),w.appendChild(B);var G=function(){f(w).onRendered&&f(w).onRendered()};s(B,"animationstart",G),f(w).onAnimationStart=G}return B}function A(){function B(){var ye=f(w).style;if(ye.position==="static"){w.style.setProperty("position","relative",_.important?"important":"");var me=function(Ee,Xe,xt,ie){function Ye(We){return We.replace(/[^-\d\.]/g,"")}var Ge=xt[ie];Ge!=="auto"&&Ye(Ge)!=="0"&&(Ee.warn("An element that is positioned static has style."+ie+"="+Ge+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ie+" will be set to 0. Element: ",Xe),Xe.style[ie]=0)};me(e,w,ye,"top"),me(e,w,ye,"right"),me(e,w,ye,"bottom"),me(e,w,ye,"left")}}function G(ye,me,Ee,Xe){return ye=ye?ye+"px":"0",me=me?me+"px":"0",Ee=Ee?Ee+"px":"0",Xe=Xe?Xe+"px":"0",["left: "+ye,"top: "+me,"right: "+Xe,"bottom: "+Ee]}if(T("Injecting elements"),!f(w)){T("Aborting because element has been uninstalled");return}B();var V=f(w).container;V||(V=U());var Q=p.width,Y=p.height,F=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),z=a(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(G(-(1+Q),-(1+Y),-Y,-Q))),Z=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),X=a(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ee=a(["position: absolute","left: 0","top: 0"]),re=a(["position: absolute","width: 200%","height: 200%"]),fe=document.createElement("div"),le=document.createElement("div"),$=document.createElement("div"),ue=document.createElement("div"),he=document.createElement("div"),be=document.createElement("div");fe.dir="ltr",fe.style.cssText=F,fe.className=h,le.className=h,le.style.cssText=z,$.style.cssText=Z,ue.style.cssText=ee,he.style.cssText=X,be.style.cssText=re,$.appendChild(ue),he.appendChild(be),le.appendChild($),le.appendChild(he),fe.appendChild(le),V.appendChild(fe);function je(){var ye=f(w);ye&&ye.onExpand?ye.onExpand():T("Aborting expand scroll handler: element has been uninstalled")}function Oe(){var ye=f(w);ye&&ye.onShrink?ye.onShrink():T("Aborting shrink scroll handler: element has been uninstalled")}s($,"scroll",je),s(he,"scroll",Oe),f(w).onExpandScroll=je,f(w).onShrinkScroll=Oe}function E(){function B(Z,X,ee){var re=ne(Z),fe=ae(X),le=I(ee);re.style.setProperty("width",fe+"px",_.important?"important":""),re.style.setProperty("height",le+"px",_.important?"important":"")}function G(Z){var X=w.offsetWidth,ee=w.offsetHeight,re=X!==f(w).lastWidth||ee!==f(w).lastHeight;T("Storing current size",X,ee),K(w,X,ee),n.add(0,function(){if(!!re){if(!f(w)){T("Aborting because element has been uninstalled");return}if(!V()){T("Aborting because element container has not been initialized");return}if(_.debug){var le=w.offsetWidth,$=w.offsetHeight;(le!==X||$!==ee)&&e.warn(m.get(w),"Scroll: Size changed before updating detector elements.")}B(w,X,ee)}}),n.add(1,function(){if(!f(w)){T("Aborting because element has been uninstalled");return}if(!V()){T("Aborting because element container has not been initialized");return}j(w,X,ee)}),re&&Z&&n.add(2,function(){if(!f(w)){T("Aborting because element has been uninstalled");return}if(!V()){T("Aborting because element container has not been initialized");return}Z()})}function V(){return!!f(w).container}function Q(){function Z(){return f(w).lastNotifiedWidth===void 0}T("notifyListenersIfNeeded invoked");var X=f(w);if(Z()&&X.lastWidth===X.startSize.width&&X.lastHeight===X.startSize.height)return T("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(X.lastWidth===X.lastNotifiedWidth&&X.lastHeight===X.lastNotifiedHeight)return T("Not notifying: Size already notified");T("Current size not notified, notifying..."),X.lastNotifiedWidth=X.lastWidth,X.lastNotifiedHeight=X.lastHeight,Sg(f(w).listeners,function(ee){ee(w)})}function Y(){if(T("startanimation triggered."),D(w)){T("Ignoring since element is still unrendered...");return}T("Element rendered.");var Z=d(w),X=l(w);(Z.scrollLeft===0||Z.scrollTop===0||X.scrollLeft===0||X.scrollTop===0)&&(T("Scrollbars out of sync. Updating detector elements..."),G(Q))}function F(){if(T("Scroll detected."),D(w)){T("Scroll event fired while unrendered. Ignoring...");return}G(Q)}if(T("registerListenersAndPositionElements invoked."),!f(w)){T("Aborting because element has been uninstalled");return}f(w).onRendered=Y,f(w).onExpand=F,f(w).onShrink=F;var z=f(w).style;B(w,z.width,z.height)}function M(){if(T("finalizeDomMutation invoked."),!f(w)){T("Aborting because element has been uninstalled");return}var B=f(w).style;K(w,B.width,B.height),j(w,B.width,B.height)}function R(){S(w)}function J(){T("Installing..."),k(),W(),n.add(0,q),n.add(1,A),n.add(2,E),n.add(3,M),n.add(4,R)}T("Making detectable..."),x(w)?(T("Element is detached"),U(),T("Waiting until element is attached..."),f(w).onRendered=function(){T("Element is now attached"),J()}):J()}function b(_){var w=f(_);!w||(w.onExpandScroll&&u(d(_),"scroll",w.onExpandScroll),w.onShrinkScroll&&u(l(_),"scroll",w.onShrinkScroll),w.onAnimationStart&&u(w.container,"animationstart",w.onAnimationStart),w.container&&_.removeChild(w.container))}return{makeDetectable:v,addListener:g,uninstall:b,initDocument:r}},yi=wl.exports.forEach,xg=fg,Og=hg,Eg=dg,Ag=gg,Pg=pg,Mc=Cl.exports,Dg=yg,_n=wg,kg=Cg,Fg=Tg;function Lc(t){return Array.isArray(t)||t.length!==void 0}function Bc(t){if(Array.isArray(t))return t;var e=[];return yi(t,function(n){e.push(n)}),e}function jc(t){return t&&t.nodeType===1}var Rg=function(t){t=t||{};var e;if(t.idHandler)e={get:function(v){return t.idHandler.get(v,!0)},set:t.idHandler.set};else{var n=Eg(),f=Ag({idGenerator:n,stateHandler:_n});e=f}var m=t.reporter;if(!m){var p=m===!1;m=Pg(p)}var y=bn(t,"batchProcessor",Dg({reporter:m})),h={};h.callOnAdd=!!bn(t,"callOnAdd",!0),h.debug=!!bn(t,"debug",!1);var r=Og(e),a=xg({stateHandler:_n}),c,i=bn(t,"strategy","object"),o=bn(t,"important",!1),s={reporter:m,batchProcessor:y,stateHandler:_n,idHandler:e,important:o};if(i==="scroll"&&(Mc.isLegacyOpera()?(m.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),i="object"):Mc.isIE(9)&&(m.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),i="object")),i==="scroll")c=Fg(s);else if(i==="object")c=kg(s);else throw new Error("Invalid strategy name: "+i);var u={};function d(v,b,_){function w(W){var k=r.get(W);yi(k,function(K){K(W)})}function S(W,k,q){r.add(k,q),W&&q(k)}if(_||(_=b,b=v,v={}),!b)throw new Error("At least one element required.");if(!_)throw new Error("Listener required.");if(jc(b))b=[b];else if(Lc(b))b=Bc(b);else return m.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var T=0,x=bn(v,"callOnAdd",h.callOnAdd),D=bn(v,"onReady",function(){}),N=bn(v,"debug",h.debug);yi(b,function(k){_n.getState(k)||(_n.initState(k),e.set(k));var q=e.get(k);if(N&&m.log("Attaching listener to element",q,k),!a.isDetectable(k)){if(N&&m.log(q,"Not detectable."),a.isBusy(k)){N&&m.log(q,"System busy making it detectable"),S(x,k,_),u[q]=u[q]||[],u[q].push(function(){T++,T===b.length&&D()});return}return N&&m.log(q,"Making detectable..."),a.markBusy(k,!0),c.makeDetectable({debug:N,important:o},k,function(ne){if(N&&m.log(q,"onElementDetectable"),_n.getState(ne)){a.markAsDetectable(ne),a.markBusy(ne,!1),c.addListener(ne,w),S(x,ne,_);var se=_n.getState(ne);if(se&&se.startSize){var oe=ne.offsetWidth,ae=ne.offsetHeight;(se.startSize.width!==oe||se.startSize.height!==ae)&&w(ne)}u[q]&&yi(u[q],function(I){I()})}else N&&m.log(q,"Element uninstalled before being detectable.");delete u[q],T++,T===b.length&&D()})}N&&m.log(q,"Already detecable, adding listener."),S(x,k,_),T++}),T===b.length&&D()}function l(v){if(!v)return m.error("At least one element is required.");if(jc(v))v=[v];else if(Lc(v))v=Bc(v);else return m.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");yi(v,function(b){r.removeAllListeners(b),c.uninstall(b),_n.cleanState(b)})}function g(v){c.initDocument&&c.initDocument(v)}return{listenTo:d,removeListener:r.removeListener,removeAllListeners:r.removeAllListeners,uninstall:l,initDocument:g}};function bn(t,e,n){var f=t[e];return f==null&&n!==void 0?n:f}var ds=Rg({strategy:"scroll"});function QT(t,e){ds.listenTo(t,e);var n=e;return{update:function(f){ds.removeListener(t,n),ds.listenTo(t,f),n=f},destroy:function(){ds.removeListener(t,n)}}}const vr=[];function Ig(t,e){return{subscribe:kf(t,e).subscribe}}function kf(t,e=xe){let n;const f=new Set;function m(h){if(tt(t,h)&&(t=h,n)){const r=!vr.length;for(const a of f)a[1](),vr.push(a,t);if(r){for(let a=0;a<vr.length;a+=2)vr[a][0](vr[a+1]);vr.length=0}}}function p(h){m(h(t))}function y(h,r=xe){const a=[h,r];return f.add(a),f.size===1&&(n=e(m)||xe),h(t),()=>{f.delete(a),f.size===0&&(n(),n=null)}}return{set:m,update:p,subscribe:y}}function Mg(t,e,n){const f=!Array.isArray(t),m=f?[t]:t,p=e.length<2;return Ig(n,y=>{let h=!1;const r=[];let a=0,c=xe;const i=()=>{if(a)return;c();const s=e(f?r[0]:r,y);p?y(s):c=tn(s)?s:xe},o=m.map((s,u)=>df(s,d=>{r[u]=d,a&=~(1<<u),h&&i()},()=>{a|=1<<u}));return h=!0,i(),function(){Tt(o),c()}})}var Lg=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),f=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(f)!=="[object Symbol]")return!1;var m=42;e[n]=m;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var p=Object.getOwnPropertySymbols(e);if(p.length!==1||p[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var y=Object.getOwnPropertyDescriptor(e,n);if(y.value!==m||y.enumerable!==!0)return!1}return!0},Nc=typeof Symbol!="undefined"&&Symbol,Bg=Lg,jg=function(){return typeof Nc!="function"||typeof Symbol!="function"||typeof Nc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bg()},Ng="Function.prototype.bind called on incompatible ",la=Array.prototype.slice,Ug=Object.prototype.toString,Wg="[object Function]",Hg=function(e){var n=this;if(typeof n!="function"||Ug.call(n)!==Wg)throw new TypeError(Ng+n);for(var f=la.call(arguments,1),m,p=function(){if(this instanceof m){var c=n.apply(this,f.concat(la.call(arguments)));return Object(c)===c?c:this}else return n.apply(e,f.concat(la.call(arguments)))},y=Math.max(0,n.length-f.length),h=[],r=0;r<y;r++)h.push("$"+r);if(m=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(p),n.prototype){var a=function(){};a.prototype=n.prototype,m.prototype=new a,a.prototype=null}return m},zg=Hg,Tl=Function.prototype.bind||zg,Xg=Tl,Yg=Xg.call(Function.call,Object.prototype.hasOwnProperty),De,Oi=SyntaxError,Ff=Function,Pr=TypeError,ca=function(t){try{return Ff('"use strict"; return ('+t+").constructor;")()}catch{}},er=Object.getOwnPropertyDescriptor;if(er)try{er({},"")}catch{er=null}var ua=function(){throw new Pr},Gg=er?function(){try{return arguments.callee,ua}catch{try{return er(arguments,"callee").get}catch{return ua}}}():ua,yr=jg(),Cn=Object.getPrototypeOf||function(t){return t.__proto__},xr={},Vg=typeof Uint8Array=="undefined"?De:Cn(Uint8Array),Dr={"%AggregateError%":typeof AggregateError=="undefined"?De:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?De:ArrayBuffer,"%ArrayIteratorPrototype%":yr?Cn([][Symbol.iterator]()):De,"%AsyncFromSyncIteratorPrototype%":De,"%AsyncFunction%":xr,"%AsyncGenerator%":xr,"%AsyncGeneratorFunction%":xr,"%AsyncIteratorPrototype%":xr,"%Atomics%":typeof Atomics=="undefined"?De:Atomics,"%BigInt%":typeof BigInt=="undefined"?De:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?De:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?De:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?De:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?De:FinalizationRegistry,"%Function%":Ff,"%GeneratorFunction%":xr,"%Int8Array%":typeof Int8Array=="undefined"?De:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?De:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?De:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":yr?Cn(Cn([][Symbol.iterator]())):De,"%JSON%":typeof JSON=="object"?JSON:De,"%Map%":typeof Map=="undefined"?De:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!yr?De:Cn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?De:Promise,"%Proxy%":typeof Proxy=="undefined"?De:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?De:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?De:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!yr?De:Cn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?De:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":yr?Cn(""[Symbol.iterator]()):De,"%Symbol%":yr?Symbol:De,"%SyntaxError%":Oi,"%ThrowTypeError%":Gg,"%TypedArray%":Vg,"%TypeError%":Pr,"%Uint8Array%":typeof Uint8Array=="undefined"?De:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?De:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?De:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?De:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?De:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?De:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?De:WeakSet},qg=function t(e){var n;if(e==="%AsyncFunction%")n=ca("async function () {}");else if(e==="%GeneratorFunction%")n=ca("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=ca("async function* () {}");else if(e==="%AsyncGenerator%"){var f=t("%AsyncGeneratorFunction%");f&&(n=f.prototype)}else if(e==="%AsyncIteratorPrototype%"){var m=t("%AsyncGenerator%");m&&(n=Cn(m.prototype))}return Dr[e]=n,n},Uc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},to=Tl,Ls=Yg,Kg=to.call(Function.call,Array.prototype.concat),Jg=to.call(Function.apply,Array.prototype.splice),Wc=to.call(Function.call,String.prototype.replace),Bs=to.call(Function.call,String.prototype.slice),Zg=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Qg=/\\(\\)?/g,$g=function(e){var n=Bs(e,0,1),f=Bs(e,-1);if(n==="%"&&f!=="%")throw new Oi("invalid intrinsic syntax, expected closing `%`");if(f==="%"&&n!=="%")throw new Oi("invalid intrinsic syntax, expected opening `%`");var m=[];return Wc(e,Zg,function(p,y,h,r){m[m.length]=h?Wc(r,Qg,"$1"):y||p}),m},ep=function(e,n){var f=e,m;if(Ls(Uc,f)&&(m=Uc[f],f="%"+m[0]+"%"),Ls(Dr,f)){var p=Dr[f];if(p===xr&&(p=qg(f)),typeof p=="undefined"&&!n)throw new Pr("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:m,name:f,value:p}}throw new Oi("intrinsic "+e+" does not exist!")},xl=function(e,n){if(typeof e!="string"||e.length===0)throw new Pr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Pr('"allowMissing" argument must be a boolean');var f=$g(e),m=f.length>0?f[0]:"",p=ep("%"+m+"%",n),y=p.name,h=p.value,r=!1,a=p.alias;a&&(m=a[0],Jg(f,Kg([0,1],a)));for(var c=1,i=!0;c<f.length;c+=1){var o=f[c],s=Bs(o,0,1),u=Bs(o,-1);if((s==='"'||s==="'"||s==="`"||u==='"'||u==="'"||u==="`")&&s!==u)throw new Oi("property names with quotes must have matching quotes");if((o==="constructor"||!i)&&(r=!0),m+="."+o,y="%"+m+"%",Ls(Dr,y))h=Dr[y];else if(h!=null){if(!(o in h)){if(!n)throw new Pr("base intrinsic for "+e+" exists, but the property is not available.");return}if(er&&c+1>=f.length){var d=er(h,o);i=!!d,i&&"get"in d&&!("originalValue"in d.get)?h=d.get:h=h[o]}else i=Ls(h,o),h=h[o];i&&!r&&(Dr[y]=h)}}return h},Rf={exports:{}};(function(t){var e=Tl,n=xl,f=n("%Function.prototype.apply%"),m=n("%Function.prototype.call%"),p=n("%Reflect.apply%",!0)||e.call(m,f),y=n("%Object.getOwnPropertyDescriptor%",!0),h=n("%Object.defineProperty%",!0),r=n("%Math.max%");if(h)try{h({},"a",{value:1})}catch{h=null}t.exports=function(i){var o=p(e,m,arguments);if(y&&h){var s=y(o,"length");s.configurable&&h(o,"length",{value:1+r(0,i.length-(arguments.length-1))})}return o};var a=function(){return p(e,f,arguments)};h?h(t.exports,"apply",{value:a}):t.exports.apply=a})(Rf);var If=xl,Mf=Rf.exports,tp=Mf(If("String.prototype.indexOf")),np=function(e,n){var f=If(e,!!n);return typeof f=="function"&&tp(e,".prototype.")>-1?Mf(f):f},Ol=typeof Map=="function"&&Map.prototype,fa=Object.getOwnPropertyDescriptor&&Ol?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,js=Ol&&fa&&typeof fa.get=="function"?fa.get:null,rp=Ol&&Map.prototype.forEach,El=typeof Set=="function"&&Set.prototype,ha=Object.getOwnPropertyDescriptor&&El?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ns=El&&ha&&typeof ha.get=="function"?ha.get:null,ip=El&&Set.prototype.forEach,sp=typeof WeakMap=="function"&&WeakMap.prototype,bi=sp?WeakMap.prototype.has:null,op=typeof WeakSet=="function"&&WeakSet.prototype,wi=op?WeakSet.prototype.has:null,ap=typeof WeakRef=="function"&&WeakRef.prototype,Hc=ap?WeakRef.prototype.deref:null,lp=Boolean.prototype.valueOf,cp=Object.prototype.toString,up=Function.prototype.toString,fp=String.prototype.match,Al=String.prototype.slice,An=String.prototype.replace,hp=String.prototype.toUpperCase,zc=String.prototype.toLowerCase,Lf=RegExp.prototype.test,Xc=Array.prototype.concat,$t=Array.prototype.join,dp=Array.prototype.slice,Yc=Math.floor,ja=typeof BigInt=="function"?BigInt.prototype.valueOf:null,da=Object.getOwnPropertySymbols,Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Br=typeof Symbol=="function"&&typeof Symbol.iterator=="object",St=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Br?"object":"symbol")?Symbol.toStringTag:null,Bf=Object.prototype.propertyIsEnumerable,Gc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Vc(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Lf.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var f=t<0?-Yc(-t):Yc(t);if(f!==t){var m=String(f),p=Al.call(e,m.length+1);return An.call(m,n,"$&_")+"."+An.call(An.call(p,/([0-9]{3})/g,"$&_"),/_$/,"")}}return An.call(e,n,"$&_")}var ga=_i.custom,pa=ga&&Nf(ga)?ga:null,gp=function t(e,n,f,m){var p=n||{};if(Sn(p,"quoteStyle")&&p.quoteStyle!=="single"&&p.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Sn(p,"maxStringLength")&&(typeof p.maxStringLength=="number"?p.maxStringLength<0&&p.maxStringLength!==1/0:p.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var y=Sn(p,"customInspect")?p.customInspect:!0;if(typeof y!="boolean"&&y!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Sn(p,"indent")&&p.indent!==null&&p.indent!=="	"&&!(parseInt(p.indent,10)===p.indent&&p.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Sn(p,"numericSeparator")&&typeof p.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=p.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Wf(e,p);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var r=String(e);return h?Vc(e,r):r}if(typeof e=="bigint"){var a=String(e)+"n";return h?Vc(e,a):a}var c=typeof p.depth=="undefined"?5:p.depth;if(typeof f=="undefined"&&(f=0),f>=c&&c>0&&typeof e=="object")return Ua(e)?"[Array]":"[Object]";var i=Rp(p,f);if(typeof m=="undefined")m=[];else if(Uf(m,e)>=0)return"[Circular]";function o(q,K,ne){if(K&&(m=dp.call(m),m.push(K)),ne){var se={depth:p.depth};return Sn(p,"quoteStyle")&&(se.quoteStyle=p.quoteStyle),t(q,se,f+1,m)}return t(q,p,f+1,m)}if(typeof e=="function"){var s=Tp(e),u=gs(e,o);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(u.length>0?" { "+$t.call(u,", ")+" }":"")}if(Nf(e)){var d=Br?An.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Na.call(e);return typeof e=="object"&&!Br?gi(d):d}if(Dp(e)){for(var l="<"+zc.call(String(e.nodeName)),g=e.attributes||[],v=0;v<g.length;v++)l+=" "+g[v].name+"="+jf(pp(g[v].value),"double",p);return l+=">",e.childNodes&&e.childNodes.length&&(l+="..."),l+="</"+zc.call(String(e.nodeName))+">",l}if(Ua(e)){if(e.length===0)return"[]";var b=gs(e,o);return i&&!Fp(b)?"["+Wa(b,i)+"]":"[ "+$t.call(b,", ")+" ]"}if(yp(e)){var _=gs(e,o);return"cause"in e&&!Bf.call(e,"cause")?"{ ["+String(e)+"] "+$t.call(Xc.call("[cause]: "+o(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$t.call(_,", ")+" }"}if(typeof e=="object"&&y){if(pa&&typeof e[pa]=="function")return e[pa]();if(y!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(xp(e)){var w=[];return rp.call(e,function(q,K){w.push(o(K,e,!0)+" => "+o(q,e))}),qc("Map",js.call(e),w,i)}if(Ap(e)){var S=[];return ip.call(e,function(q){S.push(o(q,e))}),qc("Set",Ns.call(e),S,i)}if(Op(e))return ma("WeakMap");if(Pp(e))return ma("WeakSet");if(Ep(e))return ma("WeakRef");if(bp(e))return gi(o(Number(e)));if(Cp(e))return gi(o(ja.call(e)));if(wp(e))return gi(lp.call(e));if(_p(e))return gi(o(String(e)));if(!mp(e)&&!vp(e)){var T=gs(e,o),x=Gc?Gc(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",N=!x&&St&&Object(e)===e&&St in e?Al.call(Un(e),8,-1):D?"Object":"",W=x||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",k=W+(N||D?"["+$t.call(Xc.call([],N||[],D||[]),": ")+"] ":"");return T.length===0?k+"{}":i?k+"{"+Wa(T,i)+"}":k+"{ "+$t.call(T,", ")+" }"}return String(e)};function jf(t,e,n){var f=(n.quoteStyle||e)==="double"?'"':"'";return f+t+f}function pp(t){return An.call(String(t),/"/g,"&quot;")}function Ua(t){return Un(t)==="[object Array]"&&(!St||!(typeof t=="object"&&St in t))}function mp(t){return Un(t)==="[object Date]"&&(!St||!(typeof t=="object"&&St in t))}function vp(t){return Un(t)==="[object RegExp]"&&(!St||!(typeof t=="object"&&St in t))}function yp(t){return Un(t)==="[object Error]"&&(!St||!(typeof t=="object"&&St in t))}function _p(t){return Un(t)==="[object String]"&&(!St||!(typeof t=="object"&&St in t))}function bp(t){return Un(t)==="[object Number]"&&(!St||!(typeof t=="object"&&St in t))}function wp(t){return Un(t)==="[object Boolean]"&&(!St||!(typeof t=="object"&&St in t))}function Nf(t){if(Br)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Na)return!1;try{return Na.call(t),!0}catch{}return!1}function Cp(t){if(!t||typeof t!="object"||!ja)return!1;try{return ja.call(t),!0}catch{}return!1}var Sp=Object.prototype.hasOwnProperty||function(t){return t in this};function Sn(t,e){return Sp.call(t,e)}function Un(t){return cp.call(t)}function Tp(t){if(t.name)return t.name;var e=fp.call(up.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Uf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,f=t.length;n<f;n++)if(t[n]===e)return n;return-1}function xp(t){if(!js||!t||typeof t!="object")return!1;try{js.call(t);try{Ns.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Op(t){if(!bi||!t||typeof t!="object")return!1;try{bi.call(t,bi);try{wi.call(t,wi)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Ep(t){if(!Hc||!t||typeof t!="object")return!1;try{return Hc.call(t),!0}catch{}return!1}function Ap(t){if(!Ns||!t||typeof t!="object")return!1;try{Ns.call(t);try{js.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Pp(t){if(!wi||!t||typeof t!="object")return!1;try{wi.call(t,wi);try{bi.call(t,bi)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Dp(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Wf(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,f="... "+n+" more character"+(n>1?"s":"");return Wf(Al.call(t,0,e.maxStringLength),e)+f}var m=An.call(An.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,kp);return jf(m,"single",e)}function kp(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+hp.call(e.toString(16))}function gi(t){return"Object("+t+")"}function ma(t){return t+" { ? }"}function qc(t,e,n,f){var m=f?Wa(n,f):$t.call(n,", ");return t+" ("+e+") {"+m+"}"}function Fp(t){for(var e=0;e<t.length;e++)if(Uf(t[e],`
`)>=0)return!1;return!0}function Rp(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$t.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$t.call(Array(e+1),n)}}function Wa(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$t.call(t,","+n)+`
`+e.prev}function gs(t,e){var n=Ua(t),f=[];if(n){f.length=t.length;for(var m=0;m<t.length;m++)f[m]=Sn(t,m)?e(t[m],t):""}var p=typeof da=="function"?da(t):[],y;if(Br){y={};for(var h=0;h<p.length;h++)y["$"+p[h]]=p[h]}for(var r in t)!Sn(t,r)||n&&String(Number(r))===r&&r<t.length||Br&&y["$"+r]instanceof Symbol||(Lf.call(/[^\w$]/,r)?f.push(e(r,t)+": "+e(t[r],t)):f.push(r+": "+e(t[r],t)));if(typeof da=="function")for(var a=0;a<p.length;a++)Bf.call(t,p[a])&&f.push("["+e(p[a])+"]: "+e(t[p[a]],t));return f}var Pl=xl,Gr=np,Ip=gp,Mp=Pl("%TypeError%"),ps=Pl("%WeakMap%",!0),ms=Pl("%Map%",!0),Lp=Gr("WeakMap.prototype.get",!0),Bp=Gr("WeakMap.prototype.set",!0),jp=Gr("WeakMap.prototype.has",!0),Np=Gr("Map.prototype.get",!0),Up=Gr("Map.prototype.set",!0),Wp=Gr("Map.prototype.has",!0),Dl=function(t,e){for(var n=t,f;(f=n.next)!==null;n=f)if(f.key===e)return n.next=f.next,f.next=t.next,t.next=f,f},Hp=function(t,e){var n=Dl(t,e);return n&&n.value},zp=function(t,e,n){var f=Dl(t,e);f?f.value=n:t.next={key:e,next:t.next,value:n}},Xp=function(t,e){return!!Dl(t,e)},Yp=function(){var e,n,f,m={assert:function(p){if(!m.has(p))throw new Mp("Side channel does not contain "+Ip(p))},get:function(p){if(ps&&p&&(typeof p=="object"||typeof p=="function")){if(e)return Lp(e,p)}else if(ms){if(n)return Np(n,p)}else if(f)return Hp(f,p)},has:function(p){if(ps&&p&&(typeof p=="object"||typeof p=="function")){if(e)return jp(e,p)}else if(ms){if(n)return Wp(n,p)}else if(f)return Xp(f,p);return!1},set:function(p,y){ps&&p&&(typeof p=="object"||typeof p=="function")?(e||(e=new ps),Bp(e,p,y)):ms?(n||(n=new ms),Up(n,p,y)):(f||(f={key:{},next:null}),zp(f,p,y))}};return m},Gp=String.prototype.replace,Vp=/%20/g,va={RFC1738:"RFC1738",RFC3986:"RFC3986"},kl={default:va.RFC3986,formatters:{RFC1738:function(t){return Gp.call(t,Vp,"+")},RFC3986:function(t){return String(t)}},RFC1738:va.RFC1738,RFC3986:va.RFC3986},qp=kl,ya=Object.prototype.hasOwnProperty,Zn=Array.isArray,Zt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Kp=function(e){for(;e.length>1;){var n=e.pop(),f=n.obj[n.prop];if(Zn(f)){for(var m=[],p=0;p<f.length;++p)typeof f[p]!="undefined"&&m.push(f[p]);n.obj[n.prop]=m}}},Hf=function(e,n){for(var f=n&&n.plainObjects?Object.create(null):{},m=0;m<e.length;++m)typeof e[m]!="undefined"&&(f[m]=e[m]);return f},Jp=function t(e,n,f){if(!n)return e;if(typeof n!="object"){if(Zn(e))e.push(n);else if(e&&typeof e=="object")(f&&(f.plainObjects||f.allowPrototypes)||!ya.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var m=e;return Zn(e)&&!Zn(n)&&(m=Hf(e,f)),Zn(e)&&Zn(n)?(n.forEach(function(p,y){if(ya.call(e,y)){var h=e[y];h&&typeof h=="object"&&p&&typeof p=="object"?e[y]=t(h,p,f):e.push(p)}else e[y]=p}),e):Object.keys(n).reduce(function(p,y){var h=n[y];return ya.call(p,y)?p[y]=t(p[y],h,f):p[y]=h,p},m)},Zp=function(e,n){return Object.keys(n).reduce(function(f,m){return f[m]=n[m],f},e)},Qp=function(t,e,n){var f=t.replace(/\+/g," ");if(n==="iso-8859-1")return f.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(f)}catch{return f}},$p=function(e,n,f,m,p){if(e.length===0)return e;var y=e;if(typeof e=="symbol"?y=Symbol.prototype.toString.call(e):typeof e!="string"&&(y=String(e)),f==="iso-8859-1")return escape(y).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var h="",r=0;r<y.length;++r){var a=y.charCodeAt(r);if(a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||p===qp.RFC1738&&(a===40||a===41)){h+=y.charAt(r);continue}if(a<128){h=h+Zt[a];continue}if(a<2048){h=h+(Zt[192|a>>6]+Zt[128|a&63]);continue}if(a<55296||a>=57344){h=h+(Zt[224|a>>12]+Zt[128|a>>6&63]+Zt[128|a&63]);continue}r+=1,a=65536+((a&1023)<<10|y.charCodeAt(r)&1023),h+=Zt[240|a>>18]+Zt[128|a>>12&63]+Zt[128|a>>6&63]+Zt[128|a&63]}return h},em=function(e){for(var n=[{obj:{o:e},prop:"o"}],f=[],m=0;m<n.length;++m)for(var p=n[m],y=p.obj[p.prop],h=Object.keys(y),r=0;r<h.length;++r){var a=h[r],c=y[a];typeof c=="object"&&c!==null&&f.indexOf(c)===-1&&(n.push({obj:y,prop:a}),f.push(c))}return Kp(n),e},tm=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},nm=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},rm=function(e,n){return[].concat(e,n)},im=function(e,n){if(Zn(e)){for(var f=[],m=0;m<e.length;m+=1)f.push(n(e[m]));return f}return n(e)},zf={arrayToObject:Hf,assign:Zp,combine:rm,compact:em,decode:Qp,encode:$p,isBuffer:nm,isRegExp:tm,maybeMap:im,merge:Jp},Xf=Yp,Ha=zf,Ci=kl,sm=Object.prototype.hasOwnProperty,Kc={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},$n=Array.isArray,om=String.prototype.split,am=Array.prototype.push,Yf=function(t,e){am.apply(t,$n(e)?e:[e])},lm=Date.prototype.toISOString,Jc=Ci.default,ht={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ha.encode,encodeValuesOnly:!1,format:Jc,formatter:Ci.formatters[Jc],indices:!1,serializeDate:function(e){return lm.call(e)},skipNulls:!1,strictNullHandling:!1},cm=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},_a={},um=function t(e,n,f,m,p,y,h,r,a,c,i,o,s,u,d){for(var l=e,g=d,v=0,b=!1;(g=g.get(_a))!==void 0&&!b;){var _=g.get(e);if(v+=1,typeof _!="undefined"){if(_===v)throw new RangeError("Cyclic object value");b=!0}typeof g.get(_a)=="undefined"&&(v=0)}if(typeof h=="function"?l=h(n,l):l instanceof Date?l=c(l):f==="comma"&&$n(l)&&(l=Ha.maybeMap(l,function(oe){return oe instanceof Date?c(oe):oe})),l===null){if(m)return y&&!s?y(n,ht.encoder,u,"key",i):n;l=""}if(cm(l)||Ha.isBuffer(l)){if(y){var w=s?n:y(n,ht.encoder,u,"key",i);if(f==="comma"&&s){for(var S=om.call(String(l),","),T="",x=0;x<S.length;++x)T+=(x===0?"":",")+o(y(S[x],ht.encoder,u,"value",i));return[o(w)+"="+T]}return[o(w)+"="+o(y(l,ht.encoder,u,"value",i))]}return[o(n)+"="+o(String(l))]}var D=[];if(typeof l=="undefined")return D;var N;if(f==="comma"&&$n(l))N=[{value:l.length>0?l.join(",")||null:void 0}];else if($n(h))N=h;else{var W=Object.keys(l);N=r?W.sort(r):W}for(var k=0;k<N.length;++k){var q=N[k],K=typeof q=="object"&&typeof q.value!="undefined"?q.value:l[q];if(!(p&&K===null)){var ne=$n(l)?typeof f=="function"?f(n,q):n:n+(a?"."+q:"["+q+"]");d.set(e,v);var se=Xf();se.set(_a,d),Yf(D,t(K,ne,f,m,p,y,h,r,a,c,i,o,s,u,se))}}return D},fm=function(e){if(!e)return ht;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||ht.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var f=Ci.default;if(typeof e.format!="undefined"){if(!sm.call(Ci.formatters,e.format))throw new TypeError("Unknown format option provided.");f=e.format}var m=Ci.formatters[f],p=ht.filter;return(typeof e.filter=="function"||$n(e.filter))&&(p=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ht.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?ht.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ht.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?ht.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ht.encode,encoder:typeof e.encoder=="function"?e.encoder:ht.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ht.encodeValuesOnly,filter:p,format:f,formatter:m,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ht.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ht.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ht.strictNullHandling}},hm=function(t,e){var n=t,f=fm(e),m,p;typeof f.filter=="function"?(p=f.filter,n=p("",n)):$n(f.filter)&&(p=f.filter,m=p);var y=[];if(typeof n!="object"||n===null)return"";var h;e&&e.arrayFormat in Kc?h=e.arrayFormat:e&&"indices"in e?h=e.indices?"indices":"repeat":h="indices";var r=Kc[h];m||(m=Object.keys(n)),f.sort&&m.sort(f.sort);for(var a=Xf(),c=0;c<m.length;++c){var i=m[c];f.skipNulls&&n[i]===null||Yf(y,um(n[i],i,r,f.strictNullHandling,f.skipNulls,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,a))}var o=y.join(f.delimiter),s=f.addQueryPrefix===!0?"?":"";return f.charsetSentinel&&(f.charset==="iso-8859-1"?s+="utf8=%26%2310003%3B&":s+="utf8=%E2%9C%93&"),o.length>0?s+o:""},jr=zf,za=Object.prototype.hasOwnProperty,dm=Array.isArray,at={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:jr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},gm=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Gf=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},pm="utf8=%26%2310003%3B",mm="utf8=%E2%9C%93",vm=function(e,n){var f={},m=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=n.parameterLimit===1/0?void 0:n.parameterLimit,y=m.split(n.delimiter,p),h=-1,r,a=n.charset;if(n.charsetSentinel)for(r=0;r<y.length;++r)y[r].indexOf("utf8=")===0&&(y[r]===mm?a="utf-8":y[r]===pm&&(a="iso-8859-1"),h=r,r=y.length);for(r=0;r<y.length;++r)if(r!==h){var c=y[r],i=c.indexOf("]="),o=i===-1?c.indexOf("="):i+1,s,u;o===-1?(s=n.decoder(c,at.decoder,a,"key"),u=n.strictNullHandling?null:""):(s=n.decoder(c.slice(0,o),at.decoder,a,"key"),u=jr.maybeMap(Gf(c.slice(o+1),n),function(d){return n.decoder(d,at.decoder,a,"value")})),u&&n.interpretNumericEntities&&a==="iso-8859-1"&&(u=gm(u)),c.indexOf("[]=")>-1&&(u=dm(u)?[u]:u),za.call(f,s)?f[s]=jr.combine(f[s],u):f[s]=u}return f},ym=function(t,e,n,f){for(var m=f?e:Gf(e,n),p=t.length-1;p>=0;--p){var y,h=t[p];if(h==="[]"&&n.parseArrays)y=[].concat(m);else{y=n.plainObjects?Object.create(null):{};var r=h.charAt(0)==="["&&h.charAt(h.length-1)==="]"?h.slice(1,-1):h,a=parseInt(r,10);!n.parseArrays&&r===""?y={0:m}:!isNaN(a)&&h!==r&&String(a)===r&&a>=0&&n.parseArrays&&a<=n.arrayLimit?(y=[],y[a]=m):r!=="__proto__"&&(y[r]=m)}m=y}return m},_m=function(e,n,f,m){if(!!e){var p=f.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,y=/(\[[^[\]]*])/,h=/(\[[^[\]]*])/g,r=f.depth>0&&y.exec(p),a=r?p.slice(0,r.index):p,c=[];if(a){if(!f.plainObjects&&za.call(Object.prototype,a)&&!f.allowPrototypes)return;c.push(a)}for(var i=0;f.depth>0&&(r=h.exec(p))!==null&&i<f.depth;){if(i+=1,!f.plainObjects&&za.call(Object.prototype,r[1].slice(1,-1))&&!f.allowPrototypes)return;c.push(r[1])}return r&&c.push("["+p.slice(r.index)+"]"),ym(c,n,f,m)}},bm=function(e){if(!e)return at;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset=="undefined"?at.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?at.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:at.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:at.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:at.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:at.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:at.comma,decoder:typeof e.decoder=="function"?e.decoder:at.decoder,delimiter:typeof e.delimiter=="string"||jr.isRegExp(e.delimiter)?e.delimiter:at.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:at.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:at.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:at.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:at.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:at.strictNullHandling}},wm=function(t,e){var n=bm(e);if(t===""||t===null||typeof t=="undefined")return n.plainObjects?Object.create(null):{};for(var f=typeof t=="string"?vm(t,n):t,m=n.plainObjects?Object.create(null):{},p=Object.keys(f),y=0;y<p.length;++y){var h=p[y],r=_m(h,f[h],n,typeof t=="string");m=jr.merge(m,r,n)}return n.allowSparse===!0?m:jr.compact(m)},Cm=hm,Sm=wm,Tm=kl,$T={formats:Tm,parse:Sm,stringify:Cm},vs,xm=new Uint8Array(16);function Om(){if(!vs&&(vs=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!vs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vs(xm)}var Em=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Am(t){return typeof t=="string"&&Em.test(t)}var ft=[];for(var ba=0;ba<256;++ba)ft.push((ba+256).toString(16).substr(1));function Pm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ft[t[e+0]]+ft[t[e+1]]+ft[t[e+2]]+ft[t[e+3]]+"-"+ft[t[e+4]]+ft[t[e+5]]+"-"+ft[t[e+6]]+ft[t[e+7]]+"-"+ft[t[e+8]]+ft[t[e+9]]+"-"+ft[t[e+10]]+ft[t[e+11]]+ft[t[e+12]]+ft[t[e+13]]+ft[t[e+14]]+ft[t[e+15]]).toLowerCase();if(!Am(n))throw TypeError("Stringified UUID is invalid");return n}function ex(t,e,n){t=t||{};var f=t.random||(t.rng||Om)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,e){n=n||0;for(var m=0;m<16;++m)e[n+m]=f[m];return e}return Pm(f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,f)=>{n?this.reject(n):this.resolve(f),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,f))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="FirebaseError";class no extends Error{constructor(e,n,f){super(n);this.code=e,this.customData=f,this.name=km,Object.setPrototypeOf(this,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vf.prototype.create)}}class Vf{constructor(e,n,f){this.service=e,this.serviceName=n,this.errors=f}create(e,...n){const f=n[0]||{},m=`${this.service}/${e}`,p=this.errors[e],y=p?Fm(p,f):"Error",h=`${this.serviceName}: ${y} (${m}).`;return new no(m,h,f)}}function Fm(t,e){return t.replace(Rm,(n,f)=>{const m=e[f];return m!=null?String(m):`<${f}?>`})}const Rm=/\{\$([^}]+)}/g;function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),f=Object.keys(e);for(const m of n){if(!f.includes(m))return!1;const p=t[m],y=e[m];if(Zc(p)&&Zc(y)){if(!Xa(p,y))return!1}else if(p!==y)return!1}for(const m of f)if(!n.includes(m))return!1;return!0}function Zc(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){return t&&t._delegate?t._delegate:t}class io{constructor(e,n,f){this.name=e,this.instanceFactory=n,this.type=f,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const f=new Dm;if(this.instancesDeferred.set(n,f),this.isInitialized(n)||this.shouldAutoInitialize())try{const m=this.getOrInitializeService({instanceIdentifier:n});m&&f.resolve(m)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const f=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),m=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(f)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:f})}catch(p){if(m)return null;throw p}else{if(m)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lm(e))try{this.getOrInitializeService({instanceIdentifier:Kn})}catch{}for(const[n,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(n);try{const p=this.getOrInitializeService({instanceIdentifier:m});f.resolve(p)}catch{}}}}clearInstance(e=Kn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kn){return this.instances.has(e)}getOptions(e=Kn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,f=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(f))throw Error(`${this.name}(${f}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const m=this.getOrInitializeService({instanceIdentifier:f,options:n});for(const[p,y]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(p);f===h&&y.resolve(m)}return m}onInit(e,n){var f;const m=this.normalizeInstanceIdentifier(n),p=(f=this.onInitCallbacks.get(m))!==null&&f!==void 0?f:new Set;p.add(e),this.onInitCallbacks.set(m,p);const y=this.instances.get(m);return y&&e(y,m),()=>{p.delete(e)}}invokeOnInitCallbacks(e,n){const f=this.onInitCallbacks.get(n);if(!!f)for(const m of f)try{m(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let f=this.instances.get(e);if(!f&&this.component&&(f=this.component.instanceFactory(this.container,{instanceIdentifier:Mm(e),options:n}),this.instances.set(e,f),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(f,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,f)}catch{}return f||null}normalizeInstanceIdentifier(e=Kn){return this.component?this.component.multipleInstances?e:Kn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mm(t){return t===Kn?void 0:t}function Lm(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Im(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const jm={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Nm=Ue.INFO,Um={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Wm=(t,e,...n)=>{if(e<t.logLevel)return;const f=new Date().toISOString(),m=Um[e];if(m)console[m](`[${f}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=Nm,this._logHandler=Wm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xm(n)){const f=n.getImmediate();return`${f.library}/${f.version}`}else return null}).filter(n=>n).join(" ")}}function Xm(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ya="@firebase/app",Qc="0.7.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Hm("@firebase/app"),Ym="@firebase/app-compat",Gm="@firebase/analytics-compat",Vm="@firebase/analytics",qm="@firebase/app-check-compat",Km="@firebase/app-check",Jm="@firebase/auth",Zm="@firebase/auth-compat",Qm="@firebase/database",$m="@firebase/database-compat",ev="@firebase/functions",tv="@firebase/functions-compat",nv="@firebase/installations",rv="@firebase/installations-compat",iv="@firebase/messaging",sv="@firebase/messaging-compat",ov="@firebase/performance",av="@firebase/performance-compat",lv="@firebase/remote-config",cv="@firebase/remote-config-compat",uv="@firebase/storage",fv="@firebase/storage-compat",hv="@firebase/firestore",dv="@firebase/firestore-compat",gv="firebase",pv="9.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",mv={[Ya]:"fire-core",[Ym]:"fire-core-compat",[Vm]:"fire-analytics",[Gm]:"fire-analytics-compat",[Km]:"fire-app-check",[qm]:"fire-app-check-compat",[Jm]:"fire-auth",[Zm]:"fire-auth-compat",[Qm]:"fire-rtdb",[$m]:"fire-rtdb-compat",[ev]:"fire-fn",[tv]:"fire-fn-compat",[nv]:"fire-iid",[rv]:"fire-iid-compat",[iv]:"fire-fcm",[sv]:"fire-fcm-compat",[ov]:"fire-perf",[av]:"fire-perf-compat",[lv]:"fire-rc",[cv]:"fire-rc-compat",[uv]:"fire-gcs",[fv]:"fire-gcs-compat",[hv]:"fire-fst",[dv]:"fire-fst-compat","fire-js":"fire-js",[gv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Map,Ga=new Map;function vv(t,e){try{t.container.addComponent(e)}catch(n){Fl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rl(t){const e=t.name;if(Ga.has(e))return Fl.debug(`There were multiple attempts to register component ${e}.`),!1;Ga.set(e,t);for(const n of Us.values())vv(n,t);return!0}function yv(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Ws=new Vf("app","Firebase",_v);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,f){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=f,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=pv;function tx(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),f=n.name;if(typeof f!="string"||!f)throw Ws.create("bad-app-name",{appName:String(f)});const m=Us.get(f);if(m){if(Xa(t,m.options)&&Xa(n,m.config))return m;throw Ws.create("duplicate-app",{appName:f})}const p=new Bm(f);for(const h of Ga.values())p.addComponent(h);const y=new bv(t,n,p);return Us.set(f,y),y}function Cv(t=qf){const e=Us.get(t);if(!e)throw Ws.create("no-app",{appName:t});return e}function kr(t,e,n){var f;let m=(f=mv[t])!==null&&f!==void 0?f:t;n&&(m+=`-${n}`);const p=m.match(/\s|\//),y=e.match(/\s|\//);if(p||y){const h=[`Unable to register library "${m}" with version "${e}":`];p&&h.push(`library name "${m}" contains illegal characters (whitespace or "/")`),p&&y&&h.push("and"),y&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fl.warn(h.join(" "));return}Rl(new io(`${m}-version`,()=>({library:m,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){Rl(new io("platform-logger",e=>new zm(e),"PRIVATE")),kr(Ya,Qc,t),kr(Ya,Qc,"esm2017"),kr("fire-js","")}Sv("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="firebasestorage.googleapis.com",Jf="storageBucket",Tv=2*60*1e3,xv=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve extends no{constructor(e,n){super(wa(e),`Firebase Storage: ${n} (${wa(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ve.prototype)}_codeEquals(e){return wa(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function wa(t){return"storage/"+t}function Il(){const t="An unknown error occurred, please check the error payload for server response.";return new Ve("unknown",t)}function Ov(t){return new Ve("object-not-found","Object '"+t+"' does not exist.")}function Ev(t){return new Ve("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Av(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ve("unauthenticated",t)}function Pv(){return new Ve("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Dv(t){return new Ve("unauthorized","User does not have permission to access '"+t+"'.")}function kv(){return new Ve("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Zf(){return new Ve("canceled","User canceled the upload/download.")}function Fv(t){return new Ve("invalid-url","Invalid URL '"+t+"'.")}function Rv(t){return new Ve("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Iv(){return new Ve("no-default-bucket","No default bucket found. Did you set the '"+Jf+"' property when initializing the app?")}function Qf(){return new Ve("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Mv(){return new Ve("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Lv(){return new Ve("no-download-url","The given file does not have any download URLs.")}function Va(t){return new Ve("invalid-argument",t)}function $f(){return new Ve("app-deleted","The Firebase app was deleted.")}function Bv(t){return new Ve("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Si(t,e){return new Ve("invalid-format","String does not match format '"+t+"': "+e)}function pi(t){throw new Ve("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let f;try{f=Mt.makeFromUrl(e,n)}catch{return new Mt(e,"")}if(f.path==="")return f;throw Rv(e)}static makeFromUrl(e,n){let f=null;const m="([A-Za-z0-9.\\-_]+)";function p(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const y="(/(.*))?$",h=new RegExp("^gs://"+m+y,"i"),r={bucket:1,path:3};function a(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",i=n.replace(/[.]/g,"\\."),o="(/([^?#]*).*)?$",s=new RegExp(`^https?://${i}/${c}/b/${m}/o${o}`,"i"),u={bucket:1,path:3},d=n===Kf?"(?:storage.googleapis.com|storage.cloud.google.com)":n,l="([^?#]*)",g=new RegExp(`^https?://${d}/${m}/${l}`,"i"),b=[{regex:h,indices:r,postModify:p},{regex:s,indices:u,postModify:a},{regex:g,indices:{bucket:1,path:2},postModify:a}];for(let _=0;_<b.length;_++){const w=b[_],S=w.regex.exec(e);if(S){const T=S[w.indices.bucket];let x=S[w.indices.path];x||(x=""),f=new Mt(T,x),w.postModify(f);break}}if(f==null)throw Fv(e);return f}}class jv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e,n){let f=1,m=null,p=null,y=!1,h=0;function r(){return h===2}let a=!1;function c(...l){a||(a=!0,e.apply(null,l))}function i(l){m=setTimeout(()=>{m=null,t(s,r())},l)}function o(){p&&clearTimeout(p)}function s(l,...g){if(a){o();return}if(l){o(),c.call(null,l,...g);return}if(r()||y){o(),c.call(null,l,...g);return}f<64&&(f*=2);let b;h===1?(h=2,b=0):b=(f+Math.random())*1e3,i(b)}let u=!1;function d(l){u||(u=!0,o(),!a&&(m!==null?(l||(h=2),clearTimeout(m),i(0)):l||(h=1)))}return i(0),p=setTimeout(()=>{y=!0,d(!0)},n),d}function Uv(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){return t!==void 0}function Hv(t){return typeof t=="function"}function zv(t){return typeof t=="object"&&!Array.isArray(t)}function so(t){return typeof t=="string"||t instanceof String}function $c(t){return Ml()&&t instanceof Blob}function Ml(){return typeof Blob!="undefined"}function eu(t,e,n,f){if(f<e)throw Va(`Invalid value for '${t}'. Expected ${e} or greater.`);if(f>n)throw Va(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e,n){let f=e;return n==null&&(f=`https://${e}`),`${n}://${f}/v0${t}`}function eh(t){const e=encodeURIComponent;let n="?";for(const f in t)if(t.hasOwnProperty(f)){const m=e(f)+"="+e(t[f]);n=n+m+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(tr||(tr={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,f,m,p,y,h,r,a,c,i){this.url_=e,this.method_=n,this.headers_=f,this.body_=m,this.successCodes_=p,this.additionalRetryCodes_=y,this.callback_=h,this.errorCallback_=r,this.timeout_=a,this.progressCallback_=c,this.connectionFactory_=i,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((o,s)=>{this.resolve_=o,this.reject_=s,this.start_()})}start_(){const e=(f,m)=>{if(m){f(!1,new ys(!1,null,!0));return}const p=this.connectionFactory_();this.pendingConnection_=p;const y=h=>{const r=h.loaded,a=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(r,a)};this.progressCallback_!==null&&p.addUploadProgressListener(y),p.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&p.removeUploadProgressListener(y),this.pendingConnection_=null;const h=p.getErrorCode()===tr.NO_ERROR,r=p.getStatus();if(!h||this.isRetryStatusCode_(r)){const c=p.getErrorCode()===tr.ABORT;f(!1,new ys(!1,null,c));return}const a=this.successCodes_.indexOf(r)!==-1;f(!0,new ys(a,p))})},n=(f,m)=>{const p=this.resolve_,y=this.reject_,h=m.connection;if(m.wasSuccessCode)try{const r=this.callback_(h,h.getResponse());Wv(r)?p(r):p()}catch(r){y(r)}else if(h!==null){const r=Il();r.serverResponse=h.getErrorText(),this.errorCallback_?y(this.errorCallback_(h,r)):y(r)}else if(m.canceled){const r=this.appDelete_?$f():Zf();y(r)}else{const r=kv();y(r)}};this.canceled_?n(!1,new ys(!1,null,!0)):this.backoffId_=Nv(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Uv(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,m=[408,429].indexOf(e)!==-1,p=this.additionalRetryCodes_.indexOf(e)!==-1;return n||m||p}}class ys{constructor(e,n,f){this.wasSuccessCode=e,this.connection=n,this.canceled=!!f}}function Yv(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Gv(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function Vv(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qv(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Kv(t,e,n,f,m,p){const y=eh(t.urlParams),h=t.url+y,r=Object.assign({},t.headers);return Vv(r,e),Yv(r,n),Gv(r,p),qv(r,f),new Xv(h,t.method,r,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function Zv(...t){const e=Jv();if(e!==void 0){const n=new e;for(let f=0;f<t.length;f++)n.append(t[f]);return n.getBlob()}else{if(Ml())return new Blob(t);throw new Ve("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function Qv(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ca{constructor(e,n){this.data=e,this.contentType=n||null}}function ey(t,e){switch(t){case nn.RAW:return new Ca(th(e));case nn.BASE64:case nn.BASE64URL:return new Ca(nh(t,e));case nn.DATA_URL:return new Ca(ny(e),ry(e))}throw Il()}function th(t){const e=[];for(let n=0;n<t.length;n++){let f=t.charCodeAt(n);if(f<=127)e.push(f);else if(f<=2047)e.push(192|f>>6,128|f&63);else if((f&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const p=f,y=t.charCodeAt(++n);f=65536|(p&1023)<<10|y&1023,e.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|f&63)}else(f&64512)===56320?e.push(239,191,189):e.push(224|f>>12,128|f>>6&63,128|f&63)}return new Uint8Array(e)}function ty(t){let e;try{e=decodeURIComponent(t)}catch{throw Si(nn.DATA_URL,"Malformed data URL.")}return th(e)}function nh(t,e){switch(t){case nn.BASE64:{const m=e.indexOf("-")!==-1,p=e.indexOf("_")!==-1;if(m||p)throw Si(t,"Invalid character '"+(m?"-":"_")+"' found: is it base64url encoded?");break}case nn.BASE64URL:{const m=e.indexOf("+")!==-1,p=e.indexOf("/")!==-1;if(m||p)throw Si(t,"Invalid character '"+(m?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$v(e)}catch{throw Si(t,"Invalid character found")}const f=new Uint8Array(n.length);for(let m=0;m<n.length;m++)f[m]=n.charCodeAt(m);return f}class rh{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Si(nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=n[1]||null;f!=null&&(this.base64=iy(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-7):f),this.rest=e.substring(e.indexOf(",")+1)}}function ny(t){const e=new rh(t);return e.base64?nh(nn.BASE64,e.rest):ty(e.rest)}function ry(t){return new rh(t).contentType}function iy(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){let f=0,m="";$c(e)?(this.data_=e,f=e.size,m=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),f=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),f=e.length),this.size_=f,this.type_=m}size(){return this.size_}type(){return this.type_}slice(e,n){if($c(this.data_)){const f=this.data_,m=Qv(f,e,n);return m===null?null:new xn(m)}else{const f=new Uint8Array(this.data_.buffer,e,n-e);return new xn(f,!0)}}static getBlob(...e){if(Ml()){const n=e.map(f=>f instanceof xn?f.data_:f);return new xn(Zv.apply(null,n))}else{const n=e.map(y=>so(y)?ey(nn.RAW,y).data:y.data_);let f=0;n.forEach(y=>{f+=y.byteLength});const m=new Uint8Array(f);let p=0;return n.forEach(y=>{for(let h=0;h<y.length;h++)m[p++]=y[h]}),new xn(m,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){let e;try{e=JSON.parse(t)}catch{return null}return zv(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oy(t,e){const n=e.split("/").filter(f=>f.length>0).join("/");return t.length===0?n:t+"/"+n}function sh(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){return e}class Et{constructor(e,n,f,m){this.server=e,this.local=n||e,this.writable=!!f,this.xform=m||ay}}let _s=null;function ly(t){return!so(t)||t.length<2?t:sh(t)}function oh(){if(_s)return _s;const t=[];t.push(new Et("bucket")),t.push(new Et("generation")),t.push(new Et("metageneration")),t.push(new Et("name","fullPath",!0));function e(p,y){return ly(y)}const n=new Et("name");n.xform=e,t.push(n);function f(p,y){return y!==void 0?Number(y):y}const m=new Et("size");return m.xform=f,t.push(m),t.push(new Et("timeCreated")),t.push(new Et("updated")),t.push(new Et("md5Hash",null,!0)),t.push(new Et("cacheControl",null,!0)),t.push(new Et("contentDisposition",null,!0)),t.push(new Et("contentEncoding",null,!0)),t.push(new Et("contentLanguage",null,!0)),t.push(new Et("contentType",null,!0)),t.push(new Et("metadata","customMetadata",!0)),_s=t,_s}function cy(t,e){function n(){const f=t.bucket,m=t.fullPath,p=new Mt(f,m);return e._makeStorageReference(p)}Object.defineProperty(t,"ref",{get:n})}function uy(t,e,n){const f={};f.type="file";const m=n.length;for(let p=0;p<m;p++){const y=n[p];f[y.local]=y.xform(f,e[y.server])}return cy(f,t),f}function ah(t,e,n){const f=ih(e);return f===null?null:uy(t,f,n)}function fy(t,e,n,f){const m=ih(e);if(m===null||!so(m.downloadTokens))return null;const p=m.downloadTokens;if(p.length===0)return null;const y=encodeURIComponent;return p.split(",").map(a=>{const c=t.bucket,i=t.fullPath,o="/b/"+y(c)+"/o/"+y(i),s=zi(o,n,f),u=eh({alt:"media",token:a});return s+u})[0]}function lh(t,e){const n={},f=e.length;for(let m=0;m<f;m++){const p=e[m];p.writable&&(n[p.server]=t[p.local])}return JSON.stringify(n)}class Vr{constructor(e,n,f,m){this.url=e,this.method=n,this.handler=f,this.timeout=m,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){if(!t)throw Il()}function Ll(t,e){function n(f,m){const p=ah(t,m,e);return mn(p!==null),p}return n}function hy(t,e){function n(f,m){const p=ah(t,m,e);return mn(p!==null),fy(p,m,t.host,t._protocol)}return n}function Xi(t){function e(n,f){let m;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?m=Pv():m=Av():n.getStatus()===402?m=Ev(t.bucket):n.getStatus()===403?m=Dv(t.path):m=f,m.serverResponse=f.serverResponse,m}return e}function ch(t){const e=Xi(t);function n(f,m){let p=e(f,m);return f.getStatus()===404&&(p=Ov(t.path)),p.serverResponse=m.serverResponse,p}return n}function dy(t,e,n){const f=e.fullServerUrl(),m=zi(f,t.host,t._protocol),p="GET",y=t.maxOperationRetryTime,h=new Vr(m,p,Ll(t,n),y);return h.errorHandler=ch(e),h}function gy(t,e,n){const f=e.fullServerUrl(),m=zi(f,t.host,t._protocol),p="GET",y=t.maxOperationRetryTime,h=new Vr(m,p,hy(t,n),y);return h.errorHandler=ch(e),h}function py(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uh(t,e,n){const f=Object.assign({},n);return f.fullPath=t.path,f.size=e.size(),f.contentType||(f.contentType=py(null,e)),f}function my(t,e,n,f,m){const p=e.bucketOnlyServerUrl(),y={"X-Goog-Upload-Protocol":"multipart"};function h(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const r=h();y["Content-Type"]="multipart/related; boundary="+r;const a=uh(e,f,m),c=lh(a,n),i="--"+r+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+r+`\r
Content-Type: `+a.contentType+`\r
\r
`,o=`\r
--`+r+"--",s=xn.getBlob(i,f,o);if(s===null)throw Qf();const u={name:a.fullPath},d=zi(p,t.host,t._protocol),l="POST",g=t.maxUploadRetryTime,v=new Vr(d,l,Ll(t,n),g);return v.urlParams=u,v.headers=y,v.body=s.uploadData(),v.errorHandler=Xi(e),v}class Hs{constructor(e,n,f,m){this.current=e,this.total=n,this.finalized=!!f,this.metadata=m||null}}function Bl(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{mn(!1)}return mn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function vy(t,e,n,f,m){const p=e.bucketOnlyServerUrl(),y=uh(e,f,m),h={name:y.fullPath},r=zi(p,t.host,t._protocol),a="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":y.contentType,"Content-Type":"application/json; charset=utf-8"},i=lh(y,n),o=t.maxUploadRetryTime;function s(d){Bl(d);let l;try{l=d.getResponseHeader("X-Goog-Upload-URL")}catch{mn(!1)}return mn(so(l)),l}const u=new Vr(r,a,s,o);return u.urlParams=h,u.headers=c,u.body=i,u.errorHandler=Xi(e),u}function yy(t,e,n,f){const m={"X-Goog-Upload-Command":"query"};function p(a){const c=Bl(a,["active","final"]);let i=null;try{i=a.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mn(!1)}i||mn(!1);const o=Number(i);return mn(!isNaN(o)),new Hs(o,f.size(),c==="final")}const y="POST",h=t.maxUploadRetryTime,r=new Vr(n,y,p,h);return r.headers=m,r.errorHandler=Xi(e),r}const tu=256*1024;function _y(t,e,n,f,m,p,y,h){const r=new Hs(0,0);if(y?(r.current=y.current,r.total=y.total):(r.current=0,r.total=f.size()),f.size()!==r.total)throw Mv();const a=r.total-r.current;let c=a;m>0&&(c=Math.min(c,m));const i=r.current,o=i+c,u={"X-Goog-Upload-Command":c===a?"upload, finalize":"upload","X-Goog-Upload-Offset":`${r.current}`},d=f.slice(i,o);if(d===null)throw Qf();function l(_,w){const S=Bl(_,["active","final"]),T=r.current+c,x=f.size();let D;return S==="final"?D=Ll(e,p)(_,w):D=null,new Hs(T,x,S==="final",D)}const g="POST",v=e.maxUploadRetryTime,b=new Vr(n,g,l,v);return b.headers=u,b.body=d.uploadData(),b.progressCallback=h||null,b.errorHandler=Xi(t),b}const kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sa(t){switch(t){case"running":case"pausing":case"canceling":return kt.RUNNING;case"paused":return kt.PAUSED;case"success":return kt.SUCCESS;case"canceled":return kt.CANCELED;case"error":return kt.ERROR;default:return kt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n,f){if(Hv(e)||n!=null||f!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=f!=null?f:void 0;else{const p=e;this.next=p.next,this.error=p.error,this.complete=p.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class wy{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,f,m){if(this.sent_)throw pi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),m!==void 0)for(const p in m)m.hasOwnProperty(p)&&this.xhr_.setRequestHeader(p,m[p].toString());return f!==void 0?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pi("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cy extends wy{initXhr(){this.xhr_.responseType="text"}}function Or(){return new Cy}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=f,this._mappings=oh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=m=>{this._request=void 0,this._chunkMultiplier=1,m._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=m,this._transition("error"))},this._metadataErrorHandler=m=>{this._request=void 0,m._codeEquals("canceled")?this.completeTransitions_():(this._error=m,this._transition("error"))},this._promise=new Promise((m,p)=>{this._resolve=m,this._reject=p,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,f])=>{switch(this._state){case"running":e(n,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const f=vy(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),m=this._ref.storage._makeRequest(f,Or,e,n);this._request=m,m.getPromise().then(p=>{this._request=void 0,this._uploadUrl=p,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,f)=>{const m=yy(this._ref.storage,this._ref._location,e,this._blob),p=this._ref.storage._makeRequest(m,Or,n,f);this._request=p,p.getPromise().then(y=>{y=y,this._request=void 0,this._updateProgress(y.current),this._needToFetchStatus=!1,y.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=tu*this._chunkMultiplier,n=new Hs(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((m,p)=>{let y;try{y=_y(this._ref._location,this._ref.storage,f,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(r){this._error=r,this._transition("error");return}const h=this._ref.storage._makeRequest(y,Or,m,p);this._request=h,h.getPromise().then(r=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(r.current),r.finalized?(this._metadata=r.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){tu*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const f=dy(this._ref.storage,this._ref._location,this._mappings),m=this._ref.storage._makeRequest(f,Or,e,n);this._request=m,m.getPromise().then(p=>{this._request=void 0,this._metadata=p,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const f=my(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),m=this._ref.storage._makeRequest(f,Or,e,n);this._request=m,m.getPromise().then(p=>{this._request=void 0,this._metadata=p,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Zf(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Sa(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,f,m){const p=new by(n||void 0,f||void 0,m||void 0);return this._addObserver(p),()=>{this._removeObserver(p)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Sa(this._state)){case kt.SUCCESS:_r(this._resolve.bind(null,this.snapshot))();break;case kt.CANCELED:case kt.ERROR:const n=this._reject;_r(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Sa(this._state)){case kt.RUNNING:case kt.PAUSED:e.next&&_r(e.next.bind(e,this.snapshot))();break;case kt.SUCCESS:e.complete&&_r(e.complete.bind(e))();break;case kt.CANCELED:case kt.ERROR:e.error&&_r(e.error.bind(e,this._error))();break;default:e.error&&_r(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this._service=e,n instanceof Mt?this._location=n:this._location=Mt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sr(e,n)}get root(){const e=new Mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sh(this._location.path)}get storage(){return this._service}get parent(){const e=sy(this._location.path);if(e===null)return null;const n=new Mt(this._location.bucket,e);return new sr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Bv(e)}}function Ty(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Sy(t,new xn(e),n)}function xy(t){t._throwIfRoot("getDownloadURL");const e=gy(t.storage,t._location,oh());return t.storage.makeRequestWithTokens(e,Or).then(n=>{if(n===null)throw Lv();return n})}function Oy(t,e){const n=oy(t._location.path,e),f=new Mt(t._location.bucket,n);return new sr(t.storage,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return/^[A-Za-z]+:\/\//.test(t)}function Ay(t,e){return new sr(t,e)}function fh(t,e){if(t instanceof jl){const n=t;if(n._bucket==null)throw Iv();const f=new sr(n,n._bucket);return e!=null?fh(f,e):f}else return e!==void 0?Oy(t,e):t}function Py(t,e){if(e&&Ey(e)){if(t instanceof jl)return Ay(t,e);throw Va("To use ref(service, url), the first argument must be a Storage instance.")}else return fh(t,e)}function nu(t,e){const n=e==null?void 0:e[Jf];return n==null?null:Mt.makeFromBucketSpec(n,t)}class jl{constructor(e,n,f,m,p){this.app=e,this._authProvider=n,this._appCheckProvider=f,this._url=m,this._firebaseVersion=p,this._bucket=null,this._host=Kf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Tv,this._maxUploadRetryTime=xv,this._requests=new Set,m!=null?this._bucket=Mt.makeFromBucketSpec(m,this._host):this._bucket=nu(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mt.makeFromBucketSpec(this._url,e):this._bucket=nu(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eu("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eu("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sr(this,e)}_makeRequest(e,n,f,m){if(this._deleted)return new jv($f());{const p=Kv(e,this._appId,f,m,n,this._firebaseVersion);return this._requests.add(p),p.getPromise().then(()=>this._requests.delete(p),()=>this._requests.delete(p)),p}}async makeRequestWithTokens(e,n){const[f,m]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,f,m).getPromise()}}const ru="@firebase/storage",iu="0.9.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="storage";function nx(t,e,n){return t=ro(t),Ty(t,e,n)}function rx(t){return t=ro(t),xy(t)}function ix(t,e){return t=ro(t),Py(t,e)}function sx(t=Cv(),e){return t=ro(t),yv(t,hh).getImmediate({identifier:e})}function Dy(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),f=t.getProvider("auth-internal"),m=t.getProvider("app-check-internal");return new jl(n,f,m,e,wv)}function ky(){Rl(new io(hh,Dy,"PUBLIC").setMultipleInstances(!0)),kr(ru,iu,""),kr(ru,iu,"esm2017")}ky();var Fy="firebase",Ry="9.6.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(Fy,Ry,"app");var dh={},Nl={exports:{}},gh=function(e,n){return function(){for(var m=new Array(arguments.length),p=0;p<m.length;p++)m[p]=arguments[p];return e.apply(n,m)}},Iy=gh,ar=Object.prototype.toString;function Ul(t){return ar.call(t)==="[object Array]"}function qa(t){return typeof t=="undefined"}function My(t){return t!==null&&!qa(t)&&t.constructor!==null&&!qa(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ly(t){return ar.call(t)==="[object ArrayBuffer]"}function By(t){return typeof FormData!="undefined"&&t instanceof FormData}function jy(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Ny(t){return typeof t=="string"}function Uy(t){return typeof t=="number"}function ph(t){return t!==null&&typeof t=="object"}function Ds(t){if(ar.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Wy(t){return ar.call(t)==="[object Date]"}function Hy(t){return ar.call(t)==="[object File]"}function zy(t){return ar.call(t)==="[object Blob]"}function mh(t){return ar.call(t)==="[object Function]"}function Xy(t){return ph(t)&&mh(t.pipe)}function Yy(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Gy(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Vy(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Wl(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Ul(t))for(var n=0,f=t.length;n<f;n++)e.call(null,t[n],n,t);else for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&e.call(null,t[m],m,t)}function Ka(){var t={};function e(m,p){Ds(t[p])&&Ds(m)?t[p]=Ka(t[p],m):Ds(m)?t[p]=Ka({},m):Ul(m)?t[p]=m.slice():t[p]=m}for(var n=0,f=arguments.length;n<f;n++)Wl(arguments[n],e);return t}function qy(t,e,n){return Wl(e,function(m,p){n&&typeof m=="function"?t[p]=Iy(m,n):t[p]=m}),t}function Ky(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Bt={isArray:Ul,isArrayBuffer:Ly,isBuffer:My,isFormData:By,isArrayBufferView:jy,isString:Ny,isNumber:Uy,isObject:ph,isPlainObject:Ds,isUndefined:qa,isDate:Wy,isFile:Hy,isBlob:zy,isFunction:mh,isStream:Xy,isURLSearchParams:Yy,isStandardBrowserEnv:Vy,forEach:Wl,merge:Ka,extend:qy,trim:Gy,stripBOM:Ky},br=Bt;function su(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var vh=function(e,n,f){if(!n)return e;var m;if(f)m=f(n);else if(br.isURLSearchParams(n))m=n.toString();else{var p=[];br.forEach(n,function(r,a){r===null||typeof r=="undefined"||(br.isArray(r)?a=a+"[]":r=[r],br.forEach(r,function(i){br.isDate(i)?i=i.toISOString():br.isObject(i)&&(i=JSON.stringify(i)),p.push(su(a)+"="+su(i))}))}),m=p.join("&")}if(m){var y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+m}return e},Jy=Bt;function oo(){this.handlers=[]}oo.prototype.use=function(e,n,f){return this.handlers.push({fulfilled:e,rejected:n,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1};oo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};oo.prototype.forEach=function(e){Jy.forEach(this.handlers,function(f){f!==null&&e(f)})};var Zy=oo,Qy=Bt,$y=function(e,n){Qy.forEach(e,function(m,p){p!==n&&p.toUpperCase()===n.toUpperCase()&&(e[n]=m,delete e[p])})},yh=function(e,n,f,m,p){return e.config=n,f&&(e.code=f),e.request=m,e.response=p,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},e_=yh,_h=function(e,n,f,m,p){var y=new Error(e);return e_(y,n,f,m,p)},t_=_h,n_=function(e,n,f){var m=f.config.validateStatus;!f.status||!m||m(f.status)?e(f):n(t_("Request failed with status code "+f.status,f.config,null,f.request,f))},bs=Bt,r_=bs.isStandardBrowserEnv()?function(){return{write:function(n,f,m,p,y,h){var r=[];r.push(n+"="+encodeURIComponent(f)),bs.isNumber(m)&&r.push("expires="+new Date(m).toGMTString()),bs.isString(p)&&r.push("path="+p),bs.isString(y)&&r.push("domain="+y),h===!0&&r.push("secure"),document.cookie=r.join("; ")},read:function(n){var f=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),i_=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},s_=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},o_=i_,a_=s_,l_=function(e,n){return e&&!o_(n)?a_(e,n):n},Ta=Bt,c_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],u_=function(e){var n={},f,m,p;return e&&Ta.forEach(e.split(`
`),function(h){if(p=h.indexOf(":"),f=Ta.trim(h.substr(0,p)).toLowerCase(),m=Ta.trim(h.substr(p+1)),f){if(n[f]&&c_.indexOf(f)>=0)return;f==="set-cookie"?n[f]=(n[f]?n[f]:[]).concat([m]):n[f]=n[f]?n[f]+", "+m:m}}),n},ou=Bt,f_=ou.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),f;function m(p){var y=p;return e&&(n.setAttribute("href",y),y=n.href),n.setAttribute("href",y),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return f=m(window.location.href),function(y){var h=ou.isString(y)?m(y):y;return h.protocol===f.protocol&&h.host===f.host}}():function(){return function(){return!0}}(),ws=Bt,h_=n_,d_=r_,g_=vh,p_=l_,m_=u_,v_=f_,xa=_h,au=function(e){return new Promise(function(f,m){var p=e.data,y=e.headers,h=e.responseType;ws.isFormData(p)&&delete y["Content-Type"];var r=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(a+":"+c)}var i=p_(e.baseURL,e.url);r.open(e.method.toUpperCase(),g_(i,e.params,e.paramsSerializer),!0),r.timeout=e.timeout;function o(){if(!!r){var u="getAllResponseHeaders"in r?m_(r.getAllResponseHeaders()):null,d=!h||h==="text"||h==="json"?r.responseText:r.response,l={data:d,status:r.status,statusText:r.statusText,headers:u,config:e,request:r};h_(f,m,l),r=null}}if("onloadend"in r?r.onloadend=o:r.onreadystatechange=function(){!r||r.readyState!==4||r.status===0&&!(r.responseURL&&r.responseURL.indexOf("file:")===0)||setTimeout(o)},r.onabort=function(){!r||(m(xa("Request aborted",e,"ECONNABORTED",r)),r=null)},r.onerror=function(){m(xa("Network Error",e,null,r)),r=null},r.ontimeout=function(){var d="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),m(xa(d,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",r)),r=null},ws.isStandardBrowserEnv()){var s=(e.withCredentials||v_(i))&&e.xsrfCookieName?d_.read(e.xsrfCookieName):void 0;s&&(y[e.xsrfHeaderName]=s)}"setRequestHeader"in r&&ws.forEach(y,function(d,l){typeof p=="undefined"&&l.toLowerCase()==="content-type"?delete y[l]:r.setRequestHeader(l,d)}),ws.isUndefined(e.withCredentials)||(r.withCredentials=!!e.withCredentials),h&&h!=="json"&&(r.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&r.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&r.upload&&r.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(d){!r||(r.abort(),m(d),r=null)}),p||(p=null),r.send(p)})},dt=Bt,lu=$y,y_=yh,__={"Content-Type":"application/x-www-form-urlencoded"};function cu(t,e){!dt.isUndefined(t)&&dt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function b_(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=au),t}function w_(t,e,n){if(dt.isString(t))try{return(e||JSON.parse)(t),dt.trim(t)}catch(f){if(f.name!=="SyntaxError")throw f}return(n||JSON.stringify)(t)}var ao={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:b_(),transformRequest:[function(e,n){return lu(n,"Accept"),lu(n,"Content-Type"),dt.isFormData(e)||dt.isArrayBuffer(e)||dt.isBuffer(e)||dt.isStream(e)||dt.isFile(e)||dt.isBlob(e)?e:dt.isArrayBufferView(e)?e.buffer:dt.isURLSearchParams(e)?(cu(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):dt.isObject(e)||n&&n["Content-Type"]==="application/json"?(cu(n,"application/json"),w_(e)):e}],transformResponse:[function(e){var n=this.transitional,f=n&&n.silentJSONParsing,m=n&&n.forcedJSONParsing,p=!f&&this.responseType==="json";if(p||m&&dt.isString(e)&&e.length)try{return JSON.parse(e)}catch(y){if(p)throw y.name==="SyntaxError"?y_(y,this,"E_JSON_PARSE"):y}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};ao.headers={common:{Accept:"application/json, text/plain, */*"}};dt.forEach(["delete","get","head"],function(e){ao.headers[e]={}});dt.forEach(["post","put","patch"],function(e){ao.headers[e]=dt.merge(__)});var Hl=ao,C_=Bt,S_=Hl,T_=function(e,n,f){var m=this||S_;return C_.forEach(f,function(y){e=y.call(m,e,n)}),e},bh=function(e){return!!(e&&e.__CANCEL__)},uu=Bt,Oa=T_,x_=bh,O_=Hl;function Ea(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var E_=function(e){Ea(e),e.headers=e.headers||{},e.data=Oa.call(e,e.data,e.headers,e.transformRequest),e.headers=uu.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),uu.forEach(["delete","get","head","post","put","patch","common"],function(m){delete e.headers[m]});var n=e.adapter||O_.adapter;return n(e).then(function(m){return Ea(e),m.data=Oa.call(e,m.data,m.headers,e.transformResponse),m},function(m){return x_(m)||(Ea(e),m&&m.response&&(m.response.data=Oa.call(e,m.response.data,m.response.headers,e.transformResponse))),Promise.reject(m)})},bt=Bt,wh=function(e,n){n=n||{};var f={},m=["url","method","data"],p=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function r(o,s){return bt.isPlainObject(o)&&bt.isPlainObject(s)?bt.merge(o,s):bt.isPlainObject(s)?bt.merge({},s):bt.isArray(s)?s.slice():s}function a(o){bt.isUndefined(n[o])?bt.isUndefined(e[o])||(f[o]=r(void 0,e[o])):f[o]=r(e[o],n[o])}bt.forEach(m,function(s){bt.isUndefined(n[s])||(f[s]=r(void 0,n[s]))}),bt.forEach(p,a),bt.forEach(y,function(s){bt.isUndefined(n[s])?bt.isUndefined(e[s])||(f[s]=r(void 0,e[s])):f[s]=r(void 0,n[s])}),bt.forEach(h,function(s){s in n?f[s]=r(e[s],n[s]):s in e&&(f[s]=r(void 0,e[s]))});var c=m.concat(p).concat(y).concat(h),i=Object.keys(e).concat(Object.keys(n)).filter(function(s){return c.indexOf(s)===-1});return bt.forEach(i,a),f};const A_="axios",P_="0.21.4",D_="Promise based HTTP client for the browser and node.js",k_="index.js",F_={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},R_={type:"git",url:"https://github.com/axios/axios.git"},I_=["xhr","http","ajax","promise","node"],M_="Matt Zabriskie",L_="MIT",B_={url:"https://github.com/axios/axios/issues"},j_="https://axios-http.com",N_={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},U_={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},W_="dist/axios.min.js",H_="dist/axios.min.js",z_="./index.d.ts",X_={"follow-redirects":"^1.14.0"},Y_=[{path:"./dist/axios.min.js",threshold:"5kB"}];var G_={name:A_,version:P_,description:D_,main:k_,scripts:F_,repository:R_,keywords:I_,author:M_,license:L_,bugs:B_,homepage:j_,devDependencies:N_,browser:U_,jsdelivr:W_,unpkg:H_,typings:z_,dependencies:X_,bundlesize:Y_},Ch=G_,zl={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){zl[t]=function(f){return typeof f===t||"a"+(e<1?"n ":" ")+t}});var fu={},V_=Ch.version.split(".");function Sh(t,e){for(var n=e?e.split("."):V_,f=t.split("."),m=0;m<3;m++){if(n[m]>f[m])return!0;if(n[m]<f[m])return!1}return!1}zl.transitional=function(e,n,f){var m=n&&Sh(n);function p(y,h){return"[Axios v"+Ch.version+"] Transitional option '"+y+"'"+h+(f?". "+f:"")}return function(y,h,r){if(e===!1)throw new Error(p(h," has been removed in "+n));return m&&!fu[h]&&(fu[h]=!0,console.warn(p(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(y,h,r):!0}};function q_(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var f=Object.keys(t),m=f.length;m-- >0;){var p=f[m],y=e[p];if(y){var h=t[p],r=h===void 0||y(h,p,t);if(r!==!0)throw new TypeError("option "+p+" must be "+r);continue}if(n!==!0)throw Error("Unknown option "+p)}}var K_={isOlderVersion:Sh,assertOptions:q_,validators:zl},Th=Bt,J_=vh,hu=Zy,du=E_,lo=wh,xh=K_,wr=xh.validators;function Yi(t){this.defaults=t,this.interceptors={request:new hu,response:new hu}}Yi.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=lo(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;n!==void 0&&xh.assertOptions(n,{silentJSONParsing:wr.transitional(wr.boolean,"1.0.0"),forcedJSONParsing:wr.transitional(wr.boolean,"1.0.0"),clarifyTimeoutError:wr.transitional(wr.boolean,"1.0.0")},!1);var f=[],m=!0;this.interceptors.request.forEach(function(o){typeof o.runWhen=="function"&&o.runWhen(e)===!1||(m=m&&o.synchronous,f.unshift(o.fulfilled,o.rejected))});var p=[];this.interceptors.response.forEach(function(o){p.push(o.fulfilled,o.rejected)});var y;if(!m){var h=[du,void 0];for(Array.prototype.unshift.apply(h,f),h=h.concat(p),y=Promise.resolve(e);h.length;)y=y.then(h.shift(),h.shift());return y}for(var r=e;f.length;){var a=f.shift(),c=f.shift();try{r=a(r)}catch(i){c(i);break}}try{y=du(r)}catch(i){return Promise.reject(i)}for(;p.length;)y=y.then(p.shift(),p.shift());return y};Yi.prototype.getUri=function(e){return e=lo(this.defaults,e),J_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Th.forEach(["delete","get","head","options"],function(e){Yi.prototype[e]=function(n,f){return this.request(lo(f||{},{method:e,url:n,data:(f||{}).data}))}});Th.forEach(["post","put","patch"],function(e){Yi.prototype[e]=function(n,f,m){return this.request(lo(m||{},{method:e,url:n,data:f}))}});var Z_=Yi;function Xl(t){this.message=t}Xl.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Xl.prototype.__CANCEL__=!0;var Oh=Xl,Q_=Oh;function zs(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(m){e=m});var n=this;t(function(m){n.reason||(n.reason=new Q_(m),e(n.reason))})}zs.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};zs.source=function(){var e,n=new zs(function(m){e=m});return{token:n,cancel:e}};var $_=zs,e0=function(e){return function(f){return e.apply(null,f)}},t0=function(e){return typeof e=="object"&&e.isAxiosError===!0},gu=Bt,n0=gh,ks=Z_,r0=wh,i0=Hl;function Eh(t){var e=new ks(t),n=n0(ks.prototype.request,e);return gu.extend(n,ks.prototype,e),gu.extend(n,e),n}var Vt=Eh(i0);Vt.Axios=ks;Vt.create=function(e){return Eh(r0(Vt.defaults,e))};Vt.Cancel=Oh;Vt.CancelToken=$_;Vt.isCancel=bh;Vt.all=function(e){return Promise.all(e)};Vt.spread=e0;Vt.isAxiosError=t0;Nl.exports=Vt;Nl.exports.default=Vt;var Ah=Nl.exports,Ja={exports:{}},s0=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ph=function(e){var n=e,f=e.indexOf("["),m=e.indexOf("]");f!=-1&&m!=-1&&(e=e.substring(0,f)+e.substring(f,m).replace(/:/g,";")+e.substring(m,e.length));for(var p=s0.exec(e||""),y={},h=14;h--;)y[o0[h]]=p[h]||"";return f!=-1&&m!=-1&&(y.source=n,y.host=y.host.substring(1,y.host.length-1).replace(/;/g,":"),y.authority=y.authority.replace("[","").replace("]","").replace(/;/g,":"),y.ipv6uri=!0),y.pathNames=a0(y,y.path),y.queryKey=l0(y,y.query),y};function a0(t,e){var n=/\/{2,9}/g,f=e.replace(n,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&f.splice(0,1),e.substr(e.length-1,1)=="/"&&f.splice(f.length-1,1),f}function l0(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,m,p){m&&(n[m]=p)}),n}var Nr={exports:{}},Za={exports:{}},Ei=1e3,Ai=Ei*60,Pi=Ai*60,Di=Pi*24,c0=Di*365.25,u0=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return f0(t);if(n==="number"&&isNaN(t)===!1)return e.long?d0(t):h0(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function f0(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return n*c0;case"days":case"day":case"d":return n*Di;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Pi;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ai;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ei;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function h0(t){return t>=Di?Math.round(t/Di)+"d":t>=Pi?Math.round(t/Pi)+"h":t>=Ai?Math.round(t/Ai)+"m":t>=Ei?Math.round(t/Ei)+"s":t+"ms"}function d0(t){return Cs(t,Di,"day")||Cs(t,Pi,"hour")||Cs(t,Ai,"minute")||Cs(t,Ei,"second")||t+" ms"}function Cs(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=r,e.disable=y,e.enable=p,e.enabled=h,e.humanize=u0,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(a){var c=0,i;for(i in a)c=(c<<5)-c+a.charCodeAt(i),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function i(){if(!!i.enabled){var o=i,s=+new Date,u=s-(c||s);o.diff=u,o.prev=c,o.curr=s,c=s;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;g++;var w=e.formatters[_];if(typeof w=="function"){var S=d[g];b=w.call(o,S),d.splice(g,1),g--}return b}),e.formatArgs.call(o,d);var v=i.log||e.log||console.log.bind(console);v.apply(o,d)}}return i.namespace=a,i.enabled=e.enabled(a),i.useColors=e.useColors(),i.color=n(a),i.destroy=m,typeof e.init=="function"&&e.init(i),e.instances.push(i),i}function m(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function p(a){e.save(a),e.names=[],e.skips=[];var c,i=(typeof a=="string"?a:"").split(/[\s,]+/),o=i.length;for(c=0;c<o;c++)!i[c]||(a=i[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var s=e.instances[c];s.enabled=e.enabled(s.namespace)}}function y(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,i;for(c=0,i=e.skips.length;c<i;c++)if(e.skips[c].test(a))return!1;for(c=0,i=e.names.length;c<i;c++)if(e.names[c].test(a))return!0;return!1}function r(a){return a instanceof Error?a.stack||a.message:a}})(Za,Za.exports);(function(t,e){e=t.exports=Za.exports,e.log=m,e.formatArgs=f,e.save=p,e.load=y,e.useColors=n,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(r){try{return JSON.stringify(r)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(r){var a=this.useColors;if(r[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+r[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;r.splice(1,0,c,"color: inherit");var i=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(i++,s==="%c"&&(o=i))}),r.splice(o,0,c)}}function m(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function p(r){try{r==null?e.storage.removeItem("debug"):e.storage.debug=r}catch{}}function y(){var r;try{r=e.storage.debug}catch{}return!r&&typeof process!="undefined"&&"env"in process&&(r={}.DEBUG),r}e.enable(y());function h(){try{return window.localStorage}catch{}}})(Nr,Nr.exports);var g0=Ph,pu=Nr.exports("socket.io-client:url"),p0=m0;function m0(t,e){var n=t;e=e||typeof location!="undefined"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(pu("protocol-less url %s",t),typeof e!="undefined"?t=e.protocol+"//"+t:t="https://"+t),pu("parse %s",t),n=g0(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var f=n.host.indexOf(":")!==-1,m=f?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+m+":"+n.port,n.href=n.protocol+"://"+m+(e&&e.port===n.port?"":":"+n.port),n}var co={},Qa={exports:{}},$a={exports:{}},ki=1e3,Fi=ki*60,Ri=Fi*60,Ii=Ri*24,v0=Ii*365.25,y0=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return _0(t);if(n==="number"&&isNaN(t)===!1)return e.long?w0(t):b0(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function _0(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return n*v0;case"days":case"day":case"d":return n*Ii;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ri;case"minutes":case"minute":case"mins":case"min":case"m":return n*Fi;case"seconds":case"second":case"secs":case"sec":case"s":return n*ki;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function b0(t){return t>=Ii?Math.round(t/Ii)+"d":t>=Ri?Math.round(t/Ri)+"h":t>=Fi?Math.round(t/Fi)+"m":t>=ki?Math.round(t/ki)+"s":t+"ms"}function w0(t){return Ss(t,Ii,"day")||Ss(t,Ri,"hour")||Ss(t,Fi,"minute")||Ss(t,ki,"second")||t+" ms"}function Ss(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=r,e.disable=y,e.enable=p,e.enabled=h,e.humanize=y0,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(a){var c=0,i;for(i in a)c=(c<<5)-c+a.charCodeAt(i),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function i(){if(!!i.enabled){var o=i,s=+new Date,u=s-(c||s);o.diff=u,o.prev=c,o.curr=s,c=s;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;g++;var w=e.formatters[_];if(typeof w=="function"){var S=d[g];b=w.call(o,S),d.splice(g,1),g--}return b}),e.formatArgs.call(o,d);var v=i.log||e.log||console.log.bind(console);v.apply(o,d)}}return i.namespace=a,i.enabled=e.enabled(a),i.useColors=e.useColors(),i.color=n(a),i.destroy=m,typeof e.init=="function"&&e.init(i),e.instances.push(i),i}function m(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function p(a){e.save(a),e.names=[],e.skips=[];var c,i=(typeof a=="string"?a:"").split(/[\s,]+/),o=i.length;for(c=0;c<o;c++)!i[c]||(a=i[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var s=e.instances[c];s.enabled=e.enabled(s.namespace)}}function y(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,i;for(c=0,i=e.skips.length;c<i;c++)if(e.skips[c].test(a))return!1;for(c=0,i=e.names.length;c<i;c++)if(e.names[c].test(a))return!0;return!1}function r(a){return a instanceof Error?a.stack||a.message:a}})($a,$a.exports);(function(t,e){e=t.exports=$a.exports,e.log=m,e.formatArgs=f,e.save=p,e.load=y,e.useColors=n,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(r){try{return JSON.stringify(r)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(r){var a=this.useColors;if(r[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+r[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;r.splice(1,0,c,"color: inherit");var i=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(i++,s==="%c"&&(o=i))}),r.splice(o,0,c)}}function m(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function p(r){try{r==null?e.storage.removeItem("debug"):e.storage.debug=r}catch{}}function y(){var r;try{r=e.storage.debug}catch{}return!r&&typeof process!="undefined"&&"env"in process&&(r={}.DEBUG),r}e.enable(y());function h(){try{return window.localStorage}catch{}}})(Qa,Qa.exports);var lr={exports:{}};(function(t){t.exports=e;function e(f){if(f)return n(f)}function n(f){for(var m in e.prototype)f[m]=e.prototype[m];return f}e.prototype.on=e.prototype.addEventListener=function(f,m){return this._callbacks=this._callbacks||{},(this._callbacks["$"+f]=this._callbacks["$"+f]||[]).push(m),this},e.prototype.once=function(f,m){function p(){this.off(f,p),m.apply(this,arguments)}return p.fn=m,this.on(f,p),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(f,m){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var p=this._callbacks["$"+f];if(!p)return this;if(arguments.length==1)return delete this._callbacks["$"+f],this;for(var y,h=0;h<p.length;h++)if(y=p[h],y===m||y.fn===m){p.splice(h,1);break}return p.length===0&&delete this._callbacks["$"+f],this},e.prototype.emit=function(f){this._callbacks=this._callbacks||{};for(var m=new Array(arguments.length-1),p=this._callbacks["$"+f],y=1;y<arguments.length;y++)m[y-1]=arguments[y];if(p){p=p.slice(0);for(var y=0,h=p.length;y<h;++y)p[y].apply(this,m)}return this},e.prototype.listeners=function(f){return this._callbacks=this._callbacks||{},this._callbacks["$"+f]||[]},e.prototype.hasListeners=function(f){return!!this.listeners(f).length}})(lr);var uo={},C0={}.toString,Dh=Array.isArray||function(t){return C0.call(t)=="[object Array]"},kh=O0,S0=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",T0=typeof ArrayBuffer=="function",x0=function(t){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function O0(t){return S0&&Buffer.isBuffer(t)||T0&&(t instanceof ArrayBuffer||x0(t))}var Yl=Dh,Fh=kh,Rh=Object.prototype.toString,E0=typeof Blob=="function"||typeof Blob!="undefined"&&Rh.call(Blob)==="[object BlobConstructor]",A0=typeof File=="function"||typeof File!="undefined"&&Rh.call(File)==="[object FileConstructor]";uo.deconstructPacket=function(t){var e=[],n=t.data,f=t;return f.data=el(n,e),f.attachments=e.length,{packet:f,buffers:e}};function el(t,e){if(!t)return t;if(Fh(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Yl(t)){for(var f=new Array(t.length),m=0;m<t.length;m++)f[m]=el(t[m],e);return f}else if(typeof t=="object"&&!(t instanceof Date)){var f={};for(var p in t)f[p]=el(t[p],e);return f}return t}uo.reconstructPacket=function(t,e){return t.data=tl(t.data,e),t.attachments=void 0,t};function tl(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Yl(t))for(var n=0;n<t.length;n++)t[n]=tl(t[n],e);else if(typeof t=="object")for(var f in t)t[f]=tl(t[f],e);return t}uo.removeBlobs=function(t,e){function n(p,y,h){if(!p)return p;if(E0&&p instanceof Blob||A0&&p instanceof File){f++;var r=new FileReader;r.onload=function(){h?h[y]=this.result:m=this.result,--f||e(m)},r.readAsArrayBuffer(p)}else if(Yl(p))for(var a=0;a<p.length;a++)n(p[a],a,p);else if(typeof p=="object"&&!Fh(p))for(var c in p)n(p[c],c,p)}var f=0,m=t;n(m),f||e(m)};(function(t){var e=Qa.exports("socket.io-parser"),n=lr.exports,f=uo,m=Dh,p=kh;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=y,t.Decoder=i;function y(){}var h=t.ERROR+'"encode error"';y.prototype.encode=function(l,g){if(e("encoding packet %j",l),t.BINARY_EVENT===l.type||t.BINARY_ACK===l.type)c(l,g);else{var v=r(l);g([v])}};function r(l){var g=""+l.type;if((t.BINARY_EVENT===l.type||t.BINARY_ACK===l.type)&&(g+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(g+=l.nsp+","),l.id!=null&&(g+=l.id),l.data!=null){var v=a(l.data);if(v!==!1)g+=v;else return h}return e("encoded %j as %s",l,g),g}function a(l){try{return JSON.stringify(l)}catch{return!1}}function c(l,g){function v(b){var _=f.deconstructPacket(b),w=r(_.packet),S=_.buffers;S.unshift(w),g(S)}f.removeBlobs(l,v)}function i(){this.reconstructor=null}n(i.prototype),i.prototype.add=function(l){var g;if(typeof l=="string")g=o(l),t.BINARY_EVENT===g.type||t.BINARY_ACK===g.type?(this.reconstructor=new u(g),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",g)):this.emit("decoded",g);else if(p(l)||l.base64)if(this.reconstructor)g=this.reconstructor.takeBinaryData(l),g&&(this.reconstructor=null,this.emit("decoded",g));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+l)};function o(l){var g=0,v={type:Number(l.charAt(0))};if(t.types[v.type]==null)return d("unknown packet type "+v.type);if(t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type){for(var b=g+1;l.charAt(++g)!=="-"&&g!=l.length;);var _=l.substring(b,g);if(_!=Number(_)||l.charAt(g)!=="-")throw new Error("Illegal attachments");v.attachments=Number(_)}if(l.charAt(g+1)==="/"){for(var b=g+1;++g;){var w=l.charAt(g);if(w===","||g===l.length)break}v.nsp=l.substring(b,g)}else v.nsp="/";var S=l.charAt(g+1);if(S!==""&&Number(S)==S){for(var b=g+1;++g;){var w=l.charAt(g);if(w==null||Number(w)!=w){--g;break}if(g===l.length)break}v.id=Number(l.substring(b,g+1))}if(l.charAt(++g)){var T=s(l.substr(g)),x=T!==!1&&(v.type===t.ERROR||m(T));if(x)v.data=T;else return d("invalid payload")}return e("decoded %s as %j",l,v),v}function s(l){try{return JSON.parse(l)}catch{return!1}}i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function u(l){this.reconPack=l,this.buffers=[]}u.prototype.takeBinaryData=function(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){var g=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),g}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function d(l){return{type:t.ERROR,data:"parser error: "+l}}})(co);var Gl={exports:{}},fo={},nl={exports:{}};try{nl.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{nl.exports=!1}var Vl=function(){return typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")()}(),P0=nl.exports,D0=Vl,ql=function(t){var e=t.xdomain,n=t.xscheme,f=t.enablesXDR;try{if(typeof XMLHttpRequest!="undefined"&&(!e||P0))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest!="undefined"&&!n&&f)return new XDomainRequest}catch{}if(!e)try{return new D0[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Kl={exports:{}},cr={},k0=Object.keys||function(e){var n=[],f=Object.prototype.hasOwnProperty;for(var m in e)f.call(e,m)&&n.push(m);return n},F0={}.toString,R0=Array.isArray||function(t){return F0.call(t)=="[object Array]"},I0=R0,Ih=Object.prototype.toString,M0=typeof Blob=="function"||typeof Blob!="undefined"&&Ih.call(Blob)==="[object BlobConstructor]",L0=typeof File=="function"||typeof File!="undefined"&&Ih.call(File)==="[object FileConstructor]",Mh=Fs;function Fs(t){if(!t||typeof t!="object")return!1;if(I0(t)){for(var e=0,n=t.length;e<n;e++)if(Fs(t[e]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(t)||typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||M0&&t instanceof Blob||L0&&t instanceof File)return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Fs(t.toJSON(),!0);for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f)&&Fs(t[f]))return!0;return!1}var B0=function(t,e,n){var f=t.byteLength;if(e=e||0,n=n||f,t.slice)return t.slice(e,n);if(e<0&&(e+=f),n<0&&(n+=f),n>f&&(n=f),e>=f||e>=n||f===0)return new ArrayBuffer(0);for(var m=new Uint8Array(t),p=new Uint8Array(n-e),y=e,h=0;y<n;y++,h++)p[h]=m[y];return p.buffer},j0=N0;function N0(t,e,n){var f=!1;return n=n||U0,m.count=t,t===0?e():m;function m(p,y){if(m.count<=0)throw new Error("after called too many times");--m.count,p?(f=!0,e(p),e=n):m.count===0&&!f&&e(null,y)}}function U0(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var On=String.fromCharCode;function Lh(t){for(var e=[],n=0,f=t.length,m,p;n<f;)m=t.charCodeAt(n++),m>=55296&&m<=56319&&n<f?(p=t.charCodeAt(n++),(p&64512)==56320?e.push(((m&1023)<<10)+(p&1023)+65536):(e.push(m),n--)):e.push(m);return e}function W0(t){for(var e=t.length,n=-1,f,m="";++n<e;)f=t[n],f>65535&&(f-=65536,m+=On(f>>>10&1023|55296),f=56320|f&1023),m+=On(f);return m}function Bh(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Aa(t,e){return On(t>>e&63|128)}function H0(t,e){if((t&4294967168)==0)return On(t);var n="";return(t&4294965248)==0?n=On(t>>6&31|192):(t&4294901760)==0?(Bh(t,e)||(t=65533),n=On(t>>12&15|224),n+=Aa(t,6)):(t&4292870144)==0&&(n=On(t>>18&7|240),n+=Aa(t,12),n+=Aa(t,6)),n+=On(t&63|128),n}function z0(t,e){e=e||{};for(var n=e.strict!==!1,f=Lh(t),m=f.length,p=-1,y,h="";++p<m;)y=f[p],h+=H0(y,n);return h}function Cr(){if(Pn>=Ys)throw Error("Invalid byte index");var t=Xs[Pn]&255;if(Pn++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function X0(t){var e,n,f,m,p;if(Pn>Ys)throw Error("Invalid byte index");if(Pn==Ys)return!1;if(e=Xs[Pn]&255,Pn++,(e&128)==0)return e;if((e&224)==192){if(n=Cr(),p=(e&31)<<6|n,p>=128)return p;throw Error("Invalid continuation byte")}if((e&240)==224){if(n=Cr(),f=Cr(),p=(e&15)<<12|n<<6|f,p>=2048)return Bh(p,t)?p:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(n=Cr(),f=Cr(),m=Cr(),p=(e&7)<<18|n<<12|f<<6|m,p>=65536&&p<=1114111))return p;throw Error("Invalid UTF-8 detected")}var Xs,Ys,Pn;function Y0(t,e){e=e||{};var n=e.strict!==!1;Xs=Lh(t),Ys=Xs.length,Pn=0;for(var f=[],m;(m=X0(n))!==!1;)f.push(m);return W0(f)}var G0={version:"2.1.2",encode:z0,decode:Y0},rl={};(function(t){rl.encode=function(e){var n=new Uint8Array(e),f,m=n.length,p="";for(f=0;f<m;f+=3)p+=t[n[f]>>2],p+=t[(n[f]&3)<<4|n[f+1]>>4],p+=t[(n[f+1]&15)<<2|n[f+2]>>6],p+=t[n[f+2]&63];return m%3===2?p=p.substring(0,p.length-1)+"=":m%3===1&&(p=p.substring(0,p.length-2)+"=="),p},rl.decode=function(e){var n=e.length*.75,f=e.length,m,p=0,y,h,r,a;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var c=new ArrayBuffer(n),i=new Uint8Array(c);for(m=0;m<f;m+=4)y=t.indexOf(e[m]),h=t.indexOf(e[m+1]),r=t.indexOf(e[m+2]),a=t.indexOf(e[m+3]),i[p++]=y<<2|h>>4,i[p++]=(h&15)<<4|r>>2,i[p++]=(r&3)<<6|a&63;return c}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var Fr=typeof Fr!="undefined"?Fr:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:!1,jh=function(){try{var t=new Blob(["hi"]);return t.size===2}catch{return!1}}(),V0=jh&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return t.size===2}catch{return!1}}(),q0=Fr&&Fr.prototype.append&&Fr.prototype.getBlob;function Nh(t){return t.map(function(e){if(e.buffer instanceof ArrayBuffer){var n=e.buffer;if(e.byteLength!==n.byteLength){var f=new Uint8Array(e.byteLength);f.set(new Uint8Array(n,e.byteOffset,e.byteLength)),n=f.buffer}return n}return e})}function Uh(t,e){e=e||{};var n=new Fr;return Nh(t).forEach(function(f){n.append(f)}),e.type?n.getBlob(e.type):n.getBlob()}function Wh(t,e){return new Blob(Nh(t),e||{})}typeof Blob!="undefined"&&(Uh.prototype=Blob.prototype,Wh.prototype=Blob.prototype);var K0=function(){return jh?V0?Blob:Wh:q0?Uh:void 0}();(function(t){var e=k0,n=Mh,f=B0,m=j0,p=G0,y;typeof ArrayBuffer!="undefined"&&(y=rl);var h=typeof navigator!="undefined"&&/Android/i.test(navigator.userAgent),r=typeof navigator!="undefined"&&/PhantomJS/i.test(navigator.userAgent),a=h||r;t.protocol=3;var c=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},i=e(c),o={type:"error",data:"parser error"},s=K0;t.encodePacket=function(_,w,S,T){typeof w=="function"&&(T=w,w=!1),typeof S=="function"&&(T=S,S=null);var x=_.data===void 0?void 0:_.data.buffer||_.data;if(typeof ArrayBuffer!="undefined"&&x instanceof ArrayBuffer)return d(_,w,T);if(typeof s!="undefined"&&x instanceof s)return g(_,w,T);if(x&&x.base64)return u(_,T);var D=c[_.type];return _.data!==void 0&&(D+=S?p.encode(String(_.data),{strict:!1}):String(_.data)),T(""+D)};function u(_,w){var S="b"+t.packets[_.type]+_.data.data;return w(S)}function d(_,w,S){if(!w)return t.encodeBase64Packet(_,S);var T=_.data,x=new Uint8Array(T),D=new Uint8Array(1+T.byteLength);D[0]=c[_.type];for(var N=0;N<x.length;N++)D[N+1]=x[N];return S(D.buffer)}function l(_,w,S){if(!w)return t.encodeBase64Packet(_,S);var T=new FileReader;return T.onload=function(){t.encodePacket({type:_.type,data:T.result},w,!0,S)},T.readAsArrayBuffer(_.data)}function g(_,w,S){if(!w)return t.encodeBase64Packet(_,S);if(a)return l(_,w,S);var T=new Uint8Array(1);T[0]=c[_.type];var x=new s([T.buffer,_.data]);return S(x)}t.encodeBase64Packet=function(_,w){var S="b"+t.packets[_.type];if(typeof s!="undefined"&&_.data instanceof s){var T=new FileReader;return T.onload=function(){var k=T.result.split(",")[1];w(S+k)},T.readAsDataURL(_.data)}var x;try{x=String.fromCharCode.apply(null,new Uint8Array(_.data))}catch{for(var D=new Uint8Array(_.data),N=new Array(D.length),W=0;W<D.length;W++)N[W]=D[W];x=String.fromCharCode.apply(null,N)}return S+=btoa(x),w(S)},t.decodePacket=function(_,w,S){if(_===void 0)return o;if(typeof _=="string"){if(_.charAt(0)==="b")return t.decodeBase64Packet(_.substr(1),w);if(S&&(_=v(_),_===!1))return o;var x=_.charAt(0);return Number(x)!=x||!i[x]?o:_.length>1?{type:i[x],data:_.substring(1)}:{type:i[x]}}var T=new Uint8Array(_),x=T[0],D=f(_,1);return s&&w==="blob"&&(D=new s([D])),{type:i[x],data:D}};function v(_){try{_=p.decode(_,{strict:!1})}catch{return!1}return _}t.decodeBase64Packet=function(_,w){var S=i[_.charAt(0)];if(!y)return{type:S,data:{base64:!0,data:_.substr(1)}};var T=y.decode(_.substr(1));return w==="blob"&&s&&(T=new s([T])),{type:S,data:T}},t.encodePayload=function(_,w,S){typeof w=="function"&&(S=w,w=null);var T=n(_);if(w&&T)return s&&!a?t.encodePayloadAsBlob(_,S):t.encodePayloadAsArrayBuffer(_,S);if(!_.length)return S("0:");function x(N){return N.length+":"+N}function D(N,W){t.encodePacket(N,T?w:!1,!1,function(k){W(null,x(k))})}b(_,D,function(N,W){return S(W.join(""))})};function b(_,w,S){for(var T=new Array(_.length),x=m(_.length,S),D=function(W,k,q){w(k,function(K,ne){T[W]=ne,q(K,T)})},N=0;N<_.length;N++)D(N,_[N],x)}t.decodePayload=function(_,w,S){if(typeof _!="string")return t.decodePayloadAsBinary(_,w,S);typeof w=="function"&&(S=w,w=null);var T;if(_==="")return S(o,0,1);for(var x="",D,N,W=0,k=_.length;W<k;W++){var q=_.charAt(W);if(q!==":"){x+=q;continue}if(x===""||x!=(D=Number(x))||(N=_.substr(W+1,D),x!=N.length))return S(o,0,1);if(N.length){if(T=t.decodePacket(N,w,!1),o.type===T.type&&o.data===T.data)return S(o,0,1);var K=S(T,W+D,k);if(K===!1)return}W+=D,x=""}if(x!=="")return S(o,0,1)},t.encodePayloadAsArrayBuffer=function(_,w){if(!_.length)return w(new ArrayBuffer(0));function S(T,x){t.encodePacket(T,!0,!0,function(D){return x(null,D)})}b(_,S,function(T,x){var D=x.reduce(function(k,q){var K;return typeof q=="string"?K=q.length:K=q.byteLength,k+K.toString().length+K+2},0),N=new Uint8Array(D),W=0;return x.forEach(function(k){var q=typeof k=="string",K=k;if(q){for(var oe=new Uint8Array(k.length),ne=0;ne<k.length;ne++)oe[ne]=k.charCodeAt(ne);K=oe.buffer}q?N[W++]=0:N[W++]=1;for(var se=K.byteLength.toString(),ne=0;ne<se.length;ne++)N[W++]=parseInt(se[ne]);N[W++]=255;for(var oe=new Uint8Array(K),ne=0;ne<oe.length;ne++)N[W++]=oe[ne]}),w(N.buffer)})},t.encodePayloadAsBlob=function(_,w){function S(T,x){t.encodePacket(T,!0,!0,function(D){var N=new Uint8Array(1);if(N[0]=1,typeof D=="string"){for(var W=new Uint8Array(D.length),k=0;k<D.length;k++)W[k]=D.charCodeAt(k);D=W.buffer,N[0]=0}for(var q=D instanceof ArrayBuffer?D.byteLength:D.size,K=q.toString(),ne=new Uint8Array(K.length+1),k=0;k<K.length;k++)ne[k]=parseInt(K[k]);if(ne[K.length]=255,s){var se=new s([N.buffer,ne.buffer,D]);x(null,se)}})}b(_,S,function(T,x){return w(new s(x))})},t.decodePayloadAsBinary=function(_,w,S){typeof w=="function"&&(S=w,w=null);for(var T=_,x=[];T.byteLength>0;){for(var D=new Uint8Array(T),N=D[0]===0,W="",k=1;D[k]!==255;k++){if(W.length>310)return S(o,0,1);W+=D[k]}T=f(T,2+W.length),W=parseInt(W);var q=f(T,0,W);if(N)try{q=String.fromCharCode.apply(null,new Uint8Array(q))}catch{var K=new Uint8Array(q);q="";for(var k=0;k<K.length;k++)q+=String.fromCharCode(K[k])}x.push(q),T=f(T,W)}var ne=x.length;x.forEach(function(se,oe){S(t.decodePacket(se,w,!0),oe,ne)})}})(cr);var J0=cr,Z0=lr.exports,Jl=rn;function rn(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}Z0(rn.prototype);rn.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this};rn.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this};rn.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this};rn.prototype.send=function(t){if(this.readyState==="open")this.write(t);else throw new Error("Transport not open")};rn.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")};rn.prototype.onData=function(t){var e=J0.decodePacket(t,this.socket.binaryType);this.onPacket(e)};rn.prototype.onPacket=function(t){this.emit("packet",t)};rn.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var qr={};qr.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e};qr.decode=function(t){for(var e={},n=t.split("&"),f=0,m=n.length;f<m;f++){var p=n[f].split("=");e[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}return e};var ho=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Hh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Gs=64,zh={},mu=0,Dn=0,vu;function il(t){var e="";do e=Hh[t%Gs]+e,t=Math.floor(t/Gs);while(t>0);return e}function Q0(t){var e=0;for(Dn=0;Dn<t.length;Dn++)e=e*Gs+zh[t.charAt(Dn)];return e}function Zl(){var t=il(+new Date);return t!==vu?(mu=0,vu=t):t+"."+il(mu++)}for(;Dn<Gs;Dn++)zh[Hh[Dn]]=Dn;Zl.encode=il;Zl.decode=Q0;var Xh=Zl,Ur={exports:{}},sl={exports:{}},Mi=1e3,Li=Mi*60,Bi=Li*60,ji=Bi*24,$0=ji*365.25,eb=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return tb(t);if(n==="number"&&isNaN(t)===!1)return e.long?rb(t):nb(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function tb(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),f=(e[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return n*$0;case"days":case"day":case"d":return n*ji;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Bi;case"minutes":case"minute":case"mins":case"min":case"m":return n*Li;case"seconds":case"second":case"secs":case"sec":case"s":return n*Mi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function nb(t){return t>=ji?Math.round(t/ji)+"d":t>=Bi?Math.round(t/Bi)+"h":t>=Li?Math.round(t/Li)+"m":t>=Mi?Math.round(t/Mi)+"s":t+"ms"}function rb(t){return Ts(t,ji,"day")||Ts(t,Bi,"hour")||Ts(t,Li,"minute")||Ts(t,Mi,"second")||t+" ms"}function Ts(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=f.debug=f.default=f,e.coerce=r,e.disable=y,e.enable=p,e.enabled=h,e.humanize=eb,e.instances=[],e.names=[],e.skips=[],e.formatters={};function n(a){var c=0,i;for(i in a)c=(c<<5)-c+a.charCodeAt(i),c|=0;return e.colors[Math.abs(c)%e.colors.length]}function f(a){var c;function i(){if(!!i.enabled){var o=i,s=+new Date,u=s-(c||s);o.diff=u,o.prev=c,o.curr=s,c=s;for(var d=new Array(arguments.length),l=0;l<d.length;l++)d[l]=arguments[l];d[0]=e.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;g++;var w=e.formatters[_];if(typeof w=="function"){var S=d[g];b=w.call(o,S),d.splice(g,1),g--}return b}),e.formatArgs.call(o,d);var v=i.log||e.log||console.log.bind(console);v.apply(o,d)}}return i.namespace=a,i.enabled=e.enabled(a),i.useColors=e.useColors(),i.color=n(a),i.destroy=m,typeof e.init=="function"&&e.init(i),e.instances.push(i),i}function m(){var a=e.instances.indexOf(this);return a!==-1?(e.instances.splice(a,1),!0):!1}function p(a){e.save(a),e.names=[],e.skips=[];var c,i=(typeof a=="string"?a:"").split(/[\s,]+/),o=i.length;for(c=0;c<o;c++)!i[c]||(a=i[c].replace(/\*/g,".*?"),a[0]==="-"?e.skips.push(new RegExp("^"+a.substr(1)+"$")):e.names.push(new RegExp("^"+a+"$")));for(c=0;c<e.instances.length;c++){var s=e.instances[c];s.enabled=e.enabled(s.namespace)}}function y(){e.enable("")}function h(a){if(a[a.length-1]==="*")return!0;var c,i;for(c=0,i=e.skips.length;c<i;c++)if(e.skips[c].test(a))return!1;for(c=0,i=e.names.length;c<i;c++)if(e.names[c].test(a))return!0;return!1}function r(a){return a instanceof Error?a.stack||a.message:a}})(sl,sl.exports);(function(t,e){e=t.exports=sl.exports,e.log=m,e.formatArgs=f,e.save=p,e.load=y,e.useColors=n,e.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:h(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(r){try{return JSON.stringify(r)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function f(r){var a=this.useColors;if(r[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+r[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!!a){var c="color: "+this.color;r.splice(1,0,c,"color: inherit");var i=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(i++,s==="%c"&&(o=i))}),r.splice(o,0,c)}}function m(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function p(r){try{r==null?e.storage.removeItem("debug"):e.storage.debug=r}catch{}}function y(){var r;try{r=e.storage.debug}catch{}return!r&&typeof process!="undefined"&&"env"in process&&(r={}.DEBUG),r}e.enable(y());function h(){try{return window.localStorage}catch{}}})(Ur,Ur.exports);var Yh=Jl,ib=qr,Gh=cr,sb=ho,ob=Xh,Xt=Ur.exports("engine.io-client:polling"),Vh=sn,ab=function(){var t=ql,e=new t({xdomain:!1});return e.responseType!=null}();function sn(t){var e=t&&t.forceBase64;(!ab||e)&&(this.supportsBinary=!1),Yh.call(this,t)}sb(sn,Yh);sn.prototype.name="polling";sn.prototype.doOpen=function(){this.poll()};sn.prototype.pause=function(t){var e=this;this.readyState="pausing";function n(){Xt("paused"),e.readyState="paused",t()}if(this.polling||!this.writable){var f=0;this.polling&&(Xt("we are currently polling - waiting to pause"),f++,this.once("pollComplete",function(){Xt("pre-pause polling complete"),--f||n()})),this.writable||(Xt("we are currently writing - waiting to pause"),f++,this.once("drain",function(){Xt("pre-pause writing complete"),--f||n()}))}else n()};sn.prototype.poll=function(){Xt("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};sn.prototype.onData=function(t){var e=this;Xt("polling got data %s",t);var n=function(f,m,p){if(e.readyState==="opening"&&f.type==="open"&&e.onOpen(),f.type==="close")return e.onClose(),!1;e.onPacket(f)};Gh.decodePayload(t,this.socket.binaryType,n),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():Xt('ignoring poll - transport state "%s"',this.readyState))};sn.prototype.doClose=function(){var t=this;function e(){Xt("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(Xt("transport open - closing"),e()):(Xt("transport not open - deferring close"),this.once("open",e))};sn.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};Gh.encodePayload(t,this.supportsBinary,function(f){e.doWrite(f,n)})};sn.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";this.timestampRequests!==!1&&(t[this.timestampParam]=ob()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=ib.encode(t),this.port&&(e==="https"&&Number(this.port)!==443||e==="http"&&Number(this.port)!==80)&&(n=":"+this.port),t.length&&(t="?"+t);var f=this.hostname.indexOf(":")!==-1;return e+"://"+(f?"["+this.hostname+"]":this.hostname)+n+this.path+t};var lb=ql,qh=Vh,cb=lr.exports,ub=ho,ol=Ur.exports("engine.io-client:polling-xhr"),fb=Vl;Kl.exports=Kr;Kl.exports.Request=it;function yu(){}function Kr(t){if(qh.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location!="undefined"){var e=location.protocol==="https:",n=location.port;n||(n=e?443:80),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}ub(Kr,qh);Kr.prototype.supportsBinary=!0;Kr.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new it(t)};Kr.prototype.doWrite=function(t,e){var n=typeof t!="string"&&t!==void 0,f=this.request({method:"POST",data:t,isBinary:n}),m=this;f.on("success",e),f.on("error",function(p){m.onError("xhr post error",p)}),this.sendXhr=f};Kr.prototype.doPoll=function(){ol("xhr poll");var t=this.request(),e=this;t.on("data",function(n){e.onData(n)}),t.on("error",function(n){e.onError("xhr poll error",n)}),this.pollXhr=t};function it(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}cb(it.prototype);it.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new lb(t),n=this;try{ol("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var f in this.extraHeaders)this.extraHeaders.hasOwnProperty(f)&&e.setRequestHeader(f,this.extraHeaders[f])}}catch{}if(this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(e.readyState===2)try{var m=e.getResponseHeader("Content-Type");(n.supportsBinary&&m==="application/octet-stream"||m==="application/octet-stream; charset=UTF-8")&&(e.responseType="arraybuffer")}catch{}e.readyState===4&&(e.status===200||e.status===1223?n.onLoad():setTimeout(function(){n.onError(typeof e.status=="number"?e.status:0)},0))},ol("xhr data %s",this.data),e.send(this.data)}catch(m){setTimeout(function(){n.onError(m)},0);return}typeof document!="undefined"&&(this.index=it.requestsCount++,it.requests[this.index]=this)};it.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};it.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};it.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};it.prototype.cleanup=function(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=yu:this.xhr.onreadystatechange=yu,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete it.requests[this.index],this.xhr=null}};it.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch{}e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(n){this.onError(n)}t!=null&&this.onData(t)};it.prototype.hasXDR=function(){return typeof XDomainRequest!="undefined"&&!this.xs&&this.enablesXDR};it.prototype.abort=function(){this.cleanup()};it.requestsCount=0;it.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",_u);else if(typeof addEventListener=="function"){var hb="onpagehide"in fb?"pagehide":"unload";addEventListener(hb,_u,!1)}}function _u(){for(var t in it.requests)it.requests.hasOwnProperty(t)&&it.requests[t].abort()}var Ql=Vh,db=ho,bu=Vl,gb=Jr,pb=/\n/g,mb=/\\n/g,xs;function vb(){}function Jr(t){Ql.call(this,t),this.query=this.query||{},xs||(xs=bu.___eio=bu.___eio||[]),this.index=xs.length;var e=this;xs.push(function(n){e.onData(n)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=vb)},!1)}db(Jr,Ql);Jr.prototype.supportsBinary=!1;Jr.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Ql.prototype.doClose.call(this)};Jr.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(m){t.onError("jsonp poll error",m)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var f=typeof navigator!="undefined"&&/gecko/i.test(navigator.userAgent);f&&setTimeout(function(){var m=document.createElement("iframe");document.body.appendChild(m),document.body.removeChild(m)},100)};Jr.prototype.doWrite=function(t,e){var n=this;if(!this.form){var f=document.createElement("form"),m=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index,y;f.className="socketio",f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.target=p,f.method="POST",f.setAttribute("accept-charset","utf-8"),m.name="d",f.appendChild(m),document.body.appendChild(f),this.form=f,this.area=m}this.form.action=this.uri();function h(){r(),e()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(c){n.onError("jsonp polling iframe removal error",c)}try{var a='<iframe src="javascript:0" name="'+n.iframeId+'">';y=document.createElement(a)}catch{y=document.createElement("iframe"),y.name=n.iframeId,y.src="javascript:0"}y.id=n.iframeId,n.form.appendChild(y),n.iframe=y}r(),t=t.replace(mb,`\\
`),this.area.value=t.replace(pb,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&h()}:this.iframe.onload=h};var $l=Jl,yb=cr,_b=qr,bb=ho,wb=Xh,Cb=Ur.exports("engine.io-client:websocket"),Vs,ec;typeof WebSocket!="undefined"?Vs=WebSocket:typeof self!="undefined"&&(Vs=self.WebSocket||self.MozWebSocket);if(typeof window=="undefined")try{ec=require("ws")}catch{}var Rr=Vs||ec,Sb=Wt;function Wt(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=Vs&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(Rr=ec),$l.call(this,t)}bb(Wt,$l);Wt.prototype.name="websocket";Wt.prototype.supportsBinary=!0;Wt.prototype.doOpen=function(){if(!!this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new Rr(t,e):new Rr(t):new Rr(t,e,n)}catch(f){return this.emit("error",f)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};Wt.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}};Wt.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,f=0,m=n;f<m;f++)(function(y){yb.encodePacket(y,e.supportsBinary,function(h){if(!e.usingBrowserWebSocket){var r={};if(y.options&&(r.compress=y.options.compress),e.perMessageDeflate){var a=typeof h=="string"?Buffer.byteLength(h):h.length;a<e.perMessageDeflate.threshold&&(r.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(h):e.ws.send(h,r)}catch{Cb("websocket closed before onclose event")}--n||p()})})(t[f]);function p(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}};Wt.prototype.onClose=function(){$l.prototype.onClose.call(this)};Wt.prototype.doClose=function(){typeof this.ws!="undefined"&&this.ws.close()};Wt.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&(e==="wss"&&Number(this.port)!==443||e==="ws"&&Number(this.port)!==80)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=wb()),this.supportsBinary||(t.b64=1),t=_b.encode(t),t.length&&(t="?"+t);var f=this.hostname.indexOf(":")!==-1;return e+"://"+(f?"["+this.hostname+"]":this.hostname)+n+this.path+t};Wt.prototype.check=function(){return!!Rr&&!("__initialize"in Rr&&this.name===Wt.prototype.name)};var Tb=ql,xb=Kl.exports,Ob=gb,Eb=Sb;fo.polling=Ab;fo.websocket=Eb;function Ab(t){var e,n=!1,f=!1,m=t.jsonp!==!1;if(typeof location!="undefined"){var p=location.protocol==="https:",y=location.port;y||(y=p?443:80),n=t.hostname!==location.hostname||y!==t.port,f=t.secure!==p}if(t.xdomain=n,t.xscheme=f,e=new Tb(t),"open"in e&&!t.forceJSONP)return new xb(t);if(!m)throw new Error("JSONP disabled");return new Ob(t)}var Pb=[].indexOf,Kh=function(t,e){if(Pb)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},Db=fo,kb=lr.exports,Qe=Ur.exports("engine.io-client:socket"),Fb=Kh,Jh=cr,wu=Ph,Rb=qr,Ib=Pe;function Pe(t,e){if(!(this instanceof Pe))return new Pe(t,e);e=e||{},t&&typeof t=="object"&&(e=t,t=null),t?(t=wu(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=wu(e.host).host),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?443:80),this.query=e.query||{},typeof this.query=="string"&&(this.query=Rb.decode(this.query)),this.upgrade=e.upgrade!==!1,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=e.jsonp!==!1,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=e.withCredentials!==!1,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=e.perMessageDeflate!==!1?e.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=e.rejectUnauthorized===void 0?!0:e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self=="undefined"||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}Pe.priorWebsocketSuccess=!1;kb(Pe.prototype);Pe.protocol=Jh.protocol;Pe.Socket=Pe;Pe.Transport=Jl;Pe.transports=fo;Pe.parser=cr;Pe.prototype.createTransport=function(t){Qe('creating transport "%s"',t);var e=Mb(this.query);e.EIO=Jh.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var f=new Db[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return f};function Mb(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Pe.prototype.open=function(){var t;if(this.rememberUpgrade&&Pe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var e=this;setTimeout(function(){e.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};Pe.prototype.setTransport=function(t){Qe("setting transport %s",t.name);var e=this;this.transport&&(Qe("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(n){e.onPacket(n)}).on("error",function(n){e.onError(n)}).on("close",function(){e.onClose("transport close")})};Pe.prototype.probe=function(t){Qe('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,f=this;Pe.priorWebsocketSuccess=!1;function m(){if(f.onlyBinaryUpgrades){var i=!this.supportsBinary&&f.transport.supportsBinary;n=n||i}n||(Qe('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(o){if(!n)if(o.type==="pong"&&o.data==="probe"){if(Qe('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",e),!e)return;Pe.priorWebsocketSuccess=e.name==="websocket",Qe('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){n||f.readyState!=="closed"&&(Qe("changing transport and sending upgrade packet"),c(),f.setTransport(e),e.send([{type:"upgrade"}]),f.emit("upgrade",e),e=null,f.upgrading=!1,f.flush())})}else{Qe('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,f.emit("upgradeError",s)}}))}function p(){n||(n=!0,c(),e.close(),e=null)}function y(i){var o=new Error("probe error: "+i);o.transport=e.name,p(),Qe('probe transport "%s" failed because of error: %s',t,i),f.emit("upgradeError",o)}function h(){y("transport closed")}function r(){y("socket closed")}function a(i){e&&i.name!==e.name&&(Qe('"%s" works - aborting "%s"',i.name,e.name),p())}function c(){e.removeListener("open",m),e.removeListener("error",y),e.removeListener("close",h),f.removeListener("close",r),f.removeListener("upgrading",a)}e.once("open",m),e.once("error",y),e.once("close",h),this.once("close",r),this.once("upgrading",a),e.open()};Pe.prototype.onOpen=function(){if(Qe("socket open"),this.readyState="open",Pe.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){Qe("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}};Pe.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Qe('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else Qe('packet received with socket readyState "%s"',this.readyState)};Pe.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};Pe.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){e.readyState!=="closed"&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)};Pe.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){Qe("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};Pe.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};Pe.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};Pe.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Qe("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};Pe.prototype.write=Pe.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this};Pe.prototype.sendPacket=function(t,e,n,f){if(typeof e=="function"&&(f=e,e=void 0),typeof n=="function"&&(f=n,n=null),!(this.readyState==="closing"||this.readyState==="closed")){n=n||{},n.compress=n.compress!==!1;var m={type:t,data:e,options:n};this.emit("packetCreate",m),this.writeBuffer.push(m),f&&this.once("flush",f),this.flush()}};Pe.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?f():e()}):this.upgrading?f():e()}function e(){t.onClose("forced close"),Qe("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function f(){t.once("upgrade",n),t.once("upgradeError",n)}return this};Pe.prototype.onError=function(t){Qe("socket error %j",t),Pe.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};Pe.prototype.onClose=function(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){Qe('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}};Pe.prototype.filterUpgrades=function(t){for(var e=[],n=0,f=t.length;n<f;n++)~Fb(this.transports,t[n])&&e.push(t[n]);return e};Gl.exports=Ib;Gl.exports.parser=cr;var tc={exports:{}},Lb=Bb;function Bb(t,e){var n=[];e=e||0;for(var f=e||0;f<t.length;f++)n[f-e]=t[f];return n}var Zh=jb;function jb(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}var Cu=[].slice,Qh=function(t,e){if(typeof e=="string"&&(e=t[e]),typeof e!="function")throw new Error("bind() requires a function");var n=Cu.call(arguments,2);return function(){return e.apply(t,n.concat(Cu.call(arguments)))}};(function(t,e){var n=co,f=lr.exports,m=Lb,p=Zh,y=Qh,h=Nr.exports("socket.io-client:socket"),r=qr,a=Mh;t.exports=o;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},i=f.prototype.emit;function o(s,u,d){this.io=s,this.nsp=u,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},d&&d.query&&(this.query=d.query),this.io.autoConnect&&this.open()}f(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var s=this.io;this.subs=[p(s,"open",y(this,"onopen")),p(s,"packet",y(this,"onpacket")),p(s,"close",y(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},o.prototype.send=function(){var s=m(arguments);return s.unshift("message"),this.emit.apply(this,s),this},o.prototype.emit=function(s){if(c.hasOwnProperty(s))return i.apply(this,arguments),this;var u=m(arguments),d={type:(this.flags.binary!==void 0?this.flags.binary:a(u))?n.BINARY_EVENT:n.EVENT,data:u};return d.options={},d.options.compress=!this.flags||this.flags.compress!==!1,typeof u[u.length-1]=="function"&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=u.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this},o.prototype.packet=function(s){s.nsp=this.nsp,this.io.packet(s)},o.prototype.onopen=function(){if(h("transport is open - connecting"),this.nsp!=="/")if(this.query){var s=typeof this.query=="object"?r.encode(this.query):this.query;h("sending connect packet with query %s",s),this.packet({type:n.CONNECT,query:s})}else this.packet({type:n.CONNECT})},o.prototype.onclose=function(s){h("close (%s)",s),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",s)},o.prototype.onpacket=function(s){var u=s.nsp===this.nsp,d=s.type===n.ERROR&&s.nsp==="/";if(!(!u&&!d))switch(s.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(s);break;case n.BINARY_EVENT:this.onevent(s);break;case n.ACK:this.onack(s);break;case n.BINARY_ACK:this.onack(s);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",s.data);break}},o.prototype.onevent=function(s){var u=s.data||[];h("emitting event %j",u),s.id!=null&&(h("attaching ack callback to event"),u.push(this.ack(s.id))),this.connected?i.apply(this,u):this.receiveBuffer.push(u)},o.prototype.ack=function(s){var u=this,d=!1;return function(){if(!d){d=!0;var l=m(arguments);h("sending ack %j",l),u.packet({type:a(l)?n.BINARY_ACK:n.ACK,id:s,data:l})}}},o.prototype.onack=function(s){var u=this.acks[s.id];typeof u=="function"?(h("calling ack %s with %j",s.id,s.data),u.apply(this,s.data),delete this.acks[s.id]):h("bad ack %s",s.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var s;for(s=0;s<this.receiveBuffer.length;s++)i.apply(this,this.receiveBuffer[s]);for(this.receiveBuffer=[],s=0;s<this.sendBuffer.length;s++)this.packet(this.sendBuffer[s]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var s=0;s<this.subs.length;s++)this.subs[s].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(s){return this.flags.compress=s,this},o.prototype.binary=function(s){return this.flags.binary=s,this}})(tc);var Nb=Zr;function Zr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Zr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Zr.prototype.reset=function(){this.attempts=0};Zr.prototype.setMin=function(t){this.ms=t};Zr.prototype.setMax=function(t){this.max=t};Zr.prototype.setJitter=function(t){this.jitter=t};var Ub=Gl.exports,Wb=tc.exports,Hb=lr.exports,zb=co,Tn=Zh,Sr=Qh,Ct=Nr.exports("socket.io-client:manager"),$h=Kh,Xb=Nb,ed=Object.prototype.hasOwnProperty,Su=Fe;function Fe(t,e){if(!(this instanceof Fe))return new Fe(t,e);t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Xb({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||zb;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}Fe.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)ed.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};Fe.prototype.updateSocketIds=function(){for(var t in this.nsps)ed.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))};Fe.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id};Hb(Fe.prototype);Fe.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};Fe.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};Fe.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};Fe.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};Fe.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};Fe.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};Fe.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};Fe.prototype.open=Fe.prototype.connect=function(t,e){if(Ct("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Ct("opening %s",this.uri),this.engine=Ub(this.uri,this.opts);var n=this.engine,f=this;this.readyState="opening",this.skipReconnect=!1;var m=Tn(n,"open",function(){f.onopen(),t&&t()}),p=Tn(n,"error",function(r){if(Ct("connect_error"),f.cleanup(),f.readyState="closed",f.emitAll("connect_error",r),t){var a=new Error("Connection error");a.data=r,t(a)}else f.maybeReconnectOnOpen()});if(this._timeout!==!1){var y=this._timeout;Ct("connect attempt will timeout after %d",y),y===0&&m.destroy();var h=setTimeout(function(){Ct("connect attempt timed out after %d",y),m.destroy(),n.close(),n.emit("error","timeout"),f.emitAll("connect_timeout",y)},y);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(m),this.subs.push(p),this};Fe.prototype.onopen=function(){Ct("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(Tn(t,"data",Sr(this,"ondata"))),this.subs.push(Tn(t,"ping",Sr(this,"onping"))),this.subs.push(Tn(t,"pong",Sr(this,"onpong"))),this.subs.push(Tn(t,"error",Sr(this,"onerror"))),this.subs.push(Tn(t,"close",Sr(this,"onclose"))),this.subs.push(Tn(this.decoder,"decoded",Sr(this,"ondecoded")))};Fe.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};Fe.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Fe.prototype.ondata=function(t){this.decoder.add(t)};Fe.prototype.ondecoded=function(t){this.emit("packet",t)};Fe.prototype.onerror=function(t){Ct("error",t),this.emitAll("error",t)};Fe.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new Wb(this,t,e),this.nsps[t]=n;var f=this;n.on("connecting",m),n.on("connect",function(){n.id=f.generateId(t)}),this.autoConnect&&m()}function m(){~$h(f.connecting,n)||f.connecting.push(n)}return n};Fe.prototype.destroy=function(t){var e=$h(this.connecting,t);~e&&this.connecting.splice(e,1),!this.connecting.length&&this.close()};Fe.prototype.packet=function(t){Ct("writing packet %j",t);var e=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var f=0;f<n.length;f++)e.engine.write(n[f],t.options);e.encoding=!1,e.processPacketQueue()}))};Fe.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};Fe.prototype.cleanup=function(){Ct("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};Fe.prototype.close=Fe.prototype.disconnect=function(){Ct("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};Fe.prototype.onclose=function(t){Ct("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};Fe.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ct("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();Ct("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(Ct("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(f){f?(Ct("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",f.data)):(Ct("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}};Fe.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};(function(t,e){var n=p0,f=co,m=Su,p=Nr.exports("socket.io-client");t.exports=e=h;var y=e.managers={};function h(r,a){typeof r=="object"&&(a=r,r=void 0),a=a||{};var c=n(r),i=c.source,o=c.id,s=c.path,u=y[o]&&s in y[o].nsps,d=a.forceNew||a["force new connection"]||a.multiplex===!1||u,l;return d?(p("ignoring socket cache for %s",i),l=m(i,a)):(y[o]||(p("new io instance for %s",i),y[o]=m(i,a)),l=y[o]),c.query&&!a.query&&(a.query=c.query),l.socket(c.path,a)}e.protocol=f.protocol,e.connect=h,e.Manager=Su,e.Socket=tc.exports})(Ja,Ja.exports);var nc={},Vn=Be&&Be.__awaiter||function(t,e,n,f){function m(p){return p instanceof n?p:new n(function(y){y(p)})}return new(n||(n=Promise))(function(p,y){function h(c){try{a(f.next(c))}catch(i){y(i)}}function r(c){try{a(f.throw(c))}catch(i){y(i)}}function a(c){c.done?p(c.value):m(c.value).then(h,r)}a((f=f.apply(t,e||[])).next())})};Object.defineProperty(nc,"__esModule",{value:!0});class Yb{constructor(e){this.cloudConvert=e}get(e,n=null){return Vn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs/"+e,{params:n||{}})).data.data})}wait(e){return Vn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs/"+e+"/wait")).data.data})}all(e=null){return Vn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("jobs",{params:e||{}})).data.data})}create(e=null){return Vn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("jobs",e)).data.data})}delete(e){return Vn(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete("jobs/"+e)})}subscribeEvent(e,n,f){return Vn(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-job."+e,"job."+n,f)})}subscribeTaskEvent(e,n,f){return Vn(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-job."+e+".tasks","task."+n,f)})}}nc.default=Yb;var rc={},Gb=typeof self=="object"?self.FormData:window.FormData,wn=Be&&Be.__awaiter||function(t,e,n,f){function m(p){return p instanceof n?p:new n(function(y){y(p)})}return new(n||(n=Promise))(function(p,y){function h(c){try{a(f.next(c))}catch(i){y(i)}}function r(c){try{a(f.throw(c))}catch(i){y(i)}}function a(c){c.done?p(c.value):m(c.value).then(h,r)}a((f=f.apply(t,e||[])).next())})},td=Be&&Be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rc,"__esModule",{value:!0});const Vb=td(Gb),qb=td(Ah);class Kb{constructor(e){this.cloudConvert=e}get(e,n=null){return wn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks/"+e,{params:n||{}})).data.data})}wait(e){return wn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks/"+e+"/wait")).data.data})}cancel(e){return wn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post("tasks/"+e+"/cancel")).data.data})}all(e=null){return wn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("tasks",{params:e||{}})).data.data})}create(e,n=null){return wn(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.post(e,n)).data.data})}delete(e){return wn(this,void 0,void 0,function*(){yield this.cloudConvert.axios.delete("tasks/"+e)})}upload(e,n,f=null){return wn(this,void 0,void 0,function*(){if(e.operation!=="import/upload")throw new Error("The task operation is not import/upload");if(e.status!=="waiting"||!e.result||!e.result.form)throw new Error("The task is not ready for uploading");const m=new Vb.default;for(const y in e.result.form.parameters)m.append(y,e.result.form.parameters[y]);let p={};return f&&(p={filename:f}),m.append("file",n,p),yield qb.default.post(e.result.form.url,m,{maxContentLength:1/0,maxBodyLength:1/0,headers:Object.assign({},m.getHeaders())})})}subscribeEvent(e,n,f){return wn(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-task."+e,"task."+n,f)})}}rc.default=Kb;var ic={},Pa=Be&&Be.__awaiter||function(t,e,n,f){function m(p){return p instanceof n?p:new n(function(y){y(p)})}return new(n||(n=Promise))(function(p,y){function h(c){try{a(f.next(c))}catch(i){y(i)}}function r(c){try{a(f.throw(c))}catch(i){y(i)}}function a(c){c.done?p(c.value):m(c.value).then(h,r)}a((f=f.apply(t,e||[])).next())})};Object.defineProperty(ic,"__esModule",{value:!0});class Jb{constructor(e){this.cloudConvert=e}me(){return Pa(this,void 0,void 0,function*(){return(yield this.cloudConvert.axios.get("users/me")).data.data})}subscribeJobEvent(e,n,f){return Pa(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-user."+e+".jobs","job."+n,f)})}subscribeTaskEvent(e,n,f){return Pa(this,void 0,void 0,function*(){this.cloudConvert.subscribe("private-user."+e+".tasks","task."+n,f)})}}ic.default=Jb;var sc={},Zb=Be&&Be.__createBinding||(Object.create?function(t,e,n,f){f===void 0&&(f=n),Object.defineProperty(t,f,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,f){f===void 0&&(f=n),t[f]=e[n]}),Qb=Be&&Be.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$b=Be&&Be.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Zb(e,t,n);return Qb(e,t),e};Object.defineProperty(sc,"__esModule",{value:!0});const ew=$b(_i);class tw{constructor(e){this.cloudConvert=e}verify(e,n,f){const p=ew.createHmac("sha256",f).update(Buffer.from(e,"utf-8")).digest("hex");return n===p}}sc.default=tw;const nw="cloudconvert",rw="2.2.4",iw="MIT",sw="Official Node.js SDK for the CloudConvert API",ow="https://github.com/cloudconvert/cloudconvert-node",aw="Josias Montag <josias@montag.info>",lw="built/lib/index.js",cw="built/lib/index.d.ts",uw="built/lib/CloudConvert.js",fw={type:"git",url:"https://github.com/cloudconvert/cloudconvert-node.git"},hw={url:"https://github.com/cloudconvert/cloudconvert-node/issues"},dw={axios:"^0.21.1",esm:"^3.2.25","form-data":"^4.0.0","socket.io-client":"^2.4.0"},gw={"@types/node":"^15.3.1","@types/socket.io-client":"^1.4.36","@typescript-eslint/eslint-plugin":"^4.24.0","@typescript-eslint/parser":"^4.24.0",chai:"^4.3.4",eslint:"^7.26.0","eslint-config-prettier":"^8.3.0","eslint-config-typescript":"^3.0.0","eslint-plugin-prettier":"^3.4.0",mocha:"^8.4.0",nock:"^13.0.11",prettier:"^2.3.0",typescript:"^4.2.4"},pw={prepare:"npm run build",build:"tsc",test:"mocha --require esm tests/unit","test-integration":"mocha --require esm tests/integration",lint:"eslint --ext .ts --ext .js --ext .json ."};var mw={name:nw,version:rw,license:iw,description:sw,homepage:ow,author:aw,main:lw,types:cw,module:uw,repository:fw,bugs:hw,dependencies:dw,devDependencies:gw,scripts:pw},Qr=Be&&Be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dh,"__esModule",{value:!0});const vw=Qr(Ah),yw=Qr(Ja.exports),_w=Qr(nc),bw=Qr(rc),ww=Qr(ic),Cw=Qr(sc),Sw=mw;class Tw{constructor(e,n=!1){this.apiKey=e,this.useSandbox=n,this.createAxiosInstance(),this.createResources()}createAxiosInstance(){this.axios=vw.default.create({baseURL:this.useSandbox?"https://api.sandbox.cloudconvert.com/v2/":"https://api.cloudconvert.com/v2/",headers:{Authorization:"Bearer "+this.apiKey,"User-Agent":"cloudconvert-node/v"+Sw.version+" (https://github.com/cloudconvert/cloudconvert-node)"}})}createResources(){this.tasks=new bw.default(this),this.jobs=new _w.default(this),this.users=new ww.default(this),this.webhooks=new Cw.default(this)}subscribe(e,n,f){var m,p;this.socket||(this.socket=yw.default.connect(this.useSandbox?"https://socketio.sandbox.cloudconvert.com":"https://socketio.cloudconvert.com",{transports:["websocket"]}),this.subscribedChannels=new Map),((m=this.subscribedChannels)===null||m===void 0?void 0:m.get(e))||(this.socket.emit("subscribe",{channel:e,auth:{headers:{Authorization:"Bearer "+this.apiKey}}}),(p=this.subscribedChannels)===null||p===void 0||p.set(e,!0)),this.socket.on(n,function(y,h){e===y&&f(h)})}closeSocket(){var e;(e=this.socket)===null||e===void 0||e.close()}}var ox=dh.default=Tw;function xw(t,e={}){let{on_end:n,on_start:f,on_update:m}=e,p=!1;function y(i){if(i.type==="touchmove"||i.type==="touchstart"){const o=t.getBoundingClientRect(),s=i.touches[0];return{x:s.clientX-o.x,y:s.clientY-o.y}}return{x:i.offsetX,y:i.offsetY}}function h(i){i.preventDefault(),p=!0,f&&f(y(i))}function r(i){i.preventDefault(),p=!1,n&&n()}function a(i){i.preventDefault(),p&&m&&m(y(i))}function c(i){p=!1}return t.addEventListener("touchstart",h),t.addEventListener("mousedown",h),t.addEventListener("touchend",r),t.addEventListener("mouseup",r),t.addEventListener("touchmove",a),t.addEventListener("mousemove",a),t.addEventListener("mouseleave",c),{destroy(){t.removeEventListener("touchstart",h),t.removeEventListener("mousedown",h),t.removeEventListener("touchend",r),t.removeEventListener("mouseup",r),t.removeEventListener("touchmove",a),t.removeEventListener("mousemove",a),t.removeEventListener("mouseleave",c)},update(i={}){({on_end:n,on_start:f,on_update:m}=i)}}}function Ow(t,e,n=1){return new Promise((f,m)=>{const p=document.createElement("canvas"),y=p.getContext("bitmaprenderer");if(!y){m(new Error("bad dispatch to 'to_blob' (context of 'bitmaprenderer' unavailable)"));return}p.width=t.width,p.height=t.height,y.transferFromImageBitmap(t),p.toBlob(h=>{h?f(h):m(new Error("bad dispatch to 'to_blob' (failed to convert to blob)")),p.remove()},e,n)})}async function Ew(t,e){const{x:n,y:f,width:m,height:p}=e,y=await createImageBitmap(t,n,f,m,p);return t=await Ow(y,t.type),y.close(),t}function Tu(t,e){const{left:n,right:f,top:m,bottom:p}=e?nd(t,e):t;return{x:n,y:m,width:f-n,height:p-m}}function nd(t,e){const{x:n,y:f}=t,{x:m,y:p}=e;return{left:Math.min(n,m),right:Math.max(n,m),top:Math.min(f,p),bottom:Math.max(f,p)}}function xu(t,e,n){const f=n.x/t.width,m=n.y/t.height;return{x:e.width*f,y:e.height*m}}function Ou(t){let e=t[4].width.toFixed()+"",n,f,m=t[4].height.toFixed()+"",p,y;return{c(){n=Qn(e),f=Qn("x"),p=Qn(m),y=Qn("px")},m(h,r){Ce(h,n,r),Ce(h,f,r),Ce(h,p,r),Ce(h,y,r)},p(h,r){r&16&&e!==(e=h[4].width.toFixed()+"")&&Pc(n,e),r&16&&m!==(m=h[4].height.toFixed()+"")&&Pc(p,m)},d(h){h&&we(n),h&&we(f),h&&we(p),h&&we(y)}}}function Aw(t){let e,n,f,m,p,y,h,r,a,c,i,o=t[4]&&Ou(t);return{c(){e=Te("div"),n=Te("img"),m=Ft(),p=Te("div"),y=Te("img"),r=Ft(),a=Te("div"),o&&o.c(),ce(n,"class","image-crop-background svelte-3axw2x"),cs(n.src,f=t[0])||ce(n,"src",f),ce(y,"style",t[7]),cs(y.src,h=t[0])||ce(y,"src",h),ce(y,"class","svelte-3axw2x"),ce(a,"class","image-crop-selection svelte-3axw2x"),ce(a,"style",t[6]),ce(p,"class","image-crop-preview svelte-3axw2x"),ce(e,"class","image-crop svelte-3axw2x"),ce(e,"data-cropping",c=t[2]?!0:void 0),ce(e,"data-dragging",i=t[3]?!0:void 0),ce(e,"style",t[5])},m(s,u){Ce(s,e,u),ze(e,n),t[17](n),ze(e,m),ze(e,p),ze(p,y),ze(p,r),ze(p,a),o&&o.m(a,null)},p(s,[u]){u&1&&!cs(n.src,f=s[0])&&ce(n,"src",f),u&128&&ce(y,"style",s[7]),u&1&&!cs(y.src,h=s[0])&&ce(y,"src",h),s[4]?o?o.p(s,u):(o=Ou(s),o.c(),o.m(a,null)):o&&(o.d(1),o=null),u&64&&ce(a,"style",s[6]),u&4&&c!==(c=s[2]?!0:void 0)&&ce(e,"data-cropping",c),u&8&&i!==(i=s[3]?!0:void 0)&&ce(e,"data-dragging",i),u&32&&ce(e,"style",s[5])},i:xe,o:xe,d(s){s&&we(e),t[17](null),o&&o.d()}}}const Eu={cropped:"STATE_CROPPED",default:"STATE_DEFAULT"},Pw=t=>`left:${t.x}px;top:${t.y}px;width:${t.width}px;height:${t.height}px;`,Os=t=>`${t.x}px ${t.y}px`,Dw=t=>{const{bottom:e,left:n,right:f,top:m}=t,p=Os({x:n,y:m}),y=Os({x:f,y:m}),h=Os({x:n,y:e}),r=Os({x:f,y:e});return`clip-path: polygon(${p}, ${h}, ${r}, ${y});`};function kw(t,e,n){let f,m,p,y;const h=Hi();let r,a=!1,c=null,i=null,{src:o}=e;function s(){n(3,a=!1),!(!c||!i)&&i.x===c.x&&i.y===c.y&&(n(13,i=null),n(12,c=null))}function u(D){n(3,a=!0),n(13,i=D),n(12,c=D)}function d(D){n(12,c=D)}async function l(){const N=await(await fetch(o)).blob();return f?Ew(N,w):N}function g(){return w?He({},w):null}function v(){return f}function b(){n(12,c=null),n(13,i=null)}let _,w,S,T;function x(D){Ne[D?"unshift":"push"](()=>{r=D,n(1,r)})}return t.$$set=D=>{"src"in D&&n(0,o=D.src)},t.$$.update=()=>{if(t.$$.dirty&12288&&n(2,f=!!(c&&i)),t.$$.dirty&28676){const D=_;n(14,_=f?nd(i,c):null),(typeof D!=typeof _||(D==null?void 0:D.bottom)!==(_==null?void 0:_.bottom)||(D==null?void 0:D.left)!==(_==null?void 0:_.left)||(D==null?void 0:D.right)!==(_==null?void 0:_.right)||(D==null?void 0:D.top)!==(_==null?void 0:_.top))&&h("state",{state:_===null?Eu.default:Eu.cropped})}if(t.$$.dirty&16384&&n(16,m=_?Tu(_):null),t.$$.dirty&16384&&n(7,p=_?Dw(_):""),t.$$.dirty&65536&&n(6,y=m?Pw(m):""),t.$$.dirty&12290)if(r&&c&&i){const D={width:r.width,height:r.height},N={width:r.naturalWidth,height:r.naturalHeight};n(4,w=Tu(xu(D,N,i),xu(D,N,c)))}else n(4,w=null);t.$$.dirty&32770&&r&&(S&&(S.destroy(),n(15,S=null)),n(15,S=xw(r,{on_end:s,on_start:u,on_update:d}))),t.$$.dirty&2&&(r?r.addEventListener("load",()=>n(5,T=r?`max-height:${r.height}px;`:"")):n(5,T=""))},[o,r,f,a,w,T,y,p,l,g,v,b,c,i,_,S,m,x]}class ax extends ot{constructor(e){super();st(this,e,kw,Aw,tt,{src:0,get_cropped_blob:8,get_cropped_bounds:9,is_cropping:10,reset:11})}get get_cropped_blob(){return this.$$.ctx[8]}get get_cropped_bounds(){return this.$$.ctx[9]}get is_cropping(){return this.$$.ctx[10]}get reset(){return this.$$.ctx[11]}}function lx(t,{from:e,to:n},f={}){const m=getComputedStyle(t),p=m.transform==="none"?"":m.transform,[y,h]=m.transformOrigin.split(" ").map(parseFloat),r=e.left+e.width*y/n.width-(n.left+y),a=e.top+e.height*h/n.height-(n.top+h),{delay:c=0,duration:i=s=>Math.sqrt(s)*120,easing:o=bl}=f;return{delay:c,duration:tn(i)?i(Math.sqrt(r*r+a*a)):i,easing:o,css:(s,u)=>{const d=u*r,l=u*a,g=s+u*e.width/n.width,v=s+u*e.height/n.height;return`transform: ${p} translate(${d}px, ${l}px) scale(${g}, ${v});`}}}const Fw="finalize",Rw="consider";function Wr(t,e,n){t.dispatchEvent(new CustomEvent(Fw,{detail:{items:e,info:n}}))}function Rn(t,e,n){t.dispatchEvent(new CustomEvent(Rw,{detail:{items:e,info:n}}))}const go="draggedEntered",Gi="draggedLeft",po="draggedOverIndex",oc="draggedLeftDocument",qs={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Iw(t,e,n){t.dispatchEvent(new CustomEvent(go,{detail:{indexObj:e,draggedEl:n}}))}function Mw(t,e,n){t.dispatchEvent(new CustomEvent(Gi,{detail:{draggedEl:e,type:qs.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function Lw(t,e){t.dispatchEvent(new CustomEvent(Gi,{detail:{draggedEl:e,type:qs.OUTSIDE_OF_ANY}}))}function Bw(t,e,n){t.dispatchEvent(new CustomEvent(po,{detail:{indexObj:e,draggedEl:n}}))}function jw(t){window.dispatchEvent(new CustomEvent(oc,{detail:{draggedEl:t}}))}const At={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:go,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:po,DRAGGED_LEFT:Gi,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Rt={POINTER:"pointer",KEYBOARD:"keyboard"},mo="isDndShadowItem",ac="data-is-dnd-shadow-item",lc="id:dnd-shadow-placeholder-0000",Nw="dnd-action-dragged-el";let lt="id",al=0;function rd(){al++}function id(){if(al===0)throw new Error("Bug! trying to decrement when there are no dropzones");al--}const cc=typeof window=="undefined";function sd(t){let e;const n=t.getBoundingClientRect(),f=getComputedStyle(t),m=f.transform;if(m){let p,y,h,r;if(m.startsWith("matrix3d("))e=m.slice(9,-1).split(/, /),p=+e[0],y=+e[5],h=+e[12],r=+e[13];else if(m.startsWith("matrix("))e=m.slice(7,-1).split(/, /),p=+e[0],y=+e[3],h=+e[4],r=+e[5];else return n;const a=f.transformOrigin,c=n.x-h-(1-p)*parseFloat(a),i=n.y-r-(1-y)*parseFloat(a.slice(a.indexOf(" ")+1)),o=p?n.width/p:t.offsetWidth,s=y?n.height/y:t.offsetHeight;return{x:c,y:i,width:o,height:s,top:i,right:c+o,bottom:i+s,left:c}}else return n}function od(t){const e=sd(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function uc(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function ad(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function Uw(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fc(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Ni(t){return ad(uc(t))}function Au(t,e){const n=Ni(t),f=od(e);return fc(n,f)}function Ww(t,e){const n=Ni(t),f=Ni(e);return Uw(n,f)}function Hw(t){const e=uc(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function zw(t,e){const n=uc(e);return fc(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let nr;function hc(){nr=new Map}hc();function Xw(t){nr.delete(t)}function Yw(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(ac));if(e>=0)return nr.has(t)||nr.set(t,new Map),nr.get(t).set(e,od(t.children[e])),e}function Gw(t,e){if(!Au(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const f=Yw(e);for(let y=0;y<n.length;y++)if(Au(t,n[y])){const h=nr.has(e)&&nr.get(e).get(y);return h&&!fc(Ni(t),h)?{index:f,isProximityBased:!1}:{index:y,isProximityBased:!1}}let m=Number.MAX_VALUE,p;for(let y=0;y<n.length;y++){const h=Ww(t,n[y]);h<m&&(m=h,p=y)}return{index:p,isProximityBased:!0}}const mi=25;function ld(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(p){const{directionObj:y,stepPx:h}=t;y&&(p.scrollBy(y.x*h,y.y*h),window.requestAnimationFrame(()=>n(p)))}function f(p){return mi-p}function m(p,y){if(!y)return!1;const h=zw(p,y);if(h===null)return e(),!1;const r=!!t.directionObj;let[a,c]=[!1,!1];return y.scrollHeight>y.clientHeight&&(h.bottom<mi?(a=!0,t.directionObj={x:0,y:1},t.stepPx=f(h.bottom)):h.top<mi&&(a=!0,t.directionObj={x:0,y:-1},t.stepPx=f(h.top)),!r&&a)||y.scrollWidth>y.clientWidth&&(h.right<mi?(c=!0,t.directionObj={x:1,y:0},t.stepPx=f(h.right)):h.left<mi&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=f(h.left)),!r&&c)?(n(y),!0):(e(),!1)}return{scrollIfNeeded:m,resetScrolling:e}}function Da(t){return JSON.stringify(t,null,2)}function Pu(t){if(!t)throw new Error("cannot get depth of a falsy node");return cd(t,0)}function cd(t,e=0){return t.parentElement?cd(t.parentElement,e+1):e-1}function Vw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function qw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const Kw=200,Du=10,{scrollIfNeeded:Jw,resetScrolling:Zw}=ld();let ll;function Qw(t,e,n=Kw){let f,m,p=!1,y;const h=Array.from(e).sort((a,c)=>Pu(c)-Pu(a));function r(){const a=Ni(t),c=Jw(a,f);if(!c&&y&&Math.abs(y.x-a.x)<Du&&Math.abs(y.y-a.y)<Du){ll=window.setTimeout(r,n);return}if(Hw(t)){jw(t);return}y=a;let i=!1;for(const o of h){c&&Xw(f);const s=Gw(t,o);if(s===null)continue;const{index:u}=s;i=!0,o!==f?(f&&Mw(f,t,o),Iw(o,s,t),f=o):u!==m&&(Bw(o,s,t),m=u);break}!i&&p&&f?(Lw(f,t),f=void 0,m=void 0,p=!1):p=!0,ll=window.setTimeout(r,n)}r()}function $w(){clearTimeout(ll),Zw(),hc()}const eC=300;let Ks;function Js(t){const e=t.touches?t.touches[0]:t;Ks={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:tC,resetScrolling:nC}=ld();let ud;function fd(){Ks&&tC(Ks,document.documentElement)&&hc(),ud=window.setTimeout(fd,eC)}function rC(){window.addEventListener("mousemove",Js),window.addEventListener("touchmove",Js),fd()}function iC(){window.removeEventListener("mousemove",Js),window.removeEventListener("touchmove",Js),Ks=void 0,window.clearTimeout(ud),nC()}function sC(t){const e=t.cloneNode(!0),n=[],f=t.tagName==="SELECT",m=f?[t]:[...t.querySelectorAll("select")];for(const y of m)n.push(y.value);if(m.length<=0)return e;const p=f?[e]:[...e.querySelectorAll("select")];for(let y=0;y<p.length;y++){const h=p[y],r=n[y],a=h.querySelector(`option[value="${r}"`);a&&a.setAttribute("selected",!0)}return e}const oC=.2;function qn(t){return`${t} ${oC}s ease`}function aC(t,e){const n=t.getBoundingClientRect(),f=sC(t);hd(t,f),f.id=Nw,f.style.position="fixed";let m=n.top,p=n.left;if(f.style.top=`${m}px`,f.style.left=`${p}px`,e){const y=ad(n);m-=y.y-e.y,p-=y.x-e.x,window.setTimeout(()=>{f.style.top=`${m}px`,f.style.left=`${p}px`},0)}return f.style.margin="0",f.style.boxSizing="border-box",f.style.height=`${n.height}px`,f.style.width=`${n.width}px`,f.style.transition=`${qn("top")}, ${qn("left")}, ${qn("background-color")}, ${qn("opacity")}, ${qn("color")} `,window.setTimeout(()=>f.style.transition+=`, ${qn("width")}, ${qn("height")}`,0),f.style.zIndex="9999",f.style.cursor="grabbing",f}function lC(t){t.style.cursor="grab"}function cC(t,e,n,f,m){const p=e.getBoundingClientRect(),y=t.getBoundingClientRect(),h=p.width-y.width,r=p.height-y.height;if(h||r){const a={left:(n-y.left)/y.width,top:(f-y.top)/y.height};t.style.height=`${p.height}px`,t.style.width=`${p.width}px`,t.style.left=`${parseFloat(t.style.left)-a.left*h}px`,t.style.top=`${parseFloat(t.style.top)-a.top*r}px`}hd(e,t),m()}function hd(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(f=>f.startsWith("background")||f.startsWith("padding")||f.startsWith("font")||f.startsWith("text")||f.startsWith("align")||f.startsWith("justify")||f.startsWith("display")||f.startsWith("flex")||f.startsWith("border")||f==="opacity"||f==="color"||f==="list-style-type").forEach(f=>e.style.setProperty(f,n.getPropertyValue(f),n.getPropertyPriority(f)))}function uC(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function fC(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function hC(t){t.style.visibility="hidden",t.setAttribute(ac,"true")}function dC(t){t.style.visibility="",t.removeAttribute(ac)}function Rs(t,e=()=>{},n=()=>[]){t.forEach(f=>{const m=e(f);Object.keys(m).forEach(p=>{f.style[p]=m[p]}),n(f).forEach(p=>f.classList.add(p))})}function Zs(t,e=()=>{},n=()=>[]){t.forEach(f=>{const m=e(f);Object.keys(m).forEach(p=>{f.style[p]=""}),n(f).forEach(p=>f.classList.contains(p)&&f.classList.remove(p))})}function gC(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const pC="--any--",mC=100,ku=3,Fu={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let fn,pt,Lt,vo,et,yo,Hr,It,En,jt,Er=!1,dc=!1,gc,Vi=!1;const Gt=new Map,rt=new Map,ka=new WeakMap;function vC(t,e){Gt.has(e)||Gt.set(e,new Set),Gt.get(e).has(t)||(Gt.get(e).add(t),rd())}function Ru(t,e){Gt.get(e).delete(t),id(),Gt.get(e).size===0&&Gt.delete(e)}function yC(){rC();const t=Gt.get(vo);for(const n of t)n.addEventListener(go,dd),n.addEventListener(Gi,gd),n.addEventListener(po,pd);window.addEventListener(oc,zr);const e=Math.max(mC,...Array.from(t.keys()).map(n=>rt.get(n).dropAnimationDurationMs));Qw(pt,t,e*1.07)}function _C(){iC();const t=Gt.get(vo);for(const e of t)e.removeEventListener(go,dd),e.removeEventListener(Gi,gd),e.removeEventListener(po,pd);window.removeEventListener(oc,zr),$w()}function bC(t){return t.findIndex(e=>e[lt]===lc)}function _o(t){return t.findIndex(e=>!!e[mo]&&e[lt]!==lc)}function dd(t){let{items:e,dropFromOthersDisabled:n}=rt.get(t.currentTarget);if(n&&t.currentTarget!==et)return;if(Vi=!1,e=e.filter(y=>y[lt]!==Hr[lt]),et!==t.currentTarget){const h=rt.get(et).items.filter(r=>!r[mo]);Rn(et,h,{trigger:At.DRAGGED_ENTERED_ANOTHER,id:Lt[lt],source:Rt.POINTER})}else{const y=bC(e);y!==-1&&e.splice(y,1)}const{index:f,isProximityBased:m}=t.detail.indexObj,p=m&&f===t.currentTarget.children.length-1?f+1:f;It=t.currentTarget,e.splice(p,0,Hr),Rn(t.currentTarget,e,{trigger:At.DRAGGED_ENTERED,id:Lt[lt],source:Rt.POINTER})}function gd(t){if(!Er)return;const{items:e,dropFromOthersDisabled:n}=rt.get(t.currentTarget);if(n&&t.currentTarget!==et&&t.currentTarget!==It)return;const f=_o(e),m=e.splice(f,1)[0];It=void 0;const{type:p,theOtherDz:y}=t.detail;if(p===qs.OUTSIDE_OF_ANY||p===qs.LEFT_FOR_ANOTHER&&y!==et&&rt.get(y).dropFromOthersDisabled){Vi=!0,It=et;const h=rt.get(et).items;h.splice(yo,0,m),Rn(et,h,{trigger:At.DRAGGED_LEFT_ALL,id:Lt[lt],source:Rt.POINTER})}Rn(t.currentTarget,e,{trigger:At.DRAGGED_LEFT,id:Lt[lt],source:Rt.POINTER})}function pd(t){const{items:e,dropFromOthersDisabled:n}=rt.get(t.currentTarget);if(n&&t.currentTarget!==et)return;Vi=!1;const{index:f}=t.detail.indexObj,m=_o(e);e.splice(m,1),e.splice(f,0,Hr),Rn(t.currentTarget,e,{trigger:At.DRAGGED_OVER_INDEX,id:Lt[lt],source:Rt.POINTER})}function Qs(t){t.preventDefault();const e=t.touches?t.touches[0]:t;jt={x:e.clientX,y:e.clientY},pt.style.transform=`translate3d(${jt.x-En.x}px, ${jt.y-En.y}px, 0)`}function zr(){dc=!0,window.removeEventListener("mousemove",Qs),window.removeEventListener("touchmove",Qs),window.removeEventListener("mouseup",zr),window.removeEventListener("touchend",zr),_C(),lC(pt),It||(It=et);let{items:t,type:e}=rt.get(It);Zs(Gt.get(e),m=>rt.get(m).dropTargetStyle,m=>rt.get(m).dropTargetClasses);let n=_o(t);n===-1&&(n=yo),t=t.map(m=>m[mo]?Lt:m);function f(){gc(),Wr(It,t,{trigger:Vi?At.DROPPED_OUTSIDE_OF_ANY:At.DROPPED_INTO_ZONE,id:Lt[lt],source:Rt.POINTER}),It!==et&&Wr(et,rt.get(et).items,{trigger:At.DROPPED_INTO_ANOTHER,id:Lt[lt],source:Rt.POINTER}),dC(It.children[n]),CC()}wC(n,f)}function wC(t,e){const n=sd(It.children[t]),f={x:n.left-parseFloat(pt.style.left),y:n.top-parseFloat(pt.style.top)},{dropAnimationDurationMs:m}=rt.get(It),p=`transform ${m}ms ease`;pt.style.transition=pt.style.transition?pt.style.transition+","+p:p,pt.style.transform=`translate3d(${f.x}px, ${f.y}px, 0)`,window.setTimeout(e,m)}function CC(){pt.remove(),fn.remove(),pt=void 0,fn=void 0,Lt=void 0,vo=void 0,et=void 0,yo=void 0,Hr=void 0,It=void 0,En=void 0,jt=void 0,Er=!1,dc=!1,gc=void 0,Vi=!1}function SC(t,e){let n=!1;const f={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Fu,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let m=new Map;function p(){window.addEventListener("mousemove",r,{passive:!1}),window.addEventListener("touchmove",r,{passive:!1,capture:!1}),window.addEventListener("mouseup",h,{passive:!1}),window.addEventListener("touchend",h,{passive:!1})}function y(){window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",h),window.removeEventListener("touchend",h)}function h(){y(),fn=void 0,En=void 0,jt=void 0}function r(o){o.preventDefault();const s=o.touches?o.touches[0]:o;jt={x:s.clientX,y:s.clientY},(Math.abs(jt.x-En.x)>=ku||Math.abs(jt.y-En.y)>=ku)&&(y(),c())}function a(o){if(o.target!==o.currentTarget&&(o.target.value!==void 0||o.target.isContentEditable)||o.button||Er)return;o.stopPropagation();const s=o.touches?o.touches[0]:o;En={x:s.clientX,y:s.clientY},jt=He({},En),fn=o.currentTarget,p()}function c(){Er=!0;const o=m.get(fn);yo=o,et=fn.parentElement;const s=et.getRootNode(),u=s.body||s,{items:d,type:l,centreDraggedOnCursor:g}=f;Lt=He({},d[o]),vo=l,Hr=un(He({},Lt),{[mo]:!0});const v=un(He({},Hr),{[lt]:lc});pt=aC(fn,g&&jt);function b(){pt.parentElement?window.requestAnimationFrame(b):(u.appendChild(pt),pt.focus(),yC(),fC(fn),u.appendChild(fn))}window.requestAnimationFrame(b),Rs(Array.from(Gt.get(f.type)).filter(_=>_===et||!rt.get(_).dropFromOthersDisabled),_=>rt.get(_).dropTargetStyle,_=>rt.get(_).dropTargetClasses),d.splice(o,1,v),gc=gC(et),Rn(et,d,{trigger:At.DRAG_STARTED,id:Lt[lt],source:Rt.POINTER}),window.addEventListener("mousemove",Qs,{passive:!1}),window.addEventListener("touchmove",Qs,{passive:!1,capture:!1}),window.addEventListener("mouseup",zr,{passive:!1}),window.addEventListener("touchend",zr,{passive:!1})}function i({items:o=void 0,flipDurationMs:s=0,type:u=pC,dragDisabled:d=!1,morphDisabled:l=!1,dropFromOthersDisabled:g=!1,dropTargetStyle:v=Fu,dropTargetClasses:b=[],transformDraggedElement:_=()=>{},centreDraggedOnCursor:w=!1}){f.dropAnimationDurationMs=s,f.type&&u!==f.type&&Ru(t,f.type),f.type=u,vC(t,u),f.items=[...o],f.dragDisabled=d,f.morphDisabled=l,f.transformDraggedElement=_,f.centreDraggedOnCursor=w,n&&Er&&!dc&&(!Vw(v,f.dropTargetStyle)||!qw(b,f.dropTargetClasses))&&(Zs([t],()=>f.dropTargetStyle,()=>b),Rs([t],()=>v,()=>b)),f.dropTargetStyle=v,f.dropTargetClasses=[...b];function S(x,D){return rt.get(x)?rt.get(x)[D]:f[D]}n&&Er&&f.dropFromOthersDisabled!==g&&(g?Zs([t],x=>S(x,"dropTargetStyle"),x=>S(x,"dropTargetClasses")):Rs([t],x=>S(x,"dropTargetStyle"),x=>S(x,"dropTargetClasses"))),f.dropFromOthersDisabled=g,rt.set(t,f);const T=_o(f.items);for(let x=0;x<t.children.length;x++){const D=t.children[x];if(uC(D,d),x===T){l||cC(pt,D,jt.x,jt.y,()=>f.transformDraggedElement(pt,Lt,x)),hC(D);continue}D.removeEventListener("mousedown",ka.get(D)),D.removeEventListener("touchstart",ka.get(D)),d||(D.addEventListener("mousedown",a),D.addEventListener("touchstart",a),ka.set(D,a)),m.set(D,x),n||(n=!0)}}return i(e),{update:o=>{i(o)},destroy:()=>{Ru(t,f.type),rt.delete(t)}}}const cl={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},md={[cl.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[cl.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},TC="dnd-action-aria-alert";let Ze;function ul(){Ze||(Ze=document.createElement("div"),function(){Ze.id=TC,Ze.style.position="fixed",Ze.style.bottom="0",Ze.style.left="0",Ze.style.zIndex="-5",Ze.style.opacity="0",Ze.style.height="0",Ze.style.width="0",Ze.setAttribute("role","alert")}(),document.body.prepend(Ze),Object.entries(md).forEach(([t,e])=>document.body.prepend(EC(t,e))))}function xC(){return cc?null:(document.readyState==="complete"?ul():window.addEventListener("DOMContentLoaded",ul),He({},cl))}function OC(){cc||!Ze||(Object.keys(md).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),Ze.remove(),Ze=void 0)}function EC(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function Ir(t){if(cc)return;Ze||ul(),Ze.innerHTML="";const e=document.createTextNode(t);Ze.appendChild(e),Ze.style.display="none",Ze.style.display="inline"}const AC="--any--",Iu={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Nt=!1,fl,wt,rr="",Jn,en,kn="";const $s=new WeakSet,Mu=new WeakMap,Lu=new WeakMap,hl=new Map,gt=new Map,Yt=new Map;let eo;function PC(t,e){Yt.size===0&&(eo=xC(),window.addEventListener("keydown",vd),window.addEventListener("click",yd)),Yt.has(e)||Yt.set(e,new Set),Yt.get(e).has(t)||(Yt.get(e).add(t),rd())}function Bu(t,e){wt===t&&Ui(),Yt.get(e).delete(t),id(),Yt.get(e).size===0&&Yt.delete(e),Yt.size===0&&(window.removeEventListener("keydown",vd),window.removeEventListener("click",yd),eo=void 0,OC())}function vd(t){if(!!Nt)switch(t.key){case"Escape":{Ui();break}}}function yd(){!Nt||$s.has(document.activeElement)||Ui()}function DC(t){if(!Nt)return;const e=t.currentTarget;if(e===wt)return;rr=e.getAttribute("aria-label")||"";const{items:n}=gt.get(wt),f=n.find(a=>a[lt]===en),m=n.indexOf(f),p=n.splice(m,1)[0],{items:y,autoAriaDisabled:h}=gt.get(e);e.getBoundingClientRect().top<wt.getBoundingClientRect().top||e.getBoundingClientRect().left<wt.getBoundingClientRect().left?(y.push(p),h||Ir(`Moved item ${kn} to the end of the list ${rr}`)):(y.unshift(p),h||Ir(`Moved item ${kn} to the beginning of the list ${rr}`)),Wr(wt,n,{trigger:At.DROPPED_INTO_ANOTHER,id:en,source:Rt.KEYBOARD}),Wr(e,y,{trigger:At.DROPPED_INTO_ZONE,id:en,source:Rt.KEYBOARD}),wt=e}function _d(){hl.forEach(({update:t},e)=>t(gt.get(e)))}function Ui(t=!0){gt.get(wt).autoAriaDisabled||Ir(`Stopped dragging item ${kn}`),$s.has(document.activeElement)&&document.activeElement.blur(),t&&Rn(wt,gt.get(wt).items,{trigger:At.DRAG_STOPPED,id:en,source:Rt.KEYBOARD}),Zs(Yt.get(fl),e=>gt.get(e).dropTargetStyle,e=>gt.get(e).dropTargetClasses),Jn=null,en=null,kn="",fl=null,wt=null,rr="",Nt=!1,_d()}function kC(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Iu,dropTargetClasses:[],autoAriaDisabled:!1};function f(c,i,o){c.length<=1||c.splice(o,1,c.splice(i,1,c[o])[0])}function m(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!$s.has(c.target))return;c.preventDefault(),c.stopPropagation(),Nt?Ui():p(c);break}case"ArrowDown":case"ArrowRight":{if(!Nt)return;c.preventDefault(),c.stopPropagation();const{items:i}=gt.get(t),o=Array.from(t.children),s=o.indexOf(c.currentTarget);s<o.length-1&&(n.autoAriaDisabled||Ir(`Moved item ${kn} to position ${s+2} in the list ${rr}`),f(i,s,s+1),Wr(t,i,{trigger:At.DROPPED_INTO_ZONE,id:en,source:Rt.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Nt)return;c.preventDefault(),c.stopPropagation();const{items:i}=gt.get(t),s=Array.from(t.children).indexOf(c.currentTarget);s>0&&(n.autoAriaDisabled||Ir(`Moved item ${kn} to position ${s} in the list ${rr}`),f(i,s,s-1),Wr(t,i,{trigger:At.DROPPED_INTO_ZONE,id:en,source:Rt.KEYBOARD}));break}}}function p(c){h(c.currentTarget),wt=t,fl=n.type,Nt=!0;const i=Array.from(Yt.get(n.type)).filter(o=>o===wt||!gt.get(o).dropFromOthersDisabled);if(Rs(i,o=>gt.get(o).dropTargetStyle,o=>gt.get(o).dropTargetClasses),!n.autoAriaDisabled){let o=`Started dragging item ${kn}. Use the arrow keys to move it within its list ${rr}`;i.length>1&&(o+=", or tab to another list in order to move the item into it"),Ir(o)}Rn(t,gt.get(t).items,{trigger:At.DRAG_STARTED,id:en,source:Rt.KEYBOARD}),_d()}function y(c){!Nt||c.currentTarget!==Jn&&(c.stopPropagation(),Ui(!1),p(c))}function h(c){const{items:i}=gt.get(t),o=Array.from(t.children),s=o.indexOf(c);Jn=c,Jn.tabIndex=0,en=i[s][lt],kn=o[s].getAttribute("aria-label")||""}function r({items:c=[],type:i=AC,dragDisabled:o=!1,zoneTabIndex:s=0,dropFromOthersDisabled:u=!1,dropTargetStyle:d=Iu,dropTargetClasses:l=[],autoAriaDisabled:g=!1}){n.items=[...c],n.dragDisabled=o,n.dropFromOthersDisabled=u,n.zoneTabIndex=s,n.dropTargetStyle=d,n.dropTargetClasses=l,n.autoAriaDisabled=g,n.type&&i!==n.type&&Bu(t,n.type),n.type=i,PC(t,i),g||(t.setAttribute("aria-disabled",o),t.setAttribute("role","list"),t.setAttribute("aria-describedby",o?eo.DND_ZONE_DRAG_DISABLED:eo.DND_ZONE_ACTIVE)),gt.set(t,n),Nt?t.tabIndex=t===wt||Jn.contains(t)||n.dropFromOthersDisabled||wt&&n.type!==gt.get(wt).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",DC);for(let v=0;v<t.children.length;v++){const b=t.children[v];$s.add(b),b.tabIndex=Nt?-1:0,g||b.setAttribute("role","listitem"),b.removeEventListener("keydown",Mu.get(b)),b.removeEventListener("click",Lu.get(b)),o||(b.addEventListener("keydown",m),Mu.set(b,m),b.addEventListener("click",y),Lu.set(b,y)),Nt&&n.items[v][lt]===en&&(Jn=b,Jn.tabIndex=0,b.focus())}}r(e);const a={update:c=>{r(c)},destroy:()=>{Bu(t,n.type),gt.delete(t),hl.delete(t)}};return hl.set(t,a),a}function cx(t,e){ju(e);const n=SC(t,e),f=kC(t,e);return{update:m=>{ju(m),n.update(m),f.update(m)},destroy:()=>{n.destroy(),f.destroy()}}}function ju(t){const d=t,{items:e,flipDurationMs:n,type:f,dragDisabled:m,morphDisabled:p,dropFromOthersDisabled:y,zoneTabIndex:h,dropTargetStyle:r,dropTargetClasses:a,transformDraggedElement:c,autoAriaDisabled:i,centreDraggedOnCursor:o}=d,s=Oc(d,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!e)throw new Error("no 'items' key provided to dndzone");const u=e.find(l=>!{}.hasOwnProperty.call(l,lt));if(u)throw new Error(`missing '${lt}' property for item ${Da(u)}`);if(a&&!Array.isArray(a))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof a}, ${Da(a)}`);if(h&&!FC(h))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof h}, ${Da(h)}`)}function FC(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function RC({h:t,s:e,v:n,a:f=1}){let m,p,y,h=t%360/60;const r=n*e,a=r*(1-Math.abs(h%2-1));m=p=y=n-r,h=~~h,m+=[r,a,0,0,a,r][h],p+=[a,r,r,a,0,0][h],y+=[0,0,a,r,r,a][h];const c=Math.floor(m*255),i=Math.floor(p*255),o=Math.floor(y*255);return{r:c,g:i,b:o,a:f}}function bd({r:t,g:e,b:n,a:f=1}){return{hex:"#"+[t,e,n,Math.round(f*255)|0].reduce((m,p)=>`${m}${p.toString(16).padStart(2,"0")}`,"")}}function IC(t){const e=t.hex;return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16),a:e.length<=7?1:parseInt(e.substr(7,2),16)/255}}function wd({r:t,g:e,b:n,a:f=1}){const m=t/255,p=e/255,y=n/255,h=Math.max(m,p,y),r=h-Math.min(m,p,y),a=r===0?0:r/h;let c=r===0?null:h===m?(p-y)/r+(p<y?6:0):h===p?(y-m)/r+2:(m-p)/r+4;return c=c%6*60,{a:f,h:c,s:a,v:h}}function MC({h:t,s:e,v:n,a:f}){const m=RC({h:t,s:e,v:n,a:f});return un(He(He({},m),bd(m)),{h:t,s:e,v:n})}function LC({r:t,g:e,b:n,a:f}){const m={r:t,g:e,b:n,a:f};return un(He(He({},wd(m)),bd(m)),{r:t,g:e,b:n})}function BC({hex:t}){const e=IC({hex:t});return un(He(He({},e),wd(e)),{hex:t})}var Fn={hsv2Color:MC,rgb2Color:LC,hex2Color:BC};const hn=kf({ArrowLeft:0,ArrowUp:0,ArrowRight:0,ArrowDown:0}),pc=Mg(hn,t=>un(He({},t),{ArrowV:t.ArrowUp+t.ArrowDown,ArrowH:t.ArrowLeft+t.ArrowRight,ArrowVH:t.ArrowUp+t.ArrowDown+t.ArrowLeft+t.ArrowRight}));function mc(t,e=.001,n=.01){const p=Math.min(1,Math.max(1,t-50)/50);return e+(n-e)/2*(1-Math.cos(Math.PI*p))}function Nu(t,e,n){return Math.min(Math.max(e,t),n)}const{window:Tr}=Of;function jC(t){let e,n,f,m,p;var y=t[2].pickerIndicator;function h(r){return{props:{pos:r[8],color:Fn.hsv2Color({h:r[3],s:r[0],v:r[1],a:1})}}}return y&&(n=new y(h(t))),{c(){e=Te("div"),n&&Le(n.$$.fragment),ce(e,"class","picker svelte-6pruf6"),ce(e,"tabindex","0"),$e(e,"--color-bg",t[7].hex)},m(r,a){Ce(r,e,a),n&&Ie(n,e,null),t[17](e),f=!0,m||(p=[ve(e,"mousedown",t[9]),ve(e,"touchstart",t[15]),ve(e,"touchmove",t[15]),ve(e,"touchend",t[15])],m=!0)},p(r,a){const c={};if(a&256&&(c.pos=r[8]),a&11&&(c.color=Fn.hsv2Color({h:r[3],s:r[0],v:r[1],a:1})),y!==(y=r[2].pickerIndicator)){if(n){qe();const i=n;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(n=new y(h(r)),Le(n.$$.fragment),de(n.$$.fragment,1),Ie(n,e,null)):n=null}else y&&n.$set(c);(!f||a&128)&&$e(e,"--color-bg",r[7].hex)},i(r){f||(n&&de(n.$$.fragment,r),f=!0)},o(r){n&&ge(n.$$.fragment,r),f=!1},d(r){r&&we(e),n&&Me(n),t[17](null),m=!1,Tt(p)}}}function NC(t){let e,n,f,m,p;var y=t[2].pickerWrapper;function h(r){return{props:{focused:r[6],toRight:r[4],$$slots:{default:[jC]},$$scope:{ctx:r}}}}return y&&(e=new y(h(t))),{c(){e&&Le(e.$$.fragment),n=Nn()},m(r,a){e&&Ie(e,r,a),Ce(r,n,a),f=!0,m||(p=[ve(Tr,"mouseup",t[10]),ve(Tr,"mousedown",t[12]),ve(Tr,"mousemove",t[11]),ve(Tr,"keyup",t[13]),ve(Tr,"keydown",t[14]),ve(Tr,"dbclick",UC)],m=!0)},p(r,[a]){const c={};if(a&64&&(c.focused=r[6]),a&16&&(c.toRight=r[4]),a&33554863&&(c.$$scope={dirty:a,ctx:r}),y!==(y=r[2].pickerWrapper)){if(e){qe();const i=e;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(e=new y(h(r)),Le(e.$$.fragment),de(e.$$.fragment,1),Ie(e,n.parentNode,n)):e=null}else y&&e.$set(c)},i(r){f||(e&&de(e.$$.fragment,r),f=!0)},o(r){e&&ge(e.$$.fragment,r),f=!1},d(r){r&&we(n),e&&Me(e,r),m=!1,Tt(p)}}}const UC=t=>t.preventDefault();function WC(t,e,n){let f,m;ir(t,hn,k=>n(21,f=k)),ir(t,pc,k=>n(22,m=k));let{components:p}=e,{h:y}=e,{s:h}=e,{v:r}=e,{isOpen:a}=e,{toRight:c}=e,i,o=!1,s=!1,u,d,l,g={x:100,y:0};function v(k){let q={x:k.offsetX,y:k.offsetY},K=i.getBoundingClientRect().width,ne=i.getBoundingClientRect().height;n(0,h=Nu(q.x/K,0,1)),n(1,r=Nu((ne-q.y)/ne,0,1))}function b(k){k.button===0&&(o=!0,v(k))}function _(){o=!1}function w(k){o&&v({offsetX:Math.max(0,Math.min(i.getBoundingClientRect().width,k.clientX-i.getBoundingClientRect().left)),offsetY:Math.max(0,Math.min(i.getBoundingClientRect().height,k.clientY-i.getBoundingClientRect().top))})}function S(k){k.target.isSameNode(i)||n(6,s=!1)}function T(k){k.key==="Tab"&&n(6,s=document.activeElement.isSameNode(i)),!k.repeat&&s&&D()}function x(k){s&&m.ArrowVH&&(k.preventDefault(),k.repeat||D()),s&&k.shiftKey&&k.key==="Tab"&&n(16,a=!1)}function D(){m.ArrowVH?u||(d=0,u=window.setInterval(()=>{let k=mc(++d);n(0,h=Math.min(1,Math.max(0,h+(f.ArrowRight-f.ArrowLeft)*k))),n(1,r=Math.min(1,Math.max(0,r+(f.ArrowUp-f.ArrowDown)*k)))},10)):u&&(clearInterval(u),u=void 0)}function N(k){k.preventDefault(),v({offsetX:k.changedTouches[0].clientX-i.getBoundingClientRect().left,offsetY:k.changedTouches[0].clientY-i.getBoundingClientRect().top})}function W(k){Ne[k?"unshift":"push"](()=>{i=k,n(5,i)})}return t.$$set=k=>{"components"in k&&n(2,p=k.components),"h"in k&&n(3,y=k.h),"s"in k&&n(0,h=k.s),"v"in k&&n(1,r=k.v),"isOpen"in k&&n(16,a=k.isOpen),"toRight"in k&&n(4,c=k.toRight)},t.$$.update=()=>{t.$$.dirty&8&&typeof y=="number"&&n(7,l=Fn.hsv2Color({h:y,s:1,v:1,a:1})),t.$$.dirty&35&&typeof h=="number"&&typeof r=="number"&&i&&n(8,g={x:h*100,y:(1-r)*100})},[h,r,p,y,c,i,s,l,g,b,_,w,S,T,x,N,a,W]}class HC extends ot{constructor(e){super();st(this,e,WC,NC,tt,{components:2,h:3,s:0,v:1,isOpen:16,toRight:4})}}function zC(t){let e,n,f,m,p;var y=t[0].sliderIndicator;function h(r){return{props:{pos:r[3],toRight:r[1]}}}return y&&(n=new y(h(t))),{c(){e=Te("div"),n&&Le(n.$$.fragment),ce(e,"class","slider svelte-1aqbz3r"),ce(e,"tabindex","0"),Se(e,"to-right",t[1])},m(r,a){Ce(r,e,a),n&&Ie(n,e,null),t[12](e),f=!0,m||(p=[ve(e,"mousedown",t[5]),ve(e,"touchstart",t[10]),ve(e,"touchmove",t[10]),ve(e,"touchend",t[10])],m=!0)},p(r,a){const c={};if(a&8&&(c.pos=r[3]),a&2&&(c.toRight=r[1]),y!==(y=r[0].sliderIndicator)){if(n){qe();const i=n;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(n=new y(h(r)),Le(n.$$.fragment),de(n.$$.fragment,1),Ie(n,e,null)):n=null}else y&&n.$set(c);a&2&&Se(e,"to-right",r[1])},i(r){f||(n&&de(n.$$.fragment,r),f=!0)},o(r){n&&ge(n.$$.fragment,r),f=!1},d(r){r&&we(e),n&&Me(n),t[12](null),m=!1,Tt(p)}}}function XC(t){let e,n,f,m,p;var y=t[0].sliderWrapper;function h(r){return{props:{focused:r[4],toRight:r[1],$$slots:{default:[zC]},$$scope:{ctx:r}}}}return y&&(e=new y(h(t))),{c(){e&&Le(e.$$.fragment),n=Nn()},m(r,a){e&&Ie(e,r,a),Ce(r,n,a),f=!0,m||(p=[ve(window,"mouseup",t[6]),ve(window,"mousemove",t[7]),ve(window,"keyup",t[8]),ve(window,"keydown",t[9]),ve(window,"dbclick",YC)],m=!0)},p(r,[a]){const c={};if(a&16&&(c.focused=r[4]),a&2&&(c.toRight=r[1]),a&1048591&&(c.$$scope={dirty:a,ctx:r}),y!==(y=r[0].sliderWrapper)){if(e){qe();const i=e;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(e=new y(h(r)),Le(e.$$.fragment),de(e.$$.fragment,1),Ie(e,n.parentNode,n)):e=null}else y&&e.$set(c)},i(r){f||(e&&de(e.$$.fragment,r),f=!0)},o(r){e&&ge(e.$$.fragment,r),f=!1},d(r){r&&we(n),e&&Me(e,r),m=!1,Tt(p)}}}const YC=t=>t.preventDefault();function GC(t,e,n){let f,m;ir(t,hn,T=>n(16,f=T)),ir(t,pc,T=>n(17,m=T));let{components:p}=e,{toRight:y}=e,h,r=!1,{h:a}=e,c=0,i=!1,o,s;function u(T){const x=y?h.getBoundingClientRect().width:h.getBoundingClientRect().height,D=Math.max(0,Math.min(x,T));n(11,a=D/x*360)}function d(T){T.button===0&&(r=!0,u(y?T.offsetX:T.offsetY))}function l(){r=!1}function g(T){r&&u(y?T.clientX-h.getBoundingClientRect().left:T.clientY-h.getBoundingClientRect().top)}function v(T){T.key==="Tab"&&n(4,i=document.activeElement.isSameNode(h)),!T.repeat&&i&&_()}function b(T){i&&m.ArrowVH&&(T.preventDefault(),T.repeat||_())}function _(){m.ArrowVH?o||(s=0,o=setInterval(()=>{const T=mc(++s),x=y?f.ArrowRight-f.ArrowLeft:f.ArrowDown-f.ArrowUp;n(11,a=Math.min(360,Math.max(0,a+x*360*T)))},10)):o&&(clearInterval(o),o=void 0)}function w(T){T.preventDefault(),u(y?T.changedTouches[0].clientX-h.getBoundingClientRect().left:T.changedTouches[0].clientY-h.getBoundingClientRect().top)}function S(T){Ne[T?"unshift":"push"](()=>{h=T,n(2,h)})}return t.$$set=T=>{"components"in T&&n(0,p=T.components),"toRight"in T&&n(1,y=T.toRight),"h"in T&&n(11,a=T.h)},t.$$.update=()=>{t.$$.dirty&2052&&typeof a=="number"&&h&&n(3,c=100*a/360)},[p,y,h,c,i,d,l,g,v,b,w,a,S]}class VC extends ot{constructor(e){super();st(this,e,GC,XC,tt,{components:0,toRight:1,h:11})}}function qC(t){let e,n,f,m,p;var y=t[1].alphaIndicator;function h(r){return{props:{pos:r[9],toRight:r[6],color:Fn.hsv2Color({h:r[2],s:r[3],v:r[4],a:r[0]})}}}return y&&(n=new y(h(t))),{c(){e=Te("div"),n&&Le(n.$$.fragment),ce(e,"tabindex","0"),ce(e,"class","alpha svelte-1yfa8tq"),$e(e,"--alpha-color",t[5].substring(0,7)),Se(e,"to-right",t[6])},m(r,a){Ce(r,e,a),n&&Ie(n,e,null),t[17](e),f=!0,m||(p=[ve(e,"mousedown",t[10]),ve(e,"touchstart",t[15]),ve(e,"touchmove",t[15]),ve(e,"touchend",t[15])],m=!0)},p(r,a){const c={};if(a&512&&(c.pos=r[9]),a&64&&(c.toRight=r[6]),a&29&&(c.color=Fn.hsv2Color({h:r[2],s:r[3],v:r[4],a:r[0]})),y!==(y=r[1].alphaIndicator)){if(n){qe();const i=n;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(n=new y(h(r)),Le(n.$$.fragment),de(n.$$.fragment,1),Ie(n,e,null)):n=null}else y&&n.$set(c);(!f||a&32)&&$e(e,"--alpha-color",r[5].substring(0,7)),a&64&&Se(e,"to-right",r[6])},i(r){f||(n&&de(n.$$.fragment,r),f=!0)},o(r){n&&ge(n.$$.fragment,r),f=!1},d(r){r&&we(e),n&&Me(n),t[17](null),m=!1,Tt(p)}}}function KC(t){let e,n,f,m,p;var y=t[1].alphaWrapper;function h(r){return{props:{focused:r[8],toRight:r[6],$$slots:{default:[qC]},$$scope:{ctx:r}}}}return y&&(e=new y(h(t))),{c(){e&&Le(e.$$.fragment),n=Nn()},m(r,a){e&&Ie(e,r,a),Ce(r,n,a),f=!0,m||(p=[ve(window,"mouseup",t[11]),ve(window,"mousemove",t[12]),ve(window,"keyup",t[13]),ve(window,"keydown",t[14]),ve(window,"dbclick",JC)],m=!0)},p(r,[a]){const c={};if(a&256&&(c.focused=r[8]),a&64&&(c.toRight=r[6]),a&33555199&&(c.$$scope={dirty:a,ctx:r}),y!==(y=r[1].alphaWrapper)){if(e){qe();const i=e;ge(i.$$.fragment,1,0,()=>{Me(i,1)}),Ke()}y?(e=new y(h(r)),Le(e.$$.fragment),de(e.$$.fragment,1),Ie(e,n.parentNode,n)):e=null}else y&&e.$set(c)},i(r){f||(e&&de(e.$$.fragment,r),f=!0)},o(r){e&&ge(e.$$.fragment,r),f=!1},d(r){r&&we(n),e&&Me(e,r),m=!1,Tt(p)}}}const JC=t=>t.preventDefault();function ZC(t,e,n){let f,m;ir(t,hn,k=>n(21,f=k)),ir(t,pc,k=>n(22,m=k));let{components:p}=e,{isOpen:y}=e,{h}=e,{s:r}=e,{v:a}=e,{a:c}=e,{hex:i}=e,{toRight:o}=e,s,u=!1,d=!1,l,g,v;function b(k){const q=o?s.getBoundingClientRect().width:s.getBoundingClientRect().height,K=Math.max(0,Math.min(q,k));n(0,c=K/q)}function _(k){k.button===0&&(u=!0,b(o?k.offsetX:k.offsetY))}function w(){u=!1}function S(k){u&&b(o?k.clientX-s.getBoundingClientRect().left:k.clientY-s.getBoundingClientRect().top)}function T(k){k.key==="Tab"&&n(8,d=document.activeElement.isSameNode(s)),!k.repeat&&d&&D()}function x(k){d&&m.ArrowVH&&(k.preventDefault(),k.repeat||D()),d&&!k.shiftKey&&k.key==="Tab"&&n(16,y=!1)}function D(){m.ArrowVH?l||(g=0,l=setInterval(()=>{const k=mc(++g),q=o?f.ArrowRight-f.ArrowLeft:f.ArrowDown-f.ArrowUp;n(0,c=Math.min(1,Math.max(0,c+q*k)))},10)):l&&(clearInterval(l),l=void 0)}function N(k){k.preventDefault(),b(o?k.changedTouches[0].clientX-s.getBoundingClientRect().left:k.changedTouches[0].clientY-s.getBoundingClientRect().top)}function W(k){Ne[k?"unshift":"push"](()=>{s=k,n(7,s)})}return t.$$set=k=>{"components"in k&&n(1,p=k.components),"isOpen"in k&&n(16,y=k.isOpen),"h"in k&&n(2,h=k.h),"s"in k&&n(3,r=k.s),"v"in k&&n(4,a=k.v),"a"in k&&n(0,c=k.a),"hex"in k&&n(5,i=k.hex),"toRight"in k&&n(6,o=k.toRight)},t.$$.update=()=>{t.$$.dirty&129&&typeof c=="number"&&s&&n(9,v=100*c)},[c,p,h,r,a,i,o,s,d,v,_,w,S,T,x,N,y,W]}class QC extends ot{constructor(e){super();st(this,e,ZC,KC,tt,{components:1,isOpen:16,h:2,s:3,v:4,a:0,hex:5,toRight:6})}}function $C(t){let e,n;return{c(){e=Te("div"),ce(e,"style",n=(t[1]?"left":"top")+": "+t[0]+"%;"),ce(e,"class","svelte-1vfj60t"),Se(e,"to-right",t[1])},m(f,m){Ce(f,e,m)},p(f,[m]){m&3&&n!==(n=(f[1]?"left":"top")+": "+f[0]+"%;")&&ce(e,"style",n),m&2&&Se(e,"to-right",f[1])},i:xe,o:xe,d(f){f&&we(e)}}}function eS(t,e,n){let{pos:f}=e,{color:m}=e,{toRight:p}=e;return t.$$set=y=>{"pos"in y&&n(0,f=y.pos),"color"in y&&n(2,m=y.color),"toRight"in y&&n(1,p=y.toRight)},[f,p,m]}class Uu extends ot{constructor(e){super();st(this,e,eS,$C,tt,{pos:0,color:2,toRight:1})}}function tS(t){let e;return{c(){e=Te("div"),$e(e,"left",t[0].x+"%"),$e(e,"top",t[0].y+"%"),$e(e,"background-color",t[1].hex),ce(e,"class","svelte-jwe14i")},m(n,f){Ce(n,e,f)},p(n,[f]){f&1&&$e(e,"left",n[0].x+"%"),f&1&&$e(e,"top",n[0].y+"%"),f&2&&$e(e,"background-color",n[1].hex)},i:xe,o:xe,d(n){n&&we(e)}}}function nS(t,e,n){let{pos:f}=e,{color:m}=e;return t.$$set=p=>{"pos"in p&&n(0,f=p.pos),"color"in p&&n(1,m=p.color)},[f,m]}class rS extends ot{constructor(e){super();st(this,e,nS,tS,tt,{pos:0,color:1})}}function iS(t){let e,n;return{c:xe,m(f,m){e||(n=[ve(window,"keyup",t[0]),ve(window,"keydown",t[1])],e=!0)},p:xe,i:xe,o:xe,d(f){e=!1,Tt(n)}}}function sS(t,e,n){let f;ir(t,hn,y=>n(2,f=y));function m(y){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(y.key)&&(Ac(hn,f[y.key]=0,f),hn.set(f))}function p(y){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(y.key)&&(y.repeat||(Ac(hn,f[y.key]=1,f),hn.set(f)))}return[m,p]}class oS extends ot{constructor(e){super();st(this,e,sS,iS,tt,{})}}function aS(t){let e,n;const f=t[3].default,m=Mn(f,t,t[2],null);return{c(){e=Te("div"),m&&m.c(),ce(e,"class","svelte-18zlsxd"),Se(e,"focused",t[0]),Se(e,"to-right",t[1])},m(p,y){Ce(p,e,y),m&&m.m(e,null),n=!0},p(p,[y]){m&&m.p&&(!n||y&4)&&Bn(m,f,p,p[2],n?Ln(f,p[2],y,null):jn(p[2]),null),y&1&&Se(e,"focused",p[0]),y&2&&Se(e,"to-right",p[1])},i(p){n||(de(m,p),n=!0)},o(p){ge(m,p),n=!1},d(p){p&&we(e),m&&m.d(p)}}}function lS(t,e,n){let{$$slots:f={},$$scope:m}=e,{focused:p}=e,{toRight:y}=e;return t.$$set=h=>{"focused"in h&&n(0,p=h.focused),"toRight"in h&&n(1,y=h.toRight),"$$scope"in h&&n(2,m=h.$$scope)},[p,y,m,f]}class cS extends ot{constructor(e){super();st(this,e,lS,aS,tt,{focused:0,toRight:1})}}function uS(t){let e,n;const f=t[3].default,m=Mn(f,t,t[2],null);return{c(){e=Te("div"),m&&m.c(),ce(e,"class","svelte-ydfru3"),Se(e,"focused",t[0]),Se(e,"to-right",t[1])},m(p,y){Ce(p,e,y),m&&m.m(e,null),n=!0},p(p,[y]){m&&m.p&&(!n||y&4)&&Bn(m,f,p,p[2],n?Ln(f,p[2],y,null):jn(p[2]),null),y&1&&Se(e,"focused",p[0]),y&2&&Se(e,"to-right",p[1])},i(p){n||(de(m,p),n=!0)},o(p){ge(m,p),n=!1},d(p){p&&we(e),m&&m.d(p)}}}function fS(t,e,n){let{$$slots:f={},$$scope:m}=e,{focused:p}=e,{toRight:y}=e;return t.$$set=h=>{"focused"in h&&n(0,p=h.focused),"toRight"in h&&n(1,y=h.toRight),"$$scope"in h&&n(2,m=h.$$scope)},[p,y,m,f]}class Wu extends ot{constructor(e){super();st(this,e,fS,uS,tt,{focused:0,toRight:1})}}function hS(t){let e,n,f,m,p,y,h,r;return{c(){e=Te("button"),n=Te("div"),f=Qn(`
	Choose a color`),m=Ft(),p=Te("input"),$e(n,"background-color",t[1].hex),ce(n,"class","svelte-1ycc135"),ce(e,"class","svelte-1ycc135"),ce(p,"type","hidden"),p.value=y=t[1].hex},m(a,c){Ce(a,e,c),ze(e,n),ze(e,f),t[4](e),Ce(a,m,c),Ce(a,p,c),h||(r=ve(window,"keyup",t[2]),h=!0)},p(a,[c]){c&2&&$e(n,"background-color",a[1].hex),c&2&&y!==(y=a[1].hex)&&(p.value=y)},i:xe,o:xe,d(a){a&&we(e),t[4](null),a&&we(m),a&&we(p),h=!1,r()}}}function dS(t,e,n){let{button:f}=e,{color:m}=e,{isOpen:p}=e;function y(r){document.activeElement.isSameNode(f)&&!r.shiftKey&&r.key==="Tab"&&n(3,p=!0)}function h(r){Ne[r?"unshift":"push"](()=>{f=r,n(0,f)})}return t.$$set=r=>{"button"in r&&n(0,f=r.button),"color"in r&&n(1,m=r.color),"isOpen"in r&&n(3,p=r.isOpen)},[f,m,y,p,h]}class gS extends ot{constructor(e){super();st(this,e,dS,hS,tt,{button:0,color:1,isOpen:3})}}function pS(t){let e,n;const f=t[5].default,m=Mn(f,t,t[4],null);return{c(){e=Te("div"),m&&m.c(),ce(e,"class","svelte-1u5o2lu"),Se(e,"isOpen",t[1]),Se(e,"isPopup",t[2]),Se(e,"to-right",t[3])},m(p,y){Ce(p,e,y),m&&m.m(e,null),t[6](e),n=!0},p(p,[y]){m&&m.p&&(!n||y&16)&&Bn(m,f,p,p[4],n?Ln(f,p[4],y,null):jn(p[4]),null),y&2&&Se(e,"isOpen",p[1]),y&4&&Se(e,"isPopup",p[2]),y&8&&Se(e,"to-right",p[3])},i(p){n||(de(m,p),n=!0)},o(p){ge(m,p),n=!1},d(p){p&&we(e),m&&m.d(p),t[6](null)}}}function mS(t,e,n){let{$$slots:f={},$$scope:m}=e,{wrapper:p}=e,{isOpen:y}=e,{isPopup:h}=e,{toRight:r}=e;function a(c){Ne[c?"unshift":"push"](()=>{p=c,n(0,p)})}return t.$$set=c=>{"wrapper"in c&&n(0,p=c.wrapper),"isOpen"in c&&n(1,y=c.isOpen),"isPopup"in c&&n(2,h=c.isPopup),"toRight"in c&&n(3,r=c.toRight),"$$scope"in c&&n(4,m=c.$$scope)},[p,y,h,r,m,f,a]}class vS extends ot{constructor(e){super();st(this,e,mS,pS,tt,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}}function Hu(t){let e,n,f,m,p;function y(c){t[11](c)}function h(c){t[12](c)}var r=t[8]().input;function a(c){let i={color:c[0]};return c[6]!==void 0&&(i.button=c[6]),c[1]!==void 0&&(i.isOpen=c[1]),{props:i}}return r&&(e=new r(a(t)),Ne.push(()=>Ut(e,"button",y)),Ne.push(()=>Ut(e,"isOpen",h))),{c(){e&&Le(e.$$.fragment),m=Nn()},m(c,i){e&&Ie(e,c,i),Ce(c,m,i),p=!0},p(c,i){const o={};if(i&1&&(o.color=c[0]),!n&&i&64&&(n=!0,o.button=c[6],gn(()=>n=!1)),!f&&i&2&&(f=!0,o.isOpen=c[1],gn(()=>f=!1)),r!==(r=c[8]().input)){if(e){qe();const s=e;ge(s.$$.fragment,1,0,()=>{Me(s,1)}),Ke()}r?(e=new r(a(c)),Ne.push(()=>Ut(e,"button",y)),Ne.push(()=>Ut(e,"isOpen",h)),Le(e.$$.fragment),de(e.$$.fragment,1),Ie(e,m.parentNode,m)):e=null}else r&&e.$set(o)},i(c){p||(e&&de(e.$$.fragment,c),p=!0)},o(c){e&&ge(e.$$.fragment,c),p=!1},d(c){c&&we(m),e&&Me(e,c)}}}function zu(t){let e,n,f,m;function p(r){t[17](r)}function y(r){t[18](r)}let h={components:t[8](),h:t[0].h,s:t[0].s,v:t[0].v,hex:t[0].hex,toRight:t[5]};return t[0].a!==void 0&&(h.a=t[0].a),t[1]!==void 0&&(h.isOpen=t[1]),e=new QC({props:h}),Ne.push(()=>Ut(e,"a",p)),Ne.push(()=>Ut(e,"isOpen",y)),{c(){Le(e.$$.fragment)},m(r,a){Ie(e,r,a),m=!0},p(r,a){const c={};a&1&&(c.h=r[0].h),a&1&&(c.s=r[0].s),a&1&&(c.v=r[0].v),a&1&&(c.hex=r[0].hex),a&32&&(c.toRight=r[5]),!n&&a&1&&(n=!0,c.a=r[0].a,gn(()=>n=!1)),!f&&a&2&&(f=!0,c.isOpen=r[1],gn(()=>f=!1)),e.$set(c)},i(r){m||(de(e.$$.fragment,r),m=!0)},o(r){ge(e.$$.fragment,r),m=!1},d(r){Me(e,r)}}}function yS(t){let e,n,f,m,p,y,h,r,a,c;function i(v){t[13](v)}function o(v){t[14](v)}function s(v){t[15](v)}let u={components:t[8](),h:t[0].h,toRight:t[5]};t[0].s!==void 0&&(u.s=t[0].s),t[0].v!==void 0&&(u.v=t[0].v),t[1]!==void 0&&(u.isOpen=t[1]),e=new HC({props:u}),Ne.push(()=>Ut(e,"s",i)),Ne.push(()=>Ut(e,"v",o)),Ne.push(()=>Ut(e,"isOpen",s));function d(v){t[16](v)}let l={components:t[8](),toRight:t[5]};t[0].h!==void 0&&(l.h=t[0].h),y=new VC({props:l}),Ne.push(()=>Ut(y,"h",d));let g=t[2]&&zu(t);return{c(){Le(e.$$.fragment),p=Ft(),Le(y.$$.fragment),r=Ft(),g&&g.c(),a=Nn()},m(v,b){Ie(e,v,b),Ce(v,p,b),Ie(y,v,b),Ce(v,r,b),g&&g.m(v,b),Ce(v,a,b),c=!0},p(v,b){const _={};b&1&&(_.h=v[0].h),b&32&&(_.toRight=v[5]),!n&&b&1&&(n=!0,_.s=v[0].s,gn(()=>n=!1)),!f&&b&1&&(f=!0,_.v=v[0].v,gn(()=>f=!1)),!m&&b&2&&(m=!0,_.isOpen=v[1],gn(()=>m=!1)),e.$set(_);const w={};b&32&&(w.toRight=v[5]),!h&&b&1&&(h=!0,w.h=v[0].h,gn(()=>h=!1)),y.$set(w),v[2]?g?(g.p(v,b),b&4&&de(g,1)):(g=zu(v),g.c(),de(g,1),g.m(a.parentNode,a)):g&&(qe(),ge(g,1,1,()=>{g=null}),Ke())},i(v){c||(de(e.$$.fragment,v),de(y.$$.fragment,v),de(g),c=!0)},o(v){ge(e.$$.fragment,v),ge(y.$$.fragment,v),ge(g),c=!1},d(v){Me(e,v),v&&we(p),Me(y,v),v&&we(r),g&&g.d(v),v&&we(a)}}}function _S(t){let e,n,f,m,p,y,h,r,a;e=new oS({});let c=t[3]&&Hu(t);function i(u){t[19](u)}var o=t[8]().wrapper;function s(u){let d={isOpen:u[1],isPopup:u[4],toRight:u[5],$$slots:{default:[yS]},$$scope:{ctx:u}};return u[7]!==void 0&&(d.wrapper=u[7]),{props:d}}return o&&(m=new o(s(t)),Ne.push(()=>Ut(m,"wrapper",i))),{c(){Le(e.$$.fragment),n=Ft(),c&&c.c(),f=Ft(),m&&Le(m.$$.fragment),y=Nn()},m(u,d){Ie(e,u,d),Ce(u,n,d),c&&c.m(u,d),Ce(u,f,d),m&&Ie(m,u,d),Ce(u,y,d),h=!0,r||(a=ve(window,"mousedown",t[9]),r=!0)},p(u,[d]){u[3]?c?(c.p(u,d),d&8&&de(c,1)):(c=Hu(u),c.c(),de(c,1),c.m(f.parentNode,f)):c&&(qe(),ge(c,1,1,()=>{c=null}),Ke());const l={};if(d&2&&(l.isOpen=u[1]),d&16&&(l.isPopup=u[4]),d&32&&(l.toRight=u[5]),d&2097191&&(l.$$scope={dirty:d,ctx:u}),!p&&d&128&&(p=!0,l.wrapper=u[7],gn(()=>p=!1)),o!==(o=u[8]().wrapper)){if(m){qe();const g=m;ge(g.$$.fragment,1,0,()=>{Me(g,1)}),Ke()}o?(m=new o(s(u)),Ne.push(()=>Ut(m,"wrapper",i)),Le(m.$$.fragment),de(m.$$.fragment,1),Ie(m,y.parentNode,y)):m=null}else o&&m.$set(l)},i(u){h||(de(e.$$.fragment,u),de(c),m&&de(m.$$.fragment,u),h=!0)},o(u){ge(e.$$.fragment,u),ge(c),m&&ge(m.$$.fragment,u),h=!1},d(u){Me(e,u),u&&we(n),c&&c.d(u),u&&we(f),u&&we(y),m&&Me(m,u),r=!1,a()}}}function bS(t){return t.h!==void 0&&t.s!==void 0&&t.v!==void 0}function wS(t){return t.hex!==void 0}function CS(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function SS(t,e,n){let{components:f={}}=e,{isAlpha:m=!0}=e,{isInput:p=!0}=e,{isPopup:y=!0}=e,{isOpen:h=!p}=e,{toRight:r=!1}=e,{color:a={h:0,s:1,v:1,a:1,hex:"#FF0000",r:255,g:0,b:0}}=e;const c={sliderIndicator:Uu,pickerIndicator:rS,alphaIndicator:Uu,pickerWrapper:cS,sliderWrapper:Wu,alphaWrapper:Wu,input:gS,wrapper:vS};function i(){return He(He({},c),f)}let o,s;function u({target:x}){p&&(o.isSameNode(x)?n(1,h=!h):h&&!s.contains(x)&&n(1,h=!1))}function d(x){o=x,n(6,o)}function l(x){h=x,n(1,h)}function g(x){t.$$.not_equal(a.s,x)&&(a.s=x,n(0,a))}function v(x){t.$$.not_equal(a.v,x)&&(a.v=x,n(0,a))}function b(x){h=x,n(1,h)}function _(x){t.$$.not_equal(a.h,x)&&(a.h=x,n(0,a))}function w(x){t.$$.not_equal(a.a,x)&&(a.a=x,n(0,a))}function S(x){h=x,n(1,h)}function T(x){s=x,n(7,s)}return t.$$set=x=>{"components"in x&&n(10,f=x.components),"isAlpha"in x&&n(2,m=x.isAlpha),"isInput"in x&&n(3,p=x.isInput),"isPopup"in x&&n(4,y=x.isPopup),"isOpen"in x&&n(1,h=x.isOpen),"toRight"in x&&n(5,r=x.toRight),"color"in x&&n(0,a=x.color)},t.$$.update=()=>{t.$$.dirty&1&&(a&&bS(a)?n(0,a=Fn.hsv2Color(a)):a&&wS(a)?n(0,a=Fn.hex2Color(a)):a&&CS(a)&&n(0,a=Fn.rgb2Color(a)))},[a,h,m,p,y,r,o,s,i,u,f,d,l,g,v,b,_,w,S,T]}class ux extends ot{constructor(e){super();st(this,e,SS,_S,tt,{components:10,isAlpha:2,isInput:3,isPopup:4,isOpen:1,toRight:5,color:0})}}function TS(t){let e,n;return{c(){e=Te("div"),ce(e,"style",n=`
    display: ${Xu};
    width: ${t[4]};
    height: ${t[3]};
    ${t[1]}
  `)},m(f,m){Ce(f,e,m),t[27](e)},p(f,m){m[0]&26&&n!==(n=`
    display: ${Xu};
    width: ${f[4]};
    height: ${f[3]};
    ${f[1]}
  `)&&ce(e,"style",n)},i:xe,o:xe,d(f){f&&we(e),t[27](null)}}}let Xu="block";function xS(t,e,n){let f,m,{alwaysShowEngAddr:p=!1}=e,{animation:y=!1}=e,{autoClose:h=!1}=e,{autoMapping:r=!0}=e,{autoResize:a=!1}=e,{defaultQuery:c=null}=e,{errorMessage:i="<p>\uD604\uC7AC Daum \uC6B0\uD3B8\uBC88\uD638 \uC11C\uBE44\uC2A4\uB97C \uC774\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.</p>"}=e,{height:o="400px"}=e,{hideEngBtn:s=!1}=e,{hideMapBtn:u=!1}=e,{maxSuggestItems:d=10}=e,{pleaseReadGuide:l=0}=e,{pleaseReadGuideTimer:g=1.5}=e,{scriptUrl:v="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"}=e,{shorthand:b=!0}=e,{showMoreHName:_=!1}=e,{style:w=""}=e,{submitMode:S=!0}=e,{theme:T=null}=e,{useSuggest:x=!0}=e,{useBannerLink:D=!0}=e,{width:N="100%"}=e,{focusInput:W=!0}=e,{focusContent:k=!0}=e,q=null;const K=Hi();yl(()=>{const P="daum_postcode";if(!!document.getElementById(P))ne();else{const U=document.createElement("script");U.src=v,U.onload=()=>ne(),U.onerror=A=>se(A),U.id=P,document.body.appendChild(U)}});const ne=()=>{window.daum.postcode.load(()=>{new window.daum.Postcode({oncomplete:oe,onsearch:ae,onresize:I,alwaysShowEngAddr:p,animation:y,autoMapping:r,autoResize:a,height:"100%",hideEngBtn:s,hideMapBtn:u,maxSuggestItems:d,pleaseReadGuide:l,pleaseReadGuideTimer:g,shorthand:b,showMoreHName:_,submitMode:S,theme:T,useSuggest:x,useBannerLink:D,width:"100%",focusInput:W,focusContent:k}).embed(q,{q:c,autoClose:h})})},se=P=>{P.target.remove(),P=!0,K("error")},oe=P=>{K("complete",{data:P})},ae=P=>{K("search",{data:P})},I=P=>{a&&n(5,o=P.height)};function H(P){Ne[P?"unshift":"push"](()=>{q=P,n(2,q)})}return t.$$set=P=>{"alwaysShowEngAddr"in P&&n(6,p=P.alwaysShowEngAddr),"animation"in P&&n(7,y=P.animation),"autoClose"in P&&n(8,h=P.autoClose),"autoMapping"in P&&n(9,r=P.autoMapping),"autoResize"in P&&n(10,a=P.autoResize),"defaultQuery"in P&&n(11,c=P.defaultQuery),"errorMessage"in P&&n(0,i=P.errorMessage),"height"in P&&n(5,o=P.height),"hideEngBtn"in P&&n(12,s=P.hideEngBtn),"hideMapBtn"in P&&n(13,u=P.hideMapBtn),"maxSuggestItems"in P&&n(14,d=P.maxSuggestItems),"pleaseReadGuide"in P&&n(15,l=P.pleaseReadGuide),"pleaseReadGuideTimer"in P&&n(16,g=P.pleaseReadGuideTimer),"scriptUrl"in P&&n(17,v=P.scriptUrl),"shorthand"in P&&n(18,b=P.shorthand),"showMoreHName"in P&&n(19,_=P.showMoreHName),"style"in P&&n(1,w=P.style),"submitMode"in P&&n(20,S=P.submitMode),"theme"in P&&n(21,T=P.theme),"useSuggest"in P&&n(22,x=P.useSuggest),"useBannerLink"in P&&n(23,D=P.useBannerLink),"width"in P&&n(24,N=P.width),"focusInput"in P&&n(25,W=P.focusInput),"focusContent"in P&&n(26,k=P.focusContent)},t.$$.update=()=>{t.$$.dirty[0]&16777216&&n(4,f=N),t.$$.dirty[0]&32&&n(3,m=o)},[i,w,q,m,f,o,p,y,h,r,a,c,s,u,d,l,g,v,b,_,S,T,x,D,N,W,k,H]}class fx extends ot{constructor(e){super();st(this,e,xS,TS,tt,{alwaysShowEngAddr:6,animation:7,autoClose:8,autoMapping:9,autoResize:10,defaultQuery:11,errorMessage:0,height:5,hideEngBtn:12,hideMapBtn:13,maxSuggestItems:14,pleaseReadGuide:15,pleaseReadGuideTimer:16,scriptUrl:17,shorthand:18,showMoreHName:19,style:1,submitMode:20,theme:21,useSuggest:22,useBannerLink:23,width:24,focusInput:25,focusContent:26},null,[-1,-1])}}function OS(t){let e,n,f;return{c(){e=Te("div"),ce(e,"class","sc-carousel-dot__dot svelte-1uelw0b"),Se(e,"sc-carousel-dot__dot_active",t[0])},m(m,p){Ce(m,e,p),n||(f=ve(e,"click",t[1]),n=!0)},p(m,[p]){p&1&&Se(e,"sc-carousel-dot__dot_active",m[0])},i:xe,o:xe,d(m){m&&we(e),n=!1,f()}}}function ES(t,e,n){let{active:f=!1}=e;function m(p){Sf.call(this,t,p)}return t.$$set=p=>{"active"in p&&n(0,f=p.active)},[f,m]}class AS extends ot{constructor(e){super();st(this,e,ES,OS,tt,{active:0})}}function Yu(t,e,n){const f=t.slice();return f[5]=e[n],f[7]=n,f}function Gu(t,e){let n,f,m,p;function y(){return e[3](e[7])}return f=new AS({props:{active:e[1]===e[7]}}),f.$on("click",y),{key:t,first:null,c(){n=Te("div"),Le(f.$$.fragment),m=Ft(),ce(n,"class","sc-carousel-dots__dot-container svelte-1oj5bge"),this.first=n},m(h,r){Ce(h,n,r),Ie(f,n,null),ze(n,m),p=!0},p(h,r){e=h;const a={};r&3&&(a.active=e[1]===e[7]),f.$set(a)},i(h){p||(de(f.$$.fragment,h),p=!0)},o(h){ge(f.$$.fragment,h),p=!1},d(h){h&&we(n),Me(f)}}}function PS(t){let e,n=[],f=new Map,m,p=Array(t[0]);const y=h=>h[7];for(let h=0;h<p.length;h+=1){let r=Yu(t,p,h),a=y(r);f.set(a,n[h]=Gu(a,r))}return{c(){e=Te("div");for(let h=0;h<n.length;h+=1)n[h].c();ce(e,"class","sc-carousel-dots__container svelte-1oj5bge")},m(h,r){Ce(h,e,r);for(let a=0;a<n.length;a+=1)n[a].m(e,null);m=!0},p(h,[r]){r&7&&(p=Array(h[0]),qe(),n=Zd(n,r,y,1,h,p,f,e,Ef,Gu,null,Yu),Ke())},i(h){if(!m){for(let r=0;r<p.length;r+=1)de(n[r]);m=!0}},o(h){for(let r=0;r<n.length;r+=1)ge(n[r]);m=!1},d(h){h&&we(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function DS(t,e,n){const f=Hi();let{pagesCount:m=1}=e,{currentPageIndex:p=0}=e;function y(r){f("pageChange",r)}const h=r=>y(r);return t.$$set=r=>{"pagesCount"in r&&n(0,m=r.pagesCount),"currentPageIndex"in r&&n(1,p=r.currentPageIndex)},[m,p,y,h]}class kS extends ot{constructor(e){super();st(this,e,DS,PS,tt,{pagesCount:0,currentPageIndex:1})}}const Xr="prev",In="next";function FS(t){let e,n,f,m;return{c(){e=Te("div"),n=Te("i"),ce(n,"class","sc-carousel-arrow__arrow svelte-9ztt4p"),Se(n,"sc-carousel-arrow__arrow-next",t[0]===In),Se(n,"sc-carousel-arrow__arrow-prev",t[0]===Xr),ce(e,"class","sc-carousel-arrow__circle svelte-9ztt4p"),Se(e,"sc-carousel-arrow__circle_disabled",t[1])},m(p,y){Ce(p,e,y),ze(e,n),f||(m=ve(e,"click",t[2]),f=!0)},p(p,[y]){y&1&&Se(n,"sc-carousel-arrow__arrow-next",p[0]===In),y&1&&Se(n,"sc-carousel-arrow__arrow-prev",p[0]===Xr),y&2&&Se(e,"sc-carousel-arrow__circle_disabled",p[1])},i:xe,o:xe,d(p){p&&we(e),f=!1,m()}}}function RS(t,e,n){let{direction:f=In}=e,{disabled:m=!1}=e;function p(y){Sf.call(this,t,y)}return t.$$set=y=>{"direction"in y&&n(0,f=y.direction),"disabled"in y&&n(1,m=y.disabled)},[f,m,p]}class Cd extends ot{constructor(e){super();st(this,e,RS,FS,tt,{direction:0,disabled:1})}}function IS(t){let e;return{c(){e=Te("div"),ce(e,"class","sc-carousel-progress__indicator svelte-nuyenl"),$e(e,"width",t[0]+"%")},m(n,f){Ce(n,e,f)},p(n,[f]){f&1&&$e(e,"width",n[0]+"%")},i:xe,o:xe,d(n){n&&we(e)}}}const Vu=100;function MS(t,e,n){let f,{value:m=0}=e;return t.$$set=p=>{"value"in p&&n(1,m=p.value)},t.$$.update=()=>{t.$$.dirty&2&&n(0,f=Math.min(Math.max(m*Vu,0),Vu))},[f,m]}class LS extends ot{constructor(e){super();st(this,e,MS,IS,tt,{value:1})}}function BS(t,e){t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}function jS(t,e){t.removeEventListener("mousedown",e),t.removeEventListener("touchstart",e)}function NS(t,e){t.addEventListener("mouseup",e),t.addEventListener("touchend",e)}function qu(t,e){t.removeEventListener("mouseup",e),t.removeEventListener("touchend",e)}function US(t,e){t.addEventListener("mousemove",e),t.addEventListener("touchmove",e)}function Ku(t,e){t.removeEventListener("mousemove",e),t.removeEventListener("touchmove",e)}function vc(t){return function(e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}}const WS=110,HS=9,zS=111,XS=20;function Fa(t){if("TouchEvent"in window&&t instanceof TouchEvent){const e=t.touches[0];return{x:e?e.clientX:0,y:e?e.clientY:0}}return{x:t.clientX,y:t.clientY}}function YS(t,{thresholdProvider:e}){const n=vc(t);let f,m,p=0,y,h=!1;function r(){return Date.now()-y>=zS&&Math.abs(p)>=XS}function a(o){y=Date.now(),p=0,h=!0;const s=Fa(o);f=s.x,m=s.y,n("swipeStart",{x:f,y:m}),US(window,c),NS(window,i)}function c(o){if(!h)return;const s=Fa(o),u=s.x-f,d=s.y-m;f=s.x,m=s.y,n("swipeMove",{x:f,y:m,dx:u,dy:d}),u!==0&&Math.sign(u)!==Math.sign(p)&&(p=0),p+=u,Math.abs(p)>e()&&(n("swipeThresholdReached",{direction:p>0?Xr:In}),qu(window,i),Ku(window,c))}function i(o){if(o.preventDefault(),qu(window,i),Ku(window,c),h=!1,!r()){n("swipeFailed");return}const s=Fa(o);n("swipeEnd",{x:s.x,y:s.y})}return BS(t,a),{destroy(){jS(t,a)}}}function GS(t,e){t.addEventListener("mouseenter",e)}function VS(t,e){t.removeEventListener("mouseenter",e)}function qS(t,e){t.addEventListener("mouseleave",e)}function Ju(t,e){t.removeEventListener("mouseleave",e)}function KS(t){const e=vc(t);function n(){qS(t,f),e("hovered",{value:!0})}function f(){e("hovered",{value:!1}),Ju(t,f)}return GS(t,n),{destroy(){VS(t,n),Ju(t,f)}}}const JS=(t,e)=>{const n=e.x-t.x,f=e.y-t.y;return Math.sqrt(n*n+f*f)};function Mr(t,e,n){return Math.max(t,Math.min(e,n))}function ZS(t,e){t.addEventListener("touchstart",e,{passive:!0})}function QS(t,e){t.removeEventListener("touchstart",e)}function $S(t,e){t.addEventListener("touchend",e)}function Zu(t,e){t.removeEventListener("touchend",e)}function e1(t){const e=vc(t);let n=0,f={x:0,y:0};function m({tapEndedAt:h,tapEndedPos:r}){const a=h-n,c=JS(f,r);return a<=WS&&c<=HS}function p(h){n=Date.now();const r=h.touches[0];f={x:r.clientX,y:r.clientY},$S(t,y)}function y(h){h.preventDefault(),Zu(t,y);const r=h.changedTouches[0];m({tapEndedAt:Date.now(),tapEndedPos:{x:r.clientX,y:r.clientY}})&&e("tapped")}return ZS(t,p),{destroy(){QS(t,p),Zu(t,y)}}}function t1({currentParticleIndex:t,particlesCount:e,clonesCountHead:n,clonesCountTotal:f,particlesToScroll:m}){return t===e-n?0:t===0?Sd({particlesCountWithoutClones:e-f,particlesToScroll:m})-1:Math.floor((t-n)/m)}function n1({currentParticleIndex:t,particlesToScroll:e}){return Math.ceil(t/e)}function r1({currentParticleIndex:t,particlesCount:e,clonesCountHead:n,clonesCountTotal:f,infinite:m,particlesToScroll:p}){return m?t1({currentParticleIndex:t,particlesCount:e,clonesCountHead:n,clonesCountTotal:f,particlesToScroll:p}):n1({currentParticleIndex:t,particlesToScroll:p})}function Sd({particlesCountWithoutClones:t,particlesToScroll:e}){return Math.ceil(t/e)}function i1({particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:n}){const f=Td({particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:n});return Math.ceil(t/e)-f}function s1({infinite:t,particlesCountWithoutClones:e,particlesToScroll:n,particlesToShow:f}){return t?Sd({particlesCountWithoutClones:e,particlesToScroll:n}):i1({particlesCountWithoutClones:e,particlesToScroll:n,particlesToShow:f})}function o1({pageIndex:t,clonesCountHead:e,clonesCountTail:n,particlesToScroll:f,particlesCount:m}){return Mr(0,Math.min(e+t*f,m-n),m-1)}function a1({pageIndex:t,particlesToScroll:e,particlesCount:n,particlesToShow:f}){return Mr(0,Math.min(t*e,n-f),n-1)}function Ra({infinite:t,pageIndex:e,clonesCountHead:n,clonesCountTail:f,particlesToScroll:m,particlesCount:p,particlesToShow:y}){return t?o1({pageIndex:e,clonesCountHead:n,clonesCountTail:f,particlesToScroll:m,particlesCount:p}):a1({pageIndex:e,particlesToScroll:m,particlesCount:p,particlesToShow:y})}function l1({particlesContainerChildren:t,particleWidth:e}){for(let n=0;n<t.length;n++)t[n].style.minWidth=`${e}px`,t[n].style.maxWidth=`${e}px`}function Td({particlesToScroll:t,particlesToShow:e,particlesCountWithoutClones:n}){const f=t-e;let m=e;for(;;){const p=n-m-f;if(p<e)return Math.max(p,0);m+=e+f}}function c1(t){return new ResizeObserver(e=>{t({width:e[0].contentRect.width})})}function u1({clonesCountHead:t,clonesCountTail:e,particlesContainerChildren:n}){const f=[];for(let y=0;y<e;y++)f.push(n[y].cloneNode(!0));const m=[],p=n.length;for(let y=p-1;y>p-1-t;y--)m.push(n[y].cloneNode(!0));return{clonesToAppend:f,clonesToPrepend:m}}function f1({particlesContainer:t,clonesToAppend:e,clonesToPrepend:n}){for(let f=0;f<e.length;f++)t.append(e[f]);for(let f=0;f<n.length;f++)t.prepend(n[f])}function h1({infinite:t,particlesToShow:e,partialPageSize:n}){const f=t?{head:Math.ceil(n||e),tail:Math.ceil(e)}:{head:0,tail:0};return un(He({},f),{total:f.head+f.tail})}const Ti=(t,e,n)=>{if(t&&t.hasOwnProperty(e))return t[e];if(n===void 0)throw new Error(`Required arg "${e}" was not provided`);return n},dl=t=>e=>{t[e]&&t[e]()};var d1="Expected a function",xd="__lodash_hash_undefined__",Od=1/0,g1="[object Function]",p1="[object GeneratorFunction]",m1="[object Symbol]",v1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y1=/^\w*$/,_1=/^\./,b1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w1=/[\\^$.*+?()[\]{}|]/g,C1=/\\(\\)?/g,S1=/^\[object .+?Constructor\]$/,T1=typeof Be=="object"&&Be&&Be.Object===Object&&Be,x1=typeof self=="object"&&self&&self.Object===Object&&self,yc=T1||x1||Function("return this")();function O1(t,e){return t==null?void 0:t[e]}function E1(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var A1=Array.prototype,P1=Function.prototype,Ed=Object.prototype,Ia=yc["__core-js_shared__"],Qu=function(){var t=/[^.]+$/.exec(Ia&&Ia.keys&&Ia.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ad=P1.toString,_c=Ed.hasOwnProperty,Pd=Ed.toString,D1=RegExp("^"+Ad.call(_c).replace(w1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$u=yc.Symbol,k1=A1.splice,F1=Dd(yc,"Map"),Wi=Dd(Object,"create"),ef=$u?$u.prototype:void 0,tf=ef?ef.toString:void 0;function or(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var f=t[e];this.set(f[0],f[1])}}function R1(){this.__data__=Wi?Wi(null):{}}function I1(t){return this.has(t)&&delete this.__data__[t]}function M1(t){var e=this.__data__;if(Wi){var n=e[t];return n===xd?void 0:n}return _c.call(e,t)?e[t]:void 0}function L1(t){var e=this.__data__;return Wi?e[t]!==void 0:_c.call(e,t)}function B1(t,e){var n=this.__data__;return n[t]=Wi&&e===void 0?xd:e,this}or.prototype.clear=R1;or.prototype.delete=I1;or.prototype.get=M1;or.prototype.has=L1;or.prototype.set=B1;function $r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var f=t[e];this.set(f[0],f[1])}}function j1(){this.__data__=[]}function N1(t){var e=this.__data__,n=bo(e,t);if(n<0)return!1;var f=e.length-1;return n==f?e.pop():k1.call(e,n,1),!0}function U1(t){var e=this.__data__,n=bo(e,t);return n<0?void 0:e[n][1]}function W1(t){return bo(this.__data__,t)>-1}function H1(t,e){var n=this.__data__,f=bo(n,t);return f<0?n.push([t,e]):n[f][1]=e,this}$r.prototype.clear=j1;$r.prototype.delete=N1;$r.prototype.get=U1;$r.prototype.has=W1;$r.prototype.set=H1;function ur(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var f=t[e];this.set(f[0],f[1])}}function z1(){this.__data__={hash:new or,map:new(F1||$r),string:new or}}function X1(t){return wo(this,t).delete(t)}function Y1(t){return wo(this,t).get(t)}function G1(t){return wo(this,t).has(t)}function V1(t,e){return wo(this,t).set(t,e),this}ur.prototype.clear=z1;ur.prototype.delete=X1;ur.prototype.get=Y1;ur.prototype.has=G1;ur.prototype.set=V1;function bo(t,e){for(var n=t.length;n--;)if(iT(t[n][0],e))return n;return-1}function q1(t,e){e=Q1(e,t)?[e]:Z1(e);for(var n=0,f=e.length;t!=null&&n<f;)t=t[nT(e[n++])];return n&&n==f?t:void 0}function K1(t){if(!Fd(t)||eT(t))return!1;var e=sT(t)||E1(t)?D1:S1;return e.test(rT(t))}function J1(t){if(typeof t=="string")return t;if(wc(t))return tf?tf.call(t):"";var e=t+"";return e=="0"&&1/t==-Od?"-0":e}function Z1(t){return kd(t)?t:tT(t)}function wo(t,e){var n=t.__data__;return $1(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Dd(t,e){var n=O1(t,e);return K1(n)?n:void 0}function Q1(t,e){if(kd(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||wc(t)?!0:y1.test(t)||!v1.test(t)||e!=null&&t in Object(e)}function $1(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function eT(t){return!!Qu&&Qu in t}var tT=bc(function(t){t=aT(t);var e=[];return _1.test(t)&&e.push(""),t.replace(b1,function(n,f,m,p){e.push(m?p.replace(C1,"$1"):f||n)}),e});function nT(t){if(typeof t=="string"||wc(t))return t;var e=t+"";return e=="0"&&1/t==-Od?"-0":e}function rT(t){if(t!=null){try{return Ad.call(t)}catch{}try{return t+""}catch{}}return""}function bc(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(d1);var n=function(){var f=arguments,m=e?e.apply(this,f):f[0],p=n.cache;if(p.has(m))return p.get(m);var y=t.apply(this,f);return n.cache=p.set(m,y),y};return n.cache=new(bc.Cache||ur),n}bc.Cache=ur;function iT(t,e){return t===e||t!==t&&e!==e}var kd=Array.isArray;function sT(t){var e=Fd(t)?Pd.call(t):"";return e==g1||e==p1}function Fd(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function oT(t){return!!t&&typeof t=="object"}function wc(t){return typeof t=="symbol"||oT(t)&&Pd.call(t)==m1}function aT(t){return t==null?"":J1(t)}function lT(t,e,n){var f=t==null?void 0:q1(t,e);return f===void 0?n:f}var Es=lT,gl={exports:{}};(function(t,e){var n=200,f="__lodash_hash_undefined__",m=9007199254740991,p="[object Arguments]",y="[object Array]",h="[object Boolean]",r="[object Date]",a="[object Error]",c="[object Function]",i="[object GeneratorFunction]",o="[object Map]",s="[object Number]",u="[object Object]",d="[object Promise]",l="[object RegExp]",g="[object Set]",v="[object String]",b="[object Symbol]",_="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",T="[object Float32Array]",x="[object Float64Array]",D="[object Int8Array]",N="[object Int16Array]",W="[object Int32Array]",k="[object Uint8Array]",q="[object Uint8ClampedArray]",K="[object Uint16Array]",ne="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,oe=/\w*$/,ae=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,H={};H[p]=H[y]=H[w]=H[S]=H[h]=H[r]=H[T]=H[x]=H[D]=H[N]=H[W]=H[o]=H[s]=H[u]=H[l]=H[g]=H[v]=H[b]=H[k]=H[q]=H[K]=H[ne]=!0,H[a]=H[c]=H[_]=!1;var P=typeof Be=="object"&&Be&&Be.Object===Object&&Be,j=typeof self=="object"&&self&&self.Object===Object&&self,U=P||j||Function("return this")(),A=e&&!e.nodeType&&e,E=A&&!0&&t&&!t.nodeType&&t,M=E&&E.exports===A;function R(C,O){return C.set(O[0],O[1]),C}function J(C,O){return C.add(O),C}function B(C,O){for(var L=-1,te=C?C.length:0;++L<te&&O(C[L],L,C)!==!1;);return C}function G(C,O){for(var L=-1,te=O.length,_e=C.length;++L<te;)C[_e+L]=O[L];return C}function V(C,O,L,te){var _e=-1,pe=C?C.length:0;for(te&&pe&&(L=C[++_e]);++_e<pe;)L=O(L,C[_e],_e,C);return L}function Q(C,O){for(var L=-1,te=Array(C);++L<C;)te[L]=O(L);return te}function Y(C,O){return C==null?void 0:C[O]}function F(C){var O=!1;if(C!=null&&typeof C.toString!="function")try{O=!!(C+"")}catch{}return O}function z(C){var O=-1,L=Array(C.size);return C.forEach(function(te,_e){L[++O]=[_e,te]}),L}function Z(C,O){return function(L){return C(O(L))}}function X(C){var O=-1,L=Array(C.size);return C.forEach(function(te){L[++O]=te}),L}var ee=Array.prototype,re=Function.prototype,fe=Object.prototype,le=U["__core-js_shared__"],$=function(){var C=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),ue=re.toString,he=fe.hasOwnProperty,be=fe.toString,je=RegExp("^"+ue.call(he).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=M?U.Buffer:void 0,ye=U.Symbol,me=U.Uint8Array,Ee=Z(Object.getPrototypeOf,Object),Xe=Object.create,xt=fe.propertyIsEnumerable,ie=ee.splice,Ye=Object.getOwnPropertySymbols,Ge=Oe?Oe.isBuffer:void 0,We=Z(Object.keys,Object),mt=zt(U,"DataView"),Wn=zt(U,"Map"),Ht=zt(U,"Promise"),fr=zt(U,"Set"),ei=zt(U,"WeakMap"),Hn=zt(Object,"create"),ti=Ot(mt),zn=Ot(Wn),ni=Ot(Ht),ri=Ot(fr),ii=Ot(ei),vn=ye?ye.prototype:void 0,qi=vn?vn.valueOf:void 0;function on(C){var O=-1,L=C?C.length:0;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function Co(){this.__data__=Hn?Hn(null):{}}function So(C){return this.has(C)&&delete this.__data__[C]}function To(C){var O=this.__data__;if(Hn){var L=O[C];return L===f?void 0:L}return he.call(O,C)?O[C]:void 0}function Ki(C){var O=this.__data__;return Hn?O[C]!==void 0:he.call(O,C)}function si(C,O){var L=this.__data__;return L[C]=Hn&&O===void 0?f:O,this}on.prototype.clear=Co,on.prototype.delete=So,on.prototype.get=To,on.prototype.has=Ki,on.prototype.set=si;function ct(C){var O=-1,L=C?C.length:0;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function xo(){this.__data__=[]}function Oo(C){var O=this.__data__,L=dr(O,C);if(L<0)return!1;var te=O.length-1;return L==te?O.pop():ie.call(O,L,1),!0}function Eo(C){var O=this.__data__,L=dr(O,C);return L<0?void 0:O[L][1]}function Ao(C){return dr(this.__data__,C)>-1}function Po(C,O){var L=this.__data__,te=dr(L,C);return te<0?L.push([C,O]):L[te][1]=O,this}ct.prototype.clear=xo,ct.prototype.delete=Oo,ct.prototype.get=Eo,ct.prototype.has=Ao,ct.prototype.set=Po;function vt(C){var O=-1,L=C?C.length:0;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function Do(){this.__data__={hash:new on,map:new(Wn||ct),string:new on}}function ko(C){return Yn(this,C).delete(C)}function Fo(C){return Yn(this,C).get(C)}function Ro(C){return Yn(this,C).has(C)}function Io(C,O){return Yn(this,C).set(C,O),this}vt.prototype.clear=Do,vt.prototype.delete=ko,vt.prototype.get=Fo,vt.prototype.has=Ro,vt.prototype.set=Io;function Pt(C){this.__data__=new ct(C)}function Mo(){this.__data__=new ct}function Lo(C){return this.__data__.delete(C)}function Bo(C){return this.__data__.get(C)}function jo(C){return this.__data__.has(C)}function No(C,O){var L=this.__data__;if(L instanceof ct){var te=L.__data__;if(!Wn||te.length<n-1)return te.push([C,O]),this;L=this.__data__=new vt(te)}return L.set(C,O),this}Pt.prototype.clear=Mo,Pt.prototype.delete=Lo,Pt.prototype.get=Bo,Pt.prototype.has=jo,Pt.prototype.set=No;function hr(C,O){var L=ci(C)||pr(C)?Q(C.length,String):[],te=L.length,_e=!!te;for(var pe in C)(O||he.call(C,pe))&&!(_e&&(pe=="length"||$o(pe,te)))&&L.push(pe);return L}function Ji(C,O,L){var te=C[O];(!(he.call(C,O)&&ts(te,L))||L===void 0&&!(O in C))&&(C[O]=L)}function dr(C,O){for(var L=C.length;L--;)if(ts(C[L][0],O))return L;return-1}function qt(C,O){return C&&li(O,fi(O),C)}function oi(C,O,L,te,_e,pe,Ae){var ke;if(te&&(ke=pe?te(C,_e,pe,Ae):te(C)),ke!==void 0)return ke;if(!Jt(C))return C;var Je=ci(C);if(Je){if(ke=Zo(C),!O)return qo(C,ke)}else{var Re=ln(C),yt=Re==c||Re==i;if(ns(C))return gr(C,O);if(Re==u||Re==p||yt&&!pe){if(F(C))return pe?C:{};if(ke=Kt(yt?{}:C),!O)return Ko(C,qt(ke,C))}else{if(!H[Re])return pe?C:{};ke=Qo(C,Re,oi,O)}}Ae||(Ae=new Pt);var Dt=Ae.get(C);if(Dt)return Dt;if(Ae.set(C,ke),!Je)var nt=L?Jo(C):fi(C);return B(nt||C,function(_t,ut){nt&&(ut=_t,_t=C[ut]),Ji(ke,ut,oi(_t,O,L,te,ut,C,Ae))}),ke}function Uo(C){return Jt(C)?Xe(C):{}}function Wo(C,O,L){var te=O(C);return ci(C)?te:G(te,L(C))}function Ho(C){return be.call(C)}function zo(C){if(!Jt(C)||ta(C))return!1;var O=ui(C)||F(C)?je:ae;return O.test(Ot(C))}function Xo(C){if(!$i(C))return We(C);var O=[];for(var L in Object(C))he.call(C,L)&&L!="constructor"&&O.push(L);return O}function gr(C,O){if(O)return C.slice();var L=new C.constructor(C.length);return C.copy(L),L}function ai(C){var O=new C.constructor(C.byteLength);return new me(O).set(new me(C)),O}function Xn(C,O){var L=O?ai(C.buffer):C.buffer;return new C.constructor(L,C.byteOffset,C.byteLength)}function Zi(C,O,L){var te=O?L(z(C),!0):z(C);return V(te,R,new C.constructor)}function Qi(C){var O=new C.constructor(C.source,oe.exec(C));return O.lastIndex=C.lastIndex,O}function Yo(C,O,L){var te=O?L(X(C),!0):X(C);return V(te,J,new C.constructor)}function Go(C){return qi?Object(qi.call(C)):{}}function Vo(C,O){var L=O?ai(C.buffer):C.buffer;return new C.constructor(L,C.byteOffset,C.length)}function qo(C,O){var L=-1,te=C.length;for(O||(O=Array(te));++L<te;)O[L]=C[L];return O}function li(C,O,L,te){L||(L={});for(var _e=-1,pe=O.length;++_e<pe;){var Ae=O[_e],ke=te?te(L[Ae],C[Ae],Ae,L,C):void 0;Ji(L,Ae,ke===void 0?C[Ae]:ke)}return L}function Ko(C,O){return li(C,an(C),O)}function Jo(C){return Wo(C,fi,an)}function Yn(C,O){var L=C.__data__;return ea(O)?L[typeof O=="string"?"string":"hash"]:L.map}function zt(C,O){var L=Y(C,O);return zo(L)?L:void 0}var an=Ye?Z(Ye,Object):ra,ln=Ho;(mt&&ln(new mt(new ArrayBuffer(1)))!=S||Wn&&ln(new Wn)!=o||Ht&&ln(Ht.resolve())!=d||fr&&ln(new fr)!=g||ei&&ln(new ei)!=_)&&(ln=function(C){var O=be.call(C),L=O==u?C.constructor:void 0,te=L?Ot(L):void 0;if(te)switch(te){case ti:return S;case zn:return o;case ni:return d;case ri:return g;case ii:return _}return O});function Zo(C){var O=C.length,L=C.constructor(O);return O&&typeof C[0]=="string"&&he.call(C,"index")&&(L.index=C.index,L.input=C.input),L}function Kt(C){return typeof C.constructor=="function"&&!$i(C)?Uo(Ee(C)):{}}function Qo(C,O,L,te){var _e=C.constructor;switch(O){case w:return ai(C);case h:case r:return new _e(+C);case S:return Xn(C,te);case T:case x:case D:case N:case W:case k:case q:case K:case ne:return Vo(C,te);case o:return Zi(C,te,L);case s:case v:return new _e(C);case l:return Qi(C);case g:return Yo(C,te,L);case b:return Go(C)}}function $o(C,O){return O=O==null?m:O,!!O&&(typeof C=="number"||I.test(C))&&C>-1&&C%1==0&&C<O}function ea(C){var O=typeof C;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?C!=="__proto__":C===null}function ta(C){return!!$&&$ in C}function $i(C){var O=C&&C.constructor,L=typeof O=="function"&&O.prototype||fe;return C===L}function Ot(C){if(C!=null){try{return ue.call(C)}catch{}try{return C+""}catch{}}return""}function es(C){return oi(C,!0,!0)}function ts(C,O){return C===O||C!==C&&O!==O}function pr(C){return na(C)&&he.call(C,"callee")&&(!xt.call(C,"callee")||be.call(C)==p)}var ci=Array.isArray;function mr(C){return C!=null&&rs(C.length)&&!ui(C)}function na(C){return is(C)&&mr(C)}var ns=Ge||ia;function ui(C){var O=Jt(C)?be.call(C):"";return O==c||O==i}function rs(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=m}function Jt(C){var O=typeof C;return!!C&&(O=="object"||O=="function")}function is(C){return!!C&&typeof C=="object"}function fi(C){return mr(C)?hr(C):Xo(C)}function ra(){return[]}function ia(){return!1}t.exports=es})(gl,gl.exports);var cT=gl.exports,pl={exports:{}};(function(t,e){var n=200,f="__lodash_hash_undefined__",m=1,p=2,y=9007199254740991,h="[object Arguments]",r="[object Array]",a="[object AsyncFunction]",c="[object Boolean]",i="[object Date]",o="[object Error]",s="[object Function]",u="[object GeneratorFunction]",d="[object Map]",l="[object Number]",g="[object Null]",v="[object Object]",b="[object Promise]",_="[object Proxy]",w="[object RegExp]",S="[object Set]",T="[object String]",x="[object Symbol]",D="[object Undefined]",N="[object WeakMap]",W="[object ArrayBuffer]",k="[object DataView]",q="[object Float32Array]",K="[object Float64Array]",ne="[object Int8Array]",se="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",I="[object Uint8ClampedArray]",H="[object Uint16Array]",P="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,E={};E[q]=E[K]=E[ne]=E[se]=E[oe]=E[ae]=E[I]=E[H]=E[P]=!0,E[h]=E[r]=E[W]=E[c]=E[k]=E[i]=E[o]=E[s]=E[d]=E[l]=E[v]=E[w]=E[S]=E[T]=E[N]=!1;var M=typeof Be=="object"&&Be&&Be.Object===Object&&Be,R=typeof self=="object"&&self&&self.Object===Object&&self,J=M||R||Function("return this")(),B=e&&!e.nodeType&&e,G=B&&!0&&t&&!t.nodeType&&t,V=G&&G.exports===B,Q=V&&M.process,Y=function(){try{return Q&&Q.binding&&Q.binding("util")}catch{}}(),F=Y&&Y.isTypedArray;function z(C,O){for(var L=-1,te=C==null?0:C.length,_e=0,pe=[];++L<te;){var Ae=C[L];O(Ae,L,C)&&(pe[_e++]=Ae)}return pe}function Z(C,O){for(var L=-1,te=O.length,_e=C.length;++L<te;)C[_e+L]=O[L];return C}function X(C,O){for(var L=-1,te=C==null?0:C.length;++L<te;)if(O(C[L],L,C))return!0;return!1}function ee(C,O){for(var L=-1,te=Array(C);++L<C;)te[L]=O(L);return te}function re(C){return function(O){return C(O)}}function fe(C,O){return C.has(O)}function le(C,O){return C==null?void 0:C[O]}function $(C){var O=-1,L=Array(C.size);return C.forEach(function(te,_e){L[++O]=[_e,te]}),L}function ue(C,O){return function(L){return C(O(L))}}function he(C){var O=-1,L=Array(C.size);return C.forEach(function(te){L[++O]=te}),L}var be=Array.prototype,je=Function.prototype,Oe=Object.prototype,ye=J["__core-js_shared__"],me=je.toString,Ee=Oe.hasOwnProperty,Xe=function(){var C=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),xt=Oe.toString,ie=RegExp("^"+me.call(Ee).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=V?J.Buffer:void 0,Ge=J.Symbol,We=J.Uint8Array,mt=Oe.propertyIsEnumerable,Wn=be.splice,Ht=Ge?Ge.toStringTag:void 0,fr=Object.getOwnPropertySymbols,ei=Ye?Ye.isBuffer:void 0,Hn=ue(Object.keys,Object),ti=an(J,"DataView"),zn=an(J,"Map"),ni=an(J,"Promise"),ri=an(J,"Set"),ii=an(J,"WeakMap"),vn=an(Object,"create"),qi=Ot(ti),on=Ot(zn),Co=Ot(ni),So=Ot(ri),To=Ot(ii),Ki=Ge?Ge.prototype:void 0,si=Ki?Ki.valueOf:void 0;function ct(C){var O=-1,L=C==null?0:C.length;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function xo(){this.__data__=vn?vn(null):{},this.size=0}function Oo(C){var O=this.has(C)&&delete this.__data__[C];return this.size-=O?1:0,O}function Eo(C){var O=this.__data__;if(vn){var L=O[C];return L===f?void 0:L}return Ee.call(O,C)?O[C]:void 0}function Ao(C){var O=this.__data__;return vn?O[C]!==void 0:Ee.call(O,C)}function Po(C,O){var L=this.__data__;return this.size+=this.has(C)?0:1,L[C]=vn&&O===void 0?f:O,this}ct.prototype.clear=xo,ct.prototype.delete=Oo,ct.prototype.get=Eo,ct.prototype.has=Ao,ct.prototype.set=Po;function vt(C){var O=-1,L=C==null?0:C.length;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function Do(){this.__data__=[],this.size=0}function ko(C){var O=this.__data__,L=gr(O,C);if(L<0)return!1;var te=O.length-1;return L==te?O.pop():Wn.call(O,L,1),--this.size,!0}function Fo(C){var O=this.__data__,L=gr(O,C);return L<0?void 0:O[L][1]}function Ro(C){return gr(this.__data__,C)>-1}function Io(C,O){var L=this.__data__,te=gr(L,C);return te<0?(++this.size,L.push([C,O])):L[te][1]=O,this}vt.prototype.clear=Do,vt.prototype.delete=ko,vt.prototype.get=Fo,vt.prototype.has=Ro,vt.prototype.set=Io;function Pt(C){var O=-1,L=C==null?0:C.length;for(this.clear();++O<L;){var te=C[O];this.set(te[0],te[1])}}function Mo(){this.size=0,this.__data__={hash:new ct,map:new(zn||vt),string:new ct}}function Lo(C){var O=zt(this,C).delete(C);return this.size-=O?1:0,O}function Bo(C){return zt(this,C).get(C)}function jo(C){return zt(this,C).has(C)}function No(C,O){var L=zt(this,C),te=L.size;return L.set(C,O),this.size+=L.size==te?0:1,this}Pt.prototype.clear=Mo,Pt.prototype.delete=Lo,Pt.prototype.get=Bo,Pt.prototype.has=jo,Pt.prototype.set=No;function hr(C){var O=-1,L=C==null?0:C.length;for(this.__data__=new Pt;++O<L;)this.add(C[O])}function Ji(C){return this.__data__.set(C,f),this}function dr(C){return this.__data__.has(C)}hr.prototype.add=hr.prototype.push=Ji,hr.prototype.has=dr;function qt(C){var O=this.__data__=new vt(C);this.size=O.size}function oi(){this.__data__=new vt,this.size=0}function Uo(C){var O=this.__data__,L=O.delete(C);return this.size=O.size,L}function Wo(C){return this.__data__.get(C)}function Ho(C){return this.__data__.has(C)}function zo(C,O){var L=this.__data__;if(L instanceof vt){var te=L.__data__;if(!zn||te.length<n-1)return te.push([C,O]),this.size=++L.size,this;L=this.__data__=new Pt(te)}return L.set(C,O),this.size=L.size,this}qt.prototype.clear=oi,qt.prototype.delete=Uo,qt.prototype.get=Wo,qt.prototype.has=Ho,qt.prototype.set=zo;function Xo(C,O){var L=pr(C),te=!L&&ts(C),_e=!L&&!te&&mr(C),pe=!L&&!te&&!_e&&is(C),Ae=L||te||_e||pe,ke=Ae?ee(C.length,String):[],Je=ke.length;for(var Re in C)(O||Ee.call(C,Re))&&!(Ae&&(Re=="length"||_e&&(Re=="offset"||Re=="parent")||pe&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||Qo(Re,Je)))&&ke.push(Re);return ke}function gr(C,O){for(var L=C.length;L--;)if(es(C[L][0],O))return L;return-1}function ai(C,O,L){var te=O(C);return pr(C)?te:Z(te,L(C))}function Xn(C){return C==null?C===void 0?D:g:Ht&&Ht in Object(C)?ln(C):$i(C)}function Zi(C){return Jt(C)&&Xn(C)==h}function Qi(C,O,L,te,_e){return C===O?!0:C==null||O==null||!Jt(C)&&!Jt(O)?C!==C&&O!==O:Yo(C,O,L,te,Qi,_e)}function Yo(C,O,L,te,_e,pe){var Ae=pr(C),ke=pr(O),Je=Ae?r:Kt(C),Re=ke?r:Kt(O);Je=Je==h?v:Je,Re=Re==h?v:Re;var yt=Je==v,Dt=Re==v,nt=Je==Re;if(nt&&mr(C)){if(!mr(O))return!1;Ae=!0,yt=!1}if(nt&&!yt)return pe||(pe=new qt),Ae||is(C)?li(C,O,L,te,_e,pe):Ko(C,O,Je,L,te,_e,pe);if(!(L&m)){var _t=yt&&Ee.call(C,"__wrapped__"),ut=Dt&&Ee.call(O,"__wrapped__");if(_t||ut){var yn=_t?C.value():C,cn=ut?O.value():O;return pe||(pe=new qt),_e(yn,cn,L,te,pe)}}return nt?(pe||(pe=new qt),Jo(C,O,L,te,_e,pe)):!1}function Go(C){if(!rs(C)||ea(C))return!1;var O=ns(C)?ie:U;return O.test(Ot(C))}function Vo(C){return Jt(C)&&ui(C.length)&&!!E[Xn(C)]}function qo(C){if(!ta(C))return Hn(C);var O=[];for(var L in Object(C))Ee.call(C,L)&&L!="constructor"&&O.push(L);return O}function li(C,O,L,te,_e,pe){var Ae=L&m,ke=C.length,Je=O.length;if(ke!=Je&&!(Ae&&Je>ke))return!1;var Re=pe.get(C);if(Re&&pe.get(O))return Re==O;var yt=-1,Dt=!0,nt=L&p?new hr:void 0;for(pe.set(C,O),pe.set(O,C);++yt<ke;){var _t=C[yt],ut=O[yt];if(te)var yn=Ae?te(ut,_t,yt,O,C,pe):te(_t,ut,yt,C,O,pe);if(yn!==void 0){if(yn)continue;Dt=!1;break}if(nt){if(!X(O,function(cn,Gn){if(!fe(nt,Gn)&&(_t===cn||_e(_t,cn,L,te,pe)))return nt.push(Gn)})){Dt=!1;break}}else if(!(_t===ut||_e(_t,ut,L,te,pe))){Dt=!1;break}}return pe.delete(C),pe.delete(O),Dt}function Ko(C,O,L,te,_e,pe,Ae){switch(L){case k:if(C.byteLength!=O.byteLength||C.byteOffset!=O.byteOffset)return!1;C=C.buffer,O=O.buffer;case W:return!(C.byteLength!=O.byteLength||!pe(new We(C),new We(O)));case c:case i:case l:return es(+C,+O);case o:return C.name==O.name&&C.message==O.message;case w:case T:return C==O+"";case d:var ke=$;case S:var Je=te&m;if(ke||(ke=he),C.size!=O.size&&!Je)return!1;var Re=Ae.get(C);if(Re)return Re==O;te|=p,Ae.set(C,O);var yt=li(ke(C),ke(O),te,_e,pe,Ae);return Ae.delete(C),yt;case x:if(si)return si.call(C)==si.call(O)}return!1}function Jo(C,O,L,te,_e,pe){var Ae=L&m,ke=Yn(C),Je=ke.length,Re=Yn(O),yt=Re.length;if(Je!=yt&&!Ae)return!1;for(var Dt=Je;Dt--;){var nt=ke[Dt];if(!(Ae?nt in O:Ee.call(O,nt)))return!1}var _t=pe.get(C);if(_t&&pe.get(O))return _t==O;var ut=!0;pe.set(C,O),pe.set(O,C);for(var yn=Ae;++Dt<Je;){nt=ke[Dt];var cn=C[nt],Gn=O[nt];if(te)var Cc=Ae?te(Gn,cn,nt,O,C,pe):te(cn,Gn,nt,C,O,pe);if(!(Cc===void 0?cn===Gn||_e(cn,Gn,L,te,pe):Cc)){ut=!1;break}yn||(yn=nt=="constructor")}if(ut&&!yn){var ss=C.constructor,os=O.constructor;ss!=os&&"constructor"in C&&"constructor"in O&&!(typeof ss=="function"&&ss instanceof ss&&typeof os=="function"&&os instanceof os)&&(ut=!1)}return pe.delete(C),pe.delete(O),ut}function Yn(C){return ai(C,fi,Zo)}function zt(C,O){var L=C.__data__;return $o(O)?L[typeof O=="string"?"string":"hash"]:L.map}function an(C,O){var L=le(C,O);return Go(L)?L:void 0}function ln(C){var O=Ee.call(C,Ht),L=C[Ht];try{C[Ht]=void 0;var te=!0}catch{}var _e=xt.call(C);return te&&(O?C[Ht]=L:delete C[Ht]),_e}var Zo=fr?function(C){return C==null?[]:(C=Object(C),z(fr(C),function(O){return mt.call(C,O)}))}:ra,Kt=Xn;(ti&&Kt(new ti(new ArrayBuffer(1)))!=k||zn&&Kt(new zn)!=d||ni&&Kt(ni.resolve())!=b||ri&&Kt(new ri)!=S||ii&&Kt(new ii)!=N)&&(Kt=function(C){var O=Xn(C),L=O==v?C.constructor:void 0,te=L?Ot(L):"";if(te)switch(te){case qi:return k;case on:return d;case Co:return b;case So:return S;case To:return N}return O});function Qo(C,O){return O=O==null?y:O,!!O&&(typeof C=="number"||A.test(C))&&C>-1&&C%1==0&&C<O}function $o(C){var O=typeof C;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?C!=="__proto__":C===null}function ea(C){return!!Xe&&Xe in C}function ta(C){var O=C&&C.constructor,L=typeof O=="function"&&O.prototype||Oe;return C===L}function $i(C){return xt.call(C)}function Ot(C){if(C!=null){try{return me.call(C)}catch{}try{return C+""}catch{}}return""}function es(C,O){return C===O||C!==C&&O!==O}var ts=Zi(function(){return arguments}())?Zi:function(C){return Jt(C)&&Ee.call(C,"callee")&&!mt.call(C,"callee")},pr=Array.isArray;function ci(C){return C!=null&&ui(C.length)&&!ns(C)}var mr=ei||ia;function na(C,O){return Qi(C,O)}function ns(C){if(!rs(C))return!1;var O=Xn(C);return O==s||O==u||O==a||O==_}function ui(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=y}function rs(C){var O=typeof C;return C!=null&&(O=="object"||O=="function")}function Jt(C){return C!=null&&typeof C=="object"}var is=F?re(F):Vo;function fi(C){return ci(C)?Xo(C):qo(C)}function ra(){return[]}function ia(){return!1}t.exports=na})(pl,pl.exports);var uT=pl.exports;const fT=(t,e)=>uT(t,e),hT=t=>Object.keys(t||{}),dT=(t,e)=>{const n={};return t.forEach(f=>{n[f]=e[f]}),n},gT=()=>{const t={},e=(n,f)=>{const{watcherName:m,fn:p}=n,{prop:y,value:h}=f;t[m]||(t[m]={deps:{},fn:p}),t[m].deps[y]=h};return{subscribers:t,subscribe(n,f){n&&e(n,f)},notify(n,f){Object.entries(t).forEach(([m,{deps:p,fn:y}])=>{const h=hT(p);if(h.includes(f)){const r=dT(h,n);fT(p,r)||(t[m].deps=r,y())}})}}},pT=()=>{let t=null;return{targetWatcher(e,n){t={watcherName:e,fn:n},t.fn(),t=null},getTarget(){return t}}};function mT(t,e){const n=Es(t,"data",{}),f=Es(t,"watch",{}),m=Es(t,"methods",{}),p=Es(e,"onChange",()=>{}),{subscribe:y,notify:h,subscribers:r}=gT(),{targetWatcher:a,getTarget:c}=pT();let i;const o={},s=()=>({data:i,methods:o});let u=!1;const d=g=>(...v)=>{u=!0;const b=g(...v);return u=!1,b};Object.entries(m).forEach(([g,v])=>{o[g]=d((...b)=>v(s(),...b)),Object.defineProperty(o[g],"name",{value:g})}),i=new Proxy(cT(n),{get(g,v){return c()&&!u&&y(c(),{prop:v,value:g[v]}),Reflect.get(...arguments)},set(g,v,b){return g[v]===b||(Reflect.set(...arguments),c()||(p&&p(v,b),h(i,v))),!0}}),Object.entries(f).forEach(([g,v])=>{a(g,()=>{v(s())})});const l=[i,o];return l._internal={_getSubscribers(){return r}},l}function vT({pageIndex:t,particlesToShow:e,particlesToScroll:n,particlesCount:f}){const m=t===0?0:e-n,p=t*e-t*m,y=p+Math.max(e,n)-1,h=[];for(let r=p;r<=Math.min(f-1,y);r++)h.push(r);return h}function yT({infinite:t,pageIndex:e,pagesCount:n,particlesCount:f,particlesToShow:m,particlesToScroll:p}){const y=Mr(0,e,n-1);let h=y-1,r=y+1;h=t?h<0?n-1:h:Math.max(0,h),r=t?r>n-1?0:r:Math.min(n-1,r);const a=[...new Set([h,y,r,0,n-1])].sort((i,o)=>i-o),c=a.flatMap(i=>vT({pageIndex:i,particlesToShow:m,particlesToScroll:p,particlesCount:f}));return{pageIndexes:a,particleIndexes:[...new Set(c)].sort((i,o)=>i-o)}}const _T=(t,e)=>(t(),setInterval(t,e)),bT=35,nf=1;class wT{constructor({onProgressValueChange:e}){this._onProgressValueChange=e,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(e){this._autoplayDuration=e}start(e){return new Promise(n=>{this.reset();const f=Math.min(bT,this._autoplayDuration);let m=-f;this._interval=_T(async()=>{if(this._paused)return;m+=f;const p=m/this._autoplayDuration;this._onProgressValueChange(p),p>nf&&(this.reset(),await e(),n())},f)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(nf)}}function CT(t){const e=new wT({onProgressValueChange:p=>{t("progressValue",1-p)}}),n=mT({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:p}){p.loaded=yT({infinite:p.infinite,pageIndex:p.currentPageIndex,pagesCount:p.pagesCount,particlesCount:p.particlesCountWithoutClones,particlesToShow:p.particlesToShow,particlesToScroll:p.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:p}){p.currentPageIndex=r1({currentParticleIndex:p.currentParticleIndex,particlesCount:p.particlesCount,clonesCountHead:p.clonesCountHead,clonesCountTotal:p.clonesCountTotal,infinite:p.infinite,particlesToScroll:p.particlesToScroll})},setPartialPageSize({data:p}){p.partialPageSize=Td({particlesToScroll:p.particlesToScroll,particlesToShow:p.particlesToShow,particlesCountWithoutClones:p.particlesCountWithoutClones})},setClonesCount({data:p}){const{head:y,tail:h}=h1({infinite:p.infinite,particlesToShow:p.particlesToShow,partialPageSize:p.partialPageSize});p.clonesCountHead=y,p.clonesCountTail=h,p.clonesCountTotal=y+h},setProgressManagerAutoplayDuration({data:p}){e.setAutoplayDuration(p.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:p,focused:y}}){p&&(y?e.pause():e.resume())},initDuration({data:p}){p.durationMs=p.durationMsInit},applyAutoplay({data:p,methods:{_applyAutoplayIfNeeded:y}}){p.autoplay&&y(p.autoplay)},setPagesCount({data:p}){p.pagesCount=s1({infinite:p.infinite,particlesCountWithoutClones:p.particlesCountWithoutClones,particlesToScroll:p.particlesToScroll,particlesToShow:p.particlesToShow})},setParticlesToShow({data:p}){p.particlesToShow=Mr(1,p.particlesToShowInit,p.particlesCountWithoutClones)},setParticlesToScroll({data:p}){p.particlesToScroll=Mr(1,p.particlesToScrollInit,p.particlesCountWithoutClones)}},methods:{_prev({data:p}){p.currentParticleIndex=Ra({infinite:p.infinite,pageIndex:p.currentPageIndex-1,clonesCountHead:p.clonesCountHead,clonesCountTail:p.clonesCountTail,particlesToScroll:p.particlesToScroll,particlesCount:p.particlesCount,particlesToShow:p.particlesToShow})},_next({data:p}){p.currentParticleIndex=Ra({infinite:p.infinite,pageIndex:p.currentPageIndex+1,clonesCountHead:p.clonesCountHead,clonesCountTail:p.clonesCountTail,particlesToScroll:p.particlesToScroll,particlesCount:p.particlesCount,particlesToShow:p.particlesToShow})},_moveToParticle({data:p},y){p.currentParticleIndex=Mr(0,y,p.particlesCount-1)},toggleFocused({data:p}){p.focused=!p.focused},async _applyAutoplayIfNeeded({data:p,methods:y}){if(!p.infinite&&(p.autoplayDirection===In&&p.currentParticleIndex===p.particlesCount-1||p.autoplayDirection===Xr&&p.currentParticleIndex===0)){e.reset();return}if(p.autoplay){const h=()=>dl({[In]:async()=>y.showNextPage(),[Xr]:async()=>y.showPrevPage()})(p.autoplayDirection);await e.start(h)}},async _jumpIfNeeded({data:p,methods:y}){let h=!1;return p.infinite&&(p.currentParticleIndex===0?(await y.showParticle(p.particlesCount-p.clonesCountTotal,{animated:!1}),h=!0):p.currentParticleIndex===p.particlesCount-p.clonesCountTail&&(await y.showParticle(p.clonesCountHead,{animated:!1}),h=!0)),h},async changePage({data:p,methods:y},h,r){if(e.reset(),p.disabled)return;p.disabled=!0,h(),await y.offsetPage({animated:Ti(r,"animated",!0)}),p.disabled=!1,!await y._jumpIfNeeded()&&y._applyAutoplayIfNeeded()},async showNextPage({data:p,methods:y},h){p.disabled||await y.changePage(y._next,h)},async showPrevPage({data:p,methods:y},h){p.disabled||await y.changePage(y._prev,h)},async showParticle({methods:p},y,h){await p.changePage(()=>p._moveToParticle(y),h)},_getParticleIndexByPageIndex({data:p},y){return Ra({infinite:p.infinite,pageIndex:y,clonesCountHead:p.clonesCountHead,clonesCountTail:p.clonesCountTail,particlesToScroll:p.particlesToScroll,particlesCount:p.particlesCount,particlesToShow:p.particlesToShow})},async showPage({methods:p},y,h){const r=p._getParticleIndexByPageIndex(y);await p.showParticle(r,h)},offsetPage({data:p},y){const h=Ti(y,"animated",!0);return new Promise(r=>{p.durationMs=h?p.durationMsInit:0,p.offset=-p.currentParticleIndex*p.particleWidth,setTimeout(()=>{r()},p.durationMs)})}}},{onChange:t}),[f,m]=n;return[{data:f,progressManager:e},m,n._internal]}const ST=t=>({currentPageIndex:t[0]&64,pagesCount:t[0]&1024,loaded:t[0]&32}),rf=t=>({currentPageIndex:t[6],pagesCount:t[10],showPage:t[15],loaded:t[5]}),TT=t=>({loaded:t[0]&32}),sf=t=>({showNextPage:t[14].showNextPage,loaded:t[5]}),xT=t=>({loaded:t[0]&32}),of=t=>({loaded:t[5]}),OT=t=>({loaded:t[0]&32}),af=t=>({showPrevPage:t[14].showPrevPage,loaded:t[5]});function lf(t){let e;const n=t[37].prev,f=Mn(n,t,t[36],af),m=f||ET(t);return{c(){m&&m.c()},m(p,y){m&&m.m(p,y),e=!0},p(p,y){f?f.p&&(!e||y[0]&32|y[1]&32)&&Bn(f,n,p,p[36],e?Ln(n,p[36],y,OT):jn(p[36]),af):m&&m.p&&(!e||y[0]&68)&&m.p(p,e?y:[-1,-1])},i(p){e||(de(m,p),e=!0)},o(p){ge(m,p),e=!1},d(p){m&&m.d(p)}}}function ET(t){let e,n,f;return n=new Cd({props:{direction:"prev",disabled:!t[2]&&t[6]===0}}),n.$on("click",t[23]),{c(){e=Te("div"),Le(n.$$.fragment),ce(e,"class","sc-carousel__arrow-container svelte-h7bw08")},m(m,p){Ce(m,e,p),Ie(n,e,null),f=!0},p(m,p){const y={};p[0]&68&&(y.disabled=!m[2]&&m[6]===0),n.$set(y)},i(m){f||(de(n.$$.fragment,m),f=!0)},o(m){ge(n.$$.fragment,m),f=!1},d(m){m&&we(e),Me(n)}}}function cf(t){let e,n,f;return n=new LS({props:{value:t[7]}}),{c(){e=Te("div"),Le(n.$$.fragment),ce(e,"class","sc-carousel-progress__container svelte-h7bw08")},m(m,p){Ce(m,e,p),Ie(n,e,null),f=!0},p(m,p){const y={};p[0]&128&&(y.value=m[7]),n.$set(y)},i(m){f||(de(n.$$.fragment,m),f=!0)},o(m){ge(n.$$.fragment,m),f=!1},d(m){m&&we(e),Me(n)}}}function uf(t){let e;const n=t[37].next,f=Mn(n,t,t[36],sf),m=f||AT(t);return{c(){m&&m.c()},m(p,y){m&&m.m(p,y),e=!0},p(p,y){f?f.p&&(!e||y[0]&32|y[1]&32)&&Bn(f,n,p,p[36],e?Ln(n,p[36],y,TT):jn(p[36]),sf):m&&m.p&&(!e||y[0]&1092)&&m.p(p,e?y:[-1,-1])},i(p){e||(de(m,p),e=!0)},o(p){ge(m,p),e=!1},d(p){m&&m.d(p)}}}function AT(t){let e,n,f;return n=new Cd({props:{direction:"next",disabled:!t[2]&&t[6]===t[10]-1}}),n.$on("click",t[14].showNextPage),{c(){e=Te("div"),Le(n.$$.fragment),ce(e,"class","sc-carousel__arrow-container svelte-h7bw08")},m(m,p){Ce(m,e,p),Ie(n,e,null),f=!0},p(m,p){const y={};p[0]&1092&&(y.disabled=!m[2]&&m[6]===m[10]-1),n.$set(y)},i(m){f||(de(n.$$.fragment,m),f=!0)},o(m){ge(n.$$.fragment,m),f=!1},d(m){m&&we(e),Me(n)}}}function ff(t){let e;const n=t[37].dots,f=Mn(n,t,t[36],rf),m=f||PT(t);return{c(){m&&m.c()},m(p,y){m&&m.m(p,y),e=!0},p(p,y){f?f.p&&(!e||y[0]&1120|y[1]&32)&&Bn(f,n,p,p[36],e?Ln(n,p[36],y,ST):jn(p[36]),rf):m&&m.p&&(!e||y[0]&1088)&&m.p(p,e?y:[-1,-1])},i(p){e||(de(m,p),e=!0)},o(p){ge(m,p),e=!1},d(p){m&&m.d(p)}}}function PT(t){let e,n;return e=new kS({props:{pagesCount:t[10],currentPageIndex:t[6]}}),e.$on("pageChange",t[41]),{c(){Le(e.$$.fragment)},m(f,m){Ie(e,f,m),n=!0},p(f,m){const p={};m[0]&1024&&(p.pagesCount=f[10]),m[0]&64&&(p.currentPageIndex=f[6]),e.$set(p)},i(f){n||(de(e.$$.fragment,f),n=!0)},o(f){ge(e.$$.fragment,f),n=!1},d(f){Me(e,f)}}}function DT(t){let e,n,f,m,p,y,h,r,a,c,i,o,s=t[1]&&lf(t);const u=t[37].default,d=Mn(u,t,t[36],of);let l=t[3]&&cf(t),g=t[1]&&uf(t),v=t[4]&&ff(t);return{c(){e=Te("div"),n=Te("div"),s&&s.c(),f=Ft(),m=Te("div"),p=Te("div"),d&&d.c(),h=Ft(),l&&l.c(),r=Ft(),g&&g.c(),a=Ft(),v&&v.c(),ce(p,"class","sc-carousel__pages-container svelte-h7bw08"),$e(p,"transform","translateX("+t[8]+"px)"),$e(p,"transition-duration",t[9]+"ms"),$e(p,"transition-timing-function",t[0]),ce(m,"class","sc-carousel__pages-window svelte-h7bw08"),ce(n,"class","sc-carousel__content-container svelte-h7bw08"),ce(e,"class","sc-carousel__carousel-container svelte-h7bw08")},m(b,_){Ce(b,e,_),ze(e,n),s&&s.m(n,null),ze(n,f),ze(n,m),ze(m,p),d&&d.m(p,null),t[39](p),ze(m,h),l&&l.m(m,null),t[40](m),ze(n,r),g&&g.m(n,null),ze(e,a),v&&v.m(e,null),c=!0,i||(o=[sa(y=YS.call(null,p,{thresholdProvider:t[38]})),ve(p,"swipeStart",t[16]),ve(p,"swipeMove",t[18]),ve(p,"swipeEnd",t[19]),ve(p,"swipeFailed",t[20]),ve(p,"swipeThresholdReached",t[17]),sa(KS.call(null,m)),ve(m,"hovered",t[21]),sa(e1.call(null,m)),ve(m,"tapped",t[22])],i=!0)},p(b,_){b[1]?s?(s.p(b,_),_[0]&2&&de(s,1)):(s=lf(b),s.c(),de(s,1),s.m(n,f)):s&&(qe(),ge(s,1,1,()=>{s=null}),Ke()),d&&d.p&&(!c||_[0]&32|_[1]&32)&&Bn(d,u,b,b[36],c?Ln(u,b[36],_,xT):jn(b[36]),of),(!c||_[0]&256)&&$e(p,"transform","translateX("+b[8]+"px)"),(!c||_[0]&512)&&$e(p,"transition-duration",b[9]+"ms"),(!c||_[0]&1)&&$e(p,"transition-timing-function",b[0]),y&&tn(y.update)&&_[0]&2048&&y.update.call(null,{thresholdProvider:b[38]}),b[3]?l?(l.p(b,_),_[0]&8&&de(l,1)):(l=cf(b),l.c(),de(l,1),l.m(m,null)):l&&(qe(),ge(l,1,1,()=>{l=null}),Ke()),b[1]?g?(g.p(b,_),_[0]&2&&de(g,1)):(g=uf(b),g.c(),de(g,1),g.m(n,null)):g&&(qe(),ge(g,1,1,()=>{g=null}),Ke()),b[4]?v?(v.p(b,_),_[0]&16&&de(v,1)):(v=ff(b),v.c(),de(v,1),v.m(e,null)):v&&(qe(),ge(v,1,1,()=>{v=null}),Ke())},i(b){c||(de(s),de(d,b),de(l),de(g),de(v),c=!0)},o(b){ge(s),ge(d,b),ge(l),ge(g),ge(v),c=!1},d(b){b&&we(e),s&&s.d(),d&&d.d(b),t[39](null),l&&l.d(),t[40](null),g&&g.d(),v&&v.d(),i=!1,Tt(o)}}}function kT(t,e,n){let{$$slots:f={},$$scope:m}=e,p=[],y,h,r=0,a=0,c=1;const[{data:i,progressManager:o},s,u]=CT((F,z)=>{dl({currentPageIndex:()=>n(6,y=z),progressValue:()=>n(7,h=z),offset:()=>n(8,r=z),durationMs:()=>n(9,a=z),pagesCount:()=>n(10,c=z),loaded:()=>n(5,p=z)})(F)});Hi();let{timingFunction:d="ease-in-out"}=e,{arrows:l=!0}=e,{infinite:g=!0}=e,{initialPageIndex:v=0}=e,{duration:b=500}=e,{autoplay:_=!1}=e,{autoplayDuration:w=3e3}=e,{autoplayDirection:S=In}=e,{pauseOnFocus:T=!1}=e,{autoplayProgressVisible:x=!1}=e,{dots:D=!0}=e,{swiping:N=!0}=e,{particlesToShow:W=1}=e,{particlesToScroll:k=1}=e;async function q(F,z){const Z=Ti(z,"animated",!0);if(typeof F!="number")throw new Error("pageIndex should be a number");await s.showPage(F,{animated:Z})}async function K(F){const z=Ti(F,"animated",!0);await s.showPrevPage({animated:z})}async function ne(F){const z=Ti(F,"animated",!0);await s.showNextPage({animated:z})}let se=0,oe,ae;const I=c1(({width:F})=>{n(11,se=F),i.particleWidth=se/i.particlesToShow,l1({particlesContainerChildren:ae.children,particleWidth:i.particleWidth}),s.offsetPage({animated:!1})});function H(){const{clonesToAppend:F,clonesToPrepend:z}=u1({clonesCountHead:i.clonesCountHead,clonesCountTail:i.clonesCountTail,particlesContainerChildren:ae.children});f1({particlesContainer:ae,clonesToAppend:F,clonesToPrepend:z})}yl(()=>{(async()=>(await Dc(),ae&&oe&&(i.particlesCountWithoutClones=ae.children.length,await Dc(),i.infinite&&H(),i.particlesCount=ae.children.length,s.showPage(v,{animated:!1}),I.observe(oe))))()}),Cf(()=>{I.disconnect(),o.reset()});async function P(F){await s.showPage(F,{animated:!0})}function j(){!N||(i.durationMs=0)}async function U(F){!N||await dl({[In]:s.showNextPage,[Xr]:s.showPrevPage})(F.detail.direction)}function A(F){!N||(i.offset+=F.detail.dx)}function E(){!N||s.showParticle(i.currentParticleIndex)}async function M(){!N||await s.offsetPage({animated:!0})}function R(F){i.focused=F.detail.value}function J(){s.toggleFocused()}function B(){s.showPrevPage()}const G=()=>se/3;function V(F){Ne[F?"unshift":"push"](()=>{ae=F,n(13,ae)})}function Q(F){Ne[F?"unshift":"push"](()=>{oe=F,n(12,oe)})}const Y=F=>P(F.detail);return t.$$set=F=>{"timingFunction"in F&&n(0,d=F.timingFunction),"arrows"in F&&n(1,l=F.arrows),"infinite"in F&&n(2,g=F.infinite),"initialPageIndex"in F&&n(24,v=F.initialPageIndex),"duration"in F&&n(25,b=F.duration),"autoplay"in F&&n(26,_=F.autoplay),"autoplayDuration"in F&&n(27,w=F.autoplayDuration),"autoplayDirection"in F&&n(28,S=F.autoplayDirection),"pauseOnFocus"in F&&n(29,T=F.pauseOnFocus),"autoplayProgressVisible"in F&&n(3,x=F.autoplayProgressVisible),"dots"in F&&n(4,D=F.dots),"swiping"in F&&n(30,N=F.swiping),"particlesToShow"in F&&n(31,W=F.particlesToShow),"particlesToScroll"in F&&n(32,k=F.particlesToScroll),"$$scope"in F&&n(36,m=F.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4&&(i.infinite=g),t.$$.dirty[0]&33554432&&(i.durationMsInit=b),t.$$.dirty[0]&67108864&&(i.autoplay=_),t.$$.dirty[0]&134217728&&(i.autoplayDuration=w),t.$$.dirty[0]&268435456&&(i.autoplayDirection=S),t.$$.dirty[0]&536870912&&(i.pauseOnFocus=T),t.$$.dirty[1]&1&&(i.particlesToShowInit=W),t.$$.dirty[1]&2&&(i.particlesToScrollInit=k)},[d,l,g,x,D,p,y,h,r,a,c,se,oe,ae,s,P,j,U,A,E,M,R,J,B,v,b,_,w,S,T,N,W,k,q,K,ne,m,f,G,V,Q,Y]}class hx extends ot{constructor(e){super();st(this,e,kT,DT,tt,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},null,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}export{qT as $,Ie as A,de as B,ge as C,Me as D,jT as E,gn as F,qe as G,Ke as H,Tt as I,ir as J,tx as K,sx as L,ix as M,nx as N,rx as O,ex as P,ax as Q,Eu as R,ot as S,Ac as T,tn as U,zT as V,HT as W,sa as X,cx as Y,Zd as Z,ox as _,ce as a,lx as a0,ux as a1,Lr as a2,hs as a3,KT as a4,LT as a5,QT as a6,BT as a7,XT as a8,fx as a9,$d as aa,MT as ab,YT as ac,GT as ad,NT as ae,UT as af,JT as ag,WT as ah,Ef as ai,hx as aj,VT as ak,Vd as al,ZT as am,Ce as b,ze as c,we as d,Te as e,Hi as f,ag as g,Ne as h,st as i,IT as j,$e as k,$T as l,Cf as m,xe as n,yl as o,Ft as p,ve as q,Pc as r,tt as s,Qn as t,Nn as u,RT as v,kf as w,cs as x,Ut as y,Le as z};
